function f0e(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in t)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(t,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();var X=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function l6(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ym(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var o=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,o.get?o:{enumerable:!0,get:function(){return t[i]}})}),n}var d0e={exports:{}},vI={},h0e={exports:{}},di={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c6=Symbol.for("react.element"),h8e=Symbol.for("react.portal"),p8e=Symbol.for("react.fragment"),m8e=Symbol.for("react.strict_mode"),g8e=Symbol.for("react.profiler"),v8e=Symbol.for("react.provider"),_8e=Symbol.for("react.context"),y8e=Symbol.for("react.forward_ref"),b8e=Symbol.for("react.suspense"),A8e=Symbol.for("react.memo"),w8e=Symbol.for("react.lazy"),one=Symbol.iterator;function E8e(t){return t===null||typeof t!="object"?null:(t=one&&t[one]||t["@@iterator"],typeof t=="function"?t:null)}var p0e={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m0e=Object.assign,g0e={};function N4(t,e,n){this.props=t,this.context=e,this.refs=g0e,this.updater=n||p0e}N4.prototype.isReactComponent={};N4.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};N4.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function v0e(){}v0e.prototype=N4.prototype;function hY(t,e,n){this.props=t,this.context=e,this.refs=g0e,this.updater=n||p0e}var pY=hY.prototype=new v0e;pY.constructor=hY;m0e(pY,N4.prototype);pY.isPureReactComponent=!0;var ane=Array.isArray,_0e=Object.prototype.hasOwnProperty,mY={current:null},y0e={key:!0,ref:!0,__self:!0,__source:!0};function b0e(t,e,n){var i,o={},l=null,d=null;if(e!=null)for(i in e.ref!==void 0&&(d=e.ref),e.key!==void 0&&(l=""+e.key),e)_0e.call(e,i)&&!y0e.hasOwnProperty(i)&&(o[i]=e[i]);var p=arguments.length-2;if(p===1)o.children=n;else if(1<p){for(var g=Array(p),v=0;v<p;v++)g[v]=arguments[v+2];o.children=g}if(t&&t.defaultProps)for(i in p=t.defaultProps,p)o[i]===void 0&&(o[i]=p[i]);return{$$typeof:c6,type:t,key:l,ref:d,props:o,_owner:mY.current}}function S8e(t,e){return{$$typeof:c6,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function gY(t){return typeof t=="object"&&t!==null&&t.$$typeof===c6}function T8e(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var lne=/\/+/g;function fU(t,e){return typeof t=="object"&&t!==null&&t.key!=null?T8e(""+t.key):e.toString(36)}function NC(t,e,n,i,o){var l=typeof t;(l==="undefined"||l==="boolean")&&(t=null);var d=!1;if(t===null)d=!0;else switch(l){case"string":case"number":d=!0;break;case"object":switch(t.$$typeof){case c6:case h8e:d=!0}}if(d)return d=t,o=o(d),t=i===""?"."+fU(d,0):i,ane(o)?(n="",t!=null&&(n=t.replace(lne,"$&/")+"/"),NC(o,e,n,"",function(v){return v})):o!=null&&(gY(o)&&(o=S8e(o,n+(!o.key||d&&d.key===o.key?"":(""+o.key).replace(lne,"$&/")+"/")+t)),e.push(o)),1;if(d=0,i=i===""?".":i+":",ane(t))for(var p=0;p<t.length;p++){l=t[p];var g=i+fU(l,p);d+=NC(l,e,n,g,o)}else if(g=E8e(t),typeof g=="function")for(t=g.call(t),p=0;!(l=t.next()).done;)l=l.value,g=i+fU(l,p++),d+=NC(l,e,n,g,o);else if(l==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return d}function l8(t,e,n){if(t==null)return t;var i=[],o=0;return NC(t,i,"","",function(l){return e.call(n,l,o++)}),i}function x8e(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Kl={current:null},LC={transition:null},M8e={ReactCurrentDispatcher:Kl,ReactCurrentBatchConfig:LC,ReactCurrentOwner:mY};function A0e(){throw Error("act(...) is not supported in production builds of React.")}di.Children={map:l8,forEach:function(t,e,n){l8(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return l8(t,function(){e++}),e},toArray:function(t){return l8(t,function(e){return e})||[]},only:function(t){if(!gY(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};di.Component=N4;di.Fragment=p8e;di.Profiler=g8e;di.PureComponent=hY;di.StrictMode=m8e;di.Suspense=b8e;di.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M8e;di.act=A0e;di.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=m0e({},t.props),o=t.key,l=t.ref,d=t._owner;if(e!=null){if(e.ref!==void 0&&(l=e.ref,d=mY.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var p=t.type.defaultProps;for(g in e)_0e.call(e,g)&&!y0e.hasOwnProperty(g)&&(i[g]=e[g]===void 0&&p!==void 0?p[g]:e[g])}var g=arguments.length-2;if(g===1)i.children=n;else if(1<g){p=Array(g);for(var v=0;v<g;v++)p[v]=arguments[v+2];i.children=p}return{$$typeof:c6,type:t.type,key:o,ref:l,props:i,_owner:d}};di.createContext=function(t){return t={$$typeof:_8e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:v8e,_context:t},t.Consumer=t};di.createElement=b0e;di.createFactory=function(t){var e=b0e.bind(null,t);return e.type=t,e};di.createRef=function(){return{current:null}};di.forwardRef=function(t){return{$$typeof:y8e,render:t}};di.isValidElement=gY;di.lazy=function(t){return{$$typeof:w8e,_payload:{_status:-1,_result:t},_init:x8e}};di.memo=function(t,e){return{$$typeof:A8e,type:t,compare:e===void 0?null:e}};di.startTransition=function(t){var e=LC.transition;LC.transition={};try{t()}finally{LC.transition=e}};di.unstable_act=A0e;di.useCallback=function(t,e){return Kl.current.useCallback(t,e)};di.useContext=function(t){return Kl.current.useContext(t)};di.useDebugValue=function(){};di.useDeferredValue=function(t){return Kl.current.useDeferredValue(t)};di.useEffect=function(t,e){return Kl.current.useEffect(t,e)};di.useId=function(){return Kl.current.useId()};di.useImperativeHandle=function(t,e,n){return Kl.current.useImperativeHandle(t,e,n)};di.useInsertionEffect=function(t,e){return Kl.current.useInsertionEffect(t,e)};di.useLayoutEffect=function(t,e){return Kl.current.useLayoutEffect(t,e)};di.useMemo=function(t,e){return Kl.current.useMemo(t,e)};di.useReducer=function(t,e,n){return Kl.current.useReducer(t,e,n)};di.useRef=function(t){return Kl.current.useRef(t)};di.useState=function(t){return Kl.current.useState(t)};di.useSyncExternalStore=function(t,e,n){return Kl.current.useSyncExternalStore(t,e,n)};di.useTransition=function(){return Kl.current.useTransition()};di.version="18.3.1";h0e.exports=di;var de=h0e.exports;const gd=l6(de),k8e=f0e({__proto__:null,default:gd},[de]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C8e=de,P8e=Symbol.for("react.element"),R8e=Symbol.for("react.fragment"),D8e=Object.prototype.hasOwnProperty,O8e=C8e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,I8e={key:!0,ref:!0,__self:!0,__source:!0};function w0e(t,e,n){var i,o={},l=null,d=null;n!==void 0&&(l=""+n),e.key!==void 0&&(l=""+e.key),e.ref!==void 0&&(d=e.ref);for(i in e)D8e.call(e,i)&&!I8e.hasOwnProperty(i)&&(o[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)o[i]===void 0&&(o[i]=e[i]);return{$$typeof:P8e,type:t,key:l,ref:d,props:o,_owner:O8e.current}}vI.Fragment=R8e;vI.jsx=w0e;vI.jsxs=w0e;d0e.exports=vI;var Y=d0e.exports;const E0e="shapediver.com",N8e="staging-wwwcdn.us-east-1.shapediver.com",L8e="dev-wwwcdn.us-east-1.shapediver.com",z8e="sandbox-wwwcdn.us-east-1.shapediver.com";function S0e(){return zS()?origin:`https://${E0e}`}function zS(){const t=window.location.hostname;return t===N8e||t==="staging-spa.us-east-1.shapediver.com"||t===L8e||t==="dev-spa.us-east-1.shapediver.com"||t===z8e||t==="sandbox-spa.us-east-1.shapediver.com"?!0:t===E0e||t==="www.shapediver.com"}var cne={},T0e={exports:{}},Ou={},x0e={exports:{}},M0e={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ye,pe){var oe=ye.length;ye.push(pe);e:for(;0<oe;){var Ce=oe-1>>>1,it=ye[Ce];if(0<o(it,pe))ye[Ce]=pe,ye[oe]=it,oe=Ce;else break e}}function n(ye){return ye.length===0?null:ye[0]}function i(ye){if(ye.length===0)return null;var pe=ye[0],oe=ye.pop();if(oe!==pe){ye[0]=oe;e:for(var Ce=0,it=ye.length,Se=it>>>1;Ce<Se;){var Oe=2*(Ce+1)-1,ct=ye[Oe],_t=Oe+1,Nt=ye[_t];if(0>o(ct,oe))_t<it&&0>o(Nt,ct)?(ye[Ce]=Nt,ye[_t]=oe,Ce=_t):(ye[Ce]=ct,ye[Oe]=oe,Ce=Oe);else if(_t<it&&0>o(Nt,oe))ye[Ce]=Nt,ye[_t]=oe,Ce=_t;else break e}}return pe}function o(ye,pe){var oe=ye.sortIndex-pe.sortIndex;return oe!==0?oe:ye.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var d=Date,p=d.now();t.unstable_now=function(){return d.now()-p}}var g=[],v=[],_=1,b=null,w=3,E=!1,S=!1,M=!1,k=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(ye){for(var pe=n(v);pe!==null;){if(pe.callback===null)i(v);else if(pe.startTime<=ye)i(v),pe.sortIndex=pe.expirationTime,e(g,pe);else break;pe=n(v)}}function O(ye){if(M=!1,P(ye),!S)if(n(g)!==null)S=!0,me(L);else{var pe=n(v);pe!==null&&be(O,pe.startTime-ye)}}function L(ye,pe){S=!1,M&&(M=!1,x(G),G=-1),E=!0;var oe=w;try{for(P(pe),b=n(g);b!==null&&(!(b.expirationTime>pe)||ye&&!q());){var Ce=b.callback;if(typeof Ce=="function"){b.callback=null,w=b.priorityLevel;var it=Ce(b.expirationTime<=pe);pe=t.unstable_now(),typeof it=="function"?b.callback=it:b===n(g)&&i(g),P(pe)}else i(g);b=n(g)}if(b!==null)var Se=!0;else{var Oe=n(v);Oe!==null&&be(O,Oe.startTime-pe),Se=!1}return Se}finally{b=null,w=oe,E=!1}}var B=!1,V=null,G=-1,j=5,F=-1;function q(){return!(t.unstable_now()-F<j)}function fe(){if(V!==null){var ye=t.unstable_now();F=ye;var pe=!0;try{pe=V(!0,ye)}finally{pe?ue():(B=!1,V=null)}}else B=!1}var ue;if(typeof C=="function")ue=function(){C(fe)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,le=J.port2;J.port1.onmessage=fe,ue=function(){le.postMessage(null)}}else ue=function(){k(fe,0)};function me(ye){V=ye,B||(B=!0,ue())}function be(ye,pe){G=k(function(){ye(t.unstable_now())},pe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ye){ye.callback=null},t.unstable_continueExecution=function(){S||E||(S=!0,me(L))},t.unstable_forceFrameRate=function(ye){0>ye||125<ye?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<ye?Math.floor(1e3/ye):5},t.unstable_getCurrentPriorityLevel=function(){return w},t.unstable_getFirstCallbackNode=function(){return n(g)},t.unstable_next=function(ye){switch(w){case 1:case 2:case 3:var pe=3;break;default:pe=w}var oe=w;w=pe;try{return ye()}finally{w=oe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ye,pe){switch(ye){case 1:case 2:case 3:case 4:case 5:break;default:ye=3}var oe=w;w=ye;try{return pe()}finally{w=oe}},t.unstable_scheduleCallback=function(ye,pe,oe){var Ce=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?Ce+oe:Ce):oe=Ce,ye){case 1:var it=-1;break;case 2:it=250;break;case 5:it=1073741823;break;case 4:it=1e4;break;default:it=5e3}return it=oe+it,ye={id:_++,callback:pe,priorityLevel:ye,startTime:oe,expirationTime:it,sortIndex:-1},oe>Ce?(ye.sortIndex=oe,e(v,ye),n(g)===null&&ye===n(v)&&(M?(x(G),G=-1):M=!0,be(O,oe-Ce))):(ye.sortIndex=it,e(g,ye),S||E||(S=!0,me(L))),ye},t.unstable_shouldYield=q,t.unstable_wrapCallback=function(ye){var pe=w;return function(){var oe=w;w=pe;try{return ye.apply(this,arguments)}finally{w=oe}}}})(M0e);x0e.exports=M0e;var B8e=x0e.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U8e=de,Mu=B8e;function tn(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var k0e=new Set,nT={};function iv(t,e){kb(t,e),kb(t+"Capture",e)}function kb(t,e){for(nT[t]=e,t=0;t<e.length;t++)k0e.add(e[t])}var np=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bj=Object.prototype.hasOwnProperty,F8e=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,une={},fne={};function V8e(t){return bj.call(fne,t)?!0:bj.call(une,t)?!1:F8e.test(t)?fne[t]=!0:(une[t]=!0,!1)}function G8e(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function j8e(t,e,n,i){if(e===null||typeof e>"u"||G8e(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Jl(t,e,n,i,o,l,d){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=l,this.removeEmptyString=d}var Za={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Za[t]=new Jl(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Za[e]=new Jl(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Za[t]=new Jl(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Za[t]=new Jl(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Za[t]=new Jl(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Za[t]=new Jl(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Za[t]=new Jl(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Za[t]=new Jl(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Za[t]=new Jl(t,5,!1,t.toLowerCase(),null,!1,!1)});var vY=/[\-:]([a-z])/g;function _Y(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(vY,_Y);Za[e]=new Jl(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(vY,_Y);Za[e]=new Jl(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(vY,_Y);Za[e]=new Jl(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Za[t]=new Jl(t,1,!1,t.toLowerCase(),null,!1,!1)});Za.xlinkHref=new Jl("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Za[t]=new Jl(t,1,!1,t.toLowerCase(),null,!0,!0)});function yY(t,e,n,i){var o=Za.hasOwnProperty(e)?Za[e]:null;(o!==null?o.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(j8e(e,n,o,i)&&(n=null),i||o===null?V8e(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,i=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var _p=U8e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,c8=Symbol.for("react.element"),qy=Symbol.for("react.portal"),Xy=Symbol.for("react.fragment"),bY=Symbol.for("react.strict_mode"),Aj=Symbol.for("react.profiler"),C0e=Symbol.for("react.provider"),P0e=Symbol.for("react.context"),AY=Symbol.for("react.forward_ref"),wj=Symbol.for("react.suspense"),Ej=Symbol.for("react.suspense_list"),wY=Symbol.for("react.memo"),T2=Symbol.for("react.lazy"),R0e=Symbol.for("react.offscreen"),dne=Symbol.iterator;function ZA(t){return t===null||typeof t!="object"?null:(t=dne&&t[dne]||t["@@iterator"],typeof t=="function"?t:null)}var lo=Object.assign,dU;function ww(t){if(dU===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);dU=e&&e[1]||""}return`
`+dU+t}var hU=!1;function pU(t,e){if(!t||hU)return"";hU=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(v){var i=v}Reflect.construct(t,[],e)}else{try{e.call()}catch(v){i=v}t.call(e.prototype)}else{try{throw Error()}catch(v){i=v}t()}}catch(v){if(v&&i&&typeof v.stack=="string"){for(var o=v.stack.split(`
`),l=i.stack.split(`
`),d=o.length-1,p=l.length-1;1<=d&&0<=p&&o[d]!==l[p];)p--;for(;1<=d&&0<=p;d--,p--)if(o[d]!==l[p]){if(d!==1||p!==1)do if(d--,p--,0>p||o[d]!==l[p]){var g=`
`+o[d].replace(" at new "," at ");return t.displayName&&g.includes("<anonymous>")&&(g=g.replace("<anonymous>",t.displayName)),g}while(1<=d&&0<=p);break}}}finally{hU=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ww(t):""}function H8e(t){switch(t.tag){case 5:return ww(t.type);case 16:return ww("Lazy");case 13:return ww("Suspense");case 19:return ww("SuspenseList");case 0:case 2:case 15:return t=pU(t.type,!1),t;case 11:return t=pU(t.type.render,!1),t;case 1:return t=pU(t.type,!0),t;default:return""}}function Sj(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Xy:return"Fragment";case qy:return"Portal";case Aj:return"Profiler";case bY:return"StrictMode";case wj:return"Suspense";case Ej:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case P0e:return(t.displayName||"Context")+".Consumer";case C0e:return(t._context.displayName||"Context")+".Provider";case AY:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case wY:return e=t.displayName||null,e!==null?e:Sj(t.type)||"Memo";case T2:e=t._payload,t=t._init;try{return Sj(t(e))}catch{}}return null}function $8e(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Sj(e);case 8:return e===bY?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function om(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function D0e(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function W8e(t){var e=D0e(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,l=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(d){i=""+d,l.call(this,d)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(d){i=""+d},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function u8(t){t._valueTracker||(t._valueTracker=W8e(t))}function O0e(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=D0e(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function sO(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Tj(t,e){var n=e.checked;return lo({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function hne(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=om(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function I0e(t,e){e=e.checked,e!=null&&yY(t,"checked",e,!1)}function xj(t,e){I0e(t,e);var n=om(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Mj(t,e.type,n):e.hasOwnProperty("defaultValue")&&Mj(t,e.type,om(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function pne(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Mj(t,e,n){(e!=="number"||sO(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ew=Array.isArray;function pb(t,e,n,i){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&i&&(t[n].defaultSelected=!0)}else{for(n=""+om(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,i&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function kj(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(tn(91));return lo({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function mne(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(tn(92));if(Ew(n)){if(1<n.length)throw Error(tn(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:om(n)}}function N0e(t,e){var n=om(e.value),i=om(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function gne(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function L0e(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cj(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?L0e(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var f8,z0e=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(f8=f8||document.createElement("div"),f8.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=f8.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function rT(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var BS={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Y8e=["Webkit","ms","Moz","O"];Object.keys(BS).forEach(function(t){Y8e.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),BS[e]=BS[t]})});function B0e(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||BS.hasOwnProperty(t)&&BS[t]?(""+e).trim():e+"px"}function U0e(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,o=B0e(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,o):t[n]=o}}var q8e=lo({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pj(t,e){if(e){if(q8e[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(tn(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(tn(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(tn(61))}if(e.style!=null&&typeof e.style!="object")throw Error(tn(62))}}function Rj(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dj=null;function EY(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Oj=null,mb=null,gb=null;function vne(t){if(t=d6(t)){if(typeof Oj!="function")throw Error(tn(280));var e=t.stateNode;e&&(e=wI(e),Oj(t.stateNode,t.type,e))}}function F0e(t){mb?gb?gb.push(t):gb=[t]:mb=t}function V0e(){if(mb){var t=mb,e=gb;if(gb=mb=null,vne(t),e)for(t=0;t<e.length;t++)vne(e[t])}}function G0e(t,e){return t(e)}function j0e(){}var mU=!1;function H0e(t,e,n){if(mU)return t(e,n);mU=!0;try{return G0e(t,e,n)}finally{mU=!1,(mb!==null||gb!==null)&&(j0e(),V0e())}}function iT(t,e){var n=t.stateNode;if(n===null)return null;var i=wI(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(tn(231,e,typeof n));return n}var Ij=!1;if(np)try{var QA={};Object.defineProperty(QA,"passive",{get:function(){Ij=!0}}),window.addEventListener("test",QA,QA),window.removeEventListener("test",QA,QA)}catch{Ij=!1}function X8e(t,e,n,i,o,l,d,p,g){var v=Array.prototype.slice.call(arguments,3);try{e.apply(n,v)}catch(_){this.onError(_)}}var US=!1,oO=null,aO=!1,Nj=null,Z8e={onError:function(t){US=!0,oO=t}};function Q8e(t,e,n,i,o,l,d,p,g){US=!1,oO=null,X8e.apply(Z8e,arguments)}function K8e(t,e,n,i,o,l,d,p,g){if(Q8e.apply(this,arguments),US){if(US){var v=oO;US=!1,oO=null}else throw Error(tn(198));aO||(aO=!0,Nj=v)}}function sv(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function $0e(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function _ne(t){if(sv(t)!==t)throw Error(tn(188))}function J8e(t){var e=t.alternate;if(!e){if(e=sv(t),e===null)throw Error(tn(188));return e!==t?null:t}for(var n=t,i=e;;){var o=n.return;if(o===null)break;var l=o.alternate;if(l===null){if(i=o.return,i!==null){n=i;continue}break}if(o.child===l.child){for(l=o.child;l;){if(l===n)return _ne(o),t;if(l===i)return _ne(o),e;l=l.sibling}throw Error(tn(188))}if(n.return!==i.return)n=o,i=l;else{for(var d=!1,p=o.child;p;){if(p===n){d=!0,n=o,i=l;break}if(p===i){d=!0,i=o,n=l;break}p=p.sibling}if(!d){for(p=l.child;p;){if(p===n){d=!0,n=l,i=o;break}if(p===i){d=!0,i=l,n=o;break}p=p.sibling}if(!d)throw Error(tn(189))}}if(n.alternate!==i)throw Error(tn(190))}if(n.tag!==3)throw Error(tn(188));return n.stateNode.current===n?t:e}function W0e(t){return t=J8e(t),t!==null?Y0e(t):null}function Y0e(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Y0e(t);if(e!==null)return e;t=t.sibling}return null}var q0e=Mu.unstable_scheduleCallback,yne=Mu.unstable_cancelCallback,eke=Mu.unstable_shouldYield,tke=Mu.unstable_requestPaint,Co=Mu.unstable_now,nke=Mu.unstable_getCurrentPriorityLevel,SY=Mu.unstable_ImmediatePriority,X0e=Mu.unstable_UserBlockingPriority,lO=Mu.unstable_NormalPriority,rke=Mu.unstable_LowPriority,Z0e=Mu.unstable_IdlePriority,_I=null,Td=null;function ike(t){if(Td&&typeof Td.onCommitFiberRoot=="function")try{Td.onCommitFiberRoot(_I,t,void 0,(t.current.flags&128)===128)}catch{}}var w0=Math.clz32?Math.clz32:ake,ske=Math.log,oke=Math.LN2;function ake(t){return t>>>=0,t===0?32:31-(ske(t)/oke|0)|0}var d8=64,h8=4194304;function Sw(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function cO(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,o=t.suspendedLanes,l=t.pingedLanes,d=n&268435455;if(d!==0){var p=d&~o;p!==0?i=Sw(p):(l&=d,l!==0&&(i=Sw(l)))}else d=n&~o,d!==0?i=Sw(d):l!==0&&(i=Sw(l));if(i===0)return 0;if(e!==0&&e!==i&&!(e&o)&&(o=i&-i,l=e&-e,o>=l||o===16&&(l&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-w0(e),o=1<<n,i|=t[n],e&=~o;return i}function lke(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cke(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,o=t.expirationTimes,l=t.pendingLanes;0<l;){var d=31-w0(l),p=1<<d,g=o[d];g===-1?(!(p&n)||p&i)&&(o[d]=lke(p,e)):g<=e&&(t.expiredLanes|=p),l&=~p}}function Lj(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Q0e(){var t=d8;return d8<<=1,!(d8&4194240)&&(d8=64),t}function gU(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function u6(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-w0(e),t[e]=n}function uke(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-w0(n),l=1<<o;e[o]=0,i[o]=-1,t[o]=-1,n&=~l}}function TY(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-w0(n),o=1<<i;o&e|t[i]&e&&(t[i]|=e),n&=~o}}var ds=0;function K0e(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var J0e,xY,ede,tde,nde,zj=!1,p8=[],$2=null,W2=null,Y2=null,sT=new Map,oT=new Map,R2=[],fke="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bne(t,e){switch(t){case"focusin":case"focusout":$2=null;break;case"dragenter":case"dragleave":W2=null;break;case"mouseover":case"mouseout":Y2=null;break;case"pointerover":case"pointerout":sT.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":oT.delete(e.pointerId)}}function KA(t,e,n,i,o,l){return t===null||t.nativeEvent!==l?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:l,targetContainers:[o]},e!==null&&(e=d6(e),e!==null&&xY(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function dke(t,e,n,i,o){switch(e){case"focusin":return $2=KA($2,t,e,n,i,o),!0;case"dragenter":return W2=KA(W2,t,e,n,i,o),!0;case"mouseover":return Y2=KA(Y2,t,e,n,i,o),!0;case"pointerover":var l=o.pointerId;return sT.set(l,KA(sT.get(l)||null,t,e,n,i,o)),!0;case"gotpointercapture":return l=o.pointerId,oT.set(l,KA(oT.get(l)||null,t,e,n,i,o)),!0}return!1}function rde(t){var e=yg(t.target);if(e!==null){var n=sv(e);if(n!==null){if(e=n.tag,e===13){if(e=$0e(n),e!==null){t.blockedOn=e,nde(t.priority,function(){ede(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function zC(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Bj(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Dj=i,n.target.dispatchEvent(i),Dj=null}else return e=d6(n),e!==null&&xY(e),t.blockedOn=n,!1;e.shift()}return!0}function Ane(t,e,n){zC(t)&&n.delete(e)}function hke(){zj=!1,$2!==null&&zC($2)&&($2=null),W2!==null&&zC(W2)&&(W2=null),Y2!==null&&zC(Y2)&&(Y2=null),sT.forEach(Ane),oT.forEach(Ane)}function JA(t,e){t.blockedOn===e&&(t.blockedOn=null,zj||(zj=!0,Mu.unstable_scheduleCallback(Mu.unstable_NormalPriority,hke)))}function aT(t){function e(o){return JA(o,t)}if(0<p8.length){JA(p8[0],t);for(var n=1;n<p8.length;n++){var i=p8[n];i.blockedOn===t&&(i.blockedOn=null)}}for($2!==null&&JA($2,t),W2!==null&&JA(W2,t),Y2!==null&&JA(Y2,t),sT.forEach(e),oT.forEach(e),n=0;n<R2.length;n++)i=R2[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<R2.length&&(n=R2[0],n.blockedOn===null);)rde(n),n.blockedOn===null&&R2.shift()}var vb=_p.ReactCurrentBatchConfig,uO=!0;function pke(t,e,n,i){var o=ds,l=vb.transition;vb.transition=null;try{ds=1,MY(t,e,n,i)}finally{ds=o,vb.transition=l}}function mke(t,e,n,i){var o=ds,l=vb.transition;vb.transition=null;try{ds=4,MY(t,e,n,i)}finally{ds=o,vb.transition=l}}function MY(t,e,n,i){if(uO){var o=Bj(t,e,n,i);if(o===null)xU(t,e,i,fO,n),bne(t,i);else if(dke(o,t,e,n,i))i.stopPropagation();else if(bne(t,i),e&4&&-1<fke.indexOf(t)){for(;o!==null;){var l=d6(o);if(l!==null&&J0e(l),l=Bj(t,e,n,i),l===null&&xU(t,e,i,fO,n),l===o)break;o=l}o!==null&&i.stopPropagation()}else xU(t,e,i,null,n)}}var fO=null;function Bj(t,e,n,i){if(fO=null,t=EY(i),t=yg(t),t!==null)if(e=sv(t),e===null)t=null;else if(n=e.tag,n===13){if(t=$0e(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return fO=t,null}function ide(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nke()){case SY:return 1;case X0e:return 4;case lO:case rke:return 16;case Z0e:return 536870912;default:return 16}default:return 16}}var B2=null,kY=null,BC=null;function sde(){if(BC)return BC;var t,e=kY,n=e.length,i,o="value"in B2?B2.value:B2.textContent,l=o.length;for(t=0;t<n&&e[t]===o[t];t++);var d=n-t;for(i=1;i<=d&&e[n-i]===o[l-i];i++);return BC=o.slice(t,1<i?1-i:void 0)}function UC(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function m8(){return!0}function wne(){return!1}function Iu(t){function e(n,i,o,l,d){this._reactName=n,this._targetInst=o,this.type=i,this.nativeEvent=l,this.target=d,this.currentTarget=null;for(var p in t)t.hasOwnProperty(p)&&(n=t[p],this[p]=n?n(l):l[p]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?m8:wne,this.isPropagationStopped=wne,this}return lo(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=m8)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=m8)},persist:function(){},isPersistent:m8}),e}var L4={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},CY=Iu(L4),f6=lo({},L4,{view:0,detail:0}),gke=Iu(f6),vU,_U,e3,yI=lo({},f6,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:PY,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==e3&&(e3&&t.type==="mousemove"?(vU=t.screenX-e3.screenX,_U=t.screenY-e3.screenY):_U=vU=0,e3=t),vU)},movementY:function(t){return"movementY"in t?t.movementY:_U}}),Ene=Iu(yI),vke=lo({},yI,{dataTransfer:0}),_ke=Iu(vke),yke=lo({},f6,{relatedTarget:0}),yU=Iu(yke),bke=lo({},L4,{animationName:0,elapsedTime:0,pseudoElement:0}),Ake=Iu(bke),wke=lo({},L4,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Eke=Iu(wke),Ske=lo({},L4,{data:0}),Sne=Iu(Ske),Tke={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xke={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mke={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kke(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Mke[t])?!!e[t]:!1}function PY(){return kke}var Cke=lo({},f6,{key:function(t){if(t.key){var e=Tke[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=UC(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?xke[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:PY,charCode:function(t){return t.type==="keypress"?UC(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?UC(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Pke=Iu(Cke),Rke=lo({},yI,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tne=Iu(Rke),Dke=lo({},f6,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:PY}),Oke=Iu(Dke),Ike=lo({},L4,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nke=Iu(Ike),Lke=lo({},yI,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),zke=Iu(Lke),Bke=[9,13,27,32],RY=np&&"CompositionEvent"in window,FS=null;np&&"documentMode"in document&&(FS=document.documentMode);var Uke=np&&"TextEvent"in window&&!FS,ode=np&&(!RY||FS&&8<FS&&11>=FS),xne=" ",Mne=!1;function ade(t,e){switch(t){case"keyup":return Bke.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lde(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Zy=!1;function Fke(t,e){switch(t){case"compositionend":return lde(e);case"keypress":return e.which!==32?null:(Mne=!0,xne);case"textInput":return t=e.data,t===xne&&Mne?null:t;default:return null}}function Vke(t,e){if(Zy)return t==="compositionend"||!RY&&ade(t,e)?(t=sde(),BC=kY=B2=null,Zy=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ode&&e.locale!=="ko"?null:e.data;default:return null}}var Gke={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kne(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Gke[t.type]:e==="textarea"}function cde(t,e,n,i){F0e(i),e=dO(e,"onChange"),0<e.length&&(n=new CY("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var VS=null,lT=null;function jke(t){bde(t,0)}function bI(t){var e=Jy(t);if(O0e(e))return t}function Hke(t,e){if(t==="change")return e}var ude=!1;if(np){var bU;if(np){var AU="oninput"in document;if(!AU){var Cne=document.createElement("div");Cne.setAttribute("oninput","return;"),AU=typeof Cne.oninput=="function"}bU=AU}else bU=!1;ude=bU&&(!document.documentMode||9<document.documentMode)}function Pne(){VS&&(VS.detachEvent("onpropertychange",fde),lT=VS=null)}function fde(t){if(t.propertyName==="value"&&bI(lT)){var e=[];cde(e,lT,t,EY(t)),H0e(jke,e)}}function $ke(t,e,n){t==="focusin"?(Pne(),VS=e,lT=n,VS.attachEvent("onpropertychange",fde)):t==="focusout"&&Pne()}function Wke(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return bI(lT)}function Yke(t,e){if(t==="click")return bI(e)}function qke(t,e){if(t==="input"||t==="change")return bI(e)}function Xke(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var P0=typeof Object.is=="function"?Object.is:Xke;function cT(t,e){if(P0(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var o=n[i];if(!bj.call(e,o)||!P0(t[o],e[o]))return!1}return!0}function Rne(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Dne(t,e){var n=Rne(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Rne(n)}}function dde(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?dde(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function hde(){for(var t=window,e=sO();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=sO(t.document)}return e}function DY(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Zke(t){var e=hde(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&dde(n.ownerDocument.documentElement,n)){if(i!==null&&DY(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,l=Math.min(i.start,o);i=i.end===void 0?l:Math.min(i.end,o),!t.extend&&l>i&&(o=i,i=l,l=o),o=Dne(n,l);var d=Dne(n,i);o&&d&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==d.node||t.focusOffset!==d.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),l>i?(t.addRange(e),t.extend(d.node,d.offset)):(e.setEnd(d.node,d.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Qke=np&&"documentMode"in document&&11>=document.documentMode,Qy=null,Uj=null,GS=null,Fj=!1;function One(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Fj||Qy==null||Qy!==sO(i)||(i=Qy,"selectionStart"in i&&DY(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),GS&&cT(GS,i)||(GS=i,i=dO(Uj,"onSelect"),0<i.length&&(e=new CY("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Qy)))}function g8(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ky={animationend:g8("Animation","AnimationEnd"),animationiteration:g8("Animation","AnimationIteration"),animationstart:g8("Animation","AnimationStart"),transitionend:g8("Transition","TransitionEnd")},wU={},pde={};np&&(pde=document.createElement("div").style,"AnimationEvent"in window||(delete Ky.animationend.animation,delete Ky.animationiteration.animation,delete Ky.animationstart.animation),"TransitionEvent"in window||delete Ky.transitionend.transition);function AI(t){if(wU[t])return wU[t];if(!Ky[t])return t;var e=Ky[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in pde)return wU[t]=e[n];return t}var mde=AI("animationend"),gde=AI("animationiteration"),vde=AI("animationstart"),_de=AI("transitionend"),yde=new Map,Ine="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bm(t,e){yde.set(t,e),iv(e,[t])}for(var EU=0;EU<Ine.length;EU++){var SU=Ine[EU],Kke=SU.toLowerCase(),Jke=SU[0].toUpperCase()+SU.slice(1);bm(Kke,"on"+Jke)}bm(mde,"onAnimationEnd");bm(gde,"onAnimationIteration");bm(vde,"onAnimationStart");bm("dblclick","onDoubleClick");bm("focusin","onFocus");bm("focusout","onBlur");bm(_de,"onTransitionEnd");kb("onMouseEnter",["mouseout","mouseover"]);kb("onMouseLeave",["mouseout","mouseover"]);kb("onPointerEnter",["pointerout","pointerover"]);kb("onPointerLeave",["pointerout","pointerover"]);iv("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));iv("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));iv("onBeforeInput",["compositionend","keypress","textInput","paste"]);iv("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));iv("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));iv("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tw="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eCe=new Set("cancel close invalid load scroll toggle".split(" ").concat(Tw));function Nne(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,K8e(i,e,void 0,t),t.currentTarget=null}function bde(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],o=i.event;i=i.listeners;e:{var l=void 0;if(e)for(var d=i.length-1;0<=d;d--){var p=i[d],g=p.instance,v=p.currentTarget;if(p=p.listener,g!==l&&o.isPropagationStopped())break e;Nne(o,p,v),l=g}else for(d=0;d<i.length;d++){if(p=i[d],g=p.instance,v=p.currentTarget,p=p.listener,g!==l&&o.isPropagationStopped())break e;Nne(o,p,v),l=g}}}if(aO)throw t=Nj,aO=!1,Nj=null,t}function Bs(t,e){var n=e[$j];n===void 0&&(n=e[$j]=new Set);var i=t+"__bubble";n.has(i)||(Ade(e,t,2,!1),n.add(i))}function TU(t,e,n){var i=0;e&&(i|=4),Ade(n,t,i,e)}var v8="_reactListening"+Math.random().toString(36).slice(2);function uT(t){if(!t[v8]){t[v8]=!0,k0e.forEach(function(n){n!=="selectionchange"&&(eCe.has(n)||TU(n,!1,t),TU(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[v8]||(e[v8]=!0,TU("selectionchange",!1,e))}}function Ade(t,e,n,i){switch(ide(e)){case 1:var o=pke;break;case 4:o=mke;break;default:o=MY}n=o.bind(null,e,n,t),o=void 0,!Ij||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),i?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function xU(t,e,n,i,o){var l=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var d=i.tag;if(d===3||d===4){var p=i.stateNode.containerInfo;if(p===o||p.nodeType===8&&p.parentNode===o)break;if(d===4)for(d=i.return;d!==null;){var g=d.tag;if((g===3||g===4)&&(g=d.stateNode.containerInfo,g===o||g.nodeType===8&&g.parentNode===o))return;d=d.return}for(;p!==null;){if(d=yg(p),d===null)return;if(g=d.tag,g===5||g===6){i=l=d;continue e}p=p.parentNode}}i=i.return}H0e(function(){var v=l,_=EY(n),b=[];e:{var w=yde.get(t);if(w!==void 0){var E=CY,S=t;switch(t){case"keypress":if(UC(n)===0)break e;case"keydown":case"keyup":E=Pke;break;case"focusin":S="focus",E=yU;break;case"focusout":S="blur",E=yU;break;case"beforeblur":case"afterblur":E=yU;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=Ene;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=_ke;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=Oke;break;case mde:case gde:case vde:E=Ake;break;case _de:E=Nke;break;case"scroll":E=gke;break;case"wheel":E=zke;break;case"copy":case"cut":case"paste":E=Eke;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=Tne}var M=(e&4)!==0,k=!M&&t==="scroll",x=M?w!==null?w+"Capture":null:w;M=[];for(var C=v,P;C!==null;){P=C;var O=P.stateNode;if(P.tag===5&&O!==null&&(P=O,x!==null&&(O=iT(C,x),O!=null&&M.push(fT(C,O,P)))),k)break;C=C.return}0<M.length&&(w=new E(w,S,null,n,_),b.push({event:w,listeners:M}))}}if(!(e&7)){e:{if(w=t==="mouseover"||t==="pointerover",E=t==="mouseout"||t==="pointerout",w&&n!==Dj&&(S=n.relatedTarget||n.fromElement)&&(yg(S)||S[rp]))break e;if((E||w)&&(w=_.window===_?_:(w=_.ownerDocument)?w.defaultView||w.parentWindow:window,E?(S=n.relatedTarget||n.toElement,E=v,S=S?yg(S):null,S!==null&&(k=sv(S),S!==k||S.tag!==5&&S.tag!==6)&&(S=null)):(E=null,S=v),E!==S)){if(M=Ene,O="onMouseLeave",x="onMouseEnter",C="mouse",(t==="pointerout"||t==="pointerover")&&(M=Tne,O="onPointerLeave",x="onPointerEnter",C="pointer"),k=E==null?w:Jy(E),P=S==null?w:Jy(S),w=new M(O,C+"leave",E,n,_),w.target=k,w.relatedTarget=P,O=null,yg(_)===v&&(M=new M(x,C+"enter",S,n,_),M.target=P,M.relatedTarget=k,O=M),k=O,E&&S)t:{for(M=E,x=S,C=0,P=M;P;P=Jv(P))C++;for(P=0,O=x;O;O=Jv(O))P++;for(;0<C-P;)M=Jv(M),C--;for(;0<P-C;)x=Jv(x),P--;for(;C--;){if(M===x||x!==null&&M===x.alternate)break t;M=Jv(M),x=Jv(x)}M=null}else M=null;E!==null&&Lne(b,w,E,M,!1),S!==null&&k!==null&&Lne(b,k,S,M,!0)}}e:{if(w=v?Jy(v):window,E=w.nodeName&&w.nodeName.toLowerCase(),E==="select"||E==="input"&&w.type==="file")var L=Hke;else if(kne(w))if(ude)L=qke;else{L=Wke;var B=$ke}else(E=w.nodeName)&&E.toLowerCase()==="input"&&(w.type==="checkbox"||w.type==="radio")&&(L=Yke);if(L&&(L=L(t,v))){cde(b,L,n,_);break e}B&&B(t,w,v),t==="focusout"&&(B=w._wrapperState)&&B.controlled&&w.type==="number"&&Mj(w,"number",w.value)}switch(B=v?Jy(v):window,t){case"focusin":(kne(B)||B.contentEditable==="true")&&(Qy=B,Uj=v,GS=null);break;case"focusout":GS=Uj=Qy=null;break;case"mousedown":Fj=!0;break;case"contextmenu":case"mouseup":case"dragend":Fj=!1,One(b,n,_);break;case"selectionchange":if(Qke)break;case"keydown":case"keyup":One(b,n,_)}var V;if(RY)e:{switch(t){case"compositionstart":var G="onCompositionStart";break e;case"compositionend":G="onCompositionEnd";break e;case"compositionupdate":G="onCompositionUpdate";break e}G=void 0}else Zy?ade(t,n)&&(G="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(G="onCompositionStart");G&&(ode&&n.locale!=="ko"&&(Zy||G!=="onCompositionStart"?G==="onCompositionEnd"&&Zy&&(V=sde()):(B2=_,kY="value"in B2?B2.value:B2.textContent,Zy=!0)),B=dO(v,G),0<B.length&&(G=new Sne(G,t,null,n,_),b.push({event:G,listeners:B}),V?G.data=V:(V=lde(n),V!==null&&(G.data=V)))),(V=Uke?Fke(t,n):Vke(t,n))&&(v=dO(v,"onBeforeInput"),0<v.length&&(_=new Sne("onBeforeInput","beforeinput",null,n,_),b.push({event:_,listeners:v}),_.data=V))}bde(b,e)})}function fT(t,e,n){return{instance:t,listener:e,currentTarget:n}}function dO(t,e){for(var n=e+"Capture",i=[];t!==null;){var o=t,l=o.stateNode;o.tag===5&&l!==null&&(o=l,l=iT(t,n),l!=null&&i.unshift(fT(t,l,o)),l=iT(t,e),l!=null&&i.push(fT(t,l,o))),t=t.return}return i}function Jv(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Lne(t,e,n,i,o){for(var l=e._reactName,d=[];n!==null&&n!==i;){var p=n,g=p.alternate,v=p.stateNode;if(g!==null&&g===i)break;p.tag===5&&v!==null&&(p=v,o?(g=iT(n,l),g!=null&&d.unshift(fT(n,g,p))):o||(g=iT(n,l),g!=null&&d.push(fT(n,g,p)))),n=n.return}d.length!==0&&t.push({event:e,listeners:d})}var tCe=/\r\n?/g,nCe=/\u0000|\uFFFD/g;function zne(t){return(typeof t=="string"?t:""+t).replace(tCe,`
`).replace(nCe,"")}function _8(t,e,n){if(e=zne(e),zne(t)!==e&&n)throw Error(tn(425))}function hO(){}var Vj=null,Gj=null;function jj(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Hj=typeof setTimeout=="function"?setTimeout:void 0,rCe=typeof clearTimeout=="function"?clearTimeout:void 0,Bne=typeof Promise=="function"?Promise:void 0,iCe=typeof queueMicrotask=="function"?queueMicrotask:typeof Bne<"u"?function(t){return Bne.resolve(null).then(t).catch(sCe)}:Hj;function sCe(t){setTimeout(function(){throw t})}function MU(t,e){var n=e,i=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(i===0){t.removeChild(o),aT(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=o}while(n);aT(e)}function q2(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Une(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var z4=Math.random().toString(36).slice(2),vd="__reactFiber$"+z4,dT="__reactProps$"+z4,rp="__reactContainer$"+z4,$j="__reactEvents$"+z4,oCe="__reactListeners$"+z4,aCe="__reactHandles$"+z4;function yg(t){var e=t[vd];if(e)return e;for(var n=t.parentNode;n;){if(e=n[rp]||n[vd]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Une(t);t!==null;){if(n=t[vd])return n;t=Une(t)}return e}t=n,n=t.parentNode}return null}function d6(t){return t=t[vd]||t[rp],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Jy(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(tn(33))}function wI(t){return t[dT]||null}var Wj=[],eb=-1;function Am(t){return{current:t}}function Fs(t){0>eb||(t.current=Wj[eb],Wj[eb]=null,eb--)}function Ds(t,e){eb++,Wj[eb]=t.current,t.current=e}var am={},kl=Am(am),Nc=Am(!1),Vg=am;function Cb(t,e){var n=t.type.contextTypes;if(!n)return am;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var o={},l;for(l in n)o[l]=e[l];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Lc(t){return t=t.childContextTypes,t!=null}function pO(){Fs(Nc),Fs(kl)}function Fne(t,e,n){if(kl.current!==am)throw Error(tn(168));Ds(kl,e),Ds(Nc,n)}function wde(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var o in i)if(!(o in e))throw Error(tn(108,$8e(t)||"Unknown",o));return lo({},n,i)}function mO(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||am,Vg=kl.current,Ds(kl,t),Ds(Nc,Nc.current),!0}function Vne(t,e,n){var i=t.stateNode;if(!i)throw Error(tn(169));n?(t=wde(t,e,Vg),i.__reactInternalMemoizedMergedChildContext=t,Fs(Nc),Fs(kl),Ds(kl,t)):Fs(Nc),Ds(Nc,n)}var Ih=null,EI=!1,kU=!1;function Ede(t){Ih===null?Ih=[t]:Ih.push(t)}function lCe(t){EI=!0,Ede(t)}function wm(){if(!kU&&Ih!==null){kU=!0;var t=0,e=ds;try{var n=Ih;for(ds=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Ih=null,EI=!1}catch(o){throw Ih!==null&&(Ih=Ih.slice(t+1)),q0e(SY,wm),o}finally{ds=e,kU=!1}}return null}var tb=[],nb=0,gO=null,vO=0,ff=[],df=0,Gg=null,Uh=1,Fh="";function W1(t,e){tb[nb++]=vO,tb[nb++]=gO,gO=t,vO=e}function Sde(t,e,n){ff[df++]=Uh,ff[df++]=Fh,ff[df++]=Gg,Gg=t;var i=Uh;t=Fh;var o=32-w0(i)-1;i&=~(1<<o),n+=1;var l=32-w0(e)+o;if(30<l){var d=o-o%5;l=(i&(1<<d)-1).toString(32),i>>=d,o-=d,Uh=1<<32-w0(e)+o|n<<o|i,Fh=l+t}else Uh=1<<l|n<<o|i,Fh=t}function OY(t){t.return!==null&&(W1(t,1),Sde(t,1,0))}function IY(t){for(;t===gO;)gO=tb[--nb],tb[nb]=null,vO=tb[--nb],tb[nb]=null;for(;t===Gg;)Gg=ff[--df],ff[df]=null,Fh=ff[--df],ff[df]=null,Uh=ff[--df],ff[df]=null}var Tu=null,wu=null,Zs=!1,m0=null;function Tde(t,e){var n=vf(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Gne(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Tu=t,wu=q2(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Tu=t,wu=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Gg!==null?{id:Uh,overflow:Fh}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=vf(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Tu=t,wu=null,!0):!1;default:return!1}}function Yj(t){return(t.mode&1)!==0&&(t.flags&128)===0}function qj(t){if(Zs){var e=wu;if(e){var n=e;if(!Gne(t,e)){if(Yj(t))throw Error(tn(418));e=q2(n.nextSibling);var i=Tu;e&&Gne(t,e)?Tde(i,n):(t.flags=t.flags&-4097|2,Zs=!1,Tu=t)}}else{if(Yj(t))throw Error(tn(418));t.flags=t.flags&-4097|2,Zs=!1,Tu=t}}}function jne(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Tu=t}function y8(t){if(t!==Tu)return!1;if(!Zs)return jne(t),Zs=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!jj(t.type,t.memoizedProps)),e&&(e=wu)){if(Yj(t))throw xde(),Error(tn(418));for(;e;)Tde(t,e),e=q2(e.nextSibling)}if(jne(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(tn(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){wu=q2(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}wu=null}}else wu=Tu?q2(t.stateNode.nextSibling):null;return!0}function xde(){for(var t=wu;t;)t=q2(t.nextSibling)}function Pb(){wu=Tu=null,Zs=!1}function NY(t){m0===null?m0=[t]:m0.push(t)}var cCe=_p.ReactCurrentBatchConfig;function t3(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(tn(309));var i=n.stateNode}if(!i)throw Error(tn(147,t));var o=i,l=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===l?e.ref:(e=function(d){var p=o.refs;d===null?delete p[l]:p[l]=d},e._stringRef=l,e)}if(typeof t!="string")throw Error(tn(284));if(!n._owner)throw Error(tn(290,t))}return t}function b8(t,e){throw t=Object.prototype.toString.call(e),Error(tn(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Hne(t){var e=t._init;return e(t._payload)}function Mde(t){function e(x,C){if(t){var P=x.deletions;P===null?(x.deletions=[C],x.flags|=16):P.push(C)}}function n(x,C){if(!t)return null;for(;C!==null;)e(x,C),C=C.sibling;return null}function i(x,C){for(x=new Map;C!==null;)C.key!==null?x.set(C.key,C):x.set(C.index,C),C=C.sibling;return x}function o(x,C){return x=K2(x,C),x.index=0,x.sibling=null,x}function l(x,C,P){return x.index=P,t?(P=x.alternate,P!==null?(P=P.index,P<C?(x.flags|=2,C):P):(x.flags|=2,C)):(x.flags|=1048576,C)}function d(x){return t&&x.alternate===null&&(x.flags|=2),x}function p(x,C,P,O){return C===null||C.tag!==6?(C=NU(P,x.mode,O),C.return=x,C):(C=o(C,P),C.return=x,C)}function g(x,C,P,O){var L=P.type;return L===Xy?_(x,C,P.props.children,O,P.key):C!==null&&(C.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===T2&&Hne(L)===C.type)?(O=o(C,P.props),O.ref=t3(x,C,P),O.return=x,O):(O=WC(P.type,P.key,P.props,null,x.mode,O),O.ref=t3(x,C,P),O.return=x,O)}function v(x,C,P,O){return C===null||C.tag!==4||C.stateNode.containerInfo!==P.containerInfo||C.stateNode.implementation!==P.implementation?(C=LU(P,x.mode,O),C.return=x,C):(C=o(C,P.children||[]),C.return=x,C)}function _(x,C,P,O,L){return C===null||C.tag!==7?(C=Ig(P,x.mode,O,L),C.return=x,C):(C=o(C,P),C.return=x,C)}function b(x,C,P){if(typeof C=="string"&&C!==""||typeof C=="number")return C=NU(""+C,x.mode,P),C.return=x,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case c8:return P=WC(C.type,C.key,C.props,null,x.mode,P),P.ref=t3(x,null,C),P.return=x,P;case qy:return C=LU(C,x.mode,P),C.return=x,C;case T2:var O=C._init;return b(x,O(C._payload),P)}if(Ew(C)||ZA(C))return C=Ig(C,x.mode,P,null),C.return=x,C;b8(x,C)}return null}function w(x,C,P,O){var L=C!==null?C.key:null;if(typeof P=="string"&&P!==""||typeof P=="number")return L!==null?null:p(x,C,""+P,O);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case c8:return P.key===L?g(x,C,P,O):null;case qy:return P.key===L?v(x,C,P,O):null;case T2:return L=P._init,w(x,C,L(P._payload),O)}if(Ew(P)||ZA(P))return L!==null?null:_(x,C,P,O,null);b8(x,P)}return null}function E(x,C,P,O,L){if(typeof O=="string"&&O!==""||typeof O=="number")return x=x.get(P)||null,p(C,x,""+O,L);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case c8:return x=x.get(O.key===null?P:O.key)||null,g(C,x,O,L);case qy:return x=x.get(O.key===null?P:O.key)||null,v(C,x,O,L);case T2:var B=O._init;return E(x,C,P,B(O._payload),L)}if(Ew(O)||ZA(O))return x=x.get(P)||null,_(C,x,O,L,null);b8(C,O)}return null}function S(x,C,P,O){for(var L=null,B=null,V=C,G=C=0,j=null;V!==null&&G<P.length;G++){V.index>G?(j=V,V=null):j=V.sibling;var F=w(x,V,P[G],O);if(F===null){V===null&&(V=j);break}t&&V&&F.alternate===null&&e(x,V),C=l(F,C,G),B===null?L=F:B.sibling=F,B=F,V=j}if(G===P.length)return n(x,V),Zs&&W1(x,G),L;if(V===null){for(;G<P.length;G++)V=b(x,P[G],O),V!==null&&(C=l(V,C,G),B===null?L=V:B.sibling=V,B=V);return Zs&&W1(x,G),L}for(V=i(x,V);G<P.length;G++)j=E(V,x,G,P[G],O),j!==null&&(t&&j.alternate!==null&&V.delete(j.key===null?G:j.key),C=l(j,C,G),B===null?L=j:B.sibling=j,B=j);return t&&V.forEach(function(q){return e(x,q)}),Zs&&W1(x,G),L}function M(x,C,P,O){var L=ZA(P);if(typeof L!="function")throw Error(tn(150));if(P=L.call(P),P==null)throw Error(tn(151));for(var B=L=null,V=C,G=C=0,j=null,F=P.next();V!==null&&!F.done;G++,F=P.next()){V.index>G?(j=V,V=null):j=V.sibling;var q=w(x,V,F.value,O);if(q===null){V===null&&(V=j);break}t&&V&&q.alternate===null&&e(x,V),C=l(q,C,G),B===null?L=q:B.sibling=q,B=q,V=j}if(F.done)return n(x,V),Zs&&W1(x,G),L;if(V===null){for(;!F.done;G++,F=P.next())F=b(x,F.value,O),F!==null&&(C=l(F,C,G),B===null?L=F:B.sibling=F,B=F);return Zs&&W1(x,G),L}for(V=i(x,V);!F.done;G++,F=P.next())F=E(V,x,G,F.value,O),F!==null&&(t&&F.alternate!==null&&V.delete(F.key===null?G:F.key),C=l(F,C,G),B===null?L=F:B.sibling=F,B=F);return t&&V.forEach(function(fe){return e(x,fe)}),Zs&&W1(x,G),L}function k(x,C,P,O){if(typeof P=="object"&&P!==null&&P.type===Xy&&P.key===null&&(P=P.props.children),typeof P=="object"&&P!==null){switch(P.$$typeof){case c8:e:{for(var L=P.key,B=C;B!==null;){if(B.key===L){if(L=P.type,L===Xy){if(B.tag===7){n(x,B.sibling),C=o(B,P.props.children),C.return=x,x=C;break e}}else if(B.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===T2&&Hne(L)===B.type){n(x,B.sibling),C=o(B,P.props),C.ref=t3(x,B,P),C.return=x,x=C;break e}n(x,B);break}else e(x,B);B=B.sibling}P.type===Xy?(C=Ig(P.props.children,x.mode,O,P.key),C.return=x,x=C):(O=WC(P.type,P.key,P.props,null,x.mode,O),O.ref=t3(x,C,P),O.return=x,x=O)}return d(x);case qy:e:{for(B=P.key;C!==null;){if(C.key===B)if(C.tag===4&&C.stateNode.containerInfo===P.containerInfo&&C.stateNode.implementation===P.implementation){n(x,C.sibling),C=o(C,P.children||[]),C.return=x,x=C;break e}else{n(x,C);break}else e(x,C);C=C.sibling}C=LU(P,x.mode,O),C.return=x,x=C}return d(x);case T2:return B=P._init,k(x,C,B(P._payload),O)}if(Ew(P))return S(x,C,P,O);if(ZA(P))return M(x,C,P,O);b8(x,P)}return typeof P=="string"&&P!==""||typeof P=="number"?(P=""+P,C!==null&&C.tag===6?(n(x,C.sibling),C=o(C,P),C.return=x,x=C):(n(x,C),C=NU(P,x.mode,O),C.return=x,x=C),d(x)):n(x,C)}return k}var Rb=Mde(!0),kde=Mde(!1),_O=Am(null),yO=null,rb=null,LY=null;function zY(){LY=rb=yO=null}function BY(t){var e=_O.current;Fs(_O),t._currentValue=e}function Xj(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function _b(t,e){yO=t,LY=rb=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ic=!0),t.firstContext=null)}function kf(t){var e=t._currentValue;if(LY!==t)if(t={context:t,memoizedValue:e,next:null},rb===null){if(yO===null)throw Error(tn(308));rb=t,yO.dependencies={lanes:0,firstContext:t}}else rb=rb.next=t;return e}var bg=null;function UY(t){bg===null?bg=[t]:bg.push(t)}function Cde(t,e,n,i){var o=e.interleaved;return o===null?(n.next=n,UY(e)):(n.next=o.next,o.next=n),e.interleaved=n,ip(t,i)}function ip(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var x2=!1;function FY(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pde(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Yh(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function X2(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Ci&2){var o=i.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),i.pending=e,ip(t,n)}return o=i.interleaved,o===null?(e.next=e,UY(i)):(e.next=o.next,o.next=e),i.interleaved=e,ip(t,n)}function FC(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,TY(t,n)}}function $ne(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var o=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var d={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?o=l=d:l=l.next=d,n=n.next}while(n!==null);l===null?o=l=e:l=l.next=e}else o=l=e;n={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:l,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function bO(t,e,n,i){var o=t.updateQueue;x2=!1;var l=o.firstBaseUpdate,d=o.lastBaseUpdate,p=o.shared.pending;if(p!==null){o.shared.pending=null;var g=p,v=g.next;g.next=null,d===null?l=v:d.next=v,d=g;var _=t.alternate;_!==null&&(_=_.updateQueue,p=_.lastBaseUpdate,p!==d&&(p===null?_.firstBaseUpdate=v:p.next=v,_.lastBaseUpdate=g))}if(l!==null){var b=o.baseState;d=0,_=v=g=null,p=l;do{var w=p.lane,E=p.eventTime;if((i&w)===w){_!==null&&(_=_.next={eventTime:E,lane:0,tag:p.tag,payload:p.payload,callback:p.callback,next:null});e:{var S=t,M=p;switch(w=e,E=n,M.tag){case 1:if(S=M.payload,typeof S=="function"){b=S.call(E,b,w);break e}b=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=M.payload,w=typeof S=="function"?S.call(E,b,w):S,w==null)break e;b=lo({},b,w);break e;case 2:x2=!0}}p.callback!==null&&p.lane!==0&&(t.flags|=64,w=o.effects,w===null?o.effects=[p]:w.push(p))}else E={eventTime:E,lane:w,tag:p.tag,payload:p.payload,callback:p.callback,next:null},_===null?(v=_=E,g=b):_=_.next=E,d|=w;if(p=p.next,p===null){if(p=o.shared.pending,p===null)break;w=p,p=w.next,w.next=null,o.lastBaseUpdate=w,o.shared.pending=null}}while(!0);if(_===null&&(g=b),o.baseState=g,o.firstBaseUpdate=v,o.lastBaseUpdate=_,e=o.shared.interleaved,e!==null){o=e;do d|=o.lane,o=o.next;while(o!==e)}else l===null&&(o.shared.lanes=0);Hg|=d,t.lanes=d,t.memoizedState=b}}function Wne(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],o=i.callback;if(o!==null){if(i.callback=null,i=n,typeof o!="function")throw Error(tn(191,o));o.call(i)}}}var h6={},xd=Am(h6),hT=Am(h6),pT=Am(h6);function Ag(t){if(t===h6)throw Error(tn(174));return t}function VY(t,e){switch(Ds(pT,e),Ds(hT,t),Ds(xd,h6),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Cj(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Cj(e,t)}Fs(xd),Ds(xd,e)}function Db(){Fs(xd),Fs(hT),Fs(pT)}function Rde(t){Ag(pT.current);var e=Ag(xd.current),n=Cj(e,t.type);e!==n&&(Ds(hT,t),Ds(xd,n))}function GY(t){hT.current===t&&(Fs(xd),Fs(hT))}var io=Am(0);function AO(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var CU=[];function jY(){for(var t=0;t<CU.length;t++)CU[t]._workInProgressVersionPrimary=null;CU.length=0}var VC=_p.ReactCurrentDispatcher,PU=_p.ReactCurrentBatchConfig,jg=0,ao=null,sa=null,ya=null,wO=!1,jS=!1,mT=0,uCe=0;function nl(){throw Error(tn(321))}function HY(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!P0(t[n],e[n]))return!1;return!0}function $Y(t,e,n,i,o,l){if(jg=l,ao=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,VC.current=t===null||t.memoizedState===null?pCe:mCe,t=n(i,o),jS){l=0;do{if(jS=!1,mT=0,25<=l)throw Error(tn(301));l+=1,ya=sa=null,e.updateQueue=null,VC.current=gCe,t=n(i,o)}while(jS)}if(VC.current=EO,e=sa!==null&&sa.next!==null,jg=0,ya=sa=ao=null,wO=!1,e)throw Error(tn(300));return t}function WY(){var t=mT!==0;return mT=0,t}function dd(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ya===null?ao.memoizedState=ya=t:ya=ya.next=t,ya}function Cf(){if(sa===null){var t=ao.alternate;t=t!==null?t.memoizedState:null}else t=sa.next;var e=ya===null?ao.memoizedState:ya.next;if(e!==null)ya=e,sa=t;else{if(t===null)throw Error(tn(310));sa=t,t={memoizedState:sa.memoizedState,baseState:sa.baseState,baseQueue:sa.baseQueue,queue:sa.queue,next:null},ya===null?ao.memoizedState=ya=t:ya=ya.next=t}return ya}function gT(t,e){return typeof e=="function"?e(t):e}function RU(t){var e=Cf(),n=e.queue;if(n===null)throw Error(tn(311));n.lastRenderedReducer=t;var i=sa,o=i.baseQueue,l=n.pending;if(l!==null){if(o!==null){var d=o.next;o.next=l.next,l.next=d}i.baseQueue=o=l,n.pending=null}if(o!==null){l=o.next,i=i.baseState;var p=d=null,g=null,v=l;do{var _=v.lane;if((jg&_)===_)g!==null&&(g=g.next={lane:0,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null}),i=v.hasEagerState?v.eagerState:t(i,v.action);else{var b={lane:_,action:v.action,hasEagerState:v.hasEagerState,eagerState:v.eagerState,next:null};g===null?(p=g=b,d=i):g=g.next=b,ao.lanes|=_,Hg|=_}v=v.next}while(v!==null&&v!==l);g===null?d=i:g.next=p,P0(i,e.memoizedState)||(Ic=!0),e.memoizedState=i,e.baseState=d,e.baseQueue=g,n.lastRenderedState=i}if(t=n.interleaved,t!==null){o=t;do l=o.lane,ao.lanes|=l,Hg|=l,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function DU(t){var e=Cf(),n=e.queue;if(n===null)throw Error(tn(311));n.lastRenderedReducer=t;var i=n.dispatch,o=n.pending,l=e.memoizedState;if(o!==null){n.pending=null;var d=o=o.next;do l=t(l,d.action),d=d.next;while(d!==o);P0(l,e.memoizedState)||(Ic=!0),e.memoizedState=l,e.baseQueue===null&&(e.baseState=l),n.lastRenderedState=l}return[l,i]}function Dde(){}function Ode(t,e){var n=ao,i=Cf(),o=e(),l=!P0(i.memoizedState,o);if(l&&(i.memoizedState=o,Ic=!0),i=i.queue,YY(Lde.bind(null,n,i,t),[t]),i.getSnapshot!==e||l||ya!==null&&ya.memoizedState.tag&1){if(n.flags|=2048,vT(9,Nde.bind(null,n,i,o,e),void 0,null),Ea===null)throw Error(tn(349));jg&30||Ide(n,e,o)}return o}function Ide(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ao.updateQueue,e===null?(e={lastEffect:null,stores:null},ao.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Nde(t,e,n,i){e.value=n,e.getSnapshot=i,zde(e)&&Bde(t)}function Lde(t,e,n){return n(function(){zde(e)&&Bde(t)})}function zde(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!P0(t,n)}catch{return!0}}function Bde(t){var e=ip(t,1);e!==null&&E0(e,t,1,-1)}function Yne(t){var e=dd();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gT,lastRenderedState:t},e.queue=t,t=t.dispatch=hCe.bind(null,ao,t),[e.memoizedState,t]}function vT(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=ao.updateQueue,e===null?(e={lastEffect:null,stores:null},ao.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function Ude(){return Cf().memoizedState}function GC(t,e,n,i){var o=dd();ao.flags|=t,o.memoizedState=vT(1|e,n,void 0,i===void 0?null:i)}function SI(t,e,n,i){var o=Cf();i=i===void 0?null:i;var l=void 0;if(sa!==null){var d=sa.memoizedState;if(l=d.destroy,i!==null&&HY(i,d.deps)){o.memoizedState=vT(e,n,l,i);return}}ao.flags|=t,o.memoizedState=vT(1|e,n,l,i)}function qne(t,e){return GC(8390656,8,t,e)}function YY(t,e){return SI(2048,8,t,e)}function Fde(t,e){return SI(4,2,t,e)}function Vde(t,e){return SI(4,4,t,e)}function Gde(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function jde(t,e,n){return n=n!=null?n.concat([t]):null,SI(4,4,Gde.bind(null,e,t),n)}function qY(){}function Hde(t,e){var n=Cf();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&HY(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function $de(t,e){var n=Cf();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&HY(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Wde(t,e,n){return jg&21?(P0(n,e)||(n=Q0e(),ao.lanes|=n,Hg|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ic=!0),t.memoizedState=n)}function fCe(t,e){var n=ds;ds=n!==0&&4>n?n:4,t(!0);var i=PU.transition;PU.transition={};try{t(!1),e()}finally{ds=n,PU.transition=i}}function Yde(){return Cf().memoizedState}function dCe(t,e,n){var i=Q2(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},qde(t))Xde(e,n);else if(n=Cde(t,e,n,i),n!==null){var o=Xl();E0(n,t,i,o),Zde(n,e,i)}}function hCe(t,e,n){var i=Q2(t),o={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(qde(t))Xde(e,o);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=e.lastRenderedReducer,l!==null))try{var d=e.lastRenderedState,p=l(d,n);if(o.hasEagerState=!0,o.eagerState=p,P0(p,d)){var g=e.interleaved;g===null?(o.next=o,UY(e)):(o.next=g.next,g.next=o),e.interleaved=o;return}}catch{}finally{}n=Cde(t,e,o,i),n!==null&&(o=Xl(),E0(n,t,i,o),Zde(n,e,i))}}function qde(t){var e=t.alternate;return t===ao||e!==null&&e===ao}function Xde(t,e){jS=wO=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Zde(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,TY(t,n)}}var EO={readContext:kf,useCallback:nl,useContext:nl,useEffect:nl,useImperativeHandle:nl,useInsertionEffect:nl,useLayoutEffect:nl,useMemo:nl,useReducer:nl,useRef:nl,useState:nl,useDebugValue:nl,useDeferredValue:nl,useTransition:nl,useMutableSource:nl,useSyncExternalStore:nl,useId:nl,unstable_isNewReconciler:!1},pCe={readContext:kf,useCallback:function(t,e){return dd().memoizedState=[t,e===void 0?null:e],t},useContext:kf,useEffect:qne,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,GC(4194308,4,Gde.bind(null,e,t),n)},useLayoutEffect:function(t,e){return GC(4194308,4,t,e)},useInsertionEffect:function(t,e){return GC(4,2,t,e)},useMemo:function(t,e){var n=dd();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=dd();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=dCe.bind(null,ao,t),[i.memoizedState,t]},useRef:function(t){var e=dd();return t={current:t},e.memoizedState=t},useState:Yne,useDebugValue:qY,useDeferredValue:function(t){return dd().memoizedState=t},useTransition:function(){var t=Yne(!1),e=t[0];return t=fCe.bind(null,t[1]),dd().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=ao,o=dd();if(Zs){if(n===void 0)throw Error(tn(407));n=n()}else{if(n=e(),Ea===null)throw Error(tn(349));jg&30||Ide(i,e,n)}o.memoizedState=n;var l={value:n,getSnapshot:e};return o.queue=l,qne(Lde.bind(null,i,l,t),[t]),i.flags|=2048,vT(9,Nde.bind(null,i,l,n,e),void 0,null),n},useId:function(){var t=dd(),e=Ea.identifierPrefix;if(Zs){var n=Fh,i=Uh;n=(i&~(1<<32-w0(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=mT++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=uCe++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},mCe={readContext:kf,useCallback:Hde,useContext:kf,useEffect:YY,useImperativeHandle:jde,useInsertionEffect:Fde,useLayoutEffect:Vde,useMemo:$de,useReducer:RU,useRef:Ude,useState:function(){return RU(gT)},useDebugValue:qY,useDeferredValue:function(t){var e=Cf();return Wde(e,sa.memoizedState,t)},useTransition:function(){var t=RU(gT)[0],e=Cf().memoizedState;return[t,e]},useMutableSource:Dde,useSyncExternalStore:Ode,useId:Yde,unstable_isNewReconciler:!1},gCe={readContext:kf,useCallback:Hde,useContext:kf,useEffect:YY,useImperativeHandle:jde,useInsertionEffect:Fde,useLayoutEffect:Vde,useMemo:$de,useReducer:DU,useRef:Ude,useState:function(){return DU(gT)},useDebugValue:qY,useDeferredValue:function(t){var e=Cf();return sa===null?e.memoizedState=t:Wde(e,sa.memoizedState,t)},useTransition:function(){var t=DU(gT)[0],e=Cf().memoizedState;return[t,e]},useMutableSource:Dde,useSyncExternalStore:Ode,useId:Yde,unstable_isNewReconciler:!1};function f0(t,e){if(t&&t.defaultProps){e=lo({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Zj(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:lo({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var TI={isMounted:function(t){return(t=t._reactInternals)?sv(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Xl(),o=Q2(t),l=Yh(i,o);l.payload=e,n!=null&&(l.callback=n),e=X2(t,l,o),e!==null&&(E0(e,t,o,i),FC(e,t,o))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Xl(),o=Q2(t),l=Yh(i,o);l.tag=1,l.payload=e,n!=null&&(l.callback=n),e=X2(t,l,o),e!==null&&(E0(e,t,o,i),FC(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Xl(),i=Q2(t),o=Yh(n,i);o.tag=2,e!=null&&(o.callback=e),e=X2(t,o,i),e!==null&&(E0(e,t,i,n),FC(e,t,i))}};function Xne(t,e,n,i,o,l,d){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,l,d):e.prototype&&e.prototype.isPureReactComponent?!cT(n,i)||!cT(o,l):!0}function Qde(t,e,n){var i=!1,o=am,l=e.contextType;return typeof l=="object"&&l!==null?l=kf(l):(o=Lc(e)?Vg:kl.current,i=e.contextTypes,l=(i=i!=null)?Cb(t,o):am),e=new e(n,l),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=TI,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=l),e}function Zne(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&TI.enqueueReplaceState(e,e.state,null)}function Qj(t,e,n,i){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs={},FY(t);var l=e.contextType;typeof l=="object"&&l!==null?o.context=kf(l):(l=Lc(e)?Vg:kl.current,o.context=Cb(t,l)),o.state=t.memoizedState,l=e.getDerivedStateFromProps,typeof l=="function"&&(Zj(t,e,l,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&TI.enqueueReplaceState(o,o.state,null),bO(t,n,o,i),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function Ob(t,e){try{var n="",i=e;do n+=H8e(i),i=i.return;while(i);var o=n}catch(l){o=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:e,stack:o,digest:null}}function OU(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Kj(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var vCe=typeof WeakMap=="function"?WeakMap:Map;function Kde(t,e,n){n=Yh(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){TO||(TO=!0,lH=i),Kj(t,e)},n}function Jde(t,e,n){n=Yh(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var o=e.value;n.payload=function(){return i(o)},n.callback=function(){Kj(t,e)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Kj(t,e),typeof i!="function"&&(Z2===null?Z2=new Set([this]):Z2.add(this));var d=e.stack;this.componentDidCatch(e.value,{componentStack:d!==null?d:""})}),n}function Qne(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new vCe;var o=new Set;i.set(e,o)}else o=i.get(e),o===void 0&&(o=new Set,i.set(e,o));o.has(n)||(o.add(n),t=RCe.bind(null,t,e,n),e.then(t,t))}function Kne(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Jne(t,e,n,i,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Yh(-1,1),e.tag=2,X2(n,e,1))),n.lanes|=1),t)}var _Ce=_p.ReactCurrentOwner,Ic=!1;function Yl(t,e,n,i){e.child=t===null?kde(e,null,n,i):Rb(e,t.child,n,i)}function ere(t,e,n,i,o){n=n.render;var l=e.ref;return _b(e,o),i=$Y(t,e,n,i,l,o),n=WY(),t!==null&&!Ic?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,sp(t,e,o)):(Zs&&n&&OY(e),e.flags|=1,Yl(t,e,i,o),e.child)}function tre(t,e,n,i,o){if(t===null){var l=n.type;return typeof l=="function"&&!nq(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=l,ehe(t,e,l,i,o)):(t=WC(n.type,null,i,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(l=t.child,!(t.lanes&o)){var d=l.memoizedProps;if(n=n.compare,n=n!==null?n:cT,n(d,i)&&t.ref===e.ref)return sp(t,e,o)}return e.flags|=1,t=K2(l,i),t.ref=e.ref,t.return=e,e.child=t}function ehe(t,e,n,i,o){if(t!==null){var l=t.memoizedProps;if(cT(l,i)&&t.ref===e.ref)if(Ic=!1,e.pendingProps=i=l,(t.lanes&o)!==0)t.flags&131072&&(Ic=!0);else return e.lanes=t.lanes,sp(t,e,o)}return Jj(t,e,n,i,o)}function the(t,e,n){var i=e.pendingProps,o=i.children,l=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ds(sb,_u),_u|=n;else{if(!(n&1073741824))return t=l!==null?l.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ds(sb,_u),_u|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=l!==null?l.baseLanes:n,Ds(sb,_u),_u|=i}else l!==null?(i=l.baseLanes|n,e.memoizedState=null):i=n,Ds(sb,_u),_u|=i;return Yl(t,e,o,n),e.child}function nhe(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Jj(t,e,n,i,o){var l=Lc(n)?Vg:kl.current;return l=Cb(e,l),_b(e,o),n=$Y(t,e,n,i,l,o),i=WY(),t!==null&&!Ic?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,sp(t,e,o)):(Zs&&i&&OY(e),e.flags|=1,Yl(t,e,n,o),e.child)}function nre(t,e,n,i,o){if(Lc(n)){var l=!0;mO(e)}else l=!1;if(_b(e,o),e.stateNode===null)jC(t,e),Qde(e,n,i),Qj(e,n,i,o),i=!0;else if(t===null){var d=e.stateNode,p=e.memoizedProps;d.props=p;var g=d.context,v=n.contextType;typeof v=="object"&&v!==null?v=kf(v):(v=Lc(n)?Vg:kl.current,v=Cb(e,v));var _=n.getDerivedStateFromProps,b=typeof _=="function"||typeof d.getSnapshotBeforeUpdate=="function";b||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(p!==i||g!==v)&&Zne(e,d,i,v),x2=!1;var w=e.memoizedState;d.state=w,bO(e,i,d,o),g=e.memoizedState,p!==i||w!==g||Nc.current||x2?(typeof _=="function"&&(Zj(e,n,_,i),g=e.memoizedState),(p=x2||Xne(e,n,p,i,w,g,v))?(b||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(e.flags|=4194308)):(typeof d.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=g),d.props=i,d.state=g,d.context=v,i=p):(typeof d.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{d=e.stateNode,Pde(t,e),p=e.memoizedProps,v=e.type===e.elementType?p:f0(e.type,p),d.props=v,b=e.pendingProps,w=d.context,g=n.contextType,typeof g=="object"&&g!==null?g=kf(g):(g=Lc(n)?Vg:kl.current,g=Cb(e,g));var E=n.getDerivedStateFromProps;(_=typeof E=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(p!==b||w!==g)&&Zne(e,d,i,g),x2=!1,w=e.memoizedState,d.state=w,bO(e,i,d,o);var S=e.memoizedState;p!==b||w!==S||Nc.current||x2?(typeof E=="function"&&(Zj(e,n,E,i),S=e.memoizedState),(v=x2||Xne(e,n,v,i,w,S,g)||!1)?(_||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(i,S,g),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(i,S,g)),typeof d.componentDidUpdate=="function"&&(e.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof d.componentDidUpdate!="function"||p===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||p===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=S),d.props=i,d.state=S,d.context=g,i=v):(typeof d.componentDidUpdate!="function"||p===t.memoizedProps&&w===t.memoizedState||(e.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||p===t.memoizedProps&&w===t.memoizedState||(e.flags|=1024),i=!1)}return eH(t,e,n,i,l,o)}function eH(t,e,n,i,o,l){nhe(t,e);var d=(e.flags&128)!==0;if(!i&&!d)return o&&Vne(e,n,!1),sp(t,e,l);i=e.stateNode,_Ce.current=e;var p=d&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&d?(e.child=Rb(e,t.child,null,l),e.child=Rb(e,null,p,l)):Yl(t,e,p,l),e.memoizedState=i.state,o&&Vne(e,n,!0),e.child}function rhe(t){var e=t.stateNode;e.pendingContext?Fne(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Fne(t,e.context,!1),VY(t,e.containerInfo)}function rre(t,e,n,i,o){return Pb(),NY(o),e.flags|=256,Yl(t,e,n,i),e.child}var tH={dehydrated:null,treeContext:null,retryLane:0};function nH(t){return{baseLanes:t,cachePool:null,transitions:null}}function ihe(t,e,n){var i=e.pendingProps,o=io.current,l=!1,d=(e.flags&128)!==0,p;if((p=d)||(p=t!==null&&t.memoizedState===null?!1:(o&2)!==0),p?(l=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),Ds(io,o&1),t===null)return qj(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(d=i.children,t=i.fallback,l?(i=e.mode,l=e.child,d={mode:"hidden",children:d},!(i&1)&&l!==null?(l.childLanes=0,l.pendingProps=d):l=kI(d,i,0,null),t=Ig(t,i,n,null),l.return=e,t.return=e,l.sibling=t,e.child=l,e.child.memoizedState=nH(n),e.memoizedState=tH,t):XY(e,d));if(o=t.memoizedState,o!==null&&(p=o.dehydrated,p!==null))return yCe(t,e,d,i,p,o,n);if(l){l=i.fallback,d=e.mode,o=t.child,p=o.sibling;var g={mode:"hidden",children:i.children};return!(d&1)&&e.child!==o?(i=e.child,i.childLanes=0,i.pendingProps=g,e.deletions=null):(i=K2(o,g),i.subtreeFlags=o.subtreeFlags&14680064),p!==null?l=K2(p,l):(l=Ig(l,d,n,null),l.flags|=2),l.return=e,i.return=e,i.sibling=l,e.child=i,i=l,l=e.child,d=t.child.memoizedState,d=d===null?nH(n):{baseLanes:d.baseLanes|n,cachePool:null,transitions:d.transitions},l.memoizedState=d,l.childLanes=t.childLanes&~n,e.memoizedState=tH,i}return l=t.child,t=l.sibling,i=K2(l,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function XY(t,e){return e=kI({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function A8(t,e,n,i){return i!==null&&NY(i),Rb(e,t.child,null,n),t=XY(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function yCe(t,e,n,i,o,l,d){if(n)return e.flags&256?(e.flags&=-257,i=OU(Error(tn(422))),A8(t,e,d,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(l=i.fallback,o=e.mode,i=kI({mode:"visible",children:i.children},o,0,null),l=Ig(l,o,d,null),l.flags|=2,i.return=e,l.return=e,i.sibling=l,e.child=i,e.mode&1&&Rb(e,t.child,null,d),e.child.memoizedState=nH(d),e.memoizedState=tH,l);if(!(e.mode&1))return A8(t,e,d,null);if(o.data==="$!"){if(i=o.nextSibling&&o.nextSibling.dataset,i)var p=i.dgst;return i=p,l=Error(tn(419)),i=OU(l,i,void 0),A8(t,e,d,i)}if(p=(d&t.childLanes)!==0,Ic||p){if(i=Ea,i!==null){switch(d&-d){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(i.suspendedLanes|d)?0:o,o!==0&&o!==l.retryLane&&(l.retryLane=o,ip(t,o),E0(i,t,o,-1))}return tq(),i=OU(Error(tn(421))),A8(t,e,d,i)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=DCe.bind(null,t),o._reactRetry=e,null):(t=l.treeContext,wu=q2(o.nextSibling),Tu=e,Zs=!0,m0=null,t!==null&&(ff[df++]=Uh,ff[df++]=Fh,ff[df++]=Gg,Uh=t.id,Fh=t.overflow,Gg=e),e=XY(e,i.children),e.flags|=4096,e)}function ire(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Xj(t.return,e,n)}function IU(t,e,n,i,o){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:o}:(l.isBackwards=e,l.rendering=null,l.renderingStartTime=0,l.last=i,l.tail=n,l.tailMode=o)}function she(t,e,n){var i=e.pendingProps,o=i.revealOrder,l=i.tail;if(Yl(t,e,i.children,n),i=io.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ire(t,n,e);else if(t.tag===19)ire(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Ds(io,i),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&AO(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),IU(e,!1,o,n,l);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&AO(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}IU(e,!0,n,null,l);break;case"together":IU(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function jC(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function sp(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Hg|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(tn(153));if(e.child!==null){for(t=e.child,n=K2(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=K2(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function bCe(t,e,n){switch(e.tag){case 3:rhe(e),Pb();break;case 5:Rde(e);break;case 1:Lc(e.type)&&mO(e);break;case 4:VY(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,o=e.memoizedProps.value;Ds(_O,i._currentValue),i._currentValue=o;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Ds(io,io.current&1),e.flags|=128,null):n&e.child.childLanes?ihe(t,e,n):(Ds(io,io.current&1),t=sp(t,e,n),t!==null?t.sibling:null);Ds(io,io.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return she(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Ds(io,io.current),i)break;return null;case 22:case 23:return e.lanes=0,the(t,e,n)}return sp(t,e,n)}var ohe,rH,ahe,lhe;ohe=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};rH=function(){};ahe=function(t,e,n,i){var o=t.memoizedProps;if(o!==i){t=e.stateNode,Ag(xd.current);var l=null;switch(n){case"input":o=Tj(t,o),i=Tj(t,i),l=[];break;case"select":o=lo({},o,{value:void 0}),i=lo({},i,{value:void 0}),l=[];break;case"textarea":o=kj(t,o),i=kj(t,i),l=[];break;default:typeof o.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=hO)}Pj(n,i);var d;n=null;for(v in o)if(!i.hasOwnProperty(v)&&o.hasOwnProperty(v)&&o[v]!=null)if(v==="style"){var p=o[v];for(d in p)p.hasOwnProperty(d)&&(n||(n={}),n[d]="")}else v!=="dangerouslySetInnerHTML"&&v!=="children"&&v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&v!=="autoFocus"&&(nT.hasOwnProperty(v)?l||(l=[]):(l=l||[]).push(v,null));for(v in i){var g=i[v];if(p=o!=null?o[v]:void 0,i.hasOwnProperty(v)&&g!==p&&(g!=null||p!=null))if(v==="style")if(p){for(d in p)!p.hasOwnProperty(d)||g&&g.hasOwnProperty(d)||(n||(n={}),n[d]="");for(d in g)g.hasOwnProperty(d)&&p[d]!==g[d]&&(n||(n={}),n[d]=g[d])}else n||(l||(l=[]),l.push(v,n)),n=g;else v==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,p=p?p.__html:void 0,g!=null&&p!==g&&(l=l||[]).push(v,g)):v==="children"?typeof g!="string"&&typeof g!="number"||(l=l||[]).push(v,""+g):v!=="suppressContentEditableWarning"&&v!=="suppressHydrationWarning"&&(nT.hasOwnProperty(v)?(g!=null&&v==="onScroll"&&Bs("scroll",t),l||p===g||(l=[])):(l=l||[]).push(v,g))}n&&(l=l||[]).push("style",n);var v=l;(e.updateQueue=v)&&(e.flags|=4)}};lhe=function(t,e,n,i){n!==i&&(e.flags|=4)};function n3(t,e){if(!Zs)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function rl(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags&14680064,i|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function ACe(t,e,n){var i=e.pendingProps;switch(IY(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rl(e),null;case 1:return Lc(e.type)&&pO(),rl(e),null;case 3:return i=e.stateNode,Db(),Fs(Nc),Fs(kl),jY(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(y8(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,m0!==null&&(fH(m0),m0=null))),rH(t,e),rl(e),null;case 5:GY(e);var o=Ag(pT.current);if(n=e.type,t!==null&&e.stateNode!=null)ahe(t,e,n,i,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(tn(166));return rl(e),null}if(t=Ag(xd.current),y8(e)){i=e.stateNode,n=e.type;var l=e.memoizedProps;switch(i[vd]=e,i[dT]=l,t=(e.mode&1)!==0,n){case"dialog":Bs("cancel",i),Bs("close",i);break;case"iframe":case"object":case"embed":Bs("load",i);break;case"video":case"audio":for(o=0;o<Tw.length;o++)Bs(Tw[o],i);break;case"source":Bs("error",i);break;case"img":case"image":case"link":Bs("error",i),Bs("load",i);break;case"details":Bs("toggle",i);break;case"input":hne(i,l),Bs("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!l.multiple},Bs("invalid",i);break;case"textarea":mne(i,l),Bs("invalid",i)}Pj(n,l),o=null;for(var d in l)if(l.hasOwnProperty(d)){var p=l[d];d==="children"?typeof p=="string"?i.textContent!==p&&(l.suppressHydrationWarning!==!0&&_8(i.textContent,p,t),o=["children",p]):typeof p=="number"&&i.textContent!==""+p&&(l.suppressHydrationWarning!==!0&&_8(i.textContent,p,t),o=["children",""+p]):nT.hasOwnProperty(d)&&p!=null&&d==="onScroll"&&Bs("scroll",i)}switch(n){case"input":u8(i),pne(i,l,!0);break;case"textarea":u8(i),gne(i);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(i.onclick=hO)}i=o,e.updateQueue=i,i!==null&&(e.flags|=4)}else{d=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=L0e(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=d.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=d.createElement(n,{is:i.is}):(t=d.createElement(n),n==="select"&&(d=t,i.multiple?d.multiple=!0:i.size&&(d.size=i.size))):t=d.createElementNS(t,n),t[vd]=e,t[dT]=i,ohe(t,e,!1,!1),e.stateNode=t;e:{switch(d=Rj(n,i),n){case"dialog":Bs("cancel",t),Bs("close",t),o=i;break;case"iframe":case"object":case"embed":Bs("load",t),o=i;break;case"video":case"audio":for(o=0;o<Tw.length;o++)Bs(Tw[o],t);o=i;break;case"source":Bs("error",t),o=i;break;case"img":case"image":case"link":Bs("error",t),Bs("load",t),o=i;break;case"details":Bs("toggle",t),o=i;break;case"input":hne(t,i),o=Tj(t,i),Bs("invalid",t);break;case"option":o=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},o=lo({},i,{value:void 0}),Bs("invalid",t);break;case"textarea":mne(t,i),o=kj(t,i),Bs("invalid",t);break;default:o=i}Pj(n,o),p=o;for(l in p)if(p.hasOwnProperty(l)){var g=p[l];l==="style"?U0e(t,g):l==="dangerouslySetInnerHTML"?(g=g?g.__html:void 0,g!=null&&z0e(t,g)):l==="children"?typeof g=="string"?(n!=="textarea"||g!=="")&&rT(t,g):typeof g=="number"&&rT(t,""+g):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(nT.hasOwnProperty(l)?g!=null&&l==="onScroll"&&Bs("scroll",t):g!=null&&yY(t,l,g,d))}switch(n){case"input":u8(t),pne(t,i,!1);break;case"textarea":u8(t),gne(t);break;case"option":i.value!=null&&t.setAttribute("value",""+om(i.value));break;case"select":t.multiple=!!i.multiple,l=i.value,l!=null?pb(t,!!i.multiple,l,!1):i.defaultValue!=null&&pb(t,!!i.multiple,i.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=hO)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return rl(e),null;case 6:if(t&&e.stateNode!=null)lhe(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(tn(166));if(n=Ag(pT.current),Ag(xd.current),y8(e)){if(i=e.stateNode,n=e.memoizedProps,i[vd]=e,(l=i.nodeValue!==n)&&(t=Tu,t!==null))switch(t.tag){case 3:_8(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&_8(i.nodeValue,n,(t.mode&1)!==0)}l&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[vd]=e,e.stateNode=i}return rl(e),null;case 13:if(Fs(io),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Zs&&wu!==null&&e.mode&1&&!(e.flags&128))xde(),Pb(),e.flags|=98560,l=!1;else if(l=y8(e),i!==null&&i.dehydrated!==null){if(t===null){if(!l)throw Error(tn(318));if(l=e.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(tn(317));l[vd]=e}else Pb(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;rl(e),l=!1}else m0!==null&&(fH(m0),m0=null),l=!0;if(!l)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||io.current&1?aa===0&&(aa=3):tq())),e.updateQueue!==null&&(e.flags|=4),rl(e),null);case 4:return Db(),rH(t,e),t===null&&uT(e.stateNode.containerInfo),rl(e),null;case 10:return BY(e.type._context),rl(e),null;case 17:return Lc(e.type)&&pO(),rl(e),null;case 19:if(Fs(io),l=e.memoizedState,l===null)return rl(e),null;if(i=(e.flags&128)!==0,d=l.rendering,d===null)if(i)n3(l,!1);else{if(aa!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(d=AO(t),d!==null){for(e.flags|=128,n3(l,!1),i=d.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)l=n,t=i,l.flags&=14680066,d=l.alternate,d===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=d.childLanes,l.lanes=d.lanes,l.child=d.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=d.memoizedProps,l.memoizedState=d.memoizedState,l.updateQueue=d.updateQueue,l.type=d.type,t=d.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ds(io,io.current&1|2),e.child}t=t.sibling}l.tail!==null&&Co()>Ib&&(e.flags|=128,i=!0,n3(l,!1),e.lanes=4194304)}else{if(!i)if(t=AO(d),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),n3(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Zs)return rl(e),null}else 2*Co()-l.renderingStartTime>Ib&&n!==1073741824&&(e.flags|=128,i=!0,n3(l,!1),e.lanes=4194304);l.isBackwards?(d.sibling=e.child,e.child=d):(n=l.last,n!==null?n.sibling=d:e.child=d,l.last=d)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Co(),e.sibling=null,n=io.current,Ds(io,i?n&1|2:n&1),e):(rl(e),null);case 22:case 23:return eq(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?_u&1073741824&&(rl(e),e.subtreeFlags&6&&(e.flags|=8192)):rl(e),null;case 24:return null;case 25:return null}throw Error(tn(156,e.tag))}function wCe(t,e){switch(IY(e),e.tag){case 1:return Lc(e.type)&&pO(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Db(),Fs(Nc),Fs(kl),jY(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return GY(e),null;case 13:if(Fs(io),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(tn(340));Pb()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Fs(io),null;case 4:return Db(),null;case 10:return BY(e.type._context),null;case 22:case 23:return eq(),null;case 24:return null;default:return null}}var w8=!1,Sl=!1,ECe=typeof WeakSet=="function"?WeakSet:Set,On=null;function ib(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){ho(t,e,i)}else n.current=null}function iH(t,e,n){try{n()}catch(i){ho(t,e,i)}}var sre=!1;function SCe(t,e){if(Vj=uO,t=hde(),DY(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var o=i.anchorOffset,l=i.focusNode;i=i.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var d=0,p=-1,g=-1,v=0,_=0,b=t,w=null;t:for(;;){for(var E;b!==n||o!==0&&b.nodeType!==3||(p=d+o),b!==l||i!==0&&b.nodeType!==3||(g=d+i),b.nodeType===3&&(d+=b.nodeValue.length),(E=b.firstChild)!==null;)w=b,b=E;for(;;){if(b===t)break t;if(w===n&&++v===o&&(p=d),w===l&&++_===i&&(g=d),(E=b.nextSibling)!==null)break;b=w,w=b.parentNode}b=E}n=p===-1||g===-1?null:{start:p,end:g}}else n=null}n=n||{start:0,end:0}}else n=null;for(Gj={focusedElem:t,selectionRange:n},uO=!1,On=e;On!==null;)if(e=On,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,On=t;else for(;On!==null;){e=On;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var M=S.memoizedProps,k=S.memoizedState,x=e.stateNode,C=x.getSnapshotBeforeUpdate(e.elementType===e.type?M:f0(e.type,M),k);x.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var P=e.stateNode.containerInfo;P.nodeType===1?P.textContent="":P.nodeType===9&&P.documentElement&&P.removeChild(P.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(tn(163))}}catch(O){ho(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,On=t;break}On=e.return}return S=sre,sre=!1,S}function HS(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do{if((o.tag&t)===t){var l=o.destroy;o.destroy=void 0,l!==void 0&&iH(e,n,l)}o=o.next}while(o!==i)}}function xI(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function sH(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function che(t){var e=t.alternate;e!==null&&(t.alternate=null,che(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[vd],delete e[dT],delete e[$j],delete e[oCe],delete e[aCe])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function uhe(t){return t.tag===5||t.tag===3||t.tag===4}function ore(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||uhe(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function oH(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=hO));else if(i!==4&&(t=t.child,t!==null))for(oH(t,e,n),t=t.sibling;t!==null;)oH(t,e,n),t=t.sibling}function aH(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(aH(t,e,n),t=t.sibling;t!==null;)aH(t,e,n),t=t.sibling}var Va=null,h0=!1;function Bp(t,e,n){for(n=n.child;n!==null;)fhe(t,e,n),n=n.sibling}function fhe(t,e,n){if(Td&&typeof Td.onCommitFiberUnmount=="function")try{Td.onCommitFiberUnmount(_I,n)}catch{}switch(n.tag){case 5:Sl||ib(n,e);case 6:var i=Va,o=h0;Va=null,Bp(t,e,n),Va=i,h0=o,Va!==null&&(h0?(t=Va,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Va.removeChild(n.stateNode));break;case 18:Va!==null&&(h0?(t=Va,n=n.stateNode,t.nodeType===8?MU(t.parentNode,n):t.nodeType===1&&MU(t,n),aT(t)):MU(Va,n.stateNode));break;case 4:i=Va,o=h0,Va=n.stateNode.containerInfo,h0=!0,Bp(t,e,n),Va=i,h0=o;break;case 0:case 11:case 14:case 15:if(!Sl&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){o=i=i.next;do{var l=o,d=l.destroy;l=l.tag,d!==void 0&&(l&2||l&4)&&iH(n,e,d),o=o.next}while(o!==i)}Bp(t,e,n);break;case 1:if(!Sl&&(ib(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(p){ho(n,e,p)}Bp(t,e,n);break;case 21:Bp(t,e,n);break;case 22:n.mode&1?(Sl=(i=Sl)||n.memoizedState!==null,Bp(t,e,n),Sl=i):Bp(t,e,n);break;default:Bp(t,e,n)}}function are(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ECe),e.forEach(function(i){var o=OCe.bind(null,t,i);n.has(i)||(n.add(i),i.then(o,o))})}}function Yf(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var o=n[i];try{var l=t,d=e,p=d;e:for(;p!==null;){switch(p.tag){case 5:Va=p.stateNode,h0=!1;break e;case 3:Va=p.stateNode.containerInfo,h0=!0;break e;case 4:Va=p.stateNode.containerInfo,h0=!0;break e}p=p.return}if(Va===null)throw Error(tn(160));fhe(l,d,o),Va=null,h0=!1;var g=o.alternate;g!==null&&(g.return=null),o.return=null}catch(v){ho(o,e,v)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dhe(e,t),e=e.sibling}function dhe(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Yf(e,t),X0(t),i&4){try{HS(3,t,t.return),xI(3,t)}catch(M){ho(t,t.return,M)}try{HS(5,t,t.return)}catch(M){ho(t,t.return,M)}}break;case 1:Yf(e,t),X0(t),i&512&&n!==null&&ib(n,n.return);break;case 5:if(Yf(e,t),X0(t),i&512&&n!==null&&ib(n,n.return),t.flags&32){var o=t.stateNode;try{rT(o,"")}catch(M){ho(t,t.return,M)}}if(i&4&&(o=t.stateNode,o!=null)){var l=t.memoizedProps,d=n!==null?n.memoizedProps:l,p=t.type,g=t.updateQueue;if(t.updateQueue=null,g!==null)try{p==="input"&&l.type==="radio"&&l.name!=null&&I0e(o,l),Rj(p,d);var v=Rj(p,l);for(d=0;d<g.length;d+=2){var _=g[d],b=g[d+1];_==="style"?U0e(o,b):_==="dangerouslySetInnerHTML"?z0e(o,b):_==="children"?rT(o,b):yY(o,_,b,v)}switch(p){case"input":xj(o,l);break;case"textarea":N0e(o,l);break;case"select":var w=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!l.multiple;var E=l.value;E!=null?pb(o,!!l.multiple,E,!1):w!==!!l.multiple&&(l.defaultValue!=null?pb(o,!!l.multiple,l.defaultValue,!0):pb(o,!!l.multiple,l.multiple?[]:"",!1))}o[dT]=l}catch(M){ho(t,t.return,M)}}break;case 6:if(Yf(e,t),X0(t),i&4){if(t.stateNode===null)throw Error(tn(162));o=t.stateNode,l=t.memoizedProps;try{o.nodeValue=l}catch(M){ho(t,t.return,M)}}break;case 3:if(Yf(e,t),X0(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{aT(e.containerInfo)}catch(M){ho(t,t.return,M)}break;case 4:Yf(e,t),X0(t);break;case 13:Yf(e,t),X0(t),o=t.child,o.flags&8192&&(l=o.memoizedState!==null,o.stateNode.isHidden=l,!l||o.alternate!==null&&o.alternate.memoizedState!==null||(KY=Co())),i&4&&are(t);break;case 22:if(_=n!==null&&n.memoizedState!==null,t.mode&1?(Sl=(v=Sl)||_,Yf(e,t),Sl=v):Yf(e,t),X0(t),i&8192){if(v=t.memoizedState!==null,(t.stateNode.isHidden=v)&&!_&&t.mode&1)for(On=t,_=t.child;_!==null;){for(b=On=_;On!==null;){switch(w=On,E=w.child,w.tag){case 0:case 11:case 14:case 15:HS(4,w,w.return);break;case 1:ib(w,w.return);var S=w.stateNode;if(typeof S.componentWillUnmount=="function"){i=w,n=w.return;try{e=i,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(M){ho(i,n,M)}}break;case 5:ib(w,w.return);break;case 22:if(w.memoizedState!==null){cre(b);continue}}E!==null?(E.return=w,On=E):cre(b)}_=_.sibling}e:for(_=null,b=t;;){if(b.tag===5){if(_===null){_=b;try{o=b.stateNode,v?(l=o.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(p=b.stateNode,g=b.memoizedProps.style,d=g!=null&&g.hasOwnProperty("display")?g.display:null,p.style.display=B0e("display",d))}catch(M){ho(t,t.return,M)}}}else if(b.tag===6){if(_===null)try{b.stateNode.nodeValue=v?"":b.memoizedProps}catch(M){ho(t,t.return,M)}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===t)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===t)break e;for(;b.sibling===null;){if(b.return===null||b.return===t)break e;_===b&&(_=null),b=b.return}_===b&&(_=null),b.sibling.return=b.return,b=b.sibling}}break;case 19:Yf(e,t),X0(t),i&4&&are(t);break;case 21:break;default:Yf(e,t),X0(t)}}function X0(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(uhe(n)){var i=n;break e}n=n.return}throw Error(tn(160))}switch(i.tag){case 5:var o=i.stateNode;i.flags&32&&(rT(o,""),i.flags&=-33);var l=ore(t);aH(t,l,o);break;case 3:case 4:var d=i.stateNode.containerInfo,p=ore(t);oH(t,p,d);break;default:throw Error(tn(161))}}catch(g){ho(t,t.return,g)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function TCe(t,e,n){On=t,hhe(t)}function hhe(t,e,n){for(var i=(t.mode&1)!==0;On!==null;){var o=On,l=o.child;if(o.tag===22&&i){var d=o.memoizedState!==null||w8;if(!d){var p=o.alternate,g=p!==null&&p.memoizedState!==null||Sl;p=w8;var v=Sl;if(w8=d,(Sl=g)&&!v)for(On=o;On!==null;)d=On,g=d.child,d.tag===22&&d.memoizedState!==null?ure(o):g!==null?(g.return=d,On=g):ure(o);for(;l!==null;)On=l,hhe(l),l=l.sibling;On=o,w8=p,Sl=v}lre(t)}else o.subtreeFlags&8772&&l!==null?(l.return=o,On=l):lre(t)}}function lre(t){for(;On!==null;){var e=On;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Sl||xI(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Sl)if(n===null)i.componentDidMount();else{var o=e.elementType===e.type?n.memoizedProps:f0(e.type,n.memoizedProps);i.componentDidUpdate(o,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var l=e.updateQueue;l!==null&&Wne(e,l,i);break;case 3:var d=e.updateQueue;if(d!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Wne(e,d,n)}break;case 5:var p=e.stateNode;if(n===null&&e.flags&4){n=p;var g=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":g.autoFocus&&n.focus();break;case"img":g.src&&(n.src=g.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var v=e.alternate;if(v!==null){var _=v.memoizedState;if(_!==null){var b=_.dehydrated;b!==null&&aT(b)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(tn(163))}Sl||e.flags&512&&sH(e)}catch(w){ho(e,e.return,w)}}if(e===t){On=null;break}if(n=e.sibling,n!==null){n.return=e.return,On=n;break}On=e.return}}function cre(t){for(;On!==null;){var e=On;if(e===t){On=null;break}var n=e.sibling;if(n!==null){n.return=e.return,On=n;break}On=e.return}}function ure(t){for(;On!==null;){var e=On;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{xI(4,e)}catch(g){ho(e,n,g)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var o=e.return;try{i.componentDidMount()}catch(g){ho(e,o,g)}}var l=e.return;try{sH(e)}catch(g){ho(e,l,g)}break;case 5:var d=e.return;try{sH(e)}catch(g){ho(e,d,g)}}}catch(g){ho(e,e.return,g)}if(e===t){On=null;break}var p=e.sibling;if(p!==null){p.return=e.return,On=p;break}On=e.return}}var xCe=Math.ceil,SO=_p.ReactCurrentDispatcher,ZY=_p.ReactCurrentOwner,wf=_p.ReactCurrentBatchConfig,Ci=0,Ea=null,Go=null,Wa=0,_u=0,sb=Am(0),aa=0,_T=null,Hg=0,MI=0,QY=0,$S=null,Cc=null,KY=0,Ib=1/0,Oh=null,TO=!1,lH=null,Z2=null,E8=!1,U2=null,xO=0,WS=0,cH=null,HC=-1,$C=0;function Xl(){return Ci&6?Co():HC!==-1?HC:HC=Co()}function Q2(t){return t.mode&1?Ci&2&&Wa!==0?Wa&-Wa:cCe.transition!==null?($C===0&&($C=Q0e()),$C):(t=ds,t!==0||(t=window.event,t=t===void 0?16:ide(t.type)),t):1}function E0(t,e,n,i){if(50<WS)throw WS=0,cH=null,Error(tn(185));u6(t,n,i),(!(Ci&2)||t!==Ea)&&(t===Ea&&(!(Ci&2)&&(MI|=n),aa===4&&D2(t,Wa)),zc(t,i),n===1&&Ci===0&&!(e.mode&1)&&(Ib=Co()+500,EI&&wm()))}function zc(t,e){var n=t.callbackNode;cke(t,e);var i=cO(t,t===Ea?Wa:0);if(i===0)n!==null&&yne(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&yne(n),e===1)t.tag===0?lCe(fre.bind(null,t)):Ede(fre.bind(null,t)),iCe(function(){!(Ci&6)&&wm()}),n=null;else{switch(K0e(i)){case 1:n=SY;break;case 4:n=X0e;break;case 16:n=lO;break;case 536870912:n=Z0e;break;default:n=lO}n=Ahe(n,phe.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function phe(t,e){if(HC=-1,$C=0,Ci&6)throw Error(tn(327));var n=t.callbackNode;if(yb()&&t.callbackNode!==n)return null;var i=cO(t,t===Ea?Wa:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=MO(t,i);else{e=i;var o=Ci;Ci|=2;var l=ghe();(Ea!==t||Wa!==e)&&(Oh=null,Ib=Co()+500,Og(t,e));do try{CCe();break}catch(p){mhe(t,p)}while(!0);zY(),SO.current=l,Ci=o,Go!==null?e=0:(Ea=null,Wa=0,e=aa)}if(e!==0){if(e===2&&(o=Lj(t),o!==0&&(i=o,e=uH(t,o))),e===1)throw n=_T,Og(t,0),D2(t,i),zc(t,Co()),n;if(e===6)D2(t,i);else{if(o=t.current.alternate,!(i&30)&&!MCe(o)&&(e=MO(t,i),e===2&&(l=Lj(t),l!==0&&(i=l,e=uH(t,l))),e===1))throw n=_T,Og(t,0),D2(t,i),zc(t,Co()),n;switch(t.finishedWork=o,t.finishedLanes=i,e){case 0:case 1:throw Error(tn(345));case 2:Y1(t,Cc,Oh);break;case 3:if(D2(t,i),(i&130023424)===i&&(e=KY+500-Co(),10<e)){if(cO(t,0)!==0)break;if(o=t.suspendedLanes,(o&i)!==i){Xl(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=Hj(Y1.bind(null,t,Cc,Oh),e);break}Y1(t,Cc,Oh);break;case 4:if(D2(t,i),(i&4194240)===i)break;for(e=t.eventTimes,o=-1;0<i;){var d=31-w0(i);l=1<<d,d=e[d],d>o&&(o=d),i&=~l}if(i=o,i=Co()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*xCe(i/1960))-i,10<i){t.timeoutHandle=Hj(Y1.bind(null,t,Cc,Oh),i);break}Y1(t,Cc,Oh);break;case 5:Y1(t,Cc,Oh);break;default:throw Error(tn(329))}}}return zc(t,Co()),t.callbackNode===n?phe.bind(null,t):null}function uH(t,e){var n=$S;return t.current.memoizedState.isDehydrated&&(Og(t,e).flags|=256),t=MO(t,e),t!==2&&(e=Cc,Cc=n,e!==null&&fH(e)),t}function fH(t){Cc===null?Cc=t:Cc.push.apply(Cc,t)}function MCe(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var o=n[i],l=o.getSnapshot;o=o.value;try{if(!P0(l(),o))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function D2(t,e){for(e&=~QY,e&=~MI,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-w0(e),i=1<<n;t[n]=-1,e&=~i}}function fre(t){if(Ci&6)throw Error(tn(327));yb();var e=cO(t,0);if(!(e&1))return zc(t,Co()),null;var n=MO(t,e);if(t.tag!==0&&n===2){var i=Lj(t);i!==0&&(e=i,n=uH(t,i))}if(n===1)throw n=_T,Og(t,0),D2(t,e),zc(t,Co()),n;if(n===6)throw Error(tn(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Y1(t,Cc,Oh),zc(t,Co()),null}function JY(t,e){var n=Ci;Ci|=1;try{return t(e)}finally{Ci=n,Ci===0&&(Ib=Co()+500,EI&&wm())}}function $g(t){U2!==null&&U2.tag===0&&!(Ci&6)&&yb();var e=Ci;Ci|=1;var n=wf.transition,i=ds;try{if(wf.transition=null,ds=1,t)return t()}finally{ds=i,wf.transition=n,Ci=e,!(Ci&6)&&wm()}}function eq(){_u=sb.current,Fs(sb)}function Og(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,rCe(n)),Go!==null)for(n=Go.return;n!==null;){var i=n;switch(IY(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&pO();break;case 3:Db(),Fs(Nc),Fs(kl),jY();break;case 5:GY(i);break;case 4:Db();break;case 13:Fs(io);break;case 19:Fs(io);break;case 10:BY(i.type._context);break;case 22:case 23:eq()}n=n.return}if(Ea=t,Go=t=K2(t.current,null),Wa=_u=e,aa=0,_T=null,QY=MI=Hg=0,Cc=$S=null,bg!==null){for(e=0;e<bg.length;e++)if(n=bg[e],i=n.interleaved,i!==null){n.interleaved=null;var o=i.next,l=n.pending;if(l!==null){var d=l.next;l.next=o,i.next=d}n.pending=i}bg=null}return t}function mhe(t,e){do{var n=Go;try{if(zY(),VC.current=EO,wO){for(var i=ao.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}wO=!1}if(jg=0,ya=sa=ao=null,jS=!1,mT=0,ZY.current=null,n===null||n.return===null){aa=1,_T=e,Go=null;break}e:{var l=t,d=n.return,p=n,g=e;if(e=Wa,p.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){var v=g,_=p,b=_.tag;if(!(_.mode&1)&&(b===0||b===11||b===15)){var w=_.alternate;w?(_.updateQueue=w.updateQueue,_.memoizedState=w.memoizedState,_.lanes=w.lanes):(_.updateQueue=null,_.memoizedState=null)}var E=Kne(d);if(E!==null){E.flags&=-257,Jne(E,d,p,l,e),E.mode&1&&Qne(l,v,e),e=E,g=v;var S=e.updateQueue;if(S===null){var M=new Set;M.add(g),e.updateQueue=M}else S.add(g);break e}else{if(!(e&1)){Qne(l,v,e),tq();break e}g=Error(tn(426))}}else if(Zs&&p.mode&1){var k=Kne(d);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Jne(k,d,p,l,e),NY(Ob(g,p));break e}}l=g=Ob(g,p),aa!==4&&(aa=2),$S===null?$S=[l]:$S.push(l),l=d;do{switch(l.tag){case 3:l.flags|=65536,e&=-e,l.lanes|=e;var x=Kde(l,g,e);$ne(l,x);break e;case 1:p=g;var C=l.type,P=l.stateNode;if(!(l.flags&128)&&(typeof C.getDerivedStateFromError=="function"||P!==null&&typeof P.componentDidCatch=="function"&&(Z2===null||!Z2.has(P)))){l.flags|=65536,e&=-e,l.lanes|=e;var O=Jde(l,p,e);$ne(l,O);break e}}l=l.return}while(l!==null)}_he(n)}catch(L){e=L,Go===n&&n!==null&&(Go=n=n.return);continue}break}while(!0)}function ghe(){var t=SO.current;return SO.current=EO,t===null?EO:t}function tq(){(aa===0||aa===3||aa===2)&&(aa=4),Ea===null||!(Hg&268435455)&&!(MI&268435455)||D2(Ea,Wa)}function MO(t,e){var n=Ci;Ci|=2;var i=ghe();(Ea!==t||Wa!==e)&&(Oh=null,Og(t,e));do try{kCe();break}catch(o){mhe(t,o)}while(!0);if(zY(),Ci=n,SO.current=i,Go!==null)throw Error(tn(261));return Ea=null,Wa=0,aa}function kCe(){for(;Go!==null;)vhe(Go)}function CCe(){for(;Go!==null&&!eke();)vhe(Go)}function vhe(t){var e=bhe(t.alternate,t,_u);t.memoizedProps=t.pendingProps,e===null?_he(t):Go=e,ZY.current=null}function _he(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=wCe(n,e),n!==null){n.flags&=32767,Go=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{aa=6,Go=null;return}}else if(n=ACe(n,e,_u),n!==null){Go=n;return}if(e=e.sibling,e!==null){Go=e;return}Go=e=t}while(e!==null);aa===0&&(aa=5)}function Y1(t,e,n){var i=ds,o=wf.transition;try{wf.transition=null,ds=1,PCe(t,e,n,i)}finally{wf.transition=o,ds=i}return null}function PCe(t,e,n,i){do yb();while(U2!==null);if(Ci&6)throw Error(tn(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(tn(177));t.callbackNode=null,t.callbackPriority=0;var l=n.lanes|n.childLanes;if(uke(t,l),t===Ea&&(Go=Ea=null,Wa=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||E8||(E8=!0,Ahe(lO,function(){return yb(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=wf.transition,wf.transition=null;var d=ds;ds=1;var p=Ci;Ci|=4,ZY.current=null,SCe(t,n),dhe(n,t),Zke(Gj),uO=!!Vj,Gj=Vj=null,t.current=n,TCe(n),tke(),Ci=p,ds=d,wf.transition=l}else t.current=n;if(E8&&(E8=!1,U2=t,xO=o),l=t.pendingLanes,l===0&&(Z2=null),ike(n.stateNode),zc(t,Co()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)o=e[n],i(o.value,{componentStack:o.stack,digest:o.digest});if(TO)throw TO=!1,t=lH,lH=null,t;return xO&1&&t.tag!==0&&yb(),l=t.pendingLanes,l&1?t===cH?WS++:(WS=0,cH=t):WS=0,wm(),null}function yb(){if(U2!==null){var t=K0e(xO),e=wf.transition,n=ds;try{if(wf.transition=null,ds=16>t?16:t,U2===null)var i=!1;else{if(t=U2,U2=null,xO=0,Ci&6)throw Error(tn(331));var o=Ci;for(Ci|=4,On=t.current;On!==null;){var l=On,d=l.child;if(On.flags&16){var p=l.deletions;if(p!==null){for(var g=0;g<p.length;g++){var v=p[g];for(On=v;On!==null;){var _=On;switch(_.tag){case 0:case 11:case 15:HS(8,_,l)}var b=_.child;if(b!==null)b.return=_,On=b;else for(;On!==null;){_=On;var w=_.sibling,E=_.return;if(che(_),_===v){On=null;break}if(w!==null){w.return=E,On=w;break}On=E}}}var S=l.alternate;if(S!==null){var M=S.child;if(M!==null){S.child=null;do{var k=M.sibling;M.sibling=null,M=k}while(M!==null)}}On=l}}if(l.subtreeFlags&2064&&d!==null)d.return=l,On=d;else e:for(;On!==null;){if(l=On,l.flags&2048)switch(l.tag){case 0:case 11:case 15:HS(9,l,l.return)}var x=l.sibling;if(x!==null){x.return=l.return,On=x;break e}On=l.return}}var C=t.current;for(On=C;On!==null;){d=On;var P=d.child;if(d.subtreeFlags&2064&&P!==null)P.return=d,On=P;else e:for(d=C;On!==null;){if(p=On,p.flags&2048)try{switch(p.tag){case 0:case 11:case 15:xI(9,p)}}catch(L){ho(p,p.return,L)}if(p===d){On=null;break e}var O=p.sibling;if(O!==null){O.return=p.return,On=O;break e}On=p.return}}if(Ci=o,wm(),Td&&typeof Td.onPostCommitFiberRoot=="function")try{Td.onPostCommitFiberRoot(_I,t)}catch{}i=!0}return i}finally{ds=n,wf.transition=e}}return!1}function dre(t,e,n){e=Ob(n,e),e=Kde(t,e,1),t=X2(t,e,1),e=Xl(),t!==null&&(u6(t,1,e),zc(t,e))}function ho(t,e,n){if(t.tag===3)dre(t,t,n);else for(;e!==null;){if(e.tag===3){dre(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Z2===null||!Z2.has(i))){t=Ob(n,t),t=Jde(e,t,1),e=X2(e,t,1),t=Xl(),e!==null&&(u6(e,1,t),zc(e,t));break}}e=e.return}}function RCe(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Xl(),t.pingedLanes|=t.suspendedLanes&n,Ea===t&&(Wa&n)===n&&(aa===4||aa===3&&(Wa&130023424)===Wa&&500>Co()-KY?Og(t,0):QY|=n),zc(t,e)}function yhe(t,e){e===0&&(t.mode&1?(e=h8,h8<<=1,!(h8&130023424)&&(h8=4194304)):e=1);var n=Xl();t=ip(t,e),t!==null&&(u6(t,e,n),zc(t,n))}function DCe(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),yhe(t,n)}function OCe(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(tn(314))}i!==null&&i.delete(e),yhe(t,n)}var bhe;bhe=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Nc.current)Ic=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ic=!1,bCe(t,e,n);Ic=!!(t.flags&131072)}else Ic=!1,Zs&&e.flags&1048576&&Sde(e,vO,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;jC(t,e),t=e.pendingProps;var o=Cb(e,kl.current);_b(e,n),o=$Y(null,e,i,t,o,n);var l=WY();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Lc(i)?(l=!0,mO(e)):l=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,FY(e),o.updater=TI,e.stateNode=o,o._reactInternals=e,Qj(e,i,t,n),e=eH(null,e,i,!0,l,n)):(e.tag=0,Zs&&l&&OY(e),Yl(null,e,o,n),e=e.child),e;case 16:i=e.elementType;e:{switch(jC(t,e),t=e.pendingProps,o=i._init,i=o(i._payload),e.type=i,o=e.tag=NCe(i),t=f0(i,t),o){case 0:e=Jj(null,e,i,t,n);break e;case 1:e=nre(null,e,i,t,n);break e;case 11:e=ere(null,e,i,t,n);break e;case 14:e=tre(null,e,i,f0(i.type,t),n);break e}throw Error(tn(306,i,""))}return e;case 0:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:f0(i,o),Jj(t,e,i,o,n);case 1:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:f0(i,o),nre(t,e,i,o,n);case 3:e:{if(rhe(e),t===null)throw Error(tn(387));i=e.pendingProps,l=e.memoizedState,o=l.element,Pde(t,e),bO(e,i,null,n);var d=e.memoizedState;if(i=d.element,l.isDehydrated)if(l={element:i,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},e.updateQueue.baseState=l,e.memoizedState=l,e.flags&256){o=Ob(Error(tn(423)),e),e=rre(t,e,i,n,o);break e}else if(i!==o){o=Ob(Error(tn(424)),e),e=rre(t,e,i,n,o);break e}else for(wu=q2(e.stateNode.containerInfo.firstChild),Tu=e,Zs=!0,m0=null,n=kde(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Pb(),i===o){e=sp(t,e,n);break e}Yl(t,e,i,n)}e=e.child}return e;case 5:return Rde(e),t===null&&qj(e),i=e.type,o=e.pendingProps,l=t!==null?t.memoizedProps:null,d=o.children,jj(i,o)?d=null:l!==null&&jj(i,l)&&(e.flags|=32),nhe(t,e),Yl(t,e,d,n),e.child;case 6:return t===null&&qj(e),null;case 13:return ihe(t,e,n);case 4:return VY(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Rb(e,null,i,n):Yl(t,e,i,n),e.child;case 11:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:f0(i,o),ere(t,e,i,o,n);case 7:return Yl(t,e,e.pendingProps,n),e.child;case 8:return Yl(t,e,e.pendingProps.children,n),e.child;case 12:return Yl(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,o=e.pendingProps,l=e.memoizedProps,d=o.value,Ds(_O,i._currentValue),i._currentValue=d,l!==null)if(P0(l.value,d)){if(l.children===o.children&&!Nc.current){e=sp(t,e,n);break e}}else for(l=e.child,l!==null&&(l.return=e);l!==null;){var p=l.dependencies;if(p!==null){d=l.child;for(var g=p.firstContext;g!==null;){if(g.context===i){if(l.tag===1){g=Yh(-1,n&-n),g.tag=2;var v=l.updateQueue;if(v!==null){v=v.shared;var _=v.pending;_===null?g.next=g:(g.next=_.next,_.next=g),v.pending=g}}l.lanes|=n,g=l.alternate,g!==null&&(g.lanes|=n),Xj(l.return,n,e),p.lanes|=n;break}g=g.next}}else if(l.tag===10)d=l.type===e.type?null:l.child;else if(l.tag===18){if(d=l.return,d===null)throw Error(tn(341));d.lanes|=n,p=d.alternate,p!==null&&(p.lanes|=n),Xj(d,n,e),d=l.sibling}else d=l.child;if(d!==null)d.return=l;else for(d=l;d!==null;){if(d===e){d=null;break}if(l=d.sibling,l!==null){l.return=d.return,d=l;break}d=d.return}l=d}Yl(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,i=e.pendingProps.children,_b(e,n),o=kf(o),i=i(o),e.flags|=1,Yl(t,e,i,n),e.child;case 14:return i=e.type,o=f0(i,e.pendingProps),o=f0(i.type,o),tre(t,e,i,o,n);case 15:return ehe(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:f0(i,o),jC(t,e),e.tag=1,Lc(i)?(t=!0,mO(e)):t=!1,_b(e,n),Qde(e,i,o),Qj(e,i,o,n),eH(null,e,i,!0,t,n);case 19:return she(t,e,n);case 22:return the(t,e,n)}throw Error(tn(156,e.tag))};function Ahe(t,e){return q0e(t,e)}function ICe(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vf(t,e,n,i){return new ICe(t,e,n,i)}function nq(t){return t=t.prototype,!(!t||!t.isReactComponent)}function NCe(t){if(typeof t=="function")return nq(t)?1:0;if(t!=null){if(t=t.$$typeof,t===AY)return 11;if(t===wY)return 14}return 2}function K2(t,e){var n=t.alternate;return n===null?(n=vf(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function WC(t,e,n,i,o,l){var d=2;if(i=t,typeof t=="function")nq(t)&&(d=1);else if(typeof t=="string")d=5;else e:switch(t){case Xy:return Ig(n.children,o,l,e);case bY:d=8,o|=8;break;case Aj:return t=vf(12,n,e,o|2),t.elementType=Aj,t.lanes=l,t;case wj:return t=vf(13,n,e,o),t.elementType=wj,t.lanes=l,t;case Ej:return t=vf(19,n,e,o),t.elementType=Ej,t.lanes=l,t;case R0e:return kI(n,o,l,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case C0e:d=10;break e;case P0e:d=9;break e;case AY:d=11;break e;case wY:d=14;break e;case T2:d=16,i=null;break e}throw Error(tn(130,t==null?t:typeof t,""))}return e=vf(d,n,e,o),e.elementType=t,e.type=i,e.lanes=l,e}function Ig(t,e,n,i){return t=vf(7,t,i,e),t.lanes=n,t}function kI(t,e,n,i){return t=vf(22,t,i,e),t.elementType=R0e,t.lanes=n,t.stateNode={isHidden:!1},t}function NU(t,e,n){return t=vf(6,t,null,e),t.lanes=n,t}function LU(t,e,n){return e=vf(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function LCe(t,e,n,i,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gU(0),this.expirationTimes=gU(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gU(0),this.identifierPrefix=i,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function rq(t,e,n,i,o,l,d,p,g){return t=new LCe(t,e,n,p,g),e===1?(e=1,l===!0&&(e|=8)):e=0,l=vf(3,null,null,e),t.current=l,l.stateNode=t,l.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},FY(l),t}function zCe(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qy,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function whe(t){if(!t)return am;t=t._reactInternals;e:{if(sv(t)!==t||t.tag!==1)throw Error(tn(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Lc(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(tn(171))}if(t.tag===1){var n=t.type;if(Lc(n))return wde(t,n,e)}return e}function Ehe(t,e,n,i,o,l,d,p,g){return t=rq(n,i,!0,t,o,l,d,p,g),t.context=whe(null),n=t.current,i=Xl(),o=Q2(n),l=Yh(i,o),l.callback=e??null,X2(n,l,o),t.current.lanes=o,u6(t,o,i),zc(t,i),t}function CI(t,e,n,i){var o=e.current,l=Xl(),d=Q2(o);return n=whe(n),e.context===null?e.context=n:e.pendingContext=n,e=Yh(l,d),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=X2(o,e,d),t!==null&&(E0(t,o,d,l),FC(t,o,d)),d}function kO(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function hre(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function iq(t,e){hre(t,e),(t=t.alternate)&&hre(t,e)}function BCe(){return null}var She=typeof reportError=="function"?reportError:function(t){console.error(t)};function sq(t){this._internalRoot=t}PI.prototype.render=sq.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(tn(409));CI(t,e,null,null)};PI.prototype.unmount=sq.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;$g(function(){CI(null,t,null,null)}),e[rp]=null}};function PI(t){this._internalRoot=t}PI.prototype.unstable_scheduleHydration=function(t){if(t){var e=tde();t={blockedOn:null,target:t,priority:e};for(var n=0;n<R2.length&&e!==0&&e<R2[n].priority;n++);R2.splice(n,0,t),n===0&&rde(t)}};function oq(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function RI(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function pre(){}function UCe(t,e,n,i,o){if(o){if(typeof i=="function"){var l=i;i=function(){var v=kO(d);l.call(v)}}var d=Ehe(e,i,t,0,null,!1,!1,"",pre);return t._reactRootContainer=d,t[rp]=d.current,uT(t.nodeType===8?t.parentNode:t),$g(),d}for(;o=t.lastChild;)t.removeChild(o);if(typeof i=="function"){var p=i;i=function(){var v=kO(g);p.call(v)}}var g=rq(t,0,!1,null,null,!1,!1,"",pre);return t._reactRootContainer=g,t[rp]=g.current,uT(t.nodeType===8?t.parentNode:t),$g(function(){CI(e,g,n,i)}),g}function DI(t,e,n,i,o){var l=n._reactRootContainer;if(l){var d=l;if(typeof o=="function"){var p=o;o=function(){var g=kO(d);p.call(g)}}CI(e,d,t,o)}else d=UCe(n,e,t,o,i);return kO(d)}J0e=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Sw(e.pendingLanes);n!==0&&(TY(e,n|1),zc(e,Co()),!(Ci&6)&&(Ib=Co()+500,wm()))}break;case 13:$g(function(){var i=ip(t,1);if(i!==null){var o=Xl();E0(i,t,1,o)}}),iq(t,1)}};xY=function(t){if(t.tag===13){var e=ip(t,134217728);if(e!==null){var n=Xl();E0(e,t,134217728,n)}iq(t,134217728)}};ede=function(t){if(t.tag===13){var e=Q2(t),n=ip(t,e);if(n!==null){var i=Xl();E0(n,t,e,i)}iq(t,e)}};tde=function(){return ds};nde=function(t,e){var n=ds;try{return ds=t,e()}finally{ds=n}};Oj=function(t,e,n){switch(e){case"input":if(xj(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var o=wI(i);if(!o)throw Error(tn(90));O0e(i),xj(i,o)}}}break;case"textarea":N0e(t,n);break;case"select":e=n.value,e!=null&&pb(t,!!n.multiple,e,!1)}};G0e=JY;j0e=$g;var FCe={usingClientEntryPoint:!1,Events:[d6,Jy,wI,F0e,V0e,JY]},r3={findFiberByHostInstance:yg,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},VCe={bundleType:r3.bundleType,version:r3.version,rendererPackageName:r3.rendererPackageName,rendererConfig:r3.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_p.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=W0e(t),t===null?null:t.stateNode},findFiberByHostInstance:r3.findFiberByHostInstance||BCe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var S8=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!S8.isDisabled&&S8.supportsFiber)try{_I=S8.inject(VCe),Td=S8}catch{}}Ou.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=FCe;Ou.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!oq(e))throw Error(tn(200));return zCe(t,e,null,n)};Ou.createRoot=function(t,e){if(!oq(t))throw Error(tn(299));var n=!1,i="",o=She;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=rq(t,1,!1,null,null,n,!1,i,o),t[rp]=e.current,uT(t.nodeType===8?t.parentNode:t),new sq(e)};Ou.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(tn(188)):(t=Object.keys(t).join(","),Error(tn(268,t)));return t=W0e(e),t=t===null?null:t.stateNode,t};Ou.flushSync=function(t){return $g(t)};Ou.hydrate=function(t,e,n){if(!RI(e))throw Error(tn(200));return DI(null,t,e,!0,n)};Ou.hydrateRoot=function(t,e,n){if(!oq(t))throw Error(tn(405));var i=n!=null&&n.hydratedSources||null,o=!1,l="",d=She;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(d=n.onRecoverableError)),e=Ehe(e,null,t,1,n??null,o,!1,l,d),t[rp]=e.current,uT(t),i)for(t=0;t<i.length;t++)n=i[t],o=n._getVersion,o=o(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,o]:e.mutableSourceEagerHydrationData.push(n,o);return new PI(e)};Ou.render=function(t,e,n){if(!RI(e))throw Error(tn(200));return DI(null,t,e,!1,n)};Ou.unmountComponentAtNode=function(t){if(!RI(t))throw Error(tn(40));return t._reactRootContainer?($g(function(){DI(null,null,t,!1,function(){t._reactRootContainer=null,t[rp]=null})}),!0):!1};Ou.unstable_batchedUpdates=JY;Ou.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!RI(n))throw Error(tn(200));if(t==null||t._reactInternals===void 0)throw Error(tn(38));return DI(t,e,n,!1,i)};Ou.version="18.3.1-next-f1338f8080-20240426";function The(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(The)}catch(t){console.error(t)}}The(),T0e.exports=Ou;var p6=T0e.exports;const GCe=l6(p6);var mre=p6;cne.createRoot=mre.createRoot,cne.hydrateRoot=mre.hydrateRoot;var _d=function(){return _d=Object.assign||function(e){for(var n,i=1,o=arguments.length;i<o;i++){n=arguments[i];for(var l in n)Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l])}return e},_d.apply(this,arguments)};function xhe(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]]);return n}function jCe(t,e,n){if(n||arguments.length===2)for(var i=0,o=e.length,l;i<o;i++)(l||!(i in e))&&(l||(l=Array.prototype.slice.call(e,0,i)),l[i]=e[i]);return t.concat(l||Array.prototype.slice.call(e))}var YC="right-scroll-bar-position",qC="width-before-scroll-bar",HCe="with-scroll-bars-hidden",$Ce="--removed-body-scroll-bar-size";function zU(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function WCe(t,e){var n=de.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(i){var o=n.value;o!==i&&(n.value=i,n.callback(i,o))}}}})[0];return n.callback=e,n.facade}var YCe=typeof window<"u"?de.useLayoutEffect:de.useEffect,gre=new WeakMap;function qCe(t,e){var n=WCe(null,function(i){return t.forEach(function(o){return zU(o,i)})});return YCe(function(){var i=gre.get(n);if(i){var o=new Set(i),l=new Set(t),d=n.current;o.forEach(function(p){l.has(p)||zU(p,null)}),l.forEach(function(p){o.has(p)||zU(p,d)})}gre.set(n,t)},[t]),n}function XCe(t){return t}function ZCe(t,e){e===void 0&&(e=XCe);var n=[],i=!1,o={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(l){var d=e(l,i);return n.push(d),function(){n=n.filter(function(p){return p!==d})}},assignSyncMedium:function(l){for(i=!0;n.length;){var d=n;n=[],d.forEach(l)}n={push:function(p){return l(p)},filter:function(){return n}}},assignMedium:function(l){i=!0;var d=[];if(n.length){var p=n;n=[],p.forEach(l),d=n}var g=function(){var _=d;d=[],_.forEach(l)},v=function(){return Promise.resolve().then(g)};v(),n={push:function(_){d.push(_),v()},filter:function(_){return d=d.filter(_),n}}}};return o}function QCe(t){t===void 0&&(t={});var e=ZCe(null);return e.options=_d({async:!0,ssr:!1},t),e}var Mhe=function(t){var e=t.sideCar,n=xhe(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return de.createElement(i,_d({},n))};Mhe.isSideCarExport=!0;function KCe(t,e){return t.useMedium(e),Mhe}var khe=QCe(),BU=function(){},OI=de.forwardRef(function(t,e){var n=de.useRef(null),i=de.useState({onScrollCapture:BU,onWheelCapture:BU,onTouchMoveCapture:BU}),o=i[0],l=i[1],d=t.forwardProps,p=t.children,g=t.className,v=t.removeScrollBar,_=t.enabled,b=t.shards,w=t.sideCar,E=t.noIsolation,S=t.inert,M=t.allowPinchZoom,k=t.as,x=k===void 0?"div":k,C=t.gapMode,P=xhe(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),O=w,L=qCe([n,e]),B=_d(_d({},P),o);return de.createElement(de.Fragment,null,_&&de.createElement(O,{sideCar:khe,removeScrollBar:v,shards:b,noIsolation:E,inert:S,setCallbacks:l,allowPinchZoom:!!M,lockRef:n,gapMode:C}),d?de.cloneElement(de.Children.only(p),_d(_d({},B),{ref:L})):de.createElement(x,_d({},B,{className:g,ref:L}),p))});OI.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};OI.classNames={fullWidth:qC,zeroRight:YC};var JCe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function ePe(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=JCe();return e&&t.setAttribute("nonce",e),t}function tPe(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function nPe(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var rPe=function(){var t=0,e=null;return{add:function(n){t==0&&(e=ePe())&&(tPe(e,n),nPe(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},iPe=function(){var t=rPe();return function(e,n){de.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},Che=function(){var t=iPe(),e=function(n){var i=n.styles,o=n.dynamic;return t(i,o),null};return e},sPe={left:0,top:0,right:0,gap:0},UU=function(t){return parseInt(t||"",10)||0},oPe=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],i=e[t==="padding"?"paddingTop":"marginTop"],o=e[t==="padding"?"paddingRight":"marginRight"];return[UU(n),UU(i),UU(o)]},aPe=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return sPe;var e=oPe(t),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-n+e[2]-e[0])}},lPe=Che(),bb="data-scroll-locked",cPe=function(t,e,n,i){var o=t.left,l=t.top,d=t.right,p=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(HCe,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(p,"px ").concat(i,`;
  }
  body[`).concat(bb,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(l,`px;
    padding-right: `).concat(d,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(p,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(p,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(YC,` {
    right: `).concat(p,"px ").concat(i,`;
  }
  
  .`).concat(qC,` {
    margin-right: `).concat(p,"px ").concat(i,`;
  }
  
  .`).concat(YC," .").concat(YC,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(qC," .").concat(qC,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(bb,`] {
    `).concat($Ce,": ").concat(p,`px;
  }
`)},vre=function(){var t=parseInt(document.body.getAttribute(bb)||"0",10);return isFinite(t)?t:0},uPe=function(){de.useEffect(function(){return document.body.setAttribute(bb,(vre()+1).toString()),function(){var t=vre()-1;t<=0?document.body.removeAttribute(bb):document.body.setAttribute(bb,t.toString())}},[])},fPe=function(t){var e=t.noRelative,n=t.noImportant,i=t.gapMode,o=i===void 0?"margin":i;uPe();var l=de.useMemo(function(){return aPe(o)},[o]);return de.createElement(lPe,{styles:cPe(l,!e,o,n?"":"!important")})},dH=!1;if(typeof window<"u")try{var T8=Object.defineProperty({},"passive",{get:function(){return dH=!0,!0}});window.addEventListener("test",T8,T8),window.removeEventListener("test",T8,T8)}catch{dH=!1}var e_=dH?{passive:!1}:!1,dPe=function(t){return t.tagName==="TEXTAREA"},Phe=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!dPe(t)&&n[e]==="visible")},hPe=function(t){return Phe(t,"overflowY")},pPe=function(t){return Phe(t,"overflowX")},_re=function(t,e){var n=e.ownerDocument,i=e;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var o=Rhe(t,i);if(o){var l=Dhe(t,i),d=l[1],p=l[2];if(d>p)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},mPe=function(t){var e=t.scrollTop,n=t.scrollHeight,i=t.clientHeight;return[e,n,i]},gPe=function(t){var e=t.scrollLeft,n=t.scrollWidth,i=t.clientWidth;return[e,n,i]},Rhe=function(t,e){return t==="v"?hPe(e):pPe(e)},Dhe=function(t,e){return t==="v"?mPe(e):gPe(e)},vPe=function(t,e){return t==="h"&&e==="rtl"?-1:1},_Pe=function(t,e,n,i,o){var l=vPe(t,window.getComputedStyle(e).direction),d=l*i,p=n.target,g=e.contains(p),v=!1,_=d>0,b=0,w=0;do{var E=Dhe(t,p),S=E[0],M=E[1],k=E[2],x=M-k-l*S;(S||x)&&Rhe(t,p)&&(b+=x,w+=S),p instanceof ShadowRoot?p=p.host:p=p.parentNode}while(!g&&p!==document.body||g&&(e.contains(p)||e===p));return(_&&(Math.abs(b)<1||!o)||!_&&(Math.abs(w)<1||!o))&&(v=!0),v},x8=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},yre=function(t){return[t.deltaX,t.deltaY]},bre=function(t){return t&&"current"in t?t.current:t},yPe=function(t,e){return t[0]===e[0]&&t[1]===e[1]},bPe=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},APe=0,t_=[];function wPe(t){var e=de.useRef([]),n=de.useRef([0,0]),i=de.useRef(),o=de.useState(APe++)[0],l=de.useState(Che)[0],d=de.useRef(t);de.useEffect(function(){d.current=t},[t]),de.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(o));var M=jCe([t.lockRef.current],(t.shards||[]).map(bre),!0).filter(Boolean);return M.forEach(function(k){return k.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),M.forEach(function(k){return k.classList.remove("allow-interactivity-".concat(o))})}}},[t.inert,t.lockRef.current,t.shards]);var p=de.useCallback(function(M,k){if("touches"in M&&M.touches.length===2)return!d.current.allowPinchZoom;var x=x8(M),C=n.current,P="deltaX"in M?M.deltaX:C[0]-x[0],O="deltaY"in M?M.deltaY:C[1]-x[1],L,B=M.target,V=Math.abs(P)>Math.abs(O)?"h":"v";if("touches"in M&&V==="h"&&B.type==="range")return!1;var G=_re(V,B);if(!G)return!0;if(G?L=V:(L=V==="v"?"h":"v",G=_re(V,B)),!G)return!1;if(!i.current&&"changedTouches"in M&&(P||O)&&(i.current=L),!L)return!0;var j=i.current||L;return _Pe(j,k,M,j==="h"?P:O,!0)},[]),g=de.useCallback(function(M){var k=M;if(!(!t_.length||t_[t_.length-1]!==l)){var x="deltaY"in k?yre(k):x8(k),C=e.current.filter(function(L){return L.name===k.type&&(L.target===k.target||k.target===L.shadowParent)&&yPe(L.delta,x)})[0];if(C&&C.should){k.cancelable&&k.preventDefault();return}if(!C){var P=(d.current.shards||[]).map(bre).filter(Boolean).filter(function(L){return L.contains(k.target)}),O=P.length>0?p(k,P[0]):!d.current.noIsolation;O&&k.cancelable&&k.preventDefault()}}},[]),v=de.useCallback(function(M,k,x,C){var P={name:M,delta:k,target:x,should:C,shadowParent:EPe(x)};e.current.push(P),setTimeout(function(){e.current=e.current.filter(function(O){return O!==P})},1)},[]),_=de.useCallback(function(M){n.current=x8(M),i.current=void 0},[]),b=de.useCallback(function(M){v(M.type,yre(M),M.target,p(M,t.lockRef.current))},[]),w=de.useCallback(function(M){v(M.type,x8(M),M.target,p(M,t.lockRef.current))},[]);de.useEffect(function(){return t_.push(l),t.setCallbacks({onScrollCapture:b,onWheelCapture:b,onTouchMoveCapture:w}),document.addEventListener("wheel",g,e_),document.addEventListener("touchmove",g,e_),document.addEventListener("touchstart",_,e_),function(){t_=t_.filter(function(M){return M!==l}),document.removeEventListener("wheel",g,e_),document.removeEventListener("touchmove",g,e_),document.removeEventListener("touchstart",_,e_)}},[]);var E=t.removeScrollBar,S=t.inert;return de.createElement(de.Fragment,null,S?de.createElement(l,{styles:bPe(o)}):null,E?de.createElement(fPe,{gapMode:t.gapMode}):null)}function EPe(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const SPe=KCe(khe,wPe);var II=de.forwardRef(function(t,e){return de.createElement(OI,_d({},t,{ref:e,sideCar:SPe}))});II.classNames=OI.classNames;function Ya(t){return Object.keys(t)}function FU(t){return t&&typeof t=="object"&&!Array.isArray(t)}function NI(t,e){const n={...t},i=e;return FU(t)&&FU(e)&&Object.keys(e).forEach(o=>{FU(i[o])&&o in t?n[o]=NI(n[o],i[o]):n[o]=i[o]}),n}function TPe(t){return t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`)}function xPe(t){var e;return typeof t!="string"||!t.includes("var(--mantine-scale)")?t:(e=t.match(/^calc\((.*?)\)$/))==null?void 0:e[1].split("*")[0].trim()}function hH(t){const e=xPe(t);return typeof e=="number"?e:typeof e=="string"?e.includes("calc")||e.includes("var")?e:e.includes("px")?Number(e.replace("px","")):e.includes("rem")?Number(e.replace("rem",""))*16:e.includes("em")?Number(e.replace("em",""))*16:Number(e):NaN}function VU(t){return t==="0rem"?"0rem":`calc(${t} * var(--mantine-scale))`}function Ohe(t,{shouldScale:e=!1}={}){function n(i){if(i===0||i==="0")return`0${t}`;if(typeof i=="number"){const o=`${i/16}${t}`;return e?VU(o):o}if(typeof i=="string"){if(i===""||i.startsWith("calc(")||i.startsWith("clamp(")||i.includes("rgba("))return i;if(i.includes(","))return i.split(",").map(l=>n(l)).join(",");if(i.includes(" "))return i.split(" ").map(l=>n(l)).join(" ");if(i.includes(t))return e?VU(i):i;const o=i.replace("px","");if(!Number.isNaN(Number(o))){const l=`${Number(o)/16}${t}`;return e?VU(l):l}}return i}return n}const yt=Ohe("rem",{shouldScale:!0}),CO=Ohe("em");function aq(t){return Object.keys(t).reduce((e,n)=>(t[n]!==void 0&&(e[n]=t[n]),e),{})}function Ihe(t){return typeof t=="number"?!0:typeof t=="string"?t.startsWith("calc(")||t.startsWith("var(")||t.includes(" ")&&t.trim()!==""?!0:/[0-9]/.test(t.trim().replace("-","")[0]):!1}function Em(t){return Array.isArray(t)||t===null?!1:typeof t=="object"?t.type!==de.Fragment:!1}function Hc(t){const e=de.createContext(null);return[({children:o,value:l})=>Y.jsx(e.Provider,{value:l,children:o}),()=>{const o=de.useContext(e);if(o===null)throw new Error(t);return o}]}function LI(t=null){const e=de.createContext(t);return[({children:o,value:l})=>Y.jsx(e.Provider,{value:l,children:o}),()=>de.useContext(e)]}function PO(t,e){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(e);return`${t}-${n}`}}function RO(t,e){let n=t;for(;(n=n.parentElement)&&!n.matches(e););return n}function MPe(t,e,n){for(let i=t-1;i>=0;i-=1)if(!e[i].disabled)return i;if(n){for(let i=e.length-1;i>-1;i-=1)if(!e[i].disabled)return i}return t}function kPe(t,e,n){for(let i=t+1;i<e.length;i+=1)if(!e[i].disabled)return i;if(n){for(let i=0;i<e.length;i+=1)if(!e[i].disabled)return i}return t}function CPe(t,e,n){return RO(t,n)===RO(e,n)}function lq({parentSelector:t,siblingSelector:e,onKeyDown:n,loop:i=!0,activateOnFocus:o=!1,dir:l="rtl",orientation:d}){return p=>{var S;n==null||n(p);const g=Array.from(((S=RO(p.currentTarget,t))==null?void 0:S.querySelectorAll(e))||[]).filter(M=>CPe(p.currentTarget,M,t)),v=g.findIndex(M=>p.currentTarget===M),_=kPe(v,g,i),b=MPe(v,g,i),w=l==="rtl"?b:_,E=l==="rtl"?_:b;switch(p.key){case"ArrowRight":{d==="horizontal"&&(p.stopPropagation(),p.preventDefault(),g[w].focus(),o&&g[w].click());break}case"ArrowLeft":{d==="horizontal"&&(p.stopPropagation(),p.preventDefault(),g[E].focus(),o&&g[E].click());break}case"ArrowUp":{d==="vertical"&&(p.stopPropagation(),p.preventDefault(),g[b].focus(),o&&g[b].click());break}case"ArrowDown":{d==="vertical"&&(p.stopPropagation(),p.preventDefault(),g[_].focus(),o&&g[_].click());break}case"Home":{p.stopPropagation(),p.preventDefault(),!g[0].disabled&&g[0].focus();break}case"End":{p.stopPropagation(),p.preventDefault();const M=g.length-1;!g[M].disabled&&g[M].focus();break}}}}const PPe={app:100,modal:200,popover:300,overlay:400,max:9999};function Sm(t){return PPe[t]}const RPe=()=>{};function DPe(t,e={active:!0}){return typeof t!="function"||!e.active?e.onKeyDown||RPe:n=>{var i;n.key==="Escape"&&(t(n),(i=e.onTrigger)==null||i.call(e))}}function mi(t,e="size",n=!0){if(t!==void 0)return Ihe(t)?n?yt(t):t:`var(--${e}-${t})`}function op(t){return mi(t,"mantine-spacing")}function fa(t){return t===void 0?"var(--mantine-radius-default)":mi(t,"mantine-radius")}function Bc(t){return mi(t,"mantine-font-size")}function Nhe(t){return mi(t,"mantine-line-height",!1)}function cq(t){if(t)return mi(t,"mantine-shadow",!1)}function Vh(t,e){return n=>{t==null||t(n),e==null||e(n)}}function uq(t,e){return t in e.breakpoints?hH(e.breakpoints[t]):hH(t)}function Are(t,e){const n=t.map(i=>({value:i,px:uq(i,e)}));return n.sort((i,o)=>i.px-o.px),n}function OPe(t,e,n){var i;return n?Array.from(((i=RO(n,e))==null?void 0:i.querySelectorAll(t))||[]).findIndex(o=>o===n):null}function IPe(){const[t,e]=de.useState(-1);return[t,{setHovered:e,resetHovered:()=>e(-1)}]}function v0(t,e,n){return e===void 0&&n===void 0?t:e!==void 0&&n===void 0?Math.max(t,e):Math.min(e===void 0&&n!==void 0?t:Math.max(t,e),n)}function Lhe(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function hg(t){const e=de.useRef(t);return de.useEffect(()=>{e.current=t}),de.useMemo(()=>(...n)=>{var i;return(i=e.current)==null?void 0:i.call(e,...n)},[])}function zI(t,e){const n=hg(t),i=de.useRef(0);return de.useEffect(()=>()=>window.clearTimeout(i.current),[]),de.useCallback((...o)=>{window.clearTimeout(i.current),i.current=window.setTimeout(()=>n(...o),e)},[n,e])}const wre=["mousedown","touchstart"];function NPe(t,e,n){const i=de.useRef();return de.useEffect(()=>{const o=l=>{const{target:d}=l??{};if(Array.isArray(n)){const p=(d==null?void 0:d.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(d)&&d.tagName!=="HTML";n.every(v=>!!v&&!l.composedPath().includes(v))&&!p&&t()}else i.current&&!i.current.contains(d)&&t()};return(e||wre).forEach(l=>document.addEventListener(l,o)),()=>{(e||wre).forEach(l=>document.removeEventListener(l,o))}},[i,t,n]),i}function LPe(t,e){try{return t.addEventListener("change",e),()=>t.removeEventListener("change",e)}catch{return t.addListener(e),()=>t.removeListener(e)}}function zPe(t,e){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(t).matches:!1}function BI(t,e,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[i,o]=de.useState(n?e:zPe(t)),l=de.useRef();return de.useEffect(()=>{if("matchMedia"in window)return l.current=window.matchMedia(t),o(l.current.matches),LPe(l.current,d=>o(d.matches))},[t]),i}function zhe(t,e){return BI("(prefers-color-scheme: dark)",t==="dark",e)?"dark":"light"}const ov=typeof document<"u"?de.useLayoutEffect:de.useEffect;function ku(t,e){const n=de.useRef(!1);de.useEffect(()=>()=>{n.current=!1},[]),de.useEffect(()=>{if(n.current)return t();n.current=!0},e)}function Bhe({opened:t,shouldReturnFocus:e=!0}){const n=de.useRef(),i=()=>{var o;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((o=n.current)==null||o.focus({preventScroll:!0}))};return ku(()=>{let o=-1;const l=d=>{d.key==="Tab"&&window.clearTimeout(o)};return document.addEventListener("keydown",l),t?n.current=document.activeElement:e&&(o=window.setTimeout(i,10)),()=>{window.clearTimeout(o),document.removeEventListener("keydown",l)}},[t,e]),i}function BPe(t,e="body > :not(script)"){const n=Lhe(),i=Array.from(document.querySelectorAll(e)).map(o=>{var g;if((g=o==null?void 0:o.shadowRoot)!=null&&g.contains(t)||o.contains(t))return;const l=o.getAttribute("aria-hidden"),d=o.getAttribute("data-hidden"),p=o.getAttribute("data-focus-id");return o.setAttribute("data-focus-id",n),l===null||l==="false"?o.setAttribute("aria-hidden","true"):!d&&!p&&o.setAttribute("data-hidden",l),{node:o,ariaHidden:d||null}});return()=>{i.forEach(o=>{!o||n!==o.node.getAttribute("data-focus-id")||(o.ariaHidden===null?o.node.removeAttribute("aria-hidden"):o.node.setAttribute("aria-hidden",o.ariaHidden),o.node.removeAttribute("data-focus-id"),o.node.removeAttribute("data-hidden"))})}}const UPe=/input|select|textarea|button|object/,Uhe="a, input, select, textarea, button, object, [tabindex]";function FPe(t){return t.style.display==="none"}function VPe(t){if(t.getAttribute("aria-hidden")||t.getAttribute("hidden")||t.getAttribute("type")==="hidden")return!1;let n=t;for(;n&&!(n===document.body||n.nodeType===11);){if(FPe(n))return!1;n=n.parentNode}return!0}function Fhe(t){let e=t.getAttribute("tabindex");return e===null&&(e=void 0),parseInt(e,10)}function pH(t){const e=t.nodeName.toLowerCase(),n=!Number.isNaN(Fhe(t));return(UPe.test(e)&&!t.disabled||t instanceof HTMLAnchorElement&&t.href||n)&&VPe(t)}function Vhe(t){const e=Fhe(t);return(Number.isNaN(e)||e>=0)&&pH(t)}function GPe(t){return Array.from(t.querySelectorAll(Uhe)).filter(Vhe)}function jPe(t,e){const n=GPe(t);if(!n.length){e.preventDefault();return}const i=n[e.shiftKey?0:n.length-1],o=t.getRootNode();let l=i===o.activeElement||t===o.activeElement;const d=o.activeElement;if(d.tagName==="INPUT"&&d.getAttribute("type")==="radio"&&(l=n.filter(_=>_.getAttribute("type")==="radio"&&_.getAttribute("name")===d.getAttribute("name")).includes(i)),!l)return;e.preventDefault();const g=n[e.shiftKey?n.length-1:0];g&&g.focus()}function HPe(t=!0){const e=de.useRef(),n=de.useRef(null),i=l=>{let d=l.querySelector("[data-autofocus]");if(!d){const p=Array.from(l.querySelectorAll(Uhe));d=p.find(Vhe)||p.find(pH)||null,!d&&pH(l)&&(d=l)}d&&d.focus({preventScroll:!0})},o=de.useCallback(l=>{if(t){if(l===null){n.current&&(n.current(),n.current=null);return}n.current=BPe(l),e.current!==l&&(l?(setTimeout(()=>{l.getRootNode()&&i(l)}),e.current=l):e.current=null)}},[t]);return de.useEffect(()=>{if(!t)return;e.current&&setTimeout(()=>i(e.current));const l=d=>{d.key==="Tab"&&e.current&&jPe(e.current,d)};return document.addEventListener("keydown",l),()=>{document.removeEventListener("keydown",l),n.current&&n.current()}},[t]),o}const $Pe=gd.useId||(()=>{});function WPe(){const t=$Pe();return t?`mantine-${t.replace(/:/g,"")}`:""}function B0(t){const e=WPe(),[n,i]=de.useState(e);return ov(()=>{i(Lhe())},[]),typeof t=="string"?t:typeof window>"u"?e:n}function Ghe(t,e,n){de.useEffect(()=>(window.addEventListener(t,e,n),()=>window.removeEventListener(t,e,n)),[t,e])}function UI(t,e){typeof t=="function"?t(e):typeof t=="object"&&t!==null&&"current"in t&&(t.current=e)}function jhe(...t){return e=>{t.forEach(n=>UI(n,e))}}function Po(...t){return de.useCallback(jhe(...t),t)}function Hhe(t){return{x:v0(t.x,0,1),y:v0(t.y,0,1)}}function fq(t,e,n="ltr"){const i=de.useRef(null),o=de.useRef(!1),l=de.useRef(!1),d=de.useRef(0),[p,g]=de.useState(!1);return de.useEffect(()=>{o.current=!0},[]),de.useEffect(()=>{var C,P;const v=({x:O,y:L})=>{cancelAnimationFrame(d.current),d.current=requestAnimationFrame(()=>{if(o.current&&i.current){i.current.style.userSelect="none";const B=i.current.getBoundingClientRect();if(B.width&&B.height){const V=v0((O-B.left)/B.width,0,1);t({x:n==="ltr"?V:1-V,y:v0((L-B.top)/B.height,0,1)})}}})},_=()=>{document.addEventListener("mousemove",M),document.addEventListener("mouseup",E),document.addEventListener("touchmove",x),document.addEventListener("touchend",E)},b=()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",E),document.removeEventListener("touchmove",x),document.removeEventListener("touchend",E)},w=()=>{!l.current&&o.current&&(l.current=!0,typeof(e==null?void 0:e.onScrubStart)=="function"&&e.onScrubStart(),g(!0),_())},E=()=>{l.current&&o.current&&(l.current=!1,g(!1),b(),setTimeout(()=>{typeof(e==null?void 0:e.onScrubEnd)=="function"&&e.onScrubEnd()},0))},S=O=>{w(),O.preventDefault(),M(O)},M=O=>v({x:O.clientX,y:O.clientY}),k=O=>{O.cancelable&&O.preventDefault(),w(),x(O)},x=O=>{O.cancelable&&O.preventDefault(),v({x:O.changedTouches[0].clientX,y:O.changedTouches[0].clientY})};return(C=i.current)==null||C.addEventListener("mousedown",S),(P=i.current)==null||P.addEventListener("touchstart",k,{passive:!1}),()=>{i.current&&(i.current.removeEventListener("mousedown",S),i.current.removeEventListener("touchstart",k))}},[n,t]),{ref:i,active:p}}function Cl({value:t,defaultValue:e,finalValue:n,onChange:i=()=>{}}){const[o,l]=de.useState(e!==void 0?e:n),d=(p,...g)=>{l(p),i==null||i(p,...g)};return t!==void 0?[t,i,!0]:[o,d,!1]}function dq(t,e){return BI("(prefers-reduced-motion: reduce)",t,e)}function YPe(t=!1,e){const{onOpen:n,onClose:i}={},[o,l]=de.useState(t),d=de.useCallback(()=>{l(v=>v||(n==null||n(),!0))},[n]),p=de.useCallback(()=>{l(v=>v&&(i==null||i(),!1))},[i]),g=de.useCallback(()=>{o?p():d()},[p,d,o]);return[o,{open:d,close:p,toggle:g}]}function qPe(){const[t,e]=de.useState(!1);ov(()=>{e(typeof window<"u"&&"EyeDropper"in window)},[]);const n=de.useCallback((i={})=>t?new window.EyeDropper().open(i):Promise.resolve(void 0),[t]);return{supported:t,open:n}}function YCt(t){return t}function $he(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=$he(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function Wo(){for(var t,e,n=0,i="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=$he(t))&&(i&&(i+=" "),i+=e);return i}const XPe={};function ZPe(t){const e={};return t.forEach(n=>{Object.entries(n).forEach(([i,o])=>{e[i]?e[i]=Wo(e[i],o):e[i]=o})}),e}function FI({theme:t,classNames:e,props:n,stylesCtx:i}){const l=(Array.isArray(e)?e:[e]).map(d=>typeof d=="function"?d(t,n,i):d||XPe);return ZPe(l)}function DO({theme:t,styles:e,props:n,stylesCtx:i}){return(Array.isArray(e)?e:[e]).reduce((l,d)=>typeof d=="function"?{...l,...d(t,n,i)}:{...l,...d},{})}const hq=de.createContext(null);function Tm(){const t=de.useContext(hq);if(!t)throw new Error("[@mantine/core] MantineProvider was not found in tree");return t}function QPe(){return Tm().cssVariablesResolver}function KPe(){return Tm().classNamesPrefix}function VI(){return Tm().getStyleNonce}function JPe(){return Tm().withStaticClasses}function e5e(){return Tm().headless}function t5e(){var t;return(t=Tm().stylesTransform)==null?void 0:t.sx}function n5e(){var t;return(t=Tm().stylesTransform)==null?void 0:t.styles}function r5e(t){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(t)}function i5e(t){let e=t.replace("#","");if(e.length===3){const d=e.split("");e=[d[0],d[0],d[1],d[1],d[2],d[2]].join("")}if(e.length===8){const d=parseInt(e.slice(6,8),16)/255;return{r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16),a:d}}const n=parseInt(e,16),i=n>>16&255,o=n>>8&255,l=n&255;return{r:i,g:o,b:l,a:1}}function s5e(t){const[e,n,i,o]=t.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:e,g:n,b:i,a:o||1}}function o5e(t){const e=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=t.match(e);if(!n)return{r:0,g:0,b:0,a:1};const i=parseInt(n[1],10),o=parseInt(n[2],10)/100,l=parseInt(n[3],10)/100,d=n[5]?parseFloat(n[5]):void 0,p=(1-Math.abs(2*l-1))*o,g=i/60,v=p*(1-Math.abs(g%2-1)),_=l-p/2;let b,w,E;return g>=0&&g<1?(b=p,w=v,E=0):g>=1&&g<2?(b=v,w=p,E=0):g>=2&&g<3?(b=0,w=p,E=v):g>=3&&g<4?(b=0,w=v,E=p):g>=4&&g<5?(b=v,w=0,E=p):(b=p,w=0,E=v),{r:Math.round((b+_)*255),g:Math.round((w+_)*255),b:Math.round((E+_)*255),a:d||1}}function pq(t){return r5e(t)?i5e(t):t.startsWith("rgb")?s5e(t):t.startsWith("hsl")?o5e(t):{r:0,g:0,b:0,a:1}}function M8(t,e){if(t.startsWith("var("))return`color-mix(in srgb, ${t}, black ${e*100}%)`;const{r:n,g:i,b:o,a:l}=pq(t),d=1-e,p=g=>Math.round(g*d);return`rgba(${p(n)}, ${p(i)}, ${p(o)}, ${l})`}function yT(t,e){return typeof t.primaryShade=="number"?t.primaryShade:e==="dark"?t.primaryShade.dark:t.primaryShade.light}function GU(t){return t<=.03928?t/12.92:((t+.055)/1.055)**2.4}function a5e(t){const e=t.match(/oklch\((.*?)%\s/);return e?parseFloat(e[1]):null}function l5e(t){if(t.startsWith("oklch("))return(a5e(t)||0)/100;const{r:e,g:n,b:i}=pq(t),o=e/255,l=n/255,d=i/255,p=GU(o),g=GU(l),v=GU(d);return .2126*p+.7152*g+.0722*v}function i3(t,e=.179){return t.startsWith("var(")?!1:l5e(t)>e}function lm({color:t,theme:e,colorScheme:n}){if(typeof t!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof t}`);if(t==="bright")return{color:t,value:n==="dark"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:i3(n==="dark"?e.white:e.black,e.luminanceThreshold),variable:"--mantine-color-bright"};if(t==="dimmed")return{color:t,value:n==="dark"?e.colors.dark[2]:e.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:i3(n==="dark"?e.colors.dark[2]:e.colors.gray[6],e.luminanceThreshold),variable:"--mantine-color-dimmed"};if(t==="white"||t==="black")return{color:t,value:t==="white"?e.white:e.black,shade:void 0,isThemeColor:!1,isLight:i3(t==="white"?e.white:e.black,e.luminanceThreshold),variable:`--mantine-color-${t}`};const[i,o]=t.split("."),l=o?Number(o):void 0,d=i in e.colors;if(d){const p=l!==void 0?e.colors[i][l]:e.colors[i][yT(e,n||"light")];return{color:i,value:p,shade:l,isThemeColor:d,isLight:i3(p,e.luminanceThreshold),variable:o?`--mantine-color-${i}-${l}`:`--mantine-color-${i}-filled`}}return{color:t,value:t,isThemeColor:d,isLight:i3(t,e.luminanceThreshold),shade:l,variable:void 0}}function qa(t,e){const n=lm({color:t||e.primaryColor,theme:e});return n.variable?`var(${n.variable})`:t}function mH(t,e){const n={from:(t==null?void 0:t.from)||e.defaultGradient.from,to:(t==null?void 0:t.to)||e.defaultGradient.to,deg:(t==null?void 0:t.deg)||e.defaultGradient.deg||0},i=qa(n.from,e),o=qa(n.to,e);return`linear-gradient(${n.deg}deg, ${i} 0%, ${o} 100%)`}function cf(t,e){if(typeof t!="string"||e>1||e<0)return"rgba(0, 0, 0, 1)";if(t.startsWith("var(")){const l=(1-e)*100;return`color-mix(in srgb, ${t}, transparent ${l}%)`}if(t.startsWith("oklch"))return t.includes("/")?t.replace(/\/\s*[\d.]+\s*\)/,`/ ${e})`):t.replace(")",` / ${e})`);const{r:n,g:i,b:o}=pq(t);return`rgba(${n}, ${i}, ${o}, ${e})`}const n_=cf,c5e=({color:t,theme:e,variant:n,gradient:i,autoContrast:o})=>{const l=lm({color:t,theme:e}),d=typeof o=="boolean"?o:e.autoContrast;if(n==="filled"){const p=d&&l.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return l.isThemeColor?l.shade===void 0?{background:`var(--mantine-color-${t}-filled)`,hover:`var(--mantine-color-${t}-filled-hover)`,color:p,border:`${yt(1)} solid transparent`}:{background:`var(--mantine-color-${l.color}-${l.shade})`,hover:`var(--mantine-color-${l.color}-${l.shade===9?8:l.shade+1})`,color:p,border:`${yt(1)} solid transparent`}:{background:t,hover:M8(t,.1),color:p,border:`${yt(1)} solid transparent`}}if(n==="light"){if(l.isThemeColor){if(l.shade===void 0)return{background:`var(--mantine-color-${t}-light)`,hover:`var(--mantine-color-${t}-light-hover)`,color:`var(--mantine-color-${t}-light-color)`,border:`${yt(1)} solid transparent`};const p=e.colors[l.color][l.shade];return{background:cf(p,.1),hover:cf(p,.12),color:`var(--mantine-color-${l.color}-${Math.min(l.shade,6)})`,border:`${yt(1)} solid transparent`}}return{background:cf(t,.1),hover:cf(t,.12),color:t,border:`${yt(1)} solid transparent`}}if(n==="outline")return l.isThemeColor?l.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${t}-outline-hover)`,color:`var(--mantine-color-${t}-outline)`,border:`${yt(1)} solid var(--mantine-color-${t}-outline)`}:{background:"transparent",hover:cf(e.colors[l.color][l.shade],.05),color:`var(--mantine-color-${l.color}-${l.shade})`,border:`${yt(1)} solid var(--mantine-color-${l.color}-${l.shade})`}:{background:"transparent",hover:cf(t,.05),color:t,border:`${yt(1)} solid ${t}`};if(n==="subtle"){if(l.isThemeColor){if(l.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${t}-light-hover)`,color:`var(--mantine-color-${t}-light-color)`,border:`${yt(1)} solid transparent`};const p=e.colors[l.color][l.shade];return{background:"transparent",hover:cf(p,.12),color:`var(--mantine-color-${l.color}-${Math.min(l.shade,6)})`,border:`${yt(1)} solid transparent`}}return{background:"transparent",hover:cf(t,.12),color:t,border:`${yt(1)} solid transparent`}}return n==="transparent"?l.isThemeColor?l.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${t}-light-color)`,border:`${yt(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${l.color}-${Math.min(l.shade,6)})`,border:`${yt(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:t,border:`${yt(1)} solid transparent`}:n==="white"?l.isThemeColor?l.shade===void 0?{background:"var(--mantine-color-white)",hover:M8(e.white,.01),color:`var(--mantine-color-${t}-filled)`,border:`${yt(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:M8(e.white,.01),color:`var(--mantine-color-${l.color}-${l.shade})`,border:`${yt(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:M8(e.white,.01),color:t,border:`${yt(1)} solid transparent`}:n==="gradient"?{background:mH(i,e),hover:mH(i,e),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${yt(1)} solid var(--mantine-color-default-border)`}:{}},u5e={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},Ere="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",bT={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:u5e,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:c5e,autoContrast:!1,luminanceThreshold:.3,fontFamily:Ere,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:Ere,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:yt(34),lineHeight:"1.3"},h2:{fontSize:yt(26),lineHeight:"1.35"},h3:{fontSize:yt(22),lineHeight:"1.4"},h4:{fontSize:yt(18),lineHeight:"1.45"},h5:{fontSize:yt(16),lineHeight:"1.5"},h6:{fontSize:yt(14),lineHeight:"1.5"}}},fontSizes:{xs:yt(12),sm:yt(14),md:yt(16),lg:yt(18),xl:yt(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:yt(2),sm:yt(4),md:yt(8),lg:yt(16),xl:yt(32)},spacing:{xs:yt(10),sm:yt(12),md:yt(16),lg:yt(20),xl:yt(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${yt(1)} ${yt(3)} rgba(0, 0, 0, 0.05), 0 ${yt(1)} ${yt(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${yt(1)} ${yt(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${yt(10)} ${yt(15)} ${yt(-5)}, rgba(0, 0, 0, 0.04) 0 ${yt(7)} ${yt(7)} ${yt(-5)}`,md:`0 ${yt(1)} ${yt(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${yt(20)} ${yt(25)} ${yt(-5)}, rgba(0, 0, 0, 0.04) 0 ${yt(10)} ${yt(10)} ${yt(-5)}`,lg:`0 ${yt(1)} ${yt(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${yt(28)} ${yt(23)} ${yt(-7)}, rgba(0, 0, 0, 0.04) 0 ${yt(12)} ${yt(12)} ${yt(-7)}`,xl:`0 ${yt(1)} ${yt(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${yt(36)} ${yt(28)} ${yt(-7)}, rgba(0, 0, 0, 0.04) 0 ${yt(17)} ${yt(17)} ${yt(-7)}`},other:{},components:{}};function Sre(t){return t==="auto"||t==="dark"||t==="light"}function f5e({key:t="mantine-color-scheme-value"}={}){let e;return{get:n=>{if(typeof window>"u")return n;try{const i=window.localStorage.getItem(t);return Sre(i)?i:n}catch{return n}},set:n=>{try{window.localStorage.setItem(t,n)}catch(i){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",i)}},subscribe:n=>{e=i=>{i.storageArea===window.localStorage&&i.key===t&&Sre(i.newValue)&&n(i.newValue)},window.addEventListener("storage",e)},unsubscribe:()=>{window.removeEventListener("storage",e)},clear:()=>{window.localStorage.removeItem(t)}}}const d5e="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",Tre="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function jU(t){return t<0||t>9?!1:parseInt(t.toString(),10)===t}function xre(t){if(!(t.primaryColor in t.colors))throw new Error(d5e);if(typeof t.primaryShade=="object"&&(!jU(t.primaryShade.dark)||!jU(t.primaryShade.light)))throw new Error(Tre);if(typeof t.primaryShade=="number"&&!jU(t.primaryShade))throw new Error(Tre)}function h5e(t,e){var i;if(!e)return xre(t),t;const n=NI(t,e);return e.fontFamily&&!((i=e.headings)!=null&&i.fontFamily)&&(n.headings.fontFamily=e.fontFamily),xre(n),n}const mq=de.createContext(null),p5e=()=>de.useContext(mq)||bT;function ec(){const t=de.useContext(mq);if(!t)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return t}function gq({theme:t,children:e,inherit:n=!0}){const i=p5e(),o=de.useMemo(()=>h5e(n?i:bT,t),[t,i,n]);return Y.jsx(mq.Provider,{value:o,children:e})}gq.displayName="@mantine/core/MantineThemeProvider";function m5e(){const t=ec(),e=VI(),n=Ya(t.breakpoints).reduce((i,o)=>{const l=t.breakpoints[o].includes("px"),d=hH(t.breakpoints[o]),p=l?`${d-.1}px`:CO(d-.1),g=l?`${d}px`:CO(d);return`${i}@media (max-width: ${p}) {.mantine-visible-from-${o} {display: none !important;}}@media (min-width: ${g}) {.mantine-hidden-from-${o} {display: none !important;}}`},"");return Y.jsx("style",{"data-mantine-styles":"classes",nonce:e==null?void 0:e(),dangerouslySetInnerHTML:{__html:n}})}function HU(t){return Object.entries(t).map(([e,n])=>`${e}: ${n};`).join("")}function $U(t,e){return(Array.isArray(t)?t:[t]).reduce((i,o)=>`${o}{${i}}`,e)}function g5e(t,e){const n=HU(t.variables),i=n?$U(e,n):"",o=HU(t.dark),l=o?$U(`${e}[data-mantine-color-scheme="dark"]`,o):"",d=HU(t.light),p=d?$U(`${e}[data-mantine-color-scheme="light"]`,d):"";return`${i}${l}${p}`}function Whe({color:t,theme:e,autoContrast:n}){return(typeof n=="boolean"?n:e.autoContrast)&&lm({color:t||e.primaryColor,theme:e}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function Mre(t,e){return Whe({color:t.colors[t.primaryColor][yT(t,e)],theme:t,autoContrast:null})}function k8({theme:t,color:e,colorScheme:n,name:i=e,withColorValues:o=!0}){if(!t.colors[e])return{};if(n==="light"){const p=yT(t,"light"),g={[`--mantine-color-${i}-text`]:`var(--mantine-color-${i}-filled)`,[`--mantine-color-${i}-filled`]:`var(--mantine-color-${i}-${p})`,[`--mantine-color-${i}-filled-hover`]:`var(--mantine-color-${i}-${p===9?8:p+1})`,[`--mantine-color-${i}-light`]:n_(t.colors[e][p],.1),[`--mantine-color-${i}-light-hover`]:n_(t.colors[e][p],.12),[`--mantine-color-${i}-light-color`]:`var(--mantine-color-${i}-${p})`,[`--mantine-color-${i}-outline`]:`var(--mantine-color-${i}-${p})`,[`--mantine-color-${i}-outline-hover`]:n_(t.colors[e][p],.05)};return o?{[`--mantine-color-${i}-0`]:t.colors[e][0],[`--mantine-color-${i}-1`]:t.colors[e][1],[`--mantine-color-${i}-2`]:t.colors[e][2],[`--mantine-color-${i}-3`]:t.colors[e][3],[`--mantine-color-${i}-4`]:t.colors[e][4],[`--mantine-color-${i}-5`]:t.colors[e][5],[`--mantine-color-${i}-6`]:t.colors[e][6],[`--mantine-color-${i}-7`]:t.colors[e][7],[`--mantine-color-${i}-8`]:t.colors[e][8],[`--mantine-color-${i}-9`]:t.colors[e][9],...g}:g}const l=yT(t,"dark"),d={[`--mantine-color-${i}-text`]:`var(--mantine-color-${i}-4)`,[`--mantine-color-${i}-filled`]:`var(--mantine-color-${i}-${l})`,[`--mantine-color-${i}-filled-hover`]:`var(--mantine-color-${i}-${l===9?8:l+1})`,[`--mantine-color-${i}-light`]:n_(t.colors[e][Math.max(0,l-2)],.15),[`--mantine-color-${i}-light-hover`]:n_(t.colors[e][Math.max(0,l-2)],.2),[`--mantine-color-${i}-light-color`]:`var(--mantine-color-${i}-${Math.max(l-5,0)})`,[`--mantine-color-${i}-outline`]:`var(--mantine-color-${i}-${Math.max(l-4,0)})`,[`--mantine-color-${i}-outline-hover`]:n_(t.colors[e][Math.max(l-4,0)],.05)};return o?{[`--mantine-color-${i}-0`]:t.colors[e][0],[`--mantine-color-${i}-1`]:t.colors[e][1],[`--mantine-color-${i}-2`]:t.colors[e][2],[`--mantine-color-${i}-3`]:t.colors[e][3],[`--mantine-color-${i}-4`]:t.colors[e][4],[`--mantine-color-${i}-5`]:t.colors[e][5],[`--mantine-color-${i}-6`]:t.colors[e][6],[`--mantine-color-${i}-7`]:t.colors[e][7],[`--mantine-color-${i}-8`]:t.colors[e][8],[`--mantine-color-${i}-9`]:t.colors[e][9],...d}:d}function v5e(t){return Array.isArray(t)?t:Array(10).fill(t)}function _5e(t){return!!t&&typeof t=="object"&&"mantine-virtual-color"in t}function r_(t,e,n){Ya(e).forEach(i=>Object.assign(t,{[`--mantine-${n}-${i}`]:e[i]}))}const Yhe=t=>{const e=yT(t,"light"),n=t.defaultRadius in t.radius?t.radius[t.defaultRadius]:yt(t.defaultRadius),i={variables:{"--mantine-scale":t.scale.toString(),"--mantine-cursor-type":t.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":t.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":t.fontSmoothing?"grayscale":"unset","--mantine-color-white":t.white,"--mantine-color-black":t.black,"--mantine-line-height":t.lineHeights.md,"--mantine-font-family":t.fontFamily,"--mantine-font-family-monospace":t.fontFamilyMonospace,"--mantine-font-family-headings":t.headings.fontFamily,"--mantine-heading-font-weight":t.headings.fontWeight,"--mantine-heading-text-wrap":t.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${t.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${t.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${t.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${t.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${t.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":Mre(t,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":t.black,"--mantine-color-body":t.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${t.primaryColor}-${e})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":Mre(t,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${t.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};r_(i.variables,t.breakpoints,"breakpoint"),r_(i.variables,t.spacing,"spacing"),r_(i.variables,t.fontSizes,"font-size"),r_(i.variables,t.lineHeights,"line-height"),r_(i.variables,t.shadows,"shadow"),r_(i.variables,t.radius,"radius"),t.colors[t.primaryColor].forEach((l,d)=>{i.variables[`--mantine-primary-color-${d}`]=`var(--mantine-color-${t.primaryColor}-${d})`}),Ya(t.colors).forEach(l=>{const d=t.colors[l];if(_5e(d)){Object.assign(i.light,k8({theme:t,name:d.name,color:d.light,colorScheme:"light",withColorValues:!0})),Object.assign(i.dark,k8({theme:t,name:d.name,color:d.dark,colorScheme:"dark",withColorValues:!0}));return}d.forEach((p,g)=>{i.variables[`--mantine-color-${l}-${g}`]=p}),Object.assign(i.light,k8({theme:t,color:l,colorScheme:"light",withColorValues:!1})),Object.assign(i.dark,k8({theme:t,color:l,colorScheme:"dark",withColorValues:!1}))});const o=t.headings.sizes;return Ya(o).forEach(l=>{i.variables[`--mantine-${l}-font-size`]=o[l].fontSize,i.variables[`--mantine-${l}-line-height`]=o[l].lineHeight,i.variables[`--mantine-${l}-font-weight`]=o[l].fontWeight||t.headings.fontWeight}),i};function y5e({theme:t,generator:e}){const n=Yhe(t),i=e==null?void 0:e(t);return i?NI(n,i):n}const WU=Yhe(bT);function b5e(t){const e={variables:{},light:{},dark:{}};return Ya(t.variables).forEach(n=>{WU.variables[n]!==t.variables[n]&&(e.variables[n]=t.variables[n])}),Ya(t.light).forEach(n=>{WU.light[n]!==t.light[n]&&(e.light[n]=t.light[n])}),Ya(t.dark).forEach(n=>{WU.dark[n]!==t.dark[n]&&(e.dark[n]=t.dark[n])}),e}function A5e(t){return`
  ${t}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${t}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function qhe({cssVariablesSelector:t,deduplicateCssVariables:e}){const n=ec(),i=VI(),o=QPe(),l=y5e({theme:n,generator:o}),d=t===":root"&&e,p=d?b5e(l):l,g=g5e(p,t);return g?Y.jsx("style",{"data-mantine-styles":!0,nonce:i==null?void 0:i(),dangerouslySetInnerHTML:{__html:`${g}${d?"":A5e(t)}`}}):null}qhe.displayName="@mantine/CssVariables";function w5e(){const t=console.error;console.error=(...e)=>{e.length>1&&typeof e[0]=="string"&&e[0].toLowerCase().includes("extra attributes from the server")&&typeof e[1]=="string"&&e[1].toLowerCase().includes("data-mantine-color-scheme")||t(...e)}}function i_(t,e){var i;const n=t!=="auto"?t:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(i=e())==null||i.setAttribute("data-mantine-color-scheme",n)}function E5e({manager:t,defaultColorScheme:e,getRootElement:n,forceColorScheme:i}){const o=de.useRef(),[l,d]=de.useState(()=>t.get(e)),p=i||l,g=de.useCallback(_=>{i||(i_(_,n),d(_),t.set(_))},[t.set,p,i]),v=de.useCallback(()=>{d(e),i_(e,n),t.clear()},[t.clear,e]);return de.useEffect(()=>(t.subscribe(g),t.unsubscribe),[t.subscribe,t.unsubscribe]),ov(()=>{i_(t.get(e),n)},[]),de.useEffect(()=>{var b;if(i)return i_(i,n),()=>{};i===void 0&&i_(l,n),o.current=window.matchMedia("(prefers-color-scheme: dark)");const _=w=>{l==="auto"&&i_(w.matches?"dark":"light",n)};return(b=o.current)==null||b.addEventListener("change",_),()=>{var w;return(w=o.current)==null?void 0:w.removeEventListener("change",_)}},[l,i]),{colorScheme:p,setColorScheme:g,clearColorScheme:v}}function S5e({respectReducedMotion:t,getRootElement:e}){ov(()=>{var n;t&&((n=e())==null||n.setAttribute("data-respect-reduced-motion","true"))},[t])}w5e();function T5e({theme:t,children:e,getStyleNonce:n,withStaticClasses:i=!0,withGlobalClasses:o=!0,deduplicateCssVariables:l=!0,withCssVariables:d=!0,cssVariablesSelector:p=":root",classNamesPrefix:g="mantine",colorSchemeManager:v=f5e(),defaultColorScheme:_="light",getRootElement:b=()=>document.documentElement,cssVariablesResolver:w,forceColorScheme:E,stylesTransform:S}){const{colorScheme:M,setColorScheme:k,clearColorScheme:x}=E5e({defaultColorScheme:_,forceColorScheme:E,manager:v,getRootElement:b});return S5e({respectReducedMotion:(t==null?void 0:t.respectReducedMotion)||!1,getRootElement:b}),Y.jsx(hq.Provider,{value:{colorScheme:M,setColorScheme:k,clearColorScheme:x,getRootElement:b,classNamesPrefix:g,getStyleNonce:n,cssVariablesResolver:w,cssVariablesSelector:p,withStaticClasses:i,stylesTransform:S},children:Y.jsxs(gq,{theme:t,children:[d&&Y.jsx(qhe,{cssVariablesSelector:p,deduplicateCssVariables:l}),o&&Y.jsx(m5e,{}),e]})})}T5e.displayName="@mantine/core/MantineProvider";function m6({classNames:t,styles:e,props:n,stylesCtx:i}){const o=ec();return{resolvedClassNames:FI({theme:o,classNames:t,props:n,stylesCtx:i||void 0}),resolvedStyles:DO({theme:o,styles:e,props:n,stylesCtx:i||void 0})}}const x5e={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function M5e({theme:t,options:e,unstyled:n}){return Wo((e==null?void 0:e.focusable)&&!n&&(t.focusClassName||x5e[t.focusRing]),(e==null?void 0:e.active)&&!n&&t.activeClassName)}function k5e({selector:t,stylesCtx:e,options:n,props:i,theme:o}){return FI({theme:o,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||i,stylesCtx:e})[t]}function kre({selector:t,stylesCtx:e,theme:n,classNames:i,props:o}){return FI({theme:n,classNames:i,props:o,stylesCtx:e})[t]}function C5e({rootSelector:t,selector:e,className:n}){return t===e?n:void 0}function P5e({selector:t,classes:e,unstyled:n}){return n?void 0:e[t]}function R5e({themeName:t,classNamesPrefix:e,selector:n,withStaticClass:i}){return i===!1?[]:t.map(o=>`${e}-${o}-${n}`)}function D5e({themeName:t,theme:e,selector:n,props:i,stylesCtx:o}){return t.map(l=>{var d,p;return(p=FI({theme:e,classNames:(d=e.components[l])==null?void 0:d.classNames,props:i,stylesCtx:o}))==null?void 0:p[n]})}function O5e({options:t,classes:e,selector:n,unstyled:i}){return t!=null&&t.variant&&!i?e[`${n}--${t.variant}`]:void 0}function I5e({theme:t,options:e,themeName:n,selector:i,classNamesPrefix:o,classNames:l,classes:d,unstyled:p,className:g,rootSelector:v,props:_,stylesCtx:b,withStaticClasses:w,headless:E,transformedStyles:S}){return Wo(M5e({theme:t,options:e,unstyled:p||E}),D5e({theme:t,themeName:n,selector:i,props:_,stylesCtx:b}),O5e({options:e,classes:d,selector:i,unstyled:p}),kre({selector:i,stylesCtx:b,theme:t,classNames:l,props:_}),kre({selector:i,stylesCtx:b,theme:t,classNames:S,props:_}),k5e({selector:i,stylesCtx:b,options:e,props:_,theme:t}),C5e({rootSelector:v,selector:i,className:g}),P5e({selector:i,classes:d,unstyled:p||E}),w&&!E&&R5e({themeName:n,classNamesPrefix:o,selector:i,withStaticClass:e==null?void 0:e.withStaticClass}),e==null?void 0:e.className)}function N5e({theme:t,themeName:e,props:n,stylesCtx:i,selector:o}){return e.map(l=>{var d;return DO({theme:t,styles:(d=t.components[l])==null?void 0:d.styles,props:n,stylesCtx:i})[o]}).reduce((l,d)=>({...l,...d}),{})}function gH({style:t,theme:e}){return Array.isArray(t)?[...t].reduce((n,i)=>({...n,...gH({style:i,theme:e})}),{}):typeof t=="function"?t(e):t??{}}function L5e(t){return t.reduce((e,n)=>(n&&Object.keys(n).forEach(i=>{e[i]={...e[i],...aq(n[i])}}),e),{})}function z5e({vars:t,varsResolver:e,theme:n,props:i,stylesCtx:o,selector:l,themeName:d,headless:p}){var g;return(g=L5e([p?{}:e==null?void 0:e(n,i,o),...d.map(v=>{var _,b,w;return(w=(b=(_=n.components)==null?void 0:_[v])==null?void 0:b.vars)==null?void 0:w.call(b,n,i,o)}),t==null?void 0:t(n,i,o)]))==null?void 0:g[l]}function B5e({theme:t,themeName:e,selector:n,options:i,props:o,stylesCtx:l,rootSelector:d,styles:p,style:g,vars:v,varsResolver:_,headless:b,withStylesTransform:w}){return{...!w&&N5e({theme:t,themeName:e,props:o,stylesCtx:l,selector:n}),...!w&&DO({theme:t,styles:p,props:o,stylesCtx:l})[n],...!w&&DO({theme:t,styles:i==null?void 0:i.styles,props:(i==null?void 0:i.props)||o,stylesCtx:l})[n],...z5e({theme:t,props:o,stylesCtx:l,vars:v,varsResolver:_,selector:n,themeName:e,headless:b}),...d===n?gH({style:g,theme:t}):null,...gH({style:i==null?void 0:i.style,theme:t})}}function U5e({props:t,stylesCtx:e,themeName:n}){var d;const i=ec(),o=(d=n5e())==null?void 0:d();return{getTransformedStyles:p=>o?[...p.map(v=>o(v,{props:t,theme:i,ctx:e})),...n.map(v=>{var _;return o((_=i.components[v])==null?void 0:_.styles,{props:t,theme:i,ctx:e})})].filter(Boolean):[],withStylesTransform:!!o}}function er({name:t,classes:e,props:n,stylesCtx:i,className:o,style:l,rootSelector:d="root",unstyled:p,classNames:g,styles:v,vars:_,varsResolver:b}){const w=ec(),E=KPe(),S=JPe(),M=e5e(),k=(Array.isArray(t)?t:[t]).filter(P=>P),{withStylesTransform:x,getTransformedStyles:C}=U5e({props:n,stylesCtx:i,themeName:k});return(P,O)=>({className:I5e({theme:w,options:O,themeName:k,selector:P,classNamesPrefix:E,classNames:g,classes:e,unstyled:p,className:o,rootSelector:d,props:n,stylesCtx:i,withStaticClasses:S,headless:M,transformedStyles:C([O==null?void 0:O.styles,v])}),style:B5e({theme:w,themeName:k,selector:P,options:O,props:n,stylesCtx:i,rootSelector:d,styles:v,style:l,vars:_,varsResolver:b,headless:M,withStylesTransform:x})})}function F5e(t,e){return typeof t=="boolean"?t:e.autoContrast}function Cre(t){const e=document.createElement("style");return e.setAttribute("data-mantine-styles","inline"),e.innerHTML="*, *::before, *::after {transition: none !important;}",e.setAttribute("data-mantine-disable-transition","true"),t&&e.setAttribute("nonce",t),document.head.appendChild(e),()=>document.querySelectorAll("[data-mantine-disable-transition]").forEach(i=>i.remove())}function V5e({keepTransitions:t}={}){const e=de.useRef(),n=de.useRef(),i=de.useContext(hq),o=VI(),l=de.useRef(o==null?void 0:o());if(!i)throw new Error("[@mantine/core] MantineProvider was not found in tree");const d=b=>{i.setColorScheme(b),e.current=t?()=>{}:Cre(l.current),window.clearTimeout(n.current),n.current=window.setTimeout(()=>{var w;(w=e.current)==null||w.call(e)},10)},p=()=>{i.clearColorScheme(),e.current=t?()=>{}:Cre(l.current),window.clearTimeout(n.current),n.current=window.setTimeout(()=>{var b;(b=e.current)==null||b.call(e)},10)},g=zhe("light",{getInitialValueInEffect:!1}),v=i.colorScheme==="auto"?g:i.colorScheme,_=de.useCallback(()=>d(v==="light"?"dark":"light"),[d,v]);return de.useEffect(()=>()=>{var b;(b=e.current)==null||b.call(e),window.clearTimeout(n.current)},[]),{colorScheme:i.colorScheme,setColorScheme:d,clearColorScheme:p,toggleColorScheme:_}}function G5e(t,e={getInitialValueInEffect:!0}){const n=zhe(t,e),{colorScheme:i}=V5e();return i==="auto"?n:i}function Dt(t,e,n){var d;const i=ec(),o=(d=i.components[t])==null?void 0:d.defaultProps,l=typeof o=="function"?o(i):o;return{...e,...l,...aq(n)}}function j5e(...t){return t.reduce((e,n)=>NI(e,n),{})}function YU(t){return Ya(t).reduce((e,n)=>t[n]!==void 0?`${e}${TPe(n)}:${t[n]};`:e,"").trim()}function H5e({selector:t,styles:e,media:n,container:i}){const o=e?YU(e):"",l=Array.isArray(n)?n.map(p=>`@media${p.query}{${t}{${YU(p.styles)}}}`):[],d=Array.isArray(i)?i.map(p=>`@container ${p.query}{${t}{${YU(p.styles)}}}`):[];return`${o?`${t}{${o}}`:""}${l.join("")}${d.join("")}`.trim()}function Xhe(t){const e=VI();return Y.jsx("style",{"data-mantine-styles":"inline",nonce:e==null?void 0:e(),dangerouslySetInnerHTML:{__html:H5e(t)}})}function g6(t){const{m:e,mx:n,my:i,mt:o,mb:l,ml:d,mr:p,me:g,ms:v,p:_,px:b,py:w,pt:E,pb:S,pl:M,pr:k,pe:x,ps:C,bg:P,c:O,opacity:L,ff:B,fz:V,fw:G,lts:j,ta:F,lh:q,fs:fe,tt:ue,td:J,w:le,miw:me,maw:be,h:ye,mih:pe,mah:oe,bgsz:Ce,bgp:it,bgr:Se,bga:Oe,pos:ct,top:_t,left:Nt,bottom:Je,right:ot,inset:fn,display:Ht,flex:Re,hiddenFrom:Lt,visibleFrom:mt,lightHidden:ht,darkHidden:at,sx:Mt,...Ot}=t;return{styleProps:aq({m:e,mx:n,my:i,mt:o,mb:l,ml:d,mr:p,me:g,ms:v,p:_,px:b,py:w,pt:E,pb:S,pl:M,pr:k,pe:x,ps:C,bg:P,c:O,opacity:L,ff:B,fz:V,fw:G,lts:j,ta:F,lh:q,fs:fe,tt:ue,td:J,w:le,miw:me,maw:be,h:ye,mih:pe,mah:oe,bgsz:Ce,bgp:it,bgr:Se,bga:Oe,pos:ct,top:_t,left:Nt,bottom:Je,right:ot,inset:fn,display:Ht,flex:Re,hiddenFrom:Lt,visibleFrom:mt,lightHidden:ht,darkHidden:at,sx:Mt}),rest:Ot}}const $5e={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function vq(t,e){const n=lm({color:t,theme:e});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function W5e(t,e){const n=lm({color:t,theme:e});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:vq(t,e)}function Y5e(t,e){if(typeof t=="number")return yt(t);if(typeof t=="string"){const[n,i,...o]=t.split(" ").filter(d=>d.trim()!=="");let l=`${yt(n)}`;return i&&(l+=` ${i}`),v5e.length>0&&(l+=` ${vq(o.join(" "),e)}`),l.trim()}return t}const Pre={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function q5e(t){return typeof t=="string"&&t in Pre?Pre[t]:t}const X5e=["h1","h2","h3","h4","h5","h6"];function Z5e(t,e){return typeof t=="string"&&t in e.fontSizes?`var(--mantine-font-size-${t})`:typeof t=="string"&&X5e.includes(t)?`var(--mantine-${t}-font-size)`:typeof t=="number"||typeof t=="string"?yt(t):t}function Q5e(t){return t}const K5e=["h1","h2","h3","h4","h5","h6"];function J5e(t,e){return typeof t=="string"&&t in e.lineHeights?`var(--mantine-line-height-${t})`:typeof t=="string"&&K5e.includes(t)?`var(--mantine-${t}-line-height)`:t}function eRe(t){return typeof t=="number"?yt(t):t}function tRe(t,e){if(typeof t=="number")return yt(t);if(typeof t=="string"){const n=t.replace("-","");if(!(n in e.spacing))return yt(t);const i=`--mantine-spacing-${n}`;return t.startsWith("-")?`calc(var(${i}) * -1)`:`var(${i})`}return t}const qU={color:vq,textColor:W5e,fontSize:Z5e,spacing:tRe,identity:Q5e,size:eRe,lineHeight:J5e,fontFamily:q5e,border:Y5e};function Rre(t){return t.replace("(min-width: ","").replace("em)","")}function nRe({media:t,...e}){const i=Object.keys(t).sort((o,l)=>Number(Rre(o))-Number(Rre(l))).map(o=>({query:o,styles:t[o]}));return{...e,media:i}}function rRe(t){if(typeof t!="object"||t===null)return!1;const e=Object.keys(t);return!(e.length===1&&e[0]==="base")}function iRe(t){return typeof t=="object"&&t!==null?"base"in t?t.base:void 0:t}function sRe(t){return typeof t=="object"&&t!==null?Ya(t).filter(e=>e!=="base"):[]}function oRe(t,e){return typeof t=="object"&&t!==null&&e in t?t[e]:t}function aRe({styleProps:t,data:e,theme:n}){return nRe(Ya(t).reduce((i,o)=>{if(o==="hiddenFrom"||o==="visibleFrom"||o==="sx")return i;const l=e[o],d=Array.isArray(l.property)?l.property:[l.property],p=iRe(t[o]);if(!rRe(t[o]))return d.forEach(v=>{i.inlineStyles[v]=qU[l.type](p,n)}),i;i.hasResponsiveStyles=!0;const g=sRe(t[o]);return d.forEach(v=>{p&&(i.styles[v]=qU[l.type](p,n)),g.forEach(_=>{const b=`(min-width: ${n.breakpoints[_]})`;i.media[b]={...i.media[b],[v]:qU[l.type](oRe(t[o],_),n)}})}),i},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function lRe(){return`__m__-${de.useId().replace(/:/g,"")}`}function _q(t,e){return Array.isArray(t)?[...t].reduce((n,i)=>({...n,..._q(i,e)}),{}):typeof t=="function"?t(e):t??{}}function Zhe(t){return t.startsWith("data-")?t:`data-${t}`}function cRe(t){return Object.keys(t).reduce((e,n)=>{const i=t[n];return i===void 0||i===""||i===!1||i===null||(e[Zhe(n)]=t[n]),e},{})}function Qhe(t){return t?typeof t=="string"?{[Zhe(t)]:!0}:Array.isArray(t)?[...t].reduce((e,n)=>({...e,...Qhe(n)}),{}):cRe(t):null}function vH(t,e){return Array.isArray(t)?[...t].reduce((n,i)=>({...n,...vH(i,e)}),{}):typeof t=="function"?t(e):t??{}}function uRe({theme:t,style:e,vars:n,styleProps:i}){const o=vH(e,t),l=vH(n,t);return{...o,...l,...i}}const Khe=de.forwardRef(({component:t,style:e,__vars:n,className:i,variant:o,mod:l,size:d,hiddenFrom:p,visibleFrom:g,lightHidden:v,darkHidden:_,renderRoot:b,...w},E)=>{var V;const S=ec(),M=t||"div",{styleProps:k,rest:x}=g6(w),C=t5e(),P=(V=C==null?void 0:C())==null?void 0:V(k.sx),O=lRe(),L=aRe({styleProps:k,theme:S,data:$5e}),B={ref:E,style:uRe({theme:S,style:e,vars:n,styleProps:L.inlineStyles}),className:Wo(i,P,{[O]:L.hasResponsiveStyles,"mantine-light-hidden":v,"mantine-dark-hidden":_,[`mantine-hidden-from-${p}`]:p,[`mantine-visible-from-${g}`]:g}),"data-variant":o,"data-size":Ihe(d)?void 0:d||void 0,...Qhe(l),...x};return Y.jsxs(Y.Fragment,{children:[L.hasResponsiveStyles&&Y.jsx(Xhe,{selector:`.${O}`,styles:L.styles,media:L.media}),typeof b=="function"?b(B):Y.jsx(M,{...B})]})});Khe.displayName="@mantine/core/Box";const Xt=Khe;function Jhe(t){return t}function pn(t){const e=de.forwardRef(t);return e.extend=Jhe,e}function tc(t){const e=de.forwardRef(t);return e.extend=Jhe,e}const fRe=de.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function av(){return de.useContext(fRe)}function dRe(t){if(!t||typeof t=="string")return 0;const e=t/36;return Math.round((4+15*e**.25+e/5)*10)}function XU(t){return t!=null&&t.current?t.current.scrollHeight:"auto"}const s3=typeof window<"u"&&window.requestAnimationFrame;function hRe({transitionDuration:t,transitionTimingFunction:e="ease",onTransitionEnd:n=()=>{},opened:i}){const o=de.useRef(null),l=0,d={display:"none",height:0,overflow:"hidden"},[p,g]=de.useState(i?{}:d),v=S=>{p6.flushSync(()=>g(S))},_=S=>{v(M=>({...M,...S}))};function b(S){const M=t||dRe(S);return{transition:`height ${M}ms ${e}, opacity ${M}ms ${e}`}}ku(()=>{typeof s3=="function"&&s3(i?()=>{_({willChange:"height",display:"block",overflow:"hidden"}),s3(()=>{const S=XU(o);_({...b(S),height:S})})}:()=>{const S=XU(o);_({...b(S),willChange:"height",height:S}),s3(()=>_({height:l,overflow:"hidden"}))})},[i]);const w=S=>{if(!(S.target!==o.current||S.propertyName!=="height"))if(i){const M=XU(o);M===p.height?v({}):_({height:M}),n()}else p.height===l&&(v(d),n())};function E({style:S={},refKey:M="ref",...k}={}){const x=k[M];return{"aria-hidden":!i,...k,[M]:jhe(o,x),onTransitionEnd:w,style:{boxSizing:"border-box",...S,...p}}}return E}const pRe={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},epe=pn((t,e)=>{const{children:n,in:i,transitionDuration:o,transitionTimingFunction:l,style:d,onTransitionEnd:p,animateOpacity:g,...v}=Dt("Collapse",pRe,t),_=ec(),b=dq(),E=(_.respectReducedMotion?b:!1)?0:o,S=hRe({opened:i,transitionDuration:E,transitionTimingFunction:l,onTransitionEnd:p});return E===0?i?Y.jsx(Xt,{...v,children:n}):null:Y.jsx(Xt,{...S({style:{opacity:i||!g?1:0,transition:g?`opacity ${E}ms ${l}`:"none",..._q(d,_)},ref:e,...v}),children:n})});epe.displayName="@mantine/core/Collapse";const[mRe,Rf]=Hc("ScrollArea.Root component was not found in tree");function Nb(t,e){const n=hg(e);ov(()=>{let i=0;if(t){const o=new ResizeObserver(()=>{cancelAnimationFrame(i),i=window.requestAnimationFrame(n)});return o.observe(t),()=>{window.cancelAnimationFrame(i),o.unobserve(t)}}},[t,n])}const gRe=de.forwardRef((t,e)=>{const{style:n,...i}=t,o=Rf(),[l,d]=de.useState(0),[p,g]=de.useState(0),v=!!(l&&p);return Nb(o.scrollbarX,()=>{var b;const _=((b=o.scrollbarX)==null?void 0:b.offsetHeight)||0;o.onCornerHeightChange(_),g(_)}),Nb(o.scrollbarY,()=>{var b;const _=((b=o.scrollbarY)==null?void 0:b.offsetWidth)||0;o.onCornerWidthChange(_),d(_)}),v?Y.jsx("div",{...i,ref:e,style:{...n,width:l,height:p}}):null}),vRe=de.forwardRef((t,e)=>{const n=Rf(),i=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&i?Y.jsx(gRe,{...t,ref:e}):null}),_Re={scrollHideDelay:1e3,type:"hover"},tpe=de.forwardRef((t,e)=>{const n=Dt("ScrollAreaRoot",_Re,t),{type:i,scrollHideDelay:o,scrollbars:l,...d}=n,[p,g]=de.useState(null),[v,_]=de.useState(null),[b,w]=de.useState(null),[E,S]=de.useState(null),[M,k]=de.useState(null),[x,C]=de.useState(0),[P,O]=de.useState(0),[L,B]=de.useState(!1),[V,G]=de.useState(!1),j=Po(e,F=>g(F));return Y.jsx(mRe,{value:{type:i,scrollHideDelay:o,scrollArea:p,viewport:v,onViewportChange:_,content:b,onContentChange:w,scrollbarX:E,onScrollbarXChange:S,scrollbarXEnabled:L,onScrollbarXEnabledChange:B,scrollbarY:M,onScrollbarYChange:k,scrollbarYEnabled:V,onScrollbarYEnabledChange:G,onCornerWidthChange:C,onCornerHeightChange:O},children:Y.jsx(Xt,{...d,ref:j,__vars:{"--sa-corner-width":l!=="xy"?"0px":`${x}px`,"--sa-corner-height":l!=="xy"?"0px":`${P}px`}})})});tpe.displayName="@mantine/core/ScrollAreaRoot";function npe(t,e){const n=t/e;return Number.isNaN(n)?0:n}function GI(t){const e=npe(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=(t.scrollbar.size-n)*e;return Math.max(i,18)}function rpe(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const i=(e[1]-e[0])/(t[1]-t[0]);return e[0]+i*(n-t[0])}}function yRe(t,[e,n]){return Math.min(n,Math.max(e,t))}function Dre(t,e,n="ltr"){const i=GI(e),o=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,l=e.scrollbar.size-o,d=e.content-e.viewport,p=l-i,g=n==="ltr"?[0,d]:[d*-1,0],v=yRe(t,g);return rpe([0,d],[0,p])(v)}function bRe(t,e,n,i="ltr"){const o=GI(n),l=o/2,d=e||l,p=o-d,g=n.scrollbar.paddingStart+d,v=n.scrollbar.size-n.scrollbar.paddingEnd-p,_=n.content-n.viewport,b=i==="ltr"?[0,_]:[_*-1,0];return rpe([g,v],b)(t)}function ipe(t,e){return t>0&&t<e}function OO(t){return t?parseInt(t,10):0}function Ng(t,e,{checkForDefaultPrevented:n=!0}={}){return i=>{t==null||t(i),(n===!1||!i.defaultPrevented)&&(e==null||e(i))}}const[ARe,spe]=Hc("ScrollAreaScrollbar was not found in tree"),ope=de.forwardRef((t,e)=>{const{sizes:n,hasThumb:i,onThumbChange:o,onThumbPointerUp:l,onThumbPointerDown:d,onThumbPositionChange:p,onDragScroll:g,onWheelScroll:v,onResize:_,...b}=t,w=Rf(),[E,S]=de.useState(null),M=Po(e,G=>S(G)),k=de.useRef(null),x=de.useRef(""),{viewport:C}=w,P=n.content-n.viewport,O=hg(v),L=hg(p),B=zI(_,10),V=G=>{if(k.current){const j=G.clientX-k.current.left,F=G.clientY-k.current.top;g({x:j,y:F})}};return de.useEffect(()=>{const G=j=>{const F=j.target;(E==null?void 0:E.contains(F))&&O(j,P)};return document.addEventListener("wheel",G,{passive:!1}),()=>document.removeEventListener("wheel",G,{passive:!1})},[C,E,P,O]),de.useEffect(L,[n,L]),Nb(E,B),Nb(w.content,B),Y.jsx(ARe,{value:{scrollbar:E,hasThumb:i,onThumbChange:hg(o),onThumbPointerUp:hg(l),onThumbPositionChange:L,onThumbPointerDown:hg(d)},children:Y.jsx("div",{...b,ref:M,style:{position:"absolute",...b.style},onPointerDown:Ng(t.onPointerDown,G=>{G.button===0&&(G.target.setPointerCapture(G.pointerId),k.current=E.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",V(G))}),onPointerMove:Ng(t.onPointerMove,V),onPointerUp:Ng(t.onPointerUp,G=>{const j=G.target;j.hasPointerCapture(G.pointerId)&&j.releasePointerCapture(G.pointerId),document.body.style.webkitUserSelect=x.current,k.current=null})})})}),wRe=de.forwardRef((t,e)=>{const{sizes:n,onSizesChange:i,style:o,...l}=t,d=Rf(),[p,g]=de.useState(),v=de.useRef(null),_=Po(e,v,d.onScrollbarXChange);return de.useEffect(()=>{v.current&&g(getComputedStyle(v.current))},[v]),Y.jsx(ope,{"data-orientation":"horizontal",...l,ref:_,sizes:n,style:{...o,"--sa-thumb-width":`${GI(n)}px`},onThumbPointerDown:b=>t.onThumbPointerDown(b.x),onDragScroll:b=>t.onDragScroll(b.x),onWheelScroll:(b,w)=>{if(d.viewport){const E=d.viewport.scrollLeft+b.deltaX;t.onWheelScroll(E),ipe(E,w)&&b.preventDefault()}},onResize:()=>{v.current&&d.viewport&&p&&i({content:d.viewport.scrollWidth,viewport:d.viewport.offsetWidth,scrollbar:{size:v.current.clientWidth,paddingStart:OO(p.paddingLeft),paddingEnd:OO(p.paddingRight)}})}})}),ERe=de.forwardRef((t,e)=>{const{sizes:n,onSizesChange:i,style:o,...l}=t,d=Rf(),[p,g]=de.useState(),v=de.useRef(null),_=Po(e,v,d.onScrollbarYChange);return de.useEffect(()=>{v.current&&g(getComputedStyle(v.current))},[v]),Y.jsx(ope,{...l,"data-orientation":"vertical",ref:_,sizes:n,style:{"--sa-thumb-height":`${GI(n)}px`,...o},onThumbPointerDown:b=>t.onThumbPointerDown(b.y),onDragScroll:b=>t.onDragScroll(b.y),onWheelScroll:(b,w)=>{if(d.viewport){const E=d.viewport.scrollTop+b.deltaY;t.onWheelScroll(E),ipe(E,w)&&b.preventDefault()}},onResize:()=>{v.current&&d.viewport&&p&&i({content:d.viewport.scrollHeight,viewport:d.viewport.offsetHeight,scrollbar:{size:v.current.clientHeight,paddingStart:OO(p.paddingTop),paddingEnd:OO(p.paddingBottom)}})}})}),yq=de.forwardRef((t,e)=>{const{orientation:n="vertical",...i}=t,{dir:o}=av(),l=Rf(),d=de.useRef(null),p=de.useRef(0),[g,v]=de.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),_=npe(g.viewport,g.content),b={...i,sizes:g,onSizesChange:v,hasThumb:_>0&&_<1,onThumbChange:E=>{d.current=E},onThumbPointerUp:()=>{p.current=0},onThumbPointerDown:E=>{p.current=E}},w=(E,S)=>bRe(E,p.current,g,S);return n==="horizontal"?Y.jsx(wRe,{...b,ref:e,onThumbPositionChange:()=>{if(l.viewport&&d.current){const E=l.viewport.scrollLeft,S=Dre(E,g,o);d.current.style.transform=`translate3d(${S}px, 0, 0)`}},onWheelScroll:E=>{l.viewport&&(l.viewport.scrollLeft=E)},onDragScroll:E=>{l.viewport&&(l.viewport.scrollLeft=w(E,o))}}):n==="vertical"?Y.jsx(ERe,{...b,ref:e,onThumbPositionChange:()=>{if(l.viewport&&d.current){const E=l.viewport.scrollTop,S=Dre(E,g);d.current.style.transform=`translate3d(0, ${S}px, 0)`}},onWheelScroll:E=>{l.viewport&&(l.viewport.scrollTop=E)},onDragScroll:E=>{l.viewport&&(l.viewport.scrollTop=w(E))}}):null}),ape=de.forwardRef((t,e)=>{const n=Rf(),{forceMount:i,...o}=t,[l,d]=de.useState(!1),p=t.orientation==="horizontal",g=zI(()=>{if(n.viewport){const v=n.viewport.offsetWidth<n.viewport.scrollWidth,_=n.viewport.offsetHeight<n.viewport.scrollHeight;d(p?v:_)}},10);return Nb(n.viewport,g),Nb(n.content,g),i||l?Y.jsx(yq,{"data-state":l?"visible":"hidden",...o,ref:e}):null}),SRe=de.forwardRef((t,e)=>{const{forceMount:n,...i}=t,o=Rf(),[l,d]=de.useState(!1);return de.useEffect(()=>{const{scrollArea:p}=o;let g=0;if(p){const v=()=>{window.clearTimeout(g),d(!0)},_=()=>{g=window.setTimeout(()=>d(!1),o.scrollHideDelay)};return p.addEventListener("pointerenter",v),p.addEventListener("pointerleave",_),()=>{window.clearTimeout(g),p.removeEventListener("pointerenter",v),p.removeEventListener("pointerleave",_)}}},[o.scrollArea,o.scrollHideDelay]),n||l?Y.jsx(ape,{"data-state":l?"visible":"hidden",...i,ref:e}):null}),TRe=de.forwardRef((t,e)=>{const{forceMount:n,...i}=t,o=Rf(),l=t.orientation==="horizontal",[d,p]=de.useState("hidden"),g=zI(()=>p("idle"),100);return de.useEffect(()=>{if(d==="idle"){const v=window.setTimeout(()=>p("hidden"),o.scrollHideDelay);return()=>window.clearTimeout(v)}},[d,o.scrollHideDelay]),de.useEffect(()=>{const{viewport:v}=o,_=l?"scrollLeft":"scrollTop";if(v){let b=v[_];const w=()=>{const E=v[_];b!==E&&(p("scrolling"),g()),b=E};return v.addEventListener("scroll",w),()=>v.removeEventListener("scroll",w)}},[o.viewport,l,g]),n||d!=="hidden"?Y.jsx(yq,{"data-state":d==="hidden"?"hidden":"visible",...i,ref:e,onPointerEnter:Ng(t.onPointerEnter,()=>p("interacting")),onPointerLeave:Ng(t.onPointerLeave,()=>p("idle"))}):null}),Ore=de.forwardRef((t,e)=>{const{forceMount:n,...i}=t,o=Rf(),{onScrollbarXEnabledChange:l,onScrollbarYEnabledChange:d}=o,p=t.orientation==="horizontal";return de.useEffect(()=>(p?l(!0):d(!0),()=>{p?l(!1):d(!1)}),[p,l,d]),o.type==="hover"?Y.jsx(SRe,{...i,ref:e,forceMount:n}):o.type==="scroll"?Y.jsx(TRe,{...i,ref:e,forceMount:n}):o.type==="auto"?Y.jsx(ape,{...i,ref:e,forceMount:n}):o.type==="always"?Y.jsx(yq,{...i,ref:e}):null});function xRe(t,e=()=>{}){let n={left:t.scrollLeft,top:t.scrollTop},i=0;return function o(){const l={left:t.scrollLeft,top:t.scrollTop},d=n.left!==l.left,p=n.top!==l.top;(d||p)&&e(),n=l,i=window.requestAnimationFrame(o)}(),()=>window.cancelAnimationFrame(i)}const MRe=de.forwardRef((t,e)=>{const{style:n,...i}=t,o=Rf(),l=spe(),{onThumbPositionChange:d}=l,p=Po(e,_=>l.onThumbChange(_)),g=de.useRef(),v=zI(()=>{g.current&&(g.current(),g.current=void 0)},100);return de.useEffect(()=>{const{viewport:_}=o;if(_){const b=()=>{if(v(),!g.current){const w=xRe(_,d);g.current=w,d()}};return d(),_.addEventListener("scroll",b),()=>_.removeEventListener("scroll",b)}},[o.viewport,v,d]),Y.jsx("div",{"data-state":l.hasThumb?"visible":"hidden",...i,ref:p,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:Ng(t.onPointerDownCapture,_=>{const w=_.target.getBoundingClientRect(),E=_.clientX-w.left,S=_.clientY-w.top;l.onThumbPointerDown({x:E,y:S})}),onPointerUp:Ng(t.onPointerUp,l.onThumbPointerUp)})}),Ire=de.forwardRef((t,e)=>{const{forceMount:n,...i}=t,o=spe();return n||o.hasThumb?Y.jsx(MRe,{ref:e,...i}):null}),lpe=de.forwardRef(({children:t,style:e,...n},i)=>{const o=Rf(),l=Po(i,o.onViewportChange);return Y.jsx(Xt,{...n,ref:l,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e},children:Y.jsx("div",{style:{minWidth:"100%",display:"table"},ref:o.onContentChange,children:t})})});lpe.displayName="@mantine/core/ScrollAreaViewport";var bq={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const cpe={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},kRe=(t,{scrollbarSize:e})=>({root:{"--scrollarea-scrollbar-size":yt(e)}}),B4=pn((t,e)=>{const n=Dt("ScrollArea",cpe,t),{classNames:i,className:o,style:l,styles:d,unstyled:p,scrollbarSize:g,vars:v,type:_,scrollHideDelay:b,viewportProps:w,viewportRef:E,onScrollPositionChange:S,children:M,offsetScrollbars:k,scrollbars:x,...C}=n,[P,O]=de.useState(!1),L=er({name:"ScrollArea",props:n,classes:bq,className:o,style:l,classNames:i,styles:d,unstyled:p,vars:v,varsResolver:kRe});return Y.jsxs(tpe,{type:_==="never"?"always":_,scrollHideDelay:b,ref:e,scrollbars:x,...L("root"),...C,children:[Y.jsx(lpe,{...w,...L("viewport",{style:w==null?void 0:w.style}),ref:E,"data-offset-scrollbars":k===!0?"xy":k||void 0,"data-scrollbars":x||void 0,onScroll:B=>{var V;(V=w==null?void 0:w.onScroll)==null||V.call(w,B),S==null||S({x:B.currentTarget.scrollLeft,y:B.currentTarget.scrollTop})},children:M}),(x==="xy"||x==="x")&&Y.jsx(Ore,{...L("scrollbar"),orientation:"horizontal","data-hidden":_==="never"||void 0,forceMount:!0,onMouseEnter:()=>O(!0),onMouseLeave:()=>O(!1),children:Y.jsx(Ire,{...L("thumb")})}),(x==="xy"||x==="y")&&Y.jsx(Ore,{...L("scrollbar"),orientation:"vertical","data-hidden":_==="never"||void 0,forceMount:!0,onMouseEnter:()=>O(!0),onMouseLeave:()=>O(!1),children:Y.jsx(Ire,{...L("thumb")})}),Y.jsx(vRe,{...L("corner"),"data-hovered":P||void 0,"data-hidden":_==="never"||void 0})]})});B4.displayName="@mantine/core/ScrollArea";const Aq=pn((t,e)=>{const{children:n,classNames:i,styles:o,scrollbarSize:l,scrollHideDelay:d,type:p,dir:g,offsetScrollbars:v,viewportRef:_,onScrollPositionChange:b,unstyled:w,variant:E,viewportProps:S,scrollbars:M,style:k,vars:x,...C}=Dt("ScrollAreaAutosize",cpe,t);return Y.jsx(Xt,{...C,ref:e,style:[{display:"flex",overflow:"auto"},k],children:Y.jsx(Xt,{style:{display:"flex",flexDirection:"column",flex:1},children:Y.jsx(B4,{classNames:i,styles:o,scrollHideDelay:d,scrollbarSize:l,type:p,dir:g,offsetScrollbars:v,viewportRef:_,onScrollPositionChange:b,unstyled:w,variant:E,viewportProps:S,vars:x,scrollbars:M,children:n})})})});B4.classes=bq;Aq.displayName="@mantine/core/ScrollAreaAutosize";Aq.classes=bq;B4.Autosize=Aq;var upe={root:"m_87cf2631"};const CRe={__staticSelector:"UnstyledButton"},R0=tc((t,e)=>{const n=Dt("UnstyledButton",CRe,t),{className:i,component:o="button",__staticSelector:l,unstyled:d,classNames:p,styles:g,style:v,..._}=n,b=er({name:l,props:n,classes:upe,className:i,style:v,classNames:p,styles:g,unstyled:d});return Y.jsx(Xt,{...b("root",{focusable:!0}),component:o,ref:e,type:o==="button"?"button":void 0,..._})});R0.classes=upe;R0.displayName="@mantine/core/UnstyledButton";var fpe={root:"m_515a97f8"};const PRe={},wq=pn((t,e)=>{const n=Dt("VisuallyHidden",PRe,t),{classNames:i,className:o,style:l,styles:d,unstyled:p,vars:g,...v}=n,_=er({name:"VisuallyHidden",classes:fpe,props:n,className:o,style:l,classNames:i,styles:d,unstyled:p});return Y.jsx(Xt,{component:"span",ref:e,..._("root"),...v})});wq.classes=fpe;wq.displayName="@mantine/core/VisuallyHidden";var dpe={root:"m_1b7284a3"};const RRe={},DRe=(t,{radius:e,shadow:n})=>({root:{"--paper-radius":e===void 0?void 0:fa(e),"--paper-shadow":cq(n)}}),S0=tc((t,e)=>{const n=Dt("Paper",RRe,t),{classNames:i,className:o,style:l,styles:d,unstyled:p,withBorder:g,vars:v,radius:_,shadow:b,variant:w,mod:E,...S}=n,M=er({name:"Paper",props:n,classes:dpe,className:o,style:l,classNames:i,styles:d,unstyled:p,vars:v,varsResolver:DRe});return Y.jsx(Xt,{ref:e,mod:[{"data-with-border":g},E],...M("root"),variant:w,...S})});S0.classes=dpe;S0.displayName="@mantine/core/Paper";function U4(t){return hpe(t)?(t.nodeName||"").toLowerCase():"#document"}function Uc(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function yp(t){var e;return(e=(hpe(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function hpe(t){return t instanceof Node||t instanceof Uc(t).Node}function Qs(t){return t instanceof Element||t instanceof Uc(t).Element}function Cu(t){return t instanceof HTMLElement||t instanceof Uc(t).HTMLElement}function _H(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Uc(t).ShadowRoot}function v6(t){const{overflow:e,overflowX:n,overflowY:i,display:o}=Pf(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!["inline","contents"].includes(o)}function ORe(t){return["table","td","th"].includes(U4(t))}function Eq(t){const e=Sq(),n=Pf(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(i=>(n.willChange||"").includes(i))||["paint","layout","strict","content"].some(i=>(n.contain||"").includes(i))}function IRe(t){let e=ap(t);for(;Cu(e)&&!cm(e);){if(Eq(e))return e;e=ap(e)}return null}function Sq(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function cm(t){return["html","body","#document"].includes(U4(t))}function Pf(t){return Uc(t).getComputedStyle(t)}function jI(t){return Qs(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function ap(t){if(U4(t)==="html")return t;const e=t.assignedSlot||t.parentNode||_H(t)&&t.host||yp(t);return _H(e)?e.host:e}function ppe(t){const e=ap(t);return cm(e)?t.ownerDocument?t.ownerDocument.body:t.body:Cu(e)&&v6(e)?e:ppe(e)}function qh(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const o=ppe(t),l=o===((i=t.ownerDocument)==null?void 0:i.body),d=Uc(o);return l?e.concat(d,d.visualViewport||[],v6(o)?o:[],d.frameElement&&n?qh(d.frameElement):[]):e.concat(o,qh(o,[],n))}function Nre(t){let e=t.activeElement;for(;((n=e)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;e=e.shadowRoot.activeElement}return e}function AT(t,e){if(!t||!e)return!1;const n=e.getRootNode==null?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&_H(n)){let i=e;for(;i;){if(t===i)return!0;i=i.parentNode||i.host}}return!1}function mpe(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function gpe(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:i}=e;return n+"/"+i}).join(" "):navigator.userAgent}function NRe(t){return BRe()?!1:!Lre()&&t.width===0&&t.height===0||Lre()&&t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType==="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0&&t.pointerType==="touch"}function LRe(){return/apple/i.test(navigator.vendor)}function Lre(){const t=/android/i;return t.test(mpe())||t.test(gpe())}function zRe(){return mpe().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function BRe(){return gpe().includes("jsdom/")}function yH(t,e){const n=["mouse","pen"];return n.push("",void 0),n.includes(t)}function URe(t){return"nativeEvent"in t}function FRe(t){return t.matches("html,body")}function wg(t){return(t==null?void 0:t.ownerDocument)||document}function ZU(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function cy(t){return"composedPath"in t?t.composedPath()[0]:t.target}const VRe="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function GRe(t){return Cu(t)&&t.matches(VRe)}const Eu=Math.min,Tl=Math.max,IO=Math.round,C8=Math.floor,um=t=>({x:t,y:t}),jRe={left:"right",right:"left",bottom:"top",top:"bottom"},HRe={start:"end",end:"start"};function bH(t,e,n){return Tl(t,Eu(e,n))}function lp(t,e){return typeof t=="function"?t(e):t}function D0(t){return t.split("-")[0]}function F4(t){return t.split("-")[1]}function Tq(t){return t==="x"?"y":"x"}function xq(t){return t==="y"?"height":"width"}function lv(t){return["top","bottom"].includes(D0(t))?"y":"x"}function Mq(t){return Tq(lv(t))}function $Re(t,e,n){n===void 0&&(n=!1);const i=F4(t),o=Mq(t),l=xq(o);let d=o==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[l]>e.floating[l]&&(d=NO(d)),[d,NO(d)]}function WRe(t){const e=NO(t);return[AH(t),e,AH(e)]}function AH(t){return t.replace(/start|end/g,e=>HRe[e])}function YRe(t,e,n){const i=["left","right"],o=["right","left"],l=["top","bottom"],d=["bottom","top"];switch(t){case"top":case"bottom":return n?e?o:i:e?i:o;case"left":case"right":return e?l:d;default:return[]}}function qRe(t,e,n,i){const o=F4(t);let l=YRe(D0(t),n==="start",i);return o&&(l=l.map(d=>d+"-"+o),e&&(l=l.concat(l.map(AH)))),l}function NO(t){return t.replace(/left|right|bottom|top/g,e=>jRe[e])}function XRe(t){return{top:0,right:0,bottom:0,left:0,...t}}function kq(t){return typeof t!="number"?XRe(t):{top:t,right:t,bottom:t,left:t}}function Lb(t){const{x:e,y:n,width:i,height:o}=t;return{width:i,height:o,top:n,left:e,right:e+i,bottom:n+o,x:e,y:n}}function zre(t,e,n){let{reference:i,floating:o}=t;const l=lv(e),d=Mq(e),p=xq(d),g=D0(e),v=l==="y",_=i.x+i.width/2-o.width/2,b=i.y+i.height/2-o.height/2,w=i[p]/2-o[p]/2;let E;switch(g){case"top":E={x:_,y:i.y-o.height};break;case"bottom":E={x:_,y:i.y+i.height};break;case"right":E={x:i.x+i.width,y:b};break;case"left":E={x:i.x-o.width,y:b};break;default:E={x:i.x,y:i.y}}switch(F4(e)){case"start":E[d]-=w*(n&&v?-1:1);break;case"end":E[d]+=w*(n&&v?-1:1);break}return E}const ZRe=async(t,e,n)=>{const{placement:i="bottom",strategy:o="absolute",middleware:l=[],platform:d}=n,p=l.filter(Boolean),g=await(d.isRTL==null?void 0:d.isRTL(e));let v=await d.getElementRects({reference:t,floating:e,strategy:o}),{x:_,y:b}=zre(v,i,g),w=i,E={},S=0;for(let M=0;M<p.length;M++){const{name:k,fn:x}=p[M],{x:C,y:P,data:O,reset:L}=await x({x:_,y:b,initialPlacement:i,placement:w,strategy:o,middlewareData:E,rects:v,platform:d,elements:{reference:t,floating:e}});_=C??_,b=P??b,E={...E,[k]:{...E[k],...O}},L&&S<=50&&(S++,typeof L=="object"&&(L.placement&&(w=L.placement),L.rects&&(v=L.rects===!0?await d.getElementRects({reference:t,floating:e,strategy:o}):L.rects),{x:_,y:b}=zre(v,w,g)),M=-1)}return{x:_,y:b,placement:w,strategy:o,middlewareData:E}};async function Cq(t,e){var n;e===void 0&&(e={});const{x:i,y:o,platform:l,rects:d,elements:p,strategy:g}=t,{boundary:v="clippingAncestors",rootBoundary:_="viewport",elementContext:b="floating",altBoundary:w=!1,padding:E=0}=lp(e,t),S=kq(E),k=p[w?b==="floating"?"reference":"floating":b],x=Lb(await l.getClippingRect({element:(n=await(l.isElement==null?void 0:l.isElement(k)))==null||n?k:k.contextElement||await(l.getDocumentElement==null?void 0:l.getDocumentElement(p.floating)),boundary:v,rootBoundary:_,strategy:g})),C=b==="floating"?{x:i,y:o,width:d.floating.width,height:d.floating.height}:d.reference,P=await(l.getOffsetParent==null?void 0:l.getOffsetParent(p.floating)),O=await(l.isElement==null?void 0:l.isElement(P))?await(l.getScale==null?void 0:l.getScale(P))||{x:1,y:1}:{x:1,y:1},L=Lb(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({elements:p,rect:C,offsetParent:P,strategy:g}):C);return{top:(x.top-L.top+S.top)/O.y,bottom:(L.bottom-x.bottom+S.bottom)/O.y,left:(x.left-L.left+S.left)/O.x,right:(L.right-x.right+S.right)/O.x}}const QRe=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:o,rects:l,platform:d,elements:p,middlewareData:g}=e,{element:v,padding:_=0}=lp(t,e)||{};if(v==null)return{};const b=kq(_),w={x:n,y:i},E=Mq(o),S=xq(E),M=await d.getDimensions(v),k=E==="y",x=k?"top":"left",C=k?"bottom":"right",P=k?"clientHeight":"clientWidth",O=l.reference[S]+l.reference[E]-w[E]-l.floating[S],L=w[E]-l.reference[E],B=await(d.getOffsetParent==null?void 0:d.getOffsetParent(v));let V=B?B[P]:0;(!V||!await(d.isElement==null?void 0:d.isElement(B)))&&(V=p.floating[P]||l.floating[S]);const G=O/2-L/2,j=V/2-M[S]/2-1,F=Eu(b[x],j),q=Eu(b[C],j),fe=F,ue=V-M[S]-q,J=V/2-M[S]/2+G,le=bH(fe,J,ue),me=!g.arrow&&F4(o)!=null&&J!==le&&l.reference[S]/2-(J<fe?F:q)-M[S]/2<0,be=me?J<fe?J-fe:J-ue:0;return{[E]:w[E]+be,data:{[E]:le,centerOffset:J-le-be,...me&&{alignmentOffset:be}},reset:me}}}),KRe=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,i;const{placement:o,middlewareData:l,rects:d,initialPlacement:p,platform:g,elements:v}=e,{mainAxis:_=!0,crossAxis:b=!0,fallbackPlacements:w,fallbackStrategy:E="bestFit",fallbackAxisSideDirection:S="none",flipAlignment:M=!0,...k}=lp(t,e);if((n=l.arrow)!=null&&n.alignmentOffset)return{};const x=D0(o),C=D0(p)===p,P=await(g.isRTL==null?void 0:g.isRTL(v.floating)),O=w||(C||!M?[NO(p)]:WRe(p));!w&&S!=="none"&&O.push(...qRe(p,M,S,P));const L=[p,...O],B=await Cq(e,k),V=[];let G=((i=l.flip)==null?void 0:i.overflows)||[];if(_&&V.push(B[x]),b){const fe=$Re(o,d,P);V.push(B[fe[0]],B[fe[1]])}if(G=[...G,{placement:o,overflows:V}],!V.every(fe=>fe<=0)){var j,F;const fe=(((j=l.flip)==null?void 0:j.index)||0)+1,ue=L[fe];if(ue)return{data:{index:fe,overflows:G},reset:{placement:ue}};let J=(F=G.filter(le=>le.overflows[0]<=0).sort((le,me)=>le.overflows[1]-me.overflows[1])[0])==null?void 0:F.placement;if(!J)switch(E){case"bestFit":{var q;const le=(q=G.map(me=>[me.placement,me.overflows.filter(be=>be>0).reduce((be,ye)=>be+ye,0)]).sort((me,be)=>me[1]-be[1])[0])==null?void 0:q[0];le&&(J=le);break}case"initialPlacement":J=p;break}if(o!==J)return{reset:{placement:J}}}return{}}}};function vpe(t){const e=Eu(...t.map(l=>l.left)),n=Eu(...t.map(l=>l.top)),i=Tl(...t.map(l=>l.right)),o=Tl(...t.map(l=>l.bottom));return{x:e,y:n,width:i-e,height:o-n}}function JRe(t){const e=t.slice().sort((o,l)=>o.y-l.y),n=[];let i=null;for(let o=0;o<e.length;o++){const l=e[o];!i||l.y-i.y>i.height/2?n.push([l]):n[n.length-1].push(l),i=l}return n.map(o=>Lb(vpe(o)))}const eDe=function(t){return t===void 0&&(t={}),{name:"inline",options:t,async fn(e){const{placement:n,elements:i,rects:o,platform:l,strategy:d}=e,{padding:p=2,x:g,y:v}=lp(t,e),_=Array.from(await(l.getClientRects==null?void 0:l.getClientRects(i.reference))||[]),b=JRe(_),w=Lb(vpe(_)),E=kq(p);function S(){if(b.length===2&&b[0].left>b[1].right&&g!=null&&v!=null)return b.find(k=>g>k.left-E.left&&g<k.right+E.right&&v>k.top-E.top&&v<k.bottom+E.bottom)||w;if(b.length>=2){if(lv(n)==="y"){const F=b[0],q=b[b.length-1],fe=D0(n)==="top",ue=F.top,J=q.bottom,le=fe?F.left:q.left,me=fe?F.right:q.right,be=me-le,ye=J-ue;return{top:ue,bottom:J,left:le,right:me,width:be,height:ye,x:le,y:ue}}const k=D0(n)==="left",x=Tl(...b.map(F=>F.right)),C=Eu(...b.map(F=>F.left)),P=b.filter(F=>k?F.left===C:F.right===x),O=P[0].top,L=P[P.length-1].bottom,B=C,V=x,G=V-B,j=L-O;return{top:O,bottom:L,left:B,right:V,width:G,height:j,x:B,y:O}}return w}const M=await l.getElementRects({reference:{getBoundingClientRect:S},floating:i.floating,strategy:d});return o.reference.x!==M.reference.x||o.reference.y!==M.reference.y||o.reference.width!==M.reference.width||o.reference.height!==M.reference.height?{reset:{rects:M}}:{}}}};async function tDe(t,e){const{placement:n,platform:i,elements:o}=t,l=await(i.isRTL==null?void 0:i.isRTL(o.floating)),d=D0(n),p=F4(n),g=lv(n)==="y",v=["left","top"].includes(d)?-1:1,_=l&&g?-1:1,b=lp(e,t);let{mainAxis:w,crossAxis:E,alignmentAxis:S}=typeof b=="number"?{mainAxis:b,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...b};return p&&typeof S=="number"&&(E=p==="end"?S*-1:S),g?{x:E*_,y:w*v}:{x:w*v,y:E*_}}const nDe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,i;const{x:o,y:l,placement:d,middlewareData:p}=e,g=await tDe(e,t);return d===((n=p.offset)==null?void 0:n.placement)&&(i=p.arrow)!=null&&i.alignmentOffset?{}:{x:o+g.x,y:l+g.y,data:{...g,placement:d}}}}},rDe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:o}=e,{mainAxis:l=!0,crossAxis:d=!1,limiter:p={fn:k=>{let{x,y:C}=k;return{x,y:C}}},...g}=lp(t,e),v={x:n,y:i},_=await Cq(e,g),b=lv(D0(o)),w=Tq(b);let E=v[w],S=v[b];if(l){const k=w==="y"?"top":"left",x=w==="y"?"bottom":"right",C=E+_[k],P=E-_[x];E=bH(C,E,P)}if(d){const k=b==="y"?"top":"left",x=b==="y"?"bottom":"right",C=S+_[k],P=S-_[x];S=bH(C,S,P)}const M=p.fn({...e,[w]:E,[b]:S});return{...M,data:{x:M.x-n,y:M.y-i}}}}},iDe=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:i,placement:o,rects:l,middlewareData:d}=e,{offset:p=0,mainAxis:g=!0,crossAxis:v=!0}=lp(t,e),_={x:n,y:i},b=lv(o),w=Tq(b);let E=_[w],S=_[b];const M=lp(p,e),k=typeof M=="number"?{mainAxis:M,crossAxis:0}:{mainAxis:0,crossAxis:0,...M};if(g){const P=w==="y"?"height":"width",O=l.reference[w]-l.floating[P]+k.mainAxis,L=l.reference[w]+l.reference[P]-k.mainAxis;E<O?E=O:E>L&&(E=L)}if(v){var x,C;const P=w==="y"?"width":"height",O=["top","left"].includes(D0(o)),L=l.reference[b]-l.floating[P]+(O&&((x=d.offset)==null?void 0:x[b])||0)+(O?0:k.crossAxis),B=l.reference[b]+l.reference[P]+(O?0:((C=d.offset)==null?void 0:C[b])||0)-(O?k.crossAxis:0);S<L?S=L:S>B&&(S=B)}return{[w]:E,[b]:S}}}},sDe=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){const{placement:n,rects:i,platform:o,elements:l}=e,{apply:d=()=>{},...p}=lp(t,e),g=await Cq(e,p),v=D0(n),_=F4(n),b=lv(n)==="y",{width:w,height:E}=i.floating;let S,M;v==="top"||v==="bottom"?(S=v,M=_===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(M=v,S=_==="end"?"top":"bottom");const k=E-g.top-g.bottom,x=w-g.left-g.right,C=Eu(E-g[S],k),P=Eu(w-g[M],x),O=!e.middlewareData.shift;let L=C,B=P;if(b?B=_||O?Eu(P,x):x:L=_||O?Eu(C,k):k,O&&!_){const G=Tl(g.left,0),j=Tl(g.right,0),F=Tl(g.top,0),q=Tl(g.bottom,0);b?B=w-2*(G!==0||j!==0?G+j:Tl(g.left,g.right)):L=E-2*(F!==0||q!==0?F+q:Tl(g.top,g.bottom))}await d({...e,availableWidth:B,availableHeight:L});const V=await o.getDimensions(l.floating);return w!==V.width||E!==V.height?{reset:{rects:!0}}:{}}}};function _pe(t){const e=Pf(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const o=Cu(t),l=o?t.offsetWidth:n,d=o?t.offsetHeight:i,p=IO(n)!==l||IO(i)!==d;return p&&(n=l,i=d),{width:n,height:i,$:p}}function Pq(t){return Qs(t)?t:t.contextElement}function Ab(t){const e=Pq(t);if(!Cu(e))return um(1);const n=e.getBoundingClientRect(),{width:i,height:o,$:l}=_pe(e);let d=(l?IO(n.width):n.width)/i,p=(l?IO(n.height):n.height)/o;return(!d||!Number.isFinite(d))&&(d=1),(!p||!Number.isFinite(p))&&(p=1),{x:d,y:p}}const oDe=um(0);function ype(t){const e=Uc(t);return!Sq()||!e.visualViewport?oDe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function aDe(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Uc(t)?!1:e}function Wg(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const o=t.getBoundingClientRect(),l=Pq(t);let d=um(1);e&&(i?Qs(i)&&(d=Ab(i)):d=Ab(t));const p=aDe(l,n,i)?ype(l):um(0);let g=(o.left+p.x)/d.x,v=(o.top+p.y)/d.y,_=o.width/d.x,b=o.height/d.y;if(l){const w=Uc(l),E=i&&Qs(i)?Uc(i):i;let S=w,M=S.frameElement;for(;M&&i&&E!==S;){const k=Ab(M),x=M.getBoundingClientRect(),C=Pf(M),P=x.left+(M.clientLeft+parseFloat(C.paddingLeft))*k.x,O=x.top+(M.clientTop+parseFloat(C.paddingTop))*k.y;g*=k.x,v*=k.y,_*=k.x,b*=k.y,g+=P,v+=O,S=Uc(M),M=S.frameElement}}return Lb({width:_,height:b,x:g,y:v})}const lDe=[":popover-open",":modal"];function Rq(t){return lDe.some(e=>{try{return t.matches(e)}catch{return!1}})}function cDe(t){let{elements:e,rect:n,offsetParent:i,strategy:o}=t;const l=o==="fixed",d=yp(i),p=e?Rq(e.floating):!1;if(i===d||p&&l)return n;let g={scrollLeft:0,scrollTop:0},v=um(1);const _=um(0),b=Cu(i);if((b||!b&&!l)&&((U4(i)!=="body"||v6(d))&&(g=jI(i)),Cu(i))){const w=Wg(i);v=Ab(i),_.x=w.x+i.clientLeft,_.y=w.y+i.clientTop}return{width:n.width*v.x,height:n.height*v.y,x:n.x*v.x-g.scrollLeft*v.x+_.x,y:n.y*v.y-g.scrollTop*v.y+_.y}}function uDe(t){return Array.from(t.getClientRects())}function bpe(t){return Wg(yp(t)).left+jI(t).scrollLeft}function fDe(t){const e=yp(t),n=jI(t),i=t.ownerDocument.body,o=Tl(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),l=Tl(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let d=-n.scrollLeft+bpe(t);const p=-n.scrollTop;return Pf(i).direction==="rtl"&&(d+=Tl(e.clientWidth,i.clientWidth)-o),{width:o,height:l,x:d,y:p}}function dDe(t,e){const n=Uc(t),i=yp(t),o=n.visualViewport;let l=i.clientWidth,d=i.clientHeight,p=0,g=0;if(o){l=o.width,d=o.height;const v=Sq();(!v||v&&e==="fixed")&&(p=o.offsetLeft,g=o.offsetTop)}return{width:l,height:d,x:p,y:g}}function hDe(t,e){const n=Wg(t,!0,e==="fixed"),i=n.top+t.clientTop,o=n.left+t.clientLeft,l=Cu(t)?Ab(t):um(1),d=t.clientWidth*l.x,p=t.clientHeight*l.y,g=o*l.x,v=i*l.y;return{width:d,height:p,x:g,y:v}}function Bre(t,e,n){let i;if(e==="viewport")i=dDe(t,n);else if(e==="document")i=fDe(yp(t));else if(Qs(e))i=hDe(e,n);else{const o=ype(t);i={...e,x:e.x-o.x,y:e.y-o.y}}return Lb(i)}function Ape(t,e){const n=ap(t);return n===e||!Qs(n)||cm(n)?!1:Pf(n).position==="fixed"||Ape(n,e)}function pDe(t,e){const n=e.get(t);if(n)return n;let i=qh(t,[],!1).filter(p=>Qs(p)&&U4(p)!=="body"),o=null;const l=Pf(t).position==="fixed";let d=l?ap(t):t;for(;Qs(d)&&!cm(d);){const p=Pf(d),g=Eq(d);!g&&p.position==="fixed"&&(o=null),(l?!g&&!o:!g&&p.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||v6(d)&&!g&&Ape(t,d))?i=i.filter(_=>_!==d):o=p,d=ap(d)}return e.set(t,i),i}function mDe(t){let{element:e,boundary:n,rootBoundary:i,strategy:o}=t;const d=[...n==="clippingAncestors"?Rq(e)?[]:pDe(e,this._c):[].concat(n),i],p=d[0],g=d.reduce((v,_)=>{const b=Bre(e,_,o);return v.top=Tl(b.top,v.top),v.right=Eu(b.right,v.right),v.bottom=Eu(b.bottom,v.bottom),v.left=Tl(b.left,v.left),v},Bre(e,p,o));return{width:g.right-g.left,height:g.bottom-g.top,x:g.left,y:g.top}}function gDe(t){const{width:e,height:n}=_pe(t);return{width:e,height:n}}function vDe(t,e,n){const i=Cu(e),o=yp(e),l=n==="fixed",d=Wg(t,!0,l,e);let p={scrollLeft:0,scrollTop:0};const g=um(0);if(i||!i&&!l)if((U4(e)!=="body"||v6(o))&&(p=jI(e)),i){const b=Wg(e,!0,l,e);g.x=b.x+e.clientLeft,g.y=b.y+e.clientTop}else o&&(g.x=bpe(o));const v=d.left+p.scrollLeft-g.x,_=d.top+p.scrollTop-g.y;return{x:v,y:_,width:d.width,height:d.height}}function QU(t){return Pf(t).position==="static"}function Ure(t,e){return!Cu(t)||Pf(t).position==="fixed"?null:e?e(t):t.offsetParent}function wpe(t,e){const n=Uc(t);if(Rq(t))return n;if(!Cu(t)){let o=ap(t);for(;o&&!cm(o);){if(Qs(o)&&!QU(o))return o;o=ap(o)}return n}let i=Ure(t,e);for(;i&&ORe(i)&&QU(i);)i=Ure(i,e);return i&&cm(i)&&QU(i)&&!Eq(i)?n:i||IRe(t)||n}const _De=async function(t){const e=this.getOffsetParent||wpe,n=this.getDimensions,i=await n(t.floating);return{reference:vDe(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function yDe(t){return Pf(t).direction==="rtl"}const bDe={convertOffsetParentRelativeRectToViewportRelativeRect:cDe,getDocumentElement:yp,getClippingRect:mDe,getOffsetParent:wpe,getElementRects:_De,getClientRects:uDe,getDimensions:gDe,getScale:Ab,isElement:Qs,isRTL:yDe};function ADe(t,e){let n=null,i;const o=yp(t);function l(){var p;clearTimeout(i),(p=n)==null||p.disconnect(),n=null}function d(p,g){p===void 0&&(p=!1),g===void 0&&(g=1),l();const{left:v,top:_,width:b,height:w}=t.getBoundingClientRect();if(p||e(),!b||!w)return;const E=C8(_),S=C8(o.clientWidth-(v+b)),M=C8(o.clientHeight-(_+w)),k=C8(v),C={rootMargin:-E+"px "+-S+"px "+-M+"px "+-k+"px",threshold:Tl(0,Eu(1,g))||1};let P=!0;function O(L){const B=L[0].intersectionRatio;if(B!==g){if(!P)return d();B?d(!1,B):i=setTimeout(()=>{d(!1,1e-7)},1e3)}P=!1}try{n=new IntersectionObserver(O,{...C,root:o.ownerDocument})}catch{n=new IntersectionObserver(O,C)}n.observe(t)}return d(!0),l}function wDe(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:o=!0,ancestorResize:l=!0,elementResize:d=typeof ResizeObserver=="function",layoutShift:p=typeof IntersectionObserver=="function",animationFrame:g=!1}=i,v=Pq(t),_=o||l?[...v?qh(v):[],...qh(e)]:[];_.forEach(x=>{o&&x.addEventListener("scroll",n,{passive:!0}),l&&x.addEventListener("resize",n)});const b=v&&p?ADe(v,n):null;let w=-1,E=null;d&&(E=new ResizeObserver(x=>{let[C]=x;C&&C.target===v&&E&&(E.unobserve(e),cancelAnimationFrame(w),w=requestAnimationFrame(()=>{var P;(P=E)==null||P.observe(e)})),n()}),v&&!g&&E.observe(v),E.observe(e));let S,M=g?Wg(t):null;g&&k();function k(){const x=Wg(t);M&&(x.x!==M.x||x.y!==M.y||x.width!==M.width||x.height!==M.height)&&n(),M=x,S=requestAnimationFrame(k)}return n(),()=>{var x;_.forEach(C=>{o&&C.removeEventListener("scroll",n),l&&C.removeEventListener("resize",n)}),b==null||b(),(x=E)==null||x.disconnect(),E=null,g&&cancelAnimationFrame(S)}}const EDe=nDe,SDe=rDe,TDe=KRe,xDe=sDe,Fre=QRe,MDe=eDe,kDe=iDe,CDe=(t,e,n)=>{const i=new Map,o={platform:bDe,...n},l={...o.platform,_c:i};return ZRe(t,e,{...o,platform:l})};var XC=typeof document<"u"?de.useLayoutEffect:de.useEffect;function LO(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,i,o;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!LO(t[i],e[i]))return!1;return!0}if(o=Object.keys(t),n=o.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(e,o[i]))return!1;for(i=n;i--!==0;){const l=o[i];if(!(l==="_owner"&&t.$$typeof)&&!LO(t[l],e[l]))return!1}return!0}return t!==t&&e!==e}function Epe(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Vre(t,e){const n=Epe(t);return Math.round(e*n)/n}function Gre(t){const e=de.useRef(t);return XC(()=>{e.current=t}),e}function PDe(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:i=[],platform:o,elements:{reference:l,floating:d}={},transform:p=!0,whileElementsMounted:g,open:v}=t,[_,b]=de.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[w,E]=de.useState(i);LO(w,i)||E(i);const[S,M]=de.useState(null),[k,x]=de.useState(null),C=de.useCallback(be=>{be!==B.current&&(B.current=be,M(be))},[]),P=de.useCallback(be=>{be!==V.current&&(V.current=be,x(be))},[]),O=l||S,L=d||k,B=de.useRef(null),V=de.useRef(null),G=de.useRef(_),j=g!=null,F=Gre(g),q=Gre(o),fe=de.useCallback(()=>{if(!B.current||!V.current)return;const be={placement:e,strategy:n,middleware:w};q.current&&(be.platform=q.current),CDe(B.current,V.current,be).then(ye=>{const pe={...ye,isPositioned:!0};ue.current&&!LO(G.current,pe)&&(G.current=pe,p6.flushSync(()=>{b(pe)}))})},[w,e,n,q]);XC(()=>{v===!1&&G.current.isPositioned&&(G.current.isPositioned=!1,b(be=>({...be,isPositioned:!1})))},[v]);const ue=de.useRef(!1);XC(()=>(ue.current=!0,()=>{ue.current=!1}),[]),XC(()=>{if(O&&(B.current=O),L&&(V.current=L),O&&L){if(F.current)return F.current(O,L,fe);fe()}},[O,L,fe,F,j]);const J=de.useMemo(()=>({reference:B,floating:V,setReference:C,setFloating:P}),[C,P]),le=de.useMemo(()=>({reference:O,floating:L}),[O,L]),me=de.useMemo(()=>{const be={position:n,left:0,top:0};if(!le.floating)return be;const ye=Vre(le.floating,_.x),pe=Vre(le.floating,_.y);return p?{...be,transform:"translate("+ye+"px, "+pe+"px)",...Epe(le.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:ye,top:pe}},[n,p,le.floating,_.x,_.y]);return de.useMemo(()=>({..._,update:fe,refs:J,elements:le,floatingStyles:me}),[_,fe,J,le,me])}const RDe=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:i,padding:o}=typeof t=="function"?t(n):t;return i&&e(i)?i.current!=null?Fre({element:i.current,padding:o}).fn(n):{}:i?Fre({element:i,padding:o}).fn(n):{}}}},Spe=(t,e)=>({...EDe(t),options:[t,e]}),Dq=(t,e)=>({...SDe(t),options:[t,e]}),jre=(t,e)=>({...kDe(t),options:[t,e]}),wH=(t,e)=>({...TDe(t),options:[t,e]}),DDe=(t,e)=>({...xDe(t),options:[t,e]}),EH=(t,e)=>({...MDe(t),options:[t,e]}),Tpe=(t,e)=>({...RDe(t),options:[t,e]}),xpe={...k8e},ODe=xpe.useInsertionEffect,IDe=ODe||(t=>t());function O2(t){const e=de.useRef(()=>{});return IDe(()=>{e.current=t}),de.useCallback(function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e.current==null?void 0:e.current(...i)},[])}var Md=typeof document<"u"?de.useLayoutEffect:de.useEffect;let Hre=!1,NDe=0;const $re=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+NDe++;function LDe(){const[t,e]=de.useState(()=>Hre?$re():void 0);return Md(()=>{t==null&&e($re())},[]),de.useEffect(()=>{Hre=!0},[]),t}const zDe=xpe.useId,Mpe=zDe||LDe;function BDe(){const t=new Map;return{emit(e,n){var i;(i=t.get(e))==null||i.forEach(o=>o(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var i;t.set(e,((i=t.get(e))==null?void 0:i.filter(o=>o!==n))||[])}}}const UDe=de.createContext(null),FDe=de.createContext(null),Oq=()=>{var t;return((t=de.useContext(UDe))==null?void 0:t.id)||null},Iq=()=>de.useContext(FDe);function Nq(t){return"data-floating-ui-"+t}function Wre(t){const e=de.useRef(t);return Md(()=>{e.current=t}),e}const Yre=Nq("safe-polygon");function ZC(t,e,n){return n&&!yH(n)?0:typeof t=="number"?t:t==null?void 0:t[e]}function VDe(t,e){e===void 0&&(e={});const{open:n,onOpenChange:i,dataRef:o,events:l,elements:{domReference:d,floating:p}}=t,{enabled:g=!0,delay:v=0,handleClose:_=null,mouseOnly:b=!1,restMs:w=0,move:E=!0}=e,S=Iq(),M=Oq(),k=Wre(_),x=Wre(v),C=de.useRef(),P=de.useRef(-1),O=de.useRef(),L=de.useRef(-1),B=de.useRef(!0),V=de.useRef(!1),G=de.useRef(()=>{}),j=de.useCallback(()=>{var ue;const J=(ue=o.current.openEvent)==null?void 0:ue.type;return(J==null?void 0:J.includes("mouse"))&&J!=="mousedown"},[o]);de.useEffect(()=>{if(!g)return;function ue(J){let{open:le}=J;le||(clearTimeout(P.current),clearTimeout(L.current),B.current=!0)}return l.on("openchange",ue),()=>{l.off("openchange",ue)}},[g,l]),de.useEffect(()=>{if(!g||!k.current||!n)return;function ue(le){j()&&i(!1,le,"hover")}const J=wg(p).documentElement;return J.addEventListener("mouseleave",ue),()=>{J.removeEventListener("mouseleave",ue)}},[p,n,i,g,k,j]);const F=de.useCallback(function(ue,J,le){J===void 0&&(J=!0),le===void 0&&(le="hover");const me=ZC(x.current,"close",C.current);me&&!O.current?(clearTimeout(P.current),P.current=window.setTimeout(()=>i(!1,ue,le),me)):J&&(clearTimeout(P.current),i(!1,ue,le))},[x,i]),q=O2(()=>{G.current(),O.current=void 0}),fe=O2(()=>{if(V.current){const ue=wg(p).body;ue.style.pointerEvents="",ue.removeAttribute(Yre),V.current=!1}});return de.useEffect(()=>{if(!g)return;function ue(){return o.current.openEvent?["click","mousedown"].includes(o.current.openEvent.type):!1}function J(be){if(clearTimeout(P.current),B.current=!1,b&&!yH(C.current)||w>0&&!ZC(x.current,"open"))return;const ye=ZC(x.current,"open",C.current);ye?P.current=window.setTimeout(()=>{i(!0,be,"hover")},ye):i(!0,be,"hover")}function le(be){if(ue())return;G.current();const ye=wg(p);if(clearTimeout(L.current),k.current&&o.current.floatingContext){n||clearTimeout(P.current),O.current=k.current({...o.current.floatingContext,tree:S,x:be.clientX,y:be.clientY,onClose(){fe(),q(),F(be,!0,"safe-polygon")}});const oe=O.current;ye.addEventListener("mousemove",oe),G.current=()=>{ye.removeEventListener("mousemove",oe)};return}(C.current==="touch"?!AT(p,be.relatedTarget):!0)&&F(be)}function me(be){ue()||o.current.floatingContext&&(k.current==null||k.current({...o.current.floatingContext,tree:S,x:be.clientX,y:be.clientY,onClose(){fe(),q(),F(be)}})(be))}if(Qs(d)){const be=d;return n&&be.addEventListener("mouseleave",me),p==null||p.addEventListener("mouseleave",me),E&&be.addEventListener("mousemove",J,{once:!0}),be.addEventListener("mouseenter",J),be.addEventListener("mouseleave",le),()=>{n&&be.removeEventListener("mouseleave",me),p==null||p.removeEventListener("mouseleave",me),E&&be.removeEventListener("mousemove",J),be.removeEventListener("mouseenter",J),be.removeEventListener("mouseleave",le)}}},[d,p,g,t,b,w,E,F,q,fe,i,n,S,x,k,o]),Md(()=>{var ue;if(g&&n&&(ue=k.current)!=null&&ue.__options.blockPointerEvents&&j()){const le=wg(p).body;if(le.setAttribute(Yre,""),le.style.pointerEvents="none",V.current=!0,Qs(d)&&p){var J;const me=d,be=S==null||(J=S.nodesRef.current.find(ye=>ye.id===M))==null||(J=J.context)==null?void 0:J.elements.floating;return be&&(be.style.pointerEvents=""),me.style.pointerEvents="auto",p.style.pointerEvents="auto",()=>{me.style.pointerEvents="",p.style.pointerEvents=""}}}},[g,n,M,p,d,S,k,j]),Md(()=>{n||(C.current=void 0,q(),fe())},[n,q,fe]),de.useEffect(()=>()=>{q(),clearTimeout(P.current),clearTimeout(L.current),fe()},[g,d,q,fe]),de.useMemo(()=>{if(!g)return{};function ue(J){C.current=J.pointerType}return{reference:{onPointerDown:ue,onPointerEnter:ue,onMouseMove(J){function le(){B.current||i(!0,J.nativeEvent,"hover")}b&&!yH(C.current)||n||w===0||(clearTimeout(L.current),C.current==="touch"?le():L.current=window.setTimeout(le,w))}},floating:{onMouseEnter(){clearTimeout(P.current)},onMouseLeave(J){F(J.nativeEvent,!1)}}}},[g,b,n,w,i,F])}const SH=()=>{},kpe=de.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:SH,setState:SH,isInstantPhase:!1}),Cpe=()=>de.useContext(kpe);function GDe(t){const{children:e,delay:n,timeoutMs:i=0}=t,[o,l]=de.useReducer((g,v)=>({...g,...v}),{delay:n,timeoutMs:i,initialDelay:n,currentId:null,isInstantPhase:!1}),d=de.useRef(null),p=de.useCallback(g=>{l({currentId:g})},[]);return Md(()=>{o.currentId?d.current===null?d.current=o.currentId:o.isInstantPhase||l({isInstantPhase:!0}):(o.isInstantPhase&&l({isInstantPhase:!1}),d.current=null)},[o.currentId,o.isInstantPhase]),de.createElement(kpe.Provider,{value:de.useMemo(()=>({...o,setState:l,setCurrentId:p}),[o,p])},e)}function jDe(t,e){e===void 0&&(e={});const{open:n,onOpenChange:i,floatingId:o}=t,{id:l}=e,d=l??o,p=Cpe(),{currentId:g,setCurrentId:v,initialDelay:_,setState:b,timeoutMs:w}=p;return Md(()=>{g&&(b({delay:{open:1,close:ZC(_,"close")}}),g!==d&&i(!1))},[d,i,b,g,_]),Md(()=>{function E(){i(!1),b({delay:_,currentId:null})}if(g&&!n&&g===d){if(w){const S=window.setTimeout(E,w);return()=>{clearTimeout(S)}}E()}},[n,b,g,d,i,_,w]),Md(()=>{v===SH||!n||v(d)},[n,v,d]),p}function KU(t,e){let n=t.filter(o=>{var l;return o.parentId===e&&((l=o.context)==null?void 0:l.open)}),i=n;for(;i.length;)i=t.filter(o=>{var l;return(l=i)==null?void 0:l.some(d=>{var p;return o.parentId===d.id&&((p=o.context)==null?void 0:p.open)})}),n=n.concat(i);return n}const HDe={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},$De={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},qre=t=>{var e,n;return{escapeKey:typeof t=="boolean"?t:(e=t==null?void 0:t.escapeKey)!=null?e:!1,outsidePress:typeof t=="boolean"?t:(n=t==null?void 0:t.outsidePress)!=null?n:!0}};function WDe(t,e){e===void 0&&(e={});const{open:n,onOpenChange:i,elements:{reference:o,domReference:l,floating:d},dataRef:p}=t,{enabled:g=!0,escapeKey:v=!0,outsidePress:_=!0,outsidePressEvent:b="pointerdown",referencePress:w=!1,referencePressEvent:E="pointerdown",ancestorScroll:S=!1,bubbles:M,capture:k}=e,x=Iq(),C=O2(typeof _=="function"?_:()=>!1),P=typeof _=="function"?C:_,O=de.useRef(!1),L=de.useRef(!1),{escapeKey:B,outsidePress:V}=qre(M),{escapeKey:G,outsidePress:j}=qre(k),F=O2(J=>{var le;if(!n||!g||!v||J.key!=="Escape")return;const me=(le=p.current.floatingContext)==null?void 0:le.nodeId,be=x?KU(x.nodesRef.current,me):[];if(!B&&(J.stopPropagation(),be.length>0)){let ye=!0;if(be.forEach(pe=>{var oe;if((oe=pe.context)!=null&&oe.open&&!pe.context.dataRef.current.__escapeKeyBubbles){ye=!1;return}}),!ye)return}i(!1,URe(J)?J.nativeEvent:J,"escape-key")}),q=O2(J=>{var le;const me=()=>{var be;F(J),(be=cy(J))==null||be.removeEventListener("keydown",me)};(le=cy(J))==null||le.addEventListener("keydown",me)}),fe=O2(J=>{var le;const me=O.current;O.current=!1;const be=L.current;if(L.current=!1,b==="click"&&be||me||typeof P=="function"&&!P(J))return;const ye=cy(J),pe="["+Nq("inert")+"]",oe=wg(d).querySelectorAll(pe);let Ce=Qs(ye)?ye:null;for(;Ce&&!cm(Ce);){const ct=ap(Ce);if(cm(ct)||!Qs(ct))break;Ce=ct}if(oe.length&&Qs(ye)&&!FRe(ye)&&!AT(ye,d)&&Array.from(oe).every(ct=>!AT(Ce,ct)))return;if(Cu(ye)&&d){const ct=ye.clientWidth>0&&ye.scrollWidth>ye.clientWidth,_t=ye.clientHeight>0&&ye.scrollHeight>ye.clientHeight;let Nt=_t&&J.offsetX>ye.clientWidth;if(_t&&Pf(ye).direction==="rtl"&&(Nt=J.offsetX<=ye.offsetWidth-ye.clientWidth),Nt||ct&&J.offsetY>ye.clientHeight)return}const it=(le=p.current.floatingContext)==null?void 0:le.nodeId,Se=x&&KU(x.nodesRef.current,it).some(ct=>{var _t;return ZU(J,(_t=ct.context)==null?void 0:_t.elements.floating)});if(ZU(J,d)||ZU(J,l)||Se)return;const Oe=x?KU(x.nodesRef.current,it):[];if(Oe.length>0){let ct=!0;if(Oe.forEach(_t=>{var Nt;if((Nt=_t.context)!=null&&Nt.open&&!_t.context.dataRef.current.__outsidePressBubbles){ct=!1;return}}),!ct)return}i(!1,J,"outside-press")}),ue=O2(J=>{var le;const me=()=>{var be;fe(J),(be=cy(J))==null||be.removeEventListener(b,me)};(le=cy(J))==null||le.addEventListener(b,me)});return de.useEffect(()=>{if(!n||!g)return;p.current.__escapeKeyBubbles=B,p.current.__outsidePressBubbles=V;function J(be){i(!1,be,"ancestor-scroll")}const le=wg(d);v&&le.addEventListener("keydown",G?q:F,G),P&&le.addEventListener(b,j?ue:fe,j);let me=[];return S&&(Qs(l)&&(me=qh(l)),Qs(d)&&(me=me.concat(qh(d))),!Qs(o)&&o&&o.contextElement&&(me=me.concat(qh(o.contextElement)))),me=me.filter(be=>{var ye;return be!==((ye=le.defaultView)==null?void 0:ye.visualViewport)}),me.forEach(be=>{be.addEventListener("scroll",J,{passive:!0})}),()=>{v&&le.removeEventListener("keydown",G?q:F,G),P&&le.removeEventListener(b,j?ue:fe,j),me.forEach(be=>{be.removeEventListener("scroll",J)})}},[p,d,l,o,v,P,b,n,i,S,g,B,V,F,G,q,fe,j,ue]),de.useEffect(()=>{O.current=!1},[P,b]),de.useMemo(()=>g?{reference:{onKeyDown:F,[HDe[E]]:J=>{w&&i(!1,J.nativeEvent,"reference-press")}},floating:{onKeyDown:F,onMouseDown(){L.current=!0},onMouseUp(){L.current=!0},[$De[b]]:()=>{O.current=!0}}}:{},[g,w,b,E,i,F])}function YDe(t){const{open:e=!1,onOpenChange:n,elements:i}=t,o=Mpe(),l=de.useRef({}),[d]=de.useState(()=>BDe()),p=Oq()!=null,[g,v]=de.useState(i.reference),_=O2((E,S,M)=>{l.current.openEvent=E?S:void 0,d.emit("openchange",{open:E,event:S,reason:M,nested:p}),n==null||n(E,S,M)}),b=de.useMemo(()=>({setPositionReference:v}),[]),w=de.useMemo(()=>({reference:g||i.reference||null,floating:i.floating||null,domReference:i.reference}),[g,i.reference,i.floating]);return de.useMemo(()=>({dataRef:l,open:e,onOpenChange:_,elements:w,events:d,floatingId:o,refs:b}),[e,_,w,d,o,b])}function Lq(t){t===void 0&&(t={});const{nodeId:e}=t,n=YDe({...t,elements:{reference:null,floating:null,...t.elements}}),i=t.rootContext||n,o=i.elements,[l,d]=de.useState(null),[p,g]=de.useState(null),_=(o==null?void 0:o.reference)||l,b=de.useRef(null),w=Iq();Md(()=>{_&&(b.current=_)},[_]);const E=PDe({...t,elements:{...o,...p&&{reference:p}}}),S=de.useCallback(P=>{const O=Qs(P)?{getBoundingClientRect:()=>P.getBoundingClientRect(),contextElement:P}:P;g(O),E.refs.setReference(O)},[E.refs]),M=de.useCallback(P=>{(Qs(P)||P===null)&&(b.current=P,d(P)),(Qs(E.refs.reference.current)||E.refs.reference.current===null||P!==null&&!Qs(P))&&E.refs.setReference(P)},[E.refs]),k=de.useMemo(()=>({...E.refs,setReference:M,setPositionReference:S,domReference:b}),[E.refs,M,S]),x=de.useMemo(()=>({...E.elements,domReference:_}),[E.elements,_]),C=de.useMemo(()=>({...E,...i,refs:k,elements:x,nodeId:e}),[E,k,x,e,i]);return Md(()=>{i.dataRef.current.floatingContext=C;const P=w==null?void 0:w.nodesRef.current.find(O=>O.id===e);P&&(P.context=C)}),de.useMemo(()=>({...E,context:C,refs:k,elements:x}),[E,k,x,C])}function qDe(t,e){e===void 0&&(e={});const{open:n,onOpenChange:i,events:o,dataRef:l,elements:{domReference:d}}=t,{enabled:p=!0,visibleOnly:g=!0}=e,v=de.useRef(!1),_=de.useRef(),b=de.useRef(!0);return de.useEffect(()=>{if(!p)return;const w=Uc(d);function E(){!n&&Cu(d)&&d===Nre(wg(d))&&(v.current=!0)}function S(){b.current=!0}return w.addEventListener("blur",E),w.addEventListener("keydown",S,!0),()=>{w.removeEventListener("blur",E),w.removeEventListener("keydown",S,!0)}},[d,n,p]),de.useEffect(()=>{if(!p)return;function w(E){let{reason:S}=E;(S==="reference-press"||S==="escape-key")&&(v.current=!0)}return o.on("openchange",w),()=>{o.off("openchange",w)}},[o,p]),de.useEffect(()=>()=>{clearTimeout(_.current)},[]),de.useMemo(()=>p?{reference:{onPointerDown(w){NRe(w.nativeEvent)||(b.current=!1)},onMouseLeave(){v.current=!1},onFocus(w){if(v.current)return;const E=cy(w.nativeEvent);if(g&&Qs(E))try{if(LRe()&&zRe())throw Error();if(!E.matches(":focus-visible"))return}catch{if(!b.current&&!GRe(E))return}i(!0,w.nativeEvent,"focus")},onBlur(w){v.current=!1;const E=w.relatedTarget,S=Qs(E)&&E.hasAttribute(Nq("focus-guard"))&&E.getAttribute("data-type")==="outside";_.current=window.setTimeout(()=>{var M;const k=Nre(d?d.ownerDocument:document);!E&&k===d||AT((M=l.current.floatingContext)==null?void 0:M.refs.floating.current,k)||AT(d,k)||S||i(!1,w.nativeEvent,"focus")})}}}:{},[p,g,l,d,i])}const Xre="active",Zre="selected";function JU(t,e,n){const i=new Map,o=n==="item";let l=t;if(o&&t){const{[Xre]:d,[Zre]:p,...g}=t;l=g}return{...n==="floating"&&{tabIndex:-1},...l,...e.map(d=>{const p=d?d[n]:null;return typeof p=="function"?t?p(t):null:p}).concat(t).reduce((d,p)=>(p&&Object.entries(p).forEach(g=>{let[v,_]=g;if(!(o&&[Xre,Zre].includes(v)))if(v.indexOf("on")===0){if(i.has(v)||i.set(v,[]),typeof _=="function"){var b;(b=i.get(v))==null||b.push(_),d[v]=function(){for(var w,E=arguments.length,S=new Array(E),M=0;M<E;M++)S[M]=arguments[M];return(w=i.get(v))==null?void 0:w.map(k=>k(...S)).find(k=>k!==void 0)}}}else d[v]=_}),d),{})}}function XDe(t){t===void 0&&(t=[]);const e=t,n=de.useCallback(l=>JU(l,t,"reference"),e),i=de.useCallback(l=>JU(l,t,"floating"),e),o=de.useCallback(l=>JU(l,t,"item"),t.map(l=>l==null?void 0:l.item));return de.useMemo(()=>({getReferenceProps:n,getFloatingProps:i,getItemProps:o}),[n,i,o])}const ZDe=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function QDe(t,e){var n;e===void 0&&(e={});const{open:i,floatingId:o}=t,{enabled:l=!0,role:d="dialog"}=e,p=(n=ZDe.get(d))!=null?n:d,g=Mpe(),_=Oq()!=null;return de.useMemo(()=>{if(!l)return{};const b={id:o,...p&&{role:p}};return p==="tooltip"||d==="label"?{reference:{["aria-"+(d==="label"?"labelledby":"describedby")]:i?o:void 0},floating:b}:{reference:{"aria-expanded":i?"true":"false","aria-haspopup":p==="alertdialog"?"dialog":p,"aria-controls":i?o:void 0,...p==="listbox"&&{role:"combobox"},...p==="menu"&&{id:g},...p==="menu"&&_&&{role:"menuitem"},...d==="select"&&{"aria-autocomplete":"none"},...d==="combobox"&&{"aria-autocomplete":"list"}},floating:{...b,...p==="menu"&&{"aria-labelledby":g}},item(w){let{active:E,selected:S}=w;const M={role:"option",...E&&{id:o+"-option"}};switch(d){case"select":return{...M,"aria-selected":E&&S};case"combobox":return{...M,...E&&{"aria-selected":!0}}}return{}}}},[l,d,p,i,o,g,_])}function Ppe(t,e){if(t==="rtl"&&(e.includes("right")||e.includes("left"))){const[n,i]=e.split("-"),o=n==="right"?"left":"right";return i===void 0?o:`${o}-${i}`}return e}function Qre(t,e,n,i){return t==="center"||i==="center"?{top:e}:t==="end"?{bottom:n}:t==="start"?{top:n}:{}}function Kre(t,e,n,i,o){return t==="center"||i==="center"?{left:e}:t==="end"?{[o==="ltr"?"right":"left"]:n}:t==="start"?{[o==="ltr"?"left":"right"]:n}:{}}const KDe={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function JDe({position:t,arrowSize:e,arrowOffset:n,arrowRadius:i,arrowPosition:o,arrowX:l,arrowY:d,dir:p}){const[g,v="center"]=t.split("-"),_={width:yt(e),height:yt(e),transform:"rotate(45deg)",position:"absolute",[KDe[g]]:yt(i)},b=yt(-e/2);return g==="left"?{..._,...Qre(v,d,n,o),right:b,borderLeftColor:"transparent",borderBottomColor:"transparent"}:g==="right"?{..._,...Qre(v,d,n,o),left:b,borderRightColor:"transparent",borderTopColor:"transparent"}:g==="top"?{..._,...Kre(v,l,n,o,p),bottom:b,borderTopColor:"transparent",borderLeftColor:"transparent"}:g==="bottom"?{..._,...Kre(v,l,n,o,p),top:b,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const zq=de.forwardRef(({position:t,arrowSize:e,arrowOffset:n,arrowRadius:i,arrowPosition:o,visible:l,arrowX:d,arrowY:p,style:g,...v},_)=>{const{dir:b}=av();return l?Y.jsx("div",{...v,ref:_,style:{...g,...JDe({position:t,arrowSize:e,arrowOffset:n,arrowRadius:i,arrowPosition:o,dir:b,arrowX:d,arrowY:p})}}):null});zq.displayName="@mantine/core/FloatingArrow";const[eOe,Rpe]=Hc("Popover component was not found in the tree");function HI({children:t,active:e=!0,refProp:n="ref"}){const i=HPe(e),o=Po(i,t==null?void 0:t.ref);return Em(t)?de.cloneElement(t,{[n]:o}):t}function Dpe(t){return Y.jsx(wq,{tabIndex:-1,"data-autofocus":!0,...t})}HI.displayName="@mantine/core/FocusTrap";Dpe.displayName="@mantine/core/FocusTrapInitialFocus";HI.InitialFocus=Dpe;function tOe(t){const e=document.createElement("div");return e.setAttribute("data-portal","true"),typeof t.className=="string"&&e.classList.add(...t.className.split(" ").filter(Boolean)),typeof t.style=="object"&&Object.assign(e.style,t.style),typeof t.id=="string"&&e.setAttribute("id",t.id),e}const nOe={},Ope=de.forwardRef((t,e)=>{const{children:n,target:i,...o}=Dt("Portal",nOe,t),[l,d]=de.useState(!1),p=de.useRef(null);return ov(()=>(d(!0),p.current=i?typeof i=="string"?document.querySelector(i):i:tOe(o),UI(e,p.current),!i&&p.current&&document.body.appendChild(p.current),()=>{!i&&p.current&&document.body.removeChild(p.current)}),[i]),!l||!p.current?null:p6.createPortal(Y.jsx(Y.Fragment,{children:n}),p.current)});Ope.displayName="@mantine/core/Portal";function _6({withinPortal:t=!0,children:e,...n}){return t?Y.jsx(Ope,{...n,children:e}):Y.jsx(Y.Fragment,{children:e})}_6.displayName="@mantine/core/OptionalPortal";const o3=t=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${yt(t==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),P8={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${yt(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${yt(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${yt(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${yt(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${yt(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${yt(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${yt(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${yt(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...o3("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...o3("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...o3("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...o3("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...o3("top"),common:{transformOrigin:"top right"}}},Jre={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function rOe({transition:t,state:e,duration:n,timingFunction:i}){const o={transitionDuration:`${n}ms`,transitionTimingFunction:i};return typeof t=="string"?t in P8?{transitionProperty:P8[t].transitionProperty,...o,...P8[t].common,...P8[t][Jre[e]]}:{}:{transitionProperty:t.transitionProperty,...o,...t.common,...t[Jre[e]]}}function iOe({duration:t,exitDuration:e,timingFunction:n,mounted:i,onEnter:o,onExit:l,onEntered:d,onExited:p}){const g=ec(),v=dq(),_=g.respectReducedMotion?v:!1,[b,w]=de.useState(_?0:t),[E,S]=de.useState(i?"entered":"exited"),M=de.useRef(-1),k=de.useRef(-1),x=C=>{const P=C?o:l,O=C?d:p;window.clearTimeout(M.current);const L=_?0:C?t:e;w(L),L===0?(typeof P=="function"&&P(),typeof O=="function"&&O(),S(C?"entered":"exited")):k.current=requestAnimationFrame(()=>{GCe.flushSync(()=>{S(C?"pre-entering":"pre-exiting")}),k.current=requestAnimationFrame(()=>{typeof P=="function"&&P(),S(C?"entering":"exiting"),M.current=window.setTimeout(()=>{typeof O=="function"&&O(),S(C?"entered":"exited")},L)})})};return ku(()=>{x(i)},[i]),de.useEffect(()=>()=>{window.clearTimeout(M.current),cancelAnimationFrame(k.current)},[]),{transitionDuration:b,transitionStatus:E,transitionTimingFunction:n||"ease"}}function xm({keepMounted:t,transition:e="fade",duration:n=250,exitDuration:i=n,mounted:o,children:l,timingFunction:d="ease",onExit:p,onEntered:g,onEnter:v,onExited:_}){const{transitionDuration:b,transitionStatus:w,transitionTimingFunction:E}=iOe({mounted:o,exitDuration:i,duration:n,timingFunction:d,onExit:p,onEntered:g,onEnter:v,onExited:_});return b===0?o?Y.jsx(Y.Fragment,{children:l({})}):t?l({display:"none"}):null:w==="exited"?t?l({display:"none"}):null:Y.jsx(Y.Fragment,{children:l(rOe({transition:e,duration:b,state:w,timingFunction:E}))})}xm.displayName="@mantine/core/Transition";var Ipe={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const sOe={},Bq=pn((t,e)=>{var k,x,C,P;const n=Dt("PopoverDropdown",sOe,t),{className:i,style:o,vars:l,children:d,onKeyDownCapture:p,variant:g,classNames:v,styles:_,...b}=n,w=Rpe(),E=Bhe({opened:w.opened,shouldReturnFocus:w.returnFocus}),S=w.withRoles?{"aria-labelledby":w.getTargetId(),id:w.getDropdownId(),role:"dialog",tabIndex:-1}:{},M=Po(e,w.floating);return w.disabled?null:Y.jsx(_6,{...w.portalProps,withinPortal:w.withinPortal,children:Y.jsx(xm,{mounted:w.opened,...w.transitionProps,transition:((k=w.transitionProps)==null?void 0:k.transition)||"fade",duration:((x=w.transitionProps)==null?void 0:x.duration)??150,keepMounted:w.keepMounted,exitDuration:typeof((C=w.transitionProps)==null?void 0:C.exitDuration)=="number"?w.transitionProps.exitDuration:(P=w.transitionProps)==null?void 0:P.duration,children:O=>Y.jsx(HI,{active:w.trapFocus,children:Y.jsxs(Xt,{...S,...b,variant:g,ref:M,onKeyDownCapture:DPe(w.onClose,{active:w.closeOnEscape,onTrigger:E,onKeyDown:p}),"data-position":w.placement,...w.getStyles("dropdown",{className:i,props:n,classNames:v,styles:_,style:[{...O,zIndex:w.zIndex,top:w.y??0,left:w.x??0,width:w.width==="target"?void 0:yt(w.width)},o]}),children:[d,Y.jsx(zq,{ref:w.arrowRef,arrowX:w.arrowX,arrowY:w.arrowY,visible:w.withArrow,position:w.placement,arrowSize:w.arrowSize,arrowRadius:w.arrowRadius,arrowOffset:w.arrowOffset,arrowPosition:w.arrowPosition,...w.getStyles("arrow",{props:n,classNames:v,styles:_})})]})})})})});Bq.classes=Ipe;Bq.displayName="@mantine/core/PopoverDropdown";const oOe={refProp:"ref",popupType:"dialog"},Npe=pn((t,e)=>{const{children:n,refProp:i,popupType:o,...l}=Dt("PopoverTarget",oOe,t);if(!Em(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const d=l,p=Rpe(),g=Po(p.reference,n.ref,e),v=p.withRoles?{"aria-haspopup":o,"aria-expanded":p.opened,"aria-controls":p.getDropdownId(),id:p.getTargetId()}:{};return de.cloneElement(n,{...d,...v,...p.targetProps,className:Wo(p.targetProps.className,d.className,n.props.className),[i]:g,...p.controlled?null:{onClick:p.onToggle}})});Npe.displayName="@mantine/core/PopoverTarget";function Lpe({opened:t,floating:e,position:n,positionDependencies:i}){const[o,l]=de.useState(0);de.useEffect(()=>{if(e.refs.reference.current&&e.refs.floating.current)return wDe(e.refs.reference.current,e.refs.floating.current,e.update)},[e.refs.reference.current,e.refs.floating.current,t,o,n]),ku(()=>{e.update()},i),ku(()=>{l(d=>d+1)},[t])}function aOe(t){if(t===void 0)return{shift:!0,flip:!0};const e={...t};return t.shift===void 0&&(e.shift=!0),t.flip===void 0&&(e.flip=!0),e}function lOe(t,e){const n=aOe(t.middlewares),i=[Spe(t.offset)];return n.shift&&i.push(Dq(typeof n.shift=="boolean"?{limiter:jre(),padding:5}:{limiter:jre(),padding:5,...n.shift})),n.flip&&i.push(typeof n.flip=="boolean"?wH():wH(n.flip)),n.inline&&i.push(typeof n.inline=="boolean"?EH():EH(n.inline)),i.push(Tpe({element:t.arrowRef,padding:t.arrowOffset})),(n.size||t.width==="target")&&i.push(DDe({...typeof n.size=="boolean"?{}:n.size,apply({rects:o,availableWidth:l,availableHeight:d}){var v;const g=((v=e().refs.floating.current)==null?void 0:v.style)??{};n.size&&Object.assign(g,{maxWidth:`${l}px`,maxHeight:`${d}px`}),t.width==="target"&&Object.assign(g,{width:`${o.reference.width}px`})}})),i}function cOe(t){const[e,n]=Cl({value:t.opened,defaultValue:t.defaultOpened,finalValue:!1,onChange:t.onChange}),i=()=>{var d;e&&((d=t.onClose)==null||d.call(t),n(!1))},o=()=>{var d,p;e?((d=t.onClose)==null||d.call(t),n(!1)):((p=t.onOpen)==null||p.call(t),n(!0))},l=Lq({strategy:t.strategy,placement:t.position,middleware:lOe(t,()=>l)});return Lpe({opened:t.opened,position:t.position,positionDependencies:t.positionDependencies||[],floating:l}),ku(()=>{var d;(d=t.onPositionChange)==null||d.call(t,l.placement)},[l.placement]),ku(()=>{var d,p;t.opened?(p=t.onOpen)==null||p.call(t):(d=t.onClose)==null||d.call(t)},[t.opened]),{floating:l,controlled:typeof t.opened=="boolean",opened:e,onClose:i,onToggle:o}}const uOe={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Sm("popover"),__staticSelector:"Popover",width:"max-content"},fOe=(t,{radius:e,shadow:n})=>({dropdown:{"--popover-radius":e===void 0?void 0:fa(e),"--popover-shadow":cq(n)}});function Fc(t){var Mt,Ot,It,Zt,ke,he;const e=Dt("Popover",uOe,t),{children:n,position:i,offset:o,onPositionChange:l,positionDependencies:d,opened:p,transitionProps:g,width:v,middlewares:_,withArrow:b,arrowSize:w,arrowOffset:E,arrowRadius:S,arrowPosition:M,unstyled:k,classNames:x,styles:C,closeOnClickOutside:P,withinPortal:O,portalProps:L,closeOnEscape:B,clickOutsideEvents:V,trapFocus:G,onClose:j,onOpen:F,onChange:q,zIndex:fe,radius:ue,shadow:J,id:le,defaultOpened:me,__staticSelector:be,withRoles:ye,disabled:pe,returnFocus:oe,variant:Ce,keepMounted:it,vars:Se,floatingStrategy:Oe,...ct}=e,_t=er({name:be,props:e,classes:Ipe,classNames:x,styles:C,unstyled:k,rootSelector:"dropdown",vars:Se,varsResolver:fOe}),Nt=de.useRef(null),[Je,ot]=de.useState(null),[fn,Ht]=de.useState(null),{dir:Re}=av(),Lt=B0(le),mt=cOe({middlewares:_,width:v,position:Ppe(Re,i),offset:typeof o=="number"?o+(b?w/2:0):o,arrowRef:Nt,arrowOffset:E,onPositionChange:l,positionDependencies:d,opened:p,defaultOpened:me,onChange:q,onOpen:F,onClose:j,strategy:Oe});NPe(()=>P&&mt.onClose(),V,[Je,fn]);const ht=de.useCallback(tt=>{ot(tt),mt.floating.refs.setReference(tt)},[mt.floating.refs.setReference]),at=de.useCallback(tt=>{Ht(tt),mt.floating.refs.setFloating(tt)},[mt.floating.refs.setFloating]);return Y.jsx(eOe,{value:{returnFocus:oe,disabled:pe,controlled:mt.controlled,reference:ht,floating:at,x:mt.floating.x,y:mt.floating.y,arrowX:(It=(Ot=(Mt=mt.floating)==null?void 0:Mt.middlewareData)==null?void 0:Ot.arrow)==null?void 0:It.x,arrowY:(he=(ke=(Zt=mt.floating)==null?void 0:Zt.middlewareData)==null?void 0:ke.arrow)==null?void 0:he.y,opened:mt.opened,arrowRef:Nt,transitionProps:g,width:v,withArrow:b,arrowSize:w,arrowOffset:E,arrowRadius:S,arrowPosition:M,placement:mt.floating.placement,trapFocus:G,withinPortal:O,portalProps:L,zIndex:fe,radius:ue,shadow:J,closeOnEscape:B,onClose:mt.onClose,onToggle:mt.onToggle,getTargetId:()=>`${Lt}-target`,getDropdownId:()=>`${Lt}-dropdown`,withRoles:ye,targetProps:ct,__staticSelector:be,classNames:x,styles:C,unstyled:k,variant:Ce,keepMounted:it,getStyles:_t},children:n})}Fc.Target=Npe;Fc.Dropdown=Bq;Fc.displayName="@mantine/core/Popover";Fc.extend=t=>t;var _0={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const dOe=de.forwardRef(({className:t,...e},n)=>Y.jsxs(Xt,{component:"span",className:Wo(_0.barsLoader,t),...e,ref:n,children:[Y.jsx("span",{className:_0.bar}),Y.jsx("span",{className:_0.bar}),Y.jsx("span",{className:_0.bar})]})),hOe=de.forwardRef(({className:t,...e},n)=>Y.jsxs(Xt,{component:"span",className:Wo(_0.dotsLoader,t),...e,ref:n,children:[Y.jsx("span",{className:_0.dot}),Y.jsx("span",{className:_0.dot}),Y.jsx("span",{className:_0.dot})]})),pOe=de.forwardRef(({className:t,...e},n)=>Y.jsx(Xt,{component:"span",className:Wo(_0.ovalLoader,t),...e,ref:n})),zpe={bars:dOe,oval:pOe,dots:hOe},mOe={loaders:zpe,type:"oval"},gOe=(t,{size:e,color:n})=>({root:{"--loader-size":mi(e,"loader-size"),"--loader-color":n?qa(n,t):void 0}}),bp=pn((t,e)=>{const n=Dt("Loader",mOe,t),{size:i,color:o,type:l,vars:d,className:p,style:g,classNames:v,styles:_,unstyled:b,loaders:w,variant:E,children:S,...M}=n,k=er({name:"Loader",props:n,classes:_0,className:p,style:g,classNames:v,styles:_,unstyled:b,vars:d,varsResolver:gOe});return S?Y.jsx(Xt,{...k("root"),ref:e,...M,children:S}):Y.jsx(Xt,{...k("root"),ref:e,component:w[l],variant:E,size:i,...M})});bp.defaultLoaders=zpe;bp.classes=_0;bp.displayName="@mantine/core/Loader";var $I={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const eie={orientation:"horizontal"},vOe=(t,{borderWidth:e})=>({group:{"--ai-border-width":yt(e)}}),Uq=pn((t,e)=>{const n=Dt("ActionIconGroup",eie,t),{className:i,style:o,classNames:l,styles:d,unstyled:p,orientation:g,vars:v,borderWidth:_,variant:b,mod:w,...E}=Dt("ActionIconGroup",eie,t),S=er({name:"ActionIconGroup",props:n,classes:$I,className:i,style:o,classNames:l,styles:d,unstyled:p,vars:v,varsResolver:vOe,rootSelector:"group"});return Y.jsx(Xt,{...S("group"),ref:e,variant:b,mod:[{"data-orientation":g},w],role:"group",...E})});Uq.classes=$I;Uq.displayName="@mantine/core/ActionIconGroup";const _Oe={},yOe=(t,{size:e,radius:n,variant:i,gradient:o,color:l,autoContrast:d})=>{const p=t.variantColorResolver({color:l||t.primaryColor,theme:t,gradient:o,variant:i||"filled",autoContrast:d});return{root:{"--ai-size":mi(e,"ai-size"),"--ai-radius":n===void 0?void 0:fa(n),"--ai-bg":l||i?p.background:void 0,"--ai-hover":l||i?p.hover:void 0,"--ai-hover-color":l||i?p.hoverColor:void 0,"--ai-color":p.color,"--ai-bd":l||i?p.border:void 0}}},Gh=tc((t,e)=>{const n=Dt("ActionIcon",_Oe,t),{className:i,unstyled:o,variant:l,classNames:d,styles:p,style:g,loading:v,loaderProps:_,size:b,color:w,radius:E,__staticSelector:S,gradient:M,vars:k,children:x,disabled:C,"data-disabled":P,autoContrast:O,mod:L,...B}=n,V=er({name:["ActionIcon",S],props:n,className:i,style:g,classes:$I,classNames:d,styles:p,unstyled:o,vars:k,varsResolver:yOe});return Y.jsxs(R0,{...V("root",{active:!C&&!v&&!P}),...B,unstyled:o,variant:l,size:b,disabled:C||v,ref:e,mod:[{loading:v,disabled:C||P},L],children:[Y.jsx(xm,{mounted:!!v,transition:"slide-down",duration:150,children:G=>Y.jsx(Xt,{component:"span",...V("loader",{style:G}),"aria-hidden":!0,children:Y.jsx(bp,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",..._})})}),Y.jsx(Xt,{component:"span",mod:{loading:v},...V("icon"),children:x})]})});Gh.classes=$I;Gh.displayName="@mantine/core/ActionIcon";Gh.Group=Uq;const Bpe=de.forwardRef(({size:t="var(--cb-icon-size, 70%)",style:e,...n},i)=>Y.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:t,height:t},ref:i,...n,children:Y.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));Bpe.displayName="@mantine/core/CloseIcon";var Upe={root:"m_86a44da5","root--subtle":"m_220c80f2"};const bOe={variant:"subtle"},AOe=(t,{size:e,radius:n,iconSize:i})=>({root:{"--cb-size":mi(e,"cb-size"),"--cb-radius":n===void 0?void 0:fa(n),"--cb-icon-size":yt(i)}}),cv=tc((t,e)=>{const n=Dt("CloseButton",bOe,t),{iconSize:i,children:o,vars:l,radius:d,className:p,classNames:g,style:v,styles:_,unstyled:b,"data-disabled":w,disabled:E,variant:S,icon:M,mod:k,...x}=n,C=er({name:"CloseButton",props:n,className:p,style:v,classes:Upe,classNames:g,styles:_,unstyled:b,vars:l,varsResolver:AOe});return Y.jsxs(R0,{ref:e,...x,unstyled:b,variant:S,disabled:E,mod:[{disabled:E||w},k],...C("root",{variant:S,active:!E&&!w}),children:[M||Y.jsx(Bpe,{}),o]})});cv.classes=Upe;cv.displayName="@mantine/core/CloseButton";function wOe(t){return de.Children.toArray(t).filter(Boolean)}var Fpe={root:"m_4081bf90"};const EOe={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},SOe=(t,{grow:e,preventGrowOverflow:n,gap:i,align:o,justify:l,wrap:d},{childWidth:p})=>({root:{"--group-child-width":e&&n?p:void 0,"--group-gap":op(i),"--group-align":o,"--group-justify":l,"--group-wrap":d}}),Ap=pn((t,e)=>{const n=Dt("Group",EOe,t),{classNames:i,className:o,style:l,styles:d,unstyled:p,children:g,gap:v,align:_,justify:b,wrap:w,grow:E,preventGrowOverflow:S,vars:M,variant:k,__size:x,mod:C,...P}=n,O=wOe(g),L=O.length,B=op(v??"md"),G={childWidth:`calc(${100/L}% - (${B} - ${B} / ${L}))`},j=er({name:"Group",props:n,stylesCtx:G,className:o,style:l,classes:Fpe,classNames:i,styles:d,unstyled:p,vars:M,varsResolver:SOe});return Y.jsx(Xt,{...j("root"),ref:e,variant:k,mod:[{grow:E},C],size:x,...P,children:O})});Ap.classes=Fpe;Ap.displayName="@mantine/core/Group";var Vpe={root:"m_9814e45f"};const TOe={zIndex:Sm("modal")},xOe=(t,{gradient:e,color:n,backgroundOpacity:i,blur:o,radius:l,zIndex:d})=>({root:{"--overlay-bg":e||(n!==void 0||i!==void 0)&&cf(n||"#000",i??.6)||void 0,"--overlay-filter":o?`blur(${yt(o)})`:void 0,"--overlay-radius":l===void 0?void 0:fa(l),"--overlay-z-index":d==null?void 0:d.toString()}}),Fq=tc((t,e)=>{const n=Dt("Overlay",TOe,t),{classNames:i,className:o,style:l,styles:d,unstyled:p,vars:g,fixed:v,center:_,children:b,radius:w,zIndex:E,gradient:S,blur:M,color:k,backgroundOpacity:x,mod:C,...P}=n,O=er({name:"Overlay",props:n,classes:Vpe,className:o,style:l,classNames:i,styles:d,unstyled:p,vars:g,varsResolver:xOe});return Y.jsx(Xt,{ref:e,...O("root"),mod:[{center:_,fixed:v},C],...P,children:b})});Fq.classes=Vpe;Fq.displayName="@mantine/core/Overlay";const[MOe,wp]=Hc("ModalBase component was not found in tree");function kOe({opened:t,transitionDuration:e}){const[n,i]=de.useState(t),o=de.useRef(),d=dq()?0:e;return de.useEffect(()=>(t?(i(!0),window.clearTimeout(o.current)):d===0?i(!1):o.current=window.setTimeout(()=>i(!1),d),()=>window.clearTimeout(o.current)),[t,d]),n}function COe({id:t,transitionProps:e,opened:n,trapFocus:i,closeOnEscape:o,onClose:l,returnFocus:d}){const p=B0(t),[g,v]=de.useState(!1),[_,b]=de.useState(!1),w=typeof(e==null?void 0:e.duration)=="number"?e==null?void 0:e.duration:200,E=kOe({opened:n,transitionDuration:w});return Ghe("keydown",S=>{var M;S.key==="Escape"&&o&&n&&((M=S.target)==null?void 0:M.getAttribute("data-mantine-stop-propagation"))!=="true"&&l()},{capture:!0}),Bhe({opened:n,shouldReturnFocus:i&&d}),{_id:p,titleMounted:g,bodyMounted:_,shouldLockScroll:E,setTitleMounted:v,setBodyMounted:b}}const POe=de.forwardRef(({keepMounted:t,opened:e,onClose:n,id:i,transitionProps:o,trapFocus:l,closeOnEscape:d,returnFocus:p,closeOnClickOutside:g,withinPortal:v,portalProps:_,lockScroll:b,children:w,zIndex:E,shadow:S,padding:M,__vars:k,unstyled:x,removeScrollProps:C,...P},O)=>{const{_id:L,titleMounted:B,bodyMounted:V,shouldLockScroll:G,setTitleMounted:j,setBodyMounted:F}=COe({id:i,transitionProps:o,opened:e,trapFocus:l,closeOnEscape:d,onClose:n,returnFocus:p});return Y.jsx(_6,{..._,withinPortal:v,children:Y.jsx(MOe,{value:{opened:e,onClose:n,closeOnClickOutside:g,transitionProps:{...o,keepMounted:t},getTitleId:()=>`${L}-title`,getBodyId:()=>`${L}-body`,titleMounted:B,bodyMounted:V,setTitleMounted:j,setBodyMounted:F,trapFocus:l,closeOnEscape:d,zIndex:E,unstyled:x},children:Y.jsx(II,{enabled:G&&b,...C,children:Y.jsx(Xt,{ref:O,...P,__vars:{...k,"--mb-z-index":(E||Sm("modal")).toString(),"--mb-shadow":cq(S),"--mb-padding":op(M)},children:w})})})})});function ROe(){const t=wp();return de.useEffect(()=>(t.setBodyMounted(!0),()=>t.setBodyMounted(!1)),[]),t.getBodyId()}var zb={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const Gpe=de.forwardRef(({className:t,...e},n)=>{const i=ROe(),o=wp();return Y.jsx(Xt,{ref:n,...e,id:i,className:Wo({[zb.body]:!o.unstyled},t)})});Gpe.displayName="@mantine/core/ModalBaseBody";const jpe=de.forwardRef(({className:t,onClick:e,...n},i)=>{const o=wp();return Y.jsx(cv,{ref:i,...n,onClick:l=>{o.onClose(),e==null||e(l)},className:Wo({[zb.close]:!o.unstyled},t),unstyled:o.unstyled})});jpe.displayName="@mantine/core/ModalBaseCloseButton";const DOe=de.forwardRef(({transitionProps:t,className:e,innerProps:n,onKeyDown:i,style:o,...l},d)=>{const p=wp();return Y.jsx(xm,{mounted:p.opened,transition:"pop",...p.transitionProps,...t,children:g=>Y.jsx("div",{...n,className:Wo({[zb.inner]:!p.unstyled},n.className),children:Y.jsx(HI,{active:p.opened&&p.trapFocus,children:Y.jsx(S0,{...l,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":p.bodyMounted?p.getBodyId():void 0,"aria-labelledby":p.titleMounted?p.getTitleId():void 0,ref:d,style:[o,g],className:Wo({[zb.content]:!p.unstyled},e),unstyled:p.unstyled,children:l.children})})})})}),Hpe=de.forwardRef(({className:t,...e},n)=>{const i=wp();return Y.jsx(Xt,{component:"header",ref:n,className:Wo({[zb.header]:!i.unstyled},t),...e})});Hpe.displayName="@mantine/core/ModalBaseHeader";const OOe={duration:200,timingFunction:"ease",transition:"fade"};function IOe(t){const e=wp();return{...OOe,...e.transitionProps,...t}}const $pe=de.forwardRef(({onClick:t,transitionProps:e,style:n,...i},o)=>{const l=wp(),d=IOe(e);return Y.jsx(xm,{mounted:l.opened,...d,transition:"fade",children:p=>Y.jsx(Fq,{ref:o,fixed:!0,style:[n,p],zIndex:l.zIndex,unstyled:l.unstyled,onClick:g=>{t==null||t(g),l.closeOnClickOutside&&l.onClose()},...i})})});$pe.displayName="@mantine/core/ModalBaseOverlay";function NOe(){const t=wp();return de.useEffect(()=>(t.setTitleMounted(!0),()=>t.setTitleMounted(!1)),[]),t.getTitleId()}const Wpe=de.forwardRef(({className:t,...e},n)=>{const i=NOe(),o=wp();return Y.jsx(Xt,{component:"h2",ref:n,className:Wo({[zb.title]:!o.unstyled},t),...e,id:i})});Wpe.displayName="@mantine/core/ModalBaseTitle";function LOe({children:t}){return Y.jsx(Y.Fragment,{children:t})}const[zOe,V4]=LI({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Df={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const tie={},BOe=(t,{size:e})=>({description:{"--input-description-size":e===void 0?void 0:`calc(${Bc(e)} - ${yt(2)})`}}),WI=pn((t,e)=>{const n=Dt("InputDescription",tie,t),{classNames:i,className:o,style:l,styles:d,unstyled:p,vars:g,size:v,__staticSelector:_,__inheritStyles:b=!0,variant:w,...E}=Dt("InputDescription",tie,n),S=V4(),M=er({name:["InputWrapper",_],props:n,classes:Df,className:o,style:l,classNames:i,styles:d,unstyled:p,rootSelector:"description",vars:g,varsResolver:BOe}),k=b&&(S==null?void 0:S.getStyles)||M;return Y.jsx(Xt,{component:"p",ref:e,variant:w,size:v,...k("description",S!=null&&S.getStyles?{className:o,style:l}:void 0),...E})});WI.classes=Df;WI.displayName="@mantine/core/InputDescription";const UOe={},FOe=(t,{size:e})=>({error:{"--input-error-size":e===void 0?void 0:`calc(${Bc(e)} - ${yt(2)})`}}),YI=pn((t,e)=>{const n=Dt("InputError",UOe,t),{classNames:i,className:o,style:l,styles:d,unstyled:p,vars:g,size:v,__staticSelector:_,__inheritStyles:b=!0,variant:w,...E}=n,S=er({name:["InputWrapper",_],props:n,classes:Df,className:o,style:l,classNames:i,styles:d,unstyled:p,rootSelector:"error",vars:g,varsResolver:FOe}),M=V4(),k=b&&(M==null?void 0:M.getStyles)||S;return Y.jsx(Xt,{component:"p",ref:e,variant:w,size:v,...k("error",M!=null&&M.getStyles?{className:o,style:l}:void 0),...E})});YI.classes=Df;YI.displayName="@mantine/core/InputError";const nie={labelElement:"label"},VOe=(t,{size:e})=>({label:{"--input-label-size":Bc(e),"--input-asterisk-color":void 0}}),qI=pn((t,e)=>{const n=Dt("InputLabel",nie,t),{classNames:i,className:o,style:l,styles:d,unstyled:p,vars:g,labelElement:v,size:_,required:b,htmlFor:w,onMouseDown:E,children:S,__staticSelector:M,variant:k,mod:x,...C}=Dt("InputLabel",nie,n),P=er({name:["InputWrapper",M],props:n,classes:Df,className:o,style:l,classNames:i,styles:d,unstyled:p,rootSelector:"label",vars:g,varsResolver:VOe}),O=V4(),L=(O==null?void 0:O.getStyles)||P;return Y.jsxs(Xt,{...L("label",O!=null&&O.getStyles?{className:o,style:l}:void 0),component:v,variant:k,size:_,ref:e,htmlFor:v==="label"?w:void 0,mod:[{required:b},x],onMouseDown:B=>{E==null||E(B),!B.defaultPrevented&&B.detail>1&&B.preventDefault()},...C,children:[S,b&&Y.jsx("span",{...L("required"),"aria-hidden":!0,children:" *"})]})});qI.classes=Df;qI.displayName="@mantine/core/InputLabel";const rie={},Vq=pn((t,e)=>{const n=Dt("InputPlaceholder",rie,t),{classNames:i,className:o,style:l,styles:d,unstyled:p,vars:g,__staticSelector:v,variant:_,error:b,mod:w,...E}=Dt("InputPlaceholder",rie,n),S=er({name:["InputPlaceholder",v],props:n,classes:Df,className:o,style:l,classNames:i,styles:d,unstyled:p,rootSelector:"placeholder"});return Y.jsx(Xt,{...S("placeholder"),mod:[{error:!!b},w],component:"span",variant:_,ref:e,...E})});Vq.classes=Df;Vq.displayName="@mantine/core/InputPlaceholder";function GOe(t,{hasDescription:e,hasError:n}){const i=t.findIndex(g=>g==="input"),o=t.slice(0,i),l=t.slice(i+1),d=e&&o.includes("description")||n&&o.includes("error");return{offsetBottom:e&&l.includes("description")||n&&l.includes("error"),offsetTop:d}}const jOe={labelElement:"label",inputContainer:t=>t,inputWrapperOrder:["label","description","input","error"]},HOe=(t,{size:e})=>({label:{"--input-label-size":Bc(e),"--input-asterisk-color":void 0},error:{"--input-error-size":e===void 0?void 0:`calc(${Bc(e)} - ${yt(2)})`},description:{"--input-description-size":e===void 0?void 0:`calc(${Bc(e)} - ${yt(2)})`}}),Gq=pn((t,e)=>{const n=Dt("InputWrapper",jOe,t),{classNames:i,className:o,style:l,styles:d,unstyled:p,vars:g,size:v,variant:_,__staticSelector:b,inputContainer:w,inputWrapperOrder:E,label:S,error:M,description:k,labelProps:x,descriptionProps:C,errorProps:P,labelElement:O,children:L,withAsterisk:B,id:V,required:G,__stylesApiProps:j,mod:F,...q}=n,fe=er({name:["InputWrapper",b],props:j||n,classes:Df,className:o,style:l,classNames:i,styles:d,unstyled:p,vars:g,varsResolver:HOe}),ue={size:v,variant:_,__staticSelector:b},J=B0(V),le=typeof B=="boolean"?B:G,me=(P==null?void 0:P.id)||`${J}-error`,be=(C==null?void 0:C.id)||`${J}-description`,ye=J,pe=!!M&&typeof M!="boolean",oe=!!k,Ce=`${pe?me:""} ${oe?be:""}`,it=Ce.trim().length>0?Ce.trim():void 0,Se=(x==null?void 0:x.id)||`${J}-label`,Oe=S&&Y.jsx(qI,{labelElement:O,id:Se,htmlFor:ye,required:le,...ue,...x,children:S},"label"),ct=oe&&Y.jsx(WI,{...C,...ue,size:(C==null?void 0:C.size)||ue.size,id:(C==null?void 0:C.id)||be,children:k},"description"),_t=Y.jsx(de.Fragment,{children:w(L)},"input"),Nt=pe&&de.createElement(YI,{...P,...ue,size:(P==null?void 0:P.size)||ue.size,key:"error",id:(P==null?void 0:P.id)||me},M),Je=E.map(ot=>{switch(ot){case"label":return Oe;case"input":return _t;case"description":return ct;case"error":return Nt;default:return null}});return Y.jsx(zOe,{value:{getStyles:fe,describedBy:it,inputId:ye,labelId:Se,...GOe(E,{hasDescription:oe,hasError:pe})},children:Y.jsx(Xt,{ref:e,variant:_,size:v,mod:[{error:!!M},F],...fe("root"),...q,children:Je})})});Gq.classes=Df;Gq.displayName="@mantine/core/InputWrapper";const $Oe={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},WOe=(t,e,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":mi(e.size,"input-height"),"--input-fz":Bc(e.size),"--input-radius":e.radius===void 0?void 0:fa(e.radius),"--input-left-section-width":e.leftSectionWidth!==void 0?yt(e.leftSectionWidth):void 0,"--input-right-section-width":e.rightSectionWidth!==void 0?yt(e.rightSectionWidth):void 0,"--input-padding-y":e.multiline?mi(e.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":e.leftSectionPointerEvents,"--input-right-section-pointer-events":e.rightSectionPointerEvents}}),la=tc((t,e)=>{const n=Dt("Input",$Oe,t),{classNames:i,className:o,style:l,styles:d,unstyled:p,required:g,__staticSelector:v,__stylesApiProps:_,size:b,wrapperProps:w,error:E,disabled:S,leftSection:M,leftSectionProps:k,leftSectionWidth:x,rightSection:C,rightSectionProps:P,rightSectionWidth:O,rightSectionPointerEvents:L,leftSectionPointerEvents:B,variant:V,vars:G,pointer:j,multiline:F,radius:q,id:fe,withAria:ue,withErrorStyles:J,mod:le,...me}=n,{styleProps:be,rest:ye}=g6(me),pe=V4(),oe={offsetBottom:pe==null?void 0:pe.offsetBottom,offsetTop:pe==null?void 0:pe.offsetTop},Ce=er({name:["Input",v],props:_||n,classes:Df,className:o,style:l,classNames:i,styles:d,unstyled:p,stylesCtx:oe,rootSelector:"wrapper",vars:G,varsResolver:WOe}),it=ue?{required:g,disabled:S,"aria-invalid":!!E,"aria-describedby":pe==null?void 0:pe.describedBy,id:(pe==null?void 0:pe.inputId)||fe}:{};return Y.jsxs(Xt,{...Ce("wrapper"),...be,...w,mod:[{error:!!E&&J,pointer:j,disabled:S,multiline:F,"data-with-right-section":!!C,"data-with-left-section":!!M},le],variant:V,size:b,children:[M&&Y.jsx("div",{...k,"data-position":"left",...Ce("section",{className:k==null?void 0:k.className,style:k==null?void 0:k.style}),children:M}),Y.jsx(Xt,{component:"input",...ye,...it,ref:e,required:g,mod:{disabled:S,error:!!E&&J},variant:V,...Ce("input")}),C&&Y.jsx("div",{...P,"data-position":"right",...Ce("section",{className:P==null?void 0:P.className,style:P==null?void 0:P.style}),children:C})]})});la.classes=Df;la.Wrapper=Gq;la.Label=qI;la.Error=YI;la.Description=WI;la.Placeholder=Vq;la.displayName="@mantine/core/Input";function Ype(t,e,n){const i=Dt(t,e,n),{label:o,description:l,error:d,required:p,classNames:g,styles:v,className:_,unstyled:b,__staticSelector:w,__stylesApiProps:E,errorProps:S,labelProps:M,descriptionProps:k,wrapperProps:x,id:C,size:P,style:O,inputContainer:L,inputWrapperOrder:B,withAsterisk:V,variant:G,vars:j,mod:F,...q}=i,{styleProps:fe,rest:ue}=g6(q),J={label:o,description:l,error:d,required:p,classNames:g,className:_,__staticSelector:w,__stylesApiProps:E||i,errorProps:S,labelProps:M,descriptionProps:k,unstyled:b,styles:v,size:P,style:O,inputContainer:L,inputWrapperOrder:B,withAsterisk:V,variant:G,id:C,mod:F,...x};return{...ue,classNames:g,styles:v,unstyled:b,wrapperProps:{...J,...fe},inputProps:{required:p,classNames:g,styles:v,unstyled:b,size:P,__staticSelector:w,__stylesApiProps:E||i,error:d,variant:G,id:C}}}const YOe={__staticSelector:"InputBase",withAria:!0},Nu=tc((t,e)=>{const{inputProps:n,wrapperProps:i,...o}=Ype("InputBase",YOe,t);return Y.jsx(la.Wrapper,{...i,children:Y.jsx(la,{...n,...o,ref:e})})});Nu.classes={...la.classes,...la.Wrapper.classes};Nu.displayName="@mantine/core/InputBase";const[qOe,jq]=Hc("Accordion component was not found in the tree");function Hq({style:t,size:e=16,...n}){return Y.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:yt(e),height:yt(e),display:"block"},...n,children:Y.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}Hq.displayName="@mantine/core/AccordionChevron";const[XOe,qpe]=Hc("Accordion.Item component was not found in the tree");var y6={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const ZOe={},$q=pn((t,e)=>{const{classNames:n,className:i,style:o,styles:l,vars:d,chevron:p,icon:g,onClick:v,onKeyDown:_,children:b,disabled:w,mod:E,...S}=Dt("AccordionControl",ZOe,t),{value:M}=qpe(),k=jq(),x=k.isItemActive(M),C=typeof k.order=="number",P=`h${k.order}`,O=Y.jsxs(R0,{...S,...k.getStyles("control",{className:i,classNames:n,style:o,styles:l,variant:k.variant}),unstyled:k.unstyled,mod:["accordion-control",{active:x,"chevron-position":k.chevronPosition,disabled:w},E],ref:e,onClick:L=>{v==null||v(L),k.onChange(M)},type:"button",disabled:w,"aria-expanded":x,"aria-controls":k.getRegionId(M),id:k.getControlId(M),onKeyDown:lq({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:k.loop,orientation:"vertical",onKeyDown:_}),children:[Y.jsx(Xt,{component:"span",mod:{rotate:!k.disableChevronRotation&&x,position:k.chevronPosition},...k.getStyles("chevron",{classNames:n,styles:l}),children:p||k.chevron}),Y.jsx("span",{...k.getStyles("label",{classNames:n,styles:l}),children:b}),g&&Y.jsx(Xt,{component:"span",mod:{"chevron-position":k.chevronPosition},...k.getStyles("icon",{classNames:n,styles:l}),children:g})]});return C?Y.jsx(P,{...k.getStyles("itemTitle",{classNames:n,styles:l}),children:O}):O});$q.displayName="@mantine/core/AccordionControl";$q.classes=y6;const QOe={},Wq=pn((t,e)=>{const{classNames:n,className:i,style:o,styles:l,vars:d,value:p,mod:g,...v}=Dt("AccordionItem",QOe,t),_=jq();return Y.jsx(XOe,{value:{value:p},children:Y.jsx(Xt,{ref:e,mod:[{active:_.isItemActive(p)},g],..._.getStyles("item",{className:i,classNames:n,styles:l,style:o,variant:_.variant}),...v})})});Wq.displayName="@mantine/core/AccordionItem";Wq.classes=y6;const KOe={},Yq=pn((t,e)=>{const{classNames:n,className:i,style:o,styles:l,vars:d,children:p,...g}=Dt("AccordionPanel",KOe,t),{value:v}=qpe(),_=jq();return Y.jsx(epe,{ref:e,..._.getStyles("panel",{className:i,classNames:n,style:o,styles:l}),...g,in:_.isItemActive(v),transitionDuration:_.transitionDuration??200,role:"region",id:_.getRegionId(v),"aria-labelledby":_.getControlId(v),children:Y.jsx("div",{..._.getStyles("content",{classNames:n,styles:l}),children:p})})});Yq.displayName="@mantine/core/AccordionPanel";Yq.classes=y6;const JOe={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:Y.jsx(Hq,{})},eIe=(t,{transitionDuration:e,chevronSize:n,radius:i})=>({root:{"--accordion-transition-duration":e===void 0?void 0:`${e}ms`,"--accordion-chevron-size":n===void 0?void 0:yt(n),"--accordion-radius":i===void 0?void 0:fa(i)}});function Su(t){const e=Dt("Accordion",JOe,t),{classNames:n,className:i,style:o,styles:l,unstyled:d,vars:p,children:g,multiple:v,value:_,defaultValue:b,onChange:w,id:E,loop:S,transitionDuration:M,disableChevronRotation:k,chevronPosition:x,chevronSize:C,order:P,chevron:O,variant:L,radius:B,...V}=e,G=B0(E),[j,F]=Cl({value:_,defaultValue:b,finalValue:v?[]:null,onChange:w}),q=J=>Array.isArray(j)?j.includes(J):J===j,fe=J=>{const le=Array.isArray(j)?j.includes(J)?j.filter(me=>me!==J):[...j,J]:J===j?null:J;F(le)},ue=er({name:"Accordion",classes:y6,props:e,className:i,style:o,classNames:n,styles:l,unstyled:d,vars:p,varsResolver:eIe});return Y.jsx(qOe,{value:{isItemActive:q,onChange:fe,getControlId:PO(`${G}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:PO(`${G}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:M,disableChevronRotation:k,chevronPosition:x,order:P,chevron:O,loop:S,getStyles:ue,variant:L,unstyled:d},children:Y.jsx(Xt,{...ue("root"),id:G,...V,variant:L,"data-accordion":!0,children:g})})}const tIe=t=>t;Su.extend=tIe;Su.classes=y6;Su.displayName="@mantine/core/Accordion";Su.Item=Wq;Su.Panel=Yq;Su.Control=$q;Su.Chevron=Hq;var Xpe={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const nIe={},rIe=(t,{radius:e,color:n,variant:i,autoContrast:o})=>{const l=t.variantColorResolver({color:n||t.primaryColor,theme:t,variant:i||"light",autoContrast:o});return{root:{"--alert-radius":e===void 0?void 0:fa(e),"--alert-bg":n||i?l.background:void 0,"--alert-color":l.color,"--alert-bd":n||i?l.border:void 0}}},qq=pn((t,e)=>{const n=Dt("Alert",nIe,t),{classNames:i,className:o,style:l,styles:d,unstyled:p,vars:g,radius:v,color:_,title:b,children:w,id:E,icon:S,withCloseButton:M,onClose:k,closeButtonLabel:x,variant:C,autoContrast:P,...O}=n,L=er({name:"Alert",classes:Xpe,props:n,className:o,style:l,classNames:i,styles:d,unstyled:p,vars:g,varsResolver:rIe}),B=B0(E),V=b&&`${B}-title`||void 0,G=`${B}-body`;return Y.jsx(Xt,{id:B,...L("root",{variant:C}),variant:C,ref:e,...O,role:"alert","aria-describedby":G,"aria-labelledby":V,children:Y.jsxs("div",{...L("wrapper"),children:[S&&Y.jsx("div",{...L("icon"),children:S}),Y.jsxs("div",{...L("body"),children:[b&&Y.jsx("div",{...L("title"),"data-with-close-button":M||void 0,children:Y.jsx("span",{id:V,...L("label"),children:b})}),w&&Y.jsx("div",{id:G,...L("message"),"data-variant":C,children:w})]}),M&&Y.jsx(cv,{...L("closeButton"),onClick:k,variant:"transparent",size:16,iconSize:16,"aria-label":x,unstyled:p})]})})});qq.classes=Xpe;qq.displayName="@mantine/core/Alert";var Zpe={root:"m_b6d8b162"};function iIe(t){if(t==="start")return"start";if(t==="end"||t)return"end"}const sIe={inherit:!1},oIe=(t,{variant:e,lineClamp:n,gradient:i,size:o,color:l})=>({root:{"--text-fz":Bc(o),"--text-lh":Nhe(o),"--text-gradient":e==="gradient"?mH(i,t):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":l?qa(l,t):void 0}}),cp=tc((t,e)=>{const n=Dt("Text",sIe,t),{lineClamp:i,truncate:o,inline:l,inherit:d,gradient:p,span:g,__staticSelector:v,vars:_,className:b,style:w,classNames:E,styles:S,unstyled:M,variant:k,mod:x,size:C,...P}=n,O=er({name:["Text",v],props:n,classes:Zpe,className:b,style:w,classNames:E,styles:S,unstyled:M,vars:_,varsResolver:oIe});return Y.jsx(Xt,{...O("root",{focusable:!0}),ref:e,component:g?"span":"p",variant:k,mod:[{"data-truncate":iIe(o),"data-line-clamp":typeof i=="number","data-inline":l,"data-inherit":d},x],size:C,...P})});cp.classes=Zpe;cp.displayName="@mantine/core/Text";var Qpe={root:"m_849cf0da"};const aIe={underline:"hover"},Lg=tc((t,e)=>{const{underline:n,className:i,unstyled:o,mod:l,...d}=Dt("Anchor",aIe,t);return Y.jsx(cp,{component:"a",ref:e,className:Wo({[Qpe.root]:!o},i),...d,mod:[{underline:n},l],__staticSelector:"Anchor",unstyled:o})});Lg.classes=Qpe;Lg.displayName="@mantine/core/Anchor";const[lIe,G4]=Hc("AppShell was not found in tree");var Mm={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const cIe={},Xq=pn((t,e)=>{const n=Dt("AppShellAside",cIe,t),{classNames:i,className:o,style:l,styles:d,unstyled:p,vars:g,withBorder:v,zIndex:_,mod:b,...w}=n,E=G4();return E.disabled?null:Y.jsx(Xt,{component:"aside",ref:e,mod:[{"with-border":v??E.withBorder},b],...E.getStyles("aside",{className:o,classNames:i,styles:d,style:l}),...w,__vars:{"--app-shell-aside-z-index":`calc(${_??E.zIndex} + 1)`}})});Xq.classes=Mm;Xq.displayName="@mantine/core/AppShellAside";const uIe={},Zq=pn((t,e)=>{var S;const n=Dt("AppShellFooter",uIe,t),{classNames:i,className:o,style:l,styles:d,unstyled:p,vars:g,withBorder:v,zIndex:_,mod:b,...w}=n,E=G4();return E.disabled?null:Y.jsx(Xt,{component:"footer",ref:e,mod:[{"with-border":v??E.withBorder},b],...E.getStyles("footer",{className:Wo({[II.classNames.zeroRight]:E.offsetScrollbars},o),classNames:i,styles:d,style:l}),...w,__vars:{"--app-shell-footer-z-index":(S=_??E.zIndex)==null?void 0:S.toString()}})});Zq.classes=Mm;Zq.displayName="@mantine/core/AppShellFooter";const fIe={},Qq=pn((t,e)=>{var S;const n=Dt("AppShellHeader",fIe,t),{classNames:i,className:o,style:l,styles:d,unstyled:p,vars:g,withBorder:v,zIndex:_,mod:b,...w}=n,E=G4();return E.disabled?null:Y.jsx(Xt,{component:"header",ref:e,mod:[{"with-border":v??E.withBorder},b],...E.getStyles("header",{className:Wo({[II.classNames.zeroRight]:E.offsetScrollbars},o),classNames:i,styles:d,style:l}),...w,__vars:{"--app-shell-header-z-index":(S=_??E.zIndex)==null?void 0:S.toString()}})});Qq.classes=Mm;Qq.displayName="@mantine/core/AppShellHeader";const dIe={},Kq=pn((t,e)=>{const n=Dt("AppShellMain",dIe,t),{classNames:i,className:o,style:l,styles:d,vars:p,...g}=n,v=G4();return Y.jsx(Xt,{component:"main",ref:e,...v.getStyles("main",{className:o,style:l,classNames:i,styles:d}),...g})});Kq.classes=Mm;Kq.displayName="@mantine/core/AppShellMain";function b6(t){return typeof t=="object"?t.base:t}function A6(t){const e=typeof t=="object"&&t!==null&&typeof t.base<"u"&&Object.keys(t).length===1;return typeof t=="number"||typeof t=="string"||e}function w6(t){return!(typeof t!="object"||t===null||Object.keys(t).length===1&&"base"in t)}function hIe({baseStyles:t,minMediaStyles:e,maxMediaStyles:n,aside:i,theme:o}){var g,v,_;const l=i==null?void 0:i.width,d="translateX(var(--app-shell-aside-width))",p="translateX(calc(var(--app-shell-aside-width) * -1))";if(i!=null&&i.breakpoint&&!((g=i==null?void 0:i.collapsed)!=null&&g.mobile)&&(n[i==null?void 0:i.breakpoint]=n[i==null?void 0:i.breakpoint]||{},n[i==null?void 0:i.breakpoint]["--app-shell-aside-width"]="100%",n[i==null?void 0:i.breakpoint]["--app-shell-aside-offset"]="0px"),A6(l)){const b=yt(b6(l));t["--app-shell-aside-width"]=b,t["--app-shell-aside-offset"]=b}if(w6(l)&&(typeof l.base<"u"&&(t["--app-shell-aside-width"]=yt(l.base),t["--app-shell-aside-offset"]=yt(l.base)),Ya(l).forEach(b=>{b!=="base"&&(e[b]=e[b]||{},e[b]["--app-shell-aside-width"]=yt(l[b]),e[b]["--app-shell-aside-offset"]=yt(l[b]))})),(v=i==null?void 0:i.collapsed)!=null&&v.desktop){const b=i.breakpoint;e[b]=e[b]||{},e[b]["--app-shell-aside-transform"]=d,e[b]["--app-shell-aside-transform-rtl"]=p,e[b]["--app-shell-aside-offset"]="0px !important"}if((_=i==null?void 0:i.collapsed)!=null&&_.mobile){const b=uq(i.breakpoint,o)-.1;n[b]=n[b]||{},n[b]["--app-shell-aside-width"]="100%",n[b]["--app-shell-aside-offset"]="0px",n[b]["--app-shell-aside-transform"]=d,n[b]["--app-shell-aside-transform-rtl"]=p}}function pIe({baseStyles:t,minMediaStyles:e,footer:n}){const i=n==null?void 0:n.height,o="translateY(var(--app-shell-footer-height))",l=(n==null?void 0:n.offset)??!0;if(A6(i)){const d=yt(b6(i));t["--app-shell-footer-height"]=d,l&&(t["--app-shell-footer-offset"]=d)}w6(i)&&(typeof i.base<"u"&&(t["--app-shell-footer-height"]=yt(i.base),l&&(t["--app-shell-footer-offset"]=yt(i.base))),Ya(i).forEach(d=>{d!=="base"&&(e[d]=e[d]||{},e[d]["--app-shell-footer-height"]=yt(i[d]),l&&(e[d]["--app-shell-footer-offset"]=yt(i[d])))})),n!=null&&n.collapsed&&(t["--app-shell-footer-transform"]=o,t["--app-shell-footer-offset"]="0px !important")}function mIe({baseStyles:t,minMediaStyles:e,header:n}){const i=n==null?void 0:n.height,o="translateY(calc(var(--app-shell-header-height) * -1))",l=(n==null?void 0:n.offset)??!0;if(A6(i)){const d=yt(b6(i));t["--app-shell-header-height"]=d,l&&(t["--app-shell-header-offset"]=d)}w6(i)&&(typeof i.base<"u"&&(t["--app-shell-header-height"]=yt(i.base),l&&(t["--app-shell-header-offset"]=yt(i.base))),Ya(i).forEach(d=>{d!=="base"&&(e[d]=e[d]||{},e[d]["--app-shell-header-height"]=yt(i[d]),l&&(e[d]["--app-shell-header-offset"]=yt(i[d])))})),n!=null&&n.collapsed&&(t["--app-shell-header-transform"]=o,t["--app-shell-header-offset"]="0px !important")}function gIe({baseStyles:t,minMediaStyles:e,maxMediaStyles:n,navbar:i,theme:o}){var g,v,_;const l=i==null?void 0:i.width,d="translateX(calc(var(--app-shell-navbar-width) * -1))",p="translateX(var(--app-shell-navbar-width))";if(i!=null&&i.breakpoint&&!((g=i==null?void 0:i.collapsed)!=null&&g.mobile)&&(n[i==null?void 0:i.breakpoint]=n[i==null?void 0:i.breakpoint]||{},n[i==null?void 0:i.breakpoint]["--app-shell-navbar-width"]="100%",n[i==null?void 0:i.breakpoint]["--app-shell-navbar-offset"]="0px"),A6(l)){const b=yt(b6(l));t["--app-shell-navbar-width"]=b,t["--app-shell-navbar-offset"]=b}if(w6(l)&&(typeof l.base<"u"&&(t["--app-shell-navbar-width"]=yt(l.base),t["--app-shell-navbar-offset"]=yt(l.base)),Ya(l).forEach(b=>{b!=="base"&&(e[b]=e[b]||{},e[b]["--app-shell-navbar-width"]=yt(l[b]),e[b]["--app-shell-navbar-offset"]=yt(l[b]))})),(v=i==null?void 0:i.collapsed)!=null&&v.desktop){const b=i.breakpoint;e[b]=e[b]||{},e[b]["--app-shell-navbar-transform"]=d,e[b]["--app-shell-navbar-transform-rtl"]=p,e[b]["--app-shell-navbar-offset"]="0px !important"}if((_=i==null?void 0:i.collapsed)!=null&&_.mobile){const b=uq(i.breakpoint,o)-.1;n[b]=n[b]||{},n[b]["--app-shell-navbar-width"]="100%",n[b]["--app-shell-navbar-offset"]="0px",n[b]["--app-shell-navbar-transform"]=d,n[b]["--app-shell-navbar-transform-rtl"]=p}}function eF(t){return Number(t)===0?"0px":op(t)}function vIe({padding:t,baseStyles:e,minMediaStyles:n}){A6(t)&&(e["--app-shell-padding"]=eF(b6(t))),w6(t)&&(t.base&&(e["--app-shell-padding"]=eF(t.base)),Ya(t).forEach(i=>{i!=="base"&&(n[i]=n[i]||{},n[i]["--app-shell-padding"]=eF(t[i]))}))}function _Ie({navbar:t,header:e,footer:n,aside:i,padding:o,theme:l}){const d={},p={},g={};gIe({baseStyles:g,minMediaStyles:d,maxMediaStyles:p,navbar:t,theme:l}),hIe({baseStyles:g,minMediaStyles:d,maxMediaStyles:p,aside:i,theme:l}),mIe({baseStyles:g,minMediaStyles:d,header:e}),pIe({baseStyles:g,minMediaStyles:d,footer:n}),vIe({baseStyles:g,minMediaStyles:d,padding:o});const v=Are(Ya(d),l).map(w=>({query:`(min-width: ${CO(w.px)})`,styles:d[w.value]})),_=Are(Ya(p),l).map(w=>({query:`(max-width: ${CO(w.px)})`,styles:p[w.value]})),b=[...v,..._];return{baseStyles:g,media:b}}function yIe({navbar:t,header:e,aside:n,footer:i,padding:o}){const l=ec(),d=Tm(),{media:p,baseStyles:g}=_Ie({navbar:t,header:e,footer:i,aside:n,padding:o,theme:l});return Y.jsx(Xhe,{media:p,styles:g,selector:d.cssVariablesSelector})}const bIe={},Jq=pn((t,e)=>{const n=Dt("AppShellNavbar",bIe,t),{classNames:i,className:o,style:l,styles:d,unstyled:p,vars:g,withBorder:v,zIndex:_,mod:b,...w}=n,E=G4();return E.disabled?null:Y.jsx(Xt,{component:"nav",ref:e,mod:[{"with-border":v??E.withBorder},b],...E.getStyles("navbar",{className:o,classNames:i,styles:d,style:l}),...w,__vars:{"--app-shell-navbar-z-index":`calc(${_??E.zIndex} + 1)`}})});Jq.classes=Mm;Jq.displayName="@mantine/core/AppShellNavbar";const AIe={},eX=tc((t,e)=>{const n=Dt("AppShellSection",AIe,t),{classNames:i,className:o,style:l,styles:d,vars:p,grow:g,mod:v,..._}=n,b=G4();return Y.jsx(Xt,{ref:e,mod:[{grow:g},v],...b.getStyles("section",{className:o,style:l,classNames:i,styles:d}),..._})});eX.classes=Mm;eX.displayName="@mantine/core/AppShellSection";function wIe({transitionDuration:t,disabled:e}){const[n,i]=de.useState(!0),o=de.useRef(),l=de.useRef();return Ghe("resize",()=>{i(!0),clearTimeout(o.current),o.current=window.setTimeout(()=>i(!1),200)}),ov(()=>{de.startTransition(()=>{i(!0),clearTimeout(l.current),l.current=window.setTimeout(()=>i(!1),t||0)})},[e,t]),n}const EIe={withBorder:!0,offsetScrollbars:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:Sm("app")},SIe=(t,{transitionDuration:e,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${e}ms`,"--app-shell-transition-timing-function":n}}),_f=pn((t,e)=>{const n=Dt("AppShell",EIe,t),{classNames:i,className:o,style:l,styles:d,unstyled:p,vars:g,navbar:v,withBorder:_,padding:b,transitionDuration:w,transitionTimingFunction:E,header:S,zIndex:M,layout:k,disabled:x,aside:C,footer:P,offsetScrollbars:O,mod:L,...B}=n,V=er({name:"AppShell",classes:Mm,props:n,className:o,style:l,classNames:i,styles:d,unstyled:p,vars:g,varsResolver:SIe}),G=wIe({disabled:x,transitionDuration:w});return Y.jsxs(lIe,{value:{getStyles:V,withBorder:_,zIndex:M,disabled:x,offsetScrollbars:O},children:[Y.jsx(yIe,{navbar:v,header:S,aside:C,footer:P,padding:b}),Y.jsx(Xt,{ref:e,...V("root"),mod:[{resizing:G,layout:k,disabled:x},L],...B})]})});_f.classes=Mm;_f.displayName="@mantine/core/AppShell";_f.Navbar=Jq;_f.Header=Qq;_f.Main=Kq;_f.Aside=Xq;_f.Footer=Zq;_f.Section=eX;function Kpe(t){return typeof t=="string"?{value:t,label:t}:"value"in t&&!("label"in t)?{value:t.value,label:t.value,disabled:t.disabled}:typeof t=="number"?{value:t.toString(),label:t.toString()}:"group"in t?{group:t.group,items:t.items.map(e=>Kpe(e))}:t}function Jpe(t){return t?t.map(e=>Kpe(e)):[]}function tX(t){return t.reduce((e,n)=>"group"in n?{...e,...tX(n.items)}:(e[n.value]=n,e),{})}var jc={dropdown:"m_88b62a41",options:"m_b2821a6e",option:"m_92253aa5",search:"m_985517d8",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const TIe={error:null},xIe=(t,{size:e})=>({chevron:{"--combobox-chevron-size":mi(e,"combobox-chevron-size")}}),nX=pn((t,e)=>{const n=Dt("ComboboxChevron",TIe,t),{size:i,error:o,style:l,className:d,classNames:p,styles:g,unstyled:v,vars:_,mod:b,...w}=n,E=er({name:"ComboboxChevron",classes:jc,props:n,style:l,className:d,classNames:p,styles:g,unstyled:v,vars:_,varsResolver:xIe,rootSelector:"chevron"});return Y.jsx(Xt,{component:"svg",...w,...E("chevron"),size:i,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:o},b],ref:e,children:Y.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});nX.classes=jc;nX.displayName="@mantine/core/ComboboxChevron";const[MIe,Of]=Hc("Combobox component was not found in tree"),e2e=de.forwardRef(({size:t,onMouseDown:e,onClick:n,onClear:i,...o},l)=>Y.jsx(cv,{ref:l,size:t||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...o,onMouseDown:d=>{d.preventDefault(),e==null||e(d)},onClick:d=>{i(),n==null||n(d)}}));e2e.displayName="@mantine/core/ComboboxClearButton";const kIe={},rX=pn((t,e)=>{const{classNames:n,styles:i,className:o,style:l,hidden:d,...p}=Dt("ComboboxDropdown",kIe,t),g=Of();return Y.jsx(Fc.Dropdown,{...p,ref:e,role:"presentation","data-hidden":d||void 0,...g.getStyles("dropdown",{className:o,style:l,classNames:n,styles:i})})});rX.classes=jc;rX.displayName="@mantine/core/ComboboxDropdown";const CIe={refProp:"ref"},t2e=pn((t,e)=>{const{children:n,refProp:i}=Dt("ComboboxDropdownTarget",CIe,t);if(Of(),!Em(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return Y.jsx(Fc.Target,{ref:e,refProp:i,children:n})});t2e.displayName="@mantine/core/ComboboxDropdownTarget";const PIe={},iX=pn((t,e)=>{const{classNames:n,className:i,style:o,styles:l,vars:d,...p}=Dt("ComboboxEmpty",PIe,t),g=Of();return Y.jsx(Xt,{ref:e,...g.getStyles("empty",{className:i,classNames:n,styles:l,style:o}),...p})});iX.classes=jc;iX.displayName="@mantine/core/ComboboxEmpty";function sX({onKeyDown:t,withKeyboardNavigation:e,withAriaAttributes:n,withExpandedAttribute:i,targetType:o,autoComplete:l}){const d=Of(),[p,g]=de.useState(null),v=b=>{if(t==null||t(b),!d.readOnly&&e){if(b.nativeEvent.isComposing)return;if(b.nativeEvent.code==="ArrowDown"&&(b.preventDefault(),d.store.dropdownOpened?g(d.store.selectNextOption()):(d.store.openDropdown("keyboard"),g(d.store.selectActiveOption()))),b.nativeEvent.code==="ArrowUp"&&(b.preventDefault(),d.store.dropdownOpened?g(d.store.selectPreviousOption()):(d.store.openDropdown("keyboard"),g(d.store.selectActiveOption()))),b.nativeEvent.code==="Enter"||b.nativeEvent.code==="NumpadEnter"){if(b.nativeEvent.keyCode===229)return;const w=d.store.getSelectedOptionIndex();d.store.dropdownOpened&&w!==-1?(b.preventDefault(),d.store.clickSelectedOption()):o==="button"&&(b.preventDefault(),d.store.openDropdown("keyboard"))}b.nativeEvent.code==="Escape"&&d.store.closeDropdown("keyboard"),b.nativeEvent.code==="Space"&&o==="button"&&(b.preventDefault(),d.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":i&&!!(d.store.listId&&d.store.dropdownOpened)||void 0,"aria-controls":d.store.listId,"aria-activedescendant":d.store.dropdownOpened&&p||void 0,autoComplete:l,"data-expanded":d.store.dropdownOpened||void 0,"data-mantine-stop-propagation":d.store.dropdownOpened||void 0}:{},onKeyDown:v}}const RIe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},n2e=pn((t,e)=>{const{children:n,refProp:i,withKeyboardNavigation:o,withAriaAttributes:l,withExpandedAttribute:d,targetType:p,autoComplete:g,...v}=Dt("ComboboxEventsTarget",RIe,t);if(!Em(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const _=Of(),b=sX({targetType:p,withAriaAttributes:l,withKeyboardNavigation:o,withExpandedAttribute:d,onKeyDown:n.props.onKeyDown,autoComplete:g});return de.cloneElement(n,{...b,...v,[i]:Po(e,_.store.targetRef,n==null?void 0:n.ref)})});n2e.displayName="@mantine/core/ComboboxEventsTarget";const DIe={},oX=pn((t,e)=>{const{classNames:n,className:i,style:o,styles:l,vars:d,...p}=Dt("ComboboxFooter",DIe,t),g=Of();return Y.jsx(Xt,{ref:e,...g.getStyles("footer",{className:i,classNames:n,style:o,styles:l}),...p})});oX.classes=jc;oX.displayName="@mantine/core/ComboboxFooter";const OIe={},aX=pn((t,e)=>{const{classNames:n,className:i,style:o,styles:l,vars:d,children:p,label:g,...v}=Dt("ComboboxGroup",OIe,t),_=Of();return Y.jsxs(Xt,{ref:e,..._.getStyles("group",{className:i,classNames:n,style:o,styles:l}),...v,children:[g&&Y.jsx("div",{..._.getStyles("groupLabel",{classNames:n,styles:l}),children:g}),p]})});aX.classes=jc;aX.displayName="@mantine/core/ComboboxGroup";const IIe={},lX=pn((t,e)=>{const{classNames:n,className:i,style:o,styles:l,vars:d,...p}=Dt("ComboboxHeader",IIe,t),g=Of();return Y.jsx(Xt,{ref:e,...g.getStyles("header",{className:i,classNames:n,style:o,styles:l}),...p})});lX.classes=jc;lX.displayName="@mantine/core/ComboboxHeader";function r2e({value:t,valuesDivider:e=",",...n}){return Y.jsx("input",{type:"hidden",value:Array.isArray(t)?t.join(e):t||"",...n})}r2e.displayName="@mantine/core/ComboboxHiddenInput";const NIe={},cX=pn((t,e)=>{const n=Dt("ComboboxOption",NIe,t),{classNames:i,className:o,style:l,styles:d,vars:p,onClick:g,id:v,active:_,onMouseDown:b,onMouseOver:w,disabled:E,selected:S,mod:M,...k}=n,x=Of(),C=de.useId(),P=v||C;return Y.jsx(Xt,{...x.getStyles("option",{className:o,classNames:i,styles:d,style:l}),...k,ref:e,id:P,mod:["combobox-option",{"combobox-active":_,"combobox-disabled":E,"combobox-selected":S},M],role:"option",onClick:O=>{var L;E?O.preventDefault():((L=x.onOptionSubmit)==null||L.call(x,n.value,n),g==null||g(O))},onMouseDown:O=>{O.preventDefault(),b==null||b(O)},onMouseOver:O=>{x.resetSelectionOnOptionHover&&x.store.resetSelectedOption(),w==null||w(O)}})});cX.classes=jc;cX.displayName="@mantine/core/ComboboxOption";const LIe={},uX=pn((t,e)=>{const n=Dt("ComboboxOptions",LIe,t),{classNames:i,className:o,style:l,styles:d,id:p,onMouseDown:g,labelledBy:v,..._}=n,b=Of(),w=B0(p);return de.useEffect(()=>{b.store.setListId(w)},[w]),Y.jsx(Xt,{ref:e,...b.getStyles("options",{className:o,style:l,classNames:i,styles:d}),..._,id:w,role:"listbox","aria-labelledby":v,onMouseDown:E=>{E.preventDefault(),g==null||g(E)}})});uX.classes=jc;uX.displayName="@mantine/core/ComboboxOptions";const zIe={withAriaAttributes:!0,withKeyboardNavigation:!0},fX=pn((t,e)=>{const n=Dt("ComboboxSearch",zIe,t),{classNames:i,styles:o,unstyled:l,vars:d,withAriaAttributes:p,onKeyDown:g,withKeyboardNavigation:v,size:_,...b}=n,w=Of(),E=w.getStyles("search"),S=sX({targetType:"input",withAriaAttributes:p,withKeyboardNavigation:v,withExpandedAttribute:!1,onKeyDown:g,autoComplete:"off"});return Y.jsx(la,{ref:Po(e,w.store.searchRef),classNames:[{input:E.className},i],styles:[{input:E.style},o],size:_||w.size,...S,...b,__staticSelector:"Combobox"})});fX.classes=jc;fX.displayName="@mantine/core/ComboboxSearch";const BIe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},i2e=pn((t,e)=>{const{children:n,refProp:i,withKeyboardNavigation:o,withAriaAttributes:l,withExpandedAttribute:d,targetType:p,autoComplete:g,...v}=Dt("ComboboxTarget",BIe,t);if(!Em(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const _=Of(),b=sX({targetType:p,withAriaAttributes:l,withKeyboardNavigation:o,withExpandedAttribute:d,onKeyDown:n.props.onKeyDown,autoComplete:g}),w=de.cloneElement(n,{...b,...v});return Y.jsx(Fc.Target,{ref:Po(e,_.store.targetRef),children:w})});i2e.displayName="@mantine/core/ComboboxTarget";function UIe(t,e,n){for(let i=t-1;i>=0;i-=1)if(!e[i].hasAttribute("data-combobox-disabled"))return i;if(n){for(let i=e.length-1;i>-1;i-=1)if(!e[i].hasAttribute("data-combobox-disabled"))return i}return t}function FIe(t,e,n){for(let i=t+1;i<e.length;i+=1)if(!e[i].hasAttribute("data-combobox-disabled"))return i;if(n){for(let i=0;i<e.length;i+=1)if(!e[i].hasAttribute("data-combobox-disabled"))return i}return t}function VIe(t){for(let e=0;e<t.length;e+=1)if(!t[e].hasAttribute("data-combobox-disabled"))return e;return-1}function dX({defaultOpened:t,opened:e,onOpenedChange:n,onDropdownClose:i,onDropdownOpen:o,loop:l=!0,scrollBehavior:d="instant"}={}){const[p,g]=Cl({value:e,defaultValue:t,finalValue:!1,onChange:n}),v=de.useRef(null),_=de.useRef(-1),b=de.useRef(null),w=de.useRef(null),E=de.useRef(-1),S=de.useRef(-1),M=de.useRef(-1),k=de.useCallback((me="unknown")=>{p||(g(!0),o==null||o(me))},[g,o,p]),x=de.useCallback((me="unknown")=>{p&&(g(!1),i==null||i(me))},[g,i,p]),C=de.useCallback((me="unknown")=>{p?x(me):k(me)},[x,k,p]),P=de.useCallback(()=>{const me=document.querySelector(`#${v.current} [data-combobox-selected]`);me==null||me.removeAttribute("data-combobox-selected"),me==null||me.removeAttribute("aria-selected")},[]),O=de.useCallback(me=>{const be=document.getElementById(v.current),ye=be==null?void 0:be.querySelectorAll("[data-combobox-option]");if(!ye)return null;const pe=me>=ye.length?0:me<0?ye.length-1:me;return _.current=pe,ye!=null&&ye[pe]&&!ye[pe].hasAttribute("data-combobox-disabled")?(P(),ye[pe].setAttribute("data-combobox-selected","true"),ye[pe].setAttribute("aria-selected","true"),ye[pe].scrollIntoView({block:"nearest",behavior:d}),ye[pe].id):null},[d,P]),L=de.useCallback(()=>{const me=document.querySelector(`#${v.current} [data-combobox-active]`);if(me){const be=document.querySelectorAll(`#${v.current} [data-combobox-option]`),ye=Array.from(be).findIndex(pe=>pe===me);return O(ye)}return O(0)},[O]),B=de.useCallback(()=>O(FIe(_.current,document.querySelectorAll(`#${v.current} [data-combobox-option]`),l)),[O,l]),V=de.useCallback(()=>O(UIe(_.current,document.querySelectorAll(`#${v.current} [data-combobox-option]`),l)),[O,l]),G=de.useCallback(()=>O(VIe(document.querySelectorAll(`#${v.current} [data-combobox-option]`))),[O]),j=de.useCallback((me="selected",be)=>{M.current=window.setTimeout(()=>{var oe;const ye=document.querySelectorAll(`#${v.current} [data-combobox-option]`),pe=Array.from(ye).findIndex(Ce=>Ce.hasAttribute(`data-combobox-${me}`));_.current=pe,be!=null&&be.scrollIntoView&&((oe=ye[pe])==null||oe.scrollIntoView({block:"nearest",behavior:d}))},0)},[]),F=de.useCallback(()=>{_.current=-1,P()},[P]),q=de.useCallback(()=>{const me=document.querySelectorAll(`#${v.current} [data-combobox-option]`),be=me==null?void 0:me[_.current];be==null||be.click()},[]),fe=de.useCallback(me=>{v.current=me},[]),ue=de.useCallback(()=>{E.current=window.setTimeout(()=>b.current.focus(),0)},[]),J=de.useCallback(()=>{S.current=window.setTimeout(()=>w.current.focus(),0)},[]),le=de.useCallback(()=>_.current,[]);return de.useEffect(()=>()=>{window.clearTimeout(E.current),window.clearTimeout(S.current),window.clearTimeout(M.current)},[]),{dropdownOpened:p,openDropdown:k,closeDropdown:x,toggleDropdown:C,selectedOptionIndex:_.current,getSelectedOptionIndex:le,selectOption:O,selectFirstOption:G,selectActiveOption:L,selectNextOption:B,selectPreviousOption:V,resetSelectedOption:F,updateSelectedOptionIndex:j,listId:v.current,setListId:fe,clickSelectedOption:q,searchRef:b,focusSearchInput:ue,targetRef:w,focusTarget:J}}const GIe={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},jIe=(t,{size:e,dropdownPadding:n})=>({options:{"--combobox-option-fz":Bc(e),"--combobox-option-padding":mi(e,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:yt(n),"--combobox-option-fz":Bc(e),"--combobox-option-padding":mi(e,"combobox-option-padding")}});function _i(t){const e=Dt("Combobox",GIe,t),{classNames:n,styles:i,unstyled:o,children:l,store:d,vars:p,onOptionSubmit:g,onClose:v,size:_,dropdownPadding:b,resetSelectionOnOptionHover:w,__staticSelector:E,readOnly:S,...M}=e,k=dX(),x=d||k,C=er({name:E||"Combobox",classes:jc,props:e,classNames:n,styles:i,unstyled:o,vars:p,varsResolver:jIe}),P=()=>{v==null||v(),x.closeDropdown()};return Y.jsx(MIe,{value:{getStyles:C,store:x,onOptionSubmit:g,size:_,resetSelectionOnOptionHover:w,readOnly:S},children:Y.jsx(Fc,{opened:x.dropdownOpened,...M,onClose:P,withRoles:!1,unstyled:o,children:l})})}const HIe=t=>t;_i.extend=HIe;_i.classes=jc;_i.displayName="@mantine/core/Combobox";_i.Target=i2e;_i.Dropdown=rX;_i.Options=uX;_i.Option=cX;_i.Search=fX;_i.Empty=iX;_i.Chevron=nX;_i.Footer=oX;_i.Header=lX;_i.EventsTarget=n2e;_i.DropdownTarget=t2e;_i.Group=aX;_i.ClearButton=e2e;_i.HiddenInput=r2e;var s2e={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const $Ie=s2e,o2e=de.forwardRef(({__staticSelector:t,__stylesApiProps:e,className:n,classNames:i,styles:o,unstyled:l,children:d,label:p,description:g,id:v,disabled:_,error:b,size:w,labelPosition:E="left",bodyElement:S="div",labelElement:M="label",variant:k,style:x,vars:C,mod:P,...O},L)=>{const B=er({name:t,props:e,className:n,style:x,classes:s2e,classNames:i,styles:o,unstyled:l});return Y.jsx(Xt,{...B("root"),ref:L,__vars:{"--label-fz":Bc(w),"--label-lh":mi(w,"label-lh")},mod:[{"label-position":E},P],variant:k,size:w,...O,children:Y.jsxs(Xt,{component:S,htmlFor:S==="label"?v:void 0,...B("body"),children:[d,Y.jsxs("div",{...B("labelWrapper"),"data-disabled":_||void 0,children:[p&&Y.jsx(Xt,{component:M,htmlFor:M==="label"?v:void 0,...B("label"),"data-disabled":_||void 0,children:p}),g&&Y.jsx(la.Description,{size:w,__inheritStyles:!1,...B("description"),children:g}),b&&typeof b!="boolean"&&Y.jsx(la.Error,{size:w,__inheritStyles:!1,...B("error"),children:b})]})]})})});o2e.displayName="@mantine/core/InlineInput";function WIe({children:t,role:e}){const n=V4();return n?Y.jsx("div",{role:e,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:t}):Y.jsx(Y.Fragment,{children:t})}function YIe({size:t,style:e,...n}){const i=t!==void 0?{width:yt(t),height:yt(t),...e}:e;return Y.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:i,"aria-hidden":!0,...n,children:Y.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function Bb(t){return"group"in t}function a2e({options:t,search:e,limit:n}){const i=e.trim().toLowerCase(),o=[];for(let l=0;l<t.length;l+=1){const d=t[l];if(o.length===n)return o;Bb(d)&&o.push({group:d.group,items:a2e({options:d.items,search:e,limit:n-o.length})}),Bb(d)||d.label.toLowerCase().includes(i)&&o.push(d)}return o}function qIe(t){if(t.length===0)return!0;for(const e of t)if(!("group"in e)||e.items.length>0)return!1;return!0}function l2e(t,e=new Set){if(Array.isArray(t))for(const n of t)if(Bb(n))l2e(n.items,e);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(e.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);e.add(n.value)}}function XIe(t,e){return Array.isArray(t)?t.includes(e):t===e}function c2e({data:t,withCheckIcon:e,value:n,checkIconPosition:i,unstyled:o,renderOption:l}){if(!Bb(t)){const p=XIe(n,t.value),g=e&&p&&Y.jsx(YIe,{className:jc.optionsDropdownCheckIcon}),v=Y.jsxs(Y.Fragment,{children:[i==="left"&&g,Y.jsx("span",{children:t.label}),i==="right"&&g]});return Y.jsx(_i.Option,{value:t.value,disabled:t.disabled,className:Wo({[jc.optionsDropdownOption]:!o}),"data-reverse":i==="right"||void 0,"data-checked":p||void 0,"aria-selected":p,active:p,children:typeof l=="function"?l({option:t,checked:p}):v})}const d=t.items.map(p=>Y.jsx(c2e,{data:p,value:n,unstyled:o,withCheckIcon:e,checkIconPosition:i,renderOption:l},p.value));return Y.jsx(_i.Group,{label:t.group,children:d})}function u2e({data:t,hidden:e,hiddenWhenEmpty:n,filter:i,search:o,limit:l,maxDropdownHeight:d,withScrollArea:p=!0,filterOptions:g=!0,withCheckIcon:v=!1,value:_,checkIconPosition:b,nothingFoundMessage:w,unstyled:E,labelId:S,renderOption:M,scrollAreaProps:k,"aria-label":x}){l2e(t);const P=typeof o=="string"?(i||a2e)({options:t,search:g?o:"",limit:l??1/0}):t,O=qIe(P),L=P.map(B=>Y.jsx(c2e,{data:B,withCheckIcon:v,value:_,checkIconPosition:b,unstyled:E,renderOption:M},Bb(B)?B.group:B.value));return Y.jsx(_i.Dropdown,{hidden:e||n&&O,children:Y.jsxs(_i.Options,{labelledBy:S,"aria-label":x,children:[p?Y.jsx(B4.Autosize,{mah:d??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...k,children:L}):L,O&&w&&Y.jsx(_i.Empty,{children:w})]})})}var f2e={root:"m_ddec01c0",icon:"m_dde7bd57",cite:"m_dde51a35"};const ZIe={iconSize:48},QIe=(t,{color:e,iconSize:n,radius:i})=>{const o=lm({color:e||t.primaryColor,theme:t,colorScheme:"dark"}),l=lm({color:e||t.primaryColor,theme:t,colorScheme:"light"});return{root:{"--bq-bg-light":cf(l.value,.07),"--bq-bg-dark":cf(o.value,.06),"--bq-bd":qa(e,t),"--bq-icon-size":yt(n),"--bq-radius":fa(i)}}},hX=pn((t,e)=>{const n=Dt("Blockquote",ZIe,t),{classNames:i,className:o,style:l,styles:d,unstyled:p,vars:g,children:v,icon:_,iconSize:b,cite:w,...E}=n,S=er({name:"Blockquote",classes:f2e,props:n,className:o,style:l,classNames:i,styles:d,unstyled:p,vars:g,varsResolver:QIe});return Y.jsxs(Xt,{component:"blockquote",ref:e,...S("root"),...E,children:[_&&Y.jsx("span",{...S("icon"),children:_}),v,w&&Y.jsx("cite",{...S("cite"),children:w})]})});hX.classes=f2e;hX.displayName="@mantine/core/Blockquote";var d2e={root:"m_fea6bf1a",burger:"m_d4fb9cad"};const KIe={},JIe=(t,{color:e,size:n,transitionDuration:i,transitionTimingFunction:o})=>({root:{"--burger-color":e?qa(e,t):void 0,"--burger-size":mi(n,"burger-size"),"--burger-transition-duration":i===void 0?void 0:`${i}ms`,"--burger-transition-timing-function":o}}),pX=pn((t,e)=>{const n=Dt("Burger",KIe,t),{classNames:i,className:o,style:l,styles:d,unstyled:p,vars:g,opened:v,children:_,transitionDuration:b,transitionTimingFunction:w,...E}=n,S=er({name:"Burger",classes:d2e,props:n,className:o,style:l,classNames:i,styles:d,unstyled:p,vars:g,varsResolver:JIe});return Y.jsxs(R0,{...S("root"),ref:e,...E,children:[Y.jsx(Xt,{mod:["reduce-motion",{opened:v}],...S("burger")}),_]})});pX.classes=d2e;pX.displayName="@mantine/core/Burger";var XI={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};const iie={orientation:"horizontal"},e7e=(t,{borderWidth:e})=>({group:{"--button-border-width":yt(e)}}),mX=pn((t,e)=>{const n=Dt("ButtonGroup",iie,t),{className:i,style:o,classNames:l,styles:d,unstyled:p,orientation:g,vars:v,borderWidth:_,variant:b,mod:w,...E}=Dt("ButtonGroup",iie,t),S=er({name:"ButtonGroup",props:n,classes:XI,className:i,style:o,classNames:l,styles:d,unstyled:p,vars:v,varsResolver:e7e,rootSelector:"group"});return Y.jsx(Xt,{...S("group"),ref:e,variant:b,mod:[{"data-orientation":g},w],role:"group",...E})});mX.classes=XI;mX.displayName="@mantine/core/ButtonGroup";const t7e={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${yt(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},n7e={},r7e=(t,{radius:e,color:n,gradient:i,variant:o,size:l,justify:d,autoContrast:p})=>{const g=t.variantColorResolver({color:n||t.primaryColor,theme:t,gradient:i,variant:o||"filled",autoContrast:p});return{root:{"--button-justify":d,"--button-height":mi(l,"button-height"),"--button-padding-x":mi(l,"button-padding-x"),"--button-fz":l!=null&&l.includes("compact")?Bc(l.replace("compact-","")):Bc(l),"--button-radius":e===void 0?void 0:fa(e),"--button-bg":n||o?g.background:void 0,"--button-hover":n||o?g.hover:void 0,"--button-color":g.color,"--button-bd":n||o?g.border:void 0,"--button-hover-color":n||o?g.hoverColor:void 0}}},pf=tc((t,e)=>{const n=Dt("Button",n7e,t),{style:i,vars:o,className:l,color:d,disabled:p,children:g,leftSection:v,rightSection:_,fullWidth:b,variant:w,radius:E,loading:S,loaderProps:M,gradient:k,classNames:x,styles:C,unstyled:P,"data-disabled":O,autoContrast:L,mod:B,...V}=n,G=er({name:"Button",props:n,classes:XI,className:l,style:i,classNames:x,styles:C,unstyled:P,vars:o,varsResolver:r7e}),j=!!v,F=!!_;return Y.jsxs(R0,{ref:e,...G("root",{active:!p&&!S&&!O}),unstyled:P,variant:w,disabled:p||S,mod:[{disabled:p||O,loading:S,block:b,"with-left-section":j,"with-right-section":F},B],...V,children:[Y.jsx(xm,{mounted:!!S,transition:t7e,duration:150,children:q=>Y.jsx(Xt,{component:"span",...G("loader",{style:q}),"aria-hidden":!0,children:Y.jsx(bp,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...M})})}),Y.jsxs("span",{...G("inner"),children:[v&&Y.jsx(Xt,{component:"span",...G("section"),mod:{position:"left"},children:v}),Y.jsx(Xt,{component:"span",mod:{loading:S},...G("label"),children:g}),_&&Y.jsx(Xt,{component:"span",...G("section"),mod:{position:"right"},children:_})]})]})});pf.classes=XI;pf.displayName="@mantine/core/Button";pf.Group=mX;var h2e={root:"m_4451eb3a"};const i7e={},gX=tc((t,e)=>{const n=Dt("Center",i7e,t),{classNames:i,className:o,style:l,styles:d,unstyled:p,vars:g,inline:v,mod:_,...b}=n,w=er({name:"Center",props:n,classes:h2e,className:o,style:l,classNames:i,styles:d,unstyled:p,vars:g});return Y.jsx(Xt,{ref:e,mod:[{inline:v},_],...w("root"),...b})});gX.classes=h2e;gX.displayName="@mantine/core/Center";var p2e={root:"m_b183c0a2"};const s7e={},o7e=(t,{color:e})=>({root:{"--code-bg":e?qa(e,t):void 0}}),vX=pn((t,e)=>{const n=Dt("Code",s7e,t),{classNames:i,className:o,style:l,styles:d,unstyled:p,vars:g,color:v,block:_,variant:b,mod:w,...E}=n,S=er({name:"Code",props:n,classes:p2e,className:o,style:l,classNames:i,styles:d,unstyled:p,vars:g,varsResolver:o7e});return Y.jsx(Xt,{component:_?"pre":"code",variant:b,ref:e,mod:[{block:_},w],...S("root"),...E,dir:"ltr"})});vX.classes=p2e;vX.displayName="@mantine/core/Code";var m2e={root:"m_de3d2490",colorOverlay:"m_862f3d1b",shadowOverlay:"m_98ae7f22",alphaOverlay:"m_95709ac0",childrenOverlay:"m_93e74e3"};const sie={withShadow:!0},a7e=(t,{radius:e,size:n})=>({root:{"--cs-radius":e===void 0?void 0:fa(e),"--cs-size":yt(n)}}),E6=tc((t,e)=>{const n=Dt("ColorSwatch",sie,t),{classNames:i,className:o,style:l,styles:d,unstyled:p,vars:g,color:v,size:_,radius:b,withShadow:w,children:E,variant:S,...M}=Dt("ColorSwatch",sie,n),k=er({name:"ColorSwatch",props:n,classes:m2e,className:o,style:l,classNames:i,styles:d,unstyled:p,vars:g,varsResolver:a7e});return Y.jsxs(Xt,{ref:e,variant:S,size:_,...k("root",{focusable:!0}),...M,children:[Y.jsx("span",{...k("alphaOverlay")}),w&&Y.jsx("span",{...k("shadowOverlay")}),Y.jsx("span",{...k("colorOverlay",{style:{backgroundColor:v}})}),Y.jsx("span",{...k("childrenOverlay"),children:E})]})});E6.classes=m2e;E6.displayName="@mantine/core/ColorSwatch";const[l7e,_X]=LI(null),yX=de.forwardRef(({position:t,...e},n)=>Y.jsx(Xt,{ref:n,__vars:{"--thumb-y-offset":`${t.y*100}%`,"--thumb-x-offset":`${t.x*100}%`},...e}));yX.displayName="@mantine/core/ColorPickerThumb";var bX={wrapper:"m_fee9c77",preview:"m_9dddfbac",body:"m_bffecc3e",sliders:"m_3283bb96",thumb:"m_40d572ba",swatch:"m_d8ee6fd8",swatches:"m_5711e686",saturation:"m_202a296e",saturationOverlay:"m_11b3db02",slider:"m_d856d47d",sliderOverlay:"m_8f327113"};const c7e={},AX=pn((t,e)=>{var ye;const n=Dt("ColorSlider",c7e,t),{classNames:i,className:o,style:l,styles:d,unstyled:p,vars:g,onChange:v,onChangeEnd:_,maxValue:b,round:w,size:E="md",focusable:S=!0,value:M,overlays:k,thumbColor:x="transparent",onScrubStart:C,onScrubEnd:P,__staticSelector:O="ColorPicker",...L}=n,B=er({name:O,classes:bX,props:n,className:o,style:l,classNames:i,styles:d,unstyled:p}),G=((ye=_X())==null?void 0:ye.getStyles)||B,j=ec(),[F,q]=de.useState({y:0,x:M/b}),fe=de.useRef(F),ue=pe=>w?Math.round(pe*b):pe*b,{ref:J}=fq(({x:pe,y:oe})=>{fe.current={x:pe,y:oe},v==null||v(ue(pe))},{onScrubEnd:()=>{const{x:pe}=fe.current;_==null||_(ue(pe)),P==null||P()},onScrubStart:C});ku(()=>{q({y:0,x:M/b})},[M]);const le=(pe,oe)=>{pe.preventDefault();const Ce=Hhe(oe);v==null||v(ue(Ce.x)),_==null||_(ue(Ce.x))},me=pe=>{switch(pe.key){case"ArrowRight":{le(pe,{x:F.x+.05,y:F.y});break}case"ArrowLeft":{le(pe,{x:F.x-.05,y:F.y});break}}},be=k.map((pe,oe)=>de.createElement("div",{...G("sliderOverlay"),style:pe,key:oe}));return Y.jsxs(Xt,{...L,ref:Po(J,e),...G("slider"),role:"slider","aria-valuenow":M,"aria-valuemax":b,"aria-valuemin":0,tabIndex:S?0:-1,onKeyDown:me,"data-focus-ring":j.focusRing,__vars:{"--cp-thumb-size":`var(--cp-thumb-size-${E})`},children:[be,Y.jsx(yX,{position:F,...G("thumb",{style:{top:yt(1),background:x}})})]})});AX.displayName="@mantine/core/ColorSlider";function yf(t,e=0,n=10**e){return Math.round(n*t)/n}function u7e({h:t,s:e,l:n,a:i}){const o=e*((n<50?n:100-n)/100);return{h:t,s:o>0?2*o/(n+o)*100:0,v:n+o,a:i}}const f7e={grad:360/400,turn:360,rad:360/(Math.PI*2)};function d7e(t,e="deg"){return Number(t)*(f7e[e]||1)}const h7e=/hsla?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i;function oie(t){const e=h7e.exec(t);return e?u7e({h:d7e(e[1],e[2]),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)}):{h:0,s:0,v:0,a:1}}function TH({r:t,g:e,b:n,a:i}){const o=Math.max(t,e,n),l=o-Math.min(t,e,n),d=l?o===t?(e-n)/l:o===e?2+(n-t)/l:4+(t-e)/l:0;return{h:yf(60*(d<0?d+6:d),3),s:yf(o?l/o*100:0,3),v:yf(o/255*100,3),a:i}}function xH(t){const e=t[0]==="#"?t.slice(1):t;return e.length===3?TH({r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:1}):TH({r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16),a:1})}function p7e(t){const e=t[0]==="#"?t.slice(1):t,n=d=>yf(parseInt(d,16)/255,3);if(e.length===4){const d=e.slice(0,3),p=n(e[3]+e[3]);return{...xH(d),a:p}}const i=e.slice(0,6),o=n(e.slice(6,8));return{...xH(i),a:o}}const m7e=/rgba?\(?\s*(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i;function aie(t){const e=m7e.exec(t);return e?TH({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):{h:0,s:0,v:0,a:1}}const g2e={hex:/^#?([0-9A-F]{3}){1,2}$/i,hexa:/^#?([0-9A-F]{4}){1,2}$/i,rgb:/^rgb\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i,rgba:/^rgba\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i,hsl:/hsl\(\s*(\d+)\s*,\s*(\d+(?:\.\d+)?%)\s*,\s*(\d+(?:\.\d+)?%)\)/i,hsla:/^hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*(\d*(?:\.\d+)?)\)$/i},g7e={hex:xH,hexa:p7e,rgb:aie,rgba:aie,hsl:oie,hsla:oie};function xw(t){for(const[,e]of Object.entries(g2e))if(e.test(t))return!0;return!1}function Eg(t){if(typeof t!="string")return{h:0,s:0,v:0,a:1};if(t==="transparent")return{h:0,s:0,v:0,a:0};const e=t.trim();for(const[n,i]of Object.entries(g2e))if(i.test(e))return g7e[n](e);return{h:0,s:0,v:0,a:1}}const v7e={},v2e=de.forwardRef((t,e)=>{const{value:n,onChange:i,onChangeEnd:o,color:l,...d}=Dt("AlphaSlider",v7e,t);return Y.jsx(AX,{...d,ref:e,value:n,onChange:p=>i==null?void 0:i(yf(p,2)),onChangeEnd:p=>o==null?void 0:o(yf(p,2)),maxValue:1,round:!1,"data-alpha":!0,overlays:[{backgroundImage:"linear-gradient(45deg, var(--slider-checkers) 25%, transparent 25%), linear-gradient(-45deg, var(--slider-checkers) 25%, transparent 25%), linear-gradient(45deg, transparent 75%, var(--slider-checkers) 75%), linear-gradient(-45deg, var(--mantine-color-body) 75%, var(--slider-checkers) 75%)",backgroundSize:`${yt(8)} ${yt(8)}`,backgroundPosition:`0 0, 0 ${yt(4)}, ${yt(4)} ${yt(-4)}, ${yt(-4)} 0`},{backgroundImage:`linear-gradient(90deg, transparent, ${l})`},{boxShadow:`rgba(0, 0, 0, .1) 0 0 0 ${yt(1)} inset, rgb(0, 0, 0, .15) 0 0 ${yt(4)} inset`}]})});v2e.displayName="@mantine/core/AlphaSlider";function _2e({h:t,s:e,v:n,a:i}){const o=t/360*6,l=e/100,d=n/100,p=Math.floor(o),g=d*(1-l),v=d*(1-(o-p)*l),_=d*(1-(1-o+p)*l),b=p%6;return{r:yf([d,v,g,g,_,d][b]*255),g:yf([_,d,d,v,g,g][b]*255),b:yf([g,g,_,d,d,v][b]*255),a:yf(i,2)}}function lie(t,e){const{r:n,g:i,b:o,a:l}=_2e(t);return e?`rgba(${n}, ${i}, ${o}, ${yf(l,2)})`:`rgb(${n}, ${i}, ${o})`}function cie({h:t,s:e,v:n,a:i},o){const l=(200-e)*n/100,d={h:Math.round(t),s:Math.round(l>0&&l<200?e*n/100/(l<=100?l:200-l)*100:0),l:Math.round(l/2)};return o?`hsla(${d.h}, ${d.s}%, ${d.l}%, ${yf(i,2)})`:`hsl(${d.h}, ${d.s}%, ${d.l}%)`}function QC(t){const e=t.toString(16);return e.length<2?`0${e}`:e}function y2e(t){const{r:e,g:n,b:i}=_2e(t);return`#${QC(e)}${QC(n)}${QC(i)}`}function _7e(t){const e=Math.round(t.a*255);return`${y2e(t)}${QC(e)}`}const tF={hex:y2e,hexa:t=>_7e(t),rgb:t=>lie(t,!1),rgba:t=>lie(t,!0),hsl:t=>cie(t,!1),hsla:t=>cie(t,!0)};function p0(t,e){return e?t in tF?tF[t](e):tF.hex(e):"#000000"}const b2e=de.forwardRef((t,e)=>{const{value:n,onChange:i,onChangeEnd:o,color:l,...d}=Dt("HueSlider",{},t);return Y.jsx(AX,{...d,ref:e,value:n,onChange:i,onChangeEnd:o,maxValue:360,thumbColor:`hsl(${n}, 100%, 50%)`,round:!0,"data-hue":!0,overlays:[{backgroundImage:"linear-gradient(to right,hsl(0,100%,50%),hsl(60,100%,50%),hsl(120,100%,50%),hsl(170,100%,50%),hsl(240,100%,50%),hsl(300,100%,50%),hsl(360,100%,50%))"},{boxShadow:`rgba(0, 0, 0, .1) 0 0 0 ${yt(1)} inset, rgb(0, 0, 0, .15) 0 0 ${yt(4)} inset`}]})});b2e.displayName="@mantine/core/HueSlider";function A2e({className:t,onChange:e,onChangeEnd:n,value:i,saturationLabel:o,focusable:l=!0,size:d,color:p,onScrubStart:g,onScrubEnd:v,..._}){const{getStyles:b}=_X(),[w,E]=de.useState({x:i.s/100,y:1-i.v/100}),S=de.useRef(w),{ref:M}=fq(({x:C,y:P})=>{S.current={x:C,y:P},e({s:Math.round(C*100),v:Math.round((1-P)*100)})},{onScrubEnd:()=>{const{x:C,y:P}=S.current;n({s:Math.round(C*100),v:Math.round((1-P)*100)}),v==null||v()},onScrubStart:g});de.useEffect(()=>{E({x:i.s/100,y:1-i.v/100})},[i.s,i.v]);const k=(C,P)=>{C.preventDefault();const O=Hhe(P);e({s:Math.round(O.x*100),v:Math.round((1-O.y)*100)}),n({s:Math.round(O.x*100),v:Math.round((1-O.y)*100)})},x=C=>{switch(C.key){case"ArrowUp":{k(C,{y:w.y-.05,x:w.x});break}case"ArrowDown":{k(C,{y:w.y+.05,x:w.x});break}case"ArrowRight":{k(C,{x:w.x+.05,y:w.y});break}case"ArrowLeft":{k(C,{x:w.x-.05,y:w.y});break}}};return Y.jsxs(Xt,{...b("saturation"),ref:M,..._,role:"slider","aria-label":o,"aria-valuenow":w.x,"aria-valuetext":p0("rgba",i),tabIndex:l?0:-1,onKeyDown:x,children:[Y.jsx("div",{...b("saturationOverlay",{style:{backgroundColor:`hsl(${i.h}, 100%, 50%)`}})}),Y.jsx("div",{...b("saturationOverlay",{style:{backgroundImage:"linear-gradient(90deg, #fff, transparent)"}})}),Y.jsx("div",{...b("saturationOverlay",{style:{backgroundImage:"linear-gradient(0deg, #000, transparent)"}})}),Y.jsx(yX,{position:w,...b("thumb",{style:{backgroundColor:p}})})]})}A2e.displayName="@mantine/core/Saturation";const w2e=de.forwardRef(({className:t,datatype:e,setValue:n,onChangeEnd:i,size:o,focusable:l,data:d,swatchesPerRow:p,...g},v)=>{const _=_X(),b=d.map((w,E)=>de.createElement(E6,{..._.getStyles("swatch"),unstyled:_.unstyled,component:"button",type:"button",color:w,key:E,radius:"sm",onClick:()=>{n(w),i==null||i(w)},"aria-label":w,tabIndex:l?0:-1,"data-swatch":!0}));return Y.jsx(Xt,{..._.getStyles("swatches"),ref:v,...g,children:b})});w2e.displayName="@mantine/core/Swatches";const y7e={swatchesPerRow:7,withPicker:!0,focusable:!0,size:"md",__staticSelector:"ColorPicker"},b7e=(t,{size:e,swatchesPerRow:n})=>({wrapper:{"--cp-preview-size":mi(e,"cp-preview-size"),"--cp-width":mi(e,"cp-width"),"--cp-body-spacing":op(e),"--cp-swatch-size":`${100/n}%`,"--cp-thumb-size":mi(e,"cp-thumb-size"),"--cp-saturation-height":mi(e,"cp-saturation-height")}}),wX=pn((t,e)=>{const n=Dt("ColorPicker",y7e,t),{classNames:i,className:o,style:l,styles:d,unstyled:p,vars:g,format:v,value:_,defaultValue:b,onChange:w,onChangeEnd:E,withPicker:S,size:M,saturationLabel:k,hueLabel:x,alphaLabel:C,focusable:P,swatches:O,swatchesPerRow:L,fullWidth:B,onColorSwatchClick:V,__staticSelector:G,mod:j,...F}=n,q=er({name:G,props:n,classes:bX,className:o,style:l,classNames:i,styles:d,unstyled:p,rootSelector:"wrapper",vars:g,varsResolver:b7e}),fe=de.useRef(v),ue=de.useRef(),J=de.useRef(-1),le=de.useRef(!1),me=v==="hexa"||v==="rgba"||v==="hsla",[be,ye,pe]=Cl({value:_,defaultValue:b,finalValue:"#FFFFFF",onChange:w}),[oe,Ce]=de.useState(Eg(be)),it=()=>{window.clearTimeout(J.current),le.current=!0},Se=()=>{window.clearTimeout(J.current),J.current=window.setTimeout(()=>{le.current=!1},200)},Oe=ct=>{Ce(_t=>{const Nt={..._t,...ct};return ue.current=p0(fe.current,Nt),Nt}),ye(ue.current)};return ku(()=>{xw(_)&&!le.current&&Ce(Eg(_))},[_]),ku(()=>{fe.current=v,ye(p0(v,oe))},[v]),Y.jsx(l7e,{value:{getStyles:q,unstyled:p},children:Y.jsxs(Xt,{ref:e,...q("wrapper"),size:M,mod:[{"full-width":B},j],...F,children:[S&&Y.jsxs(Y.Fragment,{children:[Y.jsx(A2e,{value:oe,onChange:Oe,onChangeEnd:({s:ct,v:_t})=>E==null?void 0:E(p0(fe.current,{...oe,s:ct,v:_t})),color:be,size:M,focusable:P,saturationLabel:k,onScrubStart:it,onScrubEnd:Se}),Y.jsxs("div",{...q("body"),children:[Y.jsxs("div",{...q("sliders"),children:[Y.jsx(b2e,{value:oe.h,onChange:ct=>Oe({h:ct}),onChangeEnd:ct=>E==null?void 0:E(p0(fe.current,{...oe,h:ct})),size:M,focusable:P,"aria-label":x,onScrubStart:it,onScrubEnd:Se}),me&&Y.jsx(v2e,{value:oe.a,onChange:ct=>Oe({a:ct}),onChangeEnd:ct=>{E==null||E(p0(fe.current,{...oe,a:ct}))},size:M,color:p0("hex",oe),focusable:P,"aria-label":C,onScrubStart:it,onScrubEnd:Se})]}),me&&Y.jsx(E6,{color:be,radius:"sm",size:"var(--cp-preview-size)",...q("preview")})]})]}),Array.isArray(O)&&Y.jsx(w2e,{data:O,swatchesPerRow:L,focusable:P,setValue:ye,onChangeEnd:ct=>{const _t=p0(v,Eg(ct));V==null||V(_t),E==null||E(_t),pe||Ce(Eg(ct))}})]})})});wX.classes=bX;wX.displayName="@mantine/core/ColorPicker";function A7e({style:t,...e}){return Y.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",style:{width:"var(--ci-eye-dropper-icon-size)",height:"var(--ci-eye-dropper-icon-size)",...t},viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[Y.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),Y.jsx("path",{d:"M11 7l6 6"}),Y.jsx("path",{d:"M4 16l11.7 -11.7a1 1 0 0 1 1.4 0l2.6 2.6a1 1 0 0 1 0 1.4l-11.7 11.7h-4v-4z"})]})}var uie={eyeDropperIcon:"m_b077c2bc",colorPreview:"m_c5ccdcab",dropdown:"m_5ece2cd7"};const fie={format:"hex",fixOnBlur:!0,withPreview:!0,swatchesPerRow:7,withPicker:!0,popoverProps:{transitionProps:{transition:"fade",duration:0}},withEyeDropper:!0},w7e=(t,{size:e})=>({eyeDropperIcon:{"--ci-eye-dropper-icon-size":mi(e,"ci-eye-dropper-icon-size")},colorPreview:{"--ci-preview-size":mi(e,"ci-preview-size")}}),ZI=pn((t,e)=>{const n=Dt("ColorInput",fie,t),{classNames:i,styles:o,unstyled:l,disallowInput:d,fixOnBlur:p,popoverProps:g,withPreview:v,withEyeDropper:_,eyeDropperIcon:b,closeOnColorSwatchClick:w,eyeDropperButtonProps:E,value:S,defaultValue:M,onChange:k,onChangeEnd:x,onClick:C,onFocus:P,onBlur:O,inputProps:L,format:B,wrapperProps:V,readOnly:G,withPicker:j,swatches:F,disabled:q,leftSection:fe,rightSection:ue,swatchesPerRow:J,...le}=Ype("ColorInput",fie,t),me=er({name:"ColorInput",props:n,classes:uie,classNames:i,styles:o,unstyled:l,rootSelector:"wrapper",vars:n.vars,varsResolver:w7e}),{resolvedClassNames:be,resolvedStyles:ye}=m6({classNames:i,styles:o,props:n}),[pe,oe]=de.useState(!1),[Ce,it]=de.useState(""),[Se,Oe]=Cl({value:S,defaultValue:M,finalValue:"",onChange:k}),{supported:ct,open:_t}=qPe(),Nt=Y.jsx(Gh,{...E,...me("eyeDropperButton",{className:E==null?void 0:E.className,style:E==null?void 0:E.style}),variant:"subtle",color:"gray",size:L.size,unstyled:l,onClick:()=>_t().then(Ht=>{if(Ht!=null&&Ht.sRGBHex){const Re=p0(B,Eg(Ht.sRGBHex));Oe(Re),x==null||x(Re)}}).catch(()=>{}),children:b||Y.jsx(A7e,{...me("eyeDropperIcon")})}),Je=Ht=>{P==null||P(Ht),oe(!0)},ot=Ht=>{p&&Oe(Ce),O==null||O(Ht),oe(!1)},fn=Ht=>{C==null||C(Ht),oe(!0)};return de.useEffect(()=>{(xw(Se)||Se.trim()==="")&&it(Se)},[Se]),ku(()=>{xw(Se)&&Oe(p0(B,Eg(Se)))},[B]),Y.jsx(la.Wrapper,{...V,classNames:be,styles:ye,__staticSelector:"ColorInput",children:Y.jsxs(Fc,{__staticSelector:"ColorInput",position:"bottom-start",offset:5,...g,opened:pe,classNames:be,styles:ye,unstyled:l,withRoles:!1,disabled:G||j===!1&&(!Array.isArray(F)||F.length===0),children:[Y.jsx(Fc.Target,{children:Y.jsx(la,{autoComplete:"off",...le,...L,classNames:be,styles:ye,disabled:q,ref:e,__staticSelector:"ColorInput",onFocus:Je,onBlur:ot,onClick:fn,spellCheck:!1,value:Se,onChange:Ht=>{const Re=Ht.currentTarget.value;Oe(Re),xw(Re)&&(x==null||x(p0(B,Eg(Re))))},leftSection:fe||(v?Y.jsx(E6,{color:xw(Se)?Se:"#fff",size:"var(--ci-preview-size)",...me("colorPreview")}):null),readOnly:d||G,pointer:d,unstyled:l,rightSection:ue||(_&&!q&&!G&&ct?Nt:null)})}),Y.jsx(Fc.Dropdown,{onMouseDown:Ht=>Ht.preventDefault(),className:uie.dropdown,children:Y.jsx(wX,{__staticSelector:"ColorInput",value:Se,onChange:Oe,onChangeEnd:x,format:B,swatches:F,swatchesPerRow:J,withPicker:j,size:L.size,focusable:!1,unstyled:l,styles:ye,classNames:be,onColorSwatchClick:()=>w&&oe(!1)})})]})})});ZI.classes=Nu.classes;ZI.displayName="@mantine/core/ColorInput";var E2e={root:"m_3eebeb36",label:"m_9e365f20"};const E7e={orientation:"horizontal"},S7e=(t,{color:e,variant:n,size:i})=>({root:{"--divider-color":e?qa(e,t):void 0,"--divider-border-style":n,"--divider-size":mi(i,"divider-size")}}),EX=pn((t,e)=>{const n=Dt("Divider",E7e,t),{classNames:i,className:o,style:l,styles:d,unstyled:p,vars:g,color:v,orientation:_,label:b,labelPosition:w,mod:E,...S}=n,M=er({name:"Divider",classes:E2e,props:n,className:o,style:l,classNames:i,styles:d,unstyled:p,vars:g,varsResolver:S7e});return Y.jsx(Xt,{ref:e,mod:[{orientation:_,"with-label":!!b},E],...M("root"),...S,role:"separator",children:b&&Y.jsx(Xt,{component:"span",mod:{position:w},...M("label"),children:b})})});EX.classes=E2e;EX.displayName="@mantine/core/Divider";const T7e={multiple:!1},S2e=de.forwardRef((t,e)=>{const{onChange:n,children:i,multiple:o,accept:l,name:d,form:p,resetRef:g,disabled:v,capture:_,inputProps:b,...w}=Dt("FileButton",T7e,t),E=de.useRef(),S=()=>{var x;!v&&((x=E.current)==null||x.click())},M=x=>{n(o?Array.from(x.currentTarget.files):x.currentTarget.files[0]||null)};return UI(g,()=>{E.current.value=""}),Y.jsxs(Y.Fragment,{children:[i({onClick:S,...w}),Y.jsx("input",{style:{display:"none"},type:"file",accept:l,multiple:o,onChange:M,ref:Po(e,E),name:d,form:p,capture:_,...b})]})});S2e.displayName="@mantine/core/FileButton";const x7e=({value:t})=>Y.jsx("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Array.isArray(t)?t.map(e=>e.name).join(", "):t==null?void 0:t.name}),M7e={valueComponent:x7e},SX=pn((t,e)=>{const n=Dt("FileInput",M7e,t),{unstyled:i,vars:o,onChange:l,value:d,defaultValue:p,multiple:g,accept:v,name:_,form:b,valueComponent:w,clearable:E,clearButtonProps:S,readOnly:M,capture:k,fileInputProps:x,rightSection:C,size:P,placeholder:O,...L}=n,B=de.useRef(null),[V,G]=Cl({value:d,defaultValue:p,onChange:l,finalValue:g?[]:null}),j=Array.isArray(V)?V.length!==0:V!==null,F=C||(E&&j&&!M?Y.jsx(cv,{...S,variant:"subtle",onClick:()=>G(g?[]:null),size:P,unstyled:i}):null);de.useEffect(()=>{var fe;(Array.isArray(V)&&V.length===0||V===null)&&((fe=B.current)==null||fe.call(B))},[V]);const q=w;return Y.jsx(S2e,{onChange:G,multiple:g,accept:v,name:_,form:b,resetRef:B,disabled:M,capture:k,inputProps:x,children:fe=>Y.jsx(Nu,{component:"button",ref:e,rightSection:F,...fe,...L,__staticSelector:"FileInput",multiline:!0,type:"button",pointer:!0,__stylesApiProps:n,unstyled:i,size:P,children:j?Y.jsx(q,{value:V}):Y.jsx(la.Placeholder,{children:O})})})});SX.classes=Nu.classes;SX.displayName="@mantine/core/FileInput";const k7e=SX;function C7e({open:t,close:e,openDelay:n,closeDelay:i}){const o=de.useRef(-1),l=de.useRef(-1),d=()=>{window.clearTimeout(o.current),window.clearTimeout(l.current)},p=()=>{d(),n===0||n===void 0?t():o.current=window.setTimeout(t,n)},g=()=>{d(),i===0||i===void 0?e():l.current=window.setTimeout(e,i)};return de.useEffect(()=>d,[]),{openDropdown:p,closeDropdown:g}}var T2e={root:"m_9e117634"};const P7e={},R7e=(t,{radius:e,fit:n})=>({root:{"--image-radius":e===void 0?void 0:fa(e),"--image-object-fit":n}}),QI=tc((t,e)=>{const n=Dt("Image",P7e,t),{classNames:i,className:o,style:l,styles:d,unstyled:p,vars:g,onError:v,src:_,radius:b,fit:w,fallbackSrc:E,mod:S,...M}=n,[k,x]=de.useState(!_);de.useEffect(()=>x(!_),[_]);const C=er({name:"Image",classes:T2e,props:n,className:o,style:l,classNames:i,styles:d,unstyled:p,vars:g,varsResolver:R7e});return k&&E?Y.jsx(Xt,{component:"img",ref:e,src:E,...C("root"),onError:v,mod:["fallback",S],...M}):Y.jsx(Xt,{component:"img",ref:e,...C("root"),src:_,onError:P=>{v==null||v(P),x(!0)},mod:S,...M})});QI.classes=T2e;QI.displayName="@mantine/core/Image";const[D7e,O7e]=Hc("List component was not found in tree");var TX={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const I7e={},xX=pn((t,e)=>{const n=Dt("ListItem",I7e,t),{classNames:i,className:o,style:l,styles:d,vars:p,icon:g,children:v,mod:_,...b}=n,w=O7e(),E=g||w.icon,S={classNames:i,styles:d};return Y.jsx(Xt,{...w.getStyles("item",{...S,className:o,style:l}),component:"li",mod:[{"with-icon":!!E,centered:w.center},_],ref:e,...b,children:Y.jsxs("div",{...w.getStyles("itemWrapper",S),children:[E&&Y.jsx("span",{...w.getStyles("itemIcon",S),children:E}),Y.jsx("span",{...w.getStyles("itemLabel",S),children:v})]})})});xX.classes=TX;xX.displayName="@mantine/core/ListItem";const N7e={type:"unordered"},L7e=(t,{size:e,spacing:n})=>({root:{"--list-fz":Bc(e),"--list-lh":Nhe(e),"--list-spacing":op(n)}}),wT=pn((t,e)=>{const n=Dt("List",N7e,t),{classNames:i,className:o,style:l,styles:d,unstyled:p,vars:g,children:v,type:_,withPadding:b,icon:w,spacing:E,center:S,listStyleType:M,mod:k,...x}=n,C=er({name:"List",classes:TX,props:n,className:o,style:l,classNames:i,styles:d,unstyled:p,vars:g,varsResolver:L7e});return Y.jsx(D7e,{value:{center:S,icon:w,getStyles:C},children:Y.jsx(Xt,{...C("root",{style:{listStyleType:M}}),component:_==="unordered"?"ul":"ol",mod:[{"with-padding":b},k],ref:e,...x,children:v})})});wT.classes=TX;wT.displayName="@mantine/core/List";wT.Item=xX;const[z7e,S6]=Hc("Menu component was not found in the tree");var j4={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const B7e={},MX=pn((t,e)=>{const{classNames:n,className:i,style:o,styles:l,vars:d,...p}=Dt("MenuDivider",B7e,t),g=S6();return Y.jsx(Xt,{ref:e,...g.getStyles("divider",{className:i,style:o,styles:l,classNames:n}),...p})});MX.classes=j4;MX.displayName="@mantine/core/MenuDivider";const U7e={},kX=pn((t,e)=>{const{classNames:n,className:i,style:o,styles:l,vars:d,onMouseEnter:p,onMouseLeave:g,children:v,..._}=Dt("MenuDropdown",U7e,t),b=de.useRef(null),w=S6(),E=k=>{var x,C;(k.key==="ArrowUp"||k.key==="ArrowDown")&&(k.preventDefault(),(C=(x=b.current)==null?void 0:x.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||C.focus())},S=Vh(p,()=>(w.trigger==="hover"||w.trigger==="click-hover")&&w.openDropdown()),M=Vh(g,()=>(w.trigger==="hover"||w.trigger==="click-hover")&&w.closeDropdown());return Y.jsxs(Fc.Dropdown,{..._,onMouseEnter:S,onMouseLeave:M,role:"menu","aria-orientation":"vertical",ref:Po(e,b),...w.getStyles("dropdown",{className:i,style:o,styles:l,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:E,children:[Y.jsx("div",{tabIndex:-1,"data-autofocus":!0,"aria-hidden":!0,style:{outline:0}}),v]})});kX.classes=j4;kX.displayName="@mantine/core/MenuDropdown";const F7e={},CX=tc((t,e)=>{const{classNames:n,className:i,style:o,styles:l,vars:d,color:p,closeMenuOnClick:g,leftSection:v,rightSection:_,children:b,disabled:w,...E}=Dt("MenuItem",F7e,t),S=S6(),M=ec(),{dir:k}=av(),x=de.useRef(),C=S.getItemIndex(x.current),P=E,O=Vh(P.onMouseLeave,()=>S.setHovered(-1)),L=Vh(P.onMouseEnter,()=>S.setHovered(S.getItemIndex(x.current))),B=Vh(P.onClick,()=>{typeof g=="boolean"?g&&S.closeDropdownImmediately():S.closeOnItemClick&&S.closeDropdownImmediately()}),V=Vh(P.onFocus,()=>S.setHovered(S.getItemIndex(x.current))),G=p?M.variantColorResolver({color:p,theme:M,variant:"light"}):void 0,j=p?lm({color:p,theme:M}):null;return Y.jsxs(R0,{...E,unstyled:S.unstyled,tabIndex:S.menuItemTabIndex,onFocus:V,...S.getStyles("item",{className:i,style:o,styles:l,classNames:n}),ref:Po(x,e),role:"menuitem",disabled:w,"data-menu-item":!0,"data-disabled":w||void 0,"data-hovered":S.hovered===C?!0:void 0,onMouseEnter:L,onMouseLeave:O,onClick:B,onKeyDown:lq({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:S.loop,dir:k,orientation:"vertical",onKeyDown:P.onKeydown}),__vars:{"--menu-item-color":j!=null&&j.isThemeColor&&(j==null?void 0:j.shade)===void 0?`var(--mantine-color-${j.color}-6)`:G==null?void 0:G.color,"--menu-item-hover":G==null?void 0:G.hover},children:[v&&Y.jsx("div",{...S.getStyles("itemSection",{styles:l,classNames:n}),"data-position":"left",children:v}),b&&Y.jsx("div",{...S.getStyles("itemLabel",{styles:l,classNames:n}),children:b}),_&&Y.jsx("div",{...S.getStyles("itemSection",{styles:l,classNames:n}),"data-position":"right",children:_})]})});CX.classes=j4;CX.displayName="@mantine/core/MenuItem";const V7e={},PX=pn((t,e)=>{const{classNames:n,className:i,style:o,styles:l,vars:d,...p}=Dt("MenuLabel",V7e,t),g=S6();return Y.jsx(Xt,{ref:e,...g.getStyles("label",{className:i,style:o,styles:l,classNames:n}),...p})});PX.classes=j4;PX.displayName="@mantine/core/MenuLabel";const G7e={refProp:"ref"},x2e=de.forwardRef((t,e)=>{const{children:n,refProp:i,...o}=Dt("MenuTarget",G7e,t);if(!Em(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const l=S6(),d=Vh(n.props.onClick,()=>{l.trigger==="click"?l.toggleDropdown():l.trigger==="click-hover"&&(l.setOpenedViaClick(!0),l.opened||l.openDropdown())}),p=Vh(n.props.onMouseEnter,()=>(l.trigger==="hover"||l.trigger==="click-hover")&&l.openDropdown()),g=Vh(n.props.onMouseLeave,()=>{(l.trigger==="hover"||l.trigger==="click-hover"&&!l.openedViaClick)&&l.closeDropdown()});return Y.jsx(Fc.Target,{refProp:i,popupType:"menu",ref:e,...o,children:de.cloneElement(n,{onClick:d,onMouseEnter:p,onMouseLeave:g,"data-expanded":l.opened?!0:void 0})})});x2e.displayName="@mantine/core/MenuTarget";const j7e={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function bf(t){const e=Dt("Menu",j7e,t),{children:n,onOpen:i,onClose:o,opened:l,defaultOpened:d,trapFocus:p,onChange:g,closeOnItemClick:v,loop:_,closeOnEscape:b,trigger:w,openDelay:E,closeDelay:S,classNames:M,styles:k,unstyled:x,variant:C,vars:P,menuItemTabIndex:O,keepMounted:L,...B}=e,V=er({name:"Menu",classes:j4,props:e,classNames:M,styles:k,unstyled:x}),[G,{setHovered:j,resetHovered:F}]=IPe(),[q,fe]=Cl({value:l,defaultValue:d,finalValue:!1,onChange:g}),[ue,J]=de.useState(!1),le=()=>{fe(!1),J(!1),q&&(o==null||o())},me=()=>{fe(!0),!q&&(i==null||i())},be=()=>{q?le():me()},{openDropdown:ye,closeDropdown:pe}=C7e({open:me,close:le,closeDelay:S,openDelay:E}),oe=Se=>OPe("[data-menu-item]","[data-menu-dropdown]",Se),{resolvedClassNames:Ce,resolvedStyles:it}=m6({classNames:M,styles:k,props:e});return ku(()=>{F()},[q]),Y.jsx(z7e,{value:{getStyles:V,opened:q,toggleDropdown:be,getItemIndex:oe,hovered:G,setHovered:j,openedViaClick:ue,setOpenedViaClick:J,closeOnItemClick:v,closeDropdown:w==="click"?le:pe,openDropdown:w==="click"?me:ye,closeDropdownImmediately:le,loop:_,trigger:w,unstyled:x,menuItemTabIndex:O},children:Y.jsx(Fc,{...B,opened:q,onChange:be,defaultOpened:d,trapFocus:L?!1:p,closeOnEscape:b,__staticSelector:"Menu",classNames:Ce,styles:it,unstyled:x,variant:C,keepMounted:L,children:n})})}bf.extend=t=>t;bf.classes=j4;bf.displayName="@mantine/core/Menu";bf.Item=CX;bf.Label=PX;bf.Dropdown=kX;bf.Target=x2e;bf.Divider=MX;const[H7e,H4]=Hc("Modal component was not found in tree");var Ep={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const $7e={},KI=pn((t,e)=>{const n=Dt("ModalBody",$7e,t),{classNames:i,className:o,style:l,styles:d,vars:p,...g}=n,v=H4();return Y.jsx(Gpe,{ref:e,...v.getStyles("body",{classNames:i,style:l,styles:d,className:o}),...g})});KI.classes=Ep;KI.displayName="@mantine/core/ModalBody";const W7e={},JI=pn((t,e)=>{const n=Dt("ModalCloseButton",W7e,t),{classNames:i,className:o,style:l,styles:d,vars:p,...g}=n,v=H4();return Y.jsx(jpe,{ref:e,...v.getStyles("close",{classNames:i,style:l,styles:d,className:o}),...g})});JI.classes=Ep;JI.displayName="@mantine/core/ModalCloseButton";const Y7e={},e7=pn((t,e)=>{const n=Dt("ModalContent",Y7e,t),{classNames:i,className:o,style:l,styles:d,vars:p,children:g,...v}=n,_=H4(),b=_.scrollAreaComponent||LOe;return Y.jsx(DOe,{..._.getStyles("content",{className:o,style:l,styles:d,classNames:i}),innerProps:_.getStyles("inner",{className:o,style:l,styles:d,classNames:i}),"data-full-screen":_.fullScreen||void 0,"data-modal-content":!0,ref:e,...v,children:Y.jsx(b,{style:{maxHeight:_.fullScreen?"100dvh":`calc(100dvh - (${yt(_.yOffset)} * 2))`},children:g})})});e7.classes=Ep;e7.displayName="@mantine/core/ModalContent";const q7e={},t7=pn((t,e)=>{const n=Dt("ModalHeader",q7e,t),{classNames:i,className:o,style:l,styles:d,vars:p,...g}=n,v=H4();return Y.jsx(Hpe,{ref:e,...v.getStyles("header",{classNames:i,style:l,styles:d,className:o}),...g})});t7.classes=Ep;t7.displayName="@mantine/core/ModalHeader";const X7e={},n7=pn((t,e)=>{const n=Dt("ModalOverlay",X7e,t),{classNames:i,className:o,style:l,styles:d,vars:p,...g}=n,v=H4();return Y.jsx($pe,{ref:e,...v.getStyles("overlay",{classNames:i,style:l,styles:d,className:o}),...g})});n7.classes=Ep;n7.displayName="@mantine/core/ModalOverlay";const Z7e={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Sm("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},Q7e=(t,{radius:e,size:n,yOffset:i,xOffset:o})=>({root:{"--modal-radius":e===void 0?void 0:fa(e),"--modal-size":mi(n,"modal-size"),"--modal-y-offset":yt(i),"--modal-x-offset":yt(o)}}),r7=pn((t,e)=>{const n=Dt("ModalRoot",Z7e,t),{classNames:i,className:o,style:l,styles:d,unstyled:p,vars:g,yOffset:v,scrollAreaComponent:_,radius:b,fullScreen:w,centered:E,xOffset:S,__staticSelector:M,...k}=n,x=er({name:M,classes:Ep,props:n,className:o,style:l,classNames:i,styles:d,unstyled:p,vars:g,varsResolver:Q7e});return Y.jsx(H7e,{value:{yOffset:v,scrollAreaComponent:_,getStyles:x,fullScreen:w},children:Y.jsx(POe,{ref:e,...x("root"),"data-full-screen":w||void 0,"data-centered":E||void 0,unstyled:p,...k})})});r7.classes=Ep;r7.displayName="@mantine/core/ModalRoot";const K7e={},i7=pn((t,e)=>{const n=Dt("ModalTitle",K7e,t),{classNames:i,className:o,style:l,styles:d,vars:p,...g}=n,v=H4();return Y.jsx(Wpe,{ref:e,...v.getStyles("title",{classNames:i,style:l,styles:d,className:o}),...g})});i7.classes=Ep;i7.displayName="@mantine/core/ModalTitle";const J7e={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Sm("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},Nd=pn((t,e)=>{const{title:n,withOverlay:i,overlayProps:o,withCloseButton:l,closeButtonProps:d,children:p,radius:g,...v}=Dt("Modal",J7e,t),_=!!n||l;return Y.jsxs(r7,{ref:e,radius:g,...v,children:[i&&Y.jsx(n7,{...o}),Y.jsxs(e7,{radius:g,children:[_&&Y.jsxs(t7,{children:[n&&Y.jsx(i7,{children:n}),l&&Y.jsx(JI,{...d})]}),Y.jsx(KI,{children:p})]})]})});Nd.classes=Ep;Nd.displayName="@mantine/core/Modal";Nd.Root=r7;Nd.Overlay=n7;Nd.Content=e7;Nd.Body=KI;Nd.Header=t7;Nd.Title=i7;Nd.CloseButton=JI;const[e9e,RX]=LI(),[t9e,n9e]=LI();var s7={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const r9e={},i9e=(t,{gap:e},{size:n})=>({group:{"--pg-gap":e!==void 0?mi(e):mi(n,"pg-gap")}}),DX=pn((t,e)=>{const n=Dt("PillGroup",r9e,t),{classNames:i,className:o,style:l,styles:d,unstyled:p,vars:g,size:v,disabled:_,...b}=n,w=RX(),E=(w==null?void 0:w.size)||v||void 0,S=er({name:"PillGroup",classes:s7,props:n,className:o,style:l,classNames:i,styles:d,unstyled:p,vars:g,varsResolver:i9e,stylesCtx:{size:E},rootSelector:"group"});return Y.jsx(t9e,{value:{size:E,disabled:_},children:Y.jsx(Xt,{ref:e,size:E,...S("group"),...b})})});DX.classes=s7;DX.displayName="@mantine/core/PillGroup";const s9e={variant:"default"},o9e=(t,{radius:e},{size:n})=>({root:{"--pill-fz":mi(n,"pill-fz"),"--pill-height":mi(n,"pill-height"),"--pill-radius":e===void 0?void 0:fa(e)}}),ET=pn((t,e)=>{const n=Dt("Pill",s9e,t),{classNames:i,className:o,style:l,styles:d,unstyled:p,vars:g,variant:v,children:_,withRemoveButton:b,onRemove:w,removeButtonProps:E,radius:S,size:M,disabled:k,mod:x,...C}=n,P=n9e(),O=RX(),L=M||(P==null?void 0:P.size)||void 0,B=(O==null?void 0:O.variant)==="filled"?"contrast":v||"default",V=er({name:"Pill",classes:s7,props:n,className:o,style:l,classNames:i,styles:d,unstyled:p,vars:g,varsResolver:o9e,stylesCtx:{size:L}});return Y.jsxs(Xt,{component:"span",ref:e,variant:B,size:L,...V("root",{variant:B}),mod:[{"with-remove":b&&!k,disabled:k||(P==null?void 0:P.disabled)},x],...C,children:[Y.jsx("span",{...V("label"),children:_}),b&&Y.jsx(cv,{variant:"transparent",radius:S,tabIndex:-1,"aria-hidden":!0,unstyled:p,...E,...V("remove",{className:E==null?void 0:E.className,style:E==null?void 0:E.style}),onMouseDown:G=>{var j;G.preventDefault(),G.stopPropagation(),(j=E==null?void 0:E.onMouseDown)==null||j.call(E,G)},onClick:G=>{var j;G.stopPropagation(),w==null||w(),(j=E==null?void 0:E.onClick)==null||j.call(E,G)}})]})});ET.classes=s7;ET.displayName="@mantine/core/Pill";ET.Group=DX;var M2e={field:"m_45c4369d"};const a9e={type:"visible"},OX=pn((t,e)=>{const n=Dt("PillsInputField",a9e,t),{classNames:i,className:o,style:l,styles:d,unstyled:p,vars:g,type:v,disabled:_,id:b,pointer:w,mod:E,...S}=n,M=RX(),k=V4(),x=er({name:"PillsInputField",classes:M2e,props:n,className:o,style:l,classNames:i,styles:d,unstyled:p,rootSelector:"field"}),C=_||(M==null?void 0:M.disabled);return Y.jsx(Xt,{component:"input",ref:Po(e,M==null?void 0:M.fieldRef),"data-type":v,disabled:C,mod:[{disabled:C,pointer:w},E],...x("field"),...S,id:(k==null?void 0:k.inputId)||b,"aria-invalid":M==null?void 0:M.hasError,"aria-describedby":k==null?void 0:k.describedBy,type:"text",onMouseDown:P=>!w&&P.stopPropagation()})});OX.classes=M2e;OX.displayName="@mantine/core/PillsInputField";const l9e={},zO=pn((t,e)=>{const n=Dt("PillsInput",l9e,t),{children:i,onMouseDown:o,onClick:l,size:d,disabled:p,__staticSelector:g,error:v,variant:_,...b}=n,w=de.useRef();return Y.jsx(e9e,{value:{fieldRef:w,size:d,disabled:p,hasError:!!v,variant:_},children:Y.jsx(Nu,{size:d,error:v,variant:_,component:"div",ref:e,onMouseDown:E=>{var S;E.preventDefault(),o==null||o(E),(S=w.current)==null||S.focus()},onClick:E=>{var S;E.preventDefault(),l==null||l(E),(S=w.current)==null||S.focus()},...b,multiline:!0,disabled:p,__staticSelector:g||"PillsInput",withAria:!1,children:i})})});zO.displayName="@mantine/core/PillsInput";zO.Field=OX;function c9e({data:t,value:e}){const n=e.map(o=>o.trim().toLowerCase());return t.reduce((o,l)=>(Bb(l)?o.push({group:l.group,items:l.items.filter(d=>n.indexOf(d.value.toLowerCase().trim())===-1)}):n.indexOf(l.value.toLowerCase().trim())===-1&&o.push(l),o),[])}const u9e={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},IX=pn((t,e)=>{const n=Dt("MultiSelect",u9e,t),{classNames:i,className:o,style:l,styles:d,unstyled:p,vars:g,size:v,value:_,defaultValue:b,onChange:w,onKeyDown:E,variant:S,data:M,dropdownOpened:k,defaultDropdownOpened:x,onDropdownOpen:C,onDropdownClose:P,selectFirstOptionOnChange:O,onOptionSubmit:L,comboboxProps:B,filter:V,limit:G,withScrollArea:j,maxDropdownHeight:F,searchValue:q,defaultSearchValue:fe,onSearchChange:ue,readOnly:J,disabled:le,onFocus:me,onBlur:be,onPaste:ye,radius:pe,rightSection:oe,rightSectionWidth:Ce,rightSectionPointerEvents:it,rightSectionProps:Se,leftSection:Oe,leftSectionWidth:ct,leftSectionPointerEvents:_t,leftSectionProps:Nt,inputContainer:Je,inputWrapperOrder:ot,withAsterisk:fn,labelProps:Ht,descriptionProps:Re,errorProps:Lt,wrapperProps:mt,description:ht,label:at,error:Mt,maxValues:Ot,searchable:It,nothingFoundMessage:Zt,withCheckIcon:ke,checkIconPosition:he,hidePickedOptions:tt,withErrorStyles:wt,name:St,form:De,id:nt,clearable:Et,clearButtonProps:Qe,hiddenInputProps:lt,placeholder:xt,hiddenInputValuesDivider:ft,required:Cn,mod:Rn,renderOption:dn,onRemove:Qt,onClear:vn,scrollAreaProps:Yn,...ir}=n,li=B0(nt),st=Jpe(M),sn=tX(st),gt=dX({opened:k,defaultOpened:x,onDropdownOpen:C,onDropdownClose:()=>{P==null||P(),gt.resetSelectedOption()}}),{styleProps:on,rest:{type:_n,autoComplete:Sr,...si}}=g6(ir),[mr,gi]=Cl({value:_,defaultValue:b,finalValue:[],onChange:w}),[qr,ji]=Cl({value:q,defaultValue:fe,finalValue:"",onChange:ue}),Ks=er({name:"MultiSelect",classes:{},props:n,classNames:i,styles:d,unstyled:p}),{resolvedClassNames:zu,resolvedStyles:Ff}=m6({props:n,styles:d,classNames:i}),Yc=vi=>{E==null||E(vi),vi.key===" "&&!It&&(vi.preventDefault(),gt.toggleDropdown()),vi.key==="Backspace"&&qr.length===0&&mr.length>0&&(Qt==null||Qt(mr[mr.length-1]),gi(mr.slice(0,mr.length-1)))},Vf=mr.map((vi,rc)=>{var qc,K;return Y.jsx(ET,{withRemoveButton:!J&&!((qc=sn[vi])!=null&&qc.disabled),onRemove:()=>{gi(mr.filter($=>vi!==$)),Qt==null||Qt(vi)},unstyled:p,disabled:le,...Ks("pill"),children:((K=sn[vi])==null?void 0:K.label)||vi},`${vi}-${rc}`)});de.useEffect(()=>{O&&gt.selectFirstOption()},[O,mr]);const Ka=Et&&mr.length>0&&!le&&!J&&Y.jsx(_i.ClearButton,{size:v,...Qe,onClear:()=>{vn==null||vn(),gi([]),ji("")}}),go=c9e({data:st,value:mr});return Y.jsxs(Y.Fragment,{children:[Y.jsxs(_i,{store:gt,classNames:zu,styles:Ff,unstyled:p,size:v,readOnly:J,__staticSelector:"MultiSelect",onOptionSubmit:vi=>{L==null||L(vi),ji(""),gt.updateSelectedOptionIndex("selected"),mr.includes(sn[vi].value)?(gi(mr.filter(rc=>rc!==sn[vi].value)),Qt==null||Qt(sn[vi].value)):mr.length<Ot&&gi([...mr,sn[vi].value])},...B,children:[Y.jsx(_i.DropdownTarget,{children:Y.jsx(zO,{...on,__staticSelector:"MultiSelect",classNames:zu,styles:Ff,unstyled:p,size:v,className:o,style:l,variant:S,disabled:le,radius:pe,rightSection:oe||Ka||Y.jsx(_i.Chevron,{size:v,error:Mt,unstyled:p}),rightSectionPointerEvents:it||(Ka?"all":"none"),rightSectionWidth:Ce,rightSectionProps:Se,leftSection:Oe,leftSectionWidth:ct,leftSectionPointerEvents:_t,leftSectionProps:Nt,inputContainer:Je,inputWrapperOrder:ot,withAsterisk:fn,labelProps:Ht,descriptionProps:Re,errorProps:Lt,wrapperProps:mt,description:ht,label:at,error:Mt,multiline:!0,withErrorStyles:wt,__stylesApiProps:{...n,rightSectionPointerEvents:it||(Ka?"all":"none"),multiline:!0},pointer:!It,onClick:()=>It?gt.openDropdown():gt.toggleDropdown(),"data-expanded":gt.dropdownOpened||void 0,id:li,required:Cn,mod:Rn,children:Y.jsxs(ET.Group,{disabled:le,unstyled:p,...Ks("pillsList"),children:[Vf,Y.jsx(_i.EventsTarget,{autoComplete:Sr,children:Y.jsx(zO.Field,{...si,ref:e,id:li,placeholder:xt,type:!It&&!xt?"hidden":"visible",...Ks("inputField"),unstyled:p,onFocus:vi=>{me==null||me(vi),It&&gt.openDropdown()},onBlur:vi=>{be==null||be(vi),gt.closeDropdown(),ji("")},onKeyDown:Yc,value:qr,onChange:vi=>{ji(vi.currentTarget.value),It&&gt.openDropdown(),O&&gt.selectFirstOption()},disabled:le,readOnly:J||!It,pointer:!It})})]})})}),Y.jsx(u2e,{data:tt?go:st,hidden:J||le,filter:V,search:qr,limit:G,hiddenWhenEmpty:!It||!Zt||tt&&go.length===0&&qr.trim().length===0,withScrollArea:j,maxDropdownHeight:F,filterOptions:It,value:mr,checkIconPosition:he,withCheckIcon:ke,nothingFoundMessage:Zt,unstyled:p,labelId:at?`${li}-label`:void 0,"aria-label":at?void 0:ir["aria-label"],renderOption:dn,scrollAreaProps:Yn})]}),Y.jsx(_i.HiddenInput,{name:St,valuesDivider:ft,value:mr,form:De,disabled:le,...lt})]})});IX.classes={...Nu.classes,..._i.classes};IX.displayName="@mantine/core/MultiSelect";function k2e(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]]);return n}var ST;(function(t){t.event="event",t.props="prop"})(ST||(ST={}));function I2(){}function f9e(t){var e,n=void 0;return function(){for(var i=[],o=arguments.length;o--;)i[o]=arguments[o];return e&&i.length===e.length&&i.every(function(l,d){return l===e[d]})||(e=i,n=t.apply(void 0,i)),n}}function TT(t){return!!(t||"").match(/\d/)}function wb(t){return t==null}function d9e(t){return typeof t=="number"&&isNaN(t)}function C2e(t){return wb(t)||d9e(t)||typeof t=="number"&&!isFinite(t)}function P2e(t){return t.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function h9e(t){switch(t){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function p9e(t,e,n){var i=h9e(n),o=t.search(/[1-9]/);return o=o===-1?t.length:o,t.substring(0,o)+t.substring(o,t.length).replace(i,"$1"+e)}function m9e(t){var e=de.useRef(t);e.current=t;var n=de.useRef(function(){for(var i=[],o=arguments.length;o--;)i[o]=arguments[o];return e.current.apply(e,i)});return n.current}function NX(t,e){e===void 0&&(e=!0);var n=t[0]==="-",i=n&&e;t=t.replace("-","");var o=t.split("."),l=o[0],d=o[1]||"";return{beforeDecimal:l,afterDecimal:d,hasNegation:n,addNegation:i}}function g9e(t){if(!t)return t;var e=t[0]==="-";e&&(t=t.substring(1,t.length));var n=t.split("."),i=n[0].replace(/^0+/,"")||"0",o=n[1]||"";return(e?"-":"")+i+(o?"."+o:"")}function R2e(t,e,n){for(var i="",o=n?"0":"",l=0;l<=e-1;l++)i+=t[l]||o;return i}function die(t,e){return Array(e+1).join(t)}function D2e(t){var e=t+"",n=e[0]==="-"?"-":"";n&&(e=e.substring(1));var i=e.split(/[eE]/g),o=i[0],l=i[1];if(l=Number(l),!l)return n+o;o=o.replace(".","");var d=1+l,p=o.length;return d<0?o="0."+die("0",Math.abs(d))+o:d>=p?o=o+die("0",d-p):o=(o.substring(0,d)||"0")+"."+o.substring(d),n+o}function hie(t,e,n){if(["","-"].indexOf(t)!==-1)return t;var i=(t.indexOf(".")!==-1||n)&&e,o=NX(t),l=o.beforeDecimal,d=o.afterDecimal,p=o.hasNegation,g=parseFloat("0."+(d||"0")),v=d.length<=e?"0."+d:g.toFixed(e),_=v.split("."),b=l;l&&Number(_[0])&&(b=l.split("").reverse().reduce(function(M,k,x){return M.length>x?(Number(M[0])+Number(k)).toString()+M.substring(1,M.length):k+M},_[0]));var w=R2e(_[1]||"",e,n),E=p?"-":"",S=i?".":"";return""+E+b+S+w}function pg(t,e){if(t.value=t.value,t!==null){if(t.createTextRange){var n=t.createTextRange();return n.move("character",e),n.select(),!0}return t.selectionStart||t.selectionStart===0?(t.focus(),t.setSelectionRange(e,e),!0):(t.focus(),!1)}}var O2e=f9e(function(t,e){for(var n=0,i=0,o=t.length,l=e.length;t[n]===e[n]&&n<o;)n++;for(;t[o-1-i]===e[l-1-i]&&l-i>n&&o-i>n;)i++;return{from:{start:n,end:o-i},to:{start:n,end:l-i}}});function v9e(t,e,n){return Math.min(Math.max(t,e),n)}function nF(t){return Math.max(t.selectionStart,t.selectionEnd)}function _9e(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function y9e(t){return{from:{start:0,end:0},to:{start:0,end:t.length},lastValue:""}}function b9e(t){var e=t.currentValue,n=t.formattedValue,i=t.currentValueIndex,o=t.formattedValueIndex;return e[i]===n[o]}function A9e(t,e,n,i,o,l,d){d===void 0&&(d=b9e);var p=o.findIndex(function(O){return O}),g=t.slice(0,p);!e&&!n.startsWith(g)&&(e=g,n=g+n,i=i+g.length);for(var v=n.length,_=t.length,b={},w=new Array(v),E=0;E<v;E++){w[E]=-1;for(var S=0,M=_;S<M;S++){var k=d({currentValue:n,lastValue:e,formattedValue:t,currentValueIndex:E,formattedValueIndex:S});if(k&&b[S]!==!0){w[E]=S,b[S]=!0;break}}}for(var x=i;x<v&&(w[x]===-1||!l(n[x]));)x++;var C=x===v||w[x]===-1?_:w[x];for(x=i-1;x>0&&w[x]===-1;)x--;var P=x===-1||w[x]===-1?0:w[x]+1;return P>C?C:i-P<C-i?P:C}function pie(t,e,n,i){var o=t.length;if(e=v9e(e,0,o),i==="left"){for(;e>=0&&!n[e];)e--;e===-1&&(e=n.indexOf(!0))}else{for(;e<=o&&!n[e];)e++;e>o&&(e=n.lastIndexOf(!0))}return e===-1&&(e=o),e}function w9e(t){for(var e=Array.from({length:t.length+1}).map(function(){return!0}),n=0,i=e.length;n<i;n++)e[n]=!!(TT(t[n])||TT(t[n-1]));return e}function I2e(t,e,n,i,o,l){l===void 0&&(l=I2);var d=m9e(function(S,M){var k,x;return C2e(S)?(x="",k=""):typeof S=="number"||M?(x=typeof S=="number"?D2e(S):S,k=i(x)):(x=o(S,void 0),k=i(x)),{formattedValue:k,numAsString:x}}),p=de.useState(function(){return d(wb(t)?e:t,n)}),g=p[0],v=p[1],_=function(S,M){S.formattedValue!==g.formattedValue&&v({formattedValue:S.formattedValue,numAsString:S.value}),l(S,M)},b=t,w=n;wb(t)&&(b=g.numAsString,w=!0);var E=d(b,w);return de.useMemo(function(){v(E)},[E.formattedValue]),[g,_]}function E9e(t){return t.replace(/[^0-9]/g,"")}function S9e(t){return t}function T9e(t){var e=t.type;e===void 0&&(e="text");var n=t.displayType;n===void 0&&(n="input");var i=t.customInput,o=t.renderText,l=t.getInputRef,d=t.format;d===void 0&&(d=S9e);var p=t.removeFormatting;p===void 0&&(p=E9e);var g=t.defaultValue,v=t.valueIsNumericString,_=t.onValueChange,b=t.isAllowed,w=t.onChange;w===void 0&&(w=I2);var E=t.onKeyDown;E===void 0&&(E=I2);var S=t.onMouseUp;S===void 0&&(S=I2);var M=t.onFocus;M===void 0&&(M=I2);var k=t.onBlur;k===void 0&&(k=I2);var x=t.value,C=t.getCaretBoundary;C===void 0&&(C=w9e);var P=t.isValidInputCharacter;P===void 0&&(P=TT);var O=t.isCharacterSame,L=k2e(t,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),B=I2e(x,g,!!v,d,p,_),V=B[0],G=V.formattedValue,j=V.numAsString,F=B[1],q=de.useRef({formattedValue:G,numAsString:j}),fe=function(ht,at){q.current={formattedValue:ht.formattedValue,numAsString:ht.value},F(ht,at)},ue=de.useState(!1),J=ue[0],le=ue[1],me=de.useRef(null),be=de.useRef({setCaretTimeout:null,focusTimeout:null});de.useEffect(function(){return le(!0),function(){clearTimeout(be.current.setCaretTimeout),clearTimeout(be.current.focusTimeout)}},[]);var ye=d,pe=function(ht,at){var Mt=parseFloat(at);return{formattedValue:ht,value:at,floatValue:isNaN(Mt)?void 0:Mt}},oe=function(ht,at,Mt){ht.selectionStart===0&&ht.selectionEnd===ht.value.length||(pg(ht,at),be.current.setCaretTimeout=setTimeout(function(){ht.value===Mt&&ht.selectionStart!==at&&pg(ht,at)},0))},Ce=function(ht,at,Mt){return pie(ht,at,C(ht),Mt)},it=function(ht,at,Mt){var Ot=C(at),It=A9e(at,G,ht,Mt,Ot,P,O);return It=pie(at,It,Ot),It},Se=function(ht){var at=ht.formattedValue;at===void 0&&(at="");var Mt=ht.input,Ot=ht.source,It=ht.event,Zt=ht.numAsString,ke;if(Mt){var he=ht.inputValue||Mt.value,tt=nF(Mt);Mt.value=at,ke=it(he,at,tt),ke!==void 0&&oe(Mt,ke,at)}at!==G&&fe(pe(at,Zt),{event:It,source:Ot})};de.useEffect(function(){var ht=q.current,at=ht.formattedValue,Mt=ht.numAsString;G!==at&&(G!==j||at!==Mt)&&fe(pe(G,j),{event:void 0,source:ST.props})},[G,j]);var Oe=me.current?nF(me.current):void 0,ct=typeof window<"u"?de.useLayoutEffect:de.useEffect;ct(function(){var ht=me.current;if(G!==q.current.formattedValue&&ht){var at=it(q.current.formattedValue,G,Oe);ht.value=G,oe(ht,at,G)}},[G]);var _t=function(ht,at,Mt){var Ot=O2e(G,ht),It=Object.assign(Object.assign({},Ot),{lastValue:G}),Zt=p(ht,It),ke=ye(Zt);if(Zt=p(ke,void 0),b&&!b(pe(ke,Zt))){var he=at.target,tt=nF(he),wt=it(ht,G,tt);return he.value=G,oe(he,wt,G),!1}return Se({formattedValue:ke,numAsString:Zt,inputValue:ht,event:at,source:Mt,input:at.target}),!0},Nt=function(ht){var at=ht.target,Mt=at.value,Ot=_t(Mt,ht,ST.event);Ot&&w(ht)},Je=function(ht){var at=ht.target,Mt=ht.key,Ot=at.selectionStart,It=at.selectionEnd,Zt=at.value;Zt===void 0&&(Zt="");var ke;if(Mt==="ArrowLeft"||Mt==="Backspace"?ke=Math.max(Ot-1,0):Mt==="ArrowRight"?ke=Math.min(Ot+1,Zt.length):Mt==="Delete"&&(ke=Ot),ke===void 0||Ot!==It){E(ht);return}var he=ke;if(Mt==="ArrowLeft"||Mt==="ArrowRight"){var tt=Mt==="ArrowLeft"?"left":"right";he=Ce(Zt,ke,tt),he!==ke&&ht.preventDefault()}else Mt==="Delete"&&!P(Zt[ke])?he=Ce(Zt,ke,"right"):Mt==="Backspace"&&!P(Zt[ke])&&(he=Ce(Zt,ke,"left"));he!==ke&&oe(at,he,Zt),ht.isUnitTestRun&&oe(at,he,Zt),E(ht)},ot=function(ht){var at=ht.target,Mt=function(){var Ot=at.selectionStart,It=at.selectionEnd,Zt=at.value;if(Zt===void 0&&(Zt=""),Ot===It){var ke=Ce(Zt,Ot);ke!==Ot&&oe(at,ke,Zt)}};Mt(),requestAnimationFrame(function(){Mt()}),S(ht)},fn=function(ht){ht.persist&&ht.persist();var at=ht.target,Mt=ht.currentTarget;me.current=at,be.current.focusTimeout=setTimeout(function(){var Ot=at.selectionStart,It=at.selectionEnd,Zt=at.value;Zt===void 0&&(Zt="");var ke=Ce(Zt,Ot);ke!==Ot&&!(Ot===0&&It===Zt.length)&&oe(at,ke,Zt),M(Object.assign(Object.assign({},ht),{currentTarget:Mt}))},0)},Ht=function(ht){me.current=null,clearTimeout(be.current.focusTimeout),clearTimeout(be.current.setCaretTimeout),k(ht)},Re=J&&_9e()?"numeric":void 0,Lt=Object.assign({inputMode:Re},L,{type:e,value:G,onChange:Nt,onKeyDown:Je,onMouseUp:ot,onFocus:fn,onBlur:Ht});if(n==="text")return o?gd.createElement(gd.Fragment,null,o(G,L)||null):gd.createElement("span",Object.assign({},L,{ref:l}),G);if(i){var mt=i;return gd.createElement(mt,Object.assign({},Lt,{ref:l}))}return gd.createElement("input",Object.assign({},Lt,{ref:l}))}function mie(t,e){var n=e.decimalScale,i=e.fixedDecimalScale,o=e.prefix;o===void 0&&(o="");var l=e.suffix;l===void 0&&(l="");var d=e.allowNegative,p=e.thousandsGroupStyle;if(p===void 0&&(p="thousand"),t===""||t==="-")return t;var g=o7(e),v=g.thousandSeparator,_=g.decimalSeparator,b=n!==0&&t.indexOf(".")!==-1||n&&i,w=NX(t,d),E=w.beforeDecimal,S=w.afterDecimal,M=w.addNegation;return n!==void 0&&(S=R2e(S,n,!!i)),v&&(E=p9e(E,v,p)),o&&(E=o+E),l&&(S=S+l),M&&(E="-"+E),t=E+(b&&_||"")+S,t}function o7(t){var e=t.decimalSeparator;e===void 0&&(e=".");var n=t.thousandSeparator,i=t.allowedDecimalSeparators;return n===!0&&(n=","),i||(i=[e,"."]),{decimalSeparator:e,thousandSeparator:n,allowedDecimalSeparators:i}}function x9e(t,e){t===void 0&&(t="");var n=new RegExp("(-)"),i=new RegExp("(-)(.)*(-)"),o=n.test(t),l=i.test(t);return t=t.replace(/-/g,""),o&&!l&&e&&(t="-"+t),t}function M9e(t,e){return new RegExp("(^-)|[0-9]|"+P2e(t),"g")}function k9e(t,e,n){return t===""?!0:!(e!=null&&e.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof t=="string"&&!isNaN(Number(t))}function C9e(t,e,n){var i;e===void 0&&(e=y9e(t));var o=n.allowNegative,l=n.prefix;l===void 0&&(l="");var d=n.suffix;d===void 0&&(d="");var p=n.decimalScale,g=e.from,v=e.to,_=v.start,b=v.end,w=o7(n),E=w.allowedDecimalSeparators,S=w.decimalSeparator,M=t[b]===S;if(TT(t)&&(t===l||t===d)&&e.lastValue==="")return t;if(b-_===1&&E.indexOf(t[_])!==-1){var k=p===0?"":S;t=t.substring(0,_)+k+t.substring(_+1,t.length)}var x=function(be,ye,pe){var oe=!1,Ce=!1;l.startsWith("-")?oe=!1:be.startsWith("--")?(oe=!1,Ce=!0):d.startsWith("-")&&be.length===d.length?oe=!1:be[0]==="-"&&(oe=!0);var it=oe?1:0;return Ce&&(it=2),it&&(be=be.substring(it),ye-=it,pe-=it),{value:be,start:ye,end:pe,hasNegation:oe}},C=x(t,_,b),P=C.hasNegation;i=C,t=i.value,_=i.start,b=i.end;var O=x(e.lastValue,g.start,g.end),L=O.start,B=O.end,V=O.value,G=t.substring(_,b);t.length&&V.length&&(L>V.length-d.length||B<l.length)&&!(G&&d.startsWith(G))&&(t=V);var j=0;t.startsWith(l)?j+=l.length:_<l.length&&(j=_),t=t.substring(j),b-=j;var F=t.length,q=t.length-d.length;t.endsWith(d)?F=q:(b>q||b>t.length-d.length)&&(F=b),t=t.substring(0,F),t=x9e(P?"-"+t:t,o),t=(t.match(M9e(S))||[]).join("");var fe=t.indexOf(S);t=t.replace(new RegExp(P2e(S),"g"),function(be,ye){return ye===fe?".":""});var ue=NX(t,o),J=ue.beforeDecimal,le=ue.afterDecimal,me=ue.addNegation;return v.end-v.start<g.end-g.start&&J===""&&M&&!parseFloat(le)&&(t=me?"-":""),t}function P9e(t,e){var n=e.prefix;n===void 0&&(n="");var i=e.suffix;i===void 0&&(i="");var o=Array.from({length:t.length+1}).map(function(){return!0}),l=t[0]==="-";o.fill(!1,0,n.length+(l?1:0));var d=t.length;return o.fill(!1,d-i.length+1,d+1),o}function R9e(t){var e=o7(t),n=e.thousandSeparator,i=e.decimalSeparator,o=t.prefix;o===void 0&&(o="");var l=t.allowNegative;if(l===void 0&&(l=!0),n===i)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+i+` (default value for decimalSeparator is .)
     `);return o.startsWith("-")&&l&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+o+`
      allowNegative: `+l+`
    `),l=!1),Object.assign(Object.assign({},t),{allowNegative:l})}function D9e(t){t=R9e(t),t.decimalSeparator,t.allowedDecimalSeparators,t.thousandsGroupStyle;var e=t.suffix,n=t.allowNegative,i=t.allowLeadingZeros,o=t.onKeyDown;o===void 0&&(o=I2);var l=t.onBlur;l===void 0&&(l=I2);var d=t.thousandSeparator,p=t.decimalScale,g=t.fixedDecimalScale,v=t.prefix;v===void 0&&(v="");var _=t.defaultValue,b=t.value,w=t.valueIsNumericString,E=t.onValueChange,S=k2e(t,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),M=o7(t),k=M.decimalSeparator,x=M.allowedDecimalSeparators,C=function(me){return mie(me,t)},P=function(me,be){return C9e(me,be,t)},O=wb(b)?_:b,L=w??k9e(O,v,e);wb(b)?wb(_)||(L=L||typeof _=="number"):L=L||typeof b=="number";var B=function(me){return C2e(me)?me:(typeof me=="number"&&(me=D2e(me)),L&&typeof p=="number"?hie(me,p,!!g):me)},V=I2e(B(b),B(_),!!L,C,P,E),G=V[0],j=G.numAsString,F=G.formattedValue,q=V[1],fe=function(me){var be=me.target,ye=me.key,pe=be.selectionStart,oe=be.selectionEnd,Ce=be.value;if(Ce===void 0&&(Ce=""),pe!==oe){o(me);return}ye==="Backspace"&&Ce[0]==="-"&&pe===v.length+1&&n&&pg(be,1),p&&g&&(ye==="Backspace"&&Ce[pe-1]===k?(pg(be,pe-1),me.preventDefault()):ye==="Delete"&&Ce[pe]===k&&me.preventDefault()),x!=null&&x.includes(ye)&&Ce[pe]===k&&pg(be,pe+1);var it=d===!0?",":d;ye==="Backspace"&&Ce[pe-1]===it&&pg(be,pe-1),ye==="Delete"&&Ce[pe]===it&&pg(be,pe+1),o(me)},ue=function(me){var be=j;if(be.match(/\d/g)||(be=""),i||(be=g9e(be)),g&&p&&(be=hie(be,p,g)),be!==j){var ye=mie(be,t);q({formattedValue:ye,value:be,floatValue:parseFloat(be)},{event:me,source:ST.event})}l(me)},J=function(me){return me===k?!0:TT(me)},le=function(me){var be=me.currentValue,ye=me.lastValue,pe=me.formattedValue,oe=me.currentValueIndex,Ce=me.formattedValueIndex,it=be[oe],Se=pe[Ce],Oe=O2e(ye,be),ct=Oe.to;return oe>=ct.start&&oe<ct.end&&x&&x.includes(it)&&Se===k?!0:it===Se};return Object.assign(Object.assign({},S),{value:F,valueIsNumericString:!1,isValidInputCharacter:J,isCharacterSame:le,onValueChange:q,format:C,removeFormatting:P,getCaretBoundary:function(me){return P9e(me,t)},onKeyDown:fe,onBlur:ue})}function O9e(t){var e=D9e(t);return gd.createElement(T9e,Object.assign({},e))}function gie({direction:t,style:e,...n}){return Y.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:t==="up"?"rotate(180deg)":void 0,...e},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:Y.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var MH={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const I9e=/^-0(\.0*)?$/,N9e=/^-?0\d+$/;function L9e(t){return(typeof t=="number"?t<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(t)))&&!Number.isNaN(t)}function vie(t,e,n){if(t===void 0)return!0;const i=e===void 0||t>=e,o=n===void 0||t<=n;return i&&o}const z9e={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,startValue:0},B9e=(t,{size:e})=>({controls:{"--ni-chevron-size":mi(e,"ni-chevron-size")}}),LX=pn((t,e)=>{const n=Dt("NumberInput",z9e,t),{className:i,classNames:o,styles:l,unstyled:d,vars:p,onChange:g,onValueChange:v,value:_,defaultValue:b,max:w,min:E,step:S,hideControls:M,rightSection:k,isAllowed:x,clampBehavior:C,onBlur:P,allowDecimal:O,decimalScale:L,onKeyDown:B,onKeyDownCapture:V,handlersRef:G,startValue:j,disabled:F,rightSectionPointerEvents:q,allowNegative:fe,readOnly:ue,size:J,rightSectionWidth:le,stepHoldInterval:me,stepHoldDelay:be,allowLeadingZeros:ye,withKeyboardEvents:pe,...oe}=n,Ce=er({name:"NumberInput",classes:MH,props:n,classNames:o,styles:l,unstyled:d,vars:p,varsResolver:B9e}),{resolvedClassNames:it,resolvedStyles:Se}=m6({classNames:o,styles:l,props:n}),[Oe,ct]=Cl({value:_,defaultValue:b,onChange:g}),_t=be!==void 0&&me!==void 0,Nt=de.useRef(null),Je=de.useRef(null),ot=de.useRef(0),fn=(he,tt)=>{tt.source==="event"&&ct(L9e(he.floatValue)&&!I9e.test(he.value)&&!(ye&&N9e.test(he.value))?he.floatValue:he.value),v==null||v(he,tt)},Ht=he=>{const tt=String(he).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return tt?Math.max(0,(tt[1]?tt[1].length:0)-(tt[2]?+tt[2]:0)):0},Re=he=>{Nt.current&&typeof he<"u"&&Nt.current.setSelectionRange(he,he)},Lt=de.useRef();Lt.current=()=>{let he;const tt=Ht(Oe),wt=Ht(S),St=Math.max(tt,wt),De=10**St;if(typeof Oe!="number"||Number.isNaN(Oe))he=v0(j,E,w);else if(w!==void 0){const Et=(Math.round(Oe*De)+Math.round(S*De))/De;he=Et<=w?Et:w}else he=(Math.round(Oe*De)+Math.round(S*De))/De;const nt=he.toFixed(St);ct(parseFloat(nt)),v==null||v({floatValue:parseFloat(nt),formattedValue:nt,value:nt},{source:"increment"}),setTimeout(()=>{var Et;return Re((Et=Nt.current)==null?void 0:Et.value.length)},0)};const mt=de.useRef();mt.current=()=>{let he;const tt=E!==void 0?E:fe?Number.MIN_SAFE_INTEGER:0,wt=Ht(Oe),St=Ht(S),De=Math.max(wt,St),nt=10**De;if(typeof Oe!="number"||Number.isNaN(Oe))he=v0(j,tt,w);else{const Qe=(Math.round(Oe*nt)-Math.round(S*nt))/nt;he=tt!==void 0&&Qe<tt?tt:Qe}const Et=he.toFixed(De);ct(parseFloat(Et)),v==null||v({floatValue:parseFloat(Et),formattedValue:Et,value:Et},{source:"decrement"}),setTimeout(()=>{var Qe;return Re((Qe=Nt.current)==null?void 0:Qe.value.length)},0)};const ht=he=>{B==null||B(he),!(ue||!pe)&&(he.key==="ArrowUp"&&(he.preventDefault(),Lt.current()),he.key==="ArrowDown"&&(he.preventDefault(),mt.current()))},at=he=>{if(V==null||V(he),he.key==="Backspace"){const tt=Nt.current;tt.selectionStart===0&&tt.selectionStart===tt.selectionEnd&&(he.preventDefault(),window.setTimeout(()=>Re(0),0))}};UI(G,{increment:Lt.current,decrement:mt.current});const Mt=he=>{he?Lt.current():mt.current(),ot.current+=1},Ot=he=>{if(Mt(he),_t){const tt=typeof me=="number"?me:me(ot.current);Je.current=window.setTimeout(()=>Ot(he),tt)}},It=(he,tt)=>{var wt;he.preventDefault(),(wt=Nt.current)==null||wt.focus(),Mt(tt),_t&&(Je.current=window.setTimeout(()=>Ot(tt),be))},Zt=()=>{Je.current&&window.clearTimeout(Je.current),Je.current=null,ot.current=0},ke=Y.jsxs("div",{...Ce("controls"),children:[Y.jsx(R0,{...Ce("control"),tabIndex:-1,"aria-hidden":!0,disabled:F||typeof Oe=="number"&&w!==void 0&&Oe>=w,mod:{direction:"up"},onMouseDown:he=>he.preventDefault(),onPointerDown:he=>{It(he,!0)},onPointerUp:Zt,onPointerLeave:Zt,children:Y.jsx(gie,{direction:"up"})}),Y.jsx(R0,{...Ce("control"),tabIndex:-1,"aria-hidden":!0,disabled:F||typeof Oe=="number"&&E!==void 0&&Oe<=E,mod:{direction:"down"},onMouseDown:he=>he.preventDefault(),onPointerDown:he=>{It(he,!1)},onPointerUp:Zt,onPointerLeave:Zt,children:Y.jsx(gie,{direction:"down"})})]});return Y.jsx(Nu,{component:O9e,allowNegative:fe,className:Wo(MH.root,i),size:J,...oe,readOnly:ue,disabled:F,value:Oe,getInputRef:Po(e,Nt),onValueChange:fn,rightSection:M||ue?k:k||ke,classNames:it,styles:Se,unstyled:d,__staticSelector:"NumberInput",decimalScale:O?L:0,onKeyDown:ht,onKeyDownCapture:at,rightSectionPointerEvents:q??(F?"none":void 0),rightSectionWidth:le??`var(--ni-right-section-width-${J||"sm"})`,allowLeadingZeros:ye,onBlur:he=>{P==null||P(he),C==="blur"&&typeof Oe=="number"&&v0(Oe,E,w)!==Oe&&ct(v0(Oe,E,w))},isAllowed:he=>C==="strict"?x?x(he)&&vie(he.floatValue,E,w):vie(he.floatValue,E,w):x?x(he):!0})});LX.classes={...Nu.classes,...MH};LX.displayName="@mantine/core/NumberInput";const U9e={duration:100,transition:"fade"};function F9e(t,e){return{...U9e,...e,...t}}function V9e({offset:t,position:e}){const[n,i]=de.useState(!1),o=de.useRef(),{x:l,y:d,elements:p,refs:g,update:v,placement:_}=Lq({placement:e,middleware:[Dq({crossAxis:!0,padding:5,rootBoundary:"document"})]}),b=_.includes("right")?t:e.includes("left")?t*-1:0,w=_.includes("bottom")?t:e.includes("top")?t*-1:0,E=de.useCallback(({clientX:S,clientY:M})=>{g.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:S,y:M,left:S+b,top:M+w,right:S,bottom:M}}})},[p.reference]);return de.useEffect(()=>{if(g.floating.current){const S=o.current;S.addEventListener("mousemove",E);const M=qh(g.floating.current);return M.forEach(k=>{k.addEventListener("scroll",v)}),()=>{S.removeEventListener("mousemove",E),M.forEach(k=>{k.removeEventListener("scroll",v)})}}},[p.reference,g.floating.current,v,E,n]),{handleMouseMove:E,x:l,y:d,opened:n,setOpened:i,boundaryRef:o,floating:g.setFloating}}var a7={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const G9e={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:Sm("popover")},j9e=(t,{radius:e,color:n})=>({tooltip:{"--tooltip-radius":e===void 0?void 0:fa(e),"--tooltip-bg":n?qa(n,t):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),zX=pn((t,e)=>{const n=Dt("TooltipFloating",G9e,t),{children:i,refProp:o,withinPortal:l,style:d,className:p,classNames:g,styles:v,unstyled:_,radius:b,color:w,label:E,offset:S,position:M,multiline:k,zIndex:x,disabled:C,variant:P,vars:O,portalProps:L,...B}=n,V=ec(),G=er({name:"TooltipFloating",props:n,classes:a7,className:p,style:d,classNames:g,styles:v,unstyled:_,rootSelector:"tooltip",vars:O,varsResolver:j9e}),{handleMouseMove:j,x:F,y:q,opened:fe,boundaryRef:ue,floating:J,setOpened:le}=V9e({offset:S,position:M});if(!Em(i))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const me=Po(ue,i.ref,e),be=pe=>{var oe,Ce;(Ce=(oe=i.props).onMouseEnter)==null||Ce.call(oe,pe),j(pe),le(!0)},ye=pe=>{var oe,Ce;(Ce=(oe=i.props).onMouseLeave)==null||Ce.call(oe,pe),le(!1)};return Y.jsxs(Y.Fragment,{children:[Y.jsx(_6,{...L,withinPortal:l,children:Y.jsx(Xt,{...B,...G("tooltip",{style:{..._q(d,V),zIndex:x,display:!C&&fe?"block":"none",top:(q&&Math.round(q))??"",left:(F&&Math.round(F))??""}}),variant:P,ref:J,mod:{multiline:k},children:E})}),de.cloneElement(i,{...i.props,[o]:me,onMouseEnter:be,onMouseLeave:ye})]})});zX.classes=a7;zX.displayName="@mantine/core/TooltipFloating";const N2e=de.createContext(!1),H9e=N2e.Provider,$9e=()=>de.useContext(N2e),W9e={openDelay:0,closeDelay:0};function L2e(t){const{openDelay:e,closeDelay:n,children:i}=Dt("TooltipGroup",W9e,t);return Y.jsx(H9e,{value:!0,children:Y.jsx(GDe,{delay:{open:e,close:n},children:i})})}L2e.displayName="@mantine/core/TooltipGroup";function Y9e(t){var B,V,G;const[e,n]=de.useState(!1),o=typeof t.opened=="boolean"?t.opened:e,l=$9e(),d=B0(),{delay:p,currentId:g,setCurrentId:v}=Cpe(),_=de.useCallback(j=>{n(j),j&&v(d)},[v,d]),{x:b,y:w,context:E,refs:S,update:M,placement:k,middlewareData:{arrow:{x,y:C}={}}}=Lq({strategy:t.strategy,placement:t.position,open:o,onOpenChange:_,middleware:[Spe(t.offset),Dq({padding:8}),wH(),Tpe({element:t.arrowRef,padding:t.arrowOffset}),...t.inline?[EH()]:[]]}),{getReferenceProps:P,getFloatingProps:O}=XDe([VDe(E,{enabled:(B=t.events)==null?void 0:B.hover,delay:l?p:{open:t.openDelay,close:t.closeDelay},mouseOnly:!((V=t.events)!=null&&V.touch)}),qDe(E,{enabled:(G=t.events)==null?void 0:G.focus,visibleOnly:!0}),QDe(E,{role:"tooltip"}),WDe(E,{enabled:typeof t.opened>"u"}),jDe(E,{id:d})]);Lpe({opened:o,position:t.position,positionDependencies:t.positionDependencies,floating:{refs:S,update:M}}),ku(()=>{var j;(j=t.onPositionChange)==null||j.call(t,k)},[k]);const L=o&&g&&g!==d;return{x:b,y:w,arrowX:x,arrowY:C,reference:S.setReference,floating:S.setFloating,getFloatingProps:O,getReferenceProps:P,isGroupPhase:L,opened:o,placement:k}}const _ie={position:"top",refProp:"ref",withinPortal:!0,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:Sm("popover"),positionDependencies:[]},q9e=(t,{radius:e,color:n})=>({tooltip:{"--tooltip-radius":e===void 0?void 0:fa(e),"--tooltip-bg":n?qa(n,t):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),jh=pn((t,e)=>{const n=Dt("Tooltip",_ie,t),{children:i,position:o,refProp:l,label:d,openDelay:p,closeDelay:g,onPositionChange:v,opened:_,withinPortal:b,radius:w,color:E,classNames:S,styles:M,unstyled:k,style:x,className:C,withArrow:P,arrowSize:O,arrowOffset:L,arrowRadius:B,arrowPosition:V,offset:G,transitionProps:j,multiline:F,events:q,zIndex:fe,disabled:ue,positionDependencies:J,onClick:le,onMouseEnter:me,onMouseLeave:be,inline:ye,variant:pe,keepMounted:oe,vars:Ce,portalProps:it,mod:Se,floatingStrategy:Oe,...ct}=Dt("Tooltip",_ie,n),{dir:_t}=av(),Nt=de.useRef(null),Je=Y9e({position:Ppe(_t,o),closeDelay:g,openDelay:p,onPositionChange:v,opened:_,events:q,arrowRef:Nt,arrowOffset:L,offset:typeof G=="number"?G+(P?O/2:0):G,positionDependencies:[...J,i],inline:ye,strategy:Oe}),ot=er({name:"Tooltip",props:n,classes:a7,className:C,style:x,classNames:S,styles:M,unstyled:k,rootSelector:"tooltip",vars:Ce,varsResolver:q9e});if(!Em(i))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const fn=Po(Je.reference,i.ref,e),Ht=F9e(j,{duration:100,transition:"fade"});return Y.jsxs(Y.Fragment,{children:[Y.jsx(_6,{...it,withinPortal:b,children:Y.jsx(xm,{...Ht,keepMounted:oe,mounted:!ue&&!!Je.opened,duration:Je.isGroupPhase?10:Ht.duration,children:Re=>Y.jsxs(Xt,{...ct,variant:pe,mod:[{multiline:F},Se],...Je.getFloatingProps({ref:Je.floating,className:ot("tooltip").className,style:{...ot("tooltip").style,...Re,zIndex:fe,top:Je.y??0,left:Je.x??0}}),children:[d,Y.jsx(zq,{ref:Nt,arrowX:Je.arrowX,arrowY:Je.arrowY,visible:P,position:Je.placement,arrowSize:O,arrowOffset:L,arrowRadius:B,arrowPosition:V,...ot("arrow")})]})})}),de.cloneElement(i,Je.getReferenceProps({onClick:le,onMouseEnter:me,onMouseLeave:be,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[l]:fn,className:Wo(C,i.props.className),...i.props}))]})});jh.classes=a7;jh.displayName="@mantine/core/Tooltip";jh.Floating=zX;jh.Group=L2e;const X9e={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},BX=pn((t,e)=>{const n=Dt("Select",X9e,t),{classNames:i,styles:o,unstyled:l,vars:d,dropdownOpened:p,defaultDropdownOpened:g,onDropdownClose:v,onDropdownOpen:_,onFocus:b,onBlur:w,onClick:E,onChange:S,data:M,value:k,defaultValue:x,selectFirstOptionOnChange:C,onOptionSubmit:P,comboboxProps:O,readOnly:L,disabled:B,filter:V,limit:G,withScrollArea:j,maxDropdownHeight:F,size:q,searchable:fe,rightSection:ue,checkIconPosition:J,withCheckIcon:le,nothingFoundMessage:me,name:be,form:ye,searchValue:pe,defaultSearchValue:oe,onSearchChange:Ce,allowDeselect:it,error:Se,rightSectionPointerEvents:Oe,id:ct,clearable:_t,clearButtonProps:Nt,hiddenInputProps:Je,renderOption:ot,onClear:fn,autoComplete:Ht,scrollAreaProps:Re,...Lt}=n,mt=de.useMemo(()=>Jpe(M),[M]),ht=de.useMemo(()=>tX(mt),[mt]),at=B0(ct),[Mt,Ot,It]=Cl({value:k,defaultValue:x,finalValue:null,onChange:S}),Zt=typeof Mt=="string"?ht[Mt]:void 0,[ke,he]=Cl({value:pe,defaultValue:oe,finalValue:Zt?Zt.label:"",onChange:Ce}),tt=dX({opened:p,defaultOpened:g,onDropdownOpen:()=>{_==null||_(),tt.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{v==null||v(),tt.resetSelectedOption()}}),{resolvedClassNames:wt,resolvedStyles:St}=m6({props:n,styles:o,classNames:i});de.useEffect(()=>{C&&tt.selectFirstOption()},[C,Mt]),de.useEffect(()=>{k===null&&he(""),typeof k=="string"&&Zt&&he(Zt.label)},[k,Zt]);const De=_t&&!!Mt&&!B&&!L&&Y.jsx(_i.ClearButton,{size:q,...Nt,onClear:()=>{Ot(null,null),he(""),fn==null||fn()}});return Y.jsxs(Y.Fragment,{children:[Y.jsxs(_i,{store:tt,__staticSelector:"Select",classNames:wt,styles:St,unstyled:l,readOnly:L,onOptionSubmit:nt=>{P==null||P(nt);const Et=it&&ht[nt].value===Mt?null:ht[nt],Qe=Et?Et.value:null;Ot(Qe,Et),!It&&he(typeof Qe=="string"&&(Et==null?void 0:Et.label)||""),tt.closeDropdown()},size:q,...O,children:[Y.jsx(_i.Target,{targetType:fe?"input":"button",autoComplete:Ht,children:Y.jsx(Nu,{id:at,ref:e,rightSection:ue||De||Y.jsx(_i.Chevron,{size:q,error:Se,unstyled:l}),rightSectionPointerEvents:Oe||(De?"all":"none"),...Lt,size:q,__staticSelector:"Select",disabled:B,readOnly:L||!fe,value:ke,onChange:nt=>{he(nt.currentTarget.value),tt.openDropdown(),C&&tt.selectFirstOption()},onFocus:nt=>{fe&&tt.openDropdown(),b==null||b(nt)},onBlur:nt=>{var Et;fe&&tt.closeDropdown(),he(Mt!=null&&((Et=ht[Mt])==null?void 0:Et.label)||""),w==null||w(nt)},onClick:nt=>{fe?tt.openDropdown():tt.toggleDropdown(),E==null||E(nt)},classNames:wt,styles:St,unstyled:l,pointer:!fe,error:Se})}),Y.jsx(u2e,{data:mt,hidden:L||B,filter:V,search:ke,limit:G,hiddenWhenEmpty:!fe||!me,withScrollArea:j,maxDropdownHeight:F,filterOptions:fe&&(Zt==null?void 0:Zt.label)!==ke,value:Mt,checkIconPosition:J,withCheckIcon:le,nothingFoundMessage:me,unstyled:l,labelId:Lt.label?`${at}-label`:void 0,"aria-label":Lt.label?void 0:Lt["aria-label"],renderOption:ot,scrollAreaProps:Re})]}),Y.jsx(_i.HiddenInput,{value:Mt,name:be,form:ye,disabled:B,...Je})]})});BX.classes={...Nu.classes,..._i.classes};BX.displayName="@mantine/core/Select";const[Z9e,l7]=Hc("SliderProvider was not found in tree"),z2e=de.forwardRef(({size:t,disabled:e,variant:n,color:i,thumbSize:o,radius:l,...d},p)=>{const{getStyles:g}=l7();return Y.jsx(Xt,{tabIndex:-1,variant:n,size:t,ref:p,...g("root"),...d})});z2e.displayName="@mantine/core/SliderRoot";const B2e=de.forwardRef(({max:t,min:e,value:n,position:i,label:o,dragging:l,onMouseDown:d,onKeyDownCapture:p,labelTransitionProps:g,labelAlwaysOn:v,thumbLabel:_,onFocus:b,onBlur:w,showLabelOnHover:E,isHovered:S,children:M=null,disabled:k},x)=>{const{getStyles:C}=l7(),[P,O]=de.useState(!1),L=v||l||P||E&&S;return Y.jsxs(Xt,{tabIndex:0,role:"slider","aria-label":_,"aria-valuemax":t,"aria-valuemin":e,"aria-valuenow":n,ref:x,__vars:{"--slider-thumb-offset":`${i}%`},...C("thumb",{focusable:!0}),mod:{dragging:l,disabled:k},onFocus:()=>{O(!0),typeof b=="function"&&b()},onBlur:()=>{O(!1),typeof w=="function"&&w()},onTouchStart:d,onMouseDown:d,onKeyDownCapture:p,onClick:B=>B.stopPropagation(),children:[M,Y.jsx(xm,{mounted:o!=null&&!!L,transition:"fade",duration:0,...g,children:B=>Y.jsx("div",{...C("label",{style:B}),children:o})})]})});B2e.displayName="@mantine/core/SliderThumb";function U2e({value:t,min:e,max:n}){const i=(t-e)/(n-e)*100;return Math.min(Math.max(i,0),100)}function Q9e({mark:t,offset:e,value:n,inverted:i=!1}){return i?typeof e=="number"&&t.value<=e||t.value>=n:typeof e=="number"?t.value>=e&&t.value<=n:t.value<=n}function F2e({marks:t,min:e,max:n,disabled:i,value:o,offset:l,inverted:d}){const{getStyles:p}=l7();if(!t)return null;const g=t.map((v,_)=>de.createElement(Xt,{...p("markWrapper"),__vars:{"--mark-offset":`${U2e({value:v.value,min:e,max:n})}%`},key:_},Y.jsx(Xt,{...p("mark"),mod:{filled:Q9e({mark:v,value:o,offset:l,inverted:d}),disabled:i}}),v.label&&Y.jsx("div",{...p("markLabel"),children:v.label})));return Y.jsx("div",{children:g})}F2e.displayName="@mantine/core/SliderMarks";function V2e({filled:t,children:e,offset:n,disabled:i,marksOffset:o,inverted:l,containerProps:d,...p}){const{getStyles:g}=l7();return Y.jsx(Y.Fragment,{children:Y.jsx(Xt,{...g("trackContainer"),mod:{disabled:i},...d,children:Y.jsxs(Xt,{...g("track"),mod:{inverted:l,disabled:i},children:[Y.jsx(Xt,{mod:{inverted:l,disabled:i},__vars:{"--slider-bar-width":`calc(${t}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...g("bar")}),e,Y.jsx(F2e,{...p,offset:o,disabled:i,inverted:l})]})})})}V2e.displayName="@mantine/core/SliderTrack";function K9e({value:t,containerWidth:e,min:n,max:i,step:o,precision:l}){const p=(e?Math.min(Math.max(t,0),e)/e:t)*(i-n),g=(p!==0?Math.round(p/o)*o:0)+n,v=Math.max(g,n);return l!==void 0?Number(v.toFixed(l)):v}function R8(t,e){return parseFloat(t.toFixed(e))}function J9e(t){if(!t)return 0;const e=t.toString().split(".");return e.length>1?e[1].length:0}var G2e={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const eNe={radius:"xl",min:0,max:100,step:1,marks:[],label:t=>t,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:t=>t},tNe=(t,{size:e,color:n,thumbSize:i,radius:o})=>({root:{"--slider-size":mi(e,"slider-size"),"--slider-color":n?qa(n,t):void 0,"--slider-radius":o===void 0?void 0:fa(o),"--slider-thumb-size":i!==void 0?yt(i):"calc(var(--slider-size) * 2)"}}),UX=pn((t,e)=>{const n=Dt("Slider",eNe,t),{classNames:i,styles:o,value:l,onChange:d,onChangeEnd:p,size:g,min:v,max:_,step:b,precision:w,defaultValue:E,name:S,marks:M,label:k,labelTransitionProps:x,labelAlwaysOn:C,thumbLabel:P,showLabelOnHover:O,thumbChildren:L,disabled:B,unstyled:V,scale:G,inverted:j,className:F,style:q,vars:fe,hiddenInputProps:ue,...J}=n,le=er({name:"Slider",props:n,classes:G2e,classNames:i,className:F,styles:o,style:q,vars:fe,varsResolver:tNe,unstyled:V}),{dir:me}=av(),[be,ye]=de.useState(!1),[pe,oe]=Cl({value:typeof l=="number"?v0(l,v,_):l,defaultValue:typeof E=="number"?v0(E,v,_):E,finalValue:v0(0,v,_),onChange:d}),Ce=de.useRef(pe),it=de.useRef(),Se=de.useRef(),Oe=U2e({value:pe,min:v,max:_}),ct=G(pe),_t=typeof k=="function"?k(ct):k,Nt=w??J9e(b),Je=de.useCallback(({x:Re})=>{if(!B){const Lt=K9e({value:Re,min:v,max:_,step:b,precision:Nt});oe(Lt),Ce.current=Lt}},[B,v,_,b,Nt,oe]),{ref:ot,active:fn}=fq(Je,{onScrubEnd:()=>p==null?void 0:p(Ce.current)},me),Ht=Re=>{var Lt,mt,ht,at,Mt,Ot;if(!B)switch(Re.key){case"ArrowUp":{Re.preventDefault(),(Lt=Se.current)==null||Lt.focus();const It=R8(Math.min(Math.max(pe+b,v),_),Nt);oe(It),p==null||p(It);break}case"ArrowRight":{Re.preventDefault(),(mt=Se.current)==null||mt.focus();const It=R8(Math.min(Math.max(me==="rtl"?pe-b:pe+b,v),_),Nt);oe(It),p==null||p(It);break}case"ArrowDown":{Re.preventDefault(),(ht=Se.current)==null||ht.focus();const It=R8(Math.min(Math.max(pe-b,v),_),Nt);oe(It),p==null||p(It);break}case"ArrowLeft":{Re.preventDefault(),(at=Se.current)==null||at.focus();const It=R8(Math.min(Math.max(me==="rtl"?pe+b:pe-b,v),_),Nt);oe(It),p==null||p(It);break}case"Home":{Re.preventDefault(),(Mt=Se.current)==null||Mt.focus(),oe(v),p==null||p(v);break}case"End":{Re.preventDefault(),(Ot=Se.current)==null||Ot.focus(),oe(_),p==null||p(_);break}}};return Y.jsx(Z9e,{value:{getStyles:le},children:Y.jsxs(z2e,{...J,ref:Po(e,it),onKeyDownCapture:Ht,onMouseDownCapture:()=>{var Re;return(Re=it.current)==null?void 0:Re.focus()},size:g,disabled:B,children:[Y.jsx(V2e,{inverted:j,offset:0,filled:Oe,marks:M,min:v,max:_,value:ct,disabled:B,containerProps:{ref:ot,onMouseEnter:O?()=>ye(!0):void 0,onMouseLeave:O?()=>ye(!1):void 0},children:Y.jsx(B2e,{max:_,min:v,value:ct,position:Oe,dragging:fn,label:_t,ref:Se,labelTransitionProps:x,labelAlwaysOn:C,thumbLabel:P,showLabelOnHover:O,isHovered:be,disabled:B,children:L})}),Y.jsx("input",{type:"hidden",name:S,value:ct,...ue})]})})});UX.classes=G2e;UX.displayName="@mantine/core/Slider";var j2e={root:"m_6d731127"};const nNe={gap:"md",align:"stretch",justify:"flex-start"},rNe=(t,{gap:e,align:n,justify:i})=>({root:{"--stack-gap":op(e),"--stack-align":n,"--stack-justify":i}}),fm=pn((t,e)=>{const n=Dt("Stack",nNe,t),{classNames:i,className:o,style:l,styles:d,unstyled:p,vars:g,align:v,justify:_,gap:b,variant:w,...E}=n,S=er({name:"Stack",props:n,classes:j2e,className:o,style:l,classNames:i,styles:d,unstyled:p,vars:g,varsResolver:rNe});return Y.jsx(Xt,{ref:e,...S("root"),variant:w,...E})});fm.classes=j2e;fm.displayName="@mantine/core/Stack";const H2e=de.createContext(null),iNe=H2e.Provider,sNe=()=>de.useContext(H2e),oNe={},FX=pn((t,e)=>{const{value:n,defaultValue:i,onChange:o,size:l,wrapperProps:d,children:p,readOnly:g,...v}=Dt("SwitchGroup",oNe,t),[_,b]=Cl({value:n,defaultValue:i,finalValue:[],onChange:o}),w=E=>{const S=E.currentTarget.value;!g&&b(_.includes(S)?_.filter(M=>M!==S):[..._,S])};return Y.jsx(iNe,{value:{value:_,onChange:w,size:l},children:Y.jsx(la.Wrapper,{size:l,ref:e,...d,...v,labelElement:"div",__staticSelector:"SwitchGroup",children:Y.jsx(WIe,{role:"group",children:p})})})});FX.classes=la.Wrapper.classes;FX.displayName="@mantine/core/SwitchGroup";var $2e={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const aNe={labelPosition:"right"},lNe=(t,{radius:e,color:n,size:i})=>({root:{"--switch-radius":e===void 0?void 0:fa(e),"--switch-height":mi(i,"switch-height"),"--switch-width":mi(i,"switch-width"),"--switch-thumb-size":mi(i,"switch-thumb-size"),"--switch-label-font-size":mi(i,"switch-label-font-size"),"--switch-track-label-padding":mi(i,"switch-track-label-padding"),"--switch-color":n?qa(n,t):void 0}}),T6=pn((t,e)=>{const n=Dt("Switch",aNe,t),{classNames:i,className:o,style:l,styles:d,unstyled:p,vars:g,color:v,label:_,offLabel:b,onLabel:w,id:E,size:S,radius:M,wrapperProps:k,children:x,thumbIcon:C,checked:P,defaultChecked:O,onChange:L,labelPosition:B,description:V,error:G,disabled:j,variant:F,rootRef:q,mod:fe,...ue}=n,J=sNe(),le=S||(J==null?void 0:J.size),me=er({name:"Switch",props:n,classes:$2e,className:o,style:l,classNames:i,styles:d,unstyled:p,vars:g,varsResolver:lNe}),{styleProps:be,rest:ye}=g6(ue),pe=B0(E),oe=J?{checked:J.value.includes(ye.value),onChange:J.onChange}:{},[Ce,it]=Cl({value:oe.checked??P,defaultValue:O,finalValue:!1});return Y.jsxs(o2e,{...me("root"),__staticSelector:"Switch",__stylesApiProps:n,id:pe,size:le,labelPosition:B,label:_,description:V,error:G,disabled:j,bodyElement:"label",labelElement:"span",classNames:i,styles:d,unstyled:p,"data-checked":oe.checked||void 0,variant:F,ref:q,mod:fe,...be,...k,children:[Y.jsx("input",{...ye,disabled:j,checked:Ce,onChange:Se=>{var Oe;J?(Oe=oe.onChange)==null||Oe.call(oe,Se):L==null||L(Se),it(Se.currentTarget.checked)},id:pe,ref:e,type:"checkbox",role:"switch",...me("input")}),Y.jsxs(Xt,{"aria-hidden":"true",mod:{error:G,"label-position":B},...me("track"),children:[Y.jsx(Xt,{component:"span",mod:"reduce-motion",...me("thumb"),children:C}),Y.jsx("span",{...me("trackLabel"),children:Ce?w:b})]})]})});T6.classes={...$2e,...$Ie};T6.displayName="@mantine/core/Switch";T6.Group=FX;const[cNe,uNe]=Hc("Table component was not found in the tree");var x6={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function fNe(t,e){if(!e)return;const n={};return e.columnBorder&&t.withColumnBorders&&(n["data-with-column-border"]=!0),e.rowBorder&&t.withRowBorders&&(n["data-with-row-border"]=!0),e.striped&&t.striped&&(n["data-striped"]=t.striped),e.highlightOnHover&&t.highlightOnHover&&(n["data-hover"]=!0),e.captionSide&&t.captionSide&&(n["data-side"]=t.captionSide),e.stickyHeader&&t.stickyHeader&&(n["data-sticky"]=!0),n}function uv(t,e){const n=`Table${t.charAt(0).toUpperCase()}${t.slice(1)}`,i=pn((o,l)=>{const d=Dt(n,{},o),{classNames:p,className:g,style:v,styles:_,...b}=d,w=uNe();return Y.jsx(Xt,{component:t,ref:l,...fNe(w,e),...w.getStyles(t,{className:g,classNames:p,style:v,styles:_,props:d}),...b})});return i.displayName=`@mantine/core/${n}`,i.classes=x6,i}const kH=uv("th",{columnBorder:!0}),W2e=uv("td",{columnBorder:!0}),KC=uv("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),Y2e=uv("thead",{stickyHeader:!0}),q2e=uv("tbody"),X2e=uv("tfoot"),Z2e=uv("caption",{captionSide:!0});function VX({data:t}){return Y.jsxs(Y.Fragment,{children:[t.caption&&Y.jsx(Z2e,{children:t.caption}),t.head&&Y.jsx(Y2e,{children:Y.jsx(KC,{children:t.head.map((e,n)=>Y.jsx(kH,{children:e},n))})}),t.body&&Y.jsx(q2e,{children:t.body.map((e,n)=>Y.jsx(KC,{children:e.map((i,o)=>Y.jsx(W2e,{children:i},o))},n))}),t.foot&&Y.jsx(X2e,{children:Y.jsx(KC,{children:t.foot.map((e,n)=>Y.jsx(kH,{children:e},n))})})]})}VX.displayName="@mantine/core/TableDataRenderer";const dNe={type:"scrollarea"},hNe=(t,{minWidth:e,type:n})=>({scrollContainer:{"--table-min-width":yt(e),"--table-overflow":n==="native"?"auto":void 0}}),GX=pn((t,e)=>{const n=Dt("TableScrollContainer",dNe,t),{classNames:i,className:o,style:l,styles:d,unstyled:p,vars:g,children:v,minWidth:_,type:b,...w}=n,E=er({name:"TableScrollContainer",classes:x6,props:n,className:o,style:l,classNames:i,styles:d,unstyled:p,vars:g,varsResolver:hNe,rootSelector:"scrollContainer"});return Y.jsx(Xt,{component:b==="scrollarea"?B4:"div",...b==="scrollarea"?{offsetScrollbars:"x"}:{},ref:e,...E("scrollContainer"),...w,children:Y.jsx("div",{...E("scrollContainerInner"),children:v})})});GX.classes=x6;GX.displayName="@mantine/core/TableScrollContainer";const pNe={withRowBorders:!0,verticalSpacing:7},mNe=(t,{layout:e,captionSide:n,horizontalSpacing:i,verticalSpacing:o,borderColor:l,stripedColor:d,highlightOnHoverColor:p,striped:g,highlightOnHover:v,stickyHeaderOffset:_,stickyHeader:b})=>({table:{"--table-layout":e,"--table-caption-side":n,"--table-horizontal-spacing":op(i),"--table-vertical-spacing":op(o),"--table-border-color":l?qa(l,t):void 0,"--table-striped-color":g&&d?qa(d,t):void 0,"--table-highlight-on-hover-color":v&&p?qa(p,t):void 0,"--table-sticky-header-offset":b?yt(_):void 0}}),ja=pn((t,e)=>{const n=Dt("Table",pNe,t),{classNames:i,className:o,style:l,styles:d,unstyled:p,vars:g,horizontalSpacing:v,verticalSpacing:_,captionSide:b,stripedColor:w,highlightOnHoverColor:E,striped:S,highlightOnHover:M,withColumnBorders:k,withRowBorders:x,withTableBorder:C,borderColor:P,layout:O,variant:L,data:B,children:V,stickyHeader:G,stickyHeaderOffset:j,mod:F,...q}=n,fe=er({name:"Table",props:n,className:o,style:l,classes:x6,classNames:i,styles:d,unstyled:p,rootSelector:"table",vars:g,varsResolver:mNe});return Y.jsx(cNe,{value:{getStyles:fe,stickyHeader:G,striped:S===!0?"odd":S||void 0,highlightOnHover:M,withColumnBorders:k,withRowBorders:x,captionSide:b||"bottom"},children:Y.jsx(Xt,{component:"table",variant:L,ref:e,mod:[{"data-with-table-border":C},F],...fe("table"),...q,children:V||!!B&&Y.jsx(VX,{data:B})})})});ja.classes=x6;ja.displayName="@mantine/core/Table";ja.Td=W2e;ja.Th=kH;ja.Tr=KC;ja.Thead=Y2e;ja.Tbody=q2e;ja.Tfoot=X2e;ja.Caption=Z2e;ja.ScrollContainer=GX;ja.DataRenderer=VX;const[gNe,jX]=Hc("Tabs component was not found in the tree");var M6={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const vNe={},HX=pn((t,e)=>{const n=Dt("TabsList",vNe,t),{children:i,className:o,grow:l,justify:d,classNames:p,styles:g,style:v,mod:_,...b}=n,w=jX();return Y.jsx(Xt,{...b,...w.getStyles("list",{className:o,style:v,classNames:p,styles:g,props:n,variant:w.variant}),ref:e,role:"tablist",variant:w.variant,mod:[{grow:l,orientation:w.orientation,placement:w.orientation==="vertical"&&w.placement,inverted:w.inverted},_],"aria-orientation":w.orientation,__vars:{"--tabs-justify":d},children:i})});HX.classes=M6;HX.displayName="@mantine/core/TabsList";const _Ne={},$X=pn((t,e)=>{const n=Dt("TabsPanel",_Ne,t),{children:i,className:o,value:l,classNames:d,styles:p,style:g,mod:v,..._}=n,b=jX(),w=b.value===l,E=b.keepMounted||n.keepMounted||w?i:null;return Y.jsx(Xt,{..._,...b.getStyles("panel",{className:o,classNames:d,styles:p,style:[g,w?void 0:{display:"none"}],props:n}),ref:e,mod:[{orientation:b.orientation},v],role:"tabpanel",id:b.getPanelId(l),"aria-labelledby":b.getTabId(l),children:E})});$X.classes=M6;$X.displayName="@mantine/core/TabsPanel";const yNe={},WX=pn((t,e)=>{const n=Dt("TabsTab",yNe,t),{className:i,children:o,rightSection:l,leftSection:d,value:p,onClick:g,onKeyDown:v,disabled:_,color:b,style:w,classNames:E,styles:S,vars:M,mod:k,...x}=n,C=ec(),{dir:P}=av(),O=jX(),L=p===O.value,B=G=>{O.onChange(O.allowTabDeactivation&&p===O.value?null:p),g==null||g(G)},V={classNames:E,styles:S,props:n};return Y.jsxs(R0,{...x,...O.getStyles("tab",{className:i,style:w,variant:O.variant,...V}),disabled:_,unstyled:O.unstyled,variant:O.variant,mod:[{active:L,disabled:_,orientation:O.orientation,inverted:O.inverted,placement:O.orientation==="vertical"&&O.placement},k],ref:e,role:"tab",id:O.getTabId(p),"aria-selected":L,tabIndex:L||O.value===null?0:-1,"aria-controls":O.getPanelId(p),onClick:B,__vars:{"--tabs-color":b?qa(b,C):void 0},onKeyDown:lq({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:O.activateTabWithKeyboard,loop:O.loop,orientation:O.orientation||"horizontal",dir:P,onKeyDown:v}),children:[d&&Y.jsx("span",{...O.getStyles("tabSection",V),"data-position":"left",children:d}),o&&Y.jsx("span",{...O.getStyles("tabLabel",V),children:o}),l&&Y.jsx("span",{...O.getStyles("tabSection",V),"data-position":"right",children:l})]})});WX.classes=M6;WX.displayName="@mantine/core/TabsTab";const yie="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",bNe={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},ANe=(t,{radius:e,color:n,autoContrast:i})=>({root:{"--tabs-radius":fa(e),"--tabs-color":qa(n,t),"--tabs-text-color":F5e(i,t)?Whe({color:n,theme:t,autoContrast:i}):void 0}}),y0=pn((t,e)=>{const n=Dt("Tabs",bNe,t),{defaultValue:i,value:o,onChange:l,orientation:d,children:p,loop:g,id:v,activateTabWithKeyboard:_,allowTabDeactivation:b,variant:w,color:E,radius:S,inverted:M,placement:k,keepMounted:x,classNames:C,styles:P,unstyled:O,className:L,style:B,vars:V,autoContrast:G,mod:j,...F}=n,q=B0(v),[fe,ue]=Cl({value:o,defaultValue:i,finalValue:null,onChange:l}),J=er({name:"Tabs",props:n,classes:M6,className:L,style:B,classNames:C,styles:P,unstyled:O,vars:V,varsResolver:ANe});return Y.jsx(gNe,{value:{placement:k,value:fe,orientation:d,id:q,loop:g,activateTabWithKeyboard:_,getTabId:PO(`${q}-tab`,yie),getPanelId:PO(`${q}-panel`,yie),onChange:ue,allowTabDeactivation:b,variant:w,color:E,radius:S,inverted:M,keepMounted:x,unstyled:O,getStyles:J},children:Y.jsx(Xt,{ref:e,id:q,variant:w,mod:[{orientation:d,inverted:d==="horizontal"&&M,placement:d==="vertical"&&k},j],...J("root"),...F,children:p})})});y0.classes=M6;y0.displayName="@mantine/core/Tabs";y0.Tab=WX;y0.Panel=$X;y0.List=HX;const wNe={},YX=pn((t,e)=>{const n=Dt("TextInput",wNe,t);return Y.jsx(Nu,{component:"input",ref:e,...n,__staticSelector:"TextInput"})});YX.classes=Nu.classes;YX.displayName="@mantine/core/TextInput";const ENe=["h1","h2","h3","h4","h5","h6"];function SNe(t,e){const n=e!==void 0?e:`h${t}`;return ENe.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:{fontSize:yt(n),fontWeight:`var(--mantine-h${t}-font-weight)`,lineHeight:`var(--mantine-h${t}-line-height)`}}var Q2e={root:"m_8a5d1357"};const TNe={order:1},xNe=(t,{order:e,size:n,lineClamp:i,textWrap:o})=>{const l=SNe(e,n);return{root:{"--title-fw":l.fontWeight,"--title-lh":l.lineHeight,"--title-fz":l.fontSize,"--title-line-clamp":typeof i=="number"?i.toString():void 0,"--title-text-wrap":o}}},M2=pn((t,e)=>{const n=Dt("Title",TNe,t),{classNames:i,className:o,style:l,styles:d,unstyled:p,order:g,vars:v,size:_,variant:b,lineClamp:w,textWrap:E,mod:S,...M}=n,k=er({name:"Title",props:n,classes:Q2e,className:o,style:l,classNames:i,styles:d,unstyled:p,vars:v,varsResolver:xNe});return[1,2,3,4,5,6].includes(g)?Y.jsx(Xt,{...k("root"),component:`h${g}`,variant:b,ref:e,mod:[{order:g,"data-line-clamp":typeof w=="number"},S],size:_,...M}):null});M2.classes=Q2e;M2.displayName="@mantine/core/Title";var Xs={},oa={},k6={},c7={};Object.defineProperty(c7,"__esModule",{value:!0});c7.build_data=void 0;c7.build_data={build_version:"3.3.0.4",build_date:"2024-05-27T17:20:47.620Z",build_branch:"development",build_commit:"8fd98bc07ff8e5434593d44aa2d23665e66ac8c9"};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.build_data=void 0;const e=c7;Object.defineProperty(t,"build_data",{enumerable:!0,get:function(){return e.build_data}})})(k6);var Mn={},u7={};function Xa(t,e){MNe(t)&&(t="100%");var n=kNe(t);return t=e===360?t:Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(String(t*e),10)/100),Math.abs(t-e)<1e-6?1:(e===360?t=(t<0?t%e+e:t%e)/parseFloat(String(e)):t=t%e/parseFloat(String(e)),t)}function D8(t){return Math.min(1,Math.max(0,t))}function MNe(t){return typeof t=="string"&&t.indexOf(".")!==-1&&parseFloat(t)===1}function kNe(t){return typeof t=="string"&&t.indexOf("%")!==-1}function K2e(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function Sg(t){return t<=1?"".concat(Number(t)*100,"%"):t}function b0(t){return t.length===1?"0"+t:String(t)}function J2e(t,e,n){return{r:Xa(t,255)*255,g:Xa(e,255)*255,b:Xa(n,255)*255}}function CH(t,e,n){t=Xa(t,255),e=Xa(e,255),n=Xa(n,255);var i=Math.max(t,e,n),o=Math.min(t,e,n),l=0,d=0,p=(i+o)/2;if(i===o)d=0,l=0;else{var g=i-o;switch(d=p>.5?g/(2-i-o):g/(i+o),i){case t:l=(e-n)/g+(e<n?6:0);break;case e:l=(n-t)/g+2;break;case n:l=(t-e)/g+4;break}l/=6}return{h:l,s:d,l:p}}function rF(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*(6*n):n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function eme(t,e,n){var i,o,l;if(t=Xa(t,360),e=Xa(e,100),n=Xa(n,100),e===0)o=n,l=n,i=n;else{var d=n<.5?n*(1+e):n+e-n*e,p=2*n-d;i=rF(p,d,t+1/3),o=rF(p,d,t),l=rF(p,d,t-1/3)}return{r:i*255,g:o*255,b:l*255}}function PH(t,e,n){t=Xa(t,255),e=Xa(e,255),n=Xa(n,255);var i=Math.max(t,e,n),o=Math.min(t,e,n),l=0,d=i,p=i-o,g=i===0?0:p/i;if(i===o)l=0;else{switch(i){case t:l=(e-n)/p+(e<n?6:0);break;case e:l=(n-t)/p+2;break;case n:l=(t-e)/p+4;break}l/=6}return{h:l,s:g,v:d}}function tme(t,e,n){t=Xa(t,360)*6,e=Xa(e,100),n=Xa(n,100);var i=Math.floor(t),o=t-i,l=n*(1-e),d=n*(1-o*e),p=n*(1-(1-o)*e),g=i%6,v=[n,d,l,l,p,n][g],_=[p,n,n,d,l,l][g],b=[l,l,p,n,n,d][g];return{r:v*255,g:_*255,b:b*255}}function RH(t,e,n,i){var o=[b0(Math.round(t).toString(16)),b0(Math.round(e).toString(16)),b0(Math.round(n).toString(16))];return i&&o[0].startsWith(o[0].charAt(1))&&o[1].startsWith(o[1].charAt(1))&&o[2].startsWith(o[2].charAt(1))?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function nme(t,e,n,i,o){var l=[b0(Math.round(t).toString(16)),b0(Math.round(e).toString(16)),b0(Math.round(n).toString(16)),b0(qX(i))];return o&&l[0].startsWith(l[0].charAt(1))&&l[1].startsWith(l[1].charAt(1))&&l[2].startsWith(l[2].charAt(1))&&l[3].startsWith(l[3].charAt(1))?l[0].charAt(0)+l[1].charAt(0)+l[2].charAt(0)+l[3].charAt(0):l.join("")}function DH(t,e,n,i){var o=[b0(qX(i)),b0(Math.round(t).toString(16)),b0(Math.round(e).toString(16)),b0(Math.round(n).toString(16))];return o.join("")}function qX(t){return Math.round(parseFloat(t)*255).toString(16)}function OH(t){return xc(t)/255}function xc(t){return parseInt(t,16)}function rme(t){return{r:t>>16,g:(t&65280)>>8,b:t&255}}var BO={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function ime(t){var e={r:0,g:0,b:0},n=1,i=null,o=null,l=null,d=!1,p=!1;return typeof t=="string"&&(t=sme(t)),typeof t=="object"&&(id(t.r)&&id(t.g)&&id(t.b)?(e=J2e(t.r,t.g,t.b),d=!0,p=String(t.r).substr(-1)==="%"?"prgb":"rgb"):id(t.h)&&id(t.s)&&id(t.v)?(i=Sg(t.s),o=Sg(t.v),e=tme(t.h,i,o),d=!0,p="hsv"):id(t.h)&&id(t.s)&&id(t.l)&&(i=Sg(t.s),l=Sg(t.l),e=eme(t.h,i,l),d=!0,p="hsl"),Object.prototype.hasOwnProperty.call(t,"a")&&(n=t.a)),n=K2e(n),{ok:d,format:t.format||p,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:n}}var CNe="[-\\+]?\\d+%?",PNe="[-\\+]?\\d*\\.\\d+%?",F2="(?:".concat(PNe,")|(?:").concat(CNe,")"),iF="[\\s|\\(]+(".concat(F2,")[,|\\s]+(").concat(F2,")[,|\\s]+(").concat(F2,")\\s*\\)?"),sF="[\\s|\\(]+(".concat(F2,")[,|\\s]+(").concat(F2,")[,|\\s]+(").concat(F2,")[,|\\s]+(").concat(F2,")\\s*\\)?"),i0={CSS_UNIT:new RegExp(F2),rgb:new RegExp("rgb"+iF),rgba:new RegExp("rgba"+sF),hsl:new RegExp("hsl"+iF),hsla:new RegExp("hsla"+sF),hsv:new RegExp("hsv"+iF),hsva:new RegExp("hsva"+sF),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function sme(t){if(t=t.trim().toLowerCase(),t.length===0)return!1;var e=!1;if(BO[t])t=BO[t],e=!0;else if(t==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n=i0.rgb.exec(t);return n?{r:n[1],g:n[2],b:n[3]}:(n=i0.rgba.exec(t),n?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=i0.hsl.exec(t),n?{h:n[1],s:n[2],l:n[3]}:(n=i0.hsla.exec(t),n?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=i0.hsv.exec(t),n?{h:n[1],s:n[2],v:n[3]}:(n=i0.hsva.exec(t),n?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=i0.hex8.exec(t),n?{r:xc(n[1]),g:xc(n[2]),b:xc(n[3]),a:OH(n[4]),format:e?"name":"hex8"}:(n=i0.hex6.exec(t),n?{r:xc(n[1]),g:xc(n[2]),b:xc(n[3]),format:e?"name":"hex"}:(n=i0.hex4.exec(t),n?{r:xc(n[1]+n[1]),g:xc(n[2]+n[2]),b:xc(n[3]+n[3]),a:OH(n[4]+n[4]),format:e?"name":"hex8"}:(n=i0.hex3.exec(t),n?{r:xc(n[1]+n[1]),g:xc(n[2]+n[2]),b:xc(n[3]+n[3]),format:e?"name":"hex"}:!1)))))))))}function id(t){return!!i0.CSS_UNIT.exec(String(t))}var O0=function(){function t(e,n){e===void 0&&(e=""),n===void 0&&(n={});var i;if(e instanceof t)return e;typeof e=="number"&&(e=rme(e)),this.originalInput=e;var o=ime(e);this.originalInput=e,this.r=o.r,this.g=o.g,this.b=o.b,this.a=o.a,this.roundA=Math.round(100*this.a)/100,this.format=(i=n.format)!==null&&i!==void 0?i:o.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=o.ok}return t.prototype.isDark=function(){return this.getBrightness()<128},t.prototype.isLight=function(){return!this.isDark()},t.prototype.getBrightness=function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},t.prototype.getLuminance=function(){var e=this.toRgb(),n,i,o,l=e.r/255,d=e.g/255,p=e.b/255;return l<=.03928?n=l/12.92:n=Math.pow((l+.055)/1.055,2.4),d<=.03928?i=d/12.92:i=Math.pow((d+.055)/1.055,2.4),p<=.03928?o=p/12.92:o=Math.pow((p+.055)/1.055,2.4),.2126*n+.7152*i+.0722*o},t.prototype.getAlpha=function(){return this.a},t.prototype.setAlpha=function(e){return this.a=K2e(e),this.roundA=Math.round(100*this.a)/100,this},t.prototype.isMonochrome=function(){var e=this.toHsl().s;return e===0},t.prototype.toHsv=function(){var e=PH(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}},t.prototype.toHsvString=function(){var e=PH(this.r,this.g,this.b),n=Math.round(e.h*360),i=Math.round(e.s*100),o=Math.round(e.v*100);return this.a===1?"hsv(".concat(n,", ").concat(i,"%, ").concat(o,"%)"):"hsva(".concat(n,", ").concat(i,"%, ").concat(o,"%, ").concat(this.roundA,")")},t.prototype.toHsl=function(){var e=CH(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}},t.prototype.toHslString=function(){var e=CH(this.r,this.g,this.b),n=Math.round(e.h*360),i=Math.round(e.s*100),o=Math.round(e.l*100);return this.a===1?"hsl(".concat(n,", ").concat(i,"%, ").concat(o,"%)"):"hsla(".concat(n,", ").concat(i,"%, ").concat(o,"%, ").concat(this.roundA,")")},t.prototype.toHex=function(e){return e===void 0&&(e=!1),RH(this.r,this.g,this.b,e)},t.prototype.toHexString=function(e){return e===void 0&&(e=!1),"#"+this.toHex(e)},t.prototype.toHex8=function(e){return e===void 0&&(e=!1),nme(this.r,this.g,this.b,this.a,e)},t.prototype.toHex8String=function(e){return e===void 0&&(e=!1),"#"+this.toHex8(e)},t.prototype.toHexShortString=function(e){return e===void 0&&(e=!1),this.a===1?this.toHexString(e):this.toHex8String(e)},t.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},t.prototype.toRgbString=function(){var e=Math.round(this.r),n=Math.round(this.g),i=Math.round(this.b);return this.a===1?"rgb(".concat(e,", ").concat(n,", ").concat(i,")"):"rgba(".concat(e,", ").concat(n,", ").concat(i,", ").concat(this.roundA,")")},t.prototype.toPercentageRgb=function(){var e=function(n){return"".concat(Math.round(Xa(n,255)*100),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},t.prototype.toPercentageRgbString=function(){var e=function(n){return Math.round(Xa(n,255)*100)};return this.a===1?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},t.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var e="#"+RH(this.r,this.g,this.b,!1),n=0,i=Object.entries(BO);n<i.length;n++){var o=i[n],l=o[0],d=o[1];if(e===d)return l}return!1},t.prototype.toString=function(e){var n=!!e;e=e??this.format;var i=!1,o=this.a<1&&this.a>=0,l=!n&&o&&(e.startsWith("hex")||e==="name");return l?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(i=this.toRgbString()),e==="prgb"&&(i=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(i=this.toHexString()),e==="hex3"&&(i=this.toHexString(!0)),e==="hex4"&&(i=this.toHex8String(!0)),e==="hex8"&&(i=this.toHex8String()),e==="name"&&(i=this.toName()),e==="hsl"&&(i=this.toHslString()),e==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},t.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},t.prototype.clone=function(){return new t(this.toString())},t.prototype.lighten=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.l+=e/100,n.l=D8(n.l),new t(n)},t.prototype.brighten=function(e){e===void 0&&(e=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(255*-(e/100)))),n.g=Math.max(0,Math.min(255,n.g-Math.round(255*-(e/100)))),n.b=Math.max(0,Math.min(255,n.b-Math.round(255*-(e/100)))),new t(n)},t.prototype.darken=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.l-=e/100,n.l=D8(n.l),new t(n)},t.prototype.tint=function(e){return e===void 0&&(e=10),this.mix("white",e)},t.prototype.shade=function(e){return e===void 0&&(e=10),this.mix("black",e)},t.prototype.desaturate=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.s-=e/100,n.s=D8(n.s),new t(n)},t.prototype.saturate=function(e){e===void 0&&(e=10);var n=this.toHsl();return n.s+=e/100,n.s=D8(n.s),new t(n)},t.prototype.greyscale=function(){return this.desaturate(100)},t.prototype.spin=function(e){var n=this.toHsl(),i=(n.h+e)%360;return n.h=i<0?360+i:i,new t(n)},t.prototype.mix=function(e,n){n===void 0&&(n=50);var i=this.toRgb(),o=new t(e).toRgb(),l=n/100,d={r:(o.r-i.r)*l+i.r,g:(o.g-i.g)*l+i.g,b:(o.b-i.b)*l+i.b,a:(o.a-i.a)*l+i.a};return new t(d)},t.prototype.analogous=function(e,n){e===void 0&&(e=6),n===void 0&&(n=30);var i=this.toHsl(),o=360/n,l=[this];for(i.h=(i.h-(o*e>>1)+720)%360;--e;)i.h=(i.h+o)%360,l.push(new t(i));return l},t.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new t(e)},t.prototype.monochromatic=function(e){e===void 0&&(e=6);for(var n=this.toHsv(),i=n.h,o=n.s,l=n.v,d=[],p=1/e;e--;)d.push(new t({h:i,s:o,v:l})),l=(l+p)%1;return d},t.prototype.splitcomplement=function(){var e=this.toHsl(),n=e.h;return[this,new t({h:(n+72)%360,s:e.s,l:e.l}),new t({h:(n+216)%360,s:e.s,l:e.l})]},t.prototype.onBackground=function(e){var n=this.toRgb(),i=new t(e).toRgb(),o=n.a+i.a*(1-n.a);return new t({r:(n.r*n.a+i.r*i.a*(1-n.a))/o,g:(n.g*n.a+i.g*i.a*(1-n.a))/o,b:(n.b*n.a+i.b*i.a*(1-n.a))/o,a:o})},t.prototype.triad=function(){return this.polyad(3)},t.prototype.tetrad=function(){return this.polyad(4)},t.prototype.polyad=function(e){for(var n=this.toHsl(),i=n.h,o=[this],l=360/e,d=1;d<e;d++)o.push(new t({h:(i+d*l)%360,s:n.s,l:n.l}));return o},t.prototype.equals=function(e){return this.toRgbString()===new t(e).toRgbString()},t}();function bie(t,e){return t===void 0&&(t=""),e===void 0&&(e={}),new O0(t,e)}function XX(t,e){var n=new O0(t),i=new O0(e);return(Math.max(n.getLuminance(),i.getLuminance())+.05)/(Math.min(n.getLuminance(),i.getLuminance())+.05)}function ome(t,e,n){var i,o;n===void 0&&(n={level:"AA",size:"small"});var l=XX(t,e);switch(((i=n.level)!==null&&i!==void 0?i:"AA")+((o=n.size)!==null&&o!==void 0?o:"small")){case"AAsmall":case"AAAlarge":return l>=4.5;case"AAlarge":return l>=3;case"AAAsmall":return l>=7;default:return!1}}function ame(t,e,n){n===void 0&&(n={includeFallbackColors:!1,level:"AA",size:"small"});for(var i=null,o=0,l=n.includeFallbackColors,d=n.level,p=n.size,g=0,v=e;g<v.length;g++){var _=v[g],b=XX(t,_);b>o&&(o=b,i=new O0(_))}return ome(t,i,{level:d,size:p})||!l?i:(n.includeFallbackColors=!1,ame(t,["#fff","#000"],n))}function RNe(t,e){var n=new O0(t),i="#"+DH(n.r,n.g,n.b,n.a),o=i,l=n.gradientType?"GradientType = 1, ":"";if(e){var d=new O0(e);o="#"+DH(d.r,d.g,d.b,d.a)}return"progid:DXImageTransform.Microsoft.gradient(".concat(l,"startColorstr=").concat(i,",endColorstr=").concat(o,")")}function DNe(t,e){var n={r:Sg(t.r),g:Sg(t.g),b:Sg(t.b)};return t.a!==void 0&&(n.a=Number(t.a)),new O0(n,e)}function ONe(){return new O0({r:Math.random(),g:Math.random(),b:Math.random()})}function lme(t){if(t===void 0&&(t={}),t.count!==void 0&&t.count!==null){var e=t.count,n=[];for(t.count=void 0;e>n.length;)t.count=null,t.seed&&(t.seed+=1),n.push(lme(t));return t.count=e,n}var i=INe(t.hue,t.seed),o=NNe(i,t),l=LNe(i,o,t),d={h:i,s:o,v:l};return t.alpha!==void 0&&(d.a=t.alpha),new O0(d)}function INe(t,e){var n=BNe(t),i=UO(n,e);return i<0&&(i=360+i),i}function NNe(t,e){if(e.hue==="monochrome")return 0;if(e.luminosity==="random")return UO([0,100],e.seed);var n=cme(t).saturationRange,i=n[0],o=n[1];switch(e.luminosity){case"bright":i=55;break;case"dark":i=o-10;break;case"light":o=55;break}return UO([i,o],e.seed)}function LNe(t,e,n){var i=zNe(t,e),o=100;switch(n.luminosity){case"dark":o=i+20;break;case"light":i=(o+i)/2;break;case"random":i=0,o=100;break}return UO([i,o],n.seed)}function zNe(t,e){for(var n=cme(t).lowerBounds,i=0;i<n.length-1;i++){var o=n[i][0],l=n[i][1],d=n[i+1][0],p=n[i+1][1];if(e>=o&&e<=d){var g=(p-l)/(d-o),v=l-g*o;return g*e+v}}return 0}function BNe(t){var e=parseInt(t,10);if(!Number.isNaN(e)&&e<360&&e>0)return[e,e];if(typeof t=="string"){var n=ZX.find(function(d){return d.name===t});if(n){var i=ume(n);if(i.hueRange)return i.hueRange}var o=new O0(t);if(o.isValid){var l=o.toHsv().h;return[l,l]}}return[0,360]}function cme(t){t>=334&&t<=360&&(t-=360);for(var e=0,n=ZX;e<n.length;e++){var i=n[e],o=ume(i);if(o.hueRange&&t>=o.hueRange[0]&&t<=o.hueRange[1])return o}throw Error("Color not found")}function UO(t,e){if(e===void 0)return Math.floor(t[0]+Math.random()*(t[1]+1-t[0]));var n=t[1]||1,i=t[0]||0;e=(e*9301+49297)%233280;var o=e/233280;return Math.floor(i+o*(n-i))}function ume(t){var e=t.lowerBounds[0][0],n=t.lowerBounds[t.lowerBounds.length-1][0],i=t.lowerBounds[t.lowerBounds.length-1][1],o=t.lowerBounds[0][1];return{name:t.name,hueRange:t.hueRange,lowerBounds:t.lowerBounds,saturationRange:[e,n],brightnessRange:[i,o]}}var ZX=[{name:"monochrome",hueRange:null,lowerBounds:[[0,0],[100,0]]},{name:"red",hueRange:[-26,18],lowerBounds:[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]},{name:"orange",hueRange:[19,46],lowerBounds:[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]},{name:"yellow",hueRange:[47,62],lowerBounds:[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]},{name:"green",hueRange:[63,178],lowerBounds:[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]},{name:"blue",hueRange:[179,257],lowerBounds:[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]},{name:"purple",hueRange:[258,282],lowerBounds:[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]},{name:"pink",hueRange:[283,334],lowerBounds:[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]]}];const UNe=Object.freeze(Object.defineProperty({__proto__:null,TinyColor:O0,bounds:ZX,convertDecimalToHex:qX,convertHexToDecimal:OH,default:bie,fromRatio:DNe,hslToRgb:eme,hsvToRgb:tme,inputToRGB:ime,isReadable:ome,isValidCSSUnit:id,legacyRandom:ONe,mostReadable:ame,names:BO,numberInputToObject:rme,parseIntFromHex:xc,random:lme,readability:XX,rgbToHex:RH,rgbToHsl:CH,rgbToHsv:PH,rgbToRgb:J2e,rgbaToArgbHex:DH,rgbaToHex:nme,stringInputToObject:sme,tinycolor:bie,toMsFilter:RNe},Symbol.toStringTag,{value:"Module"})),FNe=ym(UNe);var C6={};function fme(t,e){return function(){return t.apply(e,arguments)}}const{toString:VNe}=Object.prototype,{getPrototypeOf:QX}=Object,f7=(t=>e=>{const n=VNe.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),U0=t=>(t=t.toLowerCase(),e=>f7(e)===t),d7=t=>e=>typeof e===t,{isArray:$4}=Array,xT=d7("undefined");function GNe(t){return t!==null&&!xT(t)&&t.constructor!==null&&!xT(t.constructor)&&Ef(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const dme=U0("ArrayBuffer");function jNe(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&dme(t.buffer),e}const HNe=d7("string"),Ef=d7("function"),hme=d7("number"),h7=t=>t!==null&&typeof t=="object",$Ne=t=>t===!0||t===!1,JC=t=>{if(f7(t)!=="object")return!1;const e=QX(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},WNe=U0("Date"),YNe=U0("File"),qNe=U0("Blob"),XNe=U0("FileList"),ZNe=t=>h7(t)&&Ef(t.pipe),QNe=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Ef(t.append)&&((e=f7(t))==="formdata"||e==="object"&&Ef(t.toString)&&t.toString()==="[object FormData]"))},KNe=U0("URLSearchParams"),[JNe,eLe,tLe,nLe]=["ReadableStream","Request","Response","Headers"].map(U0),rLe=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function P6(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let i,o;if(typeof t!="object"&&(t=[t]),$4(t))for(i=0,o=t.length;i<o;i++)e.call(null,t[i],i,t);else{const l=n?Object.getOwnPropertyNames(t):Object.keys(t),d=l.length;let p;for(i=0;i<d;i++)p=l[i],e.call(null,t[p],p,t)}}function pme(t,e){e=e.toLowerCase();const n=Object.keys(t);let i=n.length,o;for(;i-- >0;)if(o=n[i],e===o.toLowerCase())return o;return null}const mme=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:X,gme=t=>!xT(t)&&t!==mme;function IH(){const{caseless:t}=gme(this)&&this||{},e={},n=(i,o)=>{const l=t&&pme(e,o)||o;JC(e[l])&&JC(i)?e[l]=IH(e[l],i):JC(i)?e[l]=IH({},i):$4(i)?e[l]=i.slice():e[l]=i};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&P6(arguments[i],n);return e}const iLe=(t,e,n,{allOwnKeys:i}={})=>(P6(e,(o,l)=>{n&&Ef(o)?t[l]=fme(o,n):t[l]=o},{allOwnKeys:i}),t),sLe=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),oLe=(t,e,n,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},aLe=(t,e,n,i)=>{let o,l,d;const p={};if(e=e||{},t==null)return e;do{for(o=Object.getOwnPropertyNames(t),l=o.length;l-- >0;)d=o[l],(!i||i(d,t,e))&&!p[d]&&(e[d]=t[d],p[d]=!0);t=n!==!1&&QX(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},lLe=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const i=t.indexOf(e,n);return i!==-1&&i===n},cLe=t=>{if(!t)return null;if($4(t))return t;let e=t.length;if(!hme(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},uLe=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&QX(Uint8Array)),fLe=(t,e)=>{const i=(t&&t[Symbol.iterator]).call(t);let o;for(;(o=i.next())&&!o.done;){const l=o.value;e.call(t,l[0],l[1])}},dLe=(t,e)=>{let n;const i=[];for(;(n=t.exec(e))!==null;)i.push(n);return i},hLe=U0("HTMLFormElement"),pLe=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,o){return i.toUpperCase()+o}),Aie=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),mLe=U0("RegExp"),vme=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),i={};P6(n,(o,l)=>{let d;(d=e(o,l,t))!==!1&&(i[l]=d||o)}),Object.defineProperties(t,i)},gLe=t=>{vme(t,(e,n)=>{if(Ef(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=t[n];if(Ef(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},vLe=(t,e)=>{const n={},i=o=>{o.forEach(l=>{n[l]=!0})};return $4(t)?i(t):i(String(t).split(e)),n},_Le=()=>{},yLe=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,oF="abcdefghijklmnopqrstuvwxyz",wie="0123456789",_me={DIGIT:wie,ALPHA:oF,ALPHA_DIGIT:oF+oF.toUpperCase()+wie},bLe=(t=16,e=_me.ALPHA_DIGIT)=>{let n="";const{length:i}=e;for(;t--;)n+=e[Math.random()*i|0];return n};function ALe(t){return!!(t&&Ef(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const wLe=t=>{const e=new Array(10),n=(i,o)=>{if(h7(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[o]=i;const l=$4(i)?[]:{};return P6(i,(d,p)=>{const g=n(d,o+1);!xT(g)&&(l[p]=g)}),e[o]=void 0,l}}return i};return n(t,0)},ELe=U0("AsyncFunction"),SLe=t=>t&&(h7(t)||Ef(t))&&Ef(t.then)&&Ef(t.catch);var Rt={isArray:$4,isArrayBuffer:dme,isBuffer:GNe,isFormData:QNe,isArrayBufferView:jNe,isString:HNe,isNumber:hme,isBoolean:$Ne,isObject:h7,isPlainObject:JC,isReadableStream:JNe,isRequest:eLe,isResponse:tLe,isHeaders:nLe,isUndefined:xT,isDate:WNe,isFile:YNe,isBlob:qNe,isRegExp:mLe,isFunction:Ef,isStream:ZNe,isURLSearchParams:KNe,isTypedArray:uLe,isFileList:XNe,forEach:P6,merge:IH,extend:iLe,trim:rLe,stripBOM:sLe,inherits:oLe,toFlatObject:aLe,kindOf:f7,kindOfTest:U0,endsWith:lLe,toArray:cLe,forEachEntry:fLe,matchAll:dLe,isHTMLForm:hLe,hasOwnProperty:Aie,hasOwnProp:Aie,reduceDescriptors:vme,freezeMethods:gLe,toObjectSet:vLe,toCamelCase:pLe,noop:_Le,toFiniteNumber:yLe,findKey:pme,global:mme,isContextDefined:gme,ALPHABET:_me,generateString:bLe,isSpecCompliantForm:ALe,toJSONObject:wLe,isAsyncFn:ELe,isThenable:SLe};function jr(t,e,n,i,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),o&&(this.response=o)}Rt.inherits(jr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Rt.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const yme=jr.prototype,bme={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{bme[t]={value:t}});Object.defineProperties(jr,bme);Object.defineProperty(yme,"isAxiosError",{value:!0});jr.from=(t,e,n,i,o,l)=>{const d=Object.create(yme);return Rt.toFlatObject(t,d,function(g){return g!==Error.prototype},p=>p!=="isAxiosError"),jr.call(d,t.message,e,n,i,o),d.cause=t,d.name=t.name,l&&Object.assign(d,l),d};var TLe=null;function NH(t){return Rt.isPlainObject(t)||Rt.isArray(t)}function Ame(t){return Rt.endsWith(t,"[]")?t.slice(0,-2):t}function Eie(t,e,n){return t?t.concat(e).map(function(o,l){return o=Ame(o),!n&&l?"["+o+"]":o}).join(n?".":""):e}function xLe(t){return Rt.isArray(t)&&!t.some(NH)}const MLe=Rt.toFlatObject(Rt,{},null,function(e){return/^is[A-Z]/.test(e)});function p7(t,e,n){if(!Rt.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Rt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(M,k){return!Rt.isUndefined(k[M])});const i=n.metaTokens,o=n.visitor||_,l=n.dots,d=n.indexes,g=(n.Blob||typeof Blob<"u"&&Blob)&&Rt.isSpecCompliantForm(e);if(!Rt.isFunction(o))throw new TypeError("visitor must be a function");function v(S){if(S===null)return"";if(Rt.isDate(S))return S.toISOString();if(!g&&Rt.isBlob(S))throw new jr("Blob is not supported. Use a Buffer instead.");return Rt.isArrayBuffer(S)||Rt.isTypedArray(S)?g&&typeof Blob=="function"?new Blob([S]):Buffer.from(S):S}function _(S,M,k){let x=S;if(S&&!k&&typeof S=="object"){if(Rt.endsWith(M,"{}"))M=i?M:M.slice(0,-2),S=JSON.stringify(S);else if(Rt.isArray(S)&&xLe(S)||(Rt.isFileList(S)||Rt.endsWith(M,"[]"))&&(x=Rt.toArray(S)))return M=Ame(M),x.forEach(function(P,O){!(Rt.isUndefined(P)||P===null)&&e.append(d===!0?Eie([M],O,l):d===null?M:M+"[]",v(P))}),!1}return NH(S)?!0:(e.append(Eie(k,M,l),v(S)),!1)}const b=[],w=Object.assign(MLe,{defaultVisitor:_,convertValue:v,isVisitable:NH});function E(S,M){if(!Rt.isUndefined(S)){if(b.indexOf(S)!==-1)throw Error("Circular reference detected in "+M.join("."));b.push(S),Rt.forEach(S,function(x,C){(!(Rt.isUndefined(x)||x===null)&&o.call(e,x,Rt.isString(C)?C.trim():C,M,w))===!0&&E(x,M?M.concat(C):[C])}),b.pop()}}if(!Rt.isObject(t))throw new TypeError("data must be an object");return E(t),e}function Sie(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function KX(t,e){this._pairs=[],t&&p7(t,this,e)}const wme=KX.prototype;wme.append=function(e,n){this._pairs.push([e,n])};wme.toString=function(e){const n=e?function(i){return e.call(this,i,Sie)}:Sie;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function kLe(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Eme(t,e,n){if(!e)return t;const i=n&&n.encode||kLe,o=n&&n.serialize;let l;if(o?l=o(e,n):l=Rt.isURLSearchParams(e)?e.toString():new KX(e,n).toString(i),l){const d=t.indexOf("#");d!==-1&&(t=t.slice(0,d)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}let CLe=class{constructor(){this.handlers=[]}use(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Rt.forEach(this.handlers,function(i){i!==null&&e(i)})}};var Tie=CLe,Sme={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},PLe=typeof URLSearchParams<"u"?URLSearchParams:KX,RLe=typeof FormData<"u"?FormData:null,DLe=typeof Blob<"u"?Blob:null,OLe={isBrowser:!0,classes:{URLSearchParams:PLe,FormData:RLe,Blob:DLe},protocols:["http","https","file","blob","url","data"]};const JX=typeof window<"u"&&typeof document<"u",ILe=(t=>JX&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),NLe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",LLe=JX&&window.location.href||"http://localhost";var zLe=Object.freeze({__proto__:null,hasBrowserEnv:JX,hasStandardBrowserWebWorkerEnv:NLe,hasStandardBrowserEnv:ILe,origin:LLe}),T0={...zLe,...OLe};function BLe(t,e){return p7(t,new T0.classes.URLSearchParams,Object.assign({visitor:function(n,i,o,l){return T0.isNode&&Rt.isBuffer(n)?(this.append(i,n.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},e))}function ULe(t){return Rt.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function FLe(t){const e={},n=Object.keys(t);let i;const o=n.length;let l;for(i=0;i<o;i++)l=n[i],e[l]=t[l];return e}function Tme(t){function e(n,i,o,l){let d=n[l++];if(d==="__proto__")return!0;const p=Number.isFinite(+d),g=l>=n.length;return d=!d&&Rt.isArray(o)?o.length:d,g?(Rt.hasOwnProp(o,d)?o[d]=[o[d],i]:o[d]=i,!p):((!o[d]||!Rt.isObject(o[d]))&&(o[d]=[]),e(n,i,o[d],l)&&Rt.isArray(o[d])&&(o[d]=FLe(o[d])),!p)}if(Rt.isFormData(t)&&Rt.isFunction(t.entries)){const n={};return Rt.forEachEntry(t,(i,o)=>{e(ULe(i),o,n,0)}),n}return null}function VLe(t,e,n){if(Rt.isString(t))try{return(e||JSON.parse)(t),Rt.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(0,JSON.stringify)(t)}const eZ={transitional:Sme,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const i=n.getContentType()||"",o=i.indexOf("application/json")>-1,l=Rt.isObject(e);if(l&&Rt.isHTMLForm(e)&&(e=new FormData(e)),Rt.isFormData(e))return o?JSON.stringify(Tme(e)):e;if(Rt.isArrayBuffer(e)||Rt.isBuffer(e)||Rt.isStream(e)||Rt.isFile(e)||Rt.isBlob(e)||Rt.isReadableStream(e))return e;if(Rt.isArrayBufferView(e))return e.buffer;if(Rt.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let p;if(l){if(i.indexOf("application/x-www-form-urlencoded")>-1)return BLe(e,this.formSerializer).toString();if((p=Rt.isFileList(e))||i.indexOf("multipart/form-data")>-1){const g=this.env&&this.env.FormData;return p7(p?{"files[]":e}:e,g&&new g,this.formSerializer)}}return l||o?(n.setContentType("application/json",!1),VLe(e)):e}],transformResponse:[function(e){const n=this.transitional||eZ.transitional,i=n&&n.forcedJSONParsing,o=this.responseType==="json";if(Rt.isResponse(e)||Rt.isReadableStream(e))return e;if(e&&Rt.isString(e)&&(i&&!this.responseType||o)){const d=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(p){if(d)throw p.name==="SyntaxError"?jr.from(p,jr.ERR_BAD_RESPONSE,this,null,this.response):p}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:T0.classes.FormData,Blob:T0.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Rt.forEach(["delete","get","head","post","put","patch"],t=>{eZ.headers[t]={}});var tZ=eZ;const GLe=Rt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var jLe=t=>{const e={};let n,i,o;return t&&t.split(`
`).forEach(function(d){o=d.indexOf(":"),n=d.substring(0,o).trim().toLowerCase(),i=d.substring(o+1).trim(),!(!n||e[n]&&GLe[n])&&(n==="set-cookie"?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)}),e};const xie=Symbol("internals");function a3(t){return t&&String(t).trim().toLowerCase()}function eP(t){return t===!1||t==null?t:Rt.isArray(t)?t.map(eP):String(t)}function HLe(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)e[i[1]]=i[2];return e}const $Le=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function aF(t,e,n,i,o){if(Rt.isFunction(i))return i.call(this,e,n);if(o&&(e=n),!!Rt.isString(e)){if(Rt.isString(i))return e.indexOf(i)!==-1;if(Rt.isRegExp(i))return i.test(e)}}function WLe(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,i)=>n.toUpperCase()+i)}function YLe(t,e){const n=Rt.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(o,l,d){return this[i].call(this,e,o,l,d)},configurable:!0})})}let m7=class{constructor(e){e&&this.set(e)}set(e,n,i){const o=this;function l(p,g,v){const _=a3(g);if(!_)throw new Error("header name must be a non-empty string");const b=Rt.findKey(o,_);(!b||o[b]===void 0||v===!0||v===void 0&&o[b]!==!1)&&(o[b||g]=eP(p))}const d=(p,g)=>Rt.forEach(p,(v,_)=>l(v,_,g));if(Rt.isPlainObject(e)||e instanceof this.constructor)d(e,n);else if(Rt.isString(e)&&(e=e.trim())&&!$Le(e))d(jLe(e),n);else if(Rt.isHeaders(e))for(const[p,g]of e.entries())l(g,p,i);else e!=null&&l(n,e,i);return this}get(e,n){if(e=a3(e),e){const i=Rt.findKey(this,e);if(i){const o=this[i];if(!n)return o;if(n===!0)return HLe(o);if(Rt.isFunction(n))return n.call(this,o,i);if(Rt.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=a3(e),e){const i=Rt.findKey(this,e);return!!(i&&this[i]!==void 0&&(!n||aF(this,this[i],i,n)))}return!1}delete(e,n){const i=this;let o=!1;function l(d){if(d=a3(d),d){const p=Rt.findKey(i,d);p&&(!n||aF(i,i[p],p,n))&&(delete i[p],o=!0)}}return Rt.isArray(e)?e.forEach(l):l(e),o}clear(e){const n=Object.keys(this);let i=n.length,o=!1;for(;i--;){const l=n[i];(!e||aF(this,this[l],l,e,!0))&&(delete this[l],o=!0)}return o}normalize(e){const n=this,i={};return Rt.forEach(this,(o,l)=>{const d=Rt.findKey(i,l);if(d){n[d]=eP(o),delete n[l];return}const p=e?WLe(l):String(l).trim();p!==l&&delete n[l],n[p]=eP(o),i[p]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Rt.forEach(this,(i,o)=>{i!=null&&i!==!1&&(n[o]=e&&Rt.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const i=new this(e);return n.forEach(o=>i.set(o)),i}static accessor(e){const i=(this[xie]=this[xie]={accessors:{}}).accessors,o=this.prototype;function l(d){const p=a3(d);i[p]||(YLe(o,d),i[p]=!0)}return Rt.isArray(e)?e.forEach(l):l(e),this}};m7.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Rt.reduceDescriptors(m7.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(i){this[n]=i}}});Rt.freezeMethods(m7);var x0=m7;function lF(t,e){const n=this||tZ,i=e||n,o=x0.from(i.headers);let l=i.data;return Rt.forEach(t,function(p){l=p.call(n,l,o.normalize(),e?e.status:void 0)}),o.normalize(),l}function xme(t){return!!(t&&t.__CANCEL__)}function W4(t,e,n){jr.call(this,t??"canceled",jr.ERR_CANCELED,e,n),this.name="CanceledError"}Rt.inherits(W4,jr,{__CANCEL__:!0});function Mme(t,e,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):e(new jr("Request failed with status code "+n.status,[jr.ERR_BAD_REQUEST,jr.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function qLe(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function XLe(t,e){t=t||10;const n=new Array(t),i=new Array(t);let o=0,l=0,d;return e=e!==void 0?e:1e3,function(g){const v=Date.now(),_=i[l];d||(d=v),n[o]=g,i[o]=v;let b=l,w=0;for(;b!==o;)w+=n[b++],b=b%t;if(o=(o+1)%t,o===l&&(l=(l+1)%t),v-d<e)return;const E=_&&v-_;return E?Math.round(w*1e3/E):void 0}}function ZLe(t,e){let n=0;const i=1e3/e;let o=null;return function(){const d=this===!0,p=Date.now();if(d||p-n>i)return o&&(clearTimeout(o),o=null),n=p,t.apply(null,arguments);o||(o=setTimeout(()=>(o=null,n=Date.now(),t.apply(null,arguments)),i-(p-n)))}}var FO=(t,e,n=3)=>{let i=0;const o=XLe(50,250);return ZLe(l=>{const d=l.loaded,p=l.lengthComputable?l.total:void 0,g=d-i,v=o(g),_=d<=p;i=d;const b={loaded:d,total:p,progress:p?d/p:void 0,bytes:g,rate:v||void 0,estimated:v&&p&&_?(p-d)/v:void 0,event:l,lengthComputable:p!=null};b[e?"download":"upload"]=!0,t(b)},n)},QLe=T0.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let i;function o(l){let d=l;return e&&(n.setAttribute("href",d),d=n.href),n.setAttribute("href",d),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=o(window.location.href),function(d){const p=Rt.isString(d)?o(d):d;return p.protocol===i.protocol&&p.host===i.host}}():function(){return function(){return!0}}(),KLe=T0.hasStandardBrowserEnv?{write(t,e,n,i,o,l){const d=[t+"="+encodeURIComponent(e)];Rt.isNumber(n)&&d.push("expires="+new Date(n).toGMTString()),Rt.isString(i)&&d.push("path="+i),Rt.isString(o)&&d.push("domain="+o),l===!0&&d.push("secure"),document.cookie=d.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function JLe(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function eze(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function kme(t,e){return t&&!JLe(e)?eze(t,e):e}const Mie=t=>t instanceof x0?{...t}:t;function Yg(t,e){e=e||{};const n={};function i(v,_,b){return Rt.isPlainObject(v)&&Rt.isPlainObject(_)?Rt.merge.call({caseless:b},v,_):Rt.isPlainObject(_)?Rt.merge({},_):Rt.isArray(_)?_.slice():_}function o(v,_,b){if(Rt.isUndefined(_)){if(!Rt.isUndefined(v))return i(void 0,v,b)}else return i(v,_,b)}function l(v,_){if(!Rt.isUndefined(_))return i(void 0,_)}function d(v,_){if(Rt.isUndefined(_)){if(!Rt.isUndefined(v))return i(void 0,v)}else return i(void 0,_)}function p(v,_,b){if(b in e)return i(v,_);if(b in t)return i(void 0,v)}const g={url:l,method:l,data:l,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,withXSRFToken:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:p,headers:(v,_)=>o(Mie(v),Mie(_),!0)};return Rt.forEach(Object.keys(Object.assign({},t,e)),function(_){const b=g[_]||o,w=b(t[_],e[_],_);Rt.isUndefined(w)&&b!==p||(n[_]=w)}),n}var Cme=t=>{const e=Yg({},t);let{data:n,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:l,headers:d,auth:p}=e;e.headers=d=x0.from(d),e.url=Eme(kme(e.baseURL,e.url),t.params,t.paramsSerializer),p&&d.set("Authorization","Basic "+btoa((p.username||"")+":"+(p.password?unescape(encodeURIComponent(p.password)):"")));let g;if(Rt.isFormData(n)){if(T0.hasStandardBrowserEnv||T0.hasStandardBrowserWebWorkerEnv)d.setContentType(void 0);else if((g=d.getContentType())!==!1){const[v,..._]=g?g.split(";").map(b=>b.trim()).filter(Boolean):[];d.setContentType([v||"multipart/form-data",..._].join("; "))}}if(T0.hasStandardBrowserEnv&&(i&&Rt.isFunction(i)&&(i=i(e)),i||i!==!1&&QLe(e.url))){const v=o&&l&&KLe.read(l);v&&d.set(o,v)}return e};const tze=typeof XMLHttpRequest<"u";var nze=tze&&function(t){return new Promise(function(n,i){const o=Cme(t);let l=o.data;const d=x0.from(o.headers).normalize();let{responseType:p}=o,g;function v(){o.cancelToken&&o.cancelToken.unsubscribe(g),o.signal&&o.signal.removeEventListener("abort",g)}let _=new XMLHttpRequest;_.open(o.method.toUpperCase(),o.url,!0),_.timeout=o.timeout;function b(){if(!_)return;const E=x0.from("getAllResponseHeaders"in _&&_.getAllResponseHeaders()),M={data:!p||p==="text"||p==="json"?_.responseText:_.response,status:_.status,statusText:_.statusText,headers:E,config:t,request:_};Mme(function(x){n(x),v()},function(x){i(x),v()},M),_=null}"onloadend"in _?_.onloadend=b:_.onreadystatechange=function(){!_||_.readyState!==4||_.status===0&&!(_.responseURL&&_.responseURL.indexOf("file:")===0)||setTimeout(b)},_.onabort=function(){_&&(i(new jr("Request aborted",jr.ECONNABORTED,o,_)),_=null)},_.onerror=function(){i(new jr("Network Error",jr.ERR_NETWORK,o,_)),_=null},_.ontimeout=function(){let S=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const M=o.transitional||Sme;o.timeoutErrorMessage&&(S=o.timeoutErrorMessage),i(new jr(S,M.clarifyTimeoutError?jr.ETIMEDOUT:jr.ECONNABORTED,o,_)),_=null},l===void 0&&d.setContentType(null),"setRequestHeader"in _&&Rt.forEach(d.toJSON(),function(S,M){_.setRequestHeader(M,S)}),Rt.isUndefined(o.withCredentials)||(_.withCredentials=!!o.withCredentials),p&&p!=="json"&&(_.responseType=o.responseType),typeof o.onDownloadProgress=="function"&&_.addEventListener("progress",FO(o.onDownloadProgress,!0)),typeof o.onUploadProgress=="function"&&_.upload&&_.upload.addEventListener("progress",FO(o.onUploadProgress)),(o.cancelToken||o.signal)&&(g=E=>{_&&(i(!E||E.type?new W4(null,t,_):E),_.abort(),_=null)},o.cancelToken&&o.cancelToken.subscribe(g),o.signal&&(o.signal.aborted?g():o.signal.addEventListener("abort",g)));const w=qLe(o.url);if(w&&T0.protocols.indexOf(w)===-1){i(new jr("Unsupported protocol "+w+":",jr.ERR_BAD_REQUEST,t));return}_.send(l||null)})};const rze=(t,e)=>{let n=new AbortController,i;const o=function(g){if(!i){i=!0,d();const v=g instanceof Error?g:this.reason;n.abort(v instanceof jr?v:new W4(v instanceof Error?v.message:v))}};let l=e&&setTimeout(()=>{o(new jr(`timeout ${e} of ms exceeded`,jr.ETIMEDOUT))},e);const d=()=>{t&&(l&&clearTimeout(l),l=null,t.forEach(g=>{g&&(g.removeEventListener?g.removeEventListener("abort",o):g.unsubscribe(o))}),t=null)};t.forEach(g=>g&&g.addEventListener&&g.addEventListener("abort",o));const{signal:p}=n;return p.unsubscribe=d,[p,()=>{l&&clearTimeout(l),l=null}]};var ize=rze;const sze=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let i=0,o;for(;i<n;)o=i+e,yield t.slice(i,o),i=o},oze=async function*(t,e,n){for await(const i of t)yield*sze(ArrayBuffer.isView(i)?i:await n(String(i)),e)},kie=(t,e,n,i,o)=>{const l=oze(t,e,o);let d=0;return new ReadableStream({type:"bytes",async pull(p){const{done:g,value:v}=await l.next();if(g){p.close(),i();return}let _=v.byteLength;n&&n(d+=_),p.enqueue(new Uint8Array(v))},cancel(p){return i(p),l.return()}},{highWaterMark:2})},Cie=(t,e)=>{const n=t!=null;return i=>setTimeout(()=>e({lengthComputable:n,total:t,loaded:i}))},g7=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Pme=g7&&typeof ReadableStream=="function",LH=g7&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),aze=Pme&&(()=>{let t=!1;const e=new Request(T0.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e})(),Pie=64*1024,zH=Pme&&!!(()=>{try{return Rt.isReadableStream(new Response("").body)}catch{}})(),VO={stream:zH&&(t=>t.body)};g7&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!VO[e]&&(VO[e]=Rt.isFunction(t[e])?n=>n[e]():(n,i)=>{throw new jr(`Response type '${e}' is not supported`,jr.ERR_NOT_SUPPORT,i)})})})(new Response);const lze=async t=>{if(t==null)return 0;if(Rt.isBlob(t))return t.size;if(Rt.isSpecCompliantForm(t))return(await new Request(t).arrayBuffer()).byteLength;if(Rt.isArrayBufferView(t))return t.byteLength;if(Rt.isURLSearchParams(t)&&(t=t+""),Rt.isString(t))return(await LH(t)).byteLength},cze=async(t,e)=>{const n=Rt.toFiniteNumber(t.getContentLength());return n??lze(e)};var uze=g7&&(async t=>{let{url:e,method:n,data:i,signal:o,cancelToken:l,timeout:d,onDownloadProgress:p,onUploadProgress:g,responseType:v,headers:_,withCredentials:b="same-origin",fetchOptions:w}=Cme(t);v=v?(v+"").toLowerCase():"text";let[E,S]=o||l||d?ize([o,l],d):[],M,k;const x=()=>{!M&&setTimeout(()=>{E&&E.unsubscribe()}),M=!0};let C;try{if(g&&aze&&n!=="get"&&n!=="head"&&(C=await cze(_,i))!==0){let B=new Request(e,{method:"POST",body:i,duplex:"half"}),V;Rt.isFormData(i)&&(V=B.headers.get("content-type"))&&_.setContentType(V),B.body&&(i=kie(B.body,Pie,Cie(C,FO(g)),null,LH))}Rt.isString(b)||(b=b?"cors":"omit"),k=new Request(e,{...w,signal:E,method:n.toUpperCase(),headers:_.normalize().toJSON(),body:i,duplex:"half",withCredentials:b});let P=await fetch(k);const O=zH&&(v==="stream"||v==="response");if(zH&&(p||O)){const B={};["status","statusText","headers"].forEach(G=>{B[G]=P[G]});const V=Rt.toFiniteNumber(P.headers.get("content-length"));P=new Response(kie(P.body,Pie,p&&Cie(V,FO(p,!0)),O&&x,LH),B)}v=v||"text";let L=await VO[Rt.findKey(VO,v)||"text"](P,t);return!O&&x(),S&&S(),await new Promise((B,V)=>{Mme(B,V,{data:L,headers:x0.from(P.headers),status:P.status,statusText:P.statusText,config:t,request:k})})}catch(P){throw x(),P&&P.name==="TypeError"&&/fetch/i.test(P.message)?Object.assign(new jr("Network Error",jr.ERR_NETWORK,t,k),{cause:P.cause||P}):jr.from(P,P&&P.code,t,k)}});const BH={http:TLe,xhr:nze,fetch:uze};Rt.forEach(BH,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Rie=t=>`- ${t}`,fze=t=>Rt.isFunction(t)||t===null||t===!1;var Rme={getAdapter:t=>{t=Rt.isArray(t)?t:[t];const{length:e}=t;let n,i;const o={};for(let l=0;l<e;l++){n=t[l];let d;if(i=n,!fze(n)&&(i=BH[(d=String(n)).toLowerCase()],i===void 0))throw new jr(`Unknown adapter '${d}'`);if(i)break;o[d||"#"+l]=i}if(!i){const l=Object.entries(o).map(([p,g])=>`adapter ${p} `+(g===!1?"is not supported by the environment":"is not available in the build"));let d=e?l.length>1?`since :
`+l.map(Rie).join(`
`):" "+Rie(l[0]):"as no adapter specified";throw new jr("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return i},adapters:BH};function cF(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new W4(null,t)}function Die(t){return cF(t),t.headers=x0.from(t.headers),t.data=lF.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Rme.getAdapter(t.adapter||tZ.adapter)(t).then(function(i){return cF(t),i.data=lF.call(t,t.transformResponse,i),i.headers=x0.from(i.headers),i},function(i){return xme(i)||(cF(t),i&&i.response&&(i.response.data=lF.call(t,t.transformResponse,i.response),i.response.headers=x0.from(i.response.headers))),Promise.reject(i)})}const Dme="1.7.2",nZ={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{nZ[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});const Oie={};nZ.transitional=function(e,n,i){function o(l,d){return"[Axios v"+Dme+"] Transitional option '"+l+"'"+d+(i?". "+i:"")}return(l,d,p)=>{if(e===!1)throw new jr(o(d," has been removed"+(n?" in "+n:"")),jr.ERR_DEPRECATED);return n&&!Oie[d]&&(Oie[d]=!0,console.warn(o(d," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(l,d,p):!0}};function dze(t,e,n){if(typeof t!="object")throw new jr("options must be an object",jr.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let o=i.length;for(;o-- >0;){const l=i[o],d=e[l];if(d){const p=t[l],g=p===void 0||d(p,l,t);if(g!==!0)throw new jr("option "+l+" must be "+g,jr.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new jr("Unknown option "+l,jr.ERR_BAD_OPTION)}}var UH={assertOptions:dze,validators:nZ};const Up=UH.validators;let GO=class{constructor(e){this.defaults=e,this.interceptors={request:new Tie,response:new Tie}}async request(e,n){try{return await this._request(e,n)}catch(i){if(i instanceof Error){let o;Error.captureStackTrace?Error.captureStackTrace(o={}):o=new Error;const l=o.stack?o.stack.replace(/^.+\n/,""):"";try{i.stack?l&&!String(i.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+l):i.stack=l}catch{}}throw i}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Yg(this.defaults,n);const{transitional:i,paramsSerializer:o,headers:l}=n;i!==void 0&&UH.assertOptions(i,{silentJSONParsing:Up.transitional(Up.boolean),forcedJSONParsing:Up.transitional(Up.boolean),clarifyTimeoutError:Up.transitional(Up.boolean)},!1),o!=null&&(Rt.isFunction(o)?n.paramsSerializer={serialize:o}:UH.assertOptions(o,{encode:Up.function,serialize:Up.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let d=l&&Rt.merge(l.common,l[n.method]);l&&Rt.forEach(["delete","get","head","post","put","patch","common"],S=>{delete l[S]}),n.headers=x0.concat(d,l);const p=[];let g=!0;this.interceptors.request.forEach(function(M){typeof M.runWhen=="function"&&M.runWhen(n)===!1||(g=g&&M.synchronous,p.unshift(M.fulfilled,M.rejected))});const v=[];this.interceptors.response.forEach(function(M){v.push(M.fulfilled,M.rejected)});let _,b=0,w;if(!g){const S=[Die.bind(this),void 0];for(S.unshift.apply(S,p),S.push.apply(S,v),w=S.length,_=Promise.resolve(n);b<w;)_=_.then(S[b++],S[b++]);return _}w=p.length;let E=n;for(b=0;b<w;){const S=p[b++],M=p[b++];try{E=S(E)}catch(k){M.call(this,k);break}}try{_=Die.call(this,E)}catch(S){return Promise.reject(S)}for(b=0,w=v.length;b<w;)_=_.then(v[b++],v[b++]);return _}getUri(e){e=Yg(this.defaults,e);const n=kme(e.baseURL,e.url);return Eme(n,e.params,e.paramsSerializer)}};Rt.forEach(["delete","get","head","options"],function(e){GO.prototype[e]=function(n,i){return this.request(Yg(i||{},{method:e,url:n,data:(i||{}).data}))}});Rt.forEach(["post","put","patch"],function(e){function n(i){return function(l,d,p){return this.request(Yg(p||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:l,data:d}))}}GO.prototype[e]=n(),GO.prototype[e+"Form"]=n(!0)});var tP=GO;let hze=class Ome{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(l){n=l});const i=this;this.promise.then(o=>{if(!i._listeners)return;let l=i._listeners.length;for(;l-- >0;)i._listeners[l](o);i._listeners=null}),this.promise.then=o=>{let l;const d=new Promise(p=>{i.subscribe(p),l=p}).then(o);return d.cancel=function(){i.unsubscribe(l)},d},e(function(l,d,p){i.reason||(i.reason=new W4(l,d,p),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new Ome(function(o){e=o}),cancel:e}}};var pze=hze;function mze(t){return function(n){return t.apply(null,n)}}function gze(t){return Rt.isObject(t)&&t.isAxiosError===!0}const FH={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(FH).forEach(([t,e])=>{FH[e]=t});var vze=FH;function Ime(t){const e=new tP(t),n=fme(tP.prototype.request,e);return Rt.extend(n,tP.prototype,e,{allOwnKeys:!0}),Rt.extend(n,e,null,{allOwnKeys:!0}),n.create=function(o){return Ime(Yg(t,o))},n}const Yo=Ime(tZ);Yo.Axios=tP;Yo.CanceledError=W4;Yo.CancelToken=pze;Yo.isCancel=xme;Yo.VERSION=Dme;Yo.toFormData=p7;Yo.AxiosError=jr;Yo.Cancel=Yo.CanceledError;Yo.all=function(e){return Promise.all(e)};Yo.spread=mze;Yo.isAxiosError=gze;Yo.mergeConfig=Yg;Yo.AxiosHeaders=x0;Yo.formToJSON=t=>Tme(Rt.isHTMLForm(t)?new FormData(t):t);Yo.getAdapter=Rme.getAdapter;Yo.HttpStatusCode=vze;Yo.default=Yo;var _ze=Yo,I0={},v7={},ba={},R6={};Object.defineProperty(R6,"__esModule",{value:!0});R6.ShapeDiverCommonsModelStatus=void 0;var Iie;(function(t){t.UNKNOWN="unknown",t.NOT_UPLOADED="not_uploaded",t.UPLOADED="uploaded",t.PENDING="pending",t.CONFIRMED="confirmed",t.DENIED="denied",t.DELETED="deleted"})(Iie||(R6.ShapeDiverCommonsModelStatus=Iie={}));var D6={};Object.defineProperty(D6,"__esModule",{value:!0});D6.ShapeDiverCommonsModelComputationStatus=void 0;var Nie;(function(t){t.SUCCESS="success",t.TIMEOUT="timeout",t.CHECK_CONFIRMED="checkconfirmed",t.CHECK_DENIED="checkdenied",t.CHECK_PENDING="checkpending",t.MAX_COMBINED_ASSET_SIZE_EXCEEDED="maxcombinedassetsizeexceeded",t.MAX_DB_SIZE_PER_OUTPUT_EXCEEDED="maxdbsizeperoutputexceeded",t.MAX_PARTS_PER_OUTPUT_EXCEEDED="maxpartsperoutputexceeded",t.MAX_ASSET_PARTS_PER_OUTPUT_EXCEEDED="maxassetpartsperoutputexceeded",t.MAX_TRANSFORMATIONS_PER_OUTPUT_EXCEEDED="maxtransformationsperoutputexceeded",t.MAX_PARTS_EXCEEDED="maxpartsexceeded",t.MAX_ASSET_PARTS_EXCEEDED="maxassetpartsexceeded",t.RECOVERABLE_ERROR="recoverableerror",t.UNRECOVERABLE_ERROR="unrecoverableerror",t.NO_OUTPUT_DATA_FOR_DEFAULT_PARAMETER_VALUES="nooutputdatafordefaultparametervalues",t.MODEL_WITHOUT_GEOMETRY_OUTPUT="modelwithoutgeometryoutput",t.UNKNOWN="unknown"})(Nie||(D6.ShapeDiverCommonsModelComputationStatus=Nie={}));var O6={};Object.defineProperty(O6,"__esModule",{value:!0});O6.ShapeDiverCommonsTicketType=void 0;var Lie;(function(t){t.BACKEND="backend",t.NONE=""})(Lie||(O6.ShapeDiverCommonsTicketType=Lie={}));Object.defineProperty(ba,"__esModule",{value:!0});ba.ShapeDiverRequestQueryModelComputationStatus=ba.ShapeDiverRequestQueryModelStatus=ba.ShapeDiverRequestModelComputationQueryType=ba.ShapeDiverRequestModelComputationQueryStatus=ba.ShapeDiverRequestModelComputationQueryOrder=ba.ShapeDiverRequestGltfUploadQueryConversion=ba.ShapeDiverRequestLogMessageLevel=ba.ShapeDiverRequestTicketType=void 0;const yze=R6,bze=D6,Aze=O6;ba.ShapeDiverRequestTicketType=Object.assign({},Aze.ShapeDiverCommonsTicketType);var zie;(function(t){t[t.INFO=0]="INFO",t[t.WARNING=1]="WARNING",t[t.ERROR=2]="ERROR"})(zie||(ba.ShapeDiverRequestLogMessageLevel=zie={}));var Bie;(function(t){t.NONE="none",t.SCENE="scene",t.USDZ="usdz"})(Bie||(ba.ShapeDiverRequestGltfUploadQueryConversion=Bie={}));var Uie;(function(t){t.ASC="asc",t.DESC="desc"})(Uie||(ba.ShapeDiverRequestModelComputationQueryOrder=Uie={}));var Fie;(function(t){t.SUCCESS="success",t.TIMEOUT="timeout",t.OTHER="other",t.ALL="*"})(Fie||(ba.ShapeDiverRequestModelComputationQueryStatus=Fie={}));var Vie;(function(t){t.COMPUTATION="computation",t.EXPORT="export",t.ALL="*"})(Vie||(ba.ShapeDiverRequestModelComputationQueryType=Vie={}));ba.ShapeDiverRequestQueryModelStatus=Object.assign({},yze.ShapeDiverCommonsModelStatus);ba.ShapeDiverRequestQueryModelComputationStatus=Object.assign({},bze.ShapeDiverCommonsModelComputationStatus);var Nme={};Object.defineProperty(Nme,"__esModule",{value:!0});var Ub={};Object.defineProperty(Ub,"__esModule",{value:!0});Ub.ShapeDiverRequestModelTrustlevel=Ub.ShapeDiverRequestModelFiletype=void 0;var Gie;(function(t){t.GRASSHOPPER_BINARY="gh",t.GRASSHOPPER_XML="ghx"})(Gie||(Ub.ShapeDiverRequestModelFiletype=Gie={}));var jie;(function(t){t.UNDEFINED="",t.NONE="none",t.FULL="full"})(jie||(Ub.ShapeDiverRequestModelTrustlevel=jie={}));var _7={};Object.defineProperty(_7,"__esModule",{value:!0});_7.ShapeDiverRequestSdtfUploadPartType=void 0;var Hie;(function(t){t.MODEL_SDTF="model/vnd.sdtf"})(Hie||(_7.ShapeDiverRequestSdtfUploadPartType=Hie={}));var Lme={};Object.defineProperty(Lme,"__esModule",{value:!0});var zme={};Object.defineProperty(zme,"__esModule",{value:!0});var Bme={};Object.defineProperty(Bme,"__esModule",{value:!0});var y7={};Object.defineProperty(y7,"__esModule",{value:!0});y7.ShapeDiverResponseErrorType=void 0;var $ie;(function(t){t.ASSERTION_ERROR="SdAssertionError",t.CACHE_ERROR_GENERIC="SdCacheErrorGeneric",t.CONNECTOR_ERROR="SdConnectorError",t.DATABASE_ERROR_GENERIC="SdDatabaseErrorGeneric",t.EMAILING_ERROR="SdEmailingError",t.ERROR_ENTITY_NOT_FOUND="SdErrorEntityNotFound",t.ERROR_FORBIDDEN="SdErrorForbidden",t.ERROR_GENERIC_CLIENT="SdErrorGenericClient",t.ERROR_GENERIC_INTERNAL="SdErrorGenericInternal",t.ERROR_UNAUTHORIZED="SdErrorUnauthorized",t.ILLEGAL_ARGUMENT_ERROR="SdIllegalArgumentError",t.JWT_VALIDATION_ERROR="SdJwtValidationError",t.MODEL_VALIDATION_ERROR="SdModelValidationError",t.NOT_ACCEPTABLE="SdNotAcceptable",t.NOT_FOUND_ERROR="SdNotFoundError",t.PARAMETER_VALIDATION_ERROR="SdParameterValidationError",t.RATE_LIMIT_ERROR_GENERIC="SdRateLimitErrorGeneric",t.REQUEST_TIMEOUT="SdRequestTimeout",t.REQUEST_VALIDATION_ERROR="SdRequestValidationError",t.RESOURCE_GONE_ERROR="SdResourceGoneError",t.SESSION_GONE_ERROR="SdSessionGoneError",t.SESSION_VALIDATION_ERROR="SdSessionValidationError",t.STORAGE_ERROR_GENERIC="SdStorageErrorGeneric",t.TEXTURE_URL_ERROR="SdTextureUrlError",t.TICKET_VALIDATION_ERROR="SdTicketValidationError",t.TOKEN_MISSING_ERROR="SdTokenMissingError",t.TRANSFORM_CONTENT_ARRAY_ERROR="SdTransformContentArrayError",t.UNCONFIRMED_MODEL_ERROR="SdUnconfirmedModelError",t.UNKNOWN=""})($ie||(y7.ShapeDiverResponseErrorType=$ie={}));var b7={};Object.defineProperty(b7,"__esModule",{value:!0});b7.ShapeDiverResponseExportDefinitionType=void 0;var Wie;(function(t){t.UNKNOWN="unknown",t.DOWNLOAD="download",t.EMAIL="email",t.SHAPEWAYS="shapeways"})(Wie||(b7.ShapeDiverResponseExportDefinitionType=Wie={}));var Ume={};Object.defineProperty(Ume,"__esModule",{value:!0});var Pc={};Object.defineProperty(Pc,"__esModule",{value:!0});Pc.ShapeDiverResponseModelCleanupProcessType=Pc.ShapeDiverResponseTicketType=Pc.ShapeDiverResponseParameterStructure=Pc.ShapeDiverResponseParameterVisualization=Pc.ShapeDiverResponseParameterType=Pc.ShapeDiverResponseModelStatus=void 0;const wze=R6,Eze=O6;Pc.ShapeDiverResponseModelStatus=Object.assign({},wze.ShapeDiverCommonsModelStatus);var Yie;(function(t){t.S_BITMAP="sBitmap",t.S_BOOL="sBool",t.S_BOX="sBox",t.S_BREP="sBrep",t.S_CIRCLE="sCircle",t.S_COLOR="sColor",t.S_CURVE="sCurve",t.S_DOMAIN="sDomain",t.S_DOMAIN_2D="sDomain2D",t.S_INTEGER="sInteger",t.S_LINE="sLine",t.S_MESH="sMesh",t.S_NUMBER="sNumber",t.S_PLANE="sPlane",t.S_POINT="sPoint",t.S_RECTANGLE="sRectangle",t.S_STRING="sString",t.S_SUBDIV="sSubdiv",t.S_SURFACE="sSurface",t.S_TIME="sTime",t.S_VECTOR="sVector",t.BOOL="Bool",t.COLOR="Color",t.EVEN="Even",t.FILE="File",t.FLOAT="Float",t.INT="Int",t.ODD="Odd",t.STRING="String",t.STRINGLIST="StringList",t.TIME="Time",t.UNKNOWN="unknown"})(Yie||(Pc.ShapeDiverResponseParameterType=Yie={}));var qie;(function(t){t.UNKNOWN="unknown",t.BUTTON="button",t.CALENDAR="calendar",t.CHECKLIST="checklist",t.CLOCK="clock",t.CYCLE="cycle",t.DIAL="dial",t.DROPDOWN="dropdown",t.GEOMETRY="geometry",t.IMAGE="image",t.SEQUENCE="sequence",t.SLIDER="slider",t.SWATCH="swatch",t.TEXT="text",t.TOGGLE="toggle"})(qie||(Pc.ShapeDiverResponseParameterVisualization=qie={}));var Xie;(function(t){t.ITEM="item",t.LIST="list",t.TREE="tree"})(Xie||(Pc.ShapeDiverResponseParameterStructure=Xie={}));Pc.ShapeDiverResponseTicketType=Object.assign({},Eze.ShapeDiverCommonsTicketType);var Zie;(function(t){t.DELETE_EXPORT_VERSION="delete_export_version",t.DELETE_MODEL_TEXTURE="delete_model_texture",t.DELETE_OUTPUT_VERSION="delete_output_version"})(Zie||(Pc.ShapeDiverResponseModelCleanupProcessType=Zie={}));var A7={};Object.defineProperty(A7,"__esModule",{value:!0});A7.ShapeDiverResponseModelComputationStatus=void 0;const Sze=D6;A7.ShapeDiverResponseModelComputationStatus=Object.assign({},Sze.ShapeDiverCommonsModelComputationStatus);var Fme={};Object.defineProperty(Fme,"__esModule",{value:!0});var Vme={};Object.defineProperty(Vme,"__esModule",{value:!0});var Gme={};Object.defineProperty(Gme,"__esModule",{value:!0});(function(t){var e=X&&X.__createBinding||(Object.create?function(i,o,l,d){d===void 0&&(d=l);var p=Object.getOwnPropertyDescriptor(o,l);(!p||("get"in p?!o.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return o[l]}}),Object.defineProperty(i,d,p)}:function(i,o,l,d){d===void 0&&(d=l),i[d]=o[l]}),n=X&&X.__exportStar||function(i,o){for(var l in i)l!=="default"&&!Object.prototype.hasOwnProperty.call(o,l)&&e(o,i,l)};Object.defineProperty(t,"__esModule",{value:!0}),n(ba,t),n(Nme,t),n(Ub,t),n(_7,t),n(Lme,t),n(zme,t),n(Bme,t),n(y7,t),n(b7,t),n(Ume,t),n(Pc,t),n(A7,t),n(Fme,t),n(Vme,t),n(Gme,t)})(v7);var Sa={},qg={};function jme(t,e){return function(){return t.apply(e,arguments)}}const{toString:Tze}=Object.prototype,{getPrototypeOf:rZ}=Object,w7=(t=>e=>{const n=Tze.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ld=t=>(t=t.toLowerCase(),e=>w7(e)===t),E7=t=>e=>typeof e===t,{isArray:Y4}=Array,MT=E7("undefined");function xze(t){return t!==null&&!MT(t)&&t.constructor!==null&&!MT(t.constructor)&&Sf(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Hme=Ld("ArrayBuffer");function Mze(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Hme(t.buffer),e}const kze=E7("string"),Sf=E7("function"),$me=E7("number"),S7=t=>t!==null&&typeof t=="object",Cze=t=>t===!0||t===!1,nP=t=>{if(w7(t)!=="object")return!1;const e=rZ(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Pze=Ld("Date"),Rze=Ld("File"),Dze=Ld("Blob"),Oze=Ld("FileList"),Ize=t=>S7(t)&&Sf(t.pipe),Nze=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Sf(t.append)&&((e=w7(t))==="formdata"||e==="object"&&Sf(t.toString)&&t.toString()==="[object FormData]"))},Lze=Ld("URLSearchParams"),zze=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function I6(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let i,o;if(typeof t!="object"&&(t=[t]),Y4(t))for(i=0,o=t.length;i<o;i++)e.call(null,t[i],i,t);else{const l=n?Object.getOwnPropertyNames(t):Object.keys(t),d=l.length;let p;for(i=0;i<d;i++)p=l[i],e.call(null,t[p],p,t)}}function Wme(t,e){e=e.toLowerCase();const n=Object.keys(t);let i=n.length,o;for(;i-- >0;)if(o=n[i],e===o.toLowerCase())return o;return null}const Yme=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:X,qme=t=>!MT(t)&&t!==Yme;function VH(){const{caseless:t}=qme(this)&&this||{},e={},n=(i,o)=>{const l=t&&Wme(e,o)||o;nP(e[l])&&nP(i)?e[l]=VH(e[l],i):nP(i)?e[l]=VH({},i):Y4(i)?e[l]=i.slice():e[l]=i};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&I6(arguments[i],n);return e}const Bze=(t,e,n,{allOwnKeys:i}={})=>(I6(e,(o,l)=>{n&&Sf(o)?t[l]=jme(o,n):t[l]=o},{allOwnKeys:i}),t),Uze=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Fze=(t,e,n,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},Vze=(t,e,n,i)=>{let o,l,d;const p={};if(e=e||{},t==null)return e;do{for(o=Object.getOwnPropertyNames(t),l=o.length;l-- >0;)d=o[l],(!i||i(d,t,e))&&!p[d]&&(e[d]=t[d],p[d]=!0);t=n!==!1&&rZ(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Gze=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const i=t.indexOf(e,n);return i!==-1&&i===n},jze=t=>{if(!t)return null;if(Y4(t))return t;let e=t.length;if(!$me(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},Hze=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&rZ(Uint8Array)),$ze=(t,e)=>{const i=(t&&t[Symbol.iterator]).call(t);let o;for(;(o=i.next())&&!o.done;){const l=o.value;e.call(t,l[0],l[1])}},Wze=(t,e)=>{let n;const i=[];for(;(n=t.exec(e))!==null;)i.push(n);return i},Yze=Ld("HTMLFormElement"),qze=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,o){return i.toUpperCase()+o}),Qie=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),Xze=Ld("RegExp"),Xme=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),i={};I6(n,(o,l)=>{let d;(d=e(o,l,t))!==!1&&(i[l]=d||o)}),Object.defineProperties(t,i)},Zze=t=>{Xme(t,(e,n)=>{if(Sf(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=t[n];if(Sf(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Qze=(t,e)=>{const n={},i=o=>{o.forEach(l=>{n[l]=!0})};return Y4(t)?i(t):i(String(t).split(e)),n},Kze=()=>{},Jze=(t,e)=>(t=+t,Number.isFinite(t)?t:e),uF="abcdefghijklmnopqrstuvwxyz",Kie="0123456789",Zme={DIGIT:Kie,ALPHA:uF,ALPHA_DIGIT:uF+uF.toUpperCase()+Kie},eBe=(t=16,e=Zme.ALPHA_DIGIT)=>{let n="";const{length:i}=e;for(;t--;)n+=e[Math.random()*i|0];return n};function tBe(t){return!!(t&&Sf(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const nBe=t=>{const e=new Array(10),n=(i,o)=>{if(S7(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[o]=i;const l=Y4(i)?[]:{};return I6(i,(d,p)=>{const g=n(d,o+1);!MT(g)&&(l[p]=g)}),e[o]=void 0,l}}return i};return n(t,0)},rBe=Ld("AsyncFunction"),iBe=t=>t&&(S7(t)||Sf(t))&&Sf(t.then)&&Sf(t.catch);var Ft={isArray:Y4,isArrayBuffer:Hme,isBuffer:xze,isFormData:Nze,isArrayBufferView:Mze,isString:kze,isNumber:$me,isBoolean:Cze,isObject:S7,isPlainObject:nP,isUndefined:MT,isDate:Pze,isFile:Rze,isBlob:Dze,isRegExp:Xze,isFunction:Sf,isStream:Ize,isURLSearchParams:Lze,isTypedArray:Hze,isFileList:Oze,forEach:I6,merge:VH,extend:Bze,trim:zze,stripBOM:Uze,inherits:Fze,toFlatObject:Vze,kindOf:w7,kindOfTest:Ld,endsWith:Gze,toArray:jze,forEachEntry:$ze,matchAll:Wze,isHTMLForm:Yze,hasOwnProperty:Qie,hasOwnProp:Qie,reduceDescriptors:Xme,freezeMethods:Zze,toObjectSet:Qze,toCamelCase:qze,noop:Kze,toFiniteNumber:Jze,findKey:Wme,global:Yme,isContextDefined:qme,ALPHABET:Zme,generateString:eBe,isSpecCompliantForm:tBe,toJSONObject:nBe,isAsyncFn:rBe,isThenable:iBe};function Ei(t,e,n,i,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),o&&(this.response=o)}Ft.inherits(Ei,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ft.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Qme=Ei.prototype,Kme={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Kme[t]={value:t}});Object.defineProperties(Ei,Kme);Object.defineProperty(Qme,"isAxiosError",{value:!0});Ei.from=(t,e,n,i,o,l)=>{const d=Object.create(Qme);return Ft.toFlatObject(t,d,function(g){return g!==Error.prototype},p=>p!=="isAxiosError"),Ei.call(d,t.message,e,n,i,o),d.cause=t,d.name=t.name,l&&Object.assign(d,l),d};var sBe=null;function GH(t){return Ft.isPlainObject(t)||Ft.isArray(t)}function Jme(t){return Ft.endsWith(t,"[]")?t.slice(0,-2):t}function Jie(t,e,n){return t?t.concat(e).map(function(o,l){return o=Jme(o),!n&&l?"["+o+"]":o}).join(n?".":""):e}function oBe(t){return Ft.isArray(t)&&!t.some(GH)}const aBe=Ft.toFlatObject(Ft,{},null,function(e){return/^is[A-Z]/.test(e)});function T7(t,e,n){if(!Ft.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Ft.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(M,k){return!Ft.isUndefined(k[M])});const i=n.metaTokens,o=n.visitor||_,l=n.dots,d=n.indexes,g=(n.Blob||typeof Blob<"u"&&Blob)&&Ft.isSpecCompliantForm(e);if(!Ft.isFunction(o))throw new TypeError("visitor must be a function");function v(S){if(S===null)return"";if(Ft.isDate(S))return S.toISOString();if(!g&&Ft.isBlob(S))throw new Ei("Blob is not supported. Use a Buffer instead.");return Ft.isArrayBuffer(S)||Ft.isTypedArray(S)?g&&typeof Blob=="function"?new Blob([S]):Buffer.from(S):S}function _(S,M,k){let x=S;if(S&&!k&&typeof S=="object"){if(Ft.endsWith(M,"{}"))M=i?M:M.slice(0,-2),S=JSON.stringify(S);else if(Ft.isArray(S)&&oBe(S)||(Ft.isFileList(S)||Ft.endsWith(M,"[]"))&&(x=Ft.toArray(S)))return M=Jme(M),x.forEach(function(P,O){!(Ft.isUndefined(P)||P===null)&&e.append(d===!0?Jie([M],O,l):d===null?M:M+"[]",v(P))}),!1}return GH(S)?!0:(e.append(Jie(k,M,l),v(S)),!1)}const b=[],w=Object.assign(aBe,{defaultVisitor:_,convertValue:v,isVisitable:GH});function E(S,M){if(!Ft.isUndefined(S)){if(b.indexOf(S)!==-1)throw Error("Circular reference detected in "+M.join("."));b.push(S),Ft.forEach(S,function(x,C){(!(Ft.isUndefined(x)||x===null)&&o.call(e,x,Ft.isString(C)?C.trim():C,M,w))===!0&&E(x,M?M.concat(C):[C])}),b.pop()}}if(!Ft.isObject(t))throw new TypeError("data must be an object");return E(t),e}function ese(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function iZ(t,e){this._pairs=[],t&&T7(t,this,e)}const e1e=iZ.prototype;e1e.append=function(e,n){this._pairs.push([e,n])};e1e.toString=function(e){const n=e?function(i){return e.call(this,i,ese)}:ese;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function lBe(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function t1e(t,e,n){if(!e)return t;const i=n&&n.encode||lBe,o=n&&n.serialize;let l;if(o?l=o(e,n):l=Ft.isURLSearchParams(e)?e.toString():new iZ(e,n).toString(i),l){const d=t.indexOf("#");d!==-1&&(t=t.slice(0,d)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}let cBe=class{constructor(){this.handlers=[]}use(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ft.forEach(this.handlers,function(i){i!==null&&e(i)})}};var tse=cBe,n1e={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},uBe=typeof URLSearchParams<"u"?URLSearchParams:iZ,fBe=typeof FormData<"u"?FormData:null,dBe=typeof Blob<"u"?Blob:null,hBe={isBrowser:!0,classes:{URLSearchParams:uBe,FormData:fBe,Blob:dBe},protocols:["http","https","file","blob","url","data"]};const r1e=typeof window<"u"&&typeof document<"u",pBe=(t=>r1e&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),mBe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function";var gBe=Object.freeze({__proto__:null,hasBrowserEnv:r1e,hasStandardBrowserWebWorkerEnv:mBe,hasStandardBrowserEnv:pBe}),bd={...gBe,...hBe};function vBe(t,e){return T7(t,new bd.classes.URLSearchParams,Object.assign({visitor:function(n,i,o,l){return bd.isNode&&Ft.isBuffer(n)?(this.append(i,n.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},e))}function _Be(t){return Ft.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function yBe(t){const e={},n=Object.keys(t);let i;const o=n.length;let l;for(i=0;i<o;i++)l=n[i],e[l]=t[l];return e}function i1e(t){function e(n,i,o,l){let d=n[l++];if(d==="__proto__")return!0;const p=Number.isFinite(+d),g=l>=n.length;return d=!d&&Ft.isArray(o)?o.length:d,g?(Ft.hasOwnProp(o,d)?o[d]=[o[d],i]:o[d]=i,!p):((!o[d]||!Ft.isObject(o[d]))&&(o[d]=[]),e(n,i,o[d],l)&&Ft.isArray(o[d])&&(o[d]=yBe(o[d])),!p)}if(Ft.isFormData(t)&&Ft.isFunction(t.entries)){const n={};return Ft.forEachEntry(t,(i,o)=>{e(_Be(i),o,n,0)}),n}return null}function bBe(t,e,n){if(Ft.isString(t))try{return(e||JSON.parse)(t),Ft.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(0,JSON.stringify)(t)}const sZ={transitional:n1e,adapter:["xhr","http"],transformRequest:[function(e,n){const i=n.getContentType()||"",o=i.indexOf("application/json")>-1,l=Ft.isObject(e);if(l&&Ft.isHTMLForm(e)&&(e=new FormData(e)),Ft.isFormData(e))return o?JSON.stringify(i1e(e)):e;if(Ft.isArrayBuffer(e)||Ft.isBuffer(e)||Ft.isStream(e)||Ft.isFile(e)||Ft.isBlob(e))return e;if(Ft.isArrayBufferView(e))return e.buffer;if(Ft.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let p;if(l){if(i.indexOf("application/x-www-form-urlencoded")>-1)return vBe(e,this.formSerializer).toString();if((p=Ft.isFileList(e))||i.indexOf("multipart/form-data")>-1){const g=this.env&&this.env.FormData;return T7(p?{"files[]":e}:e,g&&new g,this.formSerializer)}}return l||o?(n.setContentType("application/json",!1),bBe(e)):e}],transformResponse:[function(e){const n=this.transitional||sZ.transitional,i=n&&n.forcedJSONParsing,o=this.responseType==="json";if(e&&Ft.isString(e)&&(i&&!this.responseType||o)){const d=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(p){if(d)throw p.name==="SyntaxError"?Ei.from(p,Ei.ERR_BAD_RESPONSE,this,null,this.response):p}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:bd.classes.FormData,Blob:bd.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ft.forEach(["delete","get","head","post","put","patch"],t=>{sZ.headers[t]={}});var oZ=sZ;const ABe=Ft.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var wBe=t=>{const e={};let n,i,o;return t&&t.split(`
`).forEach(function(d){o=d.indexOf(":"),n=d.substring(0,o).trim().toLowerCase(),i=d.substring(o+1).trim(),!(!n||e[n]&&ABe[n])&&(n==="set-cookie"?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)}),e};const nse=Symbol("internals");function l3(t){return t&&String(t).trim().toLowerCase()}function rP(t){return t===!1||t==null?t:Ft.isArray(t)?t.map(rP):String(t)}function EBe(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)e[i[1]]=i[2];return e}const SBe=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function fF(t,e,n,i,o){if(Ft.isFunction(i))return i.call(this,e,n);if(o&&(e=n),!!Ft.isString(e)){if(Ft.isString(i))return e.indexOf(i)!==-1;if(Ft.isRegExp(i))return i.test(e)}}function TBe(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,i)=>n.toUpperCase()+i)}function xBe(t,e){const n=Ft.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(o,l,d){return this[i].call(this,e,o,l,d)},configurable:!0})})}let x7=class{constructor(e){e&&this.set(e)}set(e,n,i){const o=this;function l(p,g,v){const _=l3(g);if(!_)throw new Error("header name must be a non-empty string");const b=Ft.findKey(o,_);(!b||o[b]===void 0||v===!0||v===void 0&&o[b]!==!1)&&(o[b||g]=rP(p))}const d=(p,g)=>Ft.forEach(p,(v,_)=>l(v,_,g));return Ft.isPlainObject(e)||e instanceof this.constructor?d(e,n):Ft.isString(e)&&(e=e.trim())&&!SBe(e)?d(wBe(e),n):e!=null&&l(n,e,i),this}get(e,n){if(e=l3(e),e){const i=Ft.findKey(this,e);if(i){const o=this[i];if(!n)return o;if(n===!0)return EBe(o);if(Ft.isFunction(n))return n.call(this,o,i);if(Ft.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=l3(e),e){const i=Ft.findKey(this,e);return!!(i&&this[i]!==void 0&&(!n||fF(this,this[i],i,n)))}return!1}delete(e,n){const i=this;let o=!1;function l(d){if(d=l3(d),d){const p=Ft.findKey(i,d);p&&(!n||fF(i,i[p],p,n))&&(delete i[p],o=!0)}}return Ft.isArray(e)?e.forEach(l):l(e),o}clear(e){const n=Object.keys(this);let i=n.length,o=!1;for(;i--;){const l=n[i];(!e||fF(this,this[l],l,e,!0))&&(delete this[l],o=!0)}return o}normalize(e){const n=this,i={};return Ft.forEach(this,(o,l)=>{const d=Ft.findKey(i,l);if(d){n[d]=rP(o),delete n[l];return}const p=e?TBe(l):String(l).trim();p!==l&&delete n[l],n[p]=rP(o),i[p]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Ft.forEach(this,(i,o)=>{i!=null&&i!==!1&&(n[o]=e&&Ft.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const i=new this(e);return n.forEach(o=>i.set(o)),i}static accessor(e){const i=(this[nse]=this[nse]={accessors:{}}).accessors,o=this.prototype;function l(d){const p=l3(d);i[p]||(xBe(o,d),i[p]=!0)}return Ft.isArray(e)?e.forEach(l):l(e),this}};x7.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ft.reduceDescriptors(x7.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(i){this[n]=i}}});Ft.freezeMethods(x7);var Xh=x7;function dF(t,e){const n=this||oZ,i=e||n,o=Xh.from(i.headers);let l=i.data;return Ft.forEach(t,function(p){l=p.call(n,l,o.normalize(),e?e.status:void 0)}),o.normalize(),l}function s1e(t){return!!(t&&t.__CANCEL__)}function N6(t,e,n){Ei.call(this,t??"canceled",Ei.ERR_CANCELED,e,n),this.name="CanceledError"}Ft.inherits(N6,Ei,{__CANCEL__:!0});function MBe(t,e,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):e(new Ei("Request failed with status code "+n.status,[Ei.ERR_BAD_REQUEST,Ei.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}var kBe=bd.hasStandardBrowserEnv?{write(t,e,n,i,o,l){const d=[t+"="+encodeURIComponent(e)];Ft.isNumber(n)&&d.push("expires="+new Date(n).toGMTString()),Ft.isString(i)&&d.push("path="+i),Ft.isString(o)&&d.push("domain="+o),l===!0&&d.push("secure"),document.cookie=d.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function CBe(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function PBe(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function o1e(t,e){return t&&!CBe(e)?PBe(t,e):e}var RBe=bd.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let i;function o(l){let d=l;return e&&(n.setAttribute("href",d),d=n.href),n.setAttribute("href",d),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=o(window.location.href),function(d){const p=Ft.isString(d)?o(d):d;return p.protocol===i.protocol&&p.host===i.host}}():function(){return function(){return!0}}();function DBe(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function OBe(t,e){t=t||10;const n=new Array(t),i=new Array(t);let o=0,l=0,d;return e=e!==void 0?e:1e3,function(g){const v=Date.now(),_=i[l];d||(d=v),n[o]=g,i[o]=v;let b=l,w=0;for(;b!==o;)w+=n[b++],b=b%t;if(o=(o+1)%t,o===l&&(l=(l+1)%t),v-d<e)return;const E=_&&v-_;return E?Math.round(w*1e3/E):void 0}}function rse(t,e){let n=0;const i=OBe(50,250);return o=>{const l=o.loaded,d=o.lengthComputable?o.total:void 0,p=l-n,g=i(p),v=l<=d;n=l;const _={loaded:l,total:d,progress:d?l/d:void 0,bytes:p,rate:g||void 0,estimated:g&&d&&v?(d-l)/g:void 0,event:o};_[e?"download":"upload"]=!0,t(_)}}const IBe=typeof XMLHttpRequest<"u";var NBe=IBe&&function(t){return new Promise(function(n,i){let o=t.data;const l=Xh.from(t.headers).normalize();let{responseType:d,withXSRFToken:p}=t,g;function v(){t.cancelToken&&t.cancelToken.unsubscribe(g),t.signal&&t.signal.removeEventListener("abort",g)}let _;if(Ft.isFormData(o)){if(bd.hasStandardBrowserEnv||bd.hasStandardBrowserWebWorkerEnv)l.setContentType(!1);else if((_=l.getContentType())!==!1){const[M,...k]=_?_.split(";").map(x=>x.trim()).filter(Boolean):[];l.setContentType([M||"multipart/form-data",...k].join("; "))}}let b=new XMLHttpRequest;if(t.auth){const M=t.auth.username||"",k=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";l.set("Authorization","Basic "+btoa(M+":"+k))}const w=o1e(t.baseURL,t.url);b.open(t.method.toUpperCase(),t1e(w,t.params,t.paramsSerializer),!0),b.timeout=t.timeout;function E(){if(!b)return;const M=Xh.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),x={data:!d||d==="text"||d==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:M,config:t,request:b};MBe(function(P){n(P),v()},function(P){i(P),v()},x),b=null}if("onloadend"in b?b.onloadend=E:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(E)},b.onabort=function(){b&&(i(new Ei("Request aborted",Ei.ECONNABORTED,t,b)),b=null)},b.onerror=function(){i(new Ei("Network Error",Ei.ERR_NETWORK,t,b)),b=null},b.ontimeout=function(){let k=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const x=t.transitional||n1e;t.timeoutErrorMessage&&(k=t.timeoutErrorMessage),i(new Ei(k,x.clarifyTimeoutError?Ei.ETIMEDOUT:Ei.ECONNABORTED,t,b)),b=null},bd.hasStandardBrowserEnv&&(p&&Ft.isFunction(p)&&(p=p(t)),p||p!==!1&&RBe(w))){const M=t.xsrfHeaderName&&t.xsrfCookieName&&kBe.read(t.xsrfCookieName);M&&l.set(t.xsrfHeaderName,M)}o===void 0&&l.setContentType(null),"setRequestHeader"in b&&Ft.forEach(l.toJSON(),function(k,x){b.setRequestHeader(x,k)}),Ft.isUndefined(t.withCredentials)||(b.withCredentials=!!t.withCredentials),d&&d!=="json"&&(b.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&b.addEventListener("progress",rse(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&b.upload&&b.upload.addEventListener("progress",rse(t.onUploadProgress)),(t.cancelToken||t.signal)&&(g=M=>{b&&(i(!M||M.type?new N6(null,t,b):M),b.abort(),b=null)},t.cancelToken&&t.cancelToken.subscribe(g),t.signal&&(t.signal.aborted?g():t.signal.addEventListener("abort",g)));const S=DBe(w);if(S&&bd.protocols.indexOf(S)===-1){i(new Ei("Unsupported protocol "+S+":",Ei.ERR_BAD_REQUEST,t));return}b.send(o||null)})};const jH={http:sBe,xhr:NBe};Ft.forEach(jH,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const ise=t=>`- ${t}`,LBe=t=>Ft.isFunction(t)||t===null||t===!1;var a1e={getAdapter:t=>{t=Ft.isArray(t)?t:[t];const{length:e}=t;let n,i;const o={};for(let l=0;l<e;l++){n=t[l];let d;if(i=n,!LBe(n)&&(i=jH[(d=String(n)).toLowerCase()],i===void 0))throw new Ei(`Unknown adapter '${d}'`);if(i)break;o[d||"#"+l]=i}if(!i){const l=Object.entries(o).map(([p,g])=>`adapter ${p} `+(g===!1?"is not supported by the environment":"is not available in the build"));let d=e?l.length>1?`since :
`+l.map(ise).join(`
`):" "+ise(l[0]):"as no adapter specified";throw new Ei("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return i},adapters:jH};function hF(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new N6(null,t)}function sse(t){return hF(t),t.headers=Xh.from(t.headers),t.data=dF.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),a1e.getAdapter(t.adapter||oZ.adapter)(t).then(function(i){return hF(t),i.data=dF.call(t,t.transformResponse,i),i.headers=Xh.from(i.headers),i},function(i){return s1e(i)||(hF(t),i&&i.response&&(i.response.data=dF.call(t,t.transformResponse,i.response),i.response.headers=Xh.from(i.response.headers))),Promise.reject(i)})}const ose=t=>t instanceof Xh?{...t}:t;function Fb(t,e){e=e||{};const n={};function i(v,_,b){return Ft.isPlainObject(v)&&Ft.isPlainObject(_)?Ft.merge.call({caseless:b},v,_):Ft.isPlainObject(_)?Ft.merge({},_):Ft.isArray(_)?_.slice():_}function o(v,_,b){if(Ft.isUndefined(_)){if(!Ft.isUndefined(v))return i(void 0,v,b)}else return i(v,_,b)}function l(v,_){if(!Ft.isUndefined(_))return i(void 0,_)}function d(v,_){if(Ft.isUndefined(_)){if(!Ft.isUndefined(v))return i(void 0,v)}else return i(void 0,_)}function p(v,_,b){if(b in e)return i(v,_);if(b in t)return i(void 0,v)}const g={url:l,method:l,data:l,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,withXSRFToken:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:p,headers:(v,_)=>o(ose(v),ose(_),!0)};return Ft.forEach(Object.keys(Object.assign({},t,e)),function(_){const b=g[_]||o,w=b(t[_],e[_],_);Ft.isUndefined(w)&&b!==p||(n[_]=w)}),n}const l1e="1.6.8",aZ={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{aZ[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});const ase={};aZ.transitional=function(e,n,i){function o(l,d){return"[Axios v"+l1e+"] Transitional option '"+l+"'"+d+(i?". "+i:"")}return(l,d,p)=>{if(e===!1)throw new Ei(o(d," has been removed"+(n?" in "+n:"")),Ei.ERR_DEPRECATED);return n&&!ase[d]&&(ase[d]=!0,console.warn(o(d," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(l,d,p):!0}};function zBe(t,e,n){if(typeof t!="object")throw new Ei("options must be an object",Ei.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let o=i.length;for(;o-- >0;){const l=i[o],d=e[l];if(d){const p=t[l],g=p===void 0||d(p,l,t);if(g!==!0)throw new Ei("option "+l+" must be "+g,Ei.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Ei("Unknown option "+l,Ei.ERR_BAD_OPTION)}}var HH={assertOptions:zBe,validators:aZ};const Fp=HH.validators;let jO=class{constructor(e){this.defaults=e,this.interceptors={request:new tse,response:new tse}}async request(e,n){try{return await this._request(e,n)}catch(i){if(i instanceof Error){let o;Error.captureStackTrace?Error.captureStackTrace(o={}):o=new Error;const l=o.stack?o.stack.replace(/^.+\n/,""):"";i.stack?l&&!String(i.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+l):i.stack=l}throw i}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Fb(this.defaults,n);const{transitional:i,paramsSerializer:o,headers:l}=n;i!==void 0&&HH.assertOptions(i,{silentJSONParsing:Fp.transitional(Fp.boolean),forcedJSONParsing:Fp.transitional(Fp.boolean),clarifyTimeoutError:Fp.transitional(Fp.boolean)},!1),o!=null&&(Ft.isFunction(o)?n.paramsSerializer={serialize:o}:HH.assertOptions(o,{encode:Fp.function,serialize:Fp.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let d=l&&Ft.merge(l.common,l[n.method]);l&&Ft.forEach(["delete","get","head","post","put","patch","common"],S=>{delete l[S]}),n.headers=Xh.concat(d,l);const p=[];let g=!0;this.interceptors.request.forEach(function(M){typeof M.runWhen=="function"&&M.runWhen(n)===!1||(g=g&&M.synchronous,p.unshift(M.fulfilled,M.rejected))});const v=[];this.interceptors.response.forEach(function(M){v.push(M.fulfilled,M.rejected)});let _,b=0,w;if(!g){const S=[sse.bind(this),void 0];for(S.unshift.apply(S,p),S.push.apply(S,v),w=S.length,_=Promise.resolve(n);b<w;)_=_.then(S[b++],S[b++]);return _}w=p.length;let E=n;for(b=0;b<w;){const S=p[b++],M=p[b++];try{E=S(E)}catch(k){M.call(this,k);break}}try{_=sse.call(this,E)}catch(S){return Promise.reject(S)}for(b=0,w=v.length;b<w;)_=_.then(v[b++],v[b++]);return _}getUri(e){e=Fb(this.defaults,e);const n=o1e(e.baseURL,e.url);return t1e(n,e.params,e.paramsSerializer)}};Ft.forEach(["delete","get","head","options"],function(e){jO.prototype[e]=function(n,i){return this.request(Fb(i||{},{method:e,url:n,data:(i||{}).data}))}});Ft.forEach(["post","put","patch"],function(e){function n(i){return function(l,d,p){return this.request(Fb(p||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:l,data:d}))}}jO.prototype[e]=n(),jO.prototype[e+"Form"]=n(!0)});var iP=jO;let BBe=class c1e{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(l){n=l});const i=this;this.promise.then(o=>{if(!i._listeners)return;let l=i._listeners.length;for(;l-- >0;)i._listeners[l](o);i._listeners=null}),this.promise.then=o=>{let l;const d=new Promise(p=>{i.subscribe(p),l=p}).then(o);return d.cancel=function(){i.unsubscribe(l)},d},e(function(l,d,p){i.reason||(i.reason=new N6(l,d,p),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new c1e(function(o){e=o}),cancel:e}}};var UBe=BBe;function FBe(t){return function(n){return t.apply(null,n)}}function VBe(t){return Ft.isObject(t)&&t.isAxiosError===!0}const $H={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries($H).forEach(([t,e])=>{$H[e]=t});var GBe=$H;function u1e(t){const e=new iP(t),n=jme(iP.prototype.request,e);return Ft.extend(n,iP.prototype,e,{allOwnKeys:!0}),Ft.extend(n,e,null,{allOwnKeys:!0}),n.create=function(o){return u1e(Fb(t,o))},n}const qo=u1e(oZ);qo.Axios=iP;qo.CanceledError=N6;qo.CancelToken=UBe;qo.isCancel=s1e;qo.VERSION=l1e;qo.toFormData=T7;qo.AxiosError=Ei;qo.Cancel=qo.CanceledError;qo.all=function(e){return Promise.all(e)};qo.spread=FBe;qo.isAxiosError=VBe;qo.mergeConfig=Fb;qo.AxiosHeaders=Xh;qo.formToJSON=t=>i1e(Ft.isHTMLForm(t)?new FormData(t):t);qo.getAdapter=a1e.getAdapter;qo.HttpStatusCode=GBe;qo.default=qo;var jBe=qo,L6={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverResponseError=t.ShapeDiverRequestError=t.ShapeDiverError=t.ShapeDiverErrorType=void 0,t.ShapeDiverErrorType={Generic:"sd_gb_sdk_generic",Request:"sd_gb_sdk_request",Response:"sd_gb_sdk_response"};class e extends Error{constructor(l){super(l),this.errorType=t.ShapeDiverErrorType.Generic}}t.ShapeDiverError=e;class n extends e{constructor(l,d){super(d),this.desc=l,this.errorType=t.ShapeDiverErrorType.Request}}t.ShapeDiverRequestError=n;class i extends e{constructor(l,d,p,g,v){super(l),this.status=d,this.error=p,this.desc=g,this.headers=v,this.errorType=t.ShapeDiverErrorType.Response}}t.ShapeDiverResponseError=i})(L6);var M7={};Object.defineProperty(M7,"__esModule",{value:!0});M7.sdAssertUnreachable=void 0;const HBe=L6;function $Be(t){throw new HBe.ShapeDiverError("Reached unreachable block")}M7.sdAssertUnreachable=$Be;var o1=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})},WBe=X&&X.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(qg,"__esModule",{value:!0});qg.ShapeDiverSdkApi=qg.ShapeDiverSdkApiResponseType=void 0;const s_=WBe(jBe),c3=L6,YBe=M7;var k2;(function(t){t.DELETE="DELETE",t.GET="GET",t.HEAD="HEAD",t.PATCH="PATCH",t.POST="POST",t.PUT="PUT"})(k2||(k2={}));var af;(function(t){t.JSON="json",t.DATA="arraybuffer",t.TEXT="text"})(af||(qg.ShapeDiverSdkApiResponseType=af={}));class gu{constructor(e){this.config=e}buildRequestConfig(e,n,i){const o={method:e,headers:{},responseType:n.responseType,data:void 0};return n.disableCustomHeaders||(o.headers=Object.assign({},this.config.headers)),n.disableAuthorization?(delete o.headers.Authorization,delete o.headers.authorization):this.config.jwt&&(o.headers.Authorization="Bearer "+this.config.jwt),n.contentType&&(o.headers["Content-Type"]=n.contentType,o.data=i),n.accept&&(o.headers.Accept=n.accept),n.contentDisposition&&(o.headers["Content-Disposition"]=n.contentDisposition),o}buildUrl(e){if(typeof e!="string")throw new c3.ShapeDiverError("No URL or URI was specified");return e.startsWith("http")?e:e.startsWith("/")?`${this.config.baseUrl}/${e.substring(1)}`:`${this.config.baseUrl}/${e}`}static processError(e,n){var i,o,l;return o1(this,void 0,void 0,function*(){if(e.response){const d=e.response;let p;throw n===af.DATA?p=this.convertErrorResponseData(d.data):p=d.data,new c3.ShapeDiverResponseError(p.message||p.desc||((i=p.error)!==null&&i!==void 0?i:""),d.status,(o=p.error)!==null&&o!==void 0?o:"",(l=p.desc)!==null&&l!==void 0?l:"",d.headers)}else throw e.request?new c3.ShapeDiverRequestError("Could not send request.","The request was made but no response was received"):new c3.ShapeDiverError(e.message)})}static convertErrorResponseData(e){let n;if(typeof window>"u")n=Buffer.from(e).toString();else if(window.TextDecoder)n=new TextDecoder("utf-8").decode(new Uint8Array(e));else throw new c3.ShapeDiverError("Received an unknown error object");try{return JSON.parse(n)}catch{return{message:n}}}static parseResponse(e,n){switch(n){case af.TEXT:case af.JSON:return e;case af.DATA:return e instanceof ArrayBuffer?e:Uint8Array.from(e).buffer;default:(0,YBe.sdAssertUnreachable)(n)}}head(e,n={}){return o1(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},n),{responseType:af.JSON}),o=this.buildRequestConfig(k2.HEAD,i,void 0);try{const l=yield(0,s_.default)(this.buildUrl(e),o);return[l.headers,l.status]}catch(l){return yield gu.processError(l,i.responseType)}})}get(e,n={contentType:"application/json",responseType:af.JSON}){return o1(this,void 0,void 0,function*(){const i=this.buildRequestConfig(k2.GET,n,void 0);try{const o=yield(0,s_.default)(this.buildUrl(e),i);return[o.headers,gu.parseResponse(o.data,n.responseType)]}catch(o){return yield gu.processError(o,n.responseType)}})}post(e,n={},i={contentType:"application/json",responseType:af.JSON}){return o1(this,void 0,void 0,function*(){const o=this.buildRequestConfig(k2.POST,i,n);try{const l=yield(0,s_.default)(this.buildUrl(e),o);return[l.headers,gu.parseResponse(l.data,i.responseType)]}catch(l){return yield gu.processError(l,i.responseType)}})}put(e,n={},i={contentType:"application/json",responseType:af.JSON}){return o1(this,void 0,void 0,function*(){const o=this.buildRequestConfig(k2.PUT,i,n);try{const l=yield(0,s_.default)(this.buildUrl(e),o);return[l.headers,gu.parseResponse(l.data,i.responseType)]}catch(l){return yield gu.processError(l,i.responseType)}})}patch(e,n={},i={contentType:"application/json",responseType:af.JSON}){return o1(this,void 0,void 0,function*(){const o=this.buildRequestConfig(k2.PATCH,i,n);try{const l=yield(0,s_.default)(this.buildUrl(e),o);return[l.headers,gu.parseResponse(l.data,i.responseType)]}catch(l){return yield gu.processError(l,i.responseType)}})}delete(e,n={contentType:"application/json",responseType:af.JSON}){return o1(this,void 0,void 0,function*(){const i=this.buildRequestConfig(k2.DELETE,n,{});try{const o=yield(0,s_.default)(this.buildUrl(e),i);return[o.headers,gu.parseResponse(o.data,n.responseType)]}catch(o){return yield gu.processError(o,n.responseType)}})}}qg.ShapeDiverSdkApi=gu;var k7={},Xg={};Object.defineProperty(Xg,"__esModule",{value:!0});Xg.SdkConfigInternal=Xg.ShapeDiverSdkConfigType=void 0;const pF=L6;var YS;(function(t){t.BASE_URL="BASE_URL",t.JWT_TOKEN="JWT_TOKEN",t.REQUEST_HEADERS="REQUEST_HEADERS"})(YS||(Xg.ShapeDiverSdkConfigType=YS={}));class qS{constructor(e){this._baseUrl=e,this._headers={},this._jwt=""}get baseUrl(){return this._baseUrl}get headers(){return this._headers}get jwt(){return this._jwt}toConfig(){return{baseUrl:this._baseUrl,headers:this._headers,jwt:this._jwt}}setConfigValue(e,n){switch(e){case YS.BASE_URL:this._baseUrl=qS.validateValue(e,n,"string");break;case YS.JWT_TOKEN:this._jwt=qS.validateValue(e,n,"string");break;case YS.REQUEST_HEADERS:this._headers=qS.validateValue(e,n,"string_map");break;default:throw new pF.ShapeDiverError(`Invalid config-type ${e}`)}}static validateValue(e,n,i){switch(i){case"string":if(typeof n!="string")throw new pF.ShapeDiverError(`Invalid value for config-type '${e}': Value must be a string`);break;case"string_map":if(typeof n!="object"||!Object.values(n).every(o=>typeof o=="string"))throw new pF.ShapeDiverError(`Invalid value for config-type '${e}': Value must be a string-map`);break}return n}}Xg.SdkConfigInternal=qS;Object.defineProperty(k7,"__esModule",{value:!0});k7.BaseShapeDiverSdk=void 0;const qBe=qg,XBe=Xg;class ZBe{constructor(e){this.sdkConfig=new XBe.SdkConfigInternal(e),this.sdkApi=new qBe.ShapeDiverSdkApi(this.sdkConfig)}setConfigurationValue(e,n){this.sdkConfig.setConfigValue(e,n)}get configuration(){return this.sdkConfig.toConfig()}}k7.BaseShapeDiverSdk=ZBe;var C7={};Object.defineProperty(C7,"__esModule",{value:!0});C7.BaseResourceApi=void 0;class QBe{constructor(e){this.commonPath="/api/v2",this.api=e}buildAnalyticsUri(){return`${this.commonPath}/analytics`}buildArSceneUri(){return`${this.commonPath}/ar-scene`}buildAuthGroupUri(){return`${this.commonPath}/auth_group`}buildTicketUri(e){return`${this.commonPath}/ticket/${e}`}buildSessionUri(e){return`${this.commonPath}/session/${e}`}buildModelUri(e){return`${this.commonPath}/model/${e}`}buildSystemUri(){return`${this.commonPath}/system`}}C7.BaseResourceApi=QBe;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverSdkConfigType=t.ShapeDiverSdkApiResponseType=t.ShapeDiverSdkApi=t.ShapeDiverResponseError=t.ShapeDiverRequestError=t.ShapeDiverErrorType=t.ShapeDiverError=t.BaseShapeDiverSdk=t.BaseResourceApi=void 0;const e=qg;Object.defineProperty(t,"ShapeDiverSdkApi",{enumerable:!0,get:function(){return e.ShapeDiverSdkApi}}),Object.defineProperty(t,"ShapeDiverSdkApiResponseType",{enumerable:!0,get:function(){return e.ShapeDiverSdkApiResponseType}});const n=k7;Object.defineProperty(t,"BaseShapeDiverSdk",{enumerable:!0,get:function(){return n.BaseShapeDiverSdk}});const i=Xg;Object.defineProperty(t,"ShapeDiverSdkConfigType",{enumerable:!0,get:function(){return i.ShapeDiverSdkConfigType}});const o=C7;Object.defineProperty(t,"BaseResourceApi",{enumerable:!0,get:function(){return o.BaseResourceApi}});const l=L6;Object.defineProperty(t,"ShapeDiverError",{enumerable:!0,get:function(){return l.ShapeDiverError}}),Object.defineProperty(t,"ShapeDiverErrorType",{enumerable:!0,get:function(){return l.ShapeDiverErrorType}}),Object.defineProperty(t,"ShapeDiverRequestError",{enumerable:!0,get:function(){return l.ShapeDiverRequestError}}),Object.defineProperty(t,"ShapeDiverResponseError",{enumerable:!0,get:function(){return l.ShapeDiverResponseError}})})(Sa);var z6={};Object.defineProperty(z6,"__esModule",{value:!0});z6.ShapeDiverResponseError=void 0;const lse=v7,cse=Sa;class KBe extends cse.ShapeDiverError{constructor(e){super(e.message),this.errorType=cse.ShapeDiverErrorType.Response,this.status=e.status,this.desc=e.desc,this.error=Object.values(lse.ShapeDiverResponseErrorType).includes(e.error)?e.error:lse.ShapeDiverResponseErrorType.UNKNOWN}}z6.ShapeDiverResponseError=KBe;var Vb={},P7={},us={},JBe=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty(us,"__esModule",{value:!0});us.encodeBase64=us.sleep=us.sendRequest=us.isGBResponseError=us.isGBRequestError=us.isGBGenericError=us.isGBError=void 0;const Gb=Sa,eUe=z6;function tUe(t){return t instanceof Error&&"errorType"in t&&Object.values(Gb.ShapeDiverErrorType).includes(t.errorType)}us.isGBError=tUe;function nUe(t){return t instanceof Error&&"errorType"in t&&t.errorType===Gb.ShapeDiverErrorType.Generic}us.isGBGenericError=nUe;function rUe(t){return t instanceof Error&&"errorType"in t&&t.errorType===Gb.ShapeDiverErrorType.Request}us.isGBRequestError=rUe;function iUe(t){return t instanceof Error&&"errorType"in t&&t.errorType===Gb.ShapeDiverErrorType.Response}us.isGBResponseError=iUe;function sUe(t){var e;return JBe(this,void 0,void 0,function*(){let i=0;for(;i<5;)try{return yield t()}catch(o){if(i++,o instanceof Gb.ShapeDiverResponseError){if(o.status===429){const l=(e=o.headers["retry-after"])!==null&&e!==void 0?e:60;yield WH(Number(l)*1e3);continue}else if(o.status===502){yield WH(1e3);continue}throw new eUe.ShapeDiverResponseError(o)}else throw o}throw new Gb.ShapeDiverError("Could not send request: Retry-limit reached")})}us.sendRequest=sUe;function WH(t){return new Promise(e=>setTimeout(e,t))}us.sleep=WH;function oUe(t){try{return btoa(t)}catch{return Buffer.from(t).toString("base64")}}us.encodeBase64=oUe;var use=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty(P7,"__esModule",{value:!0});P7.ShapeDiverAnalyticsApi=void 0;const aUe=Sa,lUe=us;class cUe extends aUe.BaseResourceApi{constructor(e){super(e)}modelSessionStatistics(e){return use(this,void 0,void 0,function*(){return yield(0,lUe.sendRequest)(()=>use(this,void 0,void 0,function*(){return(yield this.api.put(this.buildAnalyticsUri()+"/session/model",e))[1]}))})}}P7.ShapeDiverAnalyticsApi=cUe;var R7={},o_=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty(R7,"__esModule",{value:!0});R7.ShapeDiverArSceneApi=void 0;const O8=Sa,mF=us;class uUe extends O8.BaseResourceApi{constructor(e){super(e)}exists(e){return o_(this,void 0,void 0,function*(){return yield(0,mF.sendRequest)(()=>o_(this,void 0,void 0,function*(){try{const[n,i]=yield this.api.head(`${this.buildArSceneUri()}/${e}`,{disableAuthorization:!0});return i===200}catch(n){if(n instanceof O8.ShapeDiverResponseError&&n.status===404)return!1;throw n}}))})}getGltf(e){return o_(this,void 0,void 0,function*(){return yield(0,mF.sendRequest)(()=>o_(this,void 0,void 0,function*(){var n;const[i,o]=yield this.api.get(`${this.buildArSceneUri()}/${e}/gltf`,{responseType:O8.ShapeDiverSdkApiResponseType.DATA,disableAuthorization:!0}),l=(n=i["Content-Type"])!==null&&n!==void 0?n:i["content-type"];return[o,l]}))})}getUsdz(e){return o_(this,void 0,void 0,function*(){return yield(0,mF.sendRequest)(()=>o_(this,void 0,void 0,function*(){var n;const[i,o]=yield this.api.get(`${this.buildArSceneUri()}/${e}/usdz`,{responseType:O8.ShapeDiverSdkApiResponseType.DATA,disableAuthorization:!0}),l=(n=i["Content-Type"])!==null&&n!==void 0?n:i["content-type"];return[o,l]}))})}}R7.ShapeDiverArSceneApi=uUe;var D7={},il=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty(D7,"__esModule",{value:!0});D7.ShapeDiverAssetApi=void 0;const Z0=Sa,Jd=us,fUe=/.+\/session\/.+\/export\/.+/,dUe=/.+\/session\/.+\/output\/.+/,fse=/.+\/session\/.+\/texture\/.+/,dse=/.+\/cdn-asset-(exports|outputs|textures)\/.+/,hUe=/.+\/cdn-asset-exports\/.+/,pUe=/.+\/cdn-asset-outputs\/.+/,hse=/.+\/cdn-asset-textures\/.+/;class mUe extends Z0.BaseResourceApi{constructor(e){super(e)}getExport(e,n){return il(this,void 0,void 0,function*(){return yield(0,Jd.sendRequest)(()=>il(this,void 0,void 0,function*(){var i;const[o,l]=yield this.api.get(`${this.buildSessionUri(e)}/export/${n}`,{responseType:Z0.ShapeDiverSdkApiResponseType.DATA}),d=(i=o["Content-Type"])!==null&&i!==void 0?i:o["content-type"];return[l,d]}))})}getOutput(e,n){return il(this,void 0,void 0,function*(){return yield(0,Jd.sendRequest)(()=>il(this,void 0,void 0,function*(){var i;const[o,l]=yield this.api.get(`${this.buildSessionUri(e)}/output/${n}`,{responseType:Z0.ShapeDiverSdkApiResponseType.DATA}),d=(i=o["Content-Type"])!==null&&i!==void 0?i:o["content-type"];return[l,d]}))})}getSdtfJsonContent(e,n){return il(this,void 0,void 0,function*(){return yield(0,Jd.sendRequest)(()=>il(this,void 0,void 0,function*(){return(yield this.api.get(`${this.buildSessionUri(e)}/output/${n}`,{responseType:Z0.ShapeDiverSdkApiResponseType.JSON,accept:"model/vnd.sdtf+json"}))[1]}))})}getTexture(e,n){return il(this,void 0,void 0,function*(){return yield(0,Jd.sendRequest)(()=>il(this,void 0,void 0,function*(){var i;const[o,l]=yield this.api.get(`${this.buildSessionUri(e)}/texture/${n}`,{responseType:Z0.ShapeDiverSdkApiResponseType.DATA}),d=(i=o["Content-Type"])!==null&&i!==void 0?i:o["content-type"];return[l,d]}))})}getGltf(e,n){return il(this,void 0,void 0,function*(){return yield(0,Jd.sendRequest)(()=>il(this,void 0,void 0,function*(){return(yield this.api.get(`${this.buildSessionUri(e)}/gltf/${n}`,{responseType:Z0.ShapeDiverSdkApiResponseType.DATA}))[1]}))})}getUsdz(e,n){return il(this,void 0,void 0,function*(){return yield(0,Jd.sendRequest)(()=>il(this,void 0,void 0,function*(){return(yield this.api.get(`${this.buildSessionUri(e)}/usdz/${n}`,{responseType:Z0.ShapeDiverSdkApiResponseType.DATA}))[1]}))})}downloadImage(e,n){return il(this,void 0,void 0,function*(){let i;return fse.test(n)||hse.test(n)?i=n:i=`${this.buildSessionUri(e)}/image?url=${(0,Jd.encodeBase64)(n)}`,yield(0,Jd.sendRequest)(()=>il(this,void 0,void 0,function*(){var o;const[l,d]=yield this.api.get(i,{responseType:Z0.ShapeDiverSdkApiResponseType.DATA,disableAuthorization:dse.test(n)}),p=(o=l["Content-Type"])!==null&&o!==void 0?o:l["content-type"];return[d,p]}))})}getAsset(e){return il(this,void 0,void 0,function*(){let n;if(fUe.test(e)||hUe.test(e))n="export";else if(dUe.test(e)||pUe.test(e))n="output";else if(fse.test(e)||hse.test(e))n="texture";else throw new Z0.ShapeDiverError("Cannot fetch asset: Invalid URL (only ShapeDiver asset URLs are allowed).");return yield(0,Jd.sendRequest)(()=>il(this,void 0,void 0,function*(){var i;const[o,l]=yield this.api.get(e,{responseType:Z0.ShapeDiverSdkApiResponseType.DATA,disableAuthorization:dse.test(e)}),d=(i=o["Content-Type"])!==null&&i!==void 0?i:o["content-type"];return[l,d,n]}))})}}D7.ShapeDiverAssetApi=mUe;var O7={},Vp=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty(O7,"__esModule",{value:!0});O7.ShapeDiverExportApi=void 0;const gUe=Sa,I8=us;class vUe extends gUe.BaseResourceApi{constructor(e){super(e)}compute(e,n){return Vp(this,void 0,void 0,function*(){return yield(0,I8.sendRequest)(()=>Vp(this,void 0,void 0,function*(){return(yield this.api.put(this.buildSessionUri(e)+"/export",n))[1]}))})}getCache(e,n){return Vp(this,void 0,void 0,function*(){return yield(0,I8.sendRequest)(()=>Vp(this,void 0,void 0,function*(){return(yield this.api.put(this.buildSessionUri(e)+"/export/cache",n))[1]}))})}updateDefinitions(e,n){return Vp(this,void 0,void 0,function*(){return yield(0,I8.sendRequest)(()=>Vp(this,void 0,void 0,function*(){return(yield this.api.patch(this.buildModelUri(e)+"/export",n))[1]}))})}listVersions(e,n){return Vp(this,void 0,void 0,function*(){return yield(0,I8.sendRequest)(()=>Vp(this,void 0,void 0,function*(){return(yield this.api.get(this.buildSessionUri(e)+"/export/"+n+"/list"))[1]}))})}}O7.ShapeDiverExportApi=vUe;var I7={},Q0=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty(I7,"__esModule",{value:!0});I7.ShapeDiverFileApi=void 0;const pse=Sa,u3=us;class _Ue extends pse.BaseResourceApi{constructor(e){super(e)}list(e,n){return Q0(this,void 0,void 0,function*(){return yield(0,u3.sendRequest)(()=>Q0(this,void 0,void 0,function*(){return(yield this.api.get(`${this.buildSessionUri(e)}/file/${n}/list`))[1]}))})}info(e,n,i){return Q0(this,void 0,void 0,function*(){return yield(0,u3.sendRequest)(()=>Q0(this,void 0,void 0,function*(){const o=(yield this.api.head(`${this.buildSessionUri(e)}/file/${n}/${i}`))[0],l={size:Number(o.get("Content-Length")||o.get("content-length"))},d=o.get("Content-Disposition")||o.get("content-disposition");return typeof d=="string"&&d.indexOf("=")>0&&(l.filename=d.split("=")[1].slice(1,-1)),l}))})}get(e,n,i){return Q0(this,void 0,void 0,function*(){return yield(0,u3.sendRequest)(()=>Q0(this,void 0,void 0,function*(){return(yield this.api.get(`${this.buildSessionUri(e)}/file/${n}/${i}`,{responseType:pse.ShapeDiverSdkApiResponseType.DATA}))[1]}))})}delete(e,n,i){return Q0(this,void 0,void 0,function*(){return yield(0,u3.sendRequest)(()=>Q0(this,void 0,void 0,function*(){return(yield this.api.delete(`${this.buildSessionUri(e)}/file/${n}/${i}`))[1]}))})}requestUpload(e,n){return Q0(this,void 0,void 0,function*(){return yield(0,u3.sendRequest)(()=>Q0(this,void 0,void 0,function*(){return(yield this.api.post(this.buildSessionUri(e)+"/file/upload",n))[1]}))})}}I7.ShapeDiverFileApi=_Ue;var N7={},mse=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty(N7,"__esModule",{value:!0});N7.ShapeDiverGltfApi=void 0;const yUe=v7,gse=Sa,bUe=us;class AUe extends gse.BaseResourceApi{constructor(e){super(e)}upload(e,n,i,o=yUe.ShapeDiverRequestGltfUploadQueryConversion.NONE){return mse(this,void 0,void 0,function*(){return yield(0,bUe.sendRequest)(()=>mse(this,void 0,void 0,function*(){return(yield this.api.post(`${this.buildSessionUri(e)}/gltf?conversion=${o}`,n,{contentType:i,responseType:gse.ShapeDiverSdkApiResponseType.JSON}))[1]}))})}}N7.ShapeDiverGltfApi=AUe;var L7={},Di=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty(L7,"__esModule",{value:!0});L7.ShapeDiverModelApi=void 0;const vse=Sa,sl=us;class wUe extends vse.BaseResourceApi{constructor(e){super(e)}get(e){return Di(this,void 0,void 0,function*(){return yield(0,sl.sendRequest)(()=>Di(this,void 0,void 0,function*(){return(yield this.api.get(this.buildModelUri(e)))[1]}))})}create(e){return Di(this,void 0,void 0,function*(){return yield(0,sl.sendRequest)(()=>Di(this,void 0,void 0,function*(){return(yield this.api.post(this.commonPath,e))[1]}))})}update(e,n){return Di(this,void 0,void 0,function*(){return yield(0,sl.sendRequest)(()=>Di(this,void 0,void 0,function*(){return(yield this.api.put(this.buildModelUri(e),n))[1]}))})}delete(e){return Di(this,void 0,void 0,function*(){return yield(0,sl.sendRequest)(()=>Di(this,void 0,void 0,function*(){return(yield this.api.delete(this.buildModelUri(e)))[1]}))})}list(){return Di(this,void 0,void 0,function*(){return yield(0,sl.sendRequest)(()=>Di(this,void 0,void 0,function*(){return(yield this.api.get(`${this.commonPath}/list`))[1]}))})}getConfig(e){return Di(this,void 0,void 0,function*(){return yield(0,sl.sendRequest)(()=>Di(this,void 0,void 0,function*(){return(yield this.api.get(this.buildModelUri(e)+"/config"))[1]}))})}createConfig(e,n){return Di(this,void 0,void 0,function*(){return yield(0,sl.sendRequest)(()=>Di(this,void 0,void 0,function*(){return(yield this.api.post(this.buildModelUri(e)+"/config",n))[1]}))})}updateConfig(e,n){return Di(this,void 0,void 0,function*(){return yield(0,sl.sendRequest)(()=>Di(this,void 0,void 0,function*(){return(yield this.api.patch(this.buildModelUri(e)+"/config",n))[1]}))})}getFile(e){return Di(this,void 0,void 0,function*(){return yield(0,sl.sendRequest)(()=>Di(this,void 0,void 0,function*(){return(yield this.api.get(this.buildModelUri(e)+"/file/download",{contentType:"application/json",responseType:vse.ShapeDiverSdkApiResponseType.DATA}))[1]}))})}setDefaultParams(e,n){return Di(this,void 0,void 0,function*(){return yield(0,sl.sendRequest)(()=>Di(this,void 0,void 0,function*(){return(yield this.api.patch(this.buildModelUri(e)+"/parameter/defval",n))[1]}))})}updateParameterDefinitions(e,n){return Di(this,void 0,void 0,function*(){return yield(0,sl.sendRequest)(()=>Di(this,void 0,void 0,function*(){return(yield this.api.patch(this.buildModelUri(e)+"/parameter",n))[1]}))})}queryComputations(e,n,i,o,l,d,p,g,v){return Di(this,void 0,void 0,function*(){const _=[];return n!==void 0&&_.push("timestamp_from="+n),i!==void 0&&_.push("timestamp_to="+i),o!==void 0&&_.push("limit="+o),l!==void 0&&_.push("strict_limit="+l),d!==void 0&&_.push("order="+d),p!==void 0&&_.push("status="+p),g!==void 0&&_.push("type="+g),v!==void 0&&_.push("offset="+v),yield(0,sl.sendRequest)(()=>Di(this,void 0,void 0,function*(){return(yield this.api.get(this.buildModelUri(e)+"/computations?"+_.join("&")))[1]}))})}enqueueCleanupExports(e,n){return Di(this,void 0,void 0,function*(){return yield(0,sl.sendRequest)(()=>Di(this,void 0,void 0,function*(){return(yield this.api.post(this.buildModelUri(e)+"/cleanup/export?untilLastSeen="+n))[1]}))})}enqueueCleanupOutputs(e,n){return Di(this,void 0,void 0,function*(){return yield(0,sl.sendRequest)(()=>Di(this,void 0,void 0,function*(){return(yield this.api.post(this.buildModelUri(e)+"/cleanup/output?untilLastSeen="+n))[1]}))})}enqueueCleanupTextures(e,n){return Di(this,void 0,void 0,function*(){return yield(0,sl.sendRequest)(()=>Di(this,void 0,void 0,function*(){return(yield this.api.post(this.buildModelUri(e)+"/cleanup/texture?untilLastSeen="+n))[1]}))})}getCleanupStatus(e){return Di(this,void 0,void 0,function*(){return yield(0,sl.sendRequest)(()=>Di(this,void 0,void 0,function*(){return(yield this.api.get(this.buildModelUri(e)+"/cleanup/status"))[1]}))})}}L7.ShapeDiverModelApi=wUe;var z7={},Gp=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty(z7,"__esModule",{value:!0});z7.ShapeDiverOutputApi=void 0;const EUe=Sa,N8=us;class SUe extends EUe.BaseResourceApi{constructor(e){super(e)}customize(e,n){return Gp(this,void 0,void 0,function*(){return yield(0,N8.sendRequest)(()=>Gp(this,void 0,void 0,function*(){return(yield this.api.put(this.buildSessionUri(e)+"/output",n))[1]}))})}getCache(e,n){return Gp(this,void 0,void 0,function*(){return yield(0,N8.sendRequest)(()=>Gp(this,void 0,void 0,function*(){return(yield this.api.put(this.buildSessionUri(e)+"/output/cache",n))[1]}))})}updateDefinitions(e,n){return Gp(this,void 0,void 0,function*(){return yield(0,N8.sendRequest)(()=>Gp(this,void 0,void 0,function*(){return(yield this.api.patch(this.buildModelUri(e)+"/output",n))[1]}))})}listVersions(e,n){return Gp(this,void 0,void 0,function*(){return yield(0,N8.sendRequest)(()=>Gp(this,void 0,void 0,function*(){return(yield this.api.get(this.buildSessionUri(e)+"/output/"+n+"/list"))[1]}))})}}z7.ShapeDiverOutputApi=SUe;var B7={},jp=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty(B7,"__esModule",{value:!0});B7.ShapeDiverSdtfApi=void 0;const _se=Sa,L8=us;class TUe extends _se.BaseResourceApi{constructor(e){super(e)}list(e,n){return jp(this,void 0,void 0,function*(){return yield(0,L8.sendRequest)(()=>jp(this,void 0,void 0,function*(){return(yield this.api.get(`${this.buildSessionUri(e)}/sdtf/${n}/list`))[1]}))})}get(e,n){return jp(this,void 0,void 0,function*(){return yield(0,L8.sendRequest)(()=>jp(this,void 0,void 0,function*(){return(yield this.api.get(`${this.buildSessionUri(e)}/sdtf/${n}`,{responseType:_se.ShapeDiverSdkApiResponseType.DATA}))[1]}))})}delete(e,n){return jp(this,void 0,void 0,function*(){return yield(0,L8.sendRequest)(()=>jp(this,void 0,void 0,function*(){return(yield this.api.delete(`${this.buildSessionUri(e)}/sdtf/${n}`))[1]}))})}requestUpload(e,n){return jp(this,void 0,void 0,function*(){return yield(0,L8.sendRequest)(()=>jp(this,void 0,void 0,function*(){return(yield this.api.post(this.buildSessionUri(e)+"/sdtf/upload",n))[1]}))})}}B7.ShapeDiverSdtfApi=TUe;var U7={},K0=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty(U7,"__esModule",{value:!0});U7.ShapeDiverSessionApi=void 0;const xUe=Sa,f3=us;class MUe extends xUe.BaseResourceApi{constructor(e){super(e)}ticket(e,n){return K0(this,void 0,void 0,function*(){return yield(0,f3.sendRequest)(()=>K0(this,void 0,void 0,function*(){return(yield this.api.post(this.buildModelUri(e)+"/ticket",n))[1]}))})}init(e,n){return K0(this,void 0,void 0,function*(){return yield(0,f3.sendRequest)(()=>K0(this,void 0,void 0,function*(){return(yield this.api.post(this.buildTicketUri(e),n))[1]}))})}initForModel(e,n){return K0(this,void 0,void 0,function*(){return yield(0,f3.sendRequest)(()=>K0(this,void 0,void 0,function*(){return(yield this.api.post(this.buildModelUri(e)+"/session",n))[1]}))})}default(e){return K0(this,void 0,void 0,function*(){return yield(0,f3.sendRequest)(()=>K0(this,void 0,void 0,function*(){return(yield this.api.get(this.buildSessionUri(e)+"/default"))[1]}))})}close(e){return K0(this,void 0,void 0,function*(){return yield(0,f3.sendRequest)(()=>K0(this,void 0,void 0,function*(){return(yield this.api.post(this.buildSessionUri(e)+"/close"))[1]}))})}}U7.ShapeDiverSessionApi=MUe;var F7={},Wu=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty(F7,"__esModule",{value:!0});F7.ShapeDiverSystemApi=void 0;const kUe=Sa,a_=us;class CUe extends kUe.BaseResourceApi{constructor(e){super(e)}log(e,n){return Wu(this,void 0,void 0,function*(){return yield(0,a_.sendRequest)(()=>Wu(this,void 0,void 0,function*(){return(yield this.api.post(this.buildSessionUri(e)+"/log/message",n))[1]}))})}pruneModel(e){return Wu(this,void 0,void 0,function*(){return yield(0,a_.sendRequest)(()=>Wu(this,void 0,void 0,function*(){return(yield this.api.delete(`${this.buildSystemUri()}/model/${e}`))[1]}))})}decryptTicket(e){return Wu(this,void 0,void 0,function*(){return yield(0,a_.sendRequest)(()=>Wu(this,void 0,void 0,function*(){return(yield this.api.get(this.buildTicketUri(e)))[1]}))})}authGroup(e){return Wu(this,void 0,void 0,function*(){return yield(0,a_.sendRequest)(()=>Wu(this,void 0,void 0,function*(){return(yield this.api.post(this.buildAuthGroupUri(),e))[1]}))})}getMinionInfo(){return Wu(this,void 0,void 0,function*(){return(0,a_.sendRequest)(()=>Wu(this,void 0,void 0,function*(){return(yield this.api.get(`${this.buildSystemUri()}/minions/info`))[1]}))})}getWorkerInfo(){return Wu(this,void 0,void 0,function*(){return(0,a_.sendRequest)(()=>Wu(this,void 0,void 0,function*(){return(yield this.api.get(`${this.buildSystemUri()}/workers/info`))[1]}))})}}F7.ShapeDiverSystemApi=CUe;var V7={},yse=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty(V7,"__esModule",{value:!0});V7.ShapeDiverTextureApi=void 0;const PUe=Sa,RUe=us;class DUe extends PUe.BaseResourceApi{constructor(e){super(e)}listModelTextures(e){return yse(this,void 0,void 0,function*(){return yield(0,RUe.sendRequest)(()=>yse(this,void 0,void 0,function*(){return(yield this.api.get(this.buildSessionUri(e)+"/texture/list"))[1]}))})}}V7.ShapeDiverTextureApi=DUe;var G7={},Yu=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty(G7,"__esModule",{value:!0});G7.ShapeDiverUtilsApi=void 0;const z8=Sa,Hp=us;class C2 extends z8.BaseResourceApi{constructor(e){super(e)}upload(e,n,i,o){return Yu(this,void 0,void 0,function*(){return yield(0,Hp.sendRequest)(()=>Yu(this,void 0,void 0,function*(){return this.api.put(e,n,{contentType:i,contentDisposition:o?`attachment; filename="${o}"`:void 0,responseType:z8.ShapeDiverSdkApiResponseType.JSON,disableAuthorization:!0,disableCustomHeaders:!0})}))})}download(e,n){return Yu(this,void 0,void 0,function*(){return yield(0,Hp.sendRequest)(()=>Yu(this,void 0,void 0,function*(){return this.api.get(e,{contentType:"application/json",responseType:n,disableAuthorization:!0,disableCustomHeaders:!0})}))})}submitAndWaitForCustomization(e,n,i,o=-1){return Yu(this,void 0,void 0,function*(){const l=Date.now(),d=yield(0,Hp.sendRequest)(()=>Yu(this,void 0,void 0,function*(){return e.output.customize(n,i)})),p=Date.now()-l;return o=o<0?o:Math.max(0,o-p),C2.waitForCustomizationResult(e,n,d,o)})}submitAndWaitForExport(e,n,i,o=-1){return Yu(this,void 0,void 0,function*(){const l=Date.now(),d=yield(0,Hp.sendRequest)(()=>Yu(this,void 0,void 0,function*(){return e.export.compute(n,i)})),p=Date.now()-l;return o=o<0?o:Math.max(0,o-p),C2.waitForExportResult(e,n,i,d,o)})}static waitForCustomizationResult(e,n,i,o=-1){return Yu(this,void 0,void 0,function*(){if(!i.outputs)return i;const l={};Object.keys(i.outputs).forEach(g=>l[g]=i.outputs[g].version);let d=C2.getMaxOutputDelay(i);const p=Date.now();for(;d>0;){if(o>=0){const g=Date.now()-p;if(g>=o)throw new z8.ShapeDiverError(`Maximum wait time of ${o} ms reached`);g+d>o&&(d=o-g)}yield(0,Hp.sleep)(d),i=yield(0,Hp.sendRequest)(()=>Yu(this,void 0,void 0,function*(){return e.output.getCache(n,l)})),d=C2.getMaxOutputDelay(i)}return i})}static waitForExportResult(e,n,i,o,l=-1){return Yu(this,void 0,void 0,function*(){let d=C2.getMaxExportDelay(o,i);const p=Date.now();for(;d>0;){if(l>=0){const g=Date.now()-p;if(g>=l)throw new z8.ShapeDiverError(`Maximum wait time of ${l} ms reached`);g+d>l&&(d=l-g)}yield(0,Hp.sleep)(d),o=yield(0,Hp.sendRequest)(()=>Yu(this,void 0,void 0,function*(){return e.export.getCache(n,i)})),d=C2.getMaxExportDelay(o,i)}return o})}static getMaxOutputDelay(e){return Math.max(...Object.values(e.outputs).map(n=>n).map(n=>{var i;return(i=n.delay)!==null&&i!==void 0?i:-1}))}static getMaxExportDelay(e,n){var i,o,l;const d=Array.isArray(n.exports)?n.exports:[n.exports.id],p=(i=n.outputs)!==null&&i!==void 0?i:[];return Math.max(...Object.values((o=e.exports)!==null&&o!==void 0?o:{}).filter(g=>d.includes(g.id)).map(g=>g).map(g=>{var v;return(v=g.delay)!==null&&v!==void 0?v:-1}),...Object.values((l=e.outputs)!==null&&l!==void 0?l:{}).filter(g=>p.includes(g.id)).map(g=>g).map(g=>{var v;return(v=g.delay)!==null&&v!==void 0?v:-1}))}}G7.ShapeDiverUtilsApi=C2;Object.defineProperty(Vb,"__esModule",{value:!0});Vb.ShapeDiverSdk=Vb.create=void 0;const bse=Sa,OUe=P7,IUe=R7,NUe=D7,LUe=O7,zUe=I7,BUe=N7,UUe=L7,FUe=z7,VUe=B7,GUe=U7,jUe=F7,HUe=V7,$Ue=G7;function WUe(t,e){return new f1e(t,e)}Vb.create=WUe;class f1e extends bse.BaseShapeDiverSdk{constructor(e,n){super(e),n&&this.setConfigurationValue(bse.ShapeDiverSdkConfigType.JWT_TOKEN,n),this._analytics=new OUe.ShapeDiverAnalyticsApi(this.sdkApi),this._arScene=new IUe.ShapeDiverArSceneApi(this.sdkApi),this._asset=new NUe.ShapeDiverAssetApi(this.sdkApi),this._export=new LUe.ShapeDiverExportApi(this.sdkApi),this._file=new zUe.ShapeDiverFileApi(this.sdkApi),this._gltf=new BUe.ShapeDiverGltfApi(this.sdkApi),this._model=new UUe.ShapeDiverModelApi(this.sdkApi),this._output=new FUe.ShapeDiverOutputApi(this.sdkApi),this._sdtf=new VUe.ShapeDiverSdtfApi(this.sdkApi),this._session=new GUe.ShapeDiverSessionApi(this.sdkApi),this._system=new jUe.ShapeDiverSystemApi(this.sdkApi),this._texture=new HUe.ShapeDiverTextureApi(this.sdkApi),this._utils=new $Ue.ShapeDiverUtilsApi(this.sdkApi)}get analytics(){return this._analytics}get arScene(){return this._arScene}get asset(){return this._asset}get export(){return this._export}get file(){return this._file}get gltf(){return this._gltf}get model(){return this._model}get output(){return this._output}get sdtf(){return this._sdtf}get session(){return this._session}get system(){return this._system}get texture(){return this._texture}get utils(){return this._utils}}Vb.ShapeDiverSdk=f1e;(function(t){var e=X&&X.__createBinding||(Object.create?function(p,g,v,_){_===void 0&&(_=v);var b=Object.getOwnPropertyDescriptor(g,v);(!b||("get"in b?!g.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return g[v]}}),Object.defineProperty(p,_,b)}:function(p,g,v,_){_===void 0&&(_=v),p[_]=g[v]}),n=X&&X.__exportStar||function(p,g){for(var v in p)v!=="default"&&!Object.prototype.hasOwnProperty.call(g,v)&&e(g,p,v)};Object.defineProperty(t,"__esModule",{value:!0}),t.isGBResponseError=t.isGBRequestError=t.isGBGenericError=t.isGBError=t.create=t.ShapeDiverSdk=t.ShapeDiverResponseError=t.ShapeDiverSdkConfigType=t.ShapeDiverSdkApiResponseType=t.ShapeDiverRequestError=t.ShapeDiverError=void 0,n(v7,t);var i=Sa;Object.defineProperty(t,"ShapeDiverError",{enumerable:!0,get:function(){return i.ShapeDiverError}}),Object.defineProperty(t,"ShapeDiverRequestError",{enumerable:!0,get:function(){return i.ShapeDiverRequestError}}),Object.defineProperty(t,"ShapeDiverSdkApiResponseType",{enumerable:!0,get:function(){return i.ShapeDiverSdkApiResponseType}}),Object.defineProperty(t,"ShapeDiverSdkConfigType",{enumerable:!0,get:function(){return i.ShapeDiverSdkConfigType}});var o=z6;Object.defineProperty(t,"ShapeDiverResponseError",{enumerable:!0,get:function(){return o.ShapeDiverResponseError}});var l=Vb;Object.defineProperty(t,"ShapeDiverSdk",{enumerable:!0,get:function(){return l.ShapeDiverSdk}}),Object.defineProperty(t,"create",{enumerable:!0,get:function(){return l.create}});var d=us;Object.defineProperty(t,"isGBError",{enumerable:!0,get:function(){return d.isGBError}}),Object.defineProperty(t,"isGBGenericError",{enumerable:!0,get:function(){return d.isGBGenericError}}),Object.defineProperty(t,"isGBRequestError",{enumerable:!0,get:function(){return d.isGBRequestError}}),Object.defineProperty(t,"isGBResponseError",{enumerable:!0,get:function(){return d.isGBResponseError}})})(I0);var Zh={},B6={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ShapeDiverViewerError=t.ShapeDiverError=t.ShapeDiverViewerErrorType=void 0;var e;(function(o){o.AR_ERROR="SdARError",o.GEOMETRY_BACKEND_ERROR="SdGeometryBackendError",o.GEOMETRY_BACKEND_REQUEST_ERROR="SdGeometryBackendRequestError",o.GEOMETRY_BACKEND_RESPONSE_ERROR="SdGeometryBackendResponseError",o.CAMERA_ERROR="SdCameraError",o.CONNECTION_ERROR="SdConnectionError",o.DATA_PROCESSING_ERROR="SdDataProcessingError",o.DRAWING_TOOLS_ERROR="SdDrawingToolsError",o.ENVIRONMENT_MAP_ERROR="SdEnvironmentMapError",o.INTERACTION_ERROR="SdInteractionError",o.LIGHT_ERROR="SdLightError",o.SESSION_ERROR="SdSessionError",o.SETTINGS_ERROR="SdSettingsError",o.VALIDATION_ERROR="SdValidationError",o.VIEWPORT_ERROR="SdViewerError",o.WEBGL_ERROR="SdWebGLError",o.UNKNOWN=""})(e=t.ShapeDiverViewerErrorType||(t.ShapeDiverViewerErrorType={}));class n extends Error{constructor(l){super(l)}}t.ShapeDiverError=n;class i extends n{constructor(l,d,p){super(p),this.desc=d,this.errorType=e.UNKNOWN,this.errorType=Object.values(e).includes(l)?l:e.UNKNOWN}}t.ShapeDiverViewerError=i})(B6);Object.defineProperty(Zh,"__esModule",{value:!0});Zh.ShapeDiverGeometryBackendError=Zh.ShapeDiverGeometryBackendResponseError=Zh.ShapeDiverGeometryBackendRequestError=void 0;const jb=B6;class YUe extends jb.ShapeDiverViewerError{constructor(e,n){super(jb.ShapeDiverViewerErrorType.GEOMETRY_BACKEND_REQUEST_ERROR,n,e),this.desc=n}}Zh.ShapeDiverGeometryBackendRequestError=YUe;class qUe extends jb.ShapeDiverViewerError{constructor(e,n,i,o){super(jb.ShapeDiverViewerErrorType.GEOMETRY_BACKEND_RESPONSE_ERROR,o,e),this.status=n,this.geometryBackendErrorType=i,this.desc=o}}Zh.ShapeDiverGeometryBackendResponseError=qUe;class XUe extends jb.ShapeDiverViewerError{constructor(e){super(jb.ShapeDiverViewerErrorType.GEOMETRY_BACKEND_ERROR,"A generic geometry backend error occurred.",e)}}Zh.ShapeDiverGeometryBackendError=XUe;var dm={};Object.defineProperty(dm,"__esModule",{value:!0});dm.btoaCustom=dm.atobCustom=void 0;const ZUe=t=>typeof window<"u"&&window.atob?window.atob(t):Buffer.from(t,"base64").toString();dm.atobCustom=ZUe;const QUe=t=>typeof window<"u"&&window.btoa?window.btoa(t):Buffer.from(t).toString("base64");dm.btoaCustom=QUe;var B8=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})},KUe=X&&X.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(C6,"__esModule",{value:!0});C6.HttpClient=void 0;const gF=KUe(_ze),vF=I0,_F=Zh,JUe=dm;class eFe{constructor(){this._dataCache=new Map,this._enableCaching=!0,this._excludedQueryParameters=["Expires","Signature","Key-Pair-Id"],this._maxCacheSize=1024*1024*32,this._sessionLoading={}}static get instance(){return this._instance||(this._instance=new this)}get enableCaching(){return this._enableCaching}set enableCaching(e){this._enableCaching=e,this._enableCaching===!1&&this._dataCache.clear()}get excludedQueryParameters(){return this._excludedQueryParameters}set excludedQueryParameters(e){this._excludedQueryParameters=e}get maxCacheSize(){return this._maxCacheSize}set maxCacheSize(e){this._maxCacheSize=e}addDataLoading(e,n){this._sessionLoading[e]=n}convertError(e){throw(0,vF.isGBResponseError)(e)?new _F.ShapeDiverGeometryBackendResponseError(e.message,e.status,e.error,e.desc):(0,vF.isGBRequestError)(e)?new _F.ShapeDiverGeometryBackendRequestError(e.message,e.desc):(0,vF.isGBError)(e)?new _F.ShapeDiverGeometryBackendError(e.message):e}get(e,n={responseType:"arraybuffer"},i=!1){return B8(this,void 0,void 0,function*(){const o=this.hrefToDataKey(e);if(this._dataCache.has(o))return this.getFromCache(o);let l=this.getSessionId(e);!l&&Object.keys(this._sessionLoading).length>0&&(l=Object.keys(this._sessionLoading)[0]);let d;l&&(d=this._sessionLoading[l]);let p;return i?d!==void 0&&l!==void 0&&!e.startsWith("blob:")&&!e.startsWith("data:")?p=new Promise((g,v)=>{d.downloadTexture(l,e).then(_=>B8(this,void 0,void 0,function*(){g({data:_[0],headers:{"content-type":_[1]}})})).catch(_=>v(_))}).catch(g=>{throw this.convertError(g)}):p=(0,gF.default)(e,Object.assign({method:"get"},n)).then(g=>B8(this,void 0,void 0,function*(){return g})).catch(g=>{throw this.convertError(g)}):d?p=new Promise((g,v)=>{d.getAsset(e).then(_=>{g({data:_[0],headers:{"content-type":_[1]}})}).catch(()=>{const _=(0,gF.default)(e,Object.assign({method:"get"},n));_.catch(b=>v(b)),g(_)})}).catch(g=>{throw this.convertError(g)}):p=(0,gF.default)(e,Object.assign({method:"get"},n)).catch(g=>{throw this.convertError(g)}),this.enableCaching&&this.addToCache(o,p),p})}loadTexture(e){return B8(this,void 0,void 0,function*(){const n=yield this.get(e,void 0,!0),i=n.data,o=new Uint8Array(n.data),l=new Blob([o],{type:n.headers["content-type"]});return{data:{buffer:i,blob:l},size:n.data.byteLength,headers:n.headers}})}removeDataLoading(e){delete this._sessionLoading[e]}addToCache(e,n){for(;this.calculateCacheSize()>=this._maxCacheSize;){const o=this._dataCache.keys().next().value;this._dataCache.delete(o)}const i=Date.now();this._dataCache.set(e,{value:n,timestamp:i,resolved:!1}),n.then(o=>{const l=o.size?o.size:o.data.byteLength;this._dataCache.set(e,{value:n,timestamp:i,resolved:!0,size:l})}).catch(o=>{throw this.convertError(o)})}calculateCacheSize(){let e=0;return this._dataCache.forEach(n=>{n.resolved===!0&&(e+=n.size)}),e}getFromCache(e){const n=this._dataCache.get(e);return this._dataCache.set(e,{value:n.value,timestamp:Date.now(),resolved:n.resolved,size:n.size}),n.value}getSessionId(e){const n=e.split("/"),i=n.indexOf("session");if(i!==-1&&n.length===i+4){const o=n[i+1];return this._sessionLoading[o]?o:void 0}}hrefToDataKey(e){const n=new URL(e),i=new URLSearchParams(n.search);for(let l=0;l<this._excludedQueryParameters.length;l++)i.delete(this._excludedQueryParameters[l]);n.search=i.toString();const o=n.toString();return(0,JUe.btoaCustom)(o)}}C6.HttpClient=eFe;var Ln=1e-6,Qr=typeof Float32Array<"u"?Float32Array:Array,A0=Math.random;function tFe(t){Qr=t}var nFe=Math.PI/180;function rFe(t){return t*nFe}function iFe(t,e){return Math.abs(t-e)<=Ln*Math.max(1,Math.abs(t),Math.abs(e))}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});const sFe=Object.freeze(Object.defineProperty({__proto__:null,get ARRAY_TYPE(){return Qr},EPSILON:Ln,RANDOM:A0,equals:iFe,setMatrixArrayType:tFe,toRadian:rFe},Symbol.toStringTag,{value:"Module"}));function oFe(){var t=new Qr(4);return Qr!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function aFe(t){var e=new Qr(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function lFe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function cFe(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function uFe(t,e,n,i){var o=new Qr(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=i,o}function fFe(t,e,n,i,o){return t[0]=e,t[1]=n,t[2]=i,t[3]=o,t}function dFe(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function hFe(t,e){var n=e[0],i=e[1],o=e[2],l=e[3],d=n*l-o*i;return d?(d=1/d,t[0]=l*d,t[1]=-i*d,t[2]=-o*d,t[3]=n*d,t):null}function pFe(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t}function mFe(t){return t[0]*t[3]-t[2]*t[1]}function d1e(t,e,n){var i=e[0],o=e[1],l=e[2],d=e[3],p=n[0],g=n[1],v=n[2],_=n[3];return t[0]=i*p+l*g,t[1]=o*p+d*g,t[2]=i*v+l*_,t[3]=o*v+d*_,t}function gFe(t,e,n){var i=e[0],o=e[1],l=e[2],d=e[3],p=Math.sin(n),g=Math.cos(n);return t[0]=i*g+l*p,t[1]=o*g+d*p,t[2]=i*-p+l*g,t[3]=o*-p+d*g,t}function vFe(t,e,n){var i=e[0],o=e[1],l=e[2],d=e[3],p=n[0],g=n[1];return t[0]=i*p,t[1]=o*p,t[2]=l*g,t[3]=d*g,t}function _Fe(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=-n,t[3]=i,t}function yFe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function bFe(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function AFe(t){return Math.hypot(t[0],t[1],t[2],t[3])}function wFe(t,e,n,i){return t[2]=i[2]/i[0],n[0]=i[0],n[1]=i[1],n[3]=i[3]-t[2]*n[1],[t,e,n]}function EFe(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function h1e(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function SFe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function TFe(t,e){var n=t[0],i=t[1],o=t[2],l=t[3],d=e[0],p=e[1],g=e[2],v=e[3];return Math.abs(n-d)<=Ln*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(i-p)<=Ln*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(o-g)<=Ln*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(l-v)<=Ln*Math.max(1,Math.abs(l),Math.abs(v))}function xFe(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function MFe(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t}var kFe=d1e,CFe=h1e;const PFe=Object.freeze(Object.defineProperty({__proto__:null,LDU:wFe,add:EFe,adjoint:pFe,clone:aFe,copy:lFe,create:oFe,determinant:mFe,equals:TFe,exactEquals:SFe,frob:AFe,fromRotation:_Fe,fromScaling:yFe,fromValues:uFe,identity:cFe,invert:hFe,mul:kFe,multiply:d1e,multiplyScalar:xFe,multiplyScalarAndAdd:MFe,rotate:gFe,scale:vFe,set:fFe,str:bFe,sub:CFe,subtract:h1e,transpose:dFe},Symbol.toStringTag,{value:"Module"}));function RFe(){var t=new Qr(6);return Qr!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function DFe(t){var e=new Qr(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function OFe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function IFe(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function NFe(t,e,n,i,o,l){var d=new Qr(6);return d[0]=t,d[1]=e,d[2]=n,d[3]=i,d[4]=o,d[5]=l,d}function LFe(t,e,n,i,o,l,d){return t[0]=e,t[1]=n,t[2]=i,t[3]=o,t[4]=l,t[5]=d,t}function zFe(t,e){var n=e[0],i=e[1],o=e[2],l=e[3],d=e[4],p=e[5],g=n*l-i*o;return g?(g=1/g,t[0]=l*g,t[1]=-i*g,t[2]=-o*g,t[3]=n*g,t[4]=(o*p-l*d)*g,t[5]=(i*d-n*p)*g,t):null}function BFe(t){return t[0]*t[3]-t[1]*t[2]}function p1e(t,e,n){var i=e[0],o=e[1],l=e[2],d=e[3],p=e[4],g=e[5],v=n[0],_=n[1],b=n[2],w=n[3],E=n[4],S=n[5];return t[0]=i*v+l*_,t[1]=o*v+d*_,t[2]=i*b+l*w,t[3]=o*b+d*w,t[4]=i*E+l*S+p,t[5]=o*E+d*S+g,t}function UFe(t,e,n){var i=e[0],o=e[1],l=e[2],d=e[3],p=e[4],g=e[5],v=Math.sin(n),_=Math.cos(n);return t[0]=i*_+l*v,t[1]=o*_+d*v,t[2]=i*-v+l*_,t[3]=o*-v+d*_,t[4]=p,t[5]=g,t}function FFe(t,e,n){var i=e[0],o=e[1],l=e[2],d=e[3],p=e[4],g=e[5],v=n[0],_=n[1];return t[0]=i*v,t[1]=o*v,t[2]=l*_,t[3]=d*_,t[4]=p,t[5]=g,t}function VFe(t,e,n){var i=e[0],o=e[1],l=e[2],d=e[3],p=e[4],g=e[5],v=n[0],_=n[1];return t[0]=i,t[1]=o,t[2]=l,t[3]=d,t[4]=i*v+l*_+p,t[5]=o*v+d*_+g,t}function GFe(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=-n,t[3]=i,t[4]=0,t[5]=0,t}function jFe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function HFe(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function $Fe(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function WFe(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function YFe(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t}function m1e(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}function qFe(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t}function XFe(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t[4]=e[4]+n[4]*i,t[5]=e[5]+n[5]*i,t}function ZFe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function QFe(t,e){var n=t[0],i=t[1],o=t[2],l=t[3],d=t[4],p=t[5],g=e[0],v=e[1],_=e[2],b=e[3],w=e[4],E=e[5];return Math.abs(n-g)<=Ln*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(i-v)<=Ln*Math.max(1,Math.abs(i),Math.abs(v))&&Math.abs(o-_)<=Ln*Math.max(1,Math.abs(o),Math.abs(_))&&Math.abs(l-b)<=Ln*Math.max(1,Math.abs(l),Math.abs(b))&&Math.abs(d-w)<=Ln*Math.max(1,Math.abs(d),Math.abs(w))&&Math.abs(p-E)<=Ln*Math.max(1,Math.abs(p),Math.abs(E))}var KFe=p1e,JFe=m1e;const eVe=Object.freeze(Object.defineProperty({__proto__:null,add:YFe,clone:DFe,copy:OFe,create:RFe,determinant:BFe,equals:QFe,exactEquals:ZFe,frob:WFe,fromRotation:GFe,fromScaling:jFe,fromTranslation:HFe,fromValues:NFe,identity:IFe,invert:zFe,mul:KFe,multiply:p1e,multiplyScalar:qFe,multiplyScalarAndAdd:XFe,rotate:UFe,scale:FFe,set:LFe,str:$Fe,sub:JFe,subtract:m1e,translate:VFe},Symbol.toStringTag,{value:"Module"}));function g1e(){var t=new Qr(9);return Qr!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function tVe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function nVe(t){var e=new Qr(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function rVe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function iVe(t,e,n,i,o,l,d,p,g){var v=new Qr(9);return v[0]=t,v[1]=e,v[2]=n,v[3]=i,v[4]=o,v[5]=l,v[6]=d,v[7]=p,v[8]=g,v}function sVe(t,e,n,i,o,l,d,p,g,v){return t[0]=e,t[1]=n,t[2]=i,t[3]=o,t[4]=l,t[5]=d,t[6]=p,t[7]=g,t[8]=v,t}function oVe(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function aVe(t,e){if(t===e){var n=e[1],i=e[2],o=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=i,t[7]=o}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function lVe(t,e){var n=e[0],i=e[1],o=e[2],l=e[3],d=e[4],p=e[5],g=e[6],v=e[7],_=e[8],b=_*d-p*v,w=-_*l+p*g,E=v*l-d*g,S=n*b+i*w+o*E;return S?(S=1/S,t[0]=b*S,t[1]=(-_*i+o*v)*S,t[2]=(p*i-o*d)*S,t[3]=w*S,t[4]=(_*n-o*g)*S,t[5]=(-p*n+o*l)*S,t[6]=E*S,t[7]=(-v*n+i*g)*S,t[8]=(d*n-i*l)*S,t):null}function cVe(t,e){var n=e[0],i=e[1],o=e[2],l=e[3],d=e[4],p=e[5],g=e[6],v=e[7],_=e[8];return t[0]=d*_-p*v,t[1]=o*v-i*_,t[2]=i*p-o*d,t[3]=p*g-l*_,t[4]=n*_-o*g,t[5]=o*l-n*p,t[6]=l*v-d*g,t[7]=i*g-n*v,t[8]=n*d-i*l,t}function uVe(t){var e=t[0],n=t[1],i=t[2],o=t[3],l=t[4],d=t[5],p=t[6],g=t[7],v=t[8];return e*(v*l-d*g)+n*(-v*o+d*p)+i*(g*o-l*p)}function v1e(t,e,n){var i=e[0],o=e[1],l=e[2],d=e[3],p=e[4],g=e[5],v=e[6],_=e[7],b=e[8],w=n[0],E=n[1],S=n[2],M=n[3],k=n[4],x=n[5],C=n[6],P=n[7],O=n[8];return t[0]=w*i+E*d+S*v,t[1]=w*o+E*p+S*_,t[2]=w*l+E*g+S*b,t[3]=M*i+k*d+x*v,t[4]=M*o+k*p+x*_,t[5]=M*l+k*g+x*b,t[6]=C*i+P*d+O*v,t[7]=C*o+P*p+O*_,t[8]=C*l+P*g+O*b,t}function fVe(t,e,n){var i=e[0],o=e[1],l=e[2],d=e[3],p=e[4],g=e[5],v=e[6],_=e[7],b=e[8],w=n[0],E=n[1];return t[0]=i,t[1]=o,t[2]=l,t[3]=d,t[4]=p,t[5]=g,t[6]=w*i+E*d+v,t[7]=w*o+E*p+_,t[8]=w*l+E*g+b,t}function dVe(t,e,n){var i=e[0],o=e[1],l=e[2],d=e[3],p=e[4],g=e[5],v=e[6],_=e[7],b=e[8],w=Math.sin(n),E=Math.cos(n);return t[0]=E*i+w*d,t[1]=E*o+w*p,t[2]=E*l+w*g,t[3]=E*d-w*i,t[4]=E*p-w*o,t[5]=E*g-w*l,t[6]=v,t[7]=_,t[8]=b,t}function hVe(t,e,n){var i=n[0],o=n[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=o*e[3],t[4]=o*e[4],t[5]=o*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function pVe(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function mVe(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=0,t[3]=-n,t[4]=i,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function gVe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function vVe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function _Ve(t,e){var n=e[0],i=e[1],o=e[2],l=e[3],d=n+n,p=i+i,g=o+o,v=n*d,_=i*d,b=i*p,w=o*d,E=o*p,S=o*g,M=l*d,k=l*p,x=l*g;return t[0]=1-b-S,t[3]=_-x,t[6]=w+k,t[1]=_+x,t[4]=1-v-S,t[7]=E-M,t[2]=w-k,t[5]=E+M,t[8]=1-v-b,t}function yVe(t,e){var n=e[0],i=e[1],o=e[2],l=e[3],d=e[4],p=e[5],g=e[6],v=e[7],_=e[8],b=e[9],w=e[10],E=e[11],S=e[12],M=e[13],k=e[14],x=e[15],C=n*p-i*d,P=n*g-o*d,O=n*v-l*d,L=i*g-o*p,B=i*v-l*p,V=o*v-l*g,G=_*M-b*S,j=_*k-w*S,F=_*x-E*S,q=b*k-w*M,fe=b*x-E*M,ue=w*x-E*k,J=C*ue-P*fe+O*q+L*F-B*j+V*G;return J?(J=1/J,t[0]=(p*ue-g*fe+v*q)*J,t[1]=(g*F-d*ue-v*j)*J,t[2]=(d*fe-p*F+v*G)*J,t[3]=(o*fe-i*ue-l*q)*J,t[4]=(n*ue-o*F+l*j)*J,t[5]=(i*F-n*fe-l*G)*J,t[6]=(M*V-k*B+x*L)*J,t[7]=(k*O-S*V-x*P)*J,t[8]=(S*B-M*O+x*C)*J,t):null}function bVe(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function AVe(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function wVe(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function EVe(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function _1e(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function SVe(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function TVe(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t[4]=e[4]+n[4]*i,t[5]=e[5]+n[5]*i,t[6]=e[6]+n[6]*i,t[7]=e[7]+n[7]*i,t[8]=e[8]+n[8]*i,t}function xVe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function MVe(t,e){var n=t[0],i=t[1],o=t[2],l=t[3],d=t[4],p=t[5],g=t[6],v=t[7],_=t[8],b=e[0],w=e[1],E=e[2],S=e[3],M=e[4],k=e[5],x=e[6],C=e[7],P=e[8];return Math.abs(n-b)<=Ln*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(i-w)<=Ln*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(o-E)<=Ln*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(l-S)<=Ln*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(d-M)<=Ln*Math.max(1,Math.abs(d),Math.abs(M))&&Math.abs(p-k)<=Ln*Math.max(1,Math.abs(p),Math.abs(k))&&Math.abs(g-x)<=Ln*Math.max(1,Math.abs(g),Math.abs(x))&&Math.abs(v-C)<=Ln*Math.max(1,Math.abs(v),Math.abs(C))&&Math.abs(_-P)<=Ln*Math.max(1,Math.abs(_),Math.abs(P))}var kVe=v1e,CVe=_1e;const PVe=Object.freeze(Object.defineProperty({__proto__:null,add:EVe,adjoint:cVe,clone:nVe,copy:rVe,create:g1e,determinant:uVe,equals:MVe,exactEquals:xVe,frob:wVe,fromMat2d:vVe,fromMat4:tVe,fromQuat:_Ve,fromRotation:mVe,fromScaling:gVe,fromTranslation:pVe,fromValues:iVe,identity:oVe,invert:lVe,mul:kVe,multiply:v1e,multiplyScalar:SVe,multiplyScalarAndAdd:TVe,normalFromMat4:yVe,projection:bVe,rotate:dVe,scale:hVe,set:sVe,str:AVe,sub:CVe,subtract:_1e,translate:fVe,transpose:aVe},Symbol.toStringTag,{value:"Module"}));function RVe(){var t=new Qr(16);return Qr!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function DVe(t){var e=new Qr(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function OVe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function IVe(t,e,n,i,o,l,d,p,g,v,_,b,w,E,S,M){var k=new Qr(16);return k[0]=t,k[1]=e,k[2]=n,k[3]=i,k[4]=o,k[5]=l,k[6]=d,k[7]=p,k[8]=g,k[9]=v,k[10]=_,k[11]=b,k[12]=w,k[13]=E,k[14]=S,k[15]=M,k}function NVe(t,e,n,i,o,l,d,p,g,v,_,b,w,E,S,M,k){return t[0]=e,t[1]=n,t[2]=i,t[3]=o,t[4]=l,t[5]=d,t[6]=p,t[7]=g,t[8]=v,t[9]=_,t[10]=b,t[11]=w,t[12]=E,t[13]=S,t[14]=M,t[15]=k,t}function y1e(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function LVe(t,e){if(t===e){var n=e[1],i=e[2],o=e[3],l=e[6],d=e[7],p=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=l,t[11]=e[14],t[12]=o,t[13]=d,t[14]=p}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function zVe(t,e){var n=e[0],i=e[1],o=e[2],l=e[3],d=e[4],p=e[5],g=e[6],v=e[7],_=e[8],b=e[9],w=e[10],E=e[11],S=e[12],M=e[13],k=e[14],x=e[15],C=n*p-i*d,P=n*g-o*d,O=n*v-l*d,L=i*g-o*p,B=i*v-l*p,V=o*v-l*g,G=_*M-b*S,j=_*k-w*S,F=_*x-E*S,q=b*k-w*M,fe=b*x-E*M,ue=w*x-E*k,J=C*ue-P*fe+O*q+L*F-B*j+V*G;return J?(J=1/J,t[0]=(p*ue-g*fe+v*q)*J,t[1]=(o*fe-i*ue-l*q)*J,t[2]=(M*V-k*B+x*L)*J,t[3]=(w*B-b*V-E*L)*J,t[4]=(g*F-d*ue-v*j)*J,t[5]=(n*ue-o*F+l*j)*J,t[6]=(k*O-S*V-x*P)*J,t[7]=(_*V-w*O+E*P)*J,t[8]=(d*fe-p*F+v*G)*J,t[9]=(i*F-n*fe-l*G)*J,t[10]=(S*B-M*O+x*C)*J,t[11]=(b*O-_*B-E*C)*J,t[12]=(p*j-d*q-g*G)*J,t[13]=(n*q-i*j+o*G)*J,t[14]=(M*P-S*L-k*C)*J,t[15]=(_*L-b*P+w*C)*J,t):null}function BVe(t,e){var n=e[0],i=e[1],o=e[2],l=e[3],d=e[4],p=e[5],g=e[6],v=e[7],_=e[8],b=e[9],w=e[10],E=e[11],S=e[12],M=e[13],k=e[14],x=e[15];return t[0]=p*(w*x-E*k)-b*(g*x-v*k)+M*(g*E-v*w),t[1]=-(i*(w*x-E*k)-b*(o*x-l*k)+M*(o*E-l*w)),t[2]=i*(g*x-v*k)-p*(o*x-l*k)+M*(o*v-l*g),t[3]=-(i*(g*E-v*w)-p*(o*E-l*w)+b*(o*v-l*g)),t[4]=-(d*(w*x-E*k)-_*(g*x-v*k)+S*(g*E-v*w)),t[5]=n*(w*x-E*k)-_*(o*x-l*k)+S*(o*E-l*w),t[6]=-(n*(g*x-v*k)-d*(o*x-l*k)+S*(o*v-l*g)),t[7]=n*(g*E-v*w)-d*(o*E-l*w)+_*(o*v-l*g),t[8]=d*(b*x-E*M)-_*(p*x-v*M)+S*(p*E-v*b),t[9]=-(n*(b*x-E*M)-_*(i*x-l*M)+S*(i*E-l*b)),t[10]=n*(p*x-v*M)-d*(i*x-l*M)+S*(i*v-l*p),t[11]=-(n*(p*E-v*b)-d*(i*E-l*b)+_*(i*v-l*p)),t[12]=-(d*(b*k-w*M)-_*(p*k-g*M)+S*(p*w-g*b)),t[13]=n*(b*k-w*M)-_*(i*k-o*M)+S*(i*w-o*b),t[14]=-(n*(p*k-g*M)-d*(i*k-o*M)+S*(i*g-o*p)),t[15]=n*(p*w-g*b)-d*(i*w-o*b)+_*(i*g-o*p),t}function UVe(t){var e=t[0],n=t[1],i=t[2],o=t[3],l=t[4],d=t[5],p=t[6],g=t[7],v=t[8],_=t[9],b=t[10],w=t[11],E=t[12],S=t[13],M=t[14],k=t[15],x=e*d-n*l,C=e*p-i*l,P=e*g-o*l,O=n*p-i*d,L=n*g-o*d,B=i*g-o*p,V=v*S-_*E,G=v*M-b*E,j=v*k-w*E,F=_*M-b*S,q=_*k-w*S,fe=b*k-w*M;return x*fe-C*q+P*F+O*j-L*G+B*V}function b1e(t,e,n){var i=e[0],o=e[1],l=e[2],d=e[3],p=e[4],g=e[5],v=e[6],_=e[7],b=e[8],w=e[9],E=e[10],S=e[11],M=e[12],k=e[13],x=e[14],C=e[15],P=n[0],O=n[1],L=n[2],B=n[3];return t[0]=P*i+O*p+L*b+B*M,t[1]=P*o+O*g+L*w+B*k,t[2]=P*l+O*v+L*E+B*x,t[3]=P*d+O*_+L*S+B*C,P=n[4],O=n[5],L=n[6],B=n[7],t[4]=P*i+O*p+L*b+B*M,t[5]=P*o+O*g+L*w+B*k,t[6]=P*l+O*v+L*E+B*x,t[7]=P*d+O*_+L*S+B*C,P=n[8],O=n[9],L=n[10],B=n[11],t[8]=P*i+O*p+L*b+B*M,t[9]=P*o+O*g+L*w+B*k,t[10]=P*l+O*v+L*E+B*x,t[11]=P*d+O*_+L*S+B*C,P=n[12],O=n[13],L=n[14],B=n[15],t[12]=P*i+O*p+L*b+B*M,t[13]=P*o+O*g+L*w+B*k,t[14]=P*l+O*v+L*E+B*x,t[15]=P*d+O*_+L*S+B*C,t}function FVe(t,e,n){var i=n[0],o=n[1],l=n[2],d,p,g,v,_,b,w,E,S,M,k,x;return e===t?(t[12]=e[0]*i+e[4]*o+e[8]*l+e[12],t[13]=e[1]*i+e[5]*o+e[9]*l+e[13],t[14]=e[2]*i+e[6]*o+e[10]*l+e[14],t[15]=e[3]*i+e[7]*o+e[11]*l+e[15]):(d=e[0],p=e[1],g=e[2],v=e[3],_=e[4],b=e[5],w=e[6],E=e[7],S=e[8],M=e[9],k=e[10],x=e[11],t[0]=d,t[1]=p,t[2]=g,t[3]=v,t[4]=_,t[5]=b,t[6]=w,t[7]=E,t[8]=S,t[9]=M,t[10]=k,t[11]=x,t[12]=d*i+_*o+S*l+e[12],t[13]=p*i+b*o+M*l+e[13],t[14]=g*i+w*o+k*l+e[14],t[15]=v*i+E*o+x*l+e[15]),t}function VVe(t,e,n){var i=n[0],o=n[1],l=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*l,t[9]=e[9]*l,t[10]=e[10]*l,t[11]=e[11]*l,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function GVe(t,e,n,i){var o=i[0],l=i[1],d=i[2],p=Math.hypot(o,l,d),g,v,_,b,w,E,S,M,k,x,C,P,O,L,B,V,G,j,F,q,fe,ue,J,le;return p<Ln?null:(p=1/p,o*=p,l*=p,d*=p,g=Math.sin(n),v=Math.cos(n),_=1-v,b=e[0],w=e[1],E=e[2],S=e[3],M=e[4],k=e[5],x=e[6],C=e[7],P=e[8],O=e[9],L=e[10],B=e[11],V=o*o*_+v,G=l*o*_+d*g,j=d*o*_-l*g,F=o*l*_-d*g,q=l*l*_+v,fe=d*l*_+o*g,ue=o*d*_+l*g,J=l*d*_-o*g,le=d*d*_+v,t[0]=b*V+M*G+P*j,t[1]=w*V+k*G+O*j,t[2]=E*V+x*G+L*j,t[3]=S*V+C*G+B*j,t[4]=b*F+M*q+P*fe,t[5]=w*F+k*q+O*fe,t[6]=E*F+x*q+L*fe,t[7]=S*F+C*q+B*fe,t[8]=b*ue+M*J+P*le,t[9]=w*ue+k*J+O*le,t[10]=E*ue+x*J+L*le,t[11]=S*ue+C*J+B*le,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function jVe(t,e,n){var i=Math.sin(n),o=Math.cos(n),l=e[4],d=e[5],p=e[6],g=e[7],v=e[8],_=e[9],b=e[10],w=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=l*o+v*i,t[5]=d*o+_*i,t[6]=p*o+b*i,t[7]=g*o+w*i,t[8]=v*o-l*i,t[9]=_*o-d*i,t[10]=b*o-p*i,t[11]=w*o-g*i,t}function HVe(t,e,n){var i=Math.sin(n),o=Math.cos(n),l=e[0],d=e[1],p=e[2],g=e[3],v=e[8],_=e[9],b=e[10],w=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=l*o-v*i,t[1]=d*o-_*i,t[2]=p*o-b*i,t[3]=g*o-w*i,t[8]=l*i+v*o,t[9]=d*i+_*o,t[10]=p*i+b*o,t[11]=g*i+w*o,t}function $Ve(t,e,n){var i=Math.sin(n),o=Math.cos(n),l=e[0],d=e[1],p=e[2],g=e[3],v=e[4],_=e[5],b=e[6],w=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=l*o+v*i,t[1]=d*o+_*i,t[2]=p*o+b*i,t[3]=g*o+w*i,t[4]=v*o-l*i,t[5]=_*o-d*i,t[6]=b*o-p*i,t[7]=w*o-g*i,t}function WVe(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function YVe(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function qVe(t,e,n){var i=n[0],o=n[1],l=n[2],d=Math.hypot(i,o,l),p,g,v;return d<Ln?null:(d=1/d,i*=d,o*=d,l*=d,p=Math.sin(e),g=Math.cos(e),v=1-g,t[0]=i*i*v+g,t[1]=o*i*v+l*p,t[2]=l*i*v-o*p,t[3]=0,t[4]=i*o*v-l*p,t[5]=o*o*v+g,t[6]=l*o*v+i*p,t[7]=0,t[8]=i*l*v+o*p,t[9]=o*l*v-i*p,t[10]=l*l*v+g,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function XVe(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ZVe(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function QVe(t,e){var n=Math.sin(e),i=Math.cos(e);return t[0]=i,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function A1e(t,e,n){var i=e[0],o=e[1],l=e[2],d=e[3],p=i+i,g=o+o,v=l+l,_=i*p,b=i*g,w=i*v,E=o*g,S=o*v,M=l*v,k=d*p,x=d*g,C=d*v;return t[0]=1-(E+M),t[1]=b+C,t[2]=w-x,t[3]=0,t[4]=b-C,t[5]=1-(_+M),t[6]=S+k,t[7]=0,t[8]=w+x,t[9]=S-k,t[10]=1-(_+E),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function KVe(t,e){var n=new Qr(3),i=-e[0],o=-e[1],l=-e[2],d=e[3],p=e[4],g=e[5],v=e[6],_=e[7],b=i*i+o*o+l*l+d*d;return b>0?(n[0]=(p*d+_*i+g*l-v*o)*2/b,n[1]=(g*d+_*o+v*i-p*l)*2/b,n[2]=(v*d+_*l+p*o-g*i)*2/b):(n[0]=(p*d+_*i+g*l-v*o)*2,n[1]=(g*d+_*o+v*i-p*l)*2,n[2]=(v*d+_*l+p*o-g*i)*2),A1e(t,e,n),t}function w1e(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function E1e(t,e){var n=e[0],i=e[1],o=e[2],l=e[4],d=e[5],p=e[6],g=e[8],v=e[9],_=e[10];return t[0]=Math.hypot(n,i,o),t[1]=Math.hypot(l,d,p),t[2]=Math.hypot(g,v,_),t}function S1e(t,e){var n=new Qr(3);E1e(n,e);var i=1/n[0],o=1/n[1],l=1/n[2],d=e[0]*i,p=e[1]*o,g=e[2]*l,v=e[4]*i,_=e[5]*o,b=e[6]*l,w=e[8]*i,E=e[9]*o,S=e[10]*l,M=d+_+S,k=0;return M>0?(k=Math.sqrt(M+1)*2,t[3]=.25*k,t[0]=(b-E)/k,t[1]=(w-g)/k,t[2]=(p-v)/k):d>_&&d>S?(k=Math.sqrt(1+d-_-S)*2,t[3]=(b-E)/k,t[0]=.25*k,t[1]=(p+v)/k,t[2]=(w+g)/k):_>S?(k=Math.sqrt(1+_-d-S)*2,t[3]=(w-g)/k,t[0]=(p+v)/k,t[1]=.25*k,t[2]=(b+E)/k):(k=Math.sqrt(1+S-d-_)*2,t[3]=(p-v)/k,t[0]=(w+g)/k,t[1]=(b+E)/k,t[2]=.25*k),t}function JVe(t,e,n,i){var o=e[0],l=e[1],d=e[2],p=e[3],g=o+o,v=l+l,_=d+d,b=o*g,w=o*v,E=o*_,S=l*v,M=l*_,k=d*_,x=p*g,C=p*v,P=p*_,O=i[0],L=i[1],B=i[2];return t[0]=(1-(S+k))*O,t[1]=(w+P)*O,t[2]=(E-C)*O,t[3]=0,t[4]=(w-P)*L,t[5]=(1-(b+k))*L,t[6]=(M+x)*L,t[7]=0,t[8]=(E+C)*B,t[9]=(M-x)*B,t[10]=(1-(b+S))*B,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function eGe(t,e,n,i,o){var l=e[0],d=e[1],p=e[2],g=e[3],v=l+l,_=d+d,b=p+p,w=l*v,E=l*_,S=l*b,M=d*_,k=d*b,x=p*b,C=g*v,P=g*_,O=g*b,L=i[0],B=i[1],V=i[2],G=o[0],j=o[1],F=o[2],q=(1-(M+x))*L,fe=(E+O)*L,ue=(S-P)*L,J=(E-O)*B,le=(1-(w+x))*B,me=(k+C)*B,be=(S+P)*V,ye=(k-C)*V,pe=(1-(w+M))*V;return t[0]=q,t[1]=fe,t[2]=ue,t[3]=0,t[4]=J,t[5]=le,t[6]=me,t[7]=0,t[8]=be,t[9]=ye,t[10]=pe,t[11]=0,t[12]=n[0]+G-(q*G+J*j+be*F),t[13]=n[1]+j-(fe*G+le*j+ye*F),t[14]=n[2]+F-(ue*G+me*j+pe*F),t[15]=1,t}function tGe(t,e){var n=e[0],i=e[1],o=e[2],l=e[3],d=n+n,p=i+i,g=o+o,v=n*d,_=i*d,b=i*p,w=o*d,E=o*p,S=o*g,M=l*d,k=l*p,x=l*g;return t[0]=1-b-S,t[1]=_+x,t[2]=w-k,t[3]=0,t[4]=_-x,t[5]=1-v-S,t[6]=E+M,t[7]=0,t[8]=w+k,t[9]=E-M,t[10]=1-v-b,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function nGe(t,e,n,i,o,l,d){var p=1/(n-e),g=1/(o-i),v=1/(l-d);return t[0]=l*2*p,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l*2*g,t[6]=0,t[7]=0,t[8]=(n+e)*p,t[9]=(o+i)*g,t[10]=(d+l)*v,t[11]=-1,t[12]=0,t[13]=0,t[14]=d*l*2*v,t[15]=0,t}function rGe(t,e,n,i,o){var l=1/Math.tan(e/2),d;return t[0]=l/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,o!=null&&o!==1/0?(d=1/(i-o),t[10]=(o+i)*d,t[14]=2*o*i*d):(t[10]=-1,t[14]=-2*i),t}function iGe(t,e,n,i){var o=Math.tan(e.upDegrees*Math.PI/180),l=Math.tan(e.downDegrees*Math.PI/180),d=Math.tan(e.leftDegrees*Math.PI/180),p=Math.tan(e.rightDegrees*Math.PI/180),g=2/(d+p),v=2/(o+l);return t[0]=g,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=v,t[6]=0,t[7]=0,t[8]=-((d-p)*g*.5),t[9]=(o-l)*v*.5,t[10]=i/(n-i),t[11]=-1,t[12]=0,t[13]=0,t[14]=i*n/(n-i),t[15]=0,t}function sGe(t,e,n,i,o,l,d){var p=1/(e-n),g=1/(i-o),v=1/(l-d);return t[0]=-2*p,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*g,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*v,t[11]=0,t[12]=(e+n)*p,t[13]=(o+i)*g,t[14]=(d+l)*v,t[15]=1,t}function oGe(t,e,n,i){var o,l,d,p,g,v,_,b,w,E,S=e[0],M=e[1],k=e[2],x=i[0],C=i[1],P=i[2],O=n[0],L=n[1],B=n[2];return Math.abs(S-O)<Ln&&Math.abs(M-L)<Ln&&Math.abs(k-B)<Ln?y1e(t):(_=S-O,b=M-L,w=k-B,E=1/Math.hypot(_,b,w),_*=E,b*=E,w*=E,o=C*w-P*b,l=P*_-x*w,d=x*b-C*_,E=Math.hypot(o,l,d),E?(E=1/E,o*=E,l*=E,d*=E):(o=0,l=0,d=0),p=b*d-w*l,g=w*o-_*d,v=_*l-b*o,E=Math.hypot(p,g,v),E?(E=1/E,p*=E,g*=E,v*=E):(p=0,g=0,v=0),t[0]=o,t[1]=p,t[2]=_,t[3]=0,t[4]=l,t[5]=g,t[6]=b,t[7]=0,t[8]=d,t[9]=v,t[10]=w,t[11]=0,t[12]=-(o*S+l*M+d*k),t[13]=-(p*S+g*M+v*k),t[14]=-(_*S+b*M+w*k),t[15]=1,t)}function aGe(t,e,n,i){var o=e[0],l=e[1],d=e[2],p=i[0],g=i[1],v=i[2],_=o-n[0],b=l-n[1],w=d-n[2],E=_*_+b*b+w*w;E>0&&(E=1/Math.sqrt(E),_*=E,b*=E,w*=E);var S=g*w-v*b,M=v*_-p*w,k=p*b-g*_;return E=S*S+M*M+k*k,E>0&&(E=1/Math.sqrt(E),S*=E,M*=E,k*=E),t[0]=S,t[1]=M,t[2]=k,t[3]=0,t[4]=b*k-w*M,t[5]=w*S-_*k,t[6]=_*M-b*S,t[7]=0,t[8]=_,t[9]=b,t[10]=w,t[11]=0,t[12]=o,t[13]=l,t[14]=d,t[15]=1,t}function lGe(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function cGe(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function uGe(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function T1e(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function fGe(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function dGe(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t[4]=e[4]+n[4]*i,t[5]=e[5]+n[5]*i,t[6]=e[6]+n[6]*i,t[7]=e[7]+n[7]*i,t[8]=e[8]+n[8]*i,t[9]=e[9]+n[9]*i,t[10]=e[10]+n[10]*i,t[11]=e[11]+n[11]*i,t[12]=e[12]+n[12]*i,t[13]=e[13]+n[13]*i,t[14]=e[14]+n[14]*i,t[15]=e[15]+n[15]*i,t}function hGe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function pGe(t,e){var n=t[0],i=t[1],o=t[2],l=t[3],d=t[4],p=t[5],g=t[6],v=t[7],_=t[8],b=t[9],w=t[10],E=t[11],S=t[12],M=t[13],k=t[14],x=t[15],C=e[0],P=e[1],O=e[2],L=e[3],B=e[4],V=e[5],G=e[6],j=e[7],F=e[8],q=e[9],fe=e[10],ue=e[11],J=e[12],le=e[13],me=e[14],be=e[15];return Math.abs(n-C)<=Ln*Math.max(1,Math.abs(n),Math.abs(C))&&Math.abs(i-P)<=Ln*Math.max(1,Math.abs(i),Math.abs(P))&&Math.abs(o-O)<=Ln*Math.max(1,Math.abs(o),Math.abs(O))&&Math.abs(l-L)<=Ln*Math.max(1,Math.abs(l),Math.abs(L))&&Math.abs(d-B)<=Ln*Math.max(1,Math.abs(d),Math.abs(B))&&Math.abs(p-V)<=Ln*Math.max(1,Math.abs(p),Math.abs(V))&&Math.abs(g-G)<=Ln*Math.max(1,Math.abs(g),Math.abs(G))&&Math.abs(v-j)<=Ln*Math.max(1,Math.abs(v),Math.abs(j))&&Math.abs(_-F)<=Ln*Math.max(1,Math.abs(_),Math.abs(F))&&Math.abs(b-q)<=Ln*Math.max(1,Math.abs(b),Math.abs(q))&&Math.abs(w-fe)<=Ln*Math.max(1,Math.abs(w),Math.abs(fe))&&Math.abs(E-ue)<=Ln*Math.max(1,Math.abs(E),Math.abs(ue))&&Math.abs(S-J)<=Ln*Math.max(1,Math.abs(S),Math.abs(J))&&Math.abs(M-le)<=Ln*Math.max(1,Math.abs(M),Math.abs(le))&&Math.abs(k-me)<=Ln*Math.max(1,Math.abs(k),Math.abs(me))&&Math.abs(x-be)<=Ln*Math.max(1,Math.abs(x),Math.abs(be))}var mGe=b1e,gGe=T1e;const vGe=Object.freeze(Object.defineProperty({__proto__:null,add:uGe,adjoint:BVe,clone:DVe,copy:OVe,create:RVe,determinant:UVe,equals:pGe,exactEquals:hGe,frob:cGe,fromQuat:tGe,fromQuat2:KVe,fromRotation:qVe,fromRotationTranslation:A1e,fromRotationTranslationScale:JVe,fromRotationTranslationScaleOrigin:eGe,fromScaling:YVe,fromTranslation:WVe,fromValues:IVe,fromXRotation:XVe,fromYRotation:ZVe,fromZRotation:QVe,frustum:nGe,getRotation:S1e,getScaling:E1e,getTranslation:w1e,identity:y1e,invert:zVe,lookAt:oGe,mul:mGe,multiply:b1e,multiplyScalar:fGe,multiplyScalarAndAdd:dGe,ortho:sGe,perspective:rGe,perspectiveFromFieldOfView:iGe,rotate:GVe,rotateX:jVe,rotateY:HVe,rotateZ:$Ve,scale:VVe,set:NVe,str:lGe,sub:gGe,subtract:T1e,targetTo:aGe,translate:FVe,transpose:LVe},Symbol.toStringTag,{value:"Module"}));function lZ(){var t=new Qr(3);return Qr!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function _Ge(t){var e=new Qr(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function x1e(t){var e=t[0],n=t[1],i=t[2];return Math.hypot(e,n,i)}function YH(t,e,n){var i=new Qr(3);return i[0]=t,i[1]=e,i[2]=n,i}function yGe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function bGe(t,e,n,i){return t[0]=e,t[1]=n,t[2]=i,t}function AGe(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function M1e(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function k1e(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function C1e(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function wGe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function EGe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function SGe(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function TGe(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function xGe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function MGe(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function kGe(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t}function P1e(t,e){var n=e[0]-t[0],i=e[1]-t[1],o=e[2]-t[2];return Math.hypot(n,i,o)}function R1e(t,e){var n=e[0]-t[0],i=e[1]-t[1],o=e[2]-t[2];return n*n+i*i+o*o}function D1e(t){var e=t[0],n=t[1],i=t[2];return e*e+n*n+i*i}function CGe(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function PGe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function O1e(t,e){var n=e[0],i=e[1],o=e[2],l=n*n+i*i+o*o;return l>0&&(l=1/Math.sqrt(l)),t[0]=e[0]*l,t[1]=e[1]*l,t[2]=e[2]*l,t}function cZ(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function sP(t,e,n){var i=e[0],o=e[1],l=e[2],d=n[0],p=n[1],g=n[2];return t[0]=o*g-l*p,t[1]=l*d-i*g,t[2]=i*p-o*d,t}function RGe(t,e,n,i){var o=e[0],l=e[1],d=e[2];return t[0]=o+i*(n[0]-o),t[1]=l+i*(n[1]-l),t[2]=d+i*(n[2]-d),t}function DGe(t,e,n,i,o,l){var d=l*l,p=d*(2*l-3)+1,g=d*(l-2)+l,v=d*(l-1),_=d*(3-2*l);return t[0]=e[0]*p+n[0]*g+i[0]*v+o[0]*_,t[1]=e[1]*p+n[1]*g+i[1]*v+o[1]*_,t[2]=e[2]*p+n[2]*g+i[2]*v+o[2]*_,t}function OGe(t,e,n,i,o,l){var d=1-l,p=d*d,g=l*l,v=p*d,_=3*l*p,b=3*g*d,w=g*l;return t[0]=e[0]*v+n[0]*_+i[0]*b+o[0]*w,t[1]=e[1]*v+n[1]*_+i[1]*b+o[1]*w,t[2]=e[2]*v+n[2]*_+i[2]*b+o[2]*w,t}function IGe(t,e){e=e||1;var n=A0()*2*Math.PI,i=A0()*2-1,o=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(n)*o,t[1]=Math.sin(n)*o,t[2]=i*e,t}function NGe(t,e,n){var i=e[0],o=e[1],l=e[2],d=n[3]*i+n[7]*o+n[11]*l+n[15];return d=d||1,t[0]=(n[0]*i+n[4]*o+n[8]*l+n[12])/d,t[1]=(n[1]*i+n[5]*o+n[9]*l+n[13])/d,t[2]=(n[2]*i+n[6]*o+n[10]*l+n[14])/d,t}function LGe(t,e,n){var i=e[0],o=e[1],l=e[2];return t[0]=i*n[0]+o*n[3]+l*n[6],t[1]=i*n[1]+o*n[4]+l*n[7],t[2]=i*n[2]+o*n[5]+l*n[8],t}function zGe(t,e,n){var i=n[0],o=n[1],l=n[2],d=n[3],p=e[0],g=e[1],v=e[2],_=o*v-l*g,b=l*p-i*v,w=i*g-o*p,E=o*w-l*b,S=l*_-i*w,M=i*b-o*_,k=d*2;return _*=k,b*=k,w*=k,E*=2,S*=2,M*=2,t[0]=p+_+E,t[1]=g+b+S,t[2]=v+w+M,t}function BGe(t,e,n,i){var o=[],l=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],l[0]=o[0],l[1]=o[1]*Math.cos(i)-o[2]*Math.sin(i),l[2]=o[1]*Math.sin(i)+o[2]*Math.cos(i),t[0]=l[0]+n[0],t[1]=l[1]+n[1],t[2]=l[2]+n[2],t}function UGe(t,e,n,i){var o=[],l=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],l[0]=o[2]*Math.sin(i)+o[0]*Math.cos(i),l[1]=o[1],l[2]=o[2]*Math.cos(i)-o[0]*Math.sin(i),t[0]=l[0]+n[0],t[1]=l[1]+n[1],t[2]=l[2]+n[2],t}function FGe(t,e,n,i){var o=[],l=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],l[0]=o[0]*Math.cos(i)-o[1]*Math.sin(i),l[1]=o[0]*Math.sin(i)+o[1]*Math.cos(i),l[2]=o[2],t[0]=l[0]+n[0],t[1]=l[1]+n[1],t[2]=l[2]+n[2],t}function VGe(t,e){var n=t[0],i=t[1],o=t[2],l=e[0],d=e[1],p=e[2],g=Math.sqrt(n*n+i*i+o*o),v=Math.sqrt(l*l+d*d+p*p),_=g*v,b=_&&cZ(t,e)/_;return Math.acos(Math.min(Math.max(b,-1),1))}function GGe(t){return t[0]=0,t[1]=0,t[2]=0,t}function jGe(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function HGe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function $Ge(t,e){var n=t[0],i=t[1],o=t[2],l=e[0],d=e[1],p=e[2];return Math.abs(n-l)<=Ln*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(i-d)<=Ln*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(o-p)<=Ln*Math.max(1,Math.abs(o),Math.abs(p))}var WGe=M1e,YGe=k1e,qGe=C1e,XGe=P1e,ZGe=R1e,I1e=x1e,QGe=D1e,KGe=function(){var t=lZ();return function(e,n,i,o,l,d){var p,g;for(n||(n=3),i||(i=0),o?g=Math.min(o*n+i,e.length):g=e.length,p=i;p<g;p+=n)t[0]=e[p],t[1]=e[p+1],t[2]=e[p+2],l(t,t,d),e[p]=t[0],e[p+1]=t[1],e[p+2]=t[2];return e}}();const JGe=Object.freeze(Object.defineProperty({__proto__:null,add:AGe,angle:VGe,bezier:OGe,ceil:wGe,clone:_Ge,copy:yGe,create:lZ,cross:sP,dist:XGe,distance:P1e,div:qGe,divide:C1e,dot:cZ,equals:$Ge,exactEquals:HGe,floor:EGe,forEach:KGe,fromValues:YH,hermite:DGe,inverse:PGe,len:I1e,length:x1e,lerp:RGe,max:TGe,min:SGe,mul:YGe,multiply:k1e,negate:CGe,normalize:O1e,random:IGe,rotateX:BGe,rotateY:UGe,rotateZ:FGe,round:xGe,scale:MGe,scaleAndAdd:kGe,set:bGe,sqrDist:ZGe,sqrLen:QGe,squaredDistance:R1e,squaredLength:D1e,str:jGe,sub:WGe,subtract:M1e,transformMat3:LGe,transformMat4:NGe,transformQuat:zGe,zero:GGe},Symbol.toStringTag,{value:"Module"}));function N1e(){var t=new Qr(4);return Qr!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function L1e(t){var e=new Qr(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function z1e(t,e,n,i){var o=new Qr(4);return o[0]=t,o[1]=e,o[2]=n,o[3]=i,o}function B1e(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function U1e(t,e,n,i,o){return t[0]=e,t[1]=n,t[2]=i,t[3]=o,t}function F1e(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function V1e(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function G1e(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function j1e(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function eje(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function tje(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function nje(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function rje(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function ije(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function H1e(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function sje(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t}function $1e(t,e){var n=e[0]-t[0],i=e[1]-t[1],o=e[2]-t[2],l=e[3]-t[3];return Math.hypot(n,i,o,l)}function W1e(t,e){var n=e[0]-t[0],i=e[1]-t[1],o=e[2]-t[2],l=e[3]-t[3];return n*n+i*i+o*o+l*l}function uZ(t){var e=t[0],n=t[1],i=t[2],o=t[3];return Math.hypot(e,n,i,o)}function fZ(t){var e=t[0],n=t[1],i=t[2],o=t[3];return e*e+n*n+i*i+o*o}function oje(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function aje(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function Y1e(t,e){var n=e[0],i=e[1],o=e[2],l=e[3],d=n*n+i*i+o*o+l*l;return d>0&&(d=1/Math.sqrt(d)),t[0]=n*d,t[1]=i*d,t[2]=o*d,t[3]=l*d,t}function q1e(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function lje(t,e,n,i){var o=n[0]*i[1]-n[1]*i[0],l=n[0]*i[2]-n[2]*i[0],d=n[0]*i[3]-n[3]*i[0],p=n[1]*i[2]-n[2]*i[1],g=n[1]*i[3]-n[3]*i[1],v=n[2]*i[3]-n[3]*i[2],_=e[0],b=e[1],w=e[2],E=e[3];return t[0]=b*v-w*g+E*p,t[1]=-(_*v)+w*d-E*l,t[2]=_*g-b*d+E*o,t[3]=-(_*p)+b*l-w*o,t}function X1e(t,e,n,i){var o=e[0],l=e[1],d=e[2],p=e[3];return t[0]=o+i*(n[0]-o),t[1]=l+i*(n[1]-l),t[2]=d+i*(n[2]-d),t[3]=p+i*(n[3]-p),t}function cje(t,e){e=e||1;var n,i,o,l,d,p;do n=A0()*2-1,i=A0()*2-1,d=n*n+i*i;while(d>=1);do o=A0()*2-1,l=A0()*2-1,p=o*o+l*l;while(p>=1);var g=Math.sqrt((1-d)/p);return t[0]=e*n,t[1]=e*i,t[2]=e*o*g,t[3]=e*l*g,t}function uje(t,e,n){var i=e[0],o=e[1],l=e[2],d=e[3];return t[0]=n[0]*i+n[4]*o+n[8]*l+n[12]*d,t[1]=n[1]*i+n[5]*o+n[9]*l+n[13]*d,t[2]=n[2]*i+n[6]*o+n[10]*l+n[14]*d,t[3]=n[3]*i+n[7]*o+n[11]*l+n[15]*d,t}function fje(t,e,n){var i=e[0],o=e[1],l=e[2],d=n[0],p=n[1],g=n[2],v=n[3],_=v*i+p*l-g*o,b=v*o+g*i-d*l,w=v*l+d*o-p*i,E=-d*i-p*o-g*l;return t[0]=_*v+E*-d+b*-g-w*-p,t[1]=b*v+E*-p+w*-d-_*-g,t[2]=w*v+E*-g+_*-p-b*-d,t[3]=e[3],t}function dje(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function hje(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function Z1e(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function Q1e(t,e){var n=t[0],i=t[1],o=t[2],l=t[3],d=e[0],p=e[1],g=e[2],v=e[3];return Math.abs(n-d)<=Ln*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(i-p)<=Ln*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(o-g)<=Ln*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(l-v)<=Ln*Math.max(1,Math.abs(l),Math.abs(v))}var pje=V1e,mje=G1e,gje=j1e,vje=$1e,_je=W1e,yje=uZ,bje=fZ,Aje=function(){var t=N1e();return function(e,n,i,o,l,d){var p,g;for(n||(n=4),i||(i=0),o?g=Math.min(o*n+i,e.length):g=e.length,p=i;p<g;p+=n)t[0]=e[p],t[1]=e[p+1],t[2]=e[p+2],t[3]=e[p+3],l(t,t,d),e[p]=t[0],e[p+1]=t[1],e[p+2]=t[2],e[p+3]=t[3];return e}}();const wje=Object.freeze(Object.defineProperty({__proto__:null,add:F1e,ceil:eje,clone:L1e,copy:B1e,create:N1e,cross:lje,dist:vje,distance:$1e,div:gje,divide:j1e,dot:q1e,equals:Q1e,exactEquals:Z1e,floor:tje,forEach:Aje,fromValues:z1e,inverse:aje,len:yje,length:uZ,lerp:X1e,max:rje,min:nje,mul:mje,multiply:G1e,negate:oje,normalize:Y1e,random:cje,round:ije,scale:H1e,scaleAndAdd:sje,set:U1e,sqrDist:_je,sqrLen:bje,squaredDistance:W1e,squaredLength:fZ,str:hje,sub:pje,subtract:V1e,transformMat4:uje,transformQuat:fje,zero:dje},Symbol.toStringTag,{value:"Module"}));function HO(){var t=new Qr(4);return Qr!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Eje(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function K1e(t,e,n){n=n*.5;var i=Math.sin(n);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(n),t}function Sje(t,e){var n=Math.acos(e[3])*2,i=Math.sin(n/2);return i>Ln?(t[0]=e[0]/i,t[1]=e[1]/i,t[2]=e[2]/i):(t[0]=1,t[1]=0,t[2]=0),n}function Tje(t,e){var n=hZ(t,e);return Math.acos(2*n*n-1)}function J1e(t,e,n){var i=e[0],o=e[1],l=e[2],d=e[3],p=n[0],g=n[1],v=n[2],_=n[3];return t[0]=i*_+d*p+o*v-l*g,t[1]=o*_+d*g+l*p-i*v,t[2]=l*_+d*v+i*g-o*p,t[3]=d*_-i*p-o*g-l*v,t}function ege(t,e,n){n*=.5;var i=e[0],o=e[1],l=e[2],d=e[3],p=Math.sin(n),g=Math.cos(n);return t[0]=i*g+d*p,t[1]=o*g+l*p,t[2]=l*g-o*p,t[3]=d*g-i*p,t}function tge(t,e,n){n*=.5;var i=e[0],o=e[1],l=e[2],d=e[3],p=Math.sin(n),g=Math.cos(n);return t[0]=i*g-l*p,t[1]=o*g+d*p,t[2]=l*g+i*p,t[3]=d*g-o*p,t}function nge(t,e,n){n*=.5;var i=e[0],o=e[1],l=e[2],d=e[3],p=Math.sin(n),g=Math.cos(n);return t[0]=i*g+o*p,t[1]=o*g-i*p,t[2]=l*g+d*p,t[3]=d*g-l*p,t}function xje(t,e){var n=e[0],i=e[1],o=e[2];return t[0]=n,t[1]=i,t[2]=o,t[3]=Math.sqrt(Math.abs(1-n*n-i*i-o*o)),t}function rge(t,e){var n=e[0],i=e[1],o=e[2],l=e[3],d=Math.sqrt(n*n+i*i+o*o),p=Math.exp(l),g=d>0?p*Math.sin(d)/d:0;return t[0]=n*g,t[1]=i*g,t[2]=o*g,t[3]=p*Math.cos(d),t}function ige(t,e){var n=e[0],i=e[1],o=e[2],l=e[3],d=Math.sqrt(n*n+i*i+o*o),p=d>0?Math.atan2(d,l)/d:0;return t[0]=n*p,t[1]=i*p,t[2]=o*p,t[3]=.5*Math.log(n*n+i*i+o*o+l*l),t}function Mje(t,e,n){return ige(t,e),oge(t,t,n),rge(t,t),t}function oP(t,e,n,i){var o=e[0],l=e[1],d=e[2],p=e[3],g=n[0],v=n[1],_=n[2],b=n[3],w,E,S,M,k;return E=o*g+l*v+d*_+p*b,E<0&&(E=-E,g=-g,v=-v,_=-_,b=-b),1-E>Ln?(w=Math.acos(E),S=Math.sin(w),M=Math.sin((1-i)*w)/S,k=Math.sin(i*w)/S):(M=1-i,k=i),t[0]=M*o+k*g,t[1]=M*l+k*v,t[2]=M*d+k*_,t[3]=M*p+k*b,t}function kje(t){var e=A0(),n=A0(),i=A0(),o=Math.sqrt(1-e),l=Math.sqrt(e);return t[0]=o*Math.sin(2*Math.PI*n),t[1]=o*Math.cos(2*Math.PI*n),t[2]=l*Math.sin(2*Math.PI*i),t[3]=l*Math.cos(2*Math.PI*i),t}function Cje(t,e){var n=e[0],i=e[1],o=e[2],l=e[3],d=n*n+i*i+o*o+l*l,p=d?1/d:0;return t[0]=-n*p,t[1]=-i*p,t[2]=-o*p,t[3]=l*p,t}function Pje(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function sge(t,e){var n=e[0]+e[4]+e[8],i;if(n>0)i=Math.sqrt(n+1),t[3]=.5*i,i=.5/i,t[0]=(e[5]-e[7])*i,t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{var o=0;e[4]>e[0]&&(o=1),e[8]>e[o*3+o]&&(o=2);var l=(o+1)%3,d=(o+2)%3;i=Math.sqrt(e[o*3+o]-e[l*3+l]-e[d*3+d]+1),t[o]=.5*i,i=.5/i,t[3]=(e[l*3+d]-e[d*3+l])*i,t[l]=(e[l*3+o]+e[o*3+l])*i,t[d]=(e[d*3+o]+e[o*3+d])*i}return t}function Rje(t,e,n,i){var o=.5*Math.PI/180;e*=o,n*=o,i*=o;var l=Math.sin(e),d=Math.cos(e),p=Math.sin(n),g=Math.cos(n),v=Math.sin(i),_=Math.cos(i);return t[0]=l*g*_-d*p*v,t[1]=d*p*_+l*g*v,t[2]=d*g*v-l*p*_,t[3]=d*g*_+l*p*v,t}function Dje(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var Oje=L1e,Ije=z1e,dZ=B1e,Nje=U1e,Lje=F1e,zje=J1e,oge=H1e,hZ=q1e,Bje=X1e,pZ=uZ,Uje=pZ,mZ=fZ,Fje=mZ,gZ=Y1e,Vje=Z1e,Gje=Q1e,jje=function(){var t=lZ(),e=YH(1,0,0),n=YH(0,1,0);return function(i,o,l){var d=cZ(o,l);return d<-.999999?(sP(t,e,o),I1e(t)<1e-6&&sP(t,n,o),O1e(t,t),K1e(i,t,Math.PI),i):d>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(sP(t,o,l),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=1+d,gZ(i,i))}}(),Hje=function(){var t=HO(),e=HO();return function(n,i,o,l,d,p){return oP(t,i,d,p),oP(e,o,l,p),oP(n,t,e,2*p*(1-p)),n}}(),$je=function(){var t=g1e();return function(e,n,i,o){return t[0]=i[0],t[3]=i[1],t[6]=i[2],t[1]=o[0],t[4]=o[1],t[7]=o[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],gZ(e,sge(e,t))}}();const Wje=Object.freeze(Object.defineProperty({__proto__:null,add:Lje,calculateW:xje,clone:Oje,conjugate:Pje,copy:dZ,create:HO,dot:hZ,equals:Gje,exactEquals:Vje,exp:rge,fromEuler:Rje,fromMat3:sge,fromValues:Ije,getAngle:Tje,getAxisAngle:Sje,identity:Eje,invert:Cje,len:Uje,length:pZ,lerp:Bje,ln:ige,mul:zje,multiply:J1e,normalize:gZ,pow:Mje,random:kje,rotateX:ege,rotateY:tge,rotateZ:nge,rotationTo:jje,scale:oge,set:Nje,setAxes:$je,setAxisAngle:K1e,slerp:oP,sqlerp:Hje,sqrLen:Fje,squaredLength:mZ,str:Dje},Symbol.toStringTag,{value:"Module"}));function Yje(){var t=new Qr(8);return Qr!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function qje(t){var e=new Qr(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function Xje(t,e,n,i,o,l,d,p){var g=new Qr(8);return g[0]=t,g[1]=e,g[2]=n,g[3]=i,g[4]=o,g[5]=l,g[6]=d,g[7]=p,g}function Zje(t,e,n,i,o,l,d){var p=new Qr(8);p[0]=t,p[1]=e,p[2]=n,p[3]=i;var g=o*.5,v=l*.5,_=d*.5;return p[4]=g*i+v*n-_*e,p[5]=v*i+_*t-g*n,p[6]=_*i+g*e-v*t,p[7]=-g*t-v*e-_*n,p}function age(t,e,n){var i=n[0]*.5,o=n[1]*.5,l=n[2]*.5,d=e[0],p=e[1],g=e[2],v=e[3];return t[0]=d,t[1]=p,t[2]=g,t[3]=v,t[4]=i*v+o*g-l*p,t[5]=o*v+l*d-i*g,t[6]=l*v+i*p-o*d,t[7]=-i*d-o*p-l*g,t}function Qje(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0]*.5,t[5]=e[1]*.5,t[6]=e[2]*.5,t[7]=0,t}function Kje(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Jje(t,e){var n=HO();S1e(n,e);var i=new Qr(3);return w1e(i,e),age(t,n,i),t}function lge(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function eHe(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function tHe(t,e,n,i,o,l,d,p,g){return t[0]=e,t[1]=n,t[2]=i,t[3]=o,t[4]=l,t[5]=d,t[6]=p,t[7]=g,t}var nHe=dZ;function rHe(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}var iHe=dZ;function sHe(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function oHe(t,e){var n=e[4],i=e[5],o=e[6],l=e[7],d=-e[0],p=-e[1],g=-e[2],v=e[3];return t[0]=(n*v+l*d+i*g-o*p)*2,t[1]=(i*v+l*p+o*d-n*g)*2,t[2]=(o*v+l*g+n*p-i*d)*2,t}function aHe(t,e,n){var i=e[0],o=e[1],l=e[2],d=e[3],p=n[0]*.5,g=n[1]*.5,v=n[2]*.5,_=e[4],b=e[5],w=e[6],E=e[7];return t[0]=i,t[1]=o,t[2]=l,t[3]=d,t[4]=d*p+o*v-l*g+_,t[5]=d*g+l*p-i*v+b,t[6]=d*v+i*g-o*p+w,t[7]=-i*p-o*g-l*v+E,t}function lHe(t,e,n){var i=-e[0],o=-e[1],l=-e[2],d=e[3],p=e[4],g=e[5],v=e[6],_=e[7],b=p*d+_*i+g*l-v*o,w=g*d+_*o+v*i-p*l,E=v*d+_*l+p*o-g*i,S=_*d-p*i-g*o-v*l;return ege(t,e,n),i=t[0],o=t[1],l=t[2],d=t[3],t[4]=b*d+S*i+w*l-E*o,t[5]=w*d+S*o+E*i-b*l,t[6]=E*d+S*l+b*o-w*i,t[7]=S*d-b*i-w*o-E*l,t}function cHe(t,e,n){var i=-e[0],o=-e[1],l=-e[2],d=e[3],p=e[4],g=e[5],v=e[6],_=e[7],b=p*d+_*i+g*l-v*o,w=g*d+_*o+v*i-p*l,E=v*d+_*l+p*o-g*i,S=_*d-p*i-g*o-v*l;return tge(t,e,n),i=t[0],o=t[1],l=t[2],d=t[3],t[4]=b*d+S*i+w*l-E*o,t[5]=w*d+S*o+E*i-b*l,t[6]=E*d+S*l+b*o-w*i,t[7]=S*d-b*i-w*o-E*l,t}function uHe(t,e,n){var i=-e[0],o=-e[1],l=-e[2],d=e[3],p=e[4],g=e[5],v=e[6],_=e[7],b=p*d+_*i+g*l-v*o,w=g*d+_*o+v*i-p*l,E=v*d+_*l+p*o-g*i,S=_*d-p*i-g*o-v*l;return nge(t,e,n),i=t[0],o=t[1],l=t[2],d=t[3],t[4]=b*d+S*i+w*l-E*o,t[5]=w*d+S*o+E*i-b*l,t[6]=E*d+S*l+b*o-w*i,t[7]=S*d-b*i-w*o-E*l,t}function fHe(t,e,n){var i=n[0],o=n[1],l=n[2],d=n[3],p=e[0],g=e[1],v=e[2],_=e[3];return t[0]=p*d+_*i+g*l-v*o,t[1]=g*d+_*o+v*i-p*l,t[2]=v*d+_*l+p*o-g*i,t[3]=_*d-p*i-g*o-v*l,p=e[4],g=e[5],v=e[6],_=e[7],t[4]=p*d+_*i+g*l-v*o,t[5]=g*d+_*o+v*i-p*l,t[6]=v*d+_*l+p*o-g*i,t[7]=_*d-p*i-g*o-v*l,t}function dHe(t,e,n){var i=e[0],o=e[1],l=e[2],d=e[3],p=n[0],g=n[1],v=n[2],_=n[3];return t[0]=i*_+d*p+o*v-l*g,t[1]=o*_+d*g+l*p-i*v,t[2]=l*_+d*v+i*g-o*p,t[3]=d*_-i*p-o*g-l*v,p=n[4],g=n[5],v=n[6],_=n[7],t[4]=i*_+d*p+o*v-l*g,t[5]=o*_+d*g+l*p-i*v,t[6]=l*_+d*v+i*g-o*p,t[7]=d*_-i*p-o*g-l*v,t}function hHe(t,e,n,i){if(Math.abs(i)<Ln)return lge(t,e);var o=Math.hypot(n[0],n[1],n[2]);i=i*.5;var l=Math.sin(i),d=l*n[0]/o,p=l*n[1]/o,g=l*n[2]/o,v=Math.cos(i),_=e[0],b=e[1],w=e[2],E=e[3];t[0]=_*v+E*d+b*g-w*p,t[1]=b*v+E*p+w*d-_*g,t[2]=w*v+E*g+_*p-b*d,t[3]=E*v-_*d-b*p-w*g;var S=e[4],M=e[5],k=e[6],x=e[7];return t[4]=S*v+x*d+M*g-k*p,t[5]=M*v+x*p+k*d-S*g,t[6]=k*v+x*g+S*p-M*d,t[7]=x*v-S*d-M*p-k*g,t}function pHe(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t}function cge(t,e,n){var i=e[0],o=e[1],l=e[2],d=e[3],p=n[4],g=n[5],v=n[6],_=n[7],b=e[4],w=e[5],E=e[6],S=e[7],M=n[0],k=n[1],x=n[2],C=n[3];return t[0]=i*C+d*M+o*x-l*k,t[1]=o*C+d*k+l*M-i*x,t[2]=l*C+d*x+i*k-o*M,t[3]=d*C-i*M-o*k-l*x,t[4]=i*_+d*p+o*v-l*g+b*C+S*M+w*x-E*k,t[5]=o*_+d*g+l*p-i*v+w*C+S*k+E*M-b*x,t[6]=l*_+d*v+i*g-o*p+E*C+S*x+b*k-w*M,t[7]=d*_-i*p-o*g-l*v+S*C-b*M-w*k-E*x,t}var mHe=cge;function gHe(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t}var uge=hZ;function vHe(t,e,n,i){var o=1-i;return uge(e,n)<0&&(i=-i),t[0]=e[0]*o+n[0]*i,t[1]=e[1]*o+n[1]*i,t[2]=e[2]*o+n[2]*i,t[3]=e[3]*o+n[3]*i,t[4]=e[4]*o+n[4]*i,t[5]=e[5]*o+n[5]*i,t[6]=e[6]*o+n[6]*i,t[7]=e[7]*o+n[7]*i,t}function _He(t,e){var n=j7(e);return t[0]=-e[0]/n,t[1]=-e[1]/n,t[2]=-e[2]/n,t[3]=e[3]/n,t[4]=-e[4]/n,t[5]=-e[5]/n,t[6]=-e[6]/n,t[7]=e[7]/n,t}function yHe(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}var fge=pZ,bHe=fge,j7=mZ,AHe=j7;function wHe(t,e){var n=j7(e);if(n>0){n=Math.sqrt(n);var i=e[0]/n,o=e[1]/n,l=e[2]/n,d=e[3]/n,p=e[4],g=e[5],v=e[6],_=e[7],b=i*p+o*g+l*v+d*_;t[0]=i,t[1]=o,t[2]=l,t[3]=d,t[4]=(p-i*b)/n,t[5]=(g-o*b)/n,t[6]=(v-l*b)/n,t[7]=(_-d*b)/n}return t}function EHe(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function SHe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function THe(t,e){var n=t[0],i=t[1],o=t[2],l=t[3],d=t[4],p=t[5],g=t[6],v=t[7],_=e[0],b=e[1],w=e[2],E=e[3],S=e[4],M=e[5],k=e[6],x=e[7];return Math.abs(n-_)<=Ln*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(i-b)<=Ln*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(o-w)<=Ln*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(l-E)<=Ln*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(d-S)<=Ln*Math.max(1,Math.abs(d),Math.abs(S))&&Math.abs(p-M)<=Ln*Math.max(1,Math.abs(p),Math.abs(M))&&Math.abs(g-k)<=Ln*Math.max(1,Math.abs(g),Math.abs(k))&&Math.abs(v-x)<=Ln*Math.max(1,Math.abs(v),Math.abs(x))}const xHe=Object.freeze(Object.defineProperty({__proto__:null,add:pHe,clone:qje,conjugate:yHe,copy:lge,create:Yje,dot:uge,equals:THe,exactEquals:SHe,fromMat4:Jje,fromRotation:Kje,fromRotationTranslation:age,fromRotationTranslationValues:Zje,fromTranslation:Qje,fromValues:Xje,getDual:rHe,getReal:nHe,getTranslation:oHe,identity:eHe,invert:_He,len:bHe,length:fge,lerp:vHe,mul:mHe,multiply:cge,normalize:wHe,rotateAroundAxis:hHe,rotateByQuatAppend:fHe,rotateByQuatPrepend:dHe,rotateX:lHe,rotateY:cHe,rotateZ:uHe,scale:gHe,set:tHe,setDual:sHe,setReal:iHe,sqrLen:AHe,squaredLength:j7,str:EHe,translate:aHe},Symbol.toStringTag,{value:"Module"}));function dge(){var t=new Qr(2);return Qr!=Float32Array&&(t[0]=0,t[1]=0),t}function MHe(t){var e=new Qr(2);return e[0]=t[0],e[1]=t[1],e}function kHe(t,e){var n=new Qr(2);return n[0]=t,n[1]=e,n}function CHe(t,e){return t[0]=e[0],t[1]=e[1],t}function PHe(t,e,n){return t[0]=e,t[1]=n,t}function RHe(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function hge(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function pge(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function mge(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function DHe(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function OHe(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function IHe(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function NHe(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function LHe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function zHe(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function BHe(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t}function gge(t,e){var n=e[0]-t[0],i=e[1]-t[1];return Math.hypot(n,i)}function vge(t,e){var n=e[0]-t[0],i=e[1]-t[1];return n*n+i*i}function _ge(t){var e=t[0],n=t[1];return Math.hypot(e,n)}function yge(t){var e=t[0],n=t[1];return e*e+n*n}function UHe(t,e){return t[0]=-e[0],t[1]=-e[1],t}function FHe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function VHe(t,e){var n=e[0],i=e[1],o=n*n+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t}function GHe(t,e){return t[0]*e[0]+t[1]*e[1]}function jHe(t,e,n){var i=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=i,t}function HHe(t,e,n,i){var o=e[0],l=e[1];return t[0]=o+i*(n[0]-o),t[1]=l+i*(n[1]-l),t}function $He(t,e){e=e||1;var n=A0()*2*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function WHe(t,e,n){var i=e[0],o=e[1];return t[0]=n[0]*i+n[2]*o,t[1]=n[1]*i+n[3]*o,t}function YHe(t,e,n){var i=e[0],o=e[1];return t[0]=n[0]*i+n[2]*o+n[4],t[1]=n[1]*i+n[3]*o+n[5],t}function qHe(t,e,n){var i=e[0],o=e[1];return t[0]=n[0]*i+n[3]*o+n[6],t[1]=n[1]*i+n[4]*o+n[7],t}function XHe(t,e,n){var i=e[0],o=e[1];return t[0]=n[0]*i+n[4]*o+n[12],t[1]=n[1]*i+n[5]*o+n[13],t}function ZHe(t,e,n,i){var o=e[0]-n[0],l=e[1]-n[1],d=Math.sin(i),p=Math.cos(i);return t[0]=o*p-l*d+n[0],t[1]=o*d+l*p+n[1],t}function QHe(t,e){var n=t[0],i=t[1],o=e[0],l=e[1],d=Math.sqrt(n*n+i*i)*Math.sqrt(o*o+l*l),p=d&&(n*o+i*l)/d;return Math.acos(Math.min(Math.max(p,-1),1))}function KHe(t){return t[0]=0,t[1]=0,t}function JHe(t){return"vec2("+t[0]+", "+t[1]+")"}function e$e(t,e){return t[0]===e[0]&&t[1]===e[1]}function t$e(t,e){var n=t[0],i=t[1],o=e[0],l=e[1];return Math.abs(n-o)<=Ln*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-l)<=Ln*Math.max(1,Math.abs(i),Math.abs(l))}var n$e=_ge,r$e=hge,i$e=pge,s$e=mge,o$e=gge,a$e=vge,l$e=yge,c$e=function(){var t=dge();return function(e,n,i,o,l,d){var p,g;for(n||(n=2),i||(i=0),o?g=Math.min(o*n+i,e.length):g=e.length,p=i;p<g;p+=n)t[0]=e[p],t[1]=e[p+1],l(t,t,d),e[p]=t[0],e[p+1]=t[1];return e}}();const u$e=Object.freeze(Object.defineProperty({__proto__:null,add:RHe,angle:QHe,ceil:DHe,clone:MHe,copy:CHe,create:dge,cross:jHe,dist:o$e,distance:gge,div:s$e,divide:mge,dot:GHe,equals:t$e,exactEquals:e$e,floor:OHe,forEach:c$e,fromValues:kHe,inverse:FHe,len:n$e,length:_ge,lerp:HHe,max:NHe,min:IHe,mul:i$e,multiply:pge,negate:UHe,normalize:VHe,random:$He,rotate:ZHe,round:LHe,scale:zHe,scaleAndAdd:BHe,set:PHe,sqrDist:a$e,sqrLen:l$e,squaredDistance:vge,squaredLength:yge,str:JHe,sub:r$e,subtract:hge,transformMat2:WHe,transformMat2d:YHe,transformMat3:qHe,transformMat4:XHe,zero:KHe},Symbol.toStringTag,{value:"Module"})),f$e=Object.freeze(Object.defineProperty({__proto__:null,glMatrix:sFe,mat2:PFe,mat2d:eVe,mat3:PVe,mat4:vGe,quat:Wje,quat2:xHe,vec2:u$e,vec3:JGe,vec4:wje},Symbol.toStringTag,{value:"Module"})),Cr=ym(f$e);var d3=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty(u7,"__esModule",{value:!0});u7.Converter=void 0;const qu=FNe,d$e=C6,U8=Cr,yF=dm;let h$e=class{constructor(){this._httpClient=d$e.HttpClient.instance}static get instance(){return this._instance||(this._instance=new this)}processSVG(e){return d3(this,void 0,void 0,function*(){let n=yield new Promise((E,S)=>{const M=new FileReader;M.onloadend=()=>E(M.result),M.onerror=S,M.readAsDataURL(e)});n=n.replace("data:image/svg+xml;base64,",""),n=(0,yF.atobCustom)(n);const i=document.createElement("DIV");i.id="svgc",i.innerHTML=n;const o=i.getElementsByTagName("svg"),l=[];let d=[];for(let E=0;E<o.length;++E){for(let M=0;M<2;++M){const k=o[E].getElementsByTagName(["image","img"][M]);for(let x=0;x<k.length;++x)k[x].href.baseVal.substring(0,5)!="data:"&&l.push(k[x].href.baseVal)}const S=o[E].getElementsByTagName("style");for(let M=0;M<S.length;++M){const k=/@import\x20url\(\s*(.*?)\s*\);/g;let x;for(;(x=k.exec(S[M].innerHTML))!==null;)d.push(x[1]);d=d.filter(function(C,P,O){return O.indexOf(C)===P})}}const p=[],g=E=>d3(this,void 0,void 0,function*(){if(E.length>0){const S=yield this._httpClient.get(E,void 0,!0),M=new Uint8Array(S.data);let k=M.length;const x=[];for(;k--;)x[k]=String.fromCharCode(M[k]);const C=(0,yF.btoaCustom)(x.join("")),P="data:"+S.headers["content-type"]+";base64,"+C;n=n.replace(E,P)}});for(let E=0;E<l.length;++E)p.push(g(l[E]));const v=E=>d3(this,void 0,void 0,function*(){let M=(yield this._httpClient.get(E,{responseType:"text"})).data;const k=[],x=/url\(\s*(.*?)\s*\)/g;let C;for(;(C=x.exec(M))!==null;)k.push(C[1]);const P=[],O=L=>d3(this,void 0,void 0,function*(){const B=yield this._httpClient.get(L,{responseType:"arraybuffer"}),V=new Uint8Array(B.data);let G=V.length;const j=[];for(;G--;)j[G]=String.fromCharCode(V[G]);const F=(0,yF.btoaCustom)(j.join("")),q="data:"+B.headers["content-type"]+";base64,"+F;L.length>0&&(M=M.replace(L,q))});for(let L=0;L<k.length;++L)P.push(O(k[L]));yield Promise.all(P),n=n.replace("@import url("+E+");",M)});for(let E=0;E<d.length;++E)p.push(v(d[E]));yield Promise.all(p);const _="data:image/svg+xml,"+encodeURIComponent(n),b=new Image;b.crossOrigin="Anonymous";const w=new Promise((E,S)=>{b.onload=()=>E(),b.onerror=S});return b.src=_,yield w,b})}responseToImage(e){return d3(this,void 0,void 0,function*(){if(e.data instanceof HTMLImageElement)return e.data;if(e.headers["content-type"]==="image/svg+xml")return yield this.processSVG(e.data.blob);{const n=new Image,i=new Promise((o,l)=>{n.onload=()=>o(),n.onerror=l});return n.crossOrigin="anonymous",n.src=URL.createObjectURL(e.data.blob),yield i,URL.revokeObjectURL(n.src),n}})}toAlpha(e){const n=this.toHexColor(e);return n.length<=8?1:parseInt(n.slice(n.length-2,n.length),16)/255}toColorArray(e){(typeof e!="string"||!e.startsWith("#"))&&(e=this.toHexColor(e));const i=new qu.TinyColor(e).toRgb();return[i.r/255,i.g/255,i.b/255]}toHex8Color(e,n="#000"){const i=this.toHexColor(e,n);return new qu.TinyColor(i).toHex8String().replace("#","0x")}toHexColor(e,n="#000"){if(!e||e==="default")return n;e.constructor===Float32Array&&(e=Array.from(e));const i=new qu.TinyColor(e);if(e instanceof qu.TinyColor)return this.tinyColorToString(i);if(typeof e=="number"){let d=e.toString(16);const p=d.length;p<3?d=d.padStart(3,"0"):p<6?d=d.padStart(6,"0"):p<8&&(d=d.padEnd(8,"0"));const g=new qu.TinyColor(d);return g.isValid?this.tinyColorToString(g):n}if(typeof e=="object"&&"isColor"in e&&"getHexString"in e&&typeof e.getHexString=="function"){const d=new qu.TinyColor(e.getHexString());return d.isValid?this.tinyColorToString(d):n}if(Array.isArray(e)&&(e.length==3||e.length==4)){let d=!0;for(let g=0;g<3;++g)e[g]=parseFloat(e[g]),isNaN(e[g])&&(d=!1);if(!d)return n;const p=new qu.TinyColor({r:Math.max(0,Math.min(e[0],255)),g:Math.max(0,Math.min(e[1],255)),b:Math.max(0,Math.min(e[2],255))});if(e.length==4){const g=parseFloat(e[3]);isNaN(g)||p.setAlpha(Math.max(0,Math.min(g,255))/255)}return p.isValid?this.tinyColorToString(p):n}if(typeof e!="string"){const d=new qu.TinyColor(e);return d.isValid?this.tinyColorToString(d):n}const o=e.replace("0x","#");if(o.match(/^#[a-f0-9]{6}$/i)!==null){const d=new qu.TinyColor(o+"ff");return d.isValid?this.tinyColorToString(d):n}if(o.match(/^#[a-f0-9]{8}$/i)!==null){const d=new qu.TinyColor(o);return d.isValid?this.tinyColorToString(d):n}if(o.match(/^#[a-f0-9]{7}$/i)!==null){const d=new qu.TinyColor(o.slice(0,7)+"0"+o.slice(-1));return d.isValid?this.tinyColorToString(d):n}const l=new qu.TinyColor(o);return l.isValid?this.tinyColorToString(l):n}toThreeJsColorInput(e){const n=this.toHexColor(e);return n.slice(0,n.length-2)}toVec3(e){if(Array.isArray(e)&&e.length>=3&&typeof e[0]=="number"&&typeof e[1]=="number"&&typeof e[2]=="number")return U8.vec3.fromValues(e[0],e[1],e[2]);const n=e;if((n.x||n.x===0)&&typeof n.x=="number"&&(n.y||n.y===0)&&typeof n.y=="number"&&(n.z||n.z===0)&&typeof n.z=="number")return U8.vec3.fromValues(n.x,n.y,n.z);const i=e;return(i.X||i.X===0)&&typeof i.X=="number"&&(i.Y||i.Y===0)&&typeof i.Y=="number"&&(i.Z||i.Z===0)&&typeof i.Z=="number"?U8.vec3.fromValues(i.X,i.Y,i.Z):U8.vec3.create()}tinyColorToString(e){return e.toHex8String()}};u7.Converter=h$e;var H7={},q4={},bge={},$7={},W7={};Object.defineProperty(W7,"__esModule",{value:!0});W7.default=m$e;let F8;const p$e=new Uint8Array(16);function m$e(){if(!F8&&(F8=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!F8))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return F8(p$e)}var km={},fv={},Y7={};Object.defineProperty(Y7,"__esModule",{value:!0});Y7.default=void 0;var g$e=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;Y7.default=g$e;Object.defineProperty(fv,"__esModule",{value:!0});fv.default=void 0;var v$e=_$e(Y7);function _$e(t){return t&&t.__esModule?t:{default:t}}function y$e(t){return typeof t=="string"&&v$e.default.test(t)}var b$e=y$e;fv.default=b$e;Object.defineProperty(km,"__esModule",{value:!0});km.default=void 0;km.unsafeStringify=Age;var A$e=w$e(fv);function w$e(t){return t&&t.__esModule?t:{default:t}}const za=[];for(let t=0;t<256;++t)za.push((t+256).toString(16).slice(1));function Age(t,e=0){return za[t[e+0]]+za[t[e+1]]+za[t[e+2]]+za[t[e+3]]+"-"+za[t[e+4]]+za[t[e+5]]+"-"+za[t[e+6]]+za[t[e+7]]+"-"+za[t[e+8]]+za[t[e+9]]+"-"+za[t[e+10]]+za[t[e+11]]+za[t[e+12]]+za[t[e+13]]+za[t[e+14]]+za[t[e+15]]}function E$e(t,e=0){const n=Age(t,e);if(!(0,A$e.default)(n))throw TypeError("Stringified UUID is invalid");return n}var S$e=E$e;km.default=S$e;Object.defineProperty($7,"__esModule",{value:!0});$7.default=void 0;var T$e=M$e(W7),x$e=km;function M$e(t){return t&&t.__esModule?t:{default:t}}let Ase,bF,AF=0,wF=0;function k$e(t,e,n){let i=e&&n||0;const o=e||new Array(16);t=t||{};let l=t.node||Ase,d=t.clockseq!==void 0?t.clockseq:bF;if(l==null||d==null){const w=t.random||(t.rng||T$e.default)();l==null&&(l=Ase=[w[0]|1,w[1],w[2],w[3],w[4],w[5]]),d==null&&(d=bF=(w[6]<<8|w[7])&16383)}let p=t.msecs!==void 0?t.msecs:Date.now(),g=t.nsecs!==void 0?t.nsecs:wF+1;const v=p-AF+(g-wF)/1e4;if(v<0&&t.clockseq===void 0&&(d=d+1&16383),(v<0||p>AF)&&t.nsecs===void 0&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");AF=p,wF=g,bF=d,p+=122192928e5;const _=((p&268435455)*1e4+g)%4294967296;o[i++]=_>>>24&255,o[i++]=_>>>16&255,o[i++]=_>>>8&255,o[i++]=_&255;const b=p/4294967296*1e4&268435455;o[i++]=b>>>8&255,o[i++]=b&255,o[i++]=b>>>24&15|16,o[i++]=b>>>16&255,o[i++]=d>>>8|128,o[i++]=d&255;for(let w=0;w<6;++w)o[i+w]=l[w];return e||(0,x$e.unsafeStringify)(o)}var C$e=k$e;$7.default=C$e;var q7={},hm={},U6={};Object.defineProperty(U6,"__esModule",{value:!0});U6.default=void 0;var P$e=R$e(fv);function R$e(t){return t&&t.__esModule?t:{default:t}}function D$e(t){if(!(0,P$e.default)(t))throw TypeError("Invalid UUID");let e;const n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=e&255,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=e&255,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=e&255,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=e&255,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=e&255,n}var O$e=D$e;U6.default=O$e;Object.defineProperty(hm,"__esModule",{value:!0});hm.URL=hm.DNS=void 0;hm.default=B$e;var I$e=km,N$e=L$e(U6);function L$e(t){return t&&t.__esModule?t:{default:t}}function z$e(t){t=unescape(encodeURIComponent(t));const e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}const wge="6ba7b810-9dad-11d1-80b4-00c04fd430c8";hm.DNS=wge;const Ege="6ba7b811-9dad-11d1-80b4-00c04fd430c8";hm.URL=Ege;function B$e(t,e,n){function i(o,l,d,p){var g;if(typeof o=="string"&&(o=z$e(o)),typeof l=="string"&&(l=(0,N$e.default)(l)),((g=l)===null||g===void 0?void 0:g.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let v=new Uint8Array(16+o.length);if(v.set(l),v.set(o,l.length),v=n(v),v[6]=v[6]&15|e,v[8]=v[8]&63|128,d){p=p||0;for(let _=0;_<16;++_)d[p+_]=v[_];return d}return(0,I$e.unsafeStringify)(v)}try{i.name=t}catch{}return i.DNS=wge,i.URL=Ege,i}var X7={};Object.defineProperty(X7,"__esModule",{value:!0});X7.default=void 0;function U$e(t){if(typeof t=="string"){const e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(let n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return F$e(V$e(G$e(t),t.length*8))}function F$e(t){const e=[],n=t.length*32,i="0123456789abcdef";for(let o=0;o<n;o+=8){const l=t[o>>5]>>>o%32&255,d=parseInt(i.charAt(l>>>4&15)+i.charAt(l&15),16);e.push(d)}return e}function Sge(t){return(t+64>>>9<<4)+14+1}function V$e(t,e){t[e>>5]|=128<<e%32,t[Sge(e)-1]=e;let n=1732584193,i=-271733879,o=-1732584194,l=271733878;for(let d=0;d<t.length;d+=16){const p=n,g=i,v=o,_=l;n=ol(n,i,o,l,t[d],7,-680876936),l=ol(l,n,i,o,t[d+1],12,-389564586),o=ol(o,l,n,i,t[d+2],17,606105819),i=ol(i,o,l,n,t[d+3],22,-1044525330),n=ol(n,i,o,l,t[d+4],7,-176418897),l=ol(l,n,i,o,t[d+5],12,1200080426),o=ol(o,l,n,i,t[d+6],17,-1473231341),i=ol(i,o,l,n,t[d+7],22,-45705983),n=ol(n,i,o,l,t[d+8],7,1770035416),l=ol(l,n,i,o,t[d+9],12,-1958414417),o=ol(o,l,n,i,t[d+10],17,-42063),i=ol(i,o,l,n,t[d+11],22,-1990404162),n=ol(n,i,o,l,t[d+12],7,1804603682),l=ol(l,n,i,o,t[d+13],12,-40341101),o=ol(o,l,n,i,t[d+14],17,-1502002290),i=ol(i,o,l,n,t[d+15],22,1236535329),n=al(n,i,o,l,t[d+1],5,-165796510),l=al(l,n,i,o,t[d+6],9,-1069501632),o=al(o,l,n,i,t[d+11],14,643717713),i=al(i,o,l,n,t[d],20,-373897302),n=al(n,i,o,l,t[d+5],5,-701558691),l=al(l,n,i,o,t[d+10],9,38016083),o=al(o,l,n,i,t[d+15],14,-660478335),i=al(i,o,l,n,t[d+4],20,-405537848),n=al(n,i,o,l,t[d+9],5,568446438),l=al(l,n,i,o,t[d+14],9,-1019803690),o=al(o,l,n,i,t[d+3],14,-187363961),i=al(i,o,l,n,t[d+8],20,1163531501),n=al(n,i,o,l,t[d+13],5,-1444681467),l=al(l,n,i,o,t[d+2],9,-51403784),o=al(o,l,n,i,t[d+7],14,1735328473),i=al(i,o,l,n,t[d+12],20,-1926607734),n=ll(n,i,o,l,t[d+5],4,-378558),l=ll(l,n,i,o,t[d+8],11,-2022574463),o=ll(o,l,n,i,t[d+11],16,1839030562),i=ll(i,o,l,n,t[d+14],23,-35309556),n=ll(n,i,o,l,t[d+1],4,-1530992060),l=ll(l,n,i,o,t[d+4],11,1272893353),o=ll(o,l,n,i,t[d+7],16,-155497632),i=ll(i,o,l,n,t[d+10],23,-1094730640),n=ll(n,i,o,l,t[d+13],4,681279174),l=ll(l,n,i,o,t[d],11,-358537222),o=ll(o,l,n,i,t[d+3],16,-722521979),i=ll(i,o,l,n,t[d+6],23,76029189),n=ll(n,i,o,l,t[d+9],4,-640364487),l=ll(l,n,i,o,t[d+12],11,-421815835),o=ll(o,l,n,i,t[d+15],16,530742520),i=ll(i,o,l,n,t[d+2],23,-995338651),n=cl(n,i,o,l,t[d],6,-198630844),l=cl(l,n,i,o,t[d+7],10,1126891415),o=cl(o,l,n,i,t[d+14],15,-1416354905),i=cl(i,o,l,n,t[d+5],21,-57434055),n=cl(n,i,o,l,t[d+12],6,1700485571),l=cl(l,n,i,o,t[d+3],10,-1894986606),o=cl(o,l,n,i,t[d+10],15,-1051523),i=cl(i,o,l,n,t[d+1],21,-2054922799),n=cl(n,i,o,l,t[d+8],6,1873313359),l=cl(l,n,i,o,t[d+15],10,-30611744),o=cl(o,l,n,i,t[d+6],15,-1560198380),i=cl(i,o,l,n,t[d+13],21,1309151649),n=cl(n,i,o,l,t[d+4],6,-145523070),l=cl(l,n,i,o,t[d+11],10,-1120210379),o=cl(o,l,n,i,t[d+2],15,718787259),i=cl(i,o,l,n,t[d+9],21,-343485551),n=V2(n,p),i=V2(i,g),o=V2(o,v),l=V2(l,_)}return[n,i,o,l]}function G$e(t){if(t.length===0)return[];const e=t.length*8,n=new Uint32Array(Sge(e));for(let i=0;i<e;i+=8)n[i>>5]|=(t[i/8]&255)<<i%32;return n}function V2(t,e){const n=(t&65535)+(e&65535);return(t>>16)+(e>>16)+(n>>16)<<16|n&65535}function j$e(t,e){return t<<e|t>>>32-e}function Z7(t,e,n,i,o,l){return V2(j$e(V2(V2(e,t),V2(i,l)),o),n)}function ol(t,e,n,i,o,l,d){return Z7(e&n|~e&i,t,e,o,l,d)}function al(t,e,n,i,o,l,d){return Z7(e&i|n&~i,t,e,o,l,d)}function ll(t,e,n,i,o,l,d){return Z7(e^n^i,t,e,o,l,d)}function cl(t,e,n,i,o,l,d){return Z7(n^(e|~i),t,e,o,l,d)}var H$e=U$e;X7.default=H$e;Object.defineProperty(q7,"__esModule",{value:!0});q7.default=void 0;var $$e=Tge(hm),W$e=Tge(X7);function Tge(t){return t&&t.__esModule?t:{default:t}}const Y$e=(0,$$e.default)("v3",48,W$e.default);var q$e=Y$e;q7.default=q$e;var Q7={},K7={};Object.defineProperty(K7,"__esModule",{value:!0});K7.default=void 0;const X$e=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);var Z$e={randomUUID:X$e};K7.default=Z$e;Object.defineProperty(Q7,"__esModule",{value:!0});Q7.default=void 0;var wse=xge(K7),Q$e=xge(W7),K$e=km;function xge(t){return t&&t.__esModule?t:{default:t}}function J$e(t,e,n){if(wse.default.randomUUID&&!e&&!t)return wse.default.randomUUID();t=t||{};const i=t.random||(t.rng||Q$e.default)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){n=n||0;for(let o=0;o<16;++o)e[n+o]=i[o];return e}return(0,K$e.unsafeStringify)(i)}var eWe=J$e;Q7.default=eWe;var J7={},e9={};Object.defineProperty(e9,"__esModule",{value:!0});e9.default=void 0;function tWe(t,e,n,i){switch(t){case 0:return e&n^~e&i;case 1:return e^n^i;case 2:return e&n^e&i^n&i;case 3:return e^n^i}}function EF(t,e){return t<<e|t>>>32-e}function nWe(t){const e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){const d=unescape(encodeURIComponent(t));t=[];for(let p=0;p<d.length;++p)t.push(d.charCodeAt(p))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);const i=t.length/4+2,o=Math.ceil(i/16),l=new Array(o);for(let d=0;d<o;++d){const p=new Uint32Array(16);for(let g=0;g<16;++g)p[g]=t[d*64+g*4]<<24|t[d*64+g*4+1]<<16|t[d*64+g*4+2]<<8|t[d*64+g*4+3];l[d]=p}l[o-1][14]=(t.length-1)*8/Math.pow(2,32),l[o-1][14]=Math.floor(l[o-1][14]),l[o-1][15]=(t.length-1)*8&4294967295;for(let d=0;d<o;++d){const p=new Uint32Array(80);for(let E=0;E<16;++E)p[E]=l[d][E];for(let E=16;E<80;++E)p[E]=EF(p[E-3]^p[E-8]^p[E-14]^p[E-16],1);let g=n[0],v=n[1],_=n[2],b=n[3],w=n[4];for(let E=0;E<80;++E){const S=Math.floor(E/20),M=EF(g,5)+tWe(S,v,_,b)+w+e[S]+p[E]>>>0;w=b,b=_,_=EF(v,30)>>>0,v=g,g=M}n[0]=n[0]+g>>>0,n[1]=n[1]+v>>>0,n[2]=n[2]+_>>>0,n[3]=n[3]+b>>>0,n[4]=n[4]+w>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var rWe=nWe;e9.default=rWe;Object.defineProperty(J7,"__esModule",{value:!0});J7.default=void 0;var iWe=Mge(hm),sWe=Mge(e9);function Mge(t){return t&&t.__esModule?t:{default:t}}const oWe=(0,iWe.default)("v5",80,sWe.default);var aWe=oWe;J7.default=aWe;var t9={};Object.defineProperty(t9,"__esModule",{value:!0});t9.default=void 0;var lWe="00000000-0000-0000-0000-000000000000";t9.default=lWe;var n9={};Object.defineProperty(n9,"__esModule",{value:!0});n9.default=void 0;var cWe=uWe(fv);function uWe(t){return t&&t.__esModule?t:{default:t}}function fWe(t){if(!(0,cWe.default)(t))throw TypeError("Invalid UUID");return parseInt(t.slice(14,15),16)}var dWe=fWe;n9.default=dWe;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NIL",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"parse",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"v1",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(t,"v3",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"v4",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"v5",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return d.default}});var e=_($7),n=_(q7),i=_(Q7),o=_(J7),l=_(t9),d=_(n9),p=_(fv),g=_(km),v=_(U6);function _(b){return b&&b.__esModule?b:{default:b}}})(bge);Object.defineProperty(q4,"__esModule",{value:!0});q4.UuidGenerator=void 0;const V8=bge;class hWe{static get instance(){return this._instance||(this._instance=new this)}create(){return(0,V8.v4)()}parse(e){return(0,V8.parse)(e)}stringify(e){return(0,V8.stringify)(e)}validate(e){return(0,V8.validate)(e)}}q4.UuidGenerator=hWe;Object.defineProperty(H7,"__esModule",{value:!0});H7.DomEventEngine=void 0;const pWe=q4;class mWe{constructor(e){this._domEventListeners={},this._uuidGenerator=pWe.UuidGenerator.instance,this._allowListeners={mousewheel:!0,pointerdown:!0,pointermove:!0,pointerup:!0,pointerout:!0,keydown:!0,keyup:!0,contextmenu:!0},this._currentPointerPosition={x:0,y:0},this._canvas=e,this._onMouseWheel=this.onMouseWheel.bind(this),this._onPointerDown=this.onPointerDown.bind(this),this._onPointerMove=this.onPointerMove.bind(this),this._onKeyDownPointerPositionHelper=this.onKeyDownPointerPositionHelper.bind(this),this._onPointerUp=this.onPointerUp.bind(this),this._onPointerOut=this.onPointerOut.bind(this),this._onKeyDown=this.onKeyDown.bind(this),this._onKeyUp=this.onKeyUp.bind(this),this._onContextMenu=this.onContextMenu.bind(this),this.addEventListeners()}addDomEventListener(e){const n=this._uuidGenerator.create();return this._domEventListeners[n]=e,n}allowEventListeners(e){typeof window!==void 0&&(e.mousewheel!==void 0&&this._allowListeners.mousewheel!==e.mousewheel&&(e.mousewheel?(this._canvas.addEventListener("mousewheel",this._onMouseWheel),this._canvas.addEventListener("MozMousePixelScroll",this._onMouseWheel)):(this._canvas.removeEventListener("mousewheel",this._onMouseWheel),this._canvas.removeEventListener("MozMousePixelScroll",this._onMouseWheel)),this._allowListeners.mousewheel=e.mousewheel),e.pointerdown!==void 0&&this._allowListeners.pointerdown!==e.pointerdown&&(e.pointerdown?this._canvas.addEventListener("pointerdown",this._onPointerDown):this._canvas.removeEventListener("pointerdown",this._onPointerDown),this._allowListeners.pointerdown=e.pointerdown),e.pointermove!==void 0&&this._allowListeners.pointermove!==e.pointermove&&(e.pointermove?(this._canvas.addEventListener("pointermove",this._onPointerMove),window.addEventListener("pointermove",this._onKeyDownPointerPositionHelper)):(this._canvas.removeEventListener("pointermove",this._onPointerMove),window.removeEventListener("pointermove",this._onKeyDownPointerPositionHelper)),this._allowListeners.pointermove=e.pointermove),e.pointerup!==void 0&&this._allowListeners.pointerup!==e.pointerup&&(e.pointerup?this._canvas.addEventListener("pointerup",this._onPointerUp):this._canvas.removeEventListener("pointerup",this._onPointerUp),this._allowListeners.pointerup=e.pointerup),e.pointerout!==void 0&&this._allowListeners.pointerout!==e.pointerout&&(e.pointerout?this._canvas.addEventListener("pointerout",this._onPointerOut):this._canvas.removeEventListener("pointerout",this._onPointerOut),this._allowListeners.pointerout=e.pointerout),e.keydown!==void 0&&this._allowListeners.keydown!==e.keydown&&(e.keydown?window.addEventListener("keydown",this._onKeyDown):window.removeEventListener("keydown",this._onKeyDown),this._allowListeners.keydown=e.keydown),e.keyup!==void 0&&this._allowListeners.keyup!==e.keyup&&(e.keyup?window.addEventListener("keyup",this._onKeyUp):window.removeEventListener("keyup",this._onKeyUp),this._allowListeners.keyup=e.keyup),e.contextmenu!==void 0&&this._allowListeners.contextmenu!==e.contextmenu&&(e.contextmenu?this._canvas.addEventListener("contextmenu",this._onContextMenu):this._canvas.removeEventListener("contextmenu",this._onContextMenu),this._allowListeners.contextmenu=e.contextmenu))}dispose(){this.removeEventListeners()}removeAllDomEventListener(){for(const e in this._domEventListeners)delete this._domEventListeners[e]}removeDomEventListener(e){return this._domEventListeners[e]?(delete this._domEventListeners[e],!0):!1}addEventListeners(){typeof window!==void 0&&(this._canvas.addEventListener("mousewheel",this._onMouseWheel),this._canvas.addEventListener("MozMousePixelScroll",this._onMouseWheel),this._canvas.addEventListener("pointerdown",this._onPointerDown),this._canvas.addEventListener("pointermove",this._onPointerMove),this._canvas.addEventListener("pointerup",this._onPointerUp),this._canvas.addEventListener("pointerout",this._onPointerOut),window.addEventListener("keyup",this._onKeyUp),window.addEventListener("keydown",this._onKeyDown),window.addEventListener("pointermove",this._onKeyDownPointerPositionHelper),this._canvas.addEventListener("contextmenu",this._onContextMenu))}onContextMenu(e){e.preventDefault()}onKeyDown(e){this._canvas===document.elementFromPoint(this._currentPointerPosition.x,this._currentPointerPosition.y)&&Object.values(this._domEventListeners).forEach(n=>n.onKeyDown(e))}onKeyDownPointerPositionHelper(e){this._currentPointerPosition={x:e.pageX,y:e.pageY}}onKeyUp(e){this._canvas===document.elementFromPoint(this._currentPointerPosition.x,this._currentPointerPosition.y)&&Object.values(this._domEventListeners).forEach(n=>n.onKeyUp(e))}onMouseWheel(e){e.preventDefault(),e.stopPropagation(),Object.values(this._domEventListeners).forEach(n=>n.onMouseWheel(e))}onPointerDown(e){e.preventDefault(),Object.values(this._domEventListeners).forEach(n=>n.onPointerDown(e))}onPointerMove(e){e.preventDefault(),Object.values(this._domEventListeners).forEach(n=>n.onPointerMove(e))}onPointerOut(e){e.preventDefault(),Object.values(this._domEventListeners).forEach(n=>n.onPointerOut(e)),Object.values(this._domEventListeners).forEach(n=>n.onPointerEnd(e))}onPointerUp(e){e.preventDefault(),Object.values(this._domEventListeners).forEach(n=>n.onPointerUp(e)),Object.values(this._domEventListeners).forEach(n=>n.onPointerEnd(e))}removeEventListeners(){typeof window!==void 0&&(this._canvas.removeEventListener("mousewheel",this._onMouseWheel),this._canvas.removeEventListener("MozMousePixelScroll",this._onMouseWheel),this._canvas.removeEventListener("pointerdown",this._onPointerDown),this._canvas.removeEventListener("pointermove",this._onPointerMove),this._canvas.removeEventListener("pointerup",this._onPointerUp),this._canvas.removeEventListener("pointerout",this._onPointerOut),window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),window.removeEventListener("pointermove",this._onKeyDownPointerPositionHelper),this._canvas.removeEventListener("contextmenu",this._onContextMenu))}}H7.DomEventEngine=mWe;var r9={},vZ={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.EVENTTYPE=t.EVENTTYPE_DRAWING_TOOLS=t.EVENTTYPE_INTERACTION=t.EVENTTYPE_TASK=t.EVENTTYPE_OUTPUT=t.EVENTTYPE_PARAMETER=t.EVENTTYPE_SESSION=t.EVENTTYPE_VIEWPORT=t.EVENTTYPE_SCENE=t.EVENTTYPE_RENDERING=t.EVENTTYPE_CAMERA=void 0;var e;(function(b){b.CAMERA_START="camera.start",b.CAMERA_MOVE="camera.move",b.CAMERA_END="camera.end"})(e=t.EVENTTYPE_CAMERA||(t.EVENTTYPE_CAMERA={}));var n;(function(b){b.BEAUTY_RENDERING_FINISHED="rendering.beautyRenderingFinished"})(n=t.EVENTTYPE_RENDERING||(t.EVENTTYPE_RENDERING={}));var i;(function(b){b.SCENE_BOUNDING_BOX_CHANGE="scene.boundingBoxChange",b.SCENE_BOUNDING_BOX_EMPTY="scene.boundingBoxEmpty"})(i=t.EVENTTYPE_SCENE||(t.EVENTTYPE_SCENE={}));var o;(function(b){b.BUSY_MODE_ON="viewport.busy.on",b.BUSY_MODE_OFF="viewport.busy.off",b.VIEWPORT_CREATED="viewport.created",b.VIEWPORT_UPDATED="viewport.updated",b.VIEWPORT_CLOSED="viewport.closed",b.VIEWPORT_SETTINGS_LOADED="viewport.settingsLoaded",b.VIEWPORT_VISIBLE="viewport.visible",b.VIEWPORT_HIDDEN="viewport.hidden"})(o=t.EVENTTYPE_VIEWPORT||(t.EVENTTYPE_VIEWPORT={}));var l;(function(b){b.SESSION_CREATED="session.created",b.SESSION_CUSTOMIZED="session.customized",b.SESSION_CLOSED="session.closed",b.SESSION_INITIAL_OUTPUTS_LOADED="session.initialOutputsLoaded",b.SESSION_SDTF_DELAYED_LOADED="session.sdtfDelayedLoaded"})(l=t.EVENTTYPE_SESSION||(t.EVENTTYPE_SESSION={}));var d;(function(b){b.PARAMETER_VALUE_CHANGED="parameter.valueChanged",b.PARAMETER_SESSION_VALUE_CHANGED="parameter.sessionValueChanged"})(d=t.EVENTTYPE_PARAMETER||(t.EVENTTYPE_PARAMETER={}));var p;(function(b){b.OUTPUT_UPDATED="output.updated"})(p=t.EVENTTYPE_OUTPUT||(t.EVENTTYPE_OUTPUT={}));var g;(function(b){b.TASK_START="task.start",b.TASK_PROCESS="task.process",b.TASK_END="task.end",b.TASK_CANCEL="task.cancel"})(g=t.EVENTTYPE_TASK||(t.EVENTTYPE_TASK={}));var v;(function(b){b.DRAG_START="interaction.drag.start",b.DRAG_MOVE="interaction.drag.move",b.DRAG_END="interaction.drag.end",b.HOVER_ON="interaction.hover.on",b.HOVER_OFF="interaction.hover.off",b.SELECT_ON="interaction.select.on",b.SELECT_OFF="interaction.select.off"})(v=t.EVENTTYPE_INTERACTION||(t.EVENTTYPE_INTERACTION={}));var _;(function(b){b.CANCEL="drawing_tools.cancel",b.FINISH="drawing_tools.finish",b.UPDATE="drawing_tools.update",b.INSERTED="drawing_tools.inserted",b.REMOVED="drawing_tools.removed",b.DRAG_START="drawing_tools.drag.start",b.DRAG_MOVE="drawing_tools.drag.move",b.DRAG_END="drawing_tools.drag.end"})(_=t.EVENTTYPE_DRAWING_TOOLS||(t.EVENTTYPE_DRAWING_TOOLS={})),t.EVENTTYPE={CAMERA:e,OUTPUT:p,RENDERING:n,SCENE:i,SESSION:l,PARAMETER:d,VIEWPORT:o,INTERACTION:v,TASK:g,DRAWING_TOOLS:_}})(vZ);var i9={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=t.LOGGING_LEVEL=void 0;var e;(function(i){i.NONE="none",i.ERROR="error",i.FATAL="fatal",i.WARN="warn",i.INFO="info",i.DEBUG="debug",i.DEBUG_HIGH="debug_high",i.DEBUG_MEDIUM="debug_medium",i.DEBUG_LOW="debug_low"})(e=t.LOGGING_LEVEL||(t.LOGGING_LEVEL={}));class n{constructor(){this._loggingLevel=e.WARN,this._showMessages=!0}static get instance(){return this._instance||(this._instance=new this)}get loggingLevel(){return this._loggingLevel}set loggingLevel(o){this._loggingLevel=o}get showMessages(){return this._showMessages}set showMessages(o){this._showMessages=o}debug(o){this.canLog(e.DEBUG)&&this.showMessages===!0&&console.debug("(DEBUG) "+this.messageConstruction(o))}debugHigh(o){this.canLog(e.DEBUG_HIGH)&&this.showMessages===!0&&console.debug("(DEBUG_HIGH) "+this.messageConstruction(o))}debugLow(o){this.canLog(e.DEBUG_LOW)&&this.showMessages===!0&&console.debug("(DEBUG_LOW) "+this.messageConstruction(o))}debugMedium(o){this.canLog(e.DEBUG_MEDIUM)&&this.showMessages===!0&&console.debug("(DEBUG_MEDIUM) "+this.messageConstruction(o))}error(o){this.canLog(e.ERROR)&&this.showMessages===!0&&console.error("(ERROR) "+this.messageConstruction(o))}fatal(o){this.canLog(e.FATAL)&&this.showMessages===!0&&console.error("(FATAL) "+this.messageConstruction(o))}info(o){this.canLog(e.INFO)&&this.showMessages===!0&&console.info("(INFO) "+this.messageConstruction(o))}warn(o){this.canLog(e.WARN)&&this.showMessages===!0&&console.warn("(WARN) "+this.messageConstruction(o))}canLog(o){switch(this.loggingLevel){case e.ERROR:if(o===e.FATAL||o===e.WARN||o===e.INFO||o===e.DEBUG||o===e.DEBUG_HIGH||o===e.DEBUG_MEDIUM||o===e.DEBUG_LOW)return!1;case e.FATAL:if(o===e.WARN||o===e.INFO||o===e.DEBUG||o===e.DEBUG_HIGH||o===e.DEBUG_MEDIUM||o===e.DEBUG_LOW)return!1;case e.WARN:if(o===e.INFO||o===e.DEBUG||o===e.DEBUG_HIGH||o===e.DEBUG_MEDIUM||o===e.DEBUG_LOW)return!1;case e.INFO:if(o===e.DEBUG||o===e.DEBUG_HIGH||o===e.DEBUG_MEDIUM||o===e.DEBUG_LOW)return!1;case e.DEBUG_HIGH:if(o===e.DEBUG_MEDIUM||o===e.DEBUG_LOW)return!1;case e.DEBUG_MEDIUM:if(o===e.DEBUG_LOW)return!1;case e.DEBUG_LOW:case e.DEBUG:default:return!0}}messageConstruction(o){return new Date().toISOString()+": "+o}}t.Logger=n})(i9);Object.defineProperty(r9,"__esModule",{value:!0});r9.EventEngine=void 0;const l_=vZ,gWe=q4,vWe=i9;class _We{constructor(){this._logger=vWe.Logger.instance,this._uuidGenerator=gWe.UuidGenerator.instance,this._eventListeners={};for(const e in l_.EVENTTYPE){const n=l_.EVENTTYPE[e];this._eventListeners[e.toLowerCase()]=[];for(const i in n)this._eventListeners[n[i]]=[]}}static get instance(){return this._instance||(this._instance=new this)}addListener(e,n){var i;const o=this.convertTypeToString(e);if(!o)return"";const l=this._uuidGenerator.create();return(i=this._eventListeners[o])===null||i===void 0||i.push({token:l,cb:n}),l}emitEvent(e,n){const i=this.convertTypeToString(e);if(this._eventListeners[i]&&this._eventListeners[i].length!==0){const o=this._eventListeners[i].map(l=>l.cb);for(let l=0;l<o.length;l++)o[l](n)}i.includes(".")&&this.emitEvent(i.substr(0,i.indexOf(".")),n)}removeListener(e){for(const n in l_.EVENTTYPE){const i=l_.EVENTTYPE[n],o=n.toLowerCase();for(let l=0;l<this._eventListeners[o].length;l++)if(this._eventListeners[o][l].token===e)return this._eventListeners[o].splice(l,1),!0;for(const l in i)for(let d=0;d<this._eventListeners[i[l]].length;d++)if(this._eventListeners[i[l]][d].token===e)return this._eventListeners[i[l]].splice(d,1),!0}return!1}convertTypeToString(e){let n="";typeof e=="string"&&(n=e);for(const i in l_.EVENTTYPE)e===l_.EVENTTYPE[i]&&(n=i.toLowerCase());return!n||!this._eventListeners[n]?(this._logger.warn("EventEngine.convertTypeToString: No valid type provided."),""):n}}r9.EventEngine=_We;var s9={},kge={exports:{}};/*! @license DOMPurify 2.5.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.5.4/LICENSE */(function(t,e){(function(n,i){t.exports=i()})(X,function(){function n(Qe){"@babel/helpers - typeof";return n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(lt){return typeof lt}:function(lt){return lt&&typeof Symbol=="function"&&lt.constructor===Symbol&&lt!==Symbol.prototype?"symbol":typeof lt},n(Qe)}function i(Qe,lt){return i=Object.setPrototypeOf||function(ft,Cn){return ft.__proto__=Cn,ft},i(Qe,lt)}function o(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function l(Qe,lt,xt){return o()?l=Reflect.construct:l=function(Cn,Rn,dn){var Qt=[null];Qt.push.apply(Qt,Rn);var vn=Function.bind.apply(Cn,Qt),Yn=new vn;return dn&&i(Yn,dn.prototype),Yn},l.apply(null,arguments)}function d(Qe){return p(Qe)||g(Qe)||v(Qe)||b()}function p(Qe){if(Array.isArray(Qe))return _(Qe)}function g(Qe){if(typeof Symbol<"u"&&Qe[Symbol.iterator]!=null||Qe["@@iterator"]!=null)return Array.from(Qe)}function v(Qe,lt){if(Qe){if(typeof Qe=="string")return _(Qe,lt);var xt=Object.prototype.toString.call(Qe).slice(8,-1);if(xt==="Object"&&Qe.constructor&&(xt=Qe.constructor.name),xt==="Map"||xt==="Set")return Array.from(Qe);if(xt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(xt))return _(Qe,lt)}}function _(Qe,lt){(lt==null||lt>Qe.length)&&(lt=Qe.length);for(var xt=0,ft=new Array(lt);xt<lt;xt++)ft[xt]=Qe[xt];return ft}function b(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var w=Object.hasOwnProperty,E=Object.setPrototypeOf,S=Object.isFrozen,M=Object.getPrototypeOf,k=Object.getOwnPropertyDescriptor,x=Object.freeze,C=Object.seal,P=Object.create,O=typeof Reflect<"u"&&Reflect,L=O.apply,B=O.construct;L||(L=function(lt,xt,ft){return lt.apply(xt,ft)}),x||(x=function(lt){return lt}),C||(C=function(lt){return lt}),B||(B=function(lt,xt){return l(lt,d(xt))});var V=pe(Array.prototype.forEach),G=pe(Array.prototype.pop),j=pe(Array.prototype.push),F=pe(String.prototype.toLowerCase),q=pe(String.prototype.toString),fe=pe(String.prototype.match),ue=pe(String.prototype.replace),J=pe(String.prototype.indexOf),le=pe(String.prototype.trim),me=pe(RegExp.prototype.test),be=oe(TypeError);function ye(Qe){return typeof Qe=="number"&&isNaN(Qe)}function pe(Qe){return function(lt){for(var xt=arguments.length,ft=new Array(xt>1?xt-1:0),Cn=1;Cn<xt;Cn++)ft[Cn-1]=arguments[Cn];return L(Qe,lt,ft)}}function oe(Qe){return function(){for(var lt=arguments.length,xt=new Array(lt),ft=0;ft<lt;ft++)xt[ft]=arguments[ft];return B(Qe,xt)}}function Ce(Qe,lt,xt){var ft;xt=(ft=xt)!==null&&ft!==void 0?ft:F,E&&E(Qe,null);for(var Cn=lt.length;Cn--;){var Rn=lt[Cn];if(typeof Rn=="string"){var dn=xt(Rn);dn!==Rn&&(S(lt)||(lt[Cn]=dn),Rn=dn)}Qe[Rn]=!0}return Qe}function it(Qe){var lt=P(null),xt;for(xt in Qe)L(w,Qe,[xt])===!0&&(lt[xt]=Qe[xt]);return lt}function Se(Qe,lt){for(;Qe!==null;){var xt=k(Qe,lt);if(xt){if(xt.get)return pe(xt.get);if(typeof xt.value=="function")return pe(xt.value)}Qe=M(Qe)}function ft(Cn){return console.warn("fallback value for",Cn),null}return ft}var Oe=x(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ct=x(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),_t=x(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Nt=x(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Je=x(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),ot=x(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),fn=x(["#text"]),Ht=x(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Re=x(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Lt=x(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),mt=x(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ht=C(/\{\{[\w\W]*|[\w\W]*\}\}/gm),at=C(/<%[\w\W]*|[\w\W]*%>/gm),Mt=C(/\${[\w\W]*}/gm),Ot=C(/^data-[\-\w.\u00B7-\uFFFF]/),It=C(/^aria-[\-\w]+$/),Zt=C(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ke=C(/^(?:\w+script|data):/i),he=C(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),tt=C(/^html$/i),wt=C(/^[a-z][.\w]*(-[.\w]+)+$/i),St=function(){return typeof window>"u"?null:window},De=function(lt,xt){if(n(lt)!=="object"||typeof lt.createPolicy!="function")return null;var ft=null,Cn="data-tt-policy-suffix";xt.currentScript&&xt.currentScript.hasAttribute(Cn)&&(ft=xt.currentScript.getAttribute(Cn));var Rn="dompurify"+(ft?"#"+ft:"");try{return lt.createPolicy(Rn,{createHTML:function(Qt){return Qt},createScriptURL:function(Qt){return Qt}})}catch{return console.warn("TrustedTypes policy "+Rn+" could not be created."),null}};function nt(){var Qe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:St(),lt=function(et){return nt(et)};if(lt.version="2.5.4",lt.removed=[],!Qe||!Qe.document||Qe.document.nodeType!==9)return lt.isSupported=!1,lt;var xt=Qe.document,ft=Qe.document,Cn=Qe.DocumentFragment,Rn=Qe.HTMLTemplateElement,dn=Qe.Node,Qt=Qe.Element,vn=Qe.NodeFilter,Yn=Qe.NamedNodeMap,ir=Yn===void 0?Qe.NamedNodeMap||Qe.MozNamedAttrMap:Yn,li=Qe.HTMLFormElement,st=Qe.DOMParser,sn=Qe.trustedTypes,gt=Qt.prototype,on=Se(gt,"cloneNode"),_n=Se(gt,"nextSibling"),Sr=Se(gt,"childNodes"),si=Se(gt,"parentNode");if(typeof Rn=="function"){var mr=ft.createElement("template");mr.content&&mr.content.ownerDocument&&(ft=mr.content.ownerDocument)}var gi=De(sn,xt),qr=gi?gi.createHTML(""):"",ji=ft,Ks=ji.implementation,zu=ji.createNodeIterator,Ff=ji.createDocumentFragment,Yc=ji.getElementsByTagName,Vf=xt.importNode,Ka={};try{Ka=it(ft).documentMode?ft.documentMode:{}}catch{}var go={};lt.isSupported=typeof si=="function"&&Ks&&Ks.createHTMLDocument!==void 0&&Ka!==9;var vi=ht,rc=at,qc=Mt,K=Ot,$=It,Q=ke,te=he,ce=wt,ae=Zt,xe=null,Ne=Ce({},[].concat(d(Oe),d(ct),d(_t),d(Je),d(fn))),je=null,Ve=Ce({},[].concat(d(Ht),d(Re),d(Lt),d(mt))),Ke=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),dt=null,bt=null,un=!0,Xn=!0,kn=!1,Bi=!0,jn=!1,Un=!0,Or=!1,hr=!1,Qo=!1,co=!1,Ta=!1,Ja=!1,hs=!0,xa=!1,Ro="user-content-",Vs=!0,Ma=!1,Il={},is=null,Pi=Ce({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),CA=null,PA=Ce({},["audio","video","img","source","image","track"]),wv=null,RA=Ce({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Gm="http://www.w3.org/1998/Math/MathML",jm="http://www.w3.org/2000/svg",Bu="http://www.w3.org/1999/xhtml",Hd=Bu,Ev=!1,Sv=null,wM=Ce({},[Gm,jm,Bu],q),j0,EM=["application/xhtml+xml","text/html"],SM="text/html",vo,$d=null,DA=255,TM=ft.createElement("form"),OA=function(et){return et instanceof RegExp||et instanceof Function},Tv=function(et){$d&&$d===et||((!et||n(et)!=="object")&&(et={}),et=it(et),j0=EM.indexOf(et.PARSER_MEDIA_TYPE)===-1?j0=SM:j0=et.PARSER_MEDIA_TYPE,vo=j0==="application/xhtml+xml"?q:F,xe="ALLOWED_TAGS"in et?Ce({},et.ALLOWED_TAGS,vo):Ne,je="ALLOWED_ATTR"in et?Ce({},et.ALLOWED_ATTR,vo):Ve,Sv="ALLOWED_NAMESPACES"in et?Ce({},et.ALLOWED_NAMESPACES,q):wM,wv="ADD_URI_SAFE_ATTR"in et?Ce(it(RA),et.ADD_URI_SAFE_ATTR,vo):RA,CA="ADD_DATA_URI_TAGS"in et?Ce(it(PA),et.ADD_DATA_URI_TAGS,vo):PA,is="FORBID_CONTENTS"in et?Ce({},et.FORBID_CONTENTS,vo):Pi,dt="FORBID_TAGS"in et?Ce({},et.FORBID_TAGS,vo):{},bt="FORBID_ATTR"in et?Ce({},et.FORBID_ATTR,vo):{},Il="USE_PROFILES"in et?et.USE_PROFILES:!1,un=et.ALLOW_ARIA_ATTR!==!1,Xn=et.ALLOW_DATA_ATTR!==!1,kn=et.ALLOW_UNKNOWN_PROTOCOLS||!1,Bi=et.ALLOW_SELF_CLOSE_IN_ATTR!==!1,jn=et.SAFE_FOR_TEMPLATES||!1,Un=et.SAFE_FOR_XML!==!1,Or=et.WHOLE_DOCUMENT||!1,co=et.RETURN_DOM||!1,Ta=et.RETURN_DOM_FRAGMENT||!1,Ja=et.RETURN_TRUSTED_TYPE||!1,Qo=et.FORCE_BODY||!1,hs=et.SANITIZE_DOM!==!1,xa=et.SANITIZE_NAMED_PROPS||!1,Vs=et.KEEP_CONTENT!==!1,Ma=et.IN_PLACE||!1,ae=et.ALLOWED_URI_REGEXP||ae,Hd=et.NAMESPACE||Bu,Ke=et.CUSTOM_ELEMENT_HANDLING||{},et.CUSTOM_ELEMENT_HANDLING&&OA(et.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ke.tagNameCheck=et.CUSTOM_ELEMENT_HANDLING.tagNameCheck),et.CUSTOM_ELEMENT_HANDLING&&OA(et.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ke.attributeNameCheck=et.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),et.CUSTOM_ELEMENT_HANDLING&&typeof et.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ke.allowCustomizedBuiltInElements=et.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),jn&&(Xn=!1),Ta&&(co=!0),Il&&(xe=Ce({},d(fn)),je=[],Il.html===!0&&(Ce(xe,Oe),Ce(je,Ht)),Il.svg===!0&&(Ce(xe,ct),Ce(je,Re),Ce(je,mt)),Il.svgFilters===!0&&(Ce(xe,_t),Ce(je,Re),Ce(je,mt)),Il.mathMl===!0&&(Ce(xe,Je),Ce(je,Lt),Ce(je,mt))),et.ADD_TAGS&&(xe===Ne&&(xe=it(xe)),Ce(xe,et.ADD_TAGS,vo)),et.ADD_ATTR&&(je===Ve&&(je=it(je)),Ce(je,et.ADD_ATTR,vo)),et.ADD_URI_SAFE_ATTR&&Ce(wv,et.ADD_URI_SAFE_ATTR,vo),et.FORBID_CONTENTS&&(is===Pi&&(is=it(is)),Ce(is,et.FORBID_CONTENTS,vo)),Vs&&(xe["#text"]=!0),Or&&Ce(xe,["html","head","body"]),xe.table&&(Ce(xe,["tbody"]),delete dt.tbody),x&&x(et),$d=et)},IA=Ce({},["mi","mo","mn","ms","mtext"]),NA=Ce({},["foreignobject","annotation-xml"]),xM=Ce({},["title","style","font","a","script"]),Hm=Ce({},ct);Ce(Hm,_t),Ce(Hm,Nt);var xv=Ce({},Je);Ce(xv,ot);var MM=function(et){var Yt=si(et);(!Yt||!Yt.tagName)&&(Yt={namespaceURI:Hd,tagName:"template"});var mn=F(et.tagName),pr=F(Yt.tagName);return Sv[et.namespaceURI]?et.namespaceURI===jm?Yt.namespaceURI===Bu?mn==="svg":Yt.namespaceURI===Gm?mn==="svg"&&(pr==="annotation-xml"||IA[pr]):!!Hm[mn]:et.namespaceURI===Gm?Yt.namespaceURI===Bu?mn==="math":Yt.namespaceURI===jm?mn==="math"&&NA[pr]:!!xv[mn]:et.namespaceURI===Bu?Yt.namespaceURI===jm&&!NA[pr]||Yt.namespaceURI===Gm&&!IA[pr]?!1:!xv[mn]&&(xM[mn]||!Hm[mn]):!!(j0==="application/xhtml+xml"&&Sv[et.namespaceURI]):!1},ka=function(et){j(lt.removed,{element:et});try{et.parentNode.removeChild(et)}catch{try{et.outerHTML=qr}catch{et.remove()}}},$m=function(et,Yt){try{j(lt.removed,{attribute:Yt.getAttributeNode(et),from:Yt})}catch{j(lt.removed,{attribute:null,from:Yt})}if(Yt.removeAttribute(et),et==="is"&&!je[et])if(co||Ta)try{ka(Yt)}catch{}else try{Yt.setAttribute(et,"")}catch{}},LA=function(et){var Yt,mn;if(Qo)et="<remove></remove>"+et;else{var pr=fe(et,/^[\r\n\t ]+/);mn=pr&&pr[0]}j0==="application/xhtml+xml"&&Hd===Bu&&(et='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+et+"</body></html>");var Ca=gi?gi.createHTML(et):et;if(Hd===Bu)try{Yt=new st().parseFromString(Ca,j0)}catch{}if(!Yt||!Yt.documentElement){Yt=Ks.createDocument(Hd,"template",null);try{Yt.documentElement.innerHTML=Ev?qr:Ca}catch{}}var Ko=Yt.body||Yt.documentElement;return et&&mn&&Ko.insertBefore(ft.createTextNode(mn),Ko.childNodes[0]||null),Hd===Bu?Yc.call(Yt,Or?"html":"body")[0]:Or?Yt.documentElement:Ko},zA=function(et){return zu.call(et.ownerDocument||et,et,vn.SHOW_ELEMENT|vn.SHOW_COMMENT|vn.SHOW_TEXT|vn.SHOW_PROCESSING_INSTRUCTION|vn.SHOW_CDATA_SECTION,null,!1)},BA=function(et){return et instanceof li&&(typeof et.__depth<"u"&&typeof et.__depth!="number"||typeof et.__removalCount<"u"&&typeof et.__removalCount!="number"||typeof et.nodeName!="string"||typeof et.textContent!="string"||typeof et.removeChild!="function"||!(et.attributes instanceof ir)||typeof et.removeAttribute!="function"||typeof et.setAttribute!="function"||typeof et.namespaceURI!="string"||typeof et.insertBefore!="function"||typeof et.hasChildNodes!="function")},Cp=function(et){return n(dn)==="object"?et instanceof dn:et&&n(et)==="object"&&typeof et.nodeType=="number"&&typeof et.nodeName=="string"},Uu=function(et,Yt,mn){go[et]&&V(go[et],function(pr){pr.call(lt,Yt,mn,$d)})},UA=function(et){var Yt;if(Uu("beforeSanitizeElements",et,null),BA(et)||me(/[\u0080-\uFFFF]/,et.nodeName))return ka(et),!0;var mn=vo(et.nodeName);if(Uu("uponSanitizeElement",et,{tagName:mn,allowedTags:xe}),et.hasChildNodes()&&!Cp(et.firstElementChild)&&(!Cp(et.content)||!Cp(et.content.firstElementChild))&&me(/<[/\w]/g,et.innerHTML)&&me(/<[/\w]/g,et.textContent)||mn==="select"&&me(/<template/i,et.innerHTML)||et.nodeType===7||Un&&et.nodeType===8&&me(/<[/\w]/g,et.data))return ka(et),!0;if(!xe[mn]||dt[mn]){if(!dt[mn]&&VA(mn)&&(Ke.tagNameCheck instanceof RegExp&&me(Ke.tagNameCheck,mn)||Ke.tagNameCheck instanceof Function&&Ke.tagNameCheck(mn)))return!1;if(Vs&&!is[mn]){var pr=si(et)||et.parentNode,Ca=Sr(et)||et.childNodes;if(Ca&&pr)for(var Ko=Ca.length,Do=Ko-1;Do>=0;--Do){var H0=on(Ca[Do],!0);H0.__removalCount=(et.__removalCount||0)+1,pr.insertBefore(H0,_n(et))}}return ka(et),!0}return et instanceof Qt&&!MM(et)||(mn==="noscript"||mn==="noembed"||mn==="noframes")&&me(/<\/no(script|embed|frames)/i,et.innerHTML)?(ka(et),!0):(jn&&et.nodeType===3&&(Yt=et.textContent,Yt=ue(Yt,vi," "),Yt=ue(Yt,rc," "),Yt=ue(Yt,qc," "),et.textContent!==Yt&&(j(lt.removed,{element:et.cloneNode()}),et.textContent=Yt)),Uu("afterSanitizeElements",et,null),!1)},FA=function(et,Yt,mn){if(hs&&(Yt==="id"||Yt==="name")&&(mn in ft||mn in TM||mn==="__depth"||mn==="__removalCount"))return!1;if(!(Xn&&!bt[Yt]&&me(K,Yt))){if(!(un&&me($,Yt))){if(!je[Yt]||bt[Yt]){if(!(VA(et)&&(Ke.tagNameCheck instanceof RegExp&&me(Ke.tagNameCheck,et)||Ke.tagNameCheck instanceof Function&&Ke.tagNameCheck(et))&&(Ke.attributeNameCheck instanceof RegExp&&me(Ke.attributeNameCheck,Yt)||Ke.attributeNameCheck instanceof Function&&Ke.attributeNameCheck(Yt))||Yt==="is"&&Ke.allowCustomizedBuiltInElements&&(Ke.tagNameCheck instanceof RegExp&&me(Ke.tagNameCheck,mn)||Ke.tagNameCheck instanceof Function&&Ke.tagNameCheck(mn))))return!1}else if(!wv[Yt]){if(!me(ae,ue(mn,te,""))){if(!((Yt==="src"||Yt==="xlink:href"||Yt==="href")&&et!=="script"&&J(mn,"data:")===0&&CA[et])){if(!(kn&&!me(Q,ue(mn,te,"")))){if(mn)return!1}}}}}}return!0},VA=function(et){return et!=="annotation-xml"&&fe(et,ce)},GA=function(et){var Yt,mn,pr,Ca;Uu("beforeSanitizeAttributes",et,null);var Ko=et.attributes;if(Ko){var Do={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:je};for(Ca=Ko.length;Ca--;){Yt=Ko[Ca];var H0=Yt,Nl=H0.name,Pa=H0.namespaceURI;if(mn=Nl==="value"?Yt.value:le(Yt.value),pr=vo(Nl),Do.attrName=pr,Do.attrValue=mn,Do.keepAttr=!0,Do.forceKeepAttr=void 0,Uu("uponSanitizeAttribute",et,Do),mn=Do.attrValue,!Do.forceKeepAttr&&($m(Nl,et),!!Do.keepAttr)){if(!Bi&&me(/\/>/i,mn)){$m(Nl,et);continue}if(Un&&me(/((--!?|])>)|<\/(style|title)/i,mn)){$m(Nl,et);continue}jn&&(mn=ue(mn,vi," "),mn=ue(mn,rc," "),mn=ue(mn,qc," "));var jA=vo(et.nodeName);if(FA(jA,pr,mn)){if(xa&&(pr==="id"||pr==="name")&&($m(Nl,et),mn=Ro+mn),gi&&n(sn)==="object"&&typeof sn.getAttributeType=="function"&&!Pa)switch(sn.getAttributeType(jA,pr)){case"TrustedHTML":{mn=gi.createHTML(mn);break}case"TrustedScriptURL":{mn=gi.createScriptURL(mn);break}}try{Pa?et.setAttributeNS(Pa,Nl,mn):et.setAttribute(Nl,mn),BA(et)?ka(et):G(lt.removed)}catch{}}}}Uu("afterSanitizeAttributes",et,null)}},kM=function Fn(et){var Yt,mn=zA(et);for(Uu("beforeSanitizeShadowDOM",et,null);Yt=mn.nextNode();)if(Uu("uponSanitizeShadowNode",Yt,null),!UA(Yt)){var pr=si(Yt);Yt.nodeType===1&&(pr&&pr.__depth?Yt.__depth=(Yt.__removalCount||0)+pr.__depth+1:Yt.__depth=1),(Yt.__depth>=DA||ye(Yt.__depth))&&ka(Yt),Yt.content instanceof Cn&&(Yt.content.__depth=Yt.__depth,Fn(Yt.content)),GA(Yt)}Uu("afterSanitizeShadowDOM",et,null)};return lt.sanitize=function(Fn){var et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Yt,mn,pr,Ca,Ko;if(Ev=!Fn,Ev&&(Fn="<!-->"),typeof Fn!="string"&&!Cp(Fn))if(typeof Fn.toString=="function"){if(Fn=Fn.toString(),typeof Fn!="string")throw be("dirty is not a string, aborting")}else throw be("toString is not a function");if(!lt.isSupported){if(n(Qe.toStaticHTML)==="object"||typeof Qe.toStaticHTML=="function"){if(typeof Fn=="string")return Qe.toStaticHTML(Fn);if(Cp(Fn))return Qe.toStaticHTML(Fn.outerHTML)}return Fn}if(hr||Tv(et),lt.removed=[],typeof Fn=="string"&&(Ma=!1),Ma){if(Fn.nodeName){var Do=vo(Fn.nodeName);if(!xe[Do]||dt[Do])throw be("root node is forbidden and cannot be sanitized in-place")}}else if(Fn instanceof dn)Yt=LA("<!---->"),mn=Yt.ownerDocument.importNode(Fn,!0),mn.nodeType===1&&mn.nodeName==="BODY"||mn.nodeName==="HTML"?Yt=mn:Yt.appendChild(mn);else{if(!co&&!jn&&!Or&&Fn.indexOf("<")===-1)return gi&&Ja?gi.createHTML(Fn):Fn;if(Yt=LA(Fn),!Yt)return co?null:Ja?qr:""}Yt&&Qo&&ka(Yt.firstChild);for(var H0=zA(Ma?Fn:Yt);pr=H0.nextNode();)if(!(pr.nodeType===3&&pr===Ca)&&!UA(pr)){var Nl=si(pr);pr.nodeType===1&&(Nl&&Nl.__depth?pr.__depth=(pr.__removalCount||0)+Nl.__depth+1:pr.__depth=1),(pr.__depth>=DA||ye(pr.__depth))&&ka(pr),pr.content instanceof Cn&&(pr.content.__depth=pr.__depth,kM(pr.content)),GA(pr),Ca=pr}if(Ca=null,Ma)return Fn;if(co){if(Ta)for(Ko=Ff.call(Yt.ownerDocument);Yt.firstChild;)Ko.appendChild(Yt.firstChild);else Ko=Yt;return(je.shadowroot||je.shadowrootmod)&&(Ko=Vf.call(xt,Ko,!0)),Ko}var Pa=Or?Yt.outerHTML:Yt.innerHTML;return Or&&xe["!doctype"]&&Yt.ownerDocument&&Yt.ownerDocument.doctype&&Yt.ownerDocument.doctype.name&&me(tt,Yt.ownerDocument.doctype.name)&&(Pa="<!DOCTYPE "+Yt.ownerDocument.doctype.name+`>
`+Pa),jn&&(Pa=ue(Pa,vi," "),Pa=ue(Pa,rc," "),Pa=ue(Pa,qc," ")),gi&&Ja?gi.createHTML(Pa):Pa},lt.setConfig=function(Fn){Tv(Fn),hr=!0},lt.clearConfig=function(){$d=null,hr=!1},lt.isValidAttribute=function(Fn,et,Yt){$d||Tv({});var mn=vo(Fn),pr=vo(et);return FA(mn,pr,Yt)},lt.addHook=function(Fn,et){typeof et=="function"&&(go[Fn]=go[Fn]||[],j(go[Fn],et))},lt.removeHook=function(Fn){if(go[Fn])return G(go[Fn])},lt.removeHooks=function(Fn){go[Fn]&&(go[Fn]=[])},lt.removeAllHooks=function(){go={}},lt}var Et=nt();return Et})})(kge);var yWe=kge.exports,rs={};Object.defineProperty(rs,"__esModule",{value:!0});rs.ShapeDiverViewerDrawingToolsError=rs.ShapeDiverViewerInteractionError=rs.ShapeDiverViewerValidationError=rs.ShapeDiverViewerArError=rs.ShapeDiverViewerCameraError=rs.ShapeDiverViewerLightError=rs.ShapeDiverViewerViewportError=rs.ShapeDiverViewerSessionError=rs.ShapeDiverViewerSettingsError=rs.ShapeDiverViewerWebGLError=rs.ShapeDiverViewerEnvironmentMapError=rs.ShapeDiverViewerDataProcessingError=rs.ShapeDiverViewerUnknownError=void 0;const Os=B6;class _Z extends Os.ShapeDiverViewerError{constructor(e,n){super(Os.ShapeDiverViewerErrorType.UNKNOWN,"An unknown error occurred.",e),this.message=e,this.errorObject=n,Error.captureStackTrace!==void 0&&Error.captureStackTrace(this,_Z)}}rs.ShapeDiverViewerUnknownError=_Z;class bWe extends Os.ShapeDiverViewerError{constructor(e,n){super(Os.ShapeDiverViewerErrorType.DATA_PROCESSING_ERROR,"An error occurred while processing data.",e),this.message=e,this.errorObject=n}}rs.ShapeDiverViewerDataProcessingError=bWe;class AWe extends Os.ShapeDiverViewerError{constructor(e,n,i){super(Os.ShapeDiverViewerErrorType.ENVIRONMENT_MAP_ERROR,"An error occurred while loading the environment map.",e),this.message=e,this.url=n,this.errorObject=i}}rs.ShapeDiverViewerEnvironmentMapError=AWe;class wWe extends Os.ShapeDiverViewerError{constructor(e,n){super(Os.ShapeDiverViewerErrorType.WEBGL_ERROR,"An error occurred regarding to the WebGL context.",e),this.message=e,this.errorObject=n}}rs.ShapeDiverViewerWebGLError=wWe;class EWe extends Os.ShapeDiverViewerError{constructor(e,n){super(Os.ShapeDiverViewerErrorType.SETTINGS_ERROR,"An error occurred while loading the settings.",e),this.message=e,this.errorObject=n}}rs.ShapeDiverViewerSettingsError=EWe;class SWe extends Os.ShapeDiverViewerError{constructor(e,n){super(Os.ShapeDiverViewerErrorType.SESSION_ERROR,"An error occurred while working with the session.",e),this.message=e,this.errorObject=n}}rs.ShapeDiverViewerSessionError=SWe;class TWe extends Os.ShapeDiverViewerError{constructor(e,n){super(Os.ShapeDiverViewerErrorType.VIEWPORT_ERROR,"An error occurred while working with the viewport.",e),this.message=e,this.errorObject=n}}rs.ShapeDiverViewerViewportError=TWe;class xWe extends Os.ShapeDiverViewerError{constructor(e,n){super(Os.ShapeDiverViewerErrorType.LIGHT_ERROR,"An error occurred while working with the lights.",e),this.message=e,this.errorObject=n}}rs.ShapeDiverViewerLightError=xWe;class MWe extends Os.ShapeDiverViewerError{constructor(e,n){super(Os.ShapeDiverViewerErrorType.CAMERA_ERROR,"An error occurred while working with the cameras.",e),this.message=e,this.errorObject=n}}rs.ShapeDiverViewerCameraError=MWe;class kWe extends Os.ShapeDiverViewerError{constructor(e,n){super(Os.ShapeDiverViewerErrorType.AR_ERROR,"An error occurred while working with AR.",e),this.message=e,this.errorObject=n}}rs.ShapeDiverViewerArError=kWe;class CWe extends Os.ShapeDiverViewerError{constructor(e,n,i,o){super(Os.ShapeDiverViewerErrorType.VALIDATION_ERROR,"An error occurred while validating the value.",e),this.message=e,this.value=n,this.requestedType=i,this.errorObject=o}}rs.ShapeDiverViewerValidationError=CWe;class PWe extends Os.ShapeDiverViewerError{constructor(e){super(Os.ShapeDiverViewerErrorType.INTERACTION_ERROR,"An error occurred with interactions.",e),this.message=e}}rs.ShapeDiverViewerInteractionError=PWe;class RWe extends Os.ShapeDiverViewerError{constructor(e){super(Os.ShapeDiverViewerErrorType.INTERACTION_ERROR,"An error occurred with drawing tools.",e),this.message=e}}rs.ShapeDiverViewerDrawingToolsError=RWe;var F6={};Object.defineProperty(F6,"__esModule",{value:!0});F6.TypeChecker=void 0;class DWe{static get instance(){return this._instance||(this._instance=new this)}isHTMLCanvasElement(e){return e instanceof HTMLCanvasElement}isTypeOf(e,n){return typeof e===n}}F6.TypeChecker=DWe;var OWe=X&&X.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(s9,"__esModule",{value:!0});s9.InputValidator=void 0;const IWe=OWe(yWe),NWe=i9,LWe=rs,zWe=F6;class BWe{constructor(){this._logger=NWe.Logger.instance,this._typeChecker=zWe.TypeChecker.instance}static get instance(){return this._instance||(this._instance=new this)}sanitize(e){return IWe.default.sanitize(e)}validateAndError(e,n,i,o=!0,l=[]){if(!this.validate(n,i,o,l))throw new LWe.ShapeDiverViewerValidationError(`${e}: Input could not be validated. ${n} is not of type ${i}.${o===!1?" (Can also be undefined)":""}`,n,i)}validate(e,n,i=!0,o=[]){if(i===!1&&typeof e>"u")return!0;switch(n){case"array":if(Array.isArray(e))return!0;break;case"string":if(this._typeChecker.isTypeOf(e,"string"))return!0;break;case"boolean":if(this._typeChecker.isTypeOf(e,"boolean"))return!0;break;case"function":if(this._typeChecker.isTypeOf(e,"function"))return!0;break;case"number":if(this._typeChecker.isTypeOf(e,"number")&&!isNaN(e))return!0;break;case"factor":if(this._typeChecker.isTypeOf(e,"number")&&e>=0&&e<=1)return!0;break;case"positive":if(this._typeChecker.isTypeOf(e,"number")&&e>=0)return!0;break;case"HTMLCanvasElement":if(this._typeChecker.isHTMLCanvasElement(e))return!0;break;case"enum":if(this._typeChecker.isTypeOf(e,"string")&&o.includes(e))return!0;break;case"vec3":if(e.constructor===Float32Array&&(e=Array.from(e)),Array.isArray(e)&&this._typeChecker.isTypeOf(e[0],"number")&&this._typeChecker.isTypeOf(e[1],"number")&&this._typeChecker.isTypeOf(e[2],"number"))return!0;break;case"quat":if(e.constructor===Float32Array&&(e=Array.from(e)),Array.isArray(e)&&this._typeChecker.isTypeOf(e[0],"number")&&this._typeChecker.isTypeOf(e[1],"number")&&this._typeChecker.isTypeOf(e[2],"number")&&this._typeChecker.isTypeOf(e[3],"number"))return!0;break;case"cubeMap":if(Array.isArray(e)&&e.length===6&&this._typeChecker.isTypeOf(e[0],"string")&&this._typeChecker.isTypeOf(e[1],"string")&&this._typeChecker.isTypeOf(e[2],"string")&&this._typeChecker.isTypeOf(e[3],"string")&&this._typeChecker.isTypeOf(e[4],"string")&&this._typeChecker.isTypeOf(e[5],"string")||this._typeChecker.isTypeOf(e,"string"))return!0;break;case"stringArray":if(Array.isArray(e)){let l=!0;for(let d=0;d<e.length;d++)typeof e[d]!="string"&&(l=!1);if(l===!0)return!0}break;case"object":if(this._typeChecker.isTypeOf(e,"object"))return!0;break;case"file":if(this._typeChecker.isTypeOf(e,"string")||e instanceof File||e instanceof Blob)return!0;break;case"color":if(this._typeChecker.isTypeOf(e,"string")||Array.isArray(e)&&this._typeChecker.isTypeOf(e[0],"number")&&this._typeChecker.isTypeOf(e[1],"number")&&this._typeChecker.isTypeOf(e[2],"number")||this._typeChecker.isTypeOf(e,"number"))return!0;break;case"mat4":if(e.constructor===Float32Array&&(e=Array.from(e)),Array.isArray(e)&&this._typeChecker.isTypeOf(e[0],"number")&&this._typeChecker.isTypeOf(e[1],"number")&&this._typeChecker.isTypeOf(e[2],"number")&&this._typeChecker.isTypeOf(e[3],"number")&&this._typeChecker.isTypeOf(e[4],"number")&&this._typeChecker.isTypeOf(e[5],"number")&&this._typeChecker.isTypeOf(e[6],"number")&&this._typeChecker.isTypeOf(e[7],"number")&&this._typeChecker.isTypeOf(e[8],"number")&&this._typeChecker.isTypeOf(e[9],"number")&&this._typeChecker.isTypeOf(e[10],"number")&&this._typeChecker.isTypeOf(e[11],"number")&&this._typeChecker.isTypeOf(e[12],"number")&&this._typeChecker.isTypeOf(e[13],"number")&&this._typeChecker.isTypeOf(e[14],"number")&&this._typeChecker.isTypeOf(e[15],"number"))return!0;break;default:return!1}return!1}}s9.InputValidator=BWe;var ai={};Object.defineProperty(ai,"__esModule",{value:!0});ai.isViewerGeometryBackendResponseError=ai.isViewerGeometryBackendRequestError=ai.isViewerGeometryBackendGenericError=ai.isViewerGeometryBackendError=ai.isViewerDrawingToolsError=ai.isViewerInteractionError=ai.isViewerValidationError=ai.isARError=ai.isViewerCameraError=ai.isViewerLightError=ai.isViewerViewportError=ai.isViewerSessionError=ai.isViewerSettingsError=ai.isViewerWebGLError=ai.isViewerEnvironmentMapError=ai.isViewerDataProcessingError=ai.isViewerUnknownError=ai.isViewerError=void 0;const Ho=B6;function UWe(t){return t instanceof Error&&"errorType"in t&&Object.values(Ho.ShapeDiverViewerErrorType).includes(t.errorType)}ai.isViewerError=UWe;function FWe(t){return t instanceof Error&&"errorType"in t&&t.errorType===Ho.ShapeDiverViewerErrorType.UNKNOWN}ai.isViewerUnknownError=FWe;function VWe(t){return t instanceof Error&&"errorType"in t&&t.errorType===Ho.ShapeDiverViewerErrorType.DATA_PROCESSING_ERROR}ai.isViewerDataProcessingError=VWe;function GWe(t){return t instanceof Error&&"errorType"in t&&t.errorType===Ho.ShapeDiverViewerErrorType.ENVIRONMENT_MAP_ERROR}ai.isViewerEnvironmentMapError=GWe;function jWe(t){return t instanceof Error&&"errorType"in t&&t.errorType===Ho.ShapeDiverViewerErrorType.WEBGL_ERROR}ai.isViewerWebGLError=jWe;function HWe(t){return t instanceof Error&&"errorType"in t&&t.errorType===Ho.ShapeDiverViewerErrorType.SETTINGS_ERROR}ai.isViewerSettingsError=HWe;function $We(t){return t instanceof Error&&"errorType"in t&&t.errorType===Ho.ShapeDiverViewerErrorType.SESSION_ERROR}ai.isViewerSessionError=$We;function WWe(t){return t instanceof Error&&"errorType"in t&&t.errorType===Ho.ShapeDiverViewerErrorType.VIEWPORT_ERROR}ai.isViewerViewportError=WWe;function YWe(t){return t instanceof Error&&"errorType"in t&&t.errorType===Ho.ShapeDiverViewerErrorType.LIGHT_ERROR}ai.isViewerLightError=YWe;function qWe(t){return t instanceof Error&&"errorType"in t&&t.errorType===Ho.ShapeDiverViewerErrorType.CAMERA_ERROR}ai.isViewerCameraError=qWe;function XWe(t){return t instanceof Error&&"errorType"in t&&t.errorType===Ho.ShapeDiverViewerErrorType.AR_ERROR}ai.isARError=XWe;function ZWe(t){return t instanceof Error&&"errorType"in t&&t.errorType===Ho.ShapeDiverViewerErrorType.VALIDATION_ERROR}ai.isViewerValidationError=ZWe;function QWe(t){return t instanceof Error&&"errorType"in t&&t.errorType===Ho.ShapeDiverViewerErrorType.INTERACTION_ERROR}ai.isViewerInteractionError=QWe;function KWe(t){return t instanceof Error&&"errorType"in t&&t.errorType===Ho.ShapeDiverViewerErrorType.DRAWING_TOOLS_ERROR}ai.isViewerDrawingToolsError=KWe;function JWe(t){return t instanceof Error&&"errorType"in t&&t.errorType===Ho.ShapeDiverViewerErrorType.GEOMETRY_BACKEND_ERROR||t.errorType===Ho.ShapeDiverViewerErrorType.GEOMETRY_BACKEND_REQUEST_ERROR||t.errorType===Ho.ShapeDiverViewerErrorType.GEOMETRY_BACKEND_REQUEST_ERROR}ai.isViewerGeometryBackendError=JWe;function eYe(t){return t instanceof Error&&"errorType"in t&&t.errorType===Ho.ShapeDiverViewerErrorType.GEOMETRY_BACKEND_ERROR}ai.isViewerGeometryBackendGenericError=eYe;function tYe(t){return t instanceof Error&&"errorType"in t&&t.errorType===Ho.ShapeDiverViewerErrorType.GEOMETRY_BACKEND_REQUEST_ERROR}ai.isViewerGeometryBackendRequestError=tYe;function nYe(t){return t instanceof Error&&"errorType"in t&&t.errorType===Ho.ShapeDiverViewerErrorType.GEOMETRY_BACKEND_RESPONSE_ERROR}ai.isViewerGeometryBackendResponseError=nYe;var o9={};Object.defineProperty(o9,"__esModule",{value:!0});o9.PerformanceEvaluator=void 0;class rYe{static get instance(){return this._instance||(this._instance=new this)}continueSection(e){this._eval&&(this._eval.end||this._eval.section[e]&&(this._eval.section[e].end||(this._eval.section[e].continued=performance.now())))}end(){this._eval&&(this._eval.end||(this._eval.end=performance.now(),this._eval.duration=this._eval.end-this._eval.start))}endSection(e){this._eval&&(this._eval.end||this._eval.section[e]&&(this._eval.section[e].end||(this._eval.section[e].end=performance.now(),this._eval.section[e].duration=(this._eval.section[e].duration||0)+(this._eval.section[e].end-(this._eval.section[e].continued||this._eval.section[e].start)))))}getEvaluation(){return this._eval}getEvaluationToString(){return`Performance Evaluation: ${this._eval.duration}ms
`}pauseSection(e){this._eval&&(this._eval.end||this._eval.section[e]&&(this._eval.section[e].end||(this._eval.section[e].duration=(this._eval.section[e].duration||0)+performance.now()-(this._eval.section[e].continued||this._eval.section[e].start))))}start(e){this._eval={start:e||performance.now(),section:{}}}startSection(e,n){this._eval&&(this._eval.end||(this._eval.section[e]={start:n||performance.now()}))}}o9.PerformanceEvaluator=rYe;var Cge={},a9={},V6={};Object.defineProperty(V6,"__esModule",{value:!0});V6.Defaults=void 0;const iYe=()=>({build_date:"",build_version:"",settings_version:"1.0",ambientOcclusion:!0,autoRotateSpeed:0,backgroundColor:"#ffffff",bumpAmplitude:1,camera:{position:{x:0,y:0,z:0},target:{x:0,y:0,z:0}},cameraAutoAdjust:!1,cameraMovementDuration:0,cameraOrtho:{position:{x:0,y:0,z:0},target:{x:0,y:0,z:0}},cameraRevertAtMouseUp:!1,clearAlpha:1,clearColor:"#ffffff",commitParameters:!1,controlDamping:.1,controlNames:{},controlOrder:[],defaultMaterialColor:"#d3d3d3",disablePan:!1,disableZoom:!1,enableAutoRotation:!1,enableRotation:!0,environmentMap:"none",environmentMapResolution:"1024",fov:45,lightScene:"default",lightScenes:null,panSpeed:.5,parametersHidden:[],pointSize:1,revertAtMouseUpDuration:800,rotateSpeed:.25,showEnvironmentMap:!1,showGrid:!1,showGroundPlane:!1,showShadows:!0,topView:!1,zoomExtentFactor:1,zoomSpeed:1});V6.Defaults=iYe;var l9={},yi;(function(t){t.assertEqual=o=>o;function e(o){}t.assertIs=e;function n(o){throw new Error}t.assertNever=n,t.arrayToEnum=o=>{const l={};for(const d of o)l[d]=d;return l},t.getValidEnumValues=o=>{const l=t.objectKeys(o).filter(p=>typeof o[o[p]]!="number"),d={};for(const p of l)d[p]=o[p];return t.objectValues(d)},t.objectValues=o=>t.objectKeys(o).map(function(l){return o[l]}),t.objectKeys=typeof Object.keys=="function"?o=>Object.keys(o):o=>{const l=[];for(const d in o)Object.prototype.hasOwnProperty.call(o,d)&&l.push(d);return l},t.find=(o,l)=>{for(const d of o)if(l(d))return d},t.isInteger=typeof Number.isInteger=="function"?o=>Number.isInteger(o):o=>typeof o=="number"&&isFinite(o)&&Math.floor(o)===o;function i(o,l=" | "){return o.map(d=>typeof d=="string"?`'${d}'`:d).join(l)}t.joinValues=i,t.jsonStringifyReplacer=(o,l)=>typeof l=="bigint"?l.toString():l})(yi||(yi={}));var $O;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})($O||($O={}));const xn=yi.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Nh=t=>{switch(typeof t){case"undefined":return xn.undefined;case"string":return xn.string;case"number":return isNaN(t)?xn.nan:xn.number;case"boolean":return xn.boolean;case"function":return xn.function;case"bigint":return xn.bigint;case"symbol":return xn.symbol;case"object":return Array.isArray(t)?xn.array:t===null?xn.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?xn.promise:typeof Map<"u"&&t instanceof Map?xn.map:typeof Set<"u"&&t instanceof Set?xn.set:typeof Date<"u"&&t instanceof Date?xn.date:xn.object;default:return xn.unknown}},en=yi.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Pge=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Vc extends Error{constructor(e){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const n=e||function(l){return l.message},i={_errors:[]},o=l=>{for(const d of l.issues)if(d.code==="invalid_union")d.unionErrors.map(o);else if(d.code==="invalid_return_type")o(d.returnTypeError);else if(d.code==="invalid_arguments")o(d.argumentsError);else if(d.path.length===0)i._errors.push(n(d));else{let p=i,g=0;for(;g<d.path.length;){const v=d.path[g];g===d.path.length-1?(p[v]=p[v]||{_errors:[]},p[v]._errors.push(n(d))):p[v]=p[v]||{_errors:[]},p=p[v],g++}}};return o(this),i}static assert(e){if(!(e instanceof Vc))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,yi.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},i=[];for(const o of this.issues)o.path.length>0?(n[o.path[0]]=n[o.path[0]]||[],n[o.path[0]].push(e(o))):i.push(e(o));return{formErrors:i,fieldErrors:n}}get formErrors(){return this.flatten()}}Vc.create=t=>new Vc(t);const Zg=(t,e)=>{let n;switch(t.code){case en.invalid_type:t.received===xn.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case en.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,yi.jsonStringifyReplacer)}`;break;case en.unrecognized_keys:n=`Unrecognized key(s) in object: ${yi.joinValues(t.keys,", ")}`;break;case en.invalid_union:n="Invalid input";break;case en.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${yi.joinValues(t.options)}`;break;case en.invalid_enum_value:n=`Invalid enum value. Expected ${yi.joinValues(t.options)}, received '${t.received}'`;break;case en.invalid_arguments:n="Invalid function arguments";break;case en.invalid_return_type:n="Invalid function return type";break;case en.invalid_date:n="Invalid date";break;case en.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:yi.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case en.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case en.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case en.custom:n="Invalid input";break;case en.invalid_intersection_types:n="Intersection results could not be merged";break;case en.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case en.not_finite:n="Number must be finite";break;default:n=e.defaultError,yi.assertNever(t)}return{message:n}};let Rge=Zg;function Dge(t){Rge=t}function kT(){return Rge}const CT=t=>{const{data:e,path:n,errorMaps:i,issueData:o}=t,l=[...n,...o.path||[]],d={...o,path:l};if(o.message!==void 0)return{...o,path:l,message:o.message};let p="";const g=i.filter(v=>!!v).slice().reverse();for(const v of g)p=v(d,{data:e,defaultError:p}).message;return{...o,path:l,message:p}},Oge=[];function wn(t,e){const n=kT(),i=CT({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===Zg?void 0:Zg].filter(o=>!!o)});t.common.issues.push(i)}class Qa{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const i=[];for(const o of n){if(o.status==="aborted")return fr;o.status==="dirty"&&e.dirty(),i.push(o.value)}return{status:e.value,value:i}}static async mergeObjectAsync(e,n){const i=[];for(const o of n){const l=await o.key,d=await o.value;i.push({key:l,value:d})}return Qa.mergeObjectSync(e,i)}static mergeObjectSync(e,n){const i={};for(const o of n){const{key:l,value:d}=o;if(l.status==="aborted"||d.status==="aborted")return fr;l.status==="dirty"&&e.dirty(),d.status==="dirty"&&e.dirty(),l.value!=="__proto__"&&(typeof d.value<"u"||o.alwaysSet)&&(i[l.value]=d.value)}return{status:e.value,value:i}}}const fr=Object.freeze({status:"aborted"}),Tg=t=>({status:"dirty",value:t}),Pl=t=>({status:"valid",value:t}),WO=t=>t.status==="aborted",YO=t=>t.status==="dirty",Hb=t=>t.status==="valid",$b=t=>typeof Promise<"u"&&t instanceof Promise;function qO(t,e,n,i){if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function Ige(t,e,n,i,o){if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var Wn;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Wn||(Wn={}));var Mw,kw;class Cd{constructor(e,n,i,o){this._cachedPath=[],this.parent=e,this.data=n,this._path=i,this._key=o}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Ese=(t,e)=>{if(Hb(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Vc(t.common.issues);return this._error=n,this._error}}};function $r(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:i,description:o}=t;if(e&&(n||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:o}:{errorMap:(d,p)=>{var g,v;const{message:_}=t;return d.code==="invalid_enum_value"?{message:_??p.defaultError}:typeof p.data>"u"?{message:(g=_??i)!==null&&g!==void 0?g:p.defaultError}:d.code!=="invalid_type"?{message:p.defaultError}:{message:(v=_??n)!==null&&v!==void 0?v:p.defaultError}},description:o}}class Dr{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return Nh(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Nh(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Qa,ctx:{common:e.parent.common,data:e.data,parsedType:Nh(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if($b(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const i=this.safeParse(e,n);if(i.success)return i.data;throw i.error}safeParse(e,n){var i;const o={common:{issues:[],async:(i=n==null?void 0:n.async)!==null&&i!==void 0?i:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Nh(e)},l=this._parseSync({data:e,path:o.path,parent:o});return Ese(o,l)}async parseAsync(e,n){const i=await this.safeParseAsync(e,n);if(i.success)return i.data;throw i.error}async safeParseAsync(e,n){const i={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Nh(e)},o=this._parse({data:e,path:i.path,parent:i}),l=await($b(o)?o:Promise.resolve(o));return Ese(i,l)}refine(e,n){const i=o=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(o):n;return this._refinement((o,l)=>{const d=e(o),p=()=>l.addIssue({code:en.custom,...i(o)});return typeof Promise<"u"&&d instanceof Promise?d.then(g=>g?!0:(p(),!1)):d?!0:(p(),!1)})}refinement(e,n){return this._refinement((i,o)=>e(i)?!0:(o.addIssue(typeof n=="function"?n(i,o):n),!1))}_refinement(e){return new Pu({schema:this,typeName:lr.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return M0.create(this,this._def)}nullable(){return hp.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Tf.create(this,this._def)}promise(){return Kg.create(this,this._def)}or(e){return Xb.create([this,e],this._def)}and(e){return Zb.create(this,e,this._def)}transform(e){return new Pu({...$r(this._def),schema:this,typeName:lr.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new t4({...$r(this._def),innerType:this,defaultValue:n,typeName:lr.ZodDefault})}brand(){return new c9({typeName:lr.ZodBranded,type:this,...$r(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new n4({...$r(this._def),innerType:this,catchValue:n,typeName:lr.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return X4.create(this,e)}readonly(){return r4.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const sYe=/^c[^\s-]{8,}$/i,oYe=/^[0-9a-z]+$/,aYe=/^[0-9A-HJKMNP-TV-Z]{26}$/,lYe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,cYe=/^[a-z0-9_-]{21}$/i,uYe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,fYe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,dYe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let SF;const hYe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,pYe=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,mYe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Nge="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",gYe=new RegExp(`^${Nge}$`);function Lge(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function vYe(t){return new RegExp(`^${Lge(t)}$`)}function yZ(t){let e=`${Nge}T${Lge(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function _Ye(t,e){return!!((e==="v4"||!e)&&hYe.test(t)||(e==="v6"||!e)&&pYe.test(t))}class Af extends Dr{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==xn.string){const l=this._getOrReturnCtx(e);return wn(l,{code:en.invalid_type,expected:xn.string,received:l.parsedType}),fr}const i=new Qa;let o;for(const l of this._def.checks)if(l.kind==="min")e.data.length<l.value&&(o=this._getOrReturnCtx(e,o),wn(o,{code:en.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),i.dirty());else if(l.kind==="max")e.data.length>l.value&&(o=this._getOrReturnCtx(e,o),wn(o,{code:en.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),i.dirty());else if(l.kind==="length"){const d=e.data.length>l.value,p=e.data.length<l.value;(d||p)&&(o=this._getOrReturnCtx(e,o),d?wn(o,{code:en.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}):p&&wn(o,{code:en.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}),i.dirty())}else if(l.kind==="email")fYe.test(e.data)||(o=this._getOrReturnCtx(e,o),wn(o,{validation:"email",code:en.invalid_string,message:l.message}),i.dirty());else if(l.kind==="emoji")SF||(SF=new RegExp(dYe,"u")),SF.test(e.data)||(o=this._getOrReturnCtx(e,o),wn(o,{validation:"emoji",code:en.invalid_string,message:l.message}),i.dirty());else if(l.kind==="uuid")lYe.test(e.data)||(o=this._getOrReturnCtx(e,o),wn(o,{validation:"uuid",code:en.invalid_string,message:l.message}),i.dirty());else if(l.kind==="nanoid")cYe.test(e.data)||(o=this._getOrReturnCtx(e,o),wn(o,{validation:"nanoid",code:en.invalid_string,message:l.message}),i.dirty());else if(l.kind==="cuid")sYe.test(e.data)||(o=this._getOrReturnCtx(e,o),wn(o,{validation:"cuid",code:en.invalid_string,message:l.message}),i.dirty());else if(l.kind==="cuid2")oYe.test(e.data)||(o=this._getOrReturnCtx(e,o),wn(o,{validation:"cuid2",code:en.invalid_string,message:l.message}),i.dirty());else if(l.kind==="ulid")aYe.test(e.data)||(o=this._getOrReturnCtx(e,o),wn(o,{validation:"ulid",code:en.invalid_string,message:l.message}),i.dirty());else if(l.kind==="url")try{new URL(e.data)}catch{o=this._getOrReturnCtx(e,o),wn(o,{validation:"url",code:en.invalid_string,message:l.message}),i.dirty()}else l.kind==="regex"?(l.regex.lastIndex=0,l.regex.test(e.data)||(o=this._getOrReturnCtx(e,o),wn(o,{validation:"regex",code:en.invalid_string,message:l.message}),i.dirty())):l.kind==="trim"?e.data=e.data.trim():l.kind==="includes"?e.data.includes(l.value,l.position)||(o=this._getOrReturnCtx(e,o),wn(o,{code:en.invalid_string,validation:{includes:l.value,position:l.position},message:l.message}),i.dirty()):l.kind==="toLowerCase"?e.data=e.data.toLowerCase():l.kind==="toUpperCase"?e.data=e.data.toUpperCase():l.kind==="startsWith"?e.data.startsWith(l.value)||(o=this._getOrReturnCtx(e,o),wn(o,{code:en.invalid_string,validation:{startsWith:l.value},message:l.message}),i.dirty()):l.kind==="endsWith"?e.data.endsWith(l.value)||(o=this._getOrReturnCtx(e,o),wn(o,{code:en.invalid_string,validation:{endsWith:l.value},message:l.message}),i.dirty()):l.kind==="datetime"?yZ(l).test(e.data)||(o=this._getOrReturnCtx(e,o),wn(o,{code:en.invalid_string,validation:"datetime",message:l.message}),i.dirty()):l.kind==="date"?gYe.test(e.data)||(o=this._getOrReturnCtx(e,o),wn(o,{code:en.invalid_string,validation:"date",message:l.message}),i.dirty()):l.kind==="time"?vYe(l).test(e.data)||(o=this._getOrReturnCtx(e,o),wn(o,{code:en.invalid_string,validation:"time",message:l.message}),i.dirty()):l.kind==="duration"?uYe.test(e.data)||(o=this._getOrReturnCtx(e,o),wn(o,{validation:"duration",code:en.invalid_string,message:l.message}),i.dirty()):l.kind==="ip"?_Ye(e.data,l.version)||(o=this._getOrReturnCtx(e,o),wn(o,{validation:"ip",code:en.invalid_string,message:l.message}),i.dirty()):l.kind==="base64"?mYe.test(e.data)||(o=this._getOrReturnCtx(e,o),wn(o,{validation:"base64",code:en.invalid_string,message:l.message}),i.dirty()):yi.assertNever(l);return{status:i.value,value:e.data}}_regex(e,n,i){return this.refinement(o=>e.test(o),{validation:n,code:en.invalid_string,...Wn.errToObj(i)})}_addCheck(e){return new Af({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Wn.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Wn.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Wn.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Wn.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Wn.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Wn.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Wn.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Wn.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Wn.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Wn.errToObj(e)})}datetime(e){var n,i;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,local:(i=e==null?void 0:e.local)!==null&&i!==void 0?i:!1,...Wn.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Wn.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Wn.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Wn.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Wn.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Wn.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Wn.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Wn.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Wn.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Wn.errToObj(n)})}nonempty(e){return this.min(1,Wn.errToObj(e))}trim(){return new Af({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Af({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Af({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Af.create=t=>{var e;return new Af({checks:[],typeName:lr.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...$r(t)})};function yYe(t,e){const n=(t.toString().split(".")[1]||"").length,i=(e.toString().split(".")[1]||"").length,o=n>i?n:i,l=parseInt(t.toFixed(o).replace(".","")),d=parseInt(e.toFixed(o).replace(".",""));return l%d/Math.pow(10,o)}class up extends Dr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==xn.number){const l=this._getOrReturnCtx(e);return wn(l,{code:en.invalid_type,expected:xn.number,received:l.parsedType}),fr}let i;const o=new Qa;for(const l of this._def.checks)l.kind==="int"?yi.isInteger(e.data)||(i=this._getOrReturnCtx(e,i),wn(i,{code:en.invalid_type,expected:"integer",received:"float",message:l.message}),o.dirty()):l.kind==="min"?(l.inclusive?e.data<l.value:e.data<=l.value)&&(i=this._getOrReturnCtx(e,i),wn(i,{code:en.too_small,minimum:l.value,type:"number",inclusive:l.inclusive,exact:!1,message:l.message}),o.dirty()):l.kind==="max"?(l.inclusive?e.data>l.value:e.data>=l.value)&&(i=this._getOrReturnCtx(e,i),wn(i,{code:en.too_big,maximum:l.value,type:"number",inclusive:l.inclusive,exact:!1,message:l.message}),o.dirty()):l.kind==="multipleOf"?yYe(e.data,l.value)!==0&&(i=this._getOrReturnCtx(e,i),wn(i,{code:en.not_multiple_of,multipleOf:l.value,message:l.message}),o.dirty()):l.kind==="finite"?Number.isFinite(e.data)||(i=this._getOrReturnCtx(e,i),wn(i,{code:en.not_finite,message:l.message}),o.dirty()):yi.assertNever(l);return{status:o.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Wn.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Wn.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Wn.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Wn.toString(n))}setLimit(e,n,i,o){return new up({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Wn.toString(o)}]})}_addCheck(e){return new up({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Wn.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Wn.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Wn.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Wn.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Wn.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Wn.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Wn.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Wn.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Wn.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&yi.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(n===null||i.value>n)&&(n=i.value):i.kind==="max"&&(e===null||i.value<e)&&(e=i.value)}return Number.isFinite(n)&&Number.isFinite(e)}}up.create=t=>new up({checks:[],typeName:lr.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...$r(t)});class fp extends Dr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce&&(e.data=BigInt(e.data)),this._getType(e)!==xn.bigint){const l=this._getOrReturnCtx(e);return wn(l,{code:en.invalid_type,expected:xn.bigint,received:l.parsedType}),fr}let i;const o=new Qa;for(const l of this._def.checks)l.kind==="min"?(l.inclusive?e.data<l.value:e.data<=l.value)&&(i=this._getOrReturnCtx(e,i),wn(i,{code:en.too_small,type:"bigint",minimum:l.value,inclusive:l.inclusive,message:l.message}),o.dirty()):l.kind==="max"?(l.inclusive?e.data>l.value:e.data>=l.value)&&(i=this._getOrReturnCtx(e,i),wn(i,{code:en.too_big,type:"bigint",maximum:l.value,inclusive:l.inclusive,message:l.message}),o.dirty()):l.kind==="multipleOf"?e.data%l.value!==BigInt(0)&&(i=this._getOrReturnCtx(e,i),wn(i,{code:en.not_multiple_of,multipleOf:l.value,message:l.message}),o.dirty()):yi.assertNever(l);return{status:o.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Wn.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Wn.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Wn.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Wn.toString(n))}setLimit(e,n,i,o){return new fp({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:i,message:Wn.toString(o)}]})}_addCheck(e){return new fp({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Wn.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Wn.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Wn.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Wn.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Wn.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}fp.create=t=>{var e;return new fp({checks:[],typeName:lr.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...$r(t)})};class Wb extends Dr{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==xn.boolean){const i=this._getOrReturnCtx(e);return wn(i,{code:en.invalid_type,expected:xn.boolean,received:i.parsedType}),fr}return Pl(e.data)}}Wb.create=t=>new Wb({typeName:lr.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...$r(t)});class pm extends Dr{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==xn.date){const l=this._getOrReturnCtx(e);return wn(l,{code:en.invalid_type,expected:xn.date,received:l.parsedType}),fr}if(isNaN(e.data.getTime())){const l=this._getOrReturnCtx(e);return wn(l,{code:en.invalid_date}),fr}const i=new Qa;let o;for(const l of this._def.checks)l.kind==="min"?e.data.getTime()<l.value&&(o=this._getOrReturnCtx(e,o),wn(o,{code:en.too_small,message:l.message,inclusive:!0,exact:!1,minimum:l.value,type:"date"}),i.dirty()):l.kind==="max"?e.data.getTime()>l.value&&(o=this._getOrReturnCtx(e,o),wn(o,{code:en.too_big,message:l.message,inclusive:!0,exact:!1,maximum:l.value,type:"date"}),i.dirty()):yi.assertNever(l);return{status:i.value,value:new Date(e.data.getTime())}}_addCheck(e){return new pm({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Wn.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Wn.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}pm.create=t=>new pm({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:lr.ZodDate,...$r(t)});class PT extends Dr{_parse(e){if(this._getType(e)!==xn.symbol){const i=this._getOrReturnCtx(e);return wn(i,{code:en.invalid_type,expected:xn.symbol,received:i.parsedType}),fr}return Pl(e.data)}}PT.create=t=>new PT({typeName:lr.ZodSymbol,...$r(t)});class Yb extends Dr{_parse(e){if(this._getType(e)!==xn.undefined){const i=this._getOrReturnCtx(e);return wn(i,{code:en.invalid_type,expected:xn.undefined,received:i.parsedType}),fr}return Pl(e.data)}}Yb.create=t=>new Yb({typeName:lr.ZodUndefined,...$r(t)});class qb extends Dr{_parse(e){if(this._getType(e)!==xn.null){const i=this._getOrReturnCtx(e);return wn(i,{code:en.invalid_type,expected:xn.null,received:i.parsedType}),fr}return Pl(e.data)}}qb.create=t=>new qb({typeName:lr.ZodNull,...$r(t)});class Qg extends Dr{constructor(){super(...arguments),this._any=!0}_parse(e){return Pl(e.data)}}Qg.create=t=>new Qg({typeName:lr.ZodAny,...$r(t)});class J2 extends Dr{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Pl(e.data)}}J2.create=t=>new J2({typeName:lr.ZodUnknown,...$r(t)});class Pd extends Dr{_parse(e){const n=this._getOrReturnCtx(e);return wn(n,{code:en.invalid_type,expected:xn.never,received:n.parsedType}),fr}}Pd.create=t=>new Pd({typeName:lr.ZodNever,...$r(t)});class RT extends Dr{_parse(e){if(this._getType(e)!==xn.undefined){const i=this._getOrReturnCtx(e);return wn(i,{code:en.invalid_type,expected:xn.void,received:i.parsedType}),fr}return Pl(e.data)}}RT.create=t=>new RT({typeName:lr.ZodVoid,...$r(t)});class Tf extends Dr{_parse(e){const{ctx:n,status:i}=this._processInputParams(e),o=this._def;if(n.parsedType!==xn.array)return wn(n,{code:en.invalid_type,expected:xn.array,received:n.parsedType}),fr;if(o.exactLength!==null){const d=n.data.length>o.exactLength.value,p=n.data.length<o.exactLength.value;(d||p)&&(wn(n,{code:d?en.too_big:en.too_small,minimum:p?o.exactLength.value:void 0,maximum:d?o.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:o.exactLength.message}),i.dirty())}if(o.minLength!==null&&n.data.length<o.minLength.value&&(wn(n,{code:en.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,exact:!1,message:o.minLength.message}),i.dirty()),o.maxLength!==null&&n.data.length>o.maxLength.value&&(wn(n,{code:en.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,exact:!1,message:o.maxLength.message}),i.dirty()),n.common.async)return Promise.all([...n.data].map((d,p)=>o.type._parseAsync(new Cd(n,d,n.path,p)))).then(d=>Qa.mergeArray(i,d));const l=[...n.data].map((d,p)=>o.type._parseSync(new Cd(n,d,n.path,p)));return Qa.mergeArray(i,l)}get element(){return this._def.type}min(e,n){return new Tf({...this._def,minLength:{value:e,message:Wn.toString(n)}})}max(e,n){return new Tf({...this._def,maxLength:{value:e,message:Wn.toString(n)}})}length(e,n){return new Tf({...this._def,exactLength:{value:e,message:Wn.toString(n)}})}nonempty(e){return this.min(1,e)}}Tf.create=(t,e)=>new Tf({type:t,minLength:null,maxLength:null,exactLength:null,typeName:lr.ZodArray,...$r(e)});function uy(t){if(t instanceof qs){const e={};for(const n in t.shape){const i=t.shape[n];e[n]=M0.create(uy(i))}return new qs({...t._def,shape:()=>e})}else return t instanceof Tf?new Tf({...t._def,type:uy(t.element)}):t instanceof M0?M0.create(uy(t.unwrap())):t instanceof hp?hp.create(uy(t.unwrap())):t instanceof N0?N0.create(t.items.map(e=>uy(e))):t}class qs extends Dr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=yi.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==xn.object){const v=this._getOrReturnCtx(e);return wn(v,{code:en.invalid_type,expected:xn.object,received:v.parsedType}),fr}const{status:i,ctx:o}=this._processInputParams(e),{shape:l,keys:d}=this._getCached(),p=[];if(!(this._def.catchall instanceof Pd&&this._def.unknownKeys==="strip"))for(const v in o.data)d.includes(v)||p.push(v);const g=[];for(const v of d){const _=l[v],b=o.data[v];g.push({key:{status:"valid",value:v},value:_._parse(new Cd(o,b,o.path,v)),alwaysSet:v in o.data})}if(this._def.catchall instanceof Pd){const v=this._def.unknownKeys;if(v==="passthrough")for(const _ of p)g.push({key:{status:"valid",value:_},value:{status:"valid",value:o.data[_]}});else if(v==="strict")p.length>0&&(wn(o,{code:en.unrecognized_keys,keys:p}),i.dirty());else if(v!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const v=this._def.catchall;for(const _ of p){const b=o.data[_];g.push({key:{status:"valid",value:_},value:v._parse(new Cd(o,b,o.path,_)),alwaysSet:_ in o.data})}}return o.common.async?Promise.resolve().then(async()=>{const v=[];for(const _ of g){const b=await _.key,w=await _.value;v.push({key:b,value:w,alwaysSet:_.alwaysSet})}return v}).then(v=>Qa.mergeObjectSync(i,v)):Qa.mergeObjectSync(i,g)}get shape(){return this._def.shape()}strict(e){return Wn.errToObj,new qs({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,i)=>{var o,l,d,p;const g=(d=(l=(o=this._def).errorMap)===null||l===void 0?void 0:l.call(o,n,i).message)!==null&&d!==void 0?d:i.defaultError;return n.code==="unrecognized_keys"?{message:(p=Wn.errToObj(e).message)!==null&&p!==void 0?p:g}:{message:g}}}:{}})}strip(){return new qs({...this._def,unknownKeys:"strip"})}passthrough(){return new qs({...this._def,unknownKeys:"passthrough"})}extend(e){return new qs({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new qs({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:lr.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new qs({...this._def,catchall:e})}pick(e){const n={};return yi.objectKeys(e).forEach(i=>{e[i]&&this.shape[i]&&(n[i]=this.shape[i])}),new qs({...this._def,shape:()=>n})}omit(e){const n={};return yi.objectKeys(this.shape).forEach(i=>{e[i]||(n[i]=this.shape[i])}),new qs({...this._def,shape:()=>n})}deepPartial(){return uy(this)}partial(e){const n={};return yi.objectKeys(this.shape).forEach(i=>{const o=this.shape[i];e&&!e[i]?n[i]=o:n[i]=o.optional()}),new qs({...this._def,shape:()=>n})}required(e){const n={};return yi.objectKeys(this.shape).forEach(i=>{if(e&&!e[i])n[i]=this.shape[i];else{let l=this.shape[i];for(;l instanceof M0;)l=l._def.innerType;n[i]=l}}),new qs({...this._def,shape:()=>n})}keyof(){return zge(yi.objectKeys(this.shape))}}qs.create=(t,e)=>new qs({shape:()=>t,unknownKeys:"strip",catchall:Pd.create(),typeName:lr.ZodObject,...$r(e)});qs.strictCreate=(t,e)=>new qs({shape:()=>t,unknownKeys:"strict",catchall:Pd.create(),typeName:lr.ZodObject,...$r(e)});qs.lazycreate=(t,e)=>new qs({shape:t,unknownKeys:"strip",catchall:Pd.create(),typeName:lr.ZodObject,...$r(e)});class Xb extends Dr{_parse(e){const{ctx:n}=this._processInputParams(e),i=this._def.options;function o(l){for(const p of l)if(p.result.status==="valid")return p.result;for(const p of l)if(p.result.status==="dirty")return n.common.issues.push(...p.ctx.common.issues),p.result;const d=l.map(p=>new Vc(p.ctx.common.issues));return wn(n,{code:en.invalid_union,unionErrors:d}),fr}if(n.common.async)return Promise.all(i.map(async l=>{const d={...n,common:{...n.common,issues:[]},parent:null};return{result:await l._parseAsync({data:n.data,path:n.path,parent:d}),ctx:d}})).then(o);{let l;const d=[];for(const g of i){const v={...n,common:{...n.common,issues:[]},parent:null},_=g._parseSync({data:n.data,path:n.path,parent:v});if(_.status==="valid")return _;_.status==="dirty"&&!l&&(l={result:_,ctx:v}),v.common.issues.length&&d.push(v.common.issues)}if(l)return n.common.issues.push(...l.ctx.common.issues),l.result;const p=d.map(g=>new Vc(g));return wn(n,{code:en.invalid_union,unionErrors:p}),fr}}get options(){return this._def.options}}Xb.create=(t,e)=>new Xb({options:t,typeName:lr.ZodUnion,...$r(e)});const Sh=t=>t instanceof Kb?Sh(t.schema):t instanceof Pu?Sh(t.innerType()):t instanceof Jb?[t.value]:t instanceof dp?t.options:t instanceof e4?yi.objectValues(t.enum):t instanceof t4?Sh(t._def.innerType):t instanceof Yb?[void 0]:t instanceof qb?[null]:t instanceof M0?[void 0,...Sh(t.unwrap())]:t instanceof hp?[null,...Sh(t.unwrap())]:t instanceof c9||t instanceof r4?Sh(t.unwrap()):t instanceof n4?Sh(t._def.innerType):[];class G6 extends Dr{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==xn.object)return wn(n,{code:en.invalid_type,expected:xn.object,received:n.parsedType}),fr;const i=this.discriminator,o=n.data[i],l=this.optionsMap.get(o);return l?n.common.async?l._parseAsync({data:n.data,path:n.path,parent:n}):l._parseSync({data:n.data,path:n.path,parent:n}):(wn(n,{code:en.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[i]}),fr)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,i){const o=new Map;for(const l of n){const d=Sh(l.shape[e]);if(!d.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const p of d){if(o.has(p))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(p)}`);o.set(p,l)}}return new G6({typeName:lr.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:o,...$r(i)})}}function qH(t,e){const n=Nh(t),i=Nh(e);if(t===e)return{valid:!0,data:t};if(n===xn.object&&i===xn.object){const o=yi.objectKeys(e),l=yi.objectKeys(t).filter(p=>o.indexOf(p)!==-1),d={...t,...e};for(const p of l){const g=qH(t[p],e[p]);if(!g.valid)return{valid:!1};d[p]=g.data}return{valid:!0,data:d}}else if(n===xn.array&&i===xn.array){if(t.length!==e.length)return{valid:!1};const o=[];for(let l=0;l<t.length;l++){const d=t[l],p=e[l],g=qH(d,p);if(!g.valid)return{valid:!1};o.push(g.data)}return{valid:!0,data:o}}else return n===xn.date&&i===xn.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Zb extends Dr{_parse(e){const{status:n,ctx:i}=this._processInputParams(e),o=(l,d)=>{if(WO(l)||WO(d))return fr;const p=qH(l.value,d.value);return p.valid?((YO(l)||YO(d))&&n.dirty(),{status:n.value,value:p.data}):(wn(i,{code:en.invalid_intersection_types}),fr)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([l,d])=>o(l,d)):o(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}Zb.create=(t,e,n)=>new Zb({left:t,right:e,typeName:lr.ZodIntersection,...$r(n)});class N0 extends Dr{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==xn.array)return wn(i,{code:en.invalid_type,expected:xn.array,received:i.parsedType}),fr;if(i.data.length<this._def.items.length)return wn(i,{code:en.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),fr;!this._def.rest&&i.data.length>this._def.items.length&&(wn(i,{code:en.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const l=[...i.data].map((d,p)=>{const g=this._def.items[p]||this._def.rest;return g?g._parse(new Cd(i,d,i.path,p)):null}).filter(d=>!!d);return i.common.async?Promise.all(l).then(d=>Qa.mergeArray(n,d)):Qa.mergeArray(n,l)}get items(){return this._def.items}rest(e){return new N0({...this._def,rest:e})}}N0.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new N0({items:t,typeName:lr.ZodTuple,rest:null,...$r(e)})};class Qb extends Dr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==xn.object)return wn(i,{code:en.invalid_type,expected:xn.object,received:i.parsedType}),fr;const o=[],l=this._def.keyType,d=this._def.valueType;for(const p in i.data)o.push({key:l._parse(new Cd(i,p,i.path,p)),value:d._parse(new Cd(i,i.data[p],i.path,p)),alwaysSet:p in i.data});return i.common.async?Qa.mergeObjectAsync(n,o):Qa.mergeObjectSync(n,o)}get element(){return this._def.valueType}static create(e,n,i){return n instanceof Dr?new Qb({keyType:e,valueType:n,typeName:lr.ZodRecord,...$r(i)}):new Qb({keyType:Af.create(),valueType:e,typeName:lr.ZodRecord,...$r(n)})}}class DT extends Dr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==xn.map)return wn(i,{code:en.invalid_type,expected:xn.map,received:i.parsedType}),fr;const o=this._def.keyType,l=this._def.valueType,d=[...i.data.entries()].map(([p,g],v)=>({key:o._parse(new Cd(i,p,i.path,[v,"key"])),value:l._parse(new Cd(i,g,i.path,[v,"value"]))}));if(i.common.async){const p=new Map;return Promise.resolve().then(async()=>{for(const g of d){const v=await g.key,_=await g.value;if(v.status==="aborted"||_.status==="aborted")return fr;(v.status==="dirty"||_.status==="dirty")&&n.dirty(),p.set(v.value,_.value)}return{status:n.value,value:p}})}else{const p=new Map;for(const g of d){const v=g.key,_=g.value;if(v.status==="aborted"||_.status==="aborted")return fr;(v.status==="dirty"||_.status==="dirty")&&n.dirty(),p.set(v.value,_.value)}return{status:n.value,value:p}}}}DT.create=(t,e,n)=>new DT({valueType:e,keyType:t,typeName:lr.ZodMap,...$r(n)});class mm extends Dr{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.parsedType!==xn.set)return wn(i,{code:en.invalid_type,expected:xn.set,received:i.parsedType}),fr;const o=this._def;o.minSize!==null&&i.data.size<o.minSize.value&&(wn(i,{code:en.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,exact:!1,message:o.minSize.message}),n.dirty()),o.maxSize!==null&&i.data.size>o.maxSize.value&&(wn(i,{code:en.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,exact:!1,message:o.maxSize.message}),n.dirty());const l=this._def.valueType;function d(g){const v=new Set;for(const _ of g){if(_.status==="aborted")return fr;_.status==="dirty"&&n.dirty(),v.add(_.value)}return{status:n.value,value:v}}const p=[...i.data.values()].map((g,v)=>l._parse(new Cd(i,g,i.path,v)));return i.common.async?Promise.all(p).then(g=>d(g)):d(p)}min(e,n){return new mm({...this._def,minSize:{value:e,message:Wn.toString(n)}})}max(e,n){return new mm({...this._def,maxSize:{value:e,message:Wn.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}mm.create=(t,e)=>new mm({valueType:t,minSize:null,maxSize:null,typeName:lr.ZodSet,...$r(e)});class zg extends Dr{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==xn.function)return wn(n,{code:en.invalid_type,expected:xn.function,received:n.parsedType}),fr;function i(p,g){return CT({data:p,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,kT(),Zg].filter(v=>!!v),issueData:{code:en.invalid_arguments,argumentsError:g}})}function o(p,g){return CT({data:p,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,kT(),Zg].filter(v=>!!v),issueData:{code:en.invalid_return_type,returnTypeError:g}})}const l={errorMap:n.common.contextualErrorMap},d=n.data;if(this._def.returns instanceof Kg){const p=this;return Pl(async function(...g){const v=new Vc([]),_=await p._def.args.parseAsync(g,l).catch(E=>{throw v.addIssue(i(g,E)),v}),b=await Reflect.apply(d,this,_);return await p._def.returns._def.type.parseAsync(b,l).catch(E=>{throw v.addIssue(o(b,E)),v})})}else{const p=this;return Pl(function(...g){const v=p._def.args.safeParse(g,l);if(!v.success)throw new Vc([i(g,v.error)]);const _=Reflect.apply(d,this,v.data),b=p._def.returns.safeParse(_,l);if(!b.success)throw new Vc([o(_,b.error)]);return b.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new zg({...this._def,args:N0.create(e).rest(J2.create())})}returns(e){return new zg({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,i){return new zg({args:e||N0.create([]).rest(J2.create()),returns:n||J2.create(),typeName:lr.ZodFunction,...$r(i)})}}class Kb extends Dr{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Kb.create=(t,e)=>new Kb({getter:t,typeName:lr.ZodLazy,...$r(e)});class Jb extends Dr{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return wn(n,{received:n.data,code:en.invalid_literal,expected:this._def.value}),fr}return{status:"valid",value:e.data}}get value(){return this._def.value}}Jb.create=(t,e)=>new Jb({value:t,typeName:lr.ZodLiteral,...$r(e)});function zge(t,e){return new dp({values:t,typeName:lr.ZodEnum,...$r(e)})}class dp extends Dr{constructor(){super(...arguments),Mw.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),i=this._def.values;return wn(n,{expected:yi.joinValues(i),received:n.parsedType,code:en.invalid_type}),fr}if(qO(this,Mw)||Ige(this,Mw,new Set(this._def.values)),!qO(this,Mw).has(e.data)){const n=this._getOrReturnCtx(e),i=this._def.values;return wn(n,{received:n.data,code:en.invalid_enum_value,options:i}),fr}return Pl(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return dp.create(e,{...this._def,...n})}exclude(e,n=this._def){return dp.create(this.options.filter(i=>!e.includes(i)),{...this._def,...n})}}Mw=new WeakMap;dp.create=zge;class e4 extends Dr{constructor(){super(...arguments),kw.set(this,void 0)}_parse(e){const n=yi.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(e);if(i.parsedType!==xn.string&&i.parsedType!==xn.number){const o=yi.objectValues(n);return wn(i,{expected:yi.joinValues(o),received:i.parsedType,code:en.invalid_type}),fr}if(qO(this,kw)||Ige(this,kw,new Set(yi.getValidEnumValues(this._def.values))),!qO(this,kw).has(e.data)){const o=yi.objectValues(n);return wn(i,{received:i.data,code:en.invalid_enum_value,options:o}),fr}return Pl(e.data)}get enum(){return this._def.values}}kw=new WeakMap;e4.create=(t,e)=>new e4({values:t,typeName:lr.ZodNativeEnum,...$r(e)});class Kg extends Dr{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==xn.promise&&n.common.async===!1)return wn(n,{code:en.invalid_type,expected:xn.promise,received:n.parsedType}),fr;const i=n.parsedType===xn.promise?n.data:Promise.resolve(n.data);return Pl(i.then(o=>this._def.type.parseAsync(o,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Kg.create=(t,e)=>new Kg({type:t,typeName:lr.ZodPromise,...$r(e)});class Pu extends Dr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===lr.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:i}=this._processInputParams(e),o=this._def.effect||null,l={addIssue:d=>{wn(i,d),d.fatal?n.abort():n.dirty()},get path(){return i.path}};if(l.addIssue=l.addIssue.bind(l),o.type==="preprocess"){const d=o.transform(i.data,l);if(i.common.async)return Promise.resolve(d).then(async p=>{if(n.value==="aborted")return fr;const g=await this._def.schema._parseAsync({data:p,path:i.path,parent:i});return g.status==="aborted"?fr:g.status==="dirty"||n.value==="dirty"?Tg(g.value):g});{if(n.value==="aborted")return fr;const p=this._def.schema._parseSync({data:d,path:i.path,parent:i});return p.status==="aborted"?fr:p.status==="dirty"||n.value==="dirty"?Tg(p.value):p}}if(o.type==="refinement"){const d=p=>{const g=o.refinement(p,l);if(i.common.async)return Promise.resolve(g);if(g instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return p};if(i.common.async===!1){const p=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return p.status==="aborted"?fr:(p.status==="dirty"&&n.dirty(),d(p.value),{status:n.value,value:p.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(p=>p.status==="aborted"?fr:(p.status==="dirty"&&n.dirty(),d(p.value).then(()=>({status:n.value,value:p.value}))))}if(o.type==="transform")if(i.common.async===!1){const d=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!Hb(d))return d;const p=o.transform(d.value,l);if(p instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:p}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(d=>Hb(d)?Promise.resolve(o.transform(d.value,l)).then(p=>({status:n.value,value:p})):d);yi.assertNever(o)}}Pu.create=(t,e,n)=>new Pu({schema:t,typeName:lr.ZodEffects,effect:e,...$r(n)});Pu.createWithPreprocess=(t,e,n)=>new Pu({schema:e,effect:{type:"preprocess",transform:t},typeName:lr.ZodEffects,...$r(n)});class M0 extends Dr{_parse(e){return this._getType(e)===xn.undefined?Pl(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}M0.create=(t,e)=>new M0({innerType:t,typeName:lr.ZodOptional,...$r(e)});class hp extends Dr{_parse(e){return this._getType(e)===xn.null?Pl(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}hp.create=(t,e)=>new hp({innerType:t,typeName:lr.ZodNullable,...$r(e)});class t4 extends Dr{_parse(e){const{ctx:n}=this._processInputParams(e);let i=n.data;return n.parsedType===xn.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}t4.create=(t,e)=>new t4({innerType:t,typeName:lr.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...$r(e)});class n4 extends Dr{_parse(e){const{ctx:n}=this._processInputParams(e),i={...n,common:{...n.common,issues:[]}},o=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return $b(o)?o.then(l=>({status:"valid",value:l.status==="valid"?l.value:this._def.catchValue({get error(){return new Vc(i.common.issues)},input:i.data})})):{status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Vc(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}n4.create=(t,e)=>new n4({innerType:t,typeName:lr.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...$r(e)});class OT extends Dr{_parse(e){if(this._getType(e)!==xn.nan){const i=this._getOrReturnCtx(e);return wn(i,{code:en.invalid_type,expected:xn.nan,received:i.parsedType}),fr}return{status:"valid",value:e.data}}}OT.create=t=>new OT({typeName:lr.ZodNaN,...$r(t)});const Bge=Symbol("zod_brand");class c9 extends Dr{_parse(e){const{ctx:n}=this._processInputParams(e),i=n.data;return this._def.type._parse({data:i,path:n.path,parent:n})}unwrap(){return this._def.type}}class X4 extends Dr{_parse(e){const{status:n,ctx:i}=this._processInputParams(e);if(i.common.async)return(async()=>{const l=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return l.status==="aborted"?fr:l.status==="dirty"?(n.dirty(),Tg(l.value)):this._def.out._parseAsync({data:l.value,path:i.path,parent:i})})();{const o=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return o.status==="aborted"?fr:o.status==="dirty"?(n.dirty(),{status:"dirty",value:o.value}):this._def.out._parseSync({data:o.value,path:i.path,parent:i})}}static create(e,n){return new X4({in:e,out:n,typeName:lr.ZodPipeline})}}class r4 extends Dr{_parse(e){const n=this._def.innerType._parse(e),i=o=>(Hb(o)&&(o.value=Object.freeze(o.value)),o);return $b(n)?n.then(o=>i(o)):i(n)}unwrap(){return this._def.innerType}}r4.create=(t,e)=>new r4({innerType:t,typeName:lr.ZodReadonly,...$r(e)});function bZ(t,e={},n){return t?Qg.create().superRefine((i,o)=>{var l,d;if(!t(i)){const p=typeof e=="function"?e(i):typeof e=="string"?{message:e}:e,g=(d=(l=p.fatal)!==null&&l!==void 0?l:n)!==null&&d!==void 0?d:!0,v=typeof p=="string"?{message:p}:p;o.addIssue({code:"custom",...v,fatal:g})}}):Qg.create()}const Uge={object:qs.lazycreate};var lr;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(lr||(lr={}));const Fge=(t,e={message:`Input not instance of ${t.name}`})=>bZ(n=>n instanceof t,e),AZ=Af.create,wZ=up.create,Vge=OT.create,Gge=fp.create,EZ=Wb.create,jge=pm.create,Hge=PT.create,$ge=Yb.create,Wge=qb.create,Yge=Qg.create,qge=J2.create,Xge=Pd.create,Zge=RT.create,Qge=Tf.create,Kge=qs.create,Jge=qs.strictCreate,eve=Xb.create,tve=G6.create,nve=Zb.create,rve=N0.create,ive=Qb.create,sve=DT.create,ove=mm.create,ave=zg.create,lve=Kb.create,cve=Jb.create,uve=dp.create,fve=e4.create,dve=Kg.create,XO=Pu.create,hve=M0.create,pve=hp.create,mve=Pu.createWithPreprocess,gve=X4.create,vve=()=>AZ().optional(),_ve=()=>wZ().optional(),yve=()=>EZ().optional(),bve={string:t=>Af.create({...t,coerce:!0}),number:t=>up.create({...t,coerce:!0}),boolean:t=>Wb.create({...t,coerce:!0}),bigint:t=>fp.create({...t,coerce:!0}),date:t=>pm.create({...t,coerce:!0})},Ave=fr;var Jt=Object.freeze({__proto__:null,defaultErrorMap:Zg,setErrorMap:Dge,getErrorMap:kT,makeIssue:CT,EMPTY_PATH:Oge,addIssueToContext:wn,ParseStatus:Qa,INVALID:fr,DIRTY:Tg,OK:Pl,isAborted:WO,isDirty:YO,isValid:Hb,isAsync:$b,get util(){return yi},get objectUtil(){return $O},ZodParsedType:xn,getParsedType:Nh,ZodType:Dr,datetimeRegex:yZ,ZodString:Af,ZodNumber:up,ZodBigInt:fp,ZodBoolean:Wb,ZodDate:pm,ZodSymbol:PT,ZodUndefined:Yb,ZodNull:qb,ZodAny:Qg,ZodUnknown:J2,ZodNever:Pd,ZodVoid:RT,ZodArray:Tf,ZodObject:qs,ZodUnion:Xb,ZodDiscriminatedUnion:G6,ZodIntersection:Zb,ZodTuple:N0,ZodRecord:Qb,ZodMap:DT,ZodSet:mm,ZodFunction:zg,ZodLazy:Kb,ZodLiteral:Jb,ZodEnum:dp,ZodNativeEnum:e4,ZodPromise:Kg,ZodEffects:Pu,ZodTransformer:Pu,ZodOptional:M0,ZodNullable:hp,ZodDefault:t4,ZodCatch:n4,ZodNaN:OT,BRAND:Bge,ZodBranded:c9,ZodPipeline:X4,ZodReadonly:r4,custom:bZ,Schema:Dr,ZodSchema:Dr,late:Uge,get ZodFirstPartyTypeKind(){return lr},coerce:bve,any:Yge,array:Qge,bigint:Gge,boolean:EZ,date:jge,discriminatedUnion:tve,effect:XO,enum:uve,function:ave,instanceof:Fge,intersection:nve,lazy:lve,literal:cve,map:sve,nan:Vge,nativeEnum:fve,never:Xge,null:Wge,nullable:pve,number:wZ,object:Kge,oboolean:yve,onumber:_ve,optional:hve,ostring:vve,pipeline:gve,preprocess:mve,promise:dve,record:ive,set:ove,strictObject:Jge,string:AZ,symbol:Hge,transformer:XO,tuple:rve,undefined:$ge,union:eve,unknown:qge,void:Zge,NEVER:Ave,ZodIssueCode:en,quotelessJson:Pge,ZodError:Vc});const bYe=Object.freeze(Object.defineProperty({__proto__:null,BRAND:Bge,DIRTY:Tg,EMPTY_PATH:Oge,INVALID:fr,NEVER:Ave,OK:Pl,ParseStatus:Qa,Schema:Dr,ZodAny:Qg,ZodArray:Tf,ZodBigInt:fp,ZodBoolean:Wb,ZodBranded:c9,ZodCatch:n4,ZodDate:pm,ZodDefault:t4,ZodDiscriminatedUnion:G6,ZodEffects:Pu,ZodEnum:dp,ZodError:Vc,get ZodFirstPartyTypeKind(){return lr},ZodFunction:zg,ZodIntersection:Zb,ZodIssueCode:en,ZodLazy:Kb,ZodLiteral:Jb,ZodMap:DT,ZodNaN:OT,ZodNativeEnum:e4,ZodNever:Pd,ZodNull:qb,ZodNullable:hp,ZodNumber:up,ZodObject:qs,ZodOptional:M0,ZodParsedType:xn,ZodPipeline:X4,ZodPromise:Kg,ZodReadonly:r4,ZodRecord:Qb,ZodSchema:Dr,ZodSet:mm,ZodString:Af,ZodSymbol:PT,ZodTransformer:Pu,ZodTuple:N0,ZodType:Dr,ZodUndefined:Yb,ZodUnion:Xb,ZodUnknown:J2,ZodVoid:RT,addIssueToContext:wn,any:Yge,array:Qge,bigint:Gge,boolean:EZ,coerce:bve,custom:bZ,date:jge,datetimeRegex:yZ,default:Jt,defaultErrorMap:Zg,discriminatedUnion:tve,effect:XO,enum:uve,function:ave,getErrorMap:kT,getParsedType:Nh,instanceof:Fge,intersection:nve,isAborted:WO,isAsync:$b,isDirty:YO,isValid:Hb,late:Uge,lazy:lve,literal:cve,makeIssue:CT,map:sve,nan:Vge,nativeEnum:fve,never:Xge,null:Wge,nullable:pve,number:wZ,object:Kge,get objectUtil(){return $O},oboolean:yve,onumber:_ve,optional:hve,ostring:vve,pipeline:gve,preprocess:mve,promise:dve,quotelessJson:Pge,record:ive,set:ove,setErrorMap:Dge,strictObject:Jge,string:AZ,symbol:Hge,transformer:XO,tuple:rve,undefined:$ge,union:eve,unknown:qge,get util(){return yi},void:Zge,z:Jt},Symbol.toStringTag,{value:"Module"})),Sp=ym(bYe);Object.defineProperty(l9,"__esModule",{value:!0});l9.validate=void 0;const qt=Sp,AYe=qt.z.object({id:qt.z.string().optional(),name:qt.z.string().optional(),type:qt.z.string().optional(),properties:qt.z.object({color:qt.z.union([qt.z.number(),qt.z.string()]).optional(),direction:qt.z.object({x:qt.z.number(),y:qt.z.number(),z:qt.z.number()}).optional(),position:qt.z.object({x:qt.z.number(),y:qt.z.number(),z:qt.z.number()}).optional(),target:qt.z.object({x:qt.z.number(),y:qt.z.number(),z:qt.z.number()}).optional(),castShadow:qt.z.boolean().optional(),skyColor:qt.z.union([qt.z.number(),qt.z.string()]).optional(),groundColor:qt.z.union([qt.z.number(),qt.z.string()]).optional(),intensity:qt.z.number().optional(),distance:qt.z.number().optional(),angle:qt.z.number().optional(),penumbra:qt.z.number().optional(),decay:qt.z.number().optional(),shadowMapResolution:qt.z.number().optional(),shadowMapBias:qt.z.number().optional()})}).optional(),wYe=qt.z.record(AYe),EYe=qt.z.record(qt.z.object({id:qt.z.string(),name:qt.z.string().optional(),lights:wYe})),SYe=qt.z.object({build_date:qt.z.string().optional(),build_version:qt.z.string().optional(),settings_version:qt.z.string().optional(),ambientOcclusion:qt.z.boolean().optional(),autoRotateSpeed:qt.z.number().optional(),backgroundColor:qt.z.string().optional(),bumpAmplitude:qt.z.number().optional(),camera:qt.z.object({position:qt.z.object({x:qt.z.number().optional(),y:qt.z.number().optional(),z:qt.z.number().optional()}).optional(),target:qt.z.object({x:qt.z.number().optional(),y:qt.z.number().optional(),z:qt.z.number().optional()}).optional()}).optional(),cameraAutoAdjust:qt.z.boolean().optional(),cameraMovementDuration:qt.z.number().optional(),cameraOrtho:qt.z.object({position:qt.z.object({x:qt.z.number().optional(),y:qt.z.number().optional(),z:qt.z.number().optional()}).optional(),target:qt.z.object({x:qt.z.number().optional(),y:qt.z.number().optional(),z:qt.z.number().optional()}).optional()}).optional(),cameraRevertAtMouseUp:qt.z.boolean().optional(),clearAlpha:qt.z.number().optional(),clearColor:qt.z.string().optional(),commitParameters:qt.z.boolean().optional(),controlDamping:qt.z.number().optional(),controlNames:qt.z.record(qt.z.string()).optional(),controlOrder:qt.z.string().array().optional(),defaultMaterialColor:qt.z.union([qt.z.string(),qt.z.number().array().optional()]),disablePan:qt.z.boolean().optional(),disableZoom:qt.z.boolean().optional(),enableAutoRotation:qt.z.boolean().optional(),enableRotation:qt.z.boolean().optional(),environmentMap:qt.z.union([qt.z.string(),qt.z.string().array().optional()]),environmentMapResolution:qt.z.string().optional(),fov:qt.z.number().positive().optional(),lightScene:qt.z.string().optional(),lightScenes:EYe.nullable().optional(),panSpeed:qt.z.number().optional(),parametersHidden:qt.z.string().array().optional(),pointSize:qt.z.number().optional(),revertAtMouseUpDuration:qt.z.number().optional(),rotateSpeed:qt.z.number().optional(),showEnvironmentMap:qt.z.boolean().optional(),showGrid:qt.z.boolean().optional(),showGroundPlane:qt.z.boolean().optional(),showShadows:qt.z.boolean().optional(),topView:qt.z.boolean().optional(),zoomExtentFactor:qt.z.number().optional(),zoomSpeed:qt.z.number().optional()}).passthrough(),TYe=t=>{t=SYe.parse(t)};l9.validate=TYe;var Z4={};Object.defineProperty(Z4,"__esModule",{value:!0});Z4.Defaults=void 0;const xYe=()=>({build_date:"",build_version:"",settings_version:"2.0",ar:{enableCameraSync:!1,enableCameraSyncInitial:!1,enableLightingEstimation:!0,enableTouchControls:!0,enableTouchControlRotation:!0,enableAutomaticPlacement:!0,defaultHitTestType:"existingPlaneUsingGeometry"},defaultMaterial:{bumpAmplitude:1,color:"#d3d3d3",metalness:0,roughness:1},parameters:{controlOrder:[],controlNames:{},parametersHidden:[]},viewer:{blurSceneWhenBusy:!0,ignoreSuperseded:!0,loggingLevel:-1,messageLoggingLevel:-1,showMessages:!0,hasRestoredSettings:!1,useModelSettings:!1,commitParameters:!1,commitSettings:!1,viewerRuntimeId:"",scene:{show:!1,showSceneTransition:"1s",camera:{autoAdjust:!1,cameraMovementDuration:800,cameraTypes:{perspective:{default:{position:{x:0,y:0,z:0},target:{x:0,y:0,z:0}},fov:45,controls:0},orthographic:{default:{position:{x:0,y:0,z:0},target:{x:0,y:0,z:0}}},active:0},controls:{orbit:{autoRotationSpeed:0,damping:.1,enableAutoRotation:!1,enableKeyPan:!1,enablePan:!0,enableRotation:!0,enableZoom:!0,input:{keys:{up:38,down:40,left:37,right:39},mouse:{rotate:0,zoom:1,pan:2},touch:{rotate:1,zoom:2,pan:3}},keyPanSpeed:.5,movementSmoothness:.5,restrictions:{position:{cube:{min:{x:-1/0,y:-1/0,z:-1/0},max:{x:1/0,y:1/0,z:1/0}},sphere:{center:{x:0,y:0,z:0},radius:1/0}},target:{cube:{min:{x:-1/0,y:-1/0,z:-1/0},max:{x:1/0,y:1/0,z:1/0}},sphere:{center:{x:0,y:0,z:0},radius:1/0}},rotation:{minPolarAngle:0,maxPolarAngle:180,minAzimuthAngle:-1/0,maxAzimuthAngle:1/0},zoom:{minDistance:0,maxDistance:1/0}},rotationSpeed:.5,panSpeed:.5,zoomSpeed:.5},fps:{},orthographic:{damping:.1,enableKeyPan:!1,enablePan:!0,enableZoom:!0,input:{keys:{up:38,down:40,left:37,right:39},mouse:{rotate:0,zoom:1,pan:2},touch:{rotate:1,zoom:2,pan:3}},keyPanSpeed:.5,movementSmoothness:.5,panSpeed:.5,zoomSpeed:.5}},enableCameraControls:!0,revertAtMouseUp:!1,revertAtMouseUpDuration:800,zoomExtentsFactor:1},duration:0,fullscreen:!1,gridVisibility:!0,groundPlaneReflectionThreshold:.01,groundPlaneReflectionVisibility:!1,groundPlaneVisibility:!0,lights:{helper:!1,lightScene:"default",lightScenes:{}},material:{environmentMap:"none",environmentMapAsBackground:!1,environmentMapResolution:"1024"},render:{ambientOcclusion:!0,beautyRenderDelay:50,beautyRenderBlendingDuration:1500,clearColor:"#ffffff",clearAlpha:1,pointSize:1,shadows:!0,sao:{samples:8,intensity:.1,kernelRadius:8,standardDev:25}}}}});Z4.Defaults=xYe;var u9={};Object.defineProperty(u9,"__esModule",{value:!0});u9.validate=void 0;const qe=Sp,MYe=qe.z.object({id:qe.z.string(),name:qe.z.string().optional(),type:qe.z.string(),order:qe.z.number().optional(),properties:qe.z.object({color:qe.z.union([qe.z.number(),qe.z.string()]).optional(),direction:qe.z.object({x:qe.z.number(),y:qe.z.number(),z:qe.z.number()}).optional(),position:qe.z.object({x:qe.z.number(),y:qe.z.number(),z:qe.z.number()}).optional(),target:qe.z.object({x:qe.z.number(),y:qe.z.number(),z:qe.z.number()}).optional(),castShadow:qe.z.boolean().optional(),skyColor:qe.z.union([qe.z.number(),qe.z.string()]).optional(),groundColor:qe.z.union([qe.z.number(),qe.z.string()]).optional(),intensity:qe.z.number().optional(),distance:qe.z.number().optional(),angle:qe.z.number().optional(),penumbra:qe.z.number().optional(),decay:qe.z.number().optional(),shadowMapResolution:qe.z.number().optional(),shadowMapBias:qe.z.number().optional()})}),kYe=qe.z.record(qe.z.object({id:qe.z.string(),name:qe.z.string().optional(),lights:qe.z.record(MYe)})),CYe=qe.z.object({build_date:qe.z.string().optional(),build_version:qe.z.string().optional(),settings_version:qe.z.string(),ar:qe.z.object({enableCameraSync:qe.z.boolean().optional(),enableCameraSyncInitial:qe.z.boolean().optional(),enableLightingEstimation:qe.z.boolean().optional(),enableTouchControls:qe.z.boolean().optional(),enableTouchControlRotation:qe.z.boolean().optional(),enableAutomaticPlacement:qe.z.boolean().optional(),defaultHitTestType:qe.z.string().optional()}).optional(),defaultMaterial:qe.z.object({bumpAmplitude:qe.z.number().optional(),color:qe.z.union([qe.z.string(),qe.z.number().array()]).optional(),metalness:qe.z.number().optional(),roughness:qe.z.number().optional()}),parameters:qe.z.object({controlOrder:qe.z.string().array().optional(),controlNames:qe.z.record(qe.z.string()).optional(),parametersHidden:qe.z.string().array().optional()}).optional(),viewer:qe.z.object({blurSceneWhenBusy:qe.z.boolean(),ignoreSuperseded:qe.z.boolean().optional(),loggingLevel:qe.z.number().optional(),messageLoggingLevel:qe.z.number().optional(),viewerRuntimeId:qe.z.string().optional(),hasRestoredSettings:qe.z.boolean().optional(),useModelSettings:qe.z.boolean().optional(),showMessages:qe.z.boolean().optional(),commitSettings:qe.z.boolean(),commitParameters:qe.z.boolean(),scene:qe.z.object({show:qe.z.boolean().optional(),showSceneTransition:qe.z.string().optional(),duration:qe.z.number().optional(),fullscreen:qe.z.boolean().optional(),gridVisibility:qe.z.boolean(),groundPlaneReflectionThreshold:qe.z.number().optional(),groundPlaneReflectionVisibility:qe.z.boolean().optional(),groundPlaneVisibility:qe.z.boolean(),camera:qe.z.object({autoAdjust:qe.z.boolean(),cameraMovementDuration:qe.z.number(),cameraTypes:qe.z.object({perspective:qe.z.object({default:qe.z.object({position:qe.z.object({x:qe.z.number(),y:qe.z.number(),z:qe.z.number()}),target:qe.z.object({x:qe.z.number(),y:qe.z.number(),z:qe.z.number()})}),fov:qe.z.number(),controls:qe.z.number().optional()}),orthographic:qe.z.object({default:qe.z.object({position:qe.z.object({x:qe.z.number(),y:qe.z.number(),z:qe.z.number()}),target:qe.z.object({x:qe.z.number(),y:qe.z.number(),z:qe.z.number()})})}),active:qe.z.number()}),controls:qe.z.object({orbit:qe.z.object({autoRotationSpeed:qe.z.number(),damping:qe.z.number(),enableAutoRotation:qe.z.boolean(),enableKeyPan:qe.z.boolean(),enablePan:qe.z.boolean(),enableRotation:qe.z.boolean(),enableZoom:qe.z.boolean(),input:qe.z.object({keys:qe.z.object({up:qe.z.number(),down:qe.z.number(),left:qe.z.number(),right:qe.z.number()}),mouse:qe.z.object({rotate:qe.z.number(),zoom:qe.z.number(),pan:qe.z.number()}),touch:qe.z.object({rotate:qe.z.number(),zoom:qe.z.number(),pan:qe.z.number()})}),keyPanSpeed:qe.z.number(),movementSmoothness:qe.z.number(),restrictions:qe.z.object({position:qe.z.object({cube:qe.z.object({min:qe.z.object({x:qe.z.number().nullable(),y:qe.z.number().nullable(),z:qe.z.number().nullable()}),max:qe.z.object({x:qe.z.number().nullable(),y:qe.z.number().nullable(),z:qe.z.number().nullable()})}).optional(),sphere:qe.z.object({center:qe.z.object({x:qe.z.number(),y:qe.z.number(),z:qe.z.number()}),radius:qe.z.number().nullable()}).optional()}).optional(),target:qe.z.object({cube:qe.z.object({min:qe.z.object({x:qe.z.number().nullable(),y:qe.z.number().nullable(),z:qe.z.number().nullable()}),max:qe.z.object({x:qe.z.number().nullable(),y:qe.z.number().nullable(),z:qe.z.number().nullable()})}).optional(),sphere:qe.z.object({center:qe.z.object({x:qe.z.number(),y:qe.z.number(),z:qe.z.number()}),radius:qe.z.number().nullable()}).optional()}).optional(),rotation:qe.z.object({minPolarAngle:qe.z.number(),maxPolarAngle:qe.z.number(),minAzimuthAngle:qe.z.number().nullable(),maxAzimuthAngle:qe.z.number().nullable()}).optional(),zoom:qe.z.object({minDistance:qe.z.number(),maxDistance:qe.z.number().nullable()}).optional()}),rotationSpeed:qe.z.number(),panSpeed:qe.z.number(),zoomSpeed:qe.z.number()}),fps:qe.z.object({}),orthographic:qe.z.object({damping:qe.z.number(),enableKeyPan:qe.z.boolean(),enablePan:qe.z.boolean(),enableZoom:qe.z.boolean(),input:qe.z.object({keys:qe.z.object({up:qe.z.number(),down:qe.z.number(),left:qe.z.number(),right:qe.z.number()}),mouse:qe.z.object({rotate:qe.z.number(),zoom:qe.z.number(),pan:qe.z.number()}),touch:qe.z.object({rotate:qe.z.number(),zoom:qe.z.number(),pan:qe.z.number()})}),keyPanSpeed:qe.z.number(),movementSmoothness:qe.z.number(),panSpeed:qe.z.number(),zoomSpeed:qe.z.number()})}),enableCameraControls:qe.z.boolean(),revertAtMouseUp:qe.z.boolean(),revertAtMouseUpDuration:qe.z.number(),zoomExtentsFactor:qe.z.number().positive()}),lights:qe.z.object({helper:qe.z.boolean().optional(),lightScene:qe.z.string(),lightScenes:kYe.nullable()}),material:qe.z.object({environmentMap:qe.z.union([qe.z.string(),qe.z.string().array()]),environmentMapAsBackground:qe.z.boolean(),environmentMapResolution:qe.z.enum(["256","512","1024","2048"])}),render:qe.z.object({ambientOcclusion:qe.z.boolean(),beautyRenderDelay:qe.z.number(),beautyRenderBlendingDuration:qe.z.number().optional(),clearAlpha:qe.z.number(),clearColor:qe.z.string(),pointSize:qe.z.number(),shadows:qe.z.boolean(),sao:qe.z.object({samples:qe.z.number().positive().optional(),kernelRadius:qe.z.number().positive().optional(),intensity:qe.z.number().positive().optional(),standardDev:qe.z.number().optional()})})})})}).strict(),PYe=t=>{t=CYe.parse(t)};u9.validate=PYe;var i4={};Object.defineProperty(i4,"__esModule",{value:!0});i4.convertToPrevious=i4.convertFromPrevious=void 0;const RYe=V6,DYe=Z4,OYe=(t,e)=>{const n=DYe.Defaults(),i=t;return i.clearAlpha!==void 0&&(n.viewer.scene.render.clearAlpha=i.clearAlpha),i.clearColor!==void 0&&(n.viewer.scene.render.clearColor=i.clearColor),i.clearAlpha===void 0&&i.clearColor===void 0&&i.backgroundColor!==void 0&&(n.viewer.scene.render.clearColor=i.backgroundColor),i.defaultMaterialColor!==void 0&&(n.defaultMaterial.color=i.defaultMaterialColor),n.build_date=i.build_date,n.build_version=i.build_version,i.camera!==void 0&&i.camera.position!==void 0&&i.camera.target!==void 0&&i.camera.position.x!==void 0&&i.camera.position.y!==void 0&&i.camera.position.z!==void 0&&i.camera.target.x!==void 0&&i.camera.target.y!==void 0&&i.camera.target.z!==void 0&&!(i.camera.position.x===5&&i.camera.position.y===5&&i.camera.position.z===5&&i.camera.target.x===0&&i.camera.target.y===0&&i.camera.target.z===0)&&!(i.camera.position.x===0&&i.camera.position.y===0&&i.camera.position.z===0&&i.camera.target.x===0&&i.camera.target.y===0&&i.camera.target.z===0)&&(n.viewer.scene.camera.cameraTypes.perspective.default.position=i.camera.position,n.viewer.scene.camera.cameraTypes.perspective.default.target=i.camera.target),i.cameraOrtho!==void 0&&i.cameraOrtho.position!==void 0&&i.cameraOrtho.target!==void 0&&i.cameraOrtho.position.x!==void 0&&i.cameraOrtho.position.y!==void 0&&i.cameraOrtho.position.z!==void 0&&i.cameraOrtho.target.x!==void 0&&i.cameraOrtho.target.y!==void 0&&i.cameraOrtho.target.z!==void 0&&(!(i.cameraOrtho.position.x===5&&i.cameraOrtho.position.y===5&&i.cameraOrtho.position.z===5&&i.cameraOrtho.target.x===0&&i.cameraOrtho.target.y===0&&i.cameraOrtho.target.z===0)&&!(i.cameraOrtho.position.x===0&&i.cameraOrtho.position.y===0&&i.cameraOrtho.position.z===0&&i.cameraOrtho.target.x===0&&i.cameraOrtho.target.y===0&&i.cameraOrtho.target.z===0)?(n.viewer.scene.camera.cameraTypes.orthographic.default.position=i.cameraOrtho.position,n.viewer.scene.camera.cameraTypes.orthographic.default.target=i.cameraOrtho.target):i.topView&&!(i.cameraOrtho.position.x===5&&i.cameraOrtho.position.y===5&&i.cameraOrtho.position.z===5&&i.cameraOrtho.target.x===0&&i.cameraOrtho.target.y===0&&i.cameraOrtho.target.z===0)&&!(i.cameraOrtho.position.x===0&&i.cameraOrtho.position.y===0&&i.cameraOrtho.position.z===0&&i.cameraOrtho.target.x===0&&i.cameraOrtho.target.y===0&&i.cameraOrtho.target.z===0)&&i.camera!==void 0&&i.camera.position!==void 0&&i.camera.target!==void 0&&i.camera.position.x!==void 0&&i.camera.position.y!==void 0&&i.camera.position.z!==void 0&&i.camera.target.x!==void 0&&i.camera.target.y!==void 0&&i.camera.target.z!==void 0&&(n.viewer.scene.camera.cameraTypes.orthographic.default.position=i.camera.position,n.viewer.scene.camera.cameraTypes.orthographic.default.target=i.camera.target)),i.ambientOcclusion!==void 0&&(n.viewer.scene.render.ambientOcclusion=i.ambientOcclusion),i.autoRotateSpeed!==void 0&&(n.viewer.scene.camera.controls.orbit.autoRotationSpeed=i.autoRotateSpeed),i.bumpAmplitude!==void 0&&(n.defaultMaterial.bumpAmplitude=i.bumpAmplitude),i.cameraAutoAdjust!==void 0&&(n.viewer.scene.camera.autoAdjust=i.cameraAutoAdjust),i.cameraMovementDuration!==void 0&&(n.viewer.scene.camera.cameraMovementDuration=i.cameraMovementDuration),i.cameraRevertAtMouseUp!==void 0&&(n.viewer.scene.camera.revertAtMouseUp=i.cameraRevertAtMouseUp),i.commitParameters!==void 0&&(n.viewer.commitParameters=i.commitParameters),i.controlDamping!==void 0&&(n.viewer.scene.camera.controls.orbit.damping=i.controlDamping),i.controlDamping!==void 0&&(n.viewer.scene.camera.controls.orthographic.damping=i.controlDamping),i.controlNames!==void 0&&(n.parameters.controlNames=i.controlNames),i.controlOrder!==void 0&&(n.parameters.controlOrder=i.controlOrder),i.disablePan!==void 0&&(n.viewer.scene.camera.controls.orbit.enablePan=!i.disablePan),i.disablePan!==void 0&&(n.viewer.scene.camera.controls.orthographic.enablePan=!i.disablePan),i.disableZoom!==void 0&&(n.viewer.scene.camera.controls.orbit.enableZoom=!i.disableZoom),i.disableZoom!==void 0&&(n.viewer.scene.camera.controls.orthographic.enableZoom=!i.disableZoom),i.enableAutoRotation!==void 0&&(n.viewer.scene.camera.controls.orbit.enableAutoRotation=i.enableAutoRotation),i.enableRotation!==void 0&&(n.viewer.scene.camera.controls.orbit.enableRotation=i.enableRotation),i.environmentMap!==void 0&&(n.viewer.scene.material.environmentMap=i.environmentMap),i.environmentMapResolution!==void 0&&(n.viewer.scene.material.environmentMapResolution=i.environmentMapResolution),i.fov!==void 0&&(n.viewer.scene.camera.cameraTypes.perspective.fov=i.fov),i.lightScene!==void 0&&(n.viewer.scene.lights.lightScene=i.lightScene),i.lightScenes!==void 0&&(n.viewer.scene.lights.lightScenes=i.lightScenes),i.panSpeed!==void 0&&(n.viewer.scene.camera.controls.orbit.panSpeed=i.panSpeed),i.parametersHidden!==void 0&&(n.parameters.parametersHidden=i.parametersHidden),i.pointSize!==void 0&&(n.viewer.scene.render.pointSize=i.pointSize),i.revertAtMouseUpDuration!==void 0&&(n.viewer.scene.camera.revertAtMouseUpDuration=i.revertAtMouseUpDuration),i.rotateSpeed!==void 0&&(n.viewer.scene.camera.controls.orbit.rotationSpeed=i.rotateSpeed),i.showEnvironmentMap!==void 0&&(n.viewer.scene.material.environmentMapAsBackground=i.showEnvironmentMap),i.showGrid!==void 0&&(n.viewer.scene.gridVisibility=i.showGrid),i.showGroundPlane!==void 0&&(n.viewer.scene.groundPlaneVisibility=i.showGroundPlane),i.showShadows!==void 0&&(n.viewer.scene.render.shadows=i.showShadows),i.topView&&(n.viewer.scene.camera.cameraTypes.active=1),i.zoomExtentFactor!==void 0&&(n.viewer.scene.camera.zoomExtentsFactor=i.zoomExtentFactor),i.zoomSpeed!==void 0&&(n.viewer.scene.camera.controls.orbit.zoomSpeed=i.zoomSpeed),i.zoomSpeed!==void 0&&(n.viewer.scene.camera.controls.orthographic.zoomSpeed=i.zoomSpeed),n};i4.convertFromPrevious=OYe;const IYe=(t,e)=>{const n=RYe.Defaults(),i=t;return n.build_date=i.build_date,n.build_version=i.build_version,n.ambientOcclusion=i.viewer.scene.render.ambientOcclusion,n.autoRotateSpeed=i.viewer.scene.camera.controls.orbit.autoRotationSpeed,n.bumpAmplitude=i.defaultMaterial.bumpAmplitude,n.camera={position:i.viewer.scene.camera.cameraTypes.perspective.default.position,target:i.viewer.scene.camera.cameraTypes.perspective.default.target},n.cameraAutoAdjust=i.viewer.scene.camera.autoAdjust,n.cameraMovementDuration=i.viewer.scene.camera.cameraMovementDuration,n.cameraOrtho={position:i.viewer.scene.camera.cameraTypes.orthographic.default.position,target:i.viewer.scene.camera.cameraTypes.orthographic.default.target},n.cameraRevertAtMouseUp=i.viewer.scene.camera.revertAtMouseUp,n.clearAlpha=i.viewer.scene.render.clearAlpha,n.clearColor=i.viewer.scene.render.clearColor,n.commitParameters=i.viewer.commitParameters,n.controlDamping=i.viewer.scene.camera.controls.orbit.damping,i.parameters&&i.parameters.controlNames&&(n.controlNames=i.parameters.controlNames),i.parameters&&i.parameters.controlOrder&&(n.controlOrder=i.parameters.controlOrder),n.defaultMaterialColor=i.defaultMaterial.color,n.disablePan=!i.viewer.scene.camera.controls.orbit.enablePan,n.disableZoom=!i.viewer.scene.camera.controls.orbit.enableZoom,n.enableAutoRotation=i.viewer.scene.camera.controls.orbit.enableAutoRotation,n.enableRotation=i.viewer.scene.camera.controls.orbit.enableRotation,n.environmentMap=i.viewer.scene.material.environmentMap,n.environmentMapResolution=i.viewer.scene.material.environmentMapResolution,n.fov=i.viewer.scene.camera.cameraTypes.perspective.fov,n.lightScene=i.viewer.scene.lights.lightScene,n.lightScenes=i.viewer.scene.lights.lightScenes,n.panSpeed=i.viewer.scene.camera.controls.orbit.panSpeed,i.parameters&&i.parameters.parametersHidden&&(n.parametersHidden=i.parameters.parametersHidden),n.pointSize=i.viewer.scene.render.pointSize,n.revertAtMouseUpDuration=i.viewer.scene.camera.revertAtMouseUpDuration,n.rotateSpeed=i.viewer.scene.camera.controls.orbit.rotationSpeed,n.showEnvironmentMap=i.viewer.scene.material.environmentMapAsBackground,n.showGrid=i.viewer.scene.gridVisibility,n.showGroundPlane=i.viewer.scene.groundPlaneVisibility,n.showShadows=i.viewer.scene.render.shadows,n.topView=i.viewer.scene.camera.cameraTypes.active===1,n.zoomExtentFactor=i.viewer.scene.camera.zoomExtentsFactor,n.zoomSpeed=i.viewer.scene.camera.controls.orbit.zoomSpeed,n.backgroundColor=i.viewer.scene.render.clearColor,n};i4.convertToPrevious=IYe;var Q4={};Object.defineProperty(Q4,"__esModule",{value:!0});Q4.Defaults=void 0;const NYe=()=>({build_date:"",build_version:"",settings_version:"3.0",ar:{enable:!0,autoScaling:!0},camera:{cameraId:"",cameras:{}},environment:{clearAlpha:1,clearColor:"#ffffff",map:"none",mapAsBackground:!1,mapResolution:"1024"},environmentGeometry:{gridVisibility:!0,groundPlaneVisibility:!0},general:{transformation:{scale:{x:1,y:1,z:1},translation:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},blurWhenBusy:!0,commitSettings:!1,commitParameters:!1,pointSize:1,showMessages:!0},light:{lightSceneId:"",lightScenes:{}},rendering:{ambientOcclusion:!0,ambientOcclusionIntensity:.1,beautyRenderDelay:50,beautyRenderBlendingDuration:1500,shadows:!0},session:{}});Q4.Defaults=NYe;var f9={};Object.defineProperty(f9,"__esModule",{value:!0});f9.validate=void 0;const He=Sp,LYe=He.z.object({autoRotationSpeed:He.z.number(),damping:He.z.number(),enableAutoRotation:He.z.boolean(),enableKeyPan:He.z.boolean(),enablePan:He.z.boolean(),enableRotation:He.z.boolean(),enableZoom:He.z.boolean(),input:He.z.object({keys:He.z.object({up:He.z.number(),down:He.z.number(),left:He.z.number(),right:He.z.number()}),mouse:He.z.object({rotate:He.z.number(),zoom:He.z.number(),pan:He.z.number()}),touch:He.z.object({rotate:He.z.number(),zoom:He.z.number(),pan:He.z.number()})}),keyPanSpeed:He.z.number(),movementSmoothness:He.z.number(),restrictions:He.z.object({position:He.z.object({cube:He.z.object({min:He.z.object({x:He.z.number().nullable(),y:He.z.number().nullable(),z:He.z.number().nullable()}),max:He.z.object({x:He.z.number().nullable(),y:He.z.number().nullable(),z:He.z.number().nullable()})}),sphere:He.z.object({center:He.z.object({x:He.z.number(),y:He.z.number(),z:He.z.number()}),radius:He.z.number().nullable()})}),target:He.z.object({cube:He.z.object({min:He.z.object({x:He.z.number().nullable(),y:He.z.number().nullable(),z:He.z.number().nullable()}),max:He.z.object({x:He.z.number().nullable(),y:He.z.number().nullable(),z:He.z.number().nullable()})}),sphere:He.z.object({center:He.z.object({x:He.z.number(),y:He.z.number(),z:He.z.number()}),radius:He.z.number().nullable()})}),rotation:He.z.object({minPolarAngle:He.z.number(),maxPolarAngle:He.z.number(),minAzimuthAngle:He.z.number().nullable(),maxAzimuthAngle:He.z.number().nullable()}),zoom:He.z.object({minDistance:He.z.number(),maxDistance:He.z.number().nullable()})}),rotationSpeed:He.z.number(),panSpeed:He.z.number(),zoomSpeed:He.z.number()}),zYe=He.z.object({damping:He.z.number(),enableKeyPan:He.z.boolean(),enablePan:He.z.boolean(),enableZoom:He.z.boolean(),input:He.z.object({keys:He.z.object({up:He.z.number(),down:He.z.number(),left:He.z.number(),right:He.z.number()}),mouse:He.z.object({rotate:He.z.number(),zoom:He.z.number(),pan:He.z.number()}),touch:He.z.object({rotate:He.z.number(),zoom:He.z.number(),pan:He.z.number()})}),keyPanSpeed:He.z.number(),movementSmoothness:He.z.number(),panSpeed:He.z.number(),zoomSpeed:He.z.number()}),BYe=He.z.object({name:He.z.string().optional(),type:He.z.string(),autoAdjust:He.z.boolean(),cameraMovementDuration:He.z.number(),controls:zYe,enableCameraControls:He.z.boolean(),position:He.z.object({x:He.z.number().nullable(),y:He.z.number().nullable(),z:He.z.number().nullable()}),revertAtMouseUp:He.z.boolean(),revertAtMouseUpDuration:He.z.number(),target:He.z.object({x:He.z.number().nullable(),y:He.z.number().nullable(),z:He.z.number().nullable()}),zoomExtentsFactor:He.z.number().positive()}),UYe=He.z.object({name:He.z.string().optional(),type:He.z.string(),autoAdjust:He.z.boolean(),cameraMovementDuration:He.z.number(),controls:LYe,enableCameraControls:He.z.boolean(),fov:He.z.number().positive(),position:He.z.object({x:He.z.number().nullable(),y:He.z.number().nullable(),z:He.z.number().nullable()}),revertAtMouseUp:He.z.boolean(),revertAtMouseUpDuration:He.z.number(),target:He.z.object({x:He.z.number().nullable(),y:He.z.number().nullable(),z:He.z.number().nullable()}),zoomExtentsFactor:He.z.number().positive()}),FYe=He.z.record(He.z.union([UYe,BYe])),VYe=He.z.object({color:He.z.union([He.z.number(),He.z.string()]),intensity:He.z.number()}),GYe=He.z.object({color:He.z.union([He.z.number(),He.z.string()]),intensity:He.z.number(),direction:He.z.object({x:He.z.number(),y:He.z.number(),z:He.z.number()}),castShadow:He.z.boolean(),shadowMapResolution:He.z.number().optional(),shadowMapBias:He.z.number().optional()}),jYe=He.z.object({skyColor:He.z.union([He.z.number(),He.z.string()]),intensity:He.z.number(),groundColor:He.z.union([He.z.number(),He.z.string()])}),HYe=He.z.object({color:He.z.union([He.z.number(),He.z.string()]),intensity:He.z.number(),position:He.z.object({x:He.z.number(),y:He.z.number(),z:He.z.number()}),distance:He.z.number(),decay:He.z.number()}),$Ye=He.z.object({color:He.z.union([He.z.number(),He.z.string()]),intensity:He.z.number(),position:He.z.object({x:He.z.number(),y:He.z.number(),z:He.z.number()}),target:He.z.object({x:He.z.number(),y:He.z.number(),z:He.z.number()}),distance:He.z.number(),decay:He.z.number(),angle:He.z.number(),penumbra:He.z.number()}),WYe=He.z.record(He.z.object({name:He.z.string().optional(),lights:He.z.record(He.z.object({name:He.z.string().optional(),type:He.z.string(),order:He.z.number().optional(),properties:He.z.union([VYe,GYe,jYe,HYe,$Ye])}))})),YYe=He.z.object({build_date:He.z.string().optional(),build_version:He.z.string().optional(),settings_version:He.z.string(),ar:He.z.object({enable:He.z.boolean(),autoScaling:He.z.boolean()}).optional(),camera:He.z.object({cameraId:He.z.string(),cameras:FYe}),environment:He.z.object({clearAlpha:He.z.number(),clearColor:He.z.string(),map:He.z.union([He.z.string(),He.z.string().array()]),mapAsBackground:He.z.boolean(),mapResolution:He.z.string()}),environmentGeometry:He.z.object({gridVisibility:He.z.boolean(),groundPlaneVisibility:He.z.boolean()}),general:He.z.object({transformation:He.z.object({scale:He.z.object({x:He.z.number(),y:He.z.number(),z:He.z.number()}),translation:He.z.object({x:He.z.number(),y:He.z.number(),z:He.z.number()}),rotation:He.z.object({x:He.z.number(),y:He.z.number(),z:He.z.number()})}),blurWhenBusy:He.z.boolean(),commitSettings:He.z.boolean(),commitParameters:He.z.boolean(),pointSize:He.z.number(),showMessages:He.z.boolean()}),light:He.z.object({lightSceneId:He.z.string().optional(),lightScenes:WYe}),rendering:He.z.object({ambientOcclusion:He.z.boolean(),ambientOcclusionIntensity:He.z.number().min(0),beautyRenderDelay:He.z.number(),beautyRenderBlendingDuration:He.z.number(),shadows:He.z.boolean()}),session:He.z.record(He.z.object({order:He.z.number().optional(),displayname:He.z.string().optional(),hidden:He.z.boolean().optional()}))}).strict(),qYe=t=>{t=YYe.parse(t)};f9.validate=qYe;var s4={},G8,XYe=new Uint8Array(16);function wve(){if(!G8&&(G8=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!G8))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return G8(XYe)}const ZYe=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function d9(t){return typeof t=="string"&&ZYe.test(t)}var Ba=[];for(var TF=0;TF<256;++TF)Ba.push((TF+256).toString(16).substr(1));function h9(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(Ba[t[e+0]]+Ba[t[e+1]]+Ba[t[e+2]]+Ba[t[e+3]]+"-"+Ba[t[e+4]]+Ba[t[e+5]]+"-"+Ba[t[e+6]]+Ba[t[e+7]]+"-"+Ba[t[e+8]]+Ba[t[e+9]]+"-"+Ba[t[e+10]]+Ba[t[e+11]]+Ba[t[e+12]]+Ba[t[e+13]]+Ba[t[e+14]]+Ba[t[e+15]]).toLowerCase();if(!d9(n))throw TypeError("Stringified UUID is invalid");return n}var Sse,xF,MF=0,kF=0;function QYe(t,e,n){var i=e&&n||0,o=e||new Array(16);t=t||{};var l=t.node||Sse,d=t.clockseq!==void 0?t.clockseq:xF;if(l==null||d==null){var p=t.random||(t.rng||wve)();l==null&&(l=Sse=[p[0]|1,p[1],p[2],p[3],p[4],p[5]]),d==null&&(d=xF=(p[6]<<8|p[7])&16383)}var g=t.msecs!==void 0?t.msecs:Date.now(),v=t.nsecs!==void 0?t.nsecs:kF+1,_=g-MF+(v-kF)/1e4;if(_<0&&t.clockseq===void 0&&(d=d+1&16383),(_<0||g>MF)&&t.nsecs===void 0&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");MF=g,kF=v,xF=d,g+=122192928e5;var b=((g&268435455)*1e4+v)%4294967296;o[i++]=b>>>24&255,o[i++]=b>>>16&255,o[i++]=b>>>8&255,o[i++]=b&255;var w=g/4294967296*1e4&268435455;o[i++]=w>>>8&255,o[i++]=w&255,o[i++]=w>>>24&15|16,o[i++]=w>>>16&255,o[i++]=d>>>8|128,o[i++]=d&255;for(var E=0;E<6;++E)o[i+E]=l[E];return e||h9(o)}function Eve(t){if(!d9(t))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=e&255,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=e&255,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=e&255,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=e&255,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=e&255,n}function KYe(t){t=unescape(encodeURIComponent(t));for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}var JYe="6ba7b810-9dad-11d1-80b4-00c04fd430c8",eqe="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function Sve(t,e,n){function i(o,l,d,p){if(typeof o=="string"&&(o=KYe(o)),typeof l=="string"&&(l=Eve(l)),l.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var g=new Uint8Array(16+o.length);if(g.set(l),g.set(o,l.length),g=n(g),g[6]=g[6]&15|e,g[8]=g[8]&63|128,d){p=p||0;for(var v=0;v<16;++v)d[p+v]=g[v];return d}return h9(g)}try{i.name=t}catch{}return i.DNS=JYe,i.URL=eqe,i}function tqe(t){if(typeof t=="string"){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return nqe(rqe(iqe(t),t.length*8))}function nqe(t){for(var e=[],n=t.length*32,i="0123456789abcdef",o=0;o<n;o+=8){var l=t[o>>5]>>>o%32&255,d=parseInt(i.charAt(l>>>4&15)+i.charAt(l&15),16);e.push(d)}return e}function Tve(t){return(t+64>>>9<<4)+14+1}function rqe(t,e){t[e>>5]|=128<<e%32,t[Tve(e)-1]=e;for(var n=1732584193,i=-271733879,o=-1732584194,l=271733878,d=0;d<t.length;d+=16){var p=n,g=i,v=o,_=l;n=ul(n,i,o,l,t[d],7,-680876936),l=ul(l,n,i,o,t[d+1],12,-389564586),o=ul(o,l,n,i,t[d+2],17,606105819),i=ul(i,o,l,n,t[d+3],22,-1044525330),n=ul(n,i,o,l,t[d+4],7,-176418897),l=ul(l,n,i,o,t[d+5],12,1200080426),o=ul(o,l,n,i,t[d+6],17,-1473231341),i=ul(i,o,l,n,t[d+7],22,-45705983),n=ul(n,i,o,l,t[d+8],7,1770035416),l=ul(l,n,i,o,t[d+9],12,-1958414417),o=ul(o,l,n,i,t[d+10],17,-42063),i=ul(i,o,l,n,t[d+11],22,-1990404162),n=ul(n,i,o,l,t[d+12],7,1804603682),l=ul(l,n,i,o,t[d+13],12,-40341101),o=ul(o,l,n,i,t[d+14],17,-1502002290),i=ul(i,o,l,n,t[d+15],22,1236535329),n=fl(n,i,o,l,t[d+1],5,-165796510),l=fl(l,n,i,o,t[d+6],9,-1069501632),o=fl(o,l,n,i,t[d+11],14,643717713),i=fl(i,o,l,n,t[d],20,-373897302),n=fl(n,i,o,l,t[d+5],5,-701558691),l=fl(l,n,i,o,t[d+10],9,38016083),o=fl(o,l,n,i,t[d+15],14,-660478335),i=fl(i,o,l,n,t[d+4],20,-405537848),n=fl(n,i,o,l,t[d+9],5,568446438),l=fl(l,n,i,o,t[d+14],9,-1019803690),o=fl(o,l,n,i,t[d+3],14,-187363961),i=fl(i,o,l,n,t[d+8],20,1163531501),n=fl(n,i,o,l,t[d+13],5,-1444681467),l=fl(l,n,i,o,t[d+2],9,-51403784),o=fl(o,l,n,i,t[d+7],14,1735328473),i=fl(i,o,l,n,t[d+12],20,-1926607734),n=dl(n,i,o,l,t[d+5],4,-378558),l=dl(l,n,i,o,t[d+8],11,-2022574463),o=dl(o,l,n,i,t[d+11],16,1839030562),i=dl(i,o,l,n,t[d+14],23,-35309556),n=dl(n,i,o,l,t[d+1],4,-1530992060),l=dl(l,n,i,o,t[d+4],11,1272893353),o=dl(o,l,n,i,t[d+7],16,-155497632),i=dl(i,o,l,n,t[d+10],23,-1094730640),n=dl(n,i,o,l,t[d+13],4,681279174),l=dl(l,n,i,o,t[d],11,-358537222),o=dl(o,l,n,i,t[d+3],16,-722521979),i=dl(i,o,l,n,t[d+6],23,76029189),n=dl(n,i,o,l,t[d+9],4,-640364487),l=dl(l,n,i,o,t[d+12],11,-421815835),o=dl(o,l,n,i,t[d+15],16,530742520),i=dl(i,o,l,n,t[d+2],23,-995338651),n=hl(n,i,o,l,t[d],6,-198630844),l=hl(l,n,i,o,t[d+7],10,1126891415),o=hl(o,l,n,i,t[d+14],15,-1416354905),i=hl(i,o,l,n,t[d+5],21,-57434055),n=hl(n,i,o,l,t[d+12],6,1700485571),l=hl(l,n,i,o,t[d+3],10,-1894986606),o=hl(o,l,n,i,t[d+10],15,-1051523),i=hl(i,o,l,n,t[d+1],21,-2054922799),n=hl(n,i,o,l,t[d+8],6,1873313359),l=hl(l,n,i,o,t[d+15],10,-30611744),o=hl(o,l,n,i,t[d+6],15,-1560198380),i=hl(i,o,l,n,t[d+13],21,1309151649),n=hl(n,i,o,l,t[d+4],6,-145523070),l=hl(l,n,i,o,t[d+11],10,-1120210379),o=hl(o,l,n,i,t[d+2],15,718787259),i=hl(i,o,l,n,t[d+9],21,-343485551),n=G2(n,p),i=G2(i,g),o=G2(o,v),l=G2(l,_)}return[n,i,o,l]}function iqe(t){if(t.length===0)return[];for(var e=t.length*8,n=new Uint32Array(Tve(e)),i=0;i<e;i+=8)n[i>>5]|=(t[i/8]&255)<<i%32;return n}function G2(t,e){var n=(t&65535)+(e&65535),i=(t>>16)+(e>>16)+(n>>16);return i<<16|n&65535}function sqe(t,e){return t<<e|t>>>32-e}function p9(t,e,n,i,o,l){return G2(sqe(G2(G2(e,t),G2(i,l)),o),n)}function ul(t,e,n,i,o,l,d){return p9(e&n|~e&i,t,e,o,l,d)}function fl(t,e,n,i,o,l,d){return p9(e&i|n&~i,t,e,o,l,d)}function dl(t,e,n,i,o,l,d){return p9(e^n^i,t,e,o,l,d)}function hl(t,e,n,i,o,l,d){return p9(n^(e|~i),t,e,o,l,d)}var oqe=Sve("v3",48,tqe);const aqe=oqe;function xve(t,e,n){t=t||{};var i=t.random||(t.rng||wve)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){n=n||0;for(var o=0;o<16;++o)e[n+o]=i[o];return e}return h9(i)}function lqe(t,e,n,i){switch(t){case 0:return e&n^~e&i;case 1:return e^n^i;case 2:return e&n^e&i^n&i;case 3:return e^n^i}}function CF(t,e){return t<<e|t>>>32-e}function cqe(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var i=unescape(encodeURIComponent(t));t=[];for(var o=0;o<i.length;++o)t.push(i.charCodeAt(o))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var l=t.length/4+2,d=Math.ceil(l/16),p=new Array(d),g=0;g<d;++g){for(var v=new Uint32Array(16),_=0;_<16;++_)v[_]=t[g*64+_*4]<<24|t[g*64+_*4+1]<<16|t[g*64+_*4+2]<<8|t[g*64+_*4+3];p[g]=v}p[d-1][14]=(t.length-1)*8/Math.pow(2,32),p[d-1][14]=Math.floor(p[d-1][14]),p[d-1][15]=(t.length-1)*8&4294967295;for(var b=0;b<d;++b){for(var w=new Uint32Array(80),E=0;E<16;++E)w[E]=p[b][E];for(var S=16;S<80;++S)w[S]=CF(w[S-3]^w[S-8]^w[S-14]^w[S-16],1);for(var M=n[0],k=n[1],x=n[2],C=n[3],P=n[4],O=0;O<80;++O){var L=Math.floor(O/20),B=CF(M,5)+lqe(L,k,x,C)+P+e[L]+w[O]>>>0;P=C,C=x,x=CF(k,30)>>>0,k=M,M=B}n[0]=n[0]+M>>>0,n[1]=n[1]+k>>>0,n[2]=n[2]+x>>>0,n[3]=n[3]+C>>>0,n[4]=n[4]+P>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var uqe=Sve("v5",80,cqe);const fqe=uqe,dqe="00000000-0000-0000-0000-000000000000";function hqe(t){if(!d9(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}const pqe=Object.freeze(Object.defineProperty({__proto__:null,NIL:dqe,parse:Eve,stringify:h9,v1:QYe,v3:aqe,v4:xve,v5:fqe,validate:d9,version:hqe},Symbol.toStringTag,{value:"Module"})),mqe=ym(pqe);Object.defineProperty(s4,"__esModule",{value:!0});s4.convertToPrevious=s4.convertFromPrevious=void 0;const gqe=Z4,vqe=Q4,_qe=mqe,yqe=(t,e)=>{const n=vqe.Defaults(),i=t;if(n.build_date=i.build_date,n.build_version=i.build_version,i.parameters&&i.parameters.controlNames)for(let l in i.parameters.controlNames)n.session[l]={order:0,displayname:i.parameters.controlNames[l],hidden:!1};if(i.parameters&&i.parameters.controlOrder)for(let l=0;l<i.parameters.controlOrder.length;l++){const d=i.parameters.controlOrder[l];n.session[d]?n.session[d].order=l:n.session[d]={order:l,displayname:"",hidden:!1}}if(i.parameters&&i.parameters.parametersHidden)for(let l=0;l<i.parameters.parametersHidden.length;l++){const d=i.parameters.parametersHidden[l];n.session[d]?n.session[d].hidden=!0:n.session[d]={order:0,displayname:"",hidden:!0}}n.general.blurWhenBusy=i.viewer.blurSceneWhenBusy,n.general.commitParameters=i.viewer.commitParameters,n.general.commitSettings=i.viewer.commitSettings,i.viewer.showMessages&&(n.general.showMessages=i.viewer.showMessages),n.environmentGeometry.gridVisibility=i.viewer.scene.gridVisibility,n.environmentGeometry.groundPlaneVisibility=i.viewer.scene.groundPlaneVisibility;const o=_qe.v4();if(n.camera.cameraId=o,i.viewer.scene.camera.cameraTypes.active===0){const l=i.viewer.scene.camera.controls.orbit.restrictions,d=l.position&&l.position.cube?{min:{x:l.position.cube.min.x,y:l.position.cube.min.y,z:l.position.cube.min.z},max:{x:l.position.cube.max.x,y:l.position.cube.max.y,z:l.position.cube.max.z}}:{min:{x:-1/0,y:-1/0,z:-1/0},max:{x:1/0,y:1/0,z:1/0}},p=l.target&&l.target.cube?{min:{x:l.target.cube.min.x,y:l.target.cube.min.y,z:l.target.cube.min.z},max:{x:l.target.cube.max.x,y:l.target.cube.max.y,z:l.target.cube.max.z}}:{min:{x:-1/0,y:-1/0,z:-1/0},max:{x:1/0,y:1/0,z:1/0}},g=l.position&&l.position.sphere?{center:{x:l.position.sphere.center.x,y:l.position.sphere.center.y,z:l.position.sphere.center.z},radius:l.position.sphere.radius}:{center:{x:0,y:0,z:0},radius:1/0},v=l.target&&l.target.sphere?{center:{x:l.target.sphere.center.x,y:l.target.sphere.center.y,z:l.target.sphere.center.z},radius:l.target.sphere.radius}:{center:{x:0,y:0,z:0},radius:1/0},_=l.rotation?{minPolarAngle:l.rotation.minPolarAngle,maxPolarAngle:l.rotation.maxPolarAngle,minAzimuthAngle:l.rotation.minAzimuthAngle,maxAzimuthAngle:l.rotation.maxAzimuthAngle}:{minPolarAngle:0,maxPolarAngle:180,minAzimuthAngle:-1/0,maxAzimuthAngle:1/0},b=l.zoom?{minDistance:l.zoom.minDistance,maxDistance:l.zoom.maxDistance}:{minDistance:0,maxDistance:1/0},w={position:{cube:d,sphere:g},target:{cube:p,sphere:v},rotation:_,zoom:b};n.camera.cameras={[o]:{type:"perspective",autoAdjust:i.viewer.scene.camera.autoAdjust,cameraMovementDuration:i.viewer.scene.camera.cameraMovementDuration,controls:{autoRotationSpeed:i.viewer.scene.camera.controls.orbit.autoRotationSpeed,damping:i.viewer.scene.camera.controls.orbit.damping,enableAutoRotation:i.viewer.scene.camera.controls.orbit.enableAutoRotation,enableKeyPan:i.viewer.scene.camera.controls.orbit.enableKeyPan,enablePan:i.viewer.scene.camera.controls.orbit.enablePan,enableRotation:i.viewer.scene.camera.controls.orbit.enableRotation,enableZoom:i.viewer.scene.camera.controls.orbit.enableZoom,input:{keys:{up:i.viewer.scene.camera.controls.orbit.input.keys.up,down:i.viewer.scene.camera.controls.orbit.input.keys.down,left:i.viewer.scene.camera.controls.orbit.input.keys.left,right:i.viewer.scene.camera.controls.orbit.input.keys.right},mouse:{rotate:i.viewer.scene.camera.controls.orbit.input.mouse.rotate,zoom:i.viewer.scene.camera.controls.orbit.input.mouse.zoom,pan:i.viewer.scene.camera.controls.orbit.input.mouse.pan},touch:{rotate:i.viewer.scene.camera.controls.orbit.input.touch.rotate,zoom:i.viewer.scene.camera.controls.orbit.input.touch.zoom,pan:i.viewer.scene.camera.controls.orbit.input.touch.pan}},keyPanSpeed:i.viewer.scene.camera.controls.orbit.keyPanSpeed,movementSmoothness:i.viewer.scene.camera.controls.orbit.movementSmoothness,restrictions:w,rotationSpeed:i.viewer.scene.camera.controls.orbit.rotationSpeed,panSpeed:i.viewer.scene.camera.controls.orbit.panSpeed,zoomSpeed:i.viewer.scene.camera.controls.orbit.zoomSpeed},enableCameraControls:i.viewer.scene.camera.enableCameraControls,fov:i.viewer.scene.camera.cameraTypes.perspective.fov,position:{x:i.viewer.scene.camera.cameraTypes.perspective.default.position.x,y:i.viewer.scene.camera.cameraTypes.perspective.default.position.y,z:i.viewer.scene.camera.cameraTypes.perspective.default.position.z},revertAtMouseUp:i.viewer.scene.camera.revertAtMouseUp,revertAtMouseUpDuration:i.viewer.scene.camera.revertAtMouseUpDuration,target:{x:i.viewer.scene.camera.cameraTypes.perspective.default.target.x,y:i.viewer.scene.camera.cameraTypes.perspective.default.target.y,z:i.viewer.scene.camera.cameraTypes.perspective.default.target.z},zoomExtentsFactor:i.viewer.scene.camera.zoomExtentsFactor}}}else{let l="top";switch(i.viewer.scene.camera.cameraTypes.active){case 2:l="bottom";break;case 3:l="right";break;case 4:l="left";break;case 5:l="back";break;case 6:l="front";break;default:l="top"}n.camera.cameras={[o]:{type:l,autoAdjust:i.viewer.scene.camera.autoAdjust,cameraMovementDuration:i.viewer.scene.camera.cameraMovementDuration,controls:{damping:i.viewer.scene.camera.controls.orbit.damping,enableKeyPan:i.viewer.scene.camera.controls.orbit.enableKeyPan,enablePan:i.viewer.scene.camera.controls.orbit.enablePan,enableZoom:i.viewer.scene.camera.controls.orbit.enableZoom,input:{keys:{up:i.viewer.scene.camera.controls.orbit.input.keys.up,down:i.viewer.scene.camera.controls.orbit.input.keys.down,left:i.viewer.scene.camera.controls.orbit.input.keys.left,right:i.viewer.scene.camera.controls.orbit.input.keys.right},mouse:{rotate:i.viewer.scene.camera.controls.orbit.input.mouse.rotate,zoom:i.viewer.scene.camera.controls.orbit.input.mouse.zoom,pan:i.viewer.scene.camera.controls.orbit.input.mouse.pan},touch:{rotate:i.viewer.scene.camera.controls.orbit.input.touch.rotate,zoom:i.viewer.scene.camera.controls.orbit.input.touch.zoom,pan:i.viewer.scene.camera.controls.orbit.input.touch.pan}},keyPanSpeed:i.viewer.scene.camera.controls.orbit.keyPanSpeed,movementSmoothness:i.viewer.scene.camera.controls.orbit.movementSmoothness,panSpeed:i.viewer.scene.camera.controls.orbit.panSpeed,zoomSpeed:i.viewer.scene.camera.controls.orbit.zoomSpeed},enableCameraControls:i.viewer.scene.camera.enableCameraControls,position:{x:i.viewer.scene.camera.cameraTypes.orthographic.default.position.x,y:i.viewer.scene.camera.cameraTypes.orthographic.default.position.y,z:i.viewer.scene.camera.cameraTypes.orthographic.default.position.z},revertAtMouseUp:i.viewer.scene.camera.revertAtMouseUp,revertAtMouseUpDuration:i.viewer.scene.camera.revertAtMouseUpDuration,target:{x:i.viewer.scene.camera.cameraTypes.orthographic.default.target.x,y:i.viewer.scene.camera.cameraTypes.orthographic.default.target.y,z:i.viewer.scene.camera.cameraTypes.orthographic.default.target.z},zoomExtentsFactor:i.viewer.scene.camera.zoomExtentsFactor}}}if(n.environment.map=i.viewer.scene.material.environmentMap,n.environment.mapAsBackground=i.viewer.scene.material.environmentMapAsBackground,n.environment.mapResolution=i.viewer.scene.material.environmentMapResolution,i.viewer.scene.lights,n.light.lightSceneId=i.viewer.scene.lights.lightScene,i.viewer.scene.lights.lightScenes)for(let l in i.viewer.scene.lights.lightScenes){const d=i.viewer.scene.lights.lightScenes[l],p={};for(let g in d.lights){const v=i.viewer.scene.lights.lightScenes[l].lights[g];switch(v.type){case"ambient":p[g]={name:v.name,type:v.type,properties:{color:v.properties.color,intensity:v.properties.intensity}};break;case"directional":p[g]={name:v.name,type:v.type,properties:{direction:{x:v.properties.direction.x,y:v.properties.direction.y,z:v.properties.direction.z},color:v.properties.color,intensity:v.properties.intensity,castShadow:v.properties.castShadow,shadowMapResolution:v.properties.shadowMapResolution,shadowMapBias:v.properties.shadowMapBias}};break;case"hemisphere":p[g]={name:v.name,type:v.type,properties:{skyColor:v.properties.skyColor,intensity:v.properties.intensity,groundColor:v.properties.groundColor}};break;case"point":p[g]={name:v.name,type:v.type,properties:{color:v.properties.color,intensity:v.properties.intensity,position:{x:v.properties.position.x,y:v.properties.position.y,z:v.properties.position.z},distance:v.properties.distance,decay:v.properties.decay}};break;case"spot":p[g]={name:v.name,type:v.type,properties:{color:v.properties.color,intensity:v.properties.intensity,position:{x:v.properties.position.x,y:v.properties.position.y,z:v.properties.position.z},target:{x:v.properties.target.x,y:v.properties.target.y,z:v.properties.target.z},distance:v.properties.distance,decay:v.properties.decay,angle:v.properties.angle,penumbra:v.properties.penumbra}};break}v.order&&(p[g].order=v.order)}n.light.lightScenes[l]={name:d.name,lights:p}}return n.rendering.ambientOcclusion=i.viewer.scene.render.ambientOcclusion,i.viewer.scene.render.beautyRenderBlendingDuration!==void 0&&(n.rendering.beautyRenderBlendingDuration=i.viewer.scene.render.beautyRenderBlendingDuration),n.rendering.beautyRenderDelay=i.viewer.scene.render.beautyRenderDelay,n.environment.clearAlpha=i.viewer.scene.render.clearAlpha,n.environment.clearColor=i.viewer.scene.render.clearColor,n.general.pointSize=i.viewer.scene.render.pointSize,n.rendering.shadows=i.viewer.scene.render.shadows,n};s4.convertFromPrevious=yqe;const bqe=(t,e)=>{const n=gqe.Defaults(),i=t;if(n.build_date=i.build_date,n.build_version=i.build_version,i.camera.cameras[i.camera.cameraId]){const d=i.camera.cameras[i.camera.cameraId];switch(d.type){case"top":n.viewer.scene.camera.cameraTypes.active=1;break;case"bottom":n.viewer.scene.camera.cameraTypes.active=2;break;case"right":n.viewer.scene.camera.cameraTypes.active=3;break;case"left":n.viewer.scene.camera.cameraTypes.active=4;break;case"back":n.viewer.scene.camera.cameraTypes.active=5;break;case"front":n.viewer.scene.camera.cameraTypes.active=6;break;default:n.viewer.scene.camera.cameraTypes.active=0}if(n.viewer.scene.camera.autoAdjust=d.autoAdjust,n.viewer.scene.camera.cameraMovementDuration=d.cameraMovementDuration,n.viewer.scene.camera.enableCameraControls=d.enableCameraControls,n.viewer.scene.camera.revertAtMouseUp=d.revertAtMouseUp,n.viewer.scene.camera.revertAtMouseUpDuration=d.revertAtMouseUpDuration,n.viewer.scene.camera.zoomExtentsFactor=d.zoomExtentsFactor,d.type==="perspective"){const p=d;n.viewer.scene.camera.cameraTypes.perspective.default.position={x:d.position.x,y:d.position.y,z:d.position.z},n.viewer.scene.camera.cameraTypes.perspective.default.target={x:d.target.x,y:d.target.y,z:d.target.z},n.viewer.scene.camera.cameraTypes.perspective.fov=p.fov,n.viewer.scene.camera.controls.orbit={autoRotationSpeed:p.controls.autoRotationSpeed,damping:p.controls.damping,enableAutoRotation:p.controls.enableAutoRotation,enableKeyPan:p.controls.enableKeyPan,enablePan:p.controls.enablePan,enableRotation:p.controls.enableRotation,enableZoom:p.controls.enableZoom,input:{keys:{up:p.controls.input.keys.up,down:p.controls.input.keys.down,left:p.controls.input.keys.left,right:p.controls.input.keys.right},mouse:{rotate:p.controls.input.mouse.rotate,zoom:p.controls.input.mouse.zoom,pan:p.controls.input.mouse.pan},touch:{rotate:p.controls.input.touch.rotate,zoom:p.controls.input.touch.zoom,pan:p.controls.input.touch.pan}},keyPanSpeed:p.controls.keyPanSpeed,movementSmoothness:p.controls.movementSmoothness,restrictions:{position:{cube:{min:{x:p.controls.restrictions.position.cube.min.x,y:p.controls.restrictions.position.cube.min.y,z:p.controls.restrictions.position.cube.min.z},max:{x:p.controls.restrictions.position.cube.max.x,y:p.controls.restrictions.position.cube.max.y,z:p.controls.restrictions.position.cube.max.z}},sphere:{center:{x:p.controls.restrictions.position.sphere.center.x,y:p.controls.restrictions.position.sphere.center.y,z:p.controls.restrictions.position.sphere.center.z},radius:p.controls.restrictions.position.sphere.radius}},target:{cube:{min:{x:p.controls.restrictions.target.cube.min.x,y:p.controls.restrictions.target.cube.min.y,z:p.controls.restrictions.target.cube.min.z},max:{x:p.controls.restrictions.target.cube.max.x,y:p.controls.restrictions.target.cube.max.y,z:p.controls.restrictions.target.cube.max.z}},sphere:{center:{x:p.controls.restrictions.target.sphere.center.x,y:p.controls.restrictions.target.sphere.center.y,z:p.controls.restrictions.target.sphere.center.z},radius:p.controls.restrictions.target.sphere.radius}},rotation:{minPolarAngle:p.controls.restrictions.rotation.minPolarAngle,maxPolarAngle:p.controls.restrictions.rotation.maxPolarAngle,minAzimuthAngle:p.controls.restrictions.rotation.minAzimuthAngle,maxAzimuthAngle:p.controls.restrictions.rotation.maxAzimuthAngle},zoom:{minDistance:p.controls.restrictions.zoom.minDistance,maxDistance:p.controls.restrictions.zoom.maxDistance}},rotationSpeed:p.controls.rotationSpeed,panSpeed:p.controls.panSpeed,zoomSpeed:p.controls.zoomSpeed}}else{const p=d;n.viewer.scene.camera.cameraTypes.orthographic.default.position={x:d.position.x,y:d.position.y,z:d.position.z},n.viewer.scene.camera.cameraTypes.orthographic.default.target={x:d.target.x,y:d.target.y,z:d.target.z},n.viewer.scene.camera.controls.orthographic={damping:p.controls.damping,enableKeyPan:p.controls.enableKeyPan,enablePan:p.controls.enablePan,enableZoom:p.controls.enableZoom,input:{keys:{up:p.controls.input.keys.up,down:p.controls.input.keys.down,left:p.controls.input.keys.left,right:p.controls.input.keys.right},mouse:{rotate:p.controls.input.mouse.rotate,zoom:p.controls.input.mouse.zoom,pan:p.controls.input.mouse.pan},touch:{rotate:p.controls.input.touch.rotate,zoom:p.controls.input.touch.zoom,pan:p.controls.input.touch.pan}},keyPanSpeed:p.controls.keyPanSpeed,movementSmoothness:p.controls.movementSmoothness,panSpeed:p.controls.panSpeed,zoomSpeed:p.controls.zoomSpeed}}}n.viewer.scene.render.clearAlpha=i.environment.clearAlpha,n.viewer.scene.render.clearColor=i.environment.clearColor,n.viewer.scene.material.environmentMap=i.environment.map,n.viewer.scene.material.environmentMapAsBackground=i.environment.mapAsBackground,n.viewer.scene.material.environmentMapResolution=i.environment.mapResolution,n.viewer.scene.gridVisibility=i.environmentGeometry.gridVisibility,n.viewer.scene.groundPlaneVisibility=i.environmentGeometry.groundPlaneVisibility,n.viewer.blurSceneWhenBusy=i.general.blurWhenBusy,n.viewer.commitParameters=i.general.commitParameters,n.viewer.commitSettings=i.general.commitSettings,n.viewer.scene.render.pointSize=i.general.pointSize,n.viewer.showMessages=i.general.showMessages,n.viewer.scene.lights.lightScene=i.light.lightSceneId||"default";for(let d in i.light.lightScenes){const p=i.light.lightScenes[d],g={};for(let v in p.lights){const _=p.lights[v];switch(_.type){case"ambient":g[v]={id:v,name:_.name,type:_.type,order:_.order,properties:{color:_.properties.color,intensity:_.properties.intensity}};break;case"directional":g[v]={id:v,name:_.name,type:_.type,order:_.order,properties:{direction:{x:_.properties.direction.x,y:_.properties.direction.y,z:_.properties.direction.z},color:_.properties.color,intensity:_.properties.intensity,castShadow:_.properties.castShadow,shadowMapResolution:_.properties.shadowMapResolution,shadowMapBias:_.properties.shadowMapBias}};break;case"hemisphere":g[v]={id:v,name:_.name,type:_.type,order:_.order,properties:{skyColor:_.properties.skyColor,intensity:_.properties.intensity,groundColor:_.properties.groundColor}};break;case"point":g[v]={id:v,name:_.name,type:_.type,order:_.order,properties:{color:_.properties.color,intensity:_.properties.intensity,position:{x:_.properties.position.x,y:_.properties.position.y,z:_.properties.position.z},distance:_.properties.distance,decay:_.properties.decay}};break;case"spot":g[v]={id:v,name:_.name,type:_.type,order:_.order,properties:{color:_.properties.color,intensity:_.properties.intensity,position:{x:_.properties.position.x,y:_.properties.position.y,z:_.properties.position.z},target:{x:_.properties.target.x,y:_.properties.target.y,z:_.properties.target.z},distance:_.properties.distance,decay:_.properties.decay,angle:_.properties.angle,penumbra:_.properties.penumbra}};break}}n.viewer.scene.lights.lightScenes[d]={id:d,name:p.name,lights:g}}n.viewer.scene.render.ambientOcclusion=i.rendering.ambientOcclusion,n.viewer.scene.render.beautyRenderBlendingDuration=i.rendering.beautyRenderBlendingDuration,n.viewer.scene.render.beautyRenderDelay=i.rendering.beautyRenderDelay,n.viewer.scene.render.shadows=i.rendering.shadows;let o=[];for(let d in i.session)i.session[d].displayname&&(n.parameters.controlNames[d]=i.session[d].displayname),i.session[d].hidden&&n.parameters.parametersHidden.push(d),o.push({id:d,order:i.session[d].order||0});o.sort((d,p)=>(d.order||1/0)-(p.order||1/0));let l=o.filter(d=>d.order===0);return o=o.filter(d=>!l.includes(d)),o=l.concat(o),n.parameters.controlOrder=o.map(d=>d.id),n};s4.convertToPrevious=bqe;var K4={};Object.defineProperty(K4,"__esModule",{value:!0});K4.Defaults=void 0;const Aqe=()=>({build_date:"",build_version:"",settings_version:"3.1",ar:{enable:!0,autoScaling:!0},camera:{cameraId:"",cameras:{}},environment:{clearAlpha:1,clearColor:"#ffffff",map:"photo_studio",mapAsBackground:!1,mapResolution:"1024"},environmentGeometry:{gridColor:"#44444426",gridVisibility:!0,groundPlaneColor:"#636363ff",groundPlaneVisibility:!0},general:{transformation:{scale:{x:1,y:1,z:1},translation:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},blurWhenBusy:!0,commitSettings:!1,commitParameters:!1,pointSize:1,showMessages:!0},light:{lightSceneId:"",lightScenes:{}},rendering:{ambientOcclusion:!1,ambientOcclusionIntensity:.1,beautyRenderDelay:50,beautyRenderBlendingDuration:1500,outputEncoding:"srgb",physicallyCorrectLights:!0,shadows:!0,textureEncoding:"srgb",toneMapping:"none",toneMappingExposure:1},session:{}});K4.Defaults=Aqe;var m9={};Object.defineProperty(m9,"__esModule",{value:!0});m9.validate=void 0;const Ge=Sp,wqe=Ge.z.object({autoRotationSpeed:Ge.z.number(),damping:Ge.z.number(),enableAutoRotation:Ge.z.boolean(),enableKeyPan:Ge.z.boolean(),enablePan:Ge.z.boolean(),enableRotation:Ge.z.boolean(),enableZoom:Ge.z.boolean(),input:Ge.z.object({keys:Ge.z.object({up:Ge.z.number(),down:Ge.z.number(),left:Ge.z.number(),right:Ge.z.number()}),mouse:Ge.z.object({rotate:Ge.z.number(),zoom:Ge.z.number(),pan:Ge.z.number()}),touch:Ge.z.object({rotate:Ge.z.number(),zoom:Ge.z.number(),pan:Ge.z.number()})}),keyPanSpeed:Ge.z.number(),movementSmoothness:Ge.z.number(),restrictions:Ge.z.object({position:Ge.z.object({cube:Ge.z.object({min:Ge.z.object({x:Ge.z.number().nullable(),y:Ge.z.number().nullable(),z:Ge.z.number().nullable()}),max:Ge.z.object({x:Ge.z.number().nullable(),y:Ge.z.number().nullable(),z:Ge.z.number().nullable()})}),sphere:Ge.z.object({center:Ge.z.object({x:Ge.z.number(),y:Ge.z.number(),z:Ge.z.number()}),radius:Ge.z.number().nullable()})}),target:Ge.z.object({cube:Ge.z.object({min:Ge.z.object({x:Ge.z.number().nullable(),y:Ge.z.number().nullable(),z:Ge.z.number().nullable()}),max:Ge.z.object({x:Ge.z.number().nullable(),y:Ge.z.number().nullable(),z:Ge.z.number().nullable()})}),sphere:Ge.z.object({center:Ge.z.object({x:Ge.z.number(),y:Ge.z.number(),z:Ge.z.number()}),radius:Ge.z.number().nullable()})}),rotation:Ge.z.object({minPolarAngle:Ge.z.number(),maxPolarAngle:Ge.z.number(),minAzimuthAngle:Ge.z.number().nullable(),maxAzimuthAngle:Ge.z.number().nullable()}),zoom:Ge.z.object({minDistance:Ge.z.number(),maxDistance:Ge.z.number().nullable()})}),rotationSpeed:Ge.z.number(),panSpeed:Ge.z.number(),zoomSpeed:Ge.z.number()}),Eqe=Ge.z.object({damping:Ge.z.number(),enableKeyPan:Ge.z.boolean(),enablePan:Ge.z.boolean(),enableZoom:Ge.z.boolean(),input:Ge.z.object({keys:Ge.z.object({up:Ge.z.number(),down:Ge.z.number(),left:Ge.z.number(),right:Ge.z.number()}),mouse:Ge.z.object({rotate:Ge.z.number(),zoom:Ge.z.number(),pan:Ge.z.number()}),touch:Ge.z.object({rotate:Ge.z.number(),zoom:Ge.z.number(),pan:Ge.z.number()})}),keyPanSpeed:Ge.z.number(),movementSmoothness:Ge.z.number(),panSpeed:Ge.z.number(),zoomSpeed:Ge.z.number()}),Sqe=Ge.z.object({name:Ge.z.string().optional(),type:Ge.z.string(),autoAdjust:Ge.z.boolean(),cameraMovementDuration:Ge.z.number(),controls:Eqe,enableCameraControls:Ge.z.boolean(),position:Ge.z.object({x:Ge.z.number().nullable(),y:Ge.z.number().nullable(),z:Ge.z.number().nullable()}),revertAtMouseUp:Ge.z.boolean(),revertAtMouseUpDuration:Ge.z.number(),target:Ge.z.object({x:Ge.z.number().nullable(),y:Ge.z.number().nullable(),z:Ge.z.number().nullable()}),zoomExtentsFactor:Ge.z.number().positive()}),Tqe=Ge.z.object({name:Ge.z.string().optional(),type:Ge.z.string(),autoAdjust:Ge.z.boolean(),cameraMovementDuration:Ge.z.number(),controls:wqe,enableCameraControls:Ge.z.boolean(),fov:Ge.z.number().positive(),position:Ge.z.object({x:Ge.z.number().nullable(),y:Ge.z.number().nullable(),z:Ge.z.number().nullable()}),revertAtMouseUp:Ge.z.boolean(),revertAtMouseUpDuration:Ge.z.number(),target:Ge.z.object({x:Ge.z.number().nullable(),y:Ge.z.number().nullable(),z:Ge.z.number().nullable()}),zoomExtentsFactor:Ge.z.number().positive()}),xqe=Ge.z.record(Ge.z.union([Tqe,Sqe])),Mqe=Ge.z.object({color:Ge.z.union([Ge.z.number(),Ge.z.string()]),intensity:Ge.z.number()}),kqe=Ge.z.object({color:Ge.z.union([Ge.z.number(),Ge.z.string()]),intensity:Ge.z.number(),direction:Ge.z.object({x:Ge.z.number(),y:Ge.z.number(),z:Ge.z.number()}),castShadow:Ge.z.boolean(),shadowMapResolution:Ge.z.number().optional(),shadowMapBias:Ge.z.number().optional()}),Cqe=Ge.z.object({skyColor:Ge.z.union([Ge.z.number(),Ge.z.string()]),intensity:Ge.z.number(),groundColor:Ge.z.union([Ge.z.number(),Ge.z.string()])}),Pqe=Ge.z.object({color:Ge.z.union([Ge.z.number(),Ge.z.string()]),intensity:Ge.z.number(),position:Ge.z.object({x:Ge.z.number(),y:Ge.z.number(),z:Ge.z.number()}),distance:Ge.z.number(),decay:Ge.z.number()}),Rqe=Ge.z.object({color:Ge.z.union([Ge.z.number(),Ge.z.string()]),intensity:Ge.z.number(),position:Ge.z.object({x:Ge.z.number(),y:Ge.z.number(),z:Ge.z.number()}),target:Ge.z.object({x:Ge.z.number(),y:Ge.z.number(),z:Ge.z.number()}),distance:Ge.z.number(),decay:Ge.z.number(),angle:Ge.z.number(),penumbra:Ge.z.number()}),Dqe=Ge.z.record(Ge.z.object({name:Ge.z.string().optional(),lights:Ge.z.record(Ge.z.object({name:Ge.z.string().optional(),type:Ge.z.string(),order:Ge.z.number().optional(),properties:Ge.z.union([Mqe,kqe,Cqe,Pqe,Rqe])}))})),Oqe=Ge.z.object({build_date:Ge.z.string().optional(),build_version:Ge.z.string().optional(),settings_version:Ge.z.string(),ar:Ge.z.object({enable:Ge.z.boolean(),autoScaling:Ge.z.boolean()}).optional(),camera:Ge.z.object({cameraId:Ge.z.string(),cameras:xqe}),environment:Ge.z.object({clearAlpha:Ge.z.number(),clearColor:Ge.z.string(),map:Ge.z.union([Ge.z.string(),Ge.z.string().array()]),mapAsBackground:Ge.z.boolean(),mapResolution:Ge.z.string()}),environmentGeometry:Ge.z.object({gridColor:Ge.z.string(),gridVisibility:Ge.z.boolean(),groundPlaneColor:Ge.z.string(),groundPlaneVisibility:Ge.z.boolean()}),general:Ge.z.object({transformation:Ge.z.object({scale:Ge.z.object({x:Ge.z.number(),y:Ge.z.number(),z:Ge.z.number()}),translation:Ge.z.object({x:Ge.z.number(),y:Ge.z.number(),z:Ge.z.number()}),rotation:Ge.z.object({x:Ge.z.number(),y:Ge.z.number(),z:Ge.z.number()})}),blurWhenBusy:Ge.z.boolean(),commitSettings:Ge.z.boolean(),commitParameters:Ge.z.boolean(),pointSize:Ge.z.number(),showMessages:Ge.z.boolean()}),light:Ge.z.object({lightSceneId:Ge.z.string().optional(),lightScenes:Dqe}),rendering:Ge.z.object({ambientOcclusion:Ge.z.boolean(),ambientOcclusionIntensity:Ge.z.number().min(0),beautyRenderDelay:Ge.z.number(),beautyRenderBlendingDuration:Ge.z.number(),outputEncoding:Ge.z.string(),physicallyCorrectLights:Ge.z.boolean(),shadows:Ge.z.boolean(),textureEncoding:Ge.z.string(),toneMapping:Ge.z.string(),toneMappingExposure:Ge.z.number()}),session:Ge.z.record(Ge.z.object({order:Ge.z.number().optional(),displayname:Ge.z.string().optional(),hidden:Ge.z.boolean().optional()}))}).strict(),Iqe=t=>{t=Oqe.parse(t)};m9.validate=Iqe;var o4={};Object.defineProperty(o4,"__esModule",{value:!0});o4.convertToPrevious=o4.convertFromPrevious=void 0;const Nqe=Q4,Lqe=K4,zqe=(t,e)=>{const n=Lqe.Defaults(),i=t;return n.ar=i.ar,n.build_date=i.build_date,n.build_version=i.build_version,n.camera=i.camera,n.environment=i.environment,n.general=i.general,n.light=i.light,n.environmentGeometry.gridVisibility=i.environmentGeometry.gridVisibility,n.environmentGeometry.groundPlaneVisibility=i.environmentGeometry.groundPlaneVisibility,n.rendering.ambientOcclusion=i.rendering.ambientOcclusion,n.rendering.ambientOcclusionIntensity=i.rendering.ambientOcclusionIntensity,n.rendering.beautyRenderBlendingDuration=i.rendering.beautyRenderBlendingDuration,n.rendering.beautyRenderDelay=i.rendering.beautyRenderDelay,n.rendering.shadows=i.rendering.shadows,n.session=i.session,e==="3.0"?(n.environmentGeometry.gridColor="#ffffff",n.environmentGeometry.groundPlaneColor="#d3d3d3",n.rendering.outputEncoding="linear",n.rendering.physicallyCorrectLights=!1,n.rendering.textureEncoding="linear",n.rendering.toneMapping="none",n.rendering.toneMappingExposure=1):(n.environmentGeometry.gridColor="#ffffff",n.environmentGeometry.groundPlaneColor="#d3d3d3",n.rendering.outputEncoding="srgb",n.rendering.physicallyCorrectLights=!1,n.rendering.textureEncoding="srgb",n.rendering.toneMapping="none",n.rendering.toneMappingExposure=1),n};o4.convertFromPrevious=zqe;const Bqe=(t,e)=>{const n=Nqe.Defaults(),i=t;return n.ar=i.ar,n.build_date=i.build_date,n.build_version=i.build_version,n.camera=i.camera,n.environment=i.environment,n.environmentGeometry.gridVisibility=i.environmentGeometry.gridVisibility,n.environmentGeometry.groundPlaneVisibility=i.environmentGeometry.groundPlaneVisibility,n.general=i.general,n.light=i.light,n.rendering.ambientOcclusion=i.rendering.ambientOcclusion,n.rendering.ambientOcclusionIntensity=i.rendering.ambientOcclusionIntensity,n.rendering.beautyRenderBlendingDuration=i.rendering.beautyRenderBlendingDuration,n.rendering.beautyRenderDelay=i.rendering.beautyRenderDelay,n.rendering.shadows=i.rendering.shadows,n.session=i.session,n};o4.convertToPrevious=Bqe;var J4={};Object.defineProperty(J4,"__esModule",{value:!0});J4.Defaults=void 0;const Uqe=()=>({build_date:"",build_version:"",settings_version:"3.2",ar:{enable:!0,autoScaling:!0},camera:{cameraId:"",cameras:{}},environment:{clearAlpha:1,clearColor:"#ffffff",map:"photo_studio",mapAsBackground:!1,mapResolution:"1024"},environmentGeometry:{gridColor:"#44444426",gridVisibility:!0,groundPlaneColor:"#636363ff",groundPlaneVisibility:!0,groundPlaneShadowColor:"#d3d3d3ff",groundPlaneShadowVisibility:!1},general:{transformation:{scale:{x:1,y:1,z:1},translation:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},blurWhenBusy:!0,commitSettings:!1,commitParameters:!1,pointSize:1,showMessages:!0},light:{lightSceneId:"",lightScenes:{}},rendering:{ambientOcclusion:!1,ambientOcclusionIntensity:.1,beautyRenderDelay:50,beautyRenderBlendingDuration:1500,lights:!0,outputEncoding:"srgb",physicallyCorrectLights:!0,shadows:!0,textureEncoding:"srgb",toneMapping:"none",toneMappingExposure:1},session:{}});J4.Defaults=Uqe;var g9={};Object.defineProperty(g9,"__esModule",{value:!0});g9.validate=void 0;const Fe=Sp,Fqe=Fe.z.object({autoRotationSpeed:Fe.z.number(),damping:Fe.z.number(),enableAutoRotation:Fe.z.boolean(),enableKeyPan:Fe.z.boolean(),enablePan:Fe.z.boolean(),enableRotation:Fe.z.boolean(),enableZoom:Fe.z.boolean(),input:Fe.z.object({keys:Fe.z.object({up:Fe.z.number(),down:Fe.z.number(),left:Fe.z.number(),right:Fe.z.number()}),mouse:Fe.z.object({rotate:Fe.z.number(),zoom:Fe.z.number(),pan:Fe.z.number()}),touch:Fe.z.object({rotate:Fe.z.number(),zoom:Fe.z.number(),pan:Fe.z.number()})}),keyPanSpeed:Fe.z.number(),movementSmoothness:Fe.z.number(),restrictions:Fe.z.object({position:Fe.z.object({cube:Fe.z.object({min:Fe.z.object({x:Fe.z.number().nullable(),y:Fe.z.number().nullable(),z:Fe.z.number().nullable()}),max:Fe.z.object({x:Fe.z.number().nullable(),y:Fe.z.number().nullable(),z:Fe.z.number().nullable()})}),sphere:Fe.z.object({center:Fe.z.object({x:Fe.z.number(),y:Fe.z.number(),z:Fe.z.number()}),radius:Fe.z.number().nullable()})}),target:Fe.z.object({cube:Fe.z.object({min:Fe.z.object({x:Fe.z.number().nullable(),y:Fe.z.number().nullable(),z:Fe.z.number().nullable()}),max:Fe.z.object({x:Fe.z.number().nullable(),y:Fe.z.number().nullable(),z:Fe.z.number().nullable()})}),sphere:Fe.z.object({center:Fe.z.object({x:Fe.z.number(),y:Fe.z.number(),z:Fe.z.number()}),radius:Fe.z.number().nullable()})}),rotation:Fe.z.object({minPolarAngle:Fe.z.number(),maxPolarAngle:Fe.z.number(),minAzimuthAngle:Fe.z.number().nullable(),maxAzimuthAngle:Fe.z.number().nullable()}),zoom:Fe.z.object({minDistance:Fe.z.number(),maxDistance:Fe.z.number().nullable()})}),rotationSpeed:Fe.z.number(),panSpeed:Fe.z.number(),zoomSpeed:Fe.z.number()}),Vqe=Fe.z.object({damping:Fe.z.number(),enableKeyPan:Fe.z.boolean(),enablePan:Fe.z.boolean(),enableZoom:Fe.z.boolean(),input:Fe.z.object({keys:Fe.z.object({up:Fe.z.number(),down:Fe.z.number(),left:Fe.z.number(),right:Fe.z.number()}),mouse:Fe.z.object({rotate:Fe.z.number(),zoom:Fe.z.number(),pan:Fe.z.number()}),touch:Fe.z.object({rotate:Fe.z.number(),zoom:Fe.z.number(),pan:Fe.z.number()})}),keyPanSpeed:Fe.z.number(),movementSmoothness:Fe.z.number(),panSpeed:Fe.z.number(),zoomSpeed:Fe.z.number()}),Gqe=Fe.z.object({name:Fe.z.string().optional(),type:Fe.z.string(),autoAdjust:Fe.z.boolean(),cameraMovementDuration:Fe.z.number(),controls:Vqe,enableCameraControls:Fe.z.boolean(),position:Fe.z.object({x:Fe.z.number().nullable(),y:Fe.z.number().nullable(),z:Fe.z.number().nullable()}),revertAtMouseUp:Fe.z.boolean(),revertAtMouseUpDuration:Fe.z.number(),target:Fe.z.object({x:Fe.z.number().nullable(),y:Fe.z.number().nullable(),z:Fe.z.number().nullable()}),zoomExtentsFactor:Fe.z.number().positive()}),jqe=Fe.z.object({name:Fe.z.string().optional(),type:Fe.z.string(),autoAdjust:Fe.z.boolean(),cameraMovementDuration:Fe.z.number(),controls:Fqe,enableCameraControls:Fe.z.boolean(),fov:Fe.z.number().positive(),position:Fe.z.object({x:Fe.z.number().nullable(),y:Fe.z.number().nullable(),z:Fe.z.number().nullable()}),revertAtMouseUp:Fe.z.boolean(),revertAtMouseUpDuration:Fe.z.number(),target:Fe.z.object({x:Fe.z.number().nullable(),y:Fe.z.number().nullable(),z:Fe.z.number().nullable()}),zoomExtentsFactor:Fe.z.number().positive()}),Hqe=Fe.z.record(Fe.z.union([jqe,Gqe])),$qe=Fe.z.object({color:Fe.z.union([Fe.z.number(),Fe.z.string()]),intensity:Fe.z.number()}),Wqe=Fe.z.object({color:Fe.z.union([Fe.z.number(),Fe.z.string()]),intensity:Fe.z.number(),direction:Fe.z.object({x:Fe.z.number(),y:Fe.z.number(),z:Fe.z.number()}),castShadow:Fe.z.boolean(),shadowMapResolution:Fe.z.number().optional(),shadowMapBias:Fe.z.number().optional()}),Yqe=Fe.z.object({skyColor:Fe.z.union([Fe.z.number(),Fe.z.string()]),intensity:Fe.z.number(),groundColor:Fe.z.union([Fe.z.number(),Fe.z.string()])}),qqe=Fe.z.object({color:Fe.z.union([Fe.z.number(),Fe.z.string()]),intensity:Fe.z.number(),position:Fe.z.object({x:Fe.z.number(),y:Fe.z.number(),z:Fe.z.number()}),distance:Fe.z.number(),decay:Fe.z.number()}),Xqe=Fe.z.object({color:Fe.z.union([Fe.z.number(),Fe.z.string()]),intensity:Fe.z.number(),position:Fe.z.object({x:Fe.z.number(),y:Fe.z.number(),z:Fe.z.number()}),target:Fe.z.object({x:Fe.z.number(),y:Fe.z.number(),z:Fe.z.number()}),distance:Fe.z.number(),decay:Fe.z.number(),angle:Fe.z.number(),penumbra:Fe.z.number()}),Zqe=Fe.z.record(Fe.z.object({name:Fe.z.string().optional(),lights:Fe.z.record(Fe.z.object({name:Fe.z.string().optional(),type:Fe.z.string(),order:Fe.z.number().optional(),properties:Fe.z.union([$qe,Wqe,Yqe,qqe,Xqe])}))})),Qqe=Fe.z.object({build_date:Fe.z.string().optional(),build_version:Fe.z.string().optional(),settings_version:Fe.z.string(),ar:Fe.z.object({enable:Fe.z.boolean(),autoScaling:Fe.z.boolean()}).optional(),camera:Fe.z.object({cameraId:Fe.z.string(),cameras:Hqe}),environment:Fe.z.object({clearAlpha:Fe.z.number(),clearColor:Fe.z.string(),map:Fe.z.union([Fe.z.string(),Fe.z.string().array()]),mapAsBackground:Fe.z.boolean(),mapResolution:Fe.z.string()}),environmentGeometry:Fe.z.object({gridColor:Fe.z.string(),gridVisibility:Fe.z.boolean(),groundPlaneColor:Fe.z.string(),groundPlaneVisibility:Fe.z.boolean(),groundPlaneShadowColor:Fe.z.string(),groundPlaneShadowVisibility:Fe.z.boolean()}),general:Fe.z.object({transformation:Fe.z.object({scale:Fe.z.object({x:Fe.z.number(),y:Fe.z.number(),z:Fe.z.number()}),translation:Fe.z.object({x:Fe.z.number(),y:Fe.z.number(),z:Fe.z.number()}),rotation:Fe.z.object({x:Fe.z.number(),y:Fe.z.number(),z:Fe.z.number()})}),blurWhenBusy:Fe.z.boolean(),commitSettings:Fe.z.boolean(),commitParameters:Fe.z.boolean(),pointSize:Fe.z.number(),showMessages:Fe.z.boolean()}),light:Fe.z.object({lightSceneId:Fe.z.string().optional(),lightScenes:Zqe}),rendering:Fe.z.object({ambientOcclusion:Fe.z.boolean(),ambientOcclusionIntensity:Fe.z.number().min(0),beautyRenderDelay:Fe.z.number(),beautyRenderBlendingDuration:Fe.z.number(),lights:Fe.z.boolean(),outputEncoding:Fe.z.string(),physicallyCorrectLights:Fe.z.boolean(),shadows:Fe.z.boolean(),textureEncoding:Fe.z.string(),toneMapping:Fe.z.string(),toneMappingExposure:Fe.z.number()}),session:Fe.z.record(Fe.z.object({order:Fe.z.number().optional(),displayname:Fe.z.string().optional(),hidden:Fe.z.boolean().optional()}))}).strict(),Kqe=t=>{t=Qqe.parse(t)};g9.validate=Kqe;var a4={};Object.defineProperty(a4,"__esModule",{value:!0});a4.convertToPrevious=a4.convertFromPrevious=void 0;const Jqe=K4,eXe=J4,tXe=(t,e)=>{const n=eXe.Defaults(),i=t;return n.ar=i.ar,n.build_date=i.build_date,n.build_version=i.build_version,n.camera=i.camera,n.general=i.general,n.light=i.light,n.session=i.session,n.environment.clearAlpha=i.environment.clearAlpha,n.environment.clearColor=i.environment.clearColor,n.environment.map=i.environment.map,n.environment.mapAsBackground=i.environment.mapAsBackground,n.environment.mapResolution=i.environment.mapResolution,n.environmentGeometry.gridColor=i.environmentGeometry.gridColor,n.environmentGeometry.gridVisibility=i.environmentGeometry.gridVisibility,n.environmentGeometry.groundPlaneColor=i.environmentGeometry.groundPlaneColor,n.environmentGeometry.groundPlaneVisibility=i.environmentGeometry.groundPlaneVisibility,n.rendering.ambientOcclusion=i.rendering.ambientOcclusion,n.rendering.ambientOcclusionIntensity=i.rendering.ambientOcclusionIntensity,n.rendering.beautyRenderBlendingDuration=i.rendering.beautyRenderBlendingDuration,n.rendering.beautyRenderDelay=i.rendering.beautyRenderDelay,n.rendering.outputEncoding=i.rendering.outputEncoding,n.rendering.physicallyCorrectLights=i.rendering.physicallyCorrectLights,n.rendering.shadows=i.rendering.shadows,n.rendering.textureEncoding=i.rendering.textureEncoding,n.rendering.toneMapping=i.rendering.toneMapping,n.rendering.toneMappingExposure=i.rendering.toneMappingExposure,n};a4.convertFromPrevious=tXe;const nXe=(t,e)=>{const n=Jqe.Defaults(),i=t;return n.ar=i.ar,n.build_date=i.build_date,n.build_version=i.build_version,n.camera=i.camera,n.general=i.general,n.light=i.light,n.session=i.session,n.environment.clearAlpha=i.environment.clearAlpha,n.environment.clearColor=i.environment.clearColor,n.environment.map=i.environment.map,n.environment.mapAsBackground=i.environment.mapAsBackground,n.environment.mapResolution=i.environment.mapResolution,n.environmentGeometry.gridColor=i.environmentGeometry.gridColor,n.environmentGeometry.gridVisibility=i.environmentGeometry.gridVisibility,n.environmentGeometry.groundPlaneColor=i.environmentGeometry.groundPlaneColor,n.environmentGeometry.groundPlaneVisibility=i.environmentGeometry.groundPlaneVisibility,n.rendering.ambientOcclusion=i.rendering.ambientOcclusion,n.rendering.ambientOcclusionIntensity=i.rendering.ambientOcclusionIntensity,n.rendering.beautyRenderBlendingDuration=i.rendering.beautyRenderBlendingDuration,n.rendering.beautyRenderDelay=i.rendering.beautyRenderDelay,n.rendering.outputEncoding=i.rendering.outputEncoding,n.rendering.physicallyCorrectLights=i.rendering.physicallyCorrectLights,n.rendering.shadows=i.rendering.shadows,n.rendering.textureEncoding=i.rendering.textureEncoding,n.rendering.toneMapping=i.rendering.toneMapping,n.rendering.toneMappingExposure=i.rendering.toneMappingExposure,n};a4.convertToPrevious=nXe;var eA={};Object.defineProperty(eA,"__esModule",{value:!0});eA.Defaults=void 0;const rXe=()=>({build_date:"",build_version:"",settings_version:"3.3",ar:{enable:!0,autoScaling:!0},camera:{cameraId:"",cameras:{}},environment:{clearAlpha:1,clearColor:"#ffffff",map:"photo_studio",mapAsBackground:!1,mapResolution:"1024"},environmentGeometry:{gridColor:"#44444426",gridVisibility:!0,groundPlaneColor:"#636363ff",groundPlaneVisibility:!0,groundPlaneShadowColor:"#d3d3d3ff",groundPlaneShadowVisibility:!1},general:{transformation:{scale:{x:1,y:1,z:1},translation:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},blurWhenBusy:!0,commitSettings:!1,commitParameters:!1,pointSize:1,showMessages:!0},light:{lightSceneId:"",lightScenes:{}},rendering:{ambientOcclusion:!1,ambientOcclusionIntensity:.1,automaticColorAdjustment:!0,beautyRenderDelay:50,beautyRenderBlendingDuration:1500,lights:!0,outputEncoding:"srgb",physicallyCorrectLights:!0,shadows:!0,textureEncoding:"srgb",toneMapping:"none",toneMappingExposure:1},session:{}});eA.Defaults=rXe;var v9={};Object.defineProperty(v9,"__esModule",{value:!0});v9.validate=void 0;const Be=Sp,iXe=Be.z.object({autoRotationSpeed:Be.z.number(),damping:Be.z.number(),enableAutoRotation:Be.z.boolean(),enableKeyPan:Be.z.boolean(),enablePan:Be.z.boolean(),enableRotation:Be.z.boolean(),enableZoom:Be.z.boolean(),input:Be.z.object({keys:Be.z.object({up:Be.z.number(),down:Be.z.number(),left:Be.z.number(),right:Be.z.number()}),mouse:Be.z.object({rotate:Be.z.number(),zoom:Be.z.number(),pan:Be.z.number()}),touch:Be.z.object({rotate:Be.z.number(),zoom:Be.z.number(),pan:Be.z.number()})}),keyPanSpeed:Be.z.number(),movementSmoothness:Be.z.number(),restrictions:Be.z.object({position:Be.z.object({cube:Be.z.object({min:Be.z.object({x:Be.z.number().nullable(),y:Be.z.number().nullable(),z:Be.z.number().nullable()}),max:Be.z.object({x:Be.z.number().nullable(),y:Be.z.number().nullable(),z:Be.z.number().nullable()})}),sphere:Be.z.object({center:Be.z.object({x:Be.z.number(),y:Be.z.number(),z:Be.z.number()}),radius:Be.z.number().nullable()})}),target:Be.z.object({cube:Be.z.object({min:Be.z.object({x:Be.z.number().nullable(),y:Be.z.number().nullable(),z:Be.z.number().nullable()}),max:Be.z.object({x:Be.z.number().nullable(),y:Be.z.number().nullable(),z:Be.z.number().nullable()})}),sphere:Be.z.object({center:Be.z.object({x:Be.z.number(),y:Be.z.number(),z:Be.z.number()}),radius:Be.z.number().nullable()})}),rotation:Be.z.object({minPolarAngle:Be.z.number(),maxPolarAngle:Be.z.number(),minAzimuthAngle:Be.z.number().nullable(),maxAzimuthAngle:Be.z.number().nullable()}),zoom:Be.z.object({minDistance:Be.z.number(),maxDistance:Be.z.number().nullable()})}),rotationSpeed:Be.z.number(),panSpeed:Be.z.number(),zoomSpeed:Be.z.number()}),sXe=Be.z.object({damping:Be.z.number(),enableKeyPan:Be.z.boolean(),enablePan:Be.z.boolean(),enableZoom:Be.z.boolean(),input:Be.z.object({keys:Be.z.object({up:Be.z.number(),down:Be.z.number(),left:Be.z.number(),right:Be.z.number()}),mouse:Be.z.object({rotate:Be.z.number(),zoom:Be.z.number(),pan:Be.z.number()}),touch:Be.z.object({rotate:Be.z.number(),zoom:Be.z.number(),pan:Be.z.number()})}),keyPanSpeed:Be.z.number(),movementSmoothness:Be.z.number(),panSpeed:Be.z.number(),zoomSpeed:Be.z.number()}),oXe=Be.z.object({name:Be.z.string().optional(),type:Be.z.string(),autoAdjust:Be.z.boolean(),cameraMovementDuration:Be.z.number(),controls:sXe,enableCameraControls:Be.z.boolean(),position:Be.z.object({x:Be.z.number().nullable(),y:Be.z.number().nullable(),z:Be.z.number().nullable()}),revertAtMouseUp:Be.z.boolean(),revertAtMouseUpDuration:Be.z.number(),target:Be.z.object({x:Be.z.number().nullable(),y:Be.z.number().nullable(),z:Be.z.number().nullable()}),zoomExtentsFactor:Be.z.number().positive()}),aXe=Be.z.object({name:Be.z.string().optional(),type:Be.z.string(),autoAdjust:Be.z.boolean(),cameraMovementDuration:Be.z.number(),controls:iXe,enableCameraControls:Be.z.boolean(),fov:Be.z.number().positive(),position:Be.z.object({x:Be.z.number().nullable(),y:Be.z.number().nullable(),z:Be.z.number().nullable()}),revertAtMouseUp:Be.z.boolean(),revertAtMouseUpDuration:Be.z.number(),target:Be.z.object({x:Be.z.number().nullable(),y:Be.z.number().nullable(),z:Be.z.number().nullable()}),zoomExtentsFactor:Be.z.number().positive()}),lXe=Be.z.record(Be.z.union([aXe,oXe])),cXe=Be.z.object({color:Be.z.union([Be.z.number(),Be.z.string()]),intensity:Be.z.number()}),uXe=Be.z.object({color:Be.z.union([Be.z.number(),Be.z.string()]),intensity:Be.z.number(),direction:Be.z.object({x:Be.z.number(),y:Be.z.number(),z:Be.z.number()}),castShadow:Be.z.boolean(),shadowMapResolution:Be.z.number().optional(),shadowMapBias:Be.z.number().optional()}),fXe=Be.z.object({skyColor:Be.z.union([Be.z.number(),Be.z.string()]),intensity:Be.z.number(),groundColor:Be.z.union([Be.z.number(),Be.z.string()])}),dXe=Be.z.object({color:Be.z.union([Be.z.number(),Be.z.string()]),intensity:Be.z.number(),position:Be.z.object({x:Be.z.number(),y:Be.z.number(),z:Be.z.number()}),distance:Be.z.number(),decay:Be.z.number()}),hXe=Be.z.object({color:Be.z.union([Be.z.number(),Be.z.string()]),intensity:Be.z.number(),position:Be.z.object({x:Be.z.number(),y:Be.z.number(),z:Be.z.number()}),target:Be.z.object({x:Be.z.number(),y:Be.z.number(),z:Be.z.number()}),distance:Be.z.number(),decay:Be.z.number(),angle:Be.z.number(),penumbra:Be.z.number()}),pXe=Be.z.record(Be.z.object({name:Be.z.string().optional(),lights:Be.z.record(Be.z.object({name:Be.z.string().optional(),type:Be.z.string(),order:Be.z.number().optional(),properties:Be.z.union([cXe,uXe,fXe,dXe,hXe])}))})),mXe=Be.z.object({build_date:Be.z.string().optional(),build_version:Be.z.string().optional(),settings_version:Be.z.string(),ar:Be.z.object({enable:Be.z.boolean(),autoScaling:Be.z.boolean()}).optional(),camera:Be.z.object({cameraId:Be.z.string(),cameras:lXe}),environment:Be.z.object({clearAlpha:Be.z.number(),clearColor:Be.z.string(),map:Be.z.union([Be.z.string(),Be.z.string().array()]),mapAsBackground:Be.z.boolean(),mapResolution:Be.z.string()}),environmentGeometry:Be.z.object({gridColor:Be.z.string(),gridVisibility:Be.z.boolean(),groundPlaneColor:Be.z.string(),groundPlaneVisibility:Be.z.boolean(),groundPlaneShadowColor:Be.z.string(),groundPlaneShadowVisibility:Be.z.boolean()}),general:Be.z.object({transformation:Be.z.object({scale:Be.z.object({x:Be.z.number(),y:Be.z.number(),z:Be.z.number()}),translation:Be.z.object({x:Be.z.number(),y:Be.z.number(),z:Be.z.number()}),rotation:Be.z.object({x:Be.z.number(),y:Be.z.number(),z:Be.z.number()})}),blurWhenBusy:Be.z.boolean(),commitSettings:Be.z.boolean(),commitParameters:Be.z.boolean(),pointSize:Be.z.number(),showMessages:Be.z.boolean()}),light:Be.z.object({lightSceneId:Be.z.string().optional(),lightScenes:pXe}),rendering:Be.z.object({ambientOcclusion:Be.z.boolean(),ambientOcclusionIntensity:Be.z.number().min(0),automaticColorAdjustment:Be.z.boolean(),beautyRenderDelay:Be.z.number(),beautyRenderBlendingDuration:Be.z.number(),lights:Be.z.boolean(),outputEncoding:Be.z.string(),physicallyCorrectLights:Be.z.boolean(),shadows:Be.z.boolean(),textureEncoding:Be.z.string(),toneMapping:Be.z.string(),toneMappingExposure:Be.z.number()}),session:Be.z.record(Be.z.object({order:Be.z.number().optional(),displayname:Be.z.string().optional(),hidden:Be.z.boolean().optional()}))}).strict(),gXe=t=>{t=mXe.parse(t)};v9.validate=gXe;var l4={};Object.defineProperty(l4,"__esModule",{value:!0});l4.convertToPrevious=l4.convertFromPrevious=void 0;const vXe=J4,_Xe=eA,yXe=(t,e)=>{const n=_Xe.Defaults(),i=t;return n.ar=i.ar,n.build_date=i.build_date,n.build_version=i.build_version,n.camera=i.camera,n.general=i.general,n.light=i.light,n.session=i.session,n.environment=i.environment,n.environmentGeometry=i.environmentGeometry,n.rendering.ambientOcclusion=i.rendering.ambientOcclusion,n.rendering.ambientOcclusionIntensity=i.rendering.ambientOcclusionIntensity,n.rendering.automaticColorAdjustment=!1,n.rendering.beautyRenderBlendingDuration=i.rendering.beautyRenderBlendingDuration,n.rendering.beautyRenderDelay=i.rendering.beautyRenderDelay,n.rendering.outputEncoding=i.rendering.outputEncoding,n.rendering.physicallyCorrectLights=i.rendering.physicallyCorrectLights,n.rendering.shadows=i.rendering.shadows,n.rendering.textureEncoding=i.rendering.textureEncoding,n.rendering.toneMapping=i.rendering.toneMapping,n.rendering.toneMappingExposure=i.rendering.toneMappingExposure,n};l4.convertFromPrevious=yXe;const bXe=(t,e)=>{const n=vXe.Defaults(),i=t;return n.ar=i.ar,n.build_date=i.build_date,n.build_version=i.build_version,n.camera=i.camera,n.general=i.general,n.light=i.light,n.session=i.session,n.environment=i.environment,n.environmentGeometry=i.environmentGeometry,n.rendering.ambientOcclusion=i.rendering.ambientOcclusion,n.rendering.ambientOcclusionIntensity=i.rendering.ambientOcclusionIntensity,n.rendering.beautyRenderBlendingDuration=i.rendering.beautyRenderBlendingDuration,n.rendering.beautyRenderDelay=i.rendering.beautyRenderDelay,n.rendering.outputEncoding=i.rendering.outputEncoding,n.rendering.physicallyCorrectLights=i.rendering.physicallyCorrectLights,n.rendering.shadows=i.rendering.shadows,n.rendering.textureEncoding=i.rendering.textureEncoding,n.rendering.toneMapping=i.rendering.toneMapping,n.rendering.toneMappingExposure=i.rendering.toneMappingExposure,n};l4.convertToPrevious=bXe;var tA={};Object.defineProperty(tA,"__esModule",{value:!0});tA.Defaults=void 0;const AXe=()=>({build_date:"",build_version:"",settings_version:"3.4",ar:{enable:!0,autoScaling:!0},camera:{cameraId:"",cameras:{}},environment:{clearAlpha:1,clearColor:"#ffffff",map:"photo_studio",mapAsBackground:!1,mapResolution:"1024",rotation:{x:0,y:0,z:0,w:1},intensity:1,blurriness:0},environmentGeometry:{gridColor:"#44444426",gridVisibility:!0,groundPlaneColor:"#636363ff",groundPlaneVisibility:!0,groundPlaneShadowColor:"#d3d3d3ff",groundPlaneShadowVisibility:!1},general:{transformation:{scale:{x:1,y:1,z:1},translation:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},blurWhenBusy:!0,commitSettings:!1,commitParameters:!1,pointSize:1,showMessages:!0,defaultMaterialColor:"#199b9bff"},light:{lightSceneId:"",lightScenes:{}},rendering:{ambientOcclusion:!1,ambientOcclusionIntensity:.1,automaticColorAdjustment:!0,beautyRenderDelay:50,beautyRenderBlendingDuration:1500,lights:!0,outputEncoding:"srgb",physicallyCorrectLights:!0,shadows:!0,textureEncoding:"srgb",toneMapping:"none",toneMappingExposure:1},session:{}});tA.Defaults=AXe;var _9={};Object.defineProperty(_9,"__esModule",{value:!0});_9.validate=void 0;const ze=Sp,wXe=ze.z.object({autoRotationSpeed:ze.z.number(),damping:ze.z.number(),enableAutoRotation:ze.z.boolean(),enableKeyPan:ze.z.boolean(),enablePan:ze.z.boolean(),enableRotation:ze.z.boolean(),enableZoom:ze.z.boolean(),input:ze.z.object({keys:ze.z.object({up:ze.z.number(),down:ze.z.number(),left:ze.z.number(),right:ze.z.number()}),mouse:ze.z.object({rotate:ze.z.number(),zoom:ze.z.number(),pan:ze.z.number()}),touch:ze.z.object({rotate:ze.z.number(),zoom:ze.z.number(),pan:ze.z.number()})}),keyPanSpeed:ze.z.number(),movementSmoothness:ze.z.number(),restrictions:ze.z.object({position:ze.z.object({cube:ze.z.object({min:ze.z.object({x:ze.z.number().nullable(),y:ze.z.number().nullable(),z:ze.z.number().nullable()}),max:ze.z.object({x:ze.z.number().nullable(),y:ze.z.number().nullable(),z:ze.z.number().nullable()})}),sphere:ze.z.object({center:ze.z.object({x:ze.z.number(),y:ze.z.number(),z:ze.z.number()}),radius:ze.z.number().nullable()})}),target:ze.z.object({cube:ze.z.object({min:ze.z.object({x:ze.z.number().nullable(),y:ze.z.number().nullable(),z:ze.z.number().nullable()}),max:ze.z.object({x:ze.z.number().nullable(),y:ze.z.number().nullable(),z:ze.z.number().nullable()})}),sphere:ze.z.object({center:ze.z.object({x:ze.z.number(),y:ze.z.number(),z:ze.z.number()}),radius:ze.z.number().nullable()})}),rotation:ze.z.object({minPolarAngle:ze.z.number(),maxPolarAngle:ze.z.number(),minAzimuthAngle:ze.z.number().nullable(),maxAzimuthAngle:ze.z.number().nullable()}),zoom:ze.z.object({minDistance:ze.z.number(),maxDistance:ze.z.number().nullable()})}),rotationSpeed:ze.z.number(),panSpeed:ze.z.number(),zoomSpeed:ze.z.number()}),EXe=ze.z.object({damping:ze.z.number(),enableKeyPan:ze.z.boolean(),enablePan:ze.z.boolean(),enableZoom:ze.z.boolean(),input:ze.z.object({keys:ze.z.object({up:ze.z.number(),down:ze.z.number(),left:ze.z.number(),right:ze.z.number()}),mouse:ze.z.object({rotate:ze.z.number(),zoom:ze.z.number(),pan:ze.z.number()}),touch:ze.z.object({rotate:ze.z.number(),zoom:ze.z.number(),pan:ze.z.number()})}),keyPanSpeed:ze.z.number(),movementSmoothness:ze.z.number(),panSpeed:ze.z.number(),zoomSpeed:ze.z.number()}),SXe=ze.z.object({name:ze.z.string().optional(),type:ze.z.string(),autoAdjust:ze.z.boolean(),cameraMovementDuration:ze.z.number(),controls:EXe,enableCameraControls:ze.z.boolean(),position:ze.z.object({x:ze.z.number().nullable(),y:ze.z.number().nullable(),z:ze.z.number().nullable()}),revertAtMouseUp:ze.z.boolean(),revertAtMouseUpDuration:ze.z.number(),target:ze.z.object({x:ze.z.number().nullable(),y:ze.z.number().nullable(),z:ze.z.number().nullable()}),zoomExtentsFactor:ze.z.number().positive()}),TXe=ze.z.object({name:ze.z.string().optional(),type:ze.z.string(),autoAdjust:ze.z.boolean(),cameraMovementDuration:ze.z.number(),controls:wXe,enableCameraControls:ze.z.boolean(),fov:ze.z.number().positive(),position:ze.z.object({x:ze.z.number().nullable(),y:ze.z.number().nullable(),z:ze.z.number().nullable()}),revertAtMouseUp:ze.z.boolean(),revertAtMouseUpDuration:ze.z.number(),target:ze.z.object({x:ze.z.number().nullable(),y:ze.z.number().nullable(),z:ze.z.number().nullable()}),zoomExtentsFactor:ze.z.number().positive()}),xXe=ze.z.record(ze.z.union([TXe,SXe])),MXe=ze.z.object({color:ze.z.union([ze.z.number(),ze.z.string()]),intensity:ze.z.number()}),kXe=ze.z.object({color:ze.z.union([ze.z.number(),ze.z.string()]),intensity:ze.z.number(),direction:ze.z.object({x:ze.z.number(),y:ze.z.number(),z:ze.z.number()}),castShadow:ze.z.boolean(),shadowMapResolution:ze.z.number().optional(),shadowMapBias:ze.z.number().optional()}),CXe=ze.z.object({skyColor:ze.z.union([ze.z.number(),ze.z.string()]),intensity:ze.z.number(),groundColor:ze.z.union([ze.z.number(),ze.z.string()])}),PXe=ze.z.object({color:ze.z.union([ze.z.number(),ze.z.string()]),intensity:ze.z.number(),position:ze.z.object({x:ze.z.number(),y:ze.z.number(),z:ze.z.number()}),distance:ze.z.number(),decay:ze.z.number()}),RXe=ze.z.object({color:ze.z.union([ze.z.number(),ze.z.string()]),intensity:ze.z.number(),position:ze.z.object({x:ze.z.number(),y:ze.z.number(),z:ze.z.number()}),target:ze.z.object({x:ze.z.number(),y:ze.z.number(),z:ze.z.number()}),distance:ze.z.number(),decay:ze.z.number(),angle:ze.z.number(),penumbra:ze.z.number()}),DXe=ze.z.record(ze.z.object({name:ze.z.string().optional(),lights:ze.z.record(ze.z.object({name:ze.z.string().optional(),type:ze.z.string(),order:ze.z.number().optional(),properties:ze.z.union([MXe,kXe,CXe,PXe,RXe])}))})),OXe=ze.z.object({build_date:ze.z.string().optional(),build_version:ze.z.string().optional(),settings_version:ze.z.string(),ar:ze.z.object({enable:ze.z.boolean(),autoScaling:ze.z.boolean()}).optional(),camera:ze.z.object({cameraId:ze.z.string(),cameras:xXe}),environment:ze.z.object({clearAlpha:ze.z.number(),clearColor:ze.z.string(),map:ze.z.union([ze.z.string(),ze.z.string().array()]),mapAsBackground:ze.z.boolean(),mapResolution:ze.z.string(),rotation:ze.z.object({x:ze.z.number(),y:ze.z.number(),z:ze.z.number(),w:ze.z.number()}),blurriness:ze.z.number(),intensity:ze.z.number()}),environmentGeometry:ze.z.object({gridColor:ze.z.string(),gridVisibility:ze.z.boolean(),groundPlaneColor:ze.z.string(),groundPlaneVisibility:ze.z.boolean(),groundPlaneShadowColor:ze.z.string(),groundPlaneShadowVisibility:ze.z.boolean()}),general:ze.z.object({transformation:ze.z.object({scale:ze.z.object({x:ze.z.number(),y:ze.z.number(),z:ze.z.number()}),translation:ze.z.object({x:ze.z.number(),y:ze.z.number(),z:ze.z.number()}),rotation:ze.z.object({x:ze.z.number(),y:ze.z.number(),z:ze.z.number()})}),blurWhenBusy:ze.z.boolean(),commitSettings:ze.z.boolean(),commitParameters:ze.z.boolean(),pointSize:ze.z.number(),showMessages:ze.z.boolean(),defaultMaterialColor:ze.z.string()}),light:ze.z.object({lightSceneId:ze.z.string().optional(),lightScenes:DXe}),rendering:ze.z.object({ambientOcclusion:ze.z.boolean(),ambientOcclusionIntensity:ze.z.number().min(0),automaticColorAdjustment:ze.z.boolean(),beautyRenderDelay:ze.z.number(),beautyRenderBlendingDuration:ze.z.number(),lights:ze.z.boolean(),outputEncoding:ze.z.string(),physicallyCorrectLights:ze.z.boolean(),shadows:ze.z.boolean(),textureEncoding:ze.z.string(),toneMapping:ze.z.string(),toneMappingExposure:ze.z.number()}),session:ze.z.record(ze.z.object({order:ze.z.number().optional(),displayname:ze.z.string().optional(),hidden:ze.z.boolean().optional()}))}).strict(),IXe=t=>{t=OXe.parse(t)};_9.validate=IXe;var c4={};Object.defineProperty(c4,"__esModule",{value:!0});c4.convertToPrevious=c4.convertFromPrevious=void 0;const NXe=eA,LXe=tA,zXe=(t,e)=>{const n=LXe.Defaults(),i=t;return n.ar=i.ar,n.build_date=i.build_date,n.build_version=i.build_version,n.camera=i.camera,n.light=i.light,n.session=i.session,n.environmentGeometry=i.environmentGeometry,n.rendering=i.rendering,n.general.transformation=i.general.transformation,n.general.blurWhenBusy=i.general.blurWhenBusy,n.general.commitSettings=i.general.commitSettings,n.general.commitParameters=i.general.commitParameters,n.general.pointSize=i.general.pointSize,n.general.showMessages=i.general.showMessages,n.general.defaultMaterialColor="#199b9bff",n.environment.clearAlpha=i.environment.clearAlpha,n.environment.clearColor=i.environment.clearColor,n.environment.map=i.environment.map,n.environment.mapAsBackground=i.environment.mapAsBackground,n.environment.mapResolution=i.environment.mapResolution,n.environment.rotation={x:0,y:0,z:0,w:1},n.environment.blurriness=0,n.environment.intensity=1,n};c4.convertFromPrevious=zXe;const BXe=(t,e)=>{const n=NXe.Defaults(),i=t;return n.ar=i.ar,n.build_date=i.build_date,n.build_version=i.build_version,n.camera=i.camera,n.light=i.light,n.session=i.session,n.environmentGeometry=i.environmentGeometry,n.rendering=i.rendering,n.general.transformation=i.general.transformation,n.general.blurWhenBusy=i.general.blurWhenBusy,n.general.commitSettings=i.general.commitSettings,n.general.commitParameters=i.general.commitParameters,n.general.pointSize=i.general.pointSize,n.general.showMessages=i.general.showMessages,n.environment.clearAlpha=i.environment.clearAlpha,n.environment.clearColor=i.environment.clearColor,n.environment.map=i.environment.map,n.environment.mapAsBackground=i.environment.mapAsBackground,n.environment.mapResolution=i.environment.mapResolution,n};c4.convertToPrevious=BXe;var nA={};Object.defineProperty(nA,"__esModule",{value:!0});nA.Defaults=void 0;const UXe=()=>({build_date:"",build_version:"",settings_version:"4.0",ar:{enable:!0,autoScaling:!0},camera:{cameraId:"",cameras:{}},environment:{clearAlpha:1,clearColor:"#ffffff",map:"photo_studio",mapAsBackground:!1,mapResolution:"1024",rotation:{x:0,y:0,z:0,w:1},intensity:1,blurriness:0},environmentGeometry:{gridColor:"#44444426",gridVisibility:!0,groundPlaneColor:"#636363ff",groundPlaneVisibility:!0,groundPlaneShadowColor:"#d3d3d3ff",groundPlaneShadowVisibility:!1},general:{transformation:{scale:{x:1,y:1,z:1},translation:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},blurWhenBusy:!0,commitSettings:!1,commitParameters:!1,pointSize:1,showMessages:!0,defaultMaterialColor:"#199b9bff"},light:{lightSceneId:"",lightScenes:{}},postprocessing:{antiAliasingTechnique:"smaa",antiAliasingTechniqueMobile:"fxaa",enablePostProcessingOnMobile:!0,ssaaSampleLevel:2,effects:[]},rendering:{automaticColorAdjustment:!0,beautyRenderDelay:50,beautyRenderBlendingDuration:1500,lights:!0,outputEncoding:"srgb",physicallyCorrectLights:!0,shadows:!0,softShadows:!0,textureEncoding:"srgb",toneMapping:"none",toneMappingExposure:1},session:{}});nA.Defaults=UXe;var j6={};Object.defineProperty(j6,"__esModule",{value:!0});j6.validate=void 0;const Ae=Sp,FXe=Ae.z.object({autoRotationSpeed:Ae.z.number(),damping:Ae.z.number(),enableAutoRotation:Ae.z.boolean(),enableKeyPan:Ae.z.boolean(),enablePan:Ae.z.boolean(),enableRotation:Ae.z.boolean(),enableZoom:Ae.z.boolean(),input:Ae.z.object({keys:Ae.z.object({up:Ae.z.number(),down:Ae.z.number(),left:Ae.z.number(),right:Ae.z.number()}),mouse:Ae.z.object({rotate:Ae.z.number(),zoom:Ae.z.number(),pan:Ae.z.number()}),touch:Ae.z.object({rotate:Ae.z.number(),zoom:Ae.z.number(),pan:Ae.z.number()})}),keyPanSpeed:Ae.z.number(),movementSmoothness:Ae.z.number(),restrictions:Ae.z.object({position:Ae.z.object({cube:Ae.z.object({min:Ae.z.object({x:Ae.z.number().nullable(),y:Ae.z.number().nullable(),z:Ae.z.number().nullable()}),max:Ae.z.object({x:Ae.z.number().nullable(),y:Ae.z.number().nullable(),z:Ae.z.number().nullable()})}),sphere:Ae.z.object({center:Ae.z.object({x:Ae.z.number(),y:Ae.z.number(),z:Ae.z.number()}),radius:Ae.z.number().nullable()})}),target:Ae.z.object({cube:Ae.z.object({min:Ae.z.object({x:Ae.z.number().nullable(),y:Ae.z.number().nullable(),z:Ae.z.number().nullable()}),max:Ae.z.object({x:Ae.z.number().nullable(),y:Ae.z.number().nullable(),z:Ae.z.number().nullable()})}),sphere:Ae.z.object({center:Ae.z.object({x:Ae.z.number(),y:Ae.z.number(),z:Ae.z.number()}),radius:Ae.z.number().nullable()})}),rotation:Ae.z.object({minPolarAngle:Ae.z.number(),maxPolarAngle:Ae.z.number(),minAzimuthAngle:Ae.z.number().nullable(),maxAzimuthAngle:Ae.z.number().nullable()}),zoom:Ae.z.object({minDistance:Ae.z.number(),maxDistance:Ae.z.number().nullable()})}),rotationSpeed:Ae.z.number(),panSpeed:Ae.z.number(),zoomSpeed:Ae.z.number()}),VXe=Ae.z.object({damping:Ae.z.number(),enableKeyPan:Ae.z.boolean(),enablePan:Ae.z.boolean(),enableZoom:Ae.z.boolean(),input:Ae.z.object({keys:Ae.z.object({up:Ae.z.number(),down:Ae.z.number(),left:Ae.z.number(),right:Ae.z.number()}),mouse:Ae.z.object({rotate:Ae.z.number(),zoom:Ae.z.number(),pan:Ae.z.number()}),touch:Ae.z.object({rotate:Ae.z.number(),zoom:Ae.z.number(),pan:Ae.z.number()})}),keyPanSpeed:Ae.z.number(),movementSmoothness:Ae.z.number(),panSpeed:Ae.z.number(),zoomSpeed:Ae.z.number()}),GXe=Ae.z.object({name:Ae.z.string().optional(),type:Ae.z.string(),autoAdjust:Ae.z.boolean(),cameraMovementDuration:Ae.z.number(),controls:VXe,enableCameraControls:Ae.z.boolean(),position:Ae.z.object({x:Ae.z.number().nullable(),y:Ae.z.number().nullable(),z:Ae.z.number().nullable()}),revertAtMouseUp:Ae.z.boolean(),revertAtMouseUpDuration:Ae.z.number(),target:Ae.z.object({x:Ae.z.number().nullable(),y:Ae.z.number().nullable(),z:Ae.z.number().nullable()}),zoomExtentsFactor:Ae.z.number().positive()}),jXe=Ae.z.object({name:Ae.z.string().optional(),type:Ae.z.string(),autoAdjust:Ae.z.boolean(),cameraMovementDuration:Ae.z.number(),controls:FXe,enableCameraControls:Ae.z.boolean(),fov:Ae.z.number().positive(),position:Ae.z.object({x:Ae.z.number().nullable(),y:Ae.z.number().nullable(),z:Ae.z.number().nullable()}),revertAtMouseUp:Ae.z.boolean(),revertAtMouseUpDuration:Ae.z.number(),target:Ae.z.object({x:Ae.z.number().nullable(),y:Ae.z.number().nullable(),z:Ae.z.number().nullable()}),zoomExtentsFactor:Ae.z.number().positive()}),HXe=Ae.z.record(Ae.z.union([jXe,GXe])),$Xe=Ae.z.object({color:Ae.z.union([Ae.z.number(),Ae.z.string()]),intensity:Ae.z.number()}),WXe=Ae.z.object({color:Ae.z.union([Ae.z.number(),Ae.z.string()]),intensity:Ae.z.number(),direction:Ae.z.object({x:Ae.z.number(),y:Ae.z.number(),z:Ae.z.number()}),castShadow:Ae.z.boolean(),shadowMapResolution:Ae.z.number().optional(),shadowMapBias:Ae.z.number().optional()}),YXe=Ae.z.object({skyColor:Ae.z.union([Ae.z.number(),Ae.z.string()]),intensity:Ae.z.number(),groundColor:Ae.z.union([Ae.z.number(),Ae.z.string()])}),qXe=Ae.z.object({color:Ae.z.union([Ae.z.number(),Ae.z.string()]),intensity:Ae.z.number(),position:Ae.z.object({x:Ae.z.number(),y:Ae.z.number(),z:Ae.z.number()}),distance:Ae.z.number(),decay:Ae.z.number()}),XXe=Ae.z.object({color:Ae.z.union([Ae.z.number(),Ae.z.string()]),intensity:Ae.z.number(),position:Ae.z.object({x:Ae.z.number(),y:Ae.z.number(),z:Ae.z.number()}),target:Ae.z.object({x:Ae.z.number(),y:Ae.z.number(),z:Ae.z.number()}),distance:Ae.z.number(),decay:Ae.z.number(),angle:Ae.z.number(),penumbra:Ae.z.number()}),ZXe=Ae.z.record(Ae.z.object({name:Ae.z.string().optional(),lights:Ae.z.record(Ae.z.object({name:Ae.z.string().optional(),type:Ae.z.string(),order:Ae.z.number().optional(),properties:Ae.z.union([$Xe,WXe,YXe,qXe,XXe])}))})),QXe=Ae.z.object({properties:Ae.z.object({blendFunction:Ae.z.number().optional(),intensity:Ae.z.number().optional(),kernelSize:Ae.z.number().optional(),luminanceSmoothing:Ae.z.number().optional(),luminanceThreshold:Ae.z.number().optional(),mipmapBlur:Ae.z.boolean()}).optional(),type:Ae.z.string()}),KXe=Ae.z.object({properties:Ae.z.object({blendFunction:Ae.z.number().optional(),modulationOffset:Ae.z.number().optional(),offset:Ae.z.object({x:Ae.z.number(),y:Ae.z.number()}).optional(),radialModulation:Ae.z.boolean().optional()}).optional(),type:Ae.z.string()}),JXe=Ae.z.object({properties:Ae.z.object({blendFunction:Ae.z.number().optional(),bokehScale:Ae.z.number().optional(),focusDistance:Ae.z.number().optional(),focusRange:Ae.z.number().optional()}).optional(),type:Ae.z.string()}),eZe=Ae.z.object({properties:Ae.z.object({angle:Ae.z.number().optional(),blendFunction:Ae.z.number().optional(),scale:Ae.z.number().optional()}).optional(),type:Ae.z.string()}),tZe=Ae.z.object({properties:Ae.z.object({blendFunction:Ae.z.number().optional(),scale:Ae.z.number().optional()}).optional(),type:Ae.z.string()}),nZe=Ae.z.object({properties:Ae.z.object({resolutionScale:Ae.z.number().optional(),spp:Ae.z.number().optional(),distance:Ae.z.number().optional(),distanceIntensity:Ae.z.number().optional(),intensity:Ae.z.number().optional(),color:Ae.z.string().optional(),bias:Ae.z.number().optional(),thickness:Ae.z.number().optional(),iterations:Ae.z.number().optional(),radius:Ae.z.number().optional(),rings:Ae.z.number().optional(),lumaPhi:Ae.z.number().optional(),depthPhi:Ae.z.number().optional(),normalPhi:Ae.z.number().optional(),samples:Ae.z.number().optional()}).optional(),type:Ae.z.string()}),rZe=Ae.z.object({properties:Ae.z.object({blendFunction:Ae.z.number().optional(),hue:Ae.z.number().optional(),saturation:Ae.z.number().optional()}).optional(),type:Ae.z.string()}),iZe=Ae.z.object({properties:Ae.z.object({blendFunction:Ae.z.number().optional(),premultiply:Ae.z.boolean().optional()}).optional(),type:Ae.z.string()}),sZe=Ae.z.object({properties:Ae.z.object({blendFunction:Ae.z.number().optional(),granularity:Ae.z.number().optional()}).optional(),type:Ae.z.string()}),oZe=Ae.z.object({properties:Ae.z.object({blendFunction:Ae.z.number().optional(),density:Ae.z.number().optional()}).optional(),type:Ae.z.string()}),aZe=Ae.z.object({properties:Ae.z.object({resolutionScale:Ae.z.number().optional(),spp:Ae.z.number().optional(),distance:Ae.z.number().optional(),distanceIntensity:Ae.z.number().optional(),intensity:Ae.z.number().optional(),color:Ae.z.string().optional(),iterations:Ae.z.number().optional(),radius:Ae.z.number().optional(),rings:Ae.z.number().optional(),lumaPhi:Ae.z.number().optional(),depthPhi:Ae.z.number().optional(),normalPhi:Ae.z.number().optional(),samples:Ae.z.number().optional()}).optional(),type:Ae.z.string()}),lZe=Ae.z.object({properties:Ae.z.object({blendFunction:Ae.z.number().optional(),feather:Ae.z.number().optional(),focusArea:Ae.z.number().optional(),kernelSize:Ae.z.number().optional(),offset:Ae.z.number().optional(),rotation:Ae.z.number().optional()}).optional(),type:Ae.z.string()}),cZe=Ae.z.object({properties:Ae.z.object({blendFunction:Ae.z.number().optional(),darkness:Ae.z.number().optional(),offset:Ae.z.number().optional(),technique:Ae.z.number().optional()}).optional(),type:Ae.z.string()}),uZe=Ae.z.array(Ae.z.union([QXe,KXe,JXe,eZe,tZe,nZe,rZe,iZe,sZe,oZe,aZe,lZe,cZe])),fZe=Ae.z.object({build_date:Ae.z.string().optional(),build_version:Ae.z.string().optional(),settings_version:Ae.z.string(),ar:Ae.z.object({enable:Ae.z.boolean(),autoScaling:Ae.z.boolean()}).optional(),camera:Ae.z.object({cameraId:Ae.z.string(),cameras:HXe}),environment:Ae.z.object({clearAlpha:Ae.z.number(),clearColor:Ae.z.string(),map:Ae.z.union([Ae.z.string(),Ae.z.string().array()]),mapAsBackground:Ae.z.boolean(),mapResolution:Ae.z.string(),rotation:Ae.z.object({x:Ae.z.number(),y:Ae.z.number(),z:Ae.z.number(),w:Ae.z.number()}),blurriness:Ae.z.number(),intensity:Ae.z.number()}),environmentGeometry:Ae.z.object({gridColor:Ae.z.string(),gridVisibility:Ae.z.boolean(),groundPlaneColor:Ae.z.string(),groundPlaneVisibility:Ae.z.boolean(),groundPlaneShadowColor:Ae.z.string(),groundPlaneShadowVisibility:Ae.z.boolean()}),general:Ae.z.object({transformation:Ae.z.object({scale:Ae.z.object({x:Ae.z.number(),y:Ae.z.number(),z:Ae.z.number()}),translation:Ae.z.object({x:Ae.z.number(),y:Ae.z.number(),z:Ae.z.number()}),rotation:Ae.z.object({x:Ae.z.number(),y:Ae.z.number(),z:Ae.z.number()})}),blurWhenBusy:Ae.z.boolean(),commitSettings:Ae.z.boolean(),commitParameters:Ae.z.boolean(),pointSize:Ae.z.number(),showMessages:Ae.z.boolean(),defaultMaterialColor:Ae.z.string()}),light:Ae.z.object({lightSceneId:Ae.z.string().optional(),lightScenes:ZXe}),postprocessing:Ae.z.object({antiAliasingTechnique:Ae.z.string(),antiAliasingTechniqueMobile:Ae.z.string(),enablePostProcessingOnMobile:Ae.z.boolean(),ssaaSampleLevel:Ae.z.number(),effects:uZe}),rendering:Ae.z.object({automaticColorAdjustment:Ae.z.boolean(),beautyRenderDelay:Ae.z.number(),beautyRenderBlendingDuration:Ae.z.number(),lights:Ae.z.boolean(),outputEncoding:Ae.z.string(),physicallyCorrectLights:Ae.z.boolean(),shadows:Ae.z.boolean(),softShadows:Ae.z.boolean(),textureEncoding:Ae.z.string(),toneMapping:Ae.z.string(),toneMappingExposure:Ae.z.number()}),session:Ae.z.record(Ae.z.object({order:Ae.z.number().optional(),displayname:Ae.z.string().optional(),hidden:Ae.z.boolean().optional()}))}).strict(),dZe=t=>{t=fZe.parse(t)};j6.validate=dZe;var u4={};Object.defineProperty(u4,"__esModule",{value:!0});u4.convertToPrevious=u4.convertFromPrevious=void 0;const hZe=tA,pZe=nA,mZe=(t,e)=>{const n=pZe.Defaults(),i=t;return n.ar=i.ar,n.build_date=i.build_date,n.build_version=i.build_version,n.camera=i.camera,n.general=i.general,n.light=i.light,n.session=i.session,n.environment=i.environment,n.environmentGeometry=i.environmentGeometry,n.rendering.automaticColorAdjustment=i.rendering.automaticColorAdjustment,n.rendering.beautyRenderDelay=i.rendering.beautyRenderDelay,n.rendering.beautyRenderBlendingDuration=i.rendering.beautyRenderBlendingDuration,n.rendering.lights=i.rendering.lights,n.rendering.outputEncoding=i.rendering.outputEncoding,n.rendering.physicallyCorrectLights=i.rendering.physicallyCorrectLights,n.rendering.shadows=i.rendering.shadows,n.rendering.textureEncoding=i.rendering.textureEncoding,n.rendering.toneMapping=i.rendering.toneMapping,n.rendering.toneMappingExposure=i.rendering.toneMappingExposure,n};u4.convertFromPrevious=mZe;const gZe=(t,e)=>{const n=hZe.Defaults(),i=t;return n.ar=i.ar,n.build_date=i.build_date,n.build_version=i.build_version,n.camera=i.camera,n.general=i.general,n.light=i.light,n.session=i.session,n.environment=i.environment,n.environmentGeometry=i.environmentGeometry,n.rendering.ambientOcclusion=!1,n.rendering.ambientOcclusionIntensity=.1,n.rendering.automaticColorAdjustment=i.rendering.automaticColorAdjustment,n.rendering.beautyRenderDelay=i.rendering.beautyRenderDelay,n.rendering.beautyRenderBlendingDuration=i.rendering.beautyRenderBlendingDuration,n.rendering.lights=i.rendering.lights,n.rendering.outputEncoding=i.rendering.outputEncoding,n.rendering.physicallyCorrectLights=i.rendering.physicallyCorrectLights,n.rendering.shadows=i.rendering.shadows,n.rendering.textureEncoding=i.rendering.textureEncoding,n.rendering.toneMapping=i.rendering.toneMapping,n.rendering.toneMappingExposure=i.rendering.toneMappingExposure,n};u4.convertToPrevious=gZe;var rA={};Object.defineProperty(rA,"__esModule",{value:!0});rA.Defaults=void 0;const vZe=()=>({build_date:"",build_version:"",settings_version:"4.1",ar:{enable:!0,autoScaling:!0},camera:{cameraId:"",cameras:{}},environment:{clearAlpha:1,clearColor:"#ffffff",map:"photo_studio",mapAsBackground:!1,mapResolution:"1024",rotation:{x:0,y:0,z:0,w:1},intensity:1,blurriness:0},environmentGeometry:{gridColor:"#44444426",gridVisibility:!1,groundPlaneColor:"#636363ff",groundPlaneVisibility:!0,groundPlaneShadowColor:"#d3d3d3ff",groundPlaneShadowVisibility:!1},general:{transformation:{scale:{x:1,y:1,z:1},translation:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},blurWhenBusy:!0,commitSettings:!1,commitParameters:!1,pointSize:1,showMessages:!0,defaultMaterialColor:"#199b9bff"},light:{lightSceneId:"",lightScenes:{}},postprocessing:{antiAliasingTechnique:"smaa",antiAliasingTechniqueMobile:"fxaa",enablePostProcessingOnMobile:!0,ssaaSampleLevel:2,effects:[{properties:{resolutionScale:1,spp:8,distance:1,distanceIntensity:1,intensity:2.5,color:"#000000",iterations:1,radius:15,rings:4,lumaPhi:10,depthPhi:2,normalPhi:3.25,samples:16},type:"ssao"}]},rendering:{automaticColorAdjustment:!0,beautyRenderDelay:50,beautyRenderBlendingDuration:1500,lights:!0,outputEncoding:"srgb",physicallyCorrectLights:!0,shadows:!0,softShadows:!0,textureEncoding:"srgb",toneMapping:"none",toneMappingExposure:1},session:{}});rA.Defaults=vZe;var Mve={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.validate=void 0;const e=j6;Object.defineProperty(t,"validate",{enumerable:!0,get:function(){return e.validate}})})(Mve);var f4={};Object.defineProperty(f4,"__esModule",{value:!0});f4.convertToPrevious=f4.convertFromPrevious=void 0;const _Ze=nA,Tse=rA,yZe=(t,e)=>{const n=Tse.Defaults(),i=t;return n.ar=i.ar,n.build_date=i.build_date,n.build_version=i.build_version,n.camera=i.camera,n.general=i.general,n.light=i.light,n.session=i.session,n.environment=i.environment,n.environmentGeometry=i.environmentGeometry,n.rendering=i.rendering,n.postprocessing.antiAliasingTechnique=i.postprocessing.antiAliasingTechnique,n.postprocessing.antiAliasingTechniqueMobile=i.postprocessing.antiAliasingTechniqueMobile,n.postprocessing.enablePostProcessingOnMobile=i.postprocessing.enablePostProcessingOnMobile,n.postprocessing.ssaaSampleLevel=i.postprocessing.ssaaSampleLevel,n.postprocessing.effects=i.postprocessing.effects,n.postprocessing.effects.find(l=>l.type==="ssao")||n.postprocessing.effects.push(Tse.Defaults().postprocessing.effects.find(l=>l.type==="ssao")),n};f4.convertFromPrevious=yZe;const bZe=(t,e)=>{const n=_Ze.Defaults(),i=t;return n.ar=i.ar,n.build_date=i.build_date,n.build_version=i.build_version,n.camera=i.camera,n.general=i.general,n.light=i.light,n.rendering=i.rendering,n.session=i.session,n.environment=i.environment,n.environmentGeometry=i.environmentGeometry,n.postprocessing=i.postprocessing,n};f4.convertToPrevious=bZe;var H6={};Object.defineProperty(H6,"__esModule",{value:!0});H6.Defaults=void 0;const AZe=()=>({build_date:"",build_version:"",settings_version:"4.1",ar:{enable:!0,autoScaling:!0},camera:{cameraId:"",cameras:{}},environment:{clearAlpha:1,clearColor:"#ffffff",map:"photo_studio",mapAsBackground:!1,mapResolution:"1024",rotation:{x:0,y:0,z:0,w:1},intensity:1,blurriness:0},environmentGeometry:{gridColor:"#44444426",gridVisibility:!1,groundPlaneColor:"#636363ff",groundPlaneVisibility:!0,groundPlaneShadowColor:"#d3d3d3ff",groundPlaneShadowVisibility:!1},general:{transformation:{scale:{x:1,y:1,z:1},translation:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}},blurWhenBusy:!0,commitSettings:!1,commitParameters:!1,pointSize:1,showMessages:!0,defaultMaterialColor:"#199b9bff"},light:{lightSceneId:"",lightScenes:{}},postprocessing:{antiAliasingTechnique:"smaa",antiAliasingTechniqueMobile:"fxaa",enablePostProcessingOnMobile:!0,ssaaSampleLevel:2,effects:[{properties:{resolutionScale:1,spp:8,distance:1,distanceIntensity:1,intensity:2.5,color:"#000000",iterations:1,radius:15,rings:4,lumaPhi:10,depthPhi:2,normalPhi:3.25,samples:16},type:"ssao"}]},rendering:{automaticColorAdjustment:!0,beautyRenderDelay:50,beautyRenderBlendingDuration:1500,lights:!0,outputEncoding:"srgb",physicallyCorrectLights:!0,shadows:!0,softShadows:!0,textureEncoding:"srgb",toneMapping:"none",toneMappingExposure:1},session:{}});H6.Defaults=AZe;var y9={};Object.defineProperty(y9,"__esModule",{value:!0});y9.validate=void 0;const Ee=Sp,wZe=Ee.z.object({autoRotationSpeed:Ee.z.number(),damping:Ee.z.number(),enableAutoRotation:Ee.z.boolean(),enableKeyPan:Ee.z.boolean(),enablePan:Ee.z.boolean(),enableRotation:Ee.z.boolean(),enableZoom:Ee.z.boolean(),input:Ee.z.object({keys:Ee.z.object({up:Ee.z.number(),down:Ee.z.number(),left:Ee.z.number(),right:Ee.z.number()}),mouse:Ee.z.object({rotate:Ee.z.number(),zoom:Ee.z.number(),pan:Ee.z.number()}),touch:Ee.z.object({rotate:Ee.z.number(),zoom:Ee.z.number(),pan:Ee.z.number()})}),keyPanSpeed:Ee.z.number(),movementSmoothness:Ee.z.number(),restrictions:Ee.z.object({position:Ee.z.object({cube:Ee.z.object({min:Ee.z.object({x:Ee.z.number().nullable(),y:Ee.z.number().nullable(),z:Ee.z.number().nullable()}),max:Ee.z.object({x:Ee.z.number().nullable(),y:Ee.z.number().nullable(),z:Ee.z.number().nullable()})}),sphere:Ee.z.object({center:Ee.z.object({x:Ee.z.number(),y:Ee.z.number(),z:Ee.z.number()}),radius:Ee.z.number().nullable()})}),target:Ee.z.object({cube:Ee.z.object({min:Ee.z.object({x:Ee.z.number().nullable(),y:Ee.z.number().nullable(),z:Ee.z.number().nullable()}),max:Ee.z.object({x:Ee.z.number().nullable(),y:Ee.z.number().nullable(),z:Ee.z.number().nullable()})}),sphere:Ee.z.object({center:Ee.z.object({x:Ee.z.number(),y:Ee.z.number(),z:Ee.z.number()}),radius:Ee.z.number().nullable()})}),rotation:Ee.z.object({minPolarAngle:Ee.z.number(),maxPolarAngle:Ee.z.number(),minAzimuthAngle:Ee.z.number().nullable(),maxAzimuthAngle:Ee.z.number().nullable()}),zoom:Ee.z.object({minDistance:Ee.z.number(),maxDistance:Ee.z.number().nullable()})}),rotationSpeed:Ee.z.number(),panSpeed:Ee.z.number(),zoomSpeed:Ee.z.number(),enableAzimuthRotation:Ee.z.boolean(),enableObjectControls:Ee.z.boolean(),enablePolarRotation:Ee.z.boolean(),enableTurntableControls:Ee.z.boolean(),objectControlsCenter:Ee.z.object({x:Ee.z.number(),y:Ee.z.number(),z:Ee.z.number()}),turntableCenter:Ee.z.object({x:Ee.z.number(),y:Ee.z.number(),z:Ee.z.number()})}),kve=Ee.z.object({name:Ee.z.string().optional(),type:Ee.z.string(),autoAdjust:Ee.z.boolean(),cameraMovementDuration:Ee.z.number(),controls:wZe,enableCameraControls:Ee.z.boolean(),position:Ee.z.object({x:Ee.z.number().nullable(),y:Ee.z.number().nullable(),z:Ee.z.number().nullable()}),revertAtMouseUp:Ee.z.boolean(),revertAtMouseUpDuration:Ee.z.number(),target:Ee.z.object({x:Ee.z.number().nullable(),y:Ee.z.number().nullable(),z:Ee.z.number().nullable()}),zoomExtentsFactor:Ee.z.number().positive(),sceneRotation:Ee.z.object({x:Ee.z.number(),y:Ee.z.number()})}),EZe=kve.extend({fov:Ee.z.number().positive()}),SZe=Ee.z.record(Ee.z.union([EZe,kve])),TZe=Ee.z.object({color:Ee.z.union([Ee.z.number(),Ee.z.string()]),intensity:Ee.z.number()}),xZe=Ee.z.object({color:Ee.z.union([Ee.z.number(),Ee.z.string()]),intensity:Ee.z.number(),direction:Ee.z.object({x:Ee.z.number(),y:Ee.z.number(),z:Ee.z.number()}),castShadow:Ee.z.boolean(),shadowMapResolution:Ee.z.number().optional(),shadowMapBias:Ee.z.number().optional()}),MZe=Ee.z.object({skyColor:Ee.z.union([Ee.z.number(),Ee.z.string()]),intensity:Ee.z.number(),groundColor:Ee.z.union([Ee.z.number(),Ee.z.string()])}),kZe=Ee.z.object({color:Ee.z.union([Ee.z.number(),Ee.z.string()]),intensity:Ee.z.number(),position:Ee.z.object({x:Ee.z.number(),y:Ee.z.number(),z:Ee.z.number()}),distance:Ee.z.number(),decay:Ee.z.number()}),CZe=Ee.z.object({color:Ee.z.union([Ee.z.number(),Ee.z.string()]),intensity:Ee.z.number(),position:Ee.z.object({x:Ee.z.number(),y:Ee.z.number(),z:Ee.z.number()}),target:Ee.z.object({x:Ee.z.number(),y:Ee.z.number(),z:Ee.z.number()}),distance:Ee.z.number(),decay:Ee.z.number(),angle:Ee.z.number(),penumbra:Ee.z.number()}),PZe=Ee.z.record(Ee.z.object({name:Ee.z.string().optional(),lights:Ee.z.record(Ee.z.object({name:Ee.z.string().optional(),type:Ee.z.string(),order:Ee.z.number().optional(),properties:Ee.z.union([TZe,xZe,MZe,kZe,CZe])}))})),RZe=Ee.z.object({properties:Ee.z.object({blendFunction:Ee.z.number().optional(),intensity:Ee.z.number().optional(),kernelSize:Ee.z.number().optional(),luminanceSmoothing:Ee.z.number().optional(),luminanceThreshold:Ee.z.number().optional(),mipmapBlur:Ee.z.boolean()}).optional(),type:Ee.z.string()}),DZe=Ee.z.object({properties:Ee.z.object({blendFunction:Ee.z.number().optional(),modulationOffset:Ee.z.number().optional(),offset:Ee.z.object({x:Ee.z.number(),y:Ee.z.number()}).optional(),radialModulation:Ee.z.boolean().optional()}).optional(),type:Ee.z.string()}),OZe=Ee.z.object({properties:Ee.z.object({blendFunction:Ee.z.number().optional(),bokehScale:Ee.z.number().optional(),focusDistance:Ee.z.number().optional(),focusRange:Ee.z.number().optional()}).optional(),type:Ee.z.string()}),IZe=Ee.z.object({properties:Ee.z.object({angle:Ee.z.number().optional(),blendFunction:Ee.z.number().optional(),scale:Ee.z.number().optional()}).optional(),type:Ee.z.string()}),NZe=Ee.z.object({properties:Ee.z.object({blendFunction:Ee.z.number().optional(),scale:Ee.z.number().optional()}).optional(),type:Ee.z.string()}),LZe=Ee.z.object({properties:Ee.z.object({resolutionScale:Ee.z.number().optional(),spp:Ee.z.number().optional(),distance:Ee.z.number().optional(),distanceIntensity:Ee.z.number().optional(),intensity:Ee.z.number().optional(),color:Ee.z.string().optional(),bias:Ee.z.number().optional(),thickness:Ee.z.number().optional(),iterations:Ee.z.number().optional(),radius:Ee.z.number().optional(),rings:Ee.z.number().optional(),lumaPhi:Ee.z.number().optional(),depthPhi:Ee.z.number().optional(),normalPhi:Ee.z.number().optional(),samples:Ee.z.number().optional()}).optional(),type:Ee.z.string()}),zZe=Ee.z.object({properties:Ee.z.object({blendFunction:Ee.z.number().optional(),hue:Ee.z.number().optional(),saturation:Ee.z.number().optional()}).optional(),type:Ee.z.string()}),BZe=Ee.z.object({properties:Ee.z.object({blendFunction:Ee.z.number().optional(),premultiply:Ee.z.boolean().optional()}).optional(),type:Ee.z.string()}),UZe=Ee.z.object({properties:Ee.z.object({blendFunction:Ee.z.number().optional(),granularity:Ee.z.number().optional()}).optional(),type:Ee.z.string()}),FZe=Ee.z.object({properties:Ee.z.object({blendFunction:Ee.z.number().optional(),density:Ee.z.number().optional()}).optional(),type:Ee.z.string()}),VZe=Ee.z.object({properties:Ee.z.object({resolutionScale:Ee.z.number().optional(),spp:Ee.z.number().optional(),distance:Ee.z.number().optional(),distanceIntensity:Ee.z.number().optional(),intensity:Ee.z.number().optional(),color:Ee.z.string().optional(),iterations:Ee.z.number().optional(),radius:Ee.z.number().optional(),rings:Ee.z.number().optional(),lumaPhi:Ee.z.number().optional(),depthPhi:Ee.z.number().optional(),normalPhi:Ee.z.number().optional(),samples:Ee.z.number().optional()}).optional(),type:Ee.z.string()}),GZe=Ee.z.object({properties:Ee.z.object({blendFunction:Ee.z.number().optional(),feather:Ee.z.number().optional(),focusArea:Ee.z.number().optional(),kernelSize:Ee.z.number().optional(),offset:Ee.z.number().optional(),rotation:Ee.z.number().optional()}).optional(),type:Ee.z.string()}),jZe=Ee.z.object({properties:Ee.z.object({blendFunction:Ee.z.number().optional(),darkness:Ee.z.number().optional(),offset:Ee.z.number().optional(),technique:Ee.z.number().optional()}).optional(),type:Ee.z.string()}),HZe=Ee.z.array(Ee.z.union([RZe,DZe,OZe,IZe,NZe,LZe,zZe,BZe,UZe,FZe,VZe,GZe,jZe])),$Ze=Ee.z.object({build_date:Ee.z.string().optional(),build_version:Ee.z.string().optional(),settings_version:Ee.z.string(),ar:Ee.z.object({enable:Ee.z.boolean(),autoScaling:Ee.z.boolean()}).optional(),camera:Ee.z.object({cameraId:Ee.z.string(),cameras:SZe}),environment:Ee.z.object({clearAlpha:Ee.z.number(),clearColor:Ee.z.string(),map:Ee.z.union([Ee.z.string(),Ee.z.string().array()]),mapAsBackground:Ee.z.boolean(),mapResolution:Ee.z.string(),rotation:Ee.z.object({x:Ee.z.number(),y:Ee.z.number(),z:Ee.z.number(),w:Ee.z.number()}),blurriness:Ee.z.number(),intensity:Ee.z.number()}),environmentGeometry:Ee.z.object({gridColor:Ee.z.string(),gridVisibility:Ee.z.boolean(),groundPlaneColor:Ee.z.string(),groundPlaneVisibility:Ee.z.boolean(),groundPlaneShadowColor:Ee.z.string(),groundPlaneShadowVisibility:Ee.z.boolean()}),general:Ee.z.object({transformation:Ee.z.object({scale:Ee.z.object({x:Ee.z.number(),y:Ee.z.number(),z:Ee.z.number()}),translation:Ee.z.object({x:Ee.z.number(),y:Ee.z.number(),z:Ee.z.number()}),rotation:Ee.z.object({x:Ee.z.number(),y:Ee.z.number(),z:Ee.z.number()})}),blurWhenBusy:Ee.z.boolean(),commitSettings:Ee.z.boolean(),commitParameters:Ee.z.boolean(),pointSize:Ee.z.number(),showMessages:Ee.z.boolean(),defaultMaterialColor:Ee.z.string()}),light:Ee.z.object({lightSceneId:Ee.z.string().optional(),lightScenes:PZe}),postprocessing:Ee.z.object({antiAliasingTechnique:Ee.z.string(),antiAliasingTechniqueMobile:Ee.z.string(),enablePostProcessingOnMobile:Ee.z.boolean(),ssaaSampleLevel:Ee.z.number(),effects:HZe}),rendering:Ee.z.object({automaticColorAdjustment:Ee.z.boolean(),beautyRenderDelay:Ee.z.number(),beautyRenderBlendingDuration:Ee.z.number(),lights:Ee.z.boolean(),outputEncoding:Ee.z.string(),physicallyCorrectLights:Ee.z.boolean(),shadows:Ee.z.boolean(),softShadows:Ee.z.boolean(),textureEncoding:Ee.z.string(),toneMapping:Ee.z.string(),toneMappingExposure:Ee.z.number()}),session:Ee.z.record(Ee.z.object({order:Ee.z.number().optional(),displayname:Ee.z.string().optional(),hidden:Ee.z.boolean().optional()}))}).strict(),WZe=t=>{t=$Ze.parse(t)};y9.validate=WZe;var d4={};Object.defineProperty(d4,"__esModule",{value:!0});d4.convertToPrevious=d4.convertFromPrevious=void 0;const YZe=rA,qZe=H6,XZe=(t,e)=>{const n=qZe.Defaults(),i=t;n.ar=i.ar,n.build_date=i.build_date,n.build_version=i.build_version,n.general=i.general,n.light=i.light,n.session=i.session,n.environment=i.environment,n.environmentGeometry=i.environmentGeometry,n.rendering=i.rendering,n.postprocessing=i.postprocessing,n.camera.cameraId=i.camera.cameraId;for(let o in i.camera.cameras)if(i.camera.cameras[o].type==="perspective"){const l=i.camera.cameras[o];n.camera.cameras[o]={autoAdjust:l.autoAdjust,cameraMovementDuration:l.cameraMovementDuration,controls:{autoRotationSpeed:l.controls.autoRotationSpeed,damping:l.controls.damping,enableAutoRotation:l.controls.enableAutoRotation,enableKeyPan:l.controls.enableKeyPan,enablePan:l.controls.enablePan,enableRotation:l.controls.enableRotation,enableZoom:l.controls.enableZoom,input:l.controls.input,keyPanSpeed:l.controls.keyPanSpeed,movementSmoothness:l.controls.movementSmoothness,restrictions:l.controls.restrictions,rotationSpeed:l.controls.rotationSpeed,panSpeed:l.controls.panSpeed,zoomSpeed:l.controls.zoomSpeed,enableAzimuthRotation:!0,enableObjectControls:!1,enablePolarRotation:!0,enableTurntableControls:!1,objectControlsCenter:{x:0,y:0,z:0},turntableCenter:{x:0,y:0,z:0}},enableCameraControls:l.enableCameraControls,fov:l.fov,name:l.name,position:l.position,revertAtMouseUp:l.revertAtMouseUp,revertAtMouseUpDuration:l.revertAtMouseUpDuration,sceneRotation:{x:0,y:0},target:l.target,type:l.type,zoomExtentsFactor:l.zoomExtentsFactor}}else{const l=i.camera.cameras[o];n.camera.cameras[o]={autoAdjust:l.autoAdjust,cameraMovementDuration:l.cameraMovementDuration,controls:{damping:l.controls.damping,enableKeyPan:l.controls.enableKeyPan,enablePan:l.controls.enablePan,enableZoom:l.controls.enableZoom,input:l.controls.input,keyPanSpeed:l.controls.keyPanSpeed,movementSmoothness:l.controls.movementSmoothness,panSpeed:l.controls.panSpeed,zoomSpeed:l.controls.zoomSpeed,autoRotationSpeed:0,enableAutoRotation:!1,enableAzimuthRotation:!0,enableObjectControls:!1,enablePolarRotation:!0,enableRotation:!0,enableTurntableControls:!1,objectControlsCenter:{x:0,y:0,z:0},restrictions:{position:{cube:{min:{x:-1/0,y:-1/0,z:-1/0},max:{x:1/0,y:1/0,z:1/0}},sphere:{center:{x:0,y:0,z:0},radius:1/0}},rotation:{minPolarAngle:0,maxPolarAngle:180,minAzimuthAngle:-1/0,maxAzimuthAngle:1/0},target:{cube:{min:{x:-1/0,y:-1/0,z:-1/0},max:{x:1/0,y:1/0,z:1/0}},sphere:{center:{x:0,y:0,z:0},radius:1/0}},zoom:{minDistance:0,maxDistance:1/0}},rotationSpeed:0,turntableCenter:{x:0,y:0,z:0}},enableCameraControls:l.enableCameraControls,fov:l.fov,name:l.name,position:l.position,revertAtMouseUp:l.revertAtMouseUp,revertAtMouseUpDuration:l.revertAtMouseUpDuration,sceneRotation:{x:0,y:0},target:l.target,type:l.type,zoomExtentsFactor:l.zoomExtentsFactor}}return n};d4.convertFromPrevious=XZe;const ZZe=(t,e)=>{const n=YZe.Defaults(),i=t;n.ar=i.ar,n.build_date=i.build_date,n.build_version=i.build_version,n.general=i.general,n.light=i.light,n.rendering=i.rendering,n.session=i.session,n.environment=i.environment,n.environmentGeometry=i.environmentGeometry,n.postprocessing=i.postprocessing,n.camera.cameraId=i.camera.cameraId;for(let o in i.camera.cameras)if(i.camera.cameras[o].type==="perspective"){const l=i.camera.cameras[o];n.camera.cameras[o]={autoAdjust:l.autoAdjust,cameraMovementDuration:l.cameraMovementDuration,controls:{autoRotationSpeed:l.controls.autoRotationSpeed,damping:l.controls.damping,enableAutoRotation:l.controls.enableAutoRotation,enableKeyPan:l.controls.enableKeyPan,enablePan:l.controls.enablePan,enableRotation:l.controls.enableRotation,enableZoom:l.controls.enableZoom,input:l.controls.input,keyPanSpeed:l.controls.keyPanSpeed,movementSmoothness:l.controls.movementSmoothness,restrictions:l.controls.restrictions,rotationSpeed:l.controls.rotationSpeed,panSpeed:l.controls.panSpeed,zoomSpeed:l.controls.zoomSpeed},enableCameraControls:l.enableCameraControls,fov:l.fov,name:l.name,position:l.position,revertAtMouseUp:l.revertAtMouseUp,revertAtMouseUpDuration:l.revertAtMouseUpDuration,target:l.target,type:l.type,zoomExtentsFactor:l.zoomExtentsFactor}}else{const l=i.camera.cameras[o];if(l.type==="custom")continue;n.camera.cameras[o]={autoAdjust:l.autoAdjust,cameraMovementDuration:l.cameraMovementDuration,controls:{damping:l.controls.damping,enableKeyPan:l.controls.enableKeyPan,enablePan:l.controls.enablePan,enableZoom:l.controls.enableZoom,input:l.controls.input,keyPanSpeed:l.controls.keyPanSpeed,movementSmoothness:l.controls.movementSmoothness,panSpeed:l.controls.panSpeed,zoomSpeed:l.controls.zoomSpeed},enableCameraControls:l.enableCameraControls,fov:l.fov,name:l.name,position:l.position,revertAtMouseUp:l.revertAtMouseUp,revertAtMouseUpDuration:l.revertAtMouseUpDuration,target:l.target,type:l.type,zoomExtentsFactor:l.zoomExtentsFactor}}return n};d4.convertToPrevious=ZZe;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.latestVersion=t.evaluateSettingsVersion=t.validate=t.convert=t.previousVersion=t.Defaults=t.DefaultsV5=t.DefaultsV4_1=t.DefaultsV4_0=t.DefaultsV3_4=t.DefaultsV3_3=t.DefaultsV3_2=t.DefaultsV3_1=t.DefaultsV3=t.DefaultsV2=t.DefaultsV1=void 0;const e=V6;Object.defineProperty(t,"DefaultsV1",{enumerable:!0,get:function(){return e.Defaults}});const n=l9,i=Z4;Object.defineProperty(t,"DefaultsV2",{enumerable:!0,get:function(){return i.Defaults}});const o=u9,l=i4,d=Q4;Object.defineProperty(t,"DefaultsV3",{enumerable:!0,get:function(){return d.Defaults}});const p=f9,g=s4,v=K4;Object.defineProperty(t,"DefaultsV3_1",{enumerable:!0,get:function(){return v.Defaults}});const _=m9,b=o4,w=J4;Object.defineProperty(t,"DefaultsV3_2",{enumerable:!0,get:function(){return w.Defaults}});const E=g9,S=a4,M=eA;Object.defineProperty(t,"DefaultsV3_3",{enumerable:!0,get:function(){return M.Defaults}});const k=v9,x=l4,C=tA;Object.defineProperty(t,"DefaultsV3_4",{enumerable:!0,get:function(){return C.Defaults}});const P=_9,O=c4,L=nA;Object.defineProperty(t,"DefaultsV4_0",{enumerable:!0,get:function(){return L.Defaults}});const B=j6,V=u4,G=rA;Object.defineProperty(t,"DefaultsV4_1",{enumerable:!0,get:function(){return G.Defaults}});const j=Mve,F=f4,q=H6;Object.defineProperty(t,"DefaultsV5",{enumerable:!0,get:function(){return q.Defaults}}),Object.defineProperty(t,"Defaults",{enumerable:!0,get:function(){return q.Defaults}});const fe=y9,ue=d4;t.previousVersion=["1.0","2.0","3.0","3.1","3.2","3.3","3.4","4.0","4.1"];let J=[];J.push({version:"1.0",defaults:e.Defaults,convertToPrevious:ye=>ye,convertFromPrevious:ye=>ye,validate:n.validate}),J.push({version:"2.0",defaults:i.Defaults,convertToPrevious:l.convertToPrevious,convertFromPrevious:l.convertFromPrevious,validate:o.validate}),J.push({version:"3.0",defaults:d.Defaults,convertToPrevious:g.convertToPrevious,convertFromPrevious:g.convertFromPrevious,validate:p.validate}),J.push({version:"3.1",defaults:v.Defaults,convertToPrevious:b.convertToPrevious,convertFromPrevious:b.convertFromPrevious,validate:_.validate}),J.push({version:"3.2",defaults:w.Defaults,convertToPrevious:S.convertToPrevious,convertFromPrevious:S.convertFromPrevious,validate:E.validate}),J.push({version:"3.3",defaults:M.Defaults,convertToPrevious:x.convertToPrevious,convertFromPrevious:x.convertFromPrevious,validate:k.validate}),J.push({version:"3.4",defaults:C.Defaults,convertToPrevious:O.convertToPrevious,convertFromPrevious:O.convertFromPrevious,validate:P.validate}),J.push({version:"4.0",defaults:L.Defaults,convertToPrevious:V.convertToPrevious,convertFromPrevious:V.convertFromPrevious,validate:B.validate}),J.push({version:"4.1",defaults:G.Defaults,convertToPrevious:F.convertToPrevious,convertFromPrevious:F.convertFromPrevious,validate:j.validate}),J.push({version:"5.0",defaults:q.Defaults,convertToPrevious:ue.convertToPrevious,convertFromPrevious:ue.convertFromPrevious,validate:fe.validate});const le=(ye,pe)=>{const oe=ye.settings_version||"1.0";if(oe===pe)return ye;const Ce=J.findIndex(Oe=>Oe.version===pe),it=J.findIndex(Oe=>Oe.version===oe);if(Ce===-1)throw new Error("ViewerSettings.convert: Target version not available");if(it===-1)throw new Error("ViewerSettings.convert: Settings version not available");let Se=ye;if(Ce<it)for(let Oe=it;Ce<Oe;Oe--)Se=J[Oe].convertToPrevious(Se,oe);else for(let Oe=it+1;Oe<=Ce;Oe++)Se=J[Oe].convertFromPrevious(Se,oe);return Se};t.convert=le;const me=(ye,pe)=>{const oe=ye.settings_version||"1.0";if(pe!==void 0){const Ce=J.findIndex(it=>it.version===pe);if(Ce===-1)throw new Error("ViewerSettings.validate: Target version was not found.");if(oe!==void 0&&oe!==pe)throw new Error("ViewerSettings.validate: The settings do have a different version than the target version.");J[Ce].validate(ye)}else{if(!oe)throw new Error("ViewerSettings.validate: Settings do not have a version specified.");const Ce=J.findIndex(it=>it.version===oe);J[Ce].validate(ye)}};t.validate=me;const be=ye=>{if(!ye||ye.startsWith("1"))return"1.0";if(ye.startsWith("2"))return ye.split(".").map(oe=>{var Ce;return(Ce=oe.match(/^\d+/))===null||Ce===void 0?void 0:Ce[0]}).filter(Boolean).map(oe=>parseInt(oe))[1]>=18?"2.0":"1.0";if(ye.startsWith("3")){const pe=ye.split(".").map(oe=>{var Ce;return(Ce=oe.match(/^\d+/))===null||Ce===void 0?void 0:Ce[0]}).filter(Boolean).map(oe=>parseInt(oe));return pe[1]>=3?"5.0":pe[1]===2&&pe[2]>=11||pe[1]>2?"4.1":pe[1]===2&&pe[2]>=10||pe[1]>2?"4.0":pe[1]===2&&pe[2]>=9||pe[1]>2?"3.4":pe[1]===2&&pe[2]>=7||pe[1]>2?"3.3":pe[1]===2&&pe[2]>=6||pe[1]>2?"3.2":pe[1]===1&&pe[2]>=12||pe[1]>1?"3.1":"3.0"}return"1.0"};t.evaluateSettingsVersion=be,t.latestVersion="5.0"})(a9);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SESSION_SETTINGS_MODE=t.SettingsEngine=void 0;const e=a9,n=rs;class i{constructor(){this._settings=(0,e.Defaults)()}get ar(){return this._settings.ar}get camera(){return this._settings.camera}get environment(){return this._settings.environment}get environmentGeometry(){return this._settings.environmentGeometry}get general(){return this._settings.general}get light(){return this._settings.light}get rendering(){return this._settings.rendering}get session(){return this._settings.session}set session(l){this._settings.session=l}get settings(){return this._settings}get settingsJson(){return this._settingsJson}loadSettings(l){if(this._settingsJson=l,JSON.stringify(l)!==JSON.stringify({})){for(let d=0;d<e.previousVersion.length;d++){const p=e.previousVersion[d];try{(0,e.validate)(l,p),this._settings=(0,e.convert)(l,e.latestVersion),this.cleanSettings(this._settings);return}catch{}}try{(0,e.validate)(l,e.latestVersion),this._settings=(0,e.convert)(l,e.latestVersion),this.cleanSettings(this._settings);return}catch(d){throw new n.ShapeDiverViewerSettingsError("SettingsEngine.loadSettings: Settings could not be validated. "+d.message,d)}}else{this._settings=(0,e.Defaults)();return}}reset(){this._settings=(0,e.Defaults)()}cleanSettings(l){for(const d in l.camera.cameras){const p=l.camera.cameras[d];if(p.type==="perspective"){const g=p.controls.restrictions;g.position.cube.min.x===null&&(g.position.cube.min.x=-1/0),g.position.cube.min.y===null&&(g.position.cube.min.y=-1/0),g.position.cube.min.z===null&&(g.position.cube.min.z=-1/0),g.position.cube.max.x===null&&(g.position.cube.max.x=1/0),g.position.cube.max.y===null&&(g.position.cube.max.y=1/0),g.position.cube.max.z===null&&(g.position.cube.max.z=1/0),g.position.sphere.radius===null&&(g.position.sphere.radius=1/0),g.target.cube.min.x===null&&(g.target.cube.min.x=-1/0),g.target.cube.min.y===null&&(g.target.cube.min.y=-1/0),g.target.cube.min.z===null&&(g.target.cube.min.z=-1/0),g.target.cube.max.x===null&&(g.target.cube.max.x=1/0),g.target.cube.max.y===null&&(g.target.cube.max.y=1/0),g.target.cube.max.z===null&&(g.target.cube.max.z=1/0),g.target.sphere.radius===null&&(g.target.sphere.radius=1/0),g.rotation.minAzimuthAngle===null&&(g.rotation.minAzimuthAngle=-1/0),g.rotation.maxAzimuthAngle===null&&(g.rotation.maxAzimuthAngle=1/0),g.zoom.maxDistance===null&&(g.zoom.maxDistance=1/0)}}}}t.SettingsEngine=i,function(o){o.NONE="none",o.FIRST="first",o.MANUAL="manual"}(t.SESSION_SETTINGS_MODE||(t.SESSION_SETTINGS_MODE={}))})(Cge);var b9={},$6={},QZe=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty($6,"__esModule",{value:!0});$6.StatePromise=void 0;class KZe{constructor(){this._resolved=!1,this._callbacks=[],this._promise=new Promise((e,n)=>{this._resolve=e,this._reject=n}),this._promise.finally(()=>{this._resolved=!0})}get resolved(){return this._resolved}get resolve(){return this._resolve}get reject(){return this._reject}then(e){return QZe(this,void 0,void 0,function*(){this._callbacks.push(e),this.resolved===!0?e():this._promise.then(e)})}reset(){this._resolved=!1,this._promise=new Promise((n,i)=>{this._resolve=n,this._reject=i}),this._promise.finally(()=>{this._resolved=!0});const e=[...this._callbacks];this._callbacks=[];for(let n=0;n<e.length;n++)this.then(e[n])}}$6.StatePromise=KZe;Object.defineProperty(b9,"__esModule",{value:!0});b9.StateEngine=void 0;const xse=$6;class JZe{constructor(){this._fontLoaded=new xse.StatePromise,this._sessionEngines={},this._viewportEngines={},this._fontLoaded=new xse.StatePromise}static get instance(){return this._instance||(this._instance=new this)}get fontLoaded(){return this._fontLoaded}get sessionEngines(){return this._sessionEngines}get viewportEngines(){return this._viewportEngines}}b9.StateEngine=JZe;var A9={},XH={exports:{}};(function(t,e){(function(n,i){var o="0.7.37",l="",d="?",p="function",g="undefined",v="object",_="string",b="major",w="model",E="name",S="type",M="vendor",k="version",x="architecture",C="console",P="mobile",O="tablet",L="smarttv",B="wearable",V="embedded",G=500,j="Amazon",F="Apple",q="ASUS",fe="BlackBerry",ue="Browser",J="Chrome",le="Edge",me="Firefox",be="Google",ye="Huawei",pe="LG",oe="Microsoft",Ce="Motorola",it="Opera",Se="Samsung",Oe="Sharp",ct="Sony",_t="Xiaomi",Nt="Zebra",Je="Facebook",ot="Chromium OS",fn="Mac OS",Ht=function(St,De){var nt={};for(var Et in St)De[Et]&&De[Et].length%2===0?nt[Et]=De[Et].concat(St[Et]):nt[Et]=St[Et];return nt},Re=function(St){for(var De={},nt=0;nt<St.length;nt++)De[St[nt].toUpperCase()]=St[nt];return De},Lt=function(St,De){return typeof St===_?mt(De).indexOf(mt(St))!==-1:!1},mt=function(St){return St.toLowerCase()},ht=function(St){return typeof St===_?St.replace(/[^\d\.]/g,l).split(".")[0]:i},at=function(St,De){if(typeof St===_)return St=St.replace(/^\s\s*/,l),typeof De===g?St:St.substring(0,G)},Mt=function(St,De){for(var nt=0,Et,Qe,lt,xt,ft,Cn;nt<De.length&&!ft;){var Rn=De[nt],dn=De[nt+1];for(Et=Qe=0;Et<Rn.length&&!ft&&Rn[Et];)if(ft=Rn[Et++].exec(St),ft)for(lt=0;lt<dn.length;lt++)Cn=ft[++Qe],xt=dn[lt],typeof xt===v&&xt.length>0?xt.length===2?typeof xt[1]==p?this[xt[0]]=xt[1].call(this,Cn):this[xt[0]]=xt[1]:xt.length===3?typeof xt[1]===p&&!(xt[1].exec&&xt[1].test)?this[xt[0]]=Cn?xt[1].call(this,Cn,xt[2]):i:this[xt[0]]=Cn?Cn.replace(xt[1],xt[2]):i:xt.length===4&&(this[xt[0]]=Cn?xt[3].call(this,Cn.replace(xt[1],xt[2])):i):this[xt]=Cn||i;nt+=2}},Ot=function(St,De){for(var nt in De)if(typeof De[nt]===v&&De[nt].length>0){for(var Et=0;Et<De[nt].length;Et++)if(Lt(De[nt][Et],St))return nt===d?i:nt}else if(Lt(De[nt],St))return nt===d?i:nt;return St},It={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},Zt={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},ke={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[k,[E,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[k,[E,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[E,k],[/opios[\/ ]+([\w\.]+)/i],[k,[E,it+" Mini"]],[/\bopr\/([\w\.]+)/i],[k,[E,it]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[k,[E,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[E,k],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[k,[E,"UC"+ue]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[k,[E,"WeChat"]],[/konqueror\/([\w\.]+)/i],[k,[E,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[k,[E,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[k,[E,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[k,[E,"Smart Lenovo "+ue]],[/(avast|avg)\/([\w\.]+)/i],[[E,/(.+)/,"$1 Secure "+ue],k],[/\bfocus\/([\w\.]+)/i],[k,[E,me+" Focus"]],[/\bopt\/([\w\.]+)/i],[k,[E,it+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[k,[E,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[k,[E,"Dolphin"]],[/coast\/([\w\.]+)/i],[k,[E,it+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[k,[E,"MIUI "+ue]],[/fxios\/([-\w\.]+)/i],[k,[E,me]],[/\bqihu|(qi?ho?o?|360)browser/i],[[E,"360 "+ue]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[E,/(.+)/,"$1 "+ue],k],[/samsungbrowser\/([\w\.]+)/i],[k,[E,Se+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[E,/_/g," "],k],[/metasr[\/ ]?([\d\.]+)/i],[k,[E,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[E,"Sogou Mobile"],k],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[E,k],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[E],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[E,Je],k],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[E,k],[/\bgsa\/([\w\.]+) .*safari\//i],[k,[E,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[k,[E,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[k,[E,J+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[E,J+" WebView"],k],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[k,[E,"Android "+ue]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[E,k],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[k,[E,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[k,E],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[E,[k,Ot,It]],[/(webkit|khtml)\/([\w\.]+)/i],[E,k],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[E,"Netscape"],k],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[k,[E,me+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[E,k],[/(cobalt)\/([\w\.]+)/i],[E,[k,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[x,"amd64"]],[/(ia32(?=;))/i],[[x,mt]],[/((?:i[346]|x)86)[;\)]/i],[[x,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[x,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[x,"armhf"]],[/windows (ce|mobile); ppc;/i],[[x,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[x,/ower/,l,mt]],[/(sun4\w)[;\)]/i],[[x,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[x,mt]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[w,[M,Se],[S,O]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[w,[M,Se],[S,P]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[w,[M,F],[S,P]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[w,[M,F],[S,O]],[/(macintosh);/i],[w,[M,F]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[w,[M,Oe],[S,P]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[w,[M,ye],[S,O]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[w,[M,ye],[S,P]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[w,/_/g," "],[M,_t],[S,P]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[w,/_/g," "],[M,_t],[S,O]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[w,[M,"OPPO"],[S,P]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[w,[M,"Vivo"],[S,P]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[w,[M,"Realme"],[S,P]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[w,[M,Ce],[S,P]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[w,[M,Ce],[S,O]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[w,[M,pe],[S,O]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[w,[M,pe],[S,P]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[w,[M,"Lenovo"],[S,O]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[w,/_/g," "],[M,"Nokia"],[S,P]],[/(pixel c)\b/i],[w,[M,be],[S,O]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[w,[M,be],[S,P]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[w,[M,ct],[S,P]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[w,"Xperia Tablet"],[M,ct],[S,O]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[w,[M,"OnePlus"],[S,P]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[w,[M,j],[S,O]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[w,/(.+)/g,"Fire Phone $1"],[M,j],[S,P]],[/(playbook);[-\w\),; ]+(rim)/i],[w,M,[S,O]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[w,[M,fe],[S,P]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[w,[M,q],[S,O]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[w,[M,q],[S,P]],[/(nexus 9)/i],[w,[M,"HTC"],[S,O]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[M,[w,/_/g," "],[S,P]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[w,[M,"Acer"],[S,O]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[w,[M,"Meizu"],[S,P]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[w,[M,"Ulefone"],[S,P]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[M,w,[S,P]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[M,w,[S,O]],[/(surface duo)/i],[w,[M,oe],[S,O]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[w,[M,"Fairphone"],[S,P]],[/(u304aa)/i],[w,[M,"AT&T"],[S,P]],[/\bsie-(\w*)/i],[w,[M,"Siemens"],[S,P]],[/\b(rct\w+) b/i],[w,[M,"RCA"],[S,O]],[/\b(venue[\d ]{2,7}) b/i],[w,[M,"Dell"],[S,O]],[/\b(q(?:mv|ta)\w+) b/i],[w,[M,"Verizon"],[S,O]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[w,[M,"Barnes & Noble"],[S,O]],[/\b(tm\d{3}\w+) b/i],[w,[M,"NuVision"],[S,O]],[/\b(k88) b/i],[w,[M,"ZTE"],[S,O]],[/\b(nx\d{3}j) b/i],[w,[M,"ZTE"],[S,P]],[/\b(gen\d{3}) b.+49h/i],[w,[M,"Swiss"],[S,P]],[/\b(zur\d{3}) b/i],[w,[M,"Swiss"],[S,O]],[/\b((zeki)?tb.*\b) b/i],[w,[M,"Zeki"],[S,O]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[M,"Dragon Touch"],w,[S,O]],[/\b(ns-?\w{0,9}) b/i],[w,[M,"Insignia"],[S,O]],[/\b((nxa|next)-?\w{0,9}) b/i],[w,[M,"NextBook"],[S,O]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[M,"Voice"],w,[S,P]],[/\b(lvtel\-)?(v1[12]) b/i],[[M,"LvTel"],w,[S,P]],[/\b(ph-1) /i],[w,[M,"Essential"],[S,P]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[w,[M,"Envizen"],[S,O]],[/\b(trio[-\w\. ]+) b/i],[w,[M,"MachSpeed"],[S,O]],[/\btu_(1491) b/i],[w,[M,"Rotor"],[S,O]],[/(shield[\w ]+) b/i],[w,[M,"Nvidia"],[S,O]],[/(sprint) (\w+)/i],[M,w,[S,P]],[/(kin\.[onetw]{3})/i],[[w,/\./g," "],[M,oe],[S,P]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[w,[M,Nt],[S,O]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[w,[M,Nt],[S,P]],[/smart-tv.+(samsung)/i],[M,[S,L]],[/hbbtv.+maple;(\d+)/i],[[w,/^/,"SmartTV"],[M,Se],[S,L]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[M,pe],[S,L]],[/(apple) ?tv/i],[M,[w,F+" TV"],[S,L]],[/crkey/i],[[w,J+"cast"],[M,be],[S,L]],[/droid.+aft(\w+)( bui|\))/i],[w,[M,j],[S,L]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[w,[M,Oe],[S,L]],[/(bravia[\w ]+)( bui|\))/i],[w,[M,ct],[S,L]],[/(mitv-\w{5}) bui/i],[w,[M,_t],[S,L]],[/Hbbtv.*(technisat) (.*);/i],[M,w,[S,L]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[M,at],[w,at],[S,L]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[S,L]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[M,w,[S,C]],[/droid.+; (shield) bui/i],[w,[M,"Nvidia"],[S,C]],[/(playstation [345portablevi]+)/i],[w,[M,ct],[S,C]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[w,[M,oe],[S,C]],[/((pebble))app/i],[M,w,[S,B]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[w,[M,F],[S,B]],[/droid.+; (glass) \d/i],[w,[M,be],[S,B]],[/droid.+; (wt63?0{2,3})\)/i],[w,[M,Nt],[S,B]],[/(quest( 2| pro)?)/i],[w,[M,Je],[S,B]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[M,[S,V]],[/(aeobc)\b/i],[w,[M,j],[S,V]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[w,[S,P]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[w,[S,O]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[S,O]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[S,P]],[/(android[-\w\. ]{0,9});.+buil/i],[w,[M,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[k,[E,le+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[k,[E,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[E,k],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[k,E]],os:[[/microsoft (windows) (vista|xp)/i],[E,k],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[E,[k,Ot,Zt]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[k,Ot,Zt],[E,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[k,/_/g,"."],[E,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[E,fn],[k,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[k,E],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[E,k],[/\(bb(10);/i],[k,[E,fe]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[k,[E,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[k,[E,me+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[k,[E,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[k,[E,"watchOS"]],[/crkey\/([\d\.]+)/i],[k,[E,J+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[E,ot],k],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[E,k],[/(sunos) ?([\w\.\d]*)/i],[[E,"Solaris"],k],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[E,k]]},he=function(St,De){if(typeof St===v&&(De=St,St=i),!(this instanceof he))return new he(St,De).getResult();var nt=typeof n!==g&&n.navigator?n.navigator:i,Et=St||(nt&&nt.userAgent?nt.userAgent:l),Qe=nt&&nt.userAgentData?nt.userAgentData:i,lt=De?Ht(ke,De):ke,xt=nt&&nt.userAgent==Et;return this.getBrowser=function(){var ft={};return ft[E]=i,ft[k]=i,Mt.call(ft,Et,lt.browser),ft[b]=ht(ft[k]),xt&&nt&&nt.brave&&typeof nt.brave.isBrave==p&&(ft[E]="Brave"),ft},this.getCPU=function(){var ft={};return ft[x]=i,Mt.call(ft,Et,lt.cpu),ft},this.getDevice=function(){var ft={};return ft[M]=i,ft[w]=i,ft[S]=i,Mt.call(ft,Et,lt.device),xt&&!ft[S]&&Qe&&Qe.mobile&&(ft[S]=P),xt&&ft[w]=="Macintosh"&&nt&&typeof nt.standalone!==g&&nt.maxTouchPoints&&nt.maxTouchPoints>2&&(ft[w]="iPad",ft[S]=O),ft},this.getEngine=function(){var ft={};return ft[E]=i,ft[k]=i,Mt.call(ft,Et,lt.engine),ft},this.getOS=function(){var ft={};return ft[E]=i,ft[k]=i,Mt.call(ft,Et,lt.os),xt&&!ft[E]&&Qe&&Qe.platform!="Unknown"&&(ft[E]=Qe.platform.replace(/chrome os/i,ot).replace(/macos/i,fn)),ft},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Et},this.setUA=function(ft){return Et=typeof ft===_&&ft.length>G?at(ft,G):ft,this},this.setUA(Et),this};he.VERSION=o,he.BROWSER=Re([E,k,b]),he.CPU=Re([x]),he.DEVICE=Re([w,M,S,C,P,L,O,B,V]),he.ENGINE=he.OS=Re([E,k]),t.exports&&(e=t.exports=he),e.UAParser=he;var tt=typeof n!==g&&(n.jQuery||n.Zepto);if(tt&&!tt.ua){var wt=new he;tt.ua=wt.getResult(),tt.ua.get=function(){return wt.getUA()},tt.ua.set=function(St){wt.setUA(St);var De=wt.getResult();for(var nt in De)tt.ua[nt]=De[nt]}}})(typeof window=="object"?window:X)})(XH,XH.exports);var eQe=XH.exports,tQe=X&&X.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(A9,"__esModule",{value:!0});A9.SystemInfo=void 0;const nQe=tQe(eQe);class rQe{constructor(){this._parser=new nQe.default;const e=typeof window<"u"&&window.navigator&&window.navigator.userAgent.indexOf("Trident")>-1;this._isBrowser=e||typeof document<"u"&&typeof document.getElementById=="function"&&window&&typeof window.Event=="function",this._isIframe=!1,this._isBrowser?(this._isIframe=parent!==window,this._origin=this._isIframe?document.referrer:window.location.origin):this._origin="direct"}static get instance(){return this._instance||(this._instance=new this)}get isAndroid(){return this._parser.getOS().name==="Android"}get isBrowser(){return this._isBrowser}get isChrome(){const e=this._parser.getBrowser().name;return!!(e&&e.includes("Chrome"))}get isFirefox(){const e=this._parser.getBrowser().name;return!!(e&&e.includes("Firefox"))}get isIE(){const e=this._parser.getBrowser().name;return!!(e&&e.includes("IE"))}get isIOS(){return this._parser.getOS().name==="iOS"||typeof window!==void 0&&window.navigator&&window.navigator.maxTouchPoints===5&&window.navigator.platform==="MacIntel"}get isIframe(){return this._isIframe}get isInstagram(){return this._parser.getBrowser().name==="Instagram"}get isMacOS(){return this._parser.getOS().name==="Mac OS"}get isMobile(){const e=this._parser.getDevice().type;return e==="mobile"||e==="tablet"}get isSafari(){const e=this._parser.getBrowser().name;return!!(e&&e.includes("Safari"))}get origin(){return this._origin+""}}A9.SystemInfo=rQe;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.isViewerSettingsError=t.isViewerWebGLError=t.isViewerEnvironmentMapError=t.isViewerDataProcessingError=t.isViewerUnknownError=t.isViewerError=t.ShapeDiverGeometryBackendResponseErrorType=t.ShapeDiverGeometryBackendResponseError=t.ShapeDiverGeometryBackendRequestError=t.ShapeDiverGeometryBackendError=t.ShapeDiverViewerDrawingToolsError=t.ShapeDiverViewerInteractionError=t.ShapeDiverViewerValidationError=t.ShapeDiverViewerCameraError=t.ShapeDiverViewerLightError=t.ShapeDiverViewerArError=t.ShapeDiverViewerUnknownError=t.ShapeDiverViewerViewportError=t.ShapeDiverViewerSessionError=t.ShapeDiverViewerSettingsError=t.ShapeDiverViewerWebGLError=t.ShapeDiverViewerEnvironmentMapError=t.ShapeDiverViewerDataProcessingError=t.ShapeDiverViewerError=t.ShapeDiverViewerErrorType=t.LOGGING_LEVEL=t.Logger=t.InputValidator=t.TypeChecker=t.Converter=t.UuidGenerator=t.HttpClient=t.DomEventEngine=t.SystemInfo=t.StatePromise=t.StateEngine=t.SESSION_SETTINGS_MODE=t.SettingsEngine=t.EVENTTYPE_TASK=t.EVENTTYPE_DRAWING_TOOLS=t.EVENTTYPE_INTERACTION=t.EVENTTYPE_VIEWPORT=t.EVENTTYPE_SESSION=t.EVENTTYPE_SCENE=t.EVENTTYPE_RENDERING=t.EVENTTYPE_PARAMETER=t.EVENTTYPE_OUTPUT=t.EVENTTYPE_CAMERA=t.EVENTTYPE=t.EventEngine=void 0,t.btoaCustom=t.atobCustom=t.PerformanceEvaluator=t.isViewerGeometryBackendResponseError=t.isViewerGeometryBackendRequestError=t.isViewerGeometryBackendGenericError=t.isViewerGeometryBackendError=t.isViewerDrawingToolsError=t.isViewerInteractionError=t.isViewerValidationError=t.isARError=t.isViewerCameraError=t.isViewerLightError=t.isViewerViewportError=t.isViewerSessionError=void 0;const e=u7;Object.defineProperty(t,"Converter",{enumerable:!0,get:function(){return e.Converter}});const n=H7;Object.defineProperty(t,"DomEventEngine",{enumerable:!0,get:function(){return n.DomEventEngine}});const i=r9;Object.defineProperty(t,"EventEngine",{enumerable:!0,get:function(){return i.EventEngine}});const o=vZ;Object.defineProperty(t,"EVENTTYPE",{enumerable:!0,get:function(){return o.EVENTTYPE}}),Object.defineProperty(t,"EVENTTYPE_CAMERA",{enumerable:!0,get:function(){return o.EVENTTYPE_CAMERA}}),Object.defineProperty(t,"EVENTTYPE_DRAWING_TOOLS",{enumerable:!0,get:function(){return o.EVENTTYPE_DRAWING_TOOLS}}),Object.defineProperty(t,"EVENTTYPE_INTERACTION",{enumerable:!0,get:function(){return o.EVENTTYPE_INTERACTION}}),Object.defineProperty(t,"EVENTTYPE_OUTPUT",{enumerable:!0,get:function(){return o.EVENTTYPE_OUTPUT}}),Object.defineProperty(t,"EVENTTYPE_PARAMETER",{enumerable:!0,get:function(){return o.EVENTTYPE_PARAMETER}}),Object.defineProperty(t,"EVENTTYPE_RENDERING",{enumerable:!0,get:function(){return o.EVENTTYPE_RENDERING}}),Object.defineProperty(t,"EVENTTYPE_SCENE",{enumerable:!0,get:function(){return o.EVENTTYPE_SCENE}}),Object.defineProperty(t,"EVENTTYPE_SESSION",{enumerable:!0,get:function(){return o.EVENTTYPE_SESSION}}),Object.defineProperty(t,"EVENTTYPE_TASK",{enumerable:!0,get:function(){return o.EVENTTYPE_TASK}}),Object.defineProperty(t,"EVENTTYPE_VIEWPORT",{enumerable:!0,get:function(){return o.EVENTTYPE_VIEWPORT}});const l=C6;Object.defineProperty(t,"HttpClient",{enumerable:!0,get:function(){return l.HttpClient}});const d=s9;Object.defineProperty(t,"InputValidator",{enumerable:!0,get:function(){return d.InputValidator}});const p=ai;Object.defineProperty(t,"isARError",{enumerable:!0,get:function(){return p.isARError}}),Object.defineProperty(t,"isViewerCameraError",{enumerable:!0,get:function(){return p.isViewerCameraError}}),Object.defineProperty(t,"isViewerDataProcessingError",{enumerable:!0,get:function(){return p.isViewerDataProcessingError}}),Object.defineProperty(t,"isViewerDrawingToolsError",{enumerable:!0,get:function(){return p.isViewerDrawingToolsError}}),Object.defineProperty(t,"isViewerEnvironmentMapError",{enumerable:!0,get:function(){return p.isViewerEnvironmentMapError}}),Object.defineProperty(t,"isViewerError",{enumerable:!0,get:function(){return p.isViewerError}}),Object.defineProperty(t,"isViewerGeometryBackendError",{enumerable:!0,get:function(){return p.isViewerGeometryBackendError}}),Object.defineProperty(t,"isViewerGeometryBackendGenericError",{enumerable:!0,get:function(){return p.isViewerGeometryBackendGenericError}}),Object.defineProperty(t,"isViewerGeometryBackendRequestError",{enumerable:!0,get:function(){return p.isViewerGeometryBackendRequestError}}),Object.defineProperty(t,"isViewerGeometryBackendResponseError",{enumerable:!0,get:function(){return p.isViewerGeometryBackendResponseError}}),Object.defineProperty(t,"isViewerInteractionError",{enumerable:!0,get:function(){return p.isViewerInteractionError}}),Object.defineProperty(t,"isViewerLightError",{enumerable:!0,get:function(){return p.isViewerLightError}}),Object.defineProperty(t,"isViewerSessionError",{enumerable:!0,get:function(){return p.isViewerSessionError}}),Object.defineProperty(t,"isViewerSettingsError",{enumerable:!0,get:function(){return p.isViewerSettingsError}}),Object.defineProperty(t,"isViewerUnknownError",{enumerable:!0,get:function(){return p.isViewerUnknownError}}),Object.defineProperty(t,"isViewerValidationError",{enumerable:!0,get:function(){return p.isViewerValidationError}}),Object.defineProperty(t,"isViewerViewportError",{enumerable:!0,get:function(){return p.isViewerViewportError}}),Object.defineProperty(t,"isViewerWebGLError",{enumerable:!0,get:function(){return p.isViewerWebGLError}});const g=i9;Object.defineProperty(t,"Logger",{enumerable:!0,get:function(){return g.Logger}}),Object.defineProperty(t,"LOGGING_LEVEL",{enumerable:!0,get:function(){return g.LOGGING_LEVEL}});const v=o9;Object.defineProperty(t,"PerformanceEvaluator",{enumerable:!0,get:function(){return v.PerformanceEvaluator}});const _=Cge;Object.defineProperty(t,"SESSION_SETTINGS_MODE",{enumerable:!0,get:function(){return _.SESSION_SETTINGS_MODE}}),Object.defineProperty(t,"SettingsEngine",{enumerable:!0,get:function(){return _.SettingsEngine}});const b=Zh;Object.defineProperty(t,"ShapeDiverGeometryBackendError",{enumerable:!0,get:function(){return b.ShapeDiverGeometryBackendError}}),Object.defineProperty(t,"ShapeDiverGeometryBackendRequestError",{enumerable:!0,get:function(){return b.ShapeDiverGeometryBackendRequestError}}),Object.defineProperty(t,"ShapeDiverGeometryBackendResponseError",{enumerable:!0,get:function(){return b.ShapeDiverGeometryBackendResponseError}});const w=I0;Object.defineProperty(t,"ShapeDiverGeometryBackendResponseErrorType",{enumerable:!0,get:function(){return w.ShapeDiverResponseErrorType}});const E=rs;Object.defineProperty(t,"ShapeDiverViewerArError",{enumerable:!0,get:function(){return E.ShapeDiverViewerArError}}),Object.defineProperty(t,"ShapeDiverViewerCameraError",{enumerable:!0,get:function(){return E.ShapeDiverViewerCameraError}}),Object.defineProperty(t,"ShapeDiverViewerDataProcessingError",{enumerable:!0,get:function(){return E.ShapeDiverViewerDataProcessingError}}),Object.defineProperty(t,"ShapeDiverViewerDrawingToolsError",{enumerable:!0,get:function(){return E.ShapeDiverViewerDrawingToolsError}}),Object.defineProperty(t,"ShapeDiverViewerEnvironmentMapError",{enumerable:!0,get:function(){return E.ShapeDiverViewerEnvironmentMapError}}),Object.defineProperty(t,"ShapeDiverViewerInteractionError",{enumerable:!0,get:function(){return E.ShapeDiverViewerInteractionError}}),Object.defineProperty(t,"ShapeDiverViewerLightError",{enumerable:!0,get:function(){return E.ShapeDiverViewerLightError}}),Object.defineProperty(t,"ShapeDiverViewerSessionError",{enumerable:!0,get:function(){return E.ShapeDiverViewerSessionError}}),Object.defineProperty(t,"ShapeDiverViewerSettingsError",{enumerable:!0,get:function(){return E.ShapeDiverViewerSettingsError}}),Object.defineProperty(t,"ShapeDiverViewerUnknownError",{enumerable:!0,get:function(){return E.ShapeDiverViewerUnknownError}}),Object.defineProperty(t,"ShapeDiverViewerValidationError",{enumerable:!0,get:function(){return E.ShapeDiverViewerValidationError}}),Object.defineProperty(t,"ShapeDiverViewerViewportError",{enumerable:!0,get:function(){return E.ShapeDiverViewerViewportError}}),Object.defineProperty(t,"ShapeDiverViewerWebGLError",{enumerable:!0,get:function(){return E.ShapeDiverViewerWebGLError}});const S=B6;Object.defineProperty(t,"ShapeDiverViewerError",{enumerable:!0,get:function(){return S.ShapeDiverViewerError}}),Object.defineProperty(t,"ShapeDiverViewerErrorType",{enumerable:!0,get:function(){return S.ShapeDiverViewerErrorType}});const M=b9;Object.defineProperty(t,"StateEngine",{enumerable:!0,get:function(){return M.StateEngine}});const k=$6;Object.defineProperty(t,"StatePromise",{enumerable:!0,get:function(){return k.StatePromise}});const x=A9;Object.defineProperty(t,"SystemInfo",{enumerable:!0,get:function(){return x.SystemInfo}});const C=F6;Object.defineProperty(t,"TypeChecker",{enumerable:!0,get:function(){return C.TypeChecker}});const P=q4;Object.defineProperty(t,"UuidGenerator",{enumerable:!0,get:function(){return P.UuidGenerator}});const O=dm;Object.defineProperty(t,"atobCustom",{enumerable:!0,get:function(){return O.atobCustom}}),Object.defineProperty(t,"btoaCustom",{enumerable:!0,get:function(){return O.btoaCustom}})})(Mn);var W6={},w9={},E9={},dr={},S9={},a1=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},h3=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},aP,Cw,lP,cP,Pw;Object.defineProperty(S9,"__esModule",{value:!0});S9.AbstractTreeNodeData=void 0;const iQe=Mn;class sQe{constructor(e,n){aP.set(this,void 0),Cw.set(this,iQe.UuidGenerator.instance),lP.set(this,{}),cP.set(this,null),Pw.set(this,void 0),h3(this,aP,e||a1(this,Cw,"f").create(),"f"),h3(this,Pw,n||a1(this,Cw,"f").create(),"f")}get convertedObject(){return a1(this,lP,"f")}set convertedObject(e){h3(this,lP,e,"f")}get id(){return a1(this,aP,"f")}get updateCallbackConvertedObject(){return a1(this,cP,"f")}set updateCallbackConvertedObject(e){h3(this,cP,e,"f")}get version(){return a1(this,Pw,"f")}clone(){return new this.constructor}updateVersion(){h3(this,Pw,a1(this,Cw,"f").create(),"f")}}S9.AbstractTreeNodeData=sQe;aP=new WeakMap,Cw=new WeakMap,lP=new WeakMap,cP=new WeakMap,Pw=new WeakMap;var T9={},Y6={},PF={},p3={},Mse;function oQe(){if(Mse)return p3;Mse=1,Object.defineProperty(p3,"__esModule",{value:!0}),p3.Box=void 0;const t=Cr,e=Rl();let n=class Cve{constructor(o=t.vec3.fromValues(1/0,1/0,1/0),l=t.vec3.fromValues(-1/0,-1/0,-1/0)){this._min=o,this._max=l,this._boundingSphere=new e.Sphere,this._boundingSphereState={min:t.vec3.create(),max:t.vec3.create()}}intersect(o,l){let d,p,g,v,_,b,w,E;const S=1/l[0],M=1/l[1],k=1/l[2];return g=S>=0?(this.min[0]-o[0])*S:(this.max[0]-o[0])*S,v=S>=0?(this.max[0]-o[0])*S:(this.min[0]-o[0])*S,d=g,p=v,_=M>=0?(this.min[1]-o[1])*M:(this.max[1]-o[1])*M,b=M>=0?(this.max[1]-o[1])*M:(this.min[1]-o[1])*M,d>b||_>p||((_>d||d!==d)&&(d=_),(b<p||p!==p)&&(p=b),w=k>=0?(this.min[2]-o[2])*k:(this.max[2]-o[2])*k,E=k>=0?(this.max[2]-o[2])*k:(this.min[2]-o[2])*k,d>E||w>p)||((w>d||d!==d)&&(d=w),(E<p||p!==p)&&(p=E),p<0)?null:d>=0?d:p}intersects(o,l){return this.intersect(o,l)!==null}get boundingSphere(){return this._boundingSphereState.min[0]===this.min[0]&&this._boundingSphereState.min[1]===this.min[1]&&this._boundingSphereState.min[2]===this.min[2]&&this._boundingSphereState.max[0]===this.max[0]&&this._boundingSphereState.max[1]===this.max[1]&&this._boundingSphereState.max[2]===this.max[2]||(this._boundingSphere.setFromBox(this),this._boundingSphereState={min:t.vec3.clone(this.min),max:t.vec3.clone(this.max)}),this._boundingSphere}get max(){return this._max}set max(o){this._max=o}get min(){return this._min}set min(o){this._min=o}applyMatrix(o){const l=[];l.push(t.vec3.transformMat4(t.vec3.create(),t.vec3.fromValues(this.min[0],this.min[1],this.min[2]),o)),l.push(t.vec3.transformMat4(t.vec3.create(),t.vec3.fromValues(this.min[0],this.min[1],this.max[2]),o)),l.push(t.vec3.transformMat4(t.vec3.create(),t.vec3.fromValues(this.min[0],this.max[1],this.min[2]),o)),l.push(t.vec3.transformMat4(t.vec3.create(),t.vec3.fromValues(this.min[0],this.max[1],this.max[2]),o)),l.push(t.vec3.transformMat4(t.vec3.create(),t.vec3.fromValues(this.max[0],this.min[1],this.min[2]),o)),l.push(t.vec3.transformMat4(t.vec3.create(),t.vec3.fromValues(this.max[0],this.min[1],this.max[2]),o)),l.push(t.vec3.transformMat4(t.vec3.create(),t.vec3.fromValues(this.max[0],this.max[1],this.min[2]),o)),l.push(t.vec3.transformMat4(t.vec3.create(),t.vec3.fromValues(this.max[0],this.max[1],this.max[2]),o)),this.min=t.vec3.fromValues(1/0,1/0,1/0),this.max=t.vec3.fromValues(-1/0,-1/0,-1/0);for(let d=0,p=l.length;d<p;d++)this.min=t.vec3.fromValues(Math.min(this.min[0],l[d][0]),Math.min(this.min[1],l[d][1]),Math.min(this.min[2],l[d][2])),this.max=t.vec3.fromValues(Math.max(this.max[0],l[d][0]),Math.max(this.max[1],l[d][1]),Math.max(this.max[2],l[d][2]));return this}clone(){return new Cve(t.vec3.clone(this.min),t.vec3.clone(this.max))}containsPoint(o){return!(o[0]<this.min[0]||o[0]>this.max[0]||o[1]<this.min[1]||o[1]>this.max[1]||o[2]<this.min[2]||o[2]>this.max[2])}clampPoint(o){return o[0]=Math.max(this.min[0],Math.min(this.max[0],o[0])),o[1]=Math.max(this.min[1],Math.min(this.max[1],o[1])),o[2]=Math.max(this.min[2],Math.min(this.max[2],o[2])),o}setFromAttributeArray(o,l,d,p){const g=Math.floor(o.length/3)*3,v=l&&l!==d?+l:3,_=[1/0,1/0,1/0],b=[-1/0,-1/0,-1/0];let w,E,S;const M=t.vec4.create();for(let k=0;k<g;k+=v)p?(t.vec4.transformMat4(M,[o[k],o[k+1],o[k+2],1],p),w=M[0]/M[3],E=M[1]/M[3],S=M[2]/M[3]):(w=o[k],E=o[k+1],S=o[k+2]),_[0]=Math.min(_[0],w),_[1]=Math.min(_[1],E),_[2]=Math.min(_[2],S),b[0]=Math.max(b[0],w),b[1]=Math.max(b[1],E),b[2]=Math.max(b[2],S);return this.min=t.vec3.fromValues(_[0],_[1],_[2]),this.max=t.vec3.fromValues(b[0],b[1],b[2]),this}union(o){return o.min[0]<this.min[0]&&(this.min[0]=o.min[0]),o.min[1]<this.min[1]&&(this.min[1]=o.min[1]),o.min[2]<this.min[2]&&(this.min[2]=o.min[2]),o.max[0]>this.max[0]&&(this.max[0]=o.max[0]),o.max[1]>this.max[1]&&(this.max[1]=o.max[1]),o.max[2]>this.max[2]&&(this.max[2]=o.max[2]),this}isEmpty(){return this.min[0]===1/0&&this.min[1]===1/0&&this.min[2]===1/0&&this.max[0]===-1/0&&this.max[1]===-1/0&&this.max[2]===-1/0}reset(){t.vec3.zero(this._boundingSphere.center),this._boundingSphere.radius=0,t.vec3.zero(this._boundingSphereState.min),t.vec3.zero(this._boundingSphereState.max),t.vec3.set(this._min,1/0,1/0,1/0),t.vec3.set(this._max,-1/0,-1/0,-1/0)}};return p3.Box=n,p3}var x9={};Object.defineProperty(x9,"__esModule",{value:!0});x9.Plane=void 0;const os=Cr;let aQe=class Pve{constructor(e=os.vec3.fromValues(1,0,0),n=0){this._normal=e,this._constant=n}get constant(){return this._constant}set constant(e){this._constant=e}get normal(){return this._normal}set normal(e){this._normal=e}applyMatrix(e){const n=os.mat3.transpose(os.mat3.create(),os.mat3.invert(os.mat3.create(),os.mat3.fromMat4(os.mat3.create(),e))),i=os.vec3.transformMat4(os.vec3.create(),os.vec3.multiply(os.vec3.create(),os.vec3.clone(this.normal),os.vec3.fromValues(this._constant,this._constant,this._constant)),e);return this._normal=os.vec3.normalize(os.vec3.create(),os.vec3.transformMat3(os.vec3.create(),this._normal,n)),this.constant=-os.vec3.dot(i,this._normal),this}clampPoint(e){const n=-this.distanceToPoint(e);return os.vec3.add(os.vec3.create(),os.vec3.multiply(os.vec3.create(),this.normal,os.vec3.fromValues(n,n,n)),e)}clone(){return new Pve(this._normal,this._constant)}containsPoint(e){return this.distanceToPoint(e)===0}distanceToPoint(e){return os.vec3.dot(this.normal,e)+this.constant}intersect(e,n){const i=os.vec3.dot(this.normal,n);if(i===0)return this.distanceToPoint(e)===0?0:null;const o=-(os.vec3.dot(e,this.normal)+this.constant)/i;return o<0?null:o}setFromNormalAndCoplanarPoint(e,n){return os.vec3.copy(this.normal,e),this.constant=-os.vec3.dot(n,this.normal),this}reset(){this._normal=os.vec3.fromValues(1,0,0),this._constant=0}};x9.Plane=aQe;var M9={};Object.defineProperty(M9,"__esModule",{value:!0});M9.Sphere=void 0;const Js=Cr;let lQe=class Rve{constructor(e=Js.vec3.create(),n=0){this._center=e,this._radius=n}get center(){return this._center}set center(e){this._center=e}get radius(){return this._radius}set radius(e){this._radius=e}applyMatrix(e){this._center=Js.vec3.transformMat4(Js.vec3.create(),this._center,e);const n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],o=e[8]*e[8]+e[9]*e[9]+e[10]*e[10],l=Math.sqrt(Math.max(n,i,o));return this.radius=this.radius*l,this}clone(){return new Rve(Js.vec3.clone(this._center),this._radius)}containsPoint(e){return Js.vec3.squaredDistance(e,this.center)<=this.radius*this.radius}clampPoint(e){return e}intersect(e,n){const i=Js.vec3.sub(Js.vec3.create(),this.center,e),o=Js.vec3.dot(i,n),l=Js.vec3.squaredDistance(i,Js.vec3.multiply(Js.vec3.create(),n,Js.vec3.fromValues(o,o,o)));if(l<=this.radius*this.radius){const d=Math.sqrt(this.radius*this.radius-l);return o-d}return null}intersects(e,n){const i=Js.vec3.sub(Js.vec3.create(),this.center,e),o=Js.vec3.dot(i,n);return Js.vec3.squaredDistance(i,Js.vec3.multiply(Js.vec3.create(),n,Js.vec3.fromValues(o,o,o)))<=this.radius*this.radius}setFromBox(e){return Js.vec3.add(this.center,e.min,e.max),Js.vec3.scale(this.center,this.center,.5),this.radius=Js.vec3.dist(e.min,e.max)*.5,this}reset(){this._center=Js.vec3.create(),this._radius=0}};M9.Sphere=lQe;var k9={};Object.defineProperty(k9,"__esModule",{value:!0});k9.Spherical=void 0;const cQe=Cr;let uQe=class{constructor(e=1,n=0,i=0){this._radius=e,this._phi=n,this._theta=i}get radius(){return this._radius}set radius(e){this._radius=e}get phi(){return this._phi}set phi(e){this._phi=e}get theta(){return this._theta}set theta(e){this._theta=e}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}fromVec3(e){return this.radius=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e[0],e[2]),this.phi=Math.acos(Math.max(-1,Math.min(1,e[1]/this.radius)))),this}toVec3(){const e=Math.sin(this.phi)*this.radius;return cQe.vec3.fromValues(e*Math.sin(this.theta),Math.cos(this.phi)*this.radius,e*Math.cos(this.theta))}};k9.Spherical=uQe;var C9={};Object.defineProperty(C9,"__esModule",{value:!0});C9.Triangle=void 0;const Ui=Cr;let fQe=class Dve{constructor(e=Ui.vec3.create(),n=Ui.vec3.create(),i=Ui.vec3.create()){this._v0=e,this._v1=n,this._v2=i}applyMatrix(e){return Ui.vec3.transformMat4(this._v0,this._v0,e),Ui.vec3.transformMat4(this._v1,this._v1,e),Ui.vec3.transformMat4(this._v2,this._v2,e),this}clone(){return new Dve(Ui.vec3.clone(this._v0),Ui.vec3.clone(this._v1),Ui.vec3.clone(this._v2))}intersect(e,n){const o=Ui.vec3.sub(Ui.vec3.create(),this._v1,this._v0),l=Ui.vec3.sub(Ui.vec3.create(),this._v2,this._v0),d=Ui.vec3.cross(Ui.vec3.create(),n,l),p=Ui.vec3.dot(o,d);if(p>-1e-7&&p<1e-7)return null;const g=1/p,v=Ui.vec3.sub(Ui.vec3.create(),e,this._v0),_=g*Ui.vec3.dot(v,d);if(_<0||_>1)return null;const b=Ui.vec3.cross(Ui.vec3.create(),v,o),w=g*Ui.vec3.dot(n,b);if(w<0||_+w>1)return null;const E=g*Ui.vec3.dot(l,b);return E>1e-7?Ui.vec3.add(Ui.vec3.create(),Ui.vec3.multiply(Ui.vec3.create(),n,Ui.vec3.fromValues(E,E,E)),e):null}reset(){this._v0=Ui.vec3.create(),this._v1=Ui.vec3.create(),this._v2=Ui.vec3.create()}};C9.Triangle=fQe;var kse;function Rl(){return kse||(kse=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Triangle=t.Plane=t.Spherical=t.Sphere=t.Box=void 0;const e=oQe();Object.defineProperty(t,"Box",{enumerable:!0,get:function(){return e.Box}});const n=x9;Object.defineProperty(t,"Plane",{enumerable:!0,get:function(){return n.Plane}});const i=M9;Object.defineProperty(t,"Sphere",{enumerable:!0,get:function(){return i.Sphere}});const o=k9;Object.defineProperty(t,"Spherical",{enumerable:!0,get:function(){return o.Spherical}});const l=C9;Object.defineProperty(t,"Triangle",{enumerable:!0,get:function(){return l.Triangle}})}(PF)),PF}var bo=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},$n=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},ZH,QH,wc,fu,Rw,fy,uP,fP,dP,hP,Dw,Ow,g2,pP,mP,wl,gP,dy,vP;Object.defineProperty(Y6,"__esModule",{value:!0});Y6.TreeNode=void 0;const dQe=Rl(),l1=Cr,hQe=Mn;class pQe{constructor(e="node",n,i=[],o=[]){var l;ZH.set(this,new dQe.Box),QH.set(this,{}),wc.set(this,[]),fu.set(this,[]),Rw.set(this,void 0),fy.set(this,hQe.UuidGenerator.instance),uP.set(this,[]),fP.set(this,[]),dP.set(this,{}),hP.set(this,[]),Dw.set(this,""),Ow.set(this,void 0),g2.set(this,void 0),pP.set(this,[]),mP.set(this,!1),wl.set(this,[]),gP.set(this,null),dy.set(this,void 0),vP.set(this,!0),bo(this,Dw,e.replace(/\./g,"_"),"f"),bo(this,g2,n,"f"),bo(this,fu,i,"f"),bo(this,wl,o,"f"),bo(this,Rw,$n(this,fy,"f").create(),"f"),bo(this,Ow,$n(this,Rw,"f"),"f"),bo(this,dy,$n(this,fy,"f").create(),"f"),(l=$n(this,g2,"f"))===null||l===void 0||l.addChild(this)}get boneInverses(){return $n(this,uP,"f")}set boneInverses(e){bo(this,uP,e,"f")}get bones(){return $n(this,fP,"f")}set bones(e){bo(this,fP,e,"f")}get boundingBox(){return $n(this,ZH,"f")}get boundingBoxViewport(){return $n(this,QH,"f")}get children(){return $n(this,wc,"f")}get convertedObject(){return $n(this,dP,"f")}set convertedObject(e){bo(this,dP,e,"f")}get data(){return $n(this,fu,"f")}get excludeViewports(){return $n(this,hP,"f")}set excludeViewports(e){bo(this,hP,e,"f")}get id(){return $n(this,Rw,"f")}get name(){return $n(this,Dw,"f")}set name(e){bo(this,Dw,e,"f")}get nodeMatrix(){const e=l1.mat4.create();for(const n of $n(this,wl,"f"))n.id!=="sdtf"&&l1.mat4.multiply(e,e,n.matrix);return e}get originalId(){return $n(this,Ow,"f")}set originalId(e){bo(this,Ow,e,"f")}get parent(){return $n(this,g2,"f")}set parent(e){$n(this,g2,"f")&&$n(this,g2,"f").removeChild(this),e&&e.addChild(this),bo(this,g2,e,"f")}get restrictViewports(){return $n(this,pP,"f")}set restrictViewports(e){bo(this,pP,e,"f")}get skinNode(){return $n(this,mP,"f")}set skinNode(e){bo(this,mP,e,"f")}get transformations(){return $n(this,wl,"f")}set transformations(e){bo(this,wl,e,"f")}get updateCallbackConvertedObject(){return $n(this,gP,"f")}set updateCallbackConvertedObject(e){bo(this,gP,e,"f")}get version(){return $n(this,dy,"f")}set version(e){bo(this,dy,e,"f")}get visible(){return $n(this,vP,"f")}set visible(e){bo(this,vP,e,"f")}get worldMatrix(){const e=l1.mat4.create();for(const i of $n(this,wl,"f"))l1.mat4.multiply(e,e,i.matrix);let n=this;for(;n.parent;)l1.mat4.multiply(e,n.parent.nodeMatrix,e),n=n.parent;return e}addChild(e){return this.hasChild(e)?!1:($n(this,wc,"f").push(e),e.parent&&e.parent.removeChild(e),e.parent=this,!0)}addData(e){return $n(this,fu,"f").push(e),!0}addTransformation(e){return $n(this,wl,"f").push(e),!0}clone(){const e=new this.constructor;e.name=this.name,e.originalId=this.originalId,e.visible=this.visible;for(const n of $n(this,wc,"f"))e.addChild(n.clone());for(const n of $n(this,fu,"f"))e.data.push(n.clone());for(const n of $n(this,wl,"f"))e.addTransformation({id:n.id,matrix:l1.mat4.clone(n.matrix)});return e}cloneInstance(){const e=new this.constructor;e.name=this.name,e.originalId=this.originalId,e.visible=this.visible;for(const n of $n(this,wc,"f"))e.addChild(n.cloneInstance());for(const n of $n(this,fu,"f"))e.data.push(n);for(const n of $n(this,wl,"f"))e.addTransformation({id:n.id,matrix:l1.mat4.clone(n.matrix)});return e}getChild(e){for(let n=0;n<$n(this,wc,"f").length;n++)if($n(this,wc,"f")[n].id===e)return $n(this,wc,"f")[n]}getData(e){for(let n=0;n<$n(this,fu,"f").length;n++)if($n(this,fu,"f")[n].id===e)return $n(this,fu,"f")[n]}getNodesByName(e){const n=[];return e===this.name&&n.push(this),this.traverse(i=>{e===i.name&&n.push(i)}),n}getNodesByNameWithRegex(e){const n=[];return e.test(this.name)&&n.push(this),this.traverse(i=>{e.test(i.name)&&n.push(i)}),n}getPath(){let e=this.name,n=this.parent;for(;n;)e=n.name+"."+e,n=n.parent;return e}getTransformation(e){for(let n=0;n<$n(this,wl,"f").length;n++)if($n(this,wl,"f")[n].id===e)return $n(this,wl,"f")[n]}hasChild(e){return $n(this,wc,"f").includes(e)}hasData(e){return $n(this,fu,"f").includes(e)}hasTransformation(e){return $n(this,wl,"f").includes(e)}removeChild(e){const n=$n(this,wc,"f").indexOf(e);return n===-1?!1:($n(this,wc,"f").splice(n,1),e.parent=void 0,!0)}removeData(e){const n=$n(this,fu,"f").indexOf(e);return n===-1?!1:($n(this,fu,"f").splice(n,1),!0)}removeTransformation(e){const n=$n(this,wl,"f").indexOf(e);return n===-1?!1:($n(this,wl,"f").splice(n,1),!0)}traverse(e){e(this);for(let n=0;n<this.children.length;n++)this.children[n].traverse(e)}traverseData(e){for(let n=0;n<this.data.length;n++)e(this.data[n]);for(let n=0;n<this.children.length;n++)this.children[n].traverseData(e)}updateVersion(e=!0,n=!0){if(e===!0){let i=this;for(;i.parent;)i=i.parent,i.version=$n(this,fy,"f").create()}if(n===!0)for(let i=0;i<$n(this,wc,"f").length;i++)$n(this,wc,"f")[i].updateVersion(e,n);bo(this,dy,$n(this,fy,"f").create(),"f")}}Y6.TreeNode=pQe;ZH=new WeakMap,QH=new WeakMap,wc=new WeakMap,fu=new WeakMap,Rw=new WeakMap,fy=new WeakMap,uP=new WeakMap,fP=new WeakMap,dP=new WeakMap,hP=new WeakMap,Dw=new WeakMap,Ow=new WeakMap,g2=new WeakMap,pP=new WeakMap,mP=new WeakMap,wl=new WeakMap,gP=new WeakMap,dy=new WeakMap,vP=new WeakMap;var mQe=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},c1=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},sd;Object.defineProperty(T9,"__esModule",{value:!0});T9.Tree=void 0;const gQe=Y6;class vQe{constructor(){sd.set(this,void 0),mQe(this,sd,new gQe.TreeNode("root"),"f")}static get instance(){return this._instance||(this._instance=new this)}get root(){return c1(this,sd,"f")}addNode(e,n=c1(this,sd,"f"),i=c1(this,sd,"f")){if(i===n)return i.addChild(e),!0;for(let o=0;o<i.children.length;o++){const l=i.children[o];if(l&&this.addNode(e,n,l))return!0}return!1}addNodeAtPath(e,n=this.root.getPath(),i=c1(this,sd,"f")){if(i.name===n)return i.addChild(e),!0;const o=n.substr(0,n.indexOf("."));if(i.name===o){const l=n.substr(o.length+1,n.length);for(let d=0;d<i.children.length;d++){const p=i.children[d];if(p&&this.addNodeAtPath(e,l,p))return!0}}return!1}getNodeAtPath(e=this.root.getPath(),n=c1(this,sd,"f")){if(n.name===e)return n;const i=e.substr(0,e.indexOf("."));if(n.name===i){const o=e.substr(i.length+1,e.length);for(let l=0;l<n.children.length;l++){const d=n.children[l],p=this.getNodeAtPath(o,d);if(p)return p}}return null}removeNode(e,n=c1(this,sd,"f")){if(n.hasChild(e))return n.removeChild(e),!0;for(let i=0;i<n.children.length;i++){const o=n.children[i];if(o&&this.removeNode(e,o))return!0}return!1}removeNodeAtPath(e,n=c1(this,sd,"f")){var i;if(n.name===e)return(i=n.parent)===null||i===void 0||i.removeChild(n),!0;const o=e.substr(0,e.indexOf("."));if(n.name===o){const l=e.substr(o.length+1,e.length);for(let d=0;d<n.children.length;d++){const p=n.children[d];if(p&&this.removeNodeAtPath(l,p))return!0}}return!1}}T9.Tree=vQe;sd=new WeakMap;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractTreeNodeData=t.TreeNode=t.Tree=void 0;const e=S9;Object.defineProperty(t,"AbstractTreeNodeData",{enumerable:!0,get:function(){return e.AbstractTreeNodeData}});const n=T9;Object.defineProperty(t,"Tree",{enumerable:!0,get:function(){return n.Tree}});const i=Y6;Object.defineProperty(t,"TreeNode",{enumerable:!0,get:function(){return i.TreeNode}})})(dr);var Cm={},Ove={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.TAG3D_JUSTIFICATION=void 0,function(e){e.TOP_LEFT="TL",e.TOP_CENTER="TC",e.TOP_RIGHT="TR",e.MIDDLE_LEFT="ML",e.MIDDLE_CENTER="MC",e.MIDDLE_RIGHT="MR",e.BOTTOM_LEFT="BL",e.BOTTOM_CENTER="BC",e.BOTTOM_RIGHT="BR"}(t.TAG3D_JUSTIFICATION||(t.TAG3D_JUSTIFICATION={}))})(Ove);var em={};Object.defineProperty(em,"__esModule",{value:!0});em.ACCESSORTYPE=em.ACCESSORCOMPONENTSIZE=em.ACCESSORCOMPONENTTYPE=void 0;em.ACCESSORCOMPONENTTYPE={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5124:Uint32Array,5125:Uint32Array,5126:Float32Array};em.ACCESSORCOMPONENTSIZE={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4};em.ACCESSORTYPE={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,VEC7:7,VEC10:10,VEC12:12,MAT2:4,MAT3:9,MAT4:16};var tm={};Object.defineProperty(tm,"__esModule",{value:!0});tm.ACCESSORTYPE=tm.ACCESSORCOMPONENTSIZE=tm.ACCESSORCOMPONENTTYPE=void 0;tm.ACCESSORCOMPONENTTYPE={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5124:Uint16Array,5125:Uint32Array,5126:Float32Array};tm.ACCESSORCOMPONENTSIZE={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4};tm.ACCESSORTYPE={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.TAG3D_JUSTIFICATION=t.ACCESSORTYPE_V2=t.ACCESSORCOMPONENTSIZE_V2=t.ACCESSORCOMPONENTTYPE_V2=t.ACCESSORTYPE_V1=t.ACCESSORCOMPONENTSIZE_V1=t.ACCESSORCOMPONENTTYPE_V1=void 0;const e=Ove;Object.defineProperty(t,"TAG3D_JUSTIFICATION",{enumerable:!0,get:function(){return e.TAG3D_JUSTIFICATION}});const n=em;Object.defineProperty(t,"ACCESSORCOMPONENTSIZE_V1",{enumerable:!0,get:function(){return n.ACCESSORCOMPONENTSIZE}}),Object.defineProperty(t,"ACCESSORCOMPONENTTYPE_V1",{enumerable:!0,get:function(){return n.ACCESSORCOMPONENTTYPE}}),Object.defineProperty(t,"ACCESSORTYPE_V1",{enumerable:!0,get:function(){return n.ACCESSORTYPE}});const i=tm;Object.defineProperty(t,"ACCESSORCOMPONENTSIZE_V2",{enumerable:!0,get:function(){return i.ACCESSORCOMPONENTSIZE}}),Object.defineProperty(t,"ACCESSORCOMPONENTTYPE_V2",{enumerable:!0,get:function(){return i.ACCESSORCOMPONENTTYPE}}),Object.defineProperty(t,"ACCESSORTYPE_V2",{enumerable:!0,get:function(){return i.ACCESSORTYPE}})})(Cm);var Gi={},If={},zd={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MATERIAL_TYPE=t.MATERIAL_SIDE=t.MATERIAL_SHADING=t.MATERIAL_ALPHA=void 0,function(e){e.OPAQUE="opaque",e.MASK="mask",e.BLEND="blend"}(t.MATERIAL_ALPHA||(t.MATERIAL_ALPHA={})),function(e){e.FLAT="flat",e.SMOOTH="smooth"}(t.MATERIAL_SHADING||(t.MATERIAL_SHADING={})),function(e){e.DOUBLE="double",e.FRONT="front",e.BACK="back"}(t.MATERIAL_SIDE||(t.MATERIAL_SIDE={})),function(e){e.STANDARD="Standard",e.SPECULAR_GLOSSINESS="SpecularGlossiness",e.UNLIT="Unlit",e.GEM="Gem"}(t.MATERIAL_TYPE||(t.MATERIAL_TYPE={}))})(zd);var Ao=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},wo=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},_P,yP,bP,AP,wP,EP,SP,TP,xP,MP,kP,CP,PP,RP,DP,OP,IP,NP,LP,zP,BP;Object.defineProperty(If,"__esModule",{value:!0});If.AbstractMaterialData=void 0;const _Qe=dr,RF=zd;class yQe extends _Qe.AbstractTreeNodeData{constructor(e,n,i){super(n,i),_P.set(this,0),yP.set(this,void 0),bP.set(this,RF.MATERIAL_ALPHA.OPAQUE),AP.set(this,void 0),wP.set(this,1),EP.set(this,void 0),SP.set(this,1),TP.set(this,"#ffffff"),xP.set(this,void 0),MP.set(this,void 0),kP.set(this,void 0),CP.set(this,"#000000"),PP.set(this,void 0),RP.set(this,!1),DP.set(this,void 0),OP.set(this,void 0),IP.set(this,1),NP.set(this,1),LP.set(this,RF.MATERIAL_SHADING.SMOOTH),zP.set(this,RF.MATERIAL_SIDE.DOUBLE),BP.set(this,void 0),e&&(e.alphaMap!==void 0&&(this.alphaMap=e.alphaMap),e.alphaCutoff!==void 0&&(this.alphaCutoff=e.alphaCutoff),e.alphaMode!==void 0&&(this.alphaMode=e.alphaMode),e.aoMap!==void 0&&(this.aoMap=e.aoMap),e.aoMapIntensity!==void 0&&(this.aoMapIntensity=e.aoMapIntensity),e.bumpMap!==void 0&&(this.bumpMap=e.bumpMap),e.bumpScale!==void 0&&(this.bumpScale=e.bumpScale),e.color!==void 0&&(this.color=e.color),e.depthTest!==void 0&&(this.depthTest=e.depthTest),e.depthWrite!==void 0&&(this.depthWrite=e.depthWrite),e.emissiveMap!==void 0&&(this.emissiveMap=e.emissiveMap),e.emissiveness!==void 0&&(this.emissiveness=e.emissiveness),e.shading!==void 0&&(this.shading=e.shading),e.map!==void 0&&(this.map=e.map),e.name!==void 0&&(this.name=e.name),e.normalMap!==void 0&&(this.normalMap=e.normalMap),e.normalScale!==void 0&&(this.normalScale=e.normalScale),e.opacity!==void 0&&(this.opacity=e.opacity),e.side!==void 0&&(this.side=e.side),e.transparent!==void 0&&(this.transparent=e.transparent))}get alphaCutoff(){return Ao(this,_P,"f")}set alphaCutoff(e){wo(this,_P,e,"f")}get alphaMap(){return Ao(this,yP,"f")}set alphaMap(e){wo(this,yP,e,"f")}get alphaMode(){return Ao(this,bP,"f")}set alphaMode(e){wo(this,bP,e,"f")}get aoMap(){return Ao(this,AP,"f")}set aoMap(e){wo(this,AP,e,"f")}get aoMapIntensity(){return Ao(this,wP,"f")}set aoMapIntensity(e){wo(this,wP,e,"f")}get bumpMap(){return Ao(this,EP,"f")}set bumpMap(e){wo(this,EP,e,"f")}get bumpScale(){return Ao(this,SP,"f")}set bumpScale(e){wo(this,SP,e,"f")}get color(){return Ao(this,TP,"f")}set color(e){wo(this,TP,e,"f")}get depthTest(){return Ao(this,xP,"f")}set depthTest(e){wo(this,xP,e,"f")}get depthWrite(){return Ao(this,MP,"f")}set depthWrite(e){wo(this,MP,e,"f")}get emissiveMap(){return Ao(this,kP,"f")}set emissiveMap(e){wo(this,kP,e,"f")}get emissiveness(){return Ao(this,CP,"f")}set emissiveness(e){wo(this,CP,e,"f")}get map(){return Ao(this,PP,"f")}set map(e){wo(this,PP,e,"f")}get materialOutput(){return Ao(this,RP,"f")}set materialOutput(e){wo(this,RP,e,"f")}get name(){return Ao(this,DP,"f")}set name(e){wo(this,DP,e,"f")}get normalMap(){return Ao(this,OP,"f")}set normalMap(e){wo(this,OP,e,"f")}get normalScale(){return Ao(this,IP,"f")}set normalScale(e){wo(this,IP,e,"f")}get opacity(){return Ao(this,NP,"f")}set opacity(e){wo(this,NP,e,"f")}get shading(){return Ao(this,LP,"f")}set shading(e){wo(this,LP,e,"f")}get side(){return Ao(this,zP,"f")}set side(e){wo(this,zP,e,"f")}get transparent(){return Ao(this,BP,"f")}set transparent(e){wo(this,BP,e,"f")}}If.AbstractMaterialData=yQe;_P=new WeakMap,yP=new WeakMap,bP=new WeakMap,AP=new WeakMap,wP=new WeakMap,EP=new WeakMap,SP=new WeakMap,TP=new WeakMap,xP=new WeakMap,MP=new WeakMap,kP=new WeakMap,CP=new WeakMap,PP=new WeakMap,RP=new WeakMap,DP=new WeakMap,OP=new WeakMap,IP=new WeakMap,NP=new WeakMap,LP=new WeakMap,zP=new WeakMap,BP=new WeakMap;var P9={},Qh={},SZ={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PRIMITIVE_MODE=void 0,function(e){e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(t.PRIMITIVE_MODE||(t.PRIMITIVE_MODE={}))})(SZ);var ts=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},Tn=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},Iw,Nw,Lw,zw,Bw,Uw,Fw,Vw,Gw,jw,Hw,$w,Ww,Yw,qw,Xw,Zw,hy,UP,KH,py,JH,my,FP,Qw,Mo,q1,gy;Object.defineProperty(Qh,"__esModule",{value:!0});Qh.PrimitiveData=Qh.GeometryData=Qh.AttributeData=void 0;const TZ=dr,Kw=Rl(),DF=SZ,Ra=Cr;class xZ extends TZ.AbstractTreeNodeData{constructor(e,n,i,o,l,d,p,g=[],v=[],_,b,w,E,S,M=[],k,x){super(k,x),Iw.set(this,void 0),Nw.set(this,void 0),Lw.set(this,void 0),zw.set(this,void 0),Bw.set(this,void 0),Uw.set(this,void 0),Fw.set(this,void 0),Vw.set(this,[]),Gw.set(this,[]),jw.set(this,[]),Hw.set(this,void 0),$w.set(this,void 0),Ww.set(this,void 0),Yw.set(this,void 0),qw.set(this,void 0),ts(this,Iw,e,"f"),ts(this,Fw,n,"f"),ts(this,Uw,i,"f"),ts(this,Nw,o,"f"),ts(this,Bw,l,"f"),ts(this,Hw,d,"f"),ts(this,zw,p,"f"),ts(this,Gw,g,"f"),ts(this,Vw,v,"f"),ts(this,Lw,_,"f"),ts(this,qw,b,"f"),ts(this,$w,w,"f"),ts(this,Ww,E,"f"),ts(this,Yw,S,"f"),ts(this,jw,M,"f")}get array(){return Tn(this,Iw,"f")}get byteOffset(){return Tn(this,Nw,"f")}get byteStride(){return Tn(this,Lw,"f")}get count(){return Tn(this,zw,"f")}get elementBytes(){return Tn(this,Bw,"f")}get itemBytes(){return Tn(this,Uw,"f")}get itemSize(){return Tn(this,Fw,"f")}get max(){return Tn(this,Vw,"f")}get min(){return Tn(this,Gw,"f")}get morphAttributeData(){return Tn(this,jw,"f")}get normalized(){return Tn(this,Hw,"f")}get sparse(){return Tn(this,$w,"f")}get sparseIndices(){return Tn(this,Ww,"f")}get sparseValues(){return Tn(this,Yw,"f")}get target(){return Tn(this,qw,"f")}clone(){return new xZ(Tn(this,Iw,"f"),Tn(this,Fw,"f"),Tn(this,Uw,"f"),Tn(this,Nw,"f"),Tn(this,Bw,"f"),Tn(this,Hw,"f"),Tn(this,zw,"f"),Tn(this,Gw,"f"),Tn(this,Vw,"f"),Tn(this,Lw,"f"),Tn(this,qw,"f"),Tn(this,$w,"f"),Tn(this,Ww,"f"),Tn(this,Yw,"f"),Tn(this,jw,"f"),this.id,this.version)}}Qh.AttributeData=xZ;Iw=new WeakMap,Nw=new WeakMap,Lw=new WeakMap,zw=new WeakMap,Bw=new WeakMap,Uw=new WeakMap,Fw=new WeakMap,Vw=new WeakMap,Gw=new WeakMap,jw=new WeakMap,Hw=new WeakMap,$w=new WeakMap,Ww=new WeakMap,Yw=new WeakMap,qw=new WeakMap;class MZ extends TZ.AbstractTreeNodeData{constructor(e,n=DF.PRIMITIVE_MODE.TRIANGLES,i=null,o=[],l=null,d,p){super(d,p),Xw.set(this,DF.PRIMITIVE_MODE.TRIANGLES),Zw.set(this,void 0),hy.set(this,null),UP.set(this,new Kw.Box),KH.set(this,[]),py.set(this,null),JH.set(this,[]),my.set(this,[]),FP.set(this,0),Qw.set(this,null),ts(this,Zw,e,"f"),ts(this,UP,this.primitive.boundingBox.clone(),"f"),ts(this,my,o,"f"),ts(this,Xw,n,"f"),ts(this,py,i,"f"),ts(this,Qw,i,"f"),ts(this,hy,l,"f")}get attributeMaterial(){return Tn(this,hy,"f")}set attributeMaterial(e){ts(this,hy,e,"f")}get boundingBox(){return Tn(this,UP,"f")}get effectMaterials(){return Tn(this,KH,"f")}get material(){return Tn(this,py,"f")}set material(e){ts(this,py,e,"f")}get materialVariants(){return Tn(this,JH,"f")}get mode(){return Tn(this,Xw,"f")}get morphWeights(){return Tn(this,my,"f")}set morphWeights(e){ts(this,my,e,"f")}get primitive(){return Tn(this,Zw,"f")}get renderOrder(){return Tn(this,FP,"f")}set renderOrder(e){ts(this,FP,e,"f")}get standardMaterial(){return Tn(this,Qw,"f")}set standardMaterial(e){ts(this,Qw,e,"f")}clone(){return new MZ(Tn(this,Zw,"f"),Tn(this,Xw,"f"),Tn(this,py,"f"),Tn(this,my,"f"),Tn(this,hy,"f"))}intersect(e,n){return this.mode!==DF.PRIMITIVE_MODE.TRIANGLES?null:this.boundingBox.intersect(e,n)}}Qh.GeometryData=MZ;Xw=new WeakMap,Zw=new WeakMap,hy=new WeakMap,UP=new WeakMap,KH=new WeakMap,py=new WeakMap,JH=new WeakMap,my=new WeakMap,FP=new WeakMap,Qw=new WeakMap;class kZ extends TZ.AbstractTreeNodeData{constructor(e={},n=null,i,o){super(i,o),Mo.set(this,{}),q1.set(this,[]),gy.set(this,null),ts(this,Mo,e,"f"),ts(this,gy,n,"f")}get attributes(){return Tn(this,Mo,"f")}get boundingBox(){return this.computeBoundingBox(Ra.mat4.create())}get indices(){return Tn(this,gy,"f")}set indices(e){ts(this,gy,e,"f")}clone(){const e={};for(const n in Tn(this,Mo,"f"))e[n]=Tn(this,Mo,"f")[n].clone();return new kZ(e,Tn(this,gy,"f"),this.id,this.version)}computeBoundingBox(e){const n=Tn(this,q1,"f").find(i=>Ra.mat4.equals(e,i.matrix));if(n)return n.boundingBox;if(Tn(this,Mo,"f").POSITION)if(Tn(this,Mo,"f").POSITION.min.length===3&&Tn(this,Mo,"f").POSITION.max.length===3&&Ra.mat4.equals(e,Ra.mat4.create())){const i=new Kw.Box(Ra.vec3.fromValues(Tn(this,Mo,"f").POSITION.min[0],Tn(this,Mo,"f").POSITION.min[1],Tn(this,Mo,"f").POSITION.min[2]),Ra.vec3.fromValues(Tn(this,Mo,"f").POSITION.max[0],Tn(this,Mo,"f").POSITION.max[1],Tn(this,Mo,"f").POSITION.max[2]));return Tn(this,q1,"f").push({boundingBox:i,matrix:Ra.mat4.clone(e)}),i}else if(Ra.mat4.equals(e,Ra.mat4.create())){const i=new Kw.Box;i.setFromAttributeArray(Tn(this,Mo,"f").POSITION.array,Tn(this,Mo,"f").POSITION.byteStride,Tn(this,Mo,"f").POSITION.itemBytes),Tn(this,q1,"f").push({boundingBox:i,matrix:Ra.mat4.clone(e)})}else if(Ra.quat.equals(Ra.mat4.getRotation(Ra.quat.create(),e),Ra.quat.create())){const o=this.computeBoundingBox(Ra.mat4.create()).clone().applyMatrix(e);return Tn(this,q1,"f").push({boundingBox:o,matrix:Ra.mat4.clone(e)}),o}else{const i=new Kw.Box;return i.setFromAttributeArray(Tn(this,Mo,"f").POSITION.array,Tn(this,Mo,"f").POSITION.byteStride,Tn(this,Mo,"f").POSITION.itemBytes,e),Tn(this,q1,"f").push({boundingBox:i,matrix:Ra.mat4.clone(e)}),i}return new Kw.Box}}Qh.PrimitiveData=kZ;Mo=new WeakMap,q1=new WeakMap,gy=new WeakMap;var Da=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},No=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},X1,vy,VP,GP,jP,HP,_y,nf,$P,yy;Object.defineProperty(P9,"__esModule",{value:!0});P9.AnimationData=void 0;const bQe=dr,bi=Cr,AQe=Qh;class CZ extends bQe.AbstractTreeNodeData{constructor(e,n,i,o,l,d){super(l,d),X1.set(this,!1),vy.set(this,0),VP.set(this,void 0),GP.set(this,void 0),jP.set(this,!1),HP.set(this,void 0),_y.set(this,!1),nf.set(this,void 0),$P.set(this,!0),yy.set(this,[]),Da(this,GP,e,"f"),Da(this,nf,n,"f"),Da(this,HP,i,"f"),Da(this,VP,o,"f")}get animate(){return No(this,X1,"f")}get animationTime(){return No(this,vy,"f")}set animationTime(e){Da(this,vy,e,"f")}get duration(){return No(this,VP,"f")}get name(){return No(this,GP,"f")}get repeat(){return No(this,jP,"f")}set repeat(e){Da(this,jP,e,"f")}get reset(){return No(this,$P,"f")}set reset(e){Da(this,$P,e,"f")}get start(){return No(this,HP,"f")}get tracks(){return No(this,nf,"f")}set tracks(e){Da(this,nf,e,"f")}clone(){return new CZ(this.name,No(this,nf,"f"),this.start,this.duration,this.id,this.version)}continueAnimation(){No(this,_y,"f")&&Da(this,X1,!0,"f")}pauseAnimation(){No(this,_y,"f")&&Da(this,X1,!1,"f")}startAnimation(){Da(this,vy,0,"f"),Da(this,X1,!0,"f"),Da(this,_y,!0,"f"),Da(this,yy,[],"f");for(let e=0;e<No(this,nf,"f").length;e++){const n=No(this,nf,"f")[e];if(No(this,yy,"f").includes(n.node.id))continue;No(this,yy,"f").push(n.node.id);const i=n.node.transformations.find(o=>o.id==="gltf_matrix");if(i){n.previousMatrix={id:i.id,matrix:bi.mat4.clone(i.matrix)},i.matrix=bi.mat4.create();continue}switch(n.path){case"scale":const o=n.node.transformations.find(p=>p.id==="gltf_matrix_scale");if(o){n.previousMatrix={id:o.id,matrix:bi.mat4.clone(o.matrix)};continue}break;case"rotation":const l=n.node.transformations.find(p=>p.id==="gltf_matrix_rotation");if(l){n.previousMatrix={id:l.id,matrix:bi.mat4.clone(l.matrix)};continue}break;case"translation":const d=n.node.transformations.find(p=>p.id==="gltf_matrix_translation");if(d){n.previousMatrix={id:d.id,matrix:bi.mat4.clone(d.matrix)};continue}break}}}stopAnimation(){if(this.reset)for(let e=0;e<No(this,nf,"f").length;e++){const n=No(this,nf,"f")[e],i=this.id+"_"+e,o=n.node.transformations.filter(l=>l.id===i);if(n.node.transformations=n.node.transformations.filter(l=>!o.includes(l)),n.previousMatrix)if(n.previousMatrix.id==="gltf_matrix"){const l=n.node.transformations.find(v=>v.id==="gltf_matrix");l.matrix=n.previousMatrix.matrix;const d=n.node.transformations.find(v=>v.id==="gltf_matrix_translation");d.matrix=bi.mat4.create();const p=n.node.transformations.find(v=>v.id==="gltf_matrix_rotation");p.matrix=bi.mat4.create();const g=n.node.transformations.find(v=>v.id==="gltf_matrix_scale");g.matrix=bi.mat4.create();continue}else switch(n.path){case"scale":const l=n.node.transformations.find(g=>g.id==="gltf_matrix_scale");l.matrix=n.previousMatrix.matrix;continue;case"rotation":const d=n.node.transformations.find(g=>g.id==="gltf_matrix_rotation");d.matrix=n.previousMatrix.matrix;continue;case"translation":const p=n.node.transformations.find(g=>g.id==="gltf_matrix_translation");p.matrix=n.previousMatrix.matrix;continue}else if(!No(this,yy,"f").includes(n.node.id)){const l=n.node.transformations.find(d=>d.id==="gltf_matrix");if(l)l.matrix=bi.mat4.create();else{const d=n.node.transformations.find(v=>v.id==="gltf_matrix_scale");d&&(d.matrix=bi.mat4.create());const p=n.node.transformations.find(v=>v.id==="gltf_matrix_rotation");p&&(p.matrix=bi.mat4.create());const g=n.node.transformations.find(v=>v.id==="gltf_matrix_translation");g&&(g.matrix=bi.mat4.create())}}}else for(let e=0;e<No(this,nf,"f").length;e++){const n=No(this,nf,"f")[e],i=this.id+"_"+e,o=n.node.transformations.filter(v=>v.id===i);n.node.transformations=n.node.transformations.filter(v=>!o.includes(v));const l=n.times.length-1;let d=n.node.transformations.find(v=>v.id==="gltf_matrix_translation");d||(d={id:"gltf_matrix_translation",matrix:bi.mat4.create()},n.node.transformations.push(d));let p=n.node.transformations.find(v=>v.id==="gltf_matrix_rotation");p||(p={id:"gltf_matrix_rotation",matrix:bi.mat4.create()},n.node.transformations.push(p));let g=n.node.transformations.find(v=>v.id==="gltf_matrix_scale");if(g||(g={id:"gltf_matrix_scale",matrix:bi.mat4.create()},n.node.transformations.push(g)),n.path==="rotation"){let v,_;n.pivot&&(v=bi.mat4.fromTranslation(bi.mat4.create(),bi.vec3.fromValues(n.pivot[0],n.pivot[1],n.pivot[2])),_=bi.mat4.fromTranslation(bi.mat4.create(),bi.vec3.fromValues(-n.pivot[0],-n.pivot[1],-n.pivot[2])));let b=bi.quat.fromValues(n.values[l*4+0],n.values[l*4+1],n.values[l*4+2],n.values[l*4+3]);const w=bi.mat4.fromQuat(bi.mat4.create(),b);v&&_?p.matrix=bi.mat4.multiply(bi.mat4.create(),bi.mat4.multiply(bi.mat4.create(),v,w),_):p.matrix=w}else if(n.path==="translation"){let v=bi.vec3.fromValues(n.values[l*3+0],n.values[l*3+1],n.values[l*3+2]);d.matrix=bi.mat4.fromTranslation(bi.mat4.create(),v)}else if(n.path==="scale"){let v=bi.vec3.fromValues(n.values[l*3+0],n.values[l*3+1],n.values[l*3+2]);g.matrix=bi.mat4.fromScaling(bi.mat4.create(),v)}else if(n.path==="weights"){let v=[];const _=n.values.length/n.times.length;for(let w=0;w<_;w++)v.push(n.values[l*_+w]);const b=w=>{for(let E=0;E<w.data.length;E++)w.data[E]instanceof AQe.GeometryData&&w.data[E].morphWeights.length===_&&(w.data[E].morphWeights=v);for(let E=0;E<w.children.length;E++)b(w.children[E])};b(n.node)}}Da(this,vy,-1,"f"),Da(this,_y,!1,"f"),Da(this,X1,!1,"f")}}P9.AnimationData=CZ;X1=new WeakMap,vy=new WeakMap,VP=new WeakMap,GP=new WeakMap,jP=new WeakMap,HP=new WeakMap,_y=new WeakMap,nf=new WeakMap,$P=new WeakMap,yy=new WeakMap;var R9={};Object.defineProperty(R9,"__esModule",{value:!0});R9.BoneData=void 0;const wQe=dr;class PZ extends wQe.AbstractTreeNodeData{constructor(e,n){super(e,n)}clone(){return new PZ(this.id,this.version)}}R9.BoneData=PZ;var Ive={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PARAMETER_VISUALIZATION=t.PARAMETER_TYPE=void 0;const e=I0;Object.defineProperty(t,"PARAMETER_TYPE",{enumerable:!0,get:function(){return e.ShapeDiverResponseParameterType}}),Object.defineProperty(t,"PARAMETER_VISUALIZATION",{enumerable:!0,get:function(){return e.ShapeDiverResponseParameterVisualization}})})(Ive);var D9={},Cse=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},EQe=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},Jw;Object.defineProperty(D9,"__esModule",{value:!0});D9.CustomData=void 0;const SQe=dr;class RZ extends SQe.AbstractTreeNodeData{constructor(e,n,i){super(n,i),Jw.set(this,void 0),Cse(this,Jw,e,"f")}get data(){return EQe(this,Jw,"f")}set data(e){Cse(this,Jw,e,"f")}clone(){return new RZ(Object.assign({},this.data),this.id,this.version)}}D9.CustomData=RZ;Jw=new WeakMap;var Ad={},Mc=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},Fa=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},Th,eE,tE,nE,rE,iE,sE,oE,aE;Object.defineProperty(Ad,"__esModule",{value:!0});Ad.HTMLElementAnchorCustomData=Ad.HTMLElementAnchorImageData=Ad.HTMLElementAnchorTextData=Ad.HTMLElementAnchorData=void 0;const TQe=dr;class O9 extends TQe.AbstractTreeNodeData{constructor(e){super(e.id,e.version),Th.set(this,{}),eE.set(this,void 0),tE.set(this,void 0),nE.set(this,!0),rE.set(this,void 0),iE.set(this,void 0),sE.set(this,[]),Mc(this,iE,e.location,"f"),Mc(this,eE,e.data,"f"),Mc(this,tE,e.format,"f"),Mc(this,nE,e.hideable===void 0?!0:e.hideable,"f"),Mc(this,sE,e.viewports||[],"f"),Mc(this,rE,e.intersectionTarget,"f"),this.internalHtmlElement=document.createElement("div"),this.internalHtmlElement.classList.add("sdv-anchor-inner-container")}get data(){return Fa(this,eE,"f")}set data(e){Mc(this,eE,e,"f")}get format(){return Fa(this,tE,"f")}set format(e){Mc(this,tE,e,"f")}get hideable(){return Fa(this,nE,"f")}set hideable(e){Mc(this,nE,e,"f")}get intersectionTarget(){return Fa(this,rE,"f")}set intersectionTarget(e){Mc(this,rE,e,"f")}get location(){return Fa(this,iE,"f")}set location(e){Mc(this,iE,e,"f")}get viewports(){return Fa(this,sE,"f")}set viewports(e){Mc(this,sE,e,"f")}createViewerHtmlElement(e){return Fa(this,Th,"f")[e]?Fa(this,Th,"f")[e]:this.viewports.includes(e)||this.viewports.length===0?(Fa(this,Th,"f")[e]=this.internalHtmlElement.cloneNode(!0),this.create({anchor:this,parent:Fa(this,Th,"f")[e]}),Fa(this,Th,"f")[e]):null}getViewerHtmlElement(e){return Fa(this,Th,"f")[e]?Fa(this,Th,"f")[e]:null}update(e){e.htmlElement.style.display="",(this.hideable&&e.hidden||e.visible===!1)&&(e.htmlElement.style.display="none");let n,i;this.data.position&&this.data.position.horizontal==="right"?n=e.container[0]-e.htmlElement.offsetWidth:this.data.position&&this.data.position.horizontal==="left"?n=e.container[0]:n=e.container[0]-e.htmlElement.offsetWidth/2,this.data.position&&this.data.position.vertical==="bottom"?i=e.container[1]-e.htmlElement.offsetHeight:this.data.position&&this.data.position.vertical==="top"?i=e.container[1]:i=e.container[1]-e.htmlElement.offsetHeight/2,n=n/e.scale[0],i=i/e.scale[1],e.htmlElement.style.left=n+"px",e.htmlElement.style.top=i+"px"}}Ad.HTMLElementAnchorData=O9;Th=new WeakMap,eE=new WeakMap,tE=new WeakMap,nE=new WeakMap,rE=new WeakMap,iE=new WeakMap,sE=new WeakMap;class DZ extends O9{constructor(e){super({location:e.location,data:e.data,format:"text",hideable:e.hideable,viewports:e.viewports,intersectionTarget:e.intersectionTarget,id:e.id,version:e.version})}clone(){return new DZ({location:this.location,data:this.data,hideable:this.hideable,viewports:this.viewports,intersectionTarget:this.intersectionTarget,id:this.id,version:this.version})}create(e){var n;const i=document.createElement("span");i.classList.add("sdv-anchor-text"),i.style.color=(n=e.anchor.data.color)===null||n===void 0?void 0:n.toString(),i.innerHTML=e.anchor.data.text,e.parent.appendChild(i),e.anchor.data.textAlign&&(e.anchor.data.textAlign==="right"||e.anchor.data.textAlign==="center")?i.style.textAlign=e.anchor.data.textAlign:i.style.textAlign="left"}}Ad.HTMLElementAnchorTextData=DZ;class OZ extends O9{constructor(e){super({location:e.location,data:e.data,format:"image",hideable:e.hideable,viewports:e.viewports,intersectionTarget:e.intersectionTarget,id:e.id,version:e.version})}clone(){return new OZ({location:this.location,data:this.data,hideable:this.hideable,viewports:this.viewports,intersectionTarget:this.intersectionTarget,id:this.id,version:this.version})}create(e){const n=document.createElement("img");n.classList.add("sdv-anchor-image"),e.parent.appendChild(n),n.src=e.anchor.data.src,e.anchor.data.height&&(n.height=e.anchor.data.height),e.anchor.data.width&&(n.width=e.anchor.data.width),e.anchor.data.alt&&(n.alt=e.anchor.data.alt)}}Ad.HTMLElementAnchorImageData=OZ;class IZ extends O9{constructor(e){super({location:e.location,data:e.data,format:"custom",hideable:e.hideable,viewports:e.viewports,intersectionTarget:e.intersectionTarget,id:e.id,version:e.version}),oE.set(this,void 0),aE.set(this,void 0),Mc(this,oE,e.create,"f"),Mc(this,aE,e.update,"f")}create(e){Fa(this,oE,"f").call(this,e)}update(e){Fa(this,aE,"f").call(this,e)}clone(){return new IZ({location:this.location,data:this.data,hideable:this.hideable,viewports:this.viewports,intersectionTarget:this.intersectionTarget,id:this.id,version:this.version,create:Fa(this,oE,"f"),update:Fa(this,aE,"f")})}}Ad.HTMLElementAnchorCustomData=IZ;oE=new WeakMap,aE=new WeakMap;var NZ={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.TEXTURE_FILTERING=t.TEXTURE_WRAPPING=void 0,function(e){e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(t.TEXTURE_WRAPPING||(t.TEXTURE_WRAPPING={})),function(e){e[e.NONE=0]="NONE",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"}(t.TEXTURE_FILTERING||(t.TEXTURE_FILTERING={}))})(NZ);var Nve={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.TASK_TYPE=void 0,function(e){e.AR_LOADING="ar_loading",e.ENVIRONMENT_MAP_LOADING="environment_map_loading",e.CUSTOM_CONTENT_LOADING="custom_content_loading",e.GLTF_CREATION="gltf_creation",e.GLTF_CONTENT_LOADING="gltf_content_loading",e.MATERIAL_CONTENT_LOADING="material_content_loading",e.TAG_CONTENT_LOADING="tag_content_loading",e.SDTF_CONTENT_LOADING="sdtf_content_loading",e.SESSION_CUSTOMIZATION="session_customization",e.SESSION_CREATION="session_creation",e.SESSION_OUTPUTS_UPDATE="session_outputs_update",e.SESSION_OUTPUTS_LOADING="session_outputs_loading",e.VIEWPORT_CREATION="viewer_creation",e.EXPORT_REQUEST="export_request"}(t.TASK_TYPE||(t.TASK_TYPE={}))})(Nve);var I9={},qi=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},Ll=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},lE,cE,uE,fE,dE,hE,pE,mE,gE,vE,_E,yE,bE,AE,wE;Object.defineProperty(I9,"__esModule",{value:!0});I9.MapData=void 0;const c_=Cr,xQe=dr,$p=NZ;class LZ extends xQe.AbstractTreeNodeData{constructor(e,n,i,o){super(i,o),lE.set(this,!1),cE.set(this,void 0),uE.set(this,c_.vec2.fromValues(0,0)),fE.set(this,void 0),dE.set(this,void 0),hE.set(this,!0),pE.set(this,void 0),mE.set(this,$p.TEXTURE_FILTERING.NONE),gE.set(this,$p.TEXTURE_FILTERING.NONE),vE.set(this,c_.vec2.fromValues(0,0)),_E.set(this,c_.vec2.fromValues(1,1)),yE.set(this,0),bE.set(this,void 0),AE.set(this,$p.TEXTURE_WRAPPING.REPEAT),wE.set(this,$p.TEXTURE_WRAPPING.REPEAT),qi(this,pE,e,"f"),qi(this,lE,n&&n.asData!==void 0?n.asData:!1,"f"),qi(this,dE,n?n.data:void 0,"f"),qi(this,cE,n?n.blob:void 0,"f"),qi(this,AE,n&&n.wrapS!==void 0?n.wrapS:$p.TEXTURE_WRAPPING.REPEAT,"f"),qi(this,wE,n&&n.wrapT!==void 0?n.wrapT:$p.TEXTURE_WRAPPING.REPEAT,"f"),qi(this,gE,n&&n.minFilter!==void 0?n.minFilter:$p.TEXTURE_FILTERING.NONE,"f"),qi(this,mE,n&&n.magFilter!==void 0?n.magFilter:$p.TEXTURE_FILTERING.NONE,"f"),qi(this,uE,n&&n.center!==void 0?n.center:c_.vec2.fromValues(0,0),"f"),qi(this,fE,n?n.color:void 0,"f"),qi(this,vE,n&&n.offset!==void 0?n.offset:c_.vec2.fromValues(0,0),"f"),qi(this,_E,n&&n.repeat!==void 0?n.repeat:c_.vec2.fromValues(1,1),"f"),qi(this,yE,n&&n.rotation!==void 0?n.rotation:0,"f"),qi(this,bE,n?n.texCoord:void 0,"f"),qi(this,hE,n&&n.flipY!==void 0?n.flipY:!0,"f")}get asData(){return Ll(this,lE,"f")}set asData(e){qi(this,lE,e,"f")}get blob(){return Ll(this,cE,"f")}set blob(e){qi(this,cE,e,"f")}get center(){return Ll(this,uE,"f")}set center(e){qi(this,uE,e,"f")}get color(){return Ll(this,fE,"f")}set color(e){qi(this,fE,e,"f")}get data(){return Ll(this,dE,"f")}set data(e){qi(this,dE,e,"f")}get flipY(){return Ll(this,hE,"f")}set flipY(e){qi(this,hE,e,"f")}get image(){return Ll(this,pE,"f")}set image(e){qi(this,pE,e,"f")}get magFilter(){return Ll(this,mE,"f")}set magFilter(e){qi(this,mE,e,"f")}get minFilter(){return Ll(this,gE,"f")}set minFilter(e){qi(this,gE,e,"f")}get offset(){return Ll(this,vE,"f")}set offset(e){qi(this,vE,e,"f")}get repeat(){return Ll(this,_E,"f")}set repeat(e){qi(this,_E,e,"f")}get rotation(){return Ll(this,yE,"f")}set rotation(e){qi(this,yE,e,"f")}get texCoord(){return Ll(this,bE,"f")}set texCoord(e){qi(this,bE,e,"f")}get wrapS(){return Ll(this,AE,"f")}set wrapS(e){qi(this,AE,e,"f")}get wrapT(){return Ll(this,wE,"f")}set wrapT(e){qi(this,wE,e,"f")}clone(){return new LZ(this.image,{asData:this.asData,data:this.data,blob:this.blob,wrapS:this.wrapS,wrapT:this.wrapT,minFilter:this.minFilter,magFilter:this.magFilter,center:this.center,color:this.color,offset:this.offset,repeat:this.repeat,rotation:this.rotation,texCoord:this.texCoord,flipY:this.flipY},this.id,this.version)}}I9.MapData=LZ;lE=new WeakMap,cE=new WeakMap,uE=new WeakMap,fE=new WeakMap,dE=new WeakMap,hE=new WeakMap,pE=new WeakMap,mE=new WeakMap,gE=new WeakMap,vE=new WeakMap,_E=new WeakMap,yE=new WeakMap,bE=new WeakMap,AE=new WeakMap,wE=new WeakMap;var N9={};Object.defineProperty(N9,"__esModule",{value:!0});N9.MaterialBasicLineData=void 0;const MQe=If,OF=zd;class zZ extends MQe.AbstractMaterialData{constructor(e,n,i){super(e,n,i)}clone(){return new zZ({alphaMap:this.alphaMap,alphaCutoff:this.alphaCutoff,alphaMode:this.alphaMode,aoMap:this.aoMap,aoMapIntensity:this.aoMapIntensity,bumpMap:this.bumpMap,bumpScale:this.bumpScale,color:this.color,depthTest:this.depthTest,depthWrite:this.depthWrite,emissiveMap:this.emissiveMap,emissiveness:this.emissiveness,shading:this.shading,map:this.map,name:this.name,normalMap:this.normalMap,normalScale:this.normalScale,opacity:this.opacity,side:this.side,transparent:this.transparent},this.id,this.version)}copy(e){this.alphaCutoff=e.alphaCutoff,this.alphaMap=e.alphaMap,this.alphaMode=e.alphaMode,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.color=e.color,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.emissiveMap=e.emissiveMap,this.emissiveness=e.emissiveness,this.materialOutput=e.materialOutput,this.map=e.map,this.normalMap=e.normalMap,this.normalScale=e.normalScale,this.opacity=e.opacity,this.shading=e.shading,this.side=e.side,this.transparent=e.transparent}reset(){this.alphaCutoff=0,this.alphaMap=void 0,this.alphaMode=OF.MATERIAL_ALPHA.OPAQUE,this.aoMap=void 0,this.aoMapIntensity=1,this.bumpMap=void 0,this.bumpScale=1,this.color="#ffffff",this.depthTest=void 0,this.depthWrite=void 0,this.emissiveMap=void 0,this.emissiveness="#000000",this.materialOutput=!1,this.map=void 0,this.normalMap=void 0,this.normalScale=1,this.opacity=1,this.shading=OF.MATERIAL_SHADING.SMOOTH,this.side=OF.MATERIAL_SIDE.DOUBLE,this.transparent=void 0}}N9.MaterialBasicLineData=zZ;var L9={},zl=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},Bl=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},WP,YP,qP,XP,ZP,QP,KP,JP,e5,t5,n5,r5,i5,s5,o5;Object.defineProperty(L9,"__esModule",{value:!0});L9.MaterialGemData=void 0;const kQe=If,IF=zd,Pse=Cr;class BZ extends kQe.AbstractMaterialData{constructor(e,n,i){super(e,n,i),WP.set(this,2.4),YP.set(this,void 0),qP.set(this,1),XP.set(this,"#ffffff"),ZP.set(this,"#ffffff"),QP.set(this,Pse.vec3.create()),KP.set(this,1),JP.set(this,void 0),e5.set(this,1),t5.set(this,1),n5.set(this,0),r5.set(this,0),i5.set(this,5),s5.set(this,0),o5.set(this,void 0),e&&(e.refractionIndex!==void 0&&(this.refractionIndex=e.refractionIndex),e.impurityMap!==void 0&&(this.impurityMap=e.impurityMap),e.impurityScale!==void 0&&(this.impurityScale=e.impurityScale),e.colorTransferBegin!==void 0&&(this.colorTransferBegin=e.colorTransferBegin),e.colorTransferEnd!==void 0&&(this.colorTransferEnd=e.colorTransferEnd),e.center!==void 0&&(this.center=e.center),e.tracingDepth!==void 0&&(this.tracingDepth=e.tracingDepth),e.radius!==void 0&&(this.radius=e.radius),e.sphericalNormalMap!==void 0&&(this.sphericalNormalMap=e.sphericalNormalMap),e.gamma!==void 0&&(this.gamma=e.gamma),e.contrast!==void 0&&(this.contrast=e.contrast),e.brightness!==void 0&&(this.brightness=e.brightness),e.dispersion!==void 0&&(this.dispersion=e.dispersion),e.tracingOpacity!==void 0&&(this.tracingOpacity=e.tracingOpacity),e.envMap!==void 0&&(this.envMap=e.envMap))}get refractionIndex(){return zl(this,WP,"f")}set refractionIndex(e){Bl(this,WP,e,"f")}get impurityMap(){return zl(this,YP,"f")}set impurityMap(e){Bl(this,YP,e,"f")}get impurityScale(){return zl(this,qP,"f")}set impurityScale(e){Bl(this,qP,e,"f")}get colorTransferBegin(){return zl(this,XP,"f")}set colorTransferBegin(e){Bl(this,XP,e,"f")}get colorTransferEnd(){return zl(this,ZP,"f")}set colorTransferEnd(e){Bl(this,ZP,e,"f")}get center(){return zl(this,QP,"f")}set center(e){Bl(this,QP,e,"f")}get tracingDepth(){return zl(this,i5,"f")}set tracingDepth(e){Bl(this,i5,e,"f")}get radius(){return zl(this,KP,"f")}set radius(e){Bl(this,KP,e,"f")}get sphericalNormalMap(){return zl(this,JP,"f")}set sphericalNormalMap(e){Bl(this,JP,e,"f")}get gamma(){return zl(this,e5,"f")}set gamma(e){Bl(this,e5,e,"f")}get contrast(){return zl(this,t5,"f")}set contrast(e){Bl(this,t5,e,"f")}get brightness(){return zl(this,n5,"f")}set brightness(e){Bl(this,n5,e,"f")}get dispersion(){return zl(this,r5,"f")}set dispersion(e){Bl(this,r5,e,"f")}get tracingOpacity(){return zl(this,s5,"f")}set tracingOpacity(e){Bl(this,s5,e,"f")}get envMap(){return zl(this,o5,"f")}set envMap(e){Bl(this,o5,e,"f")}clone(){return new BZ({alphaMap:this.alphaMap,alphaCutoff:this.alphaCutoff,alphaMode:this.alphaMode,aoMap:this.aoMap,aoMapIntensity:this.aoMapIntensity,bumpMap:this.bumpMap,bumpScale:this.bumpScale,color:this.color,depthTest:this.depthTest,depthWrite:this.depthWrite,emissiveMap:this.emissiveMap,emissiveness:this.emissiveness,shading:this.shading,map:this.map,name:this.name,normalMap:this.normalMap,normalScale:this.normalScale,opacity:this.opacity,side:this.side,transparent:this.transparent,refractionIndex:this.refractionIndex,impurityMap:this.impurityMap,impurityScale:this.impurityScale,colorTransferBegin:this.colorTransferBegin,colorTransferEnd:this.colorTransferEnd,center:this.center,tracingDepth:this.tracingDepth,radius:this.radius,sphericalNormalMap:this.sphericalNormalMap,gamma:this.gamma,contrast:this.contrast,brightness:this.brightness,dispersion:this.dispersion,tracingOpacity:this.tracingOpacity,envMap:this.envMap},this.id,this.version)}copy(e){this.alphaCutoff=e.alphaCutoff,this.alphaMap=e.alphaMap,this.alphaMode=e.alphaMode,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.color=e.color,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.emissiveMap=e.emissiveMap,this.emissiveness=e.emissiveness,this.materialOutput=e.materialOutput,this.map=e.map,this.normalMap=e.normalMap,this.normalScale=e.normalScale,this.opacity=e.opacity,this.shading=e.shading,this.side=e.side,this.transparent=e.transparent,this.refractionIndex=e.refractionIndex,this.impurityMap=e.impurityMap,this.impurityScale=e.impurityScale,this.colorTransferBegin=e.colorTransferBegin,this.colorTransferEnd=e.colorTransferEnd,this.center=e.center,this.tracingDepth=e.tracingDepth,this.radius=e.radius,this.sphericalNormalMap=e.sphericalNormalMap,this.gamma=e.gamma,this.contrast=e.contrast,this.brightness=e.brightness,this.dispersion=e.dispersion,this.tracingOpacity=e.tracingOpacity,this.envMap=e.envMap}reset(){this.alphaCutoff=0,this.alphaMap=void 0,this.alphaMode=IF.MATERIAL_ALPHA.OPAQUE,this.aoMap=void 0,this.aoMapIntensity=1,this.bumpMap=void 0,this.bumpScale=1,this.color="#ffffff",this.depthTest=void 0,this.depthWrite=void 0,this.emissiveMap=void 0,this.emissiveness="#000000",this.materialOutput=!1,this.map=void 0,this.normalMap=void 0,this.normalScale=1,this.opacity=1,this.shading=IF.MATERIAL_SHADING.SMOOTH,this.side=IF.MATERIAL_SIDE.DOUBLE,this.transparent=void 0,this.refractionIndex=2.4,this.impurityMap=void 0,this.impurityScale=1,this.colorTransferBegin="#ffffff",this.colorTransferEnd="#ffffff",this.center=Pse.vec3.create(),this.radius=1,this.sphericalNormalMap=void 0,this.gamma=1,this.contrast=1,this.brightness=0,this.dispersion=0,this.tracingDepth=5,this.tracingOpacity=0,this.envMap=void 0}}L9.MaterialGemData=BZ;WP=new WeakMap,YP=new WeakMap,qP=new WeakMap,XP=new WeakMap,ZP=new WeakMap,QP=new WeakMap,KP=new WeakMap,JP=new WeakMap,e5=new WeakMap,t5=new WeakMap,n5=new WeakMap,r5=new WeakMap,i5=new WeakMap,s5=new WeakMap,o5=new WeakMap;var z9={},Nr=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},Lr=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},a5,l5,c5,u5,f5,d5,h5,p5,m5,g5,v5,_5,y5,b5,A5,w5,E5,S5,T5,x5,M5,k5,C5,P5,R5,D5,O5,I5,N5,L5,z5,B5,U5,F5,V5,G5,j5,H5,$5,W5,Y5,q5;Object.defineProperty(z9,"__esModule",{value:!0});z9.MaterialMultiPointData=void 0;const CQe=If,NF=zd;class UZ extends CQe.AbstractMaterialData{constructor(e,n,i){super(e,n,i),a5.set(this,void 0),l5.set(this,void 0),c5.set(this,void 0),u5.set(this,void 0),f5.set(this,void 0),d5.set(this,void 0),h5.set(this,void 0),p5.set(this,void 0),m5.set(this,"#ffffff"),g5.set(this,"#ffffff"),v5.set(this,"#ffffff"),_5.set(this,"#ffffff"),y5.set(this,"#ffffff"),b5.set(this,"#ffffff"),A5.set(this,"#ffffff"),w5.set(this,"#ffffff"),E5.set(this,void 0),S5.set(this,void 0),T5.set(this,void 0),x5.set(this,void 0),M5.set(this,void 0),k5.set(this,void 0),C5.set(this,void 0),P5.set(this,void 0),R5.set(this,void 0),D5.set(this,void 0),O5.set(this,void 0),I5.set(this,void 0),N5.set(this,void 0),L5.set(this,void 0),z5.set(this,void 0),B5.set(this,void 0),U5.set(this,void 0),F5.set(this,void 0),V5.set(this,void 0),G5.set(this,void 0),j5.set(this,void 0),H5.set(this,void 0),$5.set(this,void 0),W5.set(this,void 0),Y5.set(this,void 0),q5.set(this,void 0),e&&(e.materialIndexDataMap!==void 0&&(this.materialIndexDataMap=e.materialIndexDataMap),e.materialIndexDataMapSize!==void 0&&(this.materialIndexDataMapSize=e.materialIndexDataMapSize),e.alphaMap_0!==void 0&&(this.alphaMap_0=e.alphaMap_0),e.color_0!==void 0&&(this.color_0=e.color_0),e.map_0!==void 0&&(this.map_0=e.map_0),e.size_0!==void 0&&(this.size_0=e.size_0),e.sizeAttenuation_0!==void 0&&(this.sizeAttenuation_0=e.sizeAttenuation_0),e.alphaMap_1!==void 0&&(this.alphaMap_1=e.alphaMap_1),e.color_1!==void 0&&(this.color_1=e.color_1),e.map_1!==void 0&&(this.map_1=e.map_1),e.size_1!==void 0&&(this.size_1=e.size_1),e.sizeAttenuation_1!==void 0&&(this.sizeAttenuation_1=e.sizeAttenuation_1),e.alphaMap_2!==void 0&&(this.alphaMap_2=e.alphaMap_2),e.color_2!==void 0&&(this.color_2=e.color_2),e.map_2!==void 0&&(this.map_2=e.map_2),e.size_2!==void 0&&(this.size_2=e.size_2),e.sizeAttenuation_2!==void 0&&(this.sizeAttenuation_2=e.sizeAttenuation_2),e.alphaMap_3!==void 0&&(this.alphaMap_3=e.alphaMap_3),e.color_3!==void 0&&(this.color_3=e.color_3),e.map_3!==void 0&&(this.map_3=e.map_3),e.size_3!==void 0&&(this.size_3=e.size_3),e.sizeAttenuation_3!==void 0&&(this.sizeAttenuation_3=e.sizeAttenuation_3),e.alphaMap_4!==void 0&&(this.alphaMap_4=e.alphaMap_4),e.color_4!==void 0&&(this.color_4=e.color_4),e.map_4!==void 0&&(this.map_4=e.map_4),e.size_4!==void 0&&(this.size_4=e.size_4),e.sizeAttenuation_4!==void 0&&(this.sizeAttenuation_4=e.sizeAttenuation_4),e.alphaMap_5!==void 0&&(this.alphaMap_5=e.alphaMap_5),e.color_5!==void 0&&(this.color_5=e.color_5),e.map_5!==void 0&&(this.map_5=e.map_5),e.size_5!==void 0&&(this.size_5=e.size_5),e.sizeAttenuation_5!==void 0&&(this.sizeAttenuation_5=e.sizeAttenuation_5),e.alphaMap_6!==void 0&&(this.alphaMap_6=e.alphaMap_6),e.color_6!==void 0&&(this.color_6=e.color_6),e.map_6!==void 0&&(this.map_6=e.map_6),e.size_6!==void 0&&(this.size_6=e.size_6),e.sizeAttenuation_6!==void 0&&(this.sizeAttenuation_6=e.sizeAttenuation_6),e.alphaMap_7!==void 0&&(this.alphaMap_7=e.alphaMap_7),e.color_7!==void 0&&(this.color_7=e.color_7),e.map_7!==void 0&&(this.map_7=e.map_7),e.size_7!==void 0&&(this.size_7=e.size_7),e.sizeAttenuation_7!==void 0&&(this.sizeAttenuation_7=e.sizeAttenuation_7))}get alphaMap_0(){return Nr(this,a5,"f")}set alphaMap_0(e){Lr(this,a5,e,"f")}get alphaMap_1(){return Nr(this,l5,"f")}set alphaMap_1(e){Lr(this,l5,e,"f")}get alphaMap_2(){return Nr(this,c5,"f")}set alphaMap_2(e){Lr(this,c5,e,"f")}get color_0(){return Nr(this,m5,"f")}set color_0(e){Lr(this,m5,e,"f")}get color_1(){return Nr(this,g5,"f")}set color_1(e){Lr(this,g5,e,"f")}get color_2(){return Nr(this,v5,"f")}set color_2(e){Lr(this,v5,e,"f")}get map_0(){return Nr(this,E5,"f")}set map_0(e){Lr(this,E5,e,"f")}get map_1(){return Nr(this,S5,"f")}set map_1(e){Lr(this,S5,e,"f")}get map_2(){return Nr(this,T5,"f")}set map_2(e){Lr(this,T5,e,"f")}get materialIndexDataMap(){return Nr(this,R5,"f")}set materialIndexDataMap(e){Lr(this,R5,e,"f")}get materialIndexDataMapSize(){return Nr(this,D5,"f")}set materialIndexDataMapSize(e){Lr(this,D5,e,"f")}get sizeAttenuation_0(){return Nr(this,O5,"f")}set sizeAttenuation_0(e){Lr(this,O5,e,"f")}get sizeAttenuation_1(){return Nr(this,I5,"f")}set sizeAttenuation_1(e){Lr(this,I5,e,"f")}get sizeAttenuation_2(){return Nr(this,N5,"f")}set sizeAttenuation_2(e){Lr(this,N5,e,"f")}get size_0(){return Nr(this,V5,"f")}set size_0(e){Lr(this,V5,e,"f")}get size_1(){return Nr(this,G5,"f")}set size_1(e){Lr(this,G5,e,"f")}get size_2(){return Nr(this,j5,"f")}set size_2(e){Lr(this,j5,e,"f")}get alphaMap_3(){return Nr(this,u5,"f")}set alphaMap_3(e){Lr(this,u5,e,"f")}get color_3(){return Nr(this,_5,"f")}set color_3(e){Lr(this,_5,e,"f")}get map_3(){return Nr(this,x5,"f")}set map_3(e){Lr(this,x5,e,"f")}get size_3(){return Nr(this,H5,"f")}set size_3(e){Lr(this,H5,e,"f")}get sizeAttenuation_3(){return Nr(this,L5,"f")}set sizeAttenuation_3(e){Lr(this,L5,e,"f")}get alphaMap_4(){return Nr(this,f5,"f")}set alphaMap_4(e){Lr(this,f5,e,"f")}get color_4(){return Nr(this,y5,"f")}set color_4(e){Lr(this,y5,e,"f")}get map_4(){return Nr(this,M5,"f")}set map_4(e){Lr(this,M5,e,"f")}get size_4(){return Nr(this,$5,"f")}set size_4(e){Lr(this,$5,e,"f")}get sizeAttenuation_4(){return Nr(this,z5,"f")}set sizeAttenuation_4(e){Lr(this,z5,e,"f")}get alphaMap_5(){return Nr(this,d5,"f")}set alphaMap_5(e){Lr(this,d5,e,"f")}get color_5(){return Nr(this,b5,"f")}set color_5(e){Lr(this,b5,e,"f")}get map_5(){return Nr(this,k5,"f")}set map_5(e){Lr(this,k5,e,"f")}get size_5(){return Nr(this,W5,"f")}set size_5(e){Lr(this,W5,e,"f")}get sizeAttenuation_5(){return Nr(this,B5,"f")}set sizeAttenuation_5(e){Lr(this,B5,e,"f")}get alphaMap_6(){return Nr(this,h5,"f")}set alphaMap_6(e){Lr(this,h5,e,"f")}get color_6(){return Nr(this,A5,"f")}set color_6(e){Lr(this,A5,e,"f")}get map_6(){return Nr(this,C5,"f")}set map_6(e){Lr(this,C5,e,"f")}get size_6(){return Nr(this,Y5,"f")}set size_6(e){Lr(this,Y5,e,"f")}get sizeAttenuation_6(){return Nr(this,U5,"f")}set sizeAttenuation_6(e){Lr(this,U5,e,"f")}get alphaMap_7(){return Nr(this,p5,"f")}set alphaMap_7(e){Lr(this,p5,e,"f")}get color_7(){return Nr(this,w5,"f")}set color_7(e){Lr(this,w5,e,"f")}get map_7(){return Nr(this,P5,"f")}set map_7(e){Lr(this,P5,e,"f")}get size_7(){return Nr(this,q5,"f")}set size_7(e){Lr(this,q5,e,"f")}get sizeAttenuation_7(){return Nr(this,F5,"f")}set sizeAttenuation_7(e){Lr(this,F5,e,"f")}clone(){return new UZ({alphaMode:this.alphaMode,alphaCutoff:this.alphaCutoff,aoMap:this.aoMap,aoMapIntensity:this.aoMapIntensity,bumpMap:this.bumpMap,bumpScale:this.bumpScale,depthTest:this.depthTest,depthWrite:this.depthWrite,emissiveMap:this.emissiveMap,emissiveness:this.emissiveness,shading:this.shading,name:this.name,normalMap:this.normalMap,normalScale:this.normalScale,opacity:this.opacity,side:this.side,transparent:this.transparent,alphaMap_0:this.alphaMap_0,alphaMap_1:this.alphaMap_1,alphaMap_2:this.alphaMap_2,alphaMap_3:this.alphaMap_3,alphaMap_4:this.alphaMap_4,alphaMap_5:this.alphaMap_5,alphaMap_6:this.alphaMap_6,alphaMap_7:this.alphaMap_7,color_0:this.color_0,color_1:this.color_1,color_2:this.color_2,color_3:this.color_3,color_4:this.color_4,color_5:this.color_5,color_6:this.color_6,color_7:this.color_7,map_0:this.map_0,map_1:this.map_1,map_2:this.map_2,map_3:this.map_3,map_4:this.map_4,map_5:this.map_5,map_6:this.map_6,map_7:this.map_7,materialIndexDataMap:this.materialIndexDataMap,materialIndexDataMapSize:this.materialIndexDataMapSize,size_0:this.size_0,size_1:this.size_1,size_2:this.size_2,size_3:this.size_3,size_4:this.size_4,size_5:this.size_5,size_6:this.size_6,size_7:this.size_7,sizeAttenuation_0:this.sizeAttenuation_0,sizeAttenuation_1:this.sizeAttenuation_1,sizeAttenuation_2:this.sizeAttenuation_2,sizeAttenuation_3:this.sizeAttenuation_3,sizeAttenuation_4:this.sizeAttenuation_4,sizeAttenuation_5:this.sizeAttenuation_5,sizeAttenuation_6:this.sizeAttenuation_6,sizeAttenuation_7:this.sizeAttenuation_7},this.id,this.version)}copy(e){this.alphaCutoff=e.alphaCutoff,this.alphaMode=e.alphaMode,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.emissiveMap=e.emissiveMap,this.emissiveness=e.emissiveness,this.materialOutput=e.materialOutput,this.normalMap=e.normalMap,this.normalScale=e.normalScale,this.opacity=e.opacity,this.shading=e.shading,this.side=e.side,this.transparent=e.transparent,this.alphaMap_0=e.alphaMap_0,this.alphaMap_1=e.alphaMap_1,this.alphaMap_2=e.alphaMap_2,this.alphaMap_3=e.alphaMap_3,this.alphaMap_4=e.alphaMap_4,this.alphaMap_5=e.alphaMap_5,this.alphaMap_6=e.alphaMap_6,this.alphaMap_7=e.alphaMap_7,this.color_0=e.color_0,this.color_1=e.color_1,this.color_2=e.color_2,this.color_3=e.color_3,this.color_4=e.color_4,this.color_5=e.color_5,this.color_6=e.color_6,this.color_7=e.color_7,this.map_0=e.map_0,this.map_1=e.map_1,this.map_2=e.map_2,this.map_3=e.map_3,this.map_4=e.map_4,this.map_5=e.map_5,this.map_6=e.map_6,this.map_7=e.map_7,this.materialIndexDataMap=e.materialIndexDataMap,this.materialIndexDataMapSize=e.materialIndexDataMapSize,this.size_0=e.size_0,this.size_1=e.size_1,this.size_2=e.size_2,this.size_3=e.size_3,this.size_4=e.size_4,this.size_5=e.size_5,this.size_6=e.size_6,this.size_7=e.size_7,this.sizeAttenuation_0=e.sizeAttenuation_0,this.sizeAttenuation_1=e.sizeAttenuation_1,this.sizeAttenuation_2=e.sizeAttenuation_2,this.sizeAttenuation_3=e.sizeAttenuation_3,this.sizeAttenuation_4=e.sizeAttenuation_4,this.sizeAttenuation_5=e.sizeAttenuation_5,this.sizeAttenuation_6=e.sizeAttenuation_6,this.sizeAttenuation_7=e.sizeAttenuation_7}reset(){this.alphaCutoff=0,this.alphaMode=NF.MATERIAL_ALPHA.OPAQUE,this.aoMap=void 0,this.aoMapIntensity=1,this.bumpMap=void 0,this.bumpScale=1,this.depthTest=void 0,this.depthWrite=void 0,this.emissiveMap=void 0,this.emissiveness="#000000",this.materialOutput=!1,this.normalMap=void 0,this.normalScale=1,this.opacity=1,this.shading=NF.MATERIAL_SHADING.SMOOTH,this.side=NF.MATERIAL_SIDE.DOUBLE,this.transparent=void 0,this.alphaMap_0=void 0,this.alphaMap_1=void 0,this.alphaMap_2=void 0,this.alphaMap_3=void 0,this.alphaMap_4=void 0,this.alphaMap_5=void 0,this.alphaMap_6=void 0,this.alphaMap_7=void 0,this.color_0="#ffffff",this.color_1="#ffffff",this.color_2="#ffffff",this.color_3="#ffffff",this.color_4="#ffffff",this.color_5="#ffffff",this.color_6="#ffffff",this.color_7="#ffffff",this.map_0=void 0,this.map_1=void 0,this.map_2=void 0,this.map_3=void 0,this.map_4=void 0,this.map_5=void 0,this.map_6=void 0,this.map_7=void 0,this.materialIndexDataMap=void 0,this.materialIndexDataMapSize=void 0,this.size_0=void 0,this.size_1=void 0,this.size_2=void 0,this.size_3=void 0,this.size_4=void 0,this.size_5=void 0,this.size_6=void 0,this.size_7=void 0,this.sizeAttenuation_0=void 0,this.sizeAttenuation_1=void 0,this.sizeAttenuation_2=void 0,this.sizeAttenuation_3=void 0,this.sizeAttenuation_4=void 0,this.sizeAttenuation_5=void 0,this.sizeAttenuation_6=void 0,this.sizeAttenuation_7=void 0}}z9.MaterialMultiPointData=UZ;a5=new WeakMap,l5=new WeakMap,c5=new WeakMap,u5=new WeakMap,f5=new WeakMap,d5=new WeakMap,h5=new WeakMap,p5=new WeakMap,m5=new WeakMap,g5=new WeakMap,v5=new WeakMap,_5=new WeakMap,y5=new WeakMap,b5=new WeakMap,A5=new WeakMap,w5=new WeakMap,E5=new WeakMap,S5=new WeakMap,T5=new WeakMap,x5=new WeakMap,M5=new WeakMap,k5=new WeakMap,C5=new WeakMap,P5=new WeakMap,R5=new WeakMap,D5=new WeakMap,O5=new WeakMap,I5=new WeakMap,N5=new WeakMap,L5=new WeakMap,z5=new WeakMap,B5=new WeakMap,U5=new WeakMap,F5=new WeakMap,V5=new WeakMap,G5=new WeakMap,j5=new WeakMap,H5=new WeakMap,$5=new WeakMap,W5=new WeakMap,Y5=new WeakMap,q5=new WeakMap;var B9={},Rse=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},Dse=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},X5,Z5;Object.defineProperty(B9,"__esModule",{value:!0});B9.MaterialPointData=void 0;const PQe=If,LF=zd;class FZ extends PQe.AbstractMaterialData{constructor(e,n,i){super(e,n,i),X5.set(this,void 0),Z5.set(this,void 0),e&&(e.size!==void 0&&(this.size=e.size),e.sizeAttenuation!==void 0&&(this.sizeAttenuation=e.sizeAttenuation))}get size(){return Rse(this,X5,"f")}set size(e){Dse(this,X5,e,"f")}get sizeAttenuation(){return Rse(this,Z5,"f")}set sizeAttenuation(e){Dse(this,Z5,e,"f")}clone(){return new FZ({alphaMap:this.alphaMap,alphaCutoff:this.alphaCutoff,alphaMode:this.alphaMode,aoMap:this.aoMap,aoMapIntensity:this.aoMapIntensity,bumpMap:this.bumpMap,bumpScale:this.bumpScale,color:this.color,depthTest:this.depthTest,depthWrite:this.depthWrite,emissiveMap:this.emissiveMap,emissiveness:this.emissiveness,shading:this.shading,map:this.map,name:this.name,normalMap:this.normalMap,normalScale:this.normalScale,opacity:this.opacity,side:this.side,transparent:this.transparent,size:this.size,sizeAttenuation:this.sizeAttenuation},this.id,this.version)}copy(e){this.alphaCutoff=e.alphaCutoff,this.alphaMap=e.alphaMap,this.alphaMode=e.alphaMode,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.color=e.color,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.emissiveMap=e.emissiveMap,this.emissiveness=e.emissiveness,this.materialOutput=e.materialOutput,this.map=e.map,this.normalMap=e.normalMap,this.normalScale=e.normalScale,this.opacity=e.opacity,this.shading=e.shading,this.side=e.side,this.transparent=e.transparent,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation}reset(){this.alphaCutoff=0,this.alphaMap=void 0,this.alphaMode=LF.MATERIAL_ALPHA.OPAQUE,this.aoMap=void 0,this.aoMapIntensity=1,this.bumpMap=void 0,this.bumpScale=1,this.color="#ffffff",this.depthTest=void 0,this.depthWrite=void 0,this.emissiveMap=void 0,this.emissiveness="#000000",this.materialOutput=!1,this.map=void 0,this.normalMap=void 0,this.normalScale=1,this.opacity=1,this.shading=LF.MATERIAL_SHADING.SMOOTH,this.side=LF.MATERIAL_SIDE.DOUBLE,this.transparent=void 0,this.size=void 0,this.sizeAttenuation=void 0}}B9.MaterialPointData=FZ;X5=new WeakMap,Z5=new WeakMap;var U9={};Object.defineProperty(U9,"__esModule",{value:!0});U9.MaterialShadowData=void 0;const RQe=If;class VZ extends RQe.AbstractMaterialData{constructor(e,n,i){super(e,n,i)}reset(){this.color="#000000",this.opacity=1}clone(){return new VZ({color:this.color,opacity:this.opacity},this.id,this.version)}copy(e){this.color=e.color,this.opacity=e.opacity}}U9.MaterialShadowData=VZ;var F9={},u_=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},f_=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},Q5,K5,J5,eR,tR,nR;Object.defineProperty(F9,"__esModule",{value:!0});F9.MaterialSpecularGlossinessData=void 0;const DQe=If,zF=zd;class GZ extends DQe.AbstractMaterialData{constructor(e,n,i){super(e,n,i),Q5.set(this,1),K5.set(this,void 0),J5.set(this,"#ffffff"),eR.set(this,void 0),tR.set(this,void 0),nR.set(this,void 0),e&&(e.glossiness!==void 0&&(this.glossiness=e.glossiness),e.specular!==void 0&&(this.specular=e.specular),e.specularGlossinessMap!==void 0&&(this.specularGlossinessMap=e.specularGlossinessMap),e.specularMap!==void 0&&(this.specularMap=e.specularMap),e.glossinessMap!==void 0&&(this.glossinessMap=e.glossinessMap),e.envMap!==void 0&&(this.envMap=e.envMap))}get envMap(){return u_(this,nR,"f")}set envMap(e){f_(this,nR,e,"f")}get glossiness(){return u_(this,Q5,"f")}set glossiness(e){f_(this,Q5,e,"f")}get glossinessMap(){return u_(this,K5,"f")}set glossinessMap(e){f_(this,K5,e,"f")}get specular(){return u_(this,J5,"f")}set specular(e){f_(this,J5,e,"f")}get specularGlossinessMap(){return u_(this,eR,"f")}set specularGlossinessMap(e){f_(this,eR,e,"f")}get specularMap(){return u_(this,tR,"f")}set specularMap(e){f_(this,tR,e,"f")}clone(){return new GZ({alphaMap:this.alphaMap,alphaCutoff:this.alphaCutoff,alphaMode:this.alphaMode,aoMap:this.aoMap,aoMapIntensity:this.aoMapIntensity,bumpMap:this.bumpMap,bumpScale:this.bumpScale,color:this.color,depthTest:this.depthTest,depthWrite:this.depthWrite,emissiveMap:this.emissiveMap,emissiveness:this.emissiveness,shading:this.shading,map:this.map,name:this.name,normalMap:this.normalMap,normalScale:this.normalScale,opacity:this.opacity,side:this.side,transparent:this.transparent,specular:this.specular,specularMap:this.specularMap,specularGlossinessMap:this.specularGlossinessMap,glossiness:this.glossiness,glossinessMap:this.glossinessMap,envMap:this.envMap},this.id,this.version)}copy(e){this.alphaCutoff=e.alphaCutoff,this.alphaMap=e.alphaMap,this.alphaMode=e.alphaMode,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.color=e.color,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.emissiveMap=e.emissiveMap,this.emissiveness=e.emissiveness,this.materialOutput=e.materialOutput,this.map=e.map,this.normalMap=e.normalMap,this.normalScale=e.normalScale,this.opacity=e.opacity,this.shading=e.shading,this.side=e.side,this.transparent=e.transparent,this.glossiness=e.glossiness,this.specular=e.specular,this.specularGlossinessMap=e.specularGlossinessMap,this.specularMap=e.specularMap,this.glossinessMap=e.glossinessMap,this.envMap=e.envMap}reset(){this.alphaCutoff=0,this.alphaMap=void 0,this.alphaMode=zF.MATERIAL_ALPHA.OPAQUE,this.aoMap=void 0,this.aoMapIntensity=1,this.bumpMap=void 0,this.bumpScale=1,this.color="#ffffff",this.depthTest=void 0,this.depthWrite=void 0,this.emissiveMap=void 0,this.emissiveness="#000000",this.materialOutput=!1,this.map=void 0,this.normalMap=void 0,this.normalScale=1,this.opacity=1,this.shading=zF.MATERIAL_SHADING.SMOOTH,this.side=zF.MATERIAL_SIDE.DOUBLE,this.transparent=void 0,this.glossiness=1,this.specular="#ffffff",this.specularGlossinessMap=void 0,this.specularMap=void 0,this.glossinessMap=void 0,this.envMap=void 0}}F9.MaterialSpecularGlossinessData=GZ;Q5=new WeakMap,K5=new WeakMap,J5=new WeakMap,eR=new WeakMap,tR=new WeakMap,nR=new WeakMap;var V9={},OQe=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},IQe=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},rR;Object.defineProperty(V9,"__esModule",{value:!0});V9.MaterialUnlitData=void 0;const BF=zd,NQe=If;class jZ extends NQe.AbstractMaterialData{constructor(e,n,i){super(e,n,i),rR.set(this,void 0),e&&e.envMap!==void 0&&(this.envMap=e.envMap)}get envMap(){return OQe(this,rR,"f")}set envMap(e){IQe(this,rR,e,"f")}clone(){return new jZ({alphaMap:this.alphaMap,alphaCutoff:this.alphaCutoff,alphaMode:this.alphaMode,aoMap:this.aoMap,aoMapIntensity:this.aoMapIntensity,bumpMap:this.bumpMap,bumpScale:this.bumpScale,color:this.color,depthTest:this.depthTest,depthWrite:this.depthWrite,emissiveMap:this.emissiveMap,emissiveness:this.emissiveness,shading:this.shading,map:this.map,name:this.name,normalMap:this.normalMap,normalScale:this.normalScale,opacity:this.opacity,side:this.side,transparent:this.transparent,envMap:this.envMap},this.id,this.version)}copy(e){this.alphaCutoff=e.alphaCutoff,this.alphaMap=e.alphaMap,this.alphaMode=e.alphaMode,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.color=e.color,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.emissiveMap=e.emissiveMap,this.emissiveness=e.emissiveness,this.materialOutput=e.materialOutput,this.map=e.map,this.normalMap=e.normalMap,this.normalScale=e.normalScale,this.opacity=e.opacity,this.shading=e.shading,this.side=e.side,this.envMap=e.envMap,this.transparent=e.transparent}reset(){this.alphaCutoff=0,this.alphaMap=void 0,this.alphaMode=BF.MATERIAL_ALPHA.OPAQUE,this.aoMap=void 0,this.aoMapIntensity=1,this.bumpMap=void 0,this.bumpScale=1,this.color="#ffffff",this.depthTest=void 0,this.depthWrite=void 0,this.emissiveMap=void 0,this.emissiveness="#000000",this.materialOutput=!1,this.map=void 0,this.normalMap=void 0,this.normalScale=1,this.opacity=1,this.shading=BF.MATERIAL_SHADING.SMOOTH,this.side=BF.MATERIAL_SIDE.DOUBLE,this.transparent=void 0,this.envMap=void 0}}V9.MaterialUnlitData=jZ;rR=new WeakMap;var G9={},j8=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},LQe=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},e$,t$,EE;Object.defineProperty(G9,"__esModule",{value:!0});G9.MaterialVariantsData=void 0;const zQe=dr;class HZ extends zQe.AbstractTreeNodeData{constructor(e,n){super(e,n),e$.set(this,[]),t$.set(this,[]),EE.set(this,void 0)}get geometryData(){return j8(this,t$,"f")}get variants(){return j8(this,e$,"f")}get variantIndex(){return j8(this,EE,"f")}set variantIndex(e){LQe(this,EE,e,"f");for(let n=0;n<this.geometryData.length;n++){const i=this.geometryData[n].materialVariants.find(o=>o.variant===j8(this,EE,"f"));i?this.geometryData[n].material=i.material:this.geometryData[n].material=this.geometryData[n].standardMaterial}}clone(){return new HZ(this.id,this.version)}}G9.MaterialVariantsData=HZ;e$=new WeakMap,t$=new WeakMap,EE=new WeakMap;var h4={},iR=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},xh=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},sR,Z1,by,oR;Object.defineProperty(h4,"__esModule",{value:!0});h4.SDTFAttributesData=h4.SDTFAttributeData=void 0;const BQe=dr;class UQe{constructor(e,n){sR.set(this,void 0),Z1.set(this,void 0),by.set(this,void 0),iR(this,sR,e,"f"),iR(this,Z1,n,"f")}get typeHint(){return xh(this,sR,"f")}get value(){return xh(this,Z1,"f")instanceof Function&&!xh(this,by,"f")?(iR(this,by,xh(this,Z1,"f").call(this),"f"),xh(this,by,"f")):xh(this,Z1,"f")instanceof Function?xh(this,by,"f"):xh(this,Z1,"f")}}h4.SDTFAttributeData=UQe;sR=new WeakMap,Z1=new WeakMap,by=new WeakMap;class $Z extends BQe.AbstractTreeNodeData{constructor(e={},n,i){super(n,i),oR.set(this,{}),iR(this,oR,e,"f")}get attributes(){return xh(this,oR,"f")}clone(){return new $Z(this.attributes,this.id,this.version)}}h4.SDTFAttributesData=$Z;oR=new WeakMap;var j9={},H8=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},eh=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},aR,Q1,lR,Ay;Object.defineProperty(j9,"__esModule",{value:!0});j9.SDTFItemData=void 0;const FQe=dr;class WZ extends FQe.AbstractTreeNodeData{constructor(e,n,i,o,l){super(o,l),aR.set(this,void 0),Q1.set(this,void 0),lR.set(this,{}),Ay.set(this,void 0),H8(this,lR,i,"f"),H8(this,aR,e,"f"),H8(this,Q1,n,"f")}get attributes(){return eh(this,lR,"f")}get typeHint(){return eh(this,aR,"f")}get value(){return eh(this,Q1,"f")instanceof Function&&!eh(this,Ay,"f")?(H8(this,Ay,eh(this,Q1,"f").call(this),"f"),eh(this,Ay,"f")):eh(this,Q1,"f")instanceof Function?eh(this,Ay,"f"):eh(this,Q1,"f")}clone(){return new WZ(this.typeHint,this.value,this.attributes,this.id,this.version)}}j9.SDTFItemData=WZ;aR=new WeakMap,Q1=new WeakMap,lR=new WeakMap,Ay=new WeakMap;var H9={},q6={},Lve={};Object.defineProperty(Lve,"__esModule",{value:!0});var X6={},ys={},zve={};Object.defineProperty(zve,"__esModule",{value:!0});var Bve={};Object.defineProperty(Bve,"__esModule",{value:!0});var Uve={};Object.defineProperty(Uve,"__esModule",{value:!0});var Fve={};Object.defineProperty(Fve,"__esModule",{value:!0});var Vve={};Object.defineProperty(Vve,"__esModule",{value:!0});var Gve={};Object.defineProperty(Gve,"__esModule",{value:!0});var jve={};Object.defineProperty(jve,"__esModule",{value:!0});var Hve={};Object.defineProperty(Hve,"__esModule",{value:!0});var $ve={};Object.defineProperty($ve,"__esModule",{value:!0});var Wve={};Object.defineProperty(Wve,"__esModule",{value:!0});var Yve={};Object.defineProperty(Yve,"__esModule",{value:!0});var qve={};Object.defineProperty(qve,"__esModule",{value:!0});var Xve={};Object.defineProperty(Xve,"__esModule",{value:!0});var Zve={};Object.defineProperty(Zve,"__esModule",{value:!0});var Qve={};Object.defineProperty(Qve,"__esModule",{value:!0});var Kve={};Object.defineProperty(Kve,"__esModule",{value:!0});var Jve={};Object.defineProperty(Jve,"__esModule",{value:!0});var e_e={};Object.defineProperty(e_e,"__esModule",{value:!0});var t_e={};Object.defineProperty(t_e,"__esModule",{value:!0});var n_e={};Object.defineProperty(n_e,"__esModule",{value:!0});var r_e={};Object.defineProperty(r_e,"__esModule",{value:!0});var i_e={};Object.defineProperty(i_e,"__esModule",{value:!0});var s_e={};Object.defineProperty(s_e,"__esModule",{value:!0});var o_e={};Object.defineProperty(o_e,"__esModule",{value:!0});var a_e={};Object.defineProperty(a_e,"__esModule",{value:!0});var l_e={};Object.defineProperty(l_e,"__esModule",{value:!0});var c_e={};Object.defineProperty(c_e,"__esModule",{value:!0});var u_e={};Object.defineProperty(u_e,"__esModule",{value:!0});var mf={};Object.defineProperty(mf,"__esModule",{value:!0});mf.SdtfTypeHintName=mf.SdtfRhinoTypeHintName=mf.SdtfGrasshopperTypeHintName=mf.SdtfGeometryTypeHintName=mf.SdtfPrimitiveTypeHintName=void 0;var n$;(function(t){t.BOOLEAN="boolean",t.CHAR="char",t.COLOR="color",t.DATA="data",t.DECIMAL="decimal",t.DOUBLE="double",t.GUID="guid",t.IMAGE="image",t.INT8="int8",t.INT16="int16",t.INT32="int32",t.INT64="int64",t.JSON="json",t.SINGLE="single",t.STRING="string",t.UINT8="uint8",t.UINT16="uint16",t.UINT32="uint32",t.UINT64="uint64"})(n$||(mf.SdtfPrimitiveTypeHintName=n$={}));var r$;(function(t){t.GEOMETRY_ARC="geometry.arc",t.GEOMETRY_BOUNDING_BOX="geometry.boundingbox",t.GEOMETRY_BOX="geometry.box",t.GEOMETRY_CIRCLE="geometry.circle",t.GEOMETRY_COMPLEX="geometry.complex",t.GEOMETRY_CONE="geometry.cone",t.GEOMETRY_CYLINDER="geometry.cylinder",t.GEOMETRY_ELLIPSE="geometry.ellipse",t.GEOMETRY_INTERVAL="geometry.interval",t.GEOMETRY_INTERVAL2="geometry.interval2",t.GEOMETRY_LINE="geometry.line",t.GEOMETRY_MATRIX="geometry.matrix",t.GEOMETRY_PLANE="geometry.plane",t.GEOMETRY_POINT="geometry.point",t.GEOMETRY_POINT2D="geometry.point2d",t.GEOMETRY_POINT3D="geometry.point3d",t.GEOMETRY_POINT4D="geometry.point4d",t.GEOMETRY_POLYLINE="geometry.polyline",t.GEOMETRY_RAY="geometry.ray",t.GEOMETRY_RECTANGLE="geometry.rectangle",t.GEOMETRY_SPHERE="geometry.sphere",t.GEOMETRY_TORUS="geometry.torus",t.GEOMETRY_TRANSFORM="geometry.transform",t.GEOMETRY_TRANSFORM_LIST="geometry.transformlist",t.GEOMETRY_VECTOR="geometry.vector",t.GEOMETRY_VECTOR2D="geometry.vector2d",t.GEOMETRY_VECTOR3D="geometry.vector3d",t.GEOMETRY_VECTOR4D="geometry.vector4d"})(r$||(mf.SdtfGeometryTypeHintName=r$={}));var i$;(function(t){t.GRASSHOPPER_PATH="grasshopper.path"})(i$||(mf.SdtfGrasshopperTypeHintName=i$={}));var s$;(function(t){t.RHINO_ARC_CURVE="rhino.arccurve",t.RHINO_BREP="rhino.brep",t.RHINO_CURVE="rhino.curve",t.RHINO_EXTRUSION="rhino.extrusion",t.RHINO_LINE_CURVE="rhino.linecurve",t.RHINO_MESH="rhino.mesh",t.RHINO_NURBS_CURVE="rhino.nurbscurve",t.RHINO_NURBS_SURFACE="rhino.nurbssurface",t.RHINO_PLANE_SURFACE="rhino.planesurface",t.RHINO_POINT="rhino.point",t.RHINO_POLY_CURVE="rhino.polycurve",t.RHINO_POLYLINE_CURVE="rhino.polylinecurve",t.RHINO_REV_SURFACE="rhino.revsurface",t.RHINO_SUBD="rhino.subd",t.RHINO_SURFACE="rhino.surface"})(s$||(mf.SdtfRhinoTypeHintName=s$={}));mf.SdtfTypeHintName=Object.assign(Object.assign(Object.assign(Object.assign({},n$),r$),i$),s$);var Ys={};Object.defineProperty(Ys,"__esModule",{value:!0});Ys.isNil=Ys.isBinaryData=Ys.isDataObject=Ys.isUintArray=Ys.isIntArray=Ys.isNumberArray=Ys.isNonEmptyString=Ys.isUint=Ys.isInt=Ys.isNumber=Ys.isNumeric=void 0;function f_e(t){return typeof t=="number"?t-t===0:typeof t=="string"&&t.trim()!==""?Number.isFinite?Number.isFinite(+t):isFinite(+t):!1}Ys.isNumeric=f_e;function YZ(t){return f_e(t)&&typeof t=="number"}Ys.isNumber=YZ;function qZ(t){return YZ(t)&&Number.isInteger(Number(t))}Ys.isInt=qZ;function d_e(t){return qZ(t)&&Number(t)>=0}Ys.isUint=d_e;function VQe(t){return typeof t=="string"&&t!==""}Ys.isNonEmptyString=VQe;function GQe(t){return Array.isArray(t)&&t.every(e=>YZ(e))}Ys.isNumberArray=GQe;function jQe(t){return Array.isArray(t)&&t.every(e=>qZ(e))}Ys.isIntArray=jQe;function HQe(t){return Array.isArray(t)&&t.every(e=>d_e(e))}Ys.isUintArray=HQe;function $Qe(t){return typeof t=="object"&&!Array.isArray(t)&&t!==null&&!h_e(t)}Ys.isDataObject=$Qe;function h_e(t){return t instanceof ArrayBuffer||ArrayBuffer.isView(t)}Ys.isBinaryData=h_e;function WQe(t){return t==null}Ys.isNil=WQe;var gf={},XZ={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfError=t.SdtfErrorType=void 0,t.SdtfErrorType={Generic:"sd_sdtf_generic"};class e extends Error{constructor(i){super(i),this.errorType=t.SdtfErrorType.Generic}}t.SdtfError=e})(XZ);Object.defineProperty(gf,"__esModule",{value:!0});gf.tryDeepCopy=gf.enumValues=gf.enumKeys=gf.sdAssertUnreachable=gf.isSdtfError=void 0;const p_e=XZ;function YQe(t){return t instanceof Error&&"errorType"in t&&Object.values(p_e.SdtfErrorType).includes(t.errorType)}gf.isSdtfError=YQe;function qQe(t){throw new p_e.SdtfError("Reached unreachable block.")}gf.sdAssertUnreachable=qQe;function m_e(t){return Object.keys(t).filter(e=>Number.isNaN(+e))}gf.enumKeys=m_e;function XQe(t){return m_e(t).map(e=>t[e])}gf.enumValues=XQe;function ZQe(t){try{return structuredClone(t)}catch{return t}}gf.tryDeepCopy=ZQe;var g_e={};Object.defineProperty(g_e,"__esModule",{value:!0});var v_e={};Object.defineProperty(v_e,"__esModule",{value:!0});var __e={};Object.defineProperty(__e,"__esModule",{value:!0});var y_e={};Object.defineProperty(y_e,"__esModule",{value:!0});var b_e={};Object.defineProperty(b_e,"__esModule",{value:!0});var A_e={};Object.defineProperty(A_e,"__esModule",{value:!0});var w_e={};Object.defineProperty(w_e,"__esModule",{value:!0});var E_e={};Object.defineProperty(E_e,"__esModule",{value:!0});var S_e={};Object.defineProperty(S_e,"__esModule",{value:!0});var T_e={};Object.defineProperty(T_e,"__esModule",{value:!0});var x_e={};Object.defineProperty(x_e,"__esModule",{value:!0});var M_e={};Object.defineProperty(M_e,"__esModule",{value:!0});(function(t){var e=X&&X.__createBinding||(Object.create?function(i,o,l,d){d===void 0&&(d=l);var p=Object.getOwnPropertyDescriptor(o,l);(!p||("get"in p?!o.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return o[l]}}),Object.defineProperty(i,d,p)}:function(i,o,l,d){d===void 0&&(d=l),i[d]=o[l]}),n=X&&X.__exportStar||function(i,o){for(var l in i)l!=="default"&&!Object.prototype.hasOwnProperty.call(o,l)&&e(o,i,l)};Object.defineProperty(t,"__esModule",{value:!0}),n(zve,t),n(Bve,t),n(Uve,t),n(Fve,t),n(Vve,t),n(Gve,t),n(jve,t),n(Hve,t),n($ve,t),n(Wve,t),n(Yve,t),n(qve,t),n(Xve,t),n(Zve,t),n(Qve,t),n(Kve,t),n(Jve,t),n(e_e,t),n(t_e,t),n(n_e,t),n(r_e,t),n(i_e,t),n(s_e,t),n(o_e,t),n(a_e,t),n(l_e,t),n(c_e,t),n(u_e,t),n(mf,t),n(Ys,t),n(gf,t),n(g_e,t),n(v_e,t),n(__e,t),n(y_e,t),n(b_e,t),n(A_e,t),n(w_e,t),n(E_e,t),n(S_e,t),n(T_e,t),n(x_e,t),n(M_e,t),n(XZ,t)})(ys);Object.defineProperty(X6,"__esModule",{value:!0});X6.SdtfPrimitiveTypeGuard=void 0;const ms=ys;class QQe{static assertBoolean(e){if(!this.isBoolean(e))throw new ms.SdtfError("Assertion error: Value is not a primitive boolean type.")}static isBoolean(e){return typeof e=="boolean"}static isBooleanType(e){return e===ms.SdtfPrimitiveTypeHintName.BOOLEAN}static assertString(e){if(!this.isString(e))throw new ms.SdtfError("Assertion error: Value is not a primitive string type.")}static isString(e){return typeof e=="string"}static isStringType(e){return[ms.SdtfPrimitiveTypeHintName.CHAR,ms.SdtfPrimitiveTypeHintName.GUID,ms.SdtfPrimitiveTypeHintName.STRING].includes(e)}static assertNumber(e){if(!this.isNumber(e))throw new ms.SdtfError("Assertion error: Value is not a primitive number type.")}static isNumber(e){return(0,ms.isNumber)(e)}static isNumberType(e){return[ms.SdtfPrimitiveTypeHintName.DECIMAL,ms.SdtfPrimitiveTypeHintName.DOUBLE,ms.SdtfPrimitiveTypeHintName.SINGLE,ms.SdtfPrimitiveTypeHintName.INT8,ms.SdtfPrimitiveTypeHintName.INT16,ms.SdtfPrimitiveTypeHintName.INT32,ms.SdtfPrimitiveTypeHintName.INT64,ms.SdtfPrimitiveTypeHintName.UINT8,ms.SdtfPrimitiveTypeHintName.UINT16,ms.SdtfPrimitiveTypeHintName.UINT32,ms.SdtfPrimitiveTypeHintName.UINT64].includes(e)}static assertColor(e){if(!this.isColor(e))throw new ms.SdtfError("Assertion error: Value is not a primitive color type.")}static isColor(e){return(0,ms.isNumberArray)(e)&&e.length===4}static isColorType(e){return e===ms.SdtfPrimitiveTypeHintName.COLOR}static assertDataView(e){if(!this.isDataView(e))throw new ms.SdtfError("Assertion error: Value is not a primitive data type.")}static isDataView(e){return ArrayBuffer.isView(e)}static isDataViewType(e){return[ms.SdtfPrimitiveTypeHintName.DATA,ms.SdtfPrimitiveTypeHintName.IMAGE].includes(e)}static assertJson(e){if(!this.isJson(e))throw new ms.SdtfError("Assertion error: Value is not a primitive json type.")}static isJson(e){return(0,ms.isDataObject)(e)||Array.isArray(e)}static isJsonType(e){return e===ms.SdtfPrimitiveTypeHintName.JSON}}X6.SdtfPrimitiveTypeGuard=QQe;var $9={},W9={},Z6={},k_e={exports:{}};(function(t){(function(e){/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var n=9e15,i=1e9,o="0123456789abcdef",l="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",d="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",p={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-n,maxE:n,crypto:!1},g,v,_,b,w=!0,E="[DecimalError] ",S=E+"Invalid argument: ",M=E+"Precision limit exceeded",k=E+"crypto unavailable",x="[object Decimal]",C=Math.floor,P=Math.pow,O=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,L=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,B=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,V=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,G=1e7,j=7,F=9007199254740991,q=l.length-1,fe=d.length-1,ue={toStringTag:x};ue.absoluteValue=ue.abs=function(){var K=new this.constructor(this);return K.s<0&&(K.s=1),oe(K)},ue.ceil=function(){return oe(new this.constructor(this),this.e+1,2)},ue.clampedTo=ue.clamp=function(K,$){var Q,te=this,ce=te.constructor;if(K=new ce(K),$=new ce($),!K.s||!$.s)return new ce(NaN);if(K.gt($))throw Error(S+$);return Q=te.cmp(K),Q<0?K:te.cmp($)>0?$:new ce(te)},ue.comparedTo=ue.cmp=function(K){var $,Q,te,ce,ae=this,xe=ae.d,Ne=(K=new ae.constructor(K)).d,je=ae.s,Ve=K.s;if(!xe||!Ne)return!je||!Ve?NaN:je!==Ve?je:xe===Ne?0:!xe^je<0?1:-1;if(!xe[0]||!Ne[0])return xe[0]?je:Ne[0]?-Ve:0;if(je!==Ve)return je;if(ae.e!==K.e)return ae.e>K.e^je<0?1:-1;for(te=xe.length,ce=Ne.length,$=0,Q=te<ce?te:ce;$<Q;++$)if(xe[$]!==Ne[$])return xe[$]>Ne[$]^je<0?1:-1;return te===ce?0:te>ce^je<0?1:-1},ue.cosine=ue.cos=function(){var K,$,Q=this,te=Q.constructor;return Q.d?Q.d[0]?(K=te.precision,$=te.rounding,te.precision=K+Math.max(Q.e,Q.sd())+j,te.rounding=1,Q=ye(te,Ot(te,Q)),te.precision=K,te.rounding=$,oe(b==2||b==3?Q.neg():Q,K,$,!0)):new te(1):new te(NaN)},ue.cubeRoot=ue.cbrt=function(){var K,$,Q,te,ce,ae,xe,Ne,je,Ve,Ke=this,dt=Ke.constructor;if(!Ke.isFinite()||Ke.isZero())return new dt(Ke);for(w=!1,ae=Ke.s*P(Ke.s*Ke,1/3),!ae||Math.abs(ae)==1/0?(Q=J(Ke.d),K=Ke.e,(ae=(K-Q.length+1)%3)&&(Q+=ae==1||ae==-2?"0":"00"),ae=P(Q,1/3),K=C((K+1)/3)-(K%3==(K<0?-1:2)),ae==1/0?Q="5e"+K:(Q=ae.toExponential(),Q=Q.slice(0,Q.indexOf("e")+1)+K),te=new dt(Q),te.s=Ke.s):te=new dt(ae.toString()),xe=(K=dt.precision)+3;;)if(Ne=te,je=Ne.times(Ne).times(Ne),Ve=je.plus(Ke),te=pe(Ve.plus(Ke).times(Ne),Ve.plus(je),xe+2,1),J(Ne.d).slice(0,xe)===(Q=J(te.d)).slice(0,xe))if(Q=Q.slice(xe-3,xe+1),Q=="9999"||!ce&&Q=="4999"){if(!ce&&(oe(Ne,K+1,0),Ne.times(Ne).times(Ne).eq(Ke))){te=Ne;break}xe+=4,ce=1}else{(!+Q||!+Q.slice(1)&&Q.charAt(0)=="5")&&(oe(te,K+1,1),$=!te.times(te).times(te).eq(Ke));break}return w=!0,oe(te,K,dt.rounding,$)},ue.decimalPlaces=ue.dp=function(){var K,$=this.d,Q=NaN;if($){if(K=$.length-1,Q=(K-C(this.e/j))*j,K=$[K],K)for(;K%10==0;K/=10)Q--;Q<0&&(Q=0)}return Q},ue.dividedBy=ue.div=function(K){return pe(this,new this.constructor(K))},ue.dividedToIntegerBy=ue.divToInt=function(K){var $=this,Q=$.constructor;return oe(pe($,new Q(K),0,1,1),Q.precision,Q.rounding)},ue.equals=ue.eq=function(K){return this.cmp(K)===0},ue.floor=function(){return oe(new this.constructor(this),this.e+1,3)},ue.greaterThan=ue.gt=function(K){return this.cmp(K)>0},ue.greaterThanOrEqualTo=ue.gte=function(K){var $=this.cmp(K);return $==1||$===0},ue.hyperbolicCosine=ue.cosh=function(){var K,$,Q,te,ce,ae=this,xe=ae.constructor,Ne=new xe(1);if(!ae.isFinite())return new xe(ae.s?1/0:NaN);if(ae.isZero())return Ne;Q=xe.precision,te=xe.rounding,xe.precision=Q+Math.max(ae.e,ae.sd())+4,xe.rounding=1,ce=ae.d.length,ce<32?(K=Math.ceil(ce/3),$=(1/Mt(4,K)).toString()):(K=16,$="2.3283064365386962890625e-10"),ae=at(xe,1,ae.times($),new xe(1),!0);for(var je,Ve=K,Ke=new xe(8);Ve--;)je=ae.times(ae),ae=Ne.minus(je.times(Ke.minus(je.times(Ke))));return oe(ae,xe.precision=Q,xe.rounding=te,!0)},ue.hyperbolicSine=ue.sinh=function(){var K,$,Q,te,ce=this,ae=ce.constructor;if(!ce.isFinite()||ce.isZero())return new ae(ce);if($=ae.precision,Q=ae.rounding,ae.precision=$+Math.max(ce.e,ce.sd())+4,ae.rounding=1,te=ce.d.length,te<3)ce=at(ae,2,ce,ce,!0);else{K=1.4*Math.sqrt(te),K=K>16?16:K|0,ce=ce.times(1/Mt(5,K)),ce=at(ae,2,ce,ce,!0);for(var xe,Ne=new ae(5),je=new ae(16),Ve=new ae(20);K--;)xe=ce.times(ce),ce=ce.times(Ne.plus(xe.times(je.times(xe).plus(Ve))))}return ae.precision=$,ae.rounding=Q,oe(ce,$,Q,!0)},ue.hyperbolicTangent=ue.tanh=function(){var K,$,Q=this,te=Q.constructor;return Q.isFinite()?Q.isZero()?new te(Q):(K=te.precision,$=te.rounding,te.precision=K+7,te.rounding=1,pe(Q.sinh(),Q.cosh(),te.precision=K,te.rounding=$)):new te(Q.s)},ue.inverseCosine=ue.acos=function(){var K,$=this,Q=$.constructor,te=$.abs().cmp(1),ce=Q.precision,ae=Q.rounding;return te!==-1?te===0?$.isNeg()?Oe(Q,ce,ae):new Q(0):new Q(NaN):$.isZero()?Oe(Q,ce+4,ae).times(.5):(Q.precision=ce+6,Q.rounding=1,$=$.asin(),K=Oe(Q,ce+4,ae).times(.5),Q.precision=ce,Q.rounding=ae,K.minus($))},ue.inverseHyperbolicCosine=ue.acosh=function(){var K,$,Q=this,te=Q.constructor;return Q.lte(1)?new te(Q.eq(1)?0:NaN):Q.isFinite()?(K=te.precision,$=te.rounding,te.precision=K+Math.max(Math.abs(Q.e),Q.sd())+4,te.rounding=1,w=!1,Q=Q.times(Q).minus(1).sqrt().plus(Q),w=!0,te.precision=K,te.rounding=$,Q.ln()):new te(Q)},ue.inverseHyperbolicSine=ue.asinh=function(){var K,$,Q=this,te=Q.constructor;return!Q.isFinite()||Q.isZero()?new te(Q):(K=te.precision,$=te.rounding,te.precision=K+2*Math.max(Math.abs(Q.e),Q.sd())+6,te.rounding=1,w=!1,Q=Q.times(Q).plus(1).sqrt().plus(Q),w=!0,te.precision=K,te.rounding=$,Q.ln())},ue.inverseHyperbolicTangent=ue.atanh=function(){var K,$,Q,te,ce=this,ae=ce.constructor;return ce.isFinite()?ce.e>=0?new ae(ce.abs().eq(1)?ce.s/0:ce.isZero()?ce:NaN):(K=ae.precision,$=ae.rounding,te=ce.sd(),Math.max(te,K)<2*-ce.e-1?oe(new ae(ce),K,$,!0):(ae.precision=Q=te-ce.e,ce=pe(ce.plus(1),new ae(1).minus(ce),Q+K,1),ae.precision=K+4,ae.rounding=1,ce=ce.ln(),ae.precision=K,ae.rounding=$,ce.times(.5))):new ae(NaN)},ue.inverseSine=ue.asin=function(){var K,$,Q,te,ce=this,ae=ce.constructor;return ce.isZero()?new ae(ce):($=ce.abs().cmp(1),Q=ae.precision,te=ae.rounding,$!==-1?$===0?(K=Oe(ae,Q+4,te).times(.5),K.s=ce.s,K):new ae(NaN):(ae.precision=Q+6,ae.rounding=1,ce=ce.div(new ae(1).minus(ce.times(ce)).sqrt().plus(1)).atan(),ae.precision=Q,ae.rounding=te,ce.times(2)))},ue.inverseTangent=ue.atan=function(){var K,$,Q,te,ce,ae,xe,Ne,je,Ve=this,Ke=Ve.constructor,dt=Ke.precision,bt=Ke.rounding;if(Ve.isFinite()){if(Ve.isZero())return new Ke(Ve);if(Ve.abs().eq(1)&&dt+4<=fe)return xe=Oe(Ke,dt+4,bt).times(.25),xe.s=Ve.s,xe}else{if(!Ve.s)return new Ke(NaN);if(dt+4<=fe)return xe=Oe(Ke,dt+4,bt).times(.5),xe.s=Ve.s,xe}for(Ke.precision=Ne=dt+10,Ke.rounding=1,Q=Math.min(28,Ne/j+2|0),K=Q;K;--K)Ve=Ve.div(Ve.times(Ve).plus(1).sqrt().plus(1));for(w=!1,$=Math.ceil(Ne/j),te=1,je=Ve.times(Ve),xe=new Ke(Ve),ce=Ve;K!==-1;)if(ce=ce.times(je),ae=xe.minus(ce.div(te+=2)),ce=ce.times(je),xe=ae.plus(ce.div(te+=2)),xe.d[$]!==void 0)for(K=$;xe.d[K]===ae.d[K]&&K--;);return Q&&(xe=xe.times(2<<Q-1)),w=!0,oe(xe,Ke.precision=dt,Ke.rounding=bt,!0)},ue.isFinite=function(){return!!this.d},ue.isInteger=ue.isInt=function(){return!!this.d&&C(this.e/j)>this.d.length-2},ue.isNaN=function(){return!this.s},ue.isNegative=ue.isNeg=function(){return this.s<0},ue.isPositive=ue.isPos=function(){return this.s>0},ue.isZero=function(){return!!this.d&&this.d[0]===0},ue.lessThan=ue.lt=function(K){return this.cmp(K)<0},ue.lessThanOrEqualTo=ue.lte=function(K){return this.cmp(K)<1},ue.logarithm=ue.log=function(K){var $,Q,te,ce,ae,xe,Ne,je,Ve=this,Ke=Ve.constructor,dt=Ke.precision,bt=Ke.rounding,un=5;if(K==null)K=new Ke(10),$=!0;else{if(K=new Ke(K),Q=K.d,K.s<0||!Q||!Q[0]||K.eq(1))return new Ke(NaN);$=K.eq(10)}if(Q=Ve.d,Ve.s<0||!Q||!Q[0]||Ve.eq(1))return new Ke(Q&&!Q[0]?-1/0:Ve.s!=1?NaN:Q?0:1/0);if($)if(Q.length>1)ae=!0;else{for(ce=Q[0];ce%10===0;)ce/=10;ae=ce!==1}if(w=!1,Ne=dt+un,xe=Ht(Ve,Ne),te=$?Se(Ke,Ne+10):Ht(K,Ne),je=pe(xe,te,Ne,1),me(je.d,ce=dt,bt))do if(Ne+=10,xe=Ht(Ve,Ne),te=$?Se(Ke,Ne+10):Ht(K,Ne),je=pe(xe,te,Ne,1),!ae){+J(je.d).slice(ce+1,ce+15)+1==1e14&&(je=oe(je,dt+1,0));break}while(me(je.d,ce+=10,bt));return w=!0,oe(je,dt,bt)},ue.minus=ue.sub=function(K){var $,Q,te,ce,ae,xe,Ne,je,Ve,Ke,dt,bt,un=this,Xn=un.constructor;if(K=new Xn(K),!un.d||!K.d)return!un.s||!K.s?K=new Xn(NaN):un.d?K.s=-K.s:K=new Xn(K.d||un.s!==K.s?un:NaN),K;if(un.s!=K.s)return K.s=-K.s,un.plus(K);if(Ve=un.d,bt=K.d,Ne=Xn.precision,je=Xn.rounding,!Ve[0]||!bt[0]){if(bt[0])K.s=-K.s;else if(Ve[0])K=new Xn(un);else return new Xn(je===3?-0:0);return w?oe(K,Ne,je):K}if(Q=C(K.e/j),Ke=C(un.e/j),Ve=Ve.slice(),ae=Ke-Q,ae){for(dt=ae<0,dt?($=Ve,ae=-ae,xe=bt.length):($=bt,Q=Ke,xe=Ve.length),te=Math.max(Math.ceil(Ne/j),xe)+2,ae>te&&(ae=te,$.length=1),$.reverse(),te=ae;te--;)$.push(0);$.reverse()}else{for(te=Ve.length,xe=bt.length,dt=te<xe,dt&&(xe=te),te=0;te<xe;te++)if(Ve[te]!=bt[te]){dt=Ve[te]<bt[te];break}ae=0}for(dt&&($=Ve,Ve=bt,bt=$,K.s=-K.s),xe=Ve.length,te=bt.length-xe;te>0;--te)Ve[xe++]=0;for(te=bt.length;te>ae;){if(Ve[--te]<bt[te]){for(ce=te;ce&&Ve[--ce]===0;)Ve[ce]=G-1;--Ve[ce],Ve[te]+=G}Ve[te]-=bt[te]}for(;Ve[--xe]===0;)Ve.pop();for(;Ve[0]===0;Ve.shift())--Q;return Ve[0]?(K.d=Ve,K.e=it(Ve,Q),w?oe(K,Ne,je):K):new Xn(je===3?-0:0)},ue.modulo=ue.mod=function(K){var $,Q=this,te=Q.constructor;return K=new te(K),!Q.d||!K.s||K.d&&!K.d[0]?new te(NaN):!K.d||Q.d&&!Q.d[0]?oe(new te(Q),te.precision,te.rounding):(w=!1,te.modulo==9?($=pe(Q,K.abs(),0,3,1),$.s*=K.s):$=pe(Q,K,0,te.modulo,1),$=$.times(K),w=!0,Q.minus($))},ue.naturalExponential=ue.exp=function(){return fn(this)},ue.naturalLogarithm=ue.ln=function(){return Ht(this)},ue.negated=ue.neg=function(){var K=new this.constructor(this);return K.s=-K.s,oe(K)},ue.plus=ue.add=function(K){var $,Q,te,ce,ae,xe,Ne,je,Ve,Ke,dt=this,bt=dt.constructor;if(K=new bt(K),!dt.d||!K.d)return!dt.s||!K.s?K=new bt(NaN):dt.d||(K=new bt(K.d||dt.s===K.s?dt:NaN)),K;if(dt.s!=K.s)return K.s=-K.s,dt.minus(K);if(Ve=dt.d,Ke=K.d,Ne=bt.precision,je=bt.rounding,!Ve[0]||!Ke[0])return Ke[0]||(K=new bt(dt)),w?oe(K,Ne,je):K;if(ae=C(dt.e/j),te=C(K.e/j),Ve=Ve.slice(),ce=ae-te,ce){for(ce<0?(Q=Ve,ce=-ce,xe=Ke.length):(Q=Ke,te=ae,xe=Ve.length),ae=Math.ceil(Ne/j),xe=ae>xe?ae+1:xe+1,ce>xe&&(ce=xe,Q.length=1),Q.reverse();ce--;)Q.push(0);Q.reverse()}for(xe=Ve.length,ce=Ke.length,xe-ce<0&&(ce=xe,Q=Ke,Ke=Ve,Ve=Q),$=0;ce;)$=(Ve[--ce]=Ve[ce]+Ke[ce]+$)/G|0,Ve[ce]%=G;for($&&(Ve.unshift($),++te),xe=Ve.length;Ve[--xe]==0;)Ve.pop();return K.d=Ve,K.e=it(Ve,te),w?oe(K,Ne,je):K},ue.precision=ue.sd=function(K){var $,Q=this;if(K!==void 0&&K!==!!K&&K!==1&&K!==0)throw Error(S+K);return Q.d?($=ct(Q.d),K&&Q.e+1>$&&($=Q.e+1)):$=NaN,$},ue.round=function(){var K=this,$=K.constructor;return oe(new $(K),K.e+1,$.rounding)},ue.sine=ue.sin=function(){var K,$,Q=this,te=Q.constructor;return Q.isFinite()?Q.isZero()?new te(Q):(K=te.precision,$=te.rounding,te.precision=K+Math.max(Q.e,Q.sd())+j,te.rounding=1,Q=ht(te,Ot(te,Q)),te.precision=K,te.rounding=$,oe(b>2?Q.neg():Q,K,$,!0)):new te(NaN)},ue.squareRoot=ue.sqrt=function(){var K,$,Q,te,ce,ae,xe=this,Ne=xe.d,je=xe.e,Ve=xe.s,Ke=xe.constructor;if(Ve!==1||!Ne||!Ne[0])return new Ke(!Ve||Ve<0&&(!Ne||Ne[0])?NaN:Ne?xe:1/0);for(w=!1,Ve=Math.sqrt(+xe),Ve==0||Ve==1/0?($=J(Ne),($.length+je)%2==0&&($+="0"),Ve=Math.sqrt($),je=C((je+1)/2)-(je<0||je%2),Ve==1/0?$="5e"+je:($=Ve.toExponential(),$=$.slice(0,$.indexOf("e")+1)+je),te=new Ke($)):te=new Ke(Ve.toString()),Q=(je=Ke.precision)+3;;)if(ae=te,te=ae.plus(pe(xe,ae,Q+2,1)).times(.5),J(ae.d).slice(0,Q)===($=J(te.d)).slice(0,Q))if($=$.slice(Q-3,Q+1),$=="9999"||!ce&&$=="4999"){if(!ce&&(oe(ae,je+1,0),ae.times(ae).eq(xe))){te=ae;break}Q+=4,ce=1}else{(!+$||!+$.slice(1)&&$.charAt(0)=="5")&&(oe(te,je+1,1),K=!te.times(te).eq(xe));break}return w=!0,oe(te,je,Ke.rounding,K)},ue.tangent=ue.tan=function(){var K,$,Q=this,te=Q.constructor;return Q.isFinite()?Q.isZero()?new te(Q):(K=te.precision,$=te.rounding,te.precision=K+10,te.rounding=1,Q=Q.sin(),Q.s=1,Q=pe(Q,new te(1).minus(Q.times(Q)).sqrt(),K+10,0),te.precision=K,te.rounding=$,oe(b==2||b==4?Q.neg():Q,K,$,!0)):new te(NaN)},ue.times=ue.mul=function(K){var $,Q,te,ce,ae,xe,Ne,je,Ve,Ke=this,dt=Ke.constructor,bt=Ke.d,un=(K=new dt(K)).d;if(K.s*=Ke.s,!bt||!bt[0]||!un||!un[0])return new dt(!K.s||bt&&!bt[0]&&!un||un&&!un[0]&&!bt?NaN:!bt||!un?K.s/0:K.s*0);for(Q=C(Ke.e/j)+C(K.e/j),je=bt.length,Ve=un.length,je<Ve&&(ae=bt,bt=un,un=ae,xe=je,je=Ve,Ve=xe),ae=[],xe=je+Ve,te=xe;te--;)ae.push(0);for(te=Ve;--te>=0;){for($=0,ce=je+te;ce>te;)Ne=ae[ce]+un[te]*bt[ce-te-1]+$,ae[ce--]=Ne%G|0,$=Ne/G|0;ae[ce]=(ae[ce]+$)%G|0}for(;!ae[--xe];)ae.pop();return $?++Q:ae.shift(),K.d=ae,K.e=it(ae,Q),w?oe(K,dt.precision,dt.rounding):K},ue.toBinary=function(K,$){return It(this,2,K,$)},ue.toDecimalPlaces=ue.toDP=function(K,$){var Q=this,te=Q.constructor;return Q=new te(Q),K===void 0?Q:(le(K,0,i),$===void 0?$=te.rounding:le($,0,8),oe(Q,K+Q.e+1,$))},ue.toExponential=function(K,$){var Q,te=this,ce=te.constructor;return K===void 0?Q=Ce(te,!0):(le(K,0,i),$===void 0?$=ce.rounding:le($,0,8),te=oe(new ce(te),K+1,$),Q=Ce(te,!0,K+1)),te.isNeg()&&!te.isZero()?"-"+Q:Q},ue.toFixed=function(K,$){var Q,te,ce=this,ae=ce.constructor;return K===void 0?Q=Ce(ce):(le(K,0,i),$===void 0?$=ae.rounding:le($,0,8),te=oe(new ae(ce),K+ce.e+1,$),Q=Ce(te,!1,K+te.e+1)),ce.isNeg()&&!ce.isZero()?"-"+Q:Q},ue.toFraction=function(K){var $,Q,te,ce,ae,xe,Ne,je,Ve,Ke,dt,bt,un=this,Xn=un.d,kn=un.constructor;if(!Xn)return new kn(un);if(Ve=Q=new kn(1),te=je=new kn(0),$=new kn(te),ae=$.e=ct(Xn)-un.e-1,xe=ae%j,$.d[0]=P(10,xe<0?j+xe:xe),K==null)K=ae>0?$:Ve;else{if(Ne=new kn(K),!Ne.isInt()||Ne.lt(Ve))throw Error(S+Ne);K=Ne.gt($)?ae>0?$:Ve:Ne}for(w=!1,Ne=new kn(J(Xn)),Ke=kn.precision,kn.precision=ae=Xn.length*j*2;dt=pe(Ne,$,0,1,1),ce=Q.plus(dt.times(te)),ce.cmp(K)!=1;)Q=te,te=ce,ce=Ve,Ve=je.plus(dt.times(ce)),je=ce,ce=$,$=Ne.minus(dt.times(ce)),Ne=ce;return ce=pe(K.minus(Q),te,0,1,1),je=je.plus(ce.times(Ve)),Q=Q.plus(ce.times(te)),je.s=Ve.s=un.s,bt=pe(Ve,te,ae,1).minus(un).abs().cmp(pe(je,Q,ae,1).minus(un).abs())<1?[Ve,te]:[je,Q],kn.precision=Ke,w=!0,bt},ue.toHexadecimal=ue.toHex=function(K,$){return It(this,16,K,$)},ue.toNearest=function(K,$){var Q=this,te=Q.constructor;if(Q=new te(Q),K==null){if(!Q.d)return Q;K=new te(1),$=te.rounding}else{if(K=new te(K),$===void 0?$=te.rounding:le($,0,8),!Q.d)return K.s?Q:K;if(!K.d)return K.s&&(K.s=Q.s),K}return K.d[0]?(w=!1,Q=pe(Q,K,0,$,1).times(K),w=!0,oe(Q)):(K.s=Q.s,Q=K),Q},ue.toNumber=function(){return+this},ue.toOctal=function(K,$){return It(this,8,K,$)},ue.toPower=ue.pow=function(K){var $,Q,te,ce,ae,xe,Ne=this,je=Ne.constructor,Ve=+(K=new je(K));if(!Ne.d||!K.d||!Ne.d[0]||!K.d[0])return new je(P(+Ne,Ve));if(Ne=new je(Ne),Ne.eq(1))return Ne;if(te=je.precision,ae=je.rounding,K.eq(1))return oe(Ne,te,ae);if($=C(K.e/j),$>=K.d.length-1&&(Q=Ve<0?-Ve:Ve)<=F)return ce=Nt(je,Ne,Q,te),K.s<0?new je(1).div(ce):oe(ce,te,ae);if(xe=Ne.s,xe<0){if($<K.d.length-1)return new je(NaN);if(K.d[$]&1||(xe=1),Ne.e==0&&Ne.d[0]==1&&Ne.d.length==1)return Ne.s=xe,Ne}return Q=P(+Ne,Ve),$=Q==0||!isFinite(Q)?C(Ve*(Math.log("0."+J(Ne.d))/Math.LN10+Ne.e+1)):new je(Q+"").e,$>je.maxE+1||$<je.minE-1?new je($>0?xe/0:0):(w=!1,je.rounding=Ne.s=1,Q=Math.min(12,($+"").length),ce=fn(K.times(Ht(Ne,te+Q)),te),ce.d&&(ce=oe(ce,te+5,1),me(ce.d,te,ae)&&($=te+10,ce=oe(fn(K.times(Ht(Ne,$+Q)),$),$+5,1),+J(ce.d).slice(te+1,te+15)+1==1e14&&(ce=oe(ce,te+1,0)))),ce.s=xe,w=!0,je.rounding=ae,oe(ce,te,ae))},ue.toPrecision=function(K,$){var Q,te=this,ce=te.constructor;return K===void 0?Q=Ce(te,te.e<=ce.toExpNeg||te.e>=ce.toExpPos):(le(K,1,i),$===void 0?$=ce.rounding:le($,0,8),te=oe(new ce(te),K,$),Q=Ce(te,K<=te.e||te.e<=ce.toExpNeg,K)),te.isNeg()&&!te.isZero()?"-"+Q:Q},ue.toSignificantDigits=ue.toSD=function(K,$){var Q=this,te=Q.constructor;return K===void 0?(K=te.precision,$=te.rounding):(le(K,1,i),$===void 0?$=te.rounding:le($,0,8)),oe(new te(Q),K,$)},ue.toString=function(){var K=this,$=K.constructor,Q=Ce(K,K.e<=$.toExpNeg||K.e>=$.toExpPos);return K.isNeg()&&!K.isZero()?"-"+Q:Q},ue.truncated=ue.trunc=function(){return oe(new this.constructor(this),this.e+1,1)},ue.valueOf=ue.toJSON=function(){var K=this,$=K.constructor,Q=Ce(K,K.e<=$.toExpNeg||K.e>=$.toExpPos);return K.isNeg()?"-"+Q:Q};function J(K){var $,Q,te,ce=K.length-1,ae="",xe=K[0];if(ce>0){for(ae+=xe,$=1;$<ce;$++)te=K[$]+"",Q=j-te.length,Q&&(ae+=_t(Q)),ae+=te;xe=K[$],te=xe+"",Q=j-te.length,Q&&(ae+=_t(Q))}else if(xe===0)return"0";for(;xe%10===0;)xe/=10;return ae+xe}function le(K,$,Q){if(K!==~~K||K<$||K>Q)throw Error(S+K)}function me(K,$,Q,te){var ce,ae,xe,Ne;for(ae=K[0];ae>=10;ae/=10)--$;return--$<0?($+=j,ce=0):(ce=Math.ceil(($+1)/j),$%=j),ae=P(10,j-$),Ne=K[ce]%ae|0,te==null?$<3?($==0?Ne=Ne/100|0:$==1&&(Ne=Ne/10|0),xe=Q<4&&Ne==99999||Q>3&&Ne==49999||Ne==5e4||Ne==0):xe=(Q<4&&Ne+1==ae||Q>3&&Ne+1==ae/2)&&(K[ce+1]/ae/100|0)==P(10,$-2)-1||(Ne==ae/2||Ne==0)&&(K[ce+1]/ae/100|0)==0:$<4?($==0?Ne=Ne/1e3|0:$==1?Ne=Ne/100|0:$==2&&(Ne=Ne/10|0),xe=(te||Q<4)&&Ne==9999||!te&&Q>3&&Ne==4999):xe=((te||Q<4)&&Ne+1==ae||!te&&Q>3&&Ne+1==ae/2)&&(K[ce+1]/ae/1e3|0)==P(10,$-3)-1,xe}function be(K,$,Q){for(var te,ce=[0],ae,xe=0,Ne=K.length;xe<Ne;){for(ae=ce.length;ae--;)ce[ae]*=$;for(ce[0]+=o.indexOf(K.charAt(xe++)),te=0;te<ce.length;te++)ce[te]>Q-1&&(ce[te+1]===void 0&&(ce[te+1]=0),ce[te+1]+=ce[te]/Q|0,ce[te]%=Q)}return ce.reverse()}function ye(K,$){var Q,te,ce;if($.isZero())return $;te=$.d.length,te<32?(Q=Math.ceil(te/3),ce=(1/Mt(4,Q)).toString()):(Q=16,ce="2.3283064365386962890625e-10"),K.precision+=Q,$=at(K,1,$.times(ce),new K(1));for(var ae=Q;ae--;){var xe=$.times($);$=xe.times(xe).minus(xe).times(8).plus(1)}return K.precision-=Q,$}var pe=function(){function K(te,ce,ae){var xe,Ne=0,je=te.length;for(te=te.slice();je--;)xe=te[je]*ce+Ne,te[je]=xe%ae|0,Ne=xe/ae|0;return Ne&&te.unshift(Ne),te}function $(te,ce,ae,xe){var Ne,je;if(ae!=xe)je=ae>xe?1:-1;else for(Ne=je=0;Ne<ae;Ne++)if(te[Ne]!=ce[Ne]){je=te[Ne]>ce[Ne]?1:-1;break}return je}function Q(te,ce,ae,xe){for(var Ne=0;ae--;)te[ae]-=Ne,Ne=te[ae]<ce[ae]?1:0,te[ae]=Ne*xe+te[ae]-ce[ae];for(;!te[0]&&te.length>1;)te.shift()}return function(te,ce,ae,xe,Ne,je){var Ve,Ke,dt,bt,un,Xn,kn,Bi,jn,Un,Or,hr,Qo,co,Ta,Ja,hs,xa,Ro,Vs,Ma=te.constructor,Il=te.s==ce.s?1:-1,is=te.d,Pi=ce.d;if(!is||!is[0]||!Pi||!Pi[0])return new Ma(!te.s||!ce.s||(is?Pi&&is[0]==Pi[0]:!Pi)?NaN:is&&is[0]==0||!Pi?Il*0:Il/0);for(je?(un=1,Ke=te.e-ce.e):(je=G,un=j,Ke=C(te.e/un)-C(ce.e/un)),Ro=Pi.length,hs=is.length,jn=new Ma(Il),Un=jn.d=[],dt=0;Pi[dt]==(is[dt]||0);dt++);if(Pi[dt]>(is[dt]||0)&&Ke--,ae==null?(co=ae=Ma.precision,xe=Ma.rounding):Ne?co=ae+(te.e-ce.e)+1:co=ae,co<0)Un.push(1),Xn=!0;else{if(co=co/un+2|0,dt=0,Ro==1){for(bt=0,Pi=Pi[0],co++;(dt<hs||bt)&&co--;dt++)Ta=bt*je+(is[dt]||0),Un[dt]=Ta/Pi|0,bt=Ta%Pi|0;Xn=bt||dt<hs}else{for(bt=je/(Pi[0]+1)|0,bt>1&&(Pi=K(Pi,bt,je),is=K(is,bt,je),Ro=Pi.length,hs=is.length),Ja=Ro,Or=is.slice(0,Ro),hr=Or.length;hr<Ro;)Or[hr++]=0;Vs=Pi.slice(),Vs.unshift(0),xa=Pi[0],Pi[1]>=je/2&&++xa;do bt=0,Ve=$(Pi,Or,Ro,hr),Ve<0?(Qo=Or[0],Ro!=hr&&(Qo=Qo*je+(Or[1]||0)),bt=Qo/xa|0,bt>1?(bt>=je&&(bt=je-1),kn=K(Pi,bt,je),Bi=kn.length,hr=Or.length,Ve=$(kn,Or,Bi,hr),Ve==1&&(bt--,Q(kn,Ro<Bi?Vs:Pi,Bi,je))):(bt==0&&(Ve=bt=1),kn=Pi.slice()),Bi=kn.length,Bi<hr&&kn.unshift(0),Q(Or,kn,hr,je),Ve==-1&&(hr=Or.length,Ve=$(Pi,Or,Ro,hr),Ve<1&&(bt++,Q(Or,Ro<hr?Vs:Pi,hr,je))),hr=Or.length):Ve===0&&(bt++,Or=[0]),Un[dt++]=bt,Ve&&Or[0]?Or[hr++]=is[Ja]||0:(Or=[is[Ja]],hr=1);while((Ja++<hs||Or[0]!==void 0)&&co--);Xn=Or[0]!==void 0}Un[0]||Un.shift()}if(un==1)jn.e=Ke,v=Xn;else{for(dt=1,bt=Un[0];bt>=10;bt/=10)dt++;jn.e=dt+Ke*un-1,oe(jn,Ne?ae+jn.e+1:ae,xe,Xn)}return jn}}();function oe(K,$,Q,te){var ce,ae,xe,Ne,je,Ve,Ke,dt,bt,un=K.constructor;e:if($!=null){if(dt=K.d,!dt)return K;for(ce=1,Ne=dt[0];Ne>=10;Ne/=10)ce++;if(ae=$-ce,ae<0)ae+=j,xe=$,Ke=dt[bt=0],je=Ke/P(10,ce-xe-1)%10|0;else if(bt=Math.ceil((ae+1)/j),Ne=dt.length,bt>=Ne)if(te){for(;Ne++<=bt;)dt.push(0);Ke=je=0,ce=1,ae%=j,xe=ae-j+1}else break e;else{for(Ke=Ne=dt[bt],ce=1;Ne>=10;Ne/=10)ce++;ae%=j,xe=ae-j+ce,je=xe<0?0:Ke/P(10,ce-xe-1)%10|0}if(te=te||$<0||dt[bt+1]!==void 0||(xe<0?Ke:Ke%P(10,ce-xe-1)),Ve=Q<4?(je||te)&&(Q==0||Q==(K.s<0?3:2)):je>5||je==5&&(Q==4||te||Q==6&&(ae>0?xe>0?Ke/P(10,ce-xe):0:dt[bt-1])%10&1||Q==(K.s<0?8:7)),$<1||!dt[0])return dt.length=0,Ve?($-=K.e+1,dt[0]=P(10,(j-$%j)%j),K.e=-$||0):dt[0]=K.e=0,K;if(ae==0?(dt.length=bt,Ne=1,bt--):(dt.length=bt+1,Ne=P(10,j-ae),dt[bt]=xe>0?(Ke/P(10,ce-xe)%P(10,xe)|0)*Ne:0),Ve)for(;;)if(bt==0){for(ae=1,xe=dt[0];xe>=10;xe/=10)ae++;for(xe=dt[0]+=Ne,Ne=1;xe>=10;xe/=10)Ne++;ae!=Ne&&(K.e++,dt[0]==G&&(dt[0]=1));break}else{if(dt[bt]+=Ne,dt[bt]!=G)break;dt[bt--]=0,Ne=1}for(ae=dt.length;dt[--ae]===0;)dt.pop()}return w&&(K.e>un.maxE?(K.d=null,K.e=NaN):K.e<un.minE&&(K.e=0,K.d=[0])),K}function Ce(K,$,Q){if(!K.isFinite())return Re(K);var te,ce=K.e,ae=J(K.d),xe=ae.length;return $?(Q&&(te=Q-xe)>0?ae=ae.charAt(0)+"."+ae.slice(1)+_t(te):xe>1&&(ae=ae.charAt(0)+"."+ae.slice(1)),ae=ae+(K.e<0?"e":"e+")+K.e):ce<0?(ae="0."+_t(-ce-1)+ae,Q&&(te=Q-xe)>0&&(ae+=_t(te))):ce>=xe?(ae+=_t(ce+1-xe),Q&&(te=Q-ce-1)>0&&(ae=ae+"."+_t(te))):((te=ce+1)<xe&&(ae=ae.slice(0,te)+"."+ae.slice(te)),Q&&(te=Q-xe)>0&&(ce+1===xe&&(ae+="."),ae+=_t(te))),ae}function it(K,$){var Q=K[0];for($*=j;Q>=10;Q/=10)$++;return $}function Se(K,$,Q){if($>q)throw w=!0,Q&&(K.precision=Q),Error(M);return oe(new K(l),$,1,!0)}function Oe(K,$,Q){if($>fe)throw Error(M);return oe(new K(d),$,Q,!0)}function ct(K){var $=K.length-1,Q=$*j+1;if($=K[$],$){for(;$%10==0;$/=10)Q--;for($=K[0];$>=10;$/=10)Q++}return Q}function _t(K){for(var $="";K--;)$+="0";return $}function Nt(K,$,Q,te){var ce,ae=new K(1),xe=Math.ceil(te/j+4);for(w=!1;;){if(Q%2&&(ae=ae.times($),Zt(ae.d,xe)&&(ce=!0)),Q=C(Q/2),Q===0){Q=ae.d.length-1,ce&&ae.d[Q]===0&&++ae.d[Q];break}$=$.times($),Zt($.d,xe)}return w=!0,ae}function Je(K){return K.d[K.d.length-1]&1}function ot(K,$,Q){for(var te,ce=new K($[0]),ae=0;++ae<$.length;)if(te=new K($[ae]),te.s)ce[Q](te)&&(ce=te);else{ce=te;break}return ce}function fn(K,$){var Q,te,ce,ae,xe,Ne,je,Ve=0,Ke=0,dt=0,bt=K.constructor,un=bt.rounding,Xn=bt.precision;if(!K.d||!K.d[0]||K.e>17)return new bt(K.d?K.d[0]?K.s<0?0:1/0:1:K.s?K.s<0?0:K:NaN);for($==null?(w=!1,je=Xn):je=$,Ne=new bt(.03125);K.e>-2;)K=K.times(Ne),dt+=5;for(te=Math.log(P(2,dt))/Math.LN10*2+5|0,je+=te,Q=ae=xe=new bt(1),bt.precision=je;;){if(ae=oe(ae.times(K),je,1),Q=Q.times(++Ke),Ne=xe.plus(pe(ae,Q,je,1)),J(Ne.d).slice(0,je)===J(xe.d).slice(0,je)){for(ce=dt;ce--;)xe=oe(xe.times(xe),je,1);if($==null)if(Ve<3&&me(xe.d,je-te,un,Ve))bt.precision=je+=10,Q=ae=Ne=new bt(1),Ke=0,Ve++;else return oe(xe,bt.precision=Xn,un,w=!0);else return bt.precision=Xn,xe}xe=Ne}}function Ht(K,$){var Q,te,ce,ae,xe,Ne,je,Ve,Ke,dt,bt,un=1,Xn=10,kn=K,Bi=kn.d,jn=kn.constructor,Un=jn.rounding,Or=jn.precision;if(kn.s<0||!Bi||!Bi[0]||!kn.e&&Bi[0]==1&&Bi.length==1)return new jn(Bi&&!Bi[0]?-1/0:kn.s!=1?NaN:Bi?0:kn);if($==null?(w=!1,Ke=Or):Ke=$,jn.precision=Ke+=Xn,Q=J(Bi),te=Q.charAt(0),Math.abs(ae=kn.e)<15e14){for(;te<7&&te!=1||te==1&&Q.charAt(1)>3;)kn=kn.times(K),Q=J(kn.d),te=Q.charAt(0),un++;ae=kn.e,te>1?(kn=new jn("0."+Q),ae++):kn=new jn(te+"."+Q.slice(1))}else return Ve=Se(jn,Ke+2,Or).times(ae+""),kn=Ht(new jn(te+"."+Q.slice(1)),Ke-Xn).plus(Ve),jn.precision=Or,$==null?oe(kn,Or,Un,w=!0):kn;for(dt=kn,je=xe=kn=pe(kn.minus(1),kn.plus(1),Ke,1),bt=oe(kn.times(kn),Ke,1),ce=3;;){if(xe=oe(xe.times(bt),Ke,1),Ve=je.plus(pe(xe,new jn(ce),Ke,1)),J(Ve.d).slice(0,Ke)===J(je.d).slice(0,Ke))if(je=je.times(2),ae!==0&&(je=je.plus(Se(jn,Ke+2,Or).times(ae+""))),je=pe(je,new jn(un),Ke,1),$==null)if(me(je.d,Ke-Xn,Un,Ne))jn.precision=Ke+=Xn,Ve=xe=kn=pe(dt.minus(1),dt.plus(1),Ke,1),bt=oe(kn.times(kn),Ke,1),ce=Ne=1;else return oe(je,jn.precision=Or,Un,w=!0);else return jn.precision=Or,je;je=Ve,ce+=2}}function Re(K){return String(K.s*K.s/0)}function Lt(K,$){var Q,te,ce;for((Q=$.indexOf("."))>-1&&($=$.replace(".","")),(te=$.search(/e/i))>0?(Q<0&&(Q=te),Q+=+$.slice(te+1),$=$.substring(0,te)):Q<0&&(Q=$.length),te=0;$.charCodeAt(te)===48;te++);for(ce=$.length;$.charCodeAt(ce-1)===48;--ce);if($=$.slice(te,ce),$){if(ce-=te,K.e=Q=Q-te-1,K.d=[],te=(Q+1)%j,Q<0&&(te+=j),te<ce){for(te&&K.d.push(+$.slice(0,te)),ce-=j;te<ce;)K.d.push(+$.slice(te,te+=j));$=$.slice(te),te=j-$.length}else te-=ce;for(;te--;)$+="0";K.d.push(+$),w&&(K.e>K.constructor.maxE?(K.d=null,K.e=NaN):K.e<K.constructor.minE&&(K.e=0,K.d=[0]))}else K.e=0,K.d=[0];return K}function mt(K,$){var Q,te,ce,ae,xe,Ne,je,Ve,Ke;if($.indexOf("_")>-1){if($=$.replace(/(\d)_(?=\d)/g,"$1"),V.test($))return Lt(K,$)}else if($==="Infinity"||$==="NaN")return+$||(K.s=NaN),K.e=NaN,K.d=null,K;if(L.test($))Q=16,$=$.toLowerCase();else if(O.test($))Q=2;else if(B.test($))Q=8;else throw Error(S+$);for(ae=$.search(/p/i),ae>0?(je=+$.slice(ae+1),$=$.substring(2,ae)):$=$.slice(2),ae=$.indexOf("."),xe=ae>=0,te=K.constructor,xe&&($=$.replace(".",""),Ne=$.length,ae=Ne-ae,ce=Nt(te,new te(Q),ae,ae*2)),Ve=be($,Q,G),Ke=Ve.length-1,ae=Ke;Ve[ae]===0;--ae)Ve.pop();return ae<0?new te(K.s*0):(K.e=it(Ve,Ke),K.d=Ve,w=!1,xe&&(K=pe(K,ce,Ne*4)),je&&(K=K.times(Math.abs(je)<54?P(2,je):g.pow(2,je))),w=!0,K)}function ht(K,$){var Q,te=$.d.length;if(te<3)return $.isZero()?$:at(K,2,$,$);Q=1.4*Math.sqrt(te),Q=Q>16?16:Q|0,$=$.times(1/Mt(5,Q)),$=at(K,2,$,$);for(var ce,ae=new K(5),xe=new K(16),Ne=new K(20);Q--;)ce=$.times($),$=$.times(ae.plus(ce.times(xe.times(ce).minus(Ne))));return $}function at(K,$,Q,te,ce){var ae,xe,Ne,je,Ve=K.precision,Ke=Math.ceil(Ve/j);for(w=!1,je=Q.times(Q),Ne=new K(te);;){if(xe=pe(Ne.times(je),new K($++*$++),Ve,1),Ne=ce?te.plus(xe):te.minus(xe),te=pe(xe.times(je),new K($++*$++),Ve,1),xe=Ne.plus(te),xe.d[Ke]!==void 0){for(ae=Ke;xe.d[ae]===Ne.d[ae]&&ae--;);if(ae==-1)break}ae=Ne,Ne=te,te=xe,xe=ae}return w=!0,xe.d.length=Ke+1,xe}function Mt(K,$){for(var Q=K;--$;)Q*=K;return Q}function Ot(K,$){var Q,te=$.s<0,ce=Oe(K,K.precision,1),ae=ce.times(.5);if($=$.abs(),$.lte(ae))return b=te?4:1,$;if(Q=$.divToInt(ce),Q.isZero())b=te?3:2;else{if($=$.minus(Q.times(ce)),$.lte(ae))return b=Je(Q)?te?2:3:te?4:1,$;b=Je(Q)?te?1:4:te?3:2}return $.minus(ce).abs()}function It(K,$,Q,te){var ce,ae,xe,Ne,je,Ve,Ke,dt,bt,un=K.constructor,Xn=Q!==void 0;if(Xn?(le(Q,1,i),te===void 0?te=un.rounding:le(te,0,8)):(Q=un.precision,te=un.rounding),!K.isFinite())Ke=Re(K);else{for(Ke=Ce(K),xe=Ke.indexOf("."),Xn?(ce=2,$==16?Q=Q*4-3:$==8&&(Q=Q*3-2)):ce=$,xe>=0&&(Ke=Ke.replace(".",""),bt=new un(1),bt.e=Ke.length-xe,bt.d=be(Ce(bt),10,ce),bt.e=bt.d.length),dt=be(Ke,10,ce),ae=je=dt.length;dt[--je]==0;)dt.pop();if(!dt[0])Ke=Xn?"0p+0":"0";else{if(xe<0?ae--:(K=new un(K),K.d=dt,K.e=ae,K=pe(K,bt,Q,te,0,ce),dt=K.d,ae=K.e,Ve=v),xe=dt[Q],Ne=ce/2,Ve=Ve||dt[Q+1]!==void 0,Ve=te<4?(xe!==void 0||Ve)&&(te===0||te===(K.s<0?3:2)):xe>Ne||xe===Ne&&(te===4||Ve||te===6&&dt[Q-1]&1||te===(K.s<0?8:7)),dt.length=Q,Ve)for(;++dt[--Q]>ce-1;)dt[Q]=0,Q||(++ae,dt.unshift(1));for(je=dt.length;!dt[je-1];--je);for(xe=0,Ke="";xe<je;xe++)Ke+=o.charAt(dt[xe]);if(Xn){if(je>1)if($==16||$==8){for(xe=$==16?4:3,--je;je%xe;je++)Ke+="0";for(dt=be(Ke,ce,$),je=dt.length;!dt[je-1];--je);for(xe=1,Ke="1.";xe<je;xe++)Ke+=o.charAt(dt[xe])}else Ke=Ke.charAt(0)+"."+Ke.slice(1);Ke=Ke+(ae<0?"p":"p+")+ae}else if(ae<0){for(;++ae;)Ke="0"+Ke;Ke="0."+Ke}else if(++ae>je)for(ae-=je;ae--;)Ke+="0";else ae<je&&(Ke=Ke.slice(0,ae)+"."+Ke.slice(ae))}Ke=($==16?"0x":$==2?"0b":$==8?"0o":"")+Ke}return K.s<0?"-"+Ke:Ke}function Zt(K,$){if(K.length>$)return K.length=$,!0}function ke(K){return new this(K).abs()}function he(K){return new this(K).acos()}function tt(K){return new this(K).acosh()}function wt(K,$){return new this(K).plus($)}function St(K){return new this(K).asin()}function De(K){return new this(K).asinh()}function nt(K){return new this(K).atan()}function Et(K){return new this(K).atanh()}function Qe(K,$){K=new this(K),$=new this($);var Q,te=this.precision,ce=this.rounding,ae=te+4;return!K.s||!$.s?Q=new this(NaN):!K.d&&!$.d?(Q=Oe(this,ae,1).times($.s>0?.25:.75),Q.s=K.s):!$.d||K.isZero()?(Q=$.s<0?Oe(this,te,ce):new this(0),Q.s=K.s):!K.d||$.isZero()?(Q=Oe(this,ae,1).times(.5),Q.s=K.s):$.s<0?(this.precision=ae,this.rounding=1,Q=this.atan(pe(K,$,ae,1)),$=Oe(this,ae,1),this.precision=te,this.rounding=ce,Q=K.s<0?Q.minus($):Q.plus($)):Q=this.atan(pe(K,$,ae,1)),Q}function lt(K){return new this(K).cbrt()}function xt(K){return oe(K=new this(K),K.e+1,2)}function ft(K,$,Q){return new this(K).clamp($,Q)}function Cn(K){if(!K||typeof K!="object")throw Error(E+"Object expected");var $,Q,te,ce=K.defaults===!0,ae=["precision",1,i,"rounding",0,8,"toExpNeg",-n,0,"toExpPos",0,n,"maxE",0,n,"minE",-n,0,"modulo",0,9];for($=0;$<ae.length;$+=3)if(Q=ae[$],ce&&(this[Q]=p[Q]),(te=K[Q])!==void 0)if(C(te)===te&&te>=ae[$+1]&&te<=ae[$+2])this[Q]=te;else throw Error(S+Q+": "+te);if(Q="crypto",ce&&(this[Q]=p[Q]),(te=K[Q])!==void 0)if(te===!0||te===!1||te===0||te===1)if(te)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[Q]=!0;else throw Error(k);else this[Q]=!1;else throw Error(S+Q+": "+te);return this}function Rn(K){return new this(K).cos()}function dn(K){return new this(K).cosh()}function Qt(K){var $,Q,te;function ce(ae){var xe,Ne,je,Ve=this;if(!(Ve instanceof ce))return new ce(ae);if(Ve.constructor=ce,st(ae)){Ve.s=ae.s,w?!ae.d||ae.e>ce.maxE?(Ve.e=NaN,Ve.d=null):ae.e<ce.minE?(Ve.e=0,Ve.d=[0]):(Ve.e=ae.e,Ve.d=ae.d.slice()):(Ve.e=ae.e,Ve.d=ae.d?ae.d.slice():ae.d);return}if(je=typeof ae,je==="number"){if(ae===0){Ve.s=1/ae<0?-1:1,Ve.e=0,Ve.d=[0];return}if(ae<0?(ae=-ae,Ve.s=-1):Ve.s=1,ae===~~ae&&ae<1e7){for(xe=0,Ne=ae;Ne>=10;Ne/=10)xe++;w?xe>ce.maxE?(Ve.e=NaN,Ve.d=null):xe<ce.minE?(Ve.e=0,Ve.d=[0]):(Ve.e=xe,Ve.d=[ae]):(Ve.e=xe,Ve.d=[ae]);return}else if(ae*0!==0){ae||(Ve.s=NaN),Ve.e=NaN,Ve.d=null;return}return Lt(Ve,ae.toString())}else if(je!=="string")throw Error(S+ae);return(Ne=ae.charCodeAt(0))===45?(ae=ae.slice(1),Ve.s=-1):(Ne===43&&(ae=ae.slice(1)),Ve.s=1),V.test(ae)?Lt(Ve,ae):mt(Ve,ae)}if(ce.prototype=ue,ce.ROUND_UP=0,ce.ROUND_DOWN=1,ce.ROUND_CEIL=2,ce.ROUND_FLOOR=3,ce.ROUND_HALF_UP=4,ce.ROUND_HALF_DOWN=5,ce.ROUND_HALF_EVEN=6,ce.ROUND_HALF_CEIL=7,ce.ROUND_HALF_FLOOR=8,ce.EUCLID=9,ce.config=ce.set=Cn,ce.clone=Qt,ce.isDecimal=st,ce.abs=ke,ce.acos=he,ce.acosh=tt,ce.add=wt,ce.asin=St,ce.asinh=De,ce.atan=nt,ce.atanh=Et,ce.atan2=Qe,ce.cbrt=lt,ce.ceil=xt,ce.clamp=ft,ce.cos=Rn,ce.cosh=dn,ce.div=vn,ce.exp=Yn,ce.floor=ir,ce.hypot=li,ce.ln=sn,ce.log=gt,ce.log10=_n,ce.log2=on,ce.max=Sr,ce.min=si,ce.mod=mr,ce.mul=gi,ce.pow=qr,ce.random=ji,ce.round=Ks,ce.sign=zu,ce.sin=Ff,ce.sinh=Yc,ce.sqrt=Vf,ce.sub=Ka,ce.sum=go,ce.tan=vi,ce.tanh=rc,ce.trunc=qc,K===void 0&&(K={}),K&&K.defaults!==!0)for(te=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],$=0;$<te.length;)K.hasOwnProperty(Q=te[$++])||(K[Q]=this[Q]);return ce.config(K),ce}function vn(K,$){return new this(K).div($)}function Yn(K){return new this(K).exp()}function ir(K){return oe(K=new this(K),K.e+1,3)}function li(){var K,$,Q=new this(0);for(w=!1,K=0;K<arguments.length;)if($=new this(arguments[K++]),$.d)Q.d&&(Q=Q.plus($.times($)));else{if($.s)return w=!0,new this(1/0);Q=$}return w=!0,Q.sqrt()}function st(K){return K instanceof g||K&&K.toStringTag===x||!1}function sn(K){return new this(K).ln()}function gt(K,$){return new this(K).log($)}function on(K){return new this(K).log(2)}function _n(K){return new this(K).log(10)}function Sr(){return ot(this,arguments,"lt")}function si(){return ot(this,arguments,"gt")}function mr(K,$){return new this(K).mod($)}function gi(K,$){return new this(K).mul($)}function qr(K,$){return new this(K).pow($)}function ji(K){var $,Q,te,ce,ae=0,xe=new this(1),Ne=[];if(K===void 0?K=this.precision:le(K,1,i),te=Math.ceil(K/j),this.crypto)if(crypto.getRandomValues)for($=crypto.getRandomValues(new Uint32Array(te));ae<te;)ce=$[ae],ce>=429e7?$[ae]=crypto.getRandomValues(new Uint32Array(1))[0]:Ne[ae++]=ce%1e7;else if(crypto.randomBytes){for($=crypto.randomBytes(te*=4);ae<te;)ce=$[ae]+($[ae+1]<<8)+($[ae+2]<<16)+(($[ae+3]&127)<<24),ce>=214e7?crypto.randomBytes(4).copy($,ae):(Ne.push(ce%1e7),ae+=4);ae=te/4}else throw Error(k);else for(;ae<te;)Ne[ae++]=Math.random()*1e7|0;for(te=Ne[--ae],K%=j,te&&K&&(ce=P(10,j-K),Ne[ae]=(te/ce|0)*ce);Ne[ae]===0;ae--)Ne.pop();if(ae<0)Q=0,Ne=[0];else{for(Q=-1;Ne[0]===0;Q-=j)Ne.shift();for(te=1,ce=Ne[0];ce>=10;ce/=10)te++;te<j&&(Q-=j-te)}return xe.e=Q,xe.d=Ne,xe}function Ks(K){return oe(K=new this(K),K.e+1,this.rounding)}function zu(K){return K=new this(K),K.d?K.d[0]?K.s:0*K.s:K.s||NaN}function Ff(K){return new this(K).sin()}function Yc(K){return new this(K).sinh()}function Vf(K){return new this(K).sqrt()}function Ka(K,$){return new this(K).sub($)}function go(){var K=0,$=arguments,Q=new this($[K]);for(w=!1;Q.s&&++K<$.length;)Q=Q.plus($[K]);return w=!0,oe(Q,this.precision,this.rounding)}function vi(K){return new this(K).tan()}function rc(K){return new this(K).tanh()}function qc(K){return oe(K=new this(K),K.e+1,1)}g=Qt(p),g.prototype.constructor=g,g.default=g.Decimal=g,l=new g(l),d=new g(d),t.exports?(typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(ue[Symbol.for("nodejs.util.inspect.custom")]=ue.toString,ue[Symbol.toStringTag]="Decimal"),t.exports=g):(e||(e=typeof self<"u"&&self&&self.self==self?self:window),_=e.Decimal,g.noConflict=function(){return e.Decimal=_,g},e.Decimal=g)})(X)})(k_e);var KQe=k_e.exports;Object.defineProperty(Z6,"__esModule",{value:!0});Z6.SdtfPrimitiveTypeValidator=void 0;const Fi=ys,ZZ=KQe,u1=X6,JQe=/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i,eKe=new ZZ.Decimal(340282347e30),tKe=new ZZ.Decimal(-340282347e30);class kc{validateComponent(e,n,i){switch(e){case Fi.SdtfPrimitiveTypeHintName.BOOLEAN:return u1.SdtfPrimitiveTypeGuard.isBoolean(n);case Fi.SdtfPrimitiveTypeHintName.CHAR:return kc.validateCharType(n);case Fi.SdtfPrimitiveTypeHintName.COLOR:return kc.validateColorType(n);case Fi.SdtfPrimitiveTypeHintName.DATA:return!!i&&n===void 0;case Fi.SdtfPrimitiveTypeHintName.DECIMAL:return u1.SdtfPrimitiveTypeGuard.isNumber(n);case Fi.SdtfPrimitiveTypeHintName.DOUBLE:return u1.SdtfPrimitiveTypeGuard.isNumber(n);case Fi.SdtfPrimitiveTypeHintName.GUID:return kc.validateGuidType(n);case Fi.SdtfPrimitiveTypeHintName.IMAGE:return!!i&&n===void 0;case Fi.SdtfPrimitiveTypeHintName.INT8:return kc.validateInt8Type(n);case Fi.SdtfPrimitiveTypeHintName.INT16:return kc.validateInt16Type(n);case Fi.SdtfPrimitiveTypeHintName.INT32:return kc.validateInt32Type(n);case Fi.SdtfPrimitiveTypeHintName.INT64:return kc.validateInt64Type(n);case Fi.SdtfPrimitiveTypeHintName.JSON:return u1.SdtfPrimitiveTypeGuard.isJson(n);case Fi.SdtfPrimitiveTypeHintName.SINGLE:return kc.validateSingleType(n);case Fi.SdtfPrimitiveTypeHintName.STRING:return u1.SdtfPrimitiveTypeGuard.isString(n);case Fi.SdtfPrimitiveTypeHintName.UINT8:return kc.validateUint8Type(n);case Fi.SdtfPrimitiveTypeHintName.UINT16:return kc.validateUint16Type(n);case Fi.SdtfPrimitiveTypeHintName.UINT32:return kc.validateUint32Type(n);case Fi.SdtfPrimitiveTypeHintName.UINT64:return kc.validateUint64Type(n);default:(0,Fi.sdAssertUnreachable)(e)}}static validateCharType(e){return u1.SdtfPrimitiveTypeGuard.isString(e)&&e.length===1}static validateColorType(e){if((0,Fi.isNumberArray)(e)&&e.length>=3&&e.length<=4)return!0;if(typeof e!="string")return!1;const n=e.split(",");return(n.length===3||n.length===4)&&n.every(i=>(0,Fi.isNumeric)(i))}static validateGuidType(e){return u1.SdtfPrimitiveTypeGuard.isString(e)&&JQe.test(e)}static validateInt8Type(e){return(0,Fi.isInt)(e)&&e>=-128&&e<=127}static validateInt16Type(e){return(0,Fi.isInt)(e)&&e>=-32768&&e<=32767}static validateInt32Type(e){return(0,Fi.isInt)(e)&&e>=-2147483648&&e<=2147483647}static validateInt64Type(e){return(0,Fi.isInt)(e)&&e>=-9223372036854776e3&&e<=9223372036854776e3}static validateSingleType(e){if(!(0,Fi.isNumber)(e))return!1;const n=new ZZ.Decimal(e);return n.precision()<=9&&n.comparedTo(tKe)>=0&&n.comparedTo(eKe)<=0}static validateUint8Type(e){return(0,Fi.isUint)(e)&&e<=255}static validateUint16Type(e){return(0,Fi.isUint)(e)&&e<=65535}static validateUint32Type(e){return(0,Fi.isUint)(e)&&e<=4294967295}static validateUint64Type(e){return(0,Fi.isUint)(e)}}Z6.SdtfPrimitiveTypeValidator=kc;var nKe=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty(W9,"__esModule",{value:!0});W9.SdtfPrimitiveTypeReader=void 0;const Eo=ys,rKe=Z6;class iKe{constructor(){this.validator=new rKe.SdtfPrimitiveTypeValidator}readComponent(e){var n,i;return nKe(this,void 0,void 0,function*(){const o=(n=e.typeHint)===null||n===void 0?void 0:n.name;if(!this.validator.validateComponent(o,e.value,e.accessor))throw new Eo.SdtfError(`Cannot read value of type '${o}': Invalid component.`);switch(o){case Eo.SdtfPrimitiveTypeHintName.BOOLEAN:case Eo.SdtfPrimitiveTypeHintName.CHAR:case Eo.SdtfPrimitiveTypeHintName.DECIMAL:case Eo.SdtfPrimitiveTypeHintName.DOUBLE:case Eo.SdtfPrimitiveTypeHintName.GUID:case Eo.SdtfPrimitiveTypeHintName.INT8:case Eo.SdtfPrimitiveTypeHintName.INT16:case Eo.SdtfPrimitiveTypeHintName.INT32:case Eo.SdtfPrimitiveTypeHintName.INT64:case Eo.SdtfPrimitiveTypeHintName.JSON:case Eo.SdtfPrimitiveTypeHintName.SINGLE:case Eo.SdtfPrimitiveTypeHintName.STRING:case Eo.SdtfPrimitiveTypeHintName.UINT8:case Eo.SdtfPrimitiveTypeHintName.UINT16:case Eo.SdtfPrimitiveTypeHintName.UINT32:case Eo.SdtfPrimitiveTypeHintName.UINT64:return e.value;case Eo.SdtfPrimitiveTypeHintName.COLOR:return this.mapColor(e.value);case Eo.SdtfPrimitiveTypeHintName.DATA:case Eo.SdtfPrimitiveTypeHintName.IMAGE:return this.mapGenericData(yield(i=e.accessor)===null||i===void 0?void 0:i.getContent());default:(0,Eo.sdAssertUnreachable)(o)}})}mapColor(e){let n;Array.isArray(e)?n=e:n=e.split(",").map(o=>Number(o));let i=[...n];return i.length===3&&(i=[...n,1]),i}mapGenericData(e){return e==null?void 0:e.data}}W9.SdtfPrimitiveTypeReader=iKe;var Y9={};Object.defineProperty(Y9,"__esModule",{value:!0});Y9.SdtfPrimitiveTypeWriter=void 0;const So=ys,sKe=Z6;class oKe{constructor(e){this.factory=e,this.validator=new sKe.SdtfPrimitiveTypeValidator}writeComponent(e){var n;const i=(n=e.typeHint)===null||n===void 0?void 0:n.name;switch(i){case So.SdtfPrimitiveTypeHintName.BOOLEAN:case So.SdtfPrimitiveTypeHintName.CHAR:case So.SdtfPrimitiveTypeHintName.COLOR:case So.SdtfPrimitiveTypeHintName.DECIMAL:case So.SdtfPrimitiveTypeHintName.DOUBLE:case So.SdtfPrimitiveTypeHintName.GUID:case So.SdtfPrimitiveTypeHintName.INT8:case So.SdtfPrimitiveTypeHintName.INT16:case So.SdtfPrimitiveTypeHintName.INT32:case So.SdtfPrimitiveTypeHintName.INT64:case So.SdtfPrimitiveTypeHintName.JSON:case So.SdtfPrimitiveTypeHintName.SINGLE:case So.SdtfPrimitiveTypeHintName.STRING:case So.SdtfPrimitiveTypeHintName.UINT8:case So.SdtfPrimitiveTypeHintName.UINT16:case So.SdtfPrimitiveTypeHintName.UINT32:case So.SdtfPrimitiveTypeHintName.UINT64:delete e.accessor;break;case So.SdtfPrimitiveTypeHintName.DATA:case So.SdtfPrimitiveTypeHintName.IMAGE:delete e.value;break;default:(0,So.sdAssertUnreachable)(i)}if(!this.validator.validateComponent(i,e.value,e.accessor))throw new So.SdtfError(`Cannot write component of type '${i}': Invalid component.`)}postProcessComponents(e){}}Y9.SdtfPrimitiveTypeWriter=oKe;var aKe=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty($9,"__esModule",{value:!0});$9.SdtfPrimitiveTypeIntegration=void 0;const Ose=ys,lKe=W9,cKe=Y9;class uKe{isTypeHintSupported(e){return(0,Ose.enumValues)(Ose.SdtfPrimitiveTypeHintName).includes(e)}init(){return aKe(this,void 0,void 0,function*(){})}getReader(){return new lKe.SdtfPrimitiveTypeReader}getWriter(e){return new cKe.SdtfPrimitiveTypeWriter(e)}}$9.SdtfPrimitiveTypeIntegration=uKe;(function(t){var e=X&&X.__createBinding||(Object.create?function(i,o,l,d){d===void 0&&(d=l);var p=Object.getOwnPropertyDescriptor(o,l);(!p||("get"in p?!o.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return o[l]}}),Object.defineProperty(i,d,p)}:function(i,o,l,d){d===void 0&&(d=l),i[d]=o[l]}),n=X&&X.__exportStar||function(i,o){for(var l in i)l!=="default"&&!Object.prototype.hasOwnProperty.call(o,l)&&e(o,i,l)};Object.defineProperty(t,"__esModule",{value:!0}),n(Lve,t),n(X6,t),n($9,t)})(q6);var fKe=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},Ise=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},SE;Object.defineProperty(H9,"__esModule",{value:!0});H9.SDTFOverviewData=void 0;const dKe=dr,Nse=q6;class QZ extends dKe.AbstractTreeNodeData{constructor(e,n,i){super(n,i),SE.set(this,{}),fKe(this,SE,e,"f")}get overview(){return Ise(this,SE,"f")}clone(){return new QZ(Ise(this,SE,"f"),this.id,this.version)}merge(e){var n;for(let i in e.overview)for(let o=0;o<e.overview[i].length;o++){const l=e.overview[i][o],d=this.overview[i]?this.overview[i].filter(p=>p.typeHint===l.typeHint):[];if(this.overview[i]&&d.length>0){const p=d[0];p.count++,Nse.SdtfPrimitiveTypeGuard.isStringType(l.typeHint)&&(p.values=(n=p.values)===null||n===void 0?void 0:n.concat(l.values.filter(g=>p.values.indexOf(g)<0))),Nse.SdtfPrimitiveTypeGuard.isNumberType(l.typeHint)&&(p.min=Math.min(l.min,p.min),p.max=Math.max(l.max,p.max))}else this.overview[i]?this.overview[i].push({typeHint:l.typeHint,count:l.count,values:l.values,min:l.min,max:l.max}):this.overview[i]=[{typeHint:l.typeHint,count:l.count,values:l.values,min:l.min,max:l.max}]}}}H9.SDTFOverviewData=QZ;SE=new WeakMap;var KZ={},p4={},q9={},X9={};Object.defineProperty(X9,"__esModule",{value:!0});X9.readableComponentListFromAsset=void 0;function hKe(t){return{accessors:t.accessors,asset:t,attributes:t.attributes,buffers:t.buffers,bufferViews:t.bufferViews,chunks:t.chunks,items:t.items,nodes:t.nodes,typeHints:t.typeHints,fileInfo:t.fileInfo}}X9.readableComponentListFromAsset=hKe;var Q6={};Object.defineProperty(Q6,"__esModule",{value:!0});Q6.toJsonContent=void 0;function pKe(t){const e=t.asset.toJson();return e.asset=t.fileInfo.toJson(),e.chunks=t.chunks.map(n=>n.toJson()),e.nodes=t.nodes.map(n=>n.toJson()),e.items=t.items.map(n=>n.toJson()),e.attributes=t.attributes.map(n=>n.toJson()),e.typeHints=t.typeHints.map(n=>n.toJson()),e.accessors=t.accessors.map(n=>n.toJson()),e.bufferViews=t.bufferViews.map(n=>n.toJson()),e.buffers=t.buffers.map(n=>n.toJson()),e}Q6.toJsonContent=pKe;var iA={},Z9={};Object.defineProperty(Z9,"__esModule",{value:!0});Z9.SdtfComponentValidator=void 0;const Qn=ys;class mKe{constructor(e){this.componentList=e}validateAccessor(e){if(!(0,Qn.isUint)(e.bufferView))throw new Qn.SdtfError("Invalid accessor: Required property 'bufferView' must be an unsigned integer.");if(e.bufferView>=this.componentList.bufferViews.length)throw new Qn.SdtfError("Invalid accessor: Buffer view index is out of range.")}validateAsset(e){if(!(0,Qn.isUint)(e.fileInfo))throw new Qn.SdtfError("Invalid asset: Required property 'fileInfo' must be an unsigned integer.");if(e.fileInfo!==0)throw new Qn.SdtfError("Invalid asset: Type hint index is out of range.")}validateAttributes(e){if(!e.entries)throw new Qn.SdtfError("Invalid attributes: Required property 'entries' must be a string-keyed object.");Object.values(e.entries).forEach(n=>{if(!(0,Qn.isUint)(n.typeHint))throw new Qn.SdtfError("Invalid attribute: Required property 'typeHint' must be an unsigned integer.");if(n.accessor&&!(0,Qn.isUint)(n.accessor))throw new Qn.SdtfError("Invalid attribute: Optional property 'accessor' must be an unsigned integer.");if(n.accessor&&n.accessor>=this.componentList.accessors.length)throw new Qn.SdtfError("Invalid attribute: Accessor index is out of range.");if(n.typeHint&&n.typeHint>=this.componentList.typeHints.length)throw new Qn.SdtfError("Invalid attribute: Type hint index is out of range.")})}validateBuffer(e){if(!(0,Qn.isUint)(e.byteLength))throw new Qn.SdtfError("Invalid buffer: Required property 'byteLength' must be an unsigned integer.")}validateBufferView(e){if(!(0,Qn.isUint)(e.buffer))throw new Qn.SdtfError("Invalid buffer view: Required property 'buffer' must be an unsigned integer.");if(!(0,Qn.isUint)(e.byteLength))throw new Qn.SdtfError("Invalid buffer view: Required property 'byteLength' must be an unsigned integer.");if(!(0,Qn.isUint)(e.byteOffset))throw new Qn.SdtfError("Invalid buffer view: Required property 'byteOffset' must be an unsigned integer.");if(!(0,Qn.isNonEmptyString)(e.contentType))throw new Qn.SdtfError("Invalid buffer view: Required property 'contentType' must be a non-empty string.");if(e.buffer>=this.componentList.buffers.length)throw new Qn.SdtfError("Invalid buffer view: Buffer index is out of range.")}validateChunk(e){try{this.validateChunkOrNode(e)}catch(n){throw new Qn.SdtfError(`Invalid chunk: ${n.message}`)}if(typeof e.name!="string")throw new Qn.SdtfError("Invalid chunk: Required property 'name' must be a string.")}validateDataItem(e){if(!(0,Qn.isUint)(e.typeHint))throw new Qn.SdtfError("Invalid item: Required property 'typeHint' must be an unsigned integer.");if(e.accessor&&!(0,Qn.isUint)(e.accessor))throw new Qn.SdtfError("Invalid item: Optional property 'accessor' must be an unsigned integer.");if(e.attributes&&!(0,Qn.isUint)(e.attributes))throw new Qn.SdtfError("Invalid item: Optional property 'attributes' must be an unsigned integer.");if(e.accessor&&e.accessor>=this.componentList.accessors.length)throw new Qn.SdtfError("Invalid item: Accessor index is out of range.");if(e.attributes&&e.attributes>=this.componentList.attributes.length)throw new Qn.SdtfError("Invalid item: Attributes index is out of range.");if(e.typeHint&&e.typeHint>=this.componentList.typeHints.length)throw new Qn.SdtfError("Invalid item: Type hint index is out of range.")}validateFileInfo(e){if(!(0,Qn.isNonEmptyString)(e.version))throw new Qn.SdtfError("Invalid file info: Required property 'version' must be a non-empty string.")}validateNode(e){try{this.validateChunkOrNode(e)}catch(n){throw new Qn.SdtfError(`Invalid node: ${n.message}`)}}validateTypeHint(e){if(!(0,Qn.isNonEmptyString)(e.name))throw new Qn.SdtfError("Invalid type hint: Required property 'name' must be a non-empty string.")}validateChunkOrNode(e){if(e.attributes&&!(0,Qn.isUint)(e.attributes))throw new Qn.SdtfError("Optional property 'attributes' must be an unsigned integer.");if(!(0,Qn.isUintArray)(e.items))throw new Qn.SdtfError("Required property 'items' must be an array of unsigned integers.");if(!(0,Qn.isUintArray)(e.nodes))throw new Qn.SdtfError("Required property 'nodes' must be an array of unsigned integers.");if(e.typeHint&&!(0,Qn.isUint)(e.typeHint))throw new Qn.SdtfError("Optional property 'typeHint' must be an unsigned integer.");if(e.attributes&&e.attributes>=this.componentList.attributes.length)throw new Qn.SdtfError("Attributes index is out of range.");if(e.items.forEach(n=>{if(n>=this.componentList.items.length)throw new Qn.SdtfError(`Node index '${n}' is out of range.`)}),e.nodes.forEach(n=>{if(n>=this.componentList.nodes.length)throw new Qn.SdtfError(`Node index '${n}' is out of range.`)}),e.typeHint&&e.typeHint>=this.componentList.typeHints.length)throw new Qn.SdtfError("Type hint index is out of range.");if(!e.nodes.every(n=>this.componentList.nodes[n].componentId!==e.componentId))throw new Qn.SdtfError("Node is referencing itself in the 'nodes' property.")}}Z9.SdtfComponentValidator=mKe;var Q9={},K9={},Nf={},pp={};Object.defineProperty(pp,"__esModule",{value:!0});pp.createComponentId=pp.userComponentToDataObject=void 0;const gKe=ys;function vKe(t){const e=Object.keys(t).filter(i=>i==="additionalProperties"),n=(0,gKe.isDataObject)(e)?e:{};return Object.entries(t).filter(([i,o])=>i!=="componentId"&&i!=="additionalProperties"&&i!=="data").forEach(([i,o])=>n[i]=o),n}pp.userComponentToDataObject=vKe;function _Ke(){return Math.random().toString(36).substring(2,9)}pp.createComponentId=_Ke;Object.defineProperty(Nf,"__esModule",{value:!0});Nf.SdtfBasePartialComponent=void 0;const yKe=pp;class bKe{constructor(){this.componentId=(0,yKe.createComponentId)()}}Nf.SdtfBasePartialComponent=bKe;Object.defineProperty(K9,"__esModule",{value:!0});K9.SdtfPartialAccessor=void 0;const AKe=Nf;class wKe extends AKe.SdtfBasePartialComponent{constructor(){super(...arguments),this.additionalProperties={}}toJson(){const e=Object.assign({},this.additionalProperties);return this.bufferView!==void 0?e.bufferView=this.bufferView:delete e.bufferView,this.id!==void 0?e.id=this.id:delete e.id,e}}K9.SdtfPartialAccessor=wKe;var J9={};Object.defineProperty(J9,"__esModule",{value:!0});J9.SdtfPartialAsset=void 0;const EKe=Nf;class SKe extends EKe.SdtfBasePartialComponent{constructor(){super(...arguments),this.additionalProperties={}}toJson(){return Object.assign({},this.additionalProperties)}}J9.SdtfPartialAsset=SKe;var m4={};Object.defineProperty(m4,"__esModule",{value:!0});m4.SdtfAttribute=m4.SdtfPartialAttributes=void 0;const C_e=Nf;class TKe extends C_e.SdtfBasePartialComponent{constructor(){super(...arguments),this.entries={}}toJson(){const e={};return Object.entries(this.entries).forEach(([n,i])=>{e[n]=i.toJson()}),e}}m4.SdtfPartialAttributes=TKe;class xKe extends C_e.SdtfBasePartialComponent{toJson(){const e={};return this.accessor!==void 0&&(e.accessor=this.accessor),this.typeHint!==void 0&&(e.typeHint=this.typeHint),this.value!==void 0&&(e.value=this.value),e}}m4.SdtfAttribute=xKe;var eN={};Object.defineProperty(eN,"__esModule",{value:!0});eN.SdtfPartialBuffer=void 0;const MKe=Nf;class kKe extends MKe.SdtfBasePartialComponent{constructor(){super(...arguments),this.additionalProperties={}}toJson(){const e=Object.assign({},this.additionalProperties);return this.byteLength!==void 0?e.byteLength=this.byteLength:delete e.byteLength,this.uri!==void 0&&(e.uri=this.uri),delete e.uri,e}}eN.SdtfPartialBuffer=kKe;var tN={};Object.defineProperty(tN,"__esModule",{value:!0});tN.SdtfPartialBufferView=void 0;const CKe=Nf;class PKe extends CKe.SdtfBasePartialComponent{constructor(){super(...arguments),this.additionalProperties={}}toJson(){const e=Object.assign({},this.additionalProperties);return this.buffer!==void 0?e.buffer=this.buffer:delete e.buffer,this.byteLength!==void 0?e.byteLength=this.byteLength:delete e.byteLength,this.byteOffset!==void 0?e.byteOffset=this.byteOffset:delete e.byteOffset,this.contentEncoding!==void 0?e.contentEncoding=this.contentEncoding:delete e.contentEncoding,this.contentType!==void 0?e.contentType=this.contentType:delete e.contentType,this.name!==void 0?e.name=this.name:delete e.name,e}}tN.SdtfPartialBufferView=PKe;var nN={};Object.defineProperty(nN,"__esModule",{value:!0});nN.SdtfPartialDataItem=void 0;const RKe=Nf;class DKe extends RKe.SdtfBasePartialComponent{constructor(){super(...arguments),this.additionalProperties={}}toJson(){const e=Object.assign({},this.additionalProperties);return this.accessor!==void 0?e.accessor=this.accessor:delete e.accessor,this.attributes!==void 0?e.attributes=this.attributes:delete e.attributes,this.typeHint!==void 0?e.typeHint=this.typeHint:delete e.typeHint,this.value!==void 0?e.value=this.value:delete e.value,e}}nN.SdtfPartialDataItem=DKe;var rN={};Object.defineProperty(rN,"__esModule",{value:!0});rN.SdtfPartialFileInfo=void 0;const OKe=Nf;class IKe extends OKe.SdtfBasePartialComponent{constructor(){super(...arguments),this.additionalProperties={}}toJson(){const e=Object.assign({},this.additionalProperties);return this.copyright!==void 0?e.copyright=this.copyright:delete e.copyright,this.generator!==void 0?e.generator=this.generator:delete e.generator,this.version!==void 0?e.version=this.version:delete e.version,e}}rN.SdtfPartialFileInfo=IKe;var iN={};Object.defineProperty(iN,"__esModule",{value:!0});iN.SdtfPartialNode=void 0;const NKe=Nf;class LKe extends NKe.SdtfBasePartialComponent{constructor(){super(...arguments),this.items=[],this.nodes=[],this.additionalProperties={}}toJson(){const e=Object.assign({},this.additionalProperties);return this.attributes!==void 0?e.attributes=this.attributes:delete e.attributes,this.items.length>0?e.items=this.items:delete e.items,this.name!==void 0?e.name=this.name:delete e.name,this.nodes.length>0?e.nodes=this.nodes:delete e.nodes,this.typeHint!==void 0?e.typeHint=this.typeHint:delete e.typeHint,e}}iN.SdtfPartialNode=LKe;var sN={};Object.defineProperty(sN,"__esModule",{value:!0});sN.SdtfPartialTypeHint=void 0;const zKe=Nf;class BKe extends zKe.SdtfBasePartialComponent{constructor(){super(...arguments),this.additionalProperties={}}toJson(){const e=Object.assign({},this.additionalProperties);return this.name!==void 0?e.name=this.name:delete e.name,e}}sN.SdtfPartialTypeHint=BKe;Object.defineProperty(Q9,"__esModule",{value:!0});Q9.SdtfComponentFactory=void 0;const gc=ys,UKe=K9,FKe=J9,Lse=m4,VKe=eN,GKe=tN,jKe=nN,HKe=rN,$Ke=iN,WKe=sN;class YKe{constructor(){this.propertyNameAccessors="accessors",this.propertyNameAttributes="attributes",this.propertyNameBufferViews="bufferViews",this.propertyNameBuffers="buffers",this.propertyNameChunks="chunks",this.propertyNameDataItems="items",this.propertyNameFileInfo="asset",this.propertyNameFileInfoAlternative="fileInfo",this.propertyNameNodes="nodes",this.propertyNameTypeHints="typeHints"}createAccessor(e){const n=new UKe.SdtfPartialAccessor;return(0,gc.isNumber)(e.bufferView)&&(n.bufferView=e.bufferView),typeof e.id=="string"&&(n.id=e.id),Object.entries(e).filter(([i,o])=>i!=="bufferView"&&i!=="id").forEach(([i,o])=>n.additionalProperties[i]=o),n}createAsset(e){const n=new FKe.SdtfPartialAsset;return n.fileInfo=0,Object.entries(e).filter(([i,o])=>i!==this.propertyNameAccessors&&i!==this.propertyNameAttributes&&i!==this.propertyNameBufferViews&&i!==this.propertyNameBuffers&&i!==this.propertyNameChunks&&i!==this.propertyNameDataItems&&i!==this.propertyNameFileInfo&&i!==this.propertyNameFileInfoAlternative&&i!==this.propertyNameNodes&&i!==this.propertyNameTypeHints).forEach(([i,o])=>n.additionalProperties[i]=o),n}createAttributes(e){const n=new Lse.SdtfPartialAttributes;return Object.entries(e).forEach(([i,o],l)=>{if(!(0,gc.isDataObject)(o))throw new gc.SdtfError(`Invalid attribute data: Item [${l}] must be an object.`);const d=new Lse.SdtfAttribute;typeof o.accessor=="number"&&(d.accessor=o.accessor),typeof o.typeHint=="number"&&(d.typeHint=o.typeHint),d.value=o.value,n.entries[i]=d}),n}createBuffer(e){const n=new VKe.SdtfPartialBuffer;return(0,gc.isNumber)(e.byteLength)&&(n.byteLength=e.byteLength),typeof e.uri=="string"&&(n.uri=e.uri),Object.entries(e).filter(([i,o])=>i!=="byteLength"&&i!=="uri").forEach(([i,o])=>n.additionalProperties[i]=o),n}createBufferView(e){const n=new GKe.SdtfPartialBufferView;return(0,gc.isNumber)(e.buffer)&&(n.buffer=e.buffer),(0,gc.isNumber)(e.byteLength)&&(n.byteLength=e.byteLength),(0,gc.isNumber)(e.byteOffset)&&(n.byteOffset=e.byteOffset),typeof e.contentEncoding=="string"&&(n.contentEncoding=e.contentEncoding),typeof e.contentType=="string"&&(n.contentType=e.contentType),typeof e.name=="string"&&(n.name=e.name),Object.entries(e).filter(([i,o])=>i!=="buffer"&&i!=="byteLength"&&i!=="byteOffset"&&i!=="contentEncoding"&&i!=="contentType"&&i!=="name").forEach(([i,o])=>n.additionalProperties[i]=o),n}createChunk(e){return this.createNode(e)}createDataItem(e){const n=new jKe.SdtfPartialDataItem;return(0,gc.isNumber)(e.accessor)&&(n.accessor=e.accessor),(0,gc.isNumber)(e.attributes)&&(n.attributes=e.attributes),(0,gc.isNumber)(e.typeHint)&&(n.typeHint=e.typeHint),n.value=e.value,Object.entries(e).filter(([i,o])=>i!=="accessor"&&i!=="attributes"&&i!=="typeHint"&&i!=="value").forEach(([i,o])=>n.additionalProperties[i]=o),n}createFileInfo(e){const n=new HKe.SdtfPartialFileInfo;return typeof e.copyright=="string"&&(n.copyright=e.copyright),typeof e.generator=="string"&&(n.generator=e.generator),typeof e.version=="string"&&(n.version=e.version),Object.entries(e).filter(([i,o])=>i!=="copyright"&&i!=="generator"&&i!=="version").forEach(([i,o])=>n.additionalProperties[i]=o),n}createNode(e){const n=new $Ke.SdtfPartialNode;return(0,gc.isNumber)(e.attributes)&&(n.attributes=e.attributes),(0,gc.isNumberArray)(e.items)&&(n.items=e.items),typeof e.name=="string"&&(n.name=e.name),(0,gc.isNumberArray)(e.nodes)&&(n.nodes=e.nodes),(0,gc.isNumber)(e.typeHint)&&(n.typeHint=e.typeHint),Object.entries(e).filter(([i,o])=>i!=="attributes"&&i!=="items"&&i!=="name"&&i!=="nodes"&&i!=="typeHint").forEach(([i,o])=>n.additionalProperties[i]=o),n}createTypeHint(e){const n=new WKe.SdtfPartialTypeHint;return typeof e.name=="string"&&(n.name=e.name),Object.entries(e).filter(([i,o])=>i!=="name").forEach(([i,o])=>n.additionalProperties[i]=o),n}}Q9.SdtfComponentFactory=YKe;Object.defineProperty(iA,"__esModule",{value:!0});iA.SdtfComponentFactoryWrapper=void 0;const m3=ys,qKe=Z9,XKe=Q9;class ZKe{constructor(){this.factory=new XKe.SdtfComponentFactory}createFromJson(e){const n=this.factory;return this.createComponentList({accessors:this.buildFromArray(e,n.propertyNameAccessors,n.createAccessor.bind(n)),asset:this.buildFromObject(e,"",n.createAsset.bind(n)),attributes:this.buildFromArray(e,n.propertyNameAttributes,n.createAttributes.bind(n)),buffers:this.buildFromArray(e,n.propertyNameBuffers,n.createBuffer.bind(n)),bufferViews:this.buildFromArray(e,n.propertyNameBufferViews,n.createBufferView.bind(n)),chunks:this.buildFromArray(e,n.propertyNameChunks,n.createChunk.bind(n)),items:this.buildFromArray(e,n.propertyNameDataItems,n.createDataItem.bind(n)),fileInfo:this.buildFromObject(e,n.propertyNameFileInfo,n.createFileInfo.bind(n)),nodes:this.buildFromArray(e,n.propertyNameNodes,n.createNode.bind(n)),typeHints:this.buildFromArray(e,n.propertyNameTypeHints,n.createTypeHint.bind(n))})}createFromReadable(e){const n=this.factory,i={accessors:e.accessors.map(o=>n.createAccessor(o.toDataObject())),asset:n.createAsset(e.asset.toDataObject()),attributes:e.attributes.map(o=>n.createAttributes(o.toDataObject())),buffers:e.buffers.map(o=>n.createBuffer(o.toDataObject())),bufferViews:e.bufferViews.map(o=>n.createBufferView(o.toDataObject())),chunks:e.chunks.map(o=>n.createChunk(o.toDataObject())),items:e.items.map(o=>n.createDataItem(o.toDataObject())),fileInfo:n.createFileInfo(e.fileInfo.toDataObject()),nodes:e.nodes.map(o=>n.createNode(o.toDataObject())),typeHints:e.typeHints.map(o=>n.createTypeHint(o.toDataObject()))};return this.mapHierarchyRepresentation(i,e),this.createComponentList(i)}createFromWriteable(e){var n;const i=this.factory,o={accessors:e.accessors.map(l=>i.createAccessor(l.toDataObject())),asset:i.createAsset(e.asset.toDataObject()),attributes:e.attributes.map(l=>i.createAttributes(l.toDataObject())),buffers:e.buffers.map(l=>i.createBuffer(l.toDataObject())),bufferViews:e.bufferViews.map(l=>i.createBufferView(l.toDataObject())),chunks:e.chunks.map(l=>i.createChunk(l.toDataObject())),items:e.items.map(l=>i.createDataItem(l.toDataObject())),fileInfo:i.createFileInfo(e.fileInfo.toDataObject()),nodes:e.nodes.map(l=>i.createNode(l.toDataObject())),typeHints:e.typeHints.map(l=>i.createTypeHint(l.toDataObject())),binaryBody:(n=e.buffers.find(l=>!l.uri))===null||n===void 0?void 0:n.data};return this.mapHierarchyRepresentation(o,e),this.createComponentList(o)}createComponentList(e){const n=new qKe.SdtfComponentValidator(e),i=e.asset;n.validateAsset(i);const o=e.fileInfo;n.validateFileInfo(o);const l=e.buffers.map(E=>(n.validateBuffer(E),E)),d=e.bufferViews.map(E=>(n.validateBufferView(E),E)),p=e.accessors.map(E=>(n.validateAccessor(E),E)),g=e.typeHints.map(E=>(n.validateTypeHint(E),E)),v=e.attributes.map(E=>(n.validateAttributes(E),E)),_=e.chunks.map(E=>(n.validateChunk(E),E)),b=e.items.map(E=>(n.validateDataItem(E),E)),w=e.nodes.map(E=>(n.validateNode(E),E));return{accessors:p,asset:i,attributes:v,buffers:l,bufferViews:d,chunks:_,items:b,nodes:w,typeHints:g,fileInfo:o,binaryBody:e.binaryBody}}buildFromObject(e,n,i){const o=n?e[n]:e;if(!(0,m3.isDataObject)(o))throw new m3.SdtfError(`Invalid item at ${n}: Item must be an object.`);return i(o)}buildFromArray(e,n,i){const o=e[n];if(o===void 0)return[];if(!Array.isArray(o))throw new m3.SdtfError(`Invalid content property: '${n}' must be an array.`);return o.map((l,d)=>{if(!(0,m3.isDataObject)(l))throw new m3.SdtfError(`Invalid item at ${n}[${d}]: Item must be an object.`);return i(l)})}mapHierarchyRepresentation(e,n){const i=(o,l)=>l?o.findIndex(d=>d.componentId===l):-1;e.asset.fileInfo=0,e.accessors.forEach((o,l)=>{var d;const p=n.accessors[l];o.bufferView=i(n.bufferViews,(d=p==null?void 0:p.bufferView)===null||d===void 0?void 0:d.componentId)}),e.attributes.forEach((o,l)=>{o.entries&&Object.entries(o.entries).forEach(([d,p])=>{var g,v;const _=n.attributes[l].entries[d];_.accessor&&(p.accessor=i(n.accessors,(g=_==null?void 0:_.accessor)===null||g===void 0?void 0:g.componentId)),_.typeHint&&(p.typeHint=i(n.typeHints,(v=_==null?void 0:_.typeHint)===null||v===void 0?void 0:v.componentId))})}),e.bufferViews.forEach((o,l)=>{var d;const p=n.bufferViews[l];o.buffer=i(n.buffers,(d=p==null?void 0:p.buffer)===null||d===void 0?void 0:d.componentId)}),e.chunks.forEach((o,l)=>{var d,p;const g=n.chunks[l];g.attributes&&(o.attributes=i(n.attributes,(d=g==null?void 0:g.attributes)===null||d===void 0?void 0:d.componentId)),o.items=g.items.map(v=>i(n.items,v==null?void 0:v.componentId)),o.nodes=g.nodes.map(v=>i(n.nodes,v==null?void 0:v.componentId)),g.typeHint&&(o.typeHint=i(n.typeHints,(p=g==null?void 0:g.typeHint)===null||p===void 0?void 0:p.componentId))}),e.items.forEach((o,l)=>{var d,p,g;const v=n.items[l];v.accessor&&(o.accessor=i(n.accessors,(d=v==null?void 0:v.accessor)===null||d===void 0?void 0:d.componentId)),v.attributes&&(o.attributes=i(n.attributes,(p=v==null?void 0:v.attributes)===null||p===void 0?void 0:p.componentId)),v.typeHint&&(o.typeHint=i(n.typeHints,(g=v==null?void 0:v.typeHint)===null||g===void 0?void 0:g.componentId))}),e.nodes.forEach((o,l)=>{var d,p;const g=n.nodes[l];g.attributes&&(o.attributes=i(n.attributes,(d=g==null?void 0:g.attributes)===null||d===void 0?void 0:d.componentId)),o.items=g.items.map(v=>i(n.items,v==null?void 0:v.componentId)),o.nodes=g.nodes.map(v=>i(n.nodes,v==null?void 0:v.componentId)),g.typeHint&&(o.typeHint=i(n.typeHints,(p=g==null?void 0:g.typeHint)===null||p===void 0?void 0:p.componentId))})}}iA.SdtfComponentFactoryWrapper=ZKe;var K6={},J6={},Lf={};Object.defineProperty(Lf,"__esModule",{value:!0});Lf.SdtfBaseWriteableComponent=void 0;const zse=pp;class QKe{constructor(){this.componentId=(0,zse.createComponentId)()}toDataObject(){return(0,zse.userComponentToDataObject)(this)}}Lf.SdtfBaseWriteableComponent=QKe;var ex={},tx={},gm={},sA={},nx={},oA={};Object.defineProperty(oA,"__esModule",{value:!0});oA.SdtfWriteableBuffer=void 0;const KKe=Lf;class JZ extends KKe.SdtfBaseWriteableComponent{constructor(){super(...arguments),this.additionalProperties={}}static clone(e){const n=new JZ;return n.byteLength=e.byteLength,n.data=e.data,n.uri=e.uri,n.additionalProperties=Object.assign({},e.additionalProperties),n}}oA.SdtfWriteableBuffer=JZ;Object.defineProperty(nx,"__esModule",{value:!0});nx.SdtfWriteableBufferView=void 0;const JKe=Lf,eJe=oA;class eQ extends JKe.SdtfBaseWriteableComponent{constructor(){super(...arguments),this.additionalProperties={}}static clone(e){const n=new eQ;return e.buffer&&(n.buffer=eJe.SdtfWriteableBuffer.clone(e.buffer)),n.byteLength=e.byteLength,n.byteOffset=e.byteOffset,n.contentEncoding=e.contentEncoding,n.contentType=e.contentType,n.name=e.name,n.additionalProperties=Object.assign({},e.additionalProperties),n}}nx.SdtfWriteableBufferView=eQ;Object.defineProperty(sA,"__esModule",{value:!0});sA.SdtfWriteableAccessor=void 0;const tJe=Lf,nJe=nx;class tQ extends tJe.SdtfBaseWriteableComponent{constructor(){super(...arguments),this.additionalProperties={}}static clone(e){const n=new tQ;return e.bufferView&&(n.bufferView=nJe.SdtfWriteableBufferView.clone(e.bufferView)),n.id=e.id,n.additionalProperties=Object.assign({},e.additionalProperties),n}}sA.SdtfWriteableAccessor=tQ;var dv={};Object.defineProperty(dv,"__esModule",{value:!0});dv.SdtfWriteableTypeHint=void 0;const rJe=Lf;class nQ extends rJe.SdtfBaseWriteableComponent{constructor(){super(...arguments),this.additionalProperties={}}static clone(e){const n=new nQ;return n.name=e.name,n.additionalProperties=Object.assign({},e.additionalProperties),n}}dv.SdtfWriteableTypeHint=nQ;Object.defineProperty(gm,"__esModule",{value:!0});gm.SdtfWriteableAttribute=gm.SdtfWriteableAttributes=void 0;const iJe=ys,sJe=Lf,oJe=sA,aJe=dv;class rQ extends sJe.SdtfBaseWriteableComponent{constructor(){super(...arguments),this.entries={}}toDataObject(){return this.entries}static clone(e){const n=new rQ;return n.entries={},Object.entries(e.entries).forEach(([i,o])=>n.entries[i]=oN.clone(o)),n}}gm.SdtfWriteableAttributes=rQ;class oN{static clone(e){const n=new oN;return e.accessor&&(n.accessor=oJe.SdtfWriteableAccessor.clone(e.accessor)),e.typeHint&&(n.typeHint=aJe.SdtfWriteableTypeHint.clone(e.typeHint)),n.value=(0,iJe.tryDeepCopy)(e.value),n}}gm.SdtfWriteableAttribute=oN;var rx={};Object.defineProperty(rx,"__esModule",{value:!0});rx.SdtfWriteableDataItem=void 0;const lJe=ys,cJe=Lf,uJe=sA,fJe=gm,dJe=dv;class iQ extends cJe.SdtfBaseWriteableComponent{constructor(){super(...arguments),this.additionalProperties={}}static clone(e){const n=new iQ;return e.accessor&&(n.accessor=uJe.SdtfWriteableAccessor.clone(e.accessor)),e.attributes&&(n.attributes=fJe.SdtfWriteableAttributes.clone(e.attributes)),e.typeHint&&(n.typeHint=dJe.SdtfWriteableTypeHint.clone(e.typeHint)),n.value=(0,lJe.tryDeepCopy)(e.value),n.additionalProperties=Object.assign({},e.additionalProperties),n}}rx.SdtfWriteableDataItem=iQ;Object.defineProperty(tx,"__esModule",{value:!0});tx.SdtfWriteableNode=void 0;const hJe=Lf,pJe=gm,mJe=rx,gJe=dv;class sQ extends hJe.SdtfBaseWriteableComponent{constructor(){super(...arguments),this.items=[],this.nodes=[],this.additionalProperties={}}static clone(e){const n=new sQ;return e.attributes&&(n.attributes=pJe.SdtfWriteableAttributes.clone(e.attributes)),n.items=e.items.map(i=>mJe.SdtfWriteableDataItem.clone(i)),n.name=e.name,n.nodes=e.nodes.map(i=>this.clone(i)),e.typeHint&&(n.typeHint=gJe.SdtfWriteableTypeHint.clone(e.typeHint)),n.additionalProperties=Object.assign({},e.additionalProperties),n}}tx.SdtfWriteableNode=sQ;Object.defineProperty(ex,"__esModule",{value:!0});ex.SdtfWriteableChunk=void 0;const Bse=tx;class vJe extends Bse.SdtfWriteableNode{static clone(e){return Bse.SdtfWriteableNode.clone(e)}}ex.SdtfWriteableChunk=vJe;var ix={};Object.defineProperty(ix,"__esModule",{value:!0});ix.SdtfWriteableFileInfo=void 0;const _Je=Lf;class oQ extends _Je.SdtfBaseWriteableComponent{constructor(e){super(),this.version=e,this.additionalProperties={}}static clone(e){const n=new oQ(e.version);return n.copyright=e.copyright,n.generator=e.generator,n.additionalProperties=Object.assign({},e.additionalProperties),n}}ix.SdtfWriteableFileInfo=oQ;Object.defineProperty(J6,"__esModule",{value:!0});J6.SdtfWriteableAsset=void 0;const yJe=Lf,bJe=ex,AJe=ix;class aQ extends yJe.SdtfBaseWriteableComponent{constructor(e){super(),this.fileInfo=e,this.chunks=[],this.additionalProperties={}}static clone(e){const n=AJe.SdtfWriteableFileInfo.clone(e.fileInfo),i=new aQ(n);return i.chunks=e.chunks.map(o=>bJe.SdtfWriteableChunk.clone(o)),i.additionalProperties=Object.assign({},e.additionalProperties),i}}J6.SdtfWriteableAsset=aQ;var aN={};Object.defineProperty(aN,"__esModule",{value:!0});aN.writeableComponentListFromAsset=void 0;function wJe(t){const e=(i,o)=>{i&&o.findIndex(l=>l.componentId===i.componentId)===-1&&o.push(i)},n={accessors:[],asset:t,attributes:[],buffers:[],bufferViews:[],chunks:t.chunks,items:[],nodes:[],typeHints:[],fileInfo:t.fileInfo};return n.chunks.forEach(i=>{e(i.attributes,n.attributes),i.items.forEach(o=>e(o,n.items)),i.nodes.forEach(o=>e(o,n.nodes)),e(i.typeHint,n.typeHints)}),n.nodes.forEach(i=>{e(i.attributes,n.attributes),i.items.forEach(o=>e(o,n.items)),i.nodes.forEach(o=>e(o,n.nodes)),e(i.typeHint,n.typeHints)}),n.items.forEach(i=>{e(i.accessor,n.accessors),e(i.attributes,n.attributes),e(i.typeHint,n.typeHints)}),n.attributes.forEach(i=>{Object.values(i.entries).forEach(o=>{e(o.accessor,n.accessors),e(o.typeHint,n.typeHints)})}),n.accessors.forEach(i=>e(i.bufferView,n.bufferViews)),n.bufferViews.forEach(i=>e(i.buffer,n.buffers)),n}aN.writeableComponentListFromAsset=wJe;var sx={};Object.defineProperty(sx,"__esModule",{value:!0});sx.SdtfWriteableComponentFactory=void 0;const EJe=ys,SJe=sA,TJe=J6,Use=gm,xJe=oA,MJe=nx,kJe=ex,CJe=rx,PJe=ix,RJe=tx,DJe=dv;class OJe{constructor(){this.ASSET_VERSION="1.0",this.ASSET_GENERATOR="ShapeDiverSdtfWriter"}createAccessor(e){const n=new SJe.SdtfWriteableAccessor;return e&&(n.bufferView=this.createBufferView(e)),n}createAsset(){const e=new PJe.SdtfWriteableFileInfo(this.ASSET_VERSION);return e.generator=this.ASSET_GENERATOR,new TJe.SdtfWriteableAsset(e)}createAttribute(e,n){const i=new Use.SdtfWriteableAttribute;return e&&(this.isBufferContent(e)?i.accessor=this.createAccessor(e):i.value=e),n!==void 0&&(i.typeHint=this.createTypeHint(n)),i}createAttributes(e){const n=new Use.SdtfWriteableAttributes;return Object.entries(e??{}).forEach(([i,o])=>n.entries[i]=this.createAttribute(...o)),n}createBuffer(e){const n=new xJe.SdtfWriteableBuffer;return n.data=e,n}createBufferView(e){const n=new MJe.SdtfWriteableBufferView;return e&&(n.buffer=this.createBuffer(e.data),n.contentType=e.contentType),n}createChunk(e){const n=new kJe.SdtfWriteableChunk;return n.name=e,n}createDataItem(e,n){const i=new CJe.SdtfWriteableDataItem;return e&&(this.isBufferContent(e)?i.accessor=this.createAccessor(e):i.value=e),n!==void 0&&(i.typeHint=this.createTypeHint(n)),i}createNode(){return new RJe.SdtfWriteableNode}createTypeHint(e){const n=new DJe.SdtfWriteableTypeHint;return n.name=e,n}isBufferContent(e){return!!((0,EJe.isDataObject)(e)&&e.data&&e.contentType)}}sx.SdtfWriteableComponentFactory=OJe;Object.defineProperty(K6,"__esModule",{value:!0});K6.SdtfWriteableComponentPostProcessor=void 0;const IJe=J6,NJe=oA,Fse=aN,LJe=sx;class zJe{constructor(e){this.integrations=e,this.factory=new LJe.SdtfWriteableComponentFactory}optimize(e){const n=IJe.SdtfWriteableAsset.clone(e);let i=(0,Fse.writeableComponentListFromAsset)(n);return this.processDataComponents(i.attributes.flatMap(o=>Object.values(o.entries))),this.processDataComponents(i.items),this.postProcessDataComponents([...i.attributes.flatMap(o=>Object.values(o.entries)),...i.items]),i=(0,Fse.writeableComponentListFromAsset)(n),this.complementTypeHints(i),this.removeDuplicatedTypeHints(i),this.resolveBuffers(i),i}processDataComponents(e){e.forEach(n=>{const i=this.integrations.find(o=>{var l,d;return o.isTypeHintSupported((d=(l=n.typeHint)===null||l===void 0?void 0:l.name)!==null&&d!==void 0?d:"")});i&&i.getWriter(this.factory).writeComponent(n)})}postProcessDataComponents(e){this.integrations.forEach(n=>{const i=e.filter(o=>{var l,d;return n.isTypeHintSupported((d=(l=o.typeHint)===null||l===void 0?void 0:l.name)!==null&&d!==void 0?d:"")});i.length!==0&&n.getWriter(this.factory).postProcessComponents(i)})}complementTypeHints(e){const n=(i,o)=>{var l,d;if(((l=i.typeHint)===null||l===void 0?void 0:l.name)!==void 0||o.length===0)return;let p=(d=o[0].typeHint)===null||d===void 0?void 0:d.name;p!==void 0&&o.every(g=>{var v;return((v=g.typeHint)===null||v===void 0?void 0:v.name)===p})&&(i.typeHint=this.factory.createTypeHint(p),e.typeHints.push(i.typeHint))};e.nodes.forEach(i=>n(i,i.items)),e.chunks.forEach(i=>n(i,i.nodes))}removeDuplicatedTypeHints(e){const n=[];e.typeHints.forEach(o=>{n.find(this.areTypeHintsSimilar.bind(this,o))||n.push(o)});const i=o=>{!o.typeHint||n.find(l=>l.componentId===o.typeHint.componentId)||(o.typeHint=n.find(l=>this.areTypeHintsSimilar(l,o.typeHint)))};e.attributes.forEach(o=>Object.values(o.entries).forEach(l=>i(l))),e.chunks.forEach(o=>i(o)),e.items.forEach(o=>i(o)),e.nodes.forEach(o=>i(o)),e.typeHints=Object.values(n)}areTypeHintsSimilar(e,n){var i,o;const l=Object.entries((i=e.additionalProperties)!==null&&i!==void 0?i:{}),d=Object.entries((o=n.additionalProperties)!==null&&o!==void 0?o:{});if(e.name!==n.name||l.length!==d.length)return!1;for(let p=0;p<l.length;p++){const[g,v]=l[p];if(n.additionalProperties[g]!==v)return!1}return!0}resolveBuffers(e){const n={};e.bufferViews.forEach(o=>{var l;if(!o.buffer)return;const d=(l=o.buffer.uri)!==null&&l!==void 0?l:"";n[d]||(n[d]=[]),n[d].push(o)});const i=[];Object.entries(n).forEach(([o,l])=>{const[d,p]=this.mergeBuffers(o,l.map(g=>g.buffer));l.forEach((g,v)=>{var _;g.byteOffset=p[v],g.byteLength=(_=g.buffer.data.byteLength)!==null&&_!==void 0?_:0,g.buffer=d}),i.push(d)}),e.buffers=i}mergeBuffers(e,n){const i=new NJe.SdtfWriteableBuffer;i.uri=e,i.additionalProperties={},Object.assign(i.additionalProperties,...n.map(d=>d.additionalProperties));const[o,l]=this.mergeBufferData(n);return i.byteLength=o.byteLength,i.data=o,[i,l]}mergeBufferData(e){var n,i;const o=g=>{const v=g%4;return v===0?g:g+4-v};let l=[0],d=(i=(n=e[0].data)===null||n===void 0?void 0:n.byteLength)!==null&&i!==void 0?i:0;if(e.length>0){d=o(d);for(let g=1;g<e.length;g++){let v=0;const _=e[g].data;_&&(g===e.length-1?v=_.byteLength:v=o(_.byteLength)),l.push(l[g-1]+d),d=v}}const p=new Uint8Array(l[l.length-1]+d);return e.forEach((g,v)=>{const _=g.data?new Uint8Array(g.data):new Uint8Array(0);p.set(_,l[v])}),[p,l]}}K6.SdtfWriteableComponentPostProcessor=zJe;Object.defineProperty(q9,"__esModule",{value:!0});q9.SdtfFormatter=void 0;const BJe=X9,UJe=Q6,FJe=iA,VJe=K6;class GJe{constructor(e){this.factory=new FJe.SdtfComponentFactoryWrapper,this.postProcessor=new VJe.SdtfWriteableComponentPostProcessor(e)}prettifyReadableAsset(e){const n=(0,BJe.readableComponentListFromAsset)(e),i=this.factory.createFromReadable(n);return this.prettifyAsset(i)}prettifyWriteableAsset(e){const n=this.postProcessor.optimize(e),i=this.factory.createFromWriteable(n);return this.prettifyAsset(i)}prettifyAsset(e){const n=(0,UJe.toJsonContent)(e);return JSON.stringify(n,void 0,2)}}q9.SdtfFormatter=GJe;var lN={},hv={};Object.defineProperty(hv,"__esModule",{value:!0});var jJe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},HJe=typeof window<"u"&&typeof window.document<"u",$Je=typeof process<"u"&&process.versions!=null&&process.versions.node!=null,WJe=(typeof self>"u"?"undefined":jJe(self))==="object"&&self.constructor&&self.constructor.name==="DedicatedWorkerGlobalScope",YJe=typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom")),qJe=typeof Deno<"u"&&typeof Deno.version<"u"&&typeof Deno.version.deno<"u";hv.isBrowser=HJe;hv.isWebWorker=WJe;hv.isNode=$Je;hv.isJsDom=YJe;hv.isDeno=qJe;var aA={};Object.defineProperty(aA,"__esModule",{value:!0});aA.SdtfBinarySdtf=void 0;const g3=ys,XJe=Q6;class ZJe{constructor(){this.binaryHeaderLength=20}constructBinarySdtf(e){var n;const i=(n=e.binaryBody)!==null&&n!==void 0?n:new ArrayBuffer(0),o=this.createJsonContent(e),l=this.createHeader(o.byteLength,i.byteLength);return new Uint8Array([...new Uint8Array(l),...new Uint8Array(o),...new Uint8Array(i)]).buffer}parseBinarySdtf(e){const n=new DataView(e,0,this.binaryHeaderLength),[i,o]=this.readHeader(n),l=new DataView(e,this.binaryHeaderLength,i),d=new DataView(e,this.binaryHeaderLength+i,o-this.binaryHeaderLength-i);return[l,d]}readHeader(e){e instanceof ArrayBuffer&&(e=new DataView(e));const n=String.fromCharCode(e.getUint8(0))+String.fromCharCode(e.getUint8(1))+String.fromCharCode(e.getUint8(2))+String.fromCharCode(e.getUint8(3));if(n!=="sdtf")throw new g3.SdtfError(`Invalid identifier: Unknown file type for sdTF identifier '${n}'.`);const i=e.getUint32(4,!0);if(i!==1)throw new g3.SdtfError(`Invalid version: Unsupported sdTF version '${i}'.`);const o=e.getUint32(8,!0),l=e.getUint32(12,!0),d=e.getUint32(16,!0);if(d!==0)throw new g3.SdtfError(`Invalid content: Unsupported sdTF content format '${d}'.`);return[l,o]}createHeader(e,n){const i=new Uint8Array(20),o=new DataView(i.buffer,0,i.byteLength),l="sdtf";o.setUint8(0,l.codePointAt(0)),o.setUint8(1,l.codePointAt(1)),o.setUint8(2,l.codePointAt(2)),o.setUint8(3,l.codePointAt(3)),o.setUint32(4,1,!0);const p=this.binaryHeaderLength+e+n;return o.setUint32(8,p,!0),o.setUint32(12,e,!0),o.setUint32(16,0,!0),o.buffer}readJsonContent(e){e instanceof ArrayBuffer&&(e=new DataView(e));try{return JSON.parse(new TextDecoder().decode(e))}catch(n){throw new g3.SdtfError(`Invalid content: Cannot parse sdTF JSON content. ${n.message}`)}}createJsonContent(e){const n=(0,XJe.toJsonContent)(e);try{return new TextEncoder().encode(JSON.stringify(n,void 0,0))}catch(i){throw new g3.SdtfError(`Invalid content: Cannot create sdTF JSON content. ${i.message}`)}}}aA.SdtfBinarySdtf=ZJe;var lA={},Vse=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty(lA,"__esModule",{value:!0});lA.SdtfBinaryBufferCache=void 0;const QJe=ys;class KJe{constructor(){this.cacheIdFullBuffer="full",this.cache={}}calcCacheKey(e=""){let n=0;for(let i=0;i<e.length;i++){const o=e.charCodeAt(i);n=(n<<5)-n+o,n&=n}return new Uint32Array([n])[0].toString(36)}calcCacheId(e,n){return`${e};${n}`}loadFromCache(e,n,i){const o=this.cache[e];if(!o)return;const l=this.calcCacheId(n,i);if(o[l])return o[l];if(o[this.cacheIdFullBuffer]){const d=o[this.cacheIdFullBuffer];return new DataView(d.buffer,d.byteOffset+n,i)}}storeInCache(e,n,i){var o;const l=(o=this.cache[e])!==null&&o!==void 0?o:{};l[n]=i,this.cache[e]=l}setBinaryBody(e){e&&(this.cache[this.calcCacheKey()]={[this.cacheIdFullBuffer]:e})}getBuffer(e,n,i){var o;return Vse(this,void 0,void 0,function*(){const l=this.calcCacheKey(e);return(o=this.loadFromCache(l,n,i))!==null&&o!==void 0?o:yield this.acquireBuffer(e,i,n)})}acquireBuffer(e,n,i){return Vse(this,void 0,void 0,function*(){throw new QJe.SdtfError("Resolution of external buffers is not supported in this mode. Please use 'ISdtfParser.readFromFile()' or 'ISdtfParser.readFromUrl()' to instantiate the sdTF asset and to enable this functionality.")})}}lA.SdtfBinaryBufferCache=KJe;var cN={},ox={};const JJe={},eet=Object.freeze(Object.defineProperty({__proto__:null,default:JJe},Symbol.toStringTag,{value:"Module"})),Eb=ym(eet);Object.defineProperty(ox,"__esModule",{value:!0});ox.SdtfFileUtils=void 0;const Gse=ys,tet=Eb,jse=Eb;class net{toAbsolutePath(e){try{return tet.resolve(e)}catch(n){throw new Gse.SdtfError(`Could not resolve path '${e}': ${n.message}`)}}readFile(e){if(!jse.existsSync(e))throw new Gse.SdtfError(`Cannot find file at location '${e}'.`);return new Promise((n,i)=>{jse.readFile(e,(o,l)=>{o&&i(o);const d=l.buffer.slice(l.byteOffset,l.byteOffset+l.byteLength);n(d)})})}}ox.SdtfFileUtils=net;var ret=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty(cN,"__esModule",{value:!0});cN.SdtfFileBufferCache=void 0;const iet=ys,set=ox,oet=lA;class aet extends oet.SdtfBinaryBufferCache{constructor(e){super(),this.fileUtils=new set.SdtfFileUtils;const n=e.lastIndexOf("/");this.basePath=e.substring(0,n)}acquireBuffer(e,n,i){return ret(this,void 0,void 0,function*(){let o;try{o=yield this.fileUtils.readFile(`${this.basePath}/${e}`)}catch(l){throw new iet.SdtfError(`Cannot read buffer: ${l.message}`)}return this.storeInCache(this.calcCacheKey(e),this.cacheIdFullBuffer,new DataView(o)),new DataView(o,n,i)})}}cN.SdtfFileBufferCache=aet;var uN={},cet=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty(uN,"__esModule",{value:!0});uN.SdtfHttpBufferCache=void 0;const uet=lA;class fet extends uet.SdtfBinaryBufferCache{constructor(e){super(),this.httpClient=e}acquireBuffer(e,n,i){return cet(this,void 0,void 0,function*(){const[o,l]=yield this.httpClient.getBinaryBuffer(e,n,i);return l?this.storeInCache(this.calcCacheKey(e),this.cacheIdFullBuffer,new DataView(l)):this.storeInCache(this.calcCacheKey(e),this.calcCacheId(n,i),o),o})}}uN.SdtfHttpBufferCache=fet;var fN={};function P_e(t,e){return function(){return t.apply(e,arguments)}}const{toString:det}=Object.prototype,{getPrototypeOf:lQ}=Object,dN=(t=>e=>{const n=det.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Bd=t=>(t=t.toLowerCase(),e=>dN(e)===t),hN=t=>e=>typeof e===t,{isArray:cA}=Array,IT=hN("undefined");function het(t){return t!==null&&!IT(t)&&t.constructor!==null&&!IT(t.constructor)&&xf(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const R_e=Bd("ArrayBuffer");function pet(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&R_e(t.buffer),e}const met=hN("string"),xf=hN("function"),D_e=hN("number"),pN=t=>t!==null&&typeof t=="object",get=t=>t===!0||t===!1,cR=t=>{if(dN(t)!=="object")return!1;const e=lQ(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},vet=Bd("Date"),_et=Bd("File"),yet=Bd("Blob"),bet=Bd("FileList"),Aet=t=>pN(t)&&xf(t.pipe),wet=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||xf(t.append)&&((e=dN(t))==="formdata"||e==="object"&&xf(t.toString)&&t.toString()==="[object FormData]"))},Eet=Bd("URLSearchParams"),Tet=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ax(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let i,o;if(typeof t!="object"&&(t=[t]),cA(t))for(i=0,o=t.length;i<o;i++)e.call(null,t[i],i,t);else{const l=n?Object.getOwnPropertyNames(t):Object.keys(t),d=l.length;let p;for(i=0;i<d;i++)p=l[i],e.call(null,t[p],p,t)}}function O_e(t,e){e=e.toLowerCase();const n=Object.keys(t);let i=n.length,o;for(;i-- >0;)if(o=n[i],e===o.toLowerCase())return o;return null}const I_e=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:X,N_e=t=>!IT(t)&&t!==I_e;function o$(){const{caseless:t}=N_e(this)&&this||{},e={},n=(i,o)=>{const l=t&&O_e(e,o)||o;cR(e[l])&&cR(i)?e[l]=o$(e[l],i):cR(i)?e[l]=o$({},i):cA(i)?e[l]=i.slice():e[l]=i};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&ax(arguments[i],n);return e}const xet=(t,e,n,{allOwnKeys:i}={})=>(ax(e,(o,l)=>{n&&xf(o)?t[l]=P_e(o,n):t[l]=o},{allOwnKeys:i}),t),Met=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),ket=(t,e,n,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},Cet=(t,e,n,i)=>{let o,l,d;const p={};if(e=e||{},t==null)return e;do{for(o=Object.getOwnPropertyNames(t),l=o.length;l-- >0;)d=o[l],(!i||i(d,t,e))&&!p[d]&&(e[d]=t[d],p[d]=!0);t=n!==!1&&lQ(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Pet=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const i=t.indexOf(e,n);return i!==-1&&i===n},Ret=t=>{if(!t)return null;if(cA(t))return t;let e=t.length;if(!D_e(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},Det=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&lQ(Uint8Array)),Oet=(t,e)=>{const i=(t&&t[Symbol.iterator]).call(t);let o;for(;(o=i.next())&&!o.done;){const l=o.value;e.call(t,l[0],l[1])}},Iet=(t,e)=>{let n;const i=[];for(;(n=t.exec(e))!==null;)i.push(n);return i},Net=Bd("HTMLFormElement"),Let=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,o){return i.toUpperCase()+o}),Hse=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),zet=Bd("RegExp"),L_e=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),i={};ax(n,(o,l)=>{let d;(d=e(o,l,t))!==!1&&(i[l]=d||o)}),Object.defineProperties(t,i)},Bet=t=>{L_e(t,(e,n)=>{if(xf(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=t[n];if(xf(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Uet=(t,e)=>{const n={},i=o=>{o.forEach(l=>{n[l]=!0})};return cA(t)?i(t):i(String(t).split(e)),n},Fet=()=>{},Vet=(t,e)=>(t=+t,Number.isFinite(t)?t:e),UF="abcdefghijklmnopqrstuvwxyz",$se="0123456789",z_e={DIGIT:$se,ALPHA:UF,ALPHA_DIGIT:UF+UF.toUpperCase()+$se},Get=(t=16,e=z_e.ALPHA_DIGIT)=>{let n="";const{length:i}=e;for(;t--;)n+=e[Math.random()*i|0];return n};function jet(t){return!!(t&&xf(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const Het=t=>{const e=new Array(10),n=(i,o)=>{if(pN(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[o]=i;const l=cA(i)?[]:{};return ax(i,(d,p)=>{const g=n(d,o+1);!IT(g)&&(l[p]=g)}),e[o]=void 0,l}}return i};return n(t,0)},$et=Bd("AsyncFunction"),Wet=t=>t&&(pN(t)||xf(t))&&xf(t.then)&&xf(t.catch);var Vt={isArray:cA,isArrayBuffer:R_e,isBuffer:het,isFormData:wet,isArrayBufferView:pet,isString:met,isNumber:D_e,isBoolean:get,isObject:pN,isPlainObject:cR,isUndefined:IT,isDate:vet,isFile:_et,isBlob:yet,isRegExp:zet,isFunction:xf,isStream:Aet,isURLSearchParams:Eet,isTypedArray:Det,isFileList:bet,forEach:ax,merge:o$,extend:xet,trim:Tet,stripBOM:Met,inherits:ket,toFlatObject:Cet,kindOf:dN,kindOfTest:Bd,endsWith:Pet,toArray:Ret,forEachEntry:Oet,matchAll:Iet,isHTMLForm:Net,hasOwnProperty:Hse,hasOwnProp:Hse,reduceDescriptors:L_e,freezeMethods:Bet,toObjectSet:Uet,toCamelCase:Let,noop:Fet,toFiniteNumber:Vet,findKey:O_e,global:I_e,isContextDefined:N_e,ALPHABET:z_e,generateString:Get,isSpecCompliantForm:jet,toJSONObject:Het,isAsyncFn:$et,isThenable:Wet};function Si(t,e,n,i,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),o&&(this.response=o)}Vt.inherits(Si,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Vt.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const B_e=Si.prototype,U_e={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{U_e[t]={value:t}});Object.defineProperties(Si,U_e);Object.defineProperty(B_e,"isAxiosError",{value:!0});Si.from=(t,e,n,i,o,l)=>{const d=Object.create(B_e);return Vt.toFlatObject(t,d,function(g){return g!==Error.prototype},p=>p!=="isAxiosError"),Si.call(d,t.message,e,n,i,o),d.cause=t,d.name=t.name,l&&Object.assign(d,l),d};var Yet=null;function a$(t){return Vt.isPlainObject(t)||Vt.isArray(t)}function F_e(t){return Vt.endsWith(t,"[]")?t.slice(0,-2):t}function Wse(t,e,n){return t?t.concat(e).map(function(o,l){return o=F_e(o),!n&&l?"["+o+"]":o}).join(n?".":""):e}function qet(t){return Vt.isArray(t)&&!t.some(a$)}const Xet=Vt.toFlatObject(Vt,{},null,function(e){return/^is[A-Z]/.test(e)});function mN(t,e,n){if(!Vt.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=Vt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(M,k){return!Vt.isUndefined(k[M])});const i=n.metaTokens,o=n.visitor||_,l=n.dots,d=n.indexes,g=(n.Blob||typeof Blob<"u"&&Blob)&&Vt.isSpecCompliantForm(e);if(!Vt.isFunction(o))throw new TypeError("visitor must be a function");function v(S){if(S===null)return"";if(Vt.isDate(S))return S.toISOString();if(!g&&Vt.isBlob(S))throw new Si("Blob is not supported. Use a Buffer instead.");return Vt.isArrayBuffer(S)||Vt.isTypedArray(S)?g&&typeof Blob=="function"?new Blob([S]):Buffer.from(S):S}function _(S,M,k){let x=S;if(S&&!k&&typeof S=="object"){if(Vt.endsWith(M,"{}"))M=i?M:M.slice(0,-2),S=JSON.stringify(S);else if(Vt.isArray(S)&&qet(S)||(Vt.isFileList(S)||Vt.endsWith(M,"[]"))&&(x=Vt.toArray(S)))return M=F_e(M),x.forEach(function(P,O){!(Vt.isUndefined(P)||P===null)&&e.append(d===!0?Wse([M],O,l):d===null?M:M+"[]",v(P))}),!1}return a$(S)?!0:(e.append(Wse(k,M,l),v(S)),!1)}const b=[],w=Object.assign(Xet,{defaultVisitor:_,convertValue:v,isVisitable:a$});function E(S,M){if(!Vt.isUndefined(S)){if(b.indexOf(S)!==-1)throw Error("Circular reference detected in "+M.join("."));b.push(S),Vt.forEach(S,function(x,C){(!(Vt.isUndefined(x)||x===null)&&o.call(e,x,Vt.isString(C)?C.trim():C,M,w))===!0&&E(x,M?M.concat(C):[C])}),b.pop()}}if(!Vt.isObject(t))throw new TypeError("data must be an object");return E(t),e}function Yse(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function cQ(t,e){this._pairs=[],t&&mN(t,this,e)}const V_e=cQ.prototype;V_e.append=function(e,n){this._pairs.push([e,n])};V_e.toString=function(e){const n=e?function(i){return e.call(this,i,Yse)}:Yse;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function Zet(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function G_e(t,e,n){if(!e)return t;const i=n&&n.encode||Zet,o=n&&n.serialize;let l;if(o?l=o(e,n):l=Vt.isURLSearchParams(e)?e.toString():new cQ(e,n).toString(i),l){const d=t.indexOf("#");d!==-1&&(t=t.slice(0,d)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}let Qet=class{constructor(){this.handlers=[]}use(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Vt.forEach(this.handlers,function(i){i!==null&&e(i)})}};var qse=Qet,j_e={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ket=typeof URLSearchParams<"u"?URLSearchParams:cQ,Jet=typeof FormData<"u"?FormData:null,ett=typeof Blob<"u"?Blob:null,ttt={isBrowser:!0,classes:{URLSearchParams:Ket,FormData:Jet,Blob:ett},protocols:["http","https","file","blob","url","data"]};const H_e=typeof window<"u"&&typeof document<"u",ntt=(t=>H_e&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),rtt=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function";var itt=Object.freeze({__proto__:null,hasBrowserEnv:H_e,hasStandardBrowserWebWorkerEnv:rtt,hasStandardBrowserEnv:ntt}),wd={...itt,...ttt};function stt(t,e){return mN(t,new wd.classes.URLSearchParams,Object.assign({visitor:function(n,i,o,l){return wd.isNode&&Vt.isBuffer(n)?(this.append(i,n.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)}},e))}function ott(t){return Vt.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function att(t){const e={},n=Object.keys(t);let i;const o=n.length;let l;for(i=0;i<o;i++)l=n[i],e[l]=t[l];return e}function $_e(t){function e(n,i,o,l){let d=n[l++];if(d==="__proto__")return!0;const p=Number.isFinite(+d),g=l>=n.length;return d=!d&&Vt.isArray(o)?o.length:d,g?(Vt.hasOwnProp(o,d)?o[d]=[o[d],i]:o[d]=i,!p):((!o[d]||!Vt.isObject(o[d]))&&(o[d]=[]),e(n,i,o[d],l)&&Vt.isArray(o[d])&&(o[d]=att(o[d])),!p)}if(Vt.isFormData(t)&&Vt.isFunction(t.entries)){const n={};return Vt.forEachEntry(t,(i,o)=>{e(ott(i),o,n,0)}),n}return null}function ltt(t,e,n){if(Vt.isString(t))try{return(e||JSON.parse)(t),Vt.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(0,JSON.stringify)(t)}const uQ={transitional:j_e,adapter:["xhr","http"],transformRequest:[function(e,n){const i=n.getContentType()||"",o=i.indexOf("application/json")>-1,l=Vt.isObject(e);if(l&&Vt.isHTMLForm(e)&&(e=new FormData(e)),Vt.isFormData(e))return o?JSON.stringify($_e(e)):e;if(Vt.isArrayBuffer(e)||Vt.isBuffer(e)||Vt.isStream(e)||Vt.isFile(e)||Vt.isBlob(e))return e;if(Vt.isArrayBufferView(e))return e.buffer;if(Vt.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let p;if(l){if(i.indexOf("application/x-www-form-urlencoded")>-1)return stt(e,this.formSerializer).toString();if((p=Vt.isFileList(e))||i.indexOf("multipart/form-data")>-1){const g=this.env&&this.env.FormData;return mN(p?{"files[]":e}:e,g&&new g,this.formSerializer)}}return l||o?(n.setContentType("application/json",!1),ltt(e)):e}],transformResponse:[function(e){const n=this.transitional||uQ.transitional,i=n&&n.forcedJSONParsing,o=this.responseType==="json";if(e&&Vt.isString(e)&&(i&&!this.responseType||o)){const d=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(e)}catch(p){if(d)throw p.name==="SyntaxError"?Si.from(p,Si.ERR_BAD_RESPONSE,this,null,this.response):p}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:wd.classes.FormData,Blob:wd.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Vt.forEach(["delete","get","head","post","put","patch"],t=>{uQ.headers[t]={}});var fQ=uQ;const ctt=Vt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var utt=t=>{const e={};let n,i,o;return t&&t.split(`
`).forEach(function(d){o=d.indexOf(":"),n=d.substring(0,o).trim().toLowerCase(),i=d.substring(o+1).trim(),!(!n||e[n]&&ctt[n])&&(n==="set-cookie"?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)}),e};const Xse=Symbol("internals");function v3(t){return t&&String(t).trim().toLowerCase()}function uR(t){return t===!1||t==null?t:Vt.isArray(t)?t.map(uR):String(t)}function ftt(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)e[i[1]]=i[2];return e}const dtt=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function FF(t,e,n,i,o){if(Vt.isFunction(i))return i.call(this,e,n);if(o&&(e=n),!!Vt.isString(e)){if(Vt.isString(i))return e.indexOf(i)!==-1;if(Vt.isRegExp(i))return i.test(e)}}function htt(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,i)=>n.toUpperCase()+i)}function ptt(t,e){const n=Vt.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(o,l,d){return this[i].call(this,e,o,l,d)},configurable:!0})})}class gN{constructor(e){e&&this.set(e)}set(e,n,i){const o=this;function l(p,g,v){const _=v3(g);if(!_)throw new Error("header name must be a non-empty string");const b=Vt.findKey(o,_);(!b||o[b]===void 0||v===!0||v===void 0&&o[b]!==!1)&&(o[b||g]=uR(p))}const d=(p,g)=>Vt.forEach(p,(v,_)=>l(v,_,g));return Vt.isPlainObject(e)||e instanceof this.constructor?d(e,n):Vt.isString(e)&&(e=e.trim())&&!dtt(e)?d(utt(e),n):e!=null&&l(n,e,i),this}get(e,n){if(e=v3(e),e){const i=Vt.findKey(this,e);if(i){const o=this[i];if(!n)return o;if(n===!0)return ftt(o);if(Vt.isFunction(n))return n.call(this,o,i);if(Vt.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=v3(e),e){const i=Vt.findKey(this,e);return!!(i&&this[i]!==void 0&&(!n||FF(this,this[i],i,n)))}return!1}delete(e,n){const i=this;let o=!1;function l(d){if(d=v3(d),d){const p=Vt.findKey(i,d);p&&(!n||FF(i,i[p],p,n))&&(delete i[p],o=!0)}}return Vt.isArray(e)?e.forEach(l):l(e),o}clear(e){const n=Object.keys(this);let i=n.length,o=!1;for(;i--;){const l=n[i];(!e||FF(this,this[l],l,e,!0))&&(delete this[l],o=!0)}return o}normalize(e){const n=this,i={};return Vt.forEach(this,(o,l)=>{const d=Vt.findKey(i,l);if(d){n[d]=uR(o),delete n[l];return}const p=e?htt(l):String(l).trim();p!==l&&delete n[l],n[p]=uR(o),i[p]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return Vt.forEach(this,(i,o)=>{i!=null&&i!==!1&&(n[o]=e&&Vt.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const i=new this(e);return n.forEach(o=>i.set(o)),i}static accessor(e){const i=(this[Xse]=this[Xse]={accessors:{}}).accessors,o=this.prototype;function l(d){const p=v3(d);i[p]||(ptt(o,d),i[p]=!0)}return Vt.isArray(e)?e.forEach(l):l(e),this}}gN.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Vt.reduceDescriptors(gN.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(i){this[n]=i}}});Vt.freezeMethods(gN);var Kh=gN;function VF(t,e){const n=this||fQ,i=e||n,o=Kh.from(i.headers);let l=i.data;return Vt.forEach(t,function(p){l=p.call(n,l,o.normalize(),e?e.status:void 0)}),o.normalize(),l}function W_e(t){return!!(t&&t.__CANCEL__)}function lx(t,e,n){Si.call(this,t??"canceled",Si.ERR_CANCELED,e,n),this.name="CanceledError"}Vt.inherits(lx,Si,{__CANCEL__:!0});function mtt(t,e,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):e(new Si("Request failed with status code "+n.status,[Si.ERR_BAD_REQUEST,Si.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}var gtt=wd.hasStandardBrowserEnv?{write(t,e,n,i,o,l){const d=[t+"="+encodeURIComponent(e)];Vt.isNumber(n)&&d.push("expires="+new Date(n).toGMTString()),Vt.isString(i)&&d.push("path="+i),Vt.isString(o)&&d.push("domain="+o),l===!0&&d.push("secure"),document.cookie=d.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function vtt(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function _tt(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Y_e(t,e){return t&&!vtt(e)?_tt(t,e):e}var ytt=wd.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let i;function o(l){let d=l;return e&&(n.setAttribute("href",d),d=n.href),n.setAttribute("href",d),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=o(window.location.href),function(d){const p=Vt.isString(d)?o(d):d;return p.protocol===i.protocol&&p.host===i.host}}():function(){return function(){return!0}}();function btt(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Att(t,e){t=t||10;const n=new Array(t),i=new Array(t);let o=0,l=0,d;return e=e!==void 0?e:1e3,function(g){const v=Date.now(),_=i[l];d||(d=v),n[o]=g,i[o]=v;let b=l,w=0;for(;b!==o;)w+=n[b++],b=b%t;if(o=(o+1)%t,o===l&&(l=(l+1)%t),v-d<e)return;const E=_&&v-_;return E?Math.round(w*1e3/E):void 0}}function Zse(t,e){let n=0;const i=Att(50,250);return o=>{const l=o.loaded,d=o.lengthComputable?o.total:void 0,p=l-n,g=i(p),v=l<=d;n=l;const _={loaded:l,total:d,progress:d?l/d:void 0,bytes:p,rate:g||void 0,estimated:g&&d&&v?(d-l)/g:void 0,event:o};_[e?"download":"upload"]=!0,t(_)}}const wtt=typeof XMLHttpRequest<"u";var Ett=wtt&&function(t){return new Promise(function(n,i){let o=t.data;const l=Kh.from(t.headers).normalize();let{responseType:d,withXSRFToken:p}=t,g;function v(){t.cancelToken&&t.cancelToken.unsubscribe(g),t.signal&&t.signal.removeEventListener("abort",g)}let _;if(Vt.isFormData(o)){if(wd.hasStandardBrowserEnv||wd.hasStandardBrowserWebWorkerEnv)l.setContentType(!1);else if((_=l.getContentType())!==!1){const[M,...k]=_?_.split(";").map(x=>x.trim()).filter(Boolean):[];l.setContentType([M||"multipart/form-data",...k].join("; "))}}let b=new XMLHttpRequest;if(t.auth){const M=t.auth.username||"",k=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";l.set("Authorization","Basic "+btoa(M+":"+k))}const w=Y_e(t.baseURL,t.url);b.open(t.method.toUpperCase(),G_e(w,t.params,t.paramsSerializer),!0),b.timeout=t.timeout;function E(){if(!b)return;const M=Kh.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),x={data:!d||d==="text"||d==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:M,config:t,request:b};mtt(function(P){n(P),v()},function(P){i(P),v()},x),b=null}if("onloadend"in b?b.onloadend=E:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(E)},b.onabort=function(){b&&(i(new Si("Request aborted",Si.ECONNABORTED,t,b)),b=null)},b.onerror=function(){i(new Si("Network Error",Si.ERR_NETWORK,t,b)),b=null},b.ontimeout=function(){let k=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const x=t.transitional||j_e;t.timeoutErrorMessage&&(k=t.timeoutErrorMessage),i(new Si(k,x.clarifyTimeoutError?Si.ETIMEDOUT:Si.ECONNABORTED,t,b)),b=null},wd.hasStandardBrowserEnv&&(p&&Vt.isFunction(p)&&(p=p(t)),p||p!==!1&&ytt(w))){const M=t.xsrfHeaderName&&t.xsrfCookieName&&gtt.read(t.xsrfCookieName);M&&l.set(t.xsrfHeaderName,M)}o===void 0&&l.setContentType(null),"setRequestHeader"in b&&Vt.forEach(l.toJSON(),function(k,x){b.setRequestHeader(x,k)}),Vt.isUndefined(t.withCredentials)||(b.withCredentials=!!t.withCredentials),d&&d!=="json"&&(b.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&b.addEventListener("progress",Zse(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&b.upload&&b.upload.addEventListener("progress",Zse(t.onUploadProgress)),(t.cancelToken||t.signal)&&(g=M=>{b&&(i(!M||M.type?new lx(null,t,b):M),b.abort(),b=null)},t.cancelToken&&t.cancelToken.subscribe(g),t.signal&&(t.signal.aborted?g():t.signal.addEventListener("abort",g)));const S=btt(w);if(S&&wd.protocols.indexOf(S)===-1){i(new Si("Unsupported protocol "+S+":",Si.ERR_BAD_REQUEST,t));return}b.send(o||null)})};const l$={http:Yet,xhr:Ett};Vt.forEach(l$,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Qse=t=>`- ${t}`,Stt=t=>Vt.isFunction(t)||t===null||t===!1;var q_e={getAdapter:t=>{t=Vt.isArray(t)?t:[t];const{length:e}=t;let n,i;const o={};for(let l=0;l<e;l++){n=t[l];let d;if(i=n,!Stt(n)&&(i=l$[(d=String(n)).toLowerCase()],i===void 0))throw new Si(`Unknown adapter '${d}'`);if(i)break;o[d||"#"+l]=i}if(!i){const l=Object.entries(o).map(([p,g])=>`adapter ${p} `+(g===!1?"is not supported by the environment":"is not available in the build"));let d=e?l.length>1?`since :
`+l.map(Qse).join(`
`):" "+Qse(l[0]):"as no adapter specified";throw new Si("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return i},adapters:l$};function GF(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new lx(null,t)}function Kse(t){return GF(t),t.headers=Kh.from(t.headers),t.data=VF.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),q_e.getAdapter(t.adapter||fQ.adapter)(t).then(function(i){return GF(t),i.data=VF.call(t,t.transformResponse,i),i.headers=Kh.from(i.headers),i},function(i){return W_e(i)||(GF(t),i&&i.response&&(i.response.data=VF.call(t,t.transformResponse,i.response),i.response.headers=Kh.from(i.response.headers))),Promise.reject(i)})}const Jse=t=>t instanceof Kh?{...t}:t;function g4(t,e){e=e||{};const n={};function i(v,_,b){return Vt.isPlainObject(v)&&Vt.isPlainObject(_)?Vt.merge.call({caseless:b},v,_):Vt.isPlainObject(_)?Vt.merge({},_):Vt.isArray(_)?_.slice():_}function o(v,_,b){if(Vt.isUndefined(_)){if(!Vt.isUndefined(v))return i(void 0,v,b)}else return i(v,_,b)}function l(v,_){if(!Vt.isUndefined(_))return i(void 0,_)}function d(v,_){if(Vt.isUndefined(_)){if(!Vt.isUndefined(v))return i(void 0,v)}else return i(void 0,_)}function p(v,_,b){if(b in e)return i(v,_);if(b in t)return i(void 0,v)}const g={url:l,method:l,data:l,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,withXSRFToken:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:p,headers:(v,_)=>o(Jse(v),Jse(_),!0)};return Vt.forEach(Object.keys(Object.assign({},t,e)),function(_){const b=g[_]||o,w=b(t[_],e[_],_);Vt.isUndefined(w)&&b!==p||(n[_]=w)}),n}const X_e="1.6.8",dQ={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{dQ[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});const eoe={};dQ.transitional=function(e,n,i){function o(l,d){return"[Axios v"+X_e+"] Transitional option '"+l+"'"+d+(i?". "+i:"")}return(l,d,p)=>{if(e===!1)throw new Si(o(d," has been removed"+(n?" in "+n:"")),Si.ERR_DEPRECATED);return n&&!eoe[d]&&(eoe[d]=!0,console.warn(o(d," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(l,d,p):!0}};function Ttt(t,e,n){if(typeof t!="object")throw new Si("options must be an object",Si.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let o=i.length;for(;o-- >0;){const l=i[o],d=e[l];if(d){const p=t[l],g=p===void 0||d(p,l,t);if(g!==!0)throw new Si("option "+l+" must be "+g,Si.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Si("Unknown option "+l,Si.ERR_BAD_OPTION)}}var c$={assertOptions:Ttt,validators:dQ};const Wp=c$.validators;let ZO=class{constructor(e){this.defaults=e,this.interceptors={request:new qse,response:new qse}}async request(e,n){try{return await this._request(e,n)}catch(i){if(i instanceof Error){let o;Error.captureStackTrace?Error.captureStackTrace(o={}):o=new Error;const l=o.stack?o.stack.replace(/^.+\n/,""):"";i.stack?l&&!String(i.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+l):i.stack=l}throw i}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=g4(this.defaults,n);const{transitional:i,paramsSerializer:o,headers:l}=n;i!==void 0&&c$.assertOptions(i,{silentJSONParsing:Wp.transitional(Wp.boolean),forcedJSONParsing:Wp.transitional(Wp.boolean),clarifyTimeoutError:Wp.transitional(Wp.boolean)},!1),o!=null&&(Vt.isFunction(o)?n.paramsSerializer={serialize:o}:c$.assertOptions(o,{encode:Wp.function,serialize:Wp.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let d=l&&Vt.merge(l.common,l[n.method]);l&&Vt.forEach(["delete","get","head","post","put","patch","common"],S=>{delete l[S]}),n.headers=Kh.concat(d,l);const p=[];let g=!0;this.interceptors.request.forEach(function(M){typeof M.runWhen=="function"&&M.runWhen(n)===!1||(g=g&&M.synchronous,p.unshift(M.fulfilled,M.rejected))});const v=[];this.interceptors.response.forEach(function(M){v.push(M.fulfilled,M.rejected)});let _,b=0,w;if(!g){const S=[Kse.bind(this),void 0];for(S.unshift.apply(S,p),S.push.apply(S,v),w=S.length,_=Promise.resolve(n);b<w;)_=_.then(S[b++],S[b++]);return _}w=p.length;let E=n;for(b=0;b<w;){const S=p[b++],M=p[b++];try{E=S(E)}catch(k){M.call(this,k);break}}try{_=Kse.call(this,E)}catch(S){return Promise.reject(S)}for(b=0,w=v.length;b<w;)_=_.then(v[b++],v[b++]);return _}getUri(e){e=g4(this.defaults,e);const n=Y_e(e.baseURL,e.url);return G_e(n,e.params,e.paramsSerializer)}};Vt.forEach(["delete","get","head","options"],function(e){ZO.prototype[e]=function(n,i){return this.request(g4(i||{},{method:e,url:n,data:(i||{}).data}))}});Vt.forEach(["post","put","patch"],function(e){function n(i){return function(l,d,p){return this.request(g4(p||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:l,data:d}))}}ZO.prototype[e]=n(),ZO.prototype[e+"Form"]=n(!0)});var fR=ZO;class hQ{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(l){n=l});const i=this;this.promise.then(o=>{if(!i._listeners)return;let l=i._listeners.length;for(;l-- >0;)i._listeners[l](o);i._listeners=null}),this.promise.then=o=>{let l;const d=new Promise(p=>{i.subscribe(p),l=p}).then(o);return d.cancel=function(){i.unsubscribe(l)},d},e(function(l,d,p){i.reason||(i.reason=new lx(l,d,p),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new hQ(function(o){e=o}),cancel:e}}}var xtt=hQ;function Mtt(t){return function(n){return t.apply(null,n)}}function ktt(t){return Vt.isObject(t)&&t.isAxiosError===!0}const u$={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(u$).forEach(([t,e])=>{u$[e]=t});var Ctt=u$;function Z_e(t){const e=new fR(t),n=P_e(fR.prototype.request,e);return Vt.extend(n,fR.prototype,e,{allOwnKeys:!0}),Vt.extend(n,e,null,{allOwnKeys:!0}),n.create=function(o){return Z_e(g4(t,o))},n}const Xo=Z_e(fQ);Xo.Axios=fR;Xo.CanceledError=lx;Xo.CancelToken=xtt;Xo.isCancel=W_e;Xo.VERSION=X_e;Xo.toFormData=mN;Xo.AxiosError=Si;Xo.Cancel=Xo.CanceledError;Xo.all=function(e){return Promise.all(e)};Xo.spread=Mtt;Xo.isAxiosError=ktt;Xo.mergeConfig=g4;Xo.AxiosHeaders=Kh;Xo.formToJSON=t=>$_e(Vt.isHTMLForm(t)?new FormData(t):t);Xo.getAdapter=q_e.getAdapter;Xo.HttpStatusCode=Ctt;Xo.default=Xo;var Ptt=Xo,_3=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})},Rtt=X&&X.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fN,"__esModule",{value:!0});fN.SdtfHttpClient=void 0;const th=ys,jF=Rtt(Ptt),Dtt=aA;class Ott{constructor(e,n){this.binarySdtfParser=new Dtt.SdtfBinarySdtf,this.jsonContentUrl=e,this.basicHttpHeader={},n&&(this.basicHttpHeader.authorization="Bearer "+n)}calcUrl(e){if(!e)return this.jsonContentUrl;const n=this.jsonContentUrl.lastIndexOf("/");return`${this.jsonContentUrl.substring(0,n)}/${e}`}getJsonContent(){return _3(this,void 0,void 0,function*(){try{const{data:e,partial:n}=yield this.fetch(this.jsonContentUrl,0,this.binarySdtfParser.binaryHeaderLength);if(n){const[i,o]=this.binarySdtfParser.readHeader(e),l=yield this.fetch(this.jsonContentUrl,20,i);return[new DataView(l.data),void 0]}else return this.binarySdtfParser.parseBinarySdtf(e)}catch(e){throw new th.SdtfError(`Could not fetch sdTF JSON content: ${e.message}`)}})}getBinaryBuffer(e,n,i){return _3(this,void 0,void 0,function*(){try{const{data:o,partial:l}=yield this.fetch(this.calcUrl(e),n,i);return l?[new DataView(o),void 0]:[new DataView(o,n,i),o]}catch(o){throw new th.SdtfError(`Could not fetch sdTF binary buffer: ${o.message}`)}})}fetch(e,n,i){var o,l;return _3(this,void 0,void 0,function*(){let d;try{d=yield jF.default.head(e,{headers:this.basicHttpHeader})}catch(w){throw new th.SdtfError(w.message)}if(d.status>299)throw new th.SdtfError(`Received HTTP status ${d.status}.`);const p=!!((o=d.headers["Content-Encoding"])!==null&&o!==void 0?o:d.headers["content-encoding"]),g=(l=d.headers["Accept-Ranges"])!==null&&l!==void 0?l:d.headers["accept-ranges"],v=!p&&g==="bytes",_=v?yield this.fetchPartially(e,n,i):yield this.fetchFully(e);return{data:_ instanceof ArrayBuffer?_:Uint8Array.from(_).buffer,partial:v}})}fetchPartially(e,n,i){return _3(this,void 0,void 0,function*(){let o;try{o=yield jF.default.get(e,{headers:Object.assign(Object.assign({},this.basicHttpHeader),{range:`bytes=${n}-${n+i-1}`}),responseType:"arraybuffer"})}catch(l){throw new th.SdtfError(l.message)}if(o.status===416)throw new th.SdtfError("Invalid range requested.");if(o.status!==206)throw new th.SdtfError(`Received HTTP status ${o.status}.`);return o.data})}fetchFully(e){return _3(this,void 0,void 0,function*(){let n;try{n=yield jF.default.get(e,{headers:this.basicHttpHeader,responseType:"arraybuffer"})}catch(i){throw new th.SdtfError(i.message)}if(n.status!==200)throw new th.SdtfError(`Received HTTP status ${n.status}.`);return n.data})}}fN.SdtfHttpClient=Ott;var vN={},zf={};Object.defineProperty(zf,"__esModule",{value:!0});zf.SdtfBaseReadableComponent=void 0;const toe=pp;class Itt{constructor(){this.componentId=(0,toe.createComponentId)()}toDataObject(){return(0,toe.userComponentToDataObject)(this)}}zf.SdtfBaseReadableComponent=Itt;Object.defineProperty(vN,"__esModule",{value:!0});vN.SdtfReadableAsset=void 0;const Ntt=zf;class Ltt extends Ntt.SdtfBaseReadableComponent{constructor(e){super(),this.fileInfo=e,this.accessors=[],this.attributes=[],this.buffers=[],this.bufferViews=[],this.chunks=[],this.items=[],this.nodes=[],this.typeHints=[],this.additionalProperties={}}}vN.SdtfReadableAsset=Ltt;var _N={},ztt=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty(_N,"__esModule",{value:!0});_N.SdtfDataParser=void 0;class Btt{constructor(e){this.integrations=e}parseContent(e){return ztt(this,void 0,void 0,function*(){const n=this.integrations.find(i=>{var o,l;return i.isTypeHintSupported((l=(o=e.typeHint)===null||o===void 0?void 0:o.name)!==null&&l!==void 0?l:"")});return n?n.getReader().readComponent(e):e.value===void 0&&e.accessor?e.accessor.getContent():e.value})}}_N.SdtfDataParser=Btt;var yN={},bN={},Utt=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty(bN,"__esModule",{value:!0});bN.SdtfReadableAccessor=void 0;const Ftt=zf;class Vtt extends Ftt.SdtfBaseReadableComponent{constructor(e){super(),this.bufferView=e,this.additionalProperties={}}getContent(){return Utt(this,void 0,void 0,function*(){return{id:this.id,data:yield this.bufferView.getContent()}})}}bN.SdtfReadableAccessor=Vtt;var v4={},Gtt=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty(v4,"__esModule",{value:!0});v4.SdtfReadableAttribute=v4.SdtfReadableAttributes=void 0;const jtt=pp,Htt=zf;class $tt extends Htt.SdtfBaseReadableComponent{constructor(){super(...arguments),this.entries={}}toDataObject(){const e={};return Object.entries(this.entries).forEach(([n,i])=>e[n]=i.toDataObject()),e}}v4.SdtfReadableAttributes=$tt;class Wtt{constructor(e){this.dataParser=e}toDataObject(){const e=(0,jtt.userComponentToDataObject)(this);return delete e.dataParser,e}getContent(){return Gtt(this,void 0,void 0,function*(){return this.dataParser.parseContent(this)})}}v4.SdtfReadableAttribute=Wtt;var AN={},Ytt=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty(AN,"__esModule",{value:!0});AN.SdtfReadableBuffer=void 0;const qtt=ys,Xtt=zf;class Ztt extends Xtt.SdtfBaseReadableComponent{constructor(e,n){super(),this.byteLength=e,this.bufferCache=n,this.additionalProperties={}}toDataObject(){const e=super.toDataObject();return delete e.bufferCache,e}getContent(e,n){return Ytt(this,void 0,void 0,function*(){if(e+n>this.byteLength)throw new qtt.SdtfError("Unable to get content of buffer: Requested content is out of range.");return this.bufferCache.getBuffer(this.uri,e,n)})}}AN.SdtfReadableBuffer=Ztt;var wN={},Qtt=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty(wN,"__esModule",{value:!0});wN.SdtfReadableBufferView=void 0;const Ktt=zf;class Jtt extends Ktt.SdtfBaseReadableComponent{constructor(e,n,i,o){super(),this.buffer=e,this.byteLength=n,this.byteOffset=i,this.contentType=o,this.additionalProperties={}}getContent(){return Qtt(this,void 0,void 0,function*(){return this.buffer.getContent(this.byteOffset,this.byteLength)})}}wN.SdtfReadableBufferView=Jtt;var EN={},ent=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty(EN,"__esModule",{value:!0});EN.SdtfReadableDataItem=void 0;const tnt=zf;class nnt extends tnt.SdtfBaseReadableComponent{constructor(e){super(),this.dataParser=e,this.additionalProperties={}}toDataObject(){const e=super.toDataObject();return delete e.dataParser,e}getContent(){return ent(this,void 0,void 0,function*(){return this.dataParser.parseContent(this)})}}EN.SdtfReadableDataItem=nnt;var SN={};Object.defineProperty(SN,"__esModule",{value:!0});SN.SdtfReadableFileInfo=void 0;const rnt=zf;class int extends rnt.SdtfBaseReadableComponent{constructor(e){super(),this.version=e,this.additionalProperties={}}}SN.SdtfReadableFileInfo=int;var TN={};Object.defineProperty(TN,"__esModule",{value:!0});TN.SdtfReadableNode=void 0;const snt=zf;class ont extends snt.SdtfBaseReadableComponent{constructor(){super(...arguments),this.items=[],this.nodes=[],this.additionalProperties={}}}TN.SdtfReadableNode=ont;var xN={};Object.defineProperty(xN,"__esModule",{value:!0});xN.SdtfReadableTypeHint=void 0;const ant=zf;class lnt extends ant.SdtfBaseReadableComponent{constructor(e){super(),this.name=e,this.additionalProperties={}}}xN.SdtfReadableTypeHint=lnt;Object.defineProperty(yN,"__esModule",{value:!0});yN.SdtfReadableComponentFactory=void 0;const cnt=bN,noe=v4,unt=AN,fnt=wN,dnt=EN,hnt=SN,pnt=TN,mnt=xN;class gnt{constructor(e,n){this.bufferCache=e,this.dataParser=n}createAccessor(e,n){const i=new cnt.SdtfReadableAccessor(n[e.bufferView]);return i.bufferView=n[e.bufferView],i.id=e.id,i.additionalProperties=e.additionalProperties,i}createAttributes(e,n,i){const o=new noe.SdtfReadableAttributes;return Object.entries(e.entries).forEach(([l,d])=>{const p=new noe.SdtfReadableAttribute(this.dataParser);d.accessor!==void 0&&(p.accessor=n[d.accessor]),d.typeHint!==void 0&&(p.typeHint=i[d.typeHint]),p.value=d.value,o.entries[l]=p}),o}createBuffer(e){const n=new unt.SdtfReadableBuffer(e.byteLength,this.bufferCache);return n.uri=e.uri,n.additionalProperties=e.additionalProperties,n}createBufferView(e,n){const i=new fnt.SdtfReadableBufferView(n[e.buffer],e.byteLength,e.byteOffset,e.contentType);return i.contentEncoding=e.contentEncoding,i.name=e.name,i.additionalProperties=e.additionalProperties,i}createChunk(e,n,i,o){return this.createNode(e,n,i,o)}createDataItem(e,n,i,o){const l=new dnt.SdtfReadableDataItem(this.dataParser);return e.accessor!==void 0&&(l.accessor=n[e.accessor]),e.attributes!==void 0&&(l.attributes=i[e.attributes]),e.typeHint!==void 0&&(l.typeHint=o[e.typeHint]),l.value=e.value,l.additionalProperties=e.additionalProperties,l}createFileInfo(e){const n=new hnt.SdtfReadableFileInfo(e.version);return n.copyright=e.copyright,n.generator=e.generator,n.version=e.version,n.additionalProperties=e.additionalProperties,n}createNode(e,n,i,o){const l=new pnt.SdtfReadableNode;return e.attributes!==void 0&&(l.attributes=n[e.attributes]),l.items=e.items.map(d=>i[d]),l.name=e.name,e.typeHint!==void 0&&(l.typeHint=o[e.typeHint]),l.additionalProperties=e.additionalProperties,l}createTypeHint(e){const n=new mnt.SdtfReadableTypeHint(e.name);return n.additionalProperties=e.additionalProperties,n}setChunkReferences(e,n,i){n.forEach((o,l)=>{const d=e[l];d.nodes=o.nodes.map(p=>i[p])})}setNodeReferences(e,n){n.forEach((i,o)=>{const l=e[o];l.nodes=i.nodes.map(d=>e[d])})}}yN.SdtfReadableComponentFactory=gnt;var roe=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty(lN,"__esModule",{value:!0});lN.SdtfParser=void 0;const ioe=ys,vnt=hv,_nt=aA,ynt=lA,bnt=cN,Ant=uN,wnt=fN,Ent=iA,Snt=ox,Tnt=vN,xnt=_N,Mnt=yN;class knt{constructor(e){this.config=e,this.binarySdtfParser=new _nt.SdtfBinarySdtf,this.componentFactory=new Ent.SdtfComponentFactoryWrapper,this.fileUtils=new Snt.SdtfFileUtils}readFromFile(e){return roe(this,void 0,void 0,function*(){if(vnt.isBrowser)throw new ioe.SdtfError("Reading from file is only supported in Node.js.");let n,i;try{n=this.fileUtils.toAbsolutePath(e),i=yield this.fileUtils.readFile(n)}catch(g){throw new ioe.SdtfError(`Cannot read sdTF-file: ${g.message}`)}const[o,l]=this.binarySdtfParser.parseBinarySdtf(i),d=this.binarySdtfParser.readJsonContent(o),p=new bnt.SdtfFileBufferCache(n);return p.setBinaryBody(l),this.createSdtfAsset(d,p)})}readFromUrl(e){return roe(this,void 0,void 0,function*(){const n=new wnt.SdtfHttpClient(e,this.config.authToken),[i,o]=yield n.getJsonContent(),l=this.binarySdtfParser.readJsonContent(i),d=new Ant.SdtfHttpBufferCache(n);return d.setBinaryBody(o),this.createSdtfAsset(l,d)})}readFromBuffer(e){const[n,i]=this.binarySdtfParser.parseBinarySdtf(e),o=this.binarySdtfParser.readJsonContent(n),l=new ynt.SdtfBinaryBufferCache;return l.setBinaryBody(i),this.createSdtfAsset(o,l)}createSdtfAsset(e,n){const i=this.componentFactory.createFromJson(e),o=new Mnt.SdtfReadableComponentFactory(n,new xnt.SdtfDataParser(this.config.integrations));return this.buildReadableAsset(i,o)}buildReadableAsset(e,n){const i=n.createFileInfo(e.fileInfo),o=new Tnt.SdtfReadableAsset(i);return o.typeHints=e.typeHints.map(l=>n.createTypeHint(l)),o.buffers=e.buffers.map(l=>n.createBuffer(l)),o.bufferViews=e.bufferViews.map(l=>n.createBufferView(l,o.buffers)),o.accessors=e.accessors.map(l=>n.createAccessor(l,o.bufferViews)),o.attributes=e.attributes.map(l=>n.createAttributes(l,o.accessors,o.typeHints)),o.items=e.items.map(l=>n.createDataItem(l,o.accessors,o.attributes,o.typeHints)),o.nodes=e.nodes.map(l=>n.createNode(l,o.attributes,o.items,o.typeHints)),o.chunks=e.chunks.map(l=>n.createChunk(l,o.attributes,o.items,o.typeHints)),n.setChunkReferences(o.chunks,e.chunks,o.nodes),n.setNodeReferences(o.nodes,e.nodes),o}}lN.SdtfParser=knt;var MN={},Q_e={},K_e={};Object.defineProperty(K_e,"__esModule",{value:!0});var cx={};Object.defineProperty(cx,"__esModule",{value:!0});cx.SdtfGeometryTypeGuard=void 0;const tr=ys;class Cnt{static assertArc(e){if(!this.isArc(e))throw new tr.SdtfError("Assertion error: Value is not a geometry arc type.")}static isArc(e){return(0,tr.isDataObject)(e)&&this.isPlane(e.plane)&&typeof e.radius=="number"&&typeof e.angle=="number"}static assertBoundingBox(e){if(!this.isBoundingBox(e))throw new tr.SdtfError("Assertion error: Value is not a geometry bounding box type.")}static isBoundingBox(e){return(0,tr.isDataObject)(e)&&this.isPoint3d(e.min)&&this.isPoint3d(e.max)}static assertBox(e){if(!this.isBox(e))throw new tr.SdtfError("Assertion error: Value is not a geometry box type.")}static isBox(e){return(0,tr.isDataObject)(e)&&this.isPlane(e.plane)&&Array.isArray(e.extents)&&e.extents.length===3&&e.extents.every(n=>(0,tr.isNumberArray)(n)&&n.length===2)}static assertCircle(e){if(!this.isCircle(e))throw new tr.SdtfError("Assertion error: Value is not a geometry circle type.")}static isCircle(e){return(0,tr.isDataObject)(e)&&this.isPlane(e.plane)&&typeof e.radius=="number"}static assertComplex(e){if(!this.isComplex(e))throw new tr.SdtfError("Assertion error: Value is not a geometry complex type.")}static isComplex(e){return(0,tr.isNumberArray)(e)&&e.length===2}static assertCone(e){if(!this.isCone(e))throw new tr.SdtfError("Assertion error: Value is not a geometry cone type.")}static isCone(e){return(0,tr.isDataObject)(e)&&this.isPlane(e.plane)&&typeof e.radius=="number"&&typeof e.height=="number"}static assertCylinder(e){if(!this.isCylinder(e))throw new tr.SdtfError("Assertion error: Value is not a geometry cylinder type.")}static isCylinder(e){return(0,tr.isDataObject)(e)&&this.isCircle(e.baseCircle)&&typeof e.height=="number"}static assertEllipse(e){if(!this.isEllipse(e))throw new tr.SdtfError("Assertion error: Value is not a geometry ellipse type.")}static isEllipse(e){return(0,tr.isDataObject)(e)&&this.isPlane(e.plane)&&typeof e.r1=="number"&&typeof e.r2=="number"}static assertInterval(e){if(!this.isInterval(e))throw new tr.SdtfError("Assertion error: Value is not a geometry interval type.")}static isInterval(e){return(0,tr.isNumberArray)(e)&&e.length===2}static assertInterval2(e){if(!this.isInterval2(e))throw new tr.SdtfError("Assertion error: Value is not a geometry interval2 type.")}static isInterval2(e){return(0,tr.isDataObject)(e)&&this.isInterval(e.u)&&this.isInterval(e.v)}static assertLine(e){if(!this.isLine(e))throw new tr.SdtfError("Assertion error: Value is not a geometry line type.")}static isLine(e){return Array.isArray(e)&&e.length===2&&this.isPoint3d(e[0])&&this.isPoint3d(e[1])}static assertMatrix(e){if(!this.isMatrix(e))throw new tr.SdtfError("Assertion error: Value is not a geometry matrix type.")}static isMatrix(e){if(!Array.isArray(e))return!1;const n=e[0].length;return e.every(i=>(0,tr.isNumberArray)(i)&&i.length===n)}static assertPlane(e){if(!this.isPlane(e))throw new tr.SdtfError("Assertion error: Value is not a geometry plane type.")}static isPlane(e){return Array.isArray(e)&&e.length===3&&this.isPoint3d(e[0])&&this.isVector3d(e[1])&&this.isVector3d(e[2])}static assertPoint(e){if(!this.isPoint(e))throw new tr.SdtfError("Assertion error: Value is not a geometry point type.")}static isPoint(e){return(0,tr.isNumberArray)(e)&&(e.length===2||e.length===3||e.length===4)}static assertPoint2d(e){if(!this.isPoint2d(e))throw new tr.SdtfError("Assertion error: Value is not a geometry point type.")}static isPoint2d(e){return(0,tr.isNumberArray)(e)&&e.length===2}static assertPoint3d(e){if(!this.isPoint3d(e))throw new tr.SdtfError("Assertion error: Value is not a geometry point type.")}static isPoint3d(e){return(0,tr.isNumberArray)(e)&&e.length===3}static assertPoint4d(e){if(!this.isPoint4d(e))throw new tr.SdtfError("Assertion error: Value is not a geometry point type.")}static isPoint4d(e){return(0,tr.isNumberArray)(e)&&e.length===4}static assertPolyline(e){if(!this.isPolyline(e))throw new tr.SdtfError("Assertion error: Value is not a geometry polyline type.")}static isPolyline(e){return Array.isArray(e)&&e.every(n=>this.isPoint3d(n))}static assertRay(e){if(!this.isRay(e))throw new tr.SdtfError("Assertion error: Value is not a geometry ray type.")}static isRay(e){return Array.isArray(e)&&e.length===2&&this.isPoint3d(e[0])&&this.isVector3d(e[1])}static assertRectangle(e){if(!this.isRectangle(e))throw new tr.SdtfError("Assertion error: Value is not a geometry rectangle type.")}static isRectangle(e){return(0,tr.isDataObject)(e)&&this.isPlane(e.plane)&&this.isInterval(e.x)&&this.isInterval(e.y)}static assertSphere(e){if(!this.isSphere(e))throw new tr.SdtfError("Assertion error: Value is not a geometry sphere type.")}static isSphere(e){return(0,tr.isDataObject)(e)&&this.isPoint3d(e.center)&&typeof e.radius=="number"}static assertTorus(e){if(!this.isTorus(e))throw new tr.SdtfError("Assertion error: Value is not a geometry torus type.")}static isTorus(e){return(0,tr.isDataObject)(e)&&this.isPlane(e.plane)&&typeof e.majorRadius=="number"&&typeof e.minorRadius=="number"}static assertTransform(e){if(!this.isTransform(e))throw new tr.SdtfError("Assertion error: Value is not a geometry transform type.")}static isTransform(e){return Array.isArray(e)&&e.length===4&&e.every(n=>(0,tr.isNumberArray)(n)&&n.length===4)}static assertTransformList(e){if(!this.isTransformList(e))throw new tr.SdtfError("Assertion error: Value is not a geometry transform-list type.")}static isTransformList(e){return Array.isArray(e)&&e.every(n=>this.isTransform(n))}static assertVector(e){if(!this.isVector(e))throw new tr.SdtfError("Assertion error: Value is not a geometry vector type.")}static isVector(e){return(0,tr.isNumberArray)(e)&&(e.length===2||e.length===3||e.length===4)}static assertVector2d(e){if(!this.isVector2d(e))throw new tr.SdtfError("Assertion error: Value is not a geometry vector type.")}static isVector2d(e){return(0,tr.isNumberArray)(e)&&e.length===2}static assertVector3d(e){if(!this.isVector3d(e))throw new tr.SdtfError("Assertion error: Value is not a geometry vector type.")}static isVector3d(e){return(0,tr.isNumberArray)(e)&&e.length===3}static assertVector4d(e){if(!this.isVector4d(e))throw new tr.SdtfError("Assertion error: Value is not a geometry vector type.")}static isVector4d(e){return(0,tr.isNumberArray)(e)&&e.length===4}}cx.SdtfGeometryTypeGuard=Cnt;var kN={},CN={},ux={};Object.defineProperty(ux,"__esModule",{value:!0});ux.SdtfGeometryTypeValidator=void 0;const as=ys,gs=cx;class Pnt{validateComponent(e,n,i){switch(e){case as.SdtfGeometryTypeHintName.GEOMETRY_ARC:return gs.SdtfGeometryTypeGuard.isArc(n);case as.SdtfGeometryTypeHintName.GEOMETRY_BOUNDING_BOX:return gs.SdtfGeometryTypeGuard.isBoundingBox(n);case as.SdtfGeometryTypeHintName.GEOMETRY_BOX:return gs.SdtfGeometryTypeGuard.isBox(n);case as.SdtfGeometryTypeHintName.GEOMETRY_CIRCLE:return gs.SdtfGeometryTypeGuard.isCircle(n);case as.SdtfGeometryTypeHintName.GEOMETRY_COMPLEX:return gs.SdtfGeometryTypeGuard.isComplex(n);case as.SdtfGeometryTypeHintName.GEOMETRY_CONE:return gs.SdtfGeometryTypeGuard.isCone(n);case as.SdtfGeometryTypeHintName.GEOMETRY_CYLINDER:return gs.SdtfGeometryTypeGuard.isCylinder(n);case as.SdtfGeometryTypeHintName.GEOMETRY_ELLIPSE:return gs.SdtfGeometryTypeGuard.isEllipse(n);case as.SdtfGeometryTypeHintName.GEOMETRY_INTERVAL:return gs.SdtfGeometryTypeGuard.isInterval(n);case as.SdtfGeometryTypeHintName.GEOMETRY_INTERVAL2:return gs.SdtfGeometryTypeGuard.isInterval2(n);case as.SdtfGeometryTypeHintName.GEOMETRY_LINE:return gs.SdtfGeometryTypeGuard.isLine(n);case as.SdtfGeometryTypeHintName.GEOMETRY_MATRIX:return gs.SdtfGeometryTypeGuard.isMatrix(n);case as.SdtfGeometryTypeHintName.GEOMETRY_PLANE:return gs.SdtfGeometryTypeGuard.isPlane(n);case as.SdtfGeometryTypeHintName.GEOMETRY_POINT:return gs.SdtfGeometryTypeGuard.isPoint(n);case as.SdtfGeometryTypeHintName.GEOMETRY_POINT2D:return gs.SdtfGeometryTypeGuard.isPoint2d(n);case as.SdtfGeometryTypeHintName.GEOMETRY_POINT3D:return gs.SdtfGeometryTypeGuard.isPoint3d(n);case as.SdtfGeometryTypeHintName.GEOMETRY_POINT4D:return gs.SdtfGeometryTypeGuard.isPoint4d(n);case as.SdtfGeometryTypeHintName.GEOMETRY_POLYLINE:return gs.SdtfGeometryTypeGuard.isPolyline(n);case as.SdtfGeometryTypeHintName.GEOMETRY_RAY:return gs.SdtfGeometryTypeGuard.isRay(n);case as.SdtfGeometryTypeHintName.GEOMETRY_RECTANGLE:return gs.SdtfGeometryTypeGuard.isRectangle(n);case as.SdtfGeometryTypeHintName.GEOMETRY_SPHERE:return gs.SdtfGeometryTypeGuard.isSphere(n);case as.SdtfGeometryTypeHintName.GEOMETRY_TORUS:return gs.SdtfGeometryTypeGuard.isTorus(n);case as.SdtfGeometryTypeHintName.GEOMETRY_TRANSFORM:return gs.SdtfGeometryTypeGuard.isTransform(n);case as.SdtfGeometryTypeHintName.GEOMETRY_TRANSFORM_LIST:return gs.SdtfGeometryTypeGuard.isTransformList(n);case as.SdtfGeometryTypeHintName.GEOMETRY_VECTOR:return gs.SdtfGeometryTypeGuard.isVector(n);case as.SdtfGeometryTypeHintName.GEOMETRY_VECTOR2D:return gs.SdtfGeometryTypeGuard.isVector2d(n);case as.SdtfGeometryTypeHintName.GEOMETRY_VECTOR3D:return gs.SdtfGeometryTypeGuard.isVector3d(n);case as.SdtfGeometryTypeHintName.GEOMETRY_VECTOR4D:return gs.SdtfGeometryTypeGuard.isVector4d(n);default:(0,as.sdAssertUnreachable)(e)}}}ux.SdtfGeometryTypeValidator=Pnt;var Rnt=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty(CN,"__esModule",{value:!0});CN.SdtfGeometryTypeReader=void 0;const Xi=ys,Dnt=ux;class Ont{constructor(){this.validator=new Dnt.SdtfGeometryTypeValidator}readComponent(e){var n;return Rnt(this,void 0,void 0,function*(){const i=(n=e.typeHint)===null||n===void 0?void 0:n.name;if(!this.validator.validateComponent(i,e.value,e.accessor))throw new Xi.SdtfError(`Cannot read value of type '${i}': Invalid component.`);switch(i){case Xi.SdtfGeometryTypeHintName.GEOMETRY_ARC:case Xi.SdtfGeometryTypeHintName.GEOMETRY_BOUNDING_BOX:case Xi.SdtfGeometryTypeHintName.GEOMETRY_BOX:case Xi.SdtfGeometryTypeHintName.GEOMETRY_CIRCLE:case Xi.SdtfGeometryTypeHintName.GEOMETRY_COMPLEX:case Xi.SdtfGeometryTypeHintName.GEOMETRY_CONE:case Xi.SdtfGeometryTypeHintName.GEOMETRY_CYLINDER:case Xi.SdtfGeometryTypeHintName.GEOMETRY_ELLIPSE:case Xi.SdtfGeometryTypeHintName.GEOMETRY_INTERVAL:case Xi.SdtfGeometryTypeHintName.GEOMETRY_INTERVAL2:case Xi.SdtfGeometryTypeHintName.GEOMETRY_LINE:case Xi.SdtfGeometryTypeHintName.GEOMETRY_MATRIX:case Xi.SdtfGeometryTypeHintName.GEOMETRY_PLANE:case Xi.SdtfGeometryTypeHintName.GEOMETRY_POINT:case Xi.SdtfGeometryTypeHintName.GEOMETRY_POINT2D:case Xi.SdtfGeometryTypeHintName.GEOMETRY_POINT3D:case Xi.SdtfGeometryTypeHintName.GEOMETRY_POINT4D:case Xi.SdtfGeometryTypeHintName.GEOMETRY_POLYLINE:case Xi.SdtfGeometryTypeHintName.GEOMETRY_RAY:case Xi.SdtfGeometryTypeHintName.GEOMETRY_RECTANGLE:case Xi.SdtfGeometryTypeHintName.GEOMETRY_SPHERE:case Xi.SdtfGeometryTypeHintName.GEOMETRY_TORUS:case Xi.SdtfGeometryTypeHintName.GEOMETRY_TRANSFORM:case Xi.SdtfGeometryTypeHintName.GEOMETRY_TRANSFORM_LIST:case Xi.SdtfGeometryTypeHintName.GEOMETRY_VECTOR:case Xi.SdtfGeometryTypeHintName.GEOMETRY_VECTOR2D:case Xi.SdtfGeometryTypeHintName.GEOMETRY_VECTOR3D:case Xi.SdtfGeometryTypeHintName.GEOMETRY_VECTOR4D:return e.value;default:(0,Xi.sdAssertUnreachable)(i)}})}}CN.SdtfGeometryTypeReader=Ont;var PN={};Object.defineProperty(PN,"__esModule",{value:!0});PN.SdtfGeometryTypeWriter=void 0;const Zi=ys,Int=ux;class Nnt{constructor(e){this.factory=e,this.validator=new Int.SdtfGeometryTypeValidator}writeComponent(e){var n;const i=(n=e.typeHint)===null||n===void 0?void 0:n.name;switch(i){case Zi.SdtfGeometryTypeHintName.GEOMETRY_ARC:case Zi.SdtfGeometryTypeHintName.GEOMETRY_BOUNDING_BOX:case Zi.SdtfGeometryTypeHintName.GEOMETRY_BOX:case Zi.SdtfGeometryTypeHintName.GEOMETRY_CIRCLE:case Zi.SdtfGeometryTypeHintName.GEOMETRY_COMPLEX:case Zi.SdtfGeometryTypeHintName.GEOMETRY_CONE:case Zi.SdtfGeometryTypeHintName.GEOMETRY_CYLINDER:case Zi.SdtfGeometryTypeHintName.GEOMETRY_ELLIPSE:case Zi.SdtfGeometryTypeHintName.GEOMETRY_INTERVAL:case Zi.SdtfGeometryTypeHintName.GEOMETRY_INTERVAL2:case Zi.SdtfGeometryTypeHintName.GEOMETRY_LINE:case Zi.SdtfGeometryTypeHintName.GEOMETRY_MATRIX:case Zi.SdtfGeometryTypeHintName.GEOMETRY_PLANE:case Zi.SdtfGeometryTypeHintName.GEOMETRY_POINT:case Zi.SdtfGeometryTypeHintName.GEOMETRY_POINT2D:case Zi.SdtfGeometryTypeHintName.GEOMETRY_POINT3D:case Zi.SdtfGeometryTypeHintName.GEOMETRY_POINT4D:case Zi.SdtfGeometryTypeHintName.GEOMETRY_POLYLINE:case Zi.SdtfGeometryTypeHintName.GEOMETRY_RAY:case Zi.SdtfGeometryTypeHintName.GEOMETRY_RECTANGLE:case Zi.SdtfGeometryTypeHintName.GEOMETRY_SPHERE:case Zi.SdtfGeometryTypeHintName.GEOMETRY_TORUS:case Zi.SdtfGeometryTypeHintName.GEOMETRY_TRANSFORM:case Zi.SdtfGeometryTypeHintName.GEOMETRY_TRANSFORM_LIST:case Zi.SdtfGeometryTypeHintName.GEOMETRY_VECTOR:case Zi.SdtfGeometryTypeHintName.GEOMETRY_VECTOR2D:case Zi.SdtfGeometryTypeHintName.GEOMETRY_VECTOR3D:case Zi.SdtfGeometryTypeHintName.GEOMETRY_VECTOR4D:delete e.accessor;break;default:(0,Zi.sdAssertUnreachable)(i)}if(!this.validator.validateComponent(i,e.value,e.accessor))throw new Zi.SdtfError(`Cannot write component of type '${i}': Invalid component.`)}postProcessComponents(e){}}PN.SdtfGeometryTypeWriter=Nnt;var Lnt=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty(kN,"__esModule",{value:!0});kN.SdtfGeometryTypeIntegration=void 0;const soe=ys,znt=CN,Bnt=PN;class Unt{isTypeHintSupported(e){return(0,soe.enumValues)(soe.SdtfGeometryTypeHintName).includes(e)}init(){return Lnt(this,void 0,void 0,function*(){})}getReader(){return new znt.SdtfGeometryTypeReader}getWriter(e){return new Bnt.SdtfGeometryTypeWriter(e)}}kN.SdtfGeometryTypeIntegration=Unt;(function(t){var e=X&&X.__createBinding||(Object.create?function(i,o,l,d){d===void 0&&(d=l);var p=Object.getOwnPropertyDescriptor(o,l);(!p||("get"in p?!o.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return o[l]}}),Object.defineProperty(i,d,p)}:function(i,o,l,d){d===void 0&&(d=l),i[d]=o[l]}),n=X&&X.__exportStar||function(i,o){for(var l in i)l!=="default"&&!Object.prototype.hasOwnProperty.call(o,l)&&e(o,i,l)};Object.defineProperty(t,"__esModule",{value:!0}),n(K_e,t),n(cx,t),n(kN,t)})(Q_e);Object.defineProperty(MN,"__esModule",{value:!0});MN.SdtfConfig=void 0;const Fnt=Q_e,Vnt=q6;class Gnt{constructor(e){this.integrations=[new Vnt.SdtfPrimitiveTypeIntegration,new Fnt.SdtfGeometryTypeIntegration],(e==null?void 0:e.integrations)!==void 0&&(this.integrations=e.integrations),this.authToken=e==null?void 0:e.authToken}}MN.SdtfConfig=Gnt;var RN={},DN={},ON={};Object.defineProperty(ON,"__esModule",{value:!0});ON.SdtfGrasshopperSdtfBuilder=void 0;const y3=ys;class jnt{constructor(e){this.factory=e,this.asset=e.createAsset()}addChunkForListData(e,n,i){this.addChunkForTreeData(e,{branches:[n],paths:[[0]]},i)}addChunkForTreeData(e,n,i){const o=this.factory.createChunk(e);if(this.asset.chunks.push(o),i&&(o.attributes=i),n.branches.length!==n.paths.length)throw new y3.SdtfError("Invalid tree parameter: 'branches' and 'paths' of the grasshopper structure must have the same number of elements.");if(!n.paths.every(d=>(0,y3.isIntArray)(d)))throw new y3.SdtfError("Invalid tree parameter: 'paths' of the grasshopper structure must only consist of integer values.");if(!n.branches.every(d=>d.every(p=>{var g;return!!(!((g=p.typeHint)===null||g===void 0)&&g.name)})))throw new y3.SdtfError("Invalid tree parameter: All data items in 'tree.branches' must contain a type hint.");let l;for(let d=0;d<n.branches.length;d++){const p=n.branches[d],g=n.paths[d],v=this.factory.createNode();v.name="["+g.join(",")+"]",p.forEach(_=>{if(l||(l=_.typeHint.name),l!==_.typeHint.name)throw new y3.SdtfError("Invalid tree parameter: All data items in 'tree.branches' must have the same type hint.");v.items.push(_)}),o.nodes.push(v)}}build(){return this.asset}}ON.SdtfGrasshopperSdtfBuilder=jnt;Object.defineProperty(DN,"__esModule",{value:!0});DN.SdtfWriter=void 0;const Hnt=ON;class $nt{constructor(e){this.factory=e}createSimpleDataSdtf(e,n){const i=d=>{const p={};return d.forEach(g=>p[g.name]=[g.content,g.typeHint]),p},o=this.factory.createChunk(e);n.forEach(d=>{const p=this.factory.createDataItem(d.content,d.typeHint);d.attributes&&(p.attributes=this.factory.createAttributes(i(d.attributes))),o.items.push(p)});const l=this.factory.createAsset();return l.chunks.push(o),l}createGrasshopperSdtfBuilder(){return new Hnt.SdtfGrasshopperSdtfBuilder(this.factory)}}DN.SdtfWriter=$nt;Object.defineProperty(RN,"__esModule",{value:!0});RN.SdtfConstructor=void 0;const Wnt=aA,Ynt=iA,qnt=sx,Xnt=K6,Znt=DN;class Qnt{constructor(e){this.binarySdtf=new Wnt.SdtfBinarySdtf,this.factory=new Ynt.SdtfComponentFactoryWrapper,this.postProcessor=new Xnt.SdtfWriteableComponentPostProcessor(e)}createBinarySdtf(e){const n=this.postProcessor.optimize(e),i=this.factory.createFromWriteable(n);return this.binarySdtf.constructBinarySdtf(i)}getFactory(){return new qnt.SdtfWriteableComponentFactory}getWriter(){return new Znt.SdtfWriter(this.getFactory())}}RN.SdtfConstructor=Qnt;var J_e=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty(p4,"__esModule",{value:!0});p4.SdtfSdk=p4.create=void 0;const Knt=ys,Jnt=q9,ert=lN,trt=MN,nrt=RN;function rrt(t){return J_e(this,void 0,void 0,function*(){const e=new eye(t);return yield e.init(),e})}p4.create=rrt;class eye{constructor(e){this.config=new trt.SdtfConfig(e)}createParser(){return new ert.SdtfParser(this.config)}createConstructor(){return new nrt.SdtfConstructor(this.config.integrations)}createFormatter(){return new Jnt.SdtfFormatter(this.config.integrations)}init(){return J_e(this,void 0,void 0,function*(){const e=[];this.config.integrations.forEach(i=>e.push(i.init())),(yield Promise.allSettled(e)).forEach(i=>{if(i.status==="rejected"){const o=i.reason;throw new Knt.SdtfError(`Could not initialize all integrations: ${o}`)}})})}}p4.SdtfSdk=eye;var tye={};Object.defineProperty(tye,"__esModule",{value:!0});(function(t){var e=X&&X.__createBinding||(Object.create?function(o,l,d,p){p===void 0&&(p=d);var g=Object.getOwnPropertyDescriptor(l,d);(!g||("get"in g?!l.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return l[d]}}),Object.defineProperty(o,p,g)}:function(o,l,d,p){p===void 0&&(p=d),o[p]=l[d]}),n=X&&X.__exportStar||function(o,l){for(var d in o)d!=="default"&&!Object.prototype.hasOwnProperty.call(l,d)&&e(l,o,d)};Object.defineProperty(t,"__esModule",{value:!0}),t.SdtfSdk=t.create=void 0,n(ys,t);var i=p4;Object.defineProperty(t,"create",{enumerable:!0,get:function(){return i.create}}),Object.defineProperty(t,"SdtfSdk",{enumerable:!0,get:function(){return i.SdtfSdk}}),n(tye,t)})(KZ);var IN={},Qi=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},Ki=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},dR,hR,pR,mR,gR,vR,_R,yR,bR,AR,wR,ER,SR,TR,xR,MR,kR,CR,PR,RR,DR,OR,IR,NR,LR,zR,BR,UR,FR,VR;Object.defineProperty(IN,"__esModule",{value:!0});IN.MaterialStandardData=void 0;const irt=If,HF=zd;class pQ extends irt.AbstractMaterialData{constructor(e,n,i){super(e,n,i),dR.set(this,"#ffffff"),hR.set(this,1/0),pR.set(this,0),mR.set(this,void 0),gR.set(this,void 0),vR.set(this,0),_R.set(this,void 0),yR.set(this,void 0),bR.set(this,1),AR.set(this,0),wR.set(this,void 0),ER.set(this,1.5),SR.set(this,1),TR.set(this,void 0),xR.set(this,void 0),MR.set(this,1),kR.set(this,void 0),CR.set(this,0),PR.set(this,"#ffffff"),RR.set(this,void 0),DR.set(this,1),OR.set(this,void 0),IR.set(this,"#ffffff"),NR.set(this,void 0),LR.set(this,1),zR.set(this,void 0),BR.set(this,0),UR.set(this,void 0),FR.set(this,0),VR.set(this,void 0),e&&(e.metalness!==void 0&&(this.metalness=e.metalness),e.metalnessMap!==void 0&&(this.metalnessMap=e.metalnessMap),e.metalnessRoughnessMap!==void 0&&(this.metalnessRoughnessMap=e.metalnessRoughnessMap),e.roughness!==void 0&&(this.roughness=e.roughness),e.roughnessMap!==void 0&&(this.roughnessMap=e.roughnessMap),e.clearcoat!==void 0&&(this.clearcoat=e.clearcoat),e.clearcoatMap!==void 0&&(this.clearcoatMap=e.clearcoatMap),e.clearcoatNormalMap!==void 0&&(this.clearcoatNormalMap=e.clearcoatNormalMap),e.clearcoatRoughness!==void 0&&(this.clearcoatRoughness=e.clearcoatRoughness),e.clearcoatRoughnessMap!==void 0&&(this.clearcoatRoughnessMap=e.clearcoatRoughnessMap),e.displacementMap!==void 0&&(this.displacementMap=e.displacementMap),e.displacementScale!==void 0&&(this.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(this.displacementBias=e.displacementBias),e.ior!==void 0&&(this.ior=e.ior),e.transmission!==void 0&&(this.transmission=e.transmission),e.transmissionMap!==void 0&&(this.transmissionMap=e.transmissionMap),e.thickness!==void 0&&(this.thickness=e.thickness),e.thicknessMap!==void 0&&(this.thicknessMap=e.thicknessMap),e.attenuationDistance!==void 0&&(this.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&(this.attenuationColor=e.attenuationColor),e.sheen!==void 0&&(this.sheen=e.sheen),e.sheenColor!==void 0&&(this.sheenColor=e.sheenColor),e.sheenRoughness!==void 0&&(this.sheenRoughness=e.sheenRoughness),e.sheenColorMap!==void 0&&(this.sheenColorMap=e.sheenColorMap),e.sheenRoughnessMap!==void 0&&(this.sheenRoughnessMap=e.sheenRoughnessMap),e.specularColor!==void 0&&(this.specularColor=e.specularColor),e.specularColorMap!==void 0&&(this.specularColorMap=e.specularColorMap),e.specularIntensity!==void 0&&(this.specularIntensity=e.specularIntensity),e.specularIntensityMap!==void 0&&(this.specularIntensityMap=e.specularIntensityMap),e.envMap!==void 0&&(this.envMap=e.envMap))}get attenuationColor(){return Qi(this,dR,"f")}set attenuationColor(e){Ki(this,dR,e,"f")}get attenuationDistance(){return Qi(this,hR,"f")}set attenuationDistance(e){Ki(this,hR,e,"f")}get clearcoat(){return Qi(this,pR,"f")}set clearcoat(e){Ki(this,pR,e,"f")}get clearcoatMap(){return Qi(this,mR,"f")}set clearcoatMap(e){Ki(this,mR,e,"f")}get clearcoatNormalMap(){return Qi(this,gR,"f")}set clearcoatNormalMap(e){Ki(this,gR,e,"f")}get clearcoatRoughness(){return Qi(this,vR,"f")}set clearcoatRoughness(e){Ki(this,vR,e,"f")}get clearcoatRoughnessMap(){return Qi(this,_R,"f")}set clearcoatRoughnessMap(e){Ki(this,_R,e,"f")}get displacementMap(){return Qi(this,yR,"f")}set displacementMap(e){Ki(this,yR,e,"f")}get displacementScale(){return Qi(this,bR,"f")}set displacementScale(e){Ki(this,bR,e,"f")}get displacementBias(){return Qi(this,AR,"f")}set displacementBias(e){Ki(this,AR,e,"f")}get envMap(){return Qi(this,wR,"f")}set envMap(e){Ki(this,wR,e,"f")}get ior(){return Qi(this,ER,"f")}set ior(e){Ki(this,ER,e,"f")}get metalness(){return Qi(this,SR,"f")}set metalness(e){Ki(this,SR,e,"f")}get metalnessMap(){return Qi(this,TR,"f")}set metalnessMap(e){Ki(this,TR,e,"f")}get metalnessRoughnessMap(){return Qi(this,xR,"f")}set metalnessRoughnessMap(e){Ki(this,xR,e,"f")}get roughness(){return Qi(this,MR,"f")}set roughness(e){Ki(this,MR,e,"f")}get roughnessMap(){return Qi(this,kR,"f")}set roughnessMap(e){Ki(this,kR,e,"f")}get sheen(){return Qi(this,CR,"f")}set sheen(e){Ki(this,CR,e,"f")}get sheenColor(){return Qi(this,PR,"f")}set sheenColor(e){Ki(this,PR,e,"f")}get sheenColorMap(){return Qi(this,RR,"f")}set sheenColorMap(e){Ki(this,RR,e,"f")}get sheenRoughness(){return Qi(this,DR,"f")}set sheenRoughness(e){Ki(this,DR,e,"f")}get sheenRoughnessMap(){return Qi(this,OR,"f")}set sheenRoughnessMap(e){Ki(this,OR,e,"f")}get specularColor(){return Qi(this,IR,"f")}set specularColor(e){Ki(this,IR,e,"f")}get specularColorMap(){return Qi(this,NR,"f")}set specularColorMap(e){Ki(this,NR,e,"f")}get specularIntensity(){return Qi(this,LR,"f")}set specularIntensity(e){Ki(this,LR,e,"f")}get specularIntensityMap(){return Qi(this,zR,"f")}set specularIntensityMap(e){Ki(this,zR,e,"f")}get thickness(){return Qi(this,BR,"f")}set thickness(e){Ki(this,BR,e,"f")}get thicknessMap(){return Qi(this,UR,"f")}set thicknessMap(e){Ki(this,UR,e,"f")}get transmission(){return Qi(this,FR,"f")}set transmission(e){Ki(this,FR,e,"f")}get transmissionMap(){return Qi(this,VR,"f")}set transmissionMap(e){Ki(this,VR,e,"f")}reset(){this.alphaCutoff=0,this.alphaMap=void 0,this.alphaMode=HF.MATERIAL_ALPHA.OPAQUE,this.aoMap=void 0,this.aoMapIntensity=1,this.bumpMap=void 0,this.bumpScale=1,this.color="#ffffff",this.depthTest=void 0,this.depthWrite=void 0,this.emissiveMap=void 0,this.emissiveness="#000000",this.materialOutput=!1,this.map=void 0,this.normalMap=void 0,this.normalScale=1,this.opacity=1,this.shading=HF.MATERIAL_SHADING.SMOOTH,this.side=HF.MATERIAL_SIDE.DOUBLE,this.transparent=void 0,this.attenuationColor="#ffffff",this.attenuationDistance=1/0,this.clearcoat=0,this.clearcoatMap=void 0,this.clearcoatNormalMap=void 0,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=void 0,this.displacementMap=void 0,this.displacementScale=1,this.displacementBias=0,this.envMap=void 0,this.ior=1,this.metalness=0,this.metalnessMap=void 0,this.metalnessRoughnessMap=void 0,this.roughness=.5,this.roughnessMap=void 0,this.sheen=0,this.sheenColor="#ffffff",this.sheenColorMap=void 0,this.sheenRoughness=0,this.sheenRoughnessMap=void 0,this.specularColor="#ffffff",this.specularColorMap=void 0,this.specularIntensity=1,this.specularIntensityMap=void 0,this.thickness=.1,this.thicknessMap=void 0,this.transmission=0,this.transmissionMap=void 0}clone(){return new pQ({alphaMap:this.alphaMap,alphaCutoff:this.alphaCutoff,alphaMode:this.alphaMode,aoMap:this.aoMap,aoMapIntensity:this.aoMapIntensity,bumpMap:this.bumpMap,bumpScale:this.bumpScale,color:this.color,depthTest:this.depthTest,depthWrite:this.depthWrite,emissiveMap:this.emissiveMap,emissiveness:this.emissiveness,shading:this.shading,map:this.map,metalness:this.metalness,metalnessMap:this.metalnessMap,metalnessRoughnessMap:this.metalnessRoughnessMap,name:this.name,normalMap:this.normalMap,normalScale:this.normalScale,opacity:this.opacity,roughness:this.roughness,roughnessMap:this.roughnessMap,side:this.side,transparent:this.transparent,clearcoat:this.clearcoat,clearcoatMap:this.clearcoatMap,clearcoatNormalMap:this.clearcoatNormalMap,clearcoatRoughness:this.clearcoatRoughness,clearcoatRoughnessMap:this.clearcoatRoughnessMap,displacementMap:this.displacementMap,displacementScale:this.displacementScale,displacementBias:this.displacementBias,envMap:this.envMap,ior:this.ior,transmission:this.transmission,transmissionMap:this.transmissionMap,thickness:this.thickness,thicknessMap:this.thicknessMap,attenuationDistance:this.attenuationDistance,attenuationColor:this.attenuationColor,sheen:this.sheen,sheenColor:this.sheenColor,sheenColorMap:this.sheenColorMap,sheenRoughness:this.sheenRoughness,sheenRoughnessMap:this.sheenRoughnessMap,specularColor:this.specularColor,specularColorMap:this.specularColorMap,specularIntensity:this.specularIntensity,specularIntensityMap:this.specularIntensityMap},this.id,this.version)}copy(e){this.alphaCutoff=e.alphaCutoff,this.alphaMap=e.alphaMap,this.alphaMode=e.alphaMode,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.color=e.color,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.emissiveMap=e.emissiveMap,this.emissiveness=e.emissiveness,this.materialOutput=e.materialOutput,this.map=e.map,this.normalMap=e.normalMap,this.normalScale=e.normalScale,this.opacity=e.opacity,this.shading=e.shading,this.side=e.side,this.transparent=e.transparent,this.attenuationColor=e.attenuationColor,this.attenuationDistance=e.attenuationDistance,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.envMap=e.envMap,this.ior=e.ior,this.metalness=e.metalness,this.metalnessMap=e.metalnessMap,this.metalnessRoughnessMap=e.metalnessRoughnessMap,this.roughness=e.roughness,this.roughnessMap=e.roughnessMap,this.sheen=e.sheen,this.sheenColor=e.sheenColor,this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.specularColor=e.specularColor,this.specularColorMap=e.specularColorMap,this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap}}IN.MaterialStandardData=pQ;dR=new WeakMap,hR=new WeakMap,pR=new WeakMap,mR=new WeakMap,gR=new WeakMap,vR=new WeakMap,_R=new WeakMap,yR=new WeakMap,bR=new WeakMap,AR=new WeakMap,wR=new WeakMap,ER=new WeakMap,SR=new WeakMap,TR=new WeakMap,xR=new WeakMap,MR=new WeakMap,kR=new WeakMap,CR=new WeakMap,PR=new WeakMap,RR=new WeakMap,DR=new WeakMap,OR=new WeakMap,IR=new WeakMap,NR=new WeakMap,LR=new WeakMap,zR=new WeakMap,BR=new WeakMap,UR=new WeakMap,FR=new WeakMap,VR=new WeakMap;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.PARAMETER_VISUALIZATION=t.PARAMETER_TYPE=t.SdtfPrimitiveTypeGuard=t.SDTF_TYPEHINT=t.SDTFItemData=t.SDTFAttributeData=t.SDTFAttributesData=t.SDTFOverviewData=t.TASK_TYPE=t.BoneData=t.CustomData=t.HTMLElementAnchorData=t.HTMLElementAnchorImageData=t.HTMLElementAnchorTextData=t.HTMLElementAnchorCustomData=t.PRIMITIVE_MODE=t.MaterialVariantsData=t.PrimitiveData=t.AttributeData=t.GeometryData=t.AnimationData=t.TEXTURE_FILTERING=t.TEXTURE_WRAPPING=t.MATERIAL_TYPE=t.MATERIAL_SHADING=t.MATERIAL_ALPHA=t.MATERIAL_SIDE=t.MapData=t.MaterialBasicLineData=t.MaterialMultiPointData=t.MaterialPointData=t.MaterialGemData=t.MaterialSpecularGlossinessData=t.MaterialShadowData=t.MaterialUnlitData=t.AbstractMaterialData=t.MaterialStandardData=void 0;const e=If;Object.defineProperty(t,"AbstractMaterialData",{enumerable:!0,get:function(){return e.AbstractMaterialData}});const n=P9;Object.defineProperty(t,"AnimationData",{enumerable:!0,get:function(){return n.AnimationData}});const i=Qh;Object.defineProperty(t,"AttributeData",{enumerable:!0,get:function(){return i.AttributeData}}),Object.defineProperty(t,"GeometryData",{enumerable:!0,get:function(){return i.GeometryData}}),Object.defineProperty(t,"PrimitiveData",{enumerable:!0,get:function(){return i.PrimitiveData}});const o=R9;Object.defineProperty(t,"BoneData",{enumerable:!0,get:function(){return o.BoneData}});const l=Ive;Object.defineProperty(t,"PARAMETER_TYPE",{enumerable:!0,get:function(){return l.PARAMETER_TYPE}}),Object.defineProperty(t,"PARAMETER_VISUALIZATION",{enumerable:!0,get:function(){return l.PARAMETER_VISUALIZATION}});const d=D9;Object.defineProperty(t,"CustomData",{enumerable:!0,get:function(){return d.CustomData}});const p=Ad;Object.defineProperty(t,"HTMLElementAnchorCustomData",{enumerable:!0,get:function(){return p.HTMLElementAnchorCustomData}}),Object.defineProperty(t,"HTMLElementAnchorData",{enumerable:!0,get:function(){return p.HTMLElementAnchorData}}),Object.defineProperty(t,"HTMLElementAnchorImageData",{enumerable:!0,get:function(){return p.HTMLElementAnchorImageData}}),Object.defineProperty(t,"HTMLElementAnchorTextData",{enumerable:!0,get:function(){return p.HTMLElementAnchorTextData}});const g=SZ;Object.defineProperty(t,"PRIMITIVE_MODE",{enumerable:!0,get:function(){return g.PRIMITIVE_MODE}});const v=NZ;Object.defineProperty(t,"TEXTURE_FILTERING",{enumerable:!0,get:function(){return v.TEXTURE_FILTERING}}),Object.defineProperty(t,"TEXTURE_WRAPPING",{enumerable:!0,get:function(){return v.TEXTURE_WRAPPING}});const _=zd;Object.defineProperty(t,"MATERIAL_ALPHA",{enumerable:!0,get:function(){return _.MATERIAL_ALPHA}}),Object.defineProperty(t,"MATERIAL_SHADING",{enumerable:!0,get:function(){return _.MATERIAL_SHADING}}),Object.defineProperty(t,"MATERIAL_SIDE",{enumerable:!0,get:function(){return _.MATERIAL_SIDE}}),Object.defineProperty(t,"MATERIAL_TYPE",{enumerable:!0,get:function(){return _.MATERIAL_TYPE}});const b=Nve;Object.defineProperty(t,"TASK_TYPE",{enumerable:!0,get:function(){return b.TASK_TYPE}});const w=I9;Object.defineProperty(t,"MapData",{enumerable:!0,get:function(){return w.MapData}});const E=N9;Object.defineProperty(t,"MaterialBasicLineData",{enumerable:!0,get:function(){return E.MaterialBasicLineData}});const S=L9;Object.defineProperty(t,"MaterialGemData",{enumerable:!0,get:function(){return S.MaterialGemData}});const M=z9;Object.defineProperty(t,"MaterialMultiPointData",{enumerable:!0,get:function(){return M.MaterialMultiPointData}});const k=B9;Object.defineProperty(t,"MaterialPointData",{enumerable:!0,get:function(){return k.MaterialPointData}});const x=U9;Object.defineProperty(t,"MaterialShadowData",{enumerable:!0,get:function(){return x.MaterialShadowData}});const C=F9;Object.defineProperty(t,"MaterialSpecularGlossinessData",{enumerable:!0,get:function(){return C.MaterialSpecularGlossinessData}});const P=V9;Object.defineProperty(t,"MaterialUnlitData",{enumerable:!0,get:function(){return P.MaterialUnlitData}});const O=G9;Object.defineProperty(t,"MaterialVariantsData",{enumerable:!0,get:function(){return O.MaterialVariantsData}});const L=h4;Object.defineProperty(t,"SDTFAttributeData",{enumerable:!0,get:function(){return L.SDTFAttributeData}}),Object.defineProperty(t,"SDTFAttributesData",{enumerable:!0,get:function(){return L.SDTFAttributesData}});const B=j9;Object.defineProperty(t,"SDTFItemData",{enumerable:!0,get:function(){return B.SDTFItemData}});const V=H9;Object.defineProperty(t,"SDTFOverviewData",{enumerable:!0,get:function(){return V.SDTFOverviewData}});const G=q6;Object.defineProperty(t,"SdtfPrimitiveTypeGuard",{enumerable:!0,get:function(){return G.SdtfPrimitiveTypeGuard}});const j=KZ;Object.defineProperty(t,"SDTF_TYPEHINT",{enumerable:!0,get:function(){return j.SdtfTypeHintName}});const F=IN;Object.defineProperty(t,"MaterialStandardData",{enumerable:!0,get:function(){return F.MaterialStandardData}})})(Gi);var NN={},qf=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty(NN,"__esModule",{value:!0});NN.SDGTFLoader=void 0;const vc=dr,ooe=Mn,aoe=Cm,Wr=Gi,Kt=Cr;class srt{constructor(){this.BINARY_EXTENSION_HEADER_LENGTH=20,this._logger=ooe.Logger.instance}load(e,n){return qf(this,void 0,void 0,function*(){if(n<e.byteLength){const i=new DataView(e,n,this.BINARY_EXTENSION_HEADER_LENGTH+1),o={magic:String.fromCharCode(i.getUint8(0))+String.fromCharCode(i.getUint8(1))+String.fromCharCode(i.getUint8(2))+String.fromCharCode(i.getUint8(3))+String.fromCharCode(i.getUint8(4)),version:i.getUint32(5,!0),length:i.getUint32(9,!0),contentLength:i.getUint32(13,!0),contentFormat:i.getUint32(17,!0)};if(o.magic!="sdgTF")throw new ooe.ShapeDiverViewerDataProcessingError("SDGTFLoader.load: Invalid data: sdgTF magic wrong.");const l=new DataView(e,n+this.BINARY_EXTENSION_HEADER_LENGTH+1,o.contentLength),d=new TextDecoder().decode(l);this._content=JSON.parse(d),this._body=e.slice(n+this.BINARY_EXTENSION_HEADER_LENGTH+1+o.contentLength,n+o.length)}else return new vc.TreeNode;return yield this.loadScene()})}convertToIndicesArray(e){const n=Math.max(0,...e);return n<255?new Uint8Array(e):n<65535?new Uint16Array(e):new Uint32Array(e)}loadAccessor(e){return qf(this,void 0,void 0,function*(){if(!this._content.accessors[e])throw new Error("Accessor not available.");const n=this._content.accessors[e],i=this._body,o=aoe.ACCESSORTYPE_V1[n.type],l=aoe.ACCESSORCOMPONENTTYPE_V1[n.componentType],d=l.BYTES_PER_ELEMENT,p=d*o,g=n.byteOffset||0;return new Wr.AttributeData(new l(i,g,o*n.count),o,p,g,d,!1,n.count)})}loadArcs(){return qf(this,void 0,void 0,function*(){if(!this._content.arcs)throw new Error("Arcs not available.");const e=this._content.arcs,n=new vc.TreeNode("arcs"),i=yield this.loadAccessor(e.attributes.ARCS),o=i.array.length/i.itemSize;for(let l=0;l<o;++l){const d=new vc.TreeNode("arc_"+l),p=l*12,g=Kt.vec3.fromValues(i.array[p+0],i.array[p+1],i.array[p+2]),v=Kt.vec3.fromValues(i.array[p+3],i.array[p+4],i.array[p+5]),_=Kt.vec3.fromValues(i.array[p+6],i.array[p+7],i.array[p+8]),b=i.array[p+9],w=i.array[p+10],E=i.array[p+11],S=Kt.vec3.cross(Kt.vec3.create(),v,_);if(b<=0){this._logger.warn("SDGTFLoader.loadArcs: Arc radius is <= 0.");continue}const M=[],k=B=>{const V=Math.PI*2;let G=E-w;const j=Math.abs(G)<Number.EPSILON;for(;G<0;)G+=V;for(;G>V;)G-=V;G=G<Number.EPSILON?j?0:V:G;const F=w+B*G;let q=b*Math.cos(F),fe=b*Math.sin(F);M.push(q,fe,0)},x=Math.max(3,Math.round(50*((E-w)/2*Math.PI)));for(let B=0;B<=x;B++)k(B/x);const C=new Float32Array(M),P={};P.POSITION=new Wr.AttributeData(C,3,0,0,0,!1,C.length/3);const O=new Wr.GeometryData(new Wr.PrimitiveData(P,null),Wr.PRIMITIVE_MODE.LINE_STRIP);d.data.push(O),d.addTransformation({id:"arc_"+l+"_translation",matrix:Kt.mat4.translate(Kt.mat4.create(),Kt.mat4.create(),Kt.vec3.fromValues(g[0],g[1],g[2]))});const L=Kt.mat4.transpose(Kt.mat4.create(),Kt.mat4.fromValues(v[0],_[0],S[0],0,v[1],_[1],S[1],0,v[2],_[2],S[2],0,0,0,0,1));d.addTransformation({id:"arc_"+l+"_rotation",matrix:L}),n.addChild(d)}return n})}loadBeziercurve(e){return qf(this,void 0,void 0,function*(){if(!this._content.beziercurves[e])throw new Error("Beziercurve not available.");const n=this._content.beziercurves[e],i=new vc.TreeNode(e),o=yield this.loadAccessor(n.attributes.CONTROLPOINTS),l=[];for(let P=0;P<o.array.length;P+=3)l.push(Kt.vec4.fromValues(o.array[P],o.array[P+1],o.array[P+2],1));const d=yield this.loadAccessor(n.attributes.KNOTS),p=[d.array[0]];for(let P=0;P<d.array.length;P++)p.push(d.array[P]);p.push(d.array[d.array.length-1]);const g=n.degree,v=P=>{const O=p.length-g-1;if(P>=p[O])return O-1;if(P<=p[g])return g;let L=g,B=O,V=Math.floor((L+B)/2);for(;P<p[V]||P>=p[V+1];)P<p[V]?B=V:L=V,V=Math.floor((L+B)/2);return V},_=(P,O)=>{const L=[],B=[],V=[];L[0]=1;for(let G=1;G<=g;++G){B[G]=O-p[P+1-G],V[G]=p[P+G]-O;let j=0;for(let F=0;F<G;++F){const q=V[F+1],fe=B[G-F],ue=L[F]/(q+fe);L[F]=j+q*ue,j=fe*ue}L[G]=j}return L},b=P=>{const O=v(P),L=_(O,P),B=Kt.vec4.create();for(let V=0;V<=g;++V){const G=l[O-g+V],j=L[V],F=G[3]*j;Kt.vec4.add(B,B,Kt.vec4.fromValues(G[0]*F,G[1]*F,G[2]*F,G[3]*j))}return B},w=[],E=P=>{const O=p[0]+P*(p[p.length-1]-p[0]);let L=b(O);L[3]!==1&&(L=Kt.vec4.divide(Kt.vec4.create(),L,Kt.vec4.fromValues(L[3],L[3],L[3],L[3]))),w.push(L[0],L[1],L[2])};let S=0;for(let P=1;P<l.length;P++)S+=Kt.vec3.distance(Kt.vec3.fromValues(l[P-1][0],l[P-1][1],l[P-1][2]),Kt.vec3.fromValues(l[P][0],l[P][1],l[P][2]));const M=Math.min(100,Math.max(25,Math.floor(S/.1)));for(let P=0;P<=M;P++)E(P/M);const k=new Float32Array(w),x={};x.POSITION=new Wr.AttributeData(k,3,0,0,0,!1,k.length/3);const C=new Wr.GeometryData(new Wr.PrimitiveData(x,null),Wr.PRIMITIVE_MODE.LINE_STRIP);return i.data.push(C),i})}loadCircles(){return qf(this,void 0,void 0,function*(){if(!this._content.circles)throw new Error("Circles not available.");const e=this._content.circles,n=new vc.TreeNode("circles"),i=yield this.loadAccessor(e.attributes.CIRCLES),o=i.array.length/i.itemSize;for(let l=0;l<o;l++){const d=new vc.TreeNode("circle_"+l),p=l*10,g=Kt.vec3.fromValues(i.array[p+0],i.array[p+1],i.array[p+2]),v=Kt.vec3.fromValues(i.array[p+3],i.array[p+4],i.array[p+5]),_=Kt.vec3.fromValues(i.array[p+6],i.array[p+7],i.array[p+8]),b=i.array[p+9],w=Kt.vec3.cross(Kt.vec3.create(),v,_);if(b<=0){this._logger.warn("SDGTFLoader.loadCircles: Circle radius is <= 0.");continue}const E=[],S=O=>{const L=Math.PI*2;let B=2*Math.PI-0;const V=Math.abs(B)<Number.EPSILON;for(;B<0;)B+=L;for(;B>L;)B-=L;B=B<Number.EPSILON?V?0:L:B;const G=0+O*B;let j=b*Math.cos(G),F=b*Math.sin(G);E.push(j,F,0)},M=50;for(let O=0;O<=M;O++)S(O/M);const k=new Float32Array(E),x={};x.POSITION=new Wr.AttributeData(k,3,0,0,0,!1,k.length/3);const C=new Wr.GeometryData(new Wr.PrimitiveData(x,null),Wr.PRIMITIVE_MODE.LINE_STRIP);d.data.push(C),d.addTransformation({id:"circle_"+l+"_translation",matrix:Kt.mat4.translate(Kt.mat4.create(),Kt.mat4.create(),Kt.vec3.fromValues(g[0],g[1],g[2]))});const P=Kt.mat4.transpose(Kt.mat4.create(),Kt.mat4.fromValues(v[0],_[0],w[0],0,v[1],_[1],w[1],0,v[2],_[2],w[2],0,0,0,0,1));d.addTransformation({id:"circle_"+l+"_rotation",matrix:P}),n.addChild(d)}return n})}loadCylinders(){return qf(this,void 0,void 0,function*(){if(!this._content.cylinders)throw new Error("Cylinders not available.");const e=this._content.cylinders,n=new vc.TreeNode("cylinders"),i=yield this.loadAccessor(e.attributes.CYLINDERS),o=i.array.length/i.itemSize;for(let l=0;l<o;l++){const d=new vc.TreeNode("cylinder_"+l),p=l*7,g=Kt.vec3.fromValues(i.array[p+0],i.array[p+1],i.array[p+2]),v=Kt.vec3.fromValues(i.array[p+3],i.array[p+4],i.array[p+5]),_=i.array[p+6],b=Kt.vec3.sub(Kt.vec3.create(),g,v),w=Math.abs(Kt.vec3.dot(b,Kt.vec3.fromValues(1,0,0))),E=Math.abs(Kt.vec3.dot(b,Kt.vec3.fromValues(0,1,0)));let S;w<E?S=Kt.vec3.cross(Kt.vec3.create(),b,Kt.vec3.fromValues(1,0,0)):S=Kt.vec3.cross(Kt.vec3.create(),b,Kt.vec3.fromValues(0,1,0));const M=Kt.vec3.cross(Kt.vec3.create(),b,S);if(Kt.vec3.normalize(b,b),Kt.vec3.normalize(S,S),Kt.vec3.normalize(M,M),_<=0){this._logger.warn("SDGTFLoader.loadCylinders: Cylinder radius is <= 0.");continue}const k=[],x=[],C=[],P=[],O=Kt.vec3.distance(g,v),L=O/2,B=0,V=Math.PI*2;let G=0;const j=[],F=1,q=50,fe=Kt.vec3.create(),ue=Kt.vec3.create(),J=0;for(let ye=0;ye<=F;ye++){const pe=[],oe=ye/F,Ce=_;for(let it=0;it<=q;it++){const Se=it/q,Oe=Se*V+B,ct=Math.sin(Oe),_t=Math.cos(Oe);ue[0]=Ce*ct,ue[1]=-oe*O+L,ue[2]=Ce*_t,x.push(ue[0],ue[1],ue[2]),Kt.vec3.normalize(fe,Kt.vec3.fromValues(ct,J,_t)),C.push(fe[0],fe[1],fe[2]),P.push(Se,1-oe),pe.push(G++)}j.push(pe)}for(let ye=0;ye<q;ye++)for(let pe=0;pe<F;pe++){const oe=j[pe][ye],Ce=j[pe+1][ye],it=j[pe+1][ye+1],Se=j[pe][ye+1];k.push(oe,Ce,Se),k.push(Ce,it,Se)}const le={};le.POSITION=new Wr.AttributeData(new Float32Array(x),3,0,0,0,!1,x.length/3),le.NORMAL=new Wr.AttributeData(new Float32Array(C),3,0,0,0,!1,C.length/3),le.TEXCOORD_0=new Wr.AttributeData(new Float32Array(P),2,0,0,0,!1,P.length/2);const me=new Wr.GeometryData(new Wr.PrimitiveData(le,new Wr.AttributeData(this.convertToIndicesArray(k),1,0,0,0,!1,k.length)),Wr.PRIMITIVE_MODE.TRIANGLES);d.data.push(me),d.addTransformation({id:"cylinder_"+l+"_translation",matrix:Kt.mat4.translate(Kt.mat4.create(),Kt.mat4.create(),v)});const be=Kt.mat4.transpose(Kt.mat4.create(),Kt.mat4.fromValues(S[0],M[0],b[0],0,S[1],M[1],b[1],0,S[2],M[2],b[2],0,0,0,0,1));d.addTransformation({id:"cylinder_"+l+"_rotation",matrix:be}),d.addTransformation({id:"cylinder_"+l+"_rotation2",matrix:Kt.mat4.rotateX(Kt.mat4.create(),Kt.mat4.create(),.5*Math.PI)}),d.addTransformation({id:"cylinder_"+l+"_translation2",matrix:Kt.mat4.translate(Kt.mat4.create(),Kt.mat4.create(),Kt.vec3.fromValues(0,0,.5*Kt.vec3.distance(g,v)))}),n.addChild(d)}return n})}loadSpheres(){return qf(this,void 0,void 0,function*(){if(!this._content.spheres)throw new Error("Spheres not available.");const e=this._content.spheres,n=new vc.TreeNode("spheres"),i=yield this.loadAccessor(e.attributes.SPHERES),o=i.array.length/i.itemSize;for(let l=0;l<o;l++){const d=new vc.TreeNode("sphere_"+l),p=l*4,g=Kt.vec3.fromValues(i.array[p+0],i.array[p+1],i.array[p+2]),v=i.array[p+3];if(v<=0){this._logger.warn("SDGTFLoader.loadSpheres: Sphere radius is <= 0.");continue}const _=[],b=[],w=[],E=[],S=[],M=15,k=15,x=0,C=Math.PI*2,P=0,O=Math.PI,L=Math.min(P+O,Math.PI);let B=0;for(let j=0;j<=M;j++){const F=[],q=j/M;let fe=0;j==0&&P==0?fe=.5/k:j==M&&L==Math.PI&&(fe=-.5/k);for(let ue=0;ue<=k;ue++){const J=ue/k,le=Kt.vec3.fromValues(-v*Math.cos(x+J*C)*Math.sin(P+q*O),v*Math.cos(P+q*O),v*Math.sin(x+J*C)*Math.sin(P+q*O));b.push(le[0],le[1],le[2]);const me=Kt.vec3.normalize(Kt.vec3.create(),le);w.push(me[0],me[1],me[2]),E.push(J+fe,1-q),F.push(B++)}S.push(F)}for(let j=0;j<M;j++)for(let F=0;F<k;F++){const q=S[j][F+1],fe=S[j][F],ue=S[j+1][F],J=S[j+1][F+1];(j!==0||P>0)&&_.push(q,fe,J),(j!==M-1||L<Math.PI)&&_.push(fe,ue,J)}const V={};V.POSITION=new Wr.AttributeData(new Float32Array(b),3,0,0,0,!1,b.length/3),V.NORMAL=new Wr.AttributeData(new Float32Array(w),3,0,0,0,!1,w.length/3),V.TEXCOORD_0=new Wr.AttributeData(new Float32Array(E),2,0,0,0,!1,E.length/2);const G=new Wr.GeometryData(new Wr.PrimitiveData(V,new Wr.AttributeData(this.convertToIndicesArray(_),1,0,0,0,!1,_.length)),Wr.PRIMITIVE_MODE.TRIANGLES);d.data.push(G),d.addTransformation({id:"sphere_"+l+"_translation",matrix:Kt.mat4.translate(Kt.mat4.create(),Kt.mat4.create(),g)}),n.addChild(d)}return n})}loadPoint(e){return qf(this,void 0,void 0,function*(){if(!this._content.points[e])throw new Error("Point not available.");const n=this._content.points[e],i=new vc.TreeNode(e),o={},l=yield this.loadAccessor(n.attributes.POINTS);o.POSITION=new Wr.AttributeData(l.array,3,l.itemBytes,l.byteOffset,l.elementBytes,l.normalized,l.count);const d=new Wr.GeometryData(new Wr.PrimitiveData(o,null),Wr.PRIMITIVE_MODE.POINTS);return i.data.push(d),i})}loadPolyline(e){return qf(this,void 0,void 0,function*(){if(!this._content.polylines[e])throw new Error("Polyline not available.");const n=this._content.polylines[e],i=new vc.TreeNode(e),o={},l=yield this.loadAccessor(n.attributes.VERTICES);o.POSITION=new Wr.AttributeData(l.array,3,l.itemBytes,l.byteOffset,l.elementBytes,l.normalized,l.count);const d=new Wr.GeometryData(new Wr.PrimitiveData(o,null),Wr.PRIMITIVE_MODE.LINE_STRIP);return i.data.push(d),i})}loadSurfacepatch(e){return qf(this,void 0,void 0,function*(){if(!this._content.surfacepatches[e])throw new Error("Surfacepatch not available.");const n=this._content.surfacepatches[e],i=new vc.TreeNode(e),o=n.controlPointCountU,l=n.controlPointCountV,d=yield this.loadAccessor(n.attributes.CONTROLPOINTS),p=[];let g=0;for(let G=0;G<o;G++){let j=[];for(let F=0;F<l;F++)j.push(Kt.vec4.fromValues(d.array[g*3],d.array[g*3+1],d.array[g*3+2],1)),g++;p.push(j)}const v=yield this.loadAccessor(n.attributes.KNOTSU),_=[v.array[0]];for(let G=0;G<v.array.length;G++)_.push(v.array[G]);_.push(v.array[v.array.length-1]);const b=yield this.loadAccessor(n.attributes.KNOTSV),w=[b.array[0]];for(let G=0;G<b.array.length;G++)w.push(b.array[G]);w.push(b.array[b.array.length-1]);const E=n.degreeU,S=n.degreeV,M=(G,j,F)=>{const q=G.length-j-1;if(F>=G[q])return q-1;if(F<=G[j])return j;let fe=j,ue=q,J=Math.floor((fe+ue)/2);for(;F<G[J]||F>=G[J+1];)F<G[J]?ue=J:fe=J,J=Math.floor((fe+ue)/2);return J},k=(G,j,F,q)=>{const fe=[],ue=[],J=[];fe[0]=1;for(let le=1;le<=j;++le){ue[le]=q-G[F+1-le],J[le]=G[F+le]-q;let me=0;for(let be=0;be<le;++be){const ye=J[be+1],pe=ue[le-be],oe=fe[be]/(ye+pe);fe[be]=me+ye*oe,me=pe*oe}fe[le]=me}return fe},x=(G,j)=>{const F=M(_,E,G),q=M(w,S,j),fe=k(_,E,F,G),ue=k(w,S,q,j),J=[];for(let me=0;me<=S;++me){J[me]=Kt.vec4.create();for(let be=0;be<=E;++be){const ye=Kt.vec4.clone(p[F-E+be][q-S+me]),pe=ye[3];ye[0]*=pe,ye[1]*=pe,ye[2]*=pe,Kt.vec4.add(J[me],J[me],Kt.vec4.multiply(Kt.vec4.create(),ye,Kt.vec4.fromValues(fe[be],fe[be],fe[be],fe[be])))}}const le=Kt.vec4.create();for(let me=0;me<=S;++me)Kt.vec4.add(le,le,Kt.vec4.multiply(Kt.vec4.create(),J[me],Kt.vec4.fromValues(ue[me],ue[me],ue[me],ue[me])));return Kt.vec4.divide(le,le,Kt.vec4.fromValues(le[3],le[3],le[3],le[3])),Kt.vec3.fromValues(le[0],le[1],le[2])},C=(G,j)=>{const F=_[0]+G*(_[_.length-1]-_[0]),q=w[0]+j*(w[w.length-1]-w[0]);return x(F,q)},P=15,O=[],L=[];for(let G=0;G<=P;G++){const j=G/P;for(let F=0;F<=P;F++){const q=F/P,fe=C(q,j);L.push(fe[0],fe[1],fe[2])}}for(let G=0;G<P;G++)for(let j=0;j<P;j++){const F=G*(P+1)+j,q=G*(P+1)+j+1,fe=(G+1)*(P+1)+j,ue=(G+1)*(P+1)+j+1;O.push(fe,q,F),O.push(q,fe,ue)}const B={};B.POSITION=new Wr.AttributeData(new Float32Array(L),3,0,0,0,!1,L.length/3),B.NORMAL=new Wr.AttributeData(new Float32Array([0,0,0,0,0,0,0,0,0,0]),3,0,0,0,!1,L.length/3);const V=new Wr.GeometryData(new Wr.PrimitiveData(B,new Wr.AttributeData(this.convertToIndicesArray(O),1,0,0,0,!1,O.length)),Wr.PRIMITIVE_MODE.TRIANGLES);return i.data.push(V),i})}loadScene(){return qf(this,void 0,void 0,function*(){const e=new vc.TreeNode("sdgtf_content");if(this._content.arcs&&e.addChild(yield this.loadArcs()),this._content.beziercurves)for(let n in this._content.beziercurves)e.addChild(yield this.loadBeziercurve(n));if(this._content.circles&&e.addChild(yield this.loadCircles()),this._content.cylinders&&e.addChild(yield this.loadCylinders()),this._content.points)for(let n in this._content.points)e.addChild(yield this.loadPoint(n));if(this._content.polylines)for(let n in this._content.polylines)e.addChild(yield this.loadPolyline(n));if(this._content.spheres&&e.addChild(yield this.loadSpheres()),this._content.surfacepatches)for(let n in this._content.surfacepatches)e.addChild(yield this.loadSurfacepatch(n));return e})}}NN.SDGTFLoader=srt;var nh=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty(E9,"__esModule",{value:!0});E9.GLTFLoader=void 0;const b3=dr,J0=Mn,loe=Cm,ma=Cr,Xu=Gi,coe=NN;let ort=class{constructor(){this.BINARY_EXTENSION_HEADER_LENGTH=20,this._httpClient=J0.HttpClient.instance,this._uuidGenerator=J0.UuidGenerator.instance,this._logger=J0.Logger.instance,this._implementedExtensions=["KHR_materials_common"],this._globalTransformation=ma.mat4.fromValues(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1),this._eventEngine=J0.EventEngine.instance,this._performanceEvaluator=J0.PerformanceEvaluator.instance,this._progressUpdateLimit=500,this._eventId="",this._numberOfNodes=0,this._numberOfConvertedNodes=0,this._progressTimer=0}load(e,n,i,o,l){return nh(this,void 0,void 0,function*(){this._eventId=l||this._uuidGenerator.create();const d={type:Xu.TASK_TYPE.GLTF_CONTENT_LOADING,id:this._eventId,progress:0,status:"Starting glTF 1.0 loading."};this._eventEngine.emitEvent(J0.EVENTTYPE.TASK.TASK_START,d),this._numberOfConvertedNodes=0,this._numberOfNodes=e.nodes?Object.values(e.nodes).length:0,this._progressTimer=performance.now(),this._baseUri=o,n&&i&&(this._body=n.slice(this.BINARY_EXTENSION_HEADER_LENGTH+i.contentLength,i.length)),this._content=e;let p;n&&i&&(p=yield new coe.SDGTFLoader().load(n,i.length));const g={type:Xu.TASK_TYPE.GLTF_CONTENT_LOADING,id:this._eventId,progress:.25,status:"Loaded SDgTF content."};this._eventEngine.emitEvent(J0.EVENTTYPE.TASK.TASK_PROCESS,g),this.validateVersionAndExtensions();const v=yield this.loadScene();p&&v.addChild(p);const _={type:Xu.TASK_TYPE.GLTF_CONTENT_LOADING,id:this._eventId,progress:1,status:"GlTF loading complete."};return this._eventEngine.emitEvent(J0.EVENTTYPE.TASK.TASK_END,_),v})}loadWithUrl(e){return nh(this,void 0,void 0,function*(){this._performanceEvaluator.startSection("gltfProcessing."+e),this._performanceEvaluator.startSection("loadGltf."+e);const n=(yield this._httpClient.get(e,{responseType:"arraybuffer"})).data;this._performanceEvaluator.endSection("loadGltf."+e);const i=new DataView(n,0,this.BINARY_EXTENSION_HEADER_LENGTH),o={magic:String.fromCharCode(i.getUint8(0))+String.fromCharCode(i.getUint8(1))+String.fromCharCode(i.getUint8(2))+String.fromCharCode(i.getUint8(3)),version:i.getUint32(4,!0),length:i.getUint32(8,!0),contentLength:i.getUint32(12,!0),contentFormat:i.getUint32(16,!0)};if(o.magic!="glTF")throw new J0.ShapeDiverViewerDataProcessingError("GLTFLoader.load: Invalid data: glTF magic wrong.");const l=new DataView(n,this.BINARY_EXTENSION_HEADER_LENGTH,o.contentLength),d=new TextDecoder().decode(l);this._content=JSON.parse(d),this._body=n.slice(this.BINARY_EXTENSION_HEADER_LENGTH+o.contentLength,o.length);const p=yield new coe.SDGTFLoader().load(n,o.length);this.validateVersionAndExtensions();const g=yield this.loadScene();return g.addChild(p),this._performanceEvaluator.endSection("gltfProcessing."+e),g})}validateVersionAndExtensions(){if(this._content.extensionsUsed){const e=[];for(let n=0;n<this._content.extensionsUsed.length;n++)this._implementedExtensions.includes(this._content.extensionsUsed[n])||e.push(this._content.extensionsUsed[n]);if(e.length>0){let n="Extension"+(e.length===1?" ":"s ");e.forEach((i,o)=>{n+='"'+i+'"'+(o===e.length-1?"":o===e.length-2?" and ":", ")}),n+=(e.length===1?" is":" are")+" not supported, but used. Loading glTF regardless.",this._logger.info("GLTFLoader.validateVersionAndExtensions: "+n)}}}loadAccessor(e){var n,i;return nh(this,void 0,void 0,function*(){if(!this._content.accessors[e])throw new Error("Accessor not available.");const o=this._content.accessors[e],l=yield this.loadBufferView(o.bufferView),d=loe.ACCESSORTYPE_V1[o.type];o.componentType===5124&&this._logger.warn("GLTFLoader.loadAccessor: The componentType for this accessor is 5124, which is not allowed. Trying to load it anyway.");const p=loe.ACCESSORCOMPONENTTYPE_V1[o.componentType],g=p.BYTES_PER_ELEMENT,v=g*d,_=o.byteOffset||0,b=o.byteStride,w=!1,E=this._content.bufferViews[o.bufferView]?this._content.bufferViews[o.bufferView].target:void 0,S=this._content.asset&&((n=this._content.asset)===null||n===void 0?void 0:n.generator)==="ShapeDiverGltfV1Writer"?o.min||[]:[],M=this._content.asset&&((i=this._content.asset)===null||i===void 0?void 0:i.generator)==="ShapeDiverGltfV1Writer"?o.max||[]:[];return new Xu.AttributeData(new p(l),d,v,_,g,w,o.count,S,M,b,E)})}loadBuffer(e){return nh(this,void 0,void 0,function*(){if(!this._content.buffers[e])throw new Error("Buffer not available.");const n=this._content.buffers[e];if(e==="binary_glTF")return this._body;if(n.type==="arraybuffer")return(yield this._httpClient.get(n.uri,{responseType:"arraybuffer"})).data;if(!this._body)throw new Error("Buffer not available.");return this._body})}loadBufferView(e){return nh(this,void 0,void 0,function*(){if(!this._content.bufferViews[e])throw new Error("Buffer View not available.");const n=this._content.bufferViews[e],i=yield this.loadBuffer(n.buffer),o=n.byteLength!==void 0?n.byteLength:0;return i.slice(n.byteOffset,n.byteOffset+o)})}loadMaterial(e){return nh(this,void 0,void 0,function*(){if(!this._content.materials[e])throw new Error("Material not available.");const n=this._content.materials[e],i=new Xu.MaterialStandardData;if(n.name!==void 0&&(i.name=n.name),n.extensions&&n.extensions.KHR_materials_common){const o=n.extensions.KHR_materials_common.technique;o&&o!=="BLINN"&&this._logger.warn("The technique "+o+" is not supported. Trying to load the material either way.");const l=n.extensions.KHR_materials_common.values;if(l.hasOwnProperty("doubleSided")&&(i.side=l.doubleSided?Xu.MATERIAL_SIDE.DOUBLE:Xu.MATERIAL_SIDE.FRONT),i.color="#d3d3d3",l.hasOwnProperty("diffuse")&&Array.isArray(l.diffuse)){const d=l.diffuse.map(p=>p*=255);i.color=d,i.opacity=Math.max(0,Math.min(l.diffuse[3],1))}else l.hasOwnProperty("diffuse")&&this._logger.warn("GLTFLoader.loadMaterial: The value diffuse was set for a material, but is not supported in that type.");if(!l.hasOwnProperty("diffuse")&&l.hasOwnProperty("ambient")){const d=l.ambient.map(p=>p*=255);i.color=d}l.hasOwnProperty("emission")&&Array.isArray(l.emission)?i.emissiveness=l.emission:l.hasOwnProperty("emission")&&this._logger.warn("GLTFLoader.loadMaterial: The value emission was set for a material, but is not supported in that type."),l.hasOwnProperty("shininess")&&(i.metalness=Math.min(1,l.shininess),i.roughness=1-Math.min(1,l.shininess)),l.hasOwnProperty("transparency")&&(i.opacity=Math.max(0,Math.min(l.transparency,1))),!l.hasOwnProperty("transparency")&&l.hasOwnProperty("transparent")&&(l.transparency==="true"||l.transparency===!0)&&(i.opacity=0),l.hasOwnProperty("_roughness")&&(i.roughness=Math.min(1,Math.max(0,l.roughness))),l.hasOwnProperty("_metalness")&&(i.metalness=Math.min(1,Math.max(0,l.metalness)))}return i})}loadMesh(e){return nh(this,void 0,void 0,function*(){if(!this._content.meshes[e])throw new Error("Mesh not available.");const n=this._content.meshes[e],i=new b3.TreeNode(e);if(!n.primitives)return new b3.TreeNode("primitive");for(let o=0,l=n.primitives.length;o<l;o++){const d=new b3.TreeNode("primitive_"+o);i.addChild(d);const p=n.primitives[o],g={};for(const b in p.attributes){let w=b;if(/\d/.test(w)&&!w.includes("_")){const E=w.search(/\d/);w=w.substring(0,E)+"_"+w.substring(E,w.length)}else w==="TEXCOORD"||w==="COLOR"||w==="JOINTS"||w==="WEIGHTS"?w+="_0":w==="UV"&&(w="TEXCOORD_0");g[w]=yield this.loadAccessor(p.attributes[b]),w.startsWith("COLOR")&&(g[w]=new Xu.AttributeData(g[w].array,g[w].itemSize,g[w].itemBytes,g[w].byteOffset,g[w].elementBytes,!0,g[w].count,[],[],g[w].byteStride,g[w].target))}let v;p.material&&(v=yield this.loadMaterial(p.material));const _=new Xu.GeometryData(new Xu.PrimitiveData(g,yield this.loadAccessor(p.indices)),Xu.PRIMITIVE_MODE.TRIANGLES,v);d.data.push(_)}return i})}loadNode(e){return nh(this,void 0,void 0,function*(){if(!this._content.nodes[e])throw new Error("Node not available.");const n=this._content.nodes[e],i=new b3.TreeNode(e);if(n.matrix)i.addTransformation({id:this._uuidGenerator.create(),matrix:ma.mat4.fromValues(n.matrix[0],n.matrix[1],n.matrix[2],n.matrix[3],n.matrix[4],n.matrix[5],n.matrix[6],n.matrix[7],n.matrix[8],n.matrix[9],n.matrix[10],n.matrix[11],n.matrix[12],n.matrix[13],n.matrix[14],n.matrix[15])});else if(n.translation||n.scale||n.rotation){const o=n.translation?ma.mat4.fromTranslation(ma.mat4.create(),ma.vec3.fromValues(n.translation[0],n.translation[1],n.translation[2])):ma.mat4.create(),l=n.scale?ma.mat4.fromScaling(ma.mat4.create(),ma.vec3.fromValues(n.scale[0],n.scale[1],n.scale[2])):ma.mat4.create(),d=n.rotation?ma.mat4.fromQuat(ma.mat4.create(),ma.vec4.fromValues(n.rotation[0],n.rotation[1],n.rotation[2],n.rotation[3])):ma.mat4.create(),p=ma.mat4.mul(ma.mat4.create(),ma.mat4.mul(ma.mat4.create(),o,l),d);i.addTransformation({id:this._uuidGenerator.create(),matrix:p})}if(n.meshes)for(let o=0,l=n.meshes.length;o<l;o++)i.addChild(yield this.loadMesh(n.meshes[o]));if(n.children)for(let o=0,l=n.children.length;o<l;o++)i.addChild(yield this.loadNode(n.children[o]));if(this._numberOfConvertedNodes++,performance.now()-this._progressTimer>this._progressUpdateLimit){this._progressTimer=performance.now();const o={type:Xu.TASK_TYPE.GLTF_CONTENT_LOADING,id:this._eventId,progress:this._numberOfConvertedNodes/this._numberOfNodes/2+.25,status:`GlTF conversion progress: ${this._numberOfConvertedNodes}/${this._numberOfNodes} nodes.`};this._eventEngine.emitEvent(J0.EVENTTYPE.TASK.TASK_PROCESS,o),yield new Promise(l=>setTimeout(l,0))}return i})}loadScene(){var e,n;return nh(this,void 0,void 0,function*(){if(!this._content.scene)throw new Error("No scene.");if(!this._content.scenes[this._content.scene])throw new Error("Scene not available.");const i=this._content.scenes[this._content.scene],o=new b3.TreeNode(this._content.scene);if(this._content.asset&&((e=this._content.asset)===null||e===void 0?void 0:e.generator)!=="ShapeDiverGltfWriter"&&((n=this._content.asset)===null||n===void 0?void 0:n.generator)!=="ShapeDiverGltfV1Writer"&&o.addTransformation({id:this._uuidGenerator.create(),matrix:this._globalTransformation}),i.nodes)for(let l=0,d=i.nodes.length;l<d;l++)o.addChild(yield this.loadNode(i.nodes[l]));return o})}};E9.GLTFLoader=ort;var $F={},F0={},pv={},Ru=typeof window<"u"?window:{screen:{},navigator:{}},_4=(Ru.matchMedia||function(){return{matches:!1}}).bind(Ru),nye=!1,art={get passive(){return nye=!0}},rye=function(){};Ru.addEventListener&&Ru.addEventListener("p",rye,art);Ru.removeEventListener&&Ru.removeEventListener("p",rye,!1);var lrt=nye,crt="PointerEvent"in Ru,mQ="ontouchstart"in Ru,urt="TouchEvent"in Ru,iye=mQ||urt&&_4("(any-pointer: coarse)").matches,uoe=(Ru.navigator.maxTouchPoints||0)>0||iye,sye=Ru.navigator.userAgent||"",frt=_4("(pointer: coarse)").matches&&/iPad|Macintosh/.test(sye)&&Math.min(Ru.screen.width||0,Ru.screen.height||0)>=768,oye=(_4("(pointer: coarse)").matches||!_4("(pointer: fine)").matches&&mQ)&&!/Windows.*Firefox/.test(sye),drt=_4("(any-pointer: fine)").matches||_4("(any-hover: hover)").matches||frt||!mQ,f$=uoe&&(drt||!oye)?"hybrid":uoe?"touchOnly":"mouseOnly",hrt=f$==="mouseOnly"?"mouse":f$==="touchOnly"||oye?"touch":"mouse";const prt=Object.freeze(Object.defineProperty({__proto__:null,deviceType:f$,primaryInput:hrt,supportsPassiveEvents:lrt,supportsPointerEvents:crt,supportsTouchEvents:iye},Symbol.toStringTag,{value:"Module"})),mrt=ym(prt);var grt=X&&X.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,o)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),vrt=X&&X.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),_rt=X&&X.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&grt(e,t,n);return vrt(e,t),e},$8=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})},Lo=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},Oa=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},GR,TE,jR,HR,$R,WR,YR,qR,XR,ZR,QR,KR,xE,ME,JR,eD,tD;Object.defineProperty(pv,"__esModule",{value:!0});pv.AbstractCamera=void 0;const W8=_rt(mrt),yrt=dr,brt=Rl(),_c=Cr,Y8=Mn;class Art extends yrt.AbstractTreeNodeData{constructor(e,n,i){super(e,i),this._id=e,this._type=n,GR.set(this,!1),TE.set(this,!1),jR.set(this,800),HR.set(this,_c.vec3.create()),$R.set(this,_c.vec3.create()),WR.set(this,void 0),YR.set(this,!0),qR.set(this,1e3),XR.set(this,void 0),ZR.set(this,1),QR.set(this,void 0),KR.set(this,void 0),xE.set(this,!1),ME.set(this,800),JR.set(this,_c.vec2.create()),eD.set(this,!1),tD.set(this,1),this._eventEngine=Y8.EventEngine.instance,this._stateEngine=Y8.StateEngine.instance,this._boundingBox=new brt.Box,this._position=_c.vec3.create(),this._target=_c.vec3.create()}get active(){return Lo(this,GR,"f")}set active(e){Oa(this,GR,e,"f")}get autoAdjust(){return Lo(this,TE,"f")}set autoAdjust(e){Oa(this,TE,e,"f")}set boundingBox(e){this._boundingBox=e}get cameraMovementDuration(){return Lo(this,jR,"f")}set cameraMovementDuration(e){Oa(this,jR,e,"f")}get controls(){return this._controls}get defaultPosition(){return Lo(this,HR,"f")}set defaultPosition(e){Oa(this,HR,e,"f")}get defaultTarget(){return Lo(this,$R,"f")}set defaultTarget(e){Oa(this,$R,e,"f")}get domEventListenerToken(){return Lo(this,WR,"f")}set domEventListenerToken(e){Oa(this,WR,e,"f")}get enableCameraControls(){return Lo(this,YR,"f")}set enableCameraControls(e){Oa(this,YR,e,"f")}get far(){return Lo(this,qR,"f")}set far(e){Oa(this,qR,e,"f")}get id(){return this._id}get name(){return Lo(this,XR,"f")}set name(e){Oa(this,XR,e,"f")}get near(){return Lo(this,ZR,"f")}set near(e){Oa(this,ZR,e,"f")}get node(){return Lo(this,QR,"f")}set node(e){Oa(this,QR,e,"f")}get order(){return Lo(this,KR,"f")}set order(e){Oa(this,KR,e,"f")}get position(){return this._position}set position(e){this._position=e,this._controls.position=e}get revertAtMouseUp(){return Lo(this,xE,"f")}set revertAtMouseUp(e){Oa(this,xE,e,"f")}get revertAtMouseUpDuration(){return Lo(this,ME,"f")}set revertAtMouseUpDuration(e){Oa(this,ME,e,"f")}get sceneRotation(){return Lo(this,JR,"f")}set sceneRotation(e){Oa(this,JR,e,"f")}get target(){return this._target}set target(e){this._target=e,this._controls.target=e}get type(){return this._type}get useNodeData(){return Lo(this,eD,"f")}set useNodeData(e){Oa(this,eD,e,"f")}get viewportId(){return this._viewportId}get zoomExtentsFactor(){return Lo(this,tD,"f")}set zoomExtentsFactor(e){Oa(this,tD,e,"f")}animate(e,n){return $8(this,void 0,void 0,function*(){if(e.length===0)return Promise.resolve(!1);n||(n={}),n.duration=n.duration>=0?n.duration:this.cameraMovementDuration;const i=yield this._controls.animate(e,n);return i&&(this._position=this._controls.position,this._target=this._controls.target),i})}reset(e){return this.defaultPosition[0]===0&&this.defaultPosition[1]===0&&this.defaultPosition[2]===0&&this.defaultTarget[0]===0&&this.defaultTarget[1]===0&&this.defaultTarget[2]===0?this.zoomTo(void 0,e):this.set(_c.vec3.clone(this.defaultPosition),_c.vec3.clone(this.defaultTarget),e)}set(e,n,i){return $8(this,void 0,void 0,function*(){i||(i={}),i.duration=i.duration>=0?i.duration:this.cameraMovementDuration;const o=yield this._controls.animate([{position:_c.vec3.clone(this.position),target:_c.vec3.clone(this.target)},{position:e,target:n}],i);return o&&(this._position=this._controls.position,this._target=this._controls.target),o})}update(e){if(this.useNodeData&&this.node&&this._viewportId)return!0;{const{position:n,target:i,sceneRotation:o}=this._controls.update(e);let l=!0;return _c.vec3.equals(n,this.position)&&_c.vec3.equals(i,this.target)&&(l=!1),this.position=_c.vec3.clone(n),this.target=_c.vec3.clone(i),this.sceneRotation=_c.vec2.clone(o),l}}zoomTo(e,n){const{position:i,target:o}=this.calculateZoomTo(e);return this.set(i,o,n)}assignViewerInternal(e,n){this._viewportId=e,this._eventEngine.addListener(Y8.EVENTTYPE.SESSION.SESSION_CUSTOMIZED,()=>$8(this,void 0,void 0,function*(){if(Lo(this,TE,"f")===!0){const d=this._eventEngine.addListener(Y8.EVENTTYPE.VIEWPORT.VIEWPORT_UPDATED,()=>$8(this,void 0,void 0,function*(){this.zoomTo(),this._eventEngine.removeListener(d)}))}}));const i=()=>{Lo(this,xE,"f")===!0&&this.reset({duration:Lo(this,ME,"f")})};n.addEventListener("mouseup",()=>i(),W8.supportsPassiveEvents?{capture:!1,passive:!0}:!1),n.addEventListener("mouseout",()=>i(),W8.supportsPassiveEvents?{capture:!1,passive:!0}:!1),n.addEventListener("touchend",()=>i(),W8.supportsPassiveEvents?{capture:!1,passive:!0}:!1);let o;const l=/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel";n.addEventListener(l,()=>{clearTimeout(o),o=setTimeout(i,300)},W8.supportsPassiveEvents?{capture:!1,passive:!0}:!1)}}pv.AbstractCamera=Art;GR=new WeakMap,TE=new WeakMap,jR=new WeakMap,HR=new WeakMap,$R=new WeakMap,WR=new WeakMap,YR=new WeakMap,qR=new WeakMap,XR=new WeakMap,ZR=new WeakMap,QR=new WeakMap,KR=new WeakMap,xE=new WeakMap,ME=new WeakMap,JR=new WeakMap,eD=new WeakMap,tD=new WeakMap;var uA={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CAMERA_TYPE=void 0,function(e){e.PERSPECTIVE="perspective",e.ORTHOGRAPHIC="orthographic"}(t.CAMERA_TYPE||(t.CAMERA_TYPE={}))})(uA);var LN={},fx={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ORTHOGRAPHIC_CAMERA_DIRECTION=void 0,function(e){e.TOP="top",e.BOTTOM="bottom",e.LEFT="left",e.RIGHT="right",e.FRONT="front",e.BACK="back",e.CUSTOM="custom"}(t.ORTHOGRAPHIC_CAMERA_DIRECTION||(t.ORTHOGRAPHIC_CAMERA_DIRECTION={}))})(fx);var A3={},w3={},dx={},zN={},Sb={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return .5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return t===0?0:Math.pow(1024,t-1)},Out:function(t){return t===1?1:1-Math.pow(2,-10*t)},InOut:function(t){return t===0?0:t===1?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return t===0?0:t===1?1:-Math.pow(2,10*(t-1))*Math.sin((t-1.1)*5*Math.PI)},Out:function(t){return t===0?0:t===1?1:Math.pow(2,-10*t)*Math.sin((t-.1)*5*Math.PI)+1},InOut:function(t){return t===0?0:t===1?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin((t-1.1)*5*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin((t-1.1)*5*Math.PI)+1)}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-Sb.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?Sb.Bounce.In(t*2)*.5:Sb.Bounce.Out(t*2-1)*.5+.5}}},kE;typeof self>"u"&&typeof process<"u"&&process.hrtime?kE=function(){var t=process.hrtime();return t[0]*1e3+t[1]/1e6}:typeof self<"u"&&self.performance!==void 0&&self.performance.now!==void 0?kE=self.performance.now.bind(self.performance):Date.now!==void 0?kE=Date.now:kE=function(){return new Date().getTime()};var N2=kE,gQ=function(){function t(){this._tweens={},this._tweensAddedDuringUpdate={}}return t.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(n){return e._tweens[n]})},t.prototype.removeAll=function(){this._tweens={}},t.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},t.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},t.prototype.update=function(e,n){e===void 0&&(e=N2()),n===void 0&&(n=!1);var i=Object.keys(this._tweens);if(i.length===0)return!1;for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var o=0;o<i.length;o++){var l=this._tweens[i[o]],d=!n;l&&l.update(e,d)===!1&&!n&&delete this._tweens[i[o]]}i=Object.keys(this._tweensAddedDuringUpdate)}return!0},t}(),xg={Linear:function(t,e){var n=t.length-1,i=n*e,o=Math.floor(i),l=xg.Utils.Linear;return e<0?l(t[0],t[1],i):e>1?l(t[n],t[n-1],n-i):l(t[o],t[o+1>n?n:o+1],i-o)},Bezier:function(t,e){for(var n=0,i=t.length-1,o=Math.pow,l=xg.Utils.Bernstein,d=0;d<=i;d++)n+=o(1-e,i-d)*o(e,d)*t[d]*l(i,d);return n},CatmullRom:function(t,e){var n=t.length-1,i=n*e,o=Math.floor(i),l=xg.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(o=Math.floor(i=n*(1+e))),l(t[(o-1+n)%n],t[o],t[(o+1)%n],t[(o+2)%n],i-o)):e<0?t[0]-(l(t[0],t[0],t[1],t[1],-i)-t[0]):e>1?t[n]-(l(t[n],t[n],t[n-1],t[n-1],i-n)-t[n]):l(t[o?o-1:0],t[o],t[n<o+1?n:o+1],t[n<o+2?n:o+2],i-o)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=xg.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:function(){var t=[1];return function(e){var n=1;if(t[e])return t[e];for(var i=e;i>1;i--)n*=i;return t[e]=n,n}}(),CatmullRom:function(t,e,n,i,o){var l=(n-t)*.5,d=(i-e)*.5,p=o*o,g=o*p;return(2*e-2*n+l+d)*g+(-3*e+3*n-2*l-d)*p+l*o+e}}},BN=function(){function t(){}return t.nextId=function(){return t._nextId++},t._nextId=0,t}(),aye=new gQ,lye=function(){function t(e,n){n===void 0&&(n=aye),this._object=e,this._group=n,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Sb.Linear.None,this._interpolationFunction=xg.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._id=BN.nextId(),this._isChainStopped=!1,this._goToEnd=!1}return t.prototype.getId=function(){return this._id},t.prototype.isPlaying=function(){return this._isPlaying},t.prototype.isPaused=function(){return this._isPaused},t.prototype.to=function(e,n){return this._valuesEnd=Object.create(e),n!==void 0&&(this._duration=n),this},t.prototype.duration=function(e){return this._duration=e,this},t.prototype.start=function(e){if(this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var n in this._valuesStartRepeat)this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n]}return this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e!==void 0?typeof e=="string"?N2()+parseFloat(e):e:N2(),this._startTime+=this._delayTime,this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat),this},t.prototype._setupProperties=function(e,n,i,o){for(var l in i){var d=e[l],p=Array.isArray(d),g=p?"array":typeof d,v=!p&&Array.isArray(i[l]);if(!(g==="undefined"||g==="function")){if(v){var _=i[l];if(_.length===0)continue;_=_.map(this._handleRelativeValue.bind(this,d)),i[l]=[d].concat(_)}if((g==="object"||p)&&d&&!v){n[l]=p?[]:{};for(var b in d)n[l][b]=d[b];o[l]=p?[]:{},this._setupProperties(d,n[l],i[l],o[l])}else typeof n[l]>"u"&&(n[l]=d),p||(n[l]*=1),v?o[l]=i[l].slice().reverse():o[l]=n[l]||0}}},t.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},t.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},t.prototype.pause=function(e){return e===void 0&&(e=N2()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this),this)},t.prototype.resume=function(e){return e===void 0&&(e=N2()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},t.prototype.stopChainedTweens=function(){for(var e=0,n=this._chainedTweens.length;e<n;e++)this._chainedTweens[e].stop();return this},t.prototype.group=function(e){return this._group=e,this},t.prototype.delay=function(e){return this._delayTime=e,this},t.prototype.repeat=function(e){return this._initialRepeat=e,this._repeat=e,this},t.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},t.prototype.yoyo=function(e){return this._yoyo=e,this},t.prototype.easing=function(e){return this._easingFunction=e,this},t.prototype.interpolation=function(e){return this._interpolationFunction=e,this},t.prototype.chain=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._chainedTweens=e,this},t.prototype.onStart=function(e){return this._onStartCallback=e,this},t.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},t.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},t.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},t.prototype.onStop=function(e){return this._onStopCallback=e,this},t.prototype.update=function(e,n){if(e===void 0&&(e=N2()),n===void 0&&(n=!0),this._isPaused)return!0;var i,o,l=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>l)return!1;n&&this.start(e)}if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),o=(e-this._startTime)/this._duration,o=this._duration===0||o>1?1:o;var d=this._easingFunction(o);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,d),this._onUpdateCallback&&this._onUpdateCallback(this._object,o),o===1)if(this._repeat>0){isFinite(this._repeat)&&this._repeat--;for(i in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[i]=="string"&&(this._valuesStartRepeat[i]=this._valuesStartRepeat[i]+parseFloat(this._valuesEnd[i])),this._yoyo&&this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i];return this._yoyo&&(this._reversed=!this._reversed),this._repeatDelayTime!==void 0?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var p=0,g=this._chainedTweens.length;p<g;p++)this._chainedTweens[p].start(this._startTime+this._duration);return this._isPlaying=!1,!1}return!0},t.prototype._updateProperties=function(e,n,i,o){for(var l in i)if(n[l]!==void 0){var d=n[l]||0,p=i[l],g=Array.isArray(e[l]),v=Array.isArray(p),_=!g&&v;_?e[l]=this._interpolationFunction(p,o):typeof p=="object"&&p?this._updateProperties(e[l],d,p,o):(p=this._handleRelativeValue(d,p),typeof p=="number"&&(e[l]=d+(p-d)*o))}},t.prototype._handleRelativeValue=function(e,n){return typeof n!="string"?n:n.charAt(0)==="+"||n.charAt(0)==="-"?e+parseFloat(n):parseFloat(n)},t.prototype._swapEndStartRepeatValues=function(e){var n=this._valuesStartRepeat[e],i=this._valuesEnd[e];typeof i=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(i):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=n},t}(),cye="18.6.4",uye=BN.nextId,Rd=aye,fye=Rd.getAll.bind(Rd),dye=Rd.removeAll.bind(Rd),hye=Rd.add.bind(Rd),pye=Rd.remove.bind(Rd),mye=Rd.update.bind(Rd),wrt={Easing:Sb,Group:gQ,Interpolation:xg,now:N2,Sequence:BN,nextId:uye,Tween:lye,VERSION:cye,getAll:fye,removeAll:dye,add:hye,remove:pye,update:mye};const Ert=Object.freeze(Object.defineProperty({__proto__:null,Easing:Sb,Group:gQ,Interpolation:xg,Sequence:BN,Tween:lye,VERSION:cye,add:hye,default:wrt,getAll:fye,nextId:uye,now:N2,remove:pye,removeAll:dye,update:mye},Symbol.toStringTag,{value:"Module"})),gye=ym(Ert);var UN={};Object.defineProperty(UN,"__esModule",{value:!0});UN.CameraCylindricalInterpolation=void 0;const ur=Cr;class Srt{constructor(e,n,i,o){this._camera=e,this._cameraControls=n,this._from=i,this._to=o,this._h_from=this._from.position[2]-this._from.target[2],this._from_position_heightAdjusted=ur.vec3.fromValues(this._from.position[0],this._from.position[1],this._from.target[2]),this._r_from=ur.vec3.distance(this._from_position_heightAdjusted,this._from.target),this._dir_from=ur.vec3.normalize(ur.vec3.create(),ur.vec3.subtract(ur.vec3.create(),this._from_position_heightAdjusted,this._from.target)),this._h_to=this._to.position[2]-this._to.target[2],this._to_position_heightAdjusted=ur.vec3.fromValues(this._to.position[0],this._to.position[1],this._to.target[2]),this._r_to=ur.vec3.distance(this._to_position_heightAdjusted,this._to.target),this._dir_to=ur.vec3.normalize(ur.vec3.create(),ur.vec3.subtract(ur.vec3.create(),this._to_position_heightAdjusted,this._to.target)),this._dir_from[0]===0&&this._dir_from[1]===0&&this._dir_from[2]===0&&(this._dir_from=ur.vec3.fromValues(1,0,0)),this._dir_to[0]===0&&this._dir_to[1]===0&&this._dir_to[2]===0&&(this._dir_to=ur.vec3.fromValues(1,0,0)),this._lorr=ur.vec3.cross(ur.vec3.create(),this._dir_to,this._dir_from);const l=Math.min(1,Math.max(-1,ur.vec3.dot(this._dir_to,this._dir_from))),d=Math.min(1,Math.max(-1,ur.vec3.dot(this._lorr,ur.vec3.fromValues(0,0,1))));this._shortest_angle=d>0?-Math.acos(l):Math.acos(l)}onComplete(e){const n=ur.vec3.subtract(ur.vec3.create(),ur.vec3.fromValues(this._to.position[0],this._to.position[1],this._to.position[2]),this._cameraControls.getPositionWithUpdates());this._cameraControls.applyPositionVector(n);const i=ur.vec3.subtract(ur.vec3.create(),ur.vec3.fromValues(this._to.target[0],this._to.target[1],this._to.target[2]),this._cameraControls.getTargetWithUpdates());this._cameraControls.applyTargetVector(i)}onStop(e){}onUpdate(e){const n=ur.vec3.add(ur.vec3.create(),ur.vec3.multiply(ur.vec3.create(),this._from.target,ur.vec3.fromValues(1-e.delta,1-e.delta,1-e.delta)),ur.vec3.multiply(ur.vec3.create(),this._to.target,ur.vec3.fromValues(e.delta,e.delta,e.delta))),i=ur.vec3.subtract(ur.vec3.create(),n,this._cameraControls.getTargetWithUpdates());this._cameraControls.applyTargetVector(i);const o=this._shortest_angle*e.delta,l=ur.vec3.transformQuat(ur.vec3.create(),this._dir_from,ur.quat.setAxisAngle(ur.quat.create(),ur.vec3.fromValues(0,0,1),o)),d=this._r_from*(1-e.delta)+this._r_to*e.delta,p=ur.vec3.add(ur.vec3.create(),n,ur.vec3.multiply(ur.vec3.create(),l,ur.vec3.fromValues(d,d,d)));ur.vec3.add(p,p,ur.vec3.fromValues(0,0,this._h_from*(1-e.delta)+this._h_to*e.delta));const g=ur.vec3.subtract(ur.vec3.create(),p,this._cameraControls.getPositionWithUpdates());this._cameraControls.applyPositionVector(g)}}UN.CameraCylindricalInterpolation=Srt;var FN={};Object.defineProperty(FN,"__esModule",{value:!0});FN.CameraLinearInterpolation=void 0;const Hs=Cr;class Trt{constructor(e,n,i,o){this._camera=e,this._cameraControls=n,this._from=i,this._to=o}onComplete(e){const n=Hs.vec3.subtract(Hs.vec3.create(),this._to.position,this._cameraControls.getPositionWithUpdates());this._cameraControls.applyPositionVector(n);const i=Hs.vec3.subtract(Hs.vec3.create(),this._to.target,this._cameraControls.getTargetWithUpdates());this._cameraControls.applyTargetVector(i)}onStop(e){}onUpdate(e){const n=Hs.vec3.add(Hs.vec3.create(),Hs.vec3.multiply(Hs.vec3.create(),this._from.position,Hs.vec3.fromValues(1-e.delta,1-e.delta,1-e.delta)),Hs.vec3.multiply(Hs.vec3.create(),this._to.position,Hs.vec3.fromValues(e.delta,e.delta,e.delta))),i=Hs.vec3.subtract(Hs.vec3.create(),n,this._cameraControls.getPositionWithUpdates());this._cameraControls.applyPositionVector(i);const o=Hs.vec3.add(Hs.vec3.create(),Hs.vec3.multiply(Hs.vec3.create(),this._from.target,Hs.vec3.fromValues(1-e.delta,1-e.delta,1-e.delta)),Hs.vec3.multiply(Hs.vec3.create(),this._to.target,Hs.vec3.fromValues(e.delta,e.delta,e.delta))),l=Hs.vec3.subtract(Hs.vec3.create(),o,this._cameraControls.getTargetWithUpdates());this._cameraControls.applyTargetVector(l)}}FN.CameraLinearInterpolation=Trt;var VN={};Object.defineProperty(VN,"__esModule",{value:!0});VN.CameraMultipleInterpolation=void 0;const Zu=Cr;class xrt{constructor(e,n,i,o){this._camera=e,this._cameraControls=n,this._path=i,this._interpolationFunction=o,this.end={position:{x:[],y:[],z:[]},target:{x:[],y:[],z:[]}};for(let l=0;l<this._path.length;l++)this.end.position.x.push(this._path[l].position[0]),this.end.position.y.push(this._path[l].position[1]),this.end.position.z.push(this._path[l].position[2]),this.end.target.x.push(this._path[l].target[0]),this.end.target.y.push(this._path[l].target[1]),this.end.target.z.push(this._path[l].target[2])}onComplete(e){const n=Zu.vec3.subtract(Zu.vec3.create(),Zu.vec3.fromValues(this._path[this._path.length-1].position[0],this._path[this._path.length-1].position[1],this._path[this._path.length-1].position[2]),this._cameraControls.getPositionWithUpdates());this._cameraControls.applyPositionVector(n);const i=Zu.vec3.subtract(Zu.vec3.create(),Zu.vec3.fromValues(this._path[this._path.length-1].target[0],this._path[this._path.length-1].target[1],this._path[this._path.length-1].target[2]),this._cameraControls.getTargetWithUpdates());this._cameraControls.applyTargetVector(i)}onStop(e){}onUpdate(e){const n=Zu.vec3.fromValues(this._interpolationFunction(this.end.position.x,e.delta),this._interpolationFunction(this.end.position.y,e.delta),this._interpolationFunction(this.end.position.z,e.delta)),i=Zu.vec3.subtract(Zu.vec3.create(),n,this._cameraControls.getPositionWithUpdates());this._cameraControls.applyPositionVector(i);const o=Zu.vec3.fromValues(this._interpolationFunction(this.end.target.x,e.delta),this._interpolationFunction(this.end.target.y,e.delta),this._interpolationFunction(this.end.target.z,e.delta)),l=Zu.vec3.subtract(Zu.vec3.create(),o,this._cameraControls.getTargetWithUpdates());this._cameraControls.applyTargetVector(l)}}VN.CameraMultipleInterpolation=xrt;var GN={};Object.defineProperty(GN,"__esModule",{value:!0});GN.CameraSphericalInterpolation=void 0;const Mr=Cr;class Mrt{constructor(e,n,i,o){this._camera=e,this._cameraControls=n,this._from=i,this._to=o,this._radius_from=Mr.vec3.distance(this._from.position,this._from.target),this._direction_from=Mr.vec3.normalize(Mr.vec3.create(),Mr.vec3.subtract(Mr.vec3.create(),this._from.position,this._from.target)),this._radius_to=Mr.vec3.distance(this._to.position,this._to.target),this._direction_to=Mr.vec3.normalize(Mr.vec3.create(),Mr.vec3.subtract(Mr.vec3.create(),this._to.position,this._to.target)),this._axis=Mr.vec3.normalize(Mr.vec3.create(),Mr.vec3.cross(Mr.vec3.create(),this._direction_to,this._direction_from)),this._c_angle=-Math.acos(Math.min(1,Math.max(-1,Mr.vec3.dot(this._direction_to,this._direction_from))))}onComplete(e){const n=Mr.vec3.subtract(Mr.vec3.create(),Mr.vec3.fromValues(this._to.position[0],this._to.position[1],this._to.position[2]),this._cameraControls.getPositionWithUpdates());this._cameraControls.applyPositionVector(n);const i=Mr.vec3.subtract(Mr.vec3.create(),Mr.vec3.fromValues(this._to.target[0],this._to.target[1],this._to.target[2]),this._cameraControls.getTargetWithUpdates());this._cameraControls.applyTargetVector(i)}onStop(e){}onUpdate(e){const n=Mr.vec3.add(Mr.vec3.create(),Mr.vec3.multiply(Mr.vec3.create(),this._from.target,Mr.vec3.fromValues(1-e.delta,1-e.delta,1-e.delta)),Mr.vec3.multiply(Mr.vec3.create(),this._to.target,Mr.vec3.fromValues(e.delta,e.delta,e.delta))),i=Mr.vec3.subtract(Mr.vec3.create(),n,this._cameraControls.getTargetWithUpdates());this._cameraControls.applyTargetVector(i);const o=this._c_angle*e.delta,l=Mr.vec3.normalize(Mr.vec3.create(),Mr.vec3.transformQuat(Mr.vec3.create(),this._direction_from,Mr.quat.setAxisAngle(Mr.quat.create(),this._axis,o))),d=this._radius_from*(1-e.delta)+this._radius_to*e.delta,p=Mr.vec3.add(Mr.vec3.create(),n,Mr.vec3.multiply(Mr.vec3.create(),l,Mr.vec3.fromValues(d,d,d))),g=Mr.vec3.subtract(Mr.vec3.create(),p,this._cameraControls.getPositionWithUpdates());this._cameraControls.applyPositionVector(g)}}GN.CameraSphericalInterpolation=Mrt;var krt=X&&X.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,o)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),Crt=X&&X.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Prt=X&&X.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&krt(e,t,n);return Crt(e,t),e};Object.defineProperty(zN,"__esModule",{value:!0});zN.CameraInterpolationManager=void 0;const f1=Prt(gye),Rrt=UN,Drt=FN,foe=VN,Ort=GN;class Irt{constructor(e,n){this._camera=e,this._cameraControls=n,this.TweenWrapper=class{constructor(i,o,l){this._properties={delta:0},this._tween=new f1.Tween(this._properties),this._tween.easing(i.easing),this._tween.to({delta:1},i.duration),this._tween.onUpdate(d=>{o.onUpdate(d)}),this._tween.onStop(d=>{o.onStop&&o.onStop(d),this._resolve(!0)}),this._tween.onComplete(d=>{o.onComplete&&o.onComplete(d),l(),this._resolve(!0)})}start(){return new Promise(i=>{this._resolve=i,this._tween.start()})}stop(){this._tween.stop()}}}active(){return!!this._tween}interpolate(e,n={}){const i=[];for(let l=0;l<e.length;l++)i.push({position:e[l].position,target:e[l].target});this._tween&&(this._tween.stop(),this._tween=null);const o=this.optionsParser(n);return this._tween=new this.TweenWrapper(o,i.length===2?this.getCameraInterpolation(i[0],i[1],o.coordinates):new foe.CameraMultipleInterpolation(this._camera,this._cameraControls,i,o.interpolation),()=>{this._tween=null}),this._tween.start()}stop(){this._tween&&this._tween.stop(),this._tween=null}getCameraInterpolation(e,n,i){switch(i){case"linear":return new Drt.CameraLinearInterpolation(this._camera,this._cameraControls,e,n);case"spherical":return new Ort.CameraSphericalInterpolation(this._camera,this._cameraControls,e,n);case"cylindrical":return new Rrt.CameraCylindricalInterpolation(this._camera,this._cameraControls,e,n);default:return new foe.CameraMultipleInterpolation(this._camera,this._cameraControls,[e,n],f1.Interpolation.CatmullRom)}}optionsParser(e){let n=f1.Easing.Quartic.InOut;if(typeof e.easing=="string"){const o=e.easing.split("."),l=f1.Easing[o[0]];if(l){const d=l[o[1]];d&&(n=d)}}else typeof e.easing=="function"&&(n=e.easing);let i=f1.Interpolation.CatmullRom;if(typeof e.interpolation=="string"){const o=f1.Interpolation[e.interpolation];o&&o!==f1.Interpolation.Utils&&(i=o)}else typeof e.interpolation=="function"&&(i=e.interpolation);return{duration:e.duration&&e.duration>=0?e.duration:0,easing:n,coordinates:e.coordinates!=="spherical"&&e.coordinates!=="linear"&&e.coordinates!=="cylindrical"?"cylindrical":e.coordinates,interpolation:i}}}zN.CameraInterpolationManager=Irt;Object.defineProperty(dx,"__esModule",{value:!0});dx.AbstractCameraControls=void 0;const Nrt=zN,E3=Mn,zr=Cr;class Lrt{constructor(e,n){this._camera=e,this._enabled=n,this._converter=E3.Converter.instance,this._eventEngine=E3.EventEngine.instance,this._autoRotationSpeed=0,this._cubePositionRestriction={min:zr.vec3.fromValues(-1/0,-1/0,-1/0),max:zr.vec3.fromValues(1/0,1/0,1/0)},this._cubeTargetRestriction={min:zr.vec3.fromValues(-1/0,-1/0,-1/0),max:zr.vec3.fromValues(1/0,1/0,1/0)},this._damping=.1,this._enableAutoRotation=!1,this._enableAzimuthRotation=!0,this._enableKeyPan=!1,this._enableObjectControls=!1,this._enablePan=!0,this._enablePolarRotation=!0,this._enableRotation=!0,this._enableTurntableControls=!1,this._enableZoom=!0,this._input={keys:{up:38,down:40,left:37,right:39},mouse:{rotate:0,zoom:1,pan:2},touch:{rotate:1,zoom:2,pan:2}},this._keyPanSpeed=.5,this._manualInteraction=!1,this._movementSmoothness=.5,this._moving=!1,this._movingDuration=0,this._nonmanualInteraction=!1,this._objectControlsCenter=zr.vec3.create(),this._panSpeed=.5,this._position=zr.vec3.create(),this._rotationRestriction={minPolarAngle:0,maxPolarAngle:180,minAzimuthAngle:-1/0,maxAzimuthAngle:1/0},this._rotationSpeed=.5,this._sceneRotation=zr.vec2.create(),this._spherePositionRestriction={center:zr.vec3.create(),radius:1/0},this._sphereTargetRestriction={center:zr.vec3.create(),radius:1/0},this._target=zr.vec3.create(),this._turntableCenter=zr.vec3.create(),this._zoomRestriction={minDistance:0,maxDistance:1/0},this._zoomSpeed=.5,this._cameraInterpolationManager=new Nrt.CameraInterpolationManager(this._camera,this),this._manualInteractionTransformations={position:[],target:[],sceneRotation:[]},this._nonmanualInteractionTransformations={position:[],target:[],sceneRotation:[]}}get autoRotationSpeed(){return this._autoRotationSpeed}set autoRotationSpeed(e){this._autoRotationSpeed=e}get camera(){return this._camera}set camera(e){this._camera=e}get cameraControlsEventDistribution(){return this._cameraControlsEventDistribution}get canvas(){return this._canvas}set canvas(e){this._canvas=e}get cubePositionRestriction(){return this._cubePositionRestriction}set cubePositionRestriction(e){this._cubePositionRestriction=e}get cubeTargetRestriction(){return this._cubeTargetRestriction}set cubeTargetRestriction(e){this._cubeTargetRestriction=e}get damping(){return this._damping}set damping(e){this._damping=e}get enableAutoRotation(){return this._enableAutoRotation}set enableAutoRotation(e){this._enableAutoRotation=e}get enableAzimuthRotation(){return this._enableAzimuthRotation}set enableAzimuthRotation(e){this._enableAzimuthRotation=e}get enableKeyPan(){return this._enableKeyPan}set enableKeyPan(e){this._enableKeyPan=e}get enableObjectControls(){return this._enableObjectControls}set enableObjectControls(e){this._enableObjectControls=e}get enablePan(){return this._enablePan}set enablePan(e){this._enablePan=e}get enablePolarRotation(){return this._enablePolarRotation}set enablePolarRotation(e){this._enablePolarRotation=e}get enableRotation(){return this._enableRotation}set enableRotation(e){this._enableRotation=e}get enableTurntableControls(){return this._enableTurntableControls}set enableTurntableControls(e){this._enableTurntableControls=e}get enableZoom(){return this._enableZoom}set enableZoom(e){this._enableZoom=e}get enabled(){return this._enabled}set enabled(e){e||(this._manualInteraction=!1,this._manualInteractionTransformations={position:[],target:[],sceneRotation:[]},this._nonmanualInteraction=!1,this._nonmanualInteractionTransformations={position:[],target:[],sceneRotation:[]},this._cameraControlsEventDistribution.reset(),this._cameraLogic.reset()),this._enabled=e}get input(){return this._input}set input(e){this._input=e}get keyPanSpeed(){return this._keyPanSpeed}set keyPanSpeed(e){this._keyPanSpeed=e}get movementSmoothness(){return this._movementSmoothness}set movementSmoothness(e){this._movementSmoothness=e}get objectControlsCenter(){return this._objectControlsCenter}set objectControlsCenter(e){this._objectControlsCenter=e}get panSpeed(){return this._panSpeed}set panSpeed(e){this._panSpeed=e}get position(){return this._position}set position(e){this._position=e}get rotationRestriction(){return this._rotationRestriction}set rotationRestriction(e){this._rotationRestriction=e}get rotationSpeed(){return this._rotationSpeed}set rotationSpeed(e){this._rotationSpeed=e}get sceneRotation(){return this._sceneRotation}set sceneRotation(e){this._sceneRotation=e}get spherePositionRestriction(){return this._spherePositionRestriction}set spherePositionRestriction(e){this._spherePositionRestriction=e}get sphereTargetRestriction(){return this._sphereTargetRestriction}set sphereTargetRestriction(e){this._sphereTargetRestriction=e}get target(){return this._target}set target(e){this._target=e}get turntableCenter(){return this._turntableCenter}set turntableCenter(e){this._turntableCenter=e}get zoomRestriction(){return this._zoomRestriction}set zoomRestriction(e){this._zoomRestriction=e}get zoomSpeed(){return this._zoomSpeed}set zoomSpeed(e){this._zoomSpeed=e}animate(e,n){return n&&n.duration===0?(this._position=e[e.length-1].position,this._target=e[e.length-1].target,new Promise(i=>i(!0))):(this._manualInteraction=!1,this._manualInteractionTransformations={position:[],target:[],sceneRotation:[]},this._cameraInterpolationManager.interpolate(e,n))}applyPositionMatrix(e,n){this._manualInteraction||n?(this._manualInteraction=!0,this._manualInteractionTransformations.position.push({matrix:e})):(this._nonmanualInteraction=!0,this._nonmanualInteractionTransformations.position.push({matrix:e}))}applyPositionVector(e,n){this._manualInteraction||n?(this._manualInteraction=!0,this._manualInteractionTransformations.position.push({vector:e})):(this._nonmanualInteraction=!0,this._nonmanualInteractionTransformations.position.push({vector:e}))}applyRotation(e,n){this._manualInteraction||n?(this._manualInteraction=!0,this._manualInteractionTransformations.sceneRotation.push({theta:e[0],phi:e[1]})):(this._nonmanualInteraction=!0,this._nonmanualInteractionTransformations.sceneRotation.push({theta:e[0],phi:e[1]}))}applySettings(e){const n=e.camera.cameras[this.camera.id];if(!n)return;this.reset();const i=n.controls;this.autoRotationSpeed=i.autoRotationSpeed,this.damping=i.damping,this.enableAutoRotation=i.enableAutoRotation,this.enableKeyPan=i.enableKeyPan,this.enablePan=i.enablePan,this.enableRotation=i.enableRotation,this.enableZoom=i.enableZoom,this.keyPanSpeed=i.keyPanSpeed,this.movementSmoothness=i.movementSmoothness,this.rotationSpeed=i.rotationSpeed,this.panSpeed=i.panSpeed,this.zoomSpeed=i.zoomSpeed,this.enableAzimuthRotation=i.enableAzimuthRotation,this.enablePolarRotation=i.enablePolarRotation,this.enableTurntableControls=i.enableTurntableControls,this.enableObjectControls=i.enableObjectControls,this.turntableCenter=this._converter.toVec3(i.turntableCenter),this.objectControlsCenter=this._converter.toVec3(i.objectControlsCenter),i.restrictions.position.cube.min.x===null&&(i.restrictions.position.cube.min.x=-1/0),i.restrictions.position.cube.min.y===null&&(i.restrictions.position.cube.min.y=-1/0),i.restrictions.position.cube.min.z===null&&(i.restrictions.position.cube.min.z=-1/0),i.restrictions.position.cube.max.x===null&&(i.restrictions.position.cube.max.x=1/0),i.restrictions.position.cube.max.y===null&&(i.restrictions.position.cube.max.y=1/0),i.restrictions.position.cube.max.z===null&&(i.restrictions.position.cube.max.z=1/0),i.restrictions.position.sphere.radius===null&&(i.restrictions.position.sphere.radius=1/0),i.restrictions.target.cube.min.x===null&&(i.restrictions.target.cube.min.x=-1/0),i.restrictions.target.cube.min.y===null&&(i.restrictions.target.cube.min.y=-1/0),i.restrictions.target.cube.min.z===null&&(i.restrictions.target.cube.min.z=-1/0),i.restrictions.target.cube.max.x===null&&(i.restrictions.target.cube.max.x=1/0),i.restrictions.target.cube.max.y===null&&(i.restrictions.target.cube.max.y=1/0),i.restrictions.target.cube.max.z===null&&(i.restrictions.target.cube.max.z=1/0),i.restrictions.target.sphere.radius===null&&(i.restrictions.target.sphere.radius=1/0),i.restrictions.rotation.minAzimuthAngle===null&&(i.restrictions.rotation.minAzimuthAngle=-1/0),i.restrictions.rotation.maxAzimuthAngle===null&&(i.restrictions.rotation.maxAzimuthAngle=1/0),i.restrictions.zoom.maxDistance===null&&(i.restrictions.zoom.maxDistance=1/0),this.cubePositionRestriction={min:this._converter.toVec3(i.restrictions.position.cube.min),max:this._converter.toVec3(i.restrictions.position.cube.max)},this.spherePositionRestriction={center:this._converter.toVec3(i.restrictions.position.sphere.center),radius:i.restrictions.position.sphere.radius},this.cubeTargetRestriction={min:this._converter.toVec3(i.restrictions.target.cube.min),max:this._converter.toVec3(i.restrictions.target.cube.max)},this.sphereTargetRestriction={center:this._converter.toVec3(i.restrictions.target.sphere.center),radius:i.restrictions.target.sphere.radius},this.rotationRestriction=i.restrictions.rotation,this.zoomRestriction=i.restrictions.zoom}applyTargetMatrix(e,n){this._manualInteraction||n?(this._manualInteraction=!0,this._manualInteractionTransformations.target.push({matrix:e})):(this._nonmanualInteraction=!0,this._nonmanualInteractionTransformations.target.push({matrix:e}))}applyTargetVector(e,n){this._manualInteraction||n?(this._manualInteraction=!0,this._manualInteractionTransformations.target.push({vector:e})):(this._nonmanualInteraction=!0,this._nonmanualInteractionTransformations.target.push({vector:e}))}applyUpMatrix(e,n){throw new Error("Method not implemented.")}assignViewer(e,n){this._canvas=n,this._viewportId=e}getPositionWithManualUpdates(){let e=zr.vec3.clone(this._position);if(this._manualInteraction)for(let n=this._manualInteractionTransformations.position.length-1;n>=0;n--)this._manualInteractionTransformations.position[n].matrix?e=zr.vec3.transformMat4(e,e,this._manualInteractionTransformations.position[n].matrix):e=zr.vec3.add(e,e,this._manualInteractionTransformations.position[n].vector);return e}getPositionWithUpdates(){return this.getPosition()}getTargetWithManualUpdates(){let e=zr.vec3.clone(this._target);if(this._manualInteraction)for(let n=this._manualInteractionTransformations.target.length-1;n>=0;n--)this._manualInteractionTransformations.target[n].matrix?e=zr.vec3.transformMat4(e,e,this._manualInteractionTransformations.target[n].matrix):e=zr.vec3.add(e,e,this._manualInteractionTransformations.target[n].vector);return e}getTargetWithUpdates(){return this.getTarget()}isMoving(){return this._manualInteraction||this._nonmanualInteraction}isWithinRestrictions(e,n){return this._cameraLogic.isWithinRestrictions(e,n)}reset(){this._cameraControlsEventDistribution.reset(),this._cameraLogic.reset()}update(e){if(!this._enabled)return{position:zr.vec3.clone(this._position),target:zr.vec3.clone(this._target),sceneRotation:zr.vec2.clone(this._sceneRotation)};this._manualInteraction===!0&&this._cameraInterpolationManager.active()&&this._cameraInterpolationManager.stop();const{position:n,target:i,sceneRotation:o}=this._cameraLogic.restrict(this.getPosition(),this.getTarget(),this.getSceneRotation());this._position=zr.vec3.clone(n),this._target=zr.vec3.clone(i),this._sceneRotation=o?zr.vec2.clone(o):zr.vec2.create(),this._manualInteraction=!1,this._manualInteractionTransformations={position:[],target:[],sceneRotation:[]},this._nonmanualInteraction=this._cameraInterpolationManager.active(),this._nonmanualInteractionTransformations={position:[],target:[],sceneRotation:[]},this._cameraLogic.update(e,this._nonmanualInteraction);const l=this._moving,d={position:zr.vec3.clone(this._position),target:zr.vec3.clone(this._target),sceneRotation:zr.vec2.clone(this._sceneRotation)};switch(this._movingDuration+=e,this._moving=this._manualInteraction||this._nonmanualInteraction,!0){case(l!==this._moving&&this._moving===!0):this._eventEngine.emitEvent(E3.EVENTTYPE.CAMERA.CAMERA_START,{viewportId:this._viewportId,cameraId:this.camera.id});break;case(l!==this._moving&&this._moving===!1):this._eventEngine.emitEvent(E3.EVENTTYPE.CAMERA.CAMERA_END,{viewportId:this._viewportId,cameraId:this.camera.id});break;default:this._eventEngine.emitEvent(E3.EVENTTYPE.CAMERA.CAMERA_MOVE,{viewportId:this._viewportId,cameraId:this.camera.id})}return this._moving||(this._movingDuration=0),d}getPosition(){let e=zr.vec3.clone(this._position);if(this._manualInteraction)for(let n=this._manualInteractionTransformations.position.length-1;n>=0;n--)this._manualInteractionTransformations.position[n].matrix?e=zr.vec3.transformMat4(e,e,this._manualInteractionTransformations.position[n].matrix):e=zr.vec3.add(e,e,this._manualInteractionTransformations.position[n].vector);else if(this._nonmanualInteraction)for(let n=this._nonmanualInteractionTransformations.position.length-1;n>=0;n--)this._nonmanualInteractionTransformations.position[n].matrix?e=zr.vec3.transformMat4(e,e,this._nonmanualInteractionTransformations.position[n].matrix):e=zr.vec3.add(e,e,this._nonmanualInteractionTransformations.position[n].vector);return e}getSceneRotation(){let e=zr.vec2.clone(this._sceneRotation);if(this._manualInteraction)for(let n=this._manualInteractionTransformations.sceneRotation.length-1;n>=0;n--)e=zr.vec2.add(e,e,zr.vec2.fromValues(this._manualInteractionTransformations.sceneRotation[n].theta,this._manualInteractionTransformations.sceneRotation[n].phi));else if(this._nonmanualInteraction)for(let n=this._nonmanualInteractionTransformations.sceneRotation.length-1;n>=0;n--)e=zr.vec2.add(e,e,zr.vec2.fromValues(this._nonmanualInteractionTransformations.sceneRotation[n].theta,this._nonmanualInteractionTransformations.sceneRotation[n].phi));return e}getTarget(){let e=zr.vec3.clone(this._target);if(this._manualInteraction)for(let n=this._manualInteractionTransformations.target.length-1;n>=0;n--)this._manualInteractionTransformations.target[n].matrix?e=zr.vec3.transformMat4(e,e,this._manualInteractionTransformations.target[n].matrix):e=zr.vec3.add(e,e,this._manualInteractionTransformations.target[n].vector);else if(this._nonmanualInteraction)for(let n=this._nonmanualInteractionTransformations.target.length-1;n>=0;n--)this._nonmanualInteractionTransformations.target[n].matrix?e=zr.vec3.transformMat4(e,e,this._nonmanualInteractionTransformations.target[n].matrix):e=zr.vec3.add(e,e,this._nonmanualInteractionTransformations.target[n].vector);return e}}dx.AbstractCameraControls=Lrt;var S3={},doe;function vye(){if(doe)return S3;doe=1,Object.defineProperty(S3,"__esModule",{value:!0}),S3.CameraControlsLogic=void 0;const t=Rl(),e=Cr,n=vQ(),i=uA,o=fx;let l=class{constructor(p,g,v){this._controls=p,this._settingsAdjustments=g,this._touchAdjustments=v,this._adjustedSettings={autoRotationSpeed:()=>this._controls.autoRotationSpeed*this._settingsAdjustments.autoRotationSpeed,damping:()=>this._controls.damping*this._settingsAdjustments.damping,movementSmoothness:()=>this._controls.movementSmoothness*this._settingsAdjustments.movementSmoothness,panSpeed:()=>this._controls.panSpeed*this._settingsAdjustments.panSpeed,rotationSpeed:()=>this._controls.rotationSpeed*this._settingsAdjustments.rotationSpeed,zoomSpeed:()=>this._controls.zoomSpeed*this._settingsAdjustments.zoomSpeed},this._damping={rotation:{time:0,duration:0,theta:0,phi:0},zoom:{time:0,duration:0,delta:0},pan:{time:0,duration:0,offset:e.vec3.create()}},this._dollyDelta=0,this._dollyEnd=0,this._dollyStart=0,this._panDelta=e.vec2.create(),this._panEnd=e.vec2.create(),this._panStart=e.vec2.create(),this._rotateDelta=e.vec2.create(),this._rotateEnd=e.vec2.create(),this._rotateStart=e.vec2.create(),this._quat=e.quat.fromValues(-Math.sin(Math.PI/4),0,0,Math.sin(Math.PI/4)),this._quatInverse=e.quat.fromValues(Math.sin(Math.PI/4),0,0,Math.sin(Math.PI/4))}isWithinRestrictions(p,g){const v=new t.Box(this._controls.cubePositionRestriction.min,this._controls.cubePositionRestriction.max),_=new t.Sphere(this._controls.spherePositionRestriction.center,this._controls.spherePositionRestriction.radius),b=new t.Box(this._controls.cubeTargetRestriction.min,this._controls.cubeTargetRestriction.max),w=new t.Sphere(this._controls.sphereTargetRestriction.center,this._controls.sphereTargetRestriction.radius);if(!(v.containsPoint(p)&&_.containsPoint(p))||!(b.containsPoint(g)&&w.containsPoint(g)))return!1;const E=e.vec3.distance(p,g);if(E>this._controls.zoomRestriction.maxDistance||E<this._controls.zoomRestriction.minDistance)return!1;const S=this._controls.rotationRestriction.minPolarAngle*(Math.PI/180),M=this._controls.rotationRestriction.maxPolarAngle*(Math.PI/180),k=this._controls.rotationRestriction.minAzimuthAngle*(Math.PI/180),x=this._controls.rotationRestriction.maxAzimuthAngle*(Math.PI/180);if(k!==-1/0||x!==1/0||S!==0||M!==180){const C=e.vec3.sub(e.vec3.create(),p,g);e.vec3.transformQuat(C,C,this._quat);const P=new t.Spherical().fromVec3(C);if(P.theta<k||P.theta>x||P.phi<S||P.phi>M)return!1}return!0}pan(p,g,v,_){if(!v)this._panStart=e.vec2.fromValues(p,g);else{if(this._panEnd=e.vec2.fromValues(p,g),e.vec2.sub(this._panDelta,this._panEnd,this._panStart),this._panDelta[0]===0&&this._panDelta[1]===0)return;e.vec2.copy(this._panStart,this._panEnd);const b=this._adjustedSettings.panSpeed()*(_?this._touchAdjustments.panSpeed:1),w=this.panDeltaToOffset(e.vec2.mul(e.vec2.create(),this._panDelta,e.vec2.fromValues(b,b)));this._damping.pan.duration>0&&(w[0]<0?w[0]=Math.min(w[0],this._adjustedSettings.movementSmoothness()*this._damping.pan.offset[0]):w[0]=Math.max(w[0],this._adjustedSettings.movementSmoothness()*this._damping.pan.offset[0]),w[1]<0?w[1]=Math.min(w[1],this._adjustedSettings.movementSmoothness()*this._damping.pan.offset[1]):w[1]=Math.max(w[1],this._adjustedSettings.movementSmoothness()*this._damping.pan.offset[1]),w[2]<0?w[2]=Math.min(w[2],this._adjustedSettings.movementSmoothness()*this._damping.pan.offset[2]):w[2]=Math.max(w[2],this._adjustedSettings.movementSmoothness()*this._damping.pan.offset[2]));const E=1-Math.max(.01,Math.min(.99,this._adjustedSettings.damping())),S=(Math.log(1/Math.abs(w[0]))-5*Math.log(10))/Math.log(E),M=(Math.log(1/Math.abs(w[1]))-5*Math.log(10))/Math.log(E),k=(Math.log(1/Math.abs(w[2]))-5*Math.log(10))/Math.log(E);this._damping.pan.time=0,this._damping.pan.duration=Math.max(S,Math.max(M,k))*16.6666,this._damping.pan.offset=e.vec3.clone(w),this._damping.rotation.duration=0,this._damping.zoom.duration=0,this._controls.applyTargetVector(w,!0),this._controls.applyPositionVector(w,!0)}}reset(){this._damping={rotation:{time:0,duration:0,theta:0,phi:0},zoom:{time:0,duration:0,delta:0},pan:{time:0,duration:0,offset:e.vec3.create()}},this._dollyDelta=0,this._dollyEnd=0,this._dollyStart=0,this._panDelta=e.vec2.create(),this._panEnd=e.vec2.create(),this._panStart=e.vec2.create(),this._rotateDelta=e.vec2.create(),this._rotateEnd=e.vec2.create(),this._rotateStart=e.vec2.create()}restrict(p,g,v){const _=new t.Box(this._controls.cubePositionRestriction.min,this._controls.cubePositionRestriction.max),b=new t.Sphere(this._controls.spherePositionRestriction.center,this._controls.spherePositionRestriction.radius),w=new t.Box(this._controls.cubeTargetRestriction.min,this._controls.cubeTargetRestriction.max),E=new t.Sphere(this._controls.sphereTargetRestriction.center,this._controls.sphereTargetRestriction.radius);_.containsPoint(p)||(p=_.clampPoint(p)),b.containsPoint(p)||(p=b.clampPoint(p)),w.containsPoint(g)||(g=w.clampPoint(g)),E.containsPoint(g)||(g=E.clampPoint(g));const S=e.vec3.distance(p,g);if(S>this._controls.zoomRestriction.maxDistance||S<this._controls.zoomRestriction.minDistance){const P=e.vec3.normalize(e.vec3.create(),e.vec3.subtract(e.vec3.create(),p,g)),O=Math.max(this._controls.zoomRestriction.minDistance,Math.min(this._controls.zoomRestriction.maxDistance,S));e.vec3.add(p,e.vec3.multiply(p,P,e.vec3.fromValues(O,O,O)),g)}const M=this._controls.rotationRestriction.minPolarAngle*(Math.PI/180),k=this._controls.rotationRestriction.maxPolarAngle*(Math.PI/180),x=this._controls.rotationRestriction.minAzimuthAngle*(Math.PI/180),C=this._controls.rotationRestriction.maxAzimuthAngle*(Math.PI/180);if(x!==-1/0||C!==1/0||M!==0||k!==180||this._controls.enableAzimuthRotation===!1||this._controls.enablePolarRotation===!1||this._controls.enableObjectControls===!0){let P=e.vec3.subtract(e.vec3.create(),p,g);e.vec3.transformQuat(P,P,this._quat);const O=new t.Spherical().fromVec3(P);if(O.theta<x||O.theta>C||O.phi<M||O.phi>k||this._controls.enableAzimuthRotation===!1||this._controls.enablePolarRotation===!1||this._controls.enableObjectControls===!0){if(O.theta=Math.max(x,Math.min(C,O.theta)),O.phi=Math.max(M,Math.min(k,O.phi)),this._controls.enableAzimuthRotation===!1||this._controls.enablePolarRotation===!1||this._controls.enableObjectControls===!0){const L=e.vec3.subtract(e.vec3.create(),this._controls.camera.defaultPosition,this._controls.camera.defaultTarget);e.vec3.transformQuat(L,L,this._quat);const B=new t.Spherical().fromVec3(L);this._controls.enableAzimuthRotation===!1&&(O.theta=B.theta),this._controls.enablePolarRotation===!1&&(O.phi=B.phi),this._controls.enableObjectControls&&(O.theta=B.theta,O.phi=B.phi)}O.makeSafe(),P=O.toVec3(),e.vec3.transformQuat(P,P,this._quatInverse),e.vec3.add(p,P,g)}(v[1]<x||v[1]>C||v[0]<M||v[0]>k||this._controls.enableAzimuthRotation===!1||this._controls.enablePolarRotation===!1)&&this._controls.enableObjectControls===!1&&(v[1]=this._controls.enableAzimuthRotation===!1?0:Math.max(x,Math.min(C,v[1])),v[0]=this._controls.enablePolarRotation===!1?0:Math.max(M,Math.min(k,v[0])))}return{position:p,target:g,sceneRotation:v}}rotate(p,g,v,_){if(!(this._controls.camera.type===i.CAMERA_TYPE.ORTHOGRAPHIC&&this._controls.camera.direction!==o.ORTHOGRAPHIC_CAMERA_DIRECTION.CUSTOM))if(!v)this._rotateStart=e.vec2.fromValues(p,g);else{if(this._rotateEnd=e.vec2.fromValues(p,g),e.vec2.subtract(this._rotateDelta,this._rotateEnd,this._rotateStart),e.vec2.copy(this._rotateStart,this._rotateEnd),!this._controls.canvas||this._controls.canvas.clientWidth==0||this._controls.canvas.clientHeight==0)return;const b=new t.Spherical,w=this._adjustedSettings.rotationSpeed()*(_?this._touchAdjustments.rotationSpeed:1);if(b.theta-=w*this._rotateDelta[0]/this._controls.canvas.clientHeight,b.phi-=w*this._rotateDelta[1]/this._controls.canvas.clientHeight,this._damping.rotation.duration>0){const C=this._damping.rotation.theta-b.theta;b.theta+=C*this._adjustedSettings.movementSmoothness();const P=this._damping.rotation.phi-b.phi;b.phi+=P*this._adjustedSettings.movementSmoothness()}let E=b;this._controls.enableTurntableControls&&(E=new t.Spherical(1,b.phi,0));const S=this.rotationSphericalToOffset(E),M=1-Math.max(.01,Math.min(1,this._adjustedSettings.damping())),k=(Math.log(1/Math.abs(b.theta))-5*Math.log(10))/Math.log(M),x=(Math.log(1/Math.abs(b.phi))-5*Math.log(10))/Math.log(M);this._damping.rotation.time=0,this._damping.rotation.duration=Math.max(k,x)*16.6666,this._damping.rotation.theta=b.theta,this._damping.rotation.phi=b.phi,this._damping.pan.duration=0,this._damping.zoom.duration=0,this._controls.applyPositionVector(S,!0),this._controls.enableTurntableControls&&this._controls.applyRotation([0,b.theta],!0),this._controls.enableObjectControls&&this._controls.applyRotation([b.phi,b.theta],!0)}}update(p,g){g===!0&&(this._damping.zoom.duration=0,this._damping.pan.duration=0,this._damping.rotation.duration=0);const v=1-Math.max(.01,Math.min(1,this._adjustedSettings.damping()));if(this._damping.pan.duration>0)if(this._damping.pan.time+p>this._damping.pan.duration)this._damping.pan.time=this._damping.pan.duration,this._damping.pan.duration=0;else{this._damping.pan.time+=p;const _=this._damping.pan.time/16.6666,b=Math.pow(v,_),w=e.vec3.multiply(e.vec3.create(),this._damping.pan.offset,e.vec3.fromValues(b,b,b));this._controls.applyTargetVector(w),this._controls.applyPositionVector(w)}else this._damping.pan.time=0;if(this._damping.rotation.duration>0)if(this._damping.rotation.time+p>this._damping.rotation.duration)this._damping.rotation.time=this._damping.rotation.duration,this._damping.rotation.duration=0;else{this._damping.rotation.time+=p;const _=this._damping.rotation.time/16.6666,b=new t.Spherical;b.theta=this._damping.rotation.theta*Math.pow(v,_),b.phi=this._damping.rotation.phi*Math.pow(v,_);let w=b;this._controls.enableTurntableControls&&(w=new t.Spherical(1,b.phi,0));const E=this.rotationSphericalToOffset(w);this._controls.applyPositionVector(E),this._controls.enableTurntableControls&&this._controls.applyRotation([0,b.theta]),this._controls.enableObjectControls&&this._controls.applyRotation([b.phi,b.theta])}else this._damping.rotation.time=0;if(this._damping.zoom.duration>0)if(this._damping.zoom.time+p>this._damping.zoom.duration)this._damping.zoom.time=this._damping.zoom.duration,this._damping.zoom.duration=0;else{this._damping.zoom.time+=p;const _=this._damping.zoom.time/16.6666,b=this._damping.zoom.delta*Math.pow(v,_),w=this.zoomDistanceToOffset(b);this._controls.applyPositionVector(w)}else this._damping.zoom.time=0;if(this._controls.enableAutoRotation){const _=new t.Spherical(1,0,-this._adjustedSettings.autoRotationSpeed());let b=_;this._controls.enableTurntableControls&&(b=new t.Spherical(1,_.phi,0));const w=this.rotationSphericalToOffset(b);this._controls.applyPositionVector(w),this._controls.enableTurntableControls&&this._controls.applyRotation([0,_.theta]),this._controls.enableObjectControls&&this._controls.applyRotation([_.phi,_.theta])}}zoom(p,g,v,_){const b=Math.sqrt(p*p+g*g);if(!v)this._dollyStart=b;else{this._dollyEnd=b,this._dollyDelta=this._dollyEnd-this._dollyStart,this._dollyStart=this._dollyEnd,this._damping.zoom.duration>0&&(this._dollyDelta<0?this._dollyDelta=Math.min(this._dollyDelta,this._adjustedSettings.movementSmoothness()*this._damping.zoom.delta):this._dollyDelta=Math.max(this._dollyDelta,this._adjustedSettings.movementSmoothness()*this._damping.zoom.delta));const w=-this._dollyDelta*this._adjustedSettings.zoomSpeed()*(_?this._touchAdjustments.zoomSpeed:1),E=1-Math.max(.01,Math.min(1,this._adjustedSettings.damping())),S=(Math.log(1/Math.abs(this._dollyDelta))-5*Math.log(10))/Math.log(E);this._damping.zoom.time=0,this._damping.zoom.duration=S*16.6666,this._damping.zoom.delta=w,this._damping.rotation.duration=0,this._damping.pan.duration=0;const M=this.zoomDistanceToOffset(w);this._controls.applyPositionVector(M,!0)}}panDeltaToOffset(p){var g,v,_,b;const w=e.vec3.create(),E=e.vec3.create();if(!this._controls.canvas||this._controls.canvas.clientWidth==0||this._controls.canvas.clientHeight==0)return w;if(e.vec3.subtract(w,this._controls.getPositionWithManualUpdates(),this._controls.getTargetWithManualUpdates()),this._controls.camera instanceof n.OrthographicCamera){const S=this._controls.camera,M=e.mat4.targetTo(e.mat4.create(),S.position,S.target,S.up),k=e.vec3.fromValues(M[0],M[1],M[2]),x=-(p[0]*(S.right-S.left)*.5/((g=this._controls.canvas)===null||g===void 0?void 0:g.clientHeight));e.vec3.multiply(k,k,e.vec3.fromValues(x,x,x)),e.vec3.add(E,E,k);const C=e.vec3.fromValues(M[4],M[5],M[6]),P=p[1]*(S.right-S.left)*.5/((v=this._controls.canvas)===null||v===void 0?void 0:v.clientHeight);e.vec3.multiply(C,C,e.vec3.fromValues(P,P,P)),e.vec3.add(E,E,C)}else{let S=e.vec3.length(w);S*=Math.tan(this._controls.camera.fov/2*Math.PI/180);const M=e.mat4.targetTo(e.mat4.create(),this._controls.camera.position,this._controls.camera.target,e.vec3.fromValues(0,0,1)),k=e.vec3.fromValues(M[0],M[1],M[2]),x=-(2*p[0]*S/((_=this._controls.canvas)===null||_===void 0?void 0:_.clientHeight));e.vec3.multiply(k,k,e.vec3.fromValues(x,x,x)),e.vec3.add(E,E,k);const C=e.vec3.fromValues(M[4],M[5],M[6]),P=2*p[1]*S/((b=this._controls.canvas)===null||b===void 0?void 0:b.clientHeight);e.vec3.multiply(C,C,e.vec3.fromValues(P,P,P)),e.vec3.add(E,E,C)}return e.vec3.clone(E)}rotationSphericalToOffset(p){let g=e.vec3.create();e.vec3.subtract(g,this._controls.getPositionWithManualUpdates(),this._controls.getTargetWithManualUpdates()),e.vec3.transformQuat(g,g,this._quat);const v=new t.Spherical().fromVec3(g);v.theta+=p.theta,v.phi+=p.phi;const _=this._controls.rotationRestriction.minAzimuthAngle*(Math.PI/180),b=this._controls.rotationRestriction.maxAzimuthAngle*(Math.PI/180);return v.theta>Math.PI?(v.theta-=2*Math.PI,_>v.theta&&(v.theta+=2*Math.PI)):v.theta<-Math.PI&&(v.theta+=2*Math.PI,b<v.theta&&(v.theta-=2*Math.PI)),v.makeSafe(),g=v.toVec3(),g=e.vec3.transformQuat(e.vec3.create(),g,this._quatInverse),g=e.vec3.add(e.vec3.create(),g,this._controls.getTargetWithManualUpdates()),g=e.vec3.subtract(e.vec3.create(),g,this._controls.getPositionWithManualUpdates()),e.vec3.clone(g)}zoomDistanceToOffset(p){const g=e.vec3.create();return e.vec3.subtract(g,this._controls.getPositionWithManualUpdates(),this._controls.getTargetWithManualUpdates()),e.vec3.multiply(e.vec3.create(),g,e.vec3.fromValues(p,p,p))}};return S3.CameraControlsLogic=l,S3}var hx={};Object.defineProperty(hx,"__esModule",{value:!0});hx.CameraControlsEventDistribution=void 0;class zrt{constructor(e,n){this._active={rotation:!1,zoom:!1,pan:!1},this._activeEvents=!0,this._controls=e,this._cameraLogic=n}activateCameraEvents(){this._activeEvents=!0}deactivateCameraEvents(){this._activeEvents=!1,this.reset()}onDown(e){if(this._controls.camera.active===!1)return;const{x:n,y:i}=this.convertInput(e),o=e.pointerType==="touch",l=this.getInput(e),d=e.pointerType==="touch"?this._controls.input.touch:this._controls.input.mouse;if(l===d.rotate&&this._controls.enableRotation?(this._cameraLogic.rotate(n,i,this._active.rotation,o),this._active.rotation=!0):this._active.rotation=!1,l===d.pan&&this._controls.enablePan?(this._cameraLogic.pan(n,i,this._active.pan,o),this._active.pan=!0):this._active.pan=!1,l===d.zoom&&this._controls.enableZoom){let p=n,g=i;o&&this._controls.input.touch.zoom===2&&this._primaryPointerEvent&&this._secondaryPointerEvent&&(p=(this._primaryPointerEvent.pageX-this._secondaryPointerEvent.pageX)/window.innerWidth*(window.innerWidth/window.innerHeight),g=(this._primaryPointerEvent.pageY-this._secondaryPointerEvent.pageY)/window.innerHeight),this._cameraLogic.zoom(p,g,this._active.zoom,o),this._active.zoom=!0}else this._active.zoom=!1}onKey(e){if(this._controls.camera.active!==!1&&this._controls.enableKeyPan)switch(e.keyCode){case this._controls.input.keys.up:this._cameraLogic.pan(0,0,!1,!1),this._cameraLogic.pan(0,this._controls.keyPanSpeed*.05,!0,!1),e.preventDefault(),e.stopPropagation();break;case this._controls.input.keys.down:this._cameraLogic.pan(0,0,!1,!1),this._cameraLogic.pan(0,-this._controls.keyPanSpeed*.05,!0,!1),e.preventDefault(),e.stopPropagation();break;case this._controls.input.keys.left:this._cameraLogic.pan(0,0,!1,!1),this._cameraLogic.pan(this._controls.keyPanSpeed*.05,0,!0,!1),e.preventDefault(),e.stopPropagation();break;case this._controls.input.keys.right:this._cameraLogic.pan(0,0,!1,!1),this._cameraLogic.pan(-this._controls.keyPanSpeed*.05,0,!0,!1),e.preventDefault(),e.stopPropagation();break}}onKeyDown(e){this._controls.camera.active!==!1&&this._activeEvents&&this.onKey(e)}onKeyUp(e){}onMouseWheel(e){this._controls.camera.active!==!1&&this._activeEvents&&this.onWheel(e)}onMove(e){if(this._controls.camera.active===!1)return;const{x:n,y:i}=this.convertInput(e),o=e.pointerType==="touch";if(this._controls.enableRotation&&this._active.rotation&&this._cameraLogic.rotate(n,i,this._active.rotation,o),this._controls.enablePan&&this._active.pan&&this._cameraLogic.pan(n,i,this._active.pan,o),this._controls.enableZoom&&this._active.zoom){let l=n,d=i;o&&this._controls.input.touch.zoom===2&&this._primaryPointerEvent&&this._secondaryPointerEvent&&(l=(this._primaryPointerEvent.pageX-this._secondaryPointerEvent.pageX)/window.innerWidth*(window.innerWidth/window.innerHeight),d=(this._primaryPointerEvent.pageY-this._secondaryPointerEvent.pageY)/window.innerHeight),this._cameraLogic.zoom(l,d,this._active.zoom,o)}}onPointerDown(e){this._controls.camera.active!==!1&&this._activeEvents&&(e.isPrimary===!0?this._primaryPointerEvent=e:e.isPrimary===!1&&(this._secondaryPointerEvent=e),this.onDown(e))}onPointerEnd(e){this._controls.camera.active!==!1&&this._activeEvents&&(e.isPrimary===!0?this._primaryPointerEvent=void 0:e.isPrimary===!1&&(this._secondaryPointerEvent=void 0),this.onUp(e))}onPointerMove(e){this._controls.camera.active!==!1&&this._activeEvents&&(e.isPrimary===!0?this._primaryPointerEvent=e:e.isPrimary===!1&&(this._secondaryPointerEvent=e),this.onMove(e))}onPointerOut(e){this._controls.camera.active!==!1&&(e.isPrimary===!0?this._primaryPointerEvent=void 0:e.isPrimary===!1&&(this._secondaryPointerEvent=void 0))}onPointerUp(e){this._controls.camera.active!==!1&&(e.isPrimary===!0?this._primaryPointerEvent=void 0:e.isPrimary===!1&&(this._secondaryPointerEvent=void 0))}onUp(e){this._controls.camera.active!==!1&&(this._active.rotation=!1,this._active.zoom=!1,this._active.pan=!1)}onWheel(e){if(this._controls.camera.active===!1||!this._activeEvents||!this._controls.enableZoom)return;let n=0;e.deltaY!==void 0?n=-e.deltaY:e.detail!==void 0&&(n=-e.detail),Math.sign(n)>0?(this._cameraLogic.zoom(0,0,!1,!1),this._cameraLogic.zoom(1,0,!0,!1)):(this._cameraLogic.zoom(1,0,!1,!1),this._cameraLogic.zoom(0,0,!0,!1))}reset(){this._active={rotation:!1,zoom:!1,pan:!1}}convertInput(e){return this._primaryPointerEvent&&this._secondaryPointerEvent?{x:(this._primaryPointerEvent.pageX+this._secondaryPointerEvent.pageX)/2,y:(this._primaryPointerEvent.pageY+this._secondaryPointerEvent.pageY)/2}:{x:e.clientX,y:e.clientY}}getInput(e){return e.pointerType==="touch"?this._secondaryPointerEvent?2:1:e.button}}hx.CameraControlsEventDistribution=zrt;var hoe;function _ye(){if(hoe)return w3;hoe=1,Object.defineProperty(w3,"__esModule",{value:!0}),w3.OrthographicCameraControls=void 0;const t=dx,e=vye(),n=hx;let i=class extends t.AbstractCameraControls{constructor(l,d){super(l,d),this._settingsAdjustments={autoRotationSpeed:2*Math.PI/60/60,damping:1,movementSmoothness:1,panSpeed:1.75,rotationSpeed:Math.PI,zoomSpeed:.025},this._touchAdjustments={autoRotationSpeed:1,damping:1,movementSmoothness:1,panSpeed:4/1.75,rotationSpeed:1.5,zoomSpeed:100},this._cameraLogic=new e.CameraControlsLogic(this,this._settingsAdjustments,this._touchAdjustments),this._cameraControlsEventDistribution=new n.CameraControlsEventDistribution(this,this._cameraLogic)}};return w3.OrthographicCameraControls=i,w3}var poe;function vQ(){if(poe)return A3;poe=1;var t=X&&X.__awaiter||function(L,B,V,G){function j(F){return F instanceof V?F:new V(function(q){q(F)})}return new(V||(V=Promise))(function(F,q){function fe(le){try{J(G.next(le))}catch(me){q(me)}}function ue(le){try{J(G.throw(le))}catch(me){q(me)}}function J(le){le.done?F(le.value):j(le.value).then(fe,ue)}J((G=G.apply(L,B||[])).next())})},e=X&&X.__classPrivateFieldGet||function(L,B,V,G){if(V==="a"&&!G)throw new TypeError("Private accessor was defined without a getter");if(typeof B=="function"?L!==B||!G:!B.has(L))throw new TypeError("Cannot read private member from an object whose class did not declare it");return V==="m"?G:V==="a"?G.call(L):G?G.value:B.get(L)},n=X&&X.__classPrivateFieldSet||function(L,B,V,G,j){if(G==="m")throw new TypeError("Private method is not writable");if(G==="a"&&!j)throw new TypeError("Private accessor was defined without a setter");if(typeof B=="function"?L!==B||!j:!B.has(L))throw new TypeError("Cannot write private member to an object whose class did not declare it");return G==="a"?j.call(L,V):j?j.value=V:B.set(L,V),V},i,o,l,d,p,g,v,_,b,w;Object.defineProperty(A3,"__esModule",{value:!0}),A3.OrthographicCamera=void 0;const E=pv,S=uA,M=fx,k=dr,x=Cr,C=_ye(),P=Mn;class O extends E.AbstractCamera{constructor(B,V){super(B,S.CAMERA_TYPE.ORTHOGRAPHIC,V),i.set(this,P.Converter.instance),o.set(this,P.Logger.instance),l.set(this,k.Tree.instance),d.set(this,-100),p.set(this,M.ORTHOGRAPHIC_CAMERA_DIRECTION.CUSTOM),g.set(this,void 0),v.set(this,-100),_.set(this,100),b.set(this,100),w.set(this,x.vec3.fromValues(0,0,1)),this._controls=new C.OrthographicCameraControls(this,!0)}get bottom(){return e(this,d,"f")}set bottom(B){n(this,d,B,"f")}get controls(){return this._controls}set controls(B){this._controls=B}get direction(){return e(this,p,"f")}set direction(B){const V=e(this,p,"f")!==B;switch(n(this,p,B,"f"),e(this,p,"f")){case M.ORTHOGRAPHIC_CAMERA_DIRECTION.TOP:case M.ORTHOGRAPHIC_CAMERA_DIRECTION.BOTTOM:this.up=x.vec3.fromValues(0,1,0);break;case M.ORTHOGRAPHIC_CAMERA_DIRECTION.RIGHT:case M.ORTHOGRAPHIC_CAMERA_DIRECTION.LEFT:this.up=x.vec3.fromValues(0,0,1);break;case M.ORTHOGRAPHIC_CAMERA_DIRECTION.BACK:case M.ORTHOGRAPHIC_CAMERA_DIRECTION.FRONT:this.up=x.vec3.fromValues(0,0,1);break;default:this.up=x.vec3.fromValues(0,0,1)}if(V){const{position:G,target:j}=this.calculateZoomTo(void 0);this.defaultPosition=x.vec3.clone(G),this.defaultTarget=x.vec3.clone(j),this.position=x.vec3.clone(G),this.target=x.vec3.clone(j)}}get left(){return e(this,v,"f")}set left(B){n(this,v,B,"f")}get right(){return e(this,_,"f")}set right(B){n(this,_,B,"f")}get top(){return e(this,b,"f")}set top(B){n(this,b,B,"f")}get up(){return e(this,w,"f")}set up(B){n(this,w,B,"f")}applySettings(B){const V=B.camera.cameras[this.id];if(V){this.name=V.name,this.autoAdjust=V.autoAdjust,this.cameraMovementDuration=V.cameraMovementDuration,this.enableCameraControls=V.enableCameraControls,this.revertAtMouseUp=V.revertAtMouseUp,this.revertAtMouseUpDuration=V.revertAtMouseUpDuration,this.sceneRotation=x.vec2.fromValues(V.sceneRotation.x,V.sceneRotation.y),this.zoomExtentsFactor=V.zoomExtentsFactor;const G=e(this,i,"f").toVec3(V.position),j=e(this,i,"f").toVec3(V.target);this.defaultPosition=x.vec3.clone(G),this.defaultTarget=x.vec3.clone(j),this.position=G,this.target=j}this.position[0]===this.target[0]&&this.position[1]===this.target[1]&&this.position[2]===this.target[2]&&this._viewportId&&this._stateEngine.viewportEngines[this._viewportId].boundingBoxCreated.then(()=>t(this,void 0,void 0,function*(){yield this.zoomTo(void 0,{duration:0}),this.defaultPosition=x.vec3.clone(this._controls.position),this.defaultTarget=x.vec3.clone(this._controls.target)})),this._controls.applySettings(B)}assignViewer(B){if(B.closed)throw new P.ShapeDiverViewerCameraError(`OrthographicCamera(${this.id}).assignViewer: Viewer with id ${B.id} not found.`);this.assignViewerInternal(B.id,B.canvas),this._controls.assignViewer(B.id,B.canvas),this.domEventListenerToken&&e(this,g,"f")&&e(this,g,"f").removeDomEventListener(this.domEventListenerToken),n(this,g,B.domEventEngine,"f"),this.domEventListenerToken=e(this,g,"f").addDomEventListener(this._controls.cameraControlsEventDistribution),this.boundingBox=e(this,l,"f").root.boundingBox.clone(),this._stateEngine.viewportEngines[B.id].boundingBoxCreated.then(()=>t(this,void 0,void 0,function*(){this.position[0]===this.target[0]&&this.position[1]===this.target[1]&&this.position[2]===this.target[2]&&(yield this.zoomTo(void 0,{duration:0}))}))}calculateZoomTo(B,V=this.position,G=this.target){let j;if(B?j=B.clone():j=this._boundingBox.clone(),j.isEmpty())return{position:x.vec3.create(),target:x.vec3.create()};const F=x.vec3.fromValues((j.max[0]+j.min[0])/2,(j.max[1]+j.min[1])/2,(j.max[2]+j.min[2])/2);V[0]===G[0]&&V[1]===G[1]&&V[2]===G[2]&&(V=x.vec3.fromValues(F[0],F[1]-7.5,F[2]+5));const q=2*j.boundingSphere.radius*this.zoomExtentsFactor;switch(e(this,p,"f")){case M.ORTHOGRAPHIC_CAMERA_DIRECTION.TOP:return{position:x.vec3.fromValues(F[0],F[1],F[2]+q),target:x.vec3.clone(F)};case M.ORTHOGRAPHIC_CAMERA_DIRECTION.BOTTOM:return{position:x.vec3.fromValues(F[0],F[1],F[2]-q),target:x.vec3.clone(F)};case M.ORTHOGRAPHIC_CAMERA_DIRECTION.RIGHT:return{position:x.vec3.fromValues(F[0]+q,F[1],F[2]),target:x.vec3.clone(F)};case M.ORTHOGRAPHIC_CAMERA_DIRECTION.LEFT:return{position:x.vec3.fromValues(F[0]-q,F[1],F[2]),target:x.vec3.clone(F)};case M.ORTHOGRAPHIC_CAMERA_DIRECTION.BACK:return{position:x.vec3.fromValues(F[0],F[1]+q,F[2]),target:x.vec3.clone(F)};case M.ORTHOGRAPHIC_CAMERA_DIRECTION.FRONT:return{position:x.vec3.fromValues(F[0],F[1]-q,F[2]),target:x.vec3.clone(F)};default:{const fe=x.vec3.subtract(x.vec3.create(),V,F);return x.vec3.normalize(fe,fe),{position:x.vec3.add(x.vec3.create(),F,x.vec3.scale(x.vec3.create(),fe,q)),target:x.vec3.clone(F)}}}}clone(){return new O(this.id,this.version)}project(B){const V=x.mat4.targetTo(x.mat4.create(),this.position,this.target,this.up),G=x.mat4.ortho(x.mat4.create(),this.left,this.right,this.bottom,this.top,this.near,this.far);return x.vec3.transformMat4(B,B,x.mat4.invert(V,V)),x.vec3.transformMat4(B,B,G),x.vec2.fromValues(B[0],B[1])}unproject(B){const V=x.mat4.targetTo(x.mat4.create(),this.position,this.target,this.up),G=x.mat4.ortho(x.mat4.create(),this.left,this.right,this.bottom,this.top,this.near,this.far);return x.vec3.transformMat4(B,B,x.mat4.invert(G,G)),x.vec3.transformMat4(B,B,V),x.vec3.clone(B)}}return A3.OrthographicCamera=O,i=new WeakMap,o=new WeakMap,l=new WeakMap,d=new WeakMap,p=new WeakMap,g=new WeakMap,v=new WeakMap,_=new WeakMap,b=new WeakMap,w=new WeakMap,A3}var px={},mx={};Object.defineProperty(mx,"__esModule",{value:!0});mx.PerspectiveCameraControls=void 0;const Brt=dx,Urt=vye(),Frt=hx;class Vrt extends Brt.AbstractCameraControls{constructor(e,n){super(e,n),this._settingsAdjustments={autoRotationSpeed:2*Math.PI/60/60,damping:1,movementSmoothness:1,panSpeed:1.75,rotationSpeed:Math.PI,zoomSpeed:.025},this._touchAdjustments={autoRotationSpeed:1,damping:1,movementSmoothness:1,panSpeed:1/1.75,rotationSpeed:1.5,zoomSpeed:100},this._cameraLogic=new Urt.CameraControlsLogic(this,this._settingsAdjustments,this._touchAdjustments),this._cameraControlsEventDistribution=new Frt.CameraControlsEventDistribution(this,this._cameraLogic)}}mx.PerspectiveCameraControls=Vrt;var moe=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})},q8=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},Yp=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},nD,d$,CE,wy,rD;Object.defineProperty(px,"__esModule",{value:!0});px.PerspectiveCamera=void 0;const Grt=pv,WF=Rl(),jrt=uA,Hrt=dr,kt=Cr,$rt=mx,goe=Mn;let Wrt=class yye extends Grt.AbstractCamera{constructor(e,n,i){super(e,jrt.CAMERA_TYPE.PERSPECTIVE,n),nD.set(this,goe.Converter.instance),d$.set(this,Hrt.Tree.instance),CE.set(this,void 0),wy.set(this,void 0),rD.set(this,60),q8(this,CE,i,"f"),this._controls=new $rt.PerspectiveCameraControls(this,!0)}get aspect(){return Yp(this,CE,"f")}set aspect(e){q8(this,CE,e,"f")}get controls(){return this._controls}set controls(e){this._controls=e}get fov(){return Yp(this,rD,"f")}set fov(e){q8(this,rD,e,"f")}applySettings(e){const n=e.camera.cameras[this.id];if(n){this.name=n.name,this.autoAdjust=n.autoAdjust,this.cameraMovementDuration=n.cameraMovementDuration,this.enableCameraControls=n.enableCameraControls,this.revertAtMouseUp=n.revertAtMouseUp,this.revertAtMouseUpDuration=n.revertAtMouseUpDuration,this.sceneRotation=kt.vec2.fromValues(n.sceneRotation.x,n.sceneRotation.y),this.zoomExtentsFactor=n.zoomExtentsFactor;const i=Yp(this,nD,"f").toVec3(n.position),o=Yp(this,nD,"f").toVec3(n.target);this.defaultPosition=kt.vec3.clone(i),this.defaultTarget=kt.vec3.clone(o),this.position=i,this.target=o,this.fov=n.fov}this.position[0]===this.target[0]&&this.position[1]===this.target[1]&&this.position[2]===this.target[2]&&this._viewportId&&this._stateEngine.viewportEngines[this._viewportId].boundingBoxCreated.then(()=>moe(this,void 0,void 0,function*(){yield this.zoomTo(void 0,{duration:0}),this.defaultPosition=kt.vec3.clone(this._controls.position),this.defaultTarget=kt.vec3.clone(this._controls.target)})),this._controls.applySettings(e)}assignViewer(e){if(e.closed)throw new goe.ShapeDiverViewerCameraError(`OrthographicCamera(${this.id}).assignViewer: Viewer with id ${e.id} not found.`);this.assignViewerInternal(e.id,e.canvas),this._controls.assignViewer(e.id,e.canvas),this.domEventListenerToken&&Yp(this,wy,"f")&&Yp(this,wy,"f").removeDomEventListener(this.domEventListenerToken),q8(this,wy,e.domEventEngine,"f"),this.domEventListenerToken=Yp(this,wy,"f").addDomEventListener(this._controls.cameraControlsEventDistribution),this.boundingBox=Yp(this,d$,"f").root.boundingBox.clone(),this._stateEngine.viewportEngines[e.id].boundingBoxCreated.then(()=>moe(this,void 0,void 0,function*(){this.position[0]===this.target[0]&&this.position[1]===this.target[1]&&this.position[2]===this.target[2]&&(yield this.zoomTo(void 0,{duration:0}))}))}calculateZoomTo(e,n=this.position,i=this.target){let o;if(e?o=e.clone():o=this._boundingBox.clone(),o.isEmpty())return{position:kt.vec3.create(),target:kt.vec3.create()};const l=n[0]===i[0]&&n[1]===i[1]&&n[2]===i[2],d=kt.vec3.fromValues((o.max[0]+o.min[0])/2,(o.max[1]+o.min[1])/2,(o.max[2]+o.min[2])/2);n[0]===i[0]&&n[1]===i[1]&&n[2]===i[2]&&(n=kt.vec3.fromValues(d[0],d[1]-7.5,d[2]+5));const p=kt.vec3.subtract(kt.vec3.create(),o.max,d);kt.vec3.multiply(p,p,l?kt.vec3.fromValues(2,2,2):kt.vec3.fromValues(this.zoomExtentsFactor,this.zoomExtentsFactor,this.zoomExtentsFactor)),o=new WF.Box(kt.vec3.subtract(kt.vec3.create(),d,p),kt.vec3.add(kt.vec3.create(),d,p));const g=kt.vec3.normalize(kt.vec3.create(),kt.vec3.subtract(kt.vec3.create(),d,n)),v=kt.vec3.normalize(kt.vec3.create(),kt.vec3.cross(kt.vec3.create(),kt.vec3.fromValues(0,0,1),g)),_=kt.vec3.normalize(kt.vec3.create(),kt.vec3.cross(kt.vec3.create(),v,g));let b=kt.vec3.add(kt.vec3.create(),d,kt.vec3.multiply(kt.vec3.create(),g,kt.vec3.fromValues(-1e-8,-1e-8,-1e-8)));const w=[];w.push(kt.vec3.fromValues(o.min[0],o.min[1],o.min[2])),w.push(kt.vec3.fromValues(o.min[0],o.min[1],o.max[2])),w.push(kt.vec3.fromValues(o.min[0],o.max[1],o.min[2])),w.push(kt.vec3.fromValues(o.min[0],o.max[1],o.max[2])),w.push(kt.vec3.fromValues(o.max[0],o.min[1],o.min[2])),w.push(kt.vec3.fromValues(o.max[0],o.min[1],o.max[2])),w.push(kt.vec3.fromValues(o.max[0],o.max[1],o.min[2])),w.push(kt.vec3.fromValues(o.max[0],o.max[1],o.max[2]));const E=kt.vec3.normalize(kt.vec3.create(),kt.vec3.transformQuat(kt.vec3.create(),g,kt.quat.setAxisAngle(kt.quat.create(),v,this.fov/2*(Math.PI/180)))),S=kt.vec3.normalize(kt.vec3.create(),kt.vec3.transformQuat(kt.vec3.create(),g,kt.quat.setAxisAngle(kt.quat.create(),v,-(this.fov/2)*(Math.PI/180)))),M=l?1.5:this.aspect||1.5,k=2*Math.atan(Math.tan(this.fov*Math.PI/180/2)*M),x=kt.vec3.normalize(kt.vec3.create(),kt.vec3.transformQuat(kt.vec3.create(),g,kt.quat.setAxisAngle(kt.quat.create(),_,k/2))),C=kt.vec3.normalize(kt.vec3.create(),kt.vec3.transformQuat(kt.vec3.create(),g,kt.quat.setAxisAngle(kt.quat.create(),_,-k/2))),P=new WF.Plane(kt.vec3.clone(v),0);P.setFromNormalAndCoplanarPoint(kt.vec3.clone(v),kt.vec3.clone(d));const O=new WF.Plane(kt.vec3.fromValues(0,0,1),0);O.setFromNormalAndCoplanarPoint(kt.vec3.clone(_),kt.vec3.clone(d));let L=0;for(let B=0;B<w.length;B++){let V=P.clampPoint(w[B]),G=kt.vec3.normalize(kt.vec3.create(),kt.vec3.subtract(kt.vec3.create(),V,b));if(kt.vec3.dot(g,E)>kt.vec3.dot(g,G)){const j=kt.vec3.multiply(kt.vec3.create(),kt.vec3.dot(E,G)>kt.vec3.dot(S,G)?E:S,kt.vec3.fromValues(-1,-1,-1)),F=O.intersect(V,j);if(F){const q=kt.vec3.add(kt.vec3.create(),kt.vec3.multiply(kt.vec3.create(),j,kt.vec3.fromValues(F,F,F)),V);L=Math.max(L,kt.vec3.distance(d,q))}}if(V=O.clampPoint(w[B]),G=kt.vec3.normalize(kt.vec3.create(),kt.vec3.subtract(kt.vec3.create(),V,b)),kt.vec3.dot(g,x)>kt.vec3.dot(g,G)){const j=kt.vec3.multiply(kt.vec3.create(),kt.vec3.dot(x,G)>kt.vec3.dot(C,G)?x:C,kt.vec3.fromValues(-1,-1,-1)),F=P.intersect(V,j);if(F){const q=kt.vec3.add(kt.vec3.create(),kt.vec3.multiply(kt.vec3.create(),j,kt.vec3.fromValues(F,F,F)),V);L=Math.max(L,kt.vec3.distance(d,q))}}}return b=kt.vec3.add(kt.vec3.create(),d,kt.vec3.multiply(kt.vec3.create(),g,kt.vec3.fromValues(-L,-L,-L))),{position:b,target:d}}clone(){return new yye(this.id,this.version,this.aspect)}project(e,n=this.position,i=this.target){const o=kt.mat4.targetTo(kt.mat4.create(),n,i,kt.vec3.fromValues(0,0,1)),l=this.aspect||1.5,d=kt.mat4.perspective(kt.mat4.create(),this.fov/(180/Math.PI),l,this.near,this.far);return kt.vec3.transformMat4(e,e,kt.mat4.invert(o,o)),kt.vec3.transformMat4(e,e,d),kt.vec2.fromValues(e[0],e[1])}unproject(e,n=this.position,i=this.target){const o=kt.mat4.targetTo(kt.mat4.create(),n,i,kt.vec3.fromValues(0,0,1)),l=this.aspect||1.5,d=kt.mat4.perspective(kt.mat4.create(),this.fov/(180/Math.PI),l,this.near,this.far);return kt.vec3.transformMat4(e,e,kt.mat4.invert(d,d)),kt.vec3.transformMat4(e,e,o),kt.vec3.clone(e)}};px.PerspectiveCamera=Wrt;nD=new WeakMap,d$=new WeakMap,CE=new WeakMap,wy=new WeakMap,rD=new WeakMap;Object.defineProperty(LN,"__esModule",{value:!0});LN.CameraEngine=void 0;const Yrt=pv,voe=Rl(),Qu=uA,_oe=dr,d_=fx,qrt=vQ(),Xrt=px,yoe=Cr,d1=Mn;class Zrt{constructor(e){this._renderingEngine=e,this._cameraNode=new _oe.TreeNode("cameras"),this._cameras={},this._eventEngine=d1.EventEngine.instance,this._logger=d1.Logger.instance,this._stateEngine=d1.StateEngine.instance,this._tree=_oe.Tree.instance,this._uuidGenerator=d1.UuidGenerator.instance,this._camera=null,this._settingsApplied=!1,this._boundingBox=new voe.Box,this._tree.root.addChild(this._cameraNode),this._cameraNode.restrictViewports=[this._renderingEngine.id],this._eventEngine.addListener(d1.EVENTTYPE.SCENE.SCENE_BOUNDING_BOX_CHANGE,n=>{const i=n;if(i.viewportId===this._renderingEngine.id){this._boundingBox=new voe.Box(i.boundingBox.min,i.boundingBox.max);const o=this.cameras;for(const l in o)o[l].boundingBox=this._boundingBox.clone()}}),this._eventEngine.addListener(d1.EVENTTYPE.VIEWPORT.VIEWPORT_UPDATED,n=>{n.viewportId===this._renderingEngine.id&&this.searchForNewCameras()})}get camera(){return this._camera}get cameras(){return this._cameras}get update(){return this._update}set update(e){this._update=e}activateCameraEvents(){const e=this.cameras;for(const n in e)e[n].controls.cameraControlsEventDistribution.activateCameraEvents()}applySettings(e){const n=this.cameras;for(const o in n)this.removeCamera(o);for(const o in e.settings.camera.cameras){const l=e.settings.camera.cameras[o];if(l.type==="perspective")this.createCamera(Qu.CAMERA_TYPE.PERSPECTIVE,o);else{const d=this.createCamera(Qu.CAMERA_TYPE.ORTHOGRAPHIC,o);d.direction=l.type}}for(const o in n)n[o].applySettings(e);const i=Object.keys(e.settings.camera.cameras);i.length>0?e.settings.camera.cameraId?this.assignCamera(e.settings.camera.cameraId):this.assignCamera(i[0]):(this.createDefaultCameras(),this.camera.applySettings(e)),this._settingsApplied=!0,this._update&&this._update()}assignCamera(e){const n=this.cameras[e];if(!n)return!1;for(const i in this.cameras)this.cameras[i].active=!1;return this._camera=n,this._camera.active=!0,!0}createCamera(e,n){const i=this.cameras,o=n||this._uuidGenerator.create();if(i[o])throw new d1.ShapeDiverViewerCameraError(`CameraEngine.createCamera: Camera (${e}) with this id (${o}) already exists.`);const l=this._renderingEngine.canvas.parentNode.clientWidth/this._renderingEngine.canvas.parentNode.clientHeight,d=Qu.CAMERA_TYPE.PERSPECTIVE===e?new Xrt.PerspectiveCamera(o,void 0,l):new qrt.OrthographicCamera(o);return d.assignViewer(this._renderingEngine),i[o]=d,this._settingsApplied&&this._renderingEngine.settingsEngine?d.applySettings(this._renderingEngine.settingsEngine):d.zoomTo(void 0,{duration:0}),this._cameraNode.addData(d),this._update&&this._update(),d}createDefaultCameras(){const e=this.createCamera(Qu.CAMERA_TYPE.ORTHOGRAPHIC,"top");e.direction=d_.ORTHOGRAPHIC_CAMERA_DIRECTION.TOP;const n=this.createCamera(Qu.CAMERA_TYPE.ORTHOGRAPHIC,"bottom");n.direction=d_.ORTHOGRAPHIC_CAMERA_DIRECTION.BOTTOM;const i=this.createCamera(Qu.CAMERA_TYPE.ORTHOGRAPHIC,"left");i.direction=d_.ORTHOGRAPHIC_CAMERA_DIRECTION.LEFT;const o=this.createCamera(Qu.CAMERA_TYPE.ORTHOGRAPHIC,"right");o.direction=d_.ORTHOGRAPHIC_CAMERA_DIRECTION.RIGHT;const l=this.createCamera(Qu.CAMERA_TYPE.ORTHOGRAPHIC,"front");l.direction=d_.ORTHOGRAPHIC_CAMERA_DIRECTION.FRONT;const d=this.createCamera(Qu.CAMERA_TYPE.ORTHOGRAPHIC,"back");d.direction=d_.ORTHOGRAPHIC_CAMERA_DIRECTION.BACK,this.createCamera(Qu.CAMERA_TYPE.ORTHOGRAPHIC,"orthographic");const p=this.createCamera(Qu.CAMERA_TYPE.PERSPECTIVE,"perspective");this.assignCamera(p.id)}deactivateCameraEvents(){const e=this.cameras;for(const n in e)e[n].controls.cameraControlsEventDistribution.deactivateCameraEvents()}removeCamera(e){const n=this.cameras,i=n[e];return i?(i.domEventListenerToken&&this._renderingEngine.domEventEngine.removeDomEventListener(i.domEventListenerToken),this._camera&&this._camera.id===e&&(this._camera=null),delete n[e],this._cameraNode.removeData(i),this._update&&this._update(),!0):!1}saveSettings(e){e.settings.camera.cameraId=this._camera?this._camera.id:"perspective",e.settings.camera.cameras={};for(const n in this.cameras){const i=this.cameras[n];if(i.type===Qu.CAMERA_TYPE.PERSPECTIVE){const o=i.controls;e.camera.cameras[i.id]={name:i.name,autoAdjust:i.autoAdjust,cameraMovementDuration:i.cameraMovementDuration,enableCameraControls:i.enableCameraControls,revertAtMouseUp:i.revertAtMouseUp,revertAtMouseUpDuration:i.revertAtMouseUpDuration,zoomExtentsFactor:i.zoomExtentsFactor,position:{x:i.defaultPosition[0],y:i.defaultPosition[1],z:i.defaultPosition[2]},target:{x:i.defaultTarget[0],y:i.defaultTarget[1],z:i.defaultTarget[2]},type:i.type,fov:i.fov,sceneRotation:{x:i.sceneRotation[0],y:i.sceneRotation[1]},controls:{autoRotationSpeed:o.autoRotationSpeed,damping:o.damping,enableAutoRotation:o.enableAutoRotation,enableKeyPan:o.enableKeyPan,enablePan:o.enablePan,enableRotation:o.enableRotation,enableZoom:o.enableZoom,input:o.input,keyPanSpeed:o.keyPanSpeed,movementSmoothness:o.movementSmoothness,rotationSpeed:o.rotationSpeed,panSpeed:o.panSpeed,zoomSpeed:o.zoomSpeed,restrictions:{position:{cube:{min:{x:o.cubePositionRestriction.min[0],y:o.cubePositionRestriction.min[1],z:o.cubePositionRestriction.min[2]},max:{x:o.cubePositionRestriction.max[0],y:o.cubePositionRestriction.max[1],z:o.cubePositionRestriction.max[2]}},sphere:{center:{x:o.spherePositionRestriction.center[0],y:o.spherePositionRestriction.center[1],z:o.spherePositionRestriction.center[2]},radius:o.spherePositionRestriction.radius}},target:{cube:{min:{x:o.cubeTargetRestriction.min[0],y:o.cubeTargetRestriction.min[1],z:o.cubeTargetRestriction.min[2]},max:{x:o.cubeTargetRestriction.max[0],y:o.cubeTargetRestriction.max[1],z:o.cubeTargetRestriction.max[2]}},sphere:{center:{x:o.sphereTargetRestriction.center[0],y:o.sphereTargetRestriction.center[1],z:o.sphereTargetRestriction.center[2]},radius:o.sphereTargetRestriction.radius}},rotation:o.rotationRestriction,zoom:o.zoomRestriction},enableAzimuthRotation:o.enableAzimuthRotation,enablePolarRotation:o.enablePolarRotation,enableObjectControls:o.enableObjectControls,enableTurntableControls:o.enableTurntableControls,turntableCenter:{x:o.turntableCenter[0],y:o.turntableCenter[1],z:o.turntableCenter[2]},objectControlsCenter:{x:o.objectControlsCenter[0],y:o.objectControlsCenter[1],z:o.objectControlsCenter[2]}}}}else{e.camera.cameras[i.id]&&e.camera.cameras[i.id].type!==i.type&&e.camera.cameras[i.id].position.x===i.defaultPosition[0]&&e.camera.cameras[i.id].position.y===i.defaultPosition[1]&&e.camera.cameras[i.id].position.z===i.defaultPosition[2]&&e.camera.cameras[i.id].target.x===i.defaultTarget[0]&&e.camera.cameras[i.id].target.y===i.defaultTarget[1]&&e.camera.cameras[i.id].target.z===i.defaultTarget[2]&&(i.defaultPosition=yoe.vec3.clone(i.position),i.defaultTarget=yoe.vec3.clone(i.target));const o=i.controls;e.camera.cameras[i.id]={name:i.name,autoAdjust:i.autoAdjust,cameraMovementDuration:i.cameraMovementDuration,enableCameraControls:i.enableCameraControls,revertAtMouseUp:i.revertAtMouseUp,revertAtMouseUpDuration:i.revertAtMouseUpDuration,zoomExtentsFactor:i.zoomExtentsFactor,position:{x:i.defaultPosition[0],y:i.defaultPosition[1],z:i.defaultPosition[2]},target:{x:i.defaultTarget[0],y:i.defaultTarget[1],z:i.defaultTarget[2]},type:i.direction,sceneRotation:{x:i.sceneRotation[0],y:i.sceneRotation[1]},controls:{autoRotationSpeed:o.autoRotationSpeed,damping:o.damping,enableAutoRotation:o.enableAutoRotation,enableKeyPan:o.enableKeyPan,enablePan:o.enablePan,enableRotation:o.enableRotation,enableZoom:o.enableZoom,input:o.input,keyPanSpeed:o.keyPanSpeed,movementSmoothness:o.movementSmoothness,rotationSpeed:o.rotationSpeed,panSpeed:o.panSpeed,zoomSpeed:o.zoomSpeed,restrictions:{position:{cube:{min:{x:o.cubePositionRestriction.min[0],y:o.cubePositionRestriction.min[1],z:o.cubePositionRestriction.min[2]},max:{x:o.cubePositionRestriction.max[0],y:o.cubePositionRestriction.max[1],z:o.cubePositionRestriction.max[2]}},sphere:{center:{x:o.spherePositionRestriction.center[0],y:o.spherePositionRestriction.center[1],z:o.spherePositionRestriction.center[2]},radius:o.spherePositionRestriction.radius}},target:{cube:{min:{x:o.cubeTargetRestriction.min[0],y:o.cubeTargetRestriction.min[1],z:o.cubeTargetRestriction.min[2]},max:{x:o.cubeTargetRestriction.max[0],y:o.cubeTargetRestriction.max[1],z:o.cubeTargetRestriction.max[2]}},sphere:{center:{x:o.sphereTargetRestriction.center[0],y:o.sphereTargetRestriction.center[1],z:o.sphereTargetRestriction.center[2]},radius:o.sphereTargetRestriction.radius}},rotation:o.rotationRestriction,zoom:o.zoomRestriction},enableAzimuthRotation:o.enableAzimuthRotation,enablePolarRotation:o.enablePolarRotation,enableObjectControls:o.enableObjectControls,enableTurntableControls:o.enableTurntableControls,turntableCenter:{x:o.turntableCenter[0],y:o.turntableCenter[1],z:o.turntableCenter[2]},objectControlsCenter:{x:o.objectControlsCenter[0],y:o.objectControlsCenter[1],z:o.objectControlsCenter[2]}}}}}}searchForNewCameras(){const e=n=>{for(let i=0;i<n.data.length;i++)if(n.data[i]instanceof Yrt.AbstractCamera&&!this._cameras[n.data[i].id]){const o=n.data[i];o.viewportId===this._renderingEngine.id&&(this._cameras[o.id]=o)}for(let i=0;i<n.children.length;i++)e(n.children[i])};e(this._tree.root),this._update&&this._update()}}LN.CameraEngine=Zrt;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.OrthographicCameraControls=t.PerspectiveCameraControls=t.OrthographicCamera=t.PerspectiveCamera=t.ORTHOGRAPHIC_CAMERA_DIRECTION=t.CAMERA_TYPE=t.AbstractCamera=t.CameraEngine=void 0;const e=pv;Object.defineProperty(t,"AbstractCamera",{enumerable:!0,get:function(){return e.AbstractCamera}});const n=uA;Object.defineProperty(t,"CAMERA_TYPE",{enumerable:!0,get:function(){return n.CAMERA_TYPE}});const i=LN;Object.defineProperty(t,"CameraEngine",{enumerable:!0,get:function(){return i.CameraEngine}});const o=fx;Object.defineProperty(t,"ORTHOGRAPHIC_CAMERA_DIRECTION",{enumerable:!0,get:function(){return o.ORTHOGRAPHIC_CAMERA_DIRECTION}});const l=vQ();Object.defineProperty(t,"OrthographicCamera",{enumerable:!0,get:function(){return l.OrthographicCamera}});const d=_ye();Object.defineProperty(t,"OrthographicCameraControls",{enumerable:!0,get:function(){return d.OrthographicCameraControls}});const p=px;Object.defineProperty(t,"PerspectiveCamera",{enumerable:!0,get:function(){return p.PerspectiveCamera}});const g=mx;Object.defineProperty(t,"PerspectiveCameraControls",{enumerable:!0,get:function(){return g.PerspectiveCameraControls}})})(F0);var Pm={},Tp={},Xf=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},h1=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},iD,PE,RE,DE,OE,sD,oD;Object.defineProperty(Tp,"__esModule",{value:!0});Tp.AbstractLight=void 0;const Qrt=dr,Krt=Mn;class Jrt extends Qrt.AbstractTreeNodeData{constructor(e){super(e.id,e.version),iD.set(this,void 0),PE.set(this,void 0),RE.set(this,void 0),DE.set(this,void 0),OE.set(this,void 0),sD.set(this,void 0),oD.set(this,!1),this._uuidGenerator=Krt.UuidGenerator.instance,Xf(this,PE,e.color,"f"),Xf(this,RE,e.intensity,"f"),Xf(this,iD,e.type,"f"),Xf(this,DE,e.name,"f"),Xf(this,OE,e.order,"f")}get color(){return h1(this,PE,"f")}set color(e){Xf(this,PE,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get intensity(){return h1(this,RE,"f")}set intensity(e){Xf(this,RE,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get name(){return h1(this,DE,"f")}set name(e){Xf(this,DE,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get order(){return h1(this,OE,"f")}set order(e){Xf(this,OE,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get parentNode(){return h1(this,sD,"f")}set parentNode(e){Xf(this,sD,e,"f")}get type(){return h1(this,iD,"f")}get useNodeData(){return h1(this,oD,"f")}set useNodeData(e){Xf(this,oD,e,"f")}}Tp.AbstractLight=Jrt;iD=new WeakMap,PE=new WeakMap,RE=new WeakMap,DE=new WeakMap,OE=new WeakMap,sD=new WeakMap,oD=new WeakMap;var jN={},fA={},Rm={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.LIGHT_TYPE=void 0,function(e){e.AMBIENT="ambient",e.DIRECTIONAL="directional",e.HEMISPHERE="hemisphere",e.POINT="point",e.RECTANGLE="rectangle",e.SPOT="spot"}(t.LIGHT_TYPE||(t.LIGHT_TYPE={}))})(Rm);Object.defineProperty(fA,"__esModule",{value:!0});fA.AmbientLight=void 0;const eit=Tp,tit=Rm;let nit=class bye extends eit.AbstractLight{constructor(e){super({color:e.color||"#ffffff",intensity:e.intensity!==void 0?e.intensity:1,type:tit.LIGHT_TYPE.AMBIENT,name:e.name,order:e.order,id:e.id,version:e.version})}clone(){return new bye({color:this.color||"#ffffff",intensity:this.intensity||.5,name:this.name,order:this.order,id:this.id,version:this.version})}};fA.AmbientLight=nit;var dA={},qp=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},X8=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},IE,NE,LE,zE;Object.defineProperty(dA,"__esModule",{value:!0});dA.DirectionalLight=void 0;const rit=Tp,iit=Rm,sit=Cr;let oit=class Aye extends rit.AbstractLight{constructor(e){super({color:e.color||"#ffffff",intensity:e.intensity!==void 0?e.intensity:1,type:iit.LIGHT_TYPE.DIRECTIONAL,name:e.name,order:e.order,id:e.id,version:e.version}),IE.set(this,!0),NE.set(this,sit.vec3.fromValues(-1,0,1)),LE.set(this,-.003),zE.set(this,1024),e.direction&&qp(this,NE,e.direction,"f"),e.castShadow!==void 0&&qp(this,IE,e.castShadow,"f"),e.shadowMapResolution&&qp(this,zE,e.shadowMapResolution,"f"),e.shadowMapBias&&qp(this,LE,e.shadowMapBias,"f")}get castShadow(){return X8(this,IE,"f")}set castShadow(e){qp(this,IE,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get direction(){return X8(this,NE,"f")}set direction(e){qp(this,NE,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get shadowMapBias(){return X8(this,LE,"f")}set shadowMapBias(e){qp(this,LE,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get shadowMapResolution(){return X8(this,zE,"f")}set shadowMapResolution(e){qp(this,zE,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}clone(){return new Aye({color:this.color,intensity:this.intensity,direction:this.direction,castShadow:this.castShadow,shadowMapResolution:this.shadowMapResolution,shadowMapBias:this.shadowMapBias,name:this.name,order:this.order,id:this.id,version:this.version})}};dA.DirectionalLight=oit;IE=new WeakMap,NE=new WeakMap,LE=new WeakMap,zE=new WeakMap;var hA={},boe=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},ait=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},BE;Object.defineProperty(hA,"__esModule",{value:!0});hA.HemisphereLight=void 0;const lit=Tp,cit=Rm;let uit=class wye extends lit.AbstractLight{constructor(e){super({color:e.color||"#ffffff",intensity:e.intensity!==void 0?e.intensity:1,type:cit.LIGHT_TYPE.HEMISPHERE,name:e.name,order:e.order,id:e.id,version:e.version}),BE.set(this,"#000000"),e.groundColor&&boe(this,BE,e.groundColor,"f")}get groundColor(){return ait(this,BE,"f")}set groundColor(e){boe(this,BE,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}clone(){return new wye({color:this.color,groundColor:this.groundColor,intensity:this.intensity,name:this.name,order:this.order,id:this.id,version:this.version})}};hA.HemisphereLight=uit;BE=new WeakMap;var gx={},pA={},h_=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},YF=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},UE,FE,VE;Object.defineProperty(pA,"__esModule",{value:!0});pA.PointLight=void 0;const fit=Tp,dit=Rm,hit=Cr;let pit=class Eye extends fit.AbstractLight{constructor(e){super({color:e.color||"#ffffff",intensity:e.intensity!==void 0?e.intensity:1,type:dit.LIGHT_TYPE.POINT,name:e.name,order:e.order,id:e.id,version:e.version}),UE.set(this,0),FE.set(this,0),VE.set(this,hit.vec3.fromValues(0,0,0)),e.position&&h_(this,VE,e.position,"f"),e.distance&&h_(this,FE,e.distance,"f"),e.decay&&h_(this,UE,e.decay,"f")}get decay(){return YF(this,UE,"f")}set decay(e){h_(this,UE,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get distance(){return YF(this,FE,"f")}set distance(e){h_(this,FE,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get position(){return YF(this,VE,"f")}set position(e){h_(this,VE,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}clone(){return new Eye({color:this.color,position:this.position,distance:this.distance,decay:this.decay,intensity:this.intensity,name:this.name,order:this.order,id:this.id,version:this.version})}};pA.PointLight=pit;UE=new WeakMap,FE=new WeakMap,VE=new WeakMap;var mA={},Ku=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},p_=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},GE,jE,HE,$E,WE,YE;Object.defineProperty(mA,"__esModule",{value:!0});mA.SpotLight=void 0;const mit=Tp,git=Rm,Aoe=Cr;let vit=class Sye extends mit.AbstractLight{constructor(e){super({color:e.color||"#ffffff",intensity:e.intensity!==void 0?e.intensity:1,type:git.LIGHT_TYPE.SPOT,name:e.name,order:e.order,id:e.id,version:e.version}),GE.set(this,Math.PI/4),jE.set(this,0),HE.set(this,0),$E.set(this,.5),WE.set(this,Aoe.vec3.fromValues(-1,0,1)),YE.set(this,Aoe.vec3.fromValues(0,0,0)),e.position&&Ku(this,WE,e.position,"f"),e.target&&Ku(this,YE,e.target,"f"),e.distance&&Ku(this,HE,e.distance,"f"),e.decay&&Ku(this,jE,e.decay,"f"),e.angle&&Ku(this,GE,e.angle,"f"),e.penumbra&&Ku(this,$E,e.penumbra,"f")}get angle(){return p_(this,GE,"f")}set angle(e){Ku(this,GE,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get decay(){return p_(this,jE,"f")}set decay(e){Ku(this,jE,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get distance(){return p_(this,HE,"f")}set distance(e){Ku(this,HE,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get penumbra(){return p_(this,$E,"f")}set penumbra(e){Ku(this,$E,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get position(){return p_(this,WE,"f")}set position(e){Ku(this,WE,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}get target(){return p_(this,YE,"f")}set target(e){Ku(this,YE,e,"f"),this.updateVersion(),this.parentNode&&this.parentNode.updateVersion()}clone(){return new Sye({color:this.color,position:this.position,target:this.target,distance:this.distance,decay:this.decay,angle:this.angle,penumbra:this.penumbra,intensity:this.intensity,name:this.name,order:this.order,id:this.id,version:this.version})}};mA.SpotLight=vit;GE=new WeakMap,jE=new WeakMap,HE=new WeakMap,$E=new WeakMap,WE=new WeakMap,YE=new WeakMap;Object.defineProperty(gx,"__esModule",{value:!0});gx.LightScene=void 0;const woe=dr,_it=fA,yit=dA,bit=hA,Ait=pA,wit=mA;class Eit{constructor(e,n){this._renderingEngine=e,this._lights={},this._id=n.id,this._name=n.name,this._node=new woe.TreeNode(n.name||n.id)}get id(){return this._id}get lights(){return this._lights}get name(){return this._name}set name(e){this._name=e}get node(){return this._node}get update(){return this._update}set update(e){this._update=e}addAmbientLight(e){const n=new _it.AmbientLight(e);return this.addLight(n),n}addDirectionalLight(e){const n=new yit.DirectionalLight(e);return this.addLight(n),n}addHemisphereLight(e){const n=new bit.HemisphereLight(e);return this.addLight(n),n}addLight(e){const n=new woe.TreeNode(e.id);e.parentNode=n,n.data.push(e),this._node.addChild(n),this._lights[e.id]=e,this._node.updateVersion(),this._update&&this._update()}addPointLight(e){const n=new Ait.PointLight(e);return this.addLight(n),n}addSpotLight(e){const n=new wit.SpotLight(e);return this.addLight(n),n}removeLight(e){if(!this._lights[e])return!1;for(let n=0;n<this._node.children.length;n++){const i=this._node.children[n];if(i&&i.name===e){this._node.removeChild(i);break}}return delete this._lights[e],this._node.updateVersion(),this._update&&this._update(),!0}}gx.LightScene=Eit;Object.defineProperty(jN,"__esModule",{value:!0});jN.LightEngine=void 0;const Z8=fA,Eoe=Mn,m_=dA,Sit=hA,ed=Rm,Soe=dr,Toe=gx,Tit=pA,xit=mA,T3=Cr;class Mit{constructor(e){this._renderingEngine=e,this._converter=Eoe.Converter.instance,this._lightNode=new Soe.TreeNode("lights"),this._tree=Soe.Tree.instance,this._uuidGenerator=Eoe.UuidGenerator.instance,this._lightScenes={},this._tree.root.addChild(this._lightNode),this._lightNode.restrictViewports=[this._renderingEngine.id]}get lightScene(){return this._lightScene}get lightScenes(){return this._lightScenes}get update(){return this._update}set update(e){this._update=e}applySettings(e){this._lightScenes={};for(const n in e.light.lightScenes){const i=this._uuidGenerator.validate(n)?n:this._uuidGenerator.create(),o=e.light.lightScenes[n].name?e.light.lightScenes[n].name:n,l=new Toe.LightScene(this._renderingEngine,{id:i,name:o});for(const d in e.light.lightScenes[n].lights){const p=this._uuidGenerator.validate(d)?d:this._uuidGenerator.create(),g=e.light.lightScenes[n].lights[d];let v;switch(g.type){case ed.LIGHT_TYPE.DIRECTIONAL:v=new m_.DirectionalLight({color:this._converter.toHexColor(g.properties.color),intensity:g.properties.intensity,direction:this._converter.toVec3(g.properties.direction),castShadow:g.properties.castShadow,name:g.name?g.name:d,order:g.order,id:p});break;case ed.LIGHT_TYPE.HEMISPHERE:v=new Sit.HemisphereLight({color:this._converter.toHexColor(g.properties.skyColor),intensity:g.properties.intensity,groundColor:this._converter.toHexColor(g.properties.groundColor),name:g.name?g.name:d,order:g.order,id:p});break;case ed.LIGHT_TYPE.POINT:v=new Tit.PointLight({color:this._converter.toHexColor(g.properties.color),intensity:g.properties.intensity,position:this._converter.toVec3(g.properties.position),distance:g.properties.distance,decay:g.properties.decay,name:g.name?g.name:d,order:g.order,id:p});break;case ed.LIGHT_TYPE.SPOT:v=new xit.SpotLight({color:this._converter.toHexColor(g.properties.color),intensity:g.properties.intensity,position:this._converter.toVec3(g.properties.position),target:this._converter.toVec3(g.properties.target),distance:g.properties.distance,decay:g.properties.decay,angle:g.properties.angle,penumbra:g.properties.penumbra,name:g.name?g.name:d,order:g.order,id:p});break;case ed.LIGHT_TYPE.AMBIENT:default:v=new Z8.AmbientLight({color:this._converter.toHexColor(g.properties.color),intensity:g.properties.intensity,name:g.name?g.name:d,order:g.order,id:p})}l.addLight(v)}this._lightScenes[l.id]=l}if(e.light.lightSceneId===void 0&&Object.values(e.light.lightScenes).length>0){if(this.assignLightScene(Object.keys(e.light.lightScenes)[0])===!1){const i=this.createLightScene({name:e.light.lightSceneId==="default"?"default":"standard"});i.addLight(new Z8.AmbientLight({color:"#ffffff",intensity:.5,name:"ambient0"})),i.addLight(new m_.DirectionalLight({color:"#ffffff",intensity:.75,direction:T3.vec3.fromValues(.5774,-.5774,.5774),castShadow:!0,name:"directional0"})),i.addLight(new m_.DirectionalLight({color:"#ffffff",intensity:.35,direction:T3.vec3.fromValues(.25,-1,1),castShadow:!1,name:"directional1"})),this._lightScenes[i.id]=i}}else if(e.light.lightSceneId){if(this.assignLightScene(e.light.lightSceneId)===!1){const i=this.createLightScene({name:e.light.lightSceneId==="default"?"default":"standard"});i.addLight(new Z8.AmbientLight({color:"#ffffff",intensity:.5,name:"ambient0"})),i.addLight(new m_.DirectionalLight({color:"#ffffff",intensity:.75,direction:T3.vec3.fromValues(.5774,-.5774,.5774),castShadow:!0,name:"directional0"})),i.addLight(new m_.DirectionalLight({color:"#ffffff",intensity:.35,direction:T3.vec3.fromValues(.25,-1,1),castShadow:!1,name:"directional1"})),this._lightScenes[i.id]=i}}else if(JSON.stringify(e.settingsJson)==JSON.stringify({})){const n=this.createLightScene({name:"standard",standard:!0});this._lightScenes[n.id]=n}this._update&&this._update()}assignLightScene(e){if(!this._lightScenes[e]){for(const n in this._lightScenes)if((this._lightScenes[n].name||n)===e)return this.assignLightScene(n);return!1}for(this._lightScene=this._lightScenes[e];this._lightNode.children.length>0;)this._lightNode.removeChild(this._lightNode.children[0]);return this._lightNode.addChild(this._lightScene.node),this._lightNode.updateVersion(),!0}close(){this._tree.root.removeChild(this._lightNode)}createLightScene(e){const n=this._uuidGenerator.create(),i=new Toe.LightScene(this._renderingEngine,{id:n,name:e.name});for(e.standard===!0&&(i.addLight(new m_.DirectionalLight({color:"#ffffff",intensity:2.5,direction:T3.vec3.fromValues(.5774,-.5774,.5774),castShadow:!0,name:"directional0"})),i.addLight(new Z8.AmbientLight({color:"#ffffff",intensity:.3,name:"ambient0"}))),this._lightScenes[n]=i,this._lightScene=i;this._lightNode.children.length>0;)this._lightNode.removeChild(this._lightNode.children[0]);return this._lightNode.addChild(this._lightScene.node),this._lightNode.updateVersion(),this._update&&this._update(),i}removeLightScene(e){if(!this._lightScenes[e]){for(const n in this._lightScenes)if((this._lightScenes[n].name||n)===e)return this.removeLightScene(n);return!1}if(this._lightScene&&this._lightScene.id===e){for(this._lightScene=void 0;this._lightNode.children.length>0;)this._lightNode.removeChild(this._lightNode.children[0]);this._lightNode.updateVersion()}return delete this._lightScenes[e],this._update&&this._update(),!0}saveSettings(e){e.light.lightSceneId=this.lightScene?this.lightScene.id:void 0;const n={};for(const i in this._lightScenes){const o=this._lightScenes[i],l=o.name||i;n[i]={name:l,lights:{}};for(const d in o.lights){const p=o.lights[d];let g;switch(p.type){case ed.LIGHT_TYPE.DIRECTIONAL:g={color:this._converter.toHexColor(p.color),intensity:p.intensity,direction:{x:p.direction[0],y:p.direction[1],z:p.direction[2]},castShadow:p.castShadow,shadowMapResolution:p.shadowMapResolution,shadowMapBias:p.shadowMapBias};break;case ed.LIGHT_TYPE.HEMISPHERE:g={skyColor:this._converter.toHexColor(p.color),intensity:p.intensity,groundColor:this._converter.toHexColor(p.groundColor)};break;case ed.LIGHT_TYPE.POINT:g={color:this._converter.toHexColor(p.color),intensity:p.intensity,position:{x:p.position[0],y:p.position[1],z:p.position[2]},distance:p.distance,decay:p.decay};break;case ed.LIGHT_TYPE.SPOT:g={color:this._converter.toHexColor(p.color),intensity:p.intensity,position:{x:p.position[0],y:p.position[1],z:p.position[2]},target:{x:p.target[0],y:p.target[1],z:p.target[2]},distance:p.distance,decay:p.decay,angle:p.angle,penumbra:p.penumbra};break;case ed.LIGHT_TYPE.AMBIENT:default:g={color:this._converter.toHexColor(p.color),intensity:p.intensity}}n[i].lights[d]={name:p.name,type:p.type,properties:g},p.order!==void 0&&(n[i].lights[d].order=p.order)}}e.light.lightScenes=n}}jN.LightEngine=Mit;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SpotLight=t.PointLight=t.HemisphereLight=t.DirectionalLight=t.AmbientLight=t.AbstractLight=t.LightScene=t.LIGHT_TYPE=t.LightEngine=void 0;const e=Tp;Object.defineProperty(t,"AbstractLight",{enumerable:!0,get:function(){return e.AbstractLight}});const n=jN;Object.defineProperty(t,"LightEngine",{enumerable:!0,get:function(){return n.LightEngine}});const i=gx;Object.defineProperty(t,"LightScene",{enumerable:!0,get:function(){return i.LightScene}});const o=fA;Object.defineProperty(t,"AmbientLight",{enumerable:!0,get:function(){return o.AmbientLight}});const l=dA;Object.defineProperty(t,"DirectionalLight",{enumerable:!0,get:function(){return l.DirectionalLight}});const d=hA;Object.defineProperty(t,"HemisphereLight",{enumerable:!0,get:function(){return d.HemisphereLight}});const p=pA;Object.defineProperty(t,"PointLight",{enumerable:!0,get:function(){return p.PointLight}});const g=mA;Object.defineProperty(t,"SpotLight",{enumerable:!0,get:function(){return g.SpotLight}});const v=Rm;Object.defineProperty(t,"LIGHT_TYPE",{enumerable:!0,get:function(){return v.LIGHT_TYPE}})})(Pm);var HN={},kit=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty(HN,"__esModule",{value:!0});HN.BufferLoader=void 0;const xoe=Mn;class Cit{constructor(e,n,i){this._content=e,this._body=n,this._baseUri=i,this._httpClient=xoe.HttpClient.instance,this._loaded={}}getBuffer(e){if(!this._content.buffers)throw new Error("BufferLoader.getBuffer: Buffers not available.");if(!this._content.buffers[e])throw new Error("BufferLoader.getBuffer: Buffer not available.");if(!this._loaded[e])throw new Error("BufferLoader.getBuffer: Buffer not loaded.");return this._loaded[e]}load(){return kit(this,void 0,void 0,function*(){if(!this._content.buffers)return;const e=[];for(let n=0;n<this._content.buffers.length;n++){const i=n,o=this._content.buffers[i];if(o.type&&o.type!=="arraybuffer")throw new Error(`BufferLoader.load: ${o.type} is not supported.`);if(o.uri===void 0&&i===0){if(!this._body)throw new Error("BufferLoader.load: Buffer not available.");this._loaded[i]=this._body;return}const l=/^data:(.*?)(;base64)?,(.*)$/,d=o.uri.match(l);if(d){const p=!!d[2];let g=d[3];g=decodeURIComponent(g),p&&(g=(0,xoe.atobCustom)(g));const v=new Uint8Array(g.length);for(let _=0;_<g.length;_++)v[_]=g.charCodeAt(_);this._loaded[i]=v.buffer}else{const p=this._httpClient.get(this._baseUri+"/"+o.uri,{responseType:"arraybuffer"}).then(g=>{this._loaded[i]=g.data});e.push(p)}}yield Promise.all(e)})}}HN.BufferLoader=Cit;var $N={};Object.defineProperty($N,"__esModule",{value:!0});$N.BufferViewLoader=void 0;class Pit{constructor(e,n){this._content=e,this._bufferLoader=n,this._loaded={}}getBufferView(e){if(!this._content.bufferViews)throw new Error("BufferViewLoader.load: BufferViews not available.");if(!this._content.bufferViews[e])throw new Error("BufferViewLoader.load: BufferView not available.");if(!this._loaded[e])throw new Error("BufferViewLoader.load: BufferView not loaded.");return this._loaded[e]}load(){if(this._content.bufferViews)for(let e=0;e<this._content.bufferViews.length;e++){const n=e;if(!this._content.bufferViews[n])throw new Error("BufferViewLoader.load: BufferView not available.");const i=this._content.bufferViews[n],o=i.byteLength||0,l=i.byteOffset||0;if(i.buffer===void 0)throw new Error("BufferViewLoader.load: BufferView has no buffer defined.");const p=this._bufferLoader.getBuffer(i.buffer).slice(l,l+o);this._loaded[n]=p}}}$N.BufferViewLoader=Pit;var WN={};Object.defineProperty(WN,"__esModule",{value:!0});WN.AccessorLoader=void 0;const Moe=Gi,Q8=Cm,Rit=Mn;class Dit{constructor(e,n){this._content=e,this._bufferViewLoader=n,this._logger=Rit.Logger.instance,this._loaded={}}getAccessor(e){if(!this._content.accessors)throw new Error("AccessorLoader.getAccessor: Accessors not available.");if(!this._content.accessors[e])throw new Error("AccessorLoader.getAccessor: Accessor not available.");if(!this._loaded[e])throw new Error("AccessorLoader.getAccessor: Accessor not loaded.");return this._loaded[e]}load(){if(this._content.accessors)for(let e=0;e<this._content.accessors.length;e++){const n=e;if(!this._content.accessors[n])throw new Error("AccessorLoader.load: BufferView not available.");const i=this._content.accessors[n];if(i.bufferView===void 0){this._loaded[n]=null;continue}const o=this._bufferViewLoader.getBufferView(i.bufferView),l=Q8.ACCESSORTYPE_V2[i.type];i.componentType===5124&&this._logger.warn("GLTFLoader.loadAccessor: The componentType for this accessor is 5124, which is not allowed. Trying to load it anyway.");const d=Q8.ACCESSORCOMPONENTTYPE_V2[i.componentType],p=d.BYTES_PER_ELEMENT,g=p*l,v=i.byteOffset||0,_=i.bufferView!==void 0&&this._content.bufferViews?this._content.bufferViews[i.bufferView].byteStride:void 0,b=i.normalized===!0,w=this._content.bufferViews?this._content.bufferViews[i.bufferView].target:void 0;let E;if(_&&_!==g){const S=Math.floor(v/_);E=new d(o,S*_,i.count*_/p)}else o===null?E=new d(i.count*l):E=new d(o,v,i.count*l);if(i.sparse!==void 0){const S=Q8.ACCESSORTYPE_V2.SCALAR,M=Q8.ACCESSORCOMPONENTTYPE_V2[i.sparse.indices.componentType],k=i.sparse.indices.byteOffset||0,x=i.sparse.values.byteOffset||0;if(!i.sparse.indices.bufferView||!i.sparse.values.bufferView)throw new Error("Sparse Mesh not properly defined.");const C=new M(this._bufferViewLoader.getBufferView(i.sparse.indices.bufferView),k,i.sparse.count*S),P=new d(this._bufferViewLoader.getBufferView(i.sparse.values.bufferView),x,i.sparse.count*l);this._loaded[n]=new Moe.AttributeData(E,l,g,v,p,b,i.count,i.min,i.max,_,w,!0,C,P);continue}this._loaded[n]=new Moe.AttributeData(E,l,g,v,p,b,i.count,i.min,i.max,_,w)}}}WN.AccessorLoader=Dit;var YN={},Oit=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty(YN,"__esModule",{value:!0});YN.TextureLoader=void 0;const qF=Mn;let Iit=class{constructor(e,n,i){this._content=e,this._bufferViewLoader=n,this._baseUri=i,this._converter=qF.Converter.instance,this._httpClient=qF.HttpClient.instance,this._loaded={}}getTexture(e){if(!this._content.textures)throw new Error("TextureLoader.getTexture: Textures not available.");if(!this._content.textures[e])throw new Error("TextureLoader.getTexture: Texture not available.");if(!this._loaded[e])throw new Error("TextureLoader.getTexture: Texture not loaded.");return this._loaded[e]}load(){return Oit(this,void 0,void 0,function*(){if(!this._content.textures)return;const e=[];for(let n=0;n<this._content.textures.length;n++){const i=n,o=this._content.textures[i];if(!this._content.images)throw new Error("TextureLoader.load: Images not available.");const l=this._content.images[o.source],d=/^data:(.*?)(;base64)?,(.*)$/,p=/^https:\/\//;if(l.bufferView!==void 0){const g=this._bufferViewLoader.getBufferView(l.bufferView),v=new DataView(g),_=[];for(let S=0;S<v.byteLength;S+=1)_[S]=v.getUint8(S);const b=new Blob([new Uint8Array(_)],{type:l.mimeType}),w=URL.createObjectURL(b),E=new Image;e.push(new Promise((S,M)=>{E.onload=()=>{this._loaded[i]={image:E,blob:b},URL.revokeObjectURL(w),S()},E.onerror=M})),E.crossOrigin="anonymous",E.src=w}else{const g=d.test(l.uri)||p.test(l.uri)?l.uri:`${this._baseUri}/${l.uri}`;e.push(new Promise((v,_)=>{this._httpClient.loadTexture(g).then(b=>{typeof window<"u"?qF.Converter.instance.responseToImage(b).then(w=>{this._loaded[i]={image:w,blob:b.data.blob},v()}).catch(w=>_(w)):(this._loaded[i]={image:b.data.buffer,blob:b.data.blob},v())}).catch(b=>_(b))}))}}yield Promise.all(e)})}};YN.TextureLoader=Iit;var x3={},vx={},qN={},XN={};Object.defineProperty(XN,"__esModule",{value:!0});XN.materialDatabase=void 0;XN.materialDatabase={"00":{"00":{name:"Default material",color:[211,211,211,255],metalness:0,roughness:1},properties:{name:"Default materials"}},"01":{"01":{name:"Default groundplane material",color:[211,211,211,255],metalness:0,roughness:1},properties:{name:"Groundplane materials"}},"02":{"00":{name:"Default plastic material",color:[211,211,211,255],metalness:0,roughness:1,normaltexture:"normalMap.jpg",roughnesstexture:"roughnessMap.jpg"},properties:{name:"Plastic materials"}},"03":{"00":{name:"Default metal material",color:[205,205,205,255],roughness:.25},"01":{name:"Used metal material 1",color:[205,205,205,255],roughness:1,roughnesstexture:"roughnessMap.jpg"},"02":{name:"Used metal material 2",color:[205,205,205,255],roughness:1,roughnesstexture:"roughnessMap.jpg"},"03":{name:"Used metal material 3",color:[205,205,205,255],roughness:1,roughnesstexture:"roughnessMap.jpg"},10:{name:"Gold material",color:[230,207,92,255],roughness:0},11:{name:"Used gold material",color:[230,207,92,255],roughness:0,roughnesstexture:"roughnessMap.jpg"},21:{name:"Hammered metal material",color:[205,205,205,255],roughness:1,normaltexture:"normalMap.jpg"},properties:{name:"Metal materials",metalness:1}},"04":{"00":{name:"Default glass material",color:[211,211,211,255],metalness:1,roughness:0,transparency:.75},properties:{name:"Glass materials"}},"05":{"00":{bitmaptexture:"map.jpg",name:"Default wood material",metalnesstexture:"metalnessMap.jpg",normaltexture:"normalMap.jpg",roughnesstexture:"roughnessMap.jpg"},"01":{bitmaptexture:"map.jpg",name:"Wood floor material",metalnesstexture:"metalnessMap.jpg",normaltexture:"normalMap.jpg",roughnesstexture:"roughnessMap.jpg"},10:{bitmaptexture:"map.jpg",name:"Natural oak material",normaltexture:"normalMap.jpg",roughnesstexture:"roughnessMap.jpg"},11:{bitmaptexture:"map.jpg",name:"Premium oak material",roughnesstexture:"roughnessMap.jpg"},properties:{name:"Wood materials",color:[211,211,211,255],metalness:0,roughness:1}},"06":{"00":{bitmaptexture:"map.jpg",name:"Default leather material",metalnesstexture:"metalnessMap.jpg",normaltexture:"normalMap.jpg",roughnesstexture:"roughnessMap.jpg"},"01":{bitmaptexture:"map.jpg",name:"Dark brown leather material",metalnesstexture:"metalnessMap.jpg",normaltexture:"normalMap.jpg",roughnesstexture:"roughnessMap.jpg"},"02":{bitmaptexture:"map.jpg",name:"Black leather material",metalnesstexture:"metalnessMap.jpg",normaltexture:"normalMap.jpg",roughnesstexture:"roughnessMap.jpg"},10:{bitmaptexture:"map.jpg",name:"Worn leather material",metalnesstexture:"metalnessMap.jpg",normaltexture:"normalMap.jpg",roughnesstexture:"roughnessMap.jpg"},properties:{name:"Leather materials",metalness:0,roughness:1}},"07":{"00":{bitmaptexture:"map.jpg",name:"Default fabric material",metalnesstexture:"metalnessMap.jpg",normaltexture:"normalMap.jpg",roughnesstexture:"roughnessMap.jpg"},"01":{bitmaptexture:"map.jpg",name:"Grey fabric material",metalnesstexture:"metalnessMap.jpg",normaltexture:"normalMap.jpg",roughnesstexture:"roughnessMap.jpg"},properties:{name:"Fabric materials",metalness:1,roughness:1}}};var M3=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty(qN,"__esModule",{value:!0});qN.MaterialEngine=void 0;const Nit=dr,Xp=Mn,Es=Gi,Zp=Cr,tu=XN;class Lit{constructor(){this._converter=Xp.Converter.instance,this._httpClient=Xp.HttpClient.instance,this._logger=Xp.Logger.instance}static get instance(){return this._instance||(this._instance=new this)}createMaterialData(e){switch(e.type||Es.MATERIAL_TYPE.STANDARD){case Es.MATERIAL_TYPE.SPECULAR_GLOSSINESS:return new Es.MaterialSpecularGlossinessData(e);case Es.MATERIAL_TYPE.UNLIT:return new Es.MaterialUnlitData(e);case Es.MATERIAL_TYPE.GEM:return new Es.MaterialGemData(e);default:return new Es.MaterialStandardData(e)}}loadContent(e){return M3(this,void 0,void 0,function*(){const n=new Nit.TreeNode(e.name||"material");if(!e)throw new Xp.ShapeDiverViewerDataProcessingError("MaterialEngine.loadContent: Invalid content was provided to material engine.");let i=new Es.MaterialStandardData;if(e.data){const o=e.data;let l;if(o.materialpreset&&(l=this.loadPresetMaterialDefinition(o.materialpreset)),!(o.materialType&&o.materialType!=="standard")){if(o.version)if(o.version==="1.0")i=yield this.loadMaterialV3(this.loadMaterialDefinitionV1(o,l));else if(o.version==="2.0")i=yield this.loadMaterialV3(this.loadMaterialDefinitionV2(o,l));else if(o.version==="3.0")i=yield this.loadMaterialV3(this.loadMaterialDefinitionV3(o,l));else throw new Xp.ShapeDiverViewerDataProcessingError("MaterialEngine.loadContent: Material data version not supported.")}}else throw new Xp.ShapeDiverViewerDataProcessingError("MaterialEngine.loadContent: No material data was provided to material engine.");return n.data.push(i),n})}loadMap(e,n){return M3(this,void 0,void 0,function*(){let i;if(n?i=yield this._httpClient.loadTexture("https://viewer.shapediver.com/v2/materials/1024/"+n+"/"+e):i=yield this._httpClient.loadTexture(e),typeof window<"u"){const o=yield Xp.Converter.instance.responseToImage(i);return new Es.MapData(o,{blob:i.data.blob})}else return new Es.MapData(i.data.buffer,{blob:i.data.blob})})}loadMapWithProperties(e){return M3(this,void 0,void 0,function*(){const n=yield this._httpClient.loadTexture(e.href),i=e.wrapS===1?Es.TEXTURE_WRAPPING.CLAMP_TO_EDGE:e.wrapS===2?Es.TEXTURE_WRAPPING.MIRRORED_REPEAT:Es.TEXTURE_WRAPPING.REPEAT,o=e.wrapT===1?Es.TEXTURE_WRAPPING.CLAMP_TO_EDGE:e.wrapT===2?Es.TEXTURE_WRAPPING.MIRRORED_REPEAT:Es.TEXTURE_WRAPPING.REPEAT,l=e.center?Zp.vec2.fromValues(e.center[0],e.center[1]):Zp.vec2.fromValues(0,0),d=e.color?Zp.vec4.fromValues(e.color[0]/255,e.color[1]/255,e.color[2]/255,e.color[3]/255):Zp.vec4.fromValues(1,1,1,1),p=e.offset?Zp.vec2.fromValues(e.offset[0],e.offset[1]):Zp.vec2.fromValues(0,0),g=e.repeat?Zp.vec2.fromValues(e.repeat[0],e.repeat[1]):Zp.vec2.fromValues(1,1);if(typeof window<"u"){const v=yield Xp.Converter.instance.responseToImage(n);return new Es.MapData(v,{blob:n.data.blob,wrapS:i,wrapT:o,minFilter:Es.TEXTURE_FILTERING.LINEAR_MIPMAP_LINEAR,magFilter:Es.TEXTURE_FILTERING.LINEAR,center:l,color:d,offset:p,repeat:g,rotation:e.rotation||0})}else return new Es.MapData(n.data.buffer,{blob:n.data.blob,wrapS:i,wrapT:o,minFilter:Es.TEXTURE_FILTERING.LINEAR_MIPMAP_LINEAR,magFilter:Es.TEXTURE_FILTERING.LINEAR,center:l,color:d,offset:p,repeat:g,rotation:e.rotation||0})})}loadMaterialDefinitionV1(e,n={}){return e.color?n.color=this.multiplyColors(e.color,n.color):e.diffuse&&(n.color=this.multiplyColors(e.diffuse,n.color)),(e.shine||e.shine===0)&&(n.metalness=Math.min(1,e.shine),n.roughness=1-Math.min(1,e.shine)),e.hasOwnProperty("transparency")&&(n.transparency=e.transparency),e.bitmaptexture&&(n.bitmaptexture={href:e.bitmaptexture}),e.bumptexture&&(n.bumptexture={href:e.bumptexture}),e.transparencytexture&&(n.transparencytexture={href:e.transparencytexture}),n}loadMaterialDefinitionV2(e,n={}){return e.color&&(n.color=this.multiplyColors(e.color,n.color)),n.side=e.side,(e.metalness||e.metalness===0)&&(n.metalness=e.metalness),(e.roughness||e.roughness===0)&&(n.roughness=e.roughness),e.hasOwnProperty("transparency")&&(n.transparency=e.transparency),(e.alphaThreshold||e.alphaThreshold===0)&&(n.alphaThreshold=e.alphaThreshold),e.bitmaptexture&&(n.bitmaptexture={href:e.bitmaptexture}),e.metalnesstexture&&(n.metalnesstexture={href:e.metalnesstexture}),e.roughnesstexture&&(n.roughnesstexture={href:e.roughnesstexture}),e.bumptexture&&(n.bumptexture={href:e.bumptexture}),e.normaltexture&&(n.normaltexture={href:e.normaltexture}),e.transparencytexture&&(n.transparencytexture={href:e.transparencytexture}),n}loadMaterialDefinitionV3(e,n={}){return e.color&&(n.color=this.multiplyColors(e.color,n.color)),n.side=e.side,(e.metalness||e.metalness===0)&&(n.metalness=e.metalness),(e.roughness||e.roughness===0)&&(n.roughness=e.roughness),e.hasOwnProperty("transparency")&&(n.transparency=e.transparency),(e.alphaThreshold||e.alphaThreshold===0)&&(n.alphaThreshold=e.alphaThreshold),(e.bumpAmplitude||e.bumpAmplitude===0)&&(n.bumpAmplitude=e.bumpAmplitude),e.bitmaptexture&&(n.bitmaptexture=e.bitmaptexture),e.metalnesstexture&&(n.metalnesstexture=e.metalnesstexture),e.roughnesstexture&&(n.roughnesstexture=e.roughnesstexture),e.bumptexture&&(n.bumptexture=e.bumptexture),e.normaltexture&&(n.normaltexture=e.normaltexture),e.transparencytexture&&(n.transparencytexture=e.transparencytexture),n}loadMaterialV3(e){return M3(this,void 0,void 0,function*(){const n=new Es.MaterialStandardData,i=[];return e.color&&(n.color=e.color),n.side=e.side==="front"?Es.MATERIAL_SIDE.FRONT:e.side==="back"?Es.MATERIAL_SIDE.BACK:Es.MATERIAL_SIDE.DOUBLE,(e.metalness||e.metalness===0)&&(n.metalness=e.metalness),(e.roughness||e.roughness===0)&&(n.roughness=e.roughness),e.hasOwnProperty("transparency")&&(n.opacity=1-e.transparency),(e.alphaThreshold||e.alphaThreshold===0)&&(n.alphaCutoff=e.alphaThreshold),(e.bumpAmplitude||e.bumpAmplitude===0)&&(n.bumpScale=e.bumpAmplitude),e.bitmaptexture&&i.push(this.loadMapWithProperties(e.bitmaptexture).then(o=>(o&&(n.map=o),o))),e.metalnesstexture&&i.push(this.loadMapWithProperties(e.metalnesstexture).then(o=>(o&&(n.metalnessMap=o),o))),e.roughnesstexture&&i.push(this.loadMapWithProperties(e.roughnesstexture).then(o=>(o&&(n.roughnessMap=o),o))),e.bumptexture&&i.push(this.loadMapWithProperties(e.bumptexture).then(o=>(o&&(n.bumpMap=o),o))),e.normaltexture&&i.push(this.loadMapWithProperties(e.normaltexture).then(o=>(o&&(n.normalMap=o),o))),e.transparencytexture&&i.push(this.loadMapWithProperties(e.transparencytexture).then(o=>(o&&(n.alphaMap=o),o))),yield Promise.all(i),n})}loadPresetMaterial(e){return M3(this,void 0,void 0,function*(){return this.loadMaterialV3(this.loadPresetMaterialDefinition(e))})}loadPresetMaterialDefinition(e){const n={},i=this.getClassAndSpecificId(e);return tu.materialDatabase[i.class]&&tu.materialDatabase[i.class][i.specific]?(this.assignSpecificDefinition(i,tu.materialDatabase[i.class][i.specific],n),this.assignGeneralDefinition(i,tu.materialDatabase[i.class].properties,tu.materialDatabase[i.class][i.specific],n)):tu.materialDatabase[i.class]&&tu.materialDatabase[i.class]["00"]?(this.assignSpecificDefinition({class:i.class,specific:"00"},tu.materialDatabase[i.class]["00"],n),this.assignGeneralDefinition({class:i.class,specific:"00"},tu.materialDatabase[i.class].properties,tu.materialDatabase[i.class]["00"],n)):(this.assignSpecificDefinition({class:"00",specific:"00"},tu.materialDatabase["00"]["00"],n),this.assignGeneralDefinition({class:"00",specific:"00"},tu.materialDatabase["00"].properties,tu.materialDatabase["00"]["00"],n)),n}assignGeneralDefinition(e,n,i,o){n.transparencytexture&&!i.transparencytexture&&(o.transparencytexture={href:"https://viewer.shapediver.com/v2/materials/1024/"+e.class+"/"+n.transparencytexture}),n.hasOwnProperty("alphaThreshold")&&!i.hasOwnProperty("alphaThreshold")&&(o.alphaThreshold=n.alphaThreshold),n.bumptexture&&!i.bumptexture&&(o.bumptexture={href:"https://viewer.shapediver.com/v2/materials/1024/"+e.class+"/"+n.bumptexture}),n.hasOwnProperty("bumpAmplitude")&&!i.hasOwnProperty("bumpAmplitude")&&(o.bumpAmplitude=n.bumpAmplitude),n.color&&!i.color&&(o.color=n.color),n.bitmaptexture&&!i.bitmaptexture&&(o.bitmaptexture={href:"https://viewer.shapediver.com/v2/materials/1024/"+e.class+"/"+n.bitmaptexture}),n.hasOwnProperty("metalness")&&!i.hasOwnProperty("metalness")&&(o.metalness=n.metalness),n.metalnesstexture&&!i.metalnesstexture&&(o.metalnesstexture={href:"https://viewer.shapediver.com/v2/materials/1024/"+e.class+"/"+n.metalnesstexture}),n.normaltexture&&!i.normaltexture&&(o.normaltexture={href:"https://viewer.shapediver.com/v2/materials/1024/"+e.class+"/"+n.normaltexture}),n.hasOwnProperty("transparency")&&!i.hasOwnProperty("transparency")&&(o.transparency=n.transparency),n.hasOwnProperty("roughness")&&!i.hasOwnProperty("roughness")&&(o.roughness=n.roughness),n.roughnesstexture&&!i.roughnesstexture&&(o.roughnesstexture={href:"https://viewer.shapediver.com/v2/materials/1024/"+e.class+"/"+n.roughnesstexture}),n.side&&!i.side&&(o.side=n.side)}assignSpecificDefinition(e,n,i){n.transparencytexture&&(i.transparencytexture={href:"https://viewer.shapediver.com/v2/materials/1024/"+e.class+"/"+e.specific+"/"+n.transparencytexture}),n.hasOwnProperty("alphaThreshold")&&(i.alphaThreshold=n.alphaThreshold),n.bumptexture&&(i.bumptexture={href:"https://viewer.shapediver.com/v2/materials/1024/"+e.class+"/"+e.specific+"/"+n.bumptexture}),n.hasOwnProperty("bumpAmplitude")&&(i.bumpAmplitude=n.bumpAmplitude),n.color&&(i.color=n.color),n.bitmaptexture&&(i.bitmaptexture={href:"https://viewer.shapediver.com/v2/materials/1024/"+e.class+"/"+e.specific+"/"+n.bitmaptexture}),n.hasOwnProperty("metalness")&&(i.metalness=n.metalness),n.metalnesstexture&&(i.metalnesstexture={href:"https://viewer.shapediver.com/v2/materials/1024/"+e.class+"/"+e.specific+"/"+n.metalnesstexture}),n.normaltexture&&(i.normaltexture={href:"https://viewer.shapediver.com/v2/materials/1024/"+e.class+"/"+e.specific+"/"+n.normaltexture}),n.hasOwnProperty("transparency")&&(i.transparency=n.transparency),n.hasOwnProperty("roughness")&&(i.roughness=n.roughness),n.roughnesstexture&&(i.roughnesstexture={href:"https://viewer.shapediver.com/v2/materials/1024/"+e.class+"/"+e.specific+"/"+n.roughnesstexture}),n.side&&(i.side=n.side)}getClassAndSpecificId(e){e<100&&e%10==0&&(e/=10),e<10&&(e*=100);const n=i=>String(i).padStart(2,"0").slice(0,2);return{class:n(Math.floor(e/100)),specific:n(e-Math.floor(e/100)*100)}}multiplyColors(e,n){return n?[Math.min(255,e[0]*n[0]/255),Math.min(255,e[1]*n[1]/255),Math.min(255,e[2]*n[2]/255),Math.min(255,(e[3]!==void 0?e[3]:255)*(n[3]!==void 0?n[3]:255)/255)]:e}}qN.MaterialEngine=Lit;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.MaterialEngine=void 0;const e=qN;Object.defineProperty(t,"MaterialEngine",{enumerable:!0,get:function(){return e.MaterialEngine}})})(vx);var koe;function zit(){if(koe)return x3;koe=1;var t=X&&X.__awaiter||function(p,g,v,_){function b(w){return w instanceof v?w:new v(function(E){E(w)})}return new(v||(v=Promise))(function(w,E){function S(x){try{k(_.next(x))}catch(C){E(C)}}function M(x){try{k(_.throw(x))}catch(C){E(C)}}function k(x){x.done?w(x.value):b(x.value).then(S,M)}k((_=_.apply(p,g||[])).next())})};Object.defineProperty(x3,"__esModule",{value:!0}),x3.MaterialLoader=void 0;const e=Mn,n=Cr,i=Gi,o=vx,l=_Q();class d{constructor(g,v){this._content=g,this._textureLoader=v,this._converter=e.Converter.instance,this._materialEngine=o.MaterialEngine.instance,this._loaded={}}getMaterial(g){if(!this._content.materials)throw new Error("MaterialLoader.getMaterial: Materials not available.");if(!this._content.materials[g])throw new Error("MaterialLoader.getMaterial: Material not available.");if(!this._loaded[g])throw new Error("MaterialLoader.getMaterial: Material not loaded.");return this._loaded[g]}load(){return t(this,void 0,void 0,function*(){if(this._loaded={},!this._content.materials)return;const g=[];for(let v=0;v<this._content.materials.length;v++){const _=v,b=this._content.materials[_],w=b.extensions||{},E={};if(b.name!==void 0&&(E.name=b.name),w[l.GLTF_EXTENSIONS.SHAPEDIVER_MATERIALS_PRESET]){const k=w[l.GLTF_EXTENSIONS.SHAPEDIVER_MATERIALS_PRESET];g.push(new Promise((x,C)=>{try{this._materialEngine.loadPresetMaterial(k.materialpreset).then(P=>{P.name=b.name,P.color=k.color,this._loaded[_]=P,x()}).catch(C)}catch(P){C(P)}}));continue}if(w[l.GLTF_EXTENSIONS.KHR_MATERIALS_PBRSPECULARGLOSSINESS]){const k=w[l.GLTF_EXTENSIONS.KHR_MATERIALS_PBRSPECULARGLOSSINESS],x=E;if(x.color="#ffffff",x.opacity=1,k.diffuseFactor!==void 0&&(x.color=[k.diffuseFactor[0]*255,k.diffuseFactor[1]*255,k.diffuseFactor[2]*255],x.opacity=k.diffuseFactor[3]),k.diffuseTexture!==void 0){const C=k.diffuseTexture.extensions&&k.diffuseTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?k.diffuseTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:{};k.diffuseTexture.texCoord!==void 0&&(C.texCoord=k.diffuseTexture.texCoord),x.map=this.loadMap(k.diffuseTexture.index,C)}if(x.emissiveness="#000000",x.glossiness=k.glossinessFactor!==void 0?k.glossinessFactor:1,x.specular="#ffffff",k.specularFactor!==void 0&&(x.specular=[k.specularFactor[0]*255,k.specularFactor[1]*255,k.specularFactor[2]*255]),k.specularGlossinessTexture!==void 0){const C=k.specularGlossinessTexture.extensions&&k.specularGlossinessTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?k.specularGlossinessTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:{};k.specularGlossinessTexture.texCoord!==void 0&&(C.texCoord=k.specularGlossinessTexture.texCoord),x.specularGlossinessMap=this.loadMap(k.specularGlossinessTexture.index,C)}}else if(w[l.GLTF_EXTENSIONS.KHR_MATERIALS_UNLIT]){const k=E;if(k.color="#ffffff",k.opacity=1,b.pbrMetallicRoughness!==void 0&&(b.pbrMetallicRoughness.baseColorFactor!==void 0&&(k.color=[b.pbrMetallicRoughness.baseColorFactor[0]*255,b.pbrMetallicRoughness.baseColorFactor[1]*255,b.pbrMetallicRoughness.baseColorFactor[2]*255],k.opacity=b.pbrMetallicRoughness.baseColorFactor[3]),b.pbrMetallicRoughness.baseColorTexture!==void 0)){const x=b.pbrMetallicRoughness.baseColorTexture.extensions&&b.pbrMetallicRoughness.baseColorTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?b.pbrMetallicRoughness.baseColorTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:{};b.pbrMetallicRoughness.baseColorTexture.texCoord!==void 0&&(x.texCoord=b.pbrMetallicRoughness.baseColorTexture.texCoord),k.map=this.loadMap(b.pbrMetallicRoughness.baseColorTexture.index,x)}}else{const k=E;if(b.pbrMetallicRoughness!==void 0){if(k.color="#ffffff",b.pbrMetallicRoughness.baseColorFactor!==void 0&&(k.color=[b.pbrMetallicRoughness.baseColorFactor[0]*255,b.pbrMetallicRoughness.baseColorFactor[1]*255,b.pbrMetallicRoughness.baseColorFactor[2]*255],k.opacity=b.pbrMetallicRoughness.baseColorFactor[3]),b.pbrMetallicRoughness.baseColorTexture!==void 0){const x=b.pbrMetallicRoughness.baseColorTexture.extensions&&b.pbrMetallicRoughness.baseColorTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?b.pbrMetallicRoughness.baseColorTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:{};b.pbrMetallicRoughness.baseColorTexture.texCoord!==void 0&&(x.texCoord=b.pbrMetallicRoughness.baseColorTexture.texCoord),k.map=this.loadMap(b.pbrMetallicRoughness.baseColorTexture.index,x)}if(b.pbrMetallicRoughness.metallicFactor!==void 0&&(k.metalness=b.pbrMetallicRoughness.metallicFactor),b.pbrMetallicRoughness.roughnessFactor!==void 0&&(k.roughness=b.pbrMetallicRoughness.roughnessFactor),b.pbrMetallicRoughness.metallicRoughnessTexture!==void 0){const x=b.pbrMetallicRoughness.metallicRoughnessTexture.extensions&&b.pbrMetallicRoughness.metallicRoughnessTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?b.pbrMetallicRoughness.metallicRoughnessTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:{};b.pbrMetallicRoughness.metallicRoughnessTexture.texCoord!==void 0&&(x.texCoord=b.pbrMetallicRoughness.metallicRoughnessTexture.texCoord),k.metalnessRoughnessMap=this.loadMap(b.pbrMetallicRoughness.metallicRoughnessTexture.index,x)}}}if(b.normalTexture!==void 0){const k=b.normalTexture.extensions&&b.normalTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?b.normalTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:{};b.normalTexture.texCoord!==void 0&&(k.texCoord=b.normalTexture.texCoord),E.normalMap=this.loadMap(b.normalTexture.index,k),E.normalScale=1,b.normalTexture.scale!==void 0&&(E.normalScale=b.normalTexture.scale)}if(b.occlusionTexture!==void 0){const k=b.occlusionTexture.extensions&&b.occlusionTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?b.occlusionTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:{};b.occlusionTexture.texCoord!==void 0&&(k.texCoord=b.occlusionTexture.texCoord),E.aoMap=this.loadMap(b.occlusionTexture.index,k),b.occlusionTexture.strength!==void 0&&(E.aoMapIntensity=b.occlusionTexture.strength)}if(b.emissiveTexture!==void 0){const k=b.emissiveTexture.extensions&&b.emissiveTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?b.emissiveTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:{};b.emissiveTexture.texCoord!==void 0&&(k.texCoord=b.emissiveTexture.texCoord),E.emissiveMap=this.loadMap(b.emissiveTexture.index,k)}if(b.emissiveFactor!==void 0&&(E.emissiveness=[b.emissiveFactor[0]*255,b.emissiveFactor[1]*255,b.emissiveFactor[2]*255]),b.alphaMode!==void 0&&(E.alphaMode=b.alphaMode.toLowerCase()===i.MATERIAL_ALPHA.MASK?i.MATERIAL_ALPHA.MASK:b.alphaMode.toLowerCase()===i.MATERIAL_ALPHA.BLEND?i.MATERIAL_ALPHA.BLEND:i.MATERIAL_ALPHA.OPAQUE,E.alphaMode===i.MATERIAL_ALPHA.MASK&&(E.alphaCutoff=b.alphaCutoff!==void 0?b.alphaCutoff:.5)),b.alphaCutoff!==void 0&&(E.alphaCutoff=b.alphaCutoff),b.doubleSided!==void 0&&(E.side=b.doubleSided?i.MATERIAL_SIDE.DOUBLE:i.MATERIAL_SIDE.FRONT),w[l.GLTF_EXTENSIONS.KHR_MATERIALS_PBRSPECULARGLOSSINESS]){const k=E,x=new i.MaterialSpecularGlossinessData(k);this._loaded[_]=x;continue}else if(w[l.GLTF_EXTENSIONS.KHR_MATERIALS_UNLIT]){const k=E,x=new i.MaterialUnlitData(k);this._loaded[_]=x;continue}const S=E;if(w[l.GLTF_EXTENSIONS.KHR_MATERIALS_CLEARCOAT]){const k=w[l.GLTF_EXTENSIONS.KHR_MATERIALS_CLEARCOAT];if(k.clearcoatFactor!==void 0&&(S.clearcoat=k.clearcoatFactor),k.clearcoatTexture!==void 0){const x=k.clearcoatTexture.extensions&&k.clearcoatTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?k.clearcoatTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:{};k.clearcoatTexture.texCoord!==void 0&&(x.texCoord=k.clearcoatTexture.texCoord),S.clearcoatMap=this.loadMap(k.clearcoatTexture.index,x)}if(k.clearcoatRoughnessFactor!==void 0&&(S.clearcoatRoughness=k.clearcoatRoughnessFactor),k.clearcoatRoughnessTexture!==void 0){const x=k.clearcoatRoughnessTexture.extensions&&k.clearcoatRoughnessTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?k.clearcoatRoughnessTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:{};k.clearcoatRoughnessTexture.texCoord!==void 0&&(x.texCoord=k.clearcoatRoughnessTexture.texCoord),S.clearcoatRoughnessMap=this.loadMap(k.clearcoatRoughnessTexture.index,x)}if(k.clearcoatNormalTexture!==void 0){const x=k.clearcoatNormalTexture.extensions&&k.clearcoatNormalTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?k.clearcoatNormalTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:{};k.clearcoatNormalTexture.texCoord!==void 0&&(x.texCoord=k.clearcoatNormalTexture.texCoord),S.clearcoatNormalMap=this.loadMap(k.clearcoatNormalTexture.index,x)}}if(w[l.GLTF_EXTENSIONS.KHR_MATERIALS_IOR]){const k=w[l.GLTF_EXTENSIONS.KHR_MATERIALS_IOR];k.ior!==void 0&&(S.ior=k.ior)}if(w[l.GLTF_EXTENSIONS.KHR_MATERIALS_TRANSMISSION]){const k=w[l.GLTF_EXTENSIONS.KHR_MATERIALS_TRANSMISSION];if(k.transmissionFactor!==void 0&&(S.transmission=k.transmissionFactor),k.transmissionTexture!==void 0){const x=k.transmissionTexture.extensions&&k.transmissionTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?k.transmissionTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:{};k.transmissionTexture.texCoord!==void 0&&(x.texCoord=k.transmissionTexture.texCoord),S.transmissionMap=this.loadMap(k.transmissionTexture.index,x)}}if(w[l.GLTF_EXTENSIONS.KHR_MATERIALS_VOLUME]){const k=w[l.GLTF_EXTENSIONS.KHR_MATERIALS_VOLUME];if(k.thicknessFactor!==void 0&&(S.thickness=k.thicknessFactor),k.thicknessTexture!==void 0){const x=k.thicknessTexture.extensions&&k.thicknessTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?k.thicknessTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:{};k.thicknessTexture.texCoord!==void 0&&(x.texCoord=k.thicknessTexture.texCoord),S.thicknessMap=this.loadMap(k.thicknessTexture.index,x)}k.attenuationDistance!==void 0&&(S.attenuationDistance=k.attenuationDistance),k.attenuationColor!==void 0&&(S.attenuationColor=[k.attenuationColor[0]*255,k.attenuationColor[1]*255,k.attenuationColor[2]*255])}if(w[l.GLTF_EXTENSIONS.KHR_MATERIALS_SHEEN]){const k=w[l.GLTF_EXTENSIONS.KHR_MATERIALS_SHEEN];if(S.sheen=1,k.sheenColorFactor!==void 0&&(S.sheenColor=[k.sheenColorFactor[0]*255,k.sheenColorFactor[1]*255,k.sheenColorFactor[2]*255]),k.sheenRoughnessFactor!==void 0&&(S.sheenRoughness=k.sheenRoughnessFactor),k.sheenColorTexture!==void 0){const x=k.sheenColorTexture.extensions&&k.sheenColorTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?k.sheenColorTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:{};k.sheenColorTexture.texCoord!==void 0&&(x.texCoord=k.sheenColorTexture.texCoord),S.sheenColorMap=this.loadMap(k.sheenColorTexture.index,x)}if(k.sheenRoughnessTexture!==void 0){const x=k.sheenRoughnessTexture.extensions&&k.sheenRoughnessTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?k.sheenRoughnessTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:{};k.sheenRoughnessTexture.texCoord!==void 0&&(x.texCoord=k.sheenRoughnessTexture.texCoord),S.sheenRoughnessMap=this.loadMap(k.sheenRoughnessTexture.index,x)}}if(w[l.GLTF_EXTENSIONS.KHR_MATERIALS_SPECULAR]){const k=w[l.GLTF_EXTENSIONS.KHR_MATERIALS_SPECULAR];if(k.specularFactor!==void 0&&(S.specularIntensity=k.specularFactor),k.specularColorFactor!==void 0&&(S.specularColor=[k.specularColorFactor[0]*255,k.specularColorFactor[1]*255,k.specularColorFactor[2]*255]),k.specularColorTexture!==void 0){const x=k.specularColorTexture.extensions&&k.specularColorTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?k.specularColorTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:{};k.specularColorTexture.texCoord!==void 0&&(x.texCoord=k.specularColorTexture.texCoord),S.specularColorMap=this.loadMap(k.specularColorTexture.index,x)}if(k.specularTexture!==void 0){const x=k.specularTexture.extensions&&k.specularTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]?k.specularTexture.extensions[l.GLTF_EXTENSIONS.KHR_TEXTURE_TRANSFORM]:{};k.specularTexture.texCoord!==void 0&&(x.texCoord=k.specularTexture.texCoord),S.specularIntensityMap=this.loadMap(k.specularTexture.index,x)}}const M=new i.MaterialStandardData(S);this._loaded[_]=M}yield Promise.all(g)})}loadMap(g,v){if(!this._content.textures)throw new Error("Textures not available.");const _=this._content.textures[g];if(!this._content.images)throw new Error("Images not available.");const b=this._content.samplers&&_.sampler&&this._content.samplers[_.sampler]?this._content.samplers[_.sampler]:{},w=this._textureLoader.getTexture(g);return new i.MapData(w.image,{blob:w.blob,wrapS:b.wrapS,wrapT:b.wrapT,minFilter:b.minFilter,magFilter:b.magFilter,offset:v&&v.offset?n.vec2.fromValues(v.offset[0],v.offset[1]):n.vec2.create(),repeat:v&&v.scale?n.vec2.fromValues(v.scale[0],v.scale[1]):n.vec2.fromValues(1,1),rotation:v&&v.rotation!==void 0?v.rotation:0,texCoord:v==null?void 0:v.texCoord,flipY:!1})}}return x3.MaterialLoader=d,x3}var k3={},Coe;function Bit(){if(Coe)return k3;Coe=1,Object.defineProperty(k3,"__esModule",{value:!0}),k3.GeometryLoader=void 0;const t=dr,e=Gi,n=_Q();class i{constructor(l,d,p,g,v){this._content=l,this._accessorLoader=d,this._bufferViewLoader=p,this._materialLoader=g,this._dracoModule=v,this._materialVariantsData=new e.MaterialVariantsData,this._loaded={}}get materialVariantsData(){return this._materialVariantsData}loadMesh(l,d){if(!this._content.meshes)throw new Error("GeometryLoader.loadMesh: Meshes not available.");if(!this._content.meshes[l])throw new Error("GeometryLoader.loadMesh: Mesh not available.");const p=this._content.meshes[l],g=new t.TreeNode(p.name||"mesh_"+l);if(p.primitives)for(let v=0,_=p.primitives.length;v<_;v++)g.addChild(this.loadPrimitive(l,p.primitives,v,p.weights||d));return g}loadPrimitive(l,d,p,g=[]){const v=d[p],_=new t.TreeNode("primitive_"+p);if(this._loaded["mesh_"+l+"_primitive_"+p])return _.data.push(this._loaded["mesh_"+l+"_primitive_"+p].clone()),_;const b={};let w=null;const E={};if(v.extensions&&v.extensions[n.GLTF_EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]){const x=v.extensions[n.GLTF_EXTENSIONS.KHR_DRACO_MESH_COMPRESSION],C=this._bufferViewLoader.getBufferView(x.bufferView),P=new this._dracoModule.Decoder,O=new Int8Array(C),L=P.GetEncodedGeometryType(O);let B;if(L===this._dracoModule.TRIANGULAR_MESH?(B=new this._dracoModule.Mesh,P.DecodeArrayToMesh(O,O.byteLength,B)):L===this._dracoModule.POINT_CLOUD&&(B=new this._dracoModule.PointCloud,P.DecodeArrayToPointCloud(O,O.byteLength,B)),x.attributes.POSITION===void 0){const V="No position attribute found in the mesh.";throw this._dracoModule.destroy(P),this._dracoModule.destroy(B),new Error(V)}for(let V in x.attributes){const G=P.GetAttributeByUniqueId(B,x.attributes[V]),j=new this._dracoModule.DracoFloat32Array;P.GetAttributeFloatForAllPoints(B,G,j);const F=G.byte_offset(),q=G.normalized(),fe=G.num_components(),J=B.num_points()*fe,le=J*Float32Array.BYTES_PER_ELEMENT,me=this._dracoModule._malloc(le);P.GetAttributeDataArrayForAllPoints(B,G,this._dracoModule.DT_FLOAT32,le,me);const be=new Float32Array(this._dracoModule.HEAPF32.buffer,me,J).slice();this._dracoModule._free(me),V.includes("COLOR")&&be.forEach((ye,pe)=>be[pe]=Math.max(0,Math.min(1,ye))),b[V]=new e.AttributeData(be,fe,be.BYTES_PER_ELEMENT*fe,F,be.BYTES_PER_ELEMENT,q,be.length/fe)}if(L==this._dracoModule.TRIANGULAR_MESH){const G=B.num_faces()*3,j=G*4,F=this._dracoModule._malloc(j);P.GetTrianglesUInt32Array(B,j,F);const q=new Uint32Array(this._dracoModule.HEAPF32.buffer,F,G).slice();this._dracoModule._free(F),w=new e.AttributeData(q,1,q.BYTES_PER_ELEMENT*1,0,q.BYTES_PER_ELEMENT,!1,q.length)}this._dracoModule.destroy(P),this._dracoModule.destroy(B)}for(let x in v.attributes){if(b[x]){E[x]=x;continue}let C=x;if(/\d/.test(C)&&!C.includes("_")){const P=C.search(/\d/);C=C.substring(0,P)+"_"+C.substring(P,C.length)}else C==="TEXCOORD"||C==="COLOR"||C==="JOINTS"||C==="WEIGHTS"?C+="_0":C==="UV"&&(C="TEXCOORD_0");E[x]=C,b[C]=this._accessorLoader.getAccessor(v.attributes[x])}if((v.indices||v.indices===0)&&!w&&(w=this._accessorLoader.getAccessor(v.indices)),v.targets)for(let x=0;x<v.targets.length;x++)for(let C in v.targets[x])b[C]&&b[E[C]].morphAttributeData.push(this._accessorLoader.getAccessor(v.targets[x][C]));let S=null;(v.material||v.material===0)&&(S=this._materialLoader.getMaterial(v.material));const M=new e.PrimitiveData(b,w),k=new e.GeometryData(M,v.mode,S);if(v.extensions&&v.extensions[n.GLTF_EXTENSIONS.KHR_MATERIALS_VARIANTS]){this._materialVariantsData.geometryData.push(k);const x=v.extensions[n.GLTF_EXTENSIONS.KHR_MATERIALS_VARIANTS];for(let C=0;C<x.mappings.length;C++){const P=x.mappings[C],O=this._materialLoader.getMaterial(P.material);for(let L=0;L<P.variants.length;L++)k.materialVariants.push({variant:P.variants[L],material:O})}}return k.morphWeights=g,this._loaded["mesh_"+l+"_primitive_"+p]=k,_.data.push(k),_}}return k3.GeometryLoader=i,k3}var Tye={exports:{}};(function(t,e){var n=(()=>{var i=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(i=i||__filename),function(o){o=o||{};var l=typeof o<"u"?o:{},d=Object.assign,p,g;l.ready=new Promise(function(ee,ve){p=ee,g=ve});var v=!1,_=!1;l.onRuntimeInitialized=function(){v=!0,_&&typeof l.onModuleLoaded=="function"&&l.onModuleLoaded(l)},l.onModuleParsed=function(){_=!0,v&&typeof l.onModuleLoaded=="function"&&l.onModuleLoaded(l)};function b(ee){if(typeof ee!="string")return!1;const ve=ee.split(".");return ve.length<2||ve.length>3?!1:ve[0]==1&&ve[1]>=0&&ve[1]<=5?!0:!(ve[0]!=0||ve[1]>10)}l.isVersionSupported=b;var w=d({},l),E=typeof window=="object",S=typeof importScripts=="function",M=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",k="";function x(ee){return l.locateFile?l.locateFile(ee,k):k+ee}var C,P,O,L,B,V;M?(S?k=Eb.dirname(k)+"/":k=__dirname+"/",V=()=>{B||(L=Eb,B=Eb)},C=function(ve,Ye){var Bt=mr(ve);return Bt?Ye?Bt:Bt.toString():(V(),ve=B.normalize(ve),L.readFileSync(ve,Ye?null:"utf8"))},O=ee=>{var ve=C(ee,!0);return ve.buffer||(ve=new Uint8Array(ve)),ve},P=(ee,ve,Ye)=>{var Bt=mr(ee);Bt&&ve(Bt),V(),ee=B.normalize(ee),L.readFile(ee,function(Zn,Hn){Zn?Ye(Zn):ve(Hn.buffer)})},process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),l.inspect=function(){return"[Emscripten Module object]"}):(E||S)&&(S?k=self.location.href:typeof document<"u"&&document.currentScript&&(k=document.currentScript.src),i&&(k=i),k.indexOf("blob:")!==0?k=k.substr(0,k.replace(/[?#].*/,"").lastIndexOf("/")+1):k="",C=ee=>{try{var ve=new XMLHttpRequest;return ve.open("GET",ee,!1),ve.send(null),ve.responseText}catch(Bt){var Ye=mr(ee);if(Ye)return _n(Ye);throw Bt}},S&&(O=ee=>{try{var ve=new XMLHttpRequest;return ve.open("GET",ee,!1),ve.responseType="arraybuffer",ve.send(null),new Uint8Array(ve.response)}catch(Bt){var Ye=mr(ee);if(Ye)return Ye;throw Bt}}),P=(ee,ve,Ye)=>{var Bt=new XMLHttpRequest;Bt.open("GET",ee,!0),Bt.responseType="arraybuffer",Bt.onload=()=>{if(Bt.status==200||Bt.status==0&&Bt.response){ve(Bt.response);return}var Zn=mr(ee);if(Zn){ve(Zn.buffer);return}Ye()},Bt.onerror=Ye,Bt.send(null)});var G=l.print||console.log.bind(console),j=l.printErr||console.warn.bind(console);d(l,w),w=null,l.arguments&&l.arguments,l.thisProgram&&l.thisProgram,l.quit&&l.quit;var F;l.wasmBinary&&(F=l.wasmBinary),l.noExitRuntime;var q={Memory:function(ee){this.buffer=new ArrayBuffer(ee.initial*65536)},Module:function(ee){},Instance:function(ee,ve){this.exports=function(Bt){function Zn(Ns){return Ns.set=function(ju,yo){this[ju]=yo},Ns.get=function(ju){return this[ju]},Ns}for(var Hn,Tr=new Uint8Array(123),gr=25;gr>=0;--gr)Tr[48+gr]=52+gr,Tr[65+gr]=gr,Tr[97+gr]=26+gr;Tr[43]=62,Tr[47]=63;function vr(Ns,ju,yo){for(var D,zt,r=0,I=ju,Ut=yo.length,Ue=ju+(Ut*3>>2)-(yo[Ut-2]=="=")-(yo[Ut-1]=="=");r<Ut;r+=4)D=Tr[yo.charCodeAt(r+1)],zt=Tr[yo.charCodeAt(r+2)],Ns[I++]=Tr[yo.charCodeAt(r)]<<2|D>>4,I<Ue&&(Ns[I++]=D<<4|zt>>2),I<Ue&&(Ns[I++]=zt<<6|Tr[yo.charCodeAt(r+3)])}function Rp(Ns){vr(Hn,1028,"YAQAAAEAAAACAAAAAwAAAAQAAAAFAAAABgAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAE41ZHJhY28yOEF0dHJpYnV0ZU9jdGFoZWRyb25UcmFuc2Zvcm1FAADYOgAAOAQAAMwHAAAAAAAA0AQAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAAAoAAAAXAAAAGAAAAE41ZHJhY28zMEF0dHJpYnV0ZVF1YW50aXphdGlvblRyYW5zZm9ybUUAAAAA2DoAAKQEAADMBwAALSsgICAwWDB4AF9fbmV4dF9wcmltZSBvdmVyZmxvdwB2ZWN0b3IAc3RkOjpleGNlcHRpb24Ac2tpcF9hdHRyaWJ1dGVfdHJhbnNmb3JtAGJhc2ljX3N0cmluZwBhbGxvY2F0b3I8VD46OmFsbG9jYXRlKHNpemVfdCBuKSAnbicgZXhjZWVkcyBtYXhpbXVtIHN1cHBvcnRlZCBzaXplAERSQUNPAFVzaW5nIGluY29tcGF0aWJsZSBkZWNvZGVyIGZvciB0aGUgaW5wdXQgZ2VvbWV0cnkuAEZhaWxlZCB0byBkZWNvZGUgcG9pbnQgYXR0cmlidXRlcy4ARmFpbGVkIHRvIGluaXRpYWxpemUgdGhlIGRlY29kZXIuAFVua25vd24gbWlub3IgdmVyc2lvbi4AVW5rbm93biBtYWpvciB2ZXJzaW9uLgBJbnB1dCBpcyBub3QgYSBtZXNoLgBVbnN1cHBvcnRlZCBnZW9tZXRyeSB0eXBlLgBOb3QgYSBEcmFjbyBmaWxlLgBJbnB1dCBpcyBub3QgYSBwb2ludCBjbG91ZC4AVW5zdXBwb3J0ZWQgZW5jb2RpbmcgbWV0aG9kLgBGYWlsZWQgdG8gZGVjb2RlIG1ldGFkYXRhLgBGYWlsZWQgdG8gZGVjb2RlIGdlb21ldHJ5IGRhdGEuAChudWxsKQBQdXJlIHZpcnR1YWwgZnVuY3Rpb24gY2FsbGVkIQBLZFRyZWVBdHRyaWJ1dGVzRGVjb2RlcjogY29tcHJlc3Npb24gbGV2ZWwgJWkgbm90IHN1cHBvcnRlZC4KAEZsb2F0UG9pbnRzVHJlZURlY29kZXI6IGNvbXByZXNzaW9uIGxldmVsICVpIG5vdCBzdXBwb3J0ZWQuCgBWZXJzaW9uIG5vdCBzdXBwb3J0ZWQuIAoATWV0aG9kIG5vdCBzdXBwb3J0ZWQuIAoATjVkcmFjbzE4QXR0cmlidXRlVHJhbnNmb3JtRQCwOgAArwcAAAAAAABYCAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAACAAAAAhAAAAIgAAACMAAAAkAAAATjVkcmFjbzE3QXR0cmlidXRlc0RlY29kZXJFAE41ZHJhY28yNkF0dHJpYnV0ZXNEZWNvZGVySW50ZXJmYWNlRQAAAACwOgAAKAgAANg6AAAMCAAAUAgAAAAAAADACAAAJQAAACYAAAAbAAAAHAAAAB0AAAAeAAAAHwAAACAAAAAhAAAAJwAAACgAAAApAAAATjVkcmFjbzIzS2RUcmVlQXR0cmlidXRlc0RlY29kZXJFAAAA2DoAAJwIAABYCAAAAAAAACAJAAAqAAAAKwAAACwAAAAtAAAALgAAAC8AAAAwAAAAMQAAADIAAABONWRyYWNvMjZTZXF1ZW50aWFsQXR0cmlidXRlRGVjb2RlckUAAAAAsDoAAPgIAAD/////AAAAAJgJAAAzAAAANAAAABsAAAA1AAAANgAAAB4AAAAfAAAAIAAAADcAAAA4AAAAOQAAADoAAAA7AAAATjVkcmFjbzM3U2VxdWVudGlhbEF0dHJpYnV0ZURlY29kZXJzQ29udHJvbGxlckUA2DoAAGgJAABYCAAAAAAAAAwKAAA8AAAAPQAAAD4AAAAtAAAALgAAAC8AAAA/AAAAMQAAAEAAAABBAAAAQgAAAEMAAABEAAAATjVkcmFjbzMzU2VxdWVudGlhbEludGVnZXJBdHRyaWJ1dGVEZWNvZGVyRQDYOgAA4AkAACAJAAAAAAAAmAwAAEUAAABGAAAARwAAAEgAAABJAAAASgAAAEsAAABMAAAATQAAAE4AAABPAAAAUAAAAE41ZHJhY280ME1lc2hQcmVkaWN0aW9uU2NoZW1lUGFyYWxsZWxvZ3JhbURlY29kZXJJaU5TXzM3UHJlZGljdGlvblNjaGVtZVdyYXBEZWNvZGluZ1RyYW5zZm9ybUlpaUVFTlNfMjRNZXNoUHJlZGljdGlvblNjaGVtZURhdGFJTlNfMjRNZXNoQXR0cmlidXRlQ29ybmVyVGFibGVFRUVFRQBONWRyYWNvMjdNZXNoUHJlZGljdGlvblNjaGVtZURlY29kZXJJaU5TXzM3UHJlZGljdGlvblNjaGVtZVdyYXBEZWNvZGluZ1RyYW5zZm9ybUlpaUVFTlNfMjRNZXNoUHJlZGljdGlvblNjaGVtZURhdGFJTlNfMjRNZXNoQXR0cmlidXRlQ29ybmVyVGFibGVFRUVFRQBONWRyYWNvMjNQcmVkaWN0aW9uU2NoZW1lRGVjb2RlcklpTlNfMzdQcmVkaWN0aW9uU2NoZW1lV3JhcERlY29kaW5nVHJhbnNmb3JtSWlpRUVFRQBONWRyYWNvMzdQcmVkaWN0aW9uU2NoZW1lVHlwZWREZWNvZGVySW50ZXJmYWNlSWlpRUUATjVkcmFjbzMyUHJlZGljdGlvblNjaGVtZURlY29kZXJJbnRlcmZhY2VFAE41ZHJhY28yNVByZWRpY3Rpb25TY2hlbWVJbnRlcmZhY2VFALA6AAA8DAAA2DoAABEMAABgDAAA2DoAAN0LAABoDAAA2DoAAIkLAAB0DAAA2DoAAPMKAACADAAA2DoAAFAKAACMDAAAAAAAAIwMAABFAAAAUQAAACIAAABIAAAAIgAAAEoAAABLAAAATAAAAE0AAABOAAAATwAAACIAAAAAAAAAgAwAAEUAAABSAAAAIgAAAEgAAAAiAAAASgAAAEsAAABMAAAATQAAAE4AAABPAAAAIgAAAAAAAAD0DQAARQAAAFMAAABUAAAASAAAAFUAAABKAAAASwAAAEwAAABNAAAATgAAAE8AAABWAAAATjVkcmFjbzQ1TWVzaFByZWRpY3Rpb25TY2hlbWVNdWx0aVBhcmFsbGVsb2dyYW1EZWNvZGVySWlOU18zN1ByZWRpY3Rpb25TY2hlbWVXcmFwRGVjb2RpbmdUcmFuc2Zvcm1JaWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzI0TWVzaEF0dHJpYnV0ZUNvcm5lclRhYmxlRUVFRUUA2DoAAEwNAACMDAAAAAAAAOwOAABXAAAAWAAAAFkAAABIAAAAWgAAAEoAAABLAAAATAAAAE0AAABOAAAAWwAAAFwAAABONWRyYWNvNTZNZXNoUHJlZGljdGlvblNjaGVtZUNvbnN0cmFpbmVkTXVsdGlQYXJhbGxlbG9ncmFtRGVjb2RlcklpTlNfMzdQcmVkaWN0aW9uU2NoZW1lV3JhcERlY29kaW5nVHJhbnNmb3JtSWlpRUVOU18yNE1lc2hQcmVkaWN0aW9uU2NoZW1lRGF0YUlOU18yNE1lc2hBdHRyaWJ1dGVDb3JuZXJUYWJsZUVFRUVFAADYOgAAOA4AAIwMAAAAAAAA0A8AAF0AAABeAAAAXwAAAEgAAABgAAAAYQAAAGIAAABjAAAATQAAAE4AAABkAAAAZQAAAE41ZHJhY28zNk1lc2hQcmVkaWN0aW9uU2NoZW1lVGV4Q29vcmRzRGVjb2RlcklpTlNfMzdQcmVkaWN0aW9uU2NoZW1lV3JhcERlY29kaW5nVHJhbnNmb3JtSWlpRUVOU18yNE1lc2hQcmVkaWN0aW9uU2NoZW1lRGF0YUlOU18yNE1lc2hBdHRyaWJ1dGVDb3JuZXJUYWJsZUVFRUVFAADYOgAAMA8AAIwMAAAAAAAAvBAAAGYAAABnAAAAaAAAAEgAAABpAAAAagAAAGsAAABsAAAATQAAAE4AAABtAAAAbgAAAE41ZHJhY280NE1lc2hQcmVkaWN0aW9uU2NoZW1lVGV4Q29vcmRzUG9ydGFibGVEZWNvZGVySWlOU18zN1ByZWRpY3Rpb25TY2hlbWVXcmFwRGVjb2RpbmdUcmFuc2Zvcm1JaWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzI0TWVzaEF0dHJpYnV0ZUNvcm5lclRhYmxlRUVFRUUAANg6AAAUEAAAjAwAAAAAAACoEQAAbwAAAHAAAABxAAAASAAAAHIAAABzAAAAdAAAAHUAAABNAAAATgAAAHYAAAB3AAAATjVkcmFjbzQyTWVzaFByZWRpY3Rpb25TY2hlbWVHZW9tZXRyaWNOb3JtYWxEZWNvZGVySWlOU18zN1ByZWRpY3Rpb25TY2hlbWVXcmFwRGVjb2RpbmdUcmFuc2Zvcm1JaWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzI0TWVzaEF0dHJpYnV0ZUNvcm5lclRhYmxlRUVFRUUAAAAA2DoAAAARAACMDAAAAAAAADATAAB4AAAAeQAAAHoAAAB7AAAAfAAAAE41ZHJhY280OE1lc2hQcmVkaWN0aW9uU2NoZW1lR2VvbWV0cmljTm9ybWFsUHJlZGljdG9yQXJlYUlpTlNfMzdQcmVkaWN0aW9uU2NoZW1lV3JhcERlY29kaW5nVHJhbnNmb3JtSWlpRUVOU18yNE1lc2hQcmVkaWN0aW9uU2NoZW1lRGF0YUlOU18yNE1lc2hBdHRyaWJ1dGVDb3JuZXJUYWJsZUVFRUVFAE41ZHJhY280OE1lc2hQcmVkaWN0aW9uU2NoZW1lR2VvbWV0cmljTm9ybWFsUHJlZGljdG9yQmFzZUlpTlNfMzdQcmVkaWN0aW9uU2NoZW1lV3JhcERlY29kaW5nVHJhbnNmb3JtSWlpRUVOU18yNE1lc2hQcmVkaWN0aW9uU2NoZW1lRGF0YUlOU18yNE1lc2hBdHRyaWJ1dGVDb3JuZXJUYWJsZUVFRUVFAAAAsDoAAHsSAADYOgAA0BEAACgTAAAAAAAAKBMAAHgAAAB9AAAAIgAAAHsAAAAiAAAAAAAAALwUAABFAAAAfgAAAH8AAABIAAAAgAAAAEoAAABLAAAATAAAAE0AAABOAAAATwAAAIEAAABONWRyYWNvNDBNZXNoUHJlZGljdGlvblNjaGVtZVBhcmFsbGVsb2dyYW1EZWNvZGVySWlOU18zN1ByZWRpY3Rpb25TY2hlbWVXcmFwRGVjb2RpbmdUcmFuc2Zvcm1JaWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzExQ29ybmVyVGFibGVFRUVFRQBONWRyYWNvMjdNZXNoUHJlZGljdGlvblNjaGVtZURlY29kZXJJaU5TXzM3UHJlZGljdGlvblNjaGVtZVdyYXBEZWNvZGluZ1RyYW5zZm9ybUlpaUVFTlNfMjRNZXNoUHJlZGljdGlvblNjaGVtZURhdGFJTlNfMTFDb3JuZXJUYWJsZUVFRUVFAADYOgAAJhQAAIAMAADYOgAAkBMAALAUAAAAAAAAsBQAAEUAAACCAAAAIgAAAEgAAAAiAAAASgAAAEsAAABMAAAATQAAAE4AAABPAAAAIgAAAAAAAADUFQAARQAAAIMAAACEAAAASAAAAIUAAABKAAAASwAAAEwAAABNAAAATgAAAE8AAACGAAAATjVkcmFjbzQ1TWVzaFByZWRpY3Rpb25TY2hlbWVNdWx0aVBhcmFsbGVsb2dyYW1EZWNvZGVySWlOU18zN1ByZWRpY3Rpb25TY2hlbWVXcmFwRGVjb2RpbmdUcmFuc2Zvcm1JaWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzExQ29ybmVyVGFibGVFRUVFRQAA2DoAADgVAACwFAAAAAAAAMAWAACHAAAAiAAAAIkAAABIAAAAigAAAEoAAABLAAAATAAAAE0AAABOAAAAiwAAAIwAAABONWRyYWNvNTZNZXNoUHJlZGljdGlvblNjaGVtZUNvbnN0cmFpbmVkTXVsdGlQYXJhbGxlbG9ncmFtRGVjb2RlcklpTlNfMzdQcmVkaWN0aW9uU2NoZW1lV3JhcERlY29kaW5nVHJhbnNmb3JtSWlpRUVOU18yNE1lc2hQcmVkaWN0aW9uU2NoZW1lRGF0YUlOU18xMUNvcm5lclRhYmxlRUVFRUUAAADYOgAAGBYAALAUAAAAAAAAmBcAAI0AAACOAAAAjwAAAEgAAACQAAAAkQAAAJIAAACTAAAATQAAAE4AAACUAAAAlQAAAE41ZHJhY28zNk1lc2hQcmVkaWN0aW9uU2NoZW1lVGV4Q29vcmRzRGVjb2RlcklpTlNfMzdQcmVkaWN0aW9uU2NoZW1lV3JhcERlY29kaW5nVHJhbnNmb3JtSWlpRUVOU18yNE1lc2hQcmVkaWN0aW9uU2NoZW1lRGF0YUlOU18xMUNvcm5lclRhYmxlRUVFRUUAAADYOgAABBcAALAUAAAAAAAAeBgAAJYAAACXAAAAmAAAAEgAAACZAAAAmgAAAJsAAACcAAAATQAAAE4AAACdAAAAngAAAE41ZHJhY280NE1lc2hQcmVkaWN0aW9uU2NoZW1lVGV4Q29vcmRzUG9ydGFibGVEZWNvZGVySWlOU18zN1ByZWRpY3Rpb25TY2hlbWVXcmFwRGVjb2RpbmdUcmFuc2Zvcm1JaWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzExQ29ybmVyVGFibGVFRUVFRQAAANg6AADcFwAAsBQAAAAAAABUGQAAnwAAAKAAAAChAAAASAAAAKIAAACjAAAApAAAAKUAAABNAAAATgAAAKYAAACnAAAATjVkcmFjbzQyTWVzaFByZWRpY3Rpb25TY2hlbWVHZW9tZXRyaWNOb3JtYWxEZWNvZGVySWlOU18zN1ByZWRpY3Rpb25TY2hlbWVXcmFwRGVjb2RpbmdUcmFuc2Zvcm1JaWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzExQ29ybmVyVGFibGVFRUVFRQDYOgAAvBgAALAUAAAAAAAAwBoAAKgAAACpAAAAqgAAAKsAAACsAAAATjVkcmFjbzQ4TWVzaFByZWRpY3Rpb25TY2hlbWVHZW9tZXRyaWNOb3JtYWxQcmVkaWN0b3JBcmVhSWlOU18zN1ByZWRpY3Rpb25TY2hlbWVXcmFwRGVjb2RpbmdUcmFuc2Zvcm1JaWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzExQ29ybmVyVGFibGVFRUVFRQBONWRyYWNvNDhNZXNoUHJlZGljdGlvblNjaGVtZUdlb21ldHJpY05vcm1hbFByZWRpY3RvckJhc2VJaU5TXzM3UHJlZGljdGlvblNjaGVtZVdyYXBEZWNvZGluZ1RyYW5zZm9ybUlpaUVFTlNfMjRNZXNoUHJlZGljdGlvblNjaGVtZURhdGFJTlNfMTFDb3JuZXJUYWJsZUVFRUVFALA6AAAaGgAA2DoAAHwZAAC4GgAAAAAAALgaAACoAAAArQAAACIAAACrAAAAIgAAAAAAAAB8GwAARQAAAK4AAACvAAAASAAAALAAAABKAAAASwAAAEwAAABNAAAATgAAAE8AAACxAAAATjVkcmFjbzI4UHJlZGljdGlvblNjaGVtZURlbHRhRGVjb2RlcklpTlNfMzdQcmVkaWN0aW9uU2NoZW1lV3JhcERlY29kaW5nVHJhbnNmb3JtSWlpRUVFRQAAAADYOgAAIBsAAIAMAAAAAAAA8BsAALIAAACzAAAAtAAAAC0AAAAuAAAAtQAAAD8AAAAxAAAAQAAAALYAAAC3AAAAuAAAALkAAABONWRyYWNvMzJTZXF1ZW50aWFsTm9ybWFsQXR0cmlidXRlRGVjb2RlckUAANg6AADEGwAADAoAAAAAAAD8HQAAugAAALsAAAC8AAAAvQAAAL4AAAC/AAAAwAAAAMEAAADCAAAAwwAAAMQAAADFAAAATjVkcmFjbzQyTWVzaFByZWRpY3Rpb25TY2hlbWVHZW9tZXRyaWNOb3JtYWxEZWNvZGVySWlOU180OVByZWRpY3Rpb25TY2hlbWVOb3JtYWxPY3RhaGVkcm9uRGVjb2RpbmdUcmFuc2Zvcm1JaUVFTlNfMjRNZXNoUHJlZGljdGlvblNjaGVtZURhdGFJTlNfMjRNZXNoQXR0cmlidXRlQ29ybmVyVGFibGVFRUVFRQBONWRyYWNvMjdNZXNoUHJlZGljdGlvblNjaGVtZURlY29kZXJJaU5TXzQ5UHJlZGljdGlvblNjaGVtZU5vcm1hbE9jdGFoZWRyb25EZWNvZGluZ1RyYW5zZm9ybUlpRUVOU18yNE1lc2hQcmVkaWN0aW9uU2NoZW1lRGF0YUlOU18yNE1lc2hBdHRyaWJ1dGVDb3JuZXJUYWJsZUVFRUVFAE41ZHJhY28yM1ByZWRpY3Rpb25TY2hlbWVEZWNvZGVySWlOU180OVByZWRpY3Rpb25TY2hlbWVOb3JtYWxPY3RhaGVkcm9uRGVjb2RpbmdUcmFuc2Zvcm1JaUVFRUUA2DoAAIUdAAB0DAAA2DoAAOQcAADkHQAA2DoAADQcAADwHQAAAAAAAJgfAADGAAAAxwAAAMgAAADJAAAAygAAAE41ZHJhY280OE1lc2hQcmVkaWN0aW9uU2NoZW1lR2VvbWV0cmljTm9ybWFsUHJlZGljdG9yQXJlYUlpTlNfNDlQcmVkaWN0aW9uU2NoZW1lTm9ybWFsT2N0YWhlZHJvbkRlY29kaW5nVHJhbnNmb3JtSWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzI0TWVzaEF0dHJpYnV0ZUNvcm5lclRhYmxlRUVFRUUATjVkcmFjbzQ4TWVzaFByZWRpY3Rpb25TY2hlbWVHZW9tZXRyaWNOb3JtYWxQcmVkaWN0b3JCYXNlSWlOU180OVByZWRpY3Rpb25TY2hlbWVOb3JtYWxPY3RhaGVkcm9uRGVjb2RpbmdUcmFuc2Zvcm1JaUVFTlNfMjRNZXNoUHJlZGljdGlvblNjaGVtZURhdGFJTlNfMjRNZXNoQXR0cmlidXRlQ29ybmVyVGFibGVFRUVFRQCwOgAA2h4AANg6AAAkHgAAkB8AAAAAAAAgIQAAywAAAMwAAADNAAAAvQAAAM4AAADPAAAA0AAAANEAAADCAAAAwwAAANIAAADTAAAATjVkcmFjbzQyTWVzaFByZWRpY3Rpb25TY2hlbWVHZW9tZXRyaWNOb3JtYWxEZWNvZGVySWlOU180OVByZWRpY3Rpb25TY2hlbWVOb3JtYWxPY3RhaGVkcm9uRGVjb2RpbmdUcmFuc2Zvcm1JaUVFTlNfMjRNZXNoUHJlZGljdGlvblNjaGVtZURhdGFJTlNfMTFDb3JuZXJUYWJsZUVFRUVFAE41ZHJhY28yN01lc2hQcmVkaWN0aW9uU2NoZW1lRGVjb2RlcklpTlNfNDlQcmVkaWN0aW9uU2NoZW1lTm9ybWFsT2N0YWhlZHJvbkRlY29kaW5nVHJhbnNmb3JtSWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzExQ29ybmVyVGFibGVFRUVFRQAA2DoAAH8gAADkHQAA2DoAANwfAAAUIQAAAAAAAKQiAADUAAAA1QAAANYAAADXAAAA2AAAAE41ZHJhY280OE1lc2hQcmVkaWN0aW9uU2NoZW1lR2VvbWV0cmljTm9ybWFsUHJlZGljdG9yQXJlYUlpTlNfNDlQcmVkaWN0aW9uU2NoZW1lTm9ybWFsT2N0YWhlZHJvbkRlY29kaW5nVHJhbnNmb3JtSWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzExQ29ybmVyVGFibGVFRUVFRQBONWRyYWNvNDhNZXNoUHJlZGljdGlvblNjaGVtZUdlb21ldHJpY05vcm1hbFByZWRpY3RvckJhc2VJaU5TXzQ5UHJlZGljdGlvblNjaGVtZU5vcm1hbE9jdGFoZWRyb25EZWNvZGluZ1RyYW5zZm9ybUlpRUVOU18yNE1lc2hQcmVkaWN0aW9uU2NoZW1lRGF0YUlOU18xMUNvcm5lclRhYmxlRUVFRUUAAACwOgAA8SEAANg6AABIIQAAnCIAAAAAAABMIwAA2QAAANoAAADbAAAAvQAAANwAAADdAAAA3gAAAN8AAADCAAAAwwAAAOAAAADhAAAATjVkcmFjbzI4UHJlZGljdGlvblNjaGVtZURlbHRhRGVjb2RlcklpTlNfNDlQcmVkaWN0aW9uU2NoZW1lTm9ybWFsT2N0YWhlZHJvbkRlY29kaW5nVHJhbnNmb3JtSWlFRUVFANg6AADoIgAA5B0AAAAAAACAJQAA4gAAAOMAAADkAAAA5QAAAOYAAADnAAAA6AAAAOkAAADqAAAA6wAAAOwAAADtAAAATjVkcmFjbzQyTWVzaFByZWRpY3Rpb25TY2hlbWVHZW9tZXRyaWNOb3JtYWxEZWNvZGVySWlOU182MlByZWRpY3Rpb25TY2hlbWVOb3JtYWxPY3RhaGVkcm9uQ2Fub25pY2FsaXplZERlY29kaW5nVHJhbnNmb3JtSWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzI0TWVzaEF0dHJpYnV0ZUNvcm5lclRhYmxlRUVFRUUATjVkcmFjbzI3TWVzaFByZWRpY3Rpb25TY2hlbWVEZWNvZGVySWlOU182MlByZWRpY3Rpb25TY2hlbWVOb3JtYWxPY3RhaGVkcm9uQ2Fub25pY2FsaXplZERlY29kaW5nVHJhbnNmb3JtSWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzI0TWVzaEF0dHJpYnV0ZUNvcm5lclRhYmxlRUVFRUUATjVkcmFjbzIzUHJlZGljdGlvblNjaGVtZURlY29kZXJJaU5TXzYyUHJlZGljdGlvblNjaGVtZU5vcm1hbE9jdGFoZWRyb25DYW5vbmljYWxpemVkRGVjb2RpbmdUcmFuc2Zvcm1JaUVFRUUAANg6AAD7JAAAdAwAANg6AABNJAAAaCUAANg6AACQIwAAdCUAAAAAAAA4JwAA7gAAAO8AAADwAAAA8QAAAPIAAABONWRyYWNvNDhNZXNoUHJlZGljdGlvblNjaGVtZUdlb21ldHJpY05vcm1hbFByZWRpY3RvckFyZWFJaU5TXzYyUHJlZGljdGlvblNjaGVtZU5vcm1hbE9jdGFoZWRyb25DYW5vbmljYWxpemVkRGVjb2RpbmdUcmFuc2Zvcm1JaUVFTlNfMjRNZXNoUHJlZGljdGlvblNjaGVtZURhdGFJTlNfMjRNZXNoQXR0cmlidXRlQ29ybmVyVGFibGVFRUVFRQBONWRyYWNvNDhNZXNoUHJlZGljdGlvblNjaGVtZUdlb21ldHJpY05vcm1hbFByZWRpY3RvckJhc2VJaU5TXzYyUHJlZGljdGlvblNjaGVtZU5vcm1hbE9jdGFoZWRyb25DYW5vbmljYWxpemVkRGVjb2RpbmdUcmFuc2Zvcm1JaUVFTlNfMjRNZXNoUHJlZGljdGlvblNjaGVtZURhdGFJTlNfMjRNZXNoQXR0cmlidXRlQ29ybmVyVGFibGVFRUVFRQAAALA6AABrJgAA2DoAAKglAAAwJwAAAAAAANwoAADzAAAA9AAAAPUAAADlAAAA9gAAAPcAAAD4AAAA+QAAAOoAAADrAAAA+gAAAPsAAABONWRyYWNvNDJNZXNoUHJlZGljdGlvblNjaGVtZUdlb21ldHJpY05vcm1hbERlY29kZXJJaU5TXzYyUHJlZGljdGlvblNjaGVtZU5vcm1hbE9jdGFoZWRyb25DYW5vbmljYWxpemVkRGVjb2RpbmdUcmFuc2Zvcm1JaUVFTlNfMjRNZXNoUHJlZGljdGlvblNjaGVtZURhdGFJTlNfMTFDb3JuZXJUYWJsZUVFRUVFAE41ZHJhY28yN01lc2hQcmVkaWN0aW9uU2NoZW1lRGVjb2RlcklpTlNfNjJQcmVkaWN0aW9uU2NoZW1lTm9ybWFsT2N0YWhlZHJvbkNhbm9uaWNhbGl6ZWREZWNvZGluZ1RyYW5zZm9ybUlpRUVOU18yNE1lc2hQcmVkaWN0aW9uU2NoZW1lRGF0YUlOU18xMUNvcm5lclRhYmxlRUVFRUUAAAAA2DoAACwoAABoJQAA2DoAAHwnAADQKAAAAAAAAHgqAAD8AAAA/QAAAP4AAAD/AAAAAAEAAE41ZHJhY280OE1lc2hQcmVkaWN0aW9uU2NoZW1lR2VvbWV0cmljTm9ybWFsUHJlZGljdG9yQXJlYUlpTlNfNjJQcmVkaWN0aW9uU2NoZW1lTm9ybWFsT2N0YWhlZHJvbkNhbm9uaWNhbGl6ZWREZWNvZGluZ1RyYW5zZm9ybUlpRUVOU18yNE1lc2hQcmVkaWN0aW9uU2NoZW1lRGF0YUlOU18xMUNvcm5lclRhYmxlRUVFRUUATjVkcmFjbzQ4TWVzaFByZWRpY3Rpb25TY2hlbWVHZW9tZXRyaWNOb3JtYWxQcmVkaWN0b3JCYXNlSWlOU182MlByZWRpY3Rpb25TY2hlbWVOb3JtYWxPY3RhaGVkcm9uQ2Fub25pY2FsaXplZERlY29kaW5nVHJhbnNmb3JtSWlFRU5TXzI0TWVzaFByZWRpY3Rpb25TY2hlbWVEYXRhSU5TXzExQ29ybmVyVGFibGVFRUVFRQCwOgAAuikAANg6AAAEKQAAcCoAAAAAAAAwKwAA2QAAAAEBAAACAQAA5QAAAAMBAAAEAQAABQEAAAYBAADqAAAA6wAAAAcBAAAIAQAATjVkcmFjbzI4UHJlZGljdGlvblNjaGVtZURlbHRhRGVjb2RlcklpTlNfNjJQcmVkaWN0aW9uU2NoZW1lTm9ybWFsT2N0YWhlZHJvbkNhbm9uaWNhbGl6ZWREZWNvZGluZ1RyYW5zZm9ybUlpRUVFRQAAAADYOgAAvCoAAGglAAAAAAAAtCsAAAkBAAAKAQAACwEAAC0AAAAuAAAADAEAAD8AAAAxAAAAQAAAAA0BAABCAAAAQwAAAA4BAAAPAQAAEAEAAE41ZHJhY28zOFNlcXVlbnRpYWxRdWFudGl6YXRpb25BdHRyaWJ1dGVEZWNvZGVyRQAAAADYOgAAgCsAAAwKAAAAAAAAFCwAABEBAAASAQAAEwEAABQBAAAiAAAAFQEAABYBAAAXAQAAGAEAABkBAAAaAQAAGwEAACIAAABONWRyYWNvMTFNZXNoRGVjb2RlckUAAADYOgAA/CsAAGw0AAAAAAAAgCwAABwBAAAdAQAAEwEAAB4BAAAfAQAAFQEAABYBAAAXAQAAIAEAACEBAAAiAQAAIwEAACQBAABONWRyYWNvMjJNZXNoRWRnZWJyZWFrZXJEZWNvZGVyRQAAAADYOgAAXCwAABQsAAAAAAAApC0AACUBAAAmAQAAJwEAACgBAAApAQAAKgEAACsBAAAsAQAALQEAAC4BAAD/////AAAAAAguAAAvAQAAMAEAADEBAAAyAQAAMwEAADQBAAA1AQAANgEAADcBAAA4AQAAAAAAAGguAAA5AQAAOgEAADsBAAA8AQAAPQEAAD4BAAA/AQAAQAEAAEEBAABCAQAATjVkcmFjbzI2TWVzaEVkZ2VicmVha2VyRGVjb2RlckltcGxJTlNfMzFNZXNoRWRnZWJyZWFrZXJUcmF2ZXJzYWxEZWNvZGVyRUVFAE41ZHJhY28zNU1lc2hFZGdlYnJlYWtlckRlY29kZXJJbXBsSW50ZXJmYWNlRQAAALA6AABsLQAA2DoAACAtAACcLQAATjVkcmFjbzI2TWVzaEVkZ2VicmVha2VyRGVjb2RlckltcGxJTlNfNDFNZXNoRWRnZWJyZWFrZXJUcmF2ZXJzYWxQcmVkaWN0aXZlRGVjb2RlckVFRQAAANg6AACwLQAAnC0AAE41ZHJhY28yNk1lc2hFZGdlYnJlYWtlckRlY29kZXJJbXBsSU5TXzM4TWVzaEVkZ2VicmVha2VyVHJhdmVyc2FsVmFsZW5jZURlY29kZXJFRUUAANg6AAAULgAAnC0AAAAAAABkLwAAQwEAAEQBAABFAQAATjVkcmFjbzE5RGVwdGhGaXJzdFRyYXZlcnNlcklOU18yNE1lc2hBdHRyaWJ1dGVDb3JuZXJUYWJsZUVOU18zNk1lc2hBdHRyaWJ1dGVJbmRpY2VzRW5jb2RpbmdPYnNlcnZlcklTMV9FRUVFAE41ZHJhY28xM1RyYXZlcnNlckJhc2VJTlNfMjRNZXNoQXR0cmlidXRlQ29ybmVyVGFibGVFTlNfMzZNZXNoQXR0cmlidXRlSW5kaWNlc0VuY29kaW5nT2JzZXJ2ZXJJUzFfRUVFRQCwOgAA9S4AANg6AACILgAAXC8AAAAAAABcLwAARgEAAEcBAABFAQ=="),vr(Hn,12180,"AQAAAAMAAAAFAAAABwAAAAAAAABoMAAASAEAAEkBAABKAQAASwEAAE41ZHJhY28yMk1lc2hUcmF2ZXJzYWxTZXF1ZW5jZXJJTlNfMjhNYXhQcmVkaWN0aW9uRGVncmVlVHJhdmVyc2VySU5TXzExQ29ybmVyVGFibGVFTlNfMzZNZXNoQXR0cmlidXRlSW5kaWNlc0VuY29kaW5nT2JzZXJ2ZXJJUzJfRUVFRUVFAE41ZHJhY28xNVBvaW50c1NlcXVlbmNlckUAAAAAsDoAAEMwAADYOgAAvC8AAGAwAAD/////AAAAAFgxAABMAQAATQEAAE4BAABONWRyYWNvMjhNYXhQcmVkaWN0aW9uRGVncmVlVHJhdmVyc2VySU5TXzExQ29ybmVyVGFibGVFTlNfMzZNZXNoQXR0cmlidXRlSW5kaWNlc0VuY29kaW5nT2JzZXJ2ZXJJUzFfRUVFRQBONWRyYWNvMTNUcmF2ZXJzZXJCYXNlSU5TXzExQ29ybmVyVGFibGVFTlNfMzZNZXNoQXR0cmlidXRlSW5kaWNlc0VuY29kaW5nT2JzZXJ2ZXJJUzFfRUVFRQAAsDoAAPUwAADYOgAAjDAAAFAxAAAAAAAAUDEAAE8BAABQAQAATgEAAAAAAAAQMgAAUQEAAFIBAABTAQAAVAEAAE41ZHJhY28yMk1lc2hUcmF2ZXJzYWxTZXF1ZW5jZXJJTlNfMTlEZXB0aEZpcnN0VHJhdmVyc2VySU5TXzExQ29ybmVyVGFibGVFTlNfMzZNZXNoQXR0cmlidXRlSW5kaWNlc0VuY29kaW5nT2JzZXJ2ZXJJUzJfRUVFRUVFAAAA2DoAAJAxAABgMAAAAAAAAJAyAABVAQAAVgEAAE4BAABONWRyYWNvMTlEZXB0aEZpcnN0VHJhdmVyc2VySU5TXzExQ29ybmVyVGFibGVFTlNfMzZNZXNoQXR0cmlidXRlSW5kaWNlc0VuY29kaW5nT2JzZXJ2ZXJJUzFfRUVFRQDYOgAAMDIAAFAxAAAAAAAAQDMAAFcBAABYAQAAWQEAAFoBAABONWRyYWNvMjJNZXNoVHJhdmVyc2FsU2VxdWVuY2VySU5TXzE5RGVwdGhGaXJzdFRyYXZlcnNlcklOU18yNE1lc2hBdHRyaWJ1dGVDb3JuZXJUYWJsZUVOU18zNk1lc2hBdHRyaWJ1dGVJbmRpY2VzRW5jb2RpbmdPYnNlcnZlcklTMl9FRUVFRUUAANg6AAC0MgAAYDA="),vr(Hn,13140,"rDMAABEBAABbAQAAEwEAABQBAABcAQAAFQEAABYBAAAXAQAAGAEAABkBAAAaAQAAGwEAAF0BAABONWRyYWNvMjFNZXNoU2VxdWVudGlhbERlY29kZXJFANg6AACMMwAAFCwAAAAAAADsMwAAXgEAAF8BAABgAQAAYQEAAE41ZHJhY28xNUxpbmVhclNlcXVlbmNlckUAAADYOgAA0DMAAGAwAAAAAAAAbDQAABEBAABiAQAAYwEAABQBAAAiAAAAZAEAABYBAAAXAQAAGAE="),vr(Hn,13360,"RmFpbGVkIHRvIHBhcnNlIERyYWNvIGhlYWRlci4ATjVkcmFjbzE3UG9pbnRDbG91ZERlY29kZXJFAAAAsDoAAE40AAAAAAAAxDQAABEBAABlAQAAYwEAABQBAABmAQAAZwEAABYBAAAXAQAAGAEAAE41ZHJhY28yM1BvaW50Q2xvdWRLZFRyZWVEZWNvZGVyRQAAANg6AACgNAAAbDQAAAAAAAAkNQAAEQEAAGgBAABjAQAAFAEAAGkBAABqAQAAFgEAABcBAAAYAQAATjVkcmFjbzI3UG9pbnRDbG91ZFNlcXVlbnRpYWxEZWNvZGVyRQAAANg6AAD8NAAAbDQAAAEAAAABAAAAAgAAAAIAAAAEAAAABAAAAAgAAAAIAAAABAAAAAgAAAAB"),vr(Hn,13667,"wAAAAMAAAADAAAAAwP//////////AAAAAKA1AABrAQAAbAEAAG0BAABuAQAATjVkcmFjbzRNZXNoRQAAANg6AACQNQAA5DUAAP////8AAAAAAAAAAOQ1AABvAQAAcAEAAHEBAAByAQAATjVkcmFjbzEwUG9pbnRDbG91ZEUAAAAAsDoAAMw1AADYOwAAGQAKABkZGQAAAAAFAAAAAAAACQAAAAALAAAAAAAAAAAZABEKGRkZAwoHAAEACQsYAAAJBgsAAAsABhkAAAAZGRk="),vr(Hn,13889,"DgAAAAAAAAAAGQAKDRkZGQANAAACAAkOAAAACQAOAAAO"),vr(Hn,13947,"DA=="),vr(Hn,13959,"EwAAAAATAAAAAAkMAAAAAAAMAAAM"),vr(Hn,14005,"EA=="),vr(Hn,14017,"DwAAAAQPAAAAAAkQAAAAAAAQAAAQ"),vr(Hn,14063,"Eg=="),vr(Hn,14075,"EQAAAAARAAAAAAkSAAAAAAASAAASAAAaAAAAGhoa"),vr(Hn,14130,"GgAAABoaGgAAAAAAAAk="),vr(Hn,14179,"FA=="),vr(Hn,14191,"FwAAAAAXAAAAAAkUAAAAAAAUAAAU"),vr(Hn,14237,"Fg=="),vr(Hn,14249,"FQAAAAAVAAAAAAkWAAAAAAAWAAAWAAAwMTIzNDU2Nzg5QUJDREVGAAAAAAIAAAADAAAABQAAAAcAAAALAAAADQAAABEAAAATAAAAFwAAAB0AAAAfAAAAJQAAACkAAAArAAAALwAAADUAAAA7AAAAPQAAAEMAAABHAAAASQAAAE8AAABTAAAAWQAAAGEAAABlAAAAZwAAAGsAAABtAAAAcQAAAH8AAACDAAAAiQAAAIsAAACVAAAAlwAAAJ0AAACjAAAApwAAAK0AAACzAAAAtQAAAL8AAADBAAAAxQAAAMcAAADTAAAAAQAAAAsAAAANAAAAEQAAABMAAAAXAAAAHQAAAB8AAAAlAAAAKQAAACsAAAAvAAAANQAAADsAAAA9AAAAQwAAAEcAAABJAAAATwAAAFMAAABZAAAAYQAAAGUAAABnAAAAawAAAG0AAABxAAAAeQAAAH8AAACDAAAAiQAAAIsAAACPAAAAlQAAAJcAAACdAAAAowAAAKcAAACpAAAArQAAALMAAAC1AAAAuwAAAL8AAADBAAAAxQAAAMcAAADRAAAAMDAwMTAyMDMwNDA1MDYwNzA4MDkxMDExMTIxMzE0MTUxNjE3MTgxOTIwMjEyMjIzMjQyNTI2MjcyODI5MzAzMTMyMzMzNDM1MzYzNzM4Mzk0MDQxNDI0MzQ0NDU0NjQ3NDg0OTUwNTE1MjUzNTQ1NTU2NTc1ODU5NjA2MTYyNjM2NDY1NjY2NzY4Njk3MDcxNzI3Mzc0NzU3Njc3Nzg3OTgwODE4MjgzODQ4NTg2ODc4ODg5OTA5MTkyOTM5NDk1OTY5Nzk4OTk="),vr(Hn,14884,"CgAAAGQAAADoAwAAECcAAKCGAQBAQg8AgJaYAADh9QUAypo7TjEwX19jeHhhYml2MTE2X19zaGltX3R5cGVfaW5mb0UAAAAA2DoAAEg6AADMOwAATjEwX19jeHhhYml2MTE3X19jbGFzc190eXBlX2luZm9FAAAA2DoAAHg6AABsOgAAAAAAAJw6AAB4AQAAeQEAAHoBAAB7AQAAfAEAAH0BAAB+AQAAfwEAAAAAAAAgOwAAeAEAAIABAAB6AQAAewEAAHwBAACBAQAAggEAAIMBAABOMTBfX2N4eGFiaXYxMjBfX3NpX2NsYXNzX3R5cGVfaW5mb0UAAAAA2DoAAPg6AACcOgAAAAAAAFA7AACEAQAAhQEAAIYBAABTdDlleGNlcHRpb24AAAAAsDoAAEA7AAAAAAAAfDsAAA0AAACHAQAAiAEAAFN0MTFsb2dpY19lcnJvcgDYOgAAbDsAAFA7AAAAAAAAsDsAAA0AAACJAQAAiAEAAFN0MTJsZW5ndGhfZXJyb3IAAAAA2DoAAJw7AAB8OwAAU3Q5dHlwZV9pbmZvAAAAALA6AAC8Ow=="),vr(Hn,15320,"BQ=="),vr(Hn,15332,"cwE="),vr(Hn,15356,"dAEAAHUBAABoPQ=="),vr(Hn,15380,"Ag=="),vr(Hn,15396,"//////////8="),vr(Hn,15464,"BQ=="),vr(Hn,15476,"dgE="),vr(Hn,15500,"dAEAAHcBAAB4PQAAAAQ="),vr(Hn,15524,"AQ=="),vr(Hn,15540,"/////wo="),vr(Hn,15608,"IERQ")}var Dp=new ArrayBuffer(16),pee=new Int32Array(Dp),mee=new Float32Array(Dp);function vB(Ns){mee[2]=Ns}function _B(Ns){return pee[Ns]}function SSe(Ns,ju){pee[Ns]=ju}function TSe(){return mee[2]}function xSe(Ns){var ju=Ns.a,yo=ju.buffer;ju.grow=d8e;var D=new Int8Array(yo),zt=new Int16Array(yo),r=new Int32Array(yo),I=new Uint8Array(yo),Ut=new Uint16Array(yo),Ue=new Uint32Array(yo),At=new Float32Array(yo),Zc=new Float64Array(yo),ne=Math.imul,_e=Math.fround,ui=Math.abs,Ms=Math.clz32,gee=Math.min,MSe=Math.max,Oo=Math.floor,PM=Math.ceil,yB=Math.sqrt,Xe=Ns.abort,vee=Ns.b,_ee=Ns.c,kSe=Ns.d,CSe=Ns.e,PSe=Ns.f,RSe=Ns.g,DSe=Ns.h,OSe=Ns.i,re=5260320,nn=0;function yee(a,s,c){var u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0,ie=0,ge=0,we=0,Me=0,Ie=0,We=0,ut=0,vt=0,Pt=0,Wt=0;ut=re-672|0,re=ut,h=r[s+12>>2],u=r[s+20>>2],f=r[s+16>>2],ie=f+4|0,u=ie>>>0<4?u+1|0:u;e:{t:{n:{if(ie>>>0>Ue[s+8>>2]&(u|0)>=(h|0)|(u|0)>(h|0)||(u=f+r[s>>2]|0,r[a>>2]=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),u=r[s+20>>2],h=u,ie=r[s+16>>2],f=ie+4|0,u=f>>>0<4?u+1|0:u,Me=f,r[s+16>>2]=f,r[s+20>>2]=u,Ue[a>>2]>31)||(f=r[s+12>>2],u=h,h=ie+8|0,u=h>>>0<8?u+1|0:u,h>>>0>Ue[s+8>>2]&(u|0)>=(f|0)|(u|0)>(f|0))||(u=Me+r[s>>2]|0,r[a+4>>2]=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),u=r[s+20>>2],h=u,ie=r[s+16>>2],f=ie+4|0,u=f>>>0<4?u+1|0:u,Me=f,r[s+16>>2]=f,r[s+20>>2]=u,f=r[s+12>>2],u=h,h=ie+8|0,u=h>>>0<8?u+1|0:u,h>>>0>Ue[s+8>>2]&(u|0)>=(f|0)|(u|0)>(f|0))||(u=Me+r[s>>2]|0,r[a+12>>2]=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),u=r[s+20>>2],h=u,ie=r[s+16>>2],f=ie+4|0,u=f>>>0<4?u+1|0:u,Z=f,r[s+16>>2]=f,r[s+20>>2]=u,u=r[a+20>>2],Me=r[a+12>>2],(Me|0)!=(u|0)&&u)||(f=r[s+12>>2],u=h,h=ie+8|0,u=h>>>0<8?u+1|0:u,h>>>0>Ue[s+8>>2]&(u|0)>=(f|0)|(u|0)>(f|0)))break n;if(u=Z+r[s>>2]|0,h=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),r[a+16>>2]=h,u=r[s+20>>2],f=r[s+16>>2]+4|0,u=f>>>0<4?u+1|0:u,r[s+16>>2]=f,r[s+20>>2]=u,h>>>0>=7){r[ut>>2]=h,mte(1857,ut);break n}r[ut+664>>2]=c;i:{if(!Me)break i;r:{if(ie=r[c>>2],Me>>>0<=(r[c+8>>2]-ie|0)/12>>>0)break r;if(Me>>>0<357913942){if(f=r[c+4>>2],h=ne(Me,12),u=Te(h),Me=u+h|0,h=u+ne((f-ie|0)/12|0,12)|0,u=h,(f|0)!=(ie|0))for(u=h;u=u-12|0,f=f-12|0,r[u>>2]=r[f>>2],r[u+4>>2]=r[f+4>>2],r[u+8>>2]=r[f+8>>2],(f|0)!=(ie|0););if(r[c+8>>2]=Me,r[c+4>>2]=h,r[c>>2]=u,!ie)break r;W(ie);break r}break t}r:switch(r[a+16>>2]){case 0:y=Dv(ut+8|0,3),ie=ut+664|0,h=r[s+12>>2],u=r[s+20>>2],m=r[s+16>>2],f=m+4|0,u=f>>>0<4?u+1|0:u;s:{if(f>>>0>Ue[s+8>>2]&(u|0)>=(h|0)|(u|0)>(h|0)||(u=m+r[s>>2]|0,r[y>>2]=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),u=r[s+20>>2],h=u,f=r[s+16>>2],m=f+4|0,u=m>>>0<4?u+1|0:u,T=m,r[s+16>>2]=m,r[s+20>>2]=u,Ue[y>>2]>32)||(m=r[s+12>>2],u=h,h=f+8|0,u=h>>>0<8?u+1|0:u,h>>>0>Ue[s+8>>2]&(u|0)>=(m|0)|(u|0)>(m|0))||(u=T+r[s>>2]|0,h=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),r[y+4>>2]=h,u=r[s+20>>2],m=r[s+16>>2]+4|0,u=m>>>0<4?u+1|0:u,r[s+16>>2]=m,r[s+20>>2]=u,!h)||(r[y+8>>2]=0,!Ar(y+16|0,s))||!Ar(y+36|0,s)||!Ar(y+56|0,s)||!Ar(y+76|0,s))break s;if(Me=r[y+4>>2],h=0,s=0,f=re-48|0,re=f,m=r[y+12>>2],r[f+16>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0,m){if(m>>>0>=1073741824)break e;u=m<<2,h=Te(u),r[f+8>>2]=h,s=u+h|0,r[f+16>>2]=s,Ct(h,0,u),r[f+12>>2]=s}u=r[y+120>>2],T=r[u>>2],T&&(r[u+4>>2]=T,W(T),r[u+8>>2]=0,r[u>>2]=0,r[u+4>>2]=0,m=r[y+12>>2],h=r[f+8>>2],s=r[f+12>>2]),r[u+4>>2]=s,r[u>>2]=h,r[u+8>>2]=r[f+16>>2],h=0,r[f+16>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0;a:{if(m){if(m>>>0>=1073741824)break e;s=m<<2,A=Te(s),r[f+8>>2]=A,h=s+A|0,r[f+16>>2]=h,Ct(A,0,s),r[f+12>>2]=h}s=r[y+132>>2],u=r[s>>2],u&&(r[s+4>>2]=u,W(u),r[s+8>>2]=0,r[s>>2]=0,r[s+4>>2]=0,A=r[f+8>>2],h=r[f+12>>2]),r[s+4>>2]=h,r[s>>2]=A,r[s+8>>2]=r[f+16>>2],r[f+24>>2]=0,r[f+28>>2]=0,r[f+16>>2]=0,r[f+20>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0,Ir(f+8|0),s=r[f+24>>2]+r[f+28>>2]|0,u=(s>>>0)/341|0,s=r[r[f+12>>2]+(u<<2)>>2]+ne(s-ne(u,341)|0,12)|0,r[s+4>>2]=0,r[s+8>>2]=0,r[s>>2]=Me,s=r[f+28>>2],m=s+1|0,r[f+28>>2]=m;o:{if(s>>>0>m>>>0)break o;for(;;){if(Z=r[f+12>>2],h=r[f+24>>2],T=m-1|0,s=h+T|0,u=(s>>>0)/341|0,s=r[Z+(u<<2)>>2]+ne(s-ne(u,341)|0,12)|0,R=r[s+8>>2],A=r[s+4>>2],u=r[s>>2],r[f+28>>2]=T,s=r[f+16>>2],T=s-Z|0,((T?ne(T>>2,341)-1|0:0)-(m+h|0)|0)+1>>>0>=682&&(W(r[s-4>>2]),r[f+16>>2]=r[f+16>>2]-4),h=0,u>>>0>Me>>>0||(s=r[y+12>>2],A=(A|0)==(s-1|0)?0:A+1|0,A>>>0>=s>>>0))break o;m=ne(R,12),Z=m+r[y+132>>2]|0,T=m+r[y+120>>2]|0;c:{l:{if(z=A<<2,H=r[y>>2]-r[z+r[Z>>2]>>2]|0,!H){if(!u)break l;for(;;){s=r[T>>2],Z=r[s+8>>2],z=r[s+4>>2],H=r[s>>2],s=r[ie>>2],m=r[s+4>>2],N=r[s+8>>2];u:{if(m>>>0<N>>>0){r[m+8>>2]=Z,r[m+4>>2]=z,r[m>>2]=H,r[s+4>>2]=m+12;break u}if(R=r[s>>2],U=(m-R|0)/12|0,A=U+1|0,A>>>0>=357913942)break e;if(N=(N-R|0)/12|0,ge=N<<1,A=N>>>0<178956970?A>>>0>ge>>>0?A:ge:357913941,A>>>0>=357913942)break t;if(We=ne(U,12),N=ne(A,12),U=Te(N),A=We+U|0,r[A+8>>2]=Z,r[A+4>>2]=z,r[A>>2]=H,Z=A+12|0,(m|0)!=(R|0))for(;A=A-12|0,m=m-12|0,r[A>>2]=r[m>>2],r[A+4>>2]=r[m+4>>2],r[A+8>>2]=r[m+8>>2],(m|0)!=(R|0););if(r[s+8>>2]=N+U,r[s+4>>2]=Z,r[s>>2]=A,!R)break u;W(R)}if(r[y+8>>2]=r[y+8>>2]+1,h=h+1|0,(u|0)==(h|0))break}break l}u:{f:{d:{p:{if(u>>>0<=2){if(s=r[y+108>>2],r[s>>2]=A,h=1,m=r[y+12>>2],m>>>0>1)break p;break u}if(Ue[y+8>>2]>Ue[y+4>>2])break o;s=r[y+120>>2],N=R+1|0,Z=ne(N,12),h=s+Z|0,(h|0)!=(T|0)&&(Wi(h,r[T>>2],r[T+4>>2]),s=r[y+120>>2]),s=z+r[s+Z>>2]|0,r[s>>2]=r[s>>2]+(1<<H-1),s=Ms(u)^31,h=r[y+32>>2],H=32-h|0;m:{if((s|0)<=(H|0)){if(T=r[y+28>>2],(T|0)==r[y+20>>2]){h=0;break m}if(H=r[T>>2],U=s+h|0,r[y+32>>2]=U,h=H<<h>>>32-s|0,(U|0)!=32)break m;r[y+32>>2]=0,r[y+28>>2]=T+4;break m}if(T=r[y+28>>2],U=T+4|0,(U|0)==r[y+20>>2]){h=0;break m}ge=r[T>>2],r[y+28>>2]=U,H=s-H|0,r[y+32>>2]=H,h=r[T+4>>2]>>>32-H|ge<<h>>>32-s}s=(u>>>1|0)-h|0,h=u-s|0;m:{if((h|0)==(s|0)){u=s;break m}if(u=r[y+88>>2],(u|0)==r[y+80>>2])break d;T=r[u>>2],H=r[y+92>>2],U=H+1|0,r[y+92>>2]=U,T=T&-2147483648>>>H;y:{if((U|0)==32){if(r[y+92>>2]=0,r[y+88>>2]=u+4,T)break y;break d}if(!T)break d}u=h}h=s;break f}for(;A=(m-1|0)==(A|0)?0:A+1|0,r[s+(h<<2)>>2]=A,h=h+1|0,m=r[y+12>>2],h>>>0<m>>>0;);break u}u=s}if(s=r[y+132>>2],m=s+m|0,T=r[m>>2],z=T+z|0,r[z>>2]=r[z>>2]+1,Wi(s+Z|0,T,r[m+4>>2]),h&&(m=r[f+28>>2]+r[f+24>>2]|0,s=r[f+12>>2],T=r[f+16>>2]-s|0,(m|0)==((T?ne(T>>2,341)-1|0:0)|0)?(Ir(f+8|0),m=r[f+24>>2]+r[f+28>>2]|0,T=r[f+12>>2]):T=s,s=(m>>>0)/341|0,s=r[T+(s<<2)>>2]+ne(m-ne(s,341)|0,12)|0,r[s+8>>2]=R,r[s+4>>2]=A,r[s>>2]=h,r[f+28>>2]=r[f+28>>2]+1),!u)break l;m=r[f+28>>2]+r[f+24>>2]|0,h=r[f+12>>2],s=r[f+16>>2]-h|0,(m|0)==((s?ne(s>>2,341)-1|0:0)|0)&&(Ir(f+8|0),m=r[f+24>>2]+r[f+28>>2]|0,h=r[f+12>>2]),s=(m>>>0)/341|0,s=r[h+(s<<2)>>2]+ne(m-ne(s,341)|0,12)|0,r[s+8>>2]=N,r[s+4>>2]=A,r[s>>2]=u,m=r[f+28>>2]+1|0,r[f+28>>2]=m;break c}if(A=0,!u)break l;for(;;){if(h=r[y+96>>2],m){for(z=r[y+40>>2],ge=r[y+108>>2],vt=r[T>>2],Wt=r[Z>>2],m=0;;){H=ge+(m<<2)|0,r[(r[H>>2]<<2)+h>>2]=0,R=r[H>>2]<<2,s=r[y>>2]-r[R+Wt>>2]|0;u:{if(!s)break u;if(R=h+R|0,N=r[y+52>>2],we=32-N|0,(we|0)>=(s|0)){if(U=r[y+48>>2],(U|0)==(z|0)){r[R>>2]=0;break u}if(r[R>>2]=r[U>>2]<<N>>>32-s,s=s+r[y+52>>2]|0,r[y+52>>2]=s,(s|0)!=32)break u;r[y+52>>2]=0,r[y+48>>2]=U+4;break u}if(U=r[y+48>>2],Ie=U+4|0,(Ie|0)==(z|0)){r[R>>2]=0;break u}Pt=r[U>>2],r[y+48>>2]=Ie,we=s-we|0,r[y+52>>2]=we,r[R>>2]=r[U+4>>2]>>>32-we|Pt<<N>>>32-s}if(s=r[H>>2]<<2,R=s+h|0,r[R>>2]=r[R>>2]|r[s+vt>>2],m=m+1|0,!(m>>>0<Ue[y+12>>2]))break}h=r[y+96>>2]}if(r[f+32>>2]=r[h>>2],r[f+36>>2]=r[h+4>>2],r[f+40>>2]=r[h+8>>2],Wm(r[ie>>2],f+32|0),r[y+8>>2]=r[y+8>>2]+1,A=A+1|0,(u|0)==(A|0))break l;m=r[y+12>>2]}}m=r[f+28>>2]}if(!m)break}}if(r[f+28>>2]=0,m=r[f+16>>2],s=r[f+12>>2],A=m-s|0,A>>>0>=9)for(;W(r[s>>2]),s=r[f+12>>2]+4|0,r[f+12>>2]=s,m=r[f+16>>2],A=m-s|0,A>>>0>8;);h=170;o:switch((A>>>2|0)-1|0){case 1:h=341;case 0:r[f+24>>2]=h;break;default:break o}o:{if((s|0)==(m|0))break o;for(;W(r[s>>2]),s=s+4|0,(m|0)!=(s|0););if(s=r[f+16>>2],u=r[f+12>>2],(s|0)==(u|0))break o;r[f+16>>2]=s+(((s-u|0)-4>>>2^-1)<<2)}s=r[f+8>>2],s&&W(s),re=f+48|0;break a}}Uv(y);break i;case 1:y=Dv(ut+8|0,3),Me=ut+664|0,h=r[s+12>>2],u=r[s+20>>2],m=r[s+16>>2],f=m+4|0,u=f>>>0<4?u+1|0:u;s:{if(f>>>0>Ue[s+8>>2]&(u|0)>=(h|0)|(u|0)>(h|0)||(u=m+r[s>>2]|0,r[y>>2]=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),u=r[s+20>>2],h=u,f=r[s+16>>2],m=f+4|0,u=m>>>0<4?u+1|0:u,R=m,r[s+16>>2]=m,r[s+20>>2]=u,Ue[y>>2]>32)||(m=r[s+12>>2],u=h,h=f+8|0,u=h>>>0<8?u+1|0:u,h>>>0>Ue[s+8>>2]&(u|0)>=(m|0)|(u|0)>(m|0))||(u=R+r[s>>2]|0,h=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),r[y+4>>2]=h,u=r[s+20>>2],m=r[s+16>>2]+4|0,u=m>>>0<4?u+1|0:u,r[s+16>>2]=m,r[s+20>>2]=u,!h)||(r[y+8>>2]=0,!Ar(y+16|0,s))||!Ar(y+36|0,s)||!Ar(y+56|0,s)||!Ar(y+76|0,s))break s;if(Z=r[y+4>>2],h=0,f=re-48|0,re=f,m=r[y+12>>2],r[f+16>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0,m){if(m>>>0>=1073741824)break e;s=m<<2,T=Te(s),r[f+8>>2]=T,h=s+T|0,r[f+16>>2]=h,Ct(T,0,s),r[f+12>>2]=h}s=r[y+120>>2],u=r[s>>2],u&&(r[s+4>>2]=u,W(u),r[s+8>>2]=0,r[s>>2]=0,r[s+4>>2]=0,T=r[f+8>>2],m=r[y+12>>2],h=r[f+12>>2]),r[s+4>>2]=h,r[s>>2]=T,r[s+8>>2]=r[f+16>>2],T=0,r[f+16>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0;a:{if(m){if(m>>>0>=1073741824)break e;s=m<<2,A=Te(s),r[f+8>>2]=A,T=s+A|0,r[f+16>>2]=T,Ct(A,0,s),r[f+12>>2]=T}s=r[y+132>>2],u=r[s>>2],u&&(r[s+4>>2]=u,W(u),r[s+8>>2]=0,r[s>>2]=0,r[s+4>>2]=0,T=r[f+12>>2],A=r[f+8>>2]),r[s+4>>2]=T,r[s>>2]=A,r[s+8>>2]=r[f+16>>2],r[f+24>>2]=0,r[f+28>>2]=0,r[f+16>>2]=0,r[f+20>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0,Ir(f+8|0),s=r[f+24>>2]+r[f+28>>2]|0,u=(s>>>0)/341|0,s=r[r[f+12>>2]+(u<<2)>>2]+ne(s-ne(u,341)|0,12)|0,r[s+4>>2]=0,r[s+8>>2]=0,r[s>>2]=Z,s=r[f+28>>2],m=s+1|0,r[f+28>>2]=m;o:{if(s>>>0>m>>>0)break o;for(;;){if(T=r[f+12>>2],h=r[f+24>>2],A=m-1|0,s=h+A|0,u=(s>>>0)/341|0,s=r[T+(u<<2)>>2]+ne(s-ne(u,341)|0,12)|0,ie=r[s+8>>2],u=r[s+4>>2],s=r[s>>2],r[f+28>>2]=A,A=r[f+16>>2],T=A-T|0,((T?ne(T>>2,341)-1|0:0)-(m+h|0)|0)+1>>>0>=682&&(W(r[A-4>>2]),r[f+16>>2]=r[f+16>>2]-4),s>>>0>Z>>>0||(h=0,m=r[y+12>>2],A=(u|0)==(m-1|0)?0:u+1|0,A>>>0>=m>>>0))break o;u=r[y+120>>2],m=ne(ie,12),R=u+m|0;c:{l:{if(T=A<<2,U=m+r[y+132>>2]|0,z=r[y>>2]-r[T+r[U>>2]>>2]|0,!z){if(!s)break l;for(;;){u=r[R>>2],ie=r[u+8>>2],z=r[u+4>>2],H=r[u>>2],u=r[Me>>2],m=r[u+4>>2],N=r[u+8>>2];u:{if(m>>>0<N>>>0){r[m+8>>2]=ie,r[m+4>>2]=z,r[m>>2]=H,r[u+4>>2]=m+12;break u}if(T=r[u>>2],U=(m-T|0)/12|0,A=U+1|0,A>>>0>=357913942)break e;if(N=(N-T|0)/12|0,ge=N<<1,A=N>>>0<178956970?A>>>0>ge>>>0?A:ge:357913941,A>>>0>=357913942)break t;if(We=ne(U,12),N=ne(A,12),U=Te(N),A=We+U|0,r[A+8>>2]=ie,r[A+4>>2]=z,r[A>>2]=H,ie=A+12|0,(m|0)!=(T|0))for(;A=A-12|0,m=m-12|0,r[A>>2]=r[m>>2],r[A+4>>2]=r[m+4>>2],r[A+8>>2]=r[m+8>>2],(m|0)!=(T|0););if(r[u+8>>2]=N+U,r[u+4>>2]=ie,r[u>>2]=A,!T)break u;W(T)}if(r[y+8>>2]=r[y+8>>2]+1,h=h+1|0,(s|0)==(h|0))break}break l}u:{f:{d:{p:{if(s>>>0<=2){if(u=r[y+108>>2],r[u>>2]=A,T=1,m=r[y+12>>2],m>>>0>1)break p;break u}if(Ue[y+8>>2]>Ue[y+4>>2])break o;h=u,u=m+12|0,Wi(h+u|0,r[R>>2],r[R+4>>2]),u=T+r[u+r[y+120>>2]>>2]|0,r[u>>2]=r[u>>2]+(1<<z-1),u=Ms(s)^31,h=r[y+32>>2],z=32-h|0;m:{if((u|0)<=(z|0)){if(R=r[y+28>>2],(R|0)==r[y+20>>2]){h=0;break m}if(z=r[R>>2],H=u+h|0,r[y+32>>2]=H,h=z<<h>>>32-u|0,(H|0)!=32)break m;r[y+32>>2]=0,r[y+28>>2]=R+4;break m}if(R=r[y+28>>2],H=R+4|0,(H|0)==r[y+20>>2]){h=0;break m}N=r[R>>2],r[y+28>>2]=H,z=u-z|0,r[y+32>>2]=z,h=r[R+4>>2]>>>32-z|N<<h>>>32-u}R=ie+1|0,u=s,s=(s>>>1|0)-h|0,h=u-s|0;m:{if((h|0)==(s|0)){u=s;break m}if(u=r[y+88>>2],(u|0)==r[y+80>>2])break d;z=r[u>>2],H=r[y+92>>2],N=H+1|0,r[y+92>>2]=N,z=z&-2147483648>>>H;y:{if((N|0)==32){if(r[y+92>>2]=0,r[y+88>>2]=u+4,z)break y;break d}if(!z)break d}u=h}h=s;break f}for(;A=(m-1|0)==(A|0)?0:A+1|0,r[u+(T<<2)>>2]=A,m=r[y+12>>2],T=T+1|0,m>>>0>T>>>0;);break u}u=s}if(We=T,s=r[y+132>>2],m=s+m|0,T=r[m>>2],z=We+T|0,r[z>>2]=r[z>>2]+1,Wi(s+ne(R,12)|0,T,r[m+4>>2]),h&&(m=r[f+28>>2]+r[f+24>>2]|0,T=r[f+12>>2],s=r[f+16>>2]-T|0,(m|0)==((s?ne(s>>2,341)-1|0:0)|0)&&(Ir(f+8|0),T=r[f+12>>2],m=r[f+24>>2]+r[f+28>>2]|0),s=(m>>>0)/341|0,s=r[(s<<2)+T>>2]+ne(m-ne(s,341)|0,12)|0,r[s+8>>2]=ie,r[s+4>>2]=A,r[s>>2]=h,r[f+28>>2]=r[f+28>>2]+1),!u)break l;m=r[f+28>>2]+r[f+24>>2]|0,T=r[f+12>>2],s=r[f+16>>2]-T|0,(m|0)==((s?ne(s>>2,341)-1|0:0)|0)&&(Ir(f+8|0),T=r[f+12>>2],m=r[f+24>>2]+r[f+28>>2]|0),s=(m>>>0)/341|0,s=r[(s<<2)+T>>2]+ne(m-ne(s,341)|0,12)|0,r[s+8>>2]=R,r[s+4>>2]=A,r[s>>2]=u,m=r[f+28>>2]+1|0,r[f+28>>2]=m;break c}if(A=0,!s)break l;for(;;){if(T=r[y+96>>2],m){for(ie=r[y+40>>2],ge=r[y+108>>2],vt=r[R>>2],Wt=r[U>>2],m=0;;){z=ge+(m<<2)|0,r[(r[z>>2]<<2)+T>>2]=0,h=r[z>>2]<<2,u=r[y>>2]-r[h+Wt>>2]|0;u:{if(!u)break u;if(h=h+T|0,H=r[y+52>>2],we=32-H|0,(we|0)>=(u|0)){if(N=r[y+48>>2],(N|0)==(ie|0)){r[h>>2]=0;break u}if(r[h>>2]=r[N>>2]<<H>>>32-u,u=u+r[y+52>>2]|0,r[y+52>>2]=u,(u|0)!=32)break u;r[y+52>>2]=0,r[y+48>>2]=N+4;break u}if(N=r[y+48>>2],Ie=N+4|0,(Ie|0)==(ie|0)){r[h>>2]=0;break u}Pt=r[N>>2],r[y+48>>2]=Ie,we=u-we|0,r[y+52>>2]=we,r[h>>2]=r[N+4>>2]>>>32-we|Pt<<H>>>32-u}if(u=r[z>>2]<<2,h=u+T|0,r[h>>2]=r[h>>2]|r[u+vt>>2],m=m+1|0,!(m>>>0<Ue[y+12>>2]))break}T=r[y+96>>2]}if(r[f+32>>2]=r[T>>2],r[f+36>>2]=r[T+4>>2],r[f+40>>2]=r[T+8>>2],Wm(r[Me>>2],f+32|0),r[y+8>>2]=r[y+8>>2]+1,A=A+1|0,(s|0)==(A|0))break l;m=r[y+12>>2]}}m=r[f+28>>2]}if(!m)break}}if(r[f+28>>2]=0,m=r[f+16>>2],s=r[f+12>>2],A=m-s|0,A>>>0>=9)for(;W(r[s>>2]),s=r[f+12>>2]+4|0,r[f+12>>2]=s,m=r[f+16>>2],A=m-s|0,A>>>0>8;);T=170;o:switch((A>>>2|0)-1|0){case 1:T=341;case 0:r[f+24>>2]=T;break;default:break o}o:{if((s|0)==(m|0))break o;for(;W(r[s>>2]),s=s+4|0,(m|0)!=(s|0););if(s=r[f+16>>2],u=r[f+12>>2],(s|0)==(u|0))break o;r[f+16>>2]=s+(((s-u|0)-4>>>2^-1)<<2)}s=r[f+8>>2],s&&W(s),re=f+48|0;break a}}Uv(y);break i;case 2:A=Pv(ut+8|0,3),ie=ut+664|0,h=r[s+12>>2],u=r[s+20>>2],m=r[s+16>>2],f=m+4|0,u=f>>>0<4?u+1|0:u;s:{if(f>>>0>Ue[s+8>>2]&(u|0)>=(h|0)|(u|0)>(h|0)||(u=m+r[s>>2]|0,r[A>>2]=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),u=r[s+20>>2],h=u,f=r[s+16>>2],m=f+4|0,u=m>>>0<4?u+1|0:u,y=m,r[s+16>>2]=y,r[s+20>>2]=u,Ue[A>>2]>32)||(m=r[s+12>>2],u=h,h=f+8|0,u=h>>>0<8?u+1|0:u,h>>>0>Ue[s+8>>2]&(u|0)>=(m|0)|(u|0)>(m|0))||(u=y+r[s>>2]|0,h=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),r[A+4>>2]=h,u=r[s+20>>2],m=r[s+16>>2]+4|0,u=m>>>0<4?u+1|0:u,r[s+16>>2]=m,r[s+20>>2]=u,!h)||(r[A+8>>2]=0,!sr(A+16|0,s))||!Ar(A+32|0,s)||!Ar(A+52|0,s)||!Ar(A+72|0,s))break s;if(Me=r[A+4>>2],h=0,s=0,m=re-48|0,re=m,f=r[A+12>>2],r[m+16>>2]=0,r[m+8>>2]=0,r[m+12>>2]=0,f){if(f>>>0>=1073741824)break e;u=f<<2,h=Te(u),r[m+8>>2]=h,s=u+h|0,r[m+16>>2]=s,Ct(h,0,u),r[m+12>>2]=s}u=r[A+116>>2],y=r[u>>2],y&&(r[u+4>>2]=y,W(y),r[u+8>>2]=0,r[u>>2]=0,r[u+4>>2]=0,f=r[A+12>>2],h=r[m+8>>2],s=r[m+12>>2]),r[u+4>>2]=s,r[u>>2]=h,r[u+8>>2]=r[m+16>>2],h=0,r[m+16>>2]=0,r[m+8>>2]=0,r[m+12>>2]=0;a:{if(f){if(f>>>0>=1073741824)break e;s=f<<2,R=Te(s),r[m+8>>2]=R,h=s+R|0,r[m+16>>2]=h,Ct(R,0,s),r[m+12>>2]=h}s=r[A+128>>2],u=r[s>>2],u&&(r[s+4>>2]=u,W(u),r[s+8>>2]=0,r[s>>2]=0,r[s+4>>2]=0,R=r[m+8>>2],h=r[m+12>>2]),r[s+4>>2]=h,r[s>>2]=R,r[s+8>>2]=r[m+16>>2],r[m+24>>2]=0,r[m+28>>2]=0,r[m+16>>2]=0,r[m+20>>2]=0,r[m+8>>2]=0,r[m+12>>2]=0,Ir(m+8|0),s=r[m+24>>2]+r[m+28>>2]|0,u=(s>>>0)/341|0,s=r[r[m+12>>2]+(u<<2)>>2]+ne(s-ne(u,341)|0,12)|0,r[s+4>>2]=0,r[s+8>>2]=0,r[s>>2]=Me,s=r[m+28>>2],f=s+1|0,r[m+28>>2]=f;o:{if(s>>>0>f>>>0)break o;for(ge=A+16|0;;){if(Z=r[m+12>>2],h=r[m+24>>2],R=f-1|0,s=h+R|0,u=(s>>>0)/341|0,s=r[Z+(u<<2)>>2]+ne(s-ne(u,341)|0,12)|0,T=r[s+8>>2],y=r[s+4>>2],u=r[s>>2],r[m+28>>2]=R,s=r[m+16>>2],R=s-Z|0,((R?ne(R>>2,341)-1|0:0)-(f+h|0)|0)+1>>>0>=682&&(W(r[s-4>>2]),r[m+16>>2]=r[m+16>>2]-4),h=0,u>>>0>Me>>>0||(s=r[A+12>>2],R=(y|0)==(s-1|0)?0:y+1|0,R>>>0>=s>>>0))break o;f=ne(T,12),Z=f+r[A+128>>2]|0,y=f+r[A+116>>2]|0;c:{if(z=R<<2,H=r[A>>2]-r[z+r[Z>>2]>>2]|0,!H){if(!u)break c;for(;;){s=r[y>>2],Z=r[s+8>>2],z=r[s+4>>2],H=r[s>>2],s=r[ie>>2],f=r[s+4>>2],N=r[s+8>>2];l:{if(f>>>0<N>>>0){r[f+8>>2]=Z,r[f+4>>2]=z,r[f>>2]=H,r[s+4>>2]=f+12;break l}if(T=r[s>>2],U=(f-T|0)/12|0,R=U+1|0,R>>>0>=357913942)break e;if(N=(N-T|0)/12|0,vt=N<<1,R=N>>>0<178956970?R>>>0>vt>>>0?R:vt:357913941,R>>>0>=357913942)break t;if(We=ne(U,12),N=ne(R,12),U=Te(N),R=We+U|0,r[R+8>>2]=Z,r[R+4>>2]=z,r[R>>2]=H,Z=R+12|0,(f|0)!=(T|0))for(;R=R-12|0,f=f-12|0,r[R>>2]=r[f>>2],r[R+4>>2]=r[f+4>>2],r[R+8>>2]=r[f+8>>2],(f|0)!=(T|0););if(r[s+8>>2]=N+U,r[s+4>>2]=Z,r[s>>2]=R,!T)break l;W(T)}if(r[A+8>>2]=r[A+8>>2]+1,h=h+1|0,(u|0)==(h|0))break}break c}l:{u:{f:{d:{if(u>>>0<=2){if(s=r[A+104>>2],r[s>>2]=R,h=1,f=r[A+12>>2],f>>>0>1)break d;break l}if(Ue[A+8>>2]>Ue[A+4>>2])break o;s=r[A+116>>2],N=T+1|0,Z=ne(N,12),h=s+Z|0,(h|0)!=(y|0)&&(Wi(h,r[y>>2],r[y+4>>2]),s=r[A+116>>2]),s=z+r[s+Z>>2]|0,r[s>>2]=r[s>>2]+(1<<H-1),r[m+32>>2]=0,WM(ge,Ms(u)^31,m+32|0),s=(u>>>1|0)-r[m+32>>2]|0,h=u-s|0;p:{if((h|0)==(s|0)){u=s;break p}if(u=r[A+84>>2],(u|0)==r[A+76>>2])break f;y=r[u>>2],H=r[A+88>>2],U=H+1|0,r[A+88>>2]=U,y=y&-2147483648>>>H;m:{if((U|0)==32){if(r[A+88>>2]=0,r[A+84>>2]=u+4,y)break m;break f}if(!y)break f}u=h}h=s;break u}for(;R=(f-1|0)==(R|0)?0:R+1|0,r[s+(h<<2)>>2]=R,f=r[A+12>>2],h=h+1|0,f>>>0>h>>>0;);break l}u=s}if(s=r[A+128>>2],f=s+f|0,y=r[f>>2],z=y+z|0,r[z>>2]=r[z>>2]+1,Wi(s+Z|0,y,r[f+4>>2]),h&&(f=r[m+28>>2]+r[m+24>>2]|0,s=r[m+12>>2],y=r[m+16>>2]-s|0,(f|0)==((y?ne(y>>2,341)-1|0:0)|0)?(Ir(m+8|0),f=r[m+24>>2]+r[m+28>>2]|0,We=r[m+12>>2]):We=s,s=(f>>>0)/341|0,s=r[We+(s<<2)>>2]+ne(f-ne(s,341)|0,12)|0,r[s+8>>2]=T,r[s+4>>2]=R,r[s>>2]=h,r[m+28>>2]=r[m+28>>2]+1),!u)break c;f=r[m+28>>2]+r[m+24>>2]|0,h=r[m+12>>2],s=r[m+16>>2]-h|0,(f|0)==((s?ne(s>>2,341)-1|0:0)|0)&&(Ir(m+8|0),f=r[m+24>>2]+r[m+28>>2]|0,h=r[m+12>>2]),s=(f>>>0)/341|0,s=r[h+(s<<2)>>2]+ne(f-ne(s,341)|0,12)|0,r[s+8>>2]=N,r[s+4>>2]=R,r[s>>2]=u,r[m+28>>2]=r[m+28>>2]+1;break c}if(R=0,!u)break c;for(;;){if(h=r[A+92>>2],f){for(z=r[A+36>>2],vt=r[A+104>>2],Wt=r[y>>2],we=r[Z>>2],f=0;;){H=vt+(f<<2)|0,r[(r[H>>2]<<2)+h>>2]=0,T=r[H>>2]<<2,s=r[A>>2]-r[T+we>>2]|0;l:{if(!s)break l;if(T=h+T|0,N=r[A+48>>2],Ie=32-N|0,(Ie|0)>=(s|0)){if(U=r[A+44>>2],(U|0)==(z|0)){r[T>>2]=0;break l}if(r[T>>2]=r[U>>2]<<N>>>32-s,s=s+r[A+48>>2]|0,r[A+48>>2]=s,(s|0)!=32)break l;r[A+48>>2]=0,r[A+44>>2]=U+4;break l}if(U=r[A+44>>2],Pt=U+4|0,(Pt|0)==(z|0)){r[T>>2]=0;break l}We=r[U>>2],r[A+44>>2]=Pt,Ie=s-Ie|0,r[A+48>>2]=Ie,r[T>>2]=r[U+4>>2]>>>32-Ie|We<<N>>>32-s}if(s=r[H>>2]<<2,T=s+h|0,r[T>>2]=r[T>>2]|r[s+Wt>>2],f=f+1|0,!(f>>>0<Ue[A+12>>2]))break}h=r[A+92>>2]}if(r[m+32>>2]=r[h>>2],r[m+36>>2]=r[h+4>>2],r[m+40>>2]=r[h+8>>2],Wm(r[ie>>2],m+32|0),r[A+8>>2]=r[A+8>>2]+1,R=R+1|0,(u|0)==(R|0))break c;f=r[A+12>>2]}}if(f=r[m+28>>2],!f)break}}if(r[m+28>>2]=0,f=r[m+16>>2],s=r[m+12>>2],R=f-s|0,R>>>0>=9)for(;W(r[s>>2]),s=r[m+12>>2]+4|0,r[m+12>>2]=s,f=r[m+16>>2],R=f-s|0,R>>>0>8;);h=170;o:switch((R>>>2|0)-1|0){case 1:h=341;case 0:r[m+24>>2]=h;break;default:break o}o:{if((s|0)==(f|0))break o;for(;W(r[s>>2]),s=s+4|0,(f|0)!=(s|0););if(s=r[m+16>>2],u=r[m+12>>2],(s|0)==(u|0))break o;r[m+16>>2]=s+(((s-u|0)-4>>>2^-1)<<2)}s=r[m+8>>2],s&&W(s),re=m+48|0;break a}}Fv(A);break i;case 3:T=Pv(ut+8|0,3),Me=ut+664|0,h=r[s+12>>2],u=r[s+20>>2],f=r[s+16>>2],y=f+4|0,u=y>>>0<4?u+1|0:u;s:{if(y>>>0>Ue[s+8>>2]&(u|0)>=(h|0)|(u|0)>(h|0)||(u=f+r[s>>2]|0,r[T>>2]=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),u=r[s+20>>2],h=u,y=r[s+16>>2],f=y+4|0,u=f>>>0<4?u+1|0:u,R=f,r[s+16>>2]=f,r[s+20>>2]=u,Ue[T>>2]>32)||(f=r[s+12>>2],u=h,h=y+8|0,u=h>>>0<8?u+1|0:u,h>>>0>Ue[s+8>>2]&(u|0)>=(f|0)|(u|0)>(f|0))||(u=R+r[s>>2]|0,h=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),r[T+4>>2]=h,u=r[s+20>>2],f=r[s+16>>2]+4|0,u=f>>>0<4?u+1|0:u,r[s+16>>2]=f,r[s+20>>2]=u,!h)||(r[T+8>>2]=0,!sr(T+16|0,s))||!Ar(T+32|0,s)||!Ar(T+52|0,s)||!Ar(T+72|0,s))break s;if(Z=r[T+4>>2],h=0,y=re-48|0,re=y,f=r[T+12>>2],r[y+16>>2]=0,r[y+8>>2]=0,r[y+12>>2]=0,f){if(f>>>0>=1073741824)break e;s=f<<2,m=Te(s),r[y+8>>2]=m,h=s+m|0,r[y+16>>2]=h,Ct(m,0,s),r[y+12>>2]=h}s=r[T+116>>2],u=r[s>>2],u&&(r[s+4>>2]=u,W(u),r[s+8>>2]=0,r[s>>2]=0,r[s+4>>2]=0,m=r[y+8>>2],f=r[T+12>>2],h=r[y+12>>2]),r[s+4>>2]=h,r[s>>2]=m,r[s+8>>2]=r[y+16>>2],m=0,r[y+16>>2]=0,r[y+8>>2]=0,r[y+12>>2]=0;a:{if(f){if(f>>>0>=1073741824)break e;s=f<<2,A=Te(s),r[y+8>>2]=A,m=s+A|0,r[y+16>>2]=m,Ct(A,0,s),r[y+12>>2]=m}s=r[T+128>>2],u=r[s>>2],u&&(r[s+4>>2]=u,W(u),r[s+8>>2]=0,r[s>>2]=0,r[s+4>>2]=0,A=r[y+8>>2],m=r[y+12>>2]),r[s+4>>2]=m,r[s>>2]=A,r[s+8>>2]=r[y+16>>2],r[y+24>>2]=0,r[y+28>>2]=0,r[y+16>>2]=0,r[y+20>>2]=0,r[y+8>>2]=0,r[y+12>>2]=0,Ir(y+8|0),s=r[y+24>>2]+r[y+28>>2]|0,u=(s>>>0)/341|0,s=r[r[y+12>>2]+(u<<2)>>2]+ne(s-ne(u,341)|0,12)|0,r[s+4>>2]=0,r[s+8>>2]=0,r[s>>2]=Z,s=r[y+28>>2],f=s+1|0,r[y+28>>2]=f;o:{if(s>>>0>f>>>0)break o;for(U=T+16|0;;){if(A=r[y+12>>2],h=r[y+24>>2],m=f-1|0,s=h+m|0,u=(s>>>0)/341|0,s=r[A+(u<<2)>>2]+ne(s-ne(u,341)|0,12)|0,R=r[s+8>>2],u=r[s+4>>2],s=r[s>>2],r[y+28>>2]=m,m=r[y+16>>2],A=m-A|0,((A?ne(A>>2,341)-1|0:0)-(f+h|0)|0)+1>>>0>=682&&(W(r[m-4>>2]),r[y+16>>2]=r[y+16>>2]-4),s>>>0>Z>>>0||(h=0,m=r[T+12>>2],A=(u|0)==(m-1|0)?0:u+1|0,A>>>0>=m>>>0))break o;u=r[T+116>>2],m=ne(R,12),ie=u+m|0;c:{if(f=A<<2,ge=m+r[T+128>>2]|0,z=r[T>>2]-r[f+r[ge>>2]>>2]|0,!z){if(!s)break c;for(;;){u=r[ie>>2],R=r[u+8>>2],z=r[u+4>>2],H=r[u>>2],u=r[Me>>2],f=r[u+4>>2],N=r[u+8>>2];l:{if(f>>>0<N>>>0){r[f+8>>2]=R,r[f+4>>2]=z,r[f>>2]=H,r[u+4>>2]=f+12;break l}if(m=r[u>>2],ge=(f-m|0)/12|0,A=ge+1|0,A>>>0>=357913942)break e;if(N=(N-m|0)/12|0,vt=N<<1,A=N>>>0<178956970?A>>>0>vt>>>0?A:vt:357913941,A>>>0>=357913942)break t;if(We=ne(ge,12),N=ne(A,12),ge=Te(N),A=We+ge|0,r[A+8>>2]=R,r[A+4>>2]=z,r[A>>2]=H,R=A+12|0,(f|0)!=(m|0))for(;A=A-12|0,f=f-12|0,r[A>>2]=r[f>>2],r[A+4>>2]=r[f+4>>2],r[A+8>>2]=r[f+8>>2],(f|0)!=(m|0););if(r[u+8>>2]=N+ge,r[u+4>>2]=R,r[u>>2]=A,!m)break l;W(m)}if(r[T+8>>2]=r[T+8>>2]+1,h=h+1|0,(s|0)==(h|0))break}break c}l:{u:{f:{d:{if(s>>>0<=2){if(u=r[T+104>>2],r[u>>2]=A,m=1,f=r[T+12>>2],f>>>0>1)break d;break l}if(Ue[T+8>>2]>Ue[T+4>>2])break o;h=u,u=m+12|0,Wi(h+u|0,r[ie>>2],r[ie+4>>2]),u=f+r[u+r[T+116>>2]>>2]|0,r[u>>2]=r[u>>2]+(1<<z-1),r[y+32>>2]=0,WM(U,Ms(s)^31,y+32|0),ie=R+1|0,u=s,s=(s>>>1|0)-r[y+32>>2]|0,h=u-s|0;p:{if((h|0)==(s|0)){u=s;break p}if(u=r[T+84>>2],(u|0)==r[T+76>>2])break f;z=r[u>>2],H=r[T+88>>2],N=H+1|0,r[T+88>>2]=N,z=z&-2147483648>>>H;m:{if((N|0)==32){if(r[T+88>>2]=0,r[T+84>>2]=u+4,z)break m;break f}if(!z)break f}u=h}h=s;break u}for(;A=(f-1|0)==(A|0)?0:A+1|0,r[u+(m<<2)>>2]=A,f=r[T+12>>2],m=m+1|0,f>>>0>m>>>0;);break l}u=s}if(We=f,s=r[T+128>>2],m=s+m|0,f=r[m>>2],z=We+f|0,r[z>>2]=r[z>>2]+1,Wi(s+ne(ie,12)|0,f,r[m+4>>2]),h&&(f=r[y+28>>2]+r[y+24>>2]|0,m=r[y+12>>2],s=r[y+16>>2]-m|0,(f|0)==((s?ne(s>>2,341)-1|0:0)|0)&&(Ir(y+8|0),f=r[y+24>>2]+r[y+28>>2]|0,m=r[y+12>>2]),s=(f>>>0)/341|0,s=r[m+(s<<2)>>2]+ne(f-ne(s,341)|0,12)|0,r[s+8>>2]=R,r[s+4>>2]=A,r[s>>2]=h,r[y+28>>2]=r[y+28>>2]+1),!u)break c;f=r[y+28>>2]+r[y+24>>2]|0,m=r[y+12>>2],s=r[y+16>>2]-m|0,(f|0)==((s?ne(s>>2,341)-1|0:0)|0)&&(Ir(y+8|0),f=r[y+24>>2]+r[y+28>>2]|0,m=r[y+12>>2]),s=(f>>>0)/341|0,s=r[m+(s<<2)>>2]+ne(f-ne(s,341)|0,12)|0,r[s+8>>2]=ie,r[s+4>>2]=A,r[s>>2]=u,r[y+28>>2]=r[y+28>>2]+1;break c}if(R=0,!s)break c;for(;;){if(m=r[T+92>>2],f){for(A=r[T+36>>2],vt=r[T+104>>2],Wt=r[ie>>2],we=r[ge>>2],f=0;;){z=vt+(f<<2)|0,r[(r[z>>2]<<2)+m>>2]=0,h=r[z>>2]<<2,u=r[T>>2]-r[h+we>>2]|0;l:{if(!u)break l;if(h=m+h|0,H=r[T+48>>2],Ie=32-H|0,(Ie|0)>=(u|0)){if(N=r[T+44>>2],(N|0)==(A|0)){r[h>>2]=0;break l}if(r[h>>2]=r[N>>2]<<H>>>32-u,u=u+r[T+48>>2]|0,r[T+48>>2]=u,(u|0)!=32)break l;r[T+48>>2]=0,r[T+44>>2]=N+4;break l}if(N=r[T+44>>2],Pt=N+4|0,(Pt|0)==(A|0)){r[h>>2]=0;break l}We=r[N>>2],r[T+44>>2]=Pt,Ie=u-Ie|0,r[T+48>>2]=Ie,r[h>>2]=r[N+4>>2]>>>32-Ie|We<<H>>>32-u}if(u=r[z>>2]<<2,h=u+m|0,r[h>>2]=r[h>>2]|r[u+Wt>>2],f=f+1|0,!(f>>>0<Ue[T+12>>2]))break}m=r[T+92>>2]}if(r[y+32>>2]=r[m>>2],r[y+36>>2]=r[m+4>>2],r[y+40>>2]=r[m+8>>2],Wm(r[Me>>2],y+32|0),r[T+8>>2]=r[T+8>>2]+1,R=R+1|0,(s|0)==(R|0))break c;f=r[T+12>>2]}}if(f=r[y+28>>2],!f)break}}if(r[y+28>>2]=0,f=r[y+16>>2],s=r[y+12>>2],A=f-s|0,A>>>0>=9)for(;W(r[s>>2]),s=r[y+12>>2]+4|0,r[y+12>>2]=s,f=r[y+16>>2],A=f-s|0,A>>>0>8;);m=170;o:switch((A>>>2|0)-1|0){case 1:m=341;case 0:r[y+24>>2]=m;break;default:break o}o:{if((s|0)==(f|0))break o;for(;W(r[s>>2]),s=s+4|0,(f|0)!=(s|0););if(s=r[y+16>>2],u=r[y+12>>2],(s|0)==(u|0))break o;r[y+16>>2]=s+(((s-u|0)-4>>>2^-1)<<2)}s=r[y+8>>2],s&&W(s),re=y+48|0;break a}}Fv(T);break i;case 4:A=Yd(ut+8|0,3),ie=ut+664|0,h=r[s+12>>2],u=r[s+20>>2],f=r[s+16>>2],T=f+4|0,u=T>>>0<4?u+1|0:u;s:{if(T>>>0>Ue[s+8>>2]&(u|0)>=(h|0)|(u|0)>(h|0)||(u=f+r[s>>2]|0,r[A>>2]=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),u=r[s+20>>2],h=u,T=r[s+16>>2],f=T+4|0,u=f>>>0<4?u+1|0:u,R=f,r[s+16>>2]=f,r[s+20>>2]=u,Ue[A>>2]>32)||(f=r[s+12>>2],u=h,h=T+8|0,u=h>>>0<8?u+1|0:u,h>>>0>Ue[s+8>>2]&(u|0)>=(f|0)|(u|0)>(f|0))||(u=R+r[s>>2]|0,h=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),r[A+4>>2]=h,u=r[s+20>>2],f=r[s+16>>2]+4|0,u=f>>>0<4?u+1|0:u,r[s+16>>2]=f,r[s+20>>2]=u,!h)||(r[A+8>>2]=0,!Iv(A+16|0,s))||!Ar(A+544|0,s)||!Ar(A+564|0,s)||!Ar(A+584|0,s))break s;if(Me=r[A+4>>2],u=0,f=re-48|0,re=f,h=r[A+12>>2],r[f+16>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0,h){if(h>>>0>=1073741824)break e;s=h<<2,m=Te(s),r[f+8>>2]=m,u=s+m|0,r[f+16>>2]=u,Ct(m,0,s),r[f+12>>2]=u}s=r[A+628>>2],T=r[s>>2],T&&(r[s+4>>2]=T,W(T),r[s+8>>2]=0,r[s>>2]=0,r[s+4>>2]=0,h=r[A+12>>2],m=r[f+8>>2],u=r[f+12>>2]),r[s+4>>2]=u,r[s>>2]=m,r[s+8>>2]=r[f+16>>2],m=0,r[f+16>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0;a:{if(h){if(h>>>0>=1073741824)break e;s=h<<2,y=Te(s),r[f+8>>2]=y,m=s+y|0,r[f+16>>2]=m,Ct(y,0,s),r[f+12>>2]=m}s=r[A+640>>2],u=r[s>>2],u&&(r[s+4>>2]=u,W(u),r[s+8>>2]=0,r[s>>2]=0,r[s+4>>2]=0,y=r[f+8>>2],m=r[f+12>>2]),r[s+4>>2]=m,r[s>>2]=y,r[s+8>>2]=r[f+16>>2],r[f+24>>2]=0,r[f+28>>2]=0,r[f+16>>2]=0,r[f+20>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0,Ir(f+8|0),s=r[f+24>>2]+r[f+28>>2]|0,u=(s>>>0)/341|0,s=r[r[f+12>>2]+(u<<2)>>2]+ne(s-ne(u,341)|0,12)|0,r[s+4>>2]=0,r[s+8>>2]=0,r[s>>2]=Me,s=r[f+28>>2],h=s+1|0,r[f+28>>2]=h;o:{if(s>>>0>h>>>0)break o;for(;;){if(Z=r[f+12>>2],y=r[f+24>>2],T=h-1|0,s=y+T|0,u=(s>>>0)/341|0,s=r[Z+(u<<2)>>2]+ne(s-ne(u,341)|0,12)|0,R=r[s+8>>2],m=r[s+4>>2],u=r[s>>2],r[f+28>>2]=T,s=r[f+16>>2],T=s-Z|0,((T?ne(T>>2,341)-1|0:0)-(h+y|0)|0)+1>>>0>=682&&(W(r[s-4>>2]),r[f+16>>2]=r[f+16>>2]-4),u>>>0>Me>>>0||(s=r[A+12>>2],y=(m|0)==(s-1|0)?0:m+1|0,y>>>0>=s>>>0))break o;Z=ne(R,12),z=Z+r[A+640>>2]|0,T=Z+r[A+628>>2]|0;c:{l:{if(H=y<<2,h=r[A>>2]-r[H+r[z>>2]>>2]|0,!h){if(s=0,!u)break l;for(;;){h=r[T>>2],Z=r[h+8>>2],z=r[h+4>>2],H=r[h>>2],m=r[ie>>2],h=r[m+4>>2],N=r[m+8>>2];u:{if(h>>>0<N>>>0){r[h+8>>2]=Z,r[h+4>>2]=z,r[h>>2]=H,r[m+4>>2]=h+12;break u}if(R=r[m>>2],U=(h-R|0)/12|0,y=U+1|0,y>>>0>=357913942)break e;if(N=(N-R|0)/12|0,ge=N<<1,y=N>>>0<178956970?y>>>0>ge>>>0?y:ge:357913941,y>>>0>=357913942)break t;if(We=ne(U,12),N=ne(y,12),U=Te(N),y=We+U|0,r[y+8>>2]=Z,r[y+4>>2]=z,r[y>>2]=H,Z=y+12|0,(h|0)!=(R|0))for(;y=y-12|0,h=h-12|0,r[y>>2]=r[h>>2],r[y+4>>2]=r[h+4>>2],r[y+8>>2]=r[h+8>>2],(h|0)!=(R|0););if(r[m+8>>2]=N+U,r[m+4>>2]=Z,r[m>>2]=y,!R)break u;W(R)}if(r[A+8>>2]=r[A+8>>2]+1,s=s+1|0,(u|0)==(s|0))break}break l}u:{f:{d:{p:{if(u>>>0<=2){if(s=r[A+616>>2],r[s>>2]=y,m=1,h=r[A+12>>2],h>>>0>1)break p;break u}if(Ue[A+8>>2]>Ue[A+4>>2])break o;if(s=r[A+628>>2],N=R+1|0,z=ne(N,12),m=s+z|0,(m|0)!=(T|0)&&(Wi(m,r[T>>2],r[T+4>>2]),s=r[A+628>>2]),s=H+r[s+z>>2]|0,r[s>>2]=r[s>>2]+(1<<h-1),m=0,h=0,s=Ms(u)^31,s)for(;m=js((A+(h<<4)|0)+16|0)|m<<1,h=h+1|0,(s|0)!=(h|0););s=(u>>>1|0)-m|0,h=u-s|0;m:{if((h|0)==(s|0)){u=s;break m}if(u=r[A+596>>2],(u|0)==r[A+588>>2])break d;m=r[u>>2],T=r[A+600>>2],U=T+1|0,r[A+600>>2]=U,m=m&-2147483648>>>T;y:{if((U|0)==32){if(r[A+600>>2]=0,r[A+596>>2]=u+4,m)break y;break d}if(!m)break d}u=h}h=s;break f}for(;y=(h-1|0)==(y|0)?0:y+1|0,r[s+(m<<2)>>2]=y,h=r[A+12>>2],m=m+1|0,h>>>0>m>>>0;);break u}u=s}if(s=r[A+640>>2],m=s+Z|0,T=r[m>>2],Z=T+H|0,r[Z>>2]=r[Z>>2]+1,Wi(s+z|0,T,r[m+4>>2]),h&&(m=r[f+28>>2]+r[f+24>>2]|0,s=r[f+12>>2],T=r[f+16>>2]-s|0,(m|0)==((T?ne(T>>2,341)-1|0:0)|0)?(Ir(f+8|0),m=r[f+24>>2]+r[f+28>>2]|0,T=r[f+12>>2]):T=s,s=(m>>>0)/341|0,s=r[T+(s<<2)>>2]+ne(m-ne(s,341)|0,12)|0,r[s+8>>2]=R,r[s+4>>2]=y,r[s>>2]=h,r[f+28>>2]=r[f+28>>2]+1),!u)break l;h=r[f+28>>2]+r[f+24>>2]|0,m=r[f+12>>2],s=r[f+16>>2]-m|0,(h|0)==((s?ne(s>>2,341)-1|0:0)|0)&&(Ir(f+8|0),m=r[f+12>>2],h=r[f+24>>2]+r[f+28>>2]|0),s=(h>>>0)/341|0,s=r[(s<<2)+m>>2]+ne(h-ne(s,341)|0,12)|0,r[s+8>>2]=N,r[s+4>>2]=y,r[s>>2]=u,h=r[f+28>>2]+1|0,r[f+28>>2]=h;break c}if(s=0,!u)break l;for(;;){if(m=r[A+604>>2],h){for(Z=r[A+548>>2],ge=r[A+616>>2],vt=r[T>>2],Wt=r[z>>2],h=0;;){H=ge+(h<<2)|0,r[(r[H>>2]<<2)+m>>2]=0,R=r[H>>2]<<2,y=r[A>>2]-r[R+Wt>>2]|0;u:{if(!y)break u;if(R=m+R|0,N=r[A+560>>2],we=32-N|0,(we|0)>=(y|0)){if(U=r[A+556>>2],(U|0)==(Z|0)){r[R>>2]=0;break u}if(r[R>>2]=r[U>>2]<<N>>>32-y,y=y+r[A+560>>2]|0,r[A+560>>2]=y,(y|0)!=32)break u;r[A+560>>2]=0,r[A+556>>2]=U+4;break u}if(U=r[A+556>>2],Ie=U+4|0,(Ie|0)==(Z|0)){r[R>>2]=0;break u}Pt=r[U>>2],r[A+556>>2]=Ie,we=y-we|0,r[A+560>>2]=we,r[R>>2]=r[U+4>>2]>>>32-we|Pt<<N>>>32-y}if(y=r[H>>2]<<2,R=y+m|0,r[R>>2]=r[R>>2]|r[y+vt>>2],h=h+1|0,!(h>>>0<Ue[A+12>>2]))break}m=r[A+604>>2]}if(r[f+32>>2]=r[m>>2],r[f+36>>2]=r[m+4>>2],r[f+40>>2]=r[m+8>>2],Wm(r[ie>>2],f+32|0),r[A+8>>2]=r[A+8>>2]+1,s=s+1|0,(u|0)==(s|0))break l;h=r[A+12>>2]}}h=r[f+28>>2]}if(!h)break}}if(r[f+28>>2]=0,h=r[f+16>>2],s=r[f+12>>2],y=h-s|0,y>>>0>=9)for(;W(r[s>>2]),s=r[f+12>>2]+4|0,r[f+12>>2]=s,h=r[f+16>>2],y=h-s|0,y>>>0>8;);u=170;o:switch((y>>>2|0)-1|0){case 1:u=341;case 0:r[f+24>>2]=u;break;default:break o}o:{if((s|0)==(h|0))break o;for(;W(r[s>>2]),s=s+4|0,(h|0)!=(s|0););if(s=r[f+16>>2],u=r[f+12>>2],(s|0)==(u|0))break o;r[f+16>>2]=s+(((s-u|0)-4>>>2^-1)<<2)}s=r[f+8>>2],s&&W(s),re=f+48|0;break a}}Xd(A);break i;case 5:y=Yd(ut+8|0,3),Me=ut+664|0,h=r[s+12>>2],u=r[s+20>>2],f=r[s+16>>2],T=f+4|0,u=T>>>0<4?u+1|0:u;s:{if(T>>>0>Ue[s+8>>2]&(u|0)>=(h|0)|(u|0)>(h|0)||(u=f+r[s>>2]|0,r[y>>2]=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),u=r[s+20>>2],h=u,T=r[s+16>>2],f=T+4|0,u=f>>>0<4?u+1|0:u,R=f,r[s+16>>2]=f,r[s+20>>2]=u,Ue[y>>2]>32)||(f=r[s+12>>2],u=h,h=T+8|0,u=h>>>0<8?u+1|0:u,h>>>0>Ue[s+8>>2]&(u|0)>=(f|0)|(u|0)>(f|0))||(u=R+r[s>>2]|0,h=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),r[y+4>>2]=h,u=r[s+20>>2],f=r[s+16>>2]+4|0,u=f>>>0<4?u+1|0:u,r[s+16>>2]=f,r[s+20>>2]=u,!h)||(r[y+8>>2]=0,!Iv(y+16|0,s))||!Ar(y+544|0,s)||!Ar(y+564|0,s)||!Ar(y+584|0,s))break s;if(Z=r[y+4>>2],u=0,f=re-48|0,re=f,h=r[y+12>>2],r[f+16>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0,h){if(h>>>0>=1073741824)break e;s=h<<2,m=Te(s),r[f+8>>2]=m,u=s+m|0,r[f+16>>2]=u,Ct(m,0,s),r[f+12>>2]=u}s=r[y+628>>2],T=r[s>>2],T&&(r[s+4>>2]=T,W(T),r[s+8>>2]=0,r[s>>2]=0,r[s+4>>2]=0,h=r[y+12>>2],m=r[f+8>>2],u=r[f+12>>2]),r[s+4>>2]=u,r[s>>2]=m,r[s+8>>2]=r[f+16>>2],m=0,r[f+16>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0;a:{if(h){if(h>>>0>=1073741824)break e;s=h<<2,A=Te(s),r[f+8>>2]=A,m=s+A|0,r[f+16>>2]=m,Ct(A,0,s),r[f+12>>2]=m}s=r[y+640>>2],u=r[s>>2],u&&(r[s+4>>2]=u,W(u),r[s+8>>2]=0,r[s>>2]=0,r[s+4>>2]=0,A=r[f+8>>2],m=r[f+12>>2]),r[s+4>>2]=m,r[s>>2]=A,r[s+8>>2]=r[f+16>>2],r[f+24>>2]=0,r[f+28>>2]=0,r[f+16>>2]=0,r[f+20>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0,Ir(f+8|0),s=r[f+24>>2]+r[f+28>>2]|0,u=(s>>>0)/341|0,s=r[r[f+12>>2]+(u<<2)>>2]+ne(s-ne(u,341)|0,12)|0,r[s+4>>2]=0,r[s+8>>2]=0,r[s>>2]=Z,s=r[f+28>>2],h=s+1|0,r[f+28>>2]=h;o:{if(s>>>0>h>>>0)break o;for(;;){if(T=r[f+12>>2],m=r[f+24>>2],A=h-1|0,s=m+A|0,u=(s>>>0)/341|0,s=r[T+(u<<2)>>2]+ne(s-ne(u,341)|0,12)|0,ie=r[s+8>>2],u=r[s+4>>2],s=r[s>>2],r[f+28>>2]=A,A=r[f+16>>2],T=A-T|0,((T?ne(T>>2,341)-1|0:0)-(m+h|0)|0)+1>>>0>=682&&(W(r[A-4>>2]),r[f+16>>2]=r[f+16>>2]-4),s>>>0>Z>>>0||(h=r[y+12>>2],A=(u|0)==(h-1|0)?0:u+1|0,A>>>0>=h>>>0))break o;u=r[y+628>>2],T=ne(ie,12),R=u+T|0;c:{l:{if(z=A<<2,U=T+r[y+640>>2]|0,h=r[y>>2]-r[z+r[U>>2]>>2]|0,!h){if(T=0,!s)break l;for(;;){u=r[R>>2],ie=r[u+8>>2],z=r[u+4>>2],H=r[u>>2],u=r[Me>>2],h=r[u+4>>2],N=r[u+8>>2];u:{if(h>>>0<N>>>0){r[h+8>>2]=ie,r[h+4>>2]=z,r[h>>2]=H,r[u+4>>2]=h+12;break u}if(m=r[u>>2],U=(h-m|0)/12|0,A=U+1|0,A>>>0>=357913942)break e;if(N=(N-m|0)/12|0,ge=N<<1,A=N>>>0<178956970?A>>>0>ge>>>0?A:ge:357913941,A>>>0>=357913942)break t;if(We=ne(U,12),N=ne(A,12),U=Te(N),A=We+U|0,r[A+8>>2]=ie,r[A+4>>2]=z,r[A>>2]=H,ie=A+12|0,(m|0)!=(h|0))for(;A=A-12|0,h=h-12|0,r[A>>2]=r[h>>2],r[A+4>>2]=r[h+4>>2],r[A+8>>2]=r[h+8>>2],(m|0)!=(h|0););if(r[u+8>>2]=N+U,r[u+4>>2]=ie,r[u>>2]=A,!m)break u;W(m)}if(r[y+8>>2]=r[y+8>>2]+1,T=T+1|0,(s|0)==(T|0))break}break l}u:{f:{d:{p:{if(s>>>0<=2){if(u=r[y+616>>2],r[u>>2]=A,m=1,h=r[y+12>>2],h>>>0>1)break p;break u}if(Ue[y+8>>2]>Ue[y+4>>2])break o;if(m=u,u=T+12|0,Wi(m+u|0,r[R>>2],r[R+4>>2]),u=z+r[u+r[y+628>>2]>>2]|0,r[u>>2]=r[u>>2]+(1<<h-1),m=0,h=0,u=Ms(s)^31,u)for(;m=js((y+(h<<4)|0)+16|0)|m<<1,h=h+1|0,(u|0)!=(h|0););R=ie+1|0,u=s,s=(s>>>1|0)-m|0,h=u-s|0;m:{if((h|0)==(s|0)){u=s;break m}if(u=r[y+596>>2],(u|0)==r[y+588>>2])break d;m=r[u>>2],H=r[y+600>>2],N=H+1|0,r[y+600>>2]=N,m=m&-2147483648>>>H;y:{if((N|0)==32){if(r[y+600>>2]=0,r[y+596>>2]=u+4,m)break y;break d}if(!m)break d}u=h}h=s;break f}for(;A=(h-1|0)==(A|0)?0:A+1|0,r[u+(m<<2)>>2]=A,h=r[y+12>>2],m=m+1|0,h>>>0>m>>>0;);break u}u=s}if(s=r[y+640>>2],m=s+T|0,T=r[m>>2],z=T+z|0,r[z>>2]=r[z>>2]+1,Wi(s+ne(R,12)|0,T,r[m+4>>2]),h&&(m=r[f+28>>2]+r[f+24>>2]|0,T=r[f+12>>2],s=r[f+16>>2]-T|0,(m|0)==((s?ne(s>>2,341)-1|0:0)|0)&&(Ir(f+8|0),T=r[f+12>>2],m=r[f+24>>2]+r[f+28>>2]|0),s=(m>>>0)/341|0,s=r[(s<<2)+T>>2]+ne(m-ne(s,341)|0,12)|0,r[s+8>>2]=ie,r[s+4>>2]=A,r[s>>2]=h,r[f+28>>2]=r[f+28>>2]+1),!u)break l;h=r[f+28>>2]+r[f+24>>2]|0,m=r[f+12>>2],s=r[f+16>>2]-m|0,(h|0)==((s?ne(s>>2,341)-1|0:0)|0)&&(Ir(f+8|0),m=r[f+12>>2],h=r[f+24>>2]+r[f+28>>2]|0),s=(h>>>0)/341|0,s=r[(s<<2)+m>>2]+ne(h-ne(s,341)|0,12)|0,r[s+8>>2]=R,r[s+4>>2]=A,r[s>>2]=u,h=r[f+28>>2]+1|0,r[f+28>>2]=h;break c}if(T=0,!s)break l;for(;;){if(m=r[y+604>>2],h){for(ie=r[y+548>>2],ge=r[y+616>>2],vt=r[R>>2],Wt=r[U>>2],h=0;;){z=ge+(h<<2)|0,r[(r[z>>2]<<2)+m>>2]=0,A=r[z>>2]<<2,u=r[y>>2]-r[A+Wt>>2]|0;u:{if(!u)break u;if(A=m+A|0,H=r[y+560>>2],we=32-H|0,(we|0)>=(u|0)){if(N=r[y+556>>2],(N|0)==(ie|0)){r[A>>2]=0;break u}if(r[A>>2]=r[N>>2]<<H>>>32-u,u=u+r[y+560>>2]|0,r[y+560>>2]=u,(u|0)!=32)break u;r[y+560>>2]=0,r[y+556>>2]=N+4;break u}if(N=r[y+556>>2],Ie=N+4|0,(Ie|0)==(ie|0)){r[A>>2]=0;break u}Pt=r[N>>2],r[y+556>>2]=Ie,we=u-we|0,r[y+560>>2]=we,r[A>>2]=r[N+4>>2]>>>32-we|Pt<<H>>>32-u}if(u=r[z>>2]<<2,A=u+m|0,r[A>>2]=r[A>>2]|r[u+vt>>2],h=h+1|0,!(h>>>0<Ue[y+12>>2]))break}m=r[y+604>>2]}if(r[f+32>>2]=r[m>>2],r[f+36>>2]=r[m+4>>2],r[f+40>>2]=r[m+8>>2],Wm(r[Me>>2],f+32|0),r[y+8>>2]=r[y+8>>2]+1,T=T+1|0,(s|0)==(T|0))break l;h=r[y+12>>2]}}h=r[f+28>>2]}if(!h)break}}if(r[f+28>>2]=0,h=r[f+16>>2],s=r[f+12>>2],A=h-s|0,A>>>0>=9)for(;W(r[s>>2]),s=r[f+12>>2]+4|0,r[f+12>>2]=s,h=r[f+16>>2],A=h-s|0,A>>>0>8;);m=170;o:switch((A>>>2|0)-1|0){case 1:m=341;case 0:r[f+24>>2]=m;break;default:break o}o:{if((s|0)==(h|0))break o;for(;W(r[s>>2]),s=s+4|0,(h|0)!=(s|0););if(s=r[f+16>>2],u=r[f+12>>2],(s|0)==(u|0))break o;r[f+16>>2]=s+(((s-u|0)-4>>>2^-1)<<2)}s=r[f+8>>2],s&&W(s),re=f+48|0;break a}}Xd(y);break i;case 6:break r;default:break n}A=Yd(ut+8|0,3),ie=ut+664|0,h=r[s+12>>2],u=r[s+20>>2],f=r[s+16>>2],T=f+4|0,u=T>>>0<4?u+1|0:u;r:{if(T>>>0>Ue[s+8>>2]&(u|0)>=(h|0)|(u|0)>(h|0)||(u=f+r[s>>2]|0,r[A>>2]=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),u=r[s+20>>2],h=u,T=r[s+16>>2],f=T+4|0,u=f>>>0<4?u+1|0:u,R=f,r[s+16>>2]=f,r[s+20>>2]=u,Ue[A>>2]>32)||(f=r[s+12>>2],u=h,h=T+8|0,u=h>>>0<8?u+1|0:u,h>>>0>Ue[s+8>>2]&(u|0)>=(f|0)|(u|0)>(f|0))||(u=R+r[s>>2]|0,h=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),r[A+4>>2]=h,u=r[s+20>>2],f=r[s+16>>2]+4|0,u=f>>>0<4?u+1|0:u,r[s+16>>2]=f,r[s+20>>2]=u,!h)||(r[A+8>>2]=0,!Iv(A+16|0,s))||!Ar(A+544|0,s)||!Ar(A+564|0,s)||!Ar(A+584|0,s))break r;if(Me=r[A+4>>2],u=0,f=re-48|0,re=f,h=r[A+12>>2],r[f+16>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0,h){if(h>>>0>=1073741824)break e;s=h<<2,m=Te(s),r[f+8>>2]=m,u=s+m|0,r[f+16>>2]=u,Ct(m,0,s),r[f+12>>2]=u}s=r[A+628>>2],T=r[s>>2],T&&(r[s+4>>2]=T,W(T),r[s+8>>2]=0,r[s>>2]=0,r[s+4>>2]=0,h=r[A+12>>2],m=r[f+8>>2],u=r[f+12>>2]),r[s+4>>2]=u,r[s>>2]=m,r[s+8>>2]=r[f+16>>2],m=0,r[f+16>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0;s:{if(h){if(h>>>0>=1073741824)break e;s=h<<2,y=Te(s),r[f+8>>2]=y,m=s+y|0,r[f+16>>2]=m,Ct(y,0,s),r[f+12>>2]=m}s=r[A+640>>2],u=r[s>>2],u&&(r[s+4>>2]=u,W(u),r[s+8>>2]=0,r[s>>2]=0,r[s+4>>2]=0,y=r[f+8>>2],m=r[f+12>>2]),r[s+4>>2]=m,r[s>>2]=y,r[s+8>>2]=r[f+16>>2],r[f+24>>2]=0,r[f+28>>2]=0,r[f+16>>2]=0,r[f+20>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0,Ir(f+8|0),s=r[f+24>>2]+r[f+28>>2]|0,u=(s>>>0)/341|0,s=r[r[f+12>>2]+(u<<2)>>2]+ne(s-ne(u,341)|0,12)|0,r[s+4>>2]=0,r[s+8>>2]=0,r[s>>2]=Me,s=r[f+28>>2],h=s+1|0,r[f+28>>2]=h;a:{if(s>>>0>h>>>0)break a;for(;;){if(T=r[f+12>>2],s=r[f+24>>2],m=h-1|0,u=s+m|0,y=(u>>>0)/341|0,u=r[T+(y<<2)>>2]+ne(u-ne(y,341)|0,12)|0,R=r[u+8>>2],u=r[u>>2],r[f+28>>2]=m,m=r[f+16>>2],y=m-T|0,((y?ne(y>>2,341)-1|0:0)-(s+h|0)|0)+1>>>0>=682&&(W(r[m-4>>2]),r[f+16>>2]=r[f+16>>2]-4),u>>>0>Me>>>0||(s=r[A+628>>2],Z=ne(R,12),z=Z+r[A+640>>2]|0,y=rte(A,u,z),y>>>0>=Ue[A+12>>2]))break a;T=s+Z|0;o:{c:{if(H=y<<2,h=r[A>>2]-r[H+r[z>>2]>>2]|0,!h){if(s=0,!u)break c;for(;;){h=r[T>>2],Z=r[h+8>>2],z=r[h+4>>2],H=r[h>>2],m=r[ie>>2],h=r[m+4>>2],N=r[m+8>>2];l:{if(h>>>0<N>>>0){r[h+8>>2]=Z,r[h+4>>2]=z,r[h>>2]=H,r[m+4>>2]=h+12;break l}if(R=r[m>>2],U=(h-R|0)/12|0,y=U+1|0,y>>>0>=357913942)break e;if(N=(N-R|0)/12|0,ge=N<<1,y=N>>>0<178956970?y>>>0>ge>>>0?y:ge:357913941,y>>>0>=357913942)break t;if(We=ne(U,12),N=ne(y,12),U=Te(N),y=We+U|0,r[y+8>>2]=Z,r[y+4>>2]=z,r[y>>2]=H,Z=y+12|0,(h|0)!=(R|0))for(;y=y-12|0,h=h-12|0,r[y>>2]=r[h>>2],r[y+4>>2]=r[h+4>>2],r[y+8>>2]=r[h+8>>2],(h|0)!=(R|0););if(r[m+8>>2]=N+U,r[m+4>>2]=Z,r[m>>2]=y,!R)break l;W(R)}if(r[A+8>>2]=r[A+8>>2]+1,s=s+1|0,(u|0)==(s|0))break}break c}l:{u:{f:{d:{if(u>>>0<=2){if(s=r[A+616>>2],r[s>>2]=y,m=1,h=r[A+12>>2],h>>>0>1)break d;break l}if(Ue[A+8>>2]>Ue[A+4>>2])break a;if(s=r[A+628>>2],N=R+1|0,z=ne(N,12),m=s+z|0,(m|0)!=(T|0)&&(Wi(m,r[T>>2],r[T+4>>2]),s=r[A+628>>2]),s=H+r[s+z>>2]|0,r[s>>2]=r[s>>2]+(1<<h-1),m=0,h=0,s=Ms(u)^31,s)for(;m=js((A+(h<<4)|0)+16|0)|m<<1,h=h+1|0,(s|0)!=(h|0););s=(u>>>1|0)-m|0,h=u-s|0;p:{if((h|0)==(s|0)){u=s;break p}if(u=r[A+596>>2],(u|0)==r[A+588>>2])break f;m=r[u>>2],T=r[A+600>>2],U=T+1|0,r[A+600>>2]=U,m=m&-2147483648>>>T;m:{if((U|0)==32){if(r[A+600>>2]=0,r[A+596>>2]=u+4,m)break m;break f}if(!m)break f}u=h}h=s;break u}for(;y=(h-1|0)==(y|0)?0:y+1|0,r[s+(m<<2)>>2]=y,h=r[A+12>>2],m=m+1|0,h>>>0>m>>>0;);break l}u=s}if(s=r[A+640>>2],m=s+Z|0,T=r[m>>2],Z=T+H|0,r[Z>>2]=r[Z>>2]+1,Wi(s+z|0,T,r[m+4>>2]),h&&(m=r[f+28>>2]+r[f+24>>2]|0,s=r[f+12>>2],T=r[f+16>>2]-s|0,(m|0)==((T?ne(T>>2,341)-1|0:0)|0)?(Ir(f+8|0),m=r[f+24>>2]+r[f+28>>2]|0,T=r[f+12>>2]):T=s,s=(m>>>0)/341|0,s=r[T+(s<<2)>>2]+ne(m-ne(s,341)|0,12)|0,r[s+8>>2]=R,r[s+4>>2]=y,r[s>>2]=h,r[f+28>>2]=r[f+28>>2]+1),!u)break c;h=r[f+28>>2]+r[f+24>>2]|0,m=r[f+12>>2],s=r[f+16>>2]-m|0,(h|0)==((s?ne(s>>2,341)-1|0:0)|0)&&(Ir(f+8|0),m=r[f+12>>2],h=r[f+24>>2]+r[f+28>>2]|0),s=(h>>>0)/341|0,s=r[(s<<2)+m>>2]+ne(h-ne(s,341)|0,12)|0,r[s+8>>2]=N,r[s+4>>2]=y,r[s>>2]=u,h=r[f+28>>2]+1|0,r[f+28>>2]=h;break o}if(s=0,!u)break c;for(;;){if(m=r[A+604>>2],h){for(Z=r[A+548>>2],ge=r[A+616>>2],vt=r[T>>2],Wt=r[z>>2],h=0;;){H=ge+(h<<2)|0,r[(r[H>>2]<<2)+m>>2]=0,R=r[H>>2]<<2,y=r[A>>2]-r[R+Wt>>2]|0;l:{if(!y)break l;if(R=m+R|0,N=r[A+560>>2],we=32-N|0,(we|0)>=(y|0)){if(U=r[A+556>>2],(U|0)==(Z|0)){r[R>>2]=0;break l}if(r[R>>2]=r[U>>2]<<N>>>32-y,y=y+r[A+560>>2]|0,r[A+560>>2]=y,(y|0)!=32)break l;r[A+560>>2]=0,r[A+556>>2]=U+4;break l}if(U=r[A+556>>2],Ie=U+4|0,(Ie|0)==(Z|0)){r[R>>2]=0;break l}Pt=r[U>>2],r[A+556>>2]=Ie,we=y-we|0,r[A+560>>2]=we,r[R>>2]=r[U+4>>2]>>>32-we|Pt<<N>>>32-y}if(y=r[H>>2]<<2,R=y+m|0,r[R>>2]=r[R>>2]|r[y+vt>>2],h=h+1|0,!(h>>>0<Ue[A+12>>2]))break}m=r[A+604>>2]}if(r[f+32>>2]=r[m>>2],r[f+36>>2]=r[m+4>>2],r[f+40>>2]=r[m+8>>2],Wm(r[ie>>2],f+32|0),r[A+8>>2]=r[A+8>>2]+1,s=s+1|0,(u|0)==(s|0))break c;h=r[A+12>>2]}}h=r[f+28>>2]}if(!h)break}}if(r[f+28>>2]=0,h=r[f+16>>2],s=r[f+12>>2],y=h-s|0,y>>>0>=9)for(;W(r[s>>2]),s=r[f+12>>2]+4|0,r[f+12>>2]=s,h=r[f+16>>2],y=h-s|0,y>>>0>8;);u=170;a:switch((y>>>2|0)-1|0){case 1:u=341;case 0:r[f+24>>2]=u;break;default:break a}a:{if((s|0)==(h|0))break a;for(;W(r[s>>2]),s=s+4|0,(h|0)!=(s|0););if(s=r[f+16>>2],u=r[f+12>>2],(s|0)==(u|0))break a;r[f+16>>2]=s+(((s-u|0)-4>>>2^-1)<<2)}s=r[f+8>>2],s&&W(s),re=f+48|0;break s}}Xd(A)}m=r[a+12>>2]==((r[c+4>>2]-r[c>>2]|0)/12|0)}return re=ut+672|0,m}qn(1336),Xe()}jt(),Xe()}function bB(a,s,c,u){var f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0,ie=0,ge=0,we=0,Me=0,Ie=0,We=0,ut=0,vt=0;if(!a)return 1;f=r[c+20>>2],m=r[c+12>>2],h=r[c+16>>2];e:{if((f|0)>=(m|0)&h>>>0>=Ue[c+8>>2]|(f|0)>(m|0))break e;m=I[h+r[c>>2]|0],h=h+1|0,f=h?f:f+1|0,r[c+16>>2]=h,r[c+20>>2]=f;t:switch(m|0){case 0:R=a,y=s,h=u,a=0,u=0,H=re+-64|0,re=H,r[H+56>>2]=0,r[H+48>>2]=0,r[H+52>>2]=0,r[H+40>>2]=0,r[H+44>>2]=0,r[H+32>>2]=0,r[H+36>>2]=0,r[H+24>>2]=0,r[H+28>>2]=0,r[H+16>>2]=0,r[H+20>>2]=0,r[H+8>>2]=0,r[H+12>>2]=0;n:{if(!Vee(H+8|0,c)||!Xee(H+8|0,c)|(r[H+20>>2]?0:R))break n;if(Lv(c,0,0),R)for(Z=y<<2,ie=r[H+36>>2],we=r[H+48>>2],Me=r[H+24>>2];;){z=r[H+56>>2];i:{if(z>>>0>16383)break i;for(a=r[H+52>>2];;){if((a|0)<=0)break i;if(a=a-1|0,r[H+52>>2]=a,z=I[a+we|0]|z<<8,r[H+56>>2]=z,!(z>>>0<16384))break}}a=z&4095,U=r[(a<<2)+Me>>2],s=ie+(U<<3)|0,r[H+56>>2]=(ne(r[s>>2],z>>>12|0)+a|0)-r[s+4>>2];i:{if((y|0)<=0)break i;if(a=0,!I[c+36|0]|U>>>0>32)break n;if(U){for(ut=U&-2,vt=U&1,m=u+y|0,s=r[c+32>>2];;){if(A=r[c+28>>2],T=r[c+24>>2],z=0,a=s,f=0,ge=0,(U|0)!=1)for(;;){N=T+(a>>>3|0)|0;r:{if(N>>>0>=A>>>0){N=0;break r}N=I[N|0],s=a+1|0,r[c+32>>2]=s,N=N>>>(a&7)&1,a=s}if(N=N<<z|f,f=0,Ie=T+(a>>>3|0)|0,Ie>>>0<A>>>0&&(f=I[Ie|0],s=a+1|0,r[c+32>>2]=s,f=f>>>(a&7)&1,a=s),Ie=z|1,z=z+2|0,f=N|f<<Ie,ge=ge+2|0,(ut|0)==(ge|0))break}if(N=h+(u<<2)|0,vt&&(ge=A,A=T+(a>>>3|0)|0,ge>>>0>A>>>0?(A=I[A|0],s=a+1|0,r[c+32>>2]=s,a=A>>>(a&7)&1):a=0,f=a<<z|f),r[N>>2]=f,u=u+1|0,(m|0)==(u|0))break}u=m;break i}Ct(h+(u<<2)|0,0,Z),u=u+y|0}if(We=y+We|0,!(R>>>0>We>>>0))break}D[c+36|0]=0,s=r[c+20>>2],f=0,a=r[c+32>>2]+7|0,f=a>>>0<7?1:f,u=(f&7)<<29|a>>>3,a=u+r[c+16>>2]|0,f=(f>>>3|0)+s|0,r[c+16>>2]=a,r[c+20>>2]=a>>>0<u>>>0?f+1|0:f,a=1}return s=r[H+36>>2],s&&(r[H+40>>2]=s,W(s)),s=r[H+24>>2],s&&(r[H+28>>2]=s,W(s)),s=r[H+8>>2],s&&(r[H+12>>2]=s,W(s)),re=H- -64|0,a;case 1:break t;default:break e}s=0,f=r[c+20>>2],m=r[c+12>>2],h=r[c+16>>2];t:{if((f|0)>=(m|0)&h>>>0>=Ue[c+8>>2]|(f|0)>(m|0))break t;m=I[h+r[c>>2]|0],h=h+1|0,f=h?f:f+1|0,r[c+16>>2]=h,r[c+20>>2]=f;n:switch(m-1|0){case 8:m=a,H=u,h=re+-64|0,re=h,r[h+56>>2]=0,r[h+48>>2]=0,r[h+52>>2]=0,r[h+40>>2]=0,r[h+44>>2]=0,r[h+32>>2]=0,r[h+36>>2]=0,r[h+24>>2]=0,r[h+28>>2]=0,r[h+16>>2]=0,r[h+20>>2]=0,r[h+8>>2]=0,r[h+12>>2]=0,U=h+8|0,a=Ut[c+38>>1];i:{r:{if(!a)break r;s:{if(a>>>0<=511){if(a=r[c+12>>2],f=r[c+20>>2],s=r[c+16>>2],u=s+4|0,f=u>>>0<4?f+1|0:f,(a|0)<=(f|0)&u>>>0>Ue[c+8>>2]|(a|0)<(f|0))break r;a=s+r[c>>2]|0,T=I[a|0]|I[a+1|0]<<8|(I[a+2|0]<<16|I[a+3|0]<<24),r[U+12>>2]=T,f=r[c+20>>2],a=r[c+16>>2]+4|0,f=a>>>0<4?f+1|0:f,r[c+16>>2]=a,r[c+20>>2]=f;break s}if(!Np(1,U+12|0,c))break r;T=r[U+12>>2]}s=r[U>>2],a=r[U+4>>2]-s>>2;s:{if(a>>>0<T>>>0){Xr(U,T-a|0),T=r[U+12>>2];break s}if(a>>>0<=T>>>0)break s;r[U+4>>2]=s+(T<<2)}if(u=1,!T)break i;for(ie=r[c+8>>2],N=r[c+12>>2],we=r[U>>2],s=0;;){if(f=r[c+20>>2],a=r[c+16>>2],u=0,(N|0)<=(f|0)&ie>>>0<=a>>>0|(f|0)>(N|0))break i;u=r[c>>2],Z=I[u+a|0],a=a+1|0,f=a?f:f+1|0,y=a,r[c+16>>2]=a,r[c+20>>2]=f,a=Z>>>2|0,A=0;s:{a:{o:{c:switch(Me=Z&3,Me|0){case 0:break a;case 3:break c;default:break o}if(a=a+s|0,u=0,a>>>0>=T>>>0)break i;Ct(we+(s<<2)|0,0,(Z&252)+4|0),s=a;break s}for(;;){if((f|0)>=(N|0)&y>>>0>=ie>>>0|(f|0)>(N|0))break r;if(T=I[u+y|0],y=y+1|0,f=y?f:f+1|0,r[c+16>>2]=y,r[c+20>>2]=f,a=T<<(A<<3|6)|a,A=A+1|0,(Me|0)==(A|0))break}}r[we+(s<<2)>>2]=a}if(s=s+1|0,T=r[U+12>>2],!(s>>>0<T>>>0))break}y=U+16|0,Z=r[U>>2],s=r[U+16>>2],a=r[U+20>>2]-s|0;s:{if(a>>>0<=32767){Xr(y,8192-(a>>>2|0)|0);break s}if((a|0)==32768)break s;r[U+20>>2]=s+32768}a=U+28|0,s=r[a>>2],u=r[U+32>>2]-s>>3;s:{if(u>>>0<T>>>0){Xm(a,T-u|0),s=r[a>>2];break s}if(u>>>0>T>>>0&&(r[U+32>>2]=(T<<3)+s),!T)break r}for(A=0,u=0;;){if(f=Z+(A<<2)|0,U=r[f>>2],N=(A<<3)+s|0,a=u,r[N+4>>2]=a,r[N>>2]=U,f=r[f>>2],u=f+a|0,u>>>0>8192)break r;s:{if(a>>>0>=u>>>0)break s;if(U=r[y>>2],N=0,ie=f&7,ie)for(;r[U+(a<<2)>>2]=A,a=a+1|0,N=N+1|0,(ie|0)!=(N|0););if(f-1>>>0<=6)break s;for(;f=U+(a<<2)|0,r[f>>2]=A,r[f+28>>2]=A,r[f+24>>2]=A,r[f+20>>2]=A,r[f+16>>2]=A,r[f+12>>2]=A,r[f+8>>2]=A,r[f+4>>2]=A,a=a+8|0,(u|0)!=(a|0););}if(A=A+1|0,(T|0)==(A|0))break}R=(u|0)==8192}u=R}i:{if(!u|(r[h+20>>2]?0:m))break i;u=0,U=re-16|0,re=U;r:{s:{if(Ut[c+38>>1]<=511){if(A=r[c+12>>2],a=A,f=r[c+20>>2],R=r[c+16>>2],y=R+8|0,f=y>>>0<8?f+1|0:f,s=r[c+8>>2],s>>>0<y>>>0&(a|0)<=(f|0)|(a|0)<(f|0))break r;R=R+r[c>>2]|0,a=I[R|0]|I[R+1|0]<<8|(I[R+2|0]<<16|I[R+3|0]<<24),R=I[R+4|0]|I[R+5|0]<<8|(I[R+6|0]<<16|I[R+7|0]<<24),r[c+16>>2]=y,r[c+20>>2]=f;break s}if(!Ip(1,U+8|0,c))break r;y=r[c+16>>2],f=r[c+20>>2],s=r[c+8>>2],A=r[c+12>>2],a=r[U+8>>2],R=r[U+12>>2]}if(T=s-y|0,s=A-((s>>>0<y>>>0)+f|0)|0,(s|0)==(R|0)&a>>>0>T>>>0|s>>>0<R>>>0||(f=f+R|0,s=a+y|0,f=s>>>0<a>>>0?f+1|0:f,r[c+16>>2]=s,r[c+20>>2]=f,(a|0)<=0))break r;s=y+r[c>>2]|0,r[h+48>>2]=s,c=a-1|0,f=c+s|0,y=I[f|0];s:{if(y>>>0<=63){r[h+52>>2]=c,a=I[f|0]&63;break s}a:switch((y>>>6|0)-1|0){case 0:if(a>>>0<2)break r;r[h+52>>2]=a-2,a=(a+s|0)-2|0,a=I[a+1|0]<<8&16128|I[a|0];break s;case 1:if(a>>>0<3)break r;r[h+52>>2]=a-3,a=(a+s|0)-3|0,a=I[a+2|0]<<16&4128768|I[a+1|0]<<8|I[a|0];break s;default:break a}r[h+52>>2]=a-4,a=(a+s|0)-4|0,a=I[a+2|0]<<16|I[a+3|0]<<24&1056964608|I[a+1|0]<<8|I[a|0]}a=a+32768|0,r[h+56>>2]=a,u=a>>>0<8388608}if(re=U+16|0,!u)break i;if(!m){z=1;break i}for(s=r[h+36>>2],c=r[h+48>>2],u=r[h+24>>2],a=r[h+56>>2];;){r:{if(a>>>0>32767)break r;for(z=r[h+52>>2];;){if((z|0)<=0)break r;if(z=z-1|0,r[h+52>>2]=z,a=I[c+z|0]|a<<8,r[h+56>>2]=a,!(a>>>0<32768))break}}if(f=a&8191,y=r[u+(f<<2)>>2],z=s+(y<<3)|0,a=(ne(r[z>>2],a>>>13|0)+f|0)-r[z+4>>2]|0,r[h+56>>2]=a,r[H+(ge<<2)>>2]=y,z=1,ge=ge+1|0,(m|0)==(ge|0))break}}a=r[h+36>>2],a&&(r[h+40>>2]=a,W(a)),a=r[h+24>>2],a&&(r[h+28>>2]=a,W(a)),a=r[h+8>>2],a&&(r[h+12>>2]=a,W(a)),re=h- -64|0,s=z;break t;case 9:H=a,U=u,m=re+-64|0,re=m,r[m+56>>2]=0,r[m+48>>2]=0,r[m+52>>2]=0,r[m+40>>2]=0,r[m+44>>2]=0,r[m+32>>2]=0,r[m+36>>2]=0,r[m+24>>2]=0,r[m+28>>2]=0,r[m+16>>2]=0,r[m+20>>2]=0,r[m+8>>2]=0,r[m+12>>2]=0,h=m+8|0,a=Ut[c+38>>1];i:{r:{if(!a)break r;s:{if(a>>>0<=511){if(a=r[c+12>>2],f=r[c+20>>2],s=r[c+16>>2],u=s+4|0,f=u>>>0<4?f+1|0:f,(a|0)<=(f|0)&u>>>0>Ue[c+8>>2]|(a|0)<(f|0))break r;a=s+r[c>>2]|0,T=I[a|0]|I[a+1|0]<<8|(I[a+2|0]<<16|I[a+3|0]<<24),r[h+12>>2]=T,f=r[c+20>>2],a=r[c+16>>2]+4|0,f=a>>>0<4?f+1|0:f,r[c+16>>2]=a,r[c+20>>2]=f;break s}if(!Np(1,h+12|0,c))break r;T=r[h+12>>2]}s=r[h>>2],a=r[h+4>>2]-s>>2;s:{if(a>>>0<T>>>0){Xr(h,T-a|0),T=r[h+12>>2];break s}if(a>>>0<=T>>>0)break s;r[h+4>>2]=s+(T<<2)}if(u=1,!T)break i;for(ie=r[c+8>>2],N=r[c+12>>2],we=r[h>>2],s=0;;){if(f=r[c+20>>2],a=r[c+16>>2],u=0,(N|0)<=(f|0)&ie>>>0<=a>>>0|(f|0)>(N|0))break i;u=r[c>>2],Z=I[u+a|0],a=a+1|0,f=a?f:f+1|0,y=a,r[c+16>>2]=a,r[c+20>>2]=f,a=Z>>>2|0,A=0;s:{a:{o:{c:switch(Me=Z&3,Me|0){case 0:break a;case 3:break c;default:break o}if(a=a+s|0,u=0,a>>>0>=T>>>0)break i;Ct(we+(s<<2)|0,0,(Z&252)+4|0),s=a;break s}for(;;){if((f|0)>=(N|0)&y>>>0>=ie>>>0|(f|0)>(N|0))break r;if(T=I[u+y|0],y=y+1|0,f=y?f:f+1|0,r[c+16>>2]=y,r[c+20>>2]=f,a=T<<(A<<3|6)|a,A=A+1|0,(Me|0)==(A|0))break}}r[we+(s<<2)>>2]=a}if(s=s+1|0,T=r[h+12>>2],!(s>>>0<T>>>0))break}y=h+16|0,Z=r[h>>2],s=r[h+16>>2],a=r[h+20>>2]-s|0;s:{if(a>>>0<=131071){Xr(y,32768-(a>>>2|0)|0);break s}if((a|0)==131072)break s;r[h+20>>2]=s+131072}a=h+28|0,s=r[a>>2],u=r[h+32>>2]-s>>3;s:{if(u>>>0<T>>>0){Xm(a,T-u|0),s=r[a>>2];break s}if(u>>>0>T>>>0&&(r[h+32>>2]=(T<<3)+s),!T)break r}for(A=0,u=0;;){if(f=Z+(A<<2)|0,h=r[f>>2],N=(A<<3)+s|0,a=u,r[N+4>>2]=a,r[N>>2]=h,f=r[f>>2],u=f+a|0,u>>>0>32768)break r;s:{if(a>>>0>=u>>>0)break s;if(h=r[y>>2],N=0,ie=f&7,ie)for(;r[h+(a<<2)>>2]=A,a=a+1|0,N=N+1|0,(ie|0)!=(N|0););if(f-1>>>0<=6)break s;for(;f=h+(a<<2)|0,r[f>>2]=A,r[f+28>>2]=A,r[f+24>>2]=A,r[f+20>>2]=A,r[f+16>>2]=A,r[f+12>>2]=A,r[f+8>>2]=A,r[f+4>>2]=A,a=a+8|0,(u|0)!=(a|0););}if(A=A+1|0,(T|0)==(A|0))break}R=(u|0)==32768}u=R}i:{if(!u|(r[m+20>>2]?0:H))break i;u=0,T=re-16|0,re=T;r:{s:{if(Ut[c+38>>1]<=511){if(A=r[c+12>>2],a=A,f=r[c+20>>2],R=r[c+16>>2],y=R+8|0,f=y>>>0<8?f+1|0:f,s=r[c+8>>2],s>>>0<y>>>0&(a|0)<=(f|0)|(a|0)<(f|0))break r;R=R+r[c>>2]|0,a=I[R|0]|I[R+1|0]<<8|(I[R+2|0]<<16|I[R+3|0]<<24),R=I[R+4|0]|I[R+5|0]<<8|(I[R+6|0]<<16|I[R+7|0]<<24),r[c+16>>2]=y,r[c+20>>2]=f;break s}if(!Ip(1,T+8|0,c))break r;y=r[c+16>>2],f=r[c+20>>2],s=r[c+8>>2],A=r[c+12>>2],a=r[T+8>>2],R=r[T+12>>2]}if(h=s-y|0,s=A-((s>>>0<y>>>0)+f|0)|0,(s|0)==(R|0)&a>>>0>h>>>0|s>>>0<R>>>0||(h=f+R|0,s=a+y|0,h=s>>>0<a>>>0?h+1|0:h,r[c+16>>2]=s,r[c+20>>2]=h,(a|0)<=0))break r;s=y+r[c>>2]|0,r[m+48>>2]=s,c=a-1|0,f=c+s|0,y=I[f|0];s:{if(y>>>0<=63){r[m+52>>2]=c,a=I[f|0]&63;break s}a:switch((y>>>6|0)-1|0){case 0:if(a>>>0<2)break r;r[m+52>>2]=a-2,a=(a+s|0)-2|0,a=I[a+1|0]<<8&16128|I[a|0];break s;case 1:if(a>>>0<3)break r;r[m+52>>2]=a-3,a=(a+s|0)-3|0,a=I[a+2|0]<<16&4128768|I[a+1|0]<<8|I[a|0];break s;default:break a}r[m+52>>2]=a-4,a=(a+s|0)-4|0,a=I[a+2|0]<<16|I[a+3|0]<<24&1056964608|I[a+1|0]<<8|I[a|0]}a=a+131072|0,r[m+56>>2]=a,u=a>>>0<33554432}if(re=T+16|0,!u)break i;if(!H){z=1;break i}for(s=r[m+36>>2],c=r[m+48>>2],u=r[m+24>>2],a=r[m+56>>2];;){r:{if(a>>>0>131071)break r;for(z=r[m+52>>2];;){if((z|0)<=0)break r;if(z=z-1|0,r[m+52>>2]=z,a=I[c+z|0]|a<<8,r[m+56>>2]=a,!(a>>>0<131072))break}}if(f=a&32767,y=r[u+(f<<2)>>2],z=s+(y<<3)|0,a=(ne(r[z>>2],a>>>15|0)+f|0)-r[z+4>>2]|0,r[m+56>>2]=a,r[U+(ge<<2)>>2]=y,z=1,ge=ge+1|0,(H|0)==(ge|0))break}}a=r[m+36>>2],a&&(r[m+40>>2]=a,W(a)),a=r[m+24>>2],a&&(r[m+28>>2]=a,W(a)),a=r[m+8>>2],a&&(r[m+12>>2]=a,W(a)),re=m- -64|0,s=z;break t;case 10:H=a,U=u,m=re+-64|0,re=m,r[m+56>>2]=0,r[m+48>>2]=0,r[m+52>>2]=0,r[m+40>>2]=0,r[m+44>>2]=0,r[m+32>>2]=0,r[m+36>>2]=0,r[m+24>>2]=0,r[m+28>>2]=0,r[m+16>>2]=0,r[m+20>>2]=0,r[m+8>>2]=0,r[m+12>>2]=0,N=m+8|0,a=Ut[c+38>>1];i:{r:{if(!a)break r;s:{if(a>>>0<=511){if(a=r[c+12>>2],f=r[c+20>>2],s=r[c+16>>2],u=s+4|0,f=u>>>0<4?f+1|0:f,(a|0)<=(f|0)&u>>>0>Ue[c+8>>2]|(a|0)<(f|0))break r;a=s+r[c>>2]|0,T=I[a|0]|I[a+1|0]<<8|(I[a+2|0]<<16|I[a+3|0]<<24),r[N+12>>2]=T,f=r[c+20>>2],a=r[c+16>>2]+4|0,f=a>>>0<4?f+1|0:f,r[c+16>>2]=a,r[c+20>>2]=f;break s}if(!Np(1,N+12|0,c))break r;T=r[N+12>>2]}s=r[N>>2],a=r[N+4>>2]-s>>2;s:{if(a>>>0<T>>>0){Xr(N,T-a|0),T=r[N+12>>2];break s}if(a>>>0<=T>>>0)break s;r[N+4>>2]=s+(T<<2)}if(u=1,!T)break i;for(ie=r[c+8>>2],Z=r[c+12>>2],we=r[N>>2],s=0;;){if(f=r[c+20>>2],a=r[c+16>>2],u=0,(Z|0)<=(f|0)&ie>>>0<=a>>>0|(f|0)>(Z|0))break i;u=r[c>>2],h=I[u+a|0],a=a+1|0,f=a?f:f+1|0,y=a,r[c+16>>2]=a,r[c+20>>2]=f,a=h>>>2|0,A=0;s:{a:{o:{c:switch(Me=h&3,Me|0){case 0:break a;case 3:break c;default:break o}if(a=a+s|0,u=0,a>>>0>=T>>>0)break i;Ct(we+(s<<2)|0,0,(h&252)+4|0),s=a;break s}for(;;){if((f|0)>=(Z|0)&y>>>0>=ie>>>0|(f|0)>(Z|0))break r;if(T=I[u+y|0],h=f,f=y+1|0,h=f?h:h+1|0,y=f,r[c+16>>2]=f,f=h,r[c+20>>2]=f,a=T<<(A<<3|6)|a,A=A+1|0,(Me|0)==(A|0))break}}r[we+(s<<2)>>2]=a}if(s=s+1|0,T=r[N+12>>2],!(s>>>0<T>>>0))break}y=N+16|0,Z=r[N>>2],s=r[N+16>>2],a=r[N+20>>2]-s|0;s:{if(a>>>0<=262143){Xr(y,65536-(a>>>2|0)|0);break s}if((a|0)==262144)break s;r[N+20>>2]=s+262144}a=N+28|0,s=r[a>>2],u=r[N+32>>2]-s>>3;s:{if(u>>>0<T>>>0){Xm(a,T-u|0),s=r[a>>2];break s}if(u>>>0>T>>>0&&(r[N+32>>2]=(T<<3)+s),!T)break r}for(A=0,u=0;;){if(f=Z+(A<<2)|0,h=r[f>>2],N=(A<<3)+s|0,a=u,r[N+4>>2]=a,r[N>>2]=h,f=r[f>>2],u=f+a|0,u>>>0>65536)break r;s:{if(a>>>0>=u>>>0)break s;if(h=r[y>>2],N=0,ie=f&7,ie)for(;r[h+(a<<2)>>2]=A,a=a+1|0,N=N+1|0,(ie|0)!=(N|0););if(f-1>>>0<=6)break s;for(;f=h+(a<<2)|0,r[f>>2]=A,r[f+28>>2]=A,r[f+24>>2]=A,r[f+20>>2]=A,r[f+16>>2]=A,r[f+12>>2]=A,r[f+8>>2]=A,r[f+4>>2]=A,a=a+8|0,(u|0)!=(a|0););}if(A=A+1|0,(T|0)==(A|0))break}R=(u|0)==65536}u=R}i:{if(!u|(r[m+20>>2]?0:H))break i;u=0,h=re-16|0,re=h;r:{s:{if(Ut[c+38>>1]<=511){if(A=r[c+12>>2],a=A,f=r[c+20>>2],R=r[c+16>>2],y=R+8|0,f=y>>>0<8?f+1|0:f,s=r[c+8>>2],s>>>0<y>>>0&(a|0)<=(f|0)|(a|0)<(f|0))break r;R=R+r[c>>2]|0,a=I[R|0]|I[R+1|0]<<8|(I[R+2|0]<<16|I[R+3|0]<<24),R=I[R+4|0]|I[R+5|0]<<8|(I[R+6|0]<<16|I[R+7|0]<<24),r[c+16>>2]=y,r[c+20>>2]=f;break s}if(!Ip(1,h+8|0,c))break r;y=r[c+16>>2],f=r[c+20>>2],s=r[c+8>>2],A=r[c+12>>2],a=r[h+8>>2],R=r[h+12>>2]}if(T=s-y|0,s=A-((s>>>0<y>>>0)+f|0)|0,(s|0)==(R|0)&a>>>0>T>>>0|s>>>0<R>>>0||(f=f+R|0,s=a+y|0,f=s>>>0<a>>>0?f+1|0:f,r[c+16>>2]=s,r[c+20>>2]=f,(a|0)<=0))break r;s=y+r[c>>2]|0,r[m+48>>2]=s,c=a-1|0,f=c+s|0,y=I[f|0];s:{if(y>>>0<=63){r[m+52>>2]=c,a=I[f|0]&63;break s}a:switch((y>>>6|0)-1|0){case 0:if(a>>>0<2)break r;r[m+52>>2]=a-2,a=(a+s|0)-2|0,a=I[a+1|0]<<8&16128|I[a|0];break s;case 1:if(a>>>0<3)break r;r[m+52>>2]=a-3,a=(a+s|0)-3|0,a=I[a+2|0]<<16&4128768|I[a+1|0]<<8|I[a|0];break s;default:break a}r[m+52>>2]=a-4,a=(a+s|0)-4|0,a=I[a+2|0]<<16|I[a+3|0]<<24&1056964608|I[a+1|0]<<8|I[a|0]}a=a+262144|0,r[m+56>>2]=a,u=a>>>0<67108864}if(re=h+16|0,!u)break i;if(!H){z=1;break i}for(s=r[m+36>>2],c=r[m+48>>2],u=r[m+24>>2],a=r[m+56>>2];;){r:{if(a>>>0>262143)break r;for(z=r[m+52>>2];;){if((z|0)<=0)break r;if(z=z-1|0,r[m+52>>2]=z,a=I[c+z|0]|a<<8,r[m+56>>2]=a,!(a>>>0<262144))break}}if(f=a&65535,y=r[u+(f<<2)>>2],z=s+(y<<3)|0,a=(ne(r[z>>2],a>>>16|0)+f|0)-r[z+4>>2]|0,r[m+56>>2]=a,r[U+(ge<<2)>>2]=y,z=1,ge=ge+1|0,(H|0)==(ge|0))break}}a=r[m+36>>2],a&&(r[m+40>>2]=a,W(a)),a=r[m+24>>2],a&&(r[m+28>>2]=a,W(a)),a=r[m+8>>2],a&&(r[m+12>>2]=a,W(a)),re=m- -64|0,s=z;break t;case 11:m=a,H=u,h=re+-64|0,re=h,r[h+56>>2]=0,r[h+48>>2]=0,r[h+52>>2]=0,r[h+40>>2]=0,r[h+44>>2]=0,r[h+32>>2]=0,r[h+36>>2]=0,r[h+24>>2]=0,r[h+28>>2]=0,r[h+16>>2]=0,r[h+20>>2]=0,r[h+8>>2]=0,r[h+12>>2]=0,U=h+8|0,a=Ut[c+38>>1];i:{r:{if(!a)break r;s:{if(a>>>0<=511){if(a=r[c+12>>2],f=r[c+20>>2],s=r[c+16>>2],u=s+4|0,f=u>>>0<4?f+1|0:f,(a|0)<=(f|0)&u>>>0>Ue[c+8>>2]|(a|0)<(f|0))break r;a=s+r[c>>2]|0,T=I[a|0]|I[a+1|0]<<8|(I[a+2|0]<<16|I[a+3|0]<<24),r[U+12>>2]=T,f=r[c+20>>2],a=r[c+16>>2]+4|0,f=a>>>0<4?f+1|0:f,r[c+16>>2]=a,r[c+20>>2]=f;break s}if(!Np(1,U+12|0,c))break r;T=r[U+12>>2]}s=r[U>>2],a=r[U+4>>2]-s>>2;s:{if(a>>>0<T>>>0){Xr(U,T-a|0),T=r[U+12>>2];break s}if(a>>>0<=T>>>0)break s;r[U+4>>2]=s+(T<<2)}if(u=1,!T)break i;for(ie=r[c+8>>2],N=r[c+12>>2],we=r[U>>2],s=0;;){if(f=r[c+20>>2],a=r[c+16>>2],u=0,(N|0)<=(f|0)&ie>>>0<=a>>>0|(f|0)>(N|0))break i;u=r[c>>2],Z=I[u+a|0],a=a+1|0,f=a?f:f+1|0,y=a,r[c+16>>2]=a,r[c+20>>2]=f,a=Z>>>2|0,A=0;s:{a:{o:{c:switch(Me=Z&3,Me|0){case 0:break a;case 3:break c;default:break o}if(a=a+s|0,u=0,a>>>0>=T>>>0)break i;Ct(we+(s<<2)|0,0,(Z&252)+4|0),s=a;break s}for(;;){if((f|0)>=(N|0)&y>>>0>=ie>>>0|(f|0)>(N|0))break r;if(T=I[u+y|0],y=y+1|0,f=y?f:f+1|0,r[c+16>>2]=y,r[c+20>>2]=f,a=T<<(A<<3|6)|a,A=A+1|0,(Me|0)==(A|0))break}}r[we+(s<<2)>>2]=a}if(s=s+1|0,T=r[U+12>>2],!(s>>>0<T>>>0))break}y=U+16|0,Z=r[U>>2],s=r[U+16>>2],a=r[U+20>>2]-s|0;s:{if(a>>>0<=1048575){Xr(y,262144-(a>>>2|0)|0);break s}if((a|0)==1048576)break s;r[U+20>>2]=s- -1048576}a=U+28|0,s=r[a>>2],u=r[U+32>>2]-s>>3;s:{if(u>>>0<T>>>0){Xm(a,T-u|0),s=r[a>>2];break s}if(u>>>0>T>>>0&&(r[U+32>>2]=(T<<3)+s),!T)break r}for(A=0,u=0;;){if(f=Z+(A<<2)|0,U=r[f>>2],N=(A<<3)+s|0,a=u,r[N+4>>2]=a,r[N>>2]=U,f=r[f>>2],u=f+a|0,u>>>0>262144)break r;s:{if(a>>>0>=u>>>0)break s;if(U=r[y>>2],N=0,ie=f&7,ie)for(;r[U+(a<<2)>>2]=A,a=a+1|0,N=N+1|0,(ie|0)!=(N|0););if(f-1>>>0<=6)break s;for(;f=U+(a<<2)|0,r[f>>2]=A,r[f+28>>2]=A,r[f+24>>2]=A,r[f+20>>2]=A,r[f+16>>2]=A,r[f+12>>2]=A,r[f+8>>2]=A,r[f+4>>2]=A,a=a+8|0,(u|0)!=(a|0););}if(A=A+1|0,(T|0)==(A|0))break}R=(u|0)==262144}u=R}i:{if(!u|(r[h+20>>2]?0:m))break i;u=0,U=re-16|0,re=U;r:{s:{if(Ut[c+38>>1]<=511){if(A=r[c+12>>2],a=A,f=r[c+20>>2],R=r[c+16>>2],y=R+8|0,f=y>>>0<8?f+1|0:f,s=r[c+8>>2],s>>>0<y>>>0&(a|0)<=(f|0)|(a|0)<(f|0))break r;R=R+r[c>>2]|0,a=I[R|0]|I[R+1|0]<<8|(I[R+2|0]<<16|I[R+3|0]<<24),R=I[R+4|0]|I[R+5|0]<<8|(I[R+6|0]<<16|I[R+7|0]<<24),r[c+16>>2]=y,r[c+20>>2]=f;break s}if(!Ip(1,U+8|0,c))break r;y=r[c+16>>2],f=r[c+20>>2],s=r[c+8>>2],A=r[c+12>>2],a=r[U+8>>2],R=r[U+12>>2]}if(T=s-y|0,s=A-((s>>>0<y>>>0)+f|0)|0,(s|0)==(R|0)&a>>>0>T>>>0|s>>>0<R>>>0||(f=f+R|0,s=a+y|0,f=s>>>0<a>>>0?f+1|0:f,r[c+16>>2]=s,r[c+20>>2]=f,(a|0)<=0))break r;s=y+r[c>>2]|0,r[h+48>>2]=s,c=a-1|0,f=c+s|0,y=I[f|0];s:{if(y>>>0<=63){r[h+52>>2]=c,a=I[f|0]&63;break s}a:switch((y>>>6|0)-1|0){case 0:if(a>>>0<2)break r;r[h+52>>2]=a-2,a=(a+s|0)-2|0,a=I[a+1|0]<<8&16128|I[a|0];break s;case 1:if(a>>>0<3)break r;r[h+52>>2]=a-3,a=(a+s|0)-3|0,a=I[a+2|0]<<16&4128768|I[a+1|0]<<8|I[a|0];break s;default:break a}r[h+52>>2]=a-4,a=(a+s|0)-4|0,a=I[a+2|0]<<16|I[a+3|0]<<24&1056964608|I[a+1|0]<<8|I[a|0]}a=a- -1048576|0,r[h+56>>2]=a,u=a>>>0<268435456}if(re=U+16|0,!u)break i;if(!m){z=1;break i}for(s=r[h+36>>2],c=r[h+48>>2],u=r[h+24>>2],a=r[h+56>>2];;){r:{if(a>>>0>1048575)break r;for(z=r[h+52>>2];;){if((z|0)<=0)break r;if(z=z-1|0,r[h+52>>2]=z,a=I[c+z|0]|a<<8,r[h+56>>2]=a,!(a>>>0<1048576))break}}if(f=a&262143,y=r[u+(f<<2)>>2],z=s+(y<<3)|0,a=(ne(r[z>>2],a>>>18|0)+f|0)-r[z+4>>2]|0,r[h+56>>2]=a,r[H+(ge<<2)>>2]=y,z=1,ge=ge+1|0,(m|0)==(ge|0))break}}a=r[h+36>>2],a&&(r[h+40>>2]=a,W(a)),a=r[h+24>>2],a&&(r[h+28>>2]=a,W(a)),a=r[h+8>>2],a&&(r[h+12>>2]=a,W(a)),re=h- -64|0,s=z;break t;case 12:H=a,U=u,m=re+-64|0,re=m,r[m+56>>2]=0,r[m+48>>2]=0,r[m+52>>2]=0,r[m+40>>2]=0,r[m+44>>2]=0,r[m+32>>2]=0,r[m+36>>2]=0,r[m+24>>2]=0,r[m+28>>2]=0,r[m+16>>2]=0,r[m+20>>2]=0,r[m+8>>2]=0,r[m+12>>2]=0,h=m+8|0,a=Ut[c+38>>1];i:{r:{if(!a)break r;s:{if(a>>>0<=511){if(a=r[c+12>>2],f=r[c+20>>2],s=r[c+16>>2],u=s+4|0,f=u>>>0<4?f+1|0:f,(a|0)<=(f|0)&u>>>0>Ue[c+8>>2]|(a|0)<(f|0))break r;a=s+r[c>>2]|0,T=I[a|0]|I[a+1|0]<<8|(I[a+2|0]<<16|I[a+3|0]<<24),r[h+12>>2]=T,f=r[c+20>>2],a=r[c+16>>2]+4|0,f=a>>>0<4?f+1|0:f,r[c+16>>2]=a,r[c+20>>2]=f;break s}if(!Np(1,h+12|0,c))break r;T=r[h+12>>2]}s=r[h>>2],a=r[h+4>>2]-s>>2;s:{if(a>>>0<T>>>0){Xr(h,T-a|0),T=r[h+12>>2];break s}if(a>>>0<=T>>>0)break s;r[h+4>>2]=s+(T<<2)}if(u=1,!T)break i;for(ie=r[c+8>>2],N=r[c+12>>2],we=r[h>>2],s=0;;){if(f=r[c+20>>2],a=r[c+16>>2],u=0,(N|0)<=(f|0)&ie>>>0<=a>>>0|(f|0)>(N|0))break i;u=r[c>>2],Z=I[u+a|0],a=a+1|0,f=a?f:f+1|0,y=a,r[c+16>>2]=a,r[c+20>>2]=f,a=Z>>>2|0,A=0;s:{a:{o:{c:switch(Me=Z&3,Me|0){case 0:break a;case 3:break c;default:break o}if(a=a+s|0,u=0,a>>>0>=T>>>0)break i;Ct(we+(s<<2)|0,0,(Z&252)+4|0),s=a;break s}for(;;){if((f|0)>=(N|0)&y>>>0>=ie>>>0|(f|0)>(N|0))break r;if(T=I[u+y|0],y=y+1|0,f=y?f:f+1|0,r[c+16>>2]=y,r[c+20>>2]=f,a=T<<(A<<3|6)|a,A=A+1|0,(Me|0)==(A|0))break}}r[we+(s<<2)>>2]=a}if(s=s+1|0,T=r[h+12>>2],!(s>>>0<T>>>0))break}y=h+16|0,Z=r[h>>2],s=r[h+16>>2],a=r[h+20>>2]-s|0;s:{if(a>>>0<=2097151){Xr(y,524288-(a>>>2|0)|0);break s}if((a|0)==2097152)break s;r[h+20>>2]=s+2097152}a=h+28|0,s=r[a>>2],u=r[h+32>>2]-s>>3;s:{if(u>>>0<T>>>0){Xm(a,T-u|0),s=r[a>>2];break s}if(u>>>0>T>>>0&&(r[h+32>>2]=(T<<3)+s),!T)break r}for(A=0,u=0;;){if(f=Z+(A<<2)|0,h=r[f>>2],N=(A<<3)+s|0,a=u,r[N+4>>2]=a,r[N>>2]=h,f=r[f>>2],u=f+a|0,u>>>0>524288)break r;s:{if(a>>>0>=u>>>0)break s;if(h=r[y>>2],N=0,ie=f&7,ie)for(;r[h+(a<<2)>>2]=A,a=a+1|0,N=N+1|0,(ie|0)!=(N|0););if(f-1>>>0<=6)break s;for(;f=h+(a<<2)|0,r[f>>2]=A,r[f+28>>2]=A,r[f+24>>2]=A,r[f+20>>2]=A,r[f+16>>2]=A,r[f+12>>2]=A,r[f+8>>2]=A,r[f+4>>2]=A,a=a+8|0,(u|0)!=(a|0););}if(A=A+1|0,(T|0)==(A|0))break}R=(u|0)==524288}u=R}i:{if(!u|(r[m+20>>2]?0:H))break i;u=0,T=re-16|0,re=T;r:{s:{if(Ut[c+38>>1]<=511){if(A=r[c+12>>2],a=A,f=r[c+20>>2],R=r[c+16>>2],y=R+8|0,f=y>>>0<8?f+1|0:f,s=r[c+8>>2],s>>>0<y>>>0&(a|0)<=(f|0)|(a|0)<(f|0))break r;R=R+r[c>>2]|0,a=I[R|0]|I[R+1|0]<<8|(I[R+2|0]<<16|I[R+3|0]<<24),R=I[R+4|0]|I[R+5|0]<<8|(I[R+6|0]<<16|I[R+7|0]<<24),r[c+16>>2]=y,r[c+20>>2]=f;break s}if(!Ip(1,T+8|0,c))break r;y=r[c+16>>2],f=r[c+20>>2],s=r[c+8>>2],A=r[c+12>>2],a=r[T+8>>2],R=r[T+12>>2]}if(h=s-y|0,s=A-((s>>>0<y>>>0)+f|0)|0,(s|0)==(R|0)&a>>>0>h>>>0|s>>>0<R>>>0||(h=f+R|0,s=a+y|0,h=s>>>0<a>>>0?h+1|0:h,r[c+16>>2]=s,r[c+20>>2]=h,(a|0)<=0))break r;s=y+r[c>>2]|0,r[m+48>>2]=s,c=a-1|0,f=c+s|0,y=I[f|0];s:{if(y>>>0<=63){r[m+52>>2]=c,a=I[f|0]&63;break s}a:switch((y>>>6|0)-1|0){case 0:if(a>>>0<2)break r;r[m+52>>2]=a-2,a=(a+s|0)-2|0,a=I[a+1|0]<<8&16128|I[a|0];break s;case 1:if(a>>>0<3)break r;r[m+52>>2]=a-3,a=(a+s|0)-3|0,a=I[a+2|0]<<16&4128768|I[a+1|0]<<8|I[a|0];break s;default:break a}r[m+52>>2]=a-4,a=(a+s|0)-4|0,a=I[a+2|0]<<16|I[a+3|0]<<24&1056964608|I[a+1|0]<<8|I[a|0]}a=a+2097152|0,r[m+56>>2]=a,u=a>>>0<536870912}if(re=T+16|0,!u)break i;if(!H){z=1;break i}for(s=r[m+36>>2],c=r[m+48>>2],u=r[m+24>>2],a=r[m+56>>2];;){r:{if(a>>>0>2097151)break r;for(z=r[m+52>>2];;){if((z|0)<=0)break r;if(z=z-1|0,r[m+52>>2]=z,a=I[c+z|0]|a<<8,r[m+56>>2]=a,!(a>>>0<2097152))break}}if(f=a&524287,y=r[u+(f<<2)>>2],z=s+(y<<3)|0,a=(ne(r[z>>2],a>>>19|0)+f|0)-r[z+4>>2]|0,r[m+56>>2]=a,r[U+(ge<<2)>>2]=y,z=1,ge=ge+1|0,(H|0)==(ge|0))break}}a=r[m+36>>2],a&&(r[m+40>>2]=a,W(a)),a=r[m+24>>2],a&&(r[m+28>>2]=a,W(a)),a=r[m+8>>2],a&&(r[m+12>>2]=a,W(a)),re=m- -64|0,s=z;break t;case 17:s=Oee(a,c,u);break t;case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:f=re+-64|0,re=f,r[f+56>>2]=0,r[f+48>>2]=0,r[f+52>>2]=0,r[f+40>>2]=0,r[f+44>>2]=0,r[f+32>>2]=0,r[f+36>>2]=0,r[f+24>>2]=0,r[f+28>>2]=0,r[f+16>>2]=0,r[f+20>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0;i:{if(!Vee(f+8|0,c)|(r[f+20>>2]?0:a)||!Xee(f+8|0,c))break i;if(!a){s=1;break i}for(z=r[f+36>>2],R=r[f+48>>2],h=r[f+24>>2],c=r[f+56>>2];;){r:{if(c>>>0>16383)break r;for(s=r[f+52>>2];;){if((s|0)<=0)break r;if(s=s-1|0,r[f+52>>2]=s,c=I[s+R|0]|c<<8,r[f+56>>2]=c,!(c>>>0<16384))break}}if(s=c&4095,m=r[h+(s<<2)>>2],H=z+(m<<3)|0,c=(ne(r[H>>2],c>>>12|0)+s|0)-r[H+4>>2]|0,r[f+56>>2]=c,r[(y<<2)+u>>2]=m,s=1,y=y+1|0,(y|0)==(a|0))break}}a=r[f+36>>2],a&&(r[f+40>>2]=a,W(a)),a=r[f+24>>2],a&&(r[f+28>>2]=a,W(a)),a=r[f+8>>2],a&&(r[f+12>>2]=a,W(a)),re=f- -64|0;break t;case 13:case 14:case 15:case 16:break n;default:break t}s=Oee(a,c,u)}y=s}return y}function ISe(a){a=a|0;var s=0,c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0,ie=0,ge=0,we=0,Me=0,Ie=0,We=0,ut=0,vt=0,Pt=0,Wt=0,gn=0,En=0,Nn=0,nr=0,Pr=0,Jr=0,xi=0,ei=0,xr=0,ws=0;if(R=re+-64|0,re=R,r[a+132>>2]=0,r[a+148>>2]){if(s=r[a+144>>2],s)for(;f=r[s>>2],W(s),s=f,!!s;);s=0,r[a+144>>2]=0,f=r[a+140>>2];e:{if(!f)break e;if(f-1>>>0>=3)for(u=f&-4;m=s<<2,r[m+r[a+136>>2]>>2]=0,r[r[a+136>>2]+(m|4)>>2]=0,r[r[a+136>>2]+(m|8)>>2]=0,r[r[a+136>>2]+(m|12)>>2]=0,s=s+4|0,y=y+4|0,(u|0)!=(y|0););if(f=f&3,!f)break e;for(;r[r[a+136>>2]+(s<<2)>>2]=0,s=s+1|0,We=We+1|0,(f|0)!=(We|0););}r[a+148>>2]=0}e:{t:{s=r[a+4>>2],We=I[s+36|0],y=We<<8|I[s+37|0];n:{if(y>>>0>513)break n;if(f=r[s+32>>2],y>>>0<=511){if(y=r[f+20>>2],m=r[f+16>>2],u=m+4|0,y=u>>>0<4?y+1|0:y,c=r[f+12>>2],(c|0)<=(y|0)&u>>>0>Ue[f+8>>2]|(c|0)<(y|0))break t;m=m+r[f>>2]|0,m=I[m|0]|I[m+1|0]<<8|(I[m+2|0]<<16|I[m+3|0]<<24),r[f+16>>2]=u,r[f+20>>2]=y,r[a+132>>2]=m;break n}if(!ks(1,R,f))break t;s=r[a+4>>2],We=I[s+36|0],r[a+132>>2]=r[R>>2]}y=r[s+32>>2];n:{i:{r:{if((We&255)>>>0<=1){if(We=0,f=r[y+20>>2],m=r[y+16>>2],u=m+4|0,f=u>>>0<4?f+1|0:f,c=r[y+12>>2],(c|0)<=(f|0)&u>>>0>Ue[y+8>>2]|(c|0)<(f|0))break e;m=m+r[y>>2]|0,m=I[m|0]|I[m+1|0]<<8|(I[m+2|0]<<16|I[m+3|0]<<24),r[R+60>>2]=m,r[y+16>>2]=u,r[y+20>>2]=f,r[a+156>>2]=m,u=a+156|0;break r}if(We=0,!ks(1,R+60|0,y))break e;if(s=r[a+4>>2],f=I[s+36|0],r[a+156>>2]=r[R+60>>2],u=a+156|0,f>>>0>1)break i}if(f=r[s+32>>2],s=r[f+8>>2],y=r[f+12>>2],A=s,s=r[f+20>>2],m=r[f+16>>2],c=m+4|0,s=c>>>0<4?s+1|0:s,A>>>0<c>>>0&(s|0)>=(y|0)|(s|0)>(y|0))break e;y=m+r[f>>2]|0,y=I[y|0]|I[y+1|0]<<8|(I[y+2|0]<<16|I[y+3|0]<<24),r[R+56>>2]=y,r[f+16>>2]=c,r[f+20>>2]=s;break n}if(!ks(1,R+56|0,r[s+32>>2]))break e;y=r[R+56>>2]}if(y>>>0>1431655765|Ue[u>>2]>ne(y,3)>>>0||(h=r[a+4>>2],m=r[h+32>>2],s=m,T=r[s+8>>2],u=r[s+12>>2],f=r[s+20>>2],c=r[s+16>>2],(u|0)<=(f|0)&T>>>0<=c>>>0|(f|0)>(u|0)))break e;z=r[m>>2],A=I[z+c|0],s=f,Pt=c+1|0,s=Pt?s:s+1|0,r[m+16>>2]=Pt,r[m+20>>2]=s;n:{if(I[h+36|0]<=1){if(s=u,u=c+5|0,f=u>>>0<5?f+1|0:f,c=u,(s|0)<=(f|0)&c>>>0>T>>>0|(s|0)<(f|0))break e;s=z+Pt|0,u=I[s|0]|I[s+1|0]<<8|(I[s+2|0]<<16|I[s+3|0]<<24),r[R+52>>2]=u,r[m+16>>2]=c,r[m+20>>2]=f;break n}if(!ks(1,R+52|0,m))break e;u=r[R+52>>2]}if(((u>>>0)/3|0)+u>>>0<y>>>0|u>>>0>y>>>0)break e;s=r[a+4>>2],m=r[s+32>>2];n:{if(I[s+36|0]<=1){if(s=r[m+20>>2],f=r[m+16>>2],c=f+4|0,s=c>>>0<4?s+1|0:s,h=r[m+12>>2],(h|0)<=(s|0)&c>>>0>Ue[m+8>>2]|(s|0)>(h|0))break e;f=f+r[m>>2]|0,f=I[f|0]|I[f+1|0]<<8|(I[f+2|0]<<16|I[f+3|0]<<24),r[R+48>>2]=f,r[m+16>>2]=c,r[m+20>>2]=s;break n}if(!ks(1,R+48|0,m))break e;f=r[R+48>>2]}if(f>>>0>u>>>0||(r[a+28>>2]=r[a+24>>2],m=Te(88),HB(m),s=r[a+8>>2],r[a+8>>2]=m,s&&(Zd(s),!r[a+8>>2]))||(r[a+164>>2]=r[a+160>>2],Hv(a+160|0,y),r[a+176>>2]=r[a+172>>2],Hv(a+172|0,y),r[a- -64>>2]=0,r[a+92>>2]=-1,r[a+84>>2]=-1,r[a+88>>2]=-1,r[a+40>>2]=r[a+36>>2],r[a+52>>2]=r[a+48>>2],r[a+76>>2]=r[a+72>>2],Jr=a+216|0,ZB(Jr),EB(Jr,A),!BB(r[a+8>>2],y,r[a+156>>2]+f|0)))break e;s=r[a+156>>2],D[R|0]=1,hc(a+120|0,s+f|0,R),s=r[a+4>>2],y=Ut[s+36>>1],y=(y<<8|y>>>8)&65535;n:{if(y>>>0<=513){m=r[s+32>>2];i:{if(y>>>0<=511){if(y=r[m+20>>2],c=r[m+16>>2],s=c+4|0,y=s>>>0<4?y+1|0:y,h=s,s=y,T=r[m+12>>2],h>>>0>Ue[m+8>>2]&(s|0)>=(T|0)|(s|0)>(T|0))break e;y=c+r[m>>2]|0,y=I[y|0]|I[y+1|0]<<8|(I[y+2|0]<<16|I[y+3|0]<<24),r[m+16>>2]=h,r[m+20>>2]=s;break i}if(!ks(1,R+44|0,m))break e;y=r[R+44>>2]}if(!y||(s=r[r[a+4>>2]+32>>2],m=r[s+8>>2],c=r[s+16>>2],h=m-c|0,s=r[s+12>>2]-(r[s+20>>2]+(c>>>0>m>>>0)|0)|0,h>>>0<y>>>0&(s|0)<=0|(s|0)<0)||(zt[R+38>>1]=0,r[R>>2]=0,r[R+8>>2]=0,r[R+12>>2]=0,r[R+16>>2]=0,r[R+20>>2]=0,r[R+24>>2]=0,r[R+28>>2]=0,D[R+29|0]=0,D[R+30|0]=0,D[R+31|0]=0,D[R+32|0]=0,D[R+33|0]=0,D[R+34|0]=0,D[R+35|0]=0,D[R+36|0]=0,m=r[r[a+4>>2]+32>>2],s=r[m+16>>2],c=(s+r[m>>2]|0)+y|0,h=r[m+8>>2],s=(h-s|0)-y|0,zt[R+38>>1]=Ut[m+38>>1],r[R>>2]=c,r[R+16>>2]=0,r[R+20>>2]=0,r[R+8>>2]=s,r[R+12>>2]=0,Pt=Mv(a,R),(Pt|0)==-1))break e;xi=Pt>>31;break n}if(Pt=-1,xi=-1,(Mv(a,r[s+32>>2])|0)==-1)break e}h=a+232|0,Ate(h,a),r[a+372>>2]=A,r[a+384>>2]=r[a+156>>2]+f,zt[R+38>>1]=0,r[R>>2]=0,r[R+8>>2]=0,r[R+12>>2]=0,r[R+16>>2]=0,r[R+20>>2]=0,r[R+24>>2]=0,r[R+28>>2]=0,D[R+29|0]=0,D[R+30|0]=0,D[R+31|0]=0,D[R+32|0]=0,D[R+33|0]=0,D[R+34|0]=0,D[R+35|0]=0,D[R+36|0]=0,y=0,A=re-16|0,re=A;n:{i:{if(s=r[h+144>>2],s=Ut[(pt[r[r[s>>2]+32>>2]](s)|0)+36>>1],((s<<8|s>>>8)&65535)>>>0<=513){if(s=r[h+4>>2],r[h+40>>2]=r[h>>2],r[h+44>>2]=s,s=r[h+36>>2],r[h+72>>2]=r[h+32>>2],r[h+76>>2]=s,f=r[h+28>>2],s=h- -64|0,r[s>>2]=r[h+24>>2],r[s+4>>2]=f,s=r[h+20>>2],r[h+56>>2]=r[h+16>>2],r[h+60>>2]=s,s=r[h+12>>2],r[h+48>>2]=r[h+8>>2],r[h+52>>2]=s,!Lv(h+40|0,1,A+8|0)||(s=r[h+44>>2],r[h>>2]=r[h+40>>2],r[h+4>>2]=s,s=r[h+76>>2],r[h+32>>2]=r[h+72>>2],r[h+36>>2]=s,s=r[h+68>>2],r[h+24>>2]=r[h+64>>2],r[h+28>>2]=s,f=r[h+60>>2],m=f,s=r[h+56>>2],r[h+16>>2]=s,r[h+20>>2]=f,c=r[h+52>>2],f=r[h+48>>2],r[h+8>>2]=f,r[h+12>>2]=c,T=f-s|0,z=r[A+12>>2],f=c-((s>>>0>f>>>0)+m|0)|0,c=r[A+8>>2],(z|0)==(f|0)&T>>>0<c>>>0|f>>>0<z>>>0))break i;f=s,c=s+c|0,s=m+z|0,r[h+16>>2]=c,r[h+20>>2]=c>>>0<f>>>0?s+1|0:s}r:{if(Ut[h+38>>1]<=513){if(s=r[h+4>>2],r[h+96>>2]=r[h>>2],r[h+100>>2]=s,s=r[h+36>>2],r[h+128>>2]=r[h+32>>2],r[h+132>>2]=s,s=r[h+28>>2],r[h+120>>2]=r[h+24>>2],r[h+124>>2]=s,s=r[h+20>>2],r[h+112>>2]=r[h+16>>2],r[h+116>>2]=s,s=r[h+12>>2],r[h+104>>2]=r[h+8>>2],r[h+108>>2]=s,!Lv(h+96|0,1,A+8|0)||(s=r[h+100>>2],r[h>>2]=r[h+96>>2],r[h+4>>2]=s,s=r[h+132>>2],r[h+32>>2]=r[h+128>>2],r[h+36>>2]=s,s=r[h+124>>2],r[h+24>>2]=r[h+120>>2],r[h+28>>2]=s,f=r[h+116>>2],m=f,s=r[h+112>>2],r[h+16>>2]=s,r[h+20>>2]=f,c=r[h+108>>2],f=r[h+104>>2],r[h+8>>2]=f,r[h+12>>2]=c,T=f-s|0,z=r[A+12>>2],f=c-((s>>>0>f>>>0)+m|0)|0,c=r[A+8>>2],(z|0)==(f|0)&T>>>0<c>>>0|f>>>0<z>>>0))break i;f=m+z|0,c=s+c|0,f=c>>>0<s>>>0?f+1|0:f,r[h+16>>2]=c,r[h+20>>2]=f;break r}if(!sr(h+80|0,h))break n}if(!dte(h))break n;s=r[h+4>>2],r[R>>2]=r[h>>2],r[R+4>>2]=s,s=r[h+36>>2],r[R+32>>2]=r[h+32>>2],r[R+36>>2]=s,s=r[h+28>>2],r[R+24>>2]=r[h+24>>2],r[R+28>>2]=s,s=r[h+20>>2],r[R+16>>2]=r[h+16>>2],r[R+20>>2]=s,s=r[h+12>>2],r[R+8>>2]=r[h+8>>2],r[R+12>>2]=s,s=r[h+144>>2],s=Ut[(pt[r[r[s>>2]+32>>2]](s)|0)+36>>1];r:{if(((s<<8|s>>>8)&65535)>>>0<=513){s=r[h+144>>2];s:{if(I[(pt[r[r[s>>2]+32>>2]](s)|0)+36|0]<=1){if(s=r[R+20>>2],f=r[R+16>>2],m=f+4|0,s=m>>>0<4?s+1|0:s,c=r[R+12>>2],(c|0)<=(s|0)&m>>>0>Ue[R+8>>2]|(s|0)>(c|0))break n;f=f+r[R>>2]|0,f=I[f|0]|I[f+1|0]<<8|(I[f+2|0]<<16|I[f+3|0]<<24),r[R+16>>2]=m,r[R+20>>2]=s;break s}if(!ks(1,A+8|0,R))break n;f=r[A+8>>2]}if(s=r[h+152>>2],f>>>0>=s>>>0||(f=r[R+20>>2],c=r[R+12>>2],m=r[R+16>>2],(f|0)>=(c|0)&m>>>0>=Ue[R+8>>2]|(c|0)<(f|0))||(c=I[m+r[R>>2]|0],m=m+1|0,f=m?f:f+1|0,r[R+16>>2]=m,r[R+20>>2]=f,c))break n;r[h+176>>2]=2,r[h+180>>2]=7;break r}r[h+176>>2]=2,r[h+180>>2]=7,s=r[h+152>>2]}if((s|0)<0)break n;r[A+8>>2]=0,y=2,c=r[h+156>>2],m=r[h+160>>2]-c>>2;r:{if(m>>>0<s>>>0){ea(h+156|0,s-m|0,A+8|0),y=r[h+176>>2],f=r[h+180>>2];break r}if(f=7,s>>>0>=m>>>0)break r;r[h+160>>2]=c+(s<<2)}m=h+184|0,f=(f-y|0)+1|0,s=r[h+188>>2],c=r[h+184>>2],y=(s-c|0)/12|0;r:{if(f>>>0>y>>>0){f=f-y|0,T=r[m+8>>2],s=r[m+4>>2];s:{if(f>>>0<=(T-s|0)/12>>>0){f&&(y=s,s=ne((ne(f,12)-12>>>0)/12|0,12)+12|0,s=Ct(y,0,s)+s|0),r[m+4>>2]=s;break s}a:{o:{c:{if(y=r[m>>2],z=(s-y|0)/12|0,c=z+f|0,c>>>0<357913942){if(T=(T-y|0)/12|0,N=T<<1,T=T>>>0<178956970?c>>>0>N>>>0?c:N:357913941,T){if(T>>>0>=357913942)break c;we=Te(ne(T,12))}if(c=ne(z,12)+we|0,z=ne((ne(f,12)-12>>>0)/12|0,12)+12|0,f=Ct(c,0,z),z=f+z|0,T=ne(T,12)+we|0,(s|0)==(y|0))break o;for(;c=c-12|0,s=s-12|0,r[c>>2]=r[s>>2],r[c+4>>2]=r[s+4>>2],r[c+8>>2]=r[s+8>>2],r[s+8>>2]=0,r[s>>2]=0,r[s+4>>2]=0,(s|0)!=(y|0););if(r[m+8>>2]=T,f=r[m+4>>2],r[m+4>>2]=z,s=r[m>>2],r[m>>2]=c,(s|0)==(f|0))break a;for(;y=f-12|0,c=r[y>>2],c&&(r[f-8>>2]=c,W(c)),f=y,(f|0)!=(s|0););break a}jt(),Xe()}qn(1336),Xe()}r[m+8>>2]=T,r[m+4>>2]=z,r[m>>2]=f}s&&W(s)}f=r[h+188>>2];break r}if(f>>>0>=y>>>0){f=s;break r}if(f=c+ne(f,12)|0,(f|0)!=(s|0))for(;y=s-12|0,c=r[y>>2],c&&(r[s-8>>2]=c,W(c)),s=y,(f|0)!=(s|0););r[h+188>>2]=f}T=h+196|0,y=r[h+184>>2],s=(f-y|0)/12|0,we=r[h+196>>2],c=r[h+200>>2]-we>>2;r:{if(s>>>0>c>>>0){Xr(T,s-c|0),y=r[h+184>>2],f=r[h+188>>2];break r}if(s>>>0>=c>>>0)break r;r[h+200>>2]=we+(s<<2)}if((f|0)==(y|0)){y=1;break n}for(s=0;;){if(!ks(1,A+8|0,R)||(y=r[A+8>>2],f=r[h+148>>2],y>>>0>(r[f+4>>2]-r[f>>2]>>2>>>0)/3>>>0))break i;if(y){f=r[m>>2],N=ne(s,12),c=f+N|0,we=r[c>>2],z=r[c+4>>2]-we>>2;r:{if(z>>>0<y>>>0){Xr(c,y-z|0),f=r[m>>2];break r}if(y>>>0>=z>>>0)break r;r[c+4>>2]=we+(y<<2)}bB(y,1,R,r[f+N>>2]),r[r[T>>2]+(s<<2)>>2]=y}if(y=1,s=s+1|0,!(s>>>0<(r[h+188>>2]-r[h+184>>2]|0)/12>>>0))break}break n}y=0}re=A+16|0;n:{if(!y)break n;s=0,A=0,f=0,m=0,we=0,y=0,H=re-96|0,re=H,r[H+72>>2]=0,r[H+64>>2]=0,r[H+68>>2]=0,r[H+48>>2]=0,r[H+52>>2]=0,r[H+40>>2]=0,r[H+44>>2]=0,r[H+56>>2]=1065353216,r[H+32>>2]=0,r[H+24>>2]=0,r[H+28>>2]=0,Me=1,N=a,En=r[a+124>>2];i:{r:{s:{a:{z=u;o:{c:{if((u|0)<=0)break c;for(ge=N+232|0,ei=r[N+216>>2]!=r[N+220>>2];;){a=we,we=a+1|0,u=r[ge+172>>2];l:{if((u|0)!=-1){if(c=r[ge+196>>2]+(u<<2)|0,T=r[c>>2],u=T-1|0,r[c>>2]=u,c=9,(T|0)<=0)break l;c=r[(r[r[r[ge+184>>2]+ne(r[ge+172>>2],12)>>2]+(u<<2)>>2]<<2)+12176>>2],r[ge+168>>2]=c;break l}c=7,u=r[ge+144>>2],u=Ut[(pt[r[r[u>>2]+32>>2]](u)|0)+36>>1];u:{if(((u<<8|u>>>8)&65535)>>>0>513)break u;if(!I[ge+76|0]){r[ge+168>>2]=1,c=1;break l}if(c=0,U=r[ge- -64>>2],T=r[ge+72>>2],u=U+(T>>>3|0)|0,ie=r[ge+68>>2],u>>>0>=ie>>>0||(Z=I[u|0],u=T+1|0,r[ge+72>>2]=u,!(Z>>>(T&7)&1)))break u;Z=u>>>3|0,c=U+Z|0;f:{if(c>>>0>=ie>>>0){c=u,u=0;break f}ut=I[c|0],c=T+2|0,r[ge+72>>2]=c,Z=c>>>3|0,u=ut>>>(u&7)&1}T=U+Z|0,T>>>0<ie>>>0?(T=I[T|0],r[ge+72>>2]=c+1,c=T>>>(c&7)<<1&2):c=0,c=(u|c)<<1|1}r[ge+168>>2]=c}l:{u:{if(!c){if((f|0)==(m|0)){T=-1;break o}c=-1,U=r[N+8>>2],Z=r[U+24>>2],s=Z,ie=f-4|0,T=r[ie>>2],u=-1;f:{if((T|0)==-1||(A=T+1|0,A=(A>>>0)%3|0?A:T-2|0,u=-1,(A|0)==-1))break f;u=r[r[U>>2]+(A<<2)>>2]}s=r[s+(u<<2)>>2],(s|0)!=-1&&(c=s+1|0,c=(c>>>0)%3|0?c:s-2|0),A=r[U+12>>2],s=ne(a,3),a=s+1|0,r[A+(T<<2)>>2]=a,ut=a<<2,r[ut+A>>2]=T,Me=s+2|0,r[A+(c<<2)>>2]=Me,vt=Me<<2,r[vt+A>>2]=c,A=-1,a=-1;f:{if((T|0)==-1)break f;d:{if((T>>>0)%3|0){T=T-1|0;break d}if(T=T+2|0,a=-1,(T|0)==-1)break f}a=r[r[U>>2]+(T<<2)>>2]}f:{if((c|0)==-1||(T=c+1|0,c=(T>>>0)%3|0?T:c-2|0,(c|0)==-1))break f;A=r[r[U>>2]+(c<<2)>>2]}if(T=-1,(a|0)==(u|0)|(u|0)==(A|0))break o;c=r[U>>2],r[c+(s<<2)>>2]=u,r[c+ut>>2]=A,r[c+vt>>2]=a,(a|0)!=-1&&(r[Z+(a<<2)>>2]=Me),a=r[N+120>>2]+(u>>>3&536870908)|0,c=r[a>>2],xr=a,ws=Yi(u)&c,r[xr>>2]=ws,r[ie>>2]=s;break u}T=-1;f:{d:{p:{m:{y:{w:{b:{g:{E:{v:switch(c-1|0){case 2:case 4:if((s|0)==(m|0)||(u=r[N+8>>2],A=r[u+12>>2],U=ne(a,3),ut=(c|0)==5,Z=U+(ut?2:1)|0,vt=Z<<2,nr=s-4|0,c=r[nr>>2],r[A+vt>>2]=c,r[A+(c<<2)>>2]=Z,$u(u+24|0),A=r[N+8>>2],ie=r[A+24>>2],r[A+28>>2]-ie>>2>(En|0)))break o;A=r[A>>2],Pr=A+vt|0,u=r[u+28>>2]-r[u+24>>2]|0,vt=(u>>2)-1|0,r[Pr>>2]=vt,u&&(r[ie+(vt<<2)>>2]=Z),Z=ut?U:U+2|0,Pr=A+(U+ut<<2)|0;h:{if((c|0)==-1){r[A+(Z<<2)>>2]=-1,u=-1;break h}_:{A:{S:{if((c>>>0)%3|0){u=c-1|0;break S}if(u=c+2|0,(u|0)==-1)break A}if(u=r[A+(u<<2)>>2],r[A+(Z<<2)>>2]=u,(u|0)==-1)break _;r[ie+(u<<2)>>2]=Z;break _}r[A+(Z<<2)>>2]=-1}if(Z=c+1|0,c=(Z>>>0)%3|0?Z:c-2|0,u=-1,(c|0)==-1)break h;u=r[A+(c<<2)>>2]}r[Pr>>2]=u,r[nr>>2]=U;break E;case 0:if((s|0)==(A|0))break o;f=s-4|0,Z=r[f>>2],r[H+68>>2]=f,ie=r[H+44>>2];h:{if(!ie)break h;c=r[H+40>>2],ut=Xv(ie)>>>0>1,u=a&ie+2147483647;_:{if(!ut||(u=a,a>>>0<ie>>>0))break _;u=(a>>>0)%(ie>>>0)|0}if(U=u,u=r[c+(U<<2)>>2],!u||(u=r[u>>2],!u))break h;_:{if(!ut){for(c=ie-1|0;;){ie=r[u+4>>2];A:{if((ie|0)!=(a|0)){if((U|0)==(c&ie))break A;break h}if((a|0)==r[u+8>>2])break _}if(u=r[u>>2],!u)break}break h}for(;;){c=r[u+4>>2];A:{if((c|0)!=(a|0)){if(c>>>0>=ie>>>0&&(c=(c>>>0)%(ie>>>0)|0),(c|0)==(U|0))break A;break h}if((a|0)==r[u+8>>2])break _}if(u=r[u>>2],!u)break}break h}if((f|0)!=(gn|0)){r[f>>2]=r[u+12>>2],r[H+68>>2]=s,f=s;break h}if(s=gn-A|0,c=s>>2,f=c+1|0,f>>>0>=1073741824)break w;if(m=s>>1,f=s>>>0<2147483644?f>>>0>m>>>0?f:m:1073741823,f){if(f>>>0>=1073741824)break r;m=Te(f<<2)}else m=0;if(c=m+(c<<2)|0,r[c>>2]=r[u+12>>2],gn=(f<<2)+m|0,f=c+4|0,(s|0)>0&&$e(m,A,s),r[H+72>>2]=gn,r[H+68>>2]=f,r[H+64>>2]=m,!A)break h;W(A)}if((f|0)==(m|0)||(ut=f-4|0,c=r[ut>>2],u=(c|0)==-1,U=r[N+8>>2],!u&r[r[U+12>>2]+(c<<2)>>2]!=-1)||(ie=r[U+12>>2],(Z|0)!=-1&r[ie+(Z<<2)>>2]!=-1))break b;if(s=ne(a,3),Me=s+2|0,r[ie+(c<<2)>>2]=Me,a=Me<<2,r[a+ie>>2]=c,A=s+1|0,r[ie+(Z<<2)>>2]=A,vt=A<<2,r[vt+ie>>2]=Z,u)break y;if((c>>>0)%3|0){T=c-1|0;break p}if(T=c+2|0,(T|0)!=-1)break p;A=r[U>>2],u=-1;break d;case 6:break v;default:break o}if(c=r[N+8>>2],$u(c+24|0),u=r[N+8>>2],f=ne(a,3),Z=r[c+28>>2]-r[c+24>>2]|0,U=Z>>2,ut=U-1|0,r[r[u>>2]+(f<<2)>>2]=ut,$u(u+24|0),ie=f+1|0,r[r[u>>2]+(ie<<2)>>2]=(r[u+28>>2]-r[u+24>>2]>>2)-1,u=r[N+8>>2],$u(u+24|0),vt=f+2|0,r[r[u>>2]+(vt<<2)>>2]=(r[u+28>>2]-r[u+24>>2]>>2)-1,u=r[N+8>>2],c=r[u+24>>2],r[u+28>>2]-c>>2>(En|0))break o;v:{h:{if(!Z){r[c+(U<<2)>>2]=ie,u=1;break h}if(r[c+(ut<<2)>>2]=f,u=0,(Z|0)==-4)break h;if(r[c+(U<<2)>>2]=ie,u=U+1|0,(u|0)==-1)break v}r[c+(u<<2)>>2]=vt}if((s|0)!=(gn|0)){r[s>>2]=f,f=s+4|0,r[H+68>>2]=f,s=f;break g}if(s=s-A|0,c=s>>2,m=c+1|0,m>>>0>=1073741824)break m;if(u=s>>1,u=s>>>0<2147483644?u>>>0<m>>>0?m:u:1073741823,u){if(u>>>0>=1073741824)break r;m=Te(u<<2)}else m=0;c=m+(c<<2)|0,r[c>>2]=f,gn=(u<<2)+m|0,f=c+4|0,(s|0)>0&&$e(m,A,s),r[H+72>>2]=gn,r[H+68>>2]=f,r[H+64>>2]=m,A&&W(A),s=f}A=m}if(qee(ge,r[s-4>>2]),u=r[N+40>>2],(u|0)==r[N+36>>2])break l;for(c=z+(a^-1)|0,U=f-4|0;;){if(a=r[u-8>>2],a>>>0>c>>>0)break b;if((a|0)!=(c|0))break l;if(Z=I[u-4|0],a=u-12|0,s=r[a>>2],r[N+40>>2]=a,(s|0)<0)break b;a=r[U>>2],r[H+20>>2]=z+(s^-1),s=H+20|0,r[H+88>>2]=s,SB(H,H+40|0,s,H+88|0),u=r[H>>2];g:{if(Z&1){if(s=-1,(a|0)==-1)break g;s=a+1|0,s=(s>>>0)%3|0?s:a-2|0;break g}if(s=-1,(a|0)==-1||(s=a-1|0,(a>>>0)%3|0))break g;s=a+2|0}if(r[u+12>>2]=s,s=f,u=r[N+40>>2],(u|0)==r[N+36>>2])break}break l}if(Me&1)break o;break c}jt(),Xe()}u=-1,A=r[U>>2],r[A+(s<<2)>>2]=-1,T=-1;break f}jt(),Xe()}A=r[U>>2],u=r[A+(T<<2)>>2]}if(r[(s<<2)+A>>2]=u,nr=c+1|0,c=(nr>>>0)%3|0?nr:c-2|0,T=-1,(c|0)==-1)break f;T=r[(c<<2)+A>>2]}r[A+vt>>2]=T;f:{if((Z|0)==-1){r[a+A>>2]=-1,Me=-1,T=-1;break f}d:{p:{m:{if((Z>>>0)%3|0){T=Z-1|0;break m}if(T=Z+2|0,(T|0)==-1)break p}if(c=a+A|0,a=r[(T<<2)+A>>2],r[c>>2]=a,(a|0)==-1)break d;r[r[U+24>>2]+(a<<2)>>2]=Me;break d}r[a+A>>2]=-1}if(Me=-1,a=Z+1|0,a=(a>>>0)%3|0?a:Z-2|0,T=-1,(a|0)==-1)break f;Me=r[(a<<2)+A>>2],T=a}a=r[N+388>>2],c=u<<2,Z=a+c|0,Pr=a,a=Me<<2,r[Z>>2]=r[Z>>2]+r[Pr+a>>2],U=r[U+24>>2],a=U+a|0,(u|0)!=-1&&(r[c+U>>2]=r[a>>2]);f:{if((T|0)==-1)break f;for(;;){if(r[(T<<2)+A>>2]=u,c=T+1|0,c=(c>>>0)%3|0?c:T-2|0,(c|0)==-1||(c=r[ie+(c<<2)>>2],(c|0)==-1))break f;if(T=c+1|0,T=(T>>>0)%3|0?T:c-2|0,(T|0)==-1)break}}r[a>>2]=-1;f:{if(ei)break f;if((Wt|0)!=(Nn|0)){r[Wt>>2]=Me,Wt=Wt+4|0,r[H+28>>2]=Wt;break f}d:{if(a=Nn-Ie|0,c=a>>2,y=c+1|0,y>>>0<1073741824){if(u=a>>1,u=a>>>0<2147483644?u>>>0<y>>>0?y:u:1073741823,u){if(u>>>0>=1073741824)break d;y=Te(u<<2)}else y=0;c=y+(c<<2)|0,r[c>>2]=Me,Nn=(u<<2)+y|0,Wt=c+4|0,(a|0)>0&&$e(y,Ie,a),r[H+32>>2]=Nn,r[H+28>>2]=Wt,r[H+24>>2]=y,Ie&&W(Ie),Ie=y;break f}jt(),Xe()}break r}r[ut>>2]=s}qee(ge,s),s=f,A=m}if(Me=(z|0)>(we|0),(z|0)==(we|0))break}we=z}if(T=-1,s=r[N+8>>2],r[s+28>>2]-r[s+24>>2]>>2>(En|0))break o;if((f|0)!=(m|0)){for(a=N+60|0,gn=N+312|0;;){f=f-4|0,Ie=r[f>>2],r[H+68>>2]=f;c:{l:{u:{f:{if(Ut[N+270>>1]<=513){if(!I[N+364|0])break u;if(s=r[N+360>>2],u=r[N+352>>2]+(s>>>3|0)|0,u>>>0>=Ue[N+356>>2])break l;u=I[u|0],r[N+360>>2]=s+1,s=u>>>(s&7)&1;break f}s=js(gn)}if(!s)break l}if(ge=r[N+8>>2],U=r[ge>>2],((r[ge+4>>2]-U>>2>>>0)/3|0)<=(we|0))break o;u=-1,c=-1,A=r[ge+24>>2],s=-1;u:{if((Ie|0)==-1||(z=Ie+1|0,z=(z>>>0)%3|0?z:Ie-2|0,s=-1,(z|0)==-1))break u;s=r[U+(z<<2)>>2]}z=s,s=r[A+(z<<2)>>2];u:{if((s|0)==-1||(Me=s+1|0,s=(Me>>>0)%3|0?Me:s-2|0,(s|0)==-1))break u;u=s+1|0,u=(u>>>0)%3|0?u:s-2|0,(u|0)!=-1&&(c=r[U+(u<<2)>>2]),u=s}Me=-1,Z=-1,A=r[A+(c<<2)>>2],s=-1;u:{if((A|0)==-1||(ie=A+1|0,A=(ie>>>0)%3|0?ie:A-2|0,s=-1,(A|0)==-1))break u;s=A+1|0,s=(s>>>0)%3|0?s:A-2|0,(s|0)!=-1&&(Z=r[U+(s<<2)>>2]),s=A}if(ge=r[ge+12>>2],A=ne(we,3),En=A<<2,r[ge+En>>2]=Ie,r[ge+(Ie<<2)>>2]=A,Ie=A+1|0,Nn=Ie<<2,r[Nn+ge>>2]=u,r[ge+(u<<2)>>2]=Ie,ie=A+2|0,u=ie<<2,r[u+ge>>2]=s,r[ge+(s<<2)>>2]=ie,r[U+En>>2]=c,ge=U+Nn|0,r[ge>>2]=Z,U=u+U|0,r[U>>2]=z,s=r[N+120>>2],u=A>>>0>Ie>>>0?-1:c,c=s+(u>>>3&536870908)|0,z=r[c>>2],xr=c,ws=Yi(u)&z,r[xr>>2]=ws,Me=(Ie|0)!=-1?r[ge>>2]:Me,u=s+(Me>>>3&536870908)|0,c=r[u>>2],xr=u,ws=Yi(Me)&c,r[xr>>2]=ws,u=-1,u=(ie|0)!=-1?r[U>>2]:u,s=s+(u>>>3&536870908)|0,c=r[s>>2],xr=s,ws=Yi(u)&c,r[xr>>2]=ws,u=r[N+64>>2],s=r[N+68>>2],(u|0)==s<<5){if((u+1|0)<0)break a;u>>>0<=1073741822?(u=u+32&-32,s=s<<6,s=s>>>0<u>>>0?u:s):s=2147483647,qd(a,s),u=r[N+64>>2]}if(we=we+1|0,r[N+64>>2]=u+1,s=r[N+60>>2]+(u>>>3&536870908)|0,r[s>>2]=r[s>>2]|1<<u,s=r[N+76>>2],(s|0)!=r[N+80>>2]){r[s>>2]=A,r[N+76>>2]=s+4;break c}if(c=r[N+72>>2],u=s-c|0,Ie=u>>2,s=Ie+1|0,s>>>0>=1073741824)break s;if(z=u>>1,z=u>>>0<2147483644?s>>>0>z>>>0?s:z:1073741823,z){if(z>>>0>=1073741824)break r;s=Te(z<<2)}else s=0;if(Ie=s+(Ie<<2)|0,r[Ie>>2]=A,(u|0)>0&&$e(s,c,u),r[N+80>>2]=s+(z<<2),r[N+76>>2]=Ie+4,r[N+72>>2]=s,!c)break c;W(c);break c}if(s=r[N+64>>2],u=r[N+68>>2],(s|0)==u<<5){if((s+1|0)<0)break a;s>>>0<=1073741822?(s=s+32&-32,u=u<<6,s=s>>>0>u>>>0?s:u):s=2147483647,qd(a,s),s=r[N+64>>2]}if(r[N+64>>2]=s+1,u=r[N+60>>2]+(s>>>3&536870908)|0,c=r[u>>2],xr=u,ws=Yi(s)&c,r[xr>>2]=ws,s=r[N+76>>2],(s|0)!=r[N+80>>2]){r[s>>2]=Ie,r[N+76>>2]=s+4;break c}if(c=r[N+72>>2],u=s-c|0,z=u>>2,s=z+1|0,s>>>0>=1073741824)break s;if(A=u>>1,A=u>>>0<2147483644?s>>>0>A>>>0?s:A:1073741823,A){if(A>>>0>=1073741824)break r;s=Te(A<<2)}else s=0;if(z=s+(z<<2)|0,r[z>>2]=Ie,(u|0)>0&&$e(s,c,u),r[N+80>>2]=s+(A<<2),r[N+76>>2]=z+4,r[N+72>>2]=s,!c)break c;W(c)}if((f|0)==(m|0))break}s=r[N+8>>2]}if(((r[s+4>>2]-r[s>>2]>>2>>>0)/3|0)!=(we|0))break o;if(u=r[s+24>>2],T=r[s+28>>2]-u>>2,(y|0)==(Wt|0)){y=Wt;break o}for(c=y;;){if(a=r[c>>2],f=T-1|0,A=(f<<2)+u|0,r[A>>2]==-1)for(;f=T-2|0,T=T-1|0,A=(f<<2)+u|0,r[A>>2]==-1;);if(a>>>0<=f>>>0){if(r[H>>2]=s,u=r[A>>2],D[H+12|0]=1,r[H+8>>2]=u,r[H+4>>2]=u,(u|0)!=-1)for(;r[r[s>>2]+(u<<2)>>2]=a,GM(H),s=r[N+8>>2],u=r[H+8>>2],(u|0)!=-1;);u=r[s+24>>2],A=u+(f<<2)|0,(a|0)!=-1&&(r[(a<<2)+u>>2]=r[A>>2]),r[A>>2]=-1,A=1<<a,we=r[N+120>>2],a=we+(a>>>3&536870908)|0,we=we+(f>>>3&536870908)|0,f=1<<f,r[we>>2]&f?A=A|r[a>>2]:A=r[a>>2]&(A^-1),r[a>>2]=A,r[we>>2]=r[we>>2]&(f^-1),T=T-1|0}if(c=c+4|0,(Wt|0)==(c|0))break}}if(y&&W(y),a=r[H+48>>2],a)for(;s=r[a>>2],W(a),a=s,!!s;);a=r[H+40>>2],r[H+40>>2]=0,a&&W(a),m&&(r[H+68>>2]=m,W(m)),re=H+96|0;break i}eu(),Xe()}jt(),Xe()}qn(1336),Xe()}if((T|0)==-1)break n;a=r[R+16>>2],s=a+r[R>>2]|0,f=r[R+8>>2],f=f-a|0,a=r[r[N+4>>2]+32>>2],zt[a+38>>1]=Ut[a+38>>1],r[a>>2]=s,r[a+16>>2]=0,r[a+20>>2]=0,r[a+8>>2]=f,r[a+12>>2]=0,a=r[N+4>>2],s=Ut[a+36>>1],y=s<<8|s>>>8,(y&65535)>>>0<=513&&(a=r[a+32>>2],f=xi+r[a+20>>2]|0,s=Pt+r[a+16>>2]|0,f=s>>>0<Pt>>>0?f+1|0:f,r[a+16>>2]=s,r[a+20>>2]=f);i:{if(r[N+216>>2]==r[N+220>>2])break i;s=r[N+8>>2],a=r[s>>2],s=r[s+4>>2];r:{if((y&65535)>>>0>=513){if((a|0)==(s|0))break i;s=0;break r}if((a|0)==(s|0))break i;for(s=0;;){if(CB(N,s)){if(s=s+3|0,a=r[N+8>>2],s>>>0<r[a+4>>2]-r[a>>2]>>2>>>0)continue;break i}break}break n}for(;;){if(kB(N,s)){if(s=s+3|0,a=r[N+8>>2],s>>>0<r[a+4>>2]-r[a>>2]>>2>>>0)continue;break i}break}break n}if(jB(h),s=r[N+216>>2],(s|0)!=r[N+220>>2])for(y=0;;){if(a=ne(y,144),IB((a+s|0)+4|0,r[N+8>>2]),We=r[Jr>>2],f=a+We|0,s=r[f+132>>2],f=r[f+136>>2],(s|0)!=(f|0))for(;NB((a+We|0)+4|0,r[s>>2]),We=r[Jr>>2],s=s+4|0,(f|0)!=(s|0););if(TB((a+We|0)+4|0),y=y+1|0,s=r[N+216>>2],!(y>>>0<(r[N+220>>2]-s|0)/144>>>0))break}if(a=r[N+8>>2],Vv(N+184|0,r[a+28>>2]-r[a+24>>2]>>2),We=r[N+216>>2],(We|0)!=r[N+220>>2])for(s=0;a=ne(s,144)+We|0,f=r[a+60>>2]-r[a+56>>2]>>2,y=a+104|0,a=r[N+8>>2],a=r[a+28>>2]-r[a+24>>2]>>2,Vv(y,(a|0)>(f|0)?a:f),s=s+1|0,We=r[N+216>>2],s>>>0<(r[N+220>>2]-We|0)/144>>>0;);We=wB(N,T)}break e}We=0}return re=R- -64|0,We|0}function NSe(a){a=a|0;var s=0,c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0,ie=0,ge=0,we=0,Me=0,Ie=0,We=0,ut=0,vt=0,Pt=0,Wt=0,gn=0,En=0,Nn=0,nr=0,Pr=0,Jr=0,xi=0,ei=0,xr=0,ws=0,ta=0,pa=0;if(z=re+-64|0,re=z,r[a+132>>2]=0,r[a+148>>2]){if(f=r[a+144>>2],f)for(;u=r[f>>2],W(f),f=u,!!u;);f=0,r[a+144>>2]=0,h=r[a+140>>2];e:{if(!h)break e;if(h-1>>>0>=3)for(u=h&-4;s=f<<2,r[s+r[a+136>>2]>>2]=0,r[r[a+136>>2]+(s|4)>>2]=0,r[r[a+136>>2]+(s|8)>>2]=0,r[r[a+136>>2]+(s|12)>>2]=0,f=f+4|0,m=m+4|0,(u|0)!=(m|0););if(u=h&3,!u)break e;for(;r[r[a+136>>2]+(f<<2)>>2]=0,f=f+1|0,We=We+1|0,(u|0)!=(We|0););}r[a+148>>2]=0}e:{t:{f=r[a+4>>2],We=I[f+36|0],u=We<<8|I[f+37|0];n:{if(u>>>0>513)break n;if(c=r[f+32>>2],u>>>0<=511){if(u=r[c+20>>2],h=r[c+16>>2],m=h+4|0,u=m>>>0<4?u+1|0:u,s=m,m=r[c+12>>2],s>>>0>Ue[c+8>>2]&(m|0)<=(u|0)|(u|0)>(m|0))break t;m=h+r[c>>2]|0,m=I[m|0]|I[m+1|0]<<8|(I[m+2|0]<<16|I[m+3|0]<<24),r[c+16>>2]=s,r[c+20>>2]=u,r[a+132>>2]=m;break n}if(!ks(1,z,c))break t;f=r[a+4>>2],We=I[f+36|0],r[a+132>>2]=r[z>>2]}c=r[f+32>>2];n:{i:{r:{if((We&255)>>>0<=1){if(We=0,u=r[c+20>>2],h=r[c+16>>2],m=h+4|0,u=m>>>0<4?u+1|0:u,s=m,m=r[c+12>>2],s>>>0>Ue[c+8>>2]&(m|0)<=(u|0)|(u|0)>(m|0))break e;m=h+r[c>>2]|0,m=I[m|0]|I[m+1|0]<<8|(I[m+2|0]<<16|I[m+3|0]<<24),r[z+60>>2]=m,r[c+16>>2]=s,r[c+20>>2]=u,r[a+156>>2]=m,c=a+156|0;break r}if(We=0,!ks(1,z+60|0,c))break e;if(f=r[a+4>>2],u=I[f+36|0],r[a+156>>2]=r[z+60>>2],c=a+156|0,u>>>0>1)break i}if(H=r[f+32>>2],u=r[H+8>>2],h=r[H+12>>2],T=u,u=r[H+20>>2],s=r[H+16>>2],m=s+4|0,u=m>>>0<4?u+1|0:u,f=m,T>>>0<f>>>0&(u|0)>=(h|0)|(u|0)>(h|0))break e;m=s+r[H>>2]|0,m=I[m|0]|I[m+1|0]<<8|(I[m+2|0]<<16|I[m+3|0]<<24),r[z+56>>2]=m,r[H+16>>2]=f,r[H+20>>2]=u;break n}if(!ks(1,z+56|0,r[f+32>>2]))break e;m=r[z+56>>2]}if(m>>>0>1431655765|Ue[c>>2]>ne(m,3)>>>0||(vt=r[a+4>>2],f=r[vt+32>>2],T=r[f+8>>2],h=T,s=r[f+12>>2],u=r[f+20>>2],N=r[f+16>>2],(s|0)<=(u|0)&N>>>0>=h>>>0|(u|0)>(s|0)))break e;H=r[f>>2],A=I[H+N|0],c=N+1|0,h=c?u:u+1|0,r[f+16>>2]=c,r[f+20>>2]=h;n:{if(I[vt+36|0]<=1){if(h=N+5|0,u=h>>>0<5?u+1|0:u,h>>>0>T>>>0&(u|0)>=(s|0)|(u|0)>(s|0))break e;s=c+H|0,c=I[s|0]|I[s+1|0]<<8|(I[s+2|0]<<16|I[s+3|0]<<24),r[z+52>>2]=c,r[f+16>>2]=h,r[f+20>>2]=u;break n}if(!ks(1,z+52|0,f))break e;c=r[z+52>>2]}if(((c>>>0)/3|0)+c>>>0<m>>>0|c>>>0>m>>>0)break e;u=r[a+4>>2],H=r[u+32>>2];n:{if(I[u+36|0]<=1){if(u=r[H+20>>2],s=r[H+16>>2],f=s+4|0,u=f>>>0<4?u+1|0:u,h=f,f=r[H+12>>2],h>>>0>Ue[H+8>>2]&(f|0)<=(u|0)|(u|0)>(f|0))break e;f=s+r[H>>2]|0,s=I[f|0]|I[f+1|0]<<8|(I[f+2|0]<<16|I[f+3|0]<<24),r[z+48>>2]=s,r[H+16>>2]=h,r[H+20>>2]=u;break n}if(!ks(1,z+48|0,H))break e;s=r[z+48>>2]}if(c>>>0<s>>>0||(r[a+28>>2]=r[a+24>>2],u=Te(88),HB(u),f=r[a+8>>2],r[a+8>>2]=u,f&&(Zd(f),!r[a+8>>2]))||(r[a+164>>2]=r[a+160>>2],Hv(a+160|0,m),r[a+176>>2]=r[a+172>>2],Hv(a+172|0,m),r[a- -64>>2]=0,r[a+92>>2]=-1,r[a+84>>2]=-1,r[a+88>>2]=-1,r[a+40>>2]=r[a+36>>2],r[a+52>>2]=r[a+48>>2],r[a+76>>2]=r[a+72>>2],xi=a+216|0,ZB(xi),EB(xi,A),!BB(r[a+8>>2],m,r[a+156>>2]+s|0)))break e;u=r[a+156>>2],D[z|0]=1,hc(a+120|0,u+s|0,z),m=r[a+4>>2],u=Ut[m+36>>1],u=(u<<8|u>>>8)&65535;n:{if(u>>>0<=513){H=r[m+32>>2];i:{if(u>>>0<=511){if(u=r[H+20>>2],h=r[H+16>>2],m=h+4|0,u=m>>>0<4?u+1|0:u,f=m,m=r[H+12>>2],f>>>0>Ue[H+8>>2]&(m|0)<=(u|0)|(u|0)>(m|0))break e;m=h+r[H>>2]|0,m=I[m|0]|I[m+1|0]<<8|(I[m+2|0]<<16|I[m+3|0]<<24),r[H+16>>2]=f,r[H+20>>2]=u;break i}if(!ks(1,z+44|0,H))break e;m=r[z+44>>2]}if(!m||(H=r[r[a+4>>2]+32>>2],h=r[H+8>>2],u=r[H+16>>2],f=h-u|0,u=r[H+12>>2]-(r[H+20>>2]+(u>>>0>h>>>0)|0)|0,f>>>0<m>>>0&(u|0)<=0|(u|0)<0)||(zt[z+38>>1]=0,r[z>>2]=0,r[z+8>>2]=0,r[z+12>>2]=0,r[z+16>>2]=0,r[z+20>>2]=0,r[z+24>>2]=0,r[z+28>>2]=0,D[z+29|0]=0,D[z+30|0]=0,D[z+31|0]=0,D[z+32|0]=0,D[z+33|0]=0,D[z+34|0]=0,D[z+35|0]=0,D[z+36|0]=0,H=r[r[a+4>>2]+32>>2],f=H,u=r[f+16>>2],h=(u+r[f>>2]|0)+m|0,f=r[f+8>>2],u=(f-u|0)-m|0,zt[z+38>>1]=Ut[H+38>>1],r[z>>2]=h,r[z+16>>2]=0,r[z+20>>2]=0,r[z+8>>2]=u,r[z+12>>2]=0,H=Mv(a,z),(H|0)==-1))break e;ws=H>>31;break n}if(H=-1,ws=-1,(Mv(a,r[m+32>>2])|0)==-1)break e}Nn=a+232|0,Ate(Nn,a),r[a+372>>2]=A,r[a+384>>2]=r[a+156>>2]+s,zt[z+38>>1]=0,r[z>>2]=0,u=z,r[u+8>>2]=0,r[u+12>>2]=0,r[u+16>>2]=0,r[u+20>>2]=0,r[u+24>>2]=0,r[u+28>>2]=0,D[u+29|0]=0,D[u+30|0]=0,D[u+31|0]=0,D[u+32|0]=0,D[u+33|0]=0,D[u+34|0]=0,D[u+35|0]=0,D[u+36|0]=0,N=0,T=re-16|0,re=T;n:{if(!Gee(Nn,u)||(m=u,u=r[u+20>>2],h=r[m+16>>2],f=h+4|0,u=f>>>0<4?u+1|0:u,s=f,f=r[m+12>>2],s>>>0>Ue[m+8>>2]&(f|0)<=(u|0)|(u|0)>(f|0))||(f=h+r[m>>2]|0,f=I[f|0]|I[f+1|0]<<8|(I[f+2|0]<<16|I[f+3|0]<<24),r[m+16>>2]=s,r[m+20>>2]=u,(f|0)<0)||(s=r[Nn+152>>2],(s|0)<=(f|0)))break n;r[T+12>>2]=0,u=r[Nn+156>>2],f=r[Nn+160>>2]-u>>2;i:{if(f>>>0<s>>>0){ea(Nn+156|0,s-f|0,T+12|0);break i}if(s>>>0>=f>>>0)break i;r[Nn+160>>2]=u+(s<<2)}N=sr(Nn+168|0,m)}re=T+16|0;n:{if(!N)break n;s=0,N=0,f=0,u=0,m=0,vt=0,U=re-96|0,re=U,r[U+72>>2]=0,r[U+64>>2]=0,r[U+68>>2]=0,r[U+48>>2]=0,r[U+52>>2]=0,r[U+40>>2]=0,r[U+44>>2]=0,r[U+56>>2]=1065353216,r[U+32>>2]=0,r[U+24>>2]=0,r[U+28>>2]=0,Z=1,y=a,ei=r[a+124>>2];i:{r:{s:{a:{T=c;o:{c:{if((c|0)<=0)break c;for(Pr=y+400|0,xr=y+232|0,Wt=r[y+216>>2]!=r[y+220>>2];;){A=vt,vt=A+1|0;l:{u:{f:{d:{p:{if(r[y+420>>2]!=-1&&js(Pr))break p;if(I[y+308|0]){if(ie=r[y+296>>2],ge=r[y+304>>2],a=ie+(ge>>>3|0)|0,we=r[y+300>>2],a>>>0>=we>>>0||(h=I[a|0],a=ge+1|0,r[y+304>>2]=a,!(h>>>(ge&7)&1)))break d;R=a>>>3|0,h=ie+R|0;m:{if(h>>>0>=we>>>0){h=a,a=0;break m}c=I[h|0],h=ge+2|0,r[y+304>>2]=h,R=h>>>3|0,a=c>>>(a&7)&1}c=R+ie|0,c>>>0<we>>>0?(c=I[c|0],r[y+304>>2]=h+1,h=c>>>(h&7)<<1&2):h=0,c=(a|h)<<1|1}else c=1;r[y+416>>2]=c;break u}if(c=r[y+420>>2],r[y+416>>2]=c,c)break u;break f}r[y+416>>2]=0}if((s|0)==(N|0)){h=-1;break o}we=-1,Pt=r[y+8>>2],ge=r[Pt+24>>2],a=ge,ie=s-4|0,gn=r[ie>>2],c=-1;f:{if((gn|0)==-1||(h=gn+1|0,h=(h>>>0)%3|0?h:gn-2|0,c=-1,(h|0)==-1))break f;c=r[r[Pt>>2]+(h<<2)>>2]}h=r[a+(c<<2)>>2],(h|0)!=-1&&(a=h+1|0,we=(a>>>0)%3|0?a:h-2|0),h=r[Pt+12>>2],Ie=ne(A,3),a=Ie+1|0,r[h+(gn<<2)>>2]=a,R=a<<2,r[R+h>>2]=gn,Me=Ie+2|0,r[h+(we<<2)>>2]=Me,A=Me<<2,r[A+h>>2]=we,Z=-1,a=-1;f:{if((gn|0)==-1)break f;d:{if((gn>>>0)%3|0){h=gn-1|0;break d}if(h=gn+2|0,a=-1,(h|0)==-1)break f}a=r[r[Pt>>2]+(h<<2)>>2]}f:{if((we|0)==-1||(h=we+1|0,h=(h>>>0)%3|0?h:we-2|0,(h|0)==-1))break f;Z=r[r[Pt>>2]+(h<<2)>>2]}if(h=-1,(a|0)==(c|0)|(c|0)==(Z|0))break o;h=r[Pt>>2],r[h+(Ie<<2)>>2]=c,r[h+R>>2]=Z,r[h+A>>2]=a,(a|0)!=-1&&(r[ge+(a<<2)>>2]=Me),h=r[y+120>>2]+(c>>>3&536870908)|0,a=r[h>>2],ta=h,pa=Yi(c)&a,r[ta>>2]=pa,r[ie>>2]=Ie,RB(xr,Ie);break l}h=-1;u:{f:{d:{p:{m:{y:{w:{b:{g:{E:switch(c-1|0){case 2:case 4:if((u|0)==(s|0)||(ie=r[y+8>>2],R=r[ie+12>>2],ge=ne(A,3),we=(c|0)==5,c=ge+(we?2:1)|0,a=c<<2,N=s-4|0,Ie=r[N>>2],r[R+a>>2]=Ie,r[R+(Ie<<2)>>2]=c,$u(ie+24|0),s=r[y+8>>2],R=r[s+24>>2],r[s+28>>2]-R>>2>(ei|0)))break o;Me=r[s>>2],gn=Me+a|0,s=r[ie+28>>2]-r[ie+24>>2]|0,a=(s>>2)-1|0,r[gn>>2]=a,s&&(r[R+(a<<2)>>2]=c),ie=we?ge:ge+2|0,s=Me+(we+ge<<2)|0;v:{if((Ie|0)==-1){r[Me+(ie<<2)>>2]=-1,c=-1;break v}h:{_:{A:{if((Ie>>>0)%3|0){c=Ie-1|0;break A}if(c=Ie+2|0,(c|0)==-1)break _}if(a=r[Me+(c<<2)>>2],r[Me+(ie<<2)>>2]=a,(a|0)==-1)break h;r[R+(a<<2)>>2]=ie;break h}r[Me+(ie<<2)>>2]=-1}if(a=Ie+1|0,a=(a>>>0)%3|0?a:Ie-2|0,c=-1,(a|0)==-1)break v;c=r[Me+(a<<2)>>2]}r[s>>2]=c,r[N>>2]=ge;break g;case 0:if((s|0)==(N|0))break o;f=s-4|0,Pt=r[f>>2],r[U+68>>2]=f,ie=r[U+44>>2];v:{if(!ie)break v;c=r[U+40>>2],we=Xv(ie)>>>0>1,a=A&ie+2147483647;h:{if(!we||(a=A,a>>>0<ie>>>0))break h;a=(A>>>0)%(ie>>>0)|0}if(R=a,a=r[c+(R<<2)>>2],!a||(c=r[a>>2],!c))break v;h:{if(!we){for(we=ie-1|0;;){a=r[c+4>>2];_:{if((a|0)!=(A|0)){if((R|0)==(a&we))break _;break v}if((A|0)==r[c+8>>2])break h}if(c=r[c>>2],!c)break}break v}for(;;){a=r[c+4>>2];_:{if((a|0)!=(A|0)){if(a>>>0>=ie>>>0&&(a=(a>>>0)%(ie>>>0)|0),(a|0)==(R|0))break _;break v}if((A|0)==r[c+8>>2])break h}if(c=r[c>>2],!c)break}break v}if((f|0)!=(Jr|0)){r[f>>2]=r[c+12>>2],r[U+68>>2]=s,f=s;break v}if(R=Jr-N|0,f=R>>2,u=f+1|0,u>>>0>=1073741824)break y;if(a=R>>1,s=R>>>0<2147483644?a>>>0<u>>>0?u:a:1073741823,s){if(s>>>0>=1073741824)break r;u=Te(s<<2)}else u=0;if(a=u+(f<<2)|0,r[a>>2]=r[c+12>>2],Jr=(s<<2)+u|0,f=a+4|0,(R|0)>0&&$e(u,N,R),r[U+72>>2]=Jr,r[U+68>>2]=f,r[U+64>>2]=u,!N)break v;W(N)}if((u|0)==(f|0)||(R=f-4|0,Ie=r[R>>2],c=(Ie|0)==-1,Me=r[y+8>>2],!c&r[r[Me+12>>2]+(Ie<<2)>>2]!=-1)||(ge=r[Me+12>>2],(Pt|0)!=-1&r[ge+(Pt<<2)>>2]!=-1))break w;if(ie=ne(A,3),A=ie+2|0,r[ge+(Ie<<2)>>2]=A,N=A<<2,r[N+ge>>2]=Ie,a=ie+1|0,r[ge+(Pt<<2)>>2]=a,s=a<<2,r[s+ge>>2]=Pt,c)break m;if((Ie>>>0)%3|0){h=Ie-1|0;break d}if(h=Ie+2|0,(h|0)!=-1)break d;Z=r[Me>>2],a=-1;break f;case 6:break E;default:break o}if(a=r[y+8>>2],$u(a+24|0),f=r[y+8>>2],Me=ne(A,3),we=r[a+28>>2]-r[a+24>>2]|0,ie=we>>2,c=ie-1|0,r[r[f>>2]+(Me<<2)>>2]=c,$u(f+24|0),R=Me+1|0,r[r[f>>2]+(R<<2)>>2]=(r[f+28>>2]-r[f+24>>2]>>2)-1,a=r[y+8>>2],$u(a+24|0),f=Me+2|0,r[r[a>>2]+(f<<2)>>2]=(r[a+28>>2]-r[a+24>>2]>>2)-1,a=r[y+8>>2],ge=r[a+24>>2],r[a+28>>2]-ge>>2>(ei|0))break o;E:{v:{if(!we){r[ge+(ie<<2)>>2]=R,c=1;break v}if(r[ge+(c<<2)>>2]=Me,c=0,(we|0)==-4)break v;if(r[ge+(ie<<2)>>2]=R,c=ie+1|0,(c|0)==-1)break E}r[ge+(c<<2)>>2]=f}if((s|0)!=(Jr|0)){r[s>>2]=Me,f=s+4|0,r[U+68>>2]=f;break b}if(c=Jr-N|0,f=c>>2,u=f+1|0,u>>>0>=1073741824)break p;if(a=c>>1,s=c>>>0<2147483644?a>>>0<u>>>0?u:a:1073741823,s){if(s>>>0>=1073741824)break r;u=Te(s<<2)}else u=0;if(a=u+(f<<2)|0,r[a>>2]=Me,Jr=(s<<2)+u|0,f=a+4|0,(c|0)>0&&$e(u,N,c),r[U+72>>2]=Jr,r[U+68>>2]=f,r[U+64>>2]=u,!N)break g;W(N)}N=u}RB(xr,r[f-4>>2]),c=r[y+40>>2];b:{if((c|0)==r[y+36>>2])break b;for(we=T+(A^-1)|0,R=f-4|0;;){if(a=r[c-8>>2],a>>>0>we>>>0)break w;if((a|0)!=(we|0))break b;if(A=I[c-4|0],a=c-12|0,s=r[a>>2],r[y+40>>2]=a,(s|0)<0)break w;c=r[R>>2],r[U+20>>2]=T+(s^-1),a=U+20|0,r[U+88>>2]=a,SB(U,U+40|0,a,U+88|0),s=r[U>>2];g:{if(A&1){if(a=-1,(c|0)==-1)break g;a=c+1|0,a=(a>>>0)%3|0?a:c-2|0;break g}if(a=-1,(c|0)==-1||(a=c-1|0,(c>>>0)%3|0))break g;a=c+2|0}if(r[s+12>>2]=a,c=r[y+40>>2],(c|0)==r[y+36>>2])break}}s=f;break l}if(Z)break o;break c}jt(),Xe()}we=-1,Z=r[Me>>2],r[Z+(ie<<2)>>2]=-1,h=-1;break u}jt(),Xe()}Z=r[Me>>2],a=r[Z+(h<<2)>>2]}if(we=a,r[(ie<<2)+Z>>2]=a,a=Ie+1|0,a=(a>>>0)%3|0?a:Ie-2|0,h=-1,(a|0)==-1)break u;h=r[(a<<2)+Z>>2]}r[s+Z>>2]=h;u:{if((Pt|0)==-1){r[N+Z>>2]=-1,N=-1,h=-1;break u}f:{d:{p:{if((Pt>>>0)%3|0){h=Pt-1|0;break p}if(h=Pt+2|0,(h|0)==-1)break d}if(a=r[(h<<2)+Z>>2],r[N+Z>>2]=a,(a|0)==-1)break f;r[r[Me+24>>2]+(a<<2)>>2]=A;break f}r[N+Z>>2]=-1}if(N=-1,a=Pt+1|0,a=(a>>>0)%3|0?a:Pt-2|0,h=-1,(a|0)==-1)break u;N=r[(a<<2)+Z>>2],h=a}c=r[y+388>>2],s=we<<2,a=c+s|0,A=a,gn=r[a>>2],a=N<<2,r[A>>2]=gn+r[a+c>>2],A=a,a=r[Me+24>>2],c=A+a|0,(we|0)!=-1&&(r[a+s>>2]=r[c>>2]);u:{if((h|0)==-1)break u;for(;;){if(r[(h<<2)+Z>>2]=we,a=h+1|0,a=(a>>>0)%3|0?a:h-2|0,(a|0)==-1||(s=r[ge+(a<<2)>>2],(s|0)==-1))break u;if(a=s+1|0,h=(a>>>0)%3|0?a:s-2|0,(h|0)==-1)break}}r[c>>2]=-1;u:{if(Wt)break u;if((En|0)!=(nr|0)){r[nr>>2]=N,nr=nr+4|0,r[U+28>>2]=nr;break u}f:{if(c=En-ut|0,s=c>>2,m=s+1|0,m>>>0<1073741824){if(a=c>>1,h=c>>>0<2147483644?a>>>0<m>>>0?m:a:1073741823,h){if(h>>>0>=1073741824)break f;m=Te(h<<2)}else m=0;a=m+(s<<2)|0,r[a>>2]=N,En=(h<<2)+m|0,nr=a+4|0,(c|0)>0&&$e(m,ut,c),r[U+32>>2]=En,r[U+28>>2]=nr,r[U+24>>2]=m,ut&&W(ut),ut=m;break u}jt(),Xe()}break r}r[R>>2]=ie,s=f,N=u,RB(xr,ie)}if(Z=(T|0)>(vt|0),(T|0)==(vt|0))break}vt=T}if(h=-1,Z=r[y+8>>2],r[Z+28>>2]-r[Z+24>>2]>>2>(ei|0))break o;if((u|0)!=(f|0)){for(a=y+60|0,ie=y+312|0;;){f=f-4|0,Wt=r[f>>2],r[U+68>>2]=f;c:{l:{u:{f:{if(Ut[y+270>>1]<=513){if(!I[y+364|0])break u;if(c=r[y+360>>2],s=r[y+352>>2]+(c>>>3|0)|0,s>>>0>=Ue[y+356>>2])break l;s=I[s|0],r[y+360>>2]=c+1,s=s>>>(c&7)&1;break f}s=js(ie)}if(!s)break l}if(ge=r[y+8>>2],En=r[ge>>2],((r[ge+4>>2]-En>>2>>>0)/3|0)<=(vt|0))break o;c=-1,N=-1,we=-1,ut=r[ge+24>>2],A=ut,T=-1;u:{if((Wt|0)==-1||(s=Wt+1|0,s=(s>>>0)%3|0?s:Wt-2|0,T=-1,(s|0)==-1))break u;T=r[En+(s<<2)>>2]}R=r[(T<<2)+A>>2],s=-1;u:{if((R|0)==-1||(A=R+1|0,A=(A>>>0)%3|0?A:R-2|0,s=-1,(A|0)==-1))break u;s=A+1|0,c=A,s=(s>>>0)%3|0?s:c-2|0,(s|0)!=-1?s=r[En+(s<<2)>>2]:s=-1}ut=r[ut+(s<<2)>>2],R=-1;u:{if((ut|0)==-1||(A=ut+1|0,A=(A>>>0)%3|0?A:ut-2|0,R=-1,(A|0)==-1))break u;R=A+1|0,R=(R>>>0)%3|0?R:A-2|0,(R|0)!=-1&&(we=r[En+(R<<2)>>2]),R=A}if(Pr=r[ge+12>>2],Me=ne(vt,3),ut=Me<<2,r[Pr+ut>>2]=Wt,r[Pr+(Wt<<2)>>2]=Me,Wt=Me+1|0,A=Wt<<2,r[A+Pr>>2]=c,r[Pr+(c<<2)>>2]=Wt,ge=Me+2|0,c=ge<<2,r[c+Pr>>2]=R,r[Pr+(R<<2)>>2]=ge,r[ut+En>>2]=s,R=A+En|0,r[R>>2]=we,A=c+En|0,r[A>>2]=T,ut=r[y+120>>2],T=Me>>>0>Wt>>>0?-1:s,c=ut+(T>>>3&536870908)|0,s=r[c>>2],ta=c,pa=Yi(T)&s,r[ta>>2]=pa,N=(Wt|0)!=-1?r[R>>2]:N,c=ut+(N>>>3&536870908)|0,s=r[c>>2],ta=c,pa=Yi(N)&s,r[ta>>2]=pa,c=-1,c=(ge|0)!=-1?r[A>>2]:c,T=ut+(c>>>3&536870908)|0,s=r[T>>2],ta=T,pa=Yi(c)&s,r[ta>>2]=pa,c=r[y+64>>2],s=r[y+68>>2],(c|0)==s<<5){if((c+1|0)<0)break a;c>>>0<=1073741822?(c=c+32&-32,s=s<<6,s=c>>>0>s>>>0?c:s):s=2147483647,qd(a,s),c=r[y+64>>2]}if(vt=vt+1|0,r[y+64>>2]=c+1,s=r[y+60>>2]+(c>>>3&536870908)|0,r[s>>2]=r[s>>2]|1<<c,s=r[y+76>>2],(s|0)!=r[y+80>>2]){r[s>>2]=Me,r[y+76>>2]=s+4;break c}if(A=r[y+72>>2],N=s-A|0,c=N>>2,T=c+1|0,T>>>0>=1073741824)break s;if(s=N>>1,T=N>>>0<2147483644?s>>>0<T>>>0?T:s:1073741823,T){if(T>>>0>=1073741824)break r;s=Te(T<<2)}else s=0;if(c=s+(c<<2)|0,r[c>>2]=Me,(N|0)>0&&$e(s,A,N),r[y+80>>2]=s+(T<<2),r[y+76>>2]=c+4,r[y+72>>2]=s,!A)break c;W(A);break c}if(Z=r[y+64>>2],s=r[y+68>>2],(Z|0)==s<<5){if((Z+1|0)<0)break a;Z>>>0<=1073741822?(c=Z+32&-32,s=s<<6,s=c>>>0>s>>>0?c:s):s=2147483647,qd(a,s),Z=r[y+64>>2]}if(r[y+64>>2]=Z+1,c=r[y+60>>2]+(Z>>>3&536870908)|0,s=r[c>>2],ta=c,pa=Yi(Z)&s,r[ta>>2]=pa,s=r[y+76>>2],(s|0)!=r[y+80>>2]){r[s>>2]=Wt,r[y+76>>2]=s+4;break c}if(A=r[y+72>>2],N=s-A|0,c=N>>2,T=c+1|0,T>>>0>=1073741824)break s;if(s=N>>1,T=N>>>0<2147483644?s>>>0<T>>>0?T:s:1073741823,T){if(T>>>0>=1073741824)break r;s=Te(T<<2)}else s=0;if(c=s+(c<<2)|0,r[c>>2]=Wt,(N|0)>0&&$e(s,A,N),r[y+80>>2]=s+(T<<2),r[y+76>>2]=c+4,r[y+72>>2]=s,!A)break c;W(A)}if((u|0)==(f|0))break}Z=r[y+8>>2]}if(((r[Z+4>>2]-r[Z>>2]>>2>>>0)/3|0)!=(vt|0))break o;if(f=r[Z+24>>2],h=r[Z+28>>2]-f>>2,(m|0)==(nr|0)){m=nr;break o}for(a=m;;){if(T=r[a>>2],c=h-1|0,s=(c<<2)+f|0,r[s>>2]==-1)for(;c=h-2|0,h=h-1|0,s=(c<<2)+f|0,r[s>>2]==-1;);if(c>>>0>=T>>>0){if(r[U>>2]=Z,f=r[s>>2],D[U+12|0]=1,r[U+8>>2]=f,r[U+4>>2]=f,(f|0)!=-1)for(;r[r[Z>>2]+(f<<2)>>2]=T,GM(U),Z=r[y+8>>2],f=r[U+8>>2],(f|0)!=-1;);f=r[Z+24>>2],s=f+(c<<2)|0,(T|0)!=-1&&(r[(T<<2)+f>>2]=r[s>>2]),r[s>>2]=-1,A=1<<T,s=r[y+120>>2],T=s+(T>>>3&536870908)|0,vt=s+(c>>>3&536870908)|0,s=1<<c,r[vt>>2]&s?A=A|r[T>>2]:A=r[T>>2]&(A^-1),r[T>>2]=A,r[vt>>2]=r[vt>>2]&(s^-1),h=h-1|0}if(a=a+4|0,(nr|0)==(a|0))break}}if(m&&W(m),a=r[U+48>>2],a)for(;m=r[a>>2],W(a),a=m,!!a;);a=r[U+40>>2],r[U+40>>2]=0,a&&W(a),u&&(r[U+68>>2]=u,W(u)),re=U+96|0;break i}eu(),Xe()}jt(),Xe()}qn(1336),Xe()}if((h|0)==-1)break n;a=r[z+16>>2],m=a+r[z>>2]|0,u=r[z+8>>2],a=u-a|0,u=r[r[y+4>>2]+32>>2],zt[u+38>>1]=Ut[u+38>>1],r[u>>2]=m,r[u+16>>2]=0,r[u+20>>2]=0,r[u+8>>2]=a,r[u+12>>2]=0,u=r[y+4>>2],a=Ut[u+36>>1],m=a<<8|a>>>8,(m&65535)>>>0<=513&&(a=r[u+32>>2],u=ws+r[a+20>>2]|0,f=H+r[a+16>>2]|0,u=f>>>0<H>>>0?u+1|0:u,r[a+16>>2]=f,r[a+20>>2]=u);i:{if(r[y+216>>2]==r[y+220>>2])break i;a=r[y+8>>2],u=r[a>>2],a=r[a+4>>2];r:{if((m&65535)>>>0>=513){if((a|0)==(u|0))break i;f=0;break r}if((a|0)==(u|0))break i;for(f=0;;){if(CB(y,f)){if(f=f+3|0,a=r[y+8>>2],f>>>0<r[a+4>>2]-r[a>>2]>>2>>>0)continue;break i}break}break n}for(;;){if(kB(y,f)){if(f=f+3|0,a=r[y+8>>2],f>>>0<r[a+4>>2]-r[a>>2]>>2>>>0)continue;break i}break}break n}if(jB(Nn),f=r[y+216>>2],(f|0)!=r[y+220>>2])for(m=0;;){if(u=ne(m,144),IB((u+f|0)+4|0,r[y+8>>2]),We=r[xi>>2],a=u+We|0,f=r[a+132>>2],a=r[a+136>>2],(f|0)!=(a|0))for(;NB((u+We|0)+4|0,r[f>>2]),We=r[xi>>2],f=f+4|0,(a|0)!=(f|0););if(TB((u+We|0)+4|0),m=m+1|0,f=r[y+216>>2],!(m>>>0<(r[y+220>>2]-f|0)/144>>>0))break}if(a=r[y+8>>2],Vv(y+184|0,r[a+28>>2]-r[a+24>>2]>>2),We=r[y+216>>2],(We|0)!=r[y+220>>2])for(f=0;a=ne(f,144)+We|0,u=r[a+60>>2]-r[a+56>>2]>>2,m=a+104|0,a=r[y+8>>2],a=r[a+28>>2]-r[a+24>>2]>>2,Vv(m,(a|0)>(u|0)?a:u),f=f+1|0,We=r[y+216>>2],f>>>0<(r[y+220>>2]-We|0)/144>>>0;);We=wB(y,h)}break e}We=0}return re=z- -64|0,We|0}function LSe(a){a=a|0;var s=0,c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0,ie=0,ge=0,we=0,Me=0,Ie=0,We=0,ut=0,vt=0,Pt=0,Wt=0,gn=0,En=0,Nn=0,nr=0,Pr=0,Jr=0,xi=0,ei=0,xr=0;if(A=re+-64|0,re=A,r[a+132>>2]=0,r[a+148>>2]){if(c=r[a+144>>2],c)for(;s=r[c>>2],W(c),c=s,!!s;);c=0,r[a+144>>2]=0,u=r[a+140>>2];e:{if(!u)break e;if(u-1>>>0>=3)for(s=u&-4;T=c<<2,r[T+r[a+136>>2]>>2]=0,r[r[a+136>>2]+(T|4)>>2]=0,r[r[a+136>>2]+(T|8)>>2]=0,r[r[a+136>>2]+(T|12)>>2]=0,c=c+4|0,f=f+4|0,(s|0)!=(f|0););if(s=u&3,!s)break e;for(;r[r[a+136>>2]+(c<<2)>>2]=0,c=c+1|0,vt=vt+1|0,(s|0)!=(vt|0););}r[a+148>>2]=0}e:{t:{c=r[a+4>>2],vt=I[c+36|0],s=vt<<8|I[c+37|0];n:{if(s>>>0>513)break n;if(H=r[c+32>>2],s>>>0<=511){if(s=r[H+20>>2],u=r[H+16>>2],f=u+4|0,s=f>>>0<4?s+1|0:s,T=f,f=r[H+12>>2],T>>>0>Ue[H+8>>2]&(f|0)<=(s|0)|(s|0)>(f|0))break t;f=u+r[H>>2]|0,f=I[f|0]|I[f+1|0]<<8|(I[f+2|0]<<16|I[f+3|0]<<24),r[H+16>>2]=T,r[H+20>>2]=s,r[a+132>>2]=f;break n}if(!ks(1,A,H))break t;c=r[a+4>>2],vt=I[c+36|0],r[a+132>>2]=r[A>>2]}H=r[c+32>>2];n:{i:{r:{if((vt&255)>>>0<=1){if(vt=0,s=r[H+20>>2],u=r[H+16>>2],f=u+4|0,s=f>>>0<4?s+1|0:s,T=f,f=r[H+12>>2],T>>>0>Ue[H+8>>2]&(f|0)<=(s|0)|(s|0)>(f|0))break e;f=u+r[H>>2]|0,f=I[f|0]|I[f+1|0]<<8|(I[f+2|0]<<16|I[f+3|0]<<24),r[A+60>>2]=f,r[H+16>>2]=T,r[H+20>>2]=s,r[a+156>>2]=f,R=a+156|0;break r}if(vt=0,!ks(1,A+60|0,H))break e;if(c=r[a+4>>2],s=I[c+36|0],r[a+156>>2]=r[A+60>>2],R=a+156|0,s>>>0>1)break i}if(u=r[c+32>>2],c=r[u+8>>2],T=r[u+12>>2],y=c,c=r[u+20>>2],f=r[u+16>>2],s=f+4|0,c=s>>>0<4?c+1|0:c,y>>>0<s>>>0&(c|0)>=(T|0)|(c|0)>(T|0))break e;f=f+r[u>>2]|0,f=I[f|0]|I[f+1|0]<<8|(I[f+2|0]<<16|I[f+3|0]<<24),r[A+56>>2]=f,r[u+16>>2]=s,r[u+20>>2]=c;break n}if(!ks(1,A+56|0,r[c+32>>2]))break e;f=r[A+56>>2]}if(f>>>0>1431655765|Ue[R>>2]>ne(f,3)>>>0||(h=r[a+4>>2],s=r[h+32>>2],We=r[s+8>>2],u=We,T=r[s+12>>2],c=r[s+20>>2],R=r[s+16>>2],(T|0)<=(c|0)&R>>>0>=u>>>0|(c|0)>(T|0)))break e;y=r[s>>2],m=I[y+R|0],H=R+1|0,u=H?c:c+1|0,r[s+16>>2]=H,r[s+20>>2]=u;n:{if(I[h+36|0]<=1){if(u=R+5|0,c=u>>>0<5?c+1|0:c,u>>>0>We>>>0&(c|0)>=(T|0)|(c|0)>(T|0))break e;T=y+H|0,R=I[T|0]|I[T+1|0]<<8|(I[T+2|0]<<16|I[T+3|0]<<24),r[A+52>>2]=R,r[s+16>>2]=u,r[s+20>>2]=c;break n}if(!ks(1,A+52|0,s))break e;R=r[A+52>>2]}if(f>>>0<R>>>0|((R>>>0)/3|0)+R>>>0<f>>>0)break e;c=r[a+4>>2],H=r[c+32>>2];n:{if(I[c+36|0]<=1){if(c=r[H+20>>2],u=r[H+16>>2],s=u+4|0,c=s>>>0<4?c+1|0:c,T=s,s=r[H+12>>2],T>>>0>Ue[H+8>>2]&(s|0)<=(c|0)|(s|0)<(c|0))break e;s=u+r[H>>2]|0,s=I[s|0]|I[s+1|0]<<8|(I[s+2|0]<<16|I[s+3|0]<<24),r[A+48>>2]=s,r[H+16>>2]=T,r[H+20>>2]=c;break n}if(!ks(1,A+48|0,H))break e;s=r[A+48>>2]}if(s>>>0>R>>>0||(r[a+28>>2]=r[a+24>>2],c=Te(88),HB(c),T=r[a+8>>2],r[a+8>>2]=c,T&&(Zd(T),!r[a+8>>2]))||(r[a+164>>2]=r[a+160>>2],Hv(a+160|0,f),r[a+176>>2]=r[a+172>>2],Hv(a+172|0,f),r[a- -64>>2]=0,r[a+92>>2]=-1,r[a+84>>2]=-1,r[a+88>>2]=-1,r[a+40>>2]=r[a+36>>2],r[a+52>>2]=r[a+48>>2],r[a+76>>2]=r[a+72>>2],nr=a+216|0,ZB(nr),EB(nr,m),!BB(r[a+8>>2],f,r[a+156>>2]+s|0)))break e;c=r[a+156>>2],D[A|0]=1,hc(a+120|0,s+c|0,A),s=r[a+4>>2],c=Ut[s+36>>1],c=(c<<8|c>>>8)&65535;n:{if(c>>>0<=513){u=r[s+32>>2];i:{if(c>>>0<=511){if(s=r[u+20>>2],f=r[u+16>>2],c=f+4|0,s=c>>>0<4?s+1|0:s,T=c,c=r[u+12>>2],T>>>0>Ue[u+8>>2]&(c|0)<=(s|0)|(s|0)>(c|0))break e;c=f+r[u>>2]|0,f=I[c|0]|I[c+1|0]<<8|(I[c+2|0]<<16|I[c+3|0]<<24),r[u+16>>2]=T,r[u+20>>2]=s;break i}if(!ks(1,A+44|0,u))break e;f=r[A+44>>2]}if(!f||(u=r[r[a+4>>2]+32>>2],T=r[u+8>>2],c=r[u+16>>2],s=T-c|0,c=r[u+12>>2]-(r[u+20>>2]+(c>>>0>T>>>0)|0)|0,s>>>0<f>>>0&(c|0)<=0|(c|0)<0)||(zt[A+38>>1]=0,r[A>>2]=0,r[A+8>>2]=0,r[A+12>>2]=0,r[A+16>>2]=0,r[A+20>>2]=0,r[A+24>>2]=0,r[A+28>>2]=0,D[A+29|0]=0,D[A+30|0]=0,D[A+31|0]=0,D[A+32|0]=0,D[A+33|0]=0,D[A+34|0]=0,D[A+35|0]=0,D[A+36|0]=0,u=r[r[a+4>>2]+32>>2],c=r[u+16>>2],T=(c+r[u>>2]|0)+f|0,s=r[u+8>>2],c=(s-c|0)-f|0,zt[A+38>>1]=Ut[u+38>>1],r[A>>2]=T,r[A+16>>2]=0,r[A+20>>2]=0,r[A+8>>2]=c,r[A+12>>2]=0,H=Mv(a,A),(H|0)==-1))break e;Jr=H>>31;break n}if(H=-1,Jr=-1,(Mv(a,r[s+32>>2])|0)==-1)break e}xi=a+232|0,T=xi,r[T+144>>2]=a,c=r[(pt[r[r[a>>2]+32>>2]](a)|0)+32>>2],f=r[c>>2]+r[c+16>>2]|0,s=r[(pt[r[r[a>>2]+32>>2]](a)|0)+32>>2],c=r[s+8>>2],s=r[s+16>>2],c=c-s|0,ei=T,xr=Ut[r[(pt[r[r[a>>2]+32>>2]](a)|0)+32>>2]+38>>1],zt[ei+38>>1]=xr,r[T>>2]=f,r[T+16>>2]=0,r[T+20>>2]=0,r[T+8>>2]=c,r[T+12>>2]=0,r[a+372>>2]=m,zt[A+38>>1]=0,r[A>>2]=0,r[A+8>>2]=0,r[A+12>>2]=0,r[A+16>>2]=0,r[A+20>>2]=0,r[A+24>>2]=0,r[A+28>>2]=0,D[A+29|0]=0,D[A+30|0]=0,D[A+31|0]=0,D[A+32|0]=0,D[A+33|0]=0,D[A+34|0]=0,D[A+35|0]=0,D[A+36|0]=0;n:{if(!Gee(T,A))break n;s=0,f=0,c=0,We=0,T=0,z=re-96|0,re=z,r[z+72>>2]=0,r[z+64>>2]=0,r[z+68>>2]=0,r[z+48>>2]=0,r[z+52>>2]=0,r[z+40>>2]=0,r[z+44>>2]=0,r[z+56>>2]=1065353216,r[z+32>>2]=0,r[z+24>>2]=0,r[z+28>>2]=0,U=1,m=a,Pr=r[a+124>>2];i:{r:{s:{a:{o:{c:{l:{u:{if((R|0)<=0)break u;for(Wt=r[m+216>>2]!=r[m+220>>2];;){y=We,We=y+1|0;f:{d:{p:{m:{y:{w:{b:{g:{E:{v:{h:{if(!I[m+308|0])break h;_:{A:{if(Me=r[m+296>>2],Z=r[m+304>>2],a=Me+(Z>>>3|0)|0,N=r[m+300>>2],a>>>0>=N>>>0||(u=I[a|0],a=Z+1|0,r[m+304>>2]=a,!(u>>>(Z&7)&1)))break A;ge=a>>>3|0,u=Me+ge|0;S:{if(u>>>0>=N>>>0){u=a,a=0;break S}h=I[u|0],u=Z+2|0,r[m+304>>2]=u,ge=u>>>3|0,a=h>>>(a&7)&1}switch(h=ge+Me|0,h>>>0<N>>>0?(h=I[h|0],r[m+304>>2]=u+1,u=h>>>(u&7)<<1&2):u=0,a=(a|u)<<1,a-1|0){case 0:case 2:case 4:break s;case 5:break v;case 1:case 3:break _;default:break h}}if((c|0)==(f|0)){u=-1;break l}ge=-1,we=r[m+8>>2],Me=r[we+24>>2],N=c-4|0,Pt=r[N>>2],a=-1;A:{if((Pt|0)==-1||(s=Pt+1|0,s=(s>>>0)%3|0?s:Pt-2|0,a=-1,(s|0)==-1))break A;a=r[r[we>>2]+(s<<2)>>2]}s=a,u=r[Me+(s<<2)>>2],(u|0)!=-1&&(a=u+1|0,ge=(a>>>0)%3|0?a:u-2|0),u=r[we+12>>2],ie=ne(y,3),a=ie+1|0,r[u+(Pt<<2)>>2]=a,h=a<<2,r[h+u>>2]=Pt,Z=ie+2|0,r[u+(ge<<2)>>2]=Z,y=Z<<2,r[y+u>>2]=ge,Ie=-1,a=-1;A:{if((Pt|0)==-1)break A;S:{if((Pt>>>0)%3|0){u=Pt-1|0;break S}if(u=Pt+2|0,a=-1,(u|0)==-1)break A}a=r[r[we>>2]+(u<<2)>>2]}A:{if((ge|0)==-1||(u=ge+1|0,u=(u>>>0)%3|0?u:ge-2|0,(u|0)==-1))break A;Ie=r[r[we>>2]+(u<<2)>>2]}if(u=-1,(a|0)==(s|0)|(s|0)==(Ie|0))break l;u=r[we>>2],r[u+(ie<<2)>>2]=s,r[u+h>>2]=Ie,r[u+y>>2]=a,(a|0)!=-1&&(r[Me+(a<<2)>>2]=Z),u=r[m+120>>2]+(s>>>3&536870908)|0,a=r[u>>2],ei=u,xr=Yi(s)&a,r[ei>>2]=xr,r[N>>2]=ie,s=f;break f}if((c|0)==(f|0)){u=-1;break l}if(Ie=r[m+8>>2],s=r[Ie+12>>2],ie=ne(y,3),Me=(a|1)==5,N=ie+(Me?2:1)|0,a=N<<2,h=c-4|0,Pt=r[h>>2],r[s+a>>2]=Pt,r[s+(Pt<<2)>>2]=N,$u(Ie+24|0),u=-1,s=r[m+8>>2],Z=r[s+24>>2],(Pr|0)<r[s+28>>2]-Z>>2)break l;we=r[s>>2],u=we+a|0,s=r[Ie+28>>2]-r[Ie+24>>2]|0,a=(s>>2)-1|0,r[u>>2]=a,s&&(r[Z+(a<<2)>>2]=N),N=Me?ie:ie+2|0,u=we+(ie+Me<<2)|0;_:{if((Pt|0)==-1){r[we+(N<<2)>>2]=-1,s=-1;break _}A:{S:{T:{if((Pt>>>0)%3|0){s=Pt-1|0;break T}if(s=Pt+2|0,(s|0)==-1)break S}if(a=r[we+(s<<2)>>2],r[we+(N<<2)>>2]=a,(a|0)==-1)break A;r[Z+(a<<2)>>2]=N;break A}r[we+(N<<2)>>2]=-1}if(a=Pt+1|0,a=(a>>>0)%3|0?a:Pt-2|0,s=-1,(a|0)==-1)break _;s=r[we+(a<<2)>>2]}r[u>>2]=s,r[h>>2]=ie,s=f;break E}if((c|0)==(f|0)){u=-1;break l}a=c-4|0,we=r[a>>2],r[z+68>>2]=a,N=r[z+44>>2];h:{if(!N){c=a;break h}h=Xv(N)>>>0>1;_:{if(!h){s=y&N+2147483647;break _}if(s=y,N>>>0>s>>>0)break _;s=(y>>>0)%(N>>>0)|0}if(u=r[r[z+40>>2]+(s<<2)>>2],!u){c=a;break h}if(u=r[u>>2],!u){c=a;break h}_:{if(!h){for(N=N-1|0;;){h=r[u+4>>2];A:{if((h|0)!=(y|0)){if((h&N)==(s|0))break A;c=a;break h}if((y|0)==r[u+8>>2])break _}if(u=r[u>>2],!u)break}c=a;break h}for(;;){h=r[u+4>>2];A:{if((h|0)!=(y|0)){if(h>>>0>=N>>>0&&(h=(h>>>0)%(N>>>0)|0),(s|0)==(h|0))break A;c=a;break h}if((y|0)==r[u+8>>2])break _}if(u=r[u>>2],!u)break}c=a;break h}if((a|0)!=(Nn|0)){r[a>>2]=r[u+12>>2],r[z+68>>2]=c;break h}if(h=Nn-f|0,c=h>>2,s=c+1|0,s>>>0>=1073741824)break b;if(a=h>>1,s=h>>>0<2147483644?a>>>0<s>>>0?s:a:1073741823,s){if(s>>>0>=1073741824)break r;ut=Te(s<<2)}else ut=0;if(a=ut+(c<<2)|0,r[a>>2]=r[u+12>>2],Nn=(s<<2)+ut|0,c=a+4|0,(h|0)>0&&$e(ut,f,h),r[z+72>>2]=Nn,r[z+68>>2]=c,r[z+64>>2]=ut,!f)break h;W(f)}if((c|0)==(ut|0)||(h=c-4|0,ie=r[h>>2],s=(ie|0)==-1,Ie=r[m+8>>2],!s&r[r[Ie+12>>2]+(ie<<2)>>2]!=-1)||(Z=r[Ie+12>>2],(we|0)!=-1&r[Z+(we<<2)>>2]!=-1))break g;if(Me=ne(y,3),y=Me+2|0,r[Z+(ie<<2)>>2]=y,N=y<<2,r[N+Z>>2]=ie,a=Me+1|0,r[Z+(we<<2)>>2]=a,f=a<<2,r[f+Z>>2]=we,s)break w;if((ie>>>0)%3|0){U=ie-1|0;break m}if(U=ie+2|0,(U|0)!=-1)break m;ge=r[Ie>>2],s=-1;break p}if(a=r[m+8>>2],$u(a+24|0),u=-1,h=r[m+8>>2],we=ne(y,3),Z=r[a+28>>2]-r[a+24>>2]|0,Ie=Z>>2,N=Ie-1|0,r[r[h>>2]+(we<<2)>>2]=N,$u(h+24|0),Me=we+1|0,r[r[h>>2]+(Me<<2)>>2]=(r[h+28>>2]-r[h+24>>2]>>2)-1,a=r[m+8>>2],$u(a+24|0),h=we+2|0,r[r[a>>2]+(h<<2)>>2]=(r[a+28>>2]-r[a+24>>2]>>2)-1,a=r[m+8>>2],ie=r[a+24>>2],(Pr|0)<r[a+28>>2]-ie>>2)break l;v:{h:{if(!Z){r[ie+(Ie<<2)>>2]=Me,u=1;break h}if(r[ie+(N<<2)>>2]=we,u=0,(Z|0)==-4)break h;if(r[ie+(Ie<<2)>>2]=Me,u=Ie+1|0,(u|0)==-1)break v}r[ie+(u<<2)>>2]=h}if((c|0)!=(Nn|0)){r[c>>2]=we,c=c+4|0,r[z+68>>2]=c;break E}if(u=c-s|0,c=u>>2,ut=c+1|0,ut>>>0>=1073741824)break y;if(a=u>>1,f=u>>>0<2147483644?a>>>0<ut>>>0?ut:a:1073741823,f){if(f>>>0>=1073741824)break r;ut=Te(f<<2)}else ut=0;a=ut+(c<<2)|0,r[a>>2]=we,Nn=(f<<2)+ut|0,c=a+4|0,(u|0)>0&&$e(ut,s,u),r[z+72>>2]=Nn,r[z+68>>2]=c,r[z+64>>2]=ut,s&&W(s),f=ut,s=f}if(u=r[m+40>>2],(u|0)==r[m+36>>2])break f;for(N=(y^-1)+R|0,h=c-4|0;;){if(a=r[u-8>>2],a>>>0>N>>>0)break g;if((a|0)!=(N|0))break f;if(y=I[u-4|0],a=u-12|0,u=r[a>>2],r[m+40>>2]=a,(u|0)<0)break g;Me=r[h>>2],r[z+20>>2]=(u^-1)+R,a=z+20|0,r[z+88>>2]=a,SB(z,z+40|0,a,z+88|0),u=r[z>>2];E:{if(y&1){if(a=-1,(Me|0)==-1)break E;a=Me+1|0,a=(a>>>0)%3|0?a:Me-2|0;break E}if(a=-1,(Me|0)==-1||(a=Me-1|0,(Me>>>0)%3|0))break E;a=Me+2|0}if(r[u+12>>2]=a,u=r[m+40>>2],(u|0)==r[m+36>>2])break}break f}if(u=-1,U&1)break l;break u}jt(),Xe()}s=-1,ge=r[Ie>>2],r[ge+(Me<<2)>>2]=-1,u=-1;break d}jt(),Xe()}ge=r[Ie>>2],s=r[ge+(U<<2)>>2]}if(r[(Me<<2)+ge>>2]=s,a=ie+1|0,a=(a>>>0)%3|0?a:ie-2|0,u=-1,(a|0)==-1)break d;u=r[(a<<2)+ge>>2]}r[f+ge>>2]=u;d:{if((we|0)==-1){r[N+ge>>2]=-1,U=-1,u=-1;break d}p:{m:{y:{if((we>>>0)%3|0){u=we-1|0;break y}if(u=we+2|0,(u|0)==-1)break m}if(a=r[(u<<2)+ge>>2],r[N+ge>>2]=a,(a|0)==-1)break p;r[r[Ie+24>>2]+(a<<2)>>2]=y;break p}r[N+ge>>2]=-1}if(U=-1,a=we+1|0,a=(a>>>0)%3|0?a:we-2|0,u=-1,(a|0)==-1)break d;U=r[(a<<2)+ge>>2],u=a}a=r[Ie+24>>2],y=a+(U<<2)|0,(s|0)!=-1&&(r[a+(s<<2)>>2]=r[y>>2]);d:{if((u|0)==-1)break d;for(;;){if(r[(u<<2)+ge>>2]=s,a=u+1|0,a=(a>>>0)%3|0?a:u-2|0,(a|0)==-1||(f=r[Z+(a<<2)>>2],(f|0)==-1))break d;if(a=f+1|0,u=(a>>>0)%3|0?a:f-2|0,(u|0)==-1)break}}r[y>>2]=-1;d:{if(Wt)break d;if((gn|0)!=(En|0)){r[En>>2]=U,En=En+4|0,r[z+28>>2]=En;break d}p:{if(u=gn-T|0,s=u>>2,f=s+1|0,f>>>0<1073741824){if(a=u>>1,f=u>>>0<2147483644?a>>>0<f>>>0?f:a:1073741823,f){if(f>>>0>=1073741824)break p;a=Te(f<<2)}else a=0;s=a+(s<<2)|0,r[s>>2]=U,gn=a+(f<<2)|0,En=s+4|0,(u|0)>0&&$e(a,T,u),r[z+32>>2]=gn,r[z+28>>2]=En,r[z+24>>2]=a,T&&W(T),T=a;break d}jt(),Xe()}break r}r[h>>2]=Me,f=ut,s=f}if(U=(R|0)>(We|0),(R|0)==(We|0))break}We=R}if(u=-1,U=r[m+8>>2],(Pr|0)<r[U+28>>2]-r[U+24>>2]>>2)break l;if((c|0)!=(ut|0)){for(f=m+60|0,Me=m+312|0;;){c=c-4|0,Z=r[c>>2],r[z+68>>2]=c;u:{f:{d:{p:{if(Ut[m+270>>1]<=513){if(!I[m+364|0])break d;if(s=r[m+360>>2],a=r[m+352>>2]+(s>>>3|0)|0,a>>>0>=Ue[m+356>>2])break f;a=I[a|0],r[m+360>>2]=s+1,a=a>>>(s&7)&1;break p}a=js(Me)}if(!a)break f}if(Wt=r[m+8>>2],ie=r[Wt>>2],((r[Wt+4>>2]-ie>>2>>>0)/3|0)<=(We|0))break l;a=-1,s=-1,N=r[Wt+24>>2],y=-1;d:{if((Z|0)==-1||(h=Z+1|0,h=(h>>>0)%3|0?h:Z-2|0,y=-1,(h|0)==-1))break d;y=r[ie+(h<<2)>>2]}R=r[N+(y<<2)>>2];d:{if((R|0)==-1||(h=R+1|0,h=(h>>>0)%3|0?h:R-2|0,(h|0)==-1))break d;a=h+1|0,a=(a>>>0)%3|0?a:h-2|0,(a|0)!=-1&&(s=r[ie+(a<<2)>>2]),a=h}U=-1,ge=-1,N=r[N+(s<<2)>>2],R=-1;d:{if((N|0)==-1||(h=N+1|0,h=(h>>>0)%3|0?h:N-2|0,R=-1,(h|0)==-1))break d;R=h+1|0,R=(R>>>0)%3|0?R:h-2|0,(R|0)!=-1&&(ge=r[ie+(R<<2)>>2]),R=h}if(gn=r[Wt+12>>2],Ie=ne(We,3),N=Ie<<2,r[gn+N>>2]=Z,r[gn+(Z<<2)>>2]=Ie,Z=Ie+1|0,h=Z<<2,r[h+gn>>2]=a,r[gn+(a<<2)>>2]=Z,Wt=Ie+2|0,a=Wt<<2,r[a+gn>>2]=R,r[gn+(R<<2)>>2]=Wt,r[N+ie>>2]=s,R=h+ie|0,r[R>>2]=ge,h=a+ie|0,r[h>>2]=y,N=r[m+120>>2],y=Z>>>0<Ie>>>0?-1:s,s=N+(y>>>3&536870908)|0,a=r[s>>2],ei=s,xr=Yi(y)&a,r[ei>>2]=xr,U=(Z|0)!=-1?r[R>>2]:U,s=N+(U>>>3&536870908)|0,a=r[s>>2],ei=s,xr=Yi(U)&a,r[ei>>2]=xr,U=-1,U=(Wt|0)!=-1?r[h>>2]:U,s=N+(U>>>3&536870908)|0,a=r[s>>2],ei=s,xr=Yi(U)&a,r[ei>>2]=xr,U=r[m+64>>2],a=r[m+68>>2],(U|0)==a<<5){if((U+1|0)<0)break c;U>>>0<=1073741822?(s=U+32&-32,a=a<<6,a=a>>>0<s>>>0?s:a):a=2147483647,qd(f,a),U=r[m+64>>2]}if(We=We+1|0,r[m+64>>2]=U+1,a=r[m+60>>2]+(U>>>3&536870908)|0,r[a>>2]=r[a>>2]|1<<U,a=r[m+76>>2],(a|0)!=r[m+80>>2]){r[a>>2]=Ie,r[m+76>>2]=a+4;break u}if(h=r[m+72>>2],R=a-h|0,s=R>>2,y=s+1|0,y>>>0>=1073741824)break o;if(a=R>>1,y=R>>>0<2147483644?a>>>0<y>>>0?y:a:1073741823,y){if(y>>>0>=1073741824)break r;a=Te(y<<2)}else a=0;if(s=a+(s<<2)|0,r[s>>2]=Ie,(R|0)>0&&$e(a,h,R),r[m+80>>2]=a+(y<<2),r[m+76>>2]=s+4,r[m+72>>2]=a,!h)break u;W(h);break u}if(a=r[m+64>>2],y=r[m+68>>2],(a|0)==y<<5){if((a+1|0)<0)break c;a>>>0<=1073741822?(s=a+32&-32,a=y<<6,a=a>>>0<s>>>0?s:a):a=2147483647,qd(f,a),a=r[m+64>>2]}if(r[m+64>>2]=a+1,y=r[m+60>>2]+(a>>>3&536870908)|0,s=r[y>>2],ei=y,xr=Yi(a)&s,r[ei>>2]=xr,a=r[m+76>>2],(a|0)!=r[m+80>>2]){r[a>>2]=Z,r[m+76>>2]=a+4;break u}if(h=r[m+72>>2],R=a-h|0,s=R>>2,y=s+1|0,y>>>0>=1073741824)break o;if(a=R>>1,y=R>>>0<2147483644?a>>>0<y>>>0?y:a:1073741823,y){if(y>>>0>=1073741824)break a;a=Te(y<<2)}else a=0;if(s=a+(s<<2)|0,r[s>>2]=Z,(R|0)>0&&$e(a,h,R),r[m+80>>2]=a+(y<<2),r[m+76>>2]=s+4,r[m+72>>2]=a,!h)break u;W(h)}if((c|0)==(ut|0))break}U=r[m+8>>2]}if(((r[U+4>>2]-r[U>>2]>>2>>>0)/3|0)!=(We|0))break l;if(We=r[U+24>>2],u=r[U+28>>2]-We>>2,(T|0)==(En|0)){T=En;break l}for(s=T;;){if(f=r[s>>2],c=u-1|0,ge=(c<<2)+We|0,r[ge>>2]==-1)for(;c=u-2|0,u=u-1|0,ge=(c<<2)+We|0,r[ge>>2]==-1;);if(c>>>0>=f>>>0){if(r[z>>2]=U,We=r[ge>>2],D[z+12|0]=1,r[z+8>>2]=We,r[z+4>>2]=We,(We|0)!=-1)for(;r[r[U>>2]+(We<<2)>>2]=f,GM(z),U=r[m+8>>2],We=r[z+8>>2],(We|0)!=-1;);We=r[U+24>>2],a=We+(c<<2)|0,(f|0)!=-1&&(r[(f<<2)+We>>2]=r[a>>2]),r[a>>2]=-1,h=1<<f,a=r[m+120>>2],f=a+(f>>>3&536870908)|0,y=a+(c>>>3&536870908)|0,a=1<<c,r[y>>2]&a?c=h|r[f>>2]:c=r[f>>2]&(h^-1),r[f>>2]=c,r[y>>2]=r[y>>2]&(a^-1),u=u-1|0}if(s=s+4|0,(En|0)==(s|0))break}}if(T&&W(T),a=r[z+48>>2],a)for(;c=r[a>>2],W(a),a=c,!!a;);a=r[z+40>>2],r[z+40>>2]=0,a&&W(a),ut&&(r[z+68>>2]=ut,W(ut)),re=z+96|0;break i}eu(),Xe()}jt(),Xe()}qn(1336)}Xe()}qn(1336),Xe()}if((u|0)==-1)break n;a=r[A+16>>2],s=a+r[A>>2]|0,c=r[A+8>>2],a=c-a|0,c=r[r[m+4>>2]+32>>2],zt[c+38>>1]=Ut[c+38>>1],r[c>>2]=s,r[c+16>>2]=0,r[c+20>>2]=0,r[c+8>>2]=a,r[c+12>>2]=0,s=r[m+4>>2],a=Ut[s+36>>1],c=a<<8|a>>>8,(c&65535)>>>0<=513&&(a=r[s+32>>2],s=Jr+r[a+20>>2]|0,ut=H+r[a+16>>2]|0,s=ut>>>0<H>>>0?s+1|0:s,r[a+16>>2]=ut,r[a+20>>2]=s);i:{if(r[m+216>>2]==r[m+220>>2])break i;a=r[m+8>>2],s=r[a>>2],a=r[a+4>>2];r:{if((c&65535)>>>0>=513){if((a|0)==(s|0))break i;c=0;break r}if((a|0)==(s|0))break i;for(c=0;;){if(CB(m,c)){if(c=c+3|0,a=r[m+8>>2],c>>>0<r[a+4>>2]-r[a>>2]>>2>>>0)continue;break i}break}break n}for(;;){if(kB(m,c)){if(c=c+3|0,a=r[m+8>>2],c>>>0<r[a+4>>2]-r[a>>2]>>2>>>0)continue;break i}break}break n}if(jB(xi),c=r[m+216>>2],(c|0)!=r[m+220>>2])for(f=0;;){if(s=ne(f,144),IB((s+c|0)+4|0,r[m+8>>2]),vt=r[nr>>2],a=s+vt|0,c=r[a+132>>2],a=r[a+136>>2],(c|0)!=(a|0))for(;NB((s+vt|0)+4|0,r[c>>2]),vt=r[nr>>2],c=c+4|0,(a|0)!=(c|0););if(TB((s+vt|0)+4|0),f=f+1|0,c=r[m+216>>2],!(f>>>0<(r[m+220>>2]-c|0)/144>>>0))break}if(a=r[m+8>>2],Vv(m+184|0,r[a+28>>2]-r[a+24>>2]>>2),vt=r[m+216>>2],(vt|0)!=r[m+220>>2])for(c=0;a=ne(c,144)+vt|0,s=r[a+60>>2]-r[a+56>>2]>>2,f=a+104|0,a=r[m+8>>2],a=r[a+28>>2]-r[a+24>>2]>>2,Vv(f,(a|0)>(s|0)?a:s),c=c+1|0,vt=r[m+216>>2],c>>>0<(r[m+220>>2]-vt|0)/144>>>0;);vt=wB(m,u)}break e}vt=0}return re=A- -64|0,vt|0}function zSe(a,s,c,u,f,h){a=a|0,s=s|0,c=c|0,u=u|0,f=f|0,h=h|0;var m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0,ie=0,ge=0,we=0,Me=0,Ie=0,We=0;e:{t:{n:{i:{r:switch(u-1|0){case 0:a=0,z=re-16|0,re=z,T=r[s+80>>2],m=D[c+24|0];s:{if((ne(T,m)|0)!=(f|0))break s;if(s=r[c+28>>2]!=1,a=I[c+84|0],!(s|!a)){$e(h,r[r[c>>2]>>2]+r[c+48>>2]|0,f),a=1;break s}if(u=0,r[z+8>>2]=0,r[z>>2]=0,r[z+4>>2]=0,m){if((m|0)<0)break i;y=Te(m),r[z>>2]=y,Ct(y,0,m)}a:{o:{if(!T)break o;if(!s){if(m)for(U=m&-4,N=m&3,s=0,H=m-1>>>0<3;;){if(f=r[r[c>>2]>>2],Z=r[c+40>>2],a=r[c+48>>2]+rt(Z,r[c+44>>2],a&255?u:r[r[c+68>>2]+(u<<2)>>2],0)|0,m=$e(y,f+a|0,Z),f=0,a=0,A=0,!H)for(;R=s+h|0,D[R|0]=I[a+m|0],D[R+1|0]=I[m+(a|1)|0],D[R+2|0]=I[m+(a|2)|0],D[R+3|0]=I[m+(a|3)|0],a=a+4|0,s=s+4|0,A=A+4|0,(U|0)!=(A|0););if(N)for(;D[s+h|0]=I[a+m|0],a=a+1|0,s=s+1|0,f=f+1|0,(N|0)!=(f|0););if(a=1,u=u+1|0,(T|0)==(u|0))break a;a=I[c+84|0]}if(N=r[c>>2],f=r[c+48>>2],H=r[c+68>>2],h=r[c+44>>2],c=r[c+40>>2],Z=c,s=0,(T|0)!=1)for(ie=T&-2,we=a&255;m=s|1,U=r[N>>2],R=rt(c,h,we?s:r[H+(s<<2)>>2],0)+f|0,R=$e(y,U+R|0,Z),ge=r[N>>2],we||(m=r[H+(m<<2)>>2]),m=rt(c,h,m,0)+f|0,$e(R,m+ge|0,Z),s=s+2|0,A=A+2|0,(ie|0)!=(A|0););if(!(T&1))break o;A=r[N>>2],a&255||(s=r[H+(s<<2)>>2]),a=rt(c,h,s,0)+f|0,$e(y,a+A|0,Z);break o}if(!m)for(s=0,u=1;;){if(!RM(c,a&255?s:r[r[c+68>>2]+(s<<2)>>2],D[c+24|0],y)||(s=s+1|0,u=T>>>0>s>>>0,(s|0)==(T|0)))break o;a=I[c+84|0]}for(N=m&-4,R=m&3,s=0,U=m-1>>>0<3,u=1;;){if(!RM(c,a&255?A:r[r[c+68>>2]+(A<<2)>>2],D[c+24|0],y))break o;if(u=0,a=0,f=0,!U)for(;m=s+h|0,D[m|0]=I[a+y|0],D[m+1|0]=I[(a|1)+y|0],D[m+2|0]=I[(a|2)+y|0],D[m+3|0]=I[(a|3)+y|0],a=a+4|0,s=s+4|0,f=f+4|0,(N|0)!=(f|0););if(R)for(;D[s+h|0]=I[a+y|0],a=a+1|0,s=s+1|0,u=u+1|0,(R|0)!=(u|0););if(A=A+1|0,(T|0)!=(A|0)){u=A>>>0<T>>>0,a=I[c+84|0];continue}break}a=A>>>0>=T>>>0;break a}if(a=u^1,!y)break s}W(y)}break n;case 2:a=0,z=re-16|0,re=z,u=D[c+24|0],m=u<<1,T=r[s+80>>2];s:{if((ne(m,T)|0)!=(f|0))break s;if(s=r[c+28>>2]!=3,a=I[c+84|0],!(s|!a)){$e(h,r[r[c>>2]>>2]+r[c+48>>2]|0,f),a=1;break s}if(r[z+8>>2]=0,r[z>>2]=0,r[z+4>>2]=0,u){if((u|0)<0)break i;y=Te(m),r[z>>2]=y,Ct(y,0,u<<1)}a:{o:{if(!T)break o;if(!s){if(U=r[c>>2],f=r[c+48>>2],Z=r[c+68>>2],m=r[c+44>>2],R=r[c+40>>2],we=R,u){for(Me=u&-4,H=u&3,s=0,Ie=a&255,We=u-1>>>0<3,u=0;;){if(c=r[U>>2],a=rt(R,m,Ie?u:r[Z+(u<<2)>>2],0)+f|0,N=$e(y,c+a|0,we),A=0,a=0,c=0,!We)for(;ie=(s<<1)+h|0,ge=a<<1,zt[ie>>1]=Ut[ge+N>>1],zt[ie+2>>1]=Ut[N+(ge|2)>>1],zt[ie+4>>1]=Ut[N+(ge|4)>>1],zt[ie+6>>1]=Ut[N+(ge|6)>>1],a=a+4|0,s=s+4|0,c=c+4|0,(Me|0)!=(c|0););if(H)for(;zt[(s<<1)+h>>1]=Ut[N+(a<<1)>>1],a=a+1|0,s=s+1|0,A=A+1|0,(H|0)!=(A|0););if(a=1,u=u+1|0,(T|0)==(u|0))break}break a}if(s=0,(T|0)!=1)for(ie=T&-2,N=a&255,u=0;c=s|1,H=r[U>>2],h=rt(R,m,N?s:r[Z+(s<<2)>>2],0)+f|0,h=$e(y,H+h|0,we),ge=r[U>>2],N||(c=r[Z+(c<<2)>>2]),c=rt(R,m,c,0)+f|0,$e(h,c+ge|0,we),s=s+2|0,u=u+2|0,(ie|0)!=(u|0););if(!(T&1))break o;c=r[U>>2],a&255||(s=r[Z+(s<<2)>>2]),a=rt(R,m,s,0)+f|0,$e(y,a+c|0,we);break o}if(!u)for(s=0,A=1;;){if(!OM(c,a&255?s:r[r[c+68>>2]+(s<<2)>>2],D[c+24|0],y)||(s=s+1|0,A=T>>>0>s>>>0,(s|0)==(T|0)))break o;a=I[c+84|0]}for(U=u&-4,N=u&3,s=0,H=u-1>>>0<3,A=1,u=0;;){if(!OM(c,a&255?u:r[r[c+68>>2]+(u<<2)>>2],D[c+24|0],y))break o;if(f=0,a=0,A=0,!H)for(;m=(s<<1)+h|0,R=a<<1,zt[m>>1]=Ut[R+y>>1],zt[m+2>>1]=Ut[(R|2)+y>>1],zt[m+4>>1]=Ut[(R|4)+y>>1],zt[m+6>>1]=Ut[(R|6)+y>>1],a=a+4|0,s=s+4|0,A=A+4|0,(U|0)!=(A|0););if(N)for(;zt[(s<<1)+h>>1]=Ut[(a<<1)+y>>1],a=a+1|0,s=s+1|0,f=f+1|0,(N|0)!=(f|0););if(u=u+1|0,(T|0)!=(u|0)){A=u>>>0<T>>>0,a=I[c+84|0];continue}break}a=u>>>0>=T>>>0;break a}if(a=!A,!y)break s}W(y)}break t;case 4:a=0,z=re-16|0,re=z,u=D[c+24|0],m=u<<2,T=r[s+80>>2];s:{if((ne(m,T)|0)!=(f|0))break s;if(s=r[c+28>>2]!=5,a=I[c+84|0],!(s|!a)){$e(h,r[r[c>>2]>>2]+r[c+48>>2]|0,f),a=1;break s}if(r[z+8>>2]=0,r[z>>2]=0,r[z+4>>2]=0,u){if((u|0)<0)break i;y=Te(m),r[z>>2]=y,Ct(y,0,u<<2)}a:{o:{if(!T)break o;if(!s){if(U=r[c>>2],f=r[c+48>>2],Z=r[c+68>>2],m=r[c+44>>2],R=r[c+40>>2],we=R,u){for(Me=u&-4,H=u&3,s=0,Ie=a&255,We=u-1>>>0<3,u=0;;){if(c=r[U>>2],a=rt(R,m,Ie?u:r[Z+(u<<2)>>2],0)+f|0,N=$e(y,c+a|0,we),A=0,a=0,c=0,!We)for(;ie=(s<<2)+h|0,ge=a<<2,r[ie>>2]=r[ge+N>>2],r[ie+4>>2]=r[N+(ge|4)>>2],r[ie+8>>2]=r[N+(ge|8)>>2],r[ie+12>>2]=r[N+(ge|12)>>2],a=a+4|0,s=s+4|0,c=c+4|0,(Me|0)!=(c|0););if(H)for(;r[(s<<2)+h>>2]=r[N+(a<<2)>>2],a=a+1|0,s=s+1|0,A=A+1|0,(H|0)!=(A|0););if(a=1,u=u+1|0,(T|0)==(u|0))break}break a}if(s=0,(T|0)!=1)for(ie=T&-2,N=a&255,u=0;c=s|1,H=r[U>>2],h=rt(R,m,N?s:r[Z+(s<<2)>>2],0)+f|0,h=$e(y,H+h|0,we),ge=r[U>>2],N||(c=r[Z+(c<<2)>>2]),c=rt(R,m,c,0)+f|0,$e(h,c+ge|0,we),s=s+2|0,u=u+2|0,(ie|0)!=(u|0););if(!(T&1))break o;c=r[U>>2],a&255||(s=r[Z+(s<<2)>>2]),a=rt(R,m,s,0)+f|0,$e(y,a+c|0,we);break o}if(!u)for(s=0,A=1;;){if(!LM(c,a&255?s:r[r[c+68>>2]+(s<<2)>>2],D[c+24|0],y)||(s=s+1|0,A=T>>>0>s>>>0,(s|0)==(T|0)))break o;a=I[c+84|0]}for(U=u&-4,N=u&3,s=0,H=u-1>>>0<3,A=1,u=0;;){if(!LM(c,a&255?u:r[r[c+68>>2]+(u<<2)>>2],D[c+24|0],y))break o;if(f=0,a=0,A=0,!H)for(;m=(s<<2)+h|0,R=a<<2,r[m>>2]=r[R+y>>2],r[m+4>>2]=r[(R|4)+y>>2],r[m+8>>2]=r[(R|8)+y>>2],r[m+12>>2]=r[(R|12)+y>>2],a=a+4|0,s=s+4|0,A=A+4|0,(U|0)!=(A|0););if(N)for(;r[(s<<2)+h>>2]=r[(a<<2)+y>>2],a=a+1|0,s=s+1|0,f=f+1|0,(N|0)!=(f|0););if(u=u+1|0,(T|0)!=(u|0)){A=u>>>0<T>>>0,a=I[c+84|0];continue}break}a=u>>>0>=T>>>0;break a}if(a=!A,!y)break s}W(y)}break t;case 1:a=0,z=re-16|0,re=z,T=r[s+80>>2],m=D[c+24|0];s:{if((ne(T,m)|0)!=(f|0))break s;if(s=r[c+28>>2]!=2,a=I[c+84|0],!(s|!a)){$e(h,r[r[c>>2]>>2]+r[c+48>>2]|0,f),a=1;break s}if(u=0,r[z+8>>2]=0,r[z>>2]=0,r[z+4>>2]=0,m){if((m|0)<0)break i;y=Te(m),r[z>>2]=y,Ct(y,0,m)}a:{o:{if(!T)break o;if(!s){if(m)for(U=m&-4,N=m&3,s=0,H=m-1>>>0<3;;){if(f=r[r[c>>2]>>2],Z=r[c+40>>2],a=r[c+48>>2]+rt(Z,r[c+44>>2],a&255?u:r[r[c+68>>2]+(u<<2)>>2],0)|0,m=$e(y,f+a|0,Z),f=0,a=0,A=0,!H)for(;R=s+h|0,D[R|0]=I[a+m|0],D[R+1|0]=I[m+(a|1)|0],D[R+2|0]=I[m+(a|2)|0],D[R+3|0]=I[m+(a|3)|0],a=a+4|0,s=s+4|0,A=A+4|0,(U|0)!=(A|0););if(N)for(;D[s+h|0]=I[a+m|0],a=a+1|0,s=s+1|0,f=f+1|0,(N|0)!=(f|0););if(a=1,u=u+1|0,(T|0)==(u|0))break a;a=I[c+84|0]}if(N=r[c>>2],f=r[c+48>>2],H=r[c+68>>2],h=r[c+44>>2],c=r[c+40>>2],Z=c,s=0,(T|0)!=1)for(ie=T&-2,we=a&255;m=s|1,U=r[N>>2],R=rt(c,h,we?s:r[H+(s<<2)>>2],0)+f|0,R=$e(y,U+R|0,Z),ge=r[N>>2],we||(m=r[H+(m<<2)>>2]),m=rt(c,h,m,0)+f|0,$e(R,m+ge|0,Z),s=s+2|0,A=A+2|0,(ie|0)!=(A|0););if(!(T&1))break o;A=r[N>>2],a&255||(s=r[H+(s<<2)>>2]),a=rt(c,h,s,0)+f|0,$e(y,a+A|0,Z);break o}if(!m)for(s=0,u=1;;){if(!DM(c,a&255?s:r[r[c+68>>2]+(s<<2)>>2],D[c+24|0],y)||(s=s+1|0,u=T>>>0>s>>>0,(s|0)==(T|0)))break o;a=I[c+84|0]}for(N=m&-4,R=m&3,s=0,U=m-1>>>0<3,u=1;;){if(!DM(c,a&255?A:r[r[c+68>>2]+(A<<2)>>2],D[c+24|0],y))break o;if(u=0,a=0,f=0,!U)for(;m=s+h|0,D[m|0]=I[a+y|0],D[m+1|0]=I[(a|1)+y|0],D[m+2|0]=I[(a|2)+y|0],D[m+3|0]=I[(a|3)+y|0],a=a+4|0,s=s+4|0,f=f+4|0,(N|0)!=(f|0););if(R)for(;D[s+h|0]=I[a+y|0],a=a+1|0,s=s+1|0,u=u+1|0,(R|0)!=(u|0););if(A=A+1|0,(T|0)!=(A|0)){u=A>>>0<T>>>0,a=I[c+84|0];continue}break}a=A>>>0>=T>>>0;break a}if(a=u^1,!y)break s}W(y)}break n;case 3:a=0,z=re-16|0,re=z,u=D[c+24|0],m=u<<1,T=r[s+80>>2];s:{if((ne(m,T)|0)!=(f|0))break s;if(s=r[c+28>>2]!=4,a=I[c+84|0],!(s|!a)){$e(h,r[r[c>>2]>>2]+r[c+48>>2]|0,f),a=1;break s}if(r[z+8>>2]=0,r[z>>2]=0,r[z+4>>2]=0,u){if((u|0)<0)break i;y=Te(m),r[z>>2]=y,Ct(y,0,u<<1)}a:{o:{if(!T)break o;if(!s){if(U=r[c>>2],f=r[c+48>>2],Z=r[c+68>>2],m=r[c+44>>2],R=r[c+40>>2],we=R,u){for(Me=u&-4,H=u&3,s=0,Ie=a&255,We=u-1>>>0<3,u=0;;){if(c=r[U>>2],a=rt(R,m,Ie?u:r[Z+(u<<2)>>2],0)+f|0,N=$e(y,c+a|0,we),A=0,a=0,c=0,!We)for(;ie=(s<<1)+h|0,ge=a<<1,zt[ie>>1]=Ut[ge+N>>1],zt[ie+2>>1]=Ut[N+(ge|2)>>1],zt[ie+4>>1]=Ut[N+(ge|4)>>1],zt[ie+6>>1]=Ut[N+(ge|6)>>1],a=a+4|0,s=s+4|0,c=c+4|0,(Me|0)!=(c|0););if(H)for(;zt[(s<<1)+h>>1]=Ut[N+(a<<1)>>1],a=a+1|0,s=s+1|0,A=A+1|0,(H|0)!=(A|0););if(a=1,u=u+1|0,(T|0)==(u|0))break}break a}if(s=0,(T|0)!=1)for(ie=T&-2,N=a&255,u=0;c=s|1,H=r[U>>2],h=rt(R,m,N?s:r[Z+(s<<2)>>2],0)+f|0,h=$e(y,H+h|0,we),ge=r[U>>2],N||(c=r[Z+(c<<2)>>2]),c=rt(R,m,c,0)+f|0,$e(h,c+ge|0,we),s=s+2|0,u=u+2|0,(ie|0)!=(u|0););if(!(T&1))break o;c=r[U>>2],a&255||(s=r[Z+(s<<2)>>2]),a=rt(R,m,s,0)+f|0,$e(y,a+c|0,we);break o}if(!u)for(s=0,A=1;;){if(!IM(c,a&255?s:r[r[c+68>>2]+(s<<2)>>2],D[c+24|0],y)||(s=s+1|0,A=T>>>0>s>>>0,(s|0)==(T|0)))break o;a=I[c+84|0]}for(U=u&-4,N=u&3,s=0,H=u-1>>>0<3,A=1,u=0;;){if(!IM(c,a&255?u:r[r[c+68>>2]+(u<<2)>>2],D[c+24|0],y))break o;if(f=0,a=0,A=0,!H)for(;m=(s<<1)+h|0,R=a<<1,zt[m>>1]=Ut[R+y>>1],zt[m+2>>1]=Ut[(R|2)+y>>1],zt[m+4>>1]=Ut[(R|4)+y>>1],zt[m+6>>1]=Ut[(R|6)+y>>1],a=a+4|0,s=s+4|0,A=A+4|0,(U|0)!=(A|0););if(N)for(;zt[(s<<1)+h>>1]=Ut[(a<<1)+y>>1],a=a+1|0,s=s+1|0,f=f+1|0,(N|0)!=(f|0););if(u=u+1|0,(T|0)!=(u|0)){A=u>>>0<T>>>0,a=I[c+84|0];continue}break}a=u>>>0>=T>>>0;break a}if(a=!A,!y)break s}W(y)}break t;case 5:a=0,z=re-16|0,re=z,u=D[c+24|0],m=u<<2,T=r[s+80>>2];s:{if((ne(m,T)|0)!=(f|0))break s;if(s=r[c+28>>2]!=6,a=I[c+84|0],!(s|!a)){$e(h,r[r[c>>2]>>2]+r[c+48>>2]|0,f),a=1;break s}if(r[z+8>>2]=0,r[z>>2]=0,r[z+4>>2]=0,u){if((u|0)<0)break i;y=Te(m),r[z>>2]=y,Ct(y,0,u<<2)}a:{o:{if(!T)break o;if(!s){if(U=r[c>>2],f=r[c+48>>2],Z=r[c+68>>2],m=r[c+44>>2],R=r[c+40>>2],we=R,u){for(Me=u&-4,H=u&3,s=0,Ie=a&255,We=u-1>>>0<3,u=0;;){if(c=r[U>>2],a=rt(R,m,Ie?u:r[Z+(u<<2)>>2],0)+f|0,N=$e(y,c+a|0,we),A=0,a=0,c=0,!We)for(;ie=(s<<2)+h|0,ge=a<<2,r[ie>>2]=r[ge+N>>2],r[ie+4>>2]=r[N+(ge|4)>>2],r[ie+8>>2]=r[N+(ge|8)>>2],r[ie+12>>2]=r[N+(ge|12)>>2],a=a+4|0,s=s+4|0,c=c+4|0,(Me|0)!=(c|0););if(H)for(;r[(s<<2)+h>>2]=r[N+(a<<2)>>2],a=a+1|0,s=s+1|0,A=A+1|0,(H|0)!=(A|0););if(a=1,u=u+1|0,(T|0)==(u|0))break}break a}if(s=0,(T|0)!=1)for(ie=T&-2,N=a&255,u=0;c=s|1,H=r[U>>2],h=rt(R,m,N?s:r[Z+(s<<2)>>2],0)+f|0,h=$e(y,H+h|0,we),ge=r[U>>2],N||(c=r[Z+(c<<2)>>2]),c=rt(R,m,c,0)+f|0,$e(h,c+ge|0,we),s=s+2|0,u=u+2|0,(ie|0)!=(u|0););if(!(T&1))break o;c=r[U>>2],a&255||(s=r[Z+(s<<2)>>2]),a=rt(R,m,s,0)+f|0,$e(y,a+c|0,we);break o}if(!u)for(s=0,A=1;;){if(!zM(c,a&255?s:r[r[c+68>>2]+(s<<2)>>2],D[c+24|0],y)||(s=s+1|0,A=T>>>0>s>>>0,(s|0)==(T|0)))break o;a=I[c+84|0]}for(U=u&-4,N=u&3,s=0,H=u-1>>>0<3,A=1,u=0;;){if(!zM(c,a&255?u:r[r[c+68>>2]+(u<<2)>>2],D[c+24|0],y))break o;if(f=0,a=0,A=0,!H)for(;m=(s<<2)+h|0,R=a<<2,r[m>>2]=r[R+y>>2],r[m+4>>2]=r[(R|4)+y>>2],r[m+8>>2]=r[(R|8)+y>>2],r[m+12>>2]=r[(R|12)+y>>2],a=a+4|0,s=s+4|0,A=A+4|0,(U|0)!=(A|0););if(N)for(;r[(s<<2)+h>>2]=r[(a<<2)+y>>2],a=a+1|0,s=s+1|0,f=f+1|0,(N|0)!=(f|0););if(u=u+1|0,(T|0)!=(u|0)){A=u>>>0<T>>>0,a=I[c+84|0];continue}break}a=u>>>0>=T>>>0;break a}if(a=!A,!y)break s}W(y)}break t;case 8:break r;default:break e}a=0,T=re-16|0,re=T,A=D[c+24|0],u=A<<2,R=r[s+80>>2];r:{if((ne(u,R)|0)!=(f|0))break r;f=r[c+28>>2],r[T+8>>2]=0,r[T>>2]=0,r[T+4>>2]=0,s=0;s:{a:{o:{c:{if(!A)break c;if((A|0)<0)break o;s=Te(u),r[T>>2]=s,m=(A<<2)+s|0,r[T+8>>2]=m,u=u-4|0,z=(u>>>2|0)+1&7;l:{if(!z){a=s;break l}for(a=s;r[a>>2]=-1073741824,a=a+4|0,y=y+1|0,(z|0)!=(y|0););}if(u>>>0<28)break c;for(;r[a+24>>2]=-1073741824,r[a+28>>2]=-1073741824,r[a+16>>2]=-1073741824,r[a+20>>2]=-1073741824,r[a+8>>2]=-1073741824,r[a+12>>2]=-1073741824,r[a>>2]=-1073741824,r[a+4>>2]=-1073741824,a=a+32|0,(m|0)!=(a|0););}if(!R)break a;if((f|0)==9){if(a=0,U=r[c>>2],u=r[c+48>>2],Z=r[c+68>>2],we=I[c+84|0],f=r[c+44>>2],m=r[c+40>>2],ie=m,(A|0)<=0){if((R|0)!=1)for(A=R&-2,c=0;h=a|1,z=r[U>>2],y=rt(m,f,we?a:r[Z+(a<<2)>>2],0)+u|0,y=$e(s,z+y|0,ie),z=r[U>>2],we||(h=r[Z+(h<<2)>>2]),h=rt(m,f,h,0)+u|0,$e(y,h+z|0,ie),a=a+2|0,c=c+2|0,(A|0)!=(c|0););if(!(R&1))break a;c=r[U>>2],we||(a=r[Z+(a<<2)>>2]),a=rt(m,f,a,0)+u|0,$e(s,a+c|0,ie);break a}for(Ie=A&-4,H=A&3,y=0,We=A-1>>>0<3,A=0;;){if(c=r[U>>2],a=rt(m,f,we?A:r[Z+(A<<2)>>2],0)+u|0,c=$e(s,c+a|0,ie),z=0,a=0,Me=0,!We)for(;N=(y<<2)+h|0,ge=a<<2,At[N>>2]=At[ge+c>>2],At[N+4>>2]=At[c+(ge|4)>>2],At[N+8>>2]=At[c+(ge|8)>>2],At[N+12>>2]=At[c+(ge|12)>>2],a=a+4|0,y=y+4|0,Me=Me+4|0,(Ie|0)!=(Me|0););if(H)for(;At[(y<<2)+h>>2]=At[c+(a<<2)>>2],a=a+1|0,y=y+1|0,z=z+1|0,(H|0)!=(z|0););if(a=1,A=A+1|0,(R|0)==(A|0))break}break s}if(N=1,(A|0)<=0){for(a=0;;){if(!Gf(c,I[c+84|0]?a:r[r[c+68>>2]+(a<<2)>>2],D[c+24|0],s))break a;if(a=a+1|0,N=R>>>0>a>>>0,(a|0)==(R|0))break}break a}for(U=A&-4,m=A&3,y=0,H=A-1>>>0<3,A=0;;){if(!Gf(c,I[c+84|0]?A:r[r[c+68>>2]+(A<<2)>>2],D[c+24|0],s))break a;if(N=0,a=0,z=0,!H)for(;u=(y<<2)+h|0,f=a<<2,At[u>>2]=At[f+s>>2],At[u+4>>2]=At[(f|4)+s>>2],At[u+8>>2]=At[(f|8)+s>>2],At[u+12>>2]=At[(f|12)+s>>2],a=a+4|0,y=y+4|0,z=z+4|0,(U|0)!=(z|0););if(m)for(;At[(y<<2)+h>>2]=At[(a<<2)+s>>2],a=a+1|0,y=y+1|0,N=N+1|0,(m|0)!=(N|0););if(A=A+1|0,N=R>>>0>A>>>0,(A|0)==(R|0))break}a=A>>>0>=R>>>0;break s}jt(),Xe()}if(a=N^1,!s)break r}W(s)}re=T+16|0,y=a&1;break e}jt(),Xe()}re=z+16|0,y=a&1;break e}re=z+16|0,y=a&1}return y|0}function BSe(a,s,c){a=a|0,s=s|0,c=c|0;var u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0,ie=0,ge=0,we=0,Me=0,Ie=0,We=0,ut=0,vt=0,Pt=0,Wt=0,gn=0,En=0,Nn=0,nr=0,Pr=0,Jr=0,xi=0,ei=0,xr=0,ws=0;Wt=c,c=0,z=re-96|0,re=z,R=z+16|0,Ct(R,0,76),r[z+92>>2]=-1,r[z+8>>2]=0,r[z>>2]=0,r[z+4>>2]=0,we=re-16|0,re=we,r[R+68>>2]=0,r[R+72>>2]=0,r[R>>2]=s,Me=re-16|0,re=Me,vt=s,a=r[s+20>>2];e:{if((r[s+24>>2]-a|0)<=0||(a=r[a>>2],(a|0)==-1))break e;c=r[r[vt+8>>2]+(a<<2)>>2]}e:{t:{n:{i:{if(!c){a=0;break i}a=r[vt+100>>2],f=r[vt+96>>2],r[Me+8>>2]=0,r[Me>>2]=0,r[Me+4>>2]=0,u=a-f|0,s=(u|0)/12|0;r:{if(!u)break r;if(s>>>0>=357913942)break t;if(h=Te(u),r[Me>>2]=h,r[Me+8>>2]=h+ne(s,12),a=0,m=h,h=ne((u-12>>>0)/12|0,12)+12|0,u=Ct(m,0,h),r[Me+4>>2]=u+h,I[c+84|0]){if(c=s>>>0>1?s:1,m=c&1,s>>>0>=2)for(T=c&-2,c=0;h=ne(a,12),s=h+f|0,U=r[s+4>>2],H=r[s>>2],h=u+h|0,r[h+8>>2]=r[s+8>>2],r[h>>2]=H,r[h+4>>2]=U,h=ne(a|1,12),s=h+f|0,U=r[s+8>>2],H=r[s+4>>2],h=u+h|0,r[h>>2]=r[s>>2],r[h+4>>2]=H,r[h+8>>2]=U,a=a+2|0,c=c+2|0,(T|0)!=(c|0););if(!m)break r;s=ne(a,12),a=s+f|0,c=r[a+4>>2],f=r[a>>2],s=s+u|0,r[s+8>>2]=r[a+8>>2],r[s>>2]=f,r[s+4>>2]=c;break r}for(m=s>>>0>1?s:1,a=r[c+68>>2],c=0;h=ne(c,12),s=h+f|0,T=r[a+(r[s>>2]<<2)>>2],U=r[a+(r[s+4>>2]<<2)>>2],h=u+h|0,r[h+8>>2]=r[a+(r[s+8>>2]<<2)>>2],r[h+4>>2]=U,r[h>>2]=T,c=c+1|0,(m|0)!=(c|0););}Nn=re-16|0,re=Nn,m=Te(88),r[m>>2]=0,r[m+4>>2]=0,r[m+56>>2]=0,r[m+48>>2]=0,r[m+52>>2]=0,r[m+40>>2]=0,r[m+44>>2]=0,r[m+32>>2]=0,r[m+36>>2]=0,r[m+24>>2]=0,r[m+28>>2]=0,r[m+16>>2]=0,r[m+20>>2]=0,r[m+8>>2]=0,r[m+12>>2]=0,a=m- -64|0,r[a>>2]=0,r[a+4>>2]=0,r[m+72>>2]=0,r[m+76>>2]=0,r[m+80>>2]=0,r[m+84>>2]=0,r[m+60>>2]=m,gn=re-16|0,re=gn,r[m+80>>2]=0,r[m+84>>2]=0,a=r[m+76>>2],r[m+76>>2]=0,a&&W(a),r[m+68>>2]=0,r[m+72>>2]=0,s=m- -64|0,a=r[s>>2],r[s>>2]=0,a&&W(a),s=r[Me>>2],c=r[Me+4>>2]-s|0,T=(c|0)/12|0,a=ne(T,3),u=r[m>>2],f=r[m+4>>2]-u>>2;r:{if(a>>>0>f>>>0){Xr(m,a-f|0),s=r[Me>>2],c=r[Me+4>>2]-s|0,T=(c|0)/12|0,u=r[m>>2];break r}if(a>>>0>=f>>>0)break r;r[m+4>>2]=(a<<2)+u}if(c)for(h=T>>>0>1?T:1,a=0;f=ne(a,12),c=f+u|0,f=s+f|0,r[c>>2]=r[f>>2],r[c+4>>2]=r[f+4>>2],r[c+8>>2]=r[f+8>>2],a=a+1|0,(h|0)!=(a|0););r[gn+12>>2]=-1,h=re-48|0,re=h;r:{s:{ut=gn+12|0;a:{if(!ut)break a;u=r[m+4>>2],U=r[m>>2],c=u-U|0,H=c>>2,s=r[m+12>>2],a=r[m+16>>2]-s>>2;o:{if(H>>>0>a>>>0){ea(m+12|0,H-a|0,13684),u=r[m+4>>2],U=r[m>>2],c=u-U|0,H=c>>2;break o}if(a>>>0<=H>>>0)break o;r[m+16>>2]=s+(H<<2)}s=0,r[h+40>>2]=0,r[h+32>>2]=0,r[h+36>>2]=0;o:{if(!c){r[h+24>>2]=0,r[h+16>>2]=0,r[h+20>>2]=0;break o}c:{if((c|0)>=0)for(s=Te(c),r[h+36>>2]=s,r[h+32>>2]=s,r[h+40>>2]=(H<<2)+s,a=s,c=0;;){T=r[(c<<2)+U>>2],a=a-s>>2;l:{if(T>>>0<a>>>0)break l;if(r[h+16>>2]=0,f=T+1|0,f>>>0>a>>>0){ea(h+32|0,f-a|0,h+16|0),U=r[m>>2],u=r[m+4>>2],s=r[h+32>>2];break l}if(a>>>0<=f>>>0)break l;r[h+36>>2]=(f<<2)+s}if(a=(T<<2)+s|0,r[a>>2]=r[a>>2]+1,c=c+1|0,a=u-U|0,H=a>>2,c>>>0>=H>>>0)break c;a=r[h+36>>2]}break s}if(r[h+24>>2]=0,r[h+16>>2]=0,r[h+20>>2]=0,!a)break o;if(a>>>0>=2147483645)break t;c=a<<1,a=Te(c),r[h+16>>2]=a,f=a+(H<<3)|0,r[h+24>>2]=f,Ct(a,255,c),r[h+20>>2]=f}u=0,r[h+8>>2]=0,r[h>>2]=0,r[h+4>>2]=0,a=r[h+36>>2]-s|0,T=a>>2;o:{if(!a)break o;if((a|0)<0)break t;if(N=Te(a),r[h>>2]=N,a=T<<2,c=a+N|0,r[h+8>>2]=c,a=Ct(N,0,a),r[h+4>>2]=c,f=T>>>0>1?T:1,ie=f&3,c=0,f-1>>>0>=3)for(ge=f&-4;f=A<<2,r[f+a>>2]=c,Pt=f|4,c=r[s+f>>2]+c|0,r[Pt+a>>2]=c,We=f|8,c=c+r[s+Pt>>2]|0,r[We+a>>2]=c,f=f|12,c=c+r[s+We>>2]|0,r[f+a>>2]=c,c=c+r[s+f>>2]|0,A=A+4|0,y=y+4|0,(ge|0)!=(y|0););if(!ie)break o;for(;f=A<<2,r[f+a>>2]=c,A=A+1|0,c=r[s+f>>2]+c|0,Z=Z+1|0,(ie|0)!=(Z|0););}if(H)for(Pt=r[m+12>>2];;){nr=u<<2,c=nr+U|0,y=-1,f=u+1|0,a=(f>>>0)%3|0?f:u-2|0,(a|0)!=-1&&(y=r[(a<<2)+U>>2]),a=r[c>>2];o:{c:{if(!((u>>>0)%3|0)){if(Z=-1,c=u+2|0,(c|0)!=-1&&(Z=r[(c<<2)+U>>2]),!((a|0)==(y|0)|(a|0)==(Z|0))&(y|0)!=(Z|0))break c;r[m+40>>2]=r[m+40>>2]+1,f=u+3|0;break o}Z=r[c-4>>2]}c=Z<<2,We=r[c+s>>2];c:{l:{if((We|0)<=0)break l;for(ie=r[h+16>>2],c=r[c+N>>2],A=0;;){if(ge=ie+(c<<3)|0,Ie=r[ge>>2],(Ie|0)==-1)break l;u:{if((y|0)!=(Ie|0)||(ge=r[ge+4>>2],(ge|0)!=-1?Ie=r[(ge<<2)+U>>2]:Ie=-1,(Ie|0)==(a|0)))break u;for(;;){f:{if(a=c,A=A+1|0,(We|0)<=(A|0))break f;if(Ie=ie+(a<<3)|0,c=a+1|0,Pr=ie+(c<<3)|0,Jr=r[Pr>>2],r[Ie>>2]=Jr,r[Ie+4>>2]=r[Pr+4>>2],(Jr|0)!=-1)continue}break}if(r[ie+(a<<3)>>2]=-1,(ge|0)==-1)break l;r[Pt+nr>>2]=ge,r[Pt+(ge<<2)>>2]=u;break c}if(c=c+1|0,A=A+1|0,(We|0)==(A|0))break}}if(a=y<<2,y=r[a+s>>2],(y|0)<=0)break c;for(ie=r[h+16>>2],c=r[a+N>>2],A=0;;){if(a=ie+(c<<3)|0,r[a>>2]==-1){r[a>>2]=Z,r[a+4>>2]=u;break c}if(c=c+1|0,A=A+1|0,(y|0)==(A|0))break}}}if(u=f,!(H>>>0>u>>>0))break}if(r[ut>>2]=T,N&&W(N),a=r[h+16>>2],a&&(r[h+20>>2]=a,W(a)),a=r[h+32>>2],!a)break a;r[h+36>>2]=a,W(a)}if(re=h+48|0,Pt=(ut|0)!=0,Pt){y=re-32|0,re=y,H=r[m>>2],a=r[m+4>>2],r[y+24>>2]=0,r[y+16>>2]=0,r[y+20>>2]=0;a:{o:{s=a-H|0;c:{if(!s)break c;if((s|0)<0)break o;if(c=s>>2,u=c-1>>>5|0,h=u+1|0,f=Te(h<<2),r[y+24>>2]=h,r[y+16>>2]=f,r[y+20>>2]=c,r[f+((s>>>0<132?0:u)<<2)>>2]=0,s=c>>>5<<2,f=Ct(f,0,s),c=c&31,!c)break c;s=s+f|0,r[s>>2]=r[s>>2]&(-1>>>32-c^-1)}for(r[y+8>>2]=0,r[y>>2]=0;;){c:{if(ie=0,s=0,(a|0)==(H|0))break c;for(;;){u=r[y+16>>2];l:{if(r[u+(s>>>3&536870908)>>2]>>>s&1)break l;for(f=r[y>>2],r[y+4>>2]=f,c=r[m+12>>2],a=s;;){u:{if(h=a+1|0,A=a,a=(h>>>0)%3|0?h:a-2|0,(a|0)==-1||(a=r[c+(a<<2)>>2],(a|0)==-1)||(h=a+1|0,a=(h>>>0)%3|0?h:a-2|0,(s|0)==(a|0)|(a|0)==-1))break u;if(!(r[(a>>>3&536870908)+u>>2]>>>a&1))continue}break}c=f,T=A;u:{f:{for(;;){a=(T>>>3&536870908)+u|0,r[a>>2]=r[a>>2]|1<<T,a=T+1|0,h=(a>>>0)%3|0?a:T-2|0,We=(T>>>0)%3|0,U=(We?-1:2)+T|0,ge=U<<2;d:{if((c|0)==(f|0))break d;if(ut=r[(h<<2)+H>>2],N=r[m+12>>2],a=c,(U|0)!=-1){for(Ie=N+ge|0;;){p:{if((ut|0)!=r[a>>2]||(u=r[a+4>>2],Z=r[Ie>>2],(u|0)==(Z|0)))break p;if(f=-1,a=-1,(u|0)==-1)break u;break f}if(a=a+8|0,(f|0)==(a|0))break}break d}for(;;){if((ut|0)==r[a>>2]&&(Z=-1,U=-1,u=r[a+4>>2],(u|0)!=-1))break f;if(a=a+8|0,(f|0)==(a|0))break}}U=r[H+ge>>2];d:{if(r[y+8>>2]!=(f|0)){r[f>>2]=U,r[f+4>>2]=h,f=f+8|0,r[y+4>>2]=f;break d}if(u=f-c|0,f=u>>3,a=f+1|0,a>>>0>=536870912)break t;if(N=u>>2,N=u>>>0<2147483640?a>>>0>N>>>0?a:N:536870911,N){if(N>>>0>=536870912)break s;a=Te(N<<3)}else a=0;if(f=a+(f<<3)|0,r[f>>2]=U,r[f+4>>2]=h,f=f+8|0,(u|0)>0&&$e(a,c,u),r[y+8>>2]=a+(N<<3),r[y+4>>2]=f,r[y>>2]=a,!c)break d;W(c)}d:{p:{if(We){a=T-1|0;break p}if(a=T+2|0,(a|0)==-1)break d}if(a=r[r[m+12>>2]+(a<<2)>>2],(a|0)==-1||(T=a+((a>>>0)%3|0?-1:2)|0,(A|0)==(T|0)|(T|0)==-1))break d;H=r[m>>2],c=r[y>>2],u=r[y+16>>2];continue}break}H=r[m>>2];break l}f=u,a=r[N+(f<<2)>>2]}(Z|0)!=-1&&(r[N+(Z<<2)>>2]=-1),(a|0)!=-1&&(r[r[m+12>>2]+(a<<2)>>2]=-1),a=r[m+12>>2],r[a+(U<<2)>>2]=-1,r[a+(f<<2)>>2]=-1,ie=1}if(s=s+1|0,a=r[m+4>>2],!(s>>>0<a-H>>2>>>0))break}if(ie)continue}break}a=r[y>>2],a&&W(a),a=r[y+16>>2],a&&W(a),re=y+32|0;break a}eu(),Xe()}U=0,A=re-32|0,re=A,a=r[gn+12>>2],r[m+36>>2]=a,H=m+24|0;a:{o:{c:{l:{u:{c=r[m+24>>2],s=r[m+28>>2]-c>>2;f:{d:{if(s>>>0<a>>>0){ea(H,a-s|0,13684),r[A+24>>2]=0,r[A+16>>2]=0,r[A+20>>2]=0;break d}if(a>>>0<s>>>0&&(r[m+28>>2]=c+(a<<2)),s=0,r[A+24>>2]=0,r[A+16>>2]=0,r[A+20>>2]=0,!a)break f}if((a|0)<0)break u;if(c=a-1>>>5|0,f=c+1|0,s=Te(f<<2),r[A+24>>2]=f,r[A+16>>2]=s,r[A+20>>2]=a,r[((a>>>0<33?0:c)<<2)+s>>2]=0,c=a>>>5<<2,f=Ct(s,0,c),u=a&31,!u)break f;c=c+f|0,r[c>>2]=r[c>>2]&(-1>>>32-u^-1)}if(N=r[m>>2],T=r[m+4>>2],r[A+8>>2]=0,r[A>>2]=0,r[A+4>>2]=0,c=T-N|0,!c)break a;if((c|0)<0)break l;if(f=c>>2,u=f-1>>>5|0,h=u+1|0,y=Te(h<<2),r[A+8>>2]=h,r[A>>2]=y,r[A+4>>2]=f,Z=0,r[((c>>>0<132?0:u)<<2)+y>>2]=0,u=f>>>5<<2,h=Ct(y,0,u),f=f&31,f&&(u=u+h|0,r[u>>2]=r[u>>2]&(-1>>>32-f^-1)),c>>>0<12)break a;for(;;){ge=ne(Z,3),f=(ge<<2)+N|0,c=r[f>>2],u=-1,h=ge+1|0,(h|0)!=-1&&(u=r[(h<<2)+N>>2]);f:{if((c|0)==(u|0)||(h=c,c=r[f+8>>2],(h|0)==(c|0))||(ie=0,(c|0)==(u|0)))break f;for(;;){if(f=ie+ge|0,!(r[(f>>>3&536870908)+y>>2]>>>f&1)){if(c=r[(f<<2)+N>>2],u=1<<c,y=c>>>5|0,ut=u&r[(y<<2)+s>>2],ut){s=r[m+28>>2];d:{if((s|0)!=r[m+32>>2]){r[s>>2]=-1,r[m+28>>2]=s+4;break d}if(h=r[H>>2],u=s-h|0,y=u>>2,s=y+1|0,s>>>0>=1073741824)break t;if(T=u>>1,T=u>>>0<2147483644?s>>>0>T>>>0?s:T:1073741823,T){if(T>>>0>=1073741824)break s;s=Te(T<<2)}else s=0;if(y=s+(y<<2)|0,r[y>>2]=-1,(u|0)>0&&$e(s,h,u),r[m+32>>2]=s+(T<<2),r[m+28>>2]=y+4,r[m+24>>2]=s,!h)break d;W(h)}s=r[m+52>>2];d:{if((s|0)!=r[m+56>>2]){r[s>>2]=c,r[m+52>>2]=s+4;break d}if(h=r[m+48>>2],u=s-h|0,y=u>>2,s=y+1|0,s>>>0>=1073741824)break t;if(T=u>>1,T=u>>>0<2147483644?s>>>0>T>>>0?s:T:1073741823,T){if(T>>>0>=1073741824)break s;s=Te(T<<2)}else s=0;if(y=s+(y<<2)|0,r[y>>2]=c,(u|0)>0&&$e(s,h,u),r[m+56>>2]=s+(T<<2),r[m+52>>2]=y+4,r[m+48>>2]=s,!h)break d;W(h)}if(u=r[A+20>>2],s=r[A+24>>2],(u|0)==s<<5){if((u+1|0)<0)break c;c=A+16|0,u>>>0<=1073741822?(u=u+32&-32,s=s<<6,s=s>>>0<u>>>0?u:s):s=2147483647,qd(c,s),u=r[A+20>>2]}r[A+20>>2]=u+1,s=r[A+16>>2]+(u>>>3&536870908)|0,c=r[s>>2],xr=s,ws=Yi(u)&c,r[xr>>2]=ws,u=1<<a,y=a>>>5|0,c=a,a=a+1|0}h=a,s=r[A+16>>2],a=s+(y<<2)|0,r[a>>2]=r[a>>2]|u,We=r[m+24>>2]+(c<<2)|0,T=r[m+12>>2],N=r[m>>2],y=r[A>>2],a=f;d:{p:{m:{y:{w:{b:{for(;;){if((a|0)==-1)break b;u=(a>>>3&536870908)+y|0,r[u>>2]=r[u>>2]|1<<a,r[We>>2]=a,ut&&(r[(a<<2)+N>>2]=c),Ie=a+1|0,a=(Ie>>>0)%3|0?Ie:a-2|0,u=-1;g:{if((a|0)==-1||(a=r[T+(a<<2)>>2],u=-1,(a|0)==-1))break g;u=a+1|0,u=(u>>>0)%3|0?u:a-2|0}if(a=u,(f|0)==(a|0))break}if((f|0)!=-1)break d;a=1;break w}if((f>>>0)%3|0){a=f-1|0;break w}if(a=f+2|0,(a|0)==-1)break y}if(a=r[T+(a<<2)>>2],(a|0)==-1)break y;if(!((a>>>0)%3|0))break m;a=a-1|0,N=r[m>>2],y=r[A>>2];break p}N=r[m>>2],y=r[A>>2];break d}if(N=r[m>>2],y=r[A>>2],a=a+2|0,(a|0)==-1)break d}for(f=r[m+12>>2];;){u=(a>>>3&536870908)+y|0,r[u>>2]=r[u>>2]|1<<a,ut&&(r[(a<<2)+N>>2]=c);p:{if((a>>>0)%3|0){a=a-1|0;break p}if(a=a+2|0,(a|0)==-1)break d}if(a=r[f+(a<<2)>>2],(a|0)==-1)break d;if(a=a+((a>>>0)%3|0?-1:2)|0,(a|0)==-1)break}}a=h}if(ie=ie+1|0,(ie|0)==3)break}N=r[m>>2],T=r[m+4>>2]}if(Z=Z+1|0,!(Z>>>0<(T-N>>2>>>0)/3>>>0))break}break o}eu(),Xe()}eu(),Xe()}eu(),Xe()}s=r[A+16>>2]}if(r[m+44>>2]=0,a=r[A+20>>2],a)for(c=a&31,f=(a>>>3&536870908)+s|0,a=s,y=0;r[a>>2]>>>U&1||(y=y+1|0,r[m+44>>2]=y),u=(U|0)==31,U=u?0:U+1|0,a=(u<<2)+a|0,!!((f|0)!=(a|0)|(c|0)!=(U|0)););a=r[A>>2],a&&(W(a),s=r[A+16>>2]),s&&W(s),re=A+32|0}re=gn+16|0,Pt||(r[Nn+8>>2]=0,Zd(m),m=0),re=Nn+16|0,a=m;break r}qn(1336),Xe()}if(s=r[Me>>2],!s)break i;r[Me+4>>2]=s,W(s)}re=Me+16|0;break n}s=r[R+4>>2],r[R+4>>2]=a,s&&(Zd(s),a=r[R+4>>2]);n:{if(!a)break n;if(a=r[vt+100>>2],s=r[vt+96>>2],D[we+12|0]=0,hc(R+56|0,(a-s|0)/12|0,we+12|0),a=r[vt+100>>2],c=r[vt+96>>2],(a|0)==(c|0)){xi=1;break n}for(;;){if(!(r[r[R+56>>2]+(En>>>3&536870908)>>2]>>>En&1)){a=ne(En,3),xB(R,0,a),s=r[R+8>>2],c=r[R+12>>2],xB(R,1,a+1|0),f=r[R+20>>2],u=r[R+24>>2],xB(R,2,a+2|0),f=u-f>>2,s=c-s|0,c=s>>2,a=f>>>0>c>>>0,c=r[R+36>>2]-r[R+32>>2]>>2>>>0>(a?f:c)>>>0?2:a?1:s?0:-1;i:{if(r[R+68>>2]<=0||(r[we+12>>2]=r[R+76>>2],r[we+8>>2]=z,Op(we+8|0,we+12|0),a=r[((c<<2)+R|0)+44>>2],(a|0)<0?a=-1:(s=(a>>>0)/3|0,a=r[(r[r[R>>2]+96>>2]+ne(s,12)|0)+(a-ne(s,3)<<2)>>2]),r[we+12>>2]=a,r[we+8>>2]=z,Op(we+8|0,we+12|0),s=r[R+72>>2],r[R+72>>2]=s+2,!(s&1)))break i;r[we+12>>2]=a,r[we+8>>2]=z,Op(we+8|0,we+12|0),r[R+72>>2]=r[R+72>>2]+1}s=re-16|0,re=s,r[R+68>>2]=r[R+68>>2]+1,a=ne(c,12)+R|0,f=r[a+12>>2]-r[a+8>>2]|0;i:{if((f|0)<=0)break i;a=-1,c=r[((c<<2)+R|0)+44>>2],u=(c>>>0)/3|0,A=(c|0)==-1,h=A?-1:u,m=r[R+56>>2]+(h>>>3&536870908)|0,r[m>>2]=r[m>>2]|1<<h,r[R+72>>2]=r[R+72>>2]+1,r[s+12>>2]=(c|0)>=0?r[(r[r[R>>2]+96>>2]+ne(u,12)|0)+((c>>>0)%3<<2)>>2]:-1,r[s+8>>2]=z,Op(s+8|0,s+12|0);r:{if(!A){if(h=c+1|0,h=(h>>>0)%3|0?h:c-2|0,(h|0)>=0?(A=(h>>>0)/3|0,h=r[(r[r[R>>2]+96>>2]+ne(A,12)|0)+(h-ne(A,3)<<2)>>2]):h=-1,r[s+12>>2]=h,r[s+8>>2]=z,Op(s+8|0,s+12|0),u=c+(c-ne(u,3)|0?-1:2)|0,(u|0)<0)break r;a=(u>>>0)/3|0,a=r[(r[r[R>>2]+96>>2]+ne(a,12)|0)+(u-ne(a,3)<<2)>>2];break r}r[s+12>>2]=-1,r[s+8>>2]=z,Op(s+8|0,s+12|0)}if(r[R+76>>2]=a,r[s+12>>2]=a,r[s+8>>2]=z,a=-1,Op(s+8|0,s+12|0),a=(c|0)!=-1?r[r[r[R+4>>2]+12>>2]+(c<<2)>>2]:a,f>>>0<=7)break i;for(c=f>>>2|0,A=c>>>0>1?c:1,f=1;;){c=a,h=(a>>>0)/3|0,a=(a|0)==-1?-1:h,u=r[R+56>>2]+(a>>>3&536870908)|0,r[u>>2]=r[u>>2]|1<<a,r[R+72>>2]=r[R+72>>2]+1,a=-1,a=(c|0)>=0?r[(r[r[R>>2]+96>>2]+ne(h,12)|0)+((c>>>0)%3<<2)>>2]:a,r[R+76>>2]=a,r[s+12>>2]=a,r[s+8>>2]=z,Op(s+8|0,s+12|0);r:{s:{a:{if(f&1){if(u=-1,(c|0)==-1)break r;if((c|0)!=(ne(h,3)|0)){a=c-1|0;break s}a=c+2|0;break a}if(u=-1,(c|0)==-1)break r;a=c+1|0,a=(a>>>0)%3|0?a:c-2|0}if(u=-1,(a|0)==-1)break r}u=r[r[r[R+4>>2]+12>>2]+(a<<2)>>2]}if(a=u,f=f+1|0,(A|0)==(f|0))break}}re=s+16|0,c=r[vt+96>>2],a=r[vt+100>>2]}if(xi=1,En=En+1|0,!(En>>>0<(a-c|0)/12>>>0))break}}re=we+16|0;n:{if(xi){a=r[Wt>>2],a&&(r[Wt+4>>2]=a,W(a)),r[Wt>>2]=r[z>>2],r[Wt+4>>2]=r[z+4>>2],r[Wt+8>>2]=r[z+8>>2],ei=r[z+84>>2];break n}if(a=r[z>>2],!a)break n;r[z+4>>2]=a,W(a)}a=r[z+72>>2],a&&W(a),a=r[z+48>>2],a&&(r[z+52>>2]=a,W(a)),a=r[z+36>>2],a&&(r[z+40>>2]=a,W(a)),a=r[z+24>>2],a&&(r[z+28>>2]=a,W(a)),a=r[z+20>>2],r[z+20>>2]=0,a&&Zd(a),re=z+96|0;break e}jt(),Xe()}return ei|0}function bee(a){a=a|0;var s=0,c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0;N=re-16|0,re=N;e:{t:{n:{i:{r:{s:{a:{o:{c:{l:{u:{if(a>>>0<=244){if(f=r[4233],y=a>>>0<11?16:a+11&-8,c=y>>>3|0,s=f>>>c|0,s&3){u=c+((s^-1)&1)|0,s=u<<3,h=r[s+16980>>2],a=h+8|0,c=r[h+8>>2],s=s+16972|0;f:{if((c|0)==(s|0)){z=16932,U=Yi(u)&f,r[z>>2]=U;break f}r[c+12>>2]=s,r[s+8>>2]=c}s=u<<3,r[h+4>>2]=s|3,s=s+h|0,r[s+4>>2]=r[s+4>>2]|1;break e}if(R=r[4235],R>>>0>=y>>>0)break u;if(s){a=2<<c,a=(0-a|a)&s<<c,s=(0-a&a)-1|0,a=s>>>12&16,c=a,s=s>>>a|0,a=s>>>5&8,c=c|a,s=s>>>a|0,a=s>>>2&4,c=c|a,s=s>>>a|0,a=s>>>1&2,c=c|a,s=s>>>a|0,a=s>>>1&1,c=(c|a)+(s>>>a|0)|0,a=c<<3,m=r[a+16980>>2],s=r[m+8>>2],a=a+16972|0;f:{if((s|0)==(a|0)){f=Yi(c)&f,r[4233]=f;break f}r[s+12>>2]=a,r[a+8>>2]=s}if(a=m+8|0,r[m+4>>2]=y|3,u=m+y|0,s=c<<3,h=s-y|0,r[u+4>>2]=h|1,r[s+m>>2]=h,R){s=R>>>3|0,c=(s<<3)+16972|0,m=r[4238],s=1<<s;f:{if(!(s&f)){r[4233]=s|f,s=c;break f}s=r[c+8>>2]}r[c+8>>2]=m,r[s+12>>2]=m,r[m+12>>2]=c,r[m+8>>2]=s}r[4238]=u,r[4235]=h;break e}if(T=r[4234],!T)break u;for(s=(T&0-T)-1|0,a=s>>>12&16,c=a,s=s>>>a|0,a=s>>>5&8,c=c|a,s=s>>>a|0,a=s>>>2&4,c=c|a,s=s>>>a|0,a=s>>>1&2,c=c|a,s=s>>>a|0,a=s>>>1&1,s=r[((c|a)+(s>>>a|0)<<2)+17236>>2],u=(r[s+4>>2]&-8)-y|0,c=s;;){f:{if(a=r[c+16>>2],!a&&(a=r[c+20>>2],!a))break f;c=(r[a+4>>2]&-8)-y|0,h=c>>>0<u>>>0,u=h?c:u,s=h?a:s,c=a;continue}break}if(A=r[s+24>>2],h=r[s+12>>2],(h|0)!=(s|0)){a=r[s+8>>2],r[a+12>>2]=h,r[h+8>>2]=a;break t}if(c=s+20|0,a=r[c>>2],!a){if(a=r[s+16>>2],!a)break l;c=s+16|0}for(;m=c,h=a,c=a+20|0,a=r[c>>2],!(!a&&(c=h+16|0,a=r[h+16>>2],!a)););r[m>>2]=0;break t}if(y=-1,a>>>0>4294967231||(a=a+11|0,y=a&-8,T=r[4234],!T))break u;u=0-y|0,f=0;f:{if(y>>>0<256||(f=31,y>>>0>16777215))break f;a=a>>>8|0,m=a+1048320>>>16&8,a=a<<m,c=a+520192>>>16&4,a=a<<c,s=a+245760>>>16&2,a=(a<<s>>>15|0)-(s|(c|m))|0,f=(a<<1|y>>>a+21&1)+28|0}c=r[(f<<2)+17236>>2];f:{d:{p:{if(!c){a=0;break p}for(a=0,s=y<<((f|0)==31?0:25-(f>>>1|0)|0);;){m:{if(m=(r[c+4>>2]&-8)-y|0,m>>>0>=u>>>0||(h=c,u=m,u))break m;u=0,a=c;break d}if(m=r[c+20>>2],c=r[((s>>>29&4)+c|0)+16>>2],a=m?(m|0)==(c|0)?a:m:a,s=s<<1,!c)break}}if(!(a|h)){if(h=0,a=2<<f,a=(0-a|a)&T,!a)break u;s=(a&0-a)-1|0,a=s>>>12&16,c=a,s=s>>>a|0,a=s>>>5&8,c=c|a,s=s>>>a|0,a=s>>>2&4,c=c|a,s=s>>>a|0,a=s>>>1&2,c=c|a,s=s>>>a|0,a=s>>>1&1,a=r[((c|a)+(s>>>a|0)<<2)+17236>>2]}if(!a)break f}for(;s=(r[a+4>>2]&-8)-y|0,c=s>>>0<u>>>0,u=c?s:u,h=c?a:h,s=r[a+16>>2],s?a=s:a=r[a+20>>2],!!a;);}if(!h|r[4235]-y>>>0<=u>>>0)break u;if(f=r[h+24>>2],s=r[h+12>>2],(h|0)!=(s|0)){a=r[h+8>>2],r[a+12>>2]=s,r[s+8>>2]=a;break n}if(c=h+20|0,a=r[c>>2],!a){if(a=r[h+16>>2],!a)break c;c=h+16|0}for(;m=c,s=a,c=a+20|0,a=r[c>>2],!(!a&&(c=s+16|0,a=r[s+16>>2],!a)););r[m>>2]=0;break n}if(c=r[4235],c>>>0>=y>>>0){u=r[4238],s=c-y|0;u:{if(s>>>0>=16){r[4235]=s,a=u+y|0,r[4238]=a,r[a+4>>2]=s|1,r[c+u>>2]=s,r[u+4>>2]=y|3;break u}r[4238]=0,r[4235]=0,r[u+4>>2]=c|3,a=c+u|0,r[a+4>>2]=r[a+4>>2]|1}a=u+8|0;break e}if(A=r[4236],A>>>0>y>>>0){s=A-y|0,r[4236]=s,c=r[4239],a=c+y|0,r[4239]=a,r[a+4>>2]=s|1,r[c+4>>2]=y|3,a=c+8|0;break e}if(a=0,T=y+47|0,r[4351]?c=r[4353]:(r[4354]=-1,r[4355]=-1,r[4352]=4096,r[4353]=4096,r[4351]=N+12&-16^1431655768,r[4356]=0,r[4344]=0,c=4096),m=T+c|0,h=0-c|0,c=m&h,c>>>0<=y>>>0||(u=r[4343],u&&(s=r[4341],f=s+c|0,u>>>0<f>>>0|s>>>0>=f>>>0)))break e;if(I[17376]&4)break s;u:{f:{if(u=r[4239],u)for(a=17380;;){if(s=r[a>>2],s>>>0<=u>>>0&u>>>0<s+r[a+4>>2]>>>0)break f;if(a=r[a+8>>2],!a)break}if(s=Km(0),(s|0)==-1||(f=c,u=r[4352],a=u-1|0,a&s&&(f=(c-s|0)+(a+s&0-u)|0),f>>>0<=y>>>0|f>>>0>2147483646)||(u=r[4343],u&&(a=r[4341],h=a+f|0,u>>>0<h>>>0|a>>>0>=h>>>0)))break a;if(a=Km(f),(s|0)!=(a|0))break u;break r}if(f=h&m-A,f>>>0>2147483646)break a;if(s=Km(f),(s|0)==(r[a>>2]+r[a+4>>2]|0))break o;a=s}if(!((a|0)==-1|y+48>>>0<=f>>>0)){if(s=r[4353],s=s+(T-f|0)&0-s,s>>>0>2147483646){s=a;break r}if((Km(s)|0)!=-1){f=s+f|0,s=a;break r}Km(0-f|0);break a}if(s=a,(a|0)!=-1)break r;break a}h=0;break t}s=0;break n}if((s|0)!=-1)break r}r[4344]=r[4344]|4}if(c>>>0>2147483646||(s=Km(c),a=Km(0),(s|0)==-1|(a|0)==-1|a>>>0<=s>>>0)||(f=a-s|0,f>>>0<=y+40>>>0))break i}a=r[4341]+f|0,r[4341]=a,a>>>0>Ue[4342]&&(r[4342]=a);r:{s:{a:{if(m=r[4239],m){for(a=17380;;){if(u=r[a>>2],c=r[a+4>>2],(u+c|0)==(s|0))break a;if(a=r[a+8>>2],!a)break}break s}for(a=r[4237],a>>>0<=s>>>0&&a||(r[4237]=s),a=0,r[4346]=f,r[4345]=s,r[4241]=-1,r[4242]=r[4351],r[4348]=0;u=a<<3,c=u+16972|0,r[u+16980>>2]=c,r[u+16984>>2]=c,a=a+1|0,(a|0)!=32;);u=f-40|0,a=s+8&7?-8-s&7:0,c=u-a|0,r[4236]=c,a=a+s|0,r[4239]=a,r[a+4>>2]=c|1,r[(s+u|0)+4>>2]=40,r[4240]=r[4355];break r}if(I[a+12|0]&8|u>>>0>m>>>0|s>>>0<=m>>>0)break s;r[a+4>>2]=c+f,a=m+8&7?-8-m&7:0,c=a+m|0,r[4239]=c,s=r[4236]+f|0,a=s-a|0,r[4236]=a,r[c+4>>2]=a|1,r[(s+m|0)+4>>2]=40,r[4240]=r[4355];break r}Ue[4237]>s>>>0&&(r[4237]=s),c=s+f|0,a=17380;s:{a:{o:{c:{l:{u:{for(;;){if((c|0)!=r[a>>2]){if(a=r[a+8>>2],a)continue;break u}break}if(!(I[a+12|0]&8))break l}for(a=17380;;){if(c=r[a>>2],c>>>0<=m>>>0&&(h=c+r[a+4>>2]|0,h>>>0>m>>>0))break c;a=r[a+8>>2]}}if(r[a>>2]=s,r[a+4>>2]=r[a+4>>2]+f,T=(s+8&7?-8-s&7:0)+s|0,r[T+4>>2]=y|3,f=c+(c+8&7?-8-c&7:0)|0,A=y+T|0,c=f-A|0,(f|0)==(m|0)){r[4239]=A,a=r[4236]+c|0,r[4236]=a,r[A+4>>2]=a|1;break a}if(r[4238]==(f|0)){r[4238]=A,a=r[4235]+c|0,r[4235]=a,r[A+4>>2]=a|1,r[a+A>>2]=a;break a}if(a=r[f+4>>2],(a&3)==1){m=a&-8;l:{if(a>>>0<=255){if(u=r[f+8>>2],a=a>>>3|0,s=r[f+12>>2],(s|0)==(u|0)){z=16932,U=r[4233]&Yi(a),r[z>>2]=U;break l}r[u+12>>2]=s,r[s+8>>2]=u;break l}y=r[f+24>>2],s=r[f+12>>2];u:{if((f|0)!=(s|0)){a=r[f+8>>2],r[a+12>>2]=s,r[s+8>>2]=a;break u}f:{if(a=f+20|0,u=r[a>>2],u||(a=f+16|0,u=r[a>>2],u))break f;s=0;break u}for(;h=a,s=u,a=s+20|0,u=r[a>>2],!(!u&&(a=s+16|0,u=r[s+16>>2],!u)););r[h>>2]=0}if(!y)break l;u=r[f+28>>2],a=(u<<2)+17236|0;u:{if(r[a>>2]==(f|0)){if(r[a>>2]=s,s)break u;z=16936,U=r[4234]&Yi(u),r[z>>2]=U;break l}if(r[y+(r[y+16>>2]==(f|0)?16:20)>>2]=s,!s)break l}if(r[s+24>>2]=y,a=r[f+16>>2],a&&(r[s+16>>2]=a,r[a+24>>2]=s),a=r[f+20>>2],!a)break l;r[s+20>>2]=a,r[a+24>>2]=s}f=f+m|0,c=c+m|0}if(r[f+4>>2]=r[f+4>>2]&-2,r[A+4>>2]=c|1,r[c+A>>2]=c,c>>>0<=255){a=c>>>3|0,s=(a<<3)+16972|0,c=r[4233],a=1<<a;l:{if(!(c&a)){r[4233]=a|c,a=s;break l}a=r[s+8>>2]}r[s+8>>2]=A,r[a+12>>2]=A,r[A+12>>2]=s,r[A+8>>2]=a;break a}a=31,c>>>0<=16777215&&(a=c>>>8|0,h=a+1048320>>>16&8,a=a<<h,u=a+520192>>>16&4,a=a<<u,s=a+245760>>>16&2,a=(a<<s>>>15|0)-(s|(u|h))|0,a=(a<<1|c>>>a+21&1)+28|0),r[A+28>>2]=a,r[A+16>>2]=0,r[A+20>>2]=0,h=(a<<2)+17236|0,u=r[4234],s=1<<a;l:{if(!(u&s)){r[4234]=s|u,r[h>>2]=A,r[A+24>>2]=h;break l}for(a=c<<((a|0)==31?0:25-(a>>>1|0)|0),s=r[h>>2];;){if(u=s,(r[s+4>>2]&-8)==(c|0))break o;if(s=a>>>29|0,a=a<<1,h=u+(s&4)|0,s=r[h+16>>2],!s)break}r[h+16>>2]=A,r[A+24>>2]=u}r[A+12>>2]=A,r[A+8>>2]=A;break a}for(u=f-40|0,a=s+8&7?-8-s&7:0,c=u-a|0,r[4236]=c,a=a+s|0,r[4239]=a,r[a+4>>2]=c|1,r[(s+u|0)+4>>2]=40,r[4240]=r[4355],a=(h+(h-39&7?39-h&7:0)|0)-47|0,c=a>>>0<m+16>>>0?m:a,r[c+4>>2]=27,a=r[4348],r[c+16>>2]=r[4347],r[c+20>>2]=a,a=r[4346],r[c+8>>2]=r[4345],r[c+12>>2]=a,r[4347]=c+8,r[4346]=f,r[4345]=s,r[4348]=0,a=c+24|0;r[a+4>>2]=7,s=a+8|0,a=a+4|0,s>>>0<h>>>0;);if((c|0)==(m|0))break r;if(r[c+4>>2]=r[c+4>>2]&-2,h=c-m|0,r[m+4>>2]=h|1,r[c>>2]=h,h>>>0<=255){a=h>>>3|0,s=(a<<3)+16972|0,c=r[4233],a=1<<a;c:{if(!(c&a)){r[4233]=a|c,a=s;break c}a=r[s+8>>2]}r[s+8>>2]=m,r[a+12>>2]=m,r[m+12>>2]=s,r[m+8>>2]=a;break r}a=31,r[m+16>>2]=0,r[m+20>>2]=0,h>>>0<=16777215&&(a=h>>>8|0,u=a+1048320>>>16&8,a=a<<u,c=a+520192>>>16&4,a=a<<c,s=a+245760>>>16&2,a=(a<<s>>>15|0)-(s|(c|u))|0,a=(a<<1|h>>>a+21&1)+28|0),r[m+28>>2]=a,u=(a<<2)+17236|0,c=r[4234],s=1<<a;c:{if(!(c&s)){r[4234]=s|c,r[u>>2]=m,r[m+24>>2]=u;break c}for(a=h<<((a|0)==31?0:25-(a>>>1|0)|0),s=r[u>>2];;){if(c=s,(h|0)==(r[s+4>>2]&-8))break s;if(s=a>>>29|0,a=a<<1,u=c+(s&4)|0,s=r[u+16>>2],!s)break}r[u+16>>2]=m,r[m+24>>2]=c}r[m+12>>2]=m,r[m+8>>2]=m;break r}a=r[u+8>>2],r[a+12>>2]=A,r[u+8>>2]=A,r[A+24>>2]=0,r[A+12>>2]=u,r[A+8>>2]=a}a=T+8|0;break e}a=r[c+8>>2],r[a+12>>2]=m,r[c+8>>2]=m,r[m+24>>2]=0,r[m+12>>2]=c,r[m+8>>2]=a}if(a=r[4236],a>>>0<=y>>>0)break i;s=a-y|0,r[4236]=s,c=r[4239],a=c+y|0,r[4239]=a,r[a+4>>2]=s|1,r[c+4>>2]=y|3,a=c+8|0;break e}r[4190]=48,a=0;break e}n:{if(!f)break n;c=r[h+28>>2],a=(c<<2)+17236|0;i:{if(r[a>>2]==(h|0)){if(r[a>>2]=s,s)break i;T=Yi(c)&T,r[4234]=T;break n}if(r[f+(r[f+16>>2]==(h|0)?16:20)>>2]=s,!s)break n}if(r[s+24>>2]=f,a=r[h+16>>2],a&&(r[s+16>>2]=a,r[a+24>>2]=s),a=r[h+20>>2],!a)break n;r[s+20>>2]=a,r[a+24>>2]=s}n:{if(u>>>0<=15){a=u+y|0,r[h+4>>2]=a|3,a=a+h|0,r[a+4>>2]=r[a+4>>2]|1;break n}if(r[h+4>>2]=y|3,f=h+y|0,r[f+4>>2]=u|1,r[u+f>>2]=u,u>>>0<=255){a=u>>>3|0,s=(a<<3)+16972|0,c=r[4233],a=1<<a;i:{if(!(c&a)){r[4233]=a|c,a=s;break i}a=r[s+8>>2]}r[s+8>>2]=f,r[a+12>>2]=f,r[f+12>>2]=s,r[f+8>>2]=a;break n}a=31,u>>>0<=16777215&&(a=u>>>8|0,m=a+1048320>>>16&8,a=a<<m,c=a+520192>>>16&4,a=a<<c,s=a+245760>>>16&2,a=(a<<s>>>15|0)-(s|(c|m))|0,a=(a<<1|u>>>a+21&1)+28|0),r[f+28>>2]=a,r[f+16>>2]=0,r[f+20>>2]=0,s=(a<<2)+17236|0;i:{c=1<<a;r:{if(!(c&T)){r[4234]=c|T,r[s>>2]=f;break r}for(a=u<<((a|0)==31?0:25-(a>>>1|0)|0),y=r[s>>2];;){if(s=y,(r[s+4>>2]&-8)==(u|0))break i;if(c=a>>>29|0,a=a<<1,c=(c&4)+s|0,y=r[c+16>>2],!y)break}r[c+16>>2]=f}r[f+24>>2]=s,r[f+12>>2]=f,r[f+8>>2]=f;break n}a=r[s+8>>2],r[a+12>>2]=f,r[s+8>>2]=f,r[f+24>>2]=0,r[f+12>>2]=s,r[f+8>>2]=a}a=h+8|0;break e}t:{if(!A)break t;c=r[s+28>>2],a=(c<<2)+17236|0;n:{if(r[a>>2]==(s|0)){if(r[a>>2]=h,h)break n;z=16936,U=Yi(c)&T,r[z>>2]=U;break t}if(r[A+(r[A+16>>2]==(s|0)?16:20)>>2]=h,!h)break t}if(r[h+24>>2]=A,a=r[s+16>>2],a&&(r[h+16>>2]=a,r[a+24>>2]=h),a=r[s+20>>2],!a)break t;r[h+20>>2]=a,r[a+24>>2]=h}t:{if(u>>>0<=15){a=u+y|0,r[s+4>>2]=a|3,a=a+s|0,r[a+4>>2]=r[a+4>>2]|1;break t}if(r[s+4>>2]=y|3,h=s+y|0,r[h+4>>2]=u|1,r[u+h>>2]=u,R){a=R>>>3|0,c=(a<<3)+16972|0,m=r[4238],a=1<<a;n:{if(!(a&f)){r[4233]=a|f,a=c;break n}a=r[c+8>>2]}r[c+8>>2]=m,r[a+12>>2]=m,r[m+12>>2]=c,r[m+8>>2]=a}r[4238]=h,r[4235]=u}a=s+8|0}return re=N+16|0,a|0}function USe(a,s,c){a=a|0,s=s|0,c=c|0;var u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0;T=re-48|0,re=T;e:{if((c|0)!=1)break e;h=r[a+4>>2],A=r[a+12>>2],r[T+40>>2]=0,r[T+32>>2]=0,r[T+36>>2]=0,r[T+24>>2]=0,r[T+28>>2]=0,r[T+16>>2]=0,r[T+20>>2]=0,r[T+8>>2]=0,r[T+12>>2]=0,f=T+8|0;t:{if((s|0)==-2)break t;if(z=r[r[r[h+4>>2]+8>>2]+(A<<2)>>2],(pt[r[r[h>>2]+8>>2]](h)|0)==1){a=Ut[h+36>>1],N=(a<<8|a>>>8)&65535,a=0,R=re-32|0,re=R,m=r[r[r[h+4>>2]+8>>2]+(A<<2)>>2];n:{if((pt[r[r[h>>2]+8>>2]](h)|0)!=1|s-1>>>0>5||(u=pt[r[r[h>>2]+36>>2]](h)|0,y=pt[r[r[h>>2]+44>>2]](h,A)|0,!u|!y))break n;if(c=pt[r[r[h>>2]+40>>2]](h,A)|0,c){a=r[h+44>>2],r[R+12>>2]=c,r[R+8>>2]=a,r[R+20>>2]=y,r[R+16>>2]=y+12,h=R+8|0,a=0;i:{r:{s:switch(s-1|0){case 0:if(a=Te(60),r[a+4>>2]=m,r[a>>2]=3300,m=r[f+8>>2],y=r[f+12>>2],A=r[f+16>>2],u=r[f+20>>2],c=r[f>>2],s=r[f+4>>2],r[a+40>>2]=0,r[a+32>>2]=0,r[a+36>>2]=0,r[a+24>>2]=A,r[a+28>>2]=u,r[a+16>>2]=m,r[a+20>>2]=y,r[a+8>>2]=c,r[a+12>>2]=s,s=r[f+24>>2],u=r[f+28>>2]-s|0,u){if((u|0)<0)break r;c=Te(u),r[a+32>>2]=c,r[a+40>>2]=c+(u>>2<<2),U=a,H=$e(c,s,u)+u|0,r[U+36>>2]=H}s=r[h+4>>2],r[a+44>>2]=r[h>>2],r[a+48>>2]=s,s=r[h+12>>2],r[a+52>>2]=r[h+8>>2],r[a+56>>2]=s,r[a>>2]=2592;break i;case 1:if(a=Te(60),r[a+4>>2]=m,r[a>>2]=3300,m=r[f+8>>2],y=r[f+12>>2],A=r[f+16>>2],u=r[f+20>>2],c=r[f>>2],s=r[f+4>>2],r[a+40>>2]=0,r[a+32>>2]=0,r[a+36>>2]=0,r[a+24>>2]=A,r[a+28>>2]=u,r[a+16>>2]=m,r[a+20>>2]=y,r[a+8>>2]=c,r[a+12>>2]=s,s=r[f+24>>2],u=r[f+28>>2]-s|0,u){if((u|0)<0)break r;c=Te(u),r[a+32>>2]=c,r[a+40>>2]=c+(u>>2<<2),U=a,H=$e(c,s,u)+u|0,r[U+36>>2]=H}s=r[h+4>>2],r[a+44>>2]=r[h>>2],r[a+48>>2]=s,s=r[h+12>>2],r[a+52>>2]=r[h+8>>2],r[a+56>>2]=s,r[a>>2]=3356;break i;case 3:if(a=Te(112),r[a+4>>2]=m,r[a>>2]=3300,m=r[f+8>>2],y=r[f+12>>2],A=r[f+16>>2],u=r[f+20>>2],c=r[f>>2],s=r[f+4>>2],r[a+40>>2]=0,r[a+32>>2]=0,r[a+36>>2]=0,r[a+24>>2]=A,r[a+28>>2]=u,r[a+16>>2]=m,r[a+20>>2]=y,r[a+8>>2]=c,r[a+12>>2]=s,s=r[f+24>>2],u=r[f+28>>2]-s|0,u){if((u|0)<0)break r;c=Te(u),r[a+32>>2]=c,r[a+40>>2]=c+(u>>2<<2),U=a,H=$e(c,s,u)+u|0,r[U+36>>2]=H}s=r[h+4>>2],r[a+44>>2]=r[h>>2],r[a+48>>2]=s,s=r[h+12>>2],r[a+52>>2]=r[h+8>>2],r[a+56>>2]=s,r[a+60>>2]=0,r[a+64>>2]=0,r[a>>2]=3592,r[a+68>>2]=0,r[a+72>>2]=0,r[a+76>>2]=0,r[a+80>>2]=0,r[a+84>>2]=0,r[a+88>>2]=0,r[a+92>>2]=0,r[a+96>>2]=0,r[a+100>>2]=0,r[a+104>>2]=0,r[a+108>>2]=0;break i;case 2:if(a=Te(92),r[a+4>>2]=m,r[a>>2]=3300,m=r[f+8>>2],y=r[f+12>>2],A=r[f+16>>2],u=r[f+20>>2],c=r[f>>2],s=r[f+4>>2],r[a+40>>2]=0,r[a+32>>2]=0,r[a+36>>2]=0,r[a+24>>2]=A,r[a+28>>2]=u,r[a+16>>2]=m,r[a+20>>2]=y,r[a+8>>2]=c,r[a+12>>2]=s,s=r[f+24>>2],u=r[f+28>>2]-s|0,u){if((u|0)<0)break r;c=Te(u),r[a+32>>2]=c,r[a+40>>2]=c+(u>>2<<2),U=a,H=$e(c,s,u)+u|0,r[U+36>>2]=H}s=r[h+4>>2],r[a+44>>2]=r[h>>2],r[a+48>>2]=s,s=r[h+12>>2],r[a+52>>2]=r[h+8>>2],r[a+56>>2]=s,r[a+60>>2]=0,r[a+64>>2]=0,r[a>>2]=3840,r[a+68>>2]=0,r[a+72>>2]=0,r[a+76>>2]=0,r[a+80>>2]=0,r[a+84>>2]=0,r[a+88>>2]=N;break i;case 4:if(a=Te(104),r[a+4>>2]=m,r[a>>2]=3300,m=r[f+8>>2],y=r[f+12>>2],A=r[f+16>>2],u=r[f+20>>2],c=r[f>>2],s=r[f+4>>2],r[a+40>>2]=0,r[a+32>>2]=0,r[a+36>>2]=0,r[a+24>>2]=A,r[a+28>>2]=u,r[a+16>>2]=m,r[a+20>>2]=y,r[a+8>>2]=c,r[a+12>>2]=s,s=r[f+24>>2],u=r[f+28>>2]-s|0,u){if((u|0)<0)break r;c=Te(u),r[a+32>>2]=c,r[a+40>>2]=c+(u>>2<<2),U=a,H=$e(c,s,u)+u|0,r[U+36>>2]=H}s=r[h+4>>2],r[a+44>>2]=r[h>>2],r[a+48>>2]=s,c=r[h+8>>2],s=r[h+12>>2],r[a+84>>2]=0,r[a+76>>2]=0,r[a+80>>2]=0,r[a+60>>2]=0,r[a+64>>2]=0,r[a>>2]=4068,r[a+52>>2]=c,r[a+56>>2]=s,s=r[h+4>>2],r[a+88>>2]=r[h>>2],r[a+92>>2]=s,s=r[h+12>>2],r[a+96>>2]=r[h+8>>2],r[a+100>>2]=s;break i;case 5:break s;default:break i}a=Te(128),r[a+4>>2]=m,r[a>>2]=3300,m=r[f+8>>2],y=r[f+12>>2],A=r[f+16>>2],u=r[f+20>>2],c=r[f>>2],s=r[f+4>>2],r[a+40>>2]=0,r[a+32>>2]=0,r[a+36>>2]=0,r[a+24>>2]=A,r[a+28>>2]=u,r[a+16>>2]=m,r[a+20>>2]=y,r[a+8>>2]=c,r[a+12>>2]=s;s:{a:{if(c=r[f+28>>2]-r[f+24>>2]|0,c){if((c|0)<0)break a;s=Te(c),r[a+32>>2]=s,r[a+36>>2]=s,r[a+40>>2]=s+(c>>2<<2),c=r[f+24>>2],u=r[f+28>>2]-c|0,(u|0)>0&&(s=$e(s,c,u)+u|0),r[a+36>>2]=s}r[a>>2]=3244,s=r[h+4>>2],r[a+44>>2]=r[h>>2],r[a+48>>2]=s,s=r[h+12>>2],r[a+52>>2]=r[h+8>>2],r[a+56>>2]=s,s=a- -64|0,r[s>>2]=0,r[s+4>>2]=0,r[a+60>>2]=4932,r[a>>2]=4304,s=r[h+4>>2],r[a+72>>2]=r[h>>2],r[a+76>>2]=s,s=r[h+12>>2],r[a+80>>2]=r[h+8>>2],r[a+84>>2]=s,r[a+104>>2]=1065353216,r[a+108>>2]=-1,r[a+96>>2]=-1,r[a+100>>2]=-1,r[a+88>>2]=1,r[a+92>>2]=-1,r[a+60>>2]=4540,r[a+112>>2]=0,r[a+116>>2]=0,D[a+117|0]=0,D[a+118|0]=0,D[a+119|0]=0,D[a+120|0]=0,D[a+121|0]=0,D[a+122|0]=0,D[a+123|0]=0,D[a+124|0]=0;break s}jt(),Xe()}break i}jt(),Xe()}break n}a=r[h+44>>2],r[R+12>>2]=u,r[R+8>>2]=a,r[R+20>>2]=y,r[R+16>>2]=y+12,h=R+8|0,a=0;i:{r:{s:switch(s-1|0){case 0:if(a=Te(60),r[a+4>>2]=m,r[a>>2]=3300,m=r[f+8>>2],y=r[f+12>>2],A=r[f+16>>2],u=r[f+20>>2],c=r[f>>2],s=r[f+4>>2],r[a+40>>2]=0,r[a+32>>2]=0,r[a+36>>2]=0,r[a+24>>2]=A,r[a+28>>2]=u,r[a+16>>2]=m,r[a+20>>2]=y,r[a+8>>2]=c,r[a+12>>2]=s,s=r[f+24>>2],u=r[f+28>>2]-s|0,u){if((u|0)<0)break r;c=Te(u),r[a+32>>2]=c,r[a+40>>2]=c+(u>>2<<2),U=a,H=$e(c,s,u)+u|0,r[U+36>>2]=H}s=r[h+4>>2],r[a+44>>2]=r[h>>2],r[a+48>>2]=s,s=r[h+12>>2],r[a+52>>2]=r[h+8>>2],r[a+56>>2]=s,r[a>>2]=4960;break i;case 1:if(a=Te(60),r[a+4>>2]=m,r[a>>2]=3300,m=r[f+8>>2],y=r[f+12>>2],A=r[f+16>>2],u=r[f+20>>2],c=r[f>>2],s=r[f+4>>2],r[a+40>>2]=0,r[a+32>>2]=0,r[a+36>>2]=0,r[a+24>>2]=A,r[a+28>>2]=u,r[a+16>>2]=m,r[a+20>>2]=y,r[a+8>>2]=c,r[a+12>>2]=s,s=r[f+24>>2],u=r[f+28>>2]-s|0,u){if((u|0)<0)break r;c=Te(u),r[a+32>>2]=c,r[a+40>>2]=c+(u>>2<<2),U=a,H=$e(c,s,u)+u|0,r[U+36>>2]=H}s=r[h+4>>2],r[a+44>>2]=r[h>>2],r[a+48>>2]=s,s=r[h+12>>2],r[a+52>>2]=r[h+8>>2],r[a+56>>2]=s,r[a>>2]=5384;break i;case 3:if(a=Te(112),r[a+4>>2]=m,r[a>>2]=3300,m=r[f+8>>2],y=r[f+12>>2],A=r[f+16>>2],u=r[f+20>>2],c=r[f>>2],s=r[f+4>>2],r[a+40>>2]=0,r[a+32>>2]=0,r[a+36>>2]=0,r[a+24>>2]=A,r[a+28>>2]=u,r[a+16>>2]=m,r[a+20>>2]=y,r[a+8>>2]=c,r[a+12>>2]=s,s=r[f+24>>2],u=r[f+28>>2]-s|0,u){if((u|0)<0)break r;c=Te(u),r[a+32>>2]=c,r[a+40>>2]=c+(u>>2<<2),U=a,H=$e(c,s,u)+u|0,r[U+36>>2]=H}s=r[h+4>>2],r[a+44>>2]=r[h>>2],r[a+48>>2]=s,s=r[h+12>>2],r[a+52>>2]=r[h+8>>2],r[a+56>>2]=s,r[a+60>>2]=0,r[a+64>>2]=0,r[a>>2]=5608,r[a+68>>2]=0,r[a+72>>2]=0,r[a+76>>2]=0,r[a+80>>2]=0,r[a+84>>2]=0,r[a+88>>2]=0,r[a+92>>2]=0,r[a+96>>2]=0,r[a+100>>2]=0,r[a+104>>2]=0,r[a+108>>2]=0;break i;case 2:if(a=Te(92),r[a+4>>2]=m,r[a>>2]=3300,m=r[f+8>>2],y=r[f+12>>2],A=r[f+16>>2],u=r[f+20>>2],c=r[f>>2],s=r[f+4>>2],r[a+40>>2]=0,r[a+32>>2]=0,r[a+36>>2]=0,r[a+24>>2]=A,r[a+28>>2]=u,r[a+16>>2]=m,r[a+20>>2]=y,r[a+8>>2]=c,r[a+12>>2]=s,s=r[f+24>>2],u=r[f+28>>2]-s|0,u){if((u|0)<0)break r;c=Te(u),r[a+32>>2]=c,r[a+40>>2]=c+(u>>2<<2),U=a,H=$e(c,s,u)+u|0,r[U+36>>2]=H}s=r[h+4>>2],r[a+44>>2]=r[h>>2],r[a+48>>2]=s,s=r[h+12>>2],r[a+52>>2]=r[h+8>>2],r[a+56>>2]=s,r[a+60>>2]=0,r[a+64>>2]=0,r[a>>2]=5844,r[a+68>>2]=0,r[a+72>>2]=0,r[a+76>>2]=0,r[a+80>>2]=0,r[a+84>>2]=0,r[a+88>>2]=N;break i;case 4:if(a=Te(104),r[a+4>>2]=m,r[a>>2]=3300,m=r[f+8>>2],y=r[f+12>>2],A=r[f+16>>2],u=r[f+20>>2],c=r[f>>2],s=r[f+4>>2],r[a+40>>2]=0,r[a+32>>2]=0,r[a+36>>2]=0,r[a+24>>2]=A,r[a+28>>2]=u,r[a+16>>2]=m,r[a+20>>2]=y,r[a+8>>2]=c,r[a+12>>2]=s,s=r[f+24>>2],u=r[f+28>>2]-s|0,u){if((u|0)<0)break r;c=Te(u),r[a+32>>2]=c,r[a+40>>2]=c+(u>>2<<2),U=a,H=$e(c,s,u)+u|0,r[U+36>>2]=H}s=r[h+4>>2],r[a+44>>2]=r[h>>2],r[a+48>>2]=s,c=r[h+8>>2],s=r[h+12>>2],r[a+84>>2]=0,r[a+76>>2]=0,r[a+80>>2]=0,r[a+60>>2]=0,r[a+64>>2]=0,r[a>>2]=6060,r[a+52>>2]=c,r[a+56>>2]=s,s=r[h+4>>2],r[a+88>>2]=r[h>>2],r[a+92>>2]=s,s=r[h+12>>2],r[a+96>>2]=r[h+8>>2],r[a+100>>2]=s;break i;case 5:break s;default:break i}a=Te(128),r[a+4>>2]=m,r[a>>2]=3300,m=r[f+8>>2],y=r[f+12>>2],A=r[f+16>>2],u=r[f+20>>2],c=r[f>>2],s=r[f+4>>2],r[a+40>>2]=0,r[a+32>>2]=0,r[a+36>>2]=0,r[a+24>>2]=A,r[a+28>>2]=u,r[a+16>>2]=m,r[a+20>>2]=y,r[a+8>>2]=c,r[a+12>>2]=s;s:{a:{if(c=r[f+28>>2]-r[f+24>>2]|0,c){if((c|0)<0)break a;s=Te(c),r[a+32>>2]=s,r[a+36>>2]=s,r[a+40>>2]=s+(c>>2<<2),c=r[f+24>>2],u=r[f+28>>2]-c|0,(u|0)>0&&(s=$e(s,c,u)+u|0),r[a+36>>2]=s}r[a>>2]=5328,s=r[h+4>>2],r[a+44>>2]=r[h>>2],r[a+48>>2]=s,s=r[h+12>>2],r[a+52>>2]=r[h+8>>2],r[a+56>>2]=s,s=a- -64|0,r[s>>2]=0,r[s+4>>2]=0,r[a+60>>2]=6868,r[a>>2]=6284,s=r[h+4>>2],r[a+72>>2]=r[h>>2],r[a+76>>2]=s,s=r[h+12>>2],r[a+80>>2]=r[h+8>>2],r[a+84>>2]=s,r[a+104>>2]=1065353216,r[a+108>>2]=-1,r[a+96>>2]=-1,r[a+100>>2]=-1,r[a+88>>2]=1,r[a+92>>2]=-1,r[a+60>>2]=6504,r[a+112>>2]=0,r[a+116>>2]=0,D[a+117|0]=0,D[a+118|0]=0,D[a+119|0]=0,D[a+120|0]=0,D[a+121|0]=0,D[a+122|0]=0,D[a+123|0]=0,D[a+124|0]=0;break s}jt(),Xe()}break i}jt(),Xe()}}if(re=R+32|0,u=a,a)break t}u=Te(44),r[u+4>>2]=z,r[u>>2]=3300,m=r[f+8>>2],y=r[f+12>>2],A=r[f+16>>2],c=r[f+20>>2],s=r[f>>2],a=r[f+4>>2],r[u+40>>2]=0,r[u+32>>2]=0,r[u+36>>2]=0,r[u+24>>2]=A,r[u+28>>2]=c,r[u+16>>2]=m,r[u+20>>2]=y,r[u+8>>2]=s,r[u+12>>2]=a;n:{if(a=r[f+24>>2],c=r[f+28>>2]-a|0,c){if((c|0)<0)break n;s=Te(c),r[u+32>>2]=s,r[u+40>>2]=s+(c>>2<<2),U=u,H=$e(s,a,c)+c|0,r[U+36>>2]=H}r[u>>2]=6896;break t}jt(),Xe()}if(a=r[T+32>>2],!a)break e;r[T+36>>2]=a,W(a)}return re=T+48|0,u|0}function Aee(a,s){var c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0,ie=0,ge=0;R=re-48|0,re=R,c=Te(8),r[c+4>>2]=s,r[c>>2]=0,s=c+8|0,r[R+40>>2]=s,r[R+36>>2]=s,r[R+32>>2]=c;e:{t:{n:{i:{for(;;){if(s=s-8|0,T=r[s+4>>2],m=r[s>>2],r[R+36>>2]=s,m){r[R+24>>2]=0,r[R+16>>2]=0,r[R+20>>2]=0,c=1,s=r[a>>2],f=r[s+8>>2],y=r[s+12>>2],u=r[s+20>>2],h=r[s+16>>2];r:{if((y|0)<=(u|0)&h>>>0>=f>>>0|(u|0)>(y|0))break r;if(f=I[h+r[s>>2]|0],h=h+1|0,u=h?u:u+1|0,r[s+16>>2]=h,r[s+20>>2]=u,OB(R+16|0,f),f){if(u=r[a>>2],z=JB(R+16|0),h=r[u+20>>2],A=r[u+16>>2],s=f,U=A+f|0,y=r[u+12>>2],h=f>>>0>U>>>0?h+1|0:h,U>>>0>Ue[u+8>>2]&(y|0)<=(h|0)|(h|0)>(y|0))break r;$e(z,A+r[u>>2]|0,f),c=r[u+20>>2],f=s+r[u+16>>2]|0,c=f>>>0<s>>>0?c+1|0:c,r[u+16>>2]=f,r[u+20>>2]=c}T=Te(24),s=T,r[s+4>>2]=0,r[s+8>>2]=0,s=s+16|0,r[s>>2]=0,r[s+4>>2]=0,r[T>>2]=T+4,r[T+12>>2]=s,f=re-32|0,re=f,h=m+12|0,c=R+16|0,N=qm(h,c),Z=m+16|0;s:{if((N|0)==(Z|0)){r[f+16>>2]=c,s=r[h+4>>2];a:{o:{if(s)for(u=I[c+11|0],m=u<<24>>24<0,y=m?r[c>>2]:c,m=m?r[c+4>>2]:u,c=h+4|0;;){u=I[s+27|0],U=u<<24>>24<0,u=U?r[s+20>>2]:u,z=u>>>0<m>>>0;c:{l:{u:{f:{d:{A=z?u:m;p:{if(A){if(H=s+16|0,U=U?r[H>>2]:H,H=Io(y,U,A),!H){if(u>>>0>m>>>0)break p;break d}if((H|0)>=0)break d;break p}if(u>>>0<=m>>>0)break f}if(u=r[s>>2],u)break c;break o}if(u=Io(U,y,A),u)break u}if(z)break l;break a}if((u|0)>=0)break a}if(c=s+4|0,u=r[s+4>>2],!u)break a;s=c}c=s,s=u}s=h+4|0}c=s}if(u=r[c>>2],u)s=0;else{u=Te(32),y=u+16|0,m=r[f+16>>2];a:{if(D[m+11|0]>=0){U=r[m+4>>2],r[y>>2]=r[m>>2],r[y+4>>2]=U,r[y+8>>2]=r[m+8>>2];break a}Ri(y,r[m>>2],r[m+4>>2])}r[u+8>>2]=s,r[u>>2]=0,r[u+4>>2]=0,r[u+28>>2]=0,r[c>>2]=u,s=r[r[h>>2]>>2],s?(r[h>>2]=s,s=r[c>>2]):s=u,HA(r[h+4>>2],s),r[h+8>>2]=r[h+8>>2]+1,s=1}if(D[f+28|0]=s,r[f+24>>2]=u,c=r[f+24>>2],s=r[c+28>>2],r[c+28>>2]=T,!s)break s;Qc(s+12|0,r[s+16>>2]),Kc(s,r[s+4>>2]),W(s);break s}if(!T)break s;Qc(T+12|0,r[T+16>>2]),Kc(T,r[T+4>>2]),W(T)}re=f+32|0,c=(N|0)!=(Z|0)}if(D[R+27|0]<0&&W(r[R+16>>2]),c)break t}if(!T||(r[R+16>>2]=0,!jv(1,R+16|0,r[a>>2])))break t;if(s=0,ge=r[R+16>>2],ge)for(;;){U=0,A=re-32|0,re=A,r[A+24>>2]=0,r[A+16>>2]=0,r[A+20>>2]=0,c=r[a>>2],f=r[c+8>>2];r:{s:{h=r[c+12>>2],u=r[c+20>>2],m=r[c+16>>2];a:{if((h|0)<=(u|0)&m>>>0>=f>>>0|(u|0)>(h|0))break a;if(h=I[m+r[c>>2]|0],f=c,c=u,u=m+1|0,c=u?c:c+1|0,r[f+16>>2]=u,r[f+20>>2]=c,OB(A+16|0,h),h){if(f=r[a>>2],z=JB(A+16|0),u=r[f+20>>2],N=r[f+16>>2],c=h,y=N+c|0,m=r[f+12>>2],u=c>>>0>y>>>0?u+1|0:u,y>>>0>Ue[f+8>>2]&(m|0)<=(u|0)|(u|0)>(m|0))break a;$e(z,N+r[f>>2]|0,h),u=r[f+20>>2],h=c+r[f+16>>2]|0,u=h>>>0<c>>>0?u+1|0:u,r[f+16>>2]=h,r[f+20>>2]=u}if(r[A+12>>2]=0,!jv(1,A+12|0,r[a>>2])||(c=r[A+12>>2],!c))break a;if(r[A+8>>2]=0,r[A>>2]=0,r[A+4>>2]=0,(c|0)<0)break s;if(u=Te(c),r[A>>2]=u,f=c+u|0,r[A+8>>2]=f,z=Ct(u,0,c),r[A+4>>2]=f,f=r[a>>2],U=r[f+8>>2],m=r[f+12>>2],h=r[f+20>>2],N=r[f+16>>2],y=c+N|0,h=y>>>0<c>>>0?h+1|0:h,U=(h|0)<=(m|0)&y>>>0<=U>>>0|(h|0)<(m|0),U){if($e(z,N+r[f>>2]|0,c),u=c,h=c+r[f+16>>2]|0,c=r[f+20>>2],r[f+16>>2]=h,r[f+20>>2]=u>>>0>h>>>0?c+1|0:c,m=re-48|0,re=m,u=qm(T,A+16|0),(u|0)!=(T+4|0)){f=r[u+4>>2];o:{if(!f){if(h=r[u+8>>2],r[h>>2]==(u|0))break o;for(c=u+8|0;f=r[c>>2],c=f+8|0,h=r[f+8>>2],(f|0)!=r[h>>2];);break o}for(;h=f,f=r[f>>2],!!f;);}r[T>>2]==(u|0)&&(r[T>>2]=h),r[T+8>>2]=r[T+8>>2]-1,h=r[T+4>>2],y=u;o:{c:{if(f=r[u>>2],f){if(c=r[y+4>>2],!c)break c;for(;u=c,c=r[c>>2],!!c;);}if(f=r[u+4>>2],f)break c;f=0,z=1;break o}r[f+8>>2]=r[u+8>>2],z=0}N=r[u+8>>2],c=r[N>>2];o:{if((u|0)==(c|0)){if(r[N>>2]=f,(u|0)==(h|0)){c=0,h=f;break o}c=r[N+4>>2];break o}r[N+4>>2]=f}H=!I[u+12|0],(u|0)!=(y|0)&&(N=r[y+8>>2],r[u+8>>2]=N,r[N+(((y|0)!=r[r[y+8>>2]>>2])<<2)>>2]=u,N=r[y>>2],r[u>>2]=N,r[N+8>>2]=u,N=r[y+4>>2],r[u+4>>2]=N,N&&(r[N+8>>2]=u),D[u+12|0]=I[y+12|0],h=(h|0)==(y|0)?u:h);o:{if(H|!h)break o;if(z)for(;;){f=I[c+12|0];c:{if(u=r[c+8>>2],r[u>>2]!=(c|0)){f||(D[c+12|0]=1,D[u+12|0]=0,f=r[u+4>>2],z=r[f>>2],r[u+4>>2]=z,z&&(r[z+8>>2]=u),r[f+8>>2]=r[u+8>>2],z=r[u+8>>2],r[(((u|0)!=r[z>>2])<<2)+z>>2]=f,r[f>>2]=u,r[u+8>>2]=f,u=c,c=r[c>>2],h=(c|0)==(h|0)?u:h,c=r[c+4>>2]);l:{u:{u=r[c>>2];f:{if(!(!I[u+12|0]&&u)){if(f=r[c+4>>2],!I[f+12|0]&&f)break f;D[c+12|0]=0,c=r[c+8>>2];d:{if((h|0)==(c|0)){c=h;break d}if(I[c+12|0])break c}D[c+12|0]=1;break o}if(f=r[c+4>>2],!f)break u}if(I[f+12|0])break u;u=c;break l}D[u+12|0]=1,D[c+12|0]=0,f=r[u+4>>2],r[c>>2]=f,f&&(r[f+8>>2]=c),r[u+8>>2]=r[c+8>>2],f=r[c+8>>2],r[((r[f>>2]!=(c|0))<<2)+f>>2]=u,r[u+4>>2]=c,r[c+8>>2]=u,f=c}c=r[u+8>>2],D[u+12|0]=I[c+12|0],D[c+12|0]=1,D[f+12|0]=1,u=r[c+4>>2],f=r[u>>2],r[c+4>>2]=f,f&&(r[f+8>>2]=c),r[u+8>>2]=r[c+8>>2],f=r[c+8>>2],r[(((c|0)!=r[f>>2])<<2)+f>>2]=u,r[u>>2]=c,r[c+8>>2]=u;break o}f||(D[c+12|0]=1,D[u+12|0]=0,f=r[c+4>>2],r[u>>2]=f,f&&(r[f+8>>2]=u),r[c+8>>2]=r[u+8>>2],f=r[u+8>>2],r[(((u|0)!=r[f>>2])<<2)+f>>2]=c,r[c+4>>2]=u,r[u+8>>2]=c,h=(u|0)==(h|0)?c:h,c=r[u>>2]),f=r[c>>2];l:{if(!(!f|I[f+12|0])){u=c;break l}if(u=r[c+4>>2],!(!I[u+12|0]&&u)){if(D[c+12|0]=0,c=r[c+8>>2],(c|0)!=(h|0)&&I[c+12|0])break c;D[c+12|0]=1;break o}if(f){if(!I[f+12|0]){u=c;break l}u=r[c+4>>2]}D[u+12|0]=1,D[c+12|0]=0,f=r[u>>2],r[c+4>>2]=f,f&&(r[f+8>>2]=c),r[u+8>>2]=r[c+8>>2],f=r[c+8>>2],r[((r[f>>2]!=(c|0))<<2)+f>>2]=u,r[u>>2]=c,r[c+8>>2]=u,f=c}c=r[u+8>>2],D[u+12|0]=I[c+12|0],D[c+12|0]=1,D[f+12|0]=1,u=r[c>>2],f=r[u+4>>2],r[c>>2]=f,f&&(r[f+8>>2]=c),r[u+8>>2]=r[c+8>>2],f=r[c+8>>2],r[(((c|0)!=r[f>>2])<<2)+f>>2]=u,r[u+4>>2]=c,r[c+8>>2]=u;break o}u=c,c=r[c+8>>2],c=r[(((u|0)==r[c>>2])<<2)+c>>2]}D[f+12|0]=1}c=r[y+28>>2],c&&(r[y+32>>2]=c,W(c)),D[y+27|0]<0&&W(r[y+16>>2]),W(y)}r[m>>2]=0,r[m+4>>2]=0,r[m+8>>2]=0,c=r[A+4>>2]-r[A>>2]|0,$f(m,c),$e(r[m>>2],r[A>>2],c);o:{if(D[A+27|0]>=0){r[m+24>>2]=r[A+24>>2],c=r[A+20>>2],r[m+16>>2]=r[A+16>>2],r[m+20>>2]=c;break o}Ri(m+16|0,r[A+16>>2],r[A+20>>2])}r[m+36>>2]=0,r[m+28>>2]=0,r[m+32>>2]=0,$f(m+28|0,r[m+4>>2]-r[m>>2]|0),c=r[m>>2],$e(r[m+28>>2],c,r[m+4>>2]-c|0),h=m+16|0,u=h,c=r[T+4>>2];o:{c:{if(c)for(f=I[u+11|0],y=f<<24>>24<0,z=y?r[u>>2]:u,y=y?r[u+4>>2]:f,u=T+4|0;;){f=I[c+27|0],N=f<<24>>24<0,f=N?r[c+20>>2]:f,Z=f>>>0<y>>>0;l:{u:{f:{d:{p:{H=Z?f:y;m:{if(H){if(ie=c+16|0,N=N?r[ie>>2]:ie,ie=Io(z,N,H),!ie){if(f>>>0>y>>>0)break m;break p}if((ie|0)>=0)break p;break m}if(f>>>0<=y>>>0)break d}if(f=r[c>>2],f)break l;break c}if(f=Io(N,z,H),f)break f}if(Z)break u;break o}if((f|0)>=0)break o}if(u=c+4|0,f=r[c+4>>2],!f)break o;c=u}u=c,c=f}c=T+4|0}u=c}if(f=r[u>>2],f?c=0:(f=Te(40),r[f+24>>2]=r[h+8>>2],y=r[h+4>>2],r[f+16>>2]=r[h>>2],r[f+20>>2]=y,r[h>>2]=0,r[h+4>>2]=0,r[h+8>>2]=0,r[f+36>>2]=0,y=f+28|0,r[y>>2]=0,r[y+4>>2]=0,$f(y,r[h+16>>2]-r[h+12>>2]|0),z=r[y>>2],y=r[h+12>>2],$e(z,y,r[h+16>>2]-y|0),r[f+8>>2]=c,r[f>>2]=0,r[f+4>>2]=0,r[u>>2]=f,c=r[r[T>>2]>>2],c?(r[T>>2]=c,c=r[u>>2]):c=f,HA(r[T+4>>2],c),r[T+8>>2]=r[T+8>>2]+1,c=1),D[m+44|0]=c,r[m+40>>2]=f,c=r[m+28>>2],c&&(r[m+32>>2]=c,W(c)),D[m+27|0]<0&&W(r[m+16>>2]),c=r[m>>2],c&&(r[m+4>>2]=c,W(c)),re=m+48|0,u=r[A>>2],!u)break a}r[A+4>>2]=u,W(u)}D[A+27|0]<0&&W(r[A+16>>2]),re=A+32|0;break r}jt(),Xe()}if(!U)break t;if(s=s+1|0,(ge|0)==(s|0))break}if(r[R+12>>2]=0,!jv(1,R+12|0,r[a>>2])||(s=r[a>>2],c=r[s+8>>2],u=r[s+16>>2],f=c-u|0,h=r[R+12>>2],s=r[s+12>>2]-(r[s+20>>2]+(c>>>0<u>>>0)|0)|0,f>>>0<h>>>0&(s|0)<=0|(s|0)<0))break t;if(c=0,s=r[R+36>>2],h)for(;;){f=r[R+40>>2];r:{if(f>>>0>s>>>0){r[s+4>>2]=0,r[s>>2]=T,s=s+8|0,r[R+36>>2]=s;break r}if(u=r[R+32>>2],m=s-u|0,y=m>>3,s=y+1|0,s>>>0>=536870912)break i;if(f=f-u|0,U=f>>2,s=f>>>0<2147483640?s>>>0>U>>>0?s:U:536870911,s>>>0>=536870912)break n;if(z=y<<3,y=s<<3,f=Te(y),s=z+f|0,r[s+4>>2]=0,r[s>>2]=T,s=s+8|0,(m|0)>0&&$e(f,u,m),r[R+40>>2]=f+y,r[R+36>>2]=s,r[R+32>>2]=f,!u)break r;W(u)}if(c=c+1|0,(h|0)==(c|0))break}if(r[R+32>>2]==(s|0))break}a=1;break e}jt(),Xe()}qn(1336),Xe()}s=r[R+32>>2],a=0}return s&&W(s),re=R+48|0,a}function wee(a,s,c,u,f){var h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0;y=re-32|0,re=y,r[s+32>>2]=u,r[s+40>>2]=c,r[s+4>>2]=f,NM(a,u,y+16|0);e:{if(r[a>>2])break e;if(A=a+4|0,D[a+15|0]<0&&W(r[A>>2]),u=I[y+23|0],(pt[r[r[s>>2]+8>>2]](s)|0)!=(u|0)){s=Te(64),c=I[1458]|I[1459]<<8,D[s+48|0]=c,D[s+49|0]=c>>>8,c=I[1454]|I[1455]<<8|(I[1456]<<16|I[1457]<<24),u=I[1450]|I[1451]<<8|(I[1452]<<16|I[1453]<<24),D[s+40|0]=u,D[s+41|0]=u>>>8,D[s+42|0]=u>>>16,D[s+43|0]=u>>>24,D[s+44|0]=c,D[s+45|0]=c>>>8,D[s+46|0]=c>>>16,D[s+47|0]=c>>>24,c=I[1446]|I[1447]<<8|(I[1448]<<16|I[1449]<<24),u=I[1442]|I[1443]<<8|(I[1444]<<16|I[1445]<<24),D[s+32|0]=u,D[s+33|0]=u>>>8,D[s+34|0]=u>>>16,D[s+35|0]=u>>>24,D[s+36|0]=c,D[s+37|0]=c>>>8,D[s+38|0]=c>>>16,D[s+39|0]=c>>>24,c=I[1438]|I[1439]<<8|(I[1440]<<16|I[1441]<<24),u=I[1434]|I[1435]<<8|(I[1436]<<16|I[1437]<<24),D[s+24|0]=u,D[s+25|0]=u>>>8,D[s+26|0]=u>>>16,D[s+27|0]=u>>>24,D[s+28|0]=c,D[s+29|0]=c>>>8,D[s+30|0]=c>>>16,D[s+31|0]=c>>>24,c=I[1430]|I[1431]<<8|(I[1432]<<16|I[1433]<<24),u=I[1426]|I[1427]<<8|(I[1428]<<16|I[1429]<<24),D[s+16|0]=u,D[s+17|0]=u>>>8,D[s+18|0]=u>>>16,D[s+19|0]=u>>>24,D[s+20|0]=c,D[s+21|0]=c>>>8,D[s+22|0]=c>>>16,D[s+23|0]=c>>>24,c=I[1422]|I[1423]<<8|(I[1424]<<16|I[1425]<<24),u=I[1418]|I[1419]<<8|(I[1420]<<16|I[1421]<<24),D[s+8|0]=u,D[s+9|0]=u>>>8,D[s+10|0]=u>>>16,D[s+11|0]=u>>>24,D[s+12|0]=c,D[s+13|0]=c>>>8,D[s+14|0]=c>>>16,D[s+15|0]=c>>>24,c=I[1414]|I[1415]<<8|(I[1416]<<16|I[1417]<<24),u=I[1410]|I[1411]<<8|(I[1412]<<16|I[1413]<<24),D[s|0]=u,D[s+1|0]=u>>>8,D[s+2|0]=u>>>16,D[s+3|0]=u>>>24,D[s+4|0]=c,D[s+5|0]=c>>>8,D[s+6|0]=c>>>16,D[s+7|0]=c>>>24,D[s+50|0]=0,r[a>>2]=-1,Ri(A,s,50),W(s);break e}if(c=I[y+21|0],D[s+36|0]=c,f=I[y+22|0],D[s+37|0]=f,(c-3&255)>>>0<=253){s=Te(32),c=I[1571]|I[1572]<<8|(I[1573]<<16|I[1574]<<24),u=I[1567]|I[1568]<<8|(I[1569]<<16|I[1570]<<24),D[s+14|0]=u,D[s+15|0]=u>>>8,D[s+16|0]=u>>>16,D[s+17|0]=u>>>24,D[s+18|0]=c,D[s+19|0]=c>>>8,D[s+20|0]=c>>>16,D[s+21|0]=c>>>24,c=I[1565]|I[1566]<<8|(I[1567]<<16|I[1568]<<24),u=I[1561]|I[1562]<<8|(I[1563]<<16|I[1564]<<24),D[s+8|0]=u,D[s+9|0]=u>>>8,D[s+10|0]=u>>>16,D[s+11|0]=u>>>24,D[s+12|0]=c,D[s+13|0]=c>>>8,D[s+14|0]=c>>>16,D[s+15|0]=c>>>24,c=I[1557]|I[1558]<<8|(I[1559]<<16|I[1560]<<24),u=I[1553]|I[1554]<<8|(I[1555]<<16|I[1556]<<24),D[s|0]=u,D[s+1|0]=u>>>8,D[s+2|0]=u>>>16,D[s+3|0]=u>>>24,D[s+4|0]=c,D[s+5|0]=c>>>8,D[s+6|0]=c>>>16,D[s+7|0]=c>>>24,D[s+22|0]=0,r[a>>2]=-5,Ri(A,s,22),W(s);break e}if(!((c|0)!=2|f>>>0<=(u?2:3)>>>0)){s=Te(32),c=I[1548]|I[1549]<<8|(I[1550]<<16|I[1551]<<24),u=I[1544]|I[1545]<<8|(I[1546]<<16|I[1547]<<24),D[s+14|0]=u,D[s+15|0]=u>>>8,D[s+16|0]=u>>>16,D[s+17|0]=u>>>24,D[s+18|0]=c,D[s+19|0]=c>>>8,D[s+20|0]=c>>>16,D[s+21|0]=c>>>24,c=I[1542]|I[1543]<<8|(I[1544]<<16|I[1545]<<24),u=I[1538]|I[1539]<<8|(I[1540]<<16|I[1541]<<24),D[s+8|0]=u,D[s+9|0]=u>>>8,D[s+10|0]=u>>>16,D[s+11|0]=u>>>24,D[s+12|0]=c,D[s+13|0]=c>>>8,D[s+14|0]=c>>>16,D[s+15|0]=c>>>24,c=I[1534]|I[1535]<<8|(I[1536]<<16|I[1537]<<24),u=I[1530]|I[1531]<<8|(I[1532]<<16|I[1533]<<24),D[s|0]=u,D[s+1|0]=u>>>8,D[s+2|0]=u>>>16,D[s+3|0]=u>>>24,D[s+4|0]=c,D[s+5|0]=c>>>8,D[s+6|0]=c>>>16,D[s+7|0]=c>>>24,D[s+22|0]=0,r[a>>2]=-5,Ri(A,s,22),W(s);break e}c=f|c<<8,zt[r[s+32>>2]+38>>1]=c;t:{if((c&65535)>>>0<259|zt[y+26>>1]>=0)break t;T=re-16|0,re=T,f=Te(36),c=f,r[c+4>>2]=0,r[c+8>>2]=0,r[c+24>>2]=0,r[c+28>>2]=0,c=c+16|0,r[c>>2]=0,r[c+4>>2]=0,r[f>>2]=f+4,r[f+32>>2]=0,r[f+12>>2]=c,r[T>>2]=0,u=r[s+32>>2],R=re-16|0,re=R,c=0;n:{if(!f||(r[T>>2]=u,r[R+12>>2]=0,c=0,!jv(1,R+12|0,u)))break n;if(U=r[R+12>>2],U)for(;;){i:{if(jv(1,R+8|0,r[T>>2])){if(c=Te(28),r[c+4>>2]=0,r[c+8>>2]=0,u=c+16|0,r[u>>2]=0,r[u+4>>2]=0,r[c>>2]=c+4,r[c+12>>2]=u,r[c+24>>2]=r[R+8>>2],Aee(T,c))break i;Qc(c+12|0,r[c+16>>2]),Kc(c,r[c+4>>2]),W(c)}c=0;break n}h=re-16|0,re=h,r[h+8>>2]=c;i:{if(!c){r[h+8>>2]=0;break i}u=r[f+28>>2];r:{if(u>>>0<Ue[f+32>>2]){r[h+8>>2]=0,r[u>>2]=c,r[f+28>>2]=u+4;break r}u=0;s:{a:{o:{if(m=r[f+24>>2],z=r[f+28>>2]-m>>2,c=z+1|0,c>>>0<1073741824){if(m=r[f+32>>2]-m|0,N=m>>1,c=m>>>0<2147483644?c>>>0>N>>>0?c:N:1073741823,c){if(c>>>0>=1073741824)break o;u=Te(c<<2)}if(N=r[h+8>>2],r[h+8>>2]=0,m=(z<<2)+u|0,r[m>>2]=N,z=(c<<2)+u|0,N=m+4|0,u=r[f+28>>2],c=r[f+24>>2],(u|0)==(c|0))break a;for(;u=u-4|0,Z=r[u>>2],r[u>>2]=0,m=m-4|0,r[m>>2]=Z,(c|0)!=(u|0););if(r[f+32>>2]=z,u=r[f+28>>2],r[f+28>>2]=N,c=r[f+24>>2],r[f+24>>2]=m,(c|0)==(u|0))break s;for(;u=u-4|0,m=r[u>>2],r[u>>2]=0,m&&(Qc(m+12|0,r[m+16>>2]),Kc(m,r[m+4>>2]),W(m)),(c|0)!=(u|0););break s}jt(),Xe()}qn(1336),Xe()}r[f+32>>2]=z,r[f+28>>2]=N,r[f+24>>2]=m}c&&W(c)}if(c=r[h+8>>2],r[h+8>>2]=0,!c)break i;Qc(c+12|0,r[c+16>>2]),Kc(c,r[c+4>>2]),W(c)}if(re=h+16|0,H=H+1|0,(U|0)==(H|0))break}c=Aee(T,f)}re=R+16|0;n:{if(c){u=r[s+4>>2],c=r[u+4>>2],r[u+4>>2]=f,c&&WB(c),r[a>>2]=0,r[a+4>>2]=0,r[a+8>>2]=0,r[a+12>>2]=0;break n}c=Te(32),u=I[1723]|I[1724]<<8,D[c+24|0]=u,D[c+25|0]=u>>>8,u=I[1719]|I[1720]<<8|(I[1721]<<16|I[1722]<<24),h=I[1715]|I[1716]<<8|(I[1717]<<16|I[1718]<<24),D[c+16|0]=h,D[c+17|0]=h>>>8,D[c+18|0]=h>>>16,D[c+19|0]=h>>>24,D[c+20|0]=u,D[c+21|0]=u>>>8,D[c+22|0]=u>>>16,D[c+23|0]=u>>>24,u=I[1711]|I[1712]<<8|(I[1713]<<16|I[1714]<<24),h=I[1707]|I[1708]<<8|(I[1709]<<16|I[1710]<<24),D[c+8|0]=h,D[c+9|0]=h>>>8,D[c+10|0]=h>>>16,D[c+11|0]=h>>>24,D[c+12|0]=u,D[c+13|0]=u>>>8,D[c+14|0]=u>>>16,D[c+15|0]=u>>>24,u=I[1703]|I[1704]<<8|(I[1705]<<16|I[1706]<<24),h=I[1699]|I[1700]<<8|(I[1701]<<16|I[1702]<<24),D[c|0]=h,D[c+1|0]=h>>>8,D[c+2|0]=h>>>16,D[c+3|0]=h>>>24,D[c+4|0]=u,D[c+5|0]=u>>>8,D[c+6|0]=u>>>16,D[c+7|0]=u>>>24,D[c+26|0]=0,r[a>>2]=-1,Ri(a+4|0,c,26),W(c),r[T+8>>2]=0,WB(f)}if(re=T+16|0,r[a>>2])break e;if(D[A+11|0]>=0)break t;W(r[A>>2])}if(!(pt[r[r[s>>2]+12>>2]](s)|0)){s=Te(48),D[s+32|0]=I[1528],c=I[1524]|I[1525]<<8|(I[1526]<<16|I[1527]<<24),u=I[1520]|I[1521]<<8|(I[1522]<<16|I[1523]<<24),D[s+24|0]=u,D[s+25|0]=u>>>8,D[s+26|0]=u>>>16,D[s+27|0]=u>>>24,D[s+28|0]=c,D[s+29|0]=c>>>8,D[s+30|0]=c>>>16,D[s+31|0]=c>>>24,c=I[1516]|I[1517]<<8|(I[1518]<<16|I[1519]<<24),u=I[1512]|I[1513]<<8|(I[1514]<<16|I[1515]<<24),D[s+16|0]=u,D[s+17|0]=u>>>8,D[s+18|0]=u>>>16,D[s+19|0]=u>>>24,D[s+20|0]=c,D[s+21|0]=c>>>8,D[s+22|0]=c>>>16,D[s+23|0]=c>>>24,c=I[1508]|I[1509]<<8|(I[1510]<<16|I[1511]<<24),u=I[1504]|I[1505]<<8|(I[1506]<<16|I[1507]<<24),D[s+8|0]=u,D[s+9|0]=u>>>8,D[s+10|0]=u>>>16,D[s+11|0]=u>>>24,D[s+12|0]=c,D[s+13|0]=c>>>8,D[s+14|0]=c>>>16,D[s+15|0]=c>>>24,c=I[1500]|I[1501]<<8|(I[1502]<<16|I[1503]<<24),u=I[1496]|I[1497]<<8|(I[1498]<<16|I[1499]<<24),D[s|0]=u,D[s+1|0]=u>>>8,D[s+2|0]=u>>>16,D[s+3|0]=u>>>24,D[s+4|0]=c,D[s+5|0]=c>>>8,D[s+6|0]=c>>>16,D[s+7|0]=c>>>24,D[s+33|0]=0,r[a>>2]=-1,Ri(A,s,33),W(s);break e}if(!(pt[r[r[s>>2]+20>>2]](s)|0)){if(s=qM(y,1726),r[a>>2]=-1,D[s+11|0]>=0){a=r[y+4>>2],r[A>>2]=r[y>>2],r[A+4>>2]=a,r[A+8>>2]=r[y+8>>2];break e}if(Ri(A,r[s>>2],r[s+4>>2]),D[s+11|0]>=0)break e;W(r[s>>2]);break e}if(!(pt[r[r[s>>2]+24>>2]](s)|0)){if(s=qM(y,1461),r[a>>2]=-1,D[s+11|0]>=0){a=r[y+4>>2],r[A>>2]=r[y>>2],r[A+4>>2]=a,r[A+8>>2]=r[y+8>>2];break e}if(Ri(A,r[s>>2],r[s+4>>2]),D[s+11|0]>=0)break e;W(r[s>>2]);break e}r[a>>2]=0,r[a+4>>2]=0,r[a+8>>2]=0,r[a+12>>2]=0}re=y+32|0}function FSe(a,s){a=a|0,s=s|0;var c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=_e(0),Z=0,ie=0,ge=0;h=re-720|0,re=h;e:{t:{n:{i:{r:{s:{a:{o:{if(Ut[s+38>>1]>=515){if(r[h+680>>2]=0,r[h+672>>2]=0,r[h+676>>2]=0,(pt[r[r[a>>2]+24>>2]](a)|0)<=0)break i;for(;;){if(c=pt[r[r[a>>2]+20>>2]](a,R)|0,u=r[r[r[(pt[r[r[a>>2]+28>>2]](a)|0)+4>>2]+8>>2]+(c<<2)>>2],r[u+28>>2]==9){f=r[h+672>>2],c=r[h+676>>2]-f>>2,m=D[u+24|0];c:{if(c>>>0<m>>>0){Xr(h+672|0,m-c|0);break c}if(c>>>0<=m>>>0)break c;r[h+676>>2]=f+(m<<2)}if(y=0,c=r[s+20>>2],T=r[s+16>>2],u=m<<2,A=T+u|0,f=r[s+12>>2],c=u>>>0>A>>>0?c+1|0:c,A>>>0>Ue[s+8>>2]&(f|0)<=(c|0)|(c|0)>(f|0)||($e(r[h+672>>2],T+r[s>>2]|0,u),c=r[s+20>>2],f=u+r[s+16>>2]|0,c=f>>>0<u>>>0?c+1|0:c,r[s+16>>2]=f,r[s+20>>2]=c,N=r[s+12>>2],T=N,A=f+4|0,u=A>>>0<4?c+1|0:c,z=r[s+8>>2],z>>>0<A>>>0&(u|0)>=(T|0)|(u|0)>(T|0))||(U=r[s>>2],T=U+f|0,T=I[T|0]|I[T+1|0]<<8|(I[T+2|0]<<16|I[T+3|0]<<24),r[s+16>>2]=A,r[s+20>>2]=u,(u|0)>=(N|0)&A>>>0>=z>>>0|(u|0)>(N|0))||(u=I[A+U|0],f=f+5|0,c=f>>>0<5?c+1|0:c,r[s+16>>2]=f,r[s+20>>2]=c,u>>>0>31))break t;H=(SSe(2,T),TSe()),r[h+20>>2]=-1,r[h+16>>2]=1140,r[h+32>>2]=0,r[h+36>>2]=0,r[h+24>>2]=0,r[h+28>>2]=0,c=h+16|0,f=r[h+672>>2],A=u-1|0,A>>>0<=29&&(r[c+4>>2]=u,Wi(c+8|0,f,f+(m<<2)|0),At[c+20>>2]=H);c:{if(A>>>0>=30)break c;QB(h+16|0,r[r[a+60>>2]+((r[a+40>>2]-r[a+36>>2]|0)/24<<2)>>2]),c=r[a+40>>2];l:{if((c|0)!=r[a+44>>2]){if(r[c>>2]=1140,u=r[h+20>>2],r[c+16>>2]=0,r[c+8>>2]=0,r[c+12>>2]=0,r[c+4>>2]=u,m=r[h+28>>2]-r[h+24>>2]|0,m){if((m|0)<0)break o;u=Te(m),r[c+8>>2]=u,r[c+12>>2]=u,r[c+16>>2]=u+(m>>2<<2),f=r[h+24>>2],m=r[h+28>>2]-f|0,(m|0)>0&&(u=$e(u,f,m)+m|0),r[c+12>>2]=u}At[c+20>>2]=At[h+36>>2],r[a+40>>2]=c+24;break l}c=0;u:{f:{d:{p:{if(m=r[a+40>>2],y=r[a+36>>2],f=(m-y|0)/24|0,u=f+1|0,u>>>0<178956971){if(A=(r[a+44>>2]-y|0)/24|0,T=A<<1,A=A>>>0<89478485?u>>>0>T>>>0?u:T:178956970,A){if(A>>>0>=178956971)break p;c=Te(ne(A,24))}if(f=ne(f,24)+c|0,r[f>>2]=1140,u=r[h+20>>2],r[f+16>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0,r[f+4>>2]=u,N=r[h+24>>2],u=r[h+28>>2]-N|0,u){if((u|0)<0)break d;T=Te(u),r[f+8>>2]=T,r[f+16>>2]=T+(u>>2<<2),ie=f,ge=$e(T,N,u)+u|0,r[ie+12>>2]=ge}if(c=ne(A,24)+c|0,At[f+20>>2]=At[h+36>>2],u=f+24|0,(m|0)==(y|0))break f;for(;f=f-24|0,r[f>>2]=1140,r[f+4>>2]=r[m-20>>2],A=m-16|0,r[f+8>>2]=r[A>>2],r[f+12>>2]=r[m-12>>2],T=m-8|0,r[f+16>>2]=r[T>>2],r[T>>2]=0,r[A>>2]=0,r[A+4>>2]=0,At[f+20>>2]=At[m-4>>2],m=m-24|0,(y|0)!=(m|0););if(r[a+44>>2]=c,y=r[a+40>>2],r[a+40>>2]=u,m=r[a+36>>2],r[a+36>>2]=f,(m|0)==(y|0))break u;for(;y=y-24|0,pt[r[r[y>>2]>>2]](y)|0,(m|0)!=(y|0););break u}jt(),Xe()}qn(1336),Xe()}jt(),Xe()}r[a+44>>2]=c,r[a+40>>2]=u,r[a+36>>2]=f}m&&W(m)}y=1}if(r[h+16>>2]=1140,c=r[h+24>>2],c&&(r[h+28>>2]=c,W(c)),!y)break n}if(R=R+1|0,!((pt[r[r[a>>2]+24>>2]](a)|0)>(R|0)))break}break i}if(A=pt[r[r[a>>2]+24>>2]](a)|0,r[h+712>>2]=0,r[h+704>>2]=0,r[h+708>>2]=0,A){if(A>>>0>=214748365)break a;for(c=ne(A,20),u=Te(c),r[h+704>>2]=u,r[h+712>>2]=c+u,c=ne((c-20>>>0)/20|0,20)+20|0,ie=h,ge=Ct(u,0,c)+c|0,r[ie+708>>2]=ge;;){if(c=pt[r[r[a>>2]+20>>2]](a,R)|0,u=r[r[r[(pt[r[r[a>>2]+28>>2]](a)|0)+4>>2]+8>>2]+(c<<2)>>2],m=r[u+28>>2],c=m-1|0,c>>>0<=10?c=r[(c<<2)+13616>>2]:c=-1,T=(c|0)>0?c:0,T>>>0>4)break r;if(c=r[h+704>>2]+ne(R,20)|0,N=D[u+24|0],r[c+16>>2]=N,r[c+12>>2]=T,r[c+8>>2]=m,r[c+4>>2]=f,r[c>>2]=u,f=f+N|0,R=R+1|0,(A|0)==(R|0))break}}if(c=pt[r[r[a>>2]+20>>2]](a,0)|0,z=r[r[r[(pt[r[r[a>>2]+28>>2]](a)|0)+4>>2]+8>>2]+(c<<2)>>2],D[z+84|0]=1,r[z+72>>2]=r[z+68>>2],m=r[s+12>>2],c=m,u=r[s+20>>2],T=r[s+8>>2],R=r[s+16>>2],(c|0)<=(u|0)&T>>>0<=R>>>0|(c|0)<(u|0))break r;U=r[s>>2],Z=I[U+R|0],c=u,N=R+1|0,c=N?c:c+1|0,r[s+16>>2]=N,r[s+20>>2]=c;c:switch(Z|0){case 0:l:{if(T>>>0<=N>>>0&(c|0)>=(m|0)|(c|0)>(m|0)||(c=u,a=R+2|0,c=a>>>0<2?c+1|0:c,r[s+16>>2]=a,r[s+20>>2]=c,c=u,u=R+6|0,c=u>>>0<6?c+1|0:c,u>>>0>T>>>0&(c|0)>=(m|0)|(c|0)>(m|0)))break l;a=a+U|0,a=I[a|0]|I[a+1|0]<<8|(I[a+2|0]<<16|I[a+3|0]<<24),r[s+16>>2]=u,r[s+20>>2]=c,Ym(z,a),y=h+672|0,r[y+20>>2]=0,r[y+12>>2]=0,r[y+16>>2]=0,r[y>>2]=0,r[y+4>>2]=0,r[y+20>>2]=a,R=zB(h+16|0,h+704|0),m=0,f=re-32|0,re=f,r[f+24>>2]=0,r[f+16>>2]=0,r[f+20>>2]=0,a=r[s+12>>2],T=a,c=r[s+20>>2],u=c,N=r[s+16>>2],A=N+4|0,c=A>>>0<4?c+1|0:c,z=r[s+8>>2];u:{if(z>>>0<A>>>0&(a|0)<=(c|0)|(a|0)<(c|0))break u;U=r[s>>2],a=U+N|0,a=I[a|0]|I[a+1|0]<<8|(I[a+2|0]<<16|I[a+3|0]<<24),r[s+16>>2]=A,r[s+20>>2]=c;f:{d:switch(a-2|0){case 1:if((c|0)>=(T|0)&A>>>0>=z>>>0|(c|0)>(T|0))break u;if(a=D[A+U|0],c=u,u=N+5|0,c=u>>>0<5?c+1|0:c,r[s+16>>2]=u,r[s+20>>2]=c,r[y+8>>2]=a,(a|0)==1){if(yee(y,s,f+16|0))break f;break u}Gte(1943,23,r[3451]);break u;default:Gte(1918,24,r[3451]);break u;case 0:break d}if(!yee(y,s,f+16|0))break u}if(r[f+8>>2]=r[f+16>>2],r[f>>2]=r[f+20>>2],a=re-32|0,re=a,s=r[y>>2],H=At[y+4>>2],m=a+24|0,r[m>>2]=1065353216,s=-1<<s^-1,(s|0)>0&&(At[m>>2]=H/_e(s|0)),y=r[f+8>>2],(y|0)!=r[f>>2])for(c=r[R+28>>2];u=r[y>>2],A=r[y+4>>2],H=At[m>>2],At[a+16>>2]=H*_e(r[y+8>>2]-s|0),At[a+12>>2]=H*_e(A-s|0),At[a+8>>2]=H*_e(u-s|0),A=r[R+16>>2],u=r[A>>2],I[u+84|0]||(c=r[r[u+68>>2]+(c<<2)>>2]),T=c,c=r[u+40>>2],$e(r[r[u>>2]>>2]+ne(T,c)|0,(a+8|0)+(r[A+4>>2]<<2)|0,c),c=r[R+28>>2]+1|0,r[R+28>>2]=c,y=y+12|0,(y|0)!=r[f>>2];);re=a+32|0,m=1}if(a=r[f+16>>2],a&&(r[f+20>>2]=a,W(a)),re=f+32|0,tU(R),y=1,m)break r}y=0;break r;case 1:break c;default:break r}if(T>>>0<=N>>>0&(c|0)>=(m|0)|(c|0)>(m|0))break r;if(N=I[N+U|0],c=u,z=R+2|0,c=z>>>0<2?c+1|0:c,r[s+16>>2]=z,r[s+20>>2]=c,N>>>0>=7){r[h>>2]=N,mte(1795,h);break r}if(c=u,u=R+6|0,c=u>>>0<6?c+1|0:c,R=u,u>>>0>T>>>0&(c|0)>=(m|0)|(c|0)>(m|0))break r;if(u=z+U|0,u=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),r[s+16>>2]=R,r[s+20>>2]=c,A)for(R=0;c=pt[r[r[a>>2]+20>>2]](a,R)|0,c=r[r[r[(pt[r[r[a>>2]+28>>2]](a)|0)+4>>2]+8>>2]+(c<<2)>>2],Ym(c,u),D[c+84|0]=1,r[c+72>>2]=r[c+68>>2],R=R+1|0,(A|0)!=(R|0););a=zB(h+672|0,h+704|0);c:{l:switch(N|0){case 1:if(c=Dv(h+16|0,f),s=See(c,s,a),Uv(c),!s)break s;break c;case 2:if(c=Pv(h+16|0,f),s=Tee(c,s,a),Fv(c),!s)break s;break c;case 3:if(c=Pv(h+16|0,f),s=Mee(c,s,a),Fv(c),!s)break s;break c;case 4:if(c=Yd(h+16|0,f),s=xee(c,s,a),Xd(c),!s)break s;break c;case 5:if(c=Yd(h+16|0,f),s=kee(c,s,a),Xd(c),!s)break s;break c;case 6:if(c=Yd(h+16|0,f),s=Cee(c,s,a),Xd(c),s)break c;break s;case 0:break l;default:break s}if(c=Dv(h+16|0,f),s=Eee(c,s,a),Uv(c),!s)break s}tU(a),y=1;break r}jt(),Xe()}jt(),Xe()}tU(a)}if(a=r[h+704>>2],!a)break e;r[h+708>>2]=a,W(a);break e}if(r[a+52>>2]==r[a+48>>2]){y=1;break t}for(R=0;;){if(!Tte(1,h+16|0,s))break n;if(y=1,c=r[a+48>>2],u=r[h+16>>2],r[c+(R<<2)>>2]=u>>>1^0-(u&1),R=R+1|0,!(R>>>0<r[a+52>>2]-c>>2>>>0))break}break t}y=0}if(a=r[h+672>>2],!a)break e;r[h+676>>2]=a,W(a)}return re=h+720|0,y|0}function Eee(a,s,c){var u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0,ie=0,ge=0,we=0,Me=0,Ie=0,We=0;h=r[s+12>>2],u=r[s+20>>2],A=r[s+16>>2],f=A+4|0,u=f>>>0<4?u+1|0:u;e:{if(f>>>0>Ue[s+8>>2]&(u|0)>=(h|0)|(u|0)>(h|0)||(u=A+r[s>>2]|0,r[a>>2]=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),u=r[s+20>>2],h=u,f=r[s+16>>2],A=f+4|0,u=A>>>0<4?u+1|0:u,T=A,r[s+16>>2]=A,r[s+20>>2]=u,Ue[a>>2]>32)||(A=r[s+12>>2],u=h,h=f+8|0,u=h>>>0<8?u+1|0:u,h>>>0>Ue[s+8>>2]&(u|0)>=(A|0)|(u|0)>(A|0)))break e;if(u=T+r[s>>2]|0,y=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),r[a+4>>2]=y,u=r[s+20>>2],h=r[s+16>>2]+4|0,u=h>>>0<4?u+1|0:u,r[s+16>>2]=h,r[s+20>>2]=u,!y)return 1;if(y=0,r[a+8>>2]=0,!Ar(a+16|0,s)||!Ar(a+36|0,s)||!Ar(a+56|0,s)||!Ar(a+76|0,s))break e;ge=r[a+4>>2],A=c,s=0,c=0,f=re-32|0,re=f,h=a,a=r[a+12>>2],r[f+16>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0;t:{n:{if(a){if(a>>>0>=1073741824)break n;u=a<<2,s=Te(u),r[f+8>>2]=s,c=s+u|0,r[f+16>>2]=c,Ct(s,0,u),r[f+12>>2]=c}u=r[h+120>>2],y=r[u>>2],y&&(r[u+4>>2]=y,W(y),r[u+8>>2]=0,r[u>>2]=0,r[u+4>>2]=0,c=r[f+12>>2],s=r[f+8>>2],a=r[h+12>>2]),r[u+4>>2]=c,r[u>>2]=s,r[u+8>>2]=r[f+16>>2],s=0,r[f+16>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0;i:{if(a){if(a>>>0>=1073741824)break i;a=a<<2,m=Te(a),r[f+8>>2]=m,s=a+m|0,r[f+16>>2]=s,Ct(m,0,a),r[f+12>>2]=s}a=r[h+132>>2],c=r[a>>2],c&&(r[a+4>>2]=c,W(c),r[a+8>>2]=0,r[a>>2]=0,r[a+4>>2]=0,m=r[f+8>>2],s=r[f+12>>2]),r[a+4>>2]=s,r[a>>2]=m,r[a+8>>2]=r[f+16>>2],r[f+24>>2]=0,r[f+28>>2]=0,r[f+16>>2]=0,r[f+20>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0,Ir(f+8|0),a=r[f+24>>2]+r[f+28>>2]|0,s=(a>>>0)/341|0,a=r[r[f+12>>2]+(s<<2)>>2]+ne(a-ne(s,341)|0,12)|0,r[a+4>>2]=0,r[a+8>>2]=0,r[a>>2]=ge,u=1,s=r[f+28>>2],a=s+1|0,r[f+28>>2]=a;r:{if(a>>>0<s>>>0)break r;for(;;){if(R=r[f+12>>2],u=r[f+24>>2],m=a-1|0,s=u+m|0,c=(s>>>0)/341|0,c=r[R+(c<<2)>>2]+ne(s-ne(c,341)|0,12)|0,s=r[c+8>>2],y=r[c+4>>2],T=r[c>>2],r[f+28>>2]=m,c=r[f+16>>2],m=c-R|0,((m?ne(m>>2,341)-1|0:0)-(a+u|0)|0)+1>>>0>=682&&(W(r[c-4>>2]),r[f+16>>2]=r[f+16>>2]-4),u=0,T>>>0>ge>>>0||(a=r[h+12>>2],m=(y|0)==(a-1|0)?0:y+1|0,m>>>0>=a>>>0))break r;N=ne(s,12),z=N+r[h+132>>2]|0,R=N+r[h+120>>2]|0;s:{a:{if(H=m<<2,c=r[h>>2]-r[H+r[z>>2]>>2]|0,!c){if(!T)break a;if(z=0,a=r[A+16>>2],m=r[A+20>>2],(a|0)==(m|0)){a=r[h+8>>2],r[A+28>>2]=T+r[A+28>>2],r[h+8>>2]=a+T;break a}for(;;){y=0;o:{if((a|0)==(m|0))break o;for(;;){u=ne(y,20)+a|0,c=r[R>>2]+(r[u+4>>2]<<2)|0,N=r[u>>2],m=r[u+12>>2];c:{if(m>>>0>3)break c;if(s=r[A+12>>2],!r[u+16>>2]){c=s;break c}for(a=0;s=$e(s,(a<<2)+c|0,m),m=r[u+12>>2],s=s+m|0,a=a+1|0,a>>>0<Ue[u+16>>2];);c=r[A+12>>2]}if(a=r[A+28>>2],a=I[N+84|0]?a:r[r[N+68>>2]+(a<<2)>>2],a>>>0>=Ue[N+80>>2])break o;if(s=a,a=r[N+40>>2],$e(r[r[N>>2]>>2]+ne(s,a)|0,c,a),y=y+1|0,a=r[A+16>>2],!(y>>>0<(r[A+20>>2]-a|0)/20>>>0))break}}if(r[A+28>>2]=r[A+28>>2]+1,r[h+8>>2]=r[h+8>>2]+1,z=z+1|0,(T|0)==(z|0))break a;a=r[A+16>>2],m=r[A+20>>2]}}o:{c:{l:{u:{if(T>>>0<=2){if(c=r[h+108>>2],r[c>>2]=m,s=1,a=r[h+12>>2],a>>>0>1)break u;break o}if(Ue[h+8>>2]>Ue[h+4>>2])break r;a=r[h+120>>2],U=s+1|0,z=ne(U,12),u=a+z|0,(u|0)!=(R|0)&&(Wi(u,r[R>>2],r[R+4>>2]),a=r[h+120>>2]),a=H+r[a+z>>2]|0,r[a>>2]=r[a>>2]+(1<<c-1),a=Ms(T)^31,c=r[h+32>>2],y=32-c|0;f:{if((a|0)<=(y|0)){if(y=r[h+28>>2],(y|0)==r[h+20>>2]){u=0;break f}if(u=r[y>>2],R=a+c|0,r[h+32>>2]=R,u=u<<c>>>32-a|0,(R|0)!=32)break f;r[h+32>>2]=0,r[h+28>>2]=y+4;break f}if(u=r[h+28>>2],R=u+4|0,(R|0)==r[h+20>>2]){u=0;break f}ie=r[u>>2],r[h+28>>2]=R,y=a-y|0,r[h+32>>2]=y,u=r[u+4>>2]>>>32-y|ie<<c>>>32-a}a=(T>>>1|0)-u|0,u=T-a|0;f:{if((u|0)==(a|0)){u=a;break f}if(c=r[h+88>>2],(c|0)==r[h+80>>2])break l;y=r[c>>2],T=r[h+92>>2],R=T+1|0,r[h+92>>2]=R,y=y&-2147483648>>>T;d:{if((R|0)==32){if(r[h+92>>2]=0,r[h+88>>2]=c+4,y)break d;break l}if(!y)break l}}y=u,u=a;break c}for(;m=(a-1|0)==(m|0)?0:m+1|0,r[c+(s<<2)>>2]=m,a=r[h+12>>2],s=s+1|0,a>>>0>s>>>0;);break o}y=a}if(a=r[h+132>>2],c=a+N|0,T=r[c>>2],R=T+H|0,r[R>>2]=r[R>>2]+1,Wi(a+z|0,T,r[c+4>>2]),u&&(a=r[f+28>>2]+r[f+24>>2]|0,c=r[f+12>>2],T=r[f+16>>2]-c|0,(a|0)==((T?ne(T>>2,341)-1|0:0)|0)&&(Ir(f+8|0),c=r[f+12>>2],a=r[f+24>>2]+r[f+28>>2]|0),T=c,c=(a>>>0)/341|0,a=r[T+(c<<2)>>2]+ne(a-ne(c,341)|0,12)|0,r[a+8>>2]=s,r[a+4>>2]=m,r[a>>2]=u,r[f+28>>2]=r[f+28>>2]+1),!y)break a;a=r[f+28>>2]+r[f+24>>2]|0,s=r[f+12>>2],c=r[f+16>>2]-s|0,(a|0)==((c?ne(c>>2,341)-1|0:0)|0)&&(Ir(f+8|0),s=r[f+12>>2],a=r[f+24>>2]+r[f+28>>2]|0),c=s,s=(a>>>0)/341|0,a=r[c+(s<<2)>>2]+ne(a-ne(s,341)|0,12)|0,r[a+8>>2]=U,r[a+4>>2]=m,r[a>>2]=y,a=r[f+28>>2]+1|0,r[f+28>>2]=a;break s}if(H=0,!T)break a;for(;;){if(a)for(y=r[h+40>>2],u=r[h+96>>2],ie=r[h+108>>2],Me=r[R>>2],Ie=r[z>>2],a=0;;){m=ie+(a<<2)|0,r[u+(r[m>>2]<<2)>>2]=0,c=r[m>>2]<<2,s=r[h>>2]-r[c+Ie>>2]|0;o:{if(!s)break o;if(c=c+u|0,N=r[h+52>>2],Z=32-N|0,(Z|0)>=(s|0)){if(U=r[h+48>>2],(U|0)==(y|0)){r[c>>2]=0;break o}if(r[c>>2]=r[U>>2]<<N>>>32-s,s=s+r[h+52>>2]|0,r[h+52>>2]=s,(s|0)!=32)break o;r[h+52>>2]=0,r[h+48>>2]=U+4;break o}if(U=r[h+48>>2],we=U+4|0,(y|0)==(we|0)){r[c>>2]=0;break o}We=r[U>>2],r[h+48>>2]=we,Z=s-Z|0,r[h+52>>2]=Z,r[c>>2]=r[U+4>>2]>>>32-Z|We<<N>>>32-s}if(s=r[m>>2]<<2,c=s+u|0,r[c>>2]=r[c>>2]|r[s+Me>>2],a=a+1|0,!(a>>>0<Ue[h+12>>2]))break}y=0,a=r[A+16>>2];o:{if((a|0)==r[A+20>>2])break o;for(;;){u=ne(y,20)+a|0,c=r[h+96>>2]+(r[u+4>>2]<<2)|0,N=r[u>>2],m=r[u+12>>2];c:{if(m>>>0>3)break c;if(s=r[A+12>>2],!r[u+16>>2]){c=s;break c}for(a=0;s=$e(s,(a<<2)+c|0,m),m=r[u+12>>2],s=s+m|0,a=a+1|0,a>>>0<Ue[u+16>>2];);c=r[A+12>>2]}if(a=r[A+28>>2],a=I[N+84|0]?a:r[r[N+68>>2]+(a<<2)>>2],a>>>0>=Ue[N+80>>2])break o;if(s=a,a=r[N+40>>2],$e(r[r[N>>2]>>2]+ne(s,a)|0,c,a),y=y+1|0,a=r[A+16>>2],!(y>>>0<(r[A+20>>2]-a|0)/20>>>0))break}}if(r[A+28>>2]=r[A+28>>2]+1,r[h+8>>2]=r[h+8>>2]+1,H=H+1|0,(T|0)==(H|0))break a;a=r[h+12>>2]}}a=r[f+28>>2]}if(!a)break}u=1}if(r[f+28>>2]=0,m=r[f+16>>2],a=r[f+12>>2],s=m-a|0,s>>>0>=9)for(;W(r[a>>2]),a=r[f+12>>2]+4|0,r[f+12>>2]=a,m=r[f+16>>2],s=m-a|0,s>>>0>8;);c=170;r:switch((s>>>2|0)-1|0){case 1:c=341;case 0:r[f+24>>2]=c;break;default:break r}r:{if((a|0)==(m|0))break r;for(;W(r[a>>2]),a=a+4|0,(m|0)!=(a|0););if(a=r[f+16>>2],s=r[f+12>>2],(a|0)==(s|0))break r;r[f+16>>2]=a+(((a-s|0)-4>>>2^-1)<<2)}a=r[f+8>>2],a&&W(a),re=f+32|0;break t}jt(),Xe()}jt(),Xe()}y=u}return y}function See(a,s,c){var u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0,ie=0,ge=0,we=0,Me=0,Ie=0,We=0;h=r[s+12>>2],u=r[s+20>>2],A=r[s+16>>2],f=A+4|0,u=f>>>0<4?u+1|0:u;e:{if(f>>>0>Ue[s+8>>2]&(u|0)>=(h|0)|(u|0)>(h|0)||(u=A+r[s>>2]|0,r[a>>2]=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),u=r[s+20>>2],h=u,f=r[s+16>>2],A=f+4|0,u=A>>>0<4?h+1|0:h,R=A,r[s+16>>2]=A,r[s+20>>2]=u,Ue[a>>2]>32)||(A=r[s+12>>2],u=h,h=f+8|0,u=h>>>0<8?u+1|0:u,h>>>0>Ue[s+8>>2]&(u|0)>=(A|0)|(u|0)>(A|0)))break e;if(u=R+r[s>>2]|0,m=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),r[a+4>>2]=m,u=r[s+20>>2],h=r[s+16>>2]+4|0,u=h>>>0<4?u+1|0:u,r[s+16>>2]=h,r[s+20>>2]=u,!m)return 1;if(m=0,r[a+8>>2]=0,!Ar(a+16|0,s)||!Ar(a+36|0,s)||!Ar(a+56|0,s)||!Ar(a+76|0,s))break e;Z=r[a+4>>2],A=c,s=0,c=0,f=re-32|0,re=f,h=a,a=r[a+12>>2],r[f+16>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0;t:{n:{if(a){if(a>>>0>=1073741824)break n;u=a<<2,s=Te(u),r[f+8>>2]=s,c=s+u|0,r[f+16>>2]=c,Ct(s,0,u),r[f+12>>2]=c}u=r[h+120>>2],m=r[u>>2],m&&(r[u+4>>2]=m,W(m),r[u+8>>2]=0,r[u>>2]=0,r[u+4>>2]=0,c=r[f+12>>2],s=r[f+8>>2],a=r[h+12>>2]),r[u+4>>2]=c,r[u>>2]=s,r[u+8>>2]=r[f+16>>2],s=0,r[f+16>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0;i:{if(a){if(a>>>0>=1073741824)break i;a=a<<2,y=Te(a),r[f+8>>2]=y,s=a+y|0,r[f+16>>2]=s,Ct(y,0,a),r[f+12>>2]=s}a=r[h+132>>2],c=r[a>>2],c&&(r[a+4>>2]=c,W(c),r[a+8>>2]=0,r[a>>2]=0,r[a+4>>2]=0,y=r[f+8>>2],s=r[f+12>>2]),r[a+4>>2]=s,r[a>>2]=y,r[a+8>>2]=r[f+16>>2],r[f+24>>2]=0,r[f+28>>2]=0,r[f+16>>2]=0,r[f+20>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0,Ir(f+8|0),a=r[f+24>>2]+r[f+28>>2]|0,s=(a>>>0)/341|0,a=r[r[f+12>>2]+(s<<2)>>2]+ne(a-ne(s,341)|0,12)|0,r[a+4>>2]=0,r[a+8>>2]=0,r[a>>2]=Z,u=1,s=r[f+28>>2],a=s+1|0,r[f+28>>2]=a;r:{if(a>>>0<s>>>0)break r;for(;;){if(T=r[f+12>>2],u=r[f+24>>2],y=a-1|0,s=u+y|0,c=(s>>>0)/341|0,s=r[T+(c<<2)>>2]+ne(s-ne(c,341)|0,12)|0,c=r[s+8>>2],m=r[s+4>>2],R=r[s>>2],r[f+28>>2]=y,s=r[f+16>>2],y=s-T|0,((y?ne(y>>2,341)-1|0:0)-(a+u|0)|0)+1>>>0>=682&&(W(r[s-4>>2]),r[f+16>>2]=r[f+16>>2]-4),R>>>0>Z>>>0){u=0;break r}if(u=0,a=r[h+12>>2],y=(m|0)==(a-1|0)?0:m+1|0,y>>>0>=a>>>0)break r;a=r[h+120>>2],s=ne(c,12),z=a+s|0;s:{a:{if(T=y<<2,ie=s+r[h+132>>2]|0,m=r[h>>2]-r[T+r[ie>>2]>>2]|0,!m){if(!R)break a;if(a=r[A+16>>2],y=r[A+20>>2],(a|0)==(y|0)){a=r[h+8>>2],r[A+28>>2]=R+r[A+28>>2],r[h+8>>2]=a+R;break a}for(;;){m=0;o:{if((a|0)==(y|0))break o;for(;;){T=ne(m,20)+a|0,c=r[z>>2]+(r[T+4>>2]<<2)|0,N=r[T>>2],y=r[T+12>>2];c:{if(y>>>0>3)break c;if(s=r[A+12>>2],!r[T+16>>2]){c=s;break c}for(a=0;s=$e(s,(a<<2)+c|0,y),y=r[T+12>>2],s=s+y|0,a=a+1|0,a>>>0<Ue[T+16>>2];);c=r[A+12>>2]}if(a=r[A+28>>2],a=I[N+84|0]?a:r[r[N+68>>2]+(a<<2)>>2],a>>>0>=Ue[N+80>>2])break o;if(s=a,a=r[N+40>>2],$e(r[r[N>>2]>>2]+ne(s,a)|0,c,a),m=m+1|0,a=r[A+16>>2],!(m>>>0<(r[A+20>>2]-a|0)/20>>>0))break}}if(r[A+28>>2]=r[A+28>>2]+1,r[h+8>>2]=r[h+8>>2]+1,u=u+1|0,(R|0)==(u|0))break a;a=r[A+16>>2],y=r[A+20>>2]}}o:{c:{l:{u:{if(R>>>0<=2){if(c=r[h+108>>2],r[c>>2]=y,s=1,a=r[h+12>>2],a>>>0>1)break u;break o}if(Ue[h+8>>2]>Ue[h+4>>2])break r;u=a,a=s+12|0,Wi(u+a|0,r[z>>2],r[z+4>>2]),a=T+r[a+r[h+120>>2]>>2]|0,r[a>>2]=r[a>>2]+(1<<m-1),a=Ms(R)^31,u=r[h+32>>2],N=32-u|0;f:{if((a|0)<=(N|0)){if(m=r[h+28>>2],(m|0)==r[h+20>>2]){u=0;break f}if(N=r[m>>2],z=a+u|0,r[h+32>>2]=z,u=N<<u>>>32-a|0,(z|0)!=32)break f;r[h+32>>2]=0,r[h+28>>2]=m+4;break f}if(m=r[h+28>>2],z=m+4|0,(z|0)==r[h+20>>2]){u=0;break f}U=r[m>>2],r[h+28>>2]=z,N=a-N|0,r[h+32>>2]=N,u=r[m+4>>2]>>>32-N|U<<u>>>32-a}N=c+1|0,a=(R>>>1|0)-u|0,u=R-a|0;f:{if((u|0)==(a|0)){u=a;break f}if(m=r[h+88>>2],(m|0)==r[h+80>>2])break l;R=r[m>>2],z=r[h+92>>2],U=z+1|0,r[h+92>>2]=U,R=R&-2147483648>>>z;d:{if((U|0)==32){if(r[h+92>>2]=0,r[h+88>>2]=m+4,R)break d;break l}if(!R)break l}}m=u,u=a;break c}for(;y=(a-1|0)==(y|0)?0:y+1|0,r[c+(s<<2)>>2]=y,a=r[h+12>>2],s=s+1|0,a>>>0>s>>>0;);break o}m=a}if(a=r[h+132>>2],s=a+s|0,R=r[s>>2],T=R+T|0,r[T>>2]=r[T>>2]+1,Wi(a+ne(N,12)|0,R,r[s+4>>2]),u&&(a=r[f+28>>2]+r[f+24>>2]|0,s=r[f+12>>2],R=r[f+16>>2]-s|0,(a|0)==((R?ne(R>>2,341)-1|0:0)|0)&&(Ir(f+8|0),s=r[f+12>>2],a=r[f+24>>2]+r[f+28>>2]|0),R=s,s=(a>>>0)/341|0,a=r[R+(s<<2)>>2]+ne(a-ne(s,341)|0,12)|0,r[a+8>>2]=c,r[a+4>>2]=y,r[a>>2]=u,r[f+28>>2]=r[f+28>>2]+1),!m)break a;a=r[f+28>>2]+r[f+24>>2]|0,s=r[f+12>>2],c=r[f+16>>2]-s|0,(a|0)==((c?ne(c>>2,341)-1|0:0)|0)&&(Ir(f+8|0),s=r[f+12>>2],a=r[f+24>>2]+r[f+28>>2]|0),c=s,s=(a>>>0)/341|0,a=r[c+(s<<2)>>2]+ne(a-ne(s,341)|0,12)|0,r[a+8>>2]=N,r[a+4>>2]=y,r[a>>2]=m,a=r[f+28>>2]+1|0,r[f+28>>2]=a;break s}if(!R)break a;for(;;){if(a)for(y=r[h+40>>2],m=r[h+96>>2],we=r[h+108>>2],Me=r[z>>2],Ie=r[ie>>2],a=0;;){T=(a<<2)+we|0,r[m+(r[T>>2]<<2)>>2]=0,c=r[T>>2]<<2,s=r[h>>2]-r[c+Ie>>2]|0;o:{if(!s)break o;if(c=c+m|0,N=r[h+52>>2],H=32-N|0,(H|0)>=(s|0)){if(U=r[h+48>>2],(U|0)==(y|0)){r[c>>2]=0;break o}if(r[c>>2]=r[U>>2]<<N>>>32-s,s=s+r[h+52>>2]|0,r[h+52>>2]=s,(s|0)!=32)break o;r[h+52>>2]=0,r[h+48>>2]=U+4;break o}if(U=r[h+48>>2],ge=U+4|0,(y|0)==(ge|0)){r[c>>2]=0;break o}We=r[U>>2],r[h+48>>2]=ge,H=s-H|0,r[h+52>>2]=H,r[c>>2]=r[U+4>>2]>>>32-H|We<<N>>>32-s}if(s=r[T>>2]<<2,c=s+m|0,r[c>>2]=r[c>>2]|r[s+Me>>2],a=a+1|0,!(a>>>0<Ue[h+12>>2]))break}m=0,a=r[A+16>>2];o:{if((a|0)==r[A+20>>2])break o;for(;;){T=ne(m,20)+a|0,c=r[h+96>>2]+(r[T+4>>2]<<2)|0,N=r[T>>2],y=r[T+12>>2];c:{if(y>>>0>3)break c;if(s=r[A+12>>2],!r[T+16>>2]){c=s;break c}for(a=0;s=$e(s,(a<<2)+c|0,y),y=r[T+12>>2],s=s+y|0,a=a+1|0,a>>>0<Ue[T+16>>2];);c=r[A+12>>2]}if(a=r[A+28>>2],a=I[N+84|0]?a:r[r[N+68>>2]+(a<<2)>>2],a>>>0>=Ue[N+80>>2])break o;if(s=a,a=r[N+40>>2],$e(r[r[N>>2]>>2]+ne(s,a)|0,c,a),m=m+1|0,a=r[A+16>>2],!(m>>>0<(r[A+20>>2]-a|0)/20>>>0))break}}if(r[A+28>>2]=r[A+28>>2]+1,r[h+8>>2]=r[h+8>>2]+1,u=u+1|0,(R|0)==(u|0))break a;a=r[h+12>>2]}}a=r[f+28>>2]}if(!a)break}u=1}if(r[f+28>>2]=0,y=r[f+16>>2],a=r[f+12>>2],s=y-a|0,s>>>0>=9)for(;W(r[a>>2]),a=r[f+12>>2]+4|0,r[f+12>>2]=a,y=r[f+16>>2],s=y-a|0,s>>>0>8;);c=170;r:switch((s>>>2|0)-1|0){case 1:c=341;case 0:r[f+24>>2]=c;break;default:break r}r:{if((a|0)==(y|0))break r;for(;W(r[a>>2]),a=a+4|0,(y|0)!=(a|0););if(a=r[f+16>>2],s=r[f+12>>2],(a|0)==(s|0))break r;r[f+16>>2]=a+(((a-s|0)-4>>>2^-1)<<2)}a=r[f+8>>2],a&&W(a),re=f+32|0;break t}jt(),Xe()}jt(),Xe()}m=u}return m}function Tee(a,s,c){var u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0,ie=0,ge=0,we=0,Me=0,Ie=0,We=0,ut=0;h=r[s+12>>2],u=r[s+20>>2],A=r[s+16>>2],f=A+4|0,u=f>>>0<4?u+1|0:u;e:{if(f>>>0>Ue[s+8>>2]&(u|0)>=(h|0)|(u|0)>(h|0)||(u=A+r[s>>2]|0,r[a>>2]=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),u=r[s+20>>2],h=u,f=r[s+16>>2],A=f+4|0,u=A>>>0<4?u+1|0:u,T=A,r[s+16>>2]=A,r[s+20>>2]=u,Ue[a>>2]>32)||(A=r[s+12>>2],u=h,h=f+8|0,u=h>>>0<8?u+1|0:u,h>>>0>Ue[s+8>>2]&(u|0)>=(A|0)|(u|0)>(A|0)))break e;if(u=T+r[s>>2]|0,y=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),r[a+4>>2]=y,u=r[s+20>>2],h=r[s+16>>2]+4|0,u=h>>>0<4?u+1|0:u,r[s+16>>2]=h,r[s+20>>2]=u,!y)return 1;if(y=0,r[a+8>>2]=0,!sr(a+16|0,s)||!Ar(a+32|0,s)||!Ar(a+52|0,s)||!Ar(a+72|0,s))break e;ie=r[a+4>>2],A=c,s=0,c=0,f=re-32|0,re=f,h=a,a=r[a+12>>2],r[f+16>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0;t:{n:{if(a){if(a>>>0>=1073741824)break n;u=a<<2,s=Te(u),r[f+8>>2]=s,c=s+u|0,r[f+16>>2]=c,Ct(s,0,u),r[f+12>>2]=c}u=r[h+116>>2],y=r[u>>2],y&&(r[u+4>>2]=y,W(y),r[u+8>>2]=0,r[u>>2]=0,r[u+4>>2]=0,c=r[f+12>>2],s=r[f+8>>2],a=r[h+12>>2]),r[u+4>>2]=c,r[u>>2]=s,r[u+8>>2]=r[f+16>>2],s=0,r[f+16>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0;i:{if(a){if(a>>>0>=1073741824)break i;a=a<<2,m=Te(a),r[f+8>>2]=m,s=a+m|0,r[f+16>>2]=s,Ct(m,0,a),r[f+12>>2]=s}a=r[h+128>>2],c=r[a>>2],c&&(r[a+4>>2]=c,W(c),r[a+8>>2]=0,r[a>>2]=0,r[a+4>>2]=0,m=r[f+8>>2],s=r[f+12>>2]),r[a+4>>2]=s,r[a>>2]=m,r[a+8>>2]=r[f+16>>2],r[f+24>>2]=0,r[f+28>>2]=0,r[f+16>>2]=0,r[f+20>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0,Ir(f+8|0),a=r[f+24>>2]+r[f+28>>2]|0,s=(a>>>0)/341|0,a=r[r[f+12>>2]+(s<<2)>>2]+ne(a-ne(s,341)|0,12)|0,r[a+4>>2]=0,r[a+8>>2]=0,r[a>>2]=ie,u=1,s=r[f+28>>2],a=s+1|0,r[f+28>>2]=a;r:{if(a>>>0<s>>>0)break r;for(we=h+16|0;;){if(N=r[f+12>>2],u=r[f+24>>2],m=a-1|0,s=u+m|0,c=(s>>>0)/341|0,c=r[N+(c<<2)>>2]+ne(s-ne(c,341)|0,12)|0,s=r[c+8>>2],y=r[c+4>>2],T=r[c>>2],r[f+28>>2]=m,c=r[f+16>>2],m=c-N|0,((m?ne(m>>2,341)-1|0:0)-(a+u|0)|0)+1>>>0>=682&&(W(r[c-4>>2]),r[f+16>>2]=r[f+16>>2]-4),u=0,T>>>0>ie>>>0||(a=r[h+12>>2],m=(a-1|0)==(y|0)?0:y+1|0,m>>>0>=a>>>0))break r;c=ne(s,12),z=c+r[h+128>>2]|0,N=c+r[h+116>>2]|0;s:{if(R=m<<2,y=r[h>>2]-r[R+r[z>>2]>>2]|0,!y){if(!T)break s;if(z=0,a=r[A+16>>2],m=r[A+20>>2],(a|0)==(m|0)){a=r[h+8>>2],r[A+28>>2]=T+r[A+28>>2],r[h+8>>2]=a+T;break s}for(;;){y=0;a:{if((a|0)==(m|0))break a;for(;;){u=ne(y,20)+a|0,c=r[N>>2]+(r[u+4>>2]<<2)|0,R=r[u>>2],m=r[u+12>>2];o:{if(m>>>0>3)break o;if(s=r[A+12>>2],!r[u+16>>2]){c=s;break o}for(a=0;s=$e(s,(a<<2)+c|0,m),m=r[u+12>>2],s=s+m|0,a=a+1|0,a>>>0<Ue[u+16>>2];);c=r[A+12>>2]}if(a=r[A+28>>2],a=I[R+84|0]?a:r[r[R+68>>2]+(a<<2)>>2],a>>>0>=Ue[R+80>>2])break a;if(s=a,a=r[R+40>>2],$e(r[r[R>>2]>>2]+ne(s,a)|0,c,a),y=y+1|0,a=r[A+16>>2],!(y>>>0<(r[A+20>>2]-a|0)/20>>>0))break}}if(r[A+28>>2]=r[A+28>>2]+1,r[h+8>>2]=r[h+8>>2]+1,z=z+1|0,(T|0)==(z|0))break s;a=r[A+16>>2],m=r[A+20>>2]}}a:{o:{c:{l:{if(T>>>0<=2){if(c=r[h+104>>2],r[c>>2]=m,s=1,a=r[h+12>>2],a>>>0>1)break l;break a}if(Ue[h+8>>2]>Ue[h+4>>2])break r;a=r[h+116>>2],H=s+1|0,z=ne(H,12),u=a+z|0,(u|0)!=(N|0)&&(Wi(u,r[N>>2],r[N+4>>2]),a=r[h+116>>2]),a=R+r[a+z>>2]|0,r[a>>2]=r[a>>2]+(1<<y-1),r[f+4>>2]=0,WM(we,Ms(T)^31,f+4|0),a=(T>>>1|0)-r[f+4>>2]|0,u=T-a|0;u:{if((u|0)==(a|0)){u=a;break u}if(y=r[h+84>>2],(y|0)==r[h+76>>2])break c;T=r[y>>2],N=r[h+88>>2],U=N+1|0,r[h+88>>2]=U,T=T&-2147483648>>>N;f:{if((U|0)==32){if(r[h+88>>2]=0,r[h+84>>2]=y+4,T)break f;break c}if(!T)break c}}y=u,u=a;break o}for(;m=(a-1|0)==(m|0)?0:m+1|0,r[c+(s<<2)>>2]=m,a=r[h+12>>2],s=s+1|0,a>>>0>s>>>0;);break a}y=a}if(a=r[h+128>>2],c=a+c|0,T=r[c>>2],N=T+R|0,r[N>>2]=r[N>>2]+1,Wi(a+z|0,T,r[c+4>>2]),u&&(a=r[f+28>>2]+r[f+24>>2]|0,c=r[f+12>>2],T=r[f+16>>2]-c|0,(a|0)==((T?ne(T>>2,341)-1|0:0)|0)&&(Ir(f+8|0),c=r[f+12>>2],a=r[f+24>>2]+r[f+28>>2]|0),T=c,c=(a>>>0)/341|0,a=r[T+(c<<2)>>2]+ne(a-ne(c,341)|0,12)|0,r[a+8>>2]=s,r[a+4>>2]=m,r[a>>2]=u,r[f+28>>2]=r[f+28>>2]+1),!y)break s;a=r[f+28>>2]+r[f+24>>2]|0,s=r[f+12>>2],c=r[f+16>>2]-s|0,(a|0)==((c?ne(c>>2,341)-1|0:0)|0)&&(Ir(f+8|0),s=r[f+12>>2],a=r[f+24>>2]+r[f+28>>2]|0),c=s,s=(a>>>0)/341|0,a=r[c+(s<<2)>>2]+ne(a-ne(s,341)|0,12)|0,r[a+8>>2]=H,r[a+4>>2]=m,r[a>>2]=y,r[f+28>>2]=r[f+28>>2]+1;break s}if(H=0,!T)break s;for(;;){if(a)for(y=r[h+36>>2],u=r[h+92>>2],Me=r[h+104>>2],Ie=r[N>>2],We=r[z>>2],a=0;;){m=(a<<2)+Me|0,r[u+(r[m>>2]<<2)>>2]=0,c=r[m>>2]<<2,s=r[h>>2]-r[c+We>>2]|0;a:{if(!s)break a;if(c=c+u|0,R=r[h+48>>2],Z=32-R|0,(Z|0)>=(s|0)){if(U=r[h+44>>2],(U|0)==(y|0)){r[c>>2]=0;break a}if(r[c>>2]=r[U>>2]<<R>>>32-s,s=s+r[h+48>>2]|0,r[h+48>>2]=s,(s|0)!=32)break a;r[h+48>>2]=0,r[h+44>>2]=U+4;break a}if(U=r[h+44>>2],ge=U+4|0,(y|0)==(ge|0)){r[c>>2]=0;break a}ut=r[U>>2],r[h+44>>2]=ge,Z=s-Z|0,r[h+48>>2]=Z,r[c>>2]=r[U+4>>2]>>>32-Z|ut<<R>>>32-s}if(s=r[m>>2]<<2,c=s+u|0,r[c>>2]=r[c>>2]|r[s+Ie>>2],a=a+1|0,!(a>>>0<Ue[h+12>>2]))break}y=0,a=r[A+16>>2];a:{if((a|0)==r[A+20>>2])break a;for(;;){u=ne(y,20)+a|0,c=r[h+92>>2]+(r[u+4>>2]<<2)|0,R=r[u>>2],m=r[u+12>>2];o:{if(m>>>0>3)break o;if(s=r[A+12>>2],!r[u+16>>2]){c=s;break o}for(a=0;s=$e(s,(a<<2)+c|0,m),m=r[u+12>>2],s=s+m|0,a=a+1|0,a>>>0<Ue[u+16>>2];);c=r[A+12>>2]}if(a=r[A+28>>2],a=I[R+84|0]?a:r[r[R+68>>2]+(a<<2)>>2],a>>>0>=Ue[R+80>>2])break a;if(s=a,a=r[R+40>>2],$e(r[r[R>>2]>>2]+ne(s,a)|0,c,a),y=y+1|0,a=r[A+16>>2],!(y>>>0<(r[A+20>>2]-a|0)/20>>>0))break}}if(r[A+28>>2]=r[A+28>>2]+1,r[h+8>>2]=r[h+8>>2]+1,H=H+1|0,(T|0)==(H|0))break s;a=r[h+12>>2]}}if(a=r[f+28>>2],!a)break}u=1}if(r[f+28>>2]=0,m=r[f+16>>2],a=r[f+12>>2],s=m-a|0,s>>>0>=9)for(;W(r[a>>2]),a=r[f+12>>2]+4|0,r[f+12>>2]=a,m=r[f+16>>2],s=m-a|0,s>>>0>8;);c=170;r:switch((s>>>2|0)-1|0){case 1:c=341;case 0:r[f+24>>2]=c;break;default:break r}r:{if((a|0)==(m|0))break r;for(;W(r[a>>2]),a=a+4|0,(m|0)!=(a|0););if(a=r[f+16>>2],s=r[f+12>>2],(a|0)==(s|0))break r;r[f+16>>2]=a+(((a-s|0)-4>>>2^-1)<<2)}a=r[f+8>>2],a&&W(a),re=f+32|0;break t}jt(),Xe()}jt(),Xe()}y=u}return y}function xee(a,s,c){var u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0,ie=0,ge=0,we=0,Me=0,Ie=0,We=0;y=r[s+12>>2],h=r[s+20>>2],f=r[s+16>>2],m=f+4|0,h=m>>>0<4?h+1|0:h;e:{if(m>>>0>Ue[s+8>>2]&(h|0)>=(y|0)|(h|0)>(y|0)||(h=f+r[s>>2]|0,r[a>>2]=I[h|0]|I[h+1|0]<<8|(I[h+2|0]<<16|I[h+3|0]<<24),h=r[s+20>>2],y=h,m=r[s+16>>2],f=m+4|0,h=f>>>0<4?h+1|0:h,A=f,r[s+16>>2]=f,r[s+20>>2]=h,Ue[a>>2]>32)||(f=r[s+12>>2],h=y,y=m+8|0,h=y>>>0<8?h+1|0:h,(f|0)<=(h|0)&y>>>0>Ue[s+8>>2]|(f|0)<(h|0)))break e;if(u=A+r[s>>2]|0,h=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),r[a+4>>2]=h,u=r[s+20>>2],y=r[s+16>>2]+4|0,u=y>>>0<4?u+1|0:u,r[s+16>>2]=y,r[s+20>>2]=u,!h)return 1;if(u=0,r[a+8>>2]=0,!Iv(a+16|0,s)||!Ar(a+544|0,s)||!Ar(a+564|0,s)||!Ar(a+584|0,s))break e;ie=r[a+4>>2],y=c,c=0,s=0,f=re-32|0,re=f,h=a,u=r[a+12>>2],r[f+16>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0;t:{n:{if(u){if(u>>>0>=1073741824)break n;a=u<<2,c=Te(a),r[f+8>>2]=c,s=a+c|0,r[f+16>>2]=s,Ct(c,0,a),r[f+12>>2]=s}a=r[h+628>>2],m=r[a>>2],m&&(r[a+4>>2]=m,W(m),r[a+8>>2]=0,r[a>>2]=0,r[a+4>>2]=0,u=r[h+12>>2],c=r[f+8>>2],s=r[f+12>>2]),r[a+4>>2]=s,r[a>>2]=c,r[a+8>>2]=r[f+16>>2],c=0,r[f+16>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0,m=0;i:{if(u){if(u>>>0>=1073741824)break i;a=u<<2,m=Te(a),r[f+8>>2]=m,c=a+m|0,r[f+16>>2]=c,Ct(m,0,a),r[f+12>>2]=c}a=r[h+640>>2],s=r[a>>2],s&&(r[a+4>>2]=s,W(s),r[a+8>>2]=0,r[a>>2]=0,r[a+4>>2]=0,m=r[f+8>>2],c=r[f+12>>2]),r[a+4>>2]=c,r[a>>2]=m,r[a+8>>2]=r[f+16>>2],r[f+24>>2]=0,r[f+28>>2]=0,r[f+16>>2]=0,r[f+20>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0,Ir(f+8|0),a=r[f+24>>2]+r[f+28>>2]|0,s=(a>>>0)/341|0,a=r[r[f+12>>2]+(s<<2)>>2]+ne(a-ne(s,341)|0,12)|0,r[a+4>>2]=0,r[a+8>>2]=0,r[a>>2]=ie,s=1,a=r[f+28>>2],u=a+1|0,r[f+28>>2]=u;r:{if(a>>>0>u>>>0)break r;for(;;){if(N=r[f+12>>2],s=r[f+24>>2],m=u-1|0,a=s+m|0,c=(a>>>0)/341|0,a=r[N+(c<<2)>>2]+ne(a-ne(c,341)|0,12)|0,T=r[a+8>>2],c=r[a+4>>2],A=r[a>>2],r[f+28>>2]=m,a=r[f+16>>2],m=a-N|0,((m?ne(m>>2,341)-1|0:0)-(s+u|0)|0)+1>>>0>=682&&(W(r[a-4>>2]),r[f+16>>2]=r[f+16>>2]-4),s=0,A>>>0>ie>>>0||(a=r[h+12>>2],m=(a-1|0)==(c|0)?0:c+1|0,m>>>0>=a>>>0))break r;R=ne(T,12),z=R+r[h+640>>2]|0,N=R+r[h+628>>2]|0;s:{a:{if(H=m<<2,c=r[h>>2]-r[H+r[z>>2]>>2]|0,!c){if(z=0,!A)break a;for(;;){a=0,u=r[y+16>>2];o:{if((u|0)==r[y+20>>2])break o;for(;;){T=ne(a,20)+u|0,s=r[N>>2]+(r[T+4>>2]<<2)|0,R=r[T>>2],m=r[T+12>>2];c:{if(m>>>0>3)break c;if(c=r[y+12>>2],!r[T+16>>2]){s=c;break c}for(u=0;c=$e(c,(u<<2)+s|0,m),m=r[T+12>>2],c=c+m|0,u=u+1|0,u>>>0<Ue[T+16>>2];);s=r[y+12>>2]}if(u=r[y+28>>2],u=I[R+84|0]?u:r[r[R+68>>2]+(u<<2)>>2],u>>>0>=Ue[R+80>>2])break o;if(c=r[R+40>>2],$e(r[r[R>>2]>>2]+ne(c,u)|0,s,c),a=a+1|0,u=r[y+16>>2],!(a>>>0<(r[y+20>>2]-u|0)/20>>>0))break}}if(r[y+28>>2]=r[y+28>>2]+1,r[h+8>>2]=r[h+8>>2]+1,z=z+1|0,(A|0)==(z|0))break}break a}o:{c:{l:{u:{if(A>>>0<=2){if(a=r[h+616>>2],r[a>>2]=m,c=1,u=r[h+12>>2],u>>>0>1)break u;break o}if(Ue[h+8>>2]>Ue[h+4>>2])break r;if(a=r[h+628>>2],U=T+1|0,z=ne(U,12),s=a+z|0,(s|0)!=(N|0)&&(Wi(s,r[N>>2],r[N+4>>2]),a=r[h+628>>2]),a=H+r[a+z>>2]|0,r[a>>2]=r[a>>2]+(1<<c-1),c=0,u=0,a=Ms(A)^31,a)for(;c=js(((u<<4)+h|0)+16|0)|c<<1,u=u+1|0,(a|0)!=(u|0););a=(A>>>1|0)-c|0,u=A-a|0;f:{if((u|0)==(a|0)){s=a;break f}if(s=r[h+596>>2],(s|0)==r[h+588>>2])break l;c=r[s>>2],A=r[h+600>>2],N=A+1|0,r[h+600>>2]=N,c=c&-2147483648>>>A;d:{if((N|0)==32){if(r[h+600>>2]=0,r[h+596>>2]=s+4,c)break d;break l}if(!c)break l}s=u}u=a;break c}for(;m=(u-1|0)==(m|0)?0:m+1|0,r[a+(c<<2)>>2]=m,c=c+1|0,u=r[h+12>>2],c>>>0<u>>>0;);break o}s=a}if(a=r[h+640>>2],c=a+R|0,A=r[c>>2],N=A+H|0,r[N>>2]=r[N>>2]+1,Wi(a+z|0,A,r[c+4>>2]),u&&(c=r[f+28>>2]+r[f+24>>2]|0,a=r[f+12>>2],A=r[f+16>>2]-a|0,(c|0)==((A?ne(A>>2,341)-1|0:0)|0)?(Ir(f+8|0),c=r[f+24>>2]+r[f+28>>2]|0,A=r[f+12>>2]):A=a,a=(c>>>0)/341|0,a=r[A+(a<<2)>>2]+ne(c-ne(a,341)|0,12)|0,r[a+8>>2]=T,r[a+4>>2]=m,r[a>>2]=u,r[f+28>>2]=r[f+28>>2]+1),!s)break a;u=r[f+28>>2]+r[f+24>>2]|0,c=r[f+12>>2],a=r[f+16>>2]-c|0,(u|0)==((a?ne(a>>2,341)-1|0:0)|0)&&(Ir(f+8|0),u=r[f+24>>2]+r[f+28>>2]|0,c=r[f+12>>2]),a=(u>>>0)/341|0,a=r[c+(a<<2)>>2]+ne(u-ne(a,341)|0,12)|0,r[a+8>>2]=U,r[a+4>>2]=m,r[a>>2]=s,u=r[f+28>>2]+1|0,r[f+28>>2]=u;break s}if(H=0,!A)break a;for(;;){if(u)for(m=r[h+548>>2],c=r[h+604>>2],we=r[h+616>>2],Me=r[N>>2],Ie=r[z>>2],u=0;;){T=(u<<2)+we|0,r[c+(r[T>>2]<<2)>>2]=0,s=r[T>>2]<<2,a=r[h>>2]-r[s+Ie>>2]|0;o:{if(!a)break o;if(s=s+c|0,R=r[h+560>>2],Z=32-R|0,(Z|0)>=(a|0)){if(U=r[h+556>>2],(U|0)==(m|0)){r[s>>2]=0;break o}if(r[s>>2]=r[U>>2]<<R>>>32-a,a=a+r[h+560>>2]|0,r[h+560>>2]=a,(a|0)!=32)break o;r[h+560>>2]=0,r[h+556>>2]=U+4;break o}if(U=r[h+556>>2],ge=U+4|0,(m|0)==(ge|0)){r[s>>2]=0;break o}We=r[U>>2],r[h+556>>2]=ge,Z=a-Z|0,r[h+560>>2]=Z,r[s>>2]=r[U+4>>2]>>>32-Z|We<<R>>>32-a}if(a=r[T>>2]<<2,s=a+c|0,r[s>>2]=r[s>>2]|r[a+Me>>2],u=u+1|0,!(u>>>0<Ue[h+12>>2]))break}a=0,u=r[y+16>>2];o:{if((u|0)==r[y+20>>2])break o;for(;;){T=ne(a,20)+u|0,s=r[h+604>>2]+(r[T+4>>2]<<2)|0,R=r[T>>2],m=r[T+12>>2];c:{if(m>>>0>3)break c;if(c=r[y+12>>2],!r[T+16>>2]){s=c;break c}for(u=0;c=$e(c,(u<<2)+s|0,m),m=r[T+12>>2],c=c+m|0,u=u+1|0,u>>>0<Ue[T+16>>2];);s=r[y+12>>2]}if(u=r[y+28>>2],u=I[R+84|0]?u:r[r[R+68>>2]+(u<<2)>>2],u>>>0>=Ue[R+80>>2])break o;if(c=r[R+40>>2],$e(r[r[R>>2]>>2]+ne(c,u)|0,s,c),a=a+1|0,u=r[y+16>>2],!(a>>>0<(r[y+20>>2]-u|0)/20>>>0))break}}if(r[y+28>>2]=r[y+28>>2]+1,r[h+8>>2]=r[h+8>>2]+1,H=H+1|0,(A|0)==(H|0))break a;u=r[h+12>>2]}}u=r[f+28>>2]}if(!u)break}s=1}if(r[f+28>>2]=0,m=r[f+16>>2],u=r[f+12>>2],c=m-u|0,c>>>0>=9)for(;W(r[u>>2]),u=r[f+12>>2]+4|0,r[f+12>>2]=u,m=r[f+16>>2],c=m-u|0,c>>>0>8;);a=170;r:switch((c>>>2|0)-1|0){case 1:a=341;case 0:r[f+24>>2]=a;break;default:break r}r:{if((u|0)==(m|0))break r;for(;W(r[u>>2]),u=u+4|0,(m|0)!=(u|0););if(a=r[f+16>>2],c=r[f+12>>2],(a|0)==(c|0))break r;r[f+16>>2]=a+(((a-c|0)-4>>>2^-1)<<2)}a=r[f+8>>2],a&&W(a),re=f+32|0;break t}jt(),Xe()}jt(),Xe()}u=s}return u}function Mee(a,s,c){var u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0,ie=0,ge=0,we=0,Me=0,Ie=0,We=0,ut=0;h=r[s+12>>2],f=r[s+20>>2],A=r[s+16>>2],u=A+4|0,f=u>>>0<4?f+1|0:f;e:{if(u>>>0>Ue[s+8>>2]&(f|0)>=(h|0)|(f|0)>(h|0)||(f=A+r[s>>2]|0,r[a>>2]=I[f|0]|I[f+1|0]<<8|(I[f+2|0]<<16|I[f+3|0]<<24),f=r[s+20>>2],h=f,u=r[s+16>>2],A=u+4|0,f=A>>>0<4?h+1|0:h,R=A,r[s+16>>2]=A,r[s+20>>2]=f,Ue[a>>2]>32)||(A=r[s+12>>2],f=h,h=u+8|0,f=h>>>0<8?f+1|0:f,h>>>0>Ue[s+8>>2]&(f|0)>=(A|0)|(f|0)>(A|0)))break e;if(f=R+r[s>>2]|0,y=I[f|0]|I[f+1|0]<<8|(I[f+2|0]<<16|I[f+3|0]<<24),r[a+4>>2]=y,f=r[s+20>>2],h=r[s+16>>2]+4|0,f=h>>>0<4?f+1|0:f,r[s+16>>2]=h,r[s+20>>2]=f,!y)return 1;if(y=0,r[a+8>>2]=0,!sr(a+16|0,s)||!Ar(a+32|0,s)||!Ar(a+52|0,s)||!Ar(a+72|0,s))break e;Z=r[a+4>>2],A=c,s=0,c=0,u=re-32|0,re=u,h=a,a=r[a+12>>2],r[u+16>>2]=0,r[u+8>>2]=0,r[u+12>>2]=0;t:{n:{if(a){if(a>>>0>=1073741824)break n;f=a<<2,s=Te(f),r[u+8>>2]=s,c=s+f|0,r[u+16>>2]=c,Ct(s,0,f),r[u+12>>2]=c}f=r[h+116>>2],y=r[f>>2],y&&(r[f+4>>2]=y,W(y),r[f+8>>2]=0,r[f>>2]=0,r[f+4>>2]=0,c=r[u+12>>2],s=r[u+8>>2],a=r[h+12>>2]),r[f+4>>2]=c,r[f>>2]=s,r[f+8>>2]=r[u+16>>2],s=0,r[u+16>>2]=0,r[u+8>>2]=0,r[u+12>>2]=0;i:{if(a){if(a>>>0>=1073741824)break i;a=a<<2,m=Te(a),r[u+8>>2]=m,s=a+m|0,r[u+16>>2]=s,Ct(m,0,a),r[u+12>>2]=s}a=r[h+128>>2],c=r[a>>2],c&&(r[a+4>>2]=c,W(c),r[a+8>>2]=0,r[a>>2]=0,r[a+4>>2]=0,m=r[u+8>>2],s=r[u+12>>2]),r[a+4>>2]=s,r[a>>2]=m,r[a+8>>2]=r[u+16>>2],r[u+24>>2]=0,r[u+28>>2]=0,r[u+16>>2]=0,r[u+20>>2]=0,r[u+8>>2]=0,r[u+12>>2]=0,Ir(u+8|0),a=r[u+24>>2]+r[u+28>>2]|0,s=(a>>>0)/341|0,a=r[r[u+12>>2]+(s<<2)>>2]+ne(a-ne(s,341)|0,12)|0,r[a+4>>2]=0,r[a+8>>2]=0,r[a>>2]=Z,f=1,s=r[u+28>>2],a=s+1|0,r[u+28>>2]=a;r:{if(a>>>0<s>>>0)break r;for(we=h+16|0;;){if(T=r[u+12>>2],f=r[u+24>>2],m=a-1|0,s=f+m|0,c=(s>>>0)/341|0,s=r[T+(c<<2)>>2]+ne(s-ne(c,341)|0,12)|0,c=r[s+8>>2],y=r[s+4>>2],R=r[s>>2],r[u+28>>2]=m,s=r[u+16>>2],m=s-T|0,((m?ne(m>>2,341)-1|0:0)-(a+f|0)|0)+1>>>0>=682&&(W(r[s-4>>2]),r[u+16>>2]=r[u+16>>2]-4),R>>>0>Z>>>0){f=0;break r}if(f=0,a=r[h+12>>2],m=(y|0)==(a-1|0)?0:y+1|0,m>>>0>=a>>>0)break r;a=r[h+116>>2],s=ne(c,12),U=a+s|0;s:{if(T=m<<2,ie=s+r[h+128>>2]|0,y=r[h>>2]-r[T+r[ie>>2]>>2]|0,!y){if(!R)break s;if(a=r[A+16>>2],m=r[A+20>>2],(a|0)==(m|0)){a=r[h+8>>2],r[A+28>>2]=R+r[A+28>>2],r[h+8>>2]=a+R;break s}for(;;){y=0;a:{if((a|0)==(m|0))break a;for(;;){T=ne(y,20)+a|0,c=r[U>>2]+(r[T+4>>2]<<2)|0,N=r[T>>2],m=r[T+12>>2];o:{if(m>>>0>3)break o;if(s=r[A+12>>2],!r[T+16>>2]){c=s;break o}for(a=0;s=$e(s,(a<<2)+c|0,m),m=r[T+12>>2],s=s+m|0,a=a+1|0,a>>>0<Ue[T+16>>2];);c=r[A+12>>2]}if(a=r[A+28>>2],a=I[N+84|0]?a:r[r[N+68>>2]+(a<<2)>>2],a>>>0>=Ue[N+80>>2])break a;if(s=a,a=r[N+40>>2],$e(r[r[N>>2]>>2]+ne(s,a)|0,c,a),y=y+1|0,a=r[A+16>>2],!(y>>>0<(r[A+20>>2]-a|0)/20>>>0))break}}if(r[A+28>>2]=r[A+28>>2]+1,r[h+8>>2]=r[h+8>>2]+1,f=f+1|0,(R|0)==(f|0))break s;a=r[A+16>>2],m=r[A+20>>2]}}a:{o:{c:{l:{if(R>>>0<=2){if(c=r[h+104>>2],r[c>>2]=m,s=1,a=r[h+12>>2],a>>>0>1)break l;break a}if(Ue[h+8>>2]>Ue[h+4>>2])break r;f=a,a=s+12|0,Wi(f+a|0,r[U>>2],r[U+4>>2]),a=T+r[a+r[h+116>>2]>>2]|0,r[a>>2]=r[a>>2]+(1<<y-1),r[u+4>>2]=0,WM(we,Ms(R)^31,u+4|0),N=c+1|0,a=(R>>>1|0)-r[u+4>>2]|0,f=R-a|0;u:{if((f|0)==(a|0)){f=a;break u}if(y=r[h+84>>2],(y|0)==r[h+76>>2])break c;R=r[y>>2],U=r[h+88>>2],z=U+1|0,r[h+88>>2]=z,R=R&-2147483648>>>U;f:{if((z|0)==32){if(r[h+88>>2]=0,r[h+84>>2]=y+4,R)break f;break c}if(!R)break c}}y=f,f=a;break o}for(;m=(a-1|0)==(m|0)?0:m+1|0,r[c+(s<<2)>>2]=m,a=r[h+12>>2],s=s+1|0,a>>>0>s>>>0;);break a}y=a}if(a=r[h+128>>2],s=a+s|0,R=r[s>>2],T=R+T|0,r[T>>2]=r[T>>2]+1,Wi(a+ne(N,12)|0,R,r[s+4>>2]),f&&(a=r[u+28>>2]+r[u+24>>2]|0,s=r[u+12>>2],R=r[u+16>>2]-s|0,(a|0)==((R?ne(R>>2,341)-1|0:0)|0)&&(Ir(u+8|0),s=r[u+12>>2],a=r[u+24>>2]+r[u+28>>2]|0),R=s,s=(a>>>0)/341|0,a=r[R+(s<<2)>>2]+ne(a-ne(s,341)|0,12)|0,r[a+8>>2]=c,r[a+4>>2]=m,r[a>>2]=f,r[u+28>>2]=r[u+28>>2]+1),!y)break s;a=r[u+28>>2]+r[u+24>>2]|0,s=r[u+12>>2],c=r[u+16>>2]-s|0,(a|0)==((c?ne(c>>2,341)-1|0:0)|0)&&(Ir(u+8|0),s=r[u+12>>2],a=r[u+24>>2]+r[u+28>>2]|0),c=s,s=(a>>>0)/341|0,a=r[c+(s<<2)>>2]+ne(a-ne(s,341)|0,12)|0,r[a+8>>2]=N,r[a+4>>2]=m,r[a>>2]=y,r[u+28>>2]=r[u+28>>2]+1;break s}if(!R)break s;for(;;){if(a)for(m=r[h+36>>2],y=r[h+92>>2],Me=r[h+104>>2],Ie=r[U>>2],We=r[ie>>2],a=0;;){T=(a<<2)+Me|0,r[y+(r[T>>2]<<2)>>2]=0,c=r[T>>2]<<2,s=r[h>>2]-r[c+We>>2]|0;a:{if(!s)break a;if(c=c+y|0,N=r[h+48>>2],H=32-N|0,(H|0)>=(s|0)){if(z=r[h+44>>2],(z|0)==(m|0)){r[c>>2]=0;break a}if(r[c>>2]=r[z>>2]<<N>>>32-s,s=s+r[h+48>>2]|0,r[h+48>>2]=s,(s|0)!=32)break a;r[h+48>>2]=0,r[h+44>>2]=z+4;break a}if(z=r[h+44>>2],ge=z+4|0,(m|0)==(ge|0)){r[c>>2]=0;break a}ut=r[z>>2],r[h+44>>2]=ge,H=s-H|0,r[h+48>>2]=H,r[c>>2]=r[z+4>>2]>>>32-H|ut<<N>>>32-s}if(s=r[T>>2]<<2,c=s+y|0,r[c>>2]=r[c>>2]|r[s+Ie>>2],a=a+1|0,!(a>>>0<Ue[h+12>>2]))break}y=0,a=r[A+16>>2];a:{if((a|0)==r[A+20>>2])break a;for(;;){T=ne(y,20)+a|0,c=r[h+92>>2]+(r[T+4>>2]<<2)|0,N=r[T>>2],m=r[T+12>>2];o:{if(m>>>0>3)break o;if(s=r[A+12>>2],!r[T+16>>2]){c=s;break o}for(a=0;s=$e(s,(a<<2)+c|0,m),m=r[T+12>>2],s=s+m|0,a=a+1|0,a>>>0<Ue[T+16>>2];);c=r[A+12>>2]}if(a=r[A+28>>2],a=I[N+84|0]?a:r[r[N+68>>2]+(a<<2)>>2],a>>>0>=Ue[N+80>>2])break a;if(s=a,a=r[N+40>>2],$e(r[r[N>>2]>>2]+ne(s,a)|0,c,a),y=y+1|0,a=r[A+16>>2],!(y>>>0<(r[A+20>>2]-a|0)/20>>>0))break}}if(r[A+28>>2]=r[A+28>>2]+1,r[h+8>>2]=r[h+8>>2]+1,f=f+1|0,(R|0)==(f|0))break s;a=r[h+12>>2]}}if(a=r[u+28>>2],!a)break}f=1}if(r[u+28>>2]=0,m=r[u+16>>2],a=r[u+12>>2],s=m-a|0,s>>>0>=9)for(;W(r[a>>2]),a=r[u+12>>2]+4|0,r[u+12>>2]=a,m=r[u+16>>2],s=m-a|0,s>>>0>8;);c=170;r:switch((s>>>2|0)-1|0){case 1:c=341;case 0:r[u+24>>2]=c;break;default:break r}r:{if((a|0)==(m|0))break r;for(;W(r[a>>2]),a=a+4|0,(m|0)!=(a|0););if(a=r[u+16>>2],s=r[u+12>>2],(a|0)==(s|0))break r;r[u+16>>2]=a+(((a-s|0)-4>>>2^-1)<<2)}a=r[u+8>>2],a&&W(a),re=u+32|0;break t}jt(),Xe()}jt(),Xe()}y=f}return y}function kee(a,s,c){var u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0,ie=0,ge=0,we=0,Me=0,Ie=0,We=0;m=r[s+12>>2],h=r[s+20>>2],A=r[s+16>>2],f=A+4|0,h=f>>>0<4?h+1|0:h;e:{if((m|0)<=(h|0)&f>>>0>Ue[s+8>>2]|(m|0)<(h|0)||(h=A+r[s>>2]|0,r[a>>2]=I[h|0]|I[h+1|0]<<8|(I[h+2|0]<<16|I[h+3|0]<<24),h=r[s+20>>2],m=h,f=r[s+16>>2],A=f+4|0,h=A>>>0<4?m+1|0:m,T=A,r[s+16>>2]=A,r[s+20>>2]=h,Ue[a>>2]>32)||(A=r[s+12>>2],h=m,m=f+8|0,h=m>>>0<8?h+1|0:h,m>>>0>Ue[s+8>>2]&(h|0)>=(A|0)|(h|0)>(A|0)))break e;if(u=T+r[s>>2]|0,h=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),r[a+4>>2]=h,u=r[s+20>>2],m=r[s+16>>2]+4|0,u=m>>>0<4?u+1|0:u,r[s+16>>2]=m,r[s+20>>2]=u,!h)return 1;if(u=0,r[a+8>>2]=0,!Iv(a+16|0,s)||!Ar(a+544|0,s)||!Ar(a+564|0,s)||!Ar(a+584|0,s))break e;Z=r[a+4>>2],A=c,s=0,c=0,f=re-32|0,re=f,m=a,u=r[a+12>>2],r[f+16>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0;t:{n:{if(u){if(u>>>0>=1073741824)break n;a=u<<2,s=Te(a),r[f+8>>2]=s,c=a+s|0,r[f+16>>2]=c,Ct(s,0,a),r[f+12>>2]=c}a=r[m+628>>2],h=r[a>>2],h&&(r[a+4>>2]=h,W(h),r[a+8>>2]=0,r[a>>2]=0,r[a+4>>2]=0,u=r[m+12>>2],c=r[f+12>>2],s=r[f+8>>2]),r[a+4>>2]=c,r[a>>2]=s,r[a+8>>2]=r[f+16>>2],s=0,r[f+16>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0;i:{if(u){if(u>>>0>=1073741824)break i;a=u<<2,y=Te(a),r[f+8>>2]=y,s=a+y|0,r[f+16>>2]=s,Ct(y,0,a),r[f+12>>2]=s}a=r[m+640>>2],c=r[a>>2],c&&(r[a+4>>2]=c,W(c),r[a+8>>2]=0,r[a>>2]=0,r[a+4>>2]=0,y=r[f+8>>2],s=r[f+12>>2]),r[a+4>>2]=s,r[a>>2]=y,r[a+8>>2]=r[f+16>>2],r[f+24>>2]=0,r[f+28>>2]=0,r[f+16>>2]=0,r[f+20>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0,Ir(f+8|0),a=r[f+24>>2]+r[f+28>>2]|0,s=(a>>>0)/341|0,a=r[r[f+12>>2]+(s<<2)>>2]+ne(a-ne(s,341)|0,12)|0,r[a+4>>2]=0,r[a+8>>2]=0,r[a>>2]=Z,c=1,a=r[f+28>>2],u=a+1|0,r[f+28>>2]=u;r:{if(a>>>0>u>>>0)break r;for(;;){if(y=r[f+12>>2],c=r[f+24>>2],h=u-1|0,a=c+h|0,s=(a>>>0)/341|0,a=r[y+(s<<2)>>2]+ne(a-ne(s,341)|0,12)|0,N=r[a+8>>2],s=r[a+4>>2],T=r[a>>2],r[f+28>>2]=h,a=r[f+16>>2],h=a-y|0,((h?ne(h>>2,341)-1|0:0)-(c+u|0)|0)+1>>>0>=682&&(W(r[a-4>>2]),r[f+16>>2]=r[f+16>>2]-4),T>>>0>Z>>>0){c=0;break r}if(c=0,a=r[m+12>>2],y=(s|0)==(a-1|0)?0:s+1|0,y>>>0>=a>>>0)break r;a=r[m+628>>2],R=ne(N,12),U=a+R|0;s:{a:{if(z=y<<2,ie=R+r[m+640>>2]|0,s=r[m>>2]-r[z+r[ie>>2]>>2]|0,!s){if(a=0,!T)break a;for(;;){h=0,u=r[A+16>>2];o:{if((u|0)==r[A+20>>2])break o;for(;;){N=ne(h,20)+u|0,c=r[U>>2]+(r[N+4>>2]<<2)|0,R=r[N>>2],y=r[N+12>>2];c:{if(y>>>0>3)break c;if(s=r[A+12>>2],!r[N+16>>2]){c=s;break c}for(u=0;s=$e(s,(u<<2)+c|0,y),y=r[N+12>>2],s=s+y|0,u=u+1|0,u>>>0<Ue[N+16>>2];);c=r[A+12>>2]}if(u=r[A+28>>2],u=I[R+84|0]?u:r[r[R+68>>2]+(u<<2)>>2],u>>>0>=Ue[R+80>>2])break o;if(s=r[R+40>>2],$e(r[r[R>>2]>>2]+ne(s,u)|0,c,s),h=h+1|0,u=r[A+16>>2],!(h>>>0<(r[A+20>>2]-u|0)/20>>>0))break}}if(r[A+28>>2]=r[A+28>>2]+1,r[m+8>>2]=r[m+8>>2]+1,a=a+1|0,(T|0)==(a|0))break}break a}o:{c:{l:{u:{if(T>>>0<=2){if(a=r[m+616>>2],r[a>>2]=y,s=1,u=r[m+12>>2],u>>>0>1)break u;break o}if(Ue[m+8>>2]>Ue[m+4>>2])break r;if(c=a,a=R+12|0,Wi(c+a|0,r[U>>2],r[U+4>>2]),a=z+r[a+r[m+628>>2]>>2]|0,r[a>>2]=r[a>>2]+(1<<s-1),s=0,u=0,a=Ms(T)^31,a)for(;s=js(((u<<4)+m|0)+16|0)|s<<1,u=u+1|0,(a|0)!=(u|0););c=N+1|0,a=(T>>>1|0)-s|0,u=T-a|0;f:{if((u|0)==(a|0)){u=a;break f}if(s=r[m+596>>2],(s|0)==r[m+588>>2])break l;h=r[s>>2],T=r[m+600>>2],U=T+1|0,r[m+600>>2]=U,h=h&-2147483648>>>T;d:{if((U|0)==32){if(r[m+600>>2]=0,r[m+596>>2]=s+4,h)break d;break l}if(!h)break l}}h=u,u=a;break c}for(;y=(u-1|0)==(y|0)?0:y+1|0,r[a+(s<<2)>>2]=y,s=s+1|0,u=r[m+12>>2],s>>>0<u>>>0;);break o}h=a}if(a=r[m+640>>2],s=a+R|0,T=r[s>>2],R=T+z|0,r[R>>2]=r[R>>2]+1,Wi(a+ne(c,12)|0,T,r[s+4>>2]),u&&(s=r[f+28>>2]+r[f+24>>2]|0,a=r[f+12>>2],T=r[f+16>>2]-a|0,(s|0)==((T?ne(T>>2,341)-1|0:0)|0)?(Ir(f+8|0),s=r[f+24>>2]+r[f+28>>2]|0,T=r[f+12>>2]):T=a,a=(s>>>0)/341|0,a=r[T+(a<<2)>>2]+ne(s-ne(a,341)|0,12)|0,r[a+8>>2]=N,r[a+4>>2]=y,r[a>>2]=u,r[f+28>>2]=r[f+28>>2]+1),!h)break a;u=r[f+28>>2]+r[f+24>>2]|0,s=r[f+12>>2],a=r[f+16>>2]-s|0,(u|0)==((a?ne(a>>2,341)-1|0:0)|0)&&(Ir(f+8|0),u=r[f+24>>2]+r[f+28>>2]|0,s=r[f+12>>2]),a=(u>>>0)/341|0,a=r[s+(a<<2)>>2]+ne(u-ne(a,341)|0,12)|0,r[a+8>>2]=c,r[a+4>>2]=y,r[a>>2]=h,u=r[f+28>>2]+1|0,r[f+28>>2]=u;break s}if(a=0,!T)break a;for(;;){if(u)for(y=r[m+548>>2],h=r[m+604>>2],we=r[m+616>>2],Me=r[U>>2],Ie=r[ie>>2],u=0;;){N=(u<<2)+we|0,r[h+(r[N>>2]<<2)>>2]=0,c=r[N>>2]<<2,s=r[m>>2]-r[c+Ie>>2]|0;o:{if(!s)break o;if(c=c+h|0,R=r[m+560>>2],H=32-R|0,(H|0)>=(s|0)){if(z=r[m+556>>2],(z|0)==(y|0)){r[c>>2]=0;break o}if(r[c>>2]=r[z>>2]<<R>>>32-s,s=s+r[m+560>>2]|0,r[m+560>>2]=s,(s|0)!=32)break o;r[m+560>>2]=0,r[m+556>>2]=z+4;break o}if(z=r[m+556>>2],ge=z+4|0,(y|0)==(ge|0)){r[c>>2]=0;break o}We=r[z>>2],r[m+556>>2]=ge,H=s-H|0,r[m+560>>2]=H,r[c>>2]=r[z+4>>2]>>>32-H|We<<R>>>32-s}if(s=r[N>>2]<<2,c=s+h|0,r[c>>2]=r[c>>2]|r[s+Me>>2],u=u+1|0,!(u>>>0<Ue[m+12>>2]))break}h=0,u=r[A+16>>2];o:{if((u|0)==r[A+20>>2])break o;for(;;){N=ne(h,20)+u|0,c=r[m+604>>2]+(r[N+4>>2]<<2)|0,R=r[N>>2],y=r[N+12>>2];c:{if(y>>>0>3)break c;if(s=r[A+12>>2],!r[N+16>>2]){c=s;break c}for(u=0;s=$e(s,(u<<2)+c|0,y),y=r[N+12>>2],s=s+y|0,u=u+1|0,u>>>0<Ue[N+16>>2];);c=r[A+12>>2]}if(u=r[A+28>>2],u=I[R+84|0]?u:r[r[R+68>>2]+(u<<2)>>2],u>>>0>=Ue[R+80>>2])break o;if(s=r[R+40>>2],$e(r[r[R>>2]>>2]+ne(s,u)|0,c,s),h=h+1|0,u=r[A+16>>2],!(h>>>0<(r[A+20>>2]-u|0)/20>>>0))break}}if(r[A+28>>2]=r[A+28>>2]+1,r[m+8>>2]=r[m+8>>2]+1,a=a+1|0,(T|0)==(a|0))break a;u=r[m+12>>2]}}u=r[f+28>>2]}if(!u)break}c=1}if(r[f+28>>2]=0,y=r[f+16>>2],u=r[f+12>>2],s=y-u|0,s>>>0>=9)for(;W(r[u>>2]),u=r[f+12>>2]+4|0,r[f+12>>2]=u,y=r[f+16>>2],s=y-u|0,s>>>0>8;);a=170;r:switch((s>>>2|0)-1|0){case 1:a=341;case 0:r[f+24>>2]=a;break;default:break r}r:{if((u|0)==(y|0))break r;for(;W(r[u>>2]),u=u+4|0,(y|0)!=(u|0););if(a=r[f+16>>2],s=r[f+12>>2],(a|0)==(s|0))break r;r[f+16>>2]=a+(((a-s|0)-4>>>2^-1)<<2)}a=r[f+8>>2],a&&W(a),re=f+32|0;break t}jt(),Xe()}jt(),Xe()}u=c}return u}function Cee(a,s,c){var u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0,ie=0,ge=0,we=0,Me=0,Ie=0,We=0;y=r[s+12>>2],h=r[s+20>>2],f=r[s+16>>2],m=f+4|0,h=m>>>0<4?h+1|0:h;e:{if(m>>>0>Ue[s+8>>2]&(h|0)>=(y|0)|(h|0)>(y|0)||(h=f+r[s>>2]|0,r[a>>2]=I[h|0]|I[h+1|0]<<8|(I[h+2|0]<<16|I[h+3|0]<<24),h=r[s+20>>2],y=h,m=r[s+16>>2],f=m+4|0,h=f>>>0<4?h+1|0:h,A=f,r[s+16>>2]=f,r[s+20>>2]=h,Ue[a>>2]>32)||(f=r[s+12>>2],h=y,y=m+8|0,h=y>>>0<8?h+1|0:h,(f|0)<=(h|0)&y>>>0>Ue[s+8>>2]|(f|0)<(h|0)))break e;if(u=A+r[s>>2]|0,h=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),r[a+4>>2]=h,u=r[s+20>>2],y=r[s+16>>2]+4|0,u=y>>>0<4?u+1|0:u,r[s+16>>2]=y,r[s+20>>2]=u,!h)return 1;if(u=0,r[a+8>>2]=0,!Iv(a+16|0,s)||!Ar(a+544|0,s)||!Ar(a+564|0,s)||!Ar(a+584|0,s))break e;ie=r[a+4>>2],y=c,c=0,s=0,f=re-32|0,re=f,h=a,u=r[a+12>>2],r[f+16>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0;t:{n:{if(u){if(u>>>0>=1073741824)break n;a=u<<2,c=Te(a),r[f+8>>2]=c,s=a+c|0,r[f+16>>2]=s,Ct(c,0,a),r[f+12>>2]=s}a=r[h+628>>2],m=r[a>>2],m&&(r[a+4>>2]=m,W(m),r[a+8>>2]=0,r[a>>2]=0,r[a+4>>2]=0,u=r[h+12>>2],c=r[f+8>>2],s=r[f+12>>2]),r[a+4>>2]=s,r[a>>2]=c,r[a+8>>2]=r[f+16>>2],c=0,r[f+16>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0,m=0;i:{if(u){if(u>>>0>=1073741824)break i;a=u<<2,m=Te(a),r[f+8>>2]=m,c=a+m|0,r[f+16>>2]=c,Ct(m,0,a),r[f+12>>2]=c}a=r[h+640>>2],s=r[a>>2],s&&(r[a+4>>2]=s,W(s),r[a+8>>2]=0,r[a>>2]=0,r[a+4>>2]=0,m=r[f+8>>2],c=r[f+12>>2]),r[a+4>>2]=c,r[a>>2]=m,r[a+8>>2]=r[f+16>>2],r[f+24>>2]=0,r[f+28>>2]=0,r[f+16>>2]=0,r[f+20>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0,Ir(f+8|0),a=r[f+24>>2]+r[f+28>>2]|0,s=(a>>>0)/341|0,a=r[r[f+12>>2]+(s<<2)>>2]+ne(a-ne(s,341)|0,12)|0,r[a+4>>2]=0,r[a+8>>2]=0,r[a>>2]=ie,s=1,a=r[f+28>>2],u=a+1|0,r[f+28>>2]=u;r:{if(a>>>0>u>>>0)break r;for(;;){if(N=r[f+12>>2],a=r[f+24>>2],s=u-1|0,c=a+s|0,m=(c>>>0)/341|0,c=r[N+(m<<2)>>2]+ne(c-ne(m,341)|0,12)|0,T=r[c+8>>2],A=r[c>>2],r[f+28>>2]=s,s=r[f+16>>2],c=s-N|0,((c?ne(c>>2,341)-1|0:0)-(a+u|0)|0)+1>>>0>=682&&(W(r[s-4>>2]),r[f+16>>2]=r[f+16>>2]-4),s=0,A>>>0>ie>>>0||(a=r[h+628>>2],R=ne(T,12),z=R+r[h+640>>2]|0,m=rte(h,A,z),m>>>0>=Ue[h+12>>2]))break r;N=a+R|0;s:{a:{if(H=m<<2,c=r[h>>2]-r[H+r[z>>2]>>2]|0,!c){if(z=0,!A)break a;for(;;){a=0,u=r[y+16>>2];o:{if((u|0)==r[y+20>>2])break o;for(;;){T=ne(a,20)+u|0,s=r[N>>2]+(r[T+4>>2]<<2)|0,R=r[T>>2],m=r[T+12>>2];c:{if(m>>>0>3)break c;if(c=r[y+12>>2],!r[T+16>>2]){s=c;break c}for(u=0;c=$e(c,(u<<2)+s|0,m),m=r[T+12>>2],c=c+m|0,u=u+1|0,u>>>0<Ue[T+16>>2];);s=r[y+12>>2]}if(u=r[y+28>>2],u=I[R+84|0]?u:r[r[R+68>>2]+(u<<2)>>2],u>>>0>=Ue[R+80>>2])break o;if(c=r[R+40>>2],$e(r[r[R>>2]>>2]+ne(c,u)|0,s,c),a=a+1|0,u=r[y+16>>2],!(a>>>0<(r[y+20>>2]-u|0)/20>>>0))break}}if(r[y+28>>2]=r[y+28>>2]+1,r[h+8>>2]=r[h+8>>2]+1,z=z+1|0,(A|0)==(z|0))break}break a}o:{c:{l:{u:{if(A>>>0<=2){if(a=r[h+616>>2],r[a>>2]=m,c=1,u=r[h+12>>2],u>>>0>1)break u;break o}if(Ue[h+8>>2]>Ue[h+4>>2])break r;if(a=r[h+628>>2],U=T+1|0,z=ne(U,12),s=a+z|0,(s|0)!=(N|0)&&(Wi(s,r[N>>2],r[N+4>>2]),a=r[h+628>>2]),a=H+r[a+z>>2]|0,r[a>>2]=r[a>>2]+(1<<c-1),c=0,u=0,a=Ms(A)^31,a)for(;c=js(((u<<4)+h|0)+16|0)|c<<1,u=u+1|0,(a|0)!=(u|0););a=(A>>>1|0)-c|0,u=A-a|0;f:{if((u|0)==(a|0)){s=a;break f}if(s=r[h+596>>2],(s|0)==r[h+588>>2])break l;c=r[s>>2],A=r[h+600>>2],N=A+1|0,r[h+600>>2]=N,c=c&-2147483648>>>A;d:{if((N|0)==32){if(r[h+600>>2]=0,r[h+596>>2]=s+4,c)break d;break l}if(!c)break l}s=u}u=a;break c}for(;m=(u-1|0)==(m|0)?0:m+1|0,r[a+(c<<2)>>2]=m,c=c+1|0,u=r[h+12>>2],c>>>0<u>>>0;);break o}s=a}if(a=r[h+640>>2],c=a+R|0,A=r[c>>2],N=A+H|0,r[N>>2]=r[N>>2]+1,Wi(a+z|0,A,r[c+4>>2]),u&&(c=r[f+28>>2]+r[f+24>>2]|0,a=r[f+12>>2],A=r[f+16>>2]-a|0,(c|0)==((A?ne(A>>2,341)-1|0:0)|0)?(Ir(f+8|0),c=r[f+24>>2]+r[f+28>>2]|0,A=r[f+12>>2]):A=a,a=(c>>>0)/341|0,a=r[A+(a<<2)>>2]+ne(c-ne(a,341)|0,12)|0,r[a+8>>2]=T,r[a+4>>2]=m,r[a>>2]=u,r[f+28>>2]=r[f+28>>2]+1),!s)break a;u=r[f+28>>2]+r[f+24>>2]|0,c=r[f+12>>2],a=r[f+16>>2]-c|0,(u|0)==((a?ne(a>>2,341)-1|0:0)|0)&&(Ir(f+8|0),u=r[f+24>>2]+r[f+28>>2]|0,c=r[f+12>>2]),a=(u>>>0)/341|0,a=r[c+(a<<2)>>2]+ne(u-ne(a,341)|0,12)|0,r[a+8>>2]=U,r[a+4>>2]=m,r[a>>2]=s,u=r[f+28>>2]+1|0,r[f+28>>2]=u;break s}if(H=0,!A)break a;for(;;){if(u)for(m=r[h+548>>2],c=r[h+604>>2],we=r[h+616>>2],Me=r[N>>2],Ie=r[z>>2],u=0;;){T=(u<<2)+we|0,r[c+(r[T>>2]<<2)>>2]=0,s=r[T>>2]<<2,a=r[h>>2]-r[s+Ie>>2]|0;o:{if(!a)break o;if(s=s+c|0,R=r[h+560>>2],Z=32-R|0,(Z|0)>=(a|0)){if(U=r[h+556>>2],(U|0)==(m|0)){r[s>>2]=0;break o}if(r[s>>2]=r[U>>2]<<R>>>32-a,a=a+r[h+560>>2]|0,r[h+560>>2]=a,(a|0)!=32)break o;r[h+560>>2]=0,r[h+556>>2]=U+4;break o}if(U=r[h+556>>2],ge=U+4|0,(m|0)==(ge|0)){r[s>>2]=0;break o}We=r[U>>2],r[h+556>>2]=ge,Z=a-Z|0,r[h+560>>2]=Z,r[s>>2]=r[U+4>>2]>>>32-Z|We<<R>>>32-a}if(a=r[T>>2]<<2,s=a+c|0,r[s>>2]=r[s>>2]|r[a+Me>>2],u=u+1|0,!(u>>>0<Ue[h+12>>2]))break}a=0,u=r[y+16>>2];o:{if((u|0)==r[y+20>>2])break o;for(;;){T=ne(a,20)+u|0,s=r[h+604>>2]+(r[T+4>>2]<<2)|0,R=r[T>>2],m=r[T+12>>2];c:{if(m>>>0>3)break c;if(c=r[y+12>>2],!r[T+16>>2]){s=c;break c}for(u=0;c=$e(c,(u<<2)+s|0,m),m=r[T+12>>2],c=c+m|0,u=u+1|0,u>>>0<Ue[T+16>>2];);s=r[y+12>>2]}if(u=r[y+28>>2],u=I[R+84|0]?u:r[r[R+68>>2]+(u<<2)>>2],u>>>0>=Ue[R+80>>2])break o;if(c=r[R+40>>2],$e(r[r[R>>2]>>2]+ne(c,u)|0,s,c),a=a+1|0,u=r[y+16>>2],!(a>>>0<(r[y+20>>2]-u|0)/20>>>0))break}}if(r[y+28>>2]=r[y+28>>2]+1,r[h+8>>2]=r[h+8>>2]+1,H=H+1|0,(A|0)==(H|0))break a;u=r[h+12>>2]}}u=r[f+28>>2]}if(!u)break}s=1}if(r[f+28>>2]=0,m=r[f+16>>2],u=r[f+12>>2],c=m-u|0,c>>>0>=9)for(;W(r[u>>2]),u=r[f+12>>2]+4|0,r[f+12>>2]=u,m=r[f+16>>2],c=m-u|0,c>>>0>8;);a=170;r:switch((c>>>2|0)-1|0){case 1:a=341;case 0:r[f+24>>2]=a;break;default:break r}r:{if((u|0)==(m|0))break r;for(;W(r[u>>2]),u=u+4|0,(m|0)!=(u|0););if(a=r[f+16>>2],c=r[f+12>>2],(a|0)==(c|0))break r;r[f+16>>2]=a+(((a-c|0)-4>>>2^-1)<<2)}a=r[f+8>>2],a&&W(a),re=f+32|0;break t}jt(),Xe()}jt(),Xe()}u=s}return u}function Pee(a,s,c,u,f){var h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0,ie=0,ge=0,we=0,Me=0,Ie=0,We=0,ut=0,vt=0,Pt=0,Wt=0;y=re-80|0,re=y,r[y+76>>2]=s,ut=y+55|0,ge=y+56|0,s=0;e:{t:{n:{i:{r:for(;;){if((2147483647-U|0)<(s|0))break i;U=s+U|0;s:{a:{o:{if(N=r[y+76>>2],s=N,R=I[s|0],R)for(;;){c:{h=R&255;l:{if(!h){R=s;break l}if((h|0)!=37)break c;for(R=s;;){if(I[s+1|0]!=37)break l;if(h=s+2|0,r[y+76>>2]=h,R=R+1|0,m=I[s+2|0],s=h,(m|0)!=37)break}}if(s=R-N|0,We=2147483647-U|0,(s|0)>(We|0))break i;if(a&&Zv(a,N,s),s)continue r;ie=-1,h=1,s=r[y+76>>2],D[s+1|0]-48>>>0>=10|I[s+2|0]!=36||(ie=D[s+1|0]-48|0,we=1,h=3),s=h+s|0,r[y+76>>2]=s,H=0,T=D[s|0],m=T-32|0;l:{if(m>>>0>31){h=s;break l}if(h=s,A=1<<m,!(A&75913))break l;for(;;){if(h=s+1|0,r[y+76>>2]=h,H=A|H,T=D[s+1|0],m=T-32|0,m>>>0>=32)break l;if(s=h,A=1<<m,!(A&75913))break}}l:{if((T|0)==42){u:{f:{if(D[h+1|0]-48>>>0>=10||(s=r[y+76>>2],I[s+2|0]!=36))break f;r[((D[s+1|0]<<2)+f|0)-192>>2]=10,Z=r[((D[s+1|0]<<3)+u|0)-384>>2],we=1,s=s+3|0;break u}if(we)break o;we=0,Z=0,a&&(s=r[c>>2],r[c>>2]=s+4,Z=r[s>>2]),s=r[y+76>>2]+1|0}if(r[y+76>>2]=s,(Z|0)>=0)break l;Z=0-Z|0,H=H|8192;break l}if(Z=Pte(y+76|0),(Z|0)<0)break i;s=r[y+76>>2]}h=0,A=-1,m=0;l:{if(I[s|0]!=46)break l;if(I[s+1|0]==42){u:{f:{if(D[s+2|0]-48>>>0>=10||(s=r[y+76>>2],I[s+3|0]!=36))break f;r[((D[s+2|0]<<2)+f|0)-192>>2]=10,A=r[((D[s+2|0]<<3)+u|0)-384>>2],s=s+4|0;break u}if(we)break o;a?(s=r[c>>2],r[c>>2]=s+4,A=r[s>>2]):A=0,s=r[y+76>>2]+2|0}r[y+76>>2]=s,m=(A^-1)>>>31|0;break l}r[y+76>>2]=s+1,A=Pte(y+76|0),s=r[y+76>>2],m=1}for(Me=m;;){if(z=h,R=28,D[s|0]-123>>>0<4294967238)break n;if(T=s+1|0,r[y+76>>2]=T,h=D[s|0],s=T,h=I[(h+ne(z,58)|0)+13743|0],!(h-1>>>0<8))break}l:{u:{if((h|0)!=27){if(!h)break n;if((ie|0)>=0){r[(ie<<2)+f>>2]=h,s=(ie<<3)+u|0,h=r[s+4>>2],r[y+64>>2]=r[s>>2],r[y+68>>2]=h;break u}if(!a)break s;cte(y- -64|0,h,c),T=r[y+76>>2];break l}if((ie|0)>=0)break n}if(s=0,!a)continue r}m=H&-65537,h=H&8192?m:H,H=0,ie=1244,R=ge;l:{u:{f:{d:{p:{m:{y:{w:{b:{g:{E:{v:{h:{_:{A:{S:switch(s=D[T-1|0],s=z&&(s&15)==3?s&-33:s,s-88|0){case 11:break l;case 9:case 13:case 14:case 15:break u;case 27:break y;case 12:case 17:break g;case 23:break E;case 0:case 32:break v;case 24:break h;case 22:break _;case 29:break A;case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 10:case 16:case 18:case 19:case 20:case 21:case 25:case 26:case 28:case 30:case 31:break a;default:break S}S:switch(s-65|0){case 0:case 4:case 5:case 6:break u;case 2:break p;case 1:case 3:break a;default:break S}if((s|0)==83)break m;break a}T=r[y+64>>2],m=r[y+68>>2],ie=1244;break b}s=0;_:switch(z&255){case 0:r[r[y+64>>2]>>2]=U;continue r;case 1:r[r[y+64>>2]>>2]=U;continue r;case 2:h=r[y+64>>2],r[h>>2]=U,r[h+4>>2]=U>>31;continue r;case 3:zt[r[y+64>>2]>>1]=U;continue r;case 4:D[r[y+64>>2]]=U;continue r;case 6:r[r[y+64>>2]>>2]=U;continue r;case 7:break _;default:continue r}h=r[y+64>>2],r[h>>2]=U,r[h+4>>2]=U>>31;continue r}A=A>>>0>8?A:8,h=h|8,s=120}if(z=ge,Ie=s&32,T=r[y+64>>2],m=r[y+68>>2],T|m)for(;z=z-1|0,D[z|0]=Ie|I[(T&15)+14272|0],vt=!m&T>>>0>15|(m|0)!=0,N=m,m=m>>>4|0,T=(N&15)<<28|T>>>4,!!vt;);if(N=z,!(r[y+64>>2]|r[y+68>>2])|!(h&8))break w;ie=(s>>>4|0)+1244|0,H=2;break w}if(s=ge,T=r[y+64>>2],m=r[y+68>>2],T|m)for(;s=s-1|0,D[s|0]=T&7|48,z=!m&T>>>0>7|(m|0)!=0,N=m,m=m>>>3|0,T=(N&7)<<29|T>>>3,!!z;);if(N=s,!(h&8))break w;s=ge-N|0,A=(s|0)<(A|0)?A:s+1|0;break w}if(s=r[y+68>>2],m=s,T=r[y+64>>2],(s|0)<0){m=0-(((T|0)!=0)+m|0)|0,T=0-T|0,r[y+64>>2]=T,r[y+68>>2]=m,H=1,ie=1244;break b}if(h&2048){H=1,ie=1245;break b}H=h&1,ie=H?1246:1244}N=ge;b:{if(!m){z=T;break b}for(;N=N-1|0,z=Rv(T,m,10,0),s=nn,Pt=N,Wt=T-rt(z,s,10,0)|48,D[Pt|0]=Wt,Ie=m>>>0>9,T=z,m=s,!!Ie;);}if(z)for(;N=N-1|0,s=(z>>>0)/10|0,D[N|0]=z-ne(s,10)|48,m=z>>>0>9,z=s,!!m;);}if((A|0)<0&&Me)break i;if(h=Me?h&-65537:h,m=r[y+64>>2],s=r[y+68>>2],!(A|(m|s)!=0)){N=ge,R=N,A=0;break a}s=!(s|m)+(ge-N|0)|0,A=(s|0)<(A|0)?A:s;break a}T=(A|0)<0?2147483647:A,h=T,R=(h|0)!=0,s=r[y+64>>2],N=s||1758,s=N;y:{w:{b:{g:{if(!(s&3)|!h)break g;for(;;){if(!I[s|0])break b;if(h=h-1|0,R=(h|0)!=0,s=s+1|0,!(s&3))break g;if(!h)break}}if(!R)break w}b:{if(!I[s|0]|h>>>0<4)break b;for(;;){if(R=r[s>>2],(R^-1)&R-16843009&-2139062144)break b;if(s=s+4|0,h=h-4|0,!(h>>>0>3))break}}if(!h)break w;for(;;){if(!I[s|0])break y;if(s=s+1|0,h=h-1|0,!h)break}}s=0}if(s=s?s-N|0:T,R=s+N|0,(A|0)>=0){h=m,A=s;break a}if(h=m,A=s,I[R|0])break i;break a}if(A){R=r[y+64>>2];break d}s=0,Qm(a,32,Z,0,h);break f}r[y+12>>2]=0,r[y+8>>2]=r[y+64>>2],R=y+8|0,r[y+64>>2]=R,A=-1}s=0;d:{for(;;){if(m=r[R>>2],!m)break d;if(m=_te(y+4|0,m),N=(m|0)<0,!(N|m>>>0>A-s>>>0)){if(R=R+4|0,s=s+m|0,A>>>0>s>>>0)continue;break d}break}if(N)break t}if(R=61,(s|0)<0)break n;if(Qm(a,32,Z,s,h),!s){s=0;break f}for(A=0,R=r[y+64>>2];;){if(m=r[R>>2],!m||(m=_te(y+4|0,m),A=m+A|0,A>>>0>s>>>0))break f;if(Zv(a,y+4|0,m),R=R+4|0,!(s>>>0>A>>>0))break}}Qm(a,32,Z,s,h^8192),s=(s|0)<(Z|0)?Z:s;continue r}if((A|0)<0&&Me)break i;if(R=61,s=pt[0](a,Zc[y+64>>3],Z,A,h,s)|0,(s|0)>=0)continue r;break n}D[y+55|0]=r[y+64>>2],A=1,N=ut,h=m;break a}h=s+1|0,r[y+76>>2]=h,R=I[s+1|0],s=h}if(a)break e;if(!we)break s;for(s=1;;){if(a=r[(s<<2)+f>>2],a){if(cte((s<<3)+u|0,a,c),U=1,s=s+1|0,(s|0)!=10)continue;break e}break}if(U=1,s>>>0>=10)break e;for(;;){if(r[(s<<2)+f>>2])break o;if(s=s+1|0,(s|0)==10)break}break e}R=28;break n}if(T=R-N|0,z=(A|0)<(T|0)?T:A,(z|0)>(2147483647-H|0))break i;if(R=61,m=z+H|0,s=(m|0)>(Z|0)?m:Z,(We|0)<(s|0))break n;Qm(a,32,s,m,h),Zv(a,ie,H),Qm(a,48,s,m,h^65536),Qm(a,48,z,T,0),Zv(a,N,T),Qm(a,32,s,m,h^8192);continue}break}U=0;break e}R=61}r[4190]=R}U=-1}return re=y+80|0,U}function VSe(a,s,c,u,f,h){a=a|0,s=s|0,c=c|0,u=u|0,f=f|0,h=h|0;var m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0,ie=0,ge=0,we=0,Me=0,Ie=0,We=0,ut=0,vt=0,Pt=0,Wt=0,gn=0,En=0,Nn=0,nr=0,Pr=0,Jr=0,xi=0,ei=0,xr=0;y=re+-64|0,re=y,r[a+8>>2]=f,h=a+32|0,m=r[h>>2],u=r[a+36>>2]-m>>2;e:{t:{if(u>>>0<f>>>0){Xr(h,f-u|0),r[y+56>>2]=0,r[y+60>>2]=0,r[y+48>>2]=0,r[y+52>>2]=0,r[y+40>>2]=0,r[y+44>>2]=0,r[y+32>>2]=0,r[y+36>>2]=0,r[y+24>>2]=0,r[y+28>>2]=0,r[y+16>>2]=0,r[y+20>>2]=0,r[y>>2]=0;break t}if(u>>>0>f>>>0&&(r[a+36>>2]=m+(f<<2)),r[y+56>>2]=0,r[y+60>>2]=0,r[y+48>>2]=0,r[y+52>>2]=0,r[y+40>>2]=0,r[y+44>>2]=0,r[y+32>>2]=0,r[y+36>>2]=0,r[y+24>>2]=0,r[y+28>>2]=0,r[y+16>>2]=0,r[y+20>>2]=0,r[y>>2]=0,u=0,!f)break e}ea(y+16|0,f,y),A=r[y+28>>2],u=r[y+32>>2]}r[y>>2]=0,u=u-A>>2;e:{if(u>>>0>=f>>>0){if(u>>>0<=f>>>0)break e;r[y+32>>2]=(f<<2)+A;break e}ea(y+16|12,f-u|0,y)}r[y>>2]=0,h=r[y+40>>2],u=r[y+44>>2]-h>>2;e:{if(u>>>0>=f>>>0){if(u>>>0<=f>>>0)break e;r[y+44>>2]=h+(f<<2);break e}ea(y+40|0,f-u|0,y)}r[y>>2]=0,h=r[y+52>>2],u=r[y+56>>2]-h>>2;e:{if(u>>>0>=f>>>0){if(u>>>0<=f>>>0)break e;r[y+56>>2]=h+(f<<2);break e}ea(y+52|0,f-u|0,y)}A=0;e:{if(r[a+8>>2]<=0)break e;for(T=r[a+32>>2],m=r[y+16>>2];;){u=A<<2,h=r[u+m>>2],z=r[a+16>>2];t:{if((h|0)>(z|0)){r[u+T>>2]=z;break t}if(u=u+T|0,z=r[a+12>>2],(z|0)>(h|0)){r[u>>2]=z;break t}r[u>>2]=h}if(A=A+1|0,u=r[a+8>>2],!((A|0)<(u|0)))break}if((u|0)<=0)break e;for(u=0;;){m=u<<2,h=m+c|0,m=r[s+m>>2]+r[m+T>>2]|0,r[h>>2]=m;t:{if((m|0)>r[a+16>>2])m=m-r[a+20>>2]|0;else{if((m|0)>=r[a+12>>2])break t;m=m+r[a+20>>2]|0}r[h>>2]=m}if(u=u+1|0,!((u|0)<r[a+8>>2]))break}}nr=r[a+52>>2],ie=r[a+48>>2],ut=Te(16),u=ut,r[u>>2]=0,r[u+4>>2]=0,r[u+8>>2]=0,r[u+12>>2]=0,r[y+8>>2]=0,r[y>>2]=0,r[y+4>>2]=0;e:{if(f){if(f>>>0>=1073741824)break e;u=f<<2,We=Te(u),r[y>>2]=We,r[y+8>>2]=u+We,Ct(We,0,u)}Z=1,u=r[a+56>>2],Wt=r[u>>2],u=r[u+4>>2]-Wt|0;t:{if((u|0)<5)break t;for(u=u>>2,Pr=(u|0)>2?u:2,Jr=u>>>0>1?u:1,gn=f&-2,En=f&1,xi=f&-4,Nn=f&3,vt=f-1|0,ei=f<<2,z=1;;){n:{i:{r:{s:{if((z|0)!=(Jr|0)){h=r[(z<<2)+Wt>>2],u=(h>>>0)%3|0;a:{o:{if((h|0)==-1)break o;T=0,m=h+2|0,Pt=(u|0)!=0|(m|0)!=-1,U=1,ge=u?h-1|0:m,H=1<<ge,we=ge>>>5|0,xr=r[ie>>2],u=h;c:{for(;;){l:{if(r[(u>>>3&536870908)+xr>>2]>>>u&1||(m=r[r[r[ie+64>>2]+12>>2]+(u<<2)>>2],(m|0)==-1)||(R=r[nr>>2],A=r[ie+28>>2],Z=r[R+(r[A+(m<<2)>>2]<<2)>>2],(Z|0)>=(z|0))||(N=m+1|0,N=r[R+(r[A+(((N>>>0)%3|0?N:m-2|0)<<2)>>2]<<2)>>2],(N|0)>=(z|0))||(A=r[R+(r[A+(m+((m>>>0)%3|0?-1:2)<<2)>>2]<<2)>>2],(A|0)>=(z|0)))break l;u:{if(!f)break u;if(m=r[(y+16|0)+ne(T,12)>>2],R=ne(f,A),N=ne(f,N),Z=ne(f,Z),A=0,Ie=0,vt)for(;r[m+(A<<2)>>2]=(r[(A+R<<2)+c>>2]+r[(A+N<<2)+c>>2]|0)-r[(A+Z<<2)+c>>2],Me=A|1,r[m+(Me<<2)>>2]=(r[(R+Me<<2)+c>>2]+r[(N+Me<<2)+c>>2]|0)-r[(Z+Me<<2)+c>>2],A=A+2|0,Ie=Ie+2|0,(gn|0)!=(Ie|0););if(!En)break u;r[m+(A<<2)>>2]=(r[(A+R<<2)+c>>2]+r[(A+N<<2)+c>>2]|0)-r[(A+Z<<2)+c>>2]}if(m=4,T=T+1|0,(T|0)==4)break c}l:{if(U&1){if(A=u-2|0,m=u+1|0,u=-1,m=(m>>>0)%3|0?m:A,(m|0)==-1|r[r[ie>>2]+(m>>>3&536870908)>>2]>>>m&1||(m=r[r[r[ie+64>>2]+12>>2]+(m<<2)>>2],(m|0)==-1))break l;u=m+1|0,u=(u>>>0)%3|0?u:m-2|0;break l}u:{if((u>>>0)%3|0){A=u-1|0;break u}if(A=u+2|0,u=-1,(A|0)==-1)break l}if(u=-1,r[r[ie>>2]+(A>>>3&536870908)>>2]>>>A&1||(m=r[r[r[ie+64>>2]+12>>2]+(A<<2)>>2],(m|0)==-1))break l;if((m>>>0)%3|0){u=m-1|0;break l}u=m+2|0}l:{if((u|0)==(h|0))break l;if(!((U^1)&1|(u|0)!=-1)){if(!Pt|H&r[r[ie>>2]+(we<<2)>>2]||(u=r[r[r[ie+64>>2]+12>>2]+(ge<<2)>>2],(u|0)==-1))break l;U=0,u=(u>>>0)%3|0?u-1|0:u+2|0}if((u|0)!=-1)continue}break}if(m=T,(m|0)<=0)break o}for(f&&Ct(r[y>>2],0,ei),u=m-1|0,Me=(u<<2)+ut|0,u=ne(u,12)+a|0,Ie=u,Pt=r[u- -64>>2],Z=0,U=0,u=0;;){if(h=r[Me>>2],r[Me>>2]=h+1,h>>>0>=Pt>>>0)break t;c:{if(r[r[Ie+60>>2]+(h>>>3&536870908)>>2]>>>h&1||(u=u+1|0,!f))break c;if(T=r[y>>2],R=r[(y+16|0)+ne(U,12)>>2],ge=0,A=0,h=0,vt>>>0>=3)for(;N=A<<2,H=N+T|0,r[H>>2]=r[H>>2]+r[R+N>>2],H=N|4,we=H+T|0,r[we>>2]=r[we>>2]+r[R+H>>2],H=N|8,we=H+T|0,r[we>>2]=r[we>>2]+r[R+H>>2],N=N|12,H=N+T|0,r[H>>2]=r[H>>2]+r[R+N>>2],A=A+4|0,h=h+4|0,(xi|0)!=(h|0););if(!Nn)break c;for(;h=A<<2,N=h+T|0,r[N>>2]=r[N>>2]+r[h+R>>2],A=A+1|0,ge=ge+1|0,(Nn|0)!=(ge|0););}if(U=U+1|0,(U|0)==(m|0))break}if(U=ne(f,z),h=U,!u)break a;if(!f)break i;if(h=r[y>>2],A=0,m=0,vt)break s;break r}h=ne(f,z)}if(r[a+8>>2]<=0)break n;for(U=(ne(z-1|0,f)<<2)+c|0,T=r[a+32>>2],A=0;;){u=A<<2,m=r[u+U>>2],R=r[a+16>>2];a:{if((m|0)>(R|0)){r[u+T>>2]=R;break a}if(u=u+T|0,R=r[a+12>>2],(R|0)>(m|0)){r[u>>2]=R;break a}r[u>>2]=m}if(A=A+1|0,m=r[a+8>>2],!((A|0)<(m|0)))break}if(u=0,(m|0)<=0)break n;for(h=h<<2,A=h+c|0,U=s+h|0;;){m=u<<2,h=m+A|0,m=r[m+U>>2]+r[m+T>>2]|0,r[h>>2]=m;a:{if((m|0)>r[a+16>>2])m=m-r[a+20>>2]|0;else{if((m|0)>=r[a+12>>2])break a;m=m+r[a+20>>2]|0}r[h>>2]=m}if(u=u+1|0,!((u|0)<r[a+8>>2]))break}break n}ps(),Xe()}for(;T=A<<2,R=T+h|0,r[R>>2]=r[R>>2]/(u|0),T=h+(T|4)|0,r[T>>2]=r[T>>2]/(u|0),A=A+2|0,m=m+2|0,(gn|0)!=(m|0););}if(!En)break i;h=h+(A<<2)|0,r[h>>2]=r[h>>2]/(u|0)}if(r[a+8>>2]<=0)break n;for(T=r[a+32>>2],A=0;;){u=A<<2,h=r[u+We>>2],m=r[a+16>>2];i:{if((h|0)>(m|0)){r[u+T>>2]=m;break i}if(u=u+T|0,m=r[a+12>>2],(m|0)>(h|0)){r[u>>2]=m;break i}r[u>>2]=h}if(A=A+1|0,h=r[a+8>>2],!((A|0)<(h|0)))break}if(u=0,(h|0)<=0)break n;for(h=U<<2,A=h+c|0,U=s+h|0;;){m=u<<2,h=m+A|0,m=r[m+U>>2]+r[m+T>>2]|0,r[h>>2]=m;i:{if((m|0)>r[a+16>>2])m=m-r[a+20>>2]|0;else{if((m|0)>=r[a+12>>2])break i;m=m+r[a+20>>2]|0}r[h>>2]=m}if(u=u+1|0,!((u|0)<r[a+8>>2]))break}}if(Z=1,z=z+1|0,(Pr|0)==(z|0))break}}return a=r[y>>2],a&&W(a),W(ut),a=r[y+52>>2],a&&(r[y+56>>2]=a,W(a)),a=r[y+40>>2],a&&(r[y+44>>2]=a,W(a)),a=r[y+28>>2],a&&(r[y+32>>2]=a,W(a)),a=r[y+16>>2],a&&(r[y+20>>2]=a,W(a)),re=y- -64|0,Z|0}jt(),Xe()}function Gf(a,s,c,u){var f=0,h=0,m=0,y=0,A=0;e:{t:{if(!u)break t;n:{i:switch(r[a+28>>2]-1|0){case 0:A=1;r:{if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)<=0)break r;if(f=r[a>>2],y=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,h=s,s=y+s|0,m=r[f+4>>2],f=m-y|0,!I[a+32|0]){if((f|0)<=(h|0))break e;for(h=0;;){if(At[(h<<2)+u>>2]=D[s|0],h=h+1|0,f=D[a+24|0],(h|0)>=(((c|0)<(f|0)?c:f)|0))break r;if(s=s+1|0,!(m>>>0>s>>>0))break}break e}if((f|0)<=(h|0))break e;for(h=0;;){if(At[(h<<2)+u>>2]=_e(D[s|0])/_e(127),h=h+1|0,f=D[a+24|0],(h|0)>=(((c|0)<(f|0)?c:f)|0))break r;if(s=s+1|0,!(m>>>0>s>>>0))break}break e}if((c|0)>(f|0))break n;break t;case 1:A=1;r:{if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)<=0)break r;if(f=r[a>>2],y=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,h=s,s=y+s|0,m=r[f+4>>2],f=m-y|0,!I[a+32|0]){if((f|0)<=(h|0))break e;for(h=0;;){if(At[(h<<2)+u>>2]=I[s|0],h=h+1|0,f=D[a+24|0],(h|0)>=(((c|0)<(f|0)?c:f)|0))break r;if(s=s+1|0,!(m>>>0>s>>>0))break}break e}if((f|0)<=(h|0))break e;for(h=0;;){if(At[(h<<2)+u>>2]=_e(I[s|0])/_e(255),h=h+1|0,f=D[a+24|0],(h|0)>=(((c|0)<(f|0)?c:f)|0))break r;if(s=s+1|0,!(m>>>0>s>>>0))break}break e}if((c|0)>(f|0))break n;break t;case 2:A=1;r:{if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)<=0)break r;if(f=r[a>>2],y=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,h=s,s=y+s|0,m=r[f+4>>2],f=m-y|0,!I[a+32|0]){if((f|0)<=(h|0))break e;for(h=0;;){if(At[(h<<2)+u>>2]=zt[s>>1],h=h+1|0,f=D[a+24|0],(h|0)>=(((c|0)<(f|0)?c:f)|0))break r;if(s=s+2|0,!(m>>>0>s>>>0))break}break e}if((f|0)<=(h|0))break e;for(h=0;;){if(At[(h<<2)+u>>2]=_e(zt[s>>1])/_e(32767),h=h+1|0,f=D[a+24|0],(h|0)>=(((c|0)<(f|0)?c:f)|0))break r;if(s=s+2|0,!(m>>>0>s>>>0))break}break e}if((c|0)>(f|0))break n;break t;case 3:A=1;r:{if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)<=0)break r;if(f=r[a>>2],y=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,h=s,s=y+s|0,m=r[f+4>>2],f=m-y|0,!I[a+32|0]){if((f|0)<=(h|0))break e;for(h=0;;){if(At[(h<<2)+u>>2]=Ut[s>>1],h=h+1|0,f=D[a+24|0],(h|0)>=(((c|0)<(f|0)?c:f)|0))break r;if(s=s+2|0,!(m>>>0>s>>>0))break}break e}if((f|0)<=(h|0))break e;for(h=0;;){if(At[(h<<2)+u>>2]=_e(Ut[s>>1])/_e(65535),h=h+1|0,f=D[a+24|0],(h|0)>=(((c|0)<(f|0)?c:f)|0))break r;if(s=s+2|0,!(m>>>0>s>>>0))break}break e}if((c|0)>(f|0))break n;break t;case 4:A=1;r:{if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)<=0)break r;if(f=r[a>>2],y=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,h=s,s=y+s|0,m=r[f+4>>2],f=m-y|0,!I[a+32|0]){if((f|0)<=(h|0))break e;for(h=0;;){if(At[(h<<2)+u>>2]=r[s>>2],h=h+1|0,f=D[a+24|0],(h|0)>=(((c|0)<(f|0)?c:f)|0))break r;if(s=s+4|0,!(m>>>0>s>>>0))break}break e}if((f|0)<=(h|0))break e;for(h=0;;){if(At[(h<<2)+u>>2]=_e(r[s>>2])*_e(4656612873077393e-25),h=h+1|0,f=D[a+24|0],(h|0)>=(((c|0)<(f|0)?c:f)|0))break r;if(s=s+4|0,!(m>>>0>s>>>0))break}break e}if((c|0)>(f|0))break n;break t;case 5:A=1;r:{if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)<=0)break r;if(f=r[a>>2],y=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,h=s,s=y+s|0,m=r[f+4>>2],f=m-y|0,!I[a+32|0]){if((f|0)<=(h|0))break e;for(h=0;;){if(At[(h<<2)+u>>2]=Ue[s>>2],h=h+1|0,f=D[a+24|0],(h|0)>=(((c|0)<(f|0)?c:f)|0))break r;if(s=s+4|0,!(m>>>0>s>>>0))break}break e}if((f|0)<=(h|0))break e;for(h=0;;){if(At[(h<<2)+u>>2]=_e(Ue[s>>2])*_e(23283064365386963e-26),h=h+1|0,f=D[a+24|0],(h|0)>=(((c|0)<(f|0)?c:f)|0))break r;if(s=s+4|0,!(m>>>0>s>>>0))break}break e}if((c|0)>(f|0))break n;break t;case 6:A=1;r:{if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)<=0)break r;if(f=r[a>>2],y=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,h=s,s=y+s|0,m=r[f+4>>2],f=m-y|0,!I[a+32|0]){if((f|0)<=(h|0))break e;for(h=0;;){if(At[(h<<2)+u>>2]=+Ue[s>>2]+ +r[s+4>>2]*4294967296,h=h+1|0,f=D[a+24|0],(h|0)>=(((c|0)<(f|0)?c:f)|0))break r;if(s=s+8|0,!(m>>>0>s>>>0))break}break e}if((f|0)<=(h|0))break e;for(h=0;;){if(At[(h<<2)+u>>2]=_e(+Ue[s>>2]+ +r[s+4>>2]*4294967296)*_e(10842021724855044e-35),h=h+1|0,f=D[a+24|0],(h|0)>=(((c|0)<(f|0)?c:f)|0))break r;if(s=s+8|0,!(m>>>0>s>>>0))break}break e}if((c|0)>(f|0))break n;break t;case 7:A=1;r:{if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)<=0)break r;if(f=r[a>>2],y=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,h=s,s=y+s|0,m=r[f+4>>2],f=m-y|0,!I[a+32|0]){if((f|0)<=(h|0))break e;for(h=0;;){if(At[(h<<2)+u>>2]=+Ue[s>>2]+ +Ue[s+4>>2]*4294967296,h=h+1|0,f=D[a+24|0],(h|0)>=(((c|0)<(f|0)?c:f)|0))break r;if(s=s+8|0,!(m>>>0>s>>>0))break}break e}if((f|0)<=(h|0))break e;for(h=0;;){if(At[(h<<2)+u>>2]=_e(+Ue[s>>2]+ +Ue[s+4>>2]*4294967296)*_e(5421010862427522e-35),h=h+1|0,f=D[a+24|0],(h|0)>=(((c|0)<(f|0)?c:f)|0))break r;if(s=s+8|0,!(m>>>0>s>>>0))break}break e}if((c|0)>(f|0))break n;break t;case 8:if(A=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],m=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=m+s|0,m=r[f+4>>2];;){if(s>>>0>=m>>>0)break e;if(At[(h<<2)+u>>2]=At[s>>2],s=s+4|0,h=h+1|0,f=D[a+24|0],!((h|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break n;break t;case 9:if(A=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],m=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=m+s|0,m=r[f+4>>2];;){if(s>>>0>=m>>>0)break e;if(At[(h<<2)+u>>2]=Zc[s>>3],s=s+8|0,h=h+1|0,f=D[a+24|0],!((h|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break n;break t;case 10:break i;default:break t}if(A=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(m=r[a>>2],f=r[m>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=f+s|0;;){if(Ue[m+4>>2]<=s>>>0)break e;if(At[(h<<2)+u>>2]=I[s|0]?_e(1):_e(0),s=s+1|0,h=h+1|0,f=D[a+24|0],!((h|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)<=(f|0))break t}Ct((f<<2)+u|0,0,c-f<<2)}return A}return 0}function GSe(a,s){a=a|0,s=s|0;var c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0,ie=0,ge=0,we=0,Me=0,Ie=0,We=0;z=re-16|0,re=z,r[z+12>>2]=s,s=Te(32),r[z>>2]=s,r[z+4>>2]=24,r[z+8>>2]=-2147483616,D[s+24|0]=0,c=I[1318]|I[1319]<<8|(I[1320]<<16|I[1321]<<24),u=I[1314]|I[1315]<<8|(I[1316]<<16|I[1317]<<24),D[s+16|0]=u,D[s+17|0]=u>>>8,D[s+18|0]=u>>>16,D[s+19|0]=u>>>24,D[s+20|0]=c,D[s+21|0]=c>>>8,D[s+22|0]=c>>>16,D[s+23|0]=c>>>24,c=I[1310]|I[1311]<<8|(I[1312]<<16|I[1313]<<24),u=I[1306]|I[1307]<<8|(I[1308]<<16|I[1309]<<24),D[s+8|0]=u,D[s+9|0]=u>>>8,D[s+10|0]=u>>>16,D[s+11|0]=u>>>24,D[s+12|0]=c,D[s+13|0]=c>>>8,D[s+14|0]=c>>>16,D[s+15|0]=c>>>24,c=I[1302]|I[1303]<<8|(I[1304]<<16|I[1305]<<24),u=I[1298]|I[1299]<<8|(I[1300]<<16|I[1301]<<24),D[s|0]=u,D[s+1|0]=u>>>8,D[s+2|0]=u>>>16,D[s+3|0]=u>>>24,D[s+4|0]=c,D[s+5|0]=c>>>8,D[s+6|0]=c>>>16,D[s+7|0]=c>>>24,y=re-48|0,re=y,R=a,c=a+16|0,a=r[c>>2];e:{t:{if(!a)break t;for(u=r[z+12>>2],s=c;h=(u|0)>r[a+16>>2],s=h?s:a,a=r[(h<<2)+a>>2],!!a;);if((s|0)==(c|0))break t;if((u|0)>=r[s+16>>2])break e}if(Me=y+24|0,a=Me,r[a+4>>2]=0,r[a+8>>2]=0,Ie=a+4|0,r[a>>2]=Ie,a=r[z+12>>2],u=y+16|0,r[u>>2]=0,r[u+4>>2]=0,r[y+8>>2]=a,r[y+12>>2]=u,s=r[Me>>2],(Ie|0)!=(s|0))for(N=y+8|4;;){h=s,m=s+16|0,ie=re-16|0,re=ie,A=ie+12|0,a=ie+8|0;t:{n:{i:{r:{s:{a:{ge=N+4|0;o:{if((ge|0)==(u|0))break o;if(s=I[u+27|0],f=s<<24>>24<0,U=I[m+11|0],We=U<<24>>24,T=(We|0)<0,s=f?r[u+20>>2]:s,U=T?r[m+4>>2]:U,H=s>>>0<U>>>0,Z=H?s:U,Z){if(T=T?r[m>>2]:m,we=u+16|0,f=f?r[we>>2]:we,we=Io(T,f,Z),!we){if(s>>>0>U>>>0)break o;break a}if((we|0)>=0)break a;break o}if(s>>>0<=U>>>0)break s}f=r[u>>2];o:{a=u;c:{if((a|0)==r[N>>2])break c;l:{if(f){for(s=f;a=s,s=r[s+4>>2],!!s;);break l}if(a=u+8|0,(u|0)==r[r[u+8>>2]>>2])for(;s=r[a>>2],a=s+8|0,(s|0)==r[r[s+8>>2]>>2];);a=r[a>>2]}T=I[m+11|0],s=T<<24>>24<0,H=I[a+27|0],U=H<<24>>24<0;l:{if(T=s?r[m+4>>2]:T,H=U?r[a+20>>2]:H,Z=T>>>0<H>>>0?T:H,Z&&(ge=a+16|0,s=Io(U?r[ge>>2]:ge,s?r[m>>2]:m,Z),s))break l;if(T>>>0>H>>>0)break c;break o}if((s|0)>=0)break o}if(!f){r[A>>2]=u,a=u;break t}r[A>>2]=a,a=a+4|0;break t}a=hte(N,A,m);break t}if(s=Io(f,T,Z),s)break r}if(H)break i;break n}if((s|0)>=0)break n}f=r[u+4>>2];i:{if(f){for(s=f;a=s,s=r[s>>2],!!s;);break i}if(a=r[u+8>>2],(u|0)==r[a>>2])break i;for(s=u+8|0;T=r[s>>2],s=T+8|0,a=r[T+8>>2],(T|0)!=r[a>>2];);}i:{r:{if((a|0)==(ge|0))break r;T=I[a+27|0],s=T<<24>>24<0;s:{if(T=s?r[a+20>>2]:T,H=T>>>0<U>>>0?T:U,H&&(Z=a+16|0,s=Io((We|0)<0?r[m>>2]:m,s?r[Z>>2]:Z,H),s))break s;if(T>>>0>U>>>0)break r;break i}if((s|0)>=0)break i}if(!f){r[A>>2]=u,a=u+4|0;break t}r[A>>2]=a;break t}a=hte(N,A,m);break t}r[A>>2]=u,r[a>>2]=u}if(s=a,a=r[s>>2],a)s=0;else{a=Te(40),f=a+16|0;t:{if(D[m+11|0]>=0){A=r[m+4>>2],r[f>>2]=r[m>>2],r[f+4>>2]=A,r[f+8>>2]=r[m+8>>2];break t}Ri(f,r[m>>2],r[m+4>>2])}f=a+28|0;t:{if(D[m+23|0]>=0){A=r[m+16>>2],r[f>>2]=r[m+12>>2],r[f+4>>2]=A,r[f+8>>2]=r[m+20>>2];break t}Ri(f,r[m+12>>2],r[m+16>>2])}r[a+8>>2]=r[ie+12>>2],r[a>>2]=0,r[a+4>>2]=0,r[s>>2]=a,f=r[r[N>>2]>>2],f?(r[N>>2]=f,s=r[s>>2]):s=a,HA(r[N+4>>2],s),r[N+8>>2]=r[N+8>>2]+1,s=1}D[y+44|0]=s,r[y+40>>2]=a,re=ie+16|0,a=r[h+4>>2];t:{if(!a){if(s=r[h+8>>2],(h|0)==r[s>>2])break t;for(a=h+8|0;h=r[a>>2],a=h+8|0,s=r[h+8>>2],(h|0)!=r[s>>2];);break t}for(;s=a,a=r[s>>2],!!a;);}if((s|0)==(Ie|0))break}a=r[c>>2];t:{if(a)for(c=R+16|0,h=r[y+8>>2];;){s=r[a+16>>2];n:{if((s|0)>(h|0)){if(s=r[a>>2],s)break n;c=a;break t}if((s|0)>=(h|0)||(c=a+4|0,s=r[a+4>>2],!s))break t;a=c}c=a,a=s}a=c}if(s=r[c>>2],!s){s=Te(32),r[s+16>>2]=r[y+8>>2],r[s+20>>2]=r[y+12>>2],h=s+24|0,f=r[y+16>>2],r[h>>2]=f,m=r[y+20>>2],r[s+28>>2]=m;t:{if(!m){r[s+20>>2]=h;break t}r[f+8>>2]=h,r[y+16>>2]=0,r[y+20>>2]=0,r[y+12>>2]=u}r[s+8>>2]=a,r[s>>2]=0,r[s+4>>2]=0,r[c>>2]=s,a=r[r[R+12>>2]>>2],a?(r[R+12>>2]=a,a=r[c>>2]):a=s,HA(r[R+16>>2],a),r[R+20>>2]=r[R+20>>2]+1}Wv(y+8|4,r[y+16>>2]),Wv(Me,r[Me+4>>2])}re=y+48|0,R=re-48|0,re=R,u=re-32|0,re=u,a=u+21|0,m=u+32|0,c=m,h=c-a|0;e:{if(!((h|0)<=9&(h|0)<(1-(Ue[3720]>1)|0))){D[a|0]=49,r[u+8>>2]=a+1,c=0;break e}r[u+8>>2]=c,c=61}r[u+12>>2]=c,y=re-16|0,re=y,c=R+8|0,f=re-16|0,re=f;e:{if(N=r[u+8>>2],h=N-a|0,h>>>0<=4294967279){t:{if(h>>>0<=10){D[c+11|0]=h,u=c;break t}h>>>0>=11?(A=h+16&-16,u=A-1|0,u=(u|0)==11?A:u):u=10,A=u+1|0,u=Te(A),r[c>>2]=u,r[c+8>>2]=A|-2147483648,r[c+4>>2]=h}for(;;){if((a|0)!=(N|0)){D[u|0]=I[a|0],u=u+1|0,a=a+1|0;continue}break}D[f+15|0]=0,D[u|0]=I[f+15|0],re=f+16|0;break e}mc(),Xe()}re=y+16|0,re=m,r[R+32>>2]=z,u=s+20|0,a=r[u+4>>2];e:{t:{if(a)for(s=I[z+11|0],c=s<<24>>24<0,f=c?r[z>>2]:z,h=c?r[z+4>>2]:s,s=u+4|0;;){c=I[a+27|0],m=c<<24>>24<0,c=m?r[a+20>>2]:c,y=c>>>0<h>>>0;n:{i:{r:{s:{a:{N=y?c:h;o:{if(N){if(A=a+16|0,m=m?r[A>>2]:A,A=Io(f,m,N),!A){if(c>>>0>h>>>0)break o;break a}if((A|0)>=0)break a;break o}if(c>>>0<=h>>>0)break s}if(c=r[a>>2],c)break n;break t}if(c=Io(m,f,N),c)break r}if(y)break i;break e}if((c|0)>=0)break e}if(s=a+4|0,c=r[a+4>>2],!c)break e;a=s}s=a,a=c}a=u+4|0}s=a}if(c=r[s>>2],c)a=0;else{c=Te(40),f=c+16|0,h=r[R+32>>2];e:{if(D[h+11|0]>=0){m=r[h+4>>2],r[f>>2]=r[h>>2],r[f+4>>2]=m,r[f+8>>2]=r[h+8>>2];break e}Ri(f,r[h>>2],r[h+4>>2])}r[c+8>>2]=a,r[c>>2]=0,r[c+4>>2]=0,r[c+36>>2]=0,r[c+28>>2]=0,r[c+32>>2]=0,r[s>>2]=c,a=r[r[u>>2]>>2],a?(r[u>>2]=a,a=r[s>>2]):a=c,HA(r[u+4>>2],a),r[u+8>>2]=r[u+8>>2]+1,a=1}D[R+44|0]=a,r[R+40>>2]=c,a=r[R+40>>2],D[a+39|0]<0&&W(r[a+28>>2]),s=r[R+12>>2],r[a+28>>2]=r[R+8>>2],r[a+32>>2]=s,r[a+36>>2]=r[R+16>>2],re=R+48|0,D[z+11|0]<0&&W(r[z>>2]),re=z+16|0}function jSe(a,s,c,u,f,h){a=a|0,s=s|0,c=c|0,u=u|0,f=f|0,h=h|0;var m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0,ie=0,ge=0,we=0,Me=0,Ie=0,We=0,ut=0,vt=0,Pt=0,Wt=0,gn=0,En=0,Nn=0,nr=0,Pr=0,Jr=0,xi=0,ei=0;y=re+-64|0,re=y,r[a+8>>2]=f,h=a+32|0,m=r[h>>2],u=r[a+36>>2]-m>>2;e:{t:{if(u>>>0<f>>>0){Xr(h,f-u|0),r[y+56>>2]=0,r[y+60>>2]=0,r[y+48>>2]=0,r[y+52>>2]=0,r[y+40>>2]=0,r[y+44>>2]=0,r[y+32>>2]=0,r[y+36>>2]=0,r[y+24>>2]=0,r[y+28>>2]=0,r[y+16>>2]=0,r[y+20>>2]=0,r[y>>2]=0;break t}if(u>>>0>f>>>0&&(r[a+36>>2]=m+(f<<2)),r[y+56>>2]=0,r[y+60>>2]=0,r[y+48>>2]=0,r[y+52>>2]=0,r[y+40>>2]=0,r[y+44>>2]=0,r[y+32>>2]=0,r[y+36>>2]=0,r[y+24>>2]=0,r[y+28>>2]=0,r[y+16>>2]=0,r[y+20>>2]=0,r[y>>2]=0,u=0,!f)break e}ea(y+16|0,f,y),A=r[y+28>>2],u=r[y+32>>2]}r[y>>2]=0,u=u-A>>2;e:{if(u>>>0>=f>>>0){if(u>>>0<=f>>>0)break e;r[y+32>>2]=(f<<2)+A;break e}ea(y+16|12,f-u|0,y)}r[y>>2]=0,h=r[y+40>>2],u=r[y+44>>2]-h>>2;e:{if(u>>>0>=f>>>0){if(u>>>0<=f>>>0)break e;r[y+44>>2]=h+(f<<2);break e}ea(y+40|0,f-u|0,y)}r[y>>2]=0,h=r[y+52>>2],u=r[y+56>>2]-h>>2;e:{if(u>>>0>=f>>>0){if(u>>>0<=f>>>0)break e;r[y+56>>2]=h+(f<<2);break e}ea(y+52|0,f-u|0,y)}A=0;e:{if(r[a+8>>2]<=0)break e;for(R=r[a+32>>2],m=r[y+16>>2];;){u=A<<2,h=r[u+m>>2],U=r[a+16>>2];t:{if((h|0)>(U|0)){r[u+R>>2]=U;break t}if(u=u+R|0,U=r[a+12>>2],(U|0)>(h|0)){r[u>>2]=U;break t}r[u>>2]=h}if(A=A+1|0,u=r[a+8>>2],!((A|0)<(u|0)))break}if((u|0)<=0)break e;for(u=0;;){m=u<<2,h=m+c|0,m=r[s+m>>2]+r[m+R>>2]|0,r[h>>2]=m;t:{if((m|0)>r[a+16>>2])T=m-r[a+20>>2]|0;else{if((m|0)>=r[a+12>>2])break t;T=m+r[a+20>>2]|0}r[h>>2]=T}if(u=u+1|0,!((u|0)<r[a+8>>2]))break}}nr=r[a+52>>2],Pt=r[a+48>>2],We=Te(16),u=We,r[u>>2]=0,r[u+4>>2]=0,r[u+8>>2]=0,r[u+12>>2]=0,r[y+8>>2]=0,r[y>>2]=0,r[y+4>>2]=0;e:{if(f){if(f>>>0>=1073741824)break e;u=f<<2,Ie=Te(u),r[y>>2]=Ie,r[y+8>>2]=u+Ie,Ct(Ie,0,u)}ge=1,u=r[a+56>>2],Wt=r[u>>2],u=r[u+4>>2]-Wt|0;t:{if((u|0)<5)break t;for(u=u>>2,Pr=(u|0)>2?u:2,Jr=u>>>0>1?u:1,gn=f&-2,En=f&1,xi=f&-4,Nn=f&3,ut=f-1|0,ei=f<<2,U=1;;){n:{i:{r:{s:{if((U|0)!=(Jr|0)){h=r[(U<<2)+Wt>>2],u=(h>>>0)%3|0;a:{o:{if((h|0)==-1)break o;R=0,m=h+2|0,vt=(u|0)!=0|(m|0)!=-1,we=r[Pt+12>>2],ie=we+((u?h-1|0:m)<<2)|0,H=1,u=h;c:{for(;;){m=r[we+(u<<2)>>2];l:{if((m|0)==-1)break l;N=-1,ge=r[nr>>2],z=r[Pt>>2],A=ge+(r[z+(m<<2)>>2]<<2)|0,Z=m+1|0,Z=(Z>>>0)%3|0?Z:m-2|0,(Z|0)!=-1&&(N=r[z+(Z<<2)>>2]),Z=r[A>>2];u:{f:{if((m>>>0)%3|0){A=m-1|0;break f}if(A=m+2|0,T=-1,(A|0)==-1)break u}T=r[z+(A<<2)>>2]}if((U|0)<=(Z|0)||(A=r[ge+(N<<2)>>2],(A|0)>=(U|0))||(N=r[ge+(T<<2)>>2],(N|0)>=(U|0)))break l;m=r[(y+16|0)+ne(R,12)>>2];u:{if(!f)break u;if(N=ne(f,N),z=ne(f,A),ge=ne(f,Z),A=0,T=0,ut)for(;r[m+(A<<2)>>2]=(r[(A+N<<2)+c>>2]+r[(A+z<<2)+c>>2]|0)-r[(A+ge<<2)+c>>2],Z=A|1,r[m+(Z<<2)>>2]=(r[(N+Z<<2)+c>>2]+r[(z+Z<<2)+c>>2]|0)-r[(Z+ge<<2)+c>>2],A=A+2|0,T=T+2|0,(gn|0)!=(T|0););if(!En)break u;r[m+(A<<2)>>2]=(r[(A+N<<2)+c>>2]+r[(A+z<<2)+c>>2]|0)-r[(A+ge<<2)+c>>2]}if(m=4,R=R+1|0,(R|0)==4)break c}l:{if(H&1){if(A=u+1|0,u=(A>>>0)%3|0?A:u-2|0,T=-1,(u|0)==-1||(u=r[we+(u<<2)>>2],T=-1,(u|0)==-1))break l;m=u+1|0,T=(m>>>0)%3|0?m:u-2|0;break l}u:{if((u>>>0)%3|0){A=u-1|0;break u}if(A=u+2|0,T=-1,(A|0)==-1)break l}if(u=r[we+(A<<2)>>2],T=-1,(u|0)==-1||(T=u-1|0,(u>>>0)%3|0))break l;T=u+2|0}u=T;l:{if((h|0)==(u|0))break l;if(!((H^1)&1|(u|0)!=-1)){if(!vt||(u=r[ie>>2],(u|0)==-1))break l;H=0,u=(u>>>0)%3|0?u-1|0:u+2|0}if((u|0)!=-1)continue}break}if(m=R,(m|0)<=0)break o}for(f&&Ct(r[y>>2],0,ei),u=m-1|0,Z=(u<<2)+We|0,u=ne(u,12)+a|0,T=u,vt=r[u- -64>>2],ge=0,H=0,u=0;;){if(h=r[Z>>2],r[Z>>2]=h+1,h>>>0>=vt>>>0)break t;c:{if(r[r[T+60>>2]+(h>>>3&536870908)>>2]>>>h&1||(u=u+1|0,!f))break c;if(R=r[y>>2],we=r[(y+16|0)+ne(H,12)>>2],N=0,A=0,h=0,ut>>>0>=3)for(;z=A<<2,ie=z+R|0,r[ie>>2]=r[ie>>2]+r[z+we>>2],ie=z|4,Me=ie+R|0,r[Me>>2]=r[Me>>2]+r[we+ie>>2],ie=z|8,Me=ie+R|0,r[Me>>2]=r[Me>>2]+r[we+ie>>2],z=z|12,ie=z+R|0,r[ie>>2]=r[ie>>2]+r[z+we>>2],A=A+4|0,h=h+4|0,(xi|0)!=(h|0););if(!Nn)break c;for(;h=A<<2,z=h+R|0,r[z>>2]=r[z>>2]+r[h+we>>2],A=A+1|0,N=N+1|0,(Nn|0)!=(N|0););}if(H=H+1|0,(H|0)==(m|0))break}if(H=ne(f,U),h=H,!u)break a;if(!f)break i;if(h=r[y>>2],A=0,m=0,ut)break s;break r}h=ne(f,U)}if(r[a+8>>2]<=0)break n;for(H=(ne(U-1|0,f)<<2)+c|0,R=r[a+32>>2],A=0;;){u=A<<2,m=r[u+H>>2],N=r[a+16>>2];a:{if((m|0)>(N|0)){r[u+R>>2]=N;break a}if(u=u+R|0,N=r[a+12>>2],(N|0)>(m|0)){r[u>>2]=N;break a}r[u>>2]=m}if(A=A+1|0,m=r[a+8>>2],!((A|0)<(m|0)))break}if(u=0,(m|0)<=0)break n;for(h=h<<2,A=h+c|0,H=s+h|0;;){m=u<<2,h=m+A|0,m=r[m+H>>2]+r[m+R>>2]|0,r[h>>2]=m;a:{if((m|0)>r[a+16>>2])T=m-r[a+20>>2]|0;else{if((m|0)>=r[a+12>>2])break a;T=m+r[a+20>>2]|0}r[h>>2]=T}if(u=u+1|0,!((u|0)<r[a+8>>2]))break}break n}ps(),Xe()}for(;R=A<<2,N=R+h|0,r[N>>2]=r[N>>2]/(u|0),R=h+(R|4)|0,r[R>>2]=r[R>>2]/(u|0),A=A+2|0,m=m+2|0,(gn|0)!=(m|0););}if(!En)break i;h=h+(A<<2)|0,r[h>>2]=r[h>>2]/(u|0)}if(r[a+8>>2]<=0)break n;for(R=r[a+32>>2],A=0;;){u=A<<2,h=r[u+Ie>>2],m=r[a+16>>2];i:{if((h|0)>(m|0)){r[u+R>>2]=m;break i}if(u=u+R|0,m=r[a+12>>2],(m|0)>(h|0)){r[u>>2]=m;break i}r[u>>2]=h}if(A=A+1|0,h=r[a+8>>2],!((A|0)<(h|0)))break}if(u=0,(h|0)<=0)break n;for(h=H<<2,A=h+c|0,H=s+h|0;;){m=u<<2,h=m+A|0,m=r[m+H>>2]+r[m+R>>2]|0,r[h>>2]=m;i:{if((m|0)>r[a+16>>2])T=m-r[a+20>>2]|0;else{if((m|0)>=r[a+12>>2])break i;T=m+r[a+20>>2]|0}r[h>>2]=T}if(u=u+1|0,!((u|0)<r[a+8>>2]))break}}if(ge=1,U=U+1|0,(Pr|0)==(U|0))break}}return a=r[y>>2],a&&W(a),W(We),a=r[y+52>>2],a&&(r[y+56>>2]=a,W(a)),a=r[y+40>>2],a&&(r[y+44>>2]=a,W(a)),a=r[y+28>>2],a&&(r[y+32>>2]=a,W(a)),a=r[y+16>>2],a&&(r[y+20>>2]=a,W(a)),re=y- -64|0,ge|0}jt(),Xe()}function HSe(a,s){a=a|0,s=s|0;var c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0;A=a;e:{t:{n:{i:{r:{s:{a:{o:switch(R=r[a+8>>2],r[R+28>>2]-1|0){case 4:break n;case 5:break i;case 2:break r;case 3:break s;case 0:break a;case 1:break o;default:break e}if(c=D[R+24|0],u=Te((c|0)>=0?c:-1),a=r[A+16>>2],r[a+80>>2]?y=r[r[a>>2]>>2]+r[a+48>>2]|0:y=0,!s)break t;if((c|0)>0){for(R=c&-4,z=c&3,f=c-1>>>0<3;;){if(a=0,m=0,!f)for(;T=y+(h<<2)|0,D[a+u|0]=r[T>>2],D[(a|1)+u|0]=r[T+4>>2],D[(a|2)+u|0]=r[T+8>>2],D[(a|3)+u|0]=r[T+12>>2],a=a+4|0,h=h+4|0,m=m+4|0,(R|0)!=(m|0););if(m=0,z)for(;D[a+u|0]=r[y+(h<<2)>>2],a=a+1|0,h=h+1|0,m=m+1|0,(z|0)!=(m|0););if($e(r[r[r[A+8>>2]+64>>2]>>2]+U|0,u,c),U=c+U|0,N=N+1|0,(N|0)==(s|0))break}break t}if($e(r[r[R+64>>2]>>2],u,c),(s|0)==1)break t;if(f=s-1|0,y=f&1,a=0,(s|0)!=2)for(s=f&-2;a=a+c|0,$e(a+r[r[r[A+8>>2]+64>>2]>>2]|0,u,c),a=a+c|0,$e(a+r[r[r[A+8>>2]+64>>2]>>2]|0,u,c),h=h+2|0,(s|0)!=(h|0););if(!y)break t;$e(r[r[r[A+8>>2]+64>>2]>>2]+(a+c|0)|0,u,c);break t}if(c=D[R+24|0],u=Te((c|0)>=0?c:-1),a=r[A+16>>2],r[a+80>>2]?y=r[r[a>>2]>>2]+r[a+48>>2]|0:y=0,!s)break t;if((c|0)>0){for(R=c&-4,z=c&3,f=c-1>>>0<3;;){if(a=0,m=0,!f)for(;T=y+(h<<2)|0,D[a+u|0]=r[T>>2],D[(a|1)+u|0]=r[T+4>>2],D[(a|2)+u|0]=r[T+8>>2],D[(a|3)+u|0]=r[T+12>>2],a=a+4|0,h=h+4|0,m=m+4|0,(R|0)!=(m|0););if(m=0,z)for(;D[a+u|0]=r[y+(h<<2)>>2],a=a+1|0,h=h+1|0,m=m+1|0,(z|0)!=(m|0););if($e(r[r[r[A+8>>2]+64>>2]>>2]+U|0,u,c),U=c+U|0,N=N+1|0,(N|0)==(s|0))break}break t}if($e(r[r[R+64>>2]>>2],u,c),(s|0)==1)break t;if(f=s-1|0,y=f&1,a=0,(s|0)!=2)for(s=f&-2;a=a+c|0,$e(a+r[r[r[A+8>>2]+64>>2]>>2]|0,u,c),a=a+c|0,$e(a+r[r[r[A+8>>2]+64>>2]>>2]|0,u,c),h=h+2|0,(s|0)!=(h|0););if(!y)break t;$e(r[r[r[A+8>>2]+64>>2]>>2]+(a+c|0)|0,u,c);break t}if(f=D[R+24|0],a=f+f|0,u=Te(a>>>0<f>>>0?-1:a),a=r[A+16>>2],r[a+80>>2]?y=r[r[a>>2]>>2]+r[a+48>>2]|0:y=0,!s)break t;if(c=f<<1,(f|0)>0){for(R=f&-4,z=f&3,f=f-1>>>0<3;;){if(a=0,m=0,!f)for(;N=a<<1,T=y+(h<<2)|0,zt[N+u>>1]=r[T>>2],zt[(N|2)+u>>1]=r[T+4>>2],zt[(N|4)+u>>1]=r[T+8>>2],zt[(N|6)+u>>1]=r[T+12>>2],a=a+4|0,h=h+4|0,m=m+4|0,(R|0)!=(m|0););if(m=0,z)for(;zt[(a<<1)+u>>1]=r[y+(h<<2)>>2],a=a+1|0,h=h+1|0,m=m+1|0,(z|0)!=(m|0););if($e(r[r[r[A+8>>2]+64>>2]>>2]+H|0,u,c),H=c+H|0,U=U+1|0,(U|0)==(s|0))break}break t}if($e(r[r[R+64>>2]>>2],u,c),(s|0)==1)break t;if(f=s-1|0,y=f&1,a=0,(s|0)!=2)for(s=f&-2;a=a+c|0,$e(a+r[r[r[A+8>>2]+64>>2]>>2]|0,u,c),a=a+c|0,$e(a+r[r[r[A+8>>2]+64>>2]>>2]|0,u,c),h=h+2|0,(s|0)!=(h|0););if(!y)break t;$e(r[r[r[A+8>>2]+64>>2]>>2]+(a+c|0)|0,u,c);break t}if(f=D[R+24|0],a=f+f|0,u=Te(a>>>0<f>>>0?-1:a),a=r[A+16>>2],r[a+80>>2]?y=r[r[a>>2]>>2]+r[a+48>>2]|0:y=0,!s)break t;if(c=f<<1,(f|0)>0){for(R=f&-4,z=f&3,f=f-1>>>0<3;;){if(a=0,m=0,!f)for(;N=a<<1,T=y+(h<<2)|0,zt[N+u>>1]=r[T>>2],zt[(N|2)+u>>1]=r[T+4>>2],zt[(N|4)+u>>1]=r[T+8>>2],zt[(N|6)+u>>1]=r[T+12>>2],a=a+4|0,h=h+4|0,m=m+4|0,(R|0)!=(m|0););if(m=0,z)for(;zt[(a<<1)+u>>1]=r[y+(h<<2)>>2],a=a+1|0,h=h+1|0,m=m+1|0,(z|0)!=(m|0););if($e(r[r[r[A+8>>2]+64>>2]>>2]+H|0,u,c),H=c+H|0,U=U+1|0,(U|0)==(s|0))break}break t}if($e(r[r[R+64>>2]>>2],u,c),(s|0)==1)break t;if(f=s-1|0,y=f&1,a=0,(s|0)!=2)for(s=f&-2;a=a+c|0,$e(a+r[r[r[A+8>>2]+64>>2]>>2]|0,u,c),a=a+c|0,$e(a+r[r[r[A+8>>2]+64>>2]>>2]|0,u,c),h=h+2|0,(s|0)!=(h|0););if(!y)break t;$e(r[r[r[A+8>>2]+64>>2]>>2]+(a+c|0)|0,u,c);break t}if(f=D[R+24|0],c=f<<2,u=Te((f|0)!=(f&1073741823)?-1:c),a=r[A+16>>2],r[a+80>>2]?y=r[r[a>>2]>>2]+r[a+48>>2]|0:y=0,!s)break t;if((f|0)>0){for(R=f&-4,z=f&3,f=f-1>>>0<3;;){if(a=0,m=0,!f)for(;N=a<<2,T=y+(h<<2)|0,r[N+u>>2]=r[T>>2],r[(N|4)+u>>2]=r[T+4>>2],r[(N|8)+u>>2]=r[T+8>>2],r[(N|12)+u>>2]=r[T+12>>2],a=a+4|0,h=h+4|0,m=m+4|0,(R|0)!=(m|0););if(m=0,z)for(;r[(a<<2)+u>>2]=r[y+(h<<2)>>2],a=a+1|0,h=h+1|0,m=m+1|0,(z|0)!=(m|0););if($e(r[r[r[A+8>>2]+64>>2]>>2]+H|0,u,c),H=c+H|0,U=U+1|0,(U|0)==(s|0))break}break t}if($e(r[r[R+64>>2]>>2],u,c),(s|0)==1)break t;if(f=s-1|0,y=f&1,a=0,(s|0)!=2)for(s=f&-2;a=a+c|0,$e(a+r[r[r[A+8>>2]+64>>2]>>2]|0,u,c),a=a+c|0,$e(a+r[r[r[A+8>>2]+64>>2]>>2]|0,u,c),h=h+2|0,(s|0)!=(h|0););if(!y)break t;$e(r[r[r[A+8>>2]+64>>2]>>2]+(a+c|0)|0,u,c);break t}if(f=D[R+24|0],c=f<<2,u=Te((f|0)!=(f&1073741823)?-1:c),a=r[A+16>>2],r[a+80>>2]?y=r[r[a>>2]>>2]+r[a+48>>2]|0:y=0,!s)break t;if((f|0)>0){for(R=f&-4,z=f&3,f=f-1>>>0<3;;){if(a=0,m=0,!f)for(;N=a<<2,T=y+(h<<2)|0,r[N+u>>2]=r[T>>2],r[(N|4)+u>>2]=r[T+4>>2],r[(N|8)+u>>2]=r[T+8>>2],r[(N|12)+u>>2]=r[T+12>>2],a=a+4|0,h=h+4|0,m=m+4|0,(R|0)!=(m|0););if(m=0,z)for(;r[(a<<2)+u>>2]=r[y+(h<<2)>>2],a=a+1|0,h=h+1|0,m=m+1|0,(z|0)!=(m|0););if($e(r[r[r[A+8>>2]+64>>2]>>2]+H|0,u,c),H=c+H|0,U=U+1|0,(U|0)==(s|0))break}break t}if($e(r[r[R+64>>2]>>2],u,c),(s|0)==1)break t;if(f=s-1|0,y=f&1,a=0,(s|0)!=2)for(s=f&-2;a=a+c|0,$e(a+r[r[r[A+8>>2]+64>>2]>>2]|0,u,c),a=a+c|0,$e(a+r[r[r[A+8>>2]+64>>2]>>2]|0,u,c),h=h+2|0,(s|0)!=(h|0););if(!y)break t;$e(r[r[r[A+8>>2]+64>>2]>>2]+(a+c|0)|0,u,c)}W(u),u=1}return u|0}function Yd(a,s){var c=0,u=0,f=0,h=0,m=0;f=re-16|0,re=f,r[a+12>>2]=s,r[a+8>>2]=0,r[a>>2]=0,r[a+4>>2]=0,u=a+16|0,r[u>>2]=0,r[u+4>>2]=0,D[u+5|0]=0,D[u+6|0]=0,D[u+7|0]=0,D[u+8|0]=0,D[u+9|0]=0,D[u+10|0]=0,D[u+11|0]=0,D[u+12|0]=0,c=u+16|0,r[c>>2]=0,r[c+4>>2]=0,D[c+5|0]=0,D[c+6|0]=0,D[c+7|0]=0,D[c+8|0]=0,D[c+9|0]=0,D[c+10|0]=0,D[c+11|0]=0,D[c+12|0]=0,c=u+32|0,r[c>>2]=0,r[c+4>>2]=0,D[c+5|0]=0,D[c+6|0]=0,D[c+7|0]=0,D[c+8|0]=0,D[c+9|0]=0,D[c+10|0]=0,D[c+11|0]=0,D[c+12|0]=0,c=u+48|0,r[c>>2]=0,r[c+4>>2]=0,D[c+5|0]=0,D[c+6|0]=0,D[c+7|0]=0,D[c+8|0]=0,D[c+9|0]=0,D[c+10|0]=0,D[c+11|0]=0,D[c+12|0]=0,c=u- -64|0,r[c>>2]=0,r[c+4>>2]=0,D[c+5|0]=0,D[c+6|0]=0,D[c+7|0]=0,D[c+8|0]=0,D[c+9|0]=0,D[c+10|0]=0,D[c+11|0]=0,D[c+12|0]=0,c=u+80|0,r[c>>2]=0,r[c+4>>2]=0,D[c+5|0]=0,D[c+6|0]=0,D[c+7|0]=0,D[c+8|0]=0,D[c+9|0]=0,D[c+10|0]=0,D[c+11|0]=0,D[c+12|0]=0,c=u+96|0,r[c>>2]=0,r[c+4>>2]=0,D[c+5|0]=0,D[c+6|0]=0,D[c+7|0]=0,D[c+8|0]=0,D[c+9|0]=0,D[c+10|0]=0,D[c+11|0]=0,D[c+12|0]=0,c=u+112|0,r[c>>2]=0,r[c+4>>2]=0,D[c+5|0]=0,D[c+6|0]=0,D[c+7|0]=0,D[c+8|0]=0,D[c+9|0]=0,D[c+10|0]=0,D[c+11|0]=0,D[c+12|0]=0,c=u+128|0,r[c>>2]=0,r[c+4>>2]=0,D[c+5|0]=0,D[c+6|0]=0,D[c+7|0]=0,D[c+8|0]=0,D[c+9|0]=0,D[c+10|0]=0,D[c+11|0]=0,D[c+12|0]=0,c=u+144|0,r[c>>2]=0,r[c+4>>2]=0,D[c+5|0]=0,D[c+6|0]=0,D[c+7|0]=0,D[c+8|0]=0,D[c+9|0]=0,D[c+10|0]=0,D[c+11|0]=0,D[c+12|0]=0,c=u+160|0,r[c>>2]=0,r[c+4>>2]=0,D[c+5|0]=0,D[c+6|0]=0,D[c+7|0]=0,D[c+8|0]=0,D[c+9|0]=0,D[c+10|0]=0,D[c+11|0]=0,D[c+12|0]=0,c=u+176|0,r[c>>2]=0,r[c+4>>2]=0,D[c+5|0]=0,D[c+6|0]=0,D[c+7|0]=0,D[c+8|0]=0,D[c+9|0]=0,D[c+10|0]=0,D[c+11|0]=0,D[c+12|0]=0,c=u+192|0,r[c>>2]=0,r[c+4>>2]=0,D[c+5|0]=0,D[c+6|0]=0,D[c+7|0]=0,D[c+8|0]=0,D[c+9|0]=0,D[c+10|0]=0,D[c+11|0]=0,D[c+12|0]=0,c=u+208|0,r[c>>2]=0,r[c+4>>2]=0,D[c+5|0]=0,D[c+6|0]=0,D[c+7|0]=0,D[c+8|0]=0,D[c+9|0]=0,D[c+10|0]=0,D[c+11|0]=0,D[c+12|0]=0,c=u+224|0,r[c>>2]=0,r[c+4>>2]=0,D[c+5|0]=0,D[c+6|0]=0,D[c+7|0]=0,D[c+8|0]=0,D[c+9|0]=0,D[c+10|0]=0,D[c+11|0]=0,D[c+12|0]=0,c=u+240|0,r[c>>2]=0,r[c+4>>2]=0,D[c+5|0]=0,D[c+6|0]=0,D[c+7|0]=0,D[c+8|0]=0,D[c+9|0]=0,D[c+10|0]=0,D[c+11|0]=0,D[c+12|0]=0,c=u+256|0,r[c>>2]=0,r[c+4>>2]=0,D[c+5|0]=0,D[c+6|0]=0,D[c+7|0]=0,D[c+8|0]=0,D[c+9|0]=0,D[c+10|0]=0,D[c+11|0]=0,D[c+12|0]=0,c=u+272|0,r[c>>2]=0,r[c+4>>2]=0,D[c+5|0]=0,D[c+6|0]=0,D[c+7|0]=0,D[c+8|0]=0,D[c+9|0]=0,D[c+10|0]=0,D[c+11|0]=0,D[c+12|0]=0,c=u+288|0,r[c>>2]=0,r[c+4>>2]=0,D[c+5|0]=0,D[c+6|0]=0,D[c+7|0]=0,D[c+8|0]=0,D[c+9|0]=0,D[c+10|0]=0,D[c+11|0]=0,D[c+12|0]=0,c=u+304|0,r[c>>2]=0,r[c+4>>2]=0,D[c+5|0]=0,D[c+6|0]=0,D[c+7|0]=0,D[c+8|0]=0,D[c+9|0]=0,D[c+10|0]=0,D[c+11|0]=0,D[c+12|0]=0,c=u+320|0,r[c>>2]=0,r[c+4>>2]=0,D[c+5|0]=0,D[c+6|0]=0,D[c+7|0]=0,D[c+8|0]=0,D[c+9|0]=0,D[c+10|0]=0,D[c+11|0]=0,D[c+12|0]=0,c=u+336|0,r[c>>2]=0,r[c+4>>2]=0,D[c+5|0]=0,D[c+6|0]=0,D[c+7|0]=0,D[c+8|0]=0,D[c+9|0]=0,D[c+10|0]=0,D[c+11|0]=0,D[c+12|0]=0,c=u+352|0,r[c>>2]=0,r[c+4>>2]=0,D[c+5|0]=0,D[c+6|0]=0,D[c+7|0]=0,D[c+8|0]=0,D[c+9|0]=0,D[c+10|0]=0,D[c+11|0]=0,D[c+12|0]=0,c=u+368|0,r[c>>2]=0,r[c+4>>2]=0,D[c+5|0]=0,D[c+6|0]=0,D[c+7|0]=0,D[c+8|0]=0,D[c+9|0]=0,D[c+10|0]=0,D[c+11|0]=0,D[c+12|0]=0,c=u+384|0,r[c>>2]=0,r[c+4>>2]=0,D[c+5|0]=0,D[c+6|0]=0,D[c+7|0]=0,D[c+8|0]=0,D[c+9|0]=0,D[c+10|0]=0,D[c+11|0]=0,D[c+12|0]=0,c=u+400|0,r[c>>2]=0,r[c+4>>2]=0,D[c+5|0]=0,D[c+6|0]=0,D[c+7|0]=0,D[c+8|0]=0,D[c+9|0]=0,D[c+10|0]=0,D[c+11|0]=0,D[c+12|0]=0,c=u+416|0,r[c>>2]=0,r[c+4>>2]=0,D[c+5|0]=0,D[c+6|0]=0,D[c+7|0]=0,D[c+8|0]=0,D[c+9|0]=0,D[c+10|0]=0,D[c+11|0]=0,D[c+12|0]=0,c=u+432|0,r[c>>2]=0,r[c+4>>2]=0,D[c+5|0]=0,D[c+6|0]=0,D[c+7|0]=0,D[c+8|0]=0,D[c+9|0]=0,D[c+10|0]=0,D[c+11|0]=0,D[c+12|0]=0,c=u+448|0,r[c>>2]=0,r[c+4>>2]=0,D[c+5|0]=0,D[c+6|0]=0,D[c+7|0]=0,D[c+8|0]=0,D[c+9|0]=0,D[c+10|0]=0,D[c+11|0]=0,D[c+12|0]=0,c=u+464|0,r[c>>2]=0,r[c+4>>2]=0,D[c+5|0]=0,D[c+6|0]=0,D[c+7|0]=0,D[c+8|0]=0,D[c+9|0]=0,D[c+10|0]=0,D[c+11|0]=0,D[c+12|0]=0,c=u+480|0,r[c>>2]=0,r[c+4>>2]=0,D[c+5|0]=0,D[c+6|0]=0,D[c+7|0]=0,D[c+8|0]=0,D[c+9|0]=0,D[c+10|0]=0,D[c+11|0]=0,D[c+12|0]=0,u=u+496|0,r[u>>2]=0,r[u+4>>2]=0,D[u+5|0]=0,D[u+6|0]=0,D[u+7|0]=0,D[u+8|0]=0,D[u+9|0]=0,D[u+10|0]=0,D[u+11|0]=0,D[u+12|0]=0,r[a+528>>2]=0,r[a+532>>2]=0,D[a+533|0]=0,D[a+534|0]=0,D[a+535|0]=0,D[a+536|0]=0,D[a+537|0]=0,D[a+538|0]=0,D[a+539|0]=0,D[a+540|0]=0,r[a+544>>2]=0,r[a+548>>2]=0,r[a+560>>2]=0,r[a+552>>2]=0,r[a+556>>2]=0,r[a+564>>2]=0,r[a+568>>2]=0,r[a+580>>2]=0,r[a+572>>2]=0,r[a+576>>2]=0,r[a+584>>2]=0,r[a+588>>2]=0,r[a+600>>2]=0,r[a+592>>2]=0,r[a+596>>2]=0,r[a+612>>2]=0,r[a+604>>2]=0,r[a+608>>2]=0,m=a+628|0;e:{t:{if(s){if(s>>>0<1073741824)break t;jt(),Xe()}r[a+616>>2]=0,r[a+620>>2]=0,r[a+624>>2]=0,r[f+8>>2]=0,r[f>>2]=0,r[f+4>>2]=0,u=1;break e}u=s<<2,c=Te(u),r[a+604>>2]=c,h=c+u|0,r[a+612>>2]=h,Ct(c,0,u),r[a+624>>2]=0,r[a+616>>2]=0,r[a+620>>2]=0,r[a+608>>2]=h,c=Te(u),r[a+616>>2]=c,h=c+u|0,r[a+624>>2]=h,Ct(c,0,u),r[a+620>>2]=h,c=Te(u),r[f>>2]=c,h=c+u|0,r[f+8>>2]=h,Ct(c,0,u),r[f+4>>2]=h,u=s<<5|1}return zv(m,u,f),c=r[f>>2],c&&(r[f+4>>2]=c,W(c)),r[f+8>>2]=0,r[f>>2]=0,r[f+4>>2]=0,s&&(s=s<<2,c=Te(s),r[f>>2]=c,h=s+c|0,r[f+8>>2]=h,Ct(c,0,s),r[f+4>>2]=h),zv(a+640|0,u,f),s=r[f>>2],s&&(r[f+4>>2]=s,W(s)),re=f+16|0,a}function $Se(a){a=a|0;var s=0,c=0,u=0,f=0,h=0;if(c=r[a+32>>2],f=r[c+16>>2],u=r[c+12>>2],s=r[c+20>>2],Ue[c+8>>2]>f>>>0&(u|0)>=(s|0)|(s|0)<(u|0)){h=I[f+r[c>>2]|0],u=f+1|0,s=u?s:s+1|0,r[c+16>>2]=u,r[c+20>>2]=s,c=r[a+48>>2],r[a+48>>2]=0,c&&pt[r[r[c>>2]+4>>2]](c);e:{t:{n:{i:switch(h|0){case 0:c=Te(384),r[c>>2]=11412,Ct(c+4|0,0,80),r[c+96>>2]=0,r[c+100>>2]=0,r[c+92>>2]=-1,r[c+84>>2]=-1,r[c+88>>2]=-1,r[c+104>>2]=0,r[c+108>>2]=0,r[c+112>>2]=0,r[c+116>>2]=0,r[c+120>>2]=0,r[c+124>>2]=0,r[c+128>>2]=0,r[c+132>>2]=0,r[c+136>>2]=0,r[c+140>>2]=0,r[c+144>>2]=0,r[c+148>>2]=0,r[c+156>>2]=0,r[c+160>>2]=0,r[c+152>>2]=1065353216,r[c+164>>2]=0,r[c+168>>2]=0,r[c+172>>2]=0,r[c+176>>2]=0,r[c+180>>2]=0,r[c+184>>2]=0,r[c+188>>2]=0,r[c+192>>2]=0,r[c+196>>2]=0,r[c+200>>2]=0,r[c+204>>2]=0,r[c+208>>2]=0,r[c+212>>2]=-1,r[c+216>>2]=0,r[c+220>>2]=0,r[c+224>>2]=0,s=c+232|0,zt[s+38>>1]=0,r[s>>2]=0,r[s+8>>2]=0,r[s+12>>2]=0,r[s+16>>2]=0,r[s+20>>2]=0,r[s+24>>2]=0,r[s+28>>2]=0,D[s+29|0]=0,D[s+30|0]=0,D[s+31|0]=0,D[s+32|0]=0,D[s+33|0]=0,D[s+34|0]=0,D[s+35|0]=0,D[s+36|0]=0,s=c+272|0,zt[s+38>>1]=0,r[s>>2]=0,r[s+8>>2]=0,r[s+12>>2]=0,r[s+16>>2]=0,r[s+20>>2]=0,r[s+24>>2]=0,r[s+28>>2]=0,D[s+29|0]=0,D[s+30|0]=0,D[s+31|0]=0,D[s+32|0]=0,D[s+33|0]=0,D[s+34|0]=0,D[s+35|0]=0,D[s+36|0]=0,s=c+312|0,r[s>>2]=0,r[s+4>>2]=0,D[s+5|0]=0,D[s+6|0]=0,D[s+7|0]=0,D[s+8|0]=0,D[s+9|0]=0,D[s+10|0]=0,D[s+11|0]=0,D[s+12|0]=0,s=c+328|0,zt[s+38>>1]=0,r[s>>2]=0,r[s+8>>2]=0,r[s+12>>2]=0,r[s+16>>2]=0,r[s+20>>2]=0,r[s+24>>2]=0,r[s+28>>2]=0,D[s+29|0]=0,D[s+30|0]=0,D[s+31|0]=0,D[s+32|0]=0,D[s+33|0]=0,D[s+34|0]=0,D[s+35|0]=0,D[s+36|0]=0,r[c+376>>2]=0,r[c+368>>2]=0,r[c+372>>2]=0;break n;case 1:c=Te(424),r[c>>2]=11464,Ct(c+4|0,0,80),r[c+96>>2]=0,r[c+100>>2]=0,r[c+92>>2]=-1,r[c+84>>2]=-1,r[c+88>>2]=-1,r[c+104>>2]=0,r[c+108>>2]=0,r[c+112>>2]=0,r[c+116>>2]=0,r[c+120>>2]=0,r[c+124>>2]=0,r[c+128>>2]=0,r[c+132>>2]=0,r[c+136>>2]=0,r[c+140>>2]=0,r[c+144>>2]=0,r[c+148>>2]=0,r[c+156>>2]=0,r[c+160>>2]=0,r[c+152>>2]=1065353216,r[c+164>>2]=0,r[c+168>>2]=0,r[c+172>>2]=0,r[c+176>>2]=0,r[c+180>>2]=0,r[c+184>>2]=0,r[c+188>>2]=0,r[c+192>>2]=0,r[c+196>>2]=0,r[c+200>>2]=0,r[c+204>>2]=0,r[c+208>>2]=0,r[c+212>>2]=-1,r[c+216>>2]=0,r[c+220>>2]=0,r[c+224>>2]=0,s=c+232|0,zt[s+38>>1]=0,r[s>>2]=0,r[s+8>>2]=0,r[s+12>>2]=0,r[s+16>>2]=0,r[s+20>>2]=0,r[s+24>>2]=0,r[s+28>>2]=0,D[s+29|0]=0,D[s+30|0]=0,D[s+31|0]=0,D[s+32|0]=0,D[s+33|0]=0,D[s+34|0]=0,D[s+35|0]=0,D[s+36|0]=0,s=c+272|0,zt[s+38>>1]=0,r[s>>2]=0,r[s+8>>2]=0,r[s+12>>2]=0,r[s+16>>2]=0,r[s+20>>2]=0,r[s+24>>2]=0,r[s+28>>2]=0,D[s+29|0]=0,D[s+30|0]=0,D[s+31|0]=0,D[s+32|0]=0,D[s+33|0]=0,D[s+34|0]=0,D[s+35|0]=0,D[s+36|0]=0,s=c+312|0,r[s>>2]=0,r[s+4>>2]=0,D[s+5|0]=0,D[s+6|0]=0,D[s+7|0]=0,D[s+8|0]=0,D[s+9|0]=0,D[s+10|0]=0,D[s+11|0]=0,D[s+12|0]=0,s=c+328|0,zt[s+38>>1]=0,r[s>>2]=0,r[s+8>>2]=0,r[s+12>>2]=0,r[s+16>>2]=0,r[s+20>>2]=0,r[s+24>>2]=0,r[s+28>>2]=0,D[s+29|0]=0,D[s+30|0]=0,D[s+31|0]=0,D[s+32|0]=0,D[s+33|0]=0,D[s+34|0]=0,D[s+35|0]=0,D[s+36|0]=0,r[c+392>>2]=0,r[c+396>>2]=0,r[c+384>>2]=0,r[c+388>>2]=0,r[c+376>>2]=0,r[c+380>>2]=0,r[c+368>>2]=0,r[c+372>>2]=0,s=c+400|0,r[s>>2]=0,r[s+4>>2]=0,D[s+5|0]=0,D[s+6|0]=0,D[s+7|0]=0,D[s+8|0]=0,D[s+9|0]=0,D[s+10|0]=0,D[s+11|0]=0,D[s+12|0]=0,r[c+416>>2]=-1,r[c+420>>2]=-1;break n;case 2:break i;default:break t}c=Te(440),r[c>>2]=11512,Ct(c+4|0,0,80),r[c+96>>2]=0,r[c+100>>2]=0,r[c+92>>2]=-1,r[c+84>>2]=-1,r[c+88>>2]=-1,r[c+104>>2]=0,r[c+108>>2]=0,r[c+112>>2]=0,r[c+116>>2]=0,r[c+120>>2]=0,r[c+124>>2]=0,r[c+128>>2]=0,r[c+132>>2]=0,r[c+136>>2]=0,r[c+140>>2]=0,r[c+144>>2]=0,r[c+148>>2]=0,r[c+156>>2]=0,r[c+160>>2]=0,r[c+152>>2]=1065353216,r[c+164>>2]=0,r[c+168>>2]=0,r[c+172>>2]=0,r[c+176>>2]=0,r[c+180>>2]=0,r[c+184>>2]=0,r[c+188>>2]=0,r[c+192>>2]=0,r[c+196>>2]=0,r[c+200>>2]=0,r[c+204>>2]=0,r[c+208>>2]=0,r[c+212>>2]=-1,r[c+216>>2]=0,r[c+220>>2]=0,r[c+224>>2]=0,s=c+232|0,zt[s+38>>1]=0,r[s>>2]=0,r[s+8>>2]=0,r[s+12>>2]=0,r[s+16>>2]=0,r[s+20>>2]=0,r[s+24>>2]=0,r[s+28>>2]=0,D[s+29|0]=0,D[s+30|0]=0,D[s+31|0]=0,D[s+32|0]=0,D[s+33|0]=0,D[s+34|0]=0,D[s+35|0]=0,D[s+36|0]=0,s=c+272|0,zt[s+38>>1]=0,r[s>>2]=0,r[s+8>>2]=0,r[s+12>>2]=0,r[s+16>>2]=0,r[s+20>>2]=0,r[s+24>>2]=0,r[s+28>>2]=0,D[s+29|0]=0,D[s+30|0]=0,D[s+31|0]=0,D[s+32|0]=0,D[s+33|0]=0,D[s+34|0]=0,D[s+35|0]=0,D[s+36|0]=0,s=c+312|0,r[s>>2]=0,r[s+4>>2]=0,D[s+5|0]=0,D[s+6|0]=0,D[s+7|0]=0,D[s+8|0]=0,D[s+9|0]=0,D[s+10|0]=0,D[s+11|0]=0,D[s+12|0]=0,s=c+328|0,zt[s+38>>1]=0,r[s>>2]=0,r[s+8>>2]=0,r[s+12>>2]=0,r[s+16>>2]=0,r[s+20>>2]=0,r[s+24>>2]=0,r[s+28>>2]=0,D[s+29|0]=0,D[s+30|0]=0,D[s+31|0]=0,D[s+32|0]=0,D[s+33|0]=0,D[s+34|0]=0,D[s+35|0]=0,D[s+36|0]=0,r[c+392>>2]=0,r[c+396>>2]=0,r[c+384>>2]=0,r[c+388>>2]=0,r[c+376>>2]=0,r[c+380>>2]=0,r[c+368>>2]=0,r[c+372>>2]=0,r[c+416>>2]=0,r[c+420>>2]=0,r[c+408>>2]=2,r[c+412>>2]=7,r[c+400>>2]=-1,r[c+404>>2]=-1,r[c+424>>2]=0,r[c+428>>2]=0,r[c+432>>2]=0,r[c+436>>2]=0}if(s=r[a+48>>2],r[a+48>>2]=c,!s)break e;pt[r[r[s>>2]+4>>2]](s)}if(c=r[a+48>>2],c)break e;return 0}a=pt[r[r[c>>2]+8>>2]](c,a)|0}else a=0;return a|0}function WSe(a,s,c,u,f,h){a=a|0,s=s|0,c=c|0,u=u|0,f=f|0,h=h|0;var m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0,ie=0,ge=0,we=0,Me=0,Ie=0,We=0,ut=0,vt=0,Pt=0,Wt=0,gn=0,En=0,Nn=0,nr=0,Pr=0,Jr=0,xi=0,ei=0,xr=0,ws=0,ta=0,pa=0,t1=0,n1=0,r1=0,i1=0,XA=0,s1=0,Kd=0,a8=0;if((f|0)==2){r[a+8>>2]=2,r[a- -64>>2]=h,f=a+32|0,h=r[f>>2],u=r[a+36>>2]-h|0;e:{if(u>>>0<=7){Xr(f,2-(u>>>2|0)|0);break e}if((u|0)==8)break e;r[a+36>>2]=h+8}e:{if(u=r[a+56>>2],f=r[u+4>>2],u=r[u>>2],h=f-u|0,(h|0)<=0){h=0;break e}if((u|0)!=(f|0))for(z=a+60|0,xi=h>>2,XA=(xi|0)>1?xi:1,h=1;;){T=re-80|0,re=T,f=-1,u=r[(ie<<2)+u>>2],m=-1;t:{if((u|0)==-1||(f=u+1|0,f=(f>>>0)%3|0?f:u-2|0,m=u-1|0,(u>>>0)%3|0))break t;m=u+2|0}A=r[z+36>>2],u=r[A>>2];t:{n:{i:{r:{s:{if(A=r[A+4>>2]-u>>2,y=f<<2,f=r[r[z+32>>2]+28>>2],R=r[y+f>>2],A>>>0<=R>>>0||(f=r[f+(m<<2)>>2],f>>>0>=A>>>0))break s;a:{o:{if(m=r[u+(f<<2)>>2],A=r[u+(R<<2)>>2],(m|0)>=(ie|0)|(A|0)>=(ie|0))break o;if(u=(m<<3)+c|0,We=r[u+4>>2],f=(A<<3)+c|0,we=r[f+4>>2],vt=r[u>>2],Nn=r[f>>2],!((vt|0)!=(Nn|0)|(we|0)!=(We|0))){r[z+8>>2]=Nn,r[z+12>>2]=we;break a}if(u=r[r[z+4>>2]+(ie<<2)>>2],r[T+72>>2]=0,r[T+76>>2]=0,f=T- -64|0,r[f>>2]=0,r[f+4>>2]=0,r[T+56>>2]=0,r[T+60>>2]=0,f=r[z>>2],I[f+84|0]||(u=r[r[f+68>>2]+(u<<2)>>2]),Hu(f,u,D[f+24|0],T+56|0),u=r[r[z+4>>2]+(A<<2)>>2],r[T+48>>2]=0,r[T+52>>2]=0,r[T+40>>2]=0,r[T+44>>2]=0,r[T+32>>2]=0,r[T+36>>2]=0,f=r[z>>2],I[f+84|0]||(u=r[r[f+68>>2]+(u<<2)>>2]),Hu(f,u,D[f+24|0],T+32|0),u=r[r[z+4>>2]+(m<<2)>>2],r[T+24>>2]=0,r[T+28>>2]=0,r[T+16>>2]=0,r[T+20>>2]=0,r[T+8>>2]=0,r[T+12>>2]=0,f=r[z>>2],I[f+84|0]||(u=r[r[f+68>>2]+(u<<2)>>2]),Hu(f,u,D[f+24|0],T+8|0),ei=r[T+44>>2],u=r[T+16>>2],nr=r[T+40>>2],f=nr,R=r[T+20>>2]-(ei+(u>>>0<f>>>0)|0)|0,H=u-f|0,u=rt(H,R,H,R),f=nn,U=u,xr=r[T+36>>2],u=r[T+8>>2],Pr=r[T+32>>2],m=Pr,y=r[T+12>>2]-(xr+(u>>>0<m>>>0)|0)|0,Me=u-m|0,m=rt(Me,y,Me,y),u=U+m|0,f=nn+f|0,f=u>>>0<m>>>0?f+1|0:f,U=u,ws=r[T+52>>2],u=r[T+24>>2],Jr=r[T+48>>2],m=Jr,N=r[T+28>>2]-(ws+(u>>>0<m>>>0)|0)|0,Z=u-m|0,ge=rt(Z,N,Z,N),u=U+ge|0,m=nn+f|0,Ie=u,ge=u>>>0<ge>>>0?m+1|0:m,!(u|ge))break o;if(U=r[T+64>>2],u=U,pa=r[T+68>>2],u=rt(u-nr|0,pa-((u>>>0<nr>>>0)+ei|0)|0,H,R),f=nn,m=u,t1=r[T+56>>2],u=t1,n1=r[T+60>>2],A=rt(u-Pr|0,n1-((u>>>0<Pr>>>0)+xr|0)|0,Me,y),u=m+A|0,m=nn+f|0,m=u>>>0<A>>>0?m+1|0:m,f=u,r1=r[T+72>>2],u=r1,i1=r[T+76>>2],A=rt(u-Jr|0,i1-((u>>>0<Jr>>>0)+ws|0)|0,Z,N),u=f+A|0,f=nn+m|0,Pt=u,ut=u>>>0<A>>>0?f+1|0:f,u=N>>31,f=u+Z|0,m=u+N|0,m=f>>>0<u>>>0?m+1|0:m,f=f^u,u=u^m,A=u,u=R>>31,Wt=u+H|0,m=u+R|0,gn=u^Wt,u=u^(u>>>0>Wt>>>0?m+1|0:m),Wt=u,ta=0,u=y>>31,En=u+Me|0,m=u+y|0,m=En>>>0<u>>>0?m+1|0:m,s1=f,En=En^u,u=u^m,m=(Wt|0)==(u|0)&gn>>>0>En>>>0|u>>>0<Wt>>>0,gn=m?gn:En,u=m?Wt:u,f=(A|0)==(u|0)&f>>>0>gn>>>0|u>>>0<A>>>0,f=Rv(-1,2147483647,f?s1:gn,f?A:u)>>>0<Pt>>>0,u=nn,f&(u|0)<=(ut|0)|(u|0)<(ut|0))break t;if(A=1,u=0,f=U,H=ss(rt(H,R,Pt,ut),nn,Ie,ge),R=H+nr|0,m=nn+ei|0,m=R>>>0<H>>>0?m+1|0:m,m=pa-((f>>>0<R>>>0)+m|0)|0,f=f-R|0,m=rt(f,m,f,m),H=nn,f=t1,U=m,y=ss(rt(Me,y,Pt,ut),nn,Ie,ge),R=y+Pr|0,m=nn+xr|0,m=y>>>0>R>>>0?m+1|0:m,m=n1-((f>>>0<R>>>0)+m|0)|0,f=f-R|0,R=rt(f,m,f,m),m=U+R|0,f=nn+H|0,f=m>>>0<R>>>0?f+1|0:f,R=f,f=r1,U=m,N=ss(rt(Z,N,Pt,ut),nn,Ie,ge),y=N+Jr|0,m=nn+ws|0,m=y>>>0<N>>>0?m+1|0:m,m=i1-((f>>>0<y>>>0)+m|0)|0,f=f-y|0,y=rt(f,m,f,m),f=U+y|0,m=nn+R|0,R=rt(f,f>>>0<y>>>0?m+1|0:m,Ie,ge),f=nn,y=f,!f&R>>>0<=1)break r;for(N=R,f=y;m=u<<1|A>>>31,A=A<<1,u=m,H=!f&N>>>0>7|(f|0)!=0,N=(f&3)<<30|N>>>2,f=f>>>2|0,!!H;);break i}if((A|0)<(ie|0))u=A<<1;else{if((ie|0)<=0){r[z+8>>2]=0,r[z+12>>2]=0;break a}u=(ie<<1)-2|0}u=(u<<2)+c|0,r[z+8>>2]=r[u>>2],r[z+12>>2]=r[u+4>>2]}ta=1;break t}ps(),Xe()}if(u=y,A=R,A-1|0)break n}for(;f=Rv(R,y,A,u)+A|0,m=u+nn|0,m=f>>>0<A>>>0?m+1|0:m,A=(m&1)<<31|f>>>1,u=m>>>1|0,f=rt(A,u,A,u),m=nn,!!((y|0)==(m|0)&f>>>0>R>>>0|m>>>0>y>>>0););}R=r[z+20>>2],R&&(f=R-1|0,N=r[r[z+16>>2]+(f>>>3&536870908)>>2],r[z+20>>2]=f,m=we,H=We-m|0,y=m>>31,Me=(We>>31)-(y+(m>>>0>We>>>0)|0)|0,m=rt(Pt,ut,H,Me),Z=nn,we=rt(we,y,Ie,ge),y=we+m|0,m=nn+Z|0,m=y>>>0<we>>>0?m+1|0:m,U=y,y=Nn,Z=vt-y|0,we=y>>31,We=(vt>>31)-(we+(y>>>0>vt>>>0)|0)|0,y=rt(A,u,Z,We),vt=y,f=N>>>f&1,N=f?0-y|0:y,y=U+N|0,U=m,m=nn,m=U+(f?0-(m+((vt|0)!=0)|0)|0:m)|0,Kd=z,a8=ss(y,y>>>0<N>>>0?m+1|0:m,Ie,ge),r[Kd+12>>2]=a8,m=rt(Z,We,Pt,ut),N=nn,Z=rt(Ie,ge,Nn,we),y=Z+m|0,m=nn+N|0,m=y>>>0<Z>>>0?m+1|0:m,U=y,u=rt(A,u,H,Me),y=f?u:0-u|0,A=U+y|0,U=m,m=nn,f=U+(f?m:0-(((u|0)!=0)+m|0)|0)|0,Kd=z,a8=ss(A,A>>>0<y>>>0?f+1|0:f,Ie,ge),r[Kd+8>>2]=a8),ta=(R|0)!=0}if(re=T+80|0,!ta)break e;t:{if(r[a+8>>2]<=0)break t;for(m=r[a+32>>2],u=0;;){f=u<<2,h=r[(f+a|0)+68>>2],A=r[a+16>>2];n:{if((h|0)>(A|0)){r[f+m>>2]=A;break n}if(f=f+m|0,A=r[a+12>>2],(A|0)>(h|0)){r[f>>2]=A;break n}r[f>>2]=h}if(u=u+1|0,h=r[a+8>>2],!((u|0)<(h|0)))break}if(f=0,(h|0)<=0)break t;for(u=ie<<3,A=u+c|0,R=s+u|0;;){h=f<<2,u=h+A|0,h=r[h+R>>2]+r[h+m>>2]|0,r[u>>2]=h;n:{if((h|0)>r[a+16>>2])h=h-r[a+20>>2]|0;else{if((h|0)>=r[a+12>>2])break n;h=h+r[a+20>>2]|0}r[u>>2]=h}if(f=f+1|0,!((f|0)<r[a+8>>2]))break}}if(ie=ie+1|0,h=(xi|0)>(ie|0),(ie|0)==(XA|0))break e;if(f=r[a+56>>2],u=r[f>>2],!(r[f+4>>2]-u>>2>>>0>ie>>>0))break}ps(),Xe()}a=h^1}else a=0;return a&1}function YSe(a,s,c,u,f,h){a=a|0,s=s|0,c=c|0,u=u|0,f=f|0,h=h|0;var m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0,ie=0,ge=0,we=0,Me=0,Ie=0,We=0,ut=0,vt=0,Pt=0,Wt=0,gn=0,En=0,Nn=0,nr=0,Pr=0,Jr=0,xi=0,ei=0,xr=0,ws=0,ta=0,pa=0,t1=0,n1=0,r1=0,i1=0,XA=0,s1=0,Kd=0;if((f|0)==2){r[a+8>>2]=2,r[a- -64>>2]=h,f=a+32|0,h=r[f>>2],u=r[a+36>>2]-h|0;e:{if(u>>>0<=7){Xr(f,2-(u>>>2|0)|0);break e}if((u|0)==8)break e;r[a+36>>2]=h+8}e:{if(u=r[a+56>>2],f=r[u+4>>2],u=r[u>>2],h=f-u|0,(h|0)<=0){h=0;break e}if((u|0)!=(f|0))for(z=a+60|0,Jr=h>>2,XA=(Jr|0)>1?Jr:1,h=1;;){A=re-80|0,re=A,f=-1;t:{n:{if(m=r[(Z<<2)+u>>2],(m|0)==-1||(y=r[z+32>>2],u=m+1|0,u=(u>>>0)%3|0?u:m-2|0,(u|0)!=-1&&(f=r[r[y>>2]+(u<<2)>>2]),u=-1,m=m+((m>>>0)%3|0?-1:2)|0,(m|0)!=-1&&(u=r[r[y>>2]+(m<<2)>>2]),y=r[z+36>>2],m=r[y>>2],y=r[y+4>>2]-m>>2,y>>>0<=f>>>0|u>>>0>=y>>>0))break n;y=r[m+(f<<2)>>2];i:{r:{s:{a:{o:{c:{if(m=r[m+(u<<2)>>2],(m|0)>=(Z|0)|(y|0)>=(Z|0))break c;if(u=(m<<3)+c|0,ut=r[u+4>>2],f=(y<<3)+c|0,ge=r[f+4>>2],Me=r[u>>2],Nn=r[f>>2],!((Me|0)!=(Nn|0)|(ge|0)!=(ut|0))){r[z+8>>2]=Nn,r[z+12>>2]=ge;break o}if(u=r[r[z+4>>2]+(Z<<2)>>2],r[A+72>>2]=0,r[A+76>>2]=0,f=A- -64|0,r[f>>2]=0,r[f+4>>2]=0,r[A+56>>2]=0,r[A+60>>2]=0,f=r[z>>2],I[f+84|0]||(u=r[r[f+68>>2]+(u<<2)>>2]),Hu(f,u,D[f+24|0],A+56|0),u=r[r[z+4>>2]+(y<<2)>>2],r[A+48>>2]=0,r[A+52>>2]=0,r[A+40>>2]=0,r[A+44>>2]=0,r[A+32>>2]=0,r[A+36>>2]=0,f=r[z>>2],I[f+84|0]||(u=r[r[f+68>>2]+(u<<2)>>2]),Hu(f,u,D[f+24|0],A+32|0),f=r[r[z+4>>2]+(m<<2)>>2],r[A+24>>2]=0,r[A+28>>2]=0,r[A+16>>2]=0,r[A+20>>2]=0,r[A+8>>2]=0,r[A+12>>2]=0,u=r[z>>2],I[u+84|0]||(f=r[r[u+68>>2]+(f<<2)>>2]),Hu(u,f,D[u+24|0],A+8|0),xi=r[A+44>>2],u=r[A+16>>2],vt=r[A+40>>2],f=vt,R=r[A+20>>2]-(xi+(u>>>0<f>>>0)|0)|0,U=u-f|0,u=rt(U,R,U,R),f=nn,H=u,ei=r[A+36>>2],u=r[A+8>>2],nr=r[A+32>>2],m=nr,T=r[A+12>>2]-(ei+(u>>>0<m>>>0)|0)|0,Ie=u-m|0,m=rt(Ie,T,Ie,T),u=H+m|0,f=nn+f|0,f=u>>>0<m>>>0?f+1|0:f,H=u,xr=r[A+52>>2],u=r[A+24>>2],Pr=r[A+48>>2],m=Pr,N=r[A+28>>2]-(xr+(u>>>0<m>>>0)|0)|0,we=u-m|0,ie=rt(we,N,we,N),u=H+ie|0,m=nn+f|0,We=u,ie=u>>>0<ie>>>0?m+1|0:m,!(u|ie))break c;if(ta=r[A+64>>2],u=ta,pa=r[A+68>>2],u=rt(u-vt|0,pa-((u>>>0<vt>>>0)+xi|0)|0,U,R),f=nn,m=u,t1=r[A+56>>2],u=t1,n1=r[A+60>>2],y=rt(u-nr|0,n1-((u>>>0<nr>>>0)+ei|0)|0,Ie,T),u=m+y|0,m=nn+f|0,m=u>>>0<y>>>0?m+1|0:m,f=u,r1=r[A+72>>2],u=r1,i1=r[A+76>>2],y=rt(u-Pr|0,i1-((u>>>0<Pr>>>0)+xr|0)|0,we,N),u=f+y|0,f=nn+m|0,Wt=u,Pt=u>>>0<y>>>0?f+1|0:f,u=N>>31,f=u+we|0,m=u+N|0,m=f>>>0<u>>>0?m+1|0:m,y=f^u,u=u^m,ws=u,u=R>>31,m=u+U|0,f=u+R|0,gn=m^u,u=u^(m>>>0<u>>>0?f+1|0:f),H=u,f=0,u=T>>31,En=u+Ie|0,m=u+T|0,m=En>>>0<u>>>0?m+1|0:m,En=En^u,u=u^m,m=(H|0)==(u|0)&gn>>>0>En>>>0|u>>>0<H>>>0,gn=m?gn:En,u=m?H:u,m=(ws|0)==(u|0)&y>>>0>gn>>>0|u>>>0<ws>>>0,m=Rv(-1,2147483647,m?y:gn,m?ws:u)>>>0<Wt>>>0,u=nn,m&(u|0)<=(Pt|0)|(u|0)<(Pt|0))break i;if(y=1,u=0,f=ta,U=ss(rt(U,R,Wt,Pt),nn,We,ie),R=U+vt|0,m=nn+xi|0,m=R>>>0<U>>>0?m+1|0:m,m=pa-((f>>>0<R>>>0)+m|0)|0,f=f-R|0,m=rt(f,m,f,m),U=nn,f=t1,H=m,T=ss(rt(Ie,T,Wt,Pt),nn,We,ie),R=T+nr|0,m=nn+ei|0,m=T>>>0>R>>>0?m+1|0:m,m=n1-((f>>>0<R>>>0)+m|0)|0,f=f-R|0,R=rt(f,m,f,m),m=H+R|0,f=nn+U|0,f=m>>>0<R>>>0?f+1|0:f,R=f,f=r1,H=m,N=ss(rt(we,N,Wt,Pt),nn,We,ie),T=N+Pr|0,m=nn+xr|0,m=T>>>0<N>>>0?m+1|0:m,m=i1-((f>>>0<T>>>0)+m|0)|0,f=f-T|0,T=rt(f,m,f,m),f=H+T|0,m=nn+R|0,R=rt(f,f>>>0<T>>>0?m+1|0:m,We,ie),f=nn,T=f,!f&R>>>0<=1)break a;for(N=R,f=T;m=u<<1|y>>>31,y=y<<1,u=m,U=!f&N>>>0>7|(f|0)!=0,N=(f&3)<<30|N>>>2,f=f>>>2|0,!!U;);break s}if((y|0)<(Z|0))u=y<<1;else{if((Z|0)<=0){r[z+8>>2]=0,r[z+12>>2]=0;break o}u=(Z<<1)-2|0}u=(u<<2)+c|0,r[z+8>>2]=r[u>>2],r[z+12>>2]=r[u+4>>2]}f=1;break i}if(u=T,y=R,y-1|0)break r}for(;m=Rv(R,T,y,u)+y|0,f=u+nn|0,f=m>>>0<y>>>0?f+1|0:f,y=(f&1)<<31|m>>>1,u=f>>>1|0,f=rt(y,u,y,u),m=nn,!!((T|0)==(m|0)&f>>>0>R>>>0|m>>>0>T>>>0););}R=r[z+20>>2],R&&(f=R-1|0,N=r[r[z+16>>2]+(f>>>3&536870908)>>2],r[z+20>>2]=f,m=ge,U=ut-m|0,T=m>>31,Ie=(ut>>31)-(T+(m>>>0>ut>>>0)|0)|0,m=rt(Wt,Pt,U,Ie),we=nn,ge=rt(ge,T,We,ie),T=ge+m|0,m=nn+we|0,m=T>>>0<ge>>>0?m+1|0:m,H=T,T=Nn,we=Me-T|0,ge=T>>31,ut=(Me>>31)-(ge+(T>>>0>Me>>>0)|0)|0,T=rt(y,u,we,ut),Me=T,T=N>>>f&1,f=T,vt=f?0-Me|0:Me,N=H+vt|0,H=m,m=nn,f=H+(f?0-(m+((Me|0)!=0)|0)|0:m)|0,s1=z,Kd=ss(N,N>>>0<vt>>>0?f+1|0:f,We,ie),r[s1+12>>2]=Kd,f=rt(we,ut,Wt,Pt),m=nn,N=rt(We,ie,Nn,ge),f=N+f|0,m=nn+m|0,m=f>>>0<N>>>0?m+1|0:m,u=rt(y,u,U,Ie),N=T?u:0-u|0,y=N+f|0,f=nn,f=(T?f:0-(((u|0)!=0)+f|0)|0)+m|0,s1=z,Kd=ss(y,y>>>0<N>>>0?f+1|0:f,We,ie),r[s1+8>>2]=Kd),f=(R|0)!=0}re=A+80|0;break t}ps(),Xe()}if(!f)break e;t:{if(r[a+8>>2]<=0)break t;for(m=r[a+32>>2],u=0;;){f=u<<2,h=r[(f+a|0)+68>>2],y=r[a+16>>2];n:{if((h|0)>(y|0)){r[f+m>>2]=y;break n}if(f=f+m|0,y=r[a+12>>2],(y|0)>(h|0)){r[f>>2]=y;break n}r[f>>2]=h}if(u=u+1|0,h=r[a+8>>2],!((u|0)<(h|0)))break}if(f=0,(h|0)<=0)break t;for(u=Z<<3,y=u+c|0,R=s+u|0;;){h=f<<2,u=h+y|0,h=r[h+R>>2]+r[h+m>>2]|0,r[u>>2]=h;n:{if((h|0)>r[a+16>>2])h=h-r[a+20>>2]|0;else{if((h|0)>=r[a+12>>2])break n;h=h+r[a+20>>2]|0}r[u>>2]=h}if(f=f+1|0,!((f|0)<r[a+8>>2]))break}}if(Z=Z+1|0,h=(Jr|0)>(Z|0),(Z|0)==(XA|0))break e;if(f=r[a+56>>2],u=r[f>>2],!(r[f+4>>2]-u>>2>>>0>Z>>>0))break}ps(),Xe()}a=h^1}else a=0;return a&1}function qSe(a){a=a|0;var s=0,c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0,ie=0,ge=0,we=0,Me=0,Ie=0,We=0,ut=_e(0),vt=0;R=re-32|0,re=R;e:{if(!(r[a+60>>2]!=r[a- -64>>2]|r[a+48>>2]!=r[a+52>>2])){T=1;break e}if(T=1,(pt[r[r[a>>2]+24>>2]](a)|0)<=0)break e;t:{n:{for(;;){i:{c=pt[r[r[a>>2]+20>>2]](a,vt)|0;r:{s:{a:switch(h=r[r[r[(pt[r[r[a>>2]+28>>2]](a)|0)+4>>2]+8>>2]+(c<<2)>>2],r[h+28>>2]-1|0){case 8:break s;case 0:case 2:case 4:break a;default:break r}c=D[h+24|0],r[R+24>>2]=0,r[R+16>>2]=0,r[R+20>>2]=0;a:{if(!c){T=0,r[R>>2]=0,z=0;break a}if((c|0)<0)break i;if(c=c<<2,T=Te(c),r[R+16>>2]=T,s=c+T|0,r[R+24>>2]=s,z=0,Ct(T,0,c),r[R+20>>2]=s,c=D[h+24|0],r[R+8>>2]=0,r[R>>2]=0,r[R+4>>2]=0,!c)break a;if((c|0)<0)break n;c=c<<2,z=Te(c),r[R>>2]=z,Ct(z,0,c)}a:{o:switch(r[h+28>>2]-1|0){case 4:f=0,y=0,U=0,c=0,A=re-16|0,re=A,u=D[h+24|0],r[A+8>>2]=0,r[A>>2]=0,r[A+4>>2]=0;c:{l:{if(u){if((u|0)<0)break l;s=u<<2,y=Te(s),r[A>>2]=y,r[A+8>>2]=s+y,Ct(y,0,s),f=Te(s),Ct(f,0,s)}if(!r[h+80>>2])break c;for(;;){Ie=r[h>>2],ge=r[Ie>>2],s=r[h+40>>2],N=r[h+48>>2]+rt(s,r[h+44>>2],U,c)|0,N=$e(y,ge+N|0,s),H=u<<24>>24;u:{if((H|0)<=0)break u;if(Z=r[a+48>>2],m=0,(u&255)!=1)for(We=H&-2,u=0;ie=m<<2,r[ie+f>>2]=r[Z+(m+Me<<2)>>2]+r[N+ie>>2],ie=m|1,ge=ie<<2,r[ge+f>>2]=r[Z+(Me+ie<<2)>>2]+r[N+ge>>2],m=m+2|0,u=u+2|0,(We|0)!=(u|0););if(!(H&1))break u;u=m<<2,r[u+f>>2]=r[Z+(m+Me<<2)>>2]+r[u+N>>2]}if($e(r[Ie>>2]+ne(s,U)|0,f,s),s=U+1|0,c=s?c:c+1|0,U=s,!c&Ue[h+80>>2]<=s>>>0|c)break c;u=I[h+24|0]}}jt(),Xe()}f&&W(f),y&&W(y),re=A+16|0;break a;case 2:f=0,y=0,U=0,c=0,A=re-16|0,re=A,u=D[h+24|0],r[A+8>>2]=0,r[A>>2]=0,r[A+4>>2]=0;c:{l:{if(u){if((u|0)<0)break l;s=u<<1,y=Te(s),r[A>>2]=y,r[A+8>>2]=s+y,Ct(y,0,s),f=Te(s),Ct(f,0,s)}if(!r[h+80>>2])break c;for(;;){Ie=r[h>>2],ge=r[Ie>>2],s=r[h+40>>2],N=r[h+48>>2]+rt(s,r[h+44>>2],U,c)|0,N=$e(y,ge+N|0,s),H=u<<24>>24;u:{if((H|0)<=0)break u;if(Z=r[a+48>>2],m=0,(u&255)!=1)for(We=H&-2,u=0;ie=m<<1,zt[ie+f>>1]=Ut[N+ie>>1]+Ut[Z+(m+Me<<2)>>1],ie=m|1,ge=ie<<1,zt[ge+f>>1]=Ut[N+ge>>1]+Ut[Z+(Me+ie<<2)>>1],m=m+2|0,u=u+2|0,(We|0)!=(u|0););if(!(H&1))break u;u=m<<1,zt[u+f>>1]=Ut[u+N>>1]+Ut[Z+(m+Me<<2)>>1]}if($e(r[Ie>>2]+ne(s,U)|0,f,s),s=U+1|0,c=s?c:c+1|0,U=s,!c&Ue[h+80>>2]<=s>>>0|c)break c;u=I[h+24|0]}}jt(),Xe()}f&&W(f),y&&W(y),re=A+16|0;break a;case 0:break o;default:break a}f=0,m=0,U=0,c=0,y=re-16|0,re=y,s=D[h+24|0],r[y+8>>2]=0,r[y>>2]=0,r[y+4>>2]=0;o:{c:{if(s){if((s|0)<0)break c;m=Te(s),r[y>>2]=m,r[y+8>>2]=s+m,Ct(m,0,s),f=Te(s),Ct(f,0,s)}if(r[h+80>>2])for(;;){ge=r[r[h>>2]>>2],A=r[h+40>>2],s=r[h+48>>2]+rt(A,r[h+44>>2],U,c)|0,s=$e(m,ge+s|0,A),N=D[h+24|0];l:{if((N|0)<=0)break l;if(Z=r[a+48>>2],u=0,(N|0)!=1)for(Ie=N&-2,A=0;D[u+f|0]=I[s+u|0]+I[Z+(u+Me<<2)|0],H=u|1,D[H+f|0]=I[s+H|0]+I[Z+(H+Me<<2)|0],u=u+2|0,A=A+2|0,(Ie|0)!=(A|0););if(!(N&1))break l;D[u+f|0]=I[s+u|0]+I[Z+(u+Me<<2)|0]}if(s=r[h+40>>2],$e(r[r[h>>2]>>2]+ne(s,U)|0,f,s),s=U+1|0,c=s?c:c+1|0,U=s,!(!c&Ue[h+80>>2]>s>>>0))break}f&&W(f),m&&W(m),re=y+16|0;break o}jt(),Xe()}}if(Me=D[h+24|0]+Me|0,c=1,z&&W(z),T&&W(T),c)break r;T=0;break e}m=r[r[a+60>>2]+(we<<2)>>2],f=r[a+36>>2],T=r[(pt[r[r[a>>2]+28>>2]](a)|0)+40>>2],r[R>>2]=r[h+56>>2],c=Te(32),r[R+16>>2]=c,r[R+20>>2]=24,r[R+24>>2]=-2147483616,D[c+24|0]=0,s=I[1318]|I[1319]<<8|(I[1320]<<16|I[1321]<<24),u=I[1314]|I[1315]<<8|(I[1316]<<16|I[1317]<<24),D[c+16|0]=u,D[c+17|0]=u>>>8,D[c+18|0]=u>>>16,D[c+19|0]=u>>>24,D[c+20|0]=s,D[c+21|0]=s>>>8,D[c+22|0]=s>>>16,D[c+23|0]=s>>>24,s=I[1310]|I[1311]<<8|(I[1312]<<16|I[1313]<<24),u=I[1306]|I[1307]<<8|(I[1308]<<16|I[1309]<<24),D[c+8|0]=u,D[c+9|0]=u>>>8,D[c+10|0]=u>>>16,D[c+11|0]=u>>>24,D[c+12|0]=s,D[c+13|0]=s>>>8,D[c+14|0]=s>>>16,D[c+15|0]=s>>>24,s=I[1302]|I[1303]<<8|(I[1304]<<16|I[1305]<<24),u=I[1298]|I[1299]<<8|(I[1300]<<16|I[1301]<<24),D[c|0]=u,D[c+1|0]=u>>>8,D[c+2|0]=u>>>16,D[c+3|0]=u>>>24,D[c+4|0]=s,D[c+5|0]=s>>>8,D[c+6|0]=s>>>16,D[c+7|0]=s>>>24,s=fte(T,R,R+16|0),D[R+27|0]<0&&W(r[R+16>>2]),c=we+1|0;s:{if(s){Hee(h,m);break s}if(y=f+ne(we,24)|0,f=r[y+4>>2],we=D[h+24|0],u=we<<2,s=Te((we|0)!=(we&1073741823)?-1:u),r[R+16>>2]=1065353216,ut=At[y+20>>2],f=-1<<f^-1,(f|0)>0&&(At[R+16>>2]=ut/_e(f|0)),(f|0)<=0)break t;a:{if(!r[m+80>>2])break a;if((we|0)<=0){for(z=0,T=0;$e(r[r[h+64>>2]>>2]+T|0,s,u),T=u+T|0,z=z+1|0,z>>>0<Ue[m+80>>2];);break a}for(N=r[r[m>>2]>>2]+r[m+48>>2]|0,Ie=we&-2,We=we&1,A=0,f=0,T=0;;){if(U=r[y+8>>2],ut=At[R+16>>2],z=0,Z=0,(we|0)!=1)for(;H=z<<2,ie=N+(T<<2)|0,At[H+s>>2]=_e(ut*_e(r[ie>>2]))+At[U+H>>2],H=H|4,At[H+s>>2]=_e(ut*_e(r[ie+4>>2]))+At[U+H>>2],z=z+2|0,T=T+2|0,Z=Z+2|0,(Ie|0)!=(Z|0););if(We&&(z=z<<2,At[z+s>>2]=_e(ut*_e(r[N+(T<<2)>>2]))+At[U+z>>2],T=T+1|0),$e(r[r[h+64>>2]>>2]+f|0,s,u),f=u+f|0,A=A+1|0,!(A>>>0<Ue[m+80>>2]))break}}W(s)}we=c}if(T=1,vt=vt+1|0,(pt[r[r[a>>2]+24>>2]](a)|0)>(vt|0))continue;break e}break}jt(),Xe()}jt(),Xe()}W(s),T=0}return re=R+32|0,T|0}function AB(a,s){a=a|0,s=s|0;var c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0,ie=0;y=re-96|0,re=y,ie=r[a+4>>2],f=r[ie+32>>2],N=r[f+8>>2],m=N,U=r[f+12>>2],u=U,c=r[f+20>>2],H=r[f+16>>2];e:{if((u|0)<=(c|0)&H>>>0>=m>>>0|(c|0)>(u|0)||(h=r[f>>2],Z=I[h+H|0],m=H+1|0,u=m?c:c+1|0,r[f+16>>2]=m,r[f+20>>2]=u,(u|0)>=(U|0)&m>>>0>=N>>>0|(u|0)>(U|0)))break e;z=I[h+m|0],m=H+2|0,u=m>>>0<2?c+1|0:c,R=m,r[f+16>>2]=m,r[f+20>>2]=u,T=Z<<24>>24;t:{if((T|0)>=0){if(m=r[a+216>>2],Z>>>0>=(r[a+220>>2]-m|0)/144>>>0)break e;if(m=m+ne(Z,144)|0,r[m>>2]<0)break t;break e}if(r[a+212>>2]>=0)break e;m=a+212|0}r[m>>2]=s;t:{n:{m=Ut[ie+36>>1];i:{if(((m<<8|m>>>8)&65535)>>>0>=258){if((u|0)>=(U|0)&R>>>0>=N>>>0|(u|0)>(U|0)||(m=I[h+R|0],u=H+3|0,c=u>>>0<3?c+1|0:c,r[f+16>>2]=u,r[f+20>>2]=c,c=m>>>0>1,c))break e;if(c=c?0:m,!z)break i;if(c)break e;break n}if(z)break n;c=0}(T|0)<0?f=a+184|0:(f=r[a+216>>2]+ne(Z,144)|0,D[f+100|0]=0,f=f+104|0);i:{if((c|0)==1){h=re-112|0,re=h,R=r[r[a+4>>2]+44>>2],c=Te(120),r[c>>2]=12204,r[c+4>>2]=0,r[c+116>>2]=0,r[c+112>>2]=f,r[c+108>>2]=R,r[c+12>>2]=0,r[c+16>>2]=0,r[c+20>>2]=0,r[c+24>>2]=0,r[c+28>>2]=0,r[c+32>>2]=0,r[c+36>>2]=0,r[c+40>>2]=0,r[c+44>>2]=0,r[c+48>>2]=0,r[c+52>>2]=0,r[c+56>>2]=0,r[c+60>>2]=0,r[c+8>>2]=12416,u=c- -64|0,r[u>>2]=0,r[u+4>>2]=0,r[c+72>>2]=0,r[c+76>>2]=0,r[c+80>>2]=0,r[c+84>>2]=0,r[c+88>>2]=0,r[c+104>>2]=0,r[c+96>>2]=0,r[c+100>>2]=0,z=r[a+8>>2],r[h+48>>2]=0,r[h+52>>2]=0,r[h+40>>2]=0,r[h+44>>2]=0,T=h+32|0,u=T,r[u>>2]=0,r[u+4>>2]=0,r[h+24>>2]=0,r[h+28>>2]=0,r[h+16>>2]=0,r[h+20>>2]=0,u=h- -64|0,r[u>>2]=0,r[u+4>>2]=0,r[h+72>>2]=0,r[h+76>>2]=0,r[h+80>>2]=0,r[h+84>>2]=0,r[h+88>>2]=0,r[h+104>>2]=0,r[h+56>>2]=0,r[h+60>>2]=0,r[h+8>>2]=12416,r[h+96>>2]=0,r[h+100>>2]=0,r[h+12>>2]=z,m=r[z>>2],u=r[z+4>>2],D[h+111|0]=0,N=T,T=h+111|0,hc(N,(u-m>>2>>>0)/3|0,T),u=r[h+12>>2],m=r[u+28>>2],u=r[u+24>>2],D[h+111|0]=0,hc(h+44|0,m-u>>2,T),r[h+28>>2]=c,r[h+24>>2]=R,r[h+20>>2]=f,r[h+16>>2]=z,f=c+8|0,u=h+8|0,LB(f,u);r:{if((u|0)==(f|0)){r[c+92>>2]=r[u+84>>2];break r}Nv(c+56|0,r[u+48>>2],r[u+52>>2]),Nv(c+68|0,r[u+60>>2],r[u- -64>>2]),Nv(c+80|0,r[u+72>>2],r[u+76>>2]),r[c+92>>2]=r[u+84>>2],Wi(c+96|0,r[u+88>>2],r[u+92>>2])}r[h+8>>2]=12416,f=r[h+96>>2],f&&(r[h+100>>2]=f,W(f)),f=r[h+80>>2],f&&(r[h+84>>2]=f,W(f)),f=r[h+68>>2],f&&(r[h+72>>2]=f,W(f)),f=r[h+56>>2],f&&(r[h+60>>2]=f,W(f)),r[h+8>>2]=12652,f=r[h+44>>2],f&&W(f),f=r[h+32>>2],f&&W(f),re=h+112|0;break i}u=re+-64|0,re=u,h=r[r[a+4>>2]+44>>2],c=Te(80),r[c>>2]=12672,r[c+4>>2]=0,r[c+76>>2]=0,r[c+72>>2]=f,r[c+68>>2]=h,r[c+8>>2]=12836,r[c+12>>2]=0,r[c+16>>2]=0,r[c+20>>2]=0,r[c+24>>2]=0,r[c+28>>2]=0,r[c+32>>2]=0,r[c+36>>2]=0,r[c+40>>2]=0,r[c+44>>2]=0,r[c+48>>2]=0,r[c+52>>2]=0,r[c- -64>>2]=0,z=c+56|0,m=z,r[m>>2]=0,r[m+4>>2]=0,N=r[a+8>>2],r[u+40>>2]=0,r[u+44>>2]=0,r[u+32>>2]=0,r[u+36>>2]=0,R=u+24|0,m=R,r[m>>2]=0,r[m+4>>2]=0,r[u+16>>2]=0,r[u+20>>2]=0,r[u+8>>2]=0,r[u+12>>2]=0,r[u+56>>2]=0,r[u+48>>2]=0,r[u+52>>2]=0,r[u>>2]=12836,r[u+4>>2]=N,T=r[N>>2],m=r[N+4>>2],D[u+63|0]=0,U=R,R=u+63|0,hc(U,(m-T>>2>>>0)/3|0,R),m=r[u+4>>2],T=r[m+28>>2],m=r[m+24>>2],D[u+63|0]=0,hc(u+36|0,T-m>>2,R),r[u+20>>2]=c,r[u+16>>2]=h,r[u+12>>2]=f,r[u+8>>2]=N,LB(c+8|0,u),Nv(z,r[u+48>>2],r[u+52>>2]),r[u>>2]=12836,f=r[u+48>>2],f&&(r[u+52>>2]=f,W(f)),r[u>>2]=12652,f=r[u+36>>2],f&&W(f),f=r[u+24>>2],f&&W(f),re=u- -64|0}if(!c)break e;break t}if((T|0)<0)break e;m=r[ie+44>>2],f=r[a+216>>2],c=Te(80),r[c+76>>2]=0,r[c+68>>2]=m,r[c+8>>2]=11900,r[c>>2]=12964,r[c+4>>2]=0,u=f+ne(Z,144)|0,A=u+104|0,r[c+72>>2]=A,r[c- -64>>2]=0,r[c+56>>2]=0,r[c+60>>2]=0,r[c+52>>2]=0,r[c+44>>2]=0,r[c+48>>2]=0,r[c+36>>2]=0,r[c+40>>2]=0,r[c+28>>2]=0,r[c+32>>2]=0,r[c+20>>2]=0,r[c+24>>2]=0,r[c+12>>2]=0,r[c+16>>2]=0,r[y+24>>2]=m,r[y+68>>2]=0,r[y+72>>2]=0,r[y+60>>2]=0,r[y+64>>2]=0,r[y+52>>2]=0,r[y+56>>2]=0,r[y+44>>2]=0,r[y+48>>2]=0,r[y+84>>2]=0,r[y+88>>2]=0,r[y+76>>2]=0,r[y+80>>2]=0,r[y+28>>2]=c,f=r[y+28>>2],r[y+8>>2]=r[y+24>>2],r[y+12>>2]=f,u=u+4|0,r[y+16>>2]=u,r[y+20>>2]=A,r[y+36>>2]=0,r[y+40>>2]=0,r[y+32>>2]=11900,f=r[y+20>>2],r[y>>2]=r[y+16>>2],r[y+4>>2]=f,A=y+32|0,Ete(A,u,y),f=c+8|0,LB(f,A),(f|0)!=(A|0)&&Nv(c+56|0,r[A+48>>2],r[A+52>>2]),zte(A)}c=kte(Te(64),c),T=r[a+4>>2],a=c,c=s;t:{n:{if((c|0)>=0){u=T+8|0,s=r[T+12>>2],f=r[T+8>>2],m=s-f>>2;i:{if((m|0)>(c|0))break i;if(A=c+1|0,c>>>0>=m>>>0){jM(u,A-m|0);break i}if(m>>>0<=A>>>0)break i;if(f=f+(A<<2)|0,(f|0)!=(s|0))for(;s=s-4|0,A=r[s>>2],r[s>>2]=0,A&&pt[r[r[A>>2]+4>>2]](A),(s|0)!=(f|0););r[T+12>>2]=f}if(f=r[u>>2]+(c<<2)|0,s=r[f>>2],r[f>>2]=a,s)break n;break t}if(s=a,!a)break t}pt[r[r[s>>2]+4>>2]](s)}A=(c^-1)>>>31|0}return re=y+96|0,A|0}function Ree(a){var s=0,c=0,u=0,f=0,h=0,m=0;f=re-16|0,re=f,r[f+12>>2]=a;e:{if(a>>>0<=211){u=r[Mte(14288,14480,f+12|0)>>2];break e}for(a>>>0>=4294967292&&(o8(),Xe()),h=(a>>>0)/210|0,u=ne(h,210),r[f+8>>2]=a-u,m=Mte(14480,14672,f+8|0)-14480>>2;;){u=r[(m<<2)+14480>>2]+u|0,a=5;t:{for(;;){n:{if((a|0)==47){for(a=211;;){if(s=(u>>>0)/(a>>>0)|0,s>>>0<a>>>0)break t;if((ne(a,s)|0)==(u|0))break n;if(s=a+10|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+12|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+16|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+18|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+22|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+28|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+30|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+36|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+40|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+42|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+46|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+52|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+58|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+60|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+66|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+70|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+72|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+78|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+82|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+88|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+96|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+100|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+102|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+106|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+108|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+112|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+120|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+126|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+130|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+136|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+138|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+142|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+148|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+150|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+156|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+162|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+166|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+168|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+172|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+178|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+180|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+186|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+190|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+192|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+196|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+198|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if((ne(s,c)|0)==(u|0))break n;if(s=a+208|0,c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if(a=a+210|0,(ne(s,c)|0)==(u|0))break}break n}if(s=r[(a<<2)+14288>>2],c=(u>>>0)/(s>>>0)|0,s>>>0>c>>>0)break t;if(a=a+1|0,(ne(s,c)|0)!=(u|0))continue}break}u=m+1|0,a=(u|0)==48,m=a?0:u,h=a+h|0,u=ne(h,210);continue}break}r[f+12>>2]=u}return re=f+16|0,u}function XSe(a){a=a|0;var s=0,c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0;f=re-32|0,re=f,c=r[a+32>>2],u=Ut[a+36>>1];e:{t:{if(((u<<8|u>>>8)&65535)>>>0<=513){if(s=r[c+12>>2],u=r[c+20>>2],h=u,A=r[c+16>>2],m=A+4|0,u=m>>>0<4?u+1|0:u,T=r[c+8>>2],y=m,T>>>0<m>>>0&(s|0)<=(u|0)|(s|0)<(u|0)||(U=r[c>>2],m=U+A|0,N=I[m|0]|I[m+1|0]<<8|(I[m+2|0]<<16|I[m+3|0]<<24),r[c+16>>2]=y,r[c+20>>2]=u,u=s,s=h,h=A+8|0,s=h>>>0<8?s+1|0:s,h>>>0>T>>>0&(s|0)>=(u|0)|(s|0)>(u|0)))break e;u=y+U|0,U=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),r[f+24>>2]=U,r[c+16>>2]=h,r[c+20>>2]=s;break t}if(!Zm(1,f+28|0,c)||!Zm(1,f+24|0,r[a+32>>2]))break e;N=r[f+28>>2],U=r[f+24>>2]}if(N>>>0>1431655765||(h=r[a+32>>2],u=h,A=r[u+8>>2],s=A,c=r[u+16>>2],y=s-c|0,m=r[u+12>>2],H=s>>>0<c>>>0,s=r[u+20>>2],u=ss(y,m-(H+s|0)|0,3,0),!nn&u>>>0<N>>>0)||(u=rt(N,0,3,0),!nn&u>>>0<U>>>0|((s|0)>=(m|0)&c>>>0>=A>>>0|(s|0)>(m|0))))break e;m=I[c+r[h>>2]|0],A=c+1|0,u=A?s:s+1|0,r[h+16>>2]=A,r[h+20>>2]=u;t:{if(!m){h=0,s=re-32|0,re=s,r[s+24>>2]=0,r[s+16>>2]=0,r[s+20>>2]=0;n:{i:{if(u=ne(N,3),u){if(u>>>0>=1073741824)break i;c=ne(N,12),h=Te(c),r[s+16>>2]=h,Ct(h,0,c)}u=bB(u,1,r[a+32>>2],h);r:{s:{if(!(!u|!N)){for(m=0,c=0;A=(c<<2)+h|0,y=r[A>>2],T=y>>>1|0,y=(y&1?0-T|0:T)+R|0,r[s>>2]=y,T=r[A+4>>2],R=T>>>1|0,y=y+(T&1?0-R|0:R)|0,r[s+4>>2]=y,A=r[A+8>>2],T=A>>>1|0,R=y+(A&1?0-T|0:T)|0,r[s+8>>2]=R,$A(r[a+44>>2]+96|0,s),c=c+3|0,m=m+1|0,(m|0)!=(N|0););break s}if(!h)break r}W(h)}re=s+32|0;break n}jt(),Xe()}if(!u)break e;break t}n:{if(U>>>0<=255){if(!N)break t;if(r[f+16>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0,c=r[h+12>>2],s=c,y=r[h+8>>2],(u|0)>=(s|0)&A>>>0>=y>>>0|(s|0)<(u|0))break n;for(;;){if(m=r[h>>2],R=I[m+A|0],s=u,T=A+1|0,s=T?s:s+1|0,r[h+16>>2]=T,r[h+20>>2]=s,r[f+8>>2]=R,(s|0)>=(c|0)&T>>>0>=y>>>0|(s|0)>(c|0)||(R=I[m+T|0],s=u,T=A+2|0,s=T>>>0<2?s+1|0:s,r[h+16>>2]=T,r[h+20>>2]=s,r[f+12>>2]=R,(s|0)>=(c|0)&T>>>0>=y>>>0|(s|0)>(c|0)))break n;if(s=I[m+T|0],c=A+3|0,u=c>>>0<3?u+1|0:u,r[h+16>>2]=c,r[h+20>>2]=u,r[f+16>>2]=s,$A(r[a+44>>2]+96|0,f+8|0),z=z+1|0,(z|0)==(N|0))break t;if(h=r[a+32>>2],s=h,A=r[s+16>>2],u=r[s+20>>2],r[f+16>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0,y=r[s+8>>2],c=r[s+12>>2],s=c,!(A>>>0<y>>>0&(u|0)<=(s|0)|(s|0)>(u|0)))break}break n}if(U>>>0<=65535){if(!N)break t;if(r[f+16>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0,m=r[h+12>>2],c=c+3|0,s=c>>>0<3?s+1|0:s,T=r[h+8>>2],y=c,c=s,T>>>0<y>>>0&(s|0)>=(m|0)|(s|0)>(m|0))break n;for(;;){if(R=r[h>>2],s=R+A|0,s=I[s|0]|I[s+1|0]<<8,r[h+16>>2]=y,r[h+20>>2]=c,r[f+8>>2]=s,s=u,c=A+4|0,s=c>>>0<4?s+1|0:s,c>>>0>T>>>0&(s|0)>=(m|0)|(s|0)>(m|0)||(y=y+R|0,y=I[y|0]|I[y+1|0]<<8,r[h+16>>2]=c,r[h+20>>2]=s,r[f+12>>2]=y,s=u,u=A+6|0,s=u>>>0<6?s+1|0:s,u>>>0>T>>>0&(s|0)>=(m|0)|(s|0)>(m|0)))break n;if(c=c+R|0,c=I[c|0]|I[c+1|0]<<8,r[h+16>>2]=u,r[h+20>>2]=s,r[f+16>>2]=c,$A(r[a+44>>2]+96|0,f+8|0),z=z+1|0,(z|0)==(N|0))break t;if(h=r[a+32>>2],s=h,A=r[s+16>>2],u=r[s+20>>2],r[f+16>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0,m=r[s+12>>2],T=r[s+8>>2],s=u,c=A+2|0,s=c>>>0<2?s+1|0:s,y=c,c=s,!((s|0)<=(m|0)&T>>>0>=y>>>0|(s|0)<(m|0)))break}break n}i:{if(U>>>0>2097151||(m=Ut[a+36>>1],((m<<8|m>>>8)&65535)>>>0<514))break i;if(!N)break t;if(r[f+16>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0,!Zm(1,f+4|0,h))break n;for(;;){if(r[f+8>>2]=r[f+4>>2],!Zm(1,f+4|0,r[a+32>>2])||(r[f+12>>2]=r[f+4>>2],!Zm(1,f+4|0,r[a+32>>2])))break n;if(r[f+16>>2]=r[f+4>>2],$A(r[a+44>>2]+96|0,f+8|0),z=z+1|0,(z|0)==(N|0))break t;if(u=r[a+32>>2],r[f+16>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0,!Zm(1,f+4|0,u))break}break n}if(!N)break t;if(r[f+16>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0,m=r[h+12>>2],c=c+5|0,s=c>>>0<5?s+1|0:s,T=r[h+8>>2],y=c,c=s,T>>>0<y>>>0&(s|0)>=(m|0)|(s|0)>(m|0))break n;for(;;){if(R=r[h>>2],s=R+A|0,s=I[s|0]|I[s+1|0]<<8|(I[s+2|0]<<16|I[s+3|0]<<24),r[h+16>>2]=y,r[h+20>>2]=c,r[f+8>>2]=s,s=u,c=A+8|0,s=c>>>0<8?s+1|0:s,H=c,c>>>0>T>>>0&(s|0)>=(m|0)|(s|0)>(m|0)||(c=y+R|0,c=I[c|0]|I[c+1|0]<<8|(I[c+2|0]<<16|I[c+3|0]<<24),r[h+16>>2]=H,r[h+20>>2]=s,r[f+12>>2]=c,s=A+12|0,u=s>>>0<12?u+1|0:u,c=s,s>>>0>T>>>0&(u|0)>=(m|0)|(u|0)>(m|0)))break n;if(s=R+H|0,s=I[s|0]|I[s+1|0]<<8|(I[s+2|0]<<16|I[s+3|0]<<24),r[h+16>>2]=c,r[h+20>>2]=u,r[f+16>>2]=s,$A(r[a+44>>2]+96|0,f+8|0),z=z+1|0,(z|0)==(N|0))break t;if(h=r[a+32>>2],s=h,A=r[s+16>>2],u=r[s+20>>2],r[f+16>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0,m=r[s+12>>2],T=r[s+8>>2],s=u,c=A+4|0,s=c>>>0<4?s+1|0:s,y=c,c=s,!((s|0)<=(m|0)&T>>>0>=y>>>0|(s|0)<(m|0)))break}}z=0;break e}r[r[a+4>>2]+80>>2]=U,z=1}return re=f+32|0,z|0}function Mv(a,s){var c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0;z=re-16|0,re=z;e:{t:{n:{i:{if(I[r[a+4>>2]+36|0]<=1){if(T=-1,c=r[s+20>>2],f=r[s+16>>2],u=f+4|0,c=u>>>0<4?c+1|0:c,R=r[s+12>>2],(R|0)<=(c|0)&u>>>0>Ue[s+8>>2]|(c|0)>(R|0))break n;f=f+r[s>>2]|0,f=I[f|0]|I[f+1|0]<<8|(I[f+2|0]<<16|I[f+3|0]<<24),r[z+12>>2]=f,r[s+16>>2]=u,r[s+20>>2]=c;break i}if(T=-1,!ks(1,z+12|0,s))break n;f=r[z+12>>2]}i:{r:{s:{a:{o:{c:{if(!f)break c;if(c=r[a+8>>2],(r[c+4>>2]-r[c>>2]>>2>>>0)/3>>>0<f>>>0)break n;if(c=Ut[r[a+4>>2]+36>>1],((c<<8|c>>>8)&65535)>>>0>=258){R=0;l:{u:{for(;;){if(!ks(1,z+8|0,s)||(c=r[z+8>>2],!ks(1,z+8|0,s))||(h=c+h|0,c=r[z+8>>2],h>>>0<c>>>0))break n;y=h-c|0,m=r[a+40>>2];f:{if((m|0)!=r[a+44>>2]){r[m+4>>2]=h,r[m>>2]=y,r[a+40>>2]=m+12;break f}if(c=r[a+36>>2],u=m-c|0,m=(u|0)/12|0,A=m+1|0,A>>>0>=357913942)break u;if(N=m<<1,A=m>>>0<178956970?A>>>0>N>>>0?A:N:357913941,A>>>0>=357913942)break l;if(A=ne(A,12),N=Te(A),m=N+ne(m,12)|0,r[m+4>>2]=h,r[m>>2]=y,y=m+ne((u|0)/-12|0,12)|0,m=m+12|0,(u|0)>0&&$e(y,c,u),r[a+44>>2]=A+N,r[a+40>>2]=m,r[a+36>>2]=y,!c)break f;W(c)}if(R=R+1|0,(R|0)==(f|0))break}for(T=0,Lv(s,0,0),u=f>>>0>1?f:1;;){c=I[s+36|0],h=Ut[r[a+4>>2]+36>>1];f:{d:{if(((h<<8|h>>>8)&65535)>>>0<=513){if(!c)break f;m=0,c=r[s+32>>2],h=c>>>3|0,R=r[s+24>>2],f=h+R|0,y=r[s+28>>2];p:{if(f>>>0>=y>>>0){f=c;break p}m=I[f|0],f=c+1|0,r[s+32>>2]=f,h=f>>>3|0,m=m>>>(c&7)&1}if(y>>>0>h+R>>>0)break d;break f}if(!c||(m=0,f=r[s+32>>2],c=r[s+24>>2]+(f>>>3|0)|0,c>>>0>=Ue[s+28>>2]))break f;m=I[c|0]>>>(f&7)&1}r[s+32>>2]=f+1}if(c=r[a+36>>2]+ne(T,12)|0,D[c+8|0]=I[c+8|0]&254|m&1,T=T+1|0,(u|0)==(T|0))break}D[s+36|0]=0,c=r[s+20>>2],h=0,f=r[s+32>>2]+7|0,h=f>>>0<7?1:h,u=h>>>3|0,f=(h&7)<<29|f>>>3,h=f+r[s+16>>2]|0,c=c+u|0,r[s+16>>2]=h,r[s+20>>2]=f>>>0>h>>>0?c+1|0:c;break c}jt(),Xe()}break e}for(R=0;;){if(u=r[s+12>>2],c=r[s+20>>2],h=c,y=r[s+16>>2],A=y+4|0,c=A>>>0<4?c+1|0:c,U=r[s+8>>2],N=A,U>>>0<A>>>0&(c|0)>=(u|0)|(c|0)>(u|0)||(H=r[s>>2],A=H+y|0,Z=I[A|0]|I[A+1|0]<<8|(I[A+2|0]<<16|I[A+3|0]<<24),r[s+16>>2]=N,r[s+20>>2]=c,c=h,A=y+8|0,c=A>>>0<8?c+1|0:c,A>>>0>U>>>0&(c|0)>=(u|0)|(c|0)>(u|0))||(N=N+H|0,N=I[N|0]|I[N+1|0]<<8|(I[N+2|0]<<16|I[N+3|0]<<24),r[s+16>>2]=A,r[s+20>>2]=c,(c|0)>=(u|0)&A>>>0>=U>>>0|(c|0)>(u|0)))break n;c=I[A+H|0],u=y+9|0,h=u>>>0<9?h+1|0:h,r[s+16>>2]=u,r[s+20>>2]=h,m=c&1|m&-2,c=r[a+40>>2];l:{if((c|0)!=r[a+44>>2]){D[c+8|0]=m,r[c+4>>2]=N,r[c>>2]=Z,r[a+40>>2]=c+12;break l}if(h=r[a+36>>2],u=c-h|0,c=(u|0)/12|0,y=c+1|0,y>>>0>=357913942)break o;if(A=c<<1,y=c>>>0<178956970?y>>>0>A>>>0?y:A:357913941,y>>>0>=357913942)break e;if(A=ne(y,12),U=Te(A),c=U+ne(c,12)|0,D[c+8|0]=m,r[c+4>>2]=N,r[c>>2]=Z,y=c+ne((u|0)/-12|0,12)|0,(u|0)>0&&$e(y,h,u),r[a+44>>2]=A+U,r[a+40>>2]=c+12,r[a+36>>2]=y,!h)break l;W(h)}if(R=R+1|0,(R|0)==(f|0))break}}r[z+8>>2]=0,c=Ut[r[a+4>>2]+36>>1],c=(c<<8|c>>>8)&65535;c:{if(c>>>0<=511){if(T=-1,c=r[s+20>>2],h=r[s+16>>2],f=h+4|0,c=f>>>0<4?c+1|0:c,u=r[s+12>>2],(u|0)<=(c|0)&f>>>0>Ue[s+8>>2]|(c|0)>(u|0))break n;h=h+r[s>>2]|0,h=I[h|0]|I[h+1|0]<<8|(I[h+2|0]<<16|I[h+3|0]<<24),r[s+16>>2]=f,r[s+20>>2]=c;break c}if((c|0)!=512)break i;if(T=-1,!ks(1,z+8|0,s))break n;h=r[z+8>>2]}if(!h)break i;if(c=Ut[r[a+4>>2]+36>>1],((c<<8|c>>>8)&65535)>>>0<258)break r;for(m=0,T=0;;){if(!ks(1,z+4|0,s))break s;T=r[z+4>>2]+T|0,c=r[a+52>>2];c:{if((c|0)!=r[a+56>>2]){r[c>>2]=T,r[a+52>>2]=c+4;break c}if(u=r[a+48>>2],f=c-u|0,y=f>>2,c=y+1|0,c>>>0>=1073741824)break a;if(R=f>>1,R=f>>>0<2147483644?c>>>0>R>>>0?c:R:1073741823,R){if(R>>>0>=1073741824)break e;c=Te(R<<2)}else c=0;if(y=c+(y<<2)|0,r[y>>2]=T,(f|0)>0&&$e(c,u,f),r[a+56>>2]=c+(R<<2),r[a+52>>2]=y+4,r[a+48>>2]=c,!u)break c;W(u)}if(m=m+1|0,(h|0)==(m|0))break}break i}jt(),Xe()}jt(),Xe()}T=-1;break n}for(f=0;;){if(c=r[s+20>>2],u=r[s+16>>2],m=u+4|0,c=m>>>0<4?c+1|0:c,T=r[s+12>>2],(T|0)<=(c|0)&m>>>0>Ue[s+8>>2]|(c|0)>(T|0)){T=-1;break n}u=u+r[s>>2]|0,R=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),r[s+16>>2]=m,r[s+20>>2]=c,c=r[a+52>>2];r:{if((c|0)!=r[a+56>>2]){r[c>>2]=R,r[a+52>>2]=c+4;break r}if(m=r[a+48>>2],u=c-m|0,y=u>>2,c=y+1|0,c>>>0>=1073741824)break t;if(T=u>>1,T=u>>>0<2147483644?c>>>0>T>>>0?c:T:1073741823,T){if(T>>>0>=1073741824)break e;c=Te(T<<2)}else c=0;if(y=c+(y<<2)|0,r[y>>2]=R,(u|0)>0&&$e(c,m,u),r[a+56>>2]=c+(T<<2),r[a+52>>2]=y+4,r[a+48>>2]=c,!m)break r;W(m)}if(f=f+1|0,(h|0)==(f|0))break}}T=r[s+16>>2]}return re=z+16|0,T}jt(),Xe()}qn(1336),Xe()}function RM(a,s,c,u){var f=0,h=0,m=0,y=0,A=_e(0),T=0;e:{if(!u)break e;t:{n:switch(r[a+28>>2]-1|0){case 0:i:{if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)<=0)break i;if(s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,h=r[a>>2],f=r[h>>2],(s|0)>=(r[h+4>>2]-f|0))break e;for(h=s+f|0,s=0;;){if(D[s+u|0]=I[h|0],s=s+1|0,f=D[a+24|0],(s|0)>=(((c|0)<(f|0)?c:f)|0))break i;if(h=h+1|0,!(h>>>0<Ue[r[a>>2]+4>>2]))break}break e}if(m=1,(c|0)>(f|0))break t;break e;case 1:i:{if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)<=0)break i;if(s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,h=r[a>>2],f=r[h>>2],(s|0)>=(r[h+4>>2]-f|0))break e;for(h=s+f|0,s=0;;){if(f=D[h|0],(f|0)<0)break e;if(D[s+u|0]=f,s=s+1|0,f=D[a+24|0],(s|0)>=(((c|0)<(f|0)?c:f)|0))break i;if(h=h+1|0,!(h>>>0<Ue[r[a>>2]+4>>2]))break}break e}if(m=1,(c|0)>(f|0))break t;break e;case 2:i:{if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)<=0)break i;if(s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,h=r[a>>2],f=r[h>>2],(s|0)>=(r[h+4>>2]-f|0))break e;for(h=s+f|0,s=0;;){if(f=Ut[h>>1],(f-128&65535)>>>0<65280)break e;if(D[s+u|0]=f,s=s+1|0,f=D[a+24|0],(s|0)>=(((c|0)<(f|0)?c:f)|0))break i;if(h=h+2|0,!(h>>>0<Ue[r[a>>2]+4>>2]))break}break e}if(m=1,(c|0)>(f|0))break t;break e;case 3:i:{if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)<=0)break i;if(s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,h=r[a>>2],f=r[h>>2],(s|0)>=(r[h+4>>2]-f|0))break e;for(h=s+f|0,s=0;;){if(f=Ut[h>>1],f>>>0>127)break e;if(D[s+u|0]=f,s=s+1|0,f=D[a+24|0],(s|0)>=(((c|0)<(f|0)?c:f)|0))break i;if(h=h+2|0,!(h>>>0<Ue[r[a>>2]+4>>2]))break}break e}if(m=1,(c|0)>(f|0))break t;break e;case 4:i:{if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)<=0)break i;if(s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,h=r[a>>2],f=r[h>>2],(s|0)>=(r[h+4>>2]-f|0))break e;for(h=s+f|0,s=0;;){if(f=r[h>>2],f-128>>>0<4294967040)break e;if(D[s+u|0]=f,s=s+1|0,f=D[a+24|0],(s|0)>=(((c|0)<(f|0)?c:f)|0))break i;if(h=h+4|0,!(h>>>0<Ue[r[a>>2]+4>>2]))break}break e}if(m=1,(c|0)>(f|0))break t;break e;case 5:i:{if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)<=0)break i;if(s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,h=r[a>>2],f=r[h>>2],(s|0)>=(r[h+4>>2]-f|0))break e;for(h=s+f|0,s=0;;){if(f=r[h>>2],f>>>0>127)break e;if(D[s+u|0]=f,s=s+1|0,f=D[a+24|0],(s|0)>=(((c|0)<(f|0)?c:f)|0))break i;if(h=h+4|0,!(h>>>0<Ue[r[a>>2]+4>>2]))break}break e}if(m=1,(c|0)>(f|0))break t;break e;case 6:i:{if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)<=0)break i;if(s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,h=r[a>>2],f=r[h>>2],(s|0)>=(r[h+4>>2]-f|0))break e;for(h=s+f|0,s=0;;){if(y=r[h>>2],f=r[h+4>>2]-(y>>>0<128)|0,(f|0)==-1&y-128>>>0<4294967040|(f|0)!=-1)break e;if(D[s+u|0]=y,s=s+1|0,f=D[a+24|0],(s|0)>=(((c|0)<(f|0)?c:f)|0))break i;if(h=h+8|0,!(h>>>0<Ue[r[a>>2]+4>>2]))break}break e}if(m=1,(c|0)>(f|0))break t;break e;case 7:i:{if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)<=0)break i;if(s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,h=r[a>>2],f=r[h>>2],(s|0)>=(r[h+4>>2]-f|0))break e;for(h=s+f|0,s=0;;){if(f=r[h+4>>2],y=r[h>>2],!f&y>>>0>127|f)break e;if(D[s+u|0]=y,s=s+1|0,f=D[a+24|0],(s|0)>=(((c|0)<(f|0)?c:f)|0))break i;if(h=h+8|0,!(h>>>0<Ue[r[a>>2]+4>>2]))break}break e}if(m=1,(c|0)>(f|0))break t;break e;case 8:i:{if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)<=0)break i;if(s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,h=r[a>>2],f=r[h>>2],(s|0)>=(r[h+4>>2]-f|0))break e;for(h=s+f|0,s=0;;){y=s+u|0,A=At[h>>2];r:{if(_e(ui(A))<_e(2147483648)){f=~~A;break r}f=-2147483648}if(D[y|0]=f,s=s+1|0,f=D[a+24|0],(s|0)>=(((c|0)<(f|0)?c:f)|0))break i;if(h=h+4|0,!(h>>>0<Ue[r[a>>2]+4>>2]))break}break e}if(m=1,(c|0)>(f|0))break t;break e;case 9:i:{if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)<=0)break i;if(s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,h=r[a>>2],f=r[h>>2],(s|0)>=(r[h+4>>2]-f|0))break e;for(h=s+f|0,s=0;;){y=s+u|0,T=Zc[h>>3];r:{if(ui(T)<2147483648){f=~~T;break r}f=-2147483648}if(D[y|0]=f,s=s+1|0,f=D[a+24|0],(s|0)>=(((c|0)<(f|0)?c:f)|0))break i;if(h=h+8|0,!(h>>>0<Ue[r[a>>2]+4>>2]))break}break e}if(m=1,(c|0)>(f|0))break t;break e;case 10:break n;default:break e}n:{if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)<=0)break n;if(s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,h=r[a>>2],f=r[h>>2],(s|0)>=(r[h+4>>2]-f|0))break e;for(h=s+f|0,s=0;;){if(D[s+u|0]=I[h|0],s=s+1|0,f=D[a+24|0],(s|0)>=(((c|0)<(f|0)?c:f)|0))break n;if(h=h+1|0,!(h>>>0<Ue[r[a>>2]+4>>2]))break}break e}if(m=1,(c|0)<=(f|0))break e}Ct(u+f|0,0,c-f|0)}return m}function DM(a,s,c,u){var f=0,h=0,m=0,y=0,A=_e(0),T=0;e:{if(!u)break e;t:{n:switch(r[a+28>>2]-1|0){case 0:i:{if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)<=0)break i;if(s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,h=r[a>>2],f=r[h>>2],(s|0)>=(r[h+4>>2]-f|0))break e;for(h=s+f|0,s=0;;){if(f=D[h|0],(f|0)<0)break e;if(D[s+u|0]=f,s=s+1|0,f=D[a+24|0],(s|0)>=(((c|0)<(f|0)?c:f)|0))break i;if(h=h+1|0,!(h>>>0<Ue[r[a>>2]+4>>2]))break}break e}if(m=1,(c|0)>(f|0))break t;break e;case 1:i:{if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)<=0)break i;if(s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,h=r[a>>2],f=r[h>>2],(s|0)>=(r[h+4>>2]-f|0))break e;for(h=s+f|0,s=0;;){if(D[s+u|0]=I[h|0],s=s+1|0,f=D[a+24|0],(s|0)>=(((c|0)<(f|0)?c:f)|0))break i;if(h=h+1|0,!(h>>>0<Ue[r[a>>2]+4>>2]))break}break e}if(m=1,(c|0)>(f|0))break t;break e;case 2:i:{if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)<=0)break i;if(s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,h=r[a>>2],f=r[h>>2],(s|0)>=(r[h+4>>2]-f|0))break e;for(h=s+f|0,s=0;;){if(f=Ut[h>>1],f>>>0>255)break e;if(D[s+u|0]=f,s=s+1|0,f=D[a+24|0],(s|0)>=(((c|0)<(f|0)?c:f)|0))break i;if(h=h+2|0,!(h>>>0<Ue[r[a>>2]+4>>2]))break}break e}if(m=1,(c|0)>(f|0))break t;break e;case 3:i:{if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)<=0)break i;if(s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,h=r[a>>2],f=r[h>>2],(s|0)>=(r[h+4>>2]-f|0))break e;for(h=s+f|0,s=0;;){if(f=Ut[h>>1],f>>>0>255)break e;if(D[s+u|0]=f,s=s+1|0,f=D[a+24|0],(s|0)>=(((c|0)<(f|0)?c:f)|0))break i;if(h=h+2|0,!(h>>>0<Ue[r[a>>2]+4>>2]))break}break e}if(m=1,(c|0)>(f|0))break t;break e;case 4:i:{if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)<=0)break i;if(s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,h=r[a>>2],f=r[h>>2],(s|0)>=(r[h+4>>2]-f|0))break e;for(h=s+f|0,s=0;;){if(f=r[h>>2],f>>>0>255)break e;if(D[s+u|0]=f,s=s+1|0,f=D[a+24|0],(s|0)>=(((c|0)<(f|0)?c:f)|0))break i;if(h=h+4|0,!(h>>>0<Ue[r[a>>2]+4>>2]))break}break e}if(m=1,(c|0)>(f|0))break t;break e;case 5:i:{if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)<=0)break i;if(s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,h=r[a>>2],f=r[h>>2],(s|0)>=(r[h+4>>2]-f|0))break e;for(h=s+f|0,s=0;;){if(f=r[h>>2],f>>>0>255)break e;if(D[s+u|0]=f,s=s+1|0,f=D[a+24|0],(s|0)>=(((c|0)<(f|0)?c:f)|0))break i;if(h=h+4|0,!(h>>>0<Ue[r[a>>2]+4>>2]))break}break e}if(m=1,(c|0)>(f|0))break t;break e;case 6:i:{if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)<=0)break i;if(s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,h=r[a>>2],f=r[h>>2],(s|0)>=(r[h+4>>2]-f|0))break e;for(h=s+f|0,s=0;;){if(f=r[h+4>>2],y=r[h>>2],!f&y>>>0>255|f)break e;if(D[s+u|0]=y,s=s+1|0,f=D[a+24|0],(s|0)>=(((c|0)<(f|0)?c:f)|0))break i;if(h=h+8|0,!(h>>>0<Ue[r[a>>2]+4>>2]))break}break e}if(m=1,(c|0)>(f|0))break t;break e;case 7:i:{if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)<=0)break i;if(s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,h=r[a>>2],f=r[h>>2],(s|0)>=(r[h+4>>2]-f|0))break e;for(h=s+f|0,s=0;;){if(f=r[h+4>>2],y=r[h>>2],!f&y>>>0>255|f)break e;if(D[s+u|0]=y,s=s+1|0,f=D[a+24|0],(s|0)>=(((c|0)<(f|0)?c:f)|0))break i;if(h=h+8|0,!(h>>>0<Ue[r[a>>2]+4>>2]))break}break e}if(m=1,(c|0)>(f|0))break t;break e;case 8:i:{if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)<=0)break i;if(s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,h=r[a>>2],f=r[h>>2],(s|0)>=(r[h+4>>2]-f|0))break e;for(h=s+f|0,s=0;;){y=s+u|0,A=At[h>>2];r:{if(A<_e(4294967296)&A>=_e(0)){f=~~A>>>0;break r}f=0}if(D[y|0]=f,s=s+1|0,f=D[a+24|0],(s|0)>=(((c|0)<(f|0)?c:f)|0))break i;if(h=h+4|0,!(h>>>0<Ue[r[a>>2]+4>>2]))break}break e}if(m=1,(c|0)>(f|0))break t;break e;case 9:i:{if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)<=0)break i;if(s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,h=r[a>>2],f=r[h>>2],(s|0)>=(r[h+4>>2]-f|0))break e;for(h=s+f|0,s=0;;){y=s+u|0,T=Zc[h>>3];r:{if(T<4294967296&T>=0){f=~~T>>>0;break r}f=0}if(D[y|0]=f,s=s+1|0,f=D[a+24|0],(s|0)>=(((c|0)<(f|0)?c:f)|0))break i;if(h=h+8|0,!(h>>>0<Ue[r[a>>2]+4>>2]))break}break e}if(m=1,(c|0)>(f|0))break t;break e;case 10:break n;default:break e}n:{if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)<=0)break n;if(s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,h=r[a>>2],f=r[h>>2],(s|0)>=(r[h+4>>2]-f|0))break e;for(h=s+f|0,s=0;;){if(D[s+u|0]=I[h|0],s=s+1|0,f=D[a+24|0],(s|0)>=(((c|0)<(f|0)?c:f)|0))break n;if(h=h+1|0,!(h>>>0<Ue[r[a>>2]+4>>2]))break}break e}if(m=1,(c|0)<=(f|0))break e}Ct(u+f|0,0,c-f|0)}return m}function Dee(a,s){var c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0;e:{t:{n:{i:{r:{if(r[a+92>>2]==r[a+88>>2])break r;c=r[a+52>>2];s:{if((c|0)!=r[a+56>>2]){r[c>>2]=s,r[a+52>>2]=c+4;break s}if(u=r[a+48>>2],A=c-u|0,h=A>>2,f=h+1|0,f>>>0>=1073741824)break t;if(c=A>>1,f=A>>>0<2147483644?c>>>0<f>>>0?f:c:1073741823,f){if(f>>>0>=1073741824)break e;c=Te(f<<2)}else c=0;if(h=c+(h<<2)|0,r[h>>2]=s,(A|0)>0&&$e(c,u,A),r[a+56>>2]=c+(f<<2),r[a+52>>2]=h+4,r[a+48>>2]=c,!u)break s;W(u)}r[a+84>>2]=0,h=-1,c=-1;s:{if((s|0)==-1)break s;f=r[a+4>>2],c=s+1|0,c=(c>>>0)%3|0?c:s-2|0,(c|0)!=-1&&(h=r[r[f>>2]+(c<<2)>>2]);a:{if((s>>>0)%3|0){u=s-1|0;break a}if(u=s+2|0,c=-1,(u|0)==-1)break s}c=r[r[f>>2]+(u<<2)>>2]}if(y=c>>>3&536870908,f=r[a+36>>2],m=f+(h>>>3&536870908)|0,A=r[m>>2],u=1<<h,A&u||(r[m>>2]=u|A,m=a+8|0,(s|0)!=-1?(f=s+1|0,u=(f>>>0)%3|0?f:s-2|0):u=-1,jf(m,h,u),f=r[a+36>>2]),u=f+y|0,f=r[u>>2],h=1<<c,!(f&h)){r[u>>2]=f|h,u=a+8|0,h=-1;s:{if((s|0)==-1||(h=s-1|0,(s>>>0)%3|0))break s;h=s+2|0}jf(u,c,h)}if(h=-1,h=(s|0)!=-1?r[r[r[a+4>>2]>>2]+(s<<2)>>2]:h,u=r[a+36>>2]+(h>>>3&536870908)|0,f=r[u>>2],c=1<<h,f&c||(r[u>>2]=c|f,jf(a+8|0,h,s)),u=r[a+84>>2],(u|0)>2)break r;for(;;){if(h=ne(u,12)+a|0,s=r[h+52>>2],(s|0)==r[h+48>>2]){if(u=u+1|0,(u|0)!=3)continue;break r}if(c=s-4|0,s=r[c>>2],r[h+52>>2]=c,r[a+84>>2]=u,(s|0)==-1)break r;h=r[a+24>>2],c=(s>>>0)/3|0;s:{if(r[h+(c>>>3&268435452)>>2]>>>c&1)break s;a:{for(;;){R=(s>>>0)/3|0,c=(R>>>3&268435452)+h|0,r[c>>2]=r[c>>2]|1<<R,h=-1;o:{c:{l:{u:{f:{d:{p:{m:{if(h=(s|0)!=-1?r[r[r[a+4>>2]>>2]+(s<<2)>>2]:h,u=r[a+36>>2]+(h>>>3&536870908)|0,f=r[u>>2],c=1<<h,!(f&c)){r[u>>2]=c|f,A=r[(r[r[a+16>>2]+96>>2]+ne(R,12)|0)+((s>>>0)%3<<2)>>2],T=r[r[a+20>>2]+4>>2],c=r[T+4>>2];y:{if((c|0)!=r[T+8>>2]){r[c>>2]=A,r[T+4>>2]=c+4;break y}if(m=r[T>>2],y=c-m|0,f=y>>2,u=f+1|0,u>>>0>=1073741824)break m;if(c=y>>1,u=y>>>0<2147483644?c>>>0<u>>>0?u:c:1073741823,u){if(u>>>0>=1073741824)break e;c=Te(u<<2)}else c=0;if(f=c+(f<<2)|0,r[f>>2]=A,(y|0)>0&&$e(c,m,y),r[T+8>>2]=c+(u<<2),r[T+4>>2]=f+4,r[T>>2]=c,!m)break y;W(m)}y=r[a+12>>2],c=r[y+4>>2];y:{if((c|0)!=r[y+8>>2]){r[c>>2]=s,r[y+4>>2]=c+4;break y}if(A=r[y>>2],m=c-A|0,f=m>>2,u=f+1|0,u>>>0>=1073741824)break p;if(c=m>>1,u=m>>>0<2147483644?c>>>0<u>>>0?u:c:1073741823,u){if(u>>>0>=1073741824)break e;c=Te(u<<2)}else c=0;if(f=c+(f<<2)|0,r[f>>2]=s,(m|0)>0&&$e(c,A,m),r[y+8>>2]=c+(u<<2),r[y+4>>2]=f+4,r[y>>2]=c,!A)break y;W(A)}c=r[a+12>>2],r[r[c+12>>2]+(h<<2)>>2]=r[c+24>>2],r[c+24>>2]=r[c+24>>2]+1}if((s|0)==-1)break a;y=r[a+4>>2],h=-1,c=s+1|0,c=(c>>>0)%3|0?c:s-2|0,(c|0)!=-1&&(h=r[r[y+12>>2]+(c<<2)>>2]);y:{w:{if((ne(R,3)|0)!=(s|0)){f=s-1|0;break w}if(f=s+2|0,s=-1,(f|0)==-1)break y}s=r[r[y+12>>2]+(f<<2)>>2]}if(m=(s|0)==-1,A=(s>>>0)/3|0,f=(h>>>0)/3|0,c=(h|0)==-1,!c){if(c=c?-1:f,c=r[r[a+24>>2]+(c>>>3&536870908)>>2]&1<<c,m)break d;u=(c|0)!=0;break f}if(u=1,!m)break f;break a}jt(),Xe()}jt(),Xe()}if(!c)break u;break a}c=m?-1:A;f:{if(r[r[a+24>>2]+(c>>>3&536870908)>>2]>>>c&1)break f;if(f=0,c=r[r[y>>2]+(s<<2)>>2],r[r[a+36>>2]+(c>>>3&536870908)>>2]>>>c&1||(c=r[a+88>>2]+(c<<2)|0,f=r[c>>2],r[c>>2]=f+1,f=(f|0)<=0?2:1),r[a+84>>2]>=(f|0)&&u)break c;T=ne(f,12)+a|0,c=r[T+52>>2];d:{if((c|0)!=r[T+56>>2]){r[c>>2]=s,r[T+52>>2]=c+4;break d}if(y=r[T+48>>2],R=c-y|0,A=R>>2,m=A+1|0,m>>>0>=1073741824)break i;if(c=R>>1,m=R>>>0<2147483644?c>>>0<m>>>0?m:c:1073741823,m){if(m>>>0>=1073741824)break e;c=Te(m<<2)}else c=0;if(A=c+(A<<2)|0,r[A>>2]=s,(R|0)>0&&$e(c,y,R),r[T+48>>2]=c,r[T+52>>2]=A+4,r[T+56>>2]=c+(m<<2),!y)break d;W(y)}if(r[a+84>>2]<=(f|0))break f;r[a+84>>2]=f}if(u)break a;if(s=-1,(h|0)==-1)break l}s=r[r[r[a+4>>2]>>2]+(h<<2)>>2]}if(f=0,r[r[a+36>>2]+(s>>>3&536870908)>>2]>>>s&1||(s=r[a+88>>2]+(s<<2)|0,c=r[s>>2],r[s>>2]=c+1,f=(c|0)<=0?2:1),r[a+84>>2]<(f|0))break o;s=h}h=r[a+24>>2];continue}break}y=ne(f,12)+a|0,s=r[y+52>>2];o:{if((s|0)!=r[y+56>>2]){r[s>>2]=h,r[y+52>>2]=s+4;break o}if(A=r[y+48>>2],m=s-A|0,c=m>>2,u=c+1|0,u>>>0>=1073741824)break n;if(s=m>>1,u=m>>>0<2147483644?s>>>0<u>>>0?u:s:1073741823,u){if(u>>>0>=1073741824)break e;s=Te(u<<2)}else s=0;if(c=s+(c<<2)|0,r[c>>2]=h,(m|0)>0&&$e(s,A,m),r[y+48>>2]=s,r[y+52>>2]=c+4,r[y+56>>2]=s+(u<<2),!A)break o;W(A)}if(u=r[a+84>>2],(f|0)>=(u|0))break s;r[a+84>>2]=f,u=f;break s}u=r[a+84>>2]}if(!((u|0)<3))break}}return 1}jt(),Xe()}jt(),Xe()}jt(),Xe()}qn(1336),Xe()}function wB(a,s){var c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0,ie=0,ge=0,we=0,Me=0;y=re-48|0,re=y,c=r[r[a+4>>2]+44>>2],u=r[a+8>>2],h=r[u>>2],u=r[u+4>>2],r[y+40>>2]=0,r[y+32>>2]=0,r[y+36>>2]=0,u=(u-h>>2>>>0)/3|0,T=r[c+96>>2],h=(r[c+100>>2]-T|0)/12|0;e:{if(u>>>0>h>>>0){PB(c+96|0,u-h|0,y+32|0);break e}if(u>>>0>=h>>>0)break e;r[c+100>>2]=T+ne(u,12)}e:{if(r[a+216>>2]==r[a+220>>2]){if(R=r[a+4>>2],A=r[R+44>>2],u=r[A+100>>2],(u|0)!=r[A+96>>2])for(c=0;;){m=r[a+8>>2],f=ne(c,3);t:{n:{if((f|0)==-1){N=r[(r[m>>2]+(f<<2)|0)+4>>2],T=-1,f=1;break n}if(N=-1,T=r[r[m>>2]+(f<<2)>>2],h=f+1|0,(h|0)==-1){f=0;break n}if(N=r[r[m>>2]+(h<<2)>>2],f=f+2|0,h=-1,(f|0)==-1)break t}h=r[r[m>>2]+(f<<2)>>2]}if(m=h,h=c+1|0,f=u,u=r[A+96>>2],f=(f-u|0)/12|0,f>>>0<=c>>>0&&(r[y+40>>2]=0,r[y+32>>2]=0,r[y+36>>2]=0,PB(A+96|0,h-f|0,y+32|0),R=r[a+4>>2],u=r[A+96>>2]),c=ne(c,12)+u|0,r[c+8>>2]=m,r[c+4>>2]=N,r[c>>2]=T,c=h,A=r[R+44>>2],u=r[A+100>>2],!(c>>>0<(u-r[A+96>>2]|0)/12>>>0))break}r[r[R+4>>2]+80>>2]=s,c=1;break e}r[y+24>>2]=0,r[y+16>>2]=0,r[y+20>>2]=0,R=r[a+8>>2],s=r[R>>2],c=r[R+4>>2],r[y+8>>2]=0,r[y>>2]=0,r[y+4>>2]=0;t:{n:{i:{r:{s:{a:{o:{if(s=c-s|0,s){if((s|0)<0)break o;U=Te(s),r[y>>2]=U,s=s>>2<<2,c=s+U|0,r[y+8>>2]=c,Ct(U,0,s),r[y+4>>2]=c}if(c=r[R+24>>2],(r[R+28>>2]-c|0)<=0){u=0,s=0;break n}for(u=0,h=0,s=0;;){T=r[(H<<2)+c>>2];c:{if((T|0)==-1)break c;l:{if(r[r[a+120>>2]+(H>>>3&536870908)>>2]>>>H&1||(ie=r[a+216>>2],c=r[a+220>>2]-ie|0,!c))break l;for(c=(c|0)/144|0,ge=c>>>0>1?c:1,N=0,c=(T>>>0)%3|0,m=T+2|0,we=(c|0)!=0|(m|0)!=-1,Me=c?T-1|0:m;;){A=T<<2,f=ie+ne(N,144)|0,c=r[A+r[r[f+68>>2]>>2]>>2];u:{if(!(r[r[f+16>>2]+(c>>>3&536870908)>>2]>>>c&1))break u;c=-1;f:{if(!we||(m=r[r[R+12>>2]+(Me<<2)>>2],c=-1,(m|0)==-1)||(c=m-1|0,(m>>>0)%3|0))break f;c=m+2|0}if((T|0)==(c|0))break u;for(f=r[f+32>>2],m=r[f+A>>2];;){if(z=0,(c|0)==-1)break t;if(r[f+(c<<2)>>2]!=(m|0)){T=c;break l}f:{d:{if((c>>>0)%3|0){A=c-1|0;break d}if(A=c+2|0,z=-1,(A|0)==-1)break f}if(c=r[r[R+12>>2]+(A<<2)>>2],z=-1,(c|0)==-1||(z=c-1|0,(c>>>0)%3|0))break f;z=c+2|0}if(c=z,(T|0)==(c|0))break}}if(N=N+1|0,(ge|0)==(N|0))break}}c=s-h|0,m=c>>2,r[(T<<2)+U>>2]=m;l:{if(s>>>0<Z>>>0){r[s>>2]=T,s=s+4|0,r[y+20>>2]=s;break l}if(s=m+1|0,s>>>0>=1073741824)break a;if(u=Z-h|0,f=u>>1,s=u>>>0<2147483644?s>>>0>f>>>0?s:f:1073741823,s){if(s>>>0>=1073741824)break s;u=Te(s<<2)}else u=0;m=u+(m<<2)|0,r[m>>2]=T,Z=(s<<2)+u|0,s=m+4|0,(c|0)>0&&$e(u,h,c),r[y+24>>2]=Z,r[y+20>>2]=s,r[y+16>>2]=u,h&&(W(h),R=r[a+8>>2]),h=u}if((T|0)==-1)break c;l:{if((T>>>0)%3|0){c=T-1|0;break l}if(c=T+2|0,(c|0)==-1)break c}if(c=r[r[R+12>>2]+(c<<2)>>2],(c|0)==-1||(c=c+((c>>>0)%3|0?-1:2)|0,(c|0)==-1)||(f=T,(c|0)==(f|0)))break c;for(;;){m=c;l:{u:{if(A=r[a+216>>2],c=r[a+220>>2]-A|0,!c)break u;for(c=(c|0)/144|0,N=c>>>0>1?c:1,c=0;;){if(ie=r[(A+ne(c,144)|0)+32>>2],ge=m<<2,r[ie+ge>>2]==r[ie+(f<<2)>>2]){if(c=c+1|0,(N|0)!=(c|0))continue;break u}break}if(c=s-u|0,f=c>>2,r[U+ge>>2]=f,s>>>0<Z>>>0){r[s>>2]=m,s=s+4|0,r[y+20>>2]=s,h=u;break l}if(s=f+1|0,s>>>0>=1073741824)break r;if(h=Z-u|0,A=h>>1,s=h>>>0<2147483644?s>>>0>A>>>0?s:A:1073741823,s){if(s>>>0>=1073741824)break i;h=Te(s<<2)}else h=0;if(f=h+(f<<2)|0,r[f>>2]=m,Z=(s<<2)+h|0,s=f+4|0,(c|0)>0&&$e(h,u,c),r[y+24>>2]=Z,r[y+20>>2]=s,r[y+16>>2]=h,!u){u=h;break l}W(u),R=r[a+8>>2],u=h;break l}r[(m<<2)+U>>2]=r[(f<<2)+U>>2]}if((m|0)==-1)break c;l:{if((m>>>0)%3|0){c=m-1|0;break l}if(c=m+2|0,(c|0)==-1)break c}if(c=r[r[R+12>>2]+(c<<2)>>2],(c|0)==-1||(c=c+((c>>>0)%3|0?-1:2)|0,(c|0)==-1))break c;if(f=m,(c|0)==(T|0))break}}if(H=H+1|0,c=r[R+24>>2],!((H|0)<r[R+28>>2]-c>>2))break}break n}jt(),Xe()}jt(),Xe()}qn(1336),Xe()}jt(),Xe()}qn(1336),Xe()}if(H=r[a+4>>2],A=r[H+44>>2],N=r[A+100>>2],(N|0)!=r[A+96>>2])for(c=0;h=c+1|0,m=ne(c,12),T=m+U|0,f=r[T+8>>2],R=r[T+4>>2],T=r[T>>2],z=c,c=r[A+96>>2],N=(N-c|0)/12|0,z>>>0>=N>>>0&&(r[y+40>>2]=0,r[y+32>>2]=0,r[y+36>>2]=0,PB(A+96|0,h-N|0,y+32|0),H=r[a+4>>2],c=r[A+96>>2]),c=c+m|0,r[c+8>>2]=f,r[c+4>>2]=R,r[c>>2]=T,c=h,A=r[H+44>>2],N=r[A+100>>2],c>>>0<(N-r[A+96>>2]|0)/12>>>0;);r[r[H+4>>2]+80>>2]=s-u>>2,z=1}if(c=z,U&&W(U),!u)break e;r[y+20>>2]=u,W(u)}return re=y+48|0,c}function Hu(a,s,c,u){var f=0,h=0,m=0,y=0,A=_e(0),T=0,R=0;e:{if(!u)break e;t:{n:switch(r[a+28>>2]-1|0){case 0:if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],m=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=m+s|0,y=r[f+4>>2];;){if(s>>>0>=y>>>0)break e;if(f=(h<<3)+u|0,m=D[s|0],r[f>>2]=m,r[f+4>>2]=m>>31,s=s+1|0,h=h+1|0,f=D[a+24|0],!((h|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break t;break e;case 1:if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],m=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=m+s|0,y=r[f+4>>2];;){if(s>>>0>=y>>>0)break e;if(f=(h<<3)+u|0,r[f>>2]=I[s|0],r[f+4>>2]=0,s=s+1|0,h=h+1|0,f=D[a+24|0],!((h|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break t;break e;case 2:if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],m=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=m+s|0,y=r[f+4>>2];;){if(s>>>0>=y>>>0)break e;if(f=(h<<3)+u|0,m=zt[s>>1],r[f>>2]=m,r[f+4>>2]=m>>31,s=s+2|0,h=h+1|0,f=D[a+24|0],!((h|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break t;break e;case 3:if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],m=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=m+s|0,y=r[f+4>>2];;){if(s>>>0>=y>>>0)break e;if(f=(h<<3)+u|0,r[f>>2]=Ut[s>>1],r[f+4>>2]=0,s=s+2|0,h=h+1|0,f=D[a+24|0],!((h|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break t;break e;case 4:if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],m=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=m+s|0,y=r[f+4>>2];;){if(s>>>0>=y>>>0)break e;if(f=(h<<3)+u|0,m=r[s>>2],r[f>>2]=m,r[f+4>>2]=m>>31,s=s+4|0,h=h+1|0,f=D[a+24|0],!((h|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break t;break e;case 5:if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],m=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=m+s|0,y=r[f+4>>2];;){if(s>>>0>=y>>>0)break e;if(f=(h<<3)+u|0,r[f>>2]=r[s>>2],r[f+4>>2]=0,s=s+4|0,h=h+1|0,f=D[a+24|0],!((h|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break t;break e;case 6:if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],m=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=m+s|0,y=r[f+4>>2];;){if(s>>>0>=y>>>0)break e;if(m=r[s+4>>2],f=(h<<3)+u|0,r[f>>2]=r[s>>2],r[f+4>>2]=m,s=s+8|0,h=h+1|0,f=D[a+24|0],!((h|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break t;break e;case 7:if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],m=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=m+s|0,y=r[f+4>>2];;){if(s>>>0>=y>>>0||(f=r[s>>2],m=r[s+4>>2],(m|0)<0))break e;if(R=(h<<3)+u|0,r[R>>2]=f,r[R+4>>2]=m,s=s+8|0,h=h+1|0,f=D[a+24|0],!((h|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break t;break e;case 8:if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],m=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=m+s|0,R=r[f+4>>2];;){if(s>>>0>=R>>>0)break e;f=(h<<3)+u|0,A=At[s>>2];i:{if(_e(ui(A))<_e(9223372036854776e3)){m=_e(ui(A))>=_e(1)?~~(A>_e(0)?_e(gee(_e(Oo(_e(A*_e(23283064365386963e-26)))),_e(4294967296))):_e(PM(_e(_e(A-_e(~~A>>>0>>>0))*_e(23283064365386963e-26)))))>>>0:0,y=~~A>>>0;break i}m=-2147483648,y=0}if(r[f>>2]=y,r[f+4>>2]=m,s=s+4|0,h=h+1|0,f=D[a+24|0],!((h|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break t;break e;case 9:if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],m=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=m+s|0,R=r[f+4>>2];;){if(s>>>0>=R>>>0)break e;f=(h<<3)+u|0,T=Zc[s>>3];i:{if(ui(T)<9223372036854776e3){m=ui(T)>=1?~~(T>0?gee(Oo(T*23283064365386963e-26),4294967295):PM((T-+(~~T>>>0>>>0))*23283064365386963e-26))>>>0:0,y=~~T>>>0;break i}m=-2147483648,y=0}if(r[f>>2]=y,r[f+4>>2]=m,s=s+8|0,h=h+1|0,f=D[a+24|0],!((h|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break t;break e;case 10:break n;default:break e}if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],m=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=m+s|0,y=r[f+4>>2];;){if(s>>>0>=y>>>0)break e;if(f=(h<<3)+u|0,r[f>>2]=I[s|0],r[f+4>>2]=0,s=s+1|0,h=h+1|0,f=D[a+24|0],!((h|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)<=(f|0))break e}Ct((f<<3)+u|0,0,c-f<<3)}}function kv(a,s,c){a=a|0,s=s|0,c=c|0;var u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0,ie=0,ge=0,we=0,Me=0,Ie=0,We=0,ut=0,vt=0;h=re-96|0,re=h,f=r[a+16>>2],D[h+92|0]=1,r[h+88>>2]=s,r[h+84>>2]=s,r[h+80>>2]=f,z=r[a+20>>2],u=r[z>>2];e:{t:{if(f=r[r[f+28>>2]+(s<<2)>>2],f>>>0<r[z+4>>2]-u>>2>>>0){if(u=r[r[a+8>>2]+(r[u+(f<<2)>>2]<<2)>>2],f=r[a+4>>2],I[f+84|0]||(u=r[r[f+68>>2]+(u<<2)>>2]),r[h+72>>2]=0,r[h+76>>2]=0,z=h- -64|0,r[z>>2]=0,r[z+4>>2]=0,r[h+56>>2]=0,r[h+60>>2]=0,Hu(f,u,D[f+24|0],h+56|0),f=s+1|0,u=(f>>>0)%3|0,s>>>0<=f>>>0)for(z=u?f:s-2|0,y=((s>>>0)%3|0?-1:2)+s|0;;){u=z,f=y;n:{if(!r[a+28>>2]||(f=s+1|0,u=(f>>>0)%3|0?f:s-2|0,f=s-1|0,(s>>>0)%3|0))break n;f=s+2|0}if(R=r[a+20>>2],s=r[R>>2],u=r[r[r[a+16>>2]+28>>2]+(u<<2)>>2],u>>>0>=r[R+4>>2]-s>>2>>>0)break t;if(u=r[r[a+8>>2]+(r[s+(u<<2)>>2]<<2)>>2],s=r[a+4>>2],I[s+84|0]||(u=r[r[s+68>>2]+(u<<2)>>2]),r[h+48>>2]=0,r[h+52>>2]=0,r[h+40>>2]=0,r[h+44>>2]=0,r[h+32>>2]=0,r[h+36>>2]=0,Hu(s,u,D[s+24|0],h+32|0),u=r[a+20>>2],s=r[u>>2],f=r[r[r[a+16>>2]+28>>2]+(f<<2)>>2],f>>>0>=r[u+4>>2]-s>>2>>>0)break e;u=r[r[a+8>>2]+(r[s+(f<<2)>>2]<<2)>>2],s=r[a+4>>2],I[s+84|0]||(u=r[r[s+68>>2]+(u<<2)>>2]),r[h+24>>2]=0,r[h+28>>2]=0,r[h+16>>2]=0,r[h+20>>2]=0,r[h+8>>2]=0,r[h+12>>2]=0,Hu(s,u,D[s+24|0],h+8|0),f=r[h+8>>2],s=r[h+56>>2],u=f-s|0,R=r[h+60>>2],U=r[h+12>>2]-(R+(s>>>0>f>>>0)|0)|0,A=r[h+40>>2],f=r[h+64>>2],we=A-f|0,Me=r[h+68>>2],A=r[h+44>>2]-(Me+(f>>>0>A>>>0)|0)|0,Ie=rt(u,U,we,A),We=T-Ie|0,m=m-(nn+(T>>>0<Ie>>>0)|0)|0,ut=We,T=r[h+16>>2],Ie=T-f|0,Me=r[h+20>>2]-((f>>>0>T>>>0)+Me|0)|0,T=r[h+32>>2],We=T-s|0,R=r[h+36>>2]-((s>>>0>T>>>0)+R|0)|0,f=rt(Ie,Me,We,R),T=ut+f|0,s=nn+m|0,s=f>>>0>T>>>0?s+1|0:s,m=s,ut=H,Z=U,s=r[h+48>>2],f=r[h+72>>2],U=s-f|0,H=r[h+76>>2],vt=r[h+52>>2]-(H+(s>>>0<f>>>0)|0)|0,Z=rt(u,Z,U,vt),u=ut+Z|0,s=nn+N|0,s=u>>>0<Z>>>0?s+1|0:s,N=r[h+24>>2],Z=N-f|0,f=r[h+28>>2]-((f>>>0>N>>>0)+H|0)|0,N=rt(Z,f,We,R),H=u-N|0,N=s-(nn+(u>>>0<N>>>0)|0)|0,s=rt(Ie,Me,U,vt),u=ie-s|0,s=ge-(nn+(s>>>0>ie>>>0)|0)|0,ge=rt(Z,f,we,A),ie=ge+u|0,s=nn+s|0,s=ie>>>0<ge>>>0?s+1|0:s,ge=s,s=r[h+88>>2],f=r[h+80>>2];n:{if(I[h+92|0]){i:{r:{s:{a:{if((s|0)==-1||(u=s+1|0,s=(u>>>0)%3|0?u:s-2|0,(s|0)==-1|r[r[f>>2]+(s>>>3&536870908)>>2]>>>s&1))break a;if(s=r[r[r[f+64>>2]+12>>2]+(s<<2)>>2],(s|0)!=-1)break s}r[h+88>>2]=-1;break r}if(u=s+1|0,s=(u>>>0)%3|0?u:s-2|0,r[h+88>>2]=s,(s|0)!=-1)break i}s=r[h+84>>2],u=-1;r:{if((s|0)==-1)break r;s:{if((s>>>0)%3|0){s=s-1|0;break s}if(s=s+2|0,u=-1,(s|0)==-1)break r}if(u=-1,r[r[f>>2]+(s>>>3&536870908)>>2]>>>s&1||(s=r[r[r[f+64>>2]+12>>2]+(s<<2)>>2],u=-1,(s|0)==-1)||(u=s-1|0,(s>>>0)%3|0))break r;u=s+2|0}D[h+92|0]=0,r[h+88>>2]=u;break n}if((s|0)!=r[h+84>>2])break n;r[h+88>>2]=-1;break n}u=-1;i:{if((s|0)==-1)break i;r:{if((s>>>0)%3|0){s=s-1|0;break r}if(s=s+2|0,u=-1,(s|0)==-1)break i}if(u=-1,r[r[f>>2]+(s>>>3&536870908)>>2]>>>s&1||(s=r[r[r[f+64>>2]+12>>2]+(s<<2)>>2],u=-1,(s|0)==-1)||(u=s-1|0,(s>>>0)%3|0))break i;u=s+2|0}r[h+88>>2]=u}if(s=r[h+88>>2],(s|0)==-1)break}s=ge>>31,u=s+ie|0,f=s,s=s+ge|0,R=u^f,y=f^(u>>>0<f>>>0?s+1|0:s),U=-1,u=2147483647,s=N>>31,A=s,f=s+H|0,s=s+N|0,s=f>>>0<A>>>0?s+1|0:s,f=f^A,s=s^A,A=s,we=f^-1,s=s^2147483647,z=m;n:{i:{if(!r[a+28>>2]){if((s|0)==(y|0)&R>>>0>we>>>0|s>>>0<y>>>0||(s=y+A|0,a=f+R|0,s=a>>>0<f>>>0?s+1|0:s,f=a,a=s,s=m>>31,u=s+T|0,y=m,m=s,s=y+s|0,s=u>>>0<m>>>0?s+1|0:s,y=u^m,u=y+f|0,m=s^m,s=u,m=m^2147483647,a=(m|0)==(a|0)&(y^-1)>>>0<f>>>0|a>>>0>m>>>0,m=!(a&0),a=a?-1:s,m&(a|0)<=536870912|(a|0)<536870912))break n;s=0,a=a>>>29|0;break i}r:{if((s|0)==(y|0)&R>>>0>we>>>0|s>>>0<y>>>0||(s=y+A|0,a=f+R|0,s=a>>>0<f>>>0?s+1|0:s,f=s,y=m,s=m>>31,m=s+T|0,A=y,y=s,s=A+s|0,s=m>>>0<y>>>0?s+1|0:s,m=m^y,s=s^y,y=s^2147483647,(y|0)==(f|0)&(m^-1)>>>0<a>>>0|f>>>0>y>>>0))break r;if(s=s+f|0,a=a+m|0,s=a>>>0<m>>>0?s+1|0:s,U=a,u=s,!s&a>>>0<536870913)break n}s=u>>>29|0,a=(u&536870911)<<3|U>>>29}T=ss(T,z,a,s),H=ss(H,N,a,s),ie=ss(ie,ge,a,s)}r[c+8>>2]=T,r[c+4>>2]=H,r[c>>2]=ie,re=h+96|0;return}ps(),Xe()}ps(),Xe()}ps(),Xe()}function Oee(a,s,c){var u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0,ie=0,ge=0,we=0,Me=0;h=re+-64|0,re=h,r[h+56>>2]=0,r[h+48>>2]=0,r[h+52>>2]=0,r[h+40>>2]=0,r[h+44>>2]=0,r[h+32>>2]=0,r[h+36>>2]=0,r[h+24>>2]=0,r[h+28>>2]=0,r[h+16>>2]=0,r[h+20>>2]=0,r[h+8>>2]=0,r[h+12>>2]=0,m=h+8|0,u=Ut[s+38>>1];e:{t:{if(!u)break t;n:{if(u>>>0<=511){if(f=r[s+12>>2],u=r[s+20>>2],y=r[s+16>>2],A=y+4|0,u=A>>>0<4?u+1|0:u,A>>>0>Ue[s+8>>2]&(u|0)>=(f|0)|(u|0)>(f|0))break t;u=y+r[s>>2]|0,R=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),r[m+12>>2]=R,u=r[s+20>>2],f=r[s+16>>2]+4|0,u=f>>>0<4?u+1|0:u,r[s+16>>2]=f,r[s+20>>2]=u;break n}if(!Np(1,m+12|0,s))break t;R=r[m+12>>2]}f=r[m>>2],u=r[m+4>>2]-f>>2;n:{if(u>>>0<R>>>0){Xr(m,R-u|0),R=r[m+12>>2];break n}if(u>>>0<=R>>>0)break n;r[m+4>>2]=f+(R<<2)}if(u=1,!R)break e;for(ie=r[s+8>>2],z=r[s+12>>2],Z=r[m>>2],y=0;;){if(f=r[s+20>>2],A=r[s+16>>2],u=0,(z|0)<=(f|0)&ie>>>0<=A>>>0|(f|0)>(z|0))break e;we=r[s>>2],U=I[we+A|0],u=f,f=A+1|0,u=f?u:u+1|0,A=f,r[s+16>>2]=f,r[s+20>>2]=u,f=U>>>2|0,T=0;n:{i:{r:{s:switch(Me=U&3,Me|0){case 0:break i;case 3:break s;default:break r}if(f=f+y|0,u=0,f>>>0>=R>>>0)break e;Ct(Z+(y<<2)|0,0,(U&252)+4|0),y=f;break n}for(;;){if((u|0)>=(z|0)&A>>>0>=ie>>>0|(u|0)>(z|0))break t;if(R=I[A+we|0],A=A+1|0,u=A?u:u+1|0,r[s+16>>2]=A,r[s+20>>2]=u,f=R<<(T<<3|6)|f,T=T+1|0,(Me|0)==(T|0))break}}r[Z+(y<<2)>>2]=f}if(R=r[m+12>>2],y=y+1|0,!(R>>>0>y>>>0))break}A=m+16|0,ie=r[m>>2],f=r[m+16>>2],u=r[m+20>>2]-f|0;n:{if(u>>>0<=4194303){Xr(A,1048576-(u>>>2|0)|0);break n}if((u|0)==4194304)break n;r[m+20>>2]=f+4194304}u=m+28|0,y=r[u>>2],f=r[m+32>>2]-y>>3;n:{if(f>>>0<R>>>0){Xm(u,R-f|0),y=r[u>>2];break n}if(f>>>0>R>>>0&&(r[m+32>>2]=(R<<3)+y),!R)break t}for(T=0,m=0;;){if(u=(T<<2)+ie|0,z=r[u>>2],U=(T<<3)+y|0,f=m,r[U+4>>2]=f,r[U>>2]=z,u=r[u>>2],m=u+f|0,m>>>0>1048576)break t;n:{if(f>>>0>=m>>>0)break n;if(z=r[A>>2],U=0,Z=u&7,Z)for(;r[z+(f<<2)>>2]=T,f=f+1|0,U=U+1|0,(Z|0)!=(U|0););if(u-1>>>0<=6)break n;for(;u=z+(f<<2)|0,r[u>>2]=T,r[u+28>>2]=T,r[u+24>>2]=T,r[u+20>>2]=T,r[u+16>>2]=T,r[u+12>>2]=T,r[u+8>>2]=T,r[u+4>>2]=T,f=f+8|0,(m|0)!=(f|0););}if(T=T+1|0,(R|0)==(T|0))break}N=(m|0)==1048576}u=N}e:{if(!u|(r[h+20>>2]?0:a))break e;m=0,T=re-16|0,re=T;t:{n:{if(Ut[s+38>>1]<=511){if(f=r[s+12>>2],R=f,u=r[s+20>>2],N=r[s+16>>2],A=N+8|0,u=A>>>0<8?u+1|0:u,y=r[s+8>>2],y>>>0<A>>>0&(u|0)>=(f|0)|(u|0)>(f|0))break t;N=N+r[s>>2]|0,f=I[N|0]|I[N+1|0]<<8|(I[N+2|0]<<16|I[N+3|0]<<24),N=I[N+4|0]|I[N+5|0]<<8|(I[N+6|0]<<16|I[N+7|0]<<24),r[s+16>>2]=A,r[s+20>>2]=u;break n}if(!Ip(1,T+8|0,s))break t;A=r[s+16>>2],u=r[s+20>>2],y=r[s+8>>2],R=r[s+12>>2],f=r[T+8>>2],N=r[T+12>>2]}if(z=y-A|0,y=R-(u+(A>>>0>y>>>0)|0)|0,(y|0)==(N|0)&f>>>0>z>>>0|y>>>0<N>>>0||(u=u+N|0,y=f+A|0,u=y>>>0<f>>>0?u+1|0:u,r[s+16>>2]=y,r[s+20>>2]=u,(f|0)<=0))break t;s=A+r[s>>2]|0,r[h+48>>2]=s,u=f-1|0,y=u+s|0,A=I[y|0];n:{if(A>>>0<=63){r[h+52>>2]=u,s=I[y|0]&63;break n}i:switch((A>>>6|0)-1|0){case 0:if(f>>>0<2)break t;r[h+52>>2]=f-2,s=(s+f|0)-2|0,s=I[s+1|0]<<8&16128|I[s|0];break n;case 1:if(f>>>0<3)break t;r[h+52>>2]=f-3,s=(s+f|0)-3|0,s=I[s+2|0]<<16&4128768|I[s+1|0]<<8|I[s|0];break n;default:break i}r[h+52>>2]=f-4,s=(s+f|0)-4|0,s=I[s+2|0]<<16|I[s+3|0]<<24&1056964608|I[s+1|0]<<8|I[s|0]}s=s+4194304|0,r[h+56>>2]=s,m=s>>>0<1073741824}if(re=T+16|0,!m)break e;if(!a){H=1;break e}for(u=r[h+36>>2],f=r[h+48>>2],y=r[h+24>>2],s=r[h+56>>2];;){t:{if(s>>>0>4194303)break t;for(H=r[h+52>>2];;){if((H|0)<=0)break t;if(H=H-1|0,r[h+52>>2]=H,s=I[f+H|0]|s<<8,r[h+56>>2]=s,!(s>>>0<4194304))break}}if(A=s&1048575,m=r[y+(A<<2)>>2],N=u+(m<<3)|0,s=(ne(r[N>>2],s>>>20|0)+A|0)-r[N+4>>2]|0,r[h+56>>2]=s,r[(ge<<2)+c>>2]=m,H=1,ge=ge+1|0,(ge|0)==(a|0))break}}return a=r[h+36>>2],a&&(r[h+40>>2]=a,W(a)),a=r[h+24>>2],a&&(r[h+28>>2]=a,W(a)),a=r[h+8>>2],a&&(r[h+12>>2]=a,W(a)),re=h- -64|0,H}function OM(a,s,c,u){var f=0,h=0,m=0,y=0,A=0,T=_e(0),R=0;e:{t:{if(!u)break t;n:{i:switch(r[a+28>>2]-1|0){case 0:if(y=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0)break e;if(zt[(m<<1)+u>>1]=D[s|0],s=s+1|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break n;break t;case 1:if(y=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0)break e;if(zt[(m<<1)+u>>1]=I[s|0],s=s+1|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break n;break t;case 2:if(y=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0)break e;if(zt[(m<<1)+u>>1]=Ut[s>>1],s=s+2|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break n;break t;case 3:if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0)break e;if(f=zt[s>>1],(f|0)<0)break t;if(zt[(m<<1)+u>>1]=f,s=s+2|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if(y=1,(c|0)>(f|0))break n;break t;case 4:if(y=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0||(f=r[s>>2],f-32768>>>0<4294901760))break e;if(zt[(m<<1)+u>>1]=f,s=s+4|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break n;break t;case 5:if(y=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0||(f=r[s>>2],f>>>0>32767))break e;if(zt[(m<<1)+u>>1]=f,s=s+4|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break n;break t;case 6:if(y=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0||(A=r[s>>2],f=r[s+4>>2]-(A>>>0<32768)|0,(f|0)==-1&A-32768>>>0<4294901760|(f|0)!=-1))break e;if(zt[(m<<1)+u>>1]=A,s=s+8|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break n;break t;case 7:if(y=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0||(f=r[s+4>>2],A=r[s>>2],!f&A>>>0>32767|f))break e;if(zt[(m<<1)+u>>1]=A,s=s+8|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break n;break t;case 8:if(y=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0)break e;A=(m<<1)+u|0,T=At[s>>2];r:{if(_e(ui(T))<_e(2147483648)){f=~~T;break r}f=-2147483648}if(zt[A>>1]=f,s=s+4|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break n;break t;case 9:if(y=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0)break e;A=(m<<1)+u|0,R=Zc[s>>3];r:{if(ui(R)<2147483648){f=~~R;break r}f=-2147483648}if(zt[A>>1]=f,s=s+8|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break n;break t;case 10:break i;default:break t}if(y=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0)break e;if(zt[(m<<1)+u>>1]=I[s|0],s=s+1|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)<=(f|0))break t}Ct((f<<1)+u|0,0,c-f<<1)}return y}return 0}function ZSe(a,s,c,u,f,h){a=a|0,s=s|0,c=c|0,u=u|0,f=f|0,h=h|0;var m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0,ie=0,ge=0,we=0,Me=0,Ie=0,We=0,ut=0,vt=0,Pt=0,Wt=0,gn=0,En=0,Nn=0,nr=0;r[a+8>>2]=f,u=a+32|0,A=r[u>>2],h=r[a+36>>2]-A>>2;e:{if(h>>>0<f>>>0){Xr(u,f-h|0),A=r[u>>2],u=r[a+8>>2];break e}f>>>0<h>>>0&&(r[a+36>>2]=(f<<2)+A),u=f}h=(f&1073741823)!=(f|0)?-1:f<<2,z=Ct(Te(h),0,h),Z=Ct(Te(h),0,h);e:{if((u|0)<=0)break e;for(;;){u=m<<2,h=r[u+z>>2],y=r[a+16>>2];t:{if((h|0)>(y|0)){r[u+A>>2]=y;break t}if(u=u+A|0,y=r[a+12>>2],(y|0)>(h|0)){r[u>>2]=y;break t}r[u>>2]=h}if(u=r[a+8>>2],m=m+1|0,!((u|0)>(m|0)))break}if((u|0)<=0)break e;for(h=0;;){y=h<<2,u=y+c|0,y=r[s+y>>2]+r[y+A>>2]|0,r[u>>2]=y;t:{if((y|0)>r[a+16>>2])m=y-r[a+20>>2]|0;else{if((y|0)>=r[a+12>>2])break t;m=y+r[a+20>>2]|0}r[u>>2]=m}if(u=r[a+8>>2],h=h+1|0,!((u|0)>(h|0)))break}}if(h=r[a+56>>2],Ie=r[h>>2],h=r[h+4>>2]-Ie|0,(h|0)>=5)for(Pt=r[a+52>>2],ge=r[a+48>>2],h=h>>2,Wt=(h|0)>2?h:2,gn=h>>>0>1?h:1,We=f&-2,ut=f&1,En=f&-4,vt=f&3,Me=f-1|0,Nn=f<<2,H=1;;){e:{t:{n:{i:{if((H|0)!=(gn|0)){if(y=r[(H<<2)+Ie>>2],we=(f|0)<=0,we||Ct(z,0,Nn),(y|0)==-1){T=ne(f,H);break t}for(nr=r[ge>>2],U=0,h=y;;){r:{if(r[(h>>>3&536870908)+nr>>2]>>>h&1||(m=r[r[r[ge+64>>2]+12>>2]+(h<<2)>>2],(m|0)==-1)||(T=r[Pt>>2],A=r[ge+28>>2],N=r[T+(r[A+(m<<2)>>2]<<2)>>2],(N|0)>=(H|0))||(R=m+1|0,R=r[T+(r[A+(((R>>>0)%3|0?R:m-2|0)<<2)>>2]<<2)>>2],(R|0)>=(H|0))||(m=r[T+(r[A+(m+((m>>>0)%3|0?-1:2)<<2)>>2]<<2)>>2],(m|0)>=(H|0)))break r;s:{if(we)break s;if(A=ne(f,m),T=ne(f,R),N=ne(f,N),m=0,ie=0,Me)for(;r[(m<<2)+Z>>2]=(r[(m+A<<2)+c>>2]+r[(m+T<<2)+c>>2]|0)-r[(m+N<<2)+c>>2],R=m|1,r[(R<<2)+Z>>2]=(r[(A+R<<2)+c>>2]+r[(T+R<<2)+c>>2]|0)-r[(R+N<<2)+c>>2],m=m+2|0,ie=ie+2|0,(We|0)!=(ie|0););if(ut&&(r[(m<<2)+Z>>2]=(r[(m+A<<2)+c>>2]+r[(m+T<<2)+c>>2]|0)-r[(m+N<<2)+c>>2]),we)break s;if(A=0,m=0,T=0,Me>>>0>2)for(;N=m<<2,R=N+z|0,r[R>>2]=r[R>>2]+r[N+Z>>2],R=N|4,ie=R+z|0,r[ie>>2]=r[ie>>2]+r[R+Z>>2],R=N|8,ie=R+z|0,r[ie>>2]=r[ie>>2]+r[R+Z>>2],N=N|12,R=N+z|0,r[R>>2]=r[R>>2]+r[N+Z>>2],m=m+4|0,T=T+4|0,(En|0)!=(T|0););if(!vt)break s;for(;T=m<<2,N=T+z|0,r[N>>2]=r[N>>2]+r[T+Z>>2],m=m+1|0,A=A+1|0,(vt|0)!=(A|0););}U=U+1|0}r:{s:{if((h>>>0)%3|0){h=h-1|0;break s}if(h=h+2|0,m=-1,(h|0)==-1)break r}if(m=-1,r[r[ge>>2]+(h>>>3&536870908)>>2]>>>h&1||(h=r[r[r[ge+64>>2]+12>>2]+(h<<2)>>2],m=-1,(h|0)==-1)||(m=h-1|0,(h>>>0)%3|0))break r;m=h+2|0}if(h=(m|0)==(y|0)?-1:m,(h|0)==-1)break}if(T=ne(f,H),!U)break t;if(we)break n;if(m=0,h=0,!Me)break i;for(;y=m<<2,A=y+z|0,r[A>>2]=r[A>>2]/(U|0),y=(y|4)+z|0,r[y>>2]=r[y>>2]/(U|0),m=m+2|0,h=h+2|0,(We|0)!=(h|0););break i}ps(),Xe()}if(!ut)break n;h=(m<<2)+z|0,r[h>>2]=r[h>>2]/(U|0)}if((u|0)<=0)break e;for(A=r[a+32>>2],m=0;;){u=m<<2,h=r[u+z>>2],y=r[a+16>>2];n:{if((h|0)>(y|0)){r[u+A>>2]=y;break n}if(u=u+A|0,y=r[a+12>>2],(y|0)>(h|0)){r[u>>2]=y;break n}r[u>>2]=h}if(u=r[a+8>>2],m=m+1|0,!((u|0)>(m|0)))break}if(h=0,(u|0)<=0)break e;for(u=T<<2,m=u+c|0,T=s+u|0;;){y=h<<2,u=y+m|0,y=r[y+T>>2]+r[y+A>>2]|0,r[u>>2]=y;n:{if((y|0)>r[a+16>>2])y=y-r[a+20>>2]|0;else{if((y|0)>=r[a+12>>2])break n;y=y+r[a+20>>2]|0}r[u>>2]=y}if(u=r[a+8>>2],h=h+1|0,!((u|0)>(h|0)))break}break e}if((u|0)<=0)break e;for(y=(ne(H-1|0,f)<<2)+c|0,A=r[a+32>>2],m=0;;){u=m<<2,h=r[u+y>>2],U=r[a+16>>2];t:{if((h|0)>(U|0)){r[u+A>>2]=U;break t}if(u=u+A|0,U=r[a+12>>2],(U|0)>(h|0)){r[u>>2]=U;break t}r[u>>2]=h}if(u=r[a+8>>2],m=m+1|0,!((u|0)>(m|0)))break}if(h=0,(u|0)<=0)break e;for(u=T<<2,m=u+c|0,T=s+u|0;;){y=h<<2,u=y+m|0,y=r[y+T>>2]+r[y+A>>2]|0,r[u>>2]=y;t:{if((y|0)>r[a+16>>2])y=y-r[a+20>>2]|0;else{if((y|0)>=r[a+12>>2])break t;y=y+r[a+20>>2]|0}r[u>>2]=y}if(u=r[a+8>>2],h=h+1|0,!((u|0)>(h|0)))break}}if(H=H+1|0,(Wt|0)==(H|0))break}return W(Z),W(z),1}function IM(a,s,c,u){var f=0,h=0,m=0,y=0,A=0,T=_e(0),R=0;e:{t:{if(!u)break t;n:{i:switch(r[a+28>>2]-1|0){case 0:if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0)break e;if(f=D[s|0],(f|0)<0)break t;if(zt[(m<<1)+u>>1]=f&255,s=s+1|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if(y=1,(c|0)>(f|0))break n;break t;case 1:if(y=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0)break e;if(zt[(m<<1)+u>>1]=I[s|0],s=s+1|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break n;break t;case 2:if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0)break e;if(f=zt[s>>1],(f|0)<0)break t;if(zt[(m<<1)+u>>1]=f,s=s+2|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if(y=1,(c|0)>(f|0))break n;break t;case 3:if(y=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0)break e;if(zt[(m<<1)+u>>1]=Ut[s>>1],s=s+2|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break n;break t;case 4:if(y=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0||(f=r[s>>2],f>>>0>65535))break e;if(zt[(m<<1)+u>>1]=f,s=s+4|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break n;break t;case 5:if(y=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0||(f=r[s>>2],f>>>0>65535))break e;if(zt[(m<<1)+u>>1]=f,s=s+4|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break n;break t;case 6:if(y=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0||(f=r[s+4>>2],A=r[s>>2],!f&A>>>0>65535|f))break e;if(zt[(m<<1)+u>>1]=A,s=s+8|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break n;break t;case 7:if(y=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0||(f=r[s+4>>2],A=r[s>>2],!f&A>>>0>65535|f))break e;if(zt[(m<<1)+u>>1]=A,s=s+8|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break n;break t;case 8:if(y=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0)break e;A=(m<<1)+u|0,T=At[s>>2];r:{if(T<_e(4294967296)&T>=_e(0)){f=~~T>>>0;break r}f=0}if(zt[A>>1]=f,s=s+4|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break n;break t;case 9:if(y=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0)break e;A=(m<<1)+u|0,R=Zc[s>>3];r:{if(R<4294967296&R>=0){f=~~R>>>0;break r}f=0}if(zt[A>>1]=f,s=s+8|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break n;break t;case 10:break i;default:break t}if(y=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0)break e;if(zt[(m<<1)+u>>1]=I[s|0],s=s+1|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)<=(f|0))break t}Ct((f<<1)+u|0,0,c-f<<1)}return y}return 0}function NM(a,s,c){var u=0,f=0,h=0,m=0,y=0,A=0;f=re-48|0,re=f,u=Ut[6693]|Ut[6694]<<16,h=Ut[6691]|Ut[6692]<<16,zt[f+38>>1]=h,zt[f+40>>1]=h>>>16,zt[f+42>>1]=u,zt[f+44>>1]=u>>>16,u=r[3345],r[f+32>>2]=r[3344],r[f+36>>2]=u,u=r[3343],r[f+24>>2]=r[3342],r[f+28>>2]=u,u=r[3341],r[f+16>>2]=r[3340],r[f+20>>2]=u,h=r[s+12>>2],u=r[s+20>>2],m=r[s+16>>2],y=m+5|0,u=y>>>0<5?u+1|0:u;e:{t:{if(y>>>0>Ue[s+8>>2]&(u|0)>=(h|0)|(u|0)>(h|0)){if(s=pc(f+16|0),s>>>0>=4294967280)break e;n:{i:{if(s>>>0>=11){u=s+16&-16,c=Te(u),r[f+8>>2]=u|-2147483648,r[f>>2]=c,r[f+4>>2]=s;break i}if(D[f+11|0]=s,c=f,!s)break n}$e(c,f+16|0,s)}if(D[s+c|0]=0,r[a>>2]=-2,a=a+4|0,D[f+11|0]>=0){s=r[f+4>>2],r[a>>2]=r[f>>2],r[a+4>>2]=s,r[a+8>>2]=r[f+8>>2];break t}s=a,a=r[f>>2],Ri(s,a,r[f+4>>2]),W(a);break t}if(u=m+r[s>>2]|0,h=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),D[c|0]=h,D[c+1|0]=h>>>8,D[c+2|0]=h>>>16,D[c+3|0]=h>>>24,D[c+4|0]=I[u+4|0],u=r[s+20>>2],h=r[s+16>>2]+5|0,u=h>>>0<5?u+1|0:u,r[s+16>>2]=h,r[s+20>>2]=u,Io(c,1404,5)){s=Te(32),D[s+16|0]=I[1640],c=I[1636]|I[1637]<<8|(I[1638]<<16|I[1639]<<24),u=I[1632]|I[1633]<<8|(I[1634]<<16|I[1635]<<24),D[s+8|0]=u,D[s+9|0]=u>>>8,D[s+10|0]=u>>>16,D[s+11|0]=u>>>24,D[s+12|0]=c,D[s+13|0]=c>>>8,D[s+14|0]=c>>>16,D[s+15|0]=c>>>24,c=I[1628]|I[1629]<<8|(I[1630]<<16|I[1631]<<24),u=I[1624]|I[1625]<<8|(I[1626]<<16|I[1627]<<24),D[s|0]=u,D[s+1|0]=u>>>8,D[s+2|0]=u>>>16,D[s+3|0]=u>>>24,D[s+4|0]=c,D[s+5|0]=c>>>8,D[s+6|0]=c>>>16,D[s+7|0]=c>>>24,D[s+17|0]=0,r[a>>2]=-1,Ri(a+4|0,s,17),W(s);break t}if(m=r[s+12>>2],(m|0)<=(u|0)&Ue[s+8>>2]<=h>>>0|(u|0)>(m|0)){if(s=pc(f+16|0),s>>>0>=4294967280)break e;n:{i:{if(s>>>0>=11){u=s+16&-16,c=Te(u),r[f+8>>2]=u|-2147483648,r[f>>2]=c,r[f+4>>2]=s;break i}if(D[f+11|0]=s,c=f,!s)break n}$e(c,f+16|0,s)}if(D[s+c|0]=0,r[a>>2]=-2,a=a+4|0,D[f+11|0]>=0){s=r[f+4>>2],r[a>>2]=r[f>>2],r[a+4>>2]=s,r[a+8>>2]=r[f+8>>2];break t}s=a,a=r[f>>2],Ri(s,a,r[f+4>>2]),W(a);break t}if(D[c+5|0]=I[h+r[s>>2]|0],u=r[s+20>>2],h=r[s+16>>2]+1|0,u=h?u:u+1|0,r[s+16>>2]=h,r[s+20>>2]=u,m=r[s+12>>2],(m|0)<=(u|0)&Ue[s+8>>2]<=h>>>0|(u|0)>(m|0)){if(s=pc(f+16|0),s>>>0>=4294967280)break e;n:{i:{if(s>>>0>=11){u=s+16&-16,c=Te(u),r[f+8>>2]=u|-2147483648,r[f>>2]=c,r[f+4>>2]=s;break i}if(D[f+11|0]=s,c=f,!s)break n}$e(c,f+16|0,s)}if(D[s+c|0]=0,r[a>>2]=-2,a=a+4|0,D[f+11|0]>=0){s=r[f+4>>2],r[a>>2]=r[f>>2],r[a+4>>2]=s,r[a+8>>2]=r[f+8>>2];break t}s=a,a=r[f>>2],Ri(s,a,r[f+4>>2]),W(a);break t}if(D[c+6|0]=I[h+r[s>>2]|0],u=r[s+20>>2],h=r[s+16>>2]+1|0,u=h?u:u+1|0,r[s+16>>2]=h,r[s+20>>2]=u,m=r[s+12>>2],(m|0)<=(u|0)&Ue[s+8>>2]<=h>>>0|(u|0)>(m|0)){if(s=pc(f+16|0),s>>>0>=4294967280)break e;n:{i:{if(s>>>0>=11){u=s+16&-16,c=Te(u),r[f+8>>2]=u|-2147483648,r[f>>2]=c,r[f+4>>2]=s;break i}if(D[f+11|0]=s,c=f,!s)break n}$e(c,f+16|0,s)}if(D[s+c|0]=0,r[a>>2]=-2,a=a+4|0,D[f+11|0]>=0){s=r[f+4>>2],r[a>>2]=r[f>>2],r[a+4>>2]=s,r[a+8>>2]=r[f+8>>2];break t}s=a,a=r[f>>2],Ri(s,a,r[f+4>>2]),W(a);break t}if(D[c+7|0]=I[h+r[s>>2]|0],u=r[s+20>>2],h=r[s+16>>2]+1|0,u=h?u:u+1|0,r[s+16>>2]=h,r[s+20>>2]=u,m=r[s+12>>2],(m|0)<=(u|0)&Ue[s+8>>2]<=h>>>0|(u|0)>(m|0)){if(s=qM(f,f+16|0),r[a>>2]=-2,a=a+4|0,D[s+11|0]>=0){s=r[f+4>>2],r[a>>2]=r[f>>2],r[a+4>>2]=s,r[a+8>>2]=r[f+8>>2];break t}if(Ri(a,r[s>>2],r[s+4>>2]),D[s+11|0]>=0)break t;W(r[s>>2]);break t}if(D[c+8|0]=I[h+r[s>>2]|0],u=r[s+20>>2],h=u,A=r[s+16>>2],m=A+1|0,u=m?u:u+1|0,r[s+16>>2]=m,r[s+20>>2]=u,y=r[s+12>>2],u=h,h=A+3|0,u=h>>>0<3?u+1|0:u,h>>>0>Ue[s+8>>2]&(u|0)>=(y|0)|(u|0)>(y|0)){if(s=qM(f,f+16|0),r[a>>2]=-2,a=a+4|0,D[s+11|0]>=0){s=r[f+4>>2],r[a>>2]=r[f>>2],r[a+4>>2]=s,r[a+8>>2]=r[f+8>>2];break t}if(Ri(a,r[s>>2],r[s+4>>2]),D[s+11|0]>=0)break t;W(r[s>>2]);break t}h=c,c=m+r[s>>2]|0,zt[h+10>>1]=I[c|0]|I[c+1|0]<<8,u=r[s+20>>2],c=r[s+16>>2]+2|0,u=c>>>0<2?u+1|0:u,r[s+16>>2]=c,r[s+20>>2]=u,r[a+8>>2]=0,r[a+12>>2]=0,r[a>>2]=0,r[a+4>>2]=0}re=f+48|0;return}mc(),Xe()}function QSe(a,s,c,u,f,h){a=a|0,s=s|0,c=c|0,u=u|0,f=f|0,h=h|0;var m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0,ie=0,ge=0,we=0,Me=0,Ie=0,We=0,ut=0,vt=0,Pt=0,Wt=0,gn=0,En=0,Nn=0,nr=0;r[a+8>>2]=f,u=a+32|0,A=r[u>>2],h=r[a+36>>2]-A>>2;e:{if(h>>>0<f>>>0){Xr(u,f-h|0),A=r[u>>2],u=r[a+8>>2];break e}f>>>0<h>>>0&&(r[a+36>>2]=(f<<2)+A),u=f}h=(f&1073741823)!=(f|0)?-1:f<<2,U=Ct(Te(h),0,h),ie=Ct(Te(h),0,h);e:{if((u|0)<=0)break e;for(;;){u=m<<2,h=r[u+U>>2],y=r[a+16>>2];t:{if((h|0)>(y|0)){r[u+A>>2]=y;break t}if(u=u+A|0,y=r[a+12>>2],(y|0)>(h|0)){r[u>>2]=y;break t}r[u>>2]=h}if(u=r[a+8>>2],m=m+1|0,!((u|0)>(m|0)))break}if((u|0)<=0)break e;for(h=0;;){y=h<<2,u=y+c|0,y=r[s+y>>2]+r[y+A>>2]|0,r[u>>2]=y;t:{if((y|0)>r[a+16>>2])m=y-r[a+20>>2]|0;else{if((y|0)>=r[a+12>>2])break t;m=y+r[a+20>>2]|0}r[u>>2]=m}if(u=r[a+8>>2],h=h+1|0,!((u|0)>(h|0)))break}}if(h=r[a+56>>2],Me=r[h>>2],h=r[h+4>>2]-Me|0,(h|0)>=5)for(Wt=r[a+52>>2],Ie=r[a+48>>2],h=h>>2,gn=(h|0)>2?h:2,En=h>>>0>1?h:1,We=f&-2,ut=f&1,Nn=f&-4,vt=f&3,we=f-1|0,nr=f<<2,H=1;;){e:{t:{n:{i:{if((H|0)!=(En|0)){if(y=r[(H<<2)+Me>>2],ge=(f|0)<=0,ge||Ct(U,0,nr),(y|0)==-1){y=ne(f,H);break t}for(Pt=r[Ie+12>>2],N=0,h=y;;){m=r[(h<<2)+Pt>>2];r:{if((m|0)==-1)break r;T=r[Wt>>2],A=r[Ie>>2],Z=r[T+(r[A+(m<<2)>>2]<<2)>>2],R=m+1|0,R=(R>>>0)%3|0?R:m-2|0,(R|0)!=-1?R=r[A+(R<<2)>>2]:R=-1;s:{a:{if((m>>>0)%3|0){m=m-1|0;break a}if(m=m+2|0,z=-1,(m|0)==-1)break s}z=r[A+(m<<2)>>2]}if((H|0)<=(Z|0)||(m=r[(R<<2)+T>>2],(m|0)>=(H|0))||(A=r[T+(z<<2)>>2],(A|0)>=(H|0)))break r;s:{if(ge)break s;if(A=ne(f,A),T=ne(f,m),Z=ne(f,Z),m=0,z=0,we)for(;r[(m<<2)+ie>>2]=(r[(m+A<<2)+c>>2]+r[(m+T<<2)+c>>2]|0)-r[(m+Z<<2)+c>>2],R=m|1,r[(R<<2)+ie>>2]=(r[(A+R<<2)+c>>2]+r[(T+R<<2)+c>>2]|0)-r[(R+Z<<2)+c>>2],m=m+2|0,z=z+2|0,(We|0)!=(z|0););if(ut&&(r[(m<<2)+ie>>2]=(r[(m+A<<2)+c>>2]+r[(m+T<<2)+c>>2]|0)-r[(m+Z<<2)+c>>2]),ge)break s;if(Z=0,m=0,A=0,we>>>0>2)for(;T=m<<2,R=T+U|0,r[R>>2]=r[R>>2]+r[T+ie>>2],R=T|4,z=R+U|0,r[z>>2]=r[z>>2]+r[R+ie>>2],R=T|8,z=R+U|0,r[z>>2]=r[z>>2]+r[R+ie>>2],T=T|12,R=T+U|0,r[R>>2]=r[R>>2]+r[T+ie>>2],m=m+4|0,A=A+4|0,(Nn|0)!=(A|0););if(!vt)break s;for(;A=m<<2,T=A+U|0,r[T>>2]=r[T>>2]+r[A+ie>>2],m=m+1|0,Z=Z+1|0,(vt|0)!=(Z|0););}N=N+1|0}r:{s:{if((h>>>0)%3|0){h=h-1|0;break s}if(h=h+2|0,m=-1,(h|0)==-1)break r}if(h=r[(h<<2)+Pt>>2],m=-1,(h|0)==-1||(m=h-1|0,(h>>>0)%3|0))break r;m=h+2|0}if(h=(m|0)==(y|0)?-1:m,(h|0)==-1)break}if(y=ne(f,H),!N)break t;if(ge)break n;if(m=0,h=0,!we)break i;for(;A=m<<2,T=A+U|0,r[T>>2]=r[T>>2]/(N|0),A=(A|4)+U|0,r[A>>2]=r[A>>2]/(N|0),m=m+2|0,h=h+2|0,(We|0)!=(h|0););break i}ps(),Xe()}if(!ut)break n;h=(m<<2)+U|0,r[h>>2]=r[h>>2]/(N|0)}if((u|0)<=0)break e;for(A=r[a+32>>2],m=0;;){u=m<<2,h=r[u+U>>2],N=r[a+16>>2];n:{if((h|0)>(N|0)){r[u+A>>2]=N;break n}if(u=u+A|0,N=r[a+12>>2],(N|0)>(h|0)){r[u>>2]=N;break n}r[u>>2]=h}if(u=r[a+8>>2],m=m+1|0,!((u|0)>(m|0)))break}if(h=0,(u|0)<=0)break e;for(u=y<<2,m=u+c|0,N=s+u|0;;){y=h<<2,u=y+m|0,y=r[y+N>>2]+r[y+A>>2]|0,r[u>>2]=y;n:{if((y|0)>r[a+16>>2])y=y-r[a+20>>2]|0;else{if((y|0)>=r[a+12>>2])break n;y=y+r[a+20>>2]|0}r[u>>2]=y}if(u=r[a+8>>2],h=h+1|0,!((u|0)>(h|0)))break}break e}if((u|0)<=0)break e;for(N=(ne(H-1|0,f)<<2)+c|0,A=r[a+32>>2],m=0;;){u=m<<2,h=r[u+N>>2],T=r[a+16>>2];t:{if((h|0)>(T|0)){r[u+A>>2]=T;break t}if(u=u+A|0,T=r[a+12>>2],(T|0)>(h|0)){r[u>>2]=T;break t}r[u>>2]=h}if(u=r[a+8>>2],m=m+1|0,!((u|0)>(m|0)))break}if(h=0,(u|0)<=0)break e;for(u=y<<2,m=u+c|0,N=s+u|0;;){y=h<<2,u=y+m|0,y=r[y+N>>2]+r[y+A>>2]|0,r[u>>2]=y;t:{if((y|0)>r[a+16>>2])y=y-r[a+20>>2]|0;else{if((y|0)>=r[a+12>>2])break t;y=y+r[a+20>>2]|0}r[u>>2]=y}if(u=r[a+8>>2],h=h+1|0,!((u|0)>(h|0)))break}}if(H=H+1|0,(gn|0)==(H|0))break}return W(ie),W(U),1}function LM(a,s,c,u){var f=0,h=0,m=0,y=0,A=0,T=_e(0),R=0;e:{t:{if(!u)break t;n:{i:switch(r[a+28>>2]-1|0){case 0:if(y=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0)break e;if(r[(m<<2)+u>>2]=D[s|0],s=s+1|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break n;break t;case 1:if(y=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0)break e;if(r[(m<<2)+u>>2]=I[s|0],s=s+1|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break n;break t;case 2:if(y=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0)break e;if(r[(m<<2)+u>>2]=zt[s>>1],s=s+2|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break n;break t;case 3:if(y=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0)break e;if(r[(m<<2)+u>>2]=Ut[s>>1],s=s+2|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break n;break t;case 4:if(y=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0)break e;if(r[(m<<2)+u>>2]=r[s>>2],s=s+4|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break n;break t;case 5:if(f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0)break e;if(f=r[s>>2],(f|0)<0)break t;if(r[(m<<2)+u>>2]=f,s=s+4|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if(y=1,(c|0)>(f|0))break n;break t;case 6:if(y=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0||(f=r[s>>2],(r[s+4>>2]-(f>>>0<2147483648)|0)!=-1))break e;if(r[(m<<2)+u>>2]=f,s=s+8|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break n;break t;case 7:if(y=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0||(f=r[s+4>>2],A=r[s>>2],!f&A>>>0>2147483647|f))break e;if(r[(m<<2)+u>>2]=A,s=s+8|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break n;break t;case 8:if(y=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0)break e;A=(m<<2)+u|0,T=At[s>>2];r:{if(_e(ui(T))<_e(2147483648)){f=~~T;break r}f=-2147483648}if(r[A>>2]=f,s=s+4|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break n;break t;case 9:if(y=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0)break e;A=(m<<2)+u|0,R=Zc[s>>3];r:{if(ui(R)<2147483648){f=~~R;break r}f=-2147483648}if(r[A>>2]=f,s=s+8|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break n;break t;case 10:break i;default:break t}if(y=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0)break e;if(r[(m<<2)+u>>2]=I[s|0],s=s+1|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)<=(f|0))break t}Ct((f<<2)+u|0,0,c-f<<2)}return y}return 0}function zM(a,s,c,u){var f=0,h=0,m=0,y=0,A=0,T=_e(0),R=0;e:{t:{if(!u)break t;n:{i:switch(r[a+28>>2]-1|0){case 0:if(y=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0)break e;if(r[(m<<2)+u>>2]=D[s|0],s=s+1|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break n;break t;case 1:if(y=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0)break e;if(r[(m<<2)+u>>2]=I[s|0],s=s+1|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break n;break t;case 2:if(y=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0)break e;if(r[(m<<2)+u>>2]=zt[s>>1],s=s+2|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break n;break t;case 3:if(y=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0)break e;if(r[(m<<2)+u>>2]=Ut[s>>1],s=s+2|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break n;break t;case 4:if(y=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0)break e;if(r[(m<<2)+u>>2]=r[s>>2],s=s+4|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break n;break t;case 5:if(y=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0)break e;if(r[(m<<2)+u>>2]=r[s>>2],s=s+4|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break n;break t;case 6:if(y=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0||(f=r[s>>2],r[s+4>>2]))break e;if(r[(m<<2)+u>>2]=f,s=s+8|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break n;break t;case 7:if(y=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0||(f=r[s>>2],r[s+4>>2]))break e;if(r[(m<<2)+u>>2]=f,s=s+8|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break n;break t;case 8:if(y=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0)break e;A=(m<<2)+u|0,T=At[s>>2];r:{if(T<_e(4294967296)&T>=_e(0)){f=~~T>>>0;break r}f=0}if(r[A>>2]=f,s=s+4|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break n;break t;case 9:if(y=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0)break e;A=(m<<2)+u|0,R=Zc[s>>3];r:{if(R<4294967296&R>=0){f=~~R>>>0;break r}f=0}if(r[A>>2]=f,s=s+8|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)>(f|0))break n;break t;case 10:break i;default:break t}if(y=1,f=D[a+24|0],(((c|0)<(f|0)?c:f)|0)>0)for(f=r[a>>2],h=r[f>>2],s=r[a+48>>2]+rt(r[a+40>>2],r[a+44>>2],s,0)|0,s=h+s|0,h=r[f+4>>2];;){if(s>>>0>=h>>>0)break e;if(r[(m<<2)+u>>2]=I[s|0],s=s+1|0,m=m+1|0,f=D[a+24|0],!((m|0)<(((c|0)<(f|0)?c:f)|0)))break}if((c|0)<=(f|0))break t}Ct((f<<2)+u|0,0,c-f<<2)}return y}return 0}function KSe(a,s,c){a=a|0,s=s|0,c=c|0;var u=0,f=0,h=0,m=0,y=0,A=0,T=0;f=re-32|0,re=f;e:{t:switch(c-2|0){case 0:if(c=r[a+4>>2],h=r[a+12>>2],r[f+24>>2]=-1,r[f+16>>2]=-1,r[f+20>>2]=1065353216,r[f+8>>2]=-1,r[f+12>>2]=-1,(s|0)==-2)break e;if(T=r[r[r[c+4>>2]+8>>2]+(h<<2)>>2],(pt[r[r[c>>2]+8>>2]](c)|0)==1){A=r[r[r[c+4>>2]+8>>2]+(h<<2)>>2];n:{if((pt[r[r[c>>2]+8>>2]](c)|0)!=1|s-1>>>0>5||(y=pt[r[r[c>>2]+36>>2]](c)|0,a=pt[r[r[c>>2]+44>>2]](c,h)|0,!y|!a))break n;if(m=a+12|0,h=pt[r[r[c>>2]+40>>2]](c,h)|0,c=r[c+44>>2],h){if((s|0)!=6)break n;u=Te(112),r[u+4>>2]=A,s=r[f+12>>2],r[u+8>>2]=r[f+8>>2],r[u+12>>2]=s,s=r[f+20>>2],r[u+16>>2]=r[f+16>>2],r[u+20>>2]=s,r[u+24>>2]=r[f+24>>2],r[u+40>>2]=a,r[u+36>>2]=m,r[u+32>>2]=h,r[u+28>>2]=c,r[u+68>>2]=a,r[u- -64>>2]=m,r[u+60>>2]=h,r[u+56>>2]=c,r[u+48>>2]=0,r[u+52>>2]=0,r[u>>2]=7172,r[u+88>>2]=1065353216,r[u+92>>2]=-1,r[u+80>>2]=-1,r[u+84>>2]=-1,r[u+72>>2]=1,r[u+76>>2]=-1,r[u+44>>2]=7696,a=u+96|0,r[a>>2]=0,r[a+4>>2]=0,D[a+5|0]=0,D[a+6|0]=0,D[a+7|0]=0,D[a+8|0]=0,D[a+9|0]=0,D[a+10|0]=0,D[a+11|0]=0,D[a+12|0]=0;break n}if((s|0)!=6)break n;u=Te(112),r[u+4>>2]=A,s=r[f+12>>2],r[u+8>>2]=r[f+8>>2],r[u+12>>2]=s,s=r[f+20>>2],r[u+16>>2]=r[f+16>>2],r[u+20>>2]=s,r[u+24>>2]=r[f+24>>2],r[u+40>>2]=a,r[u+36>>2]=m,r[u+32>>2]=y,r[u+28>>2]=c,r[u+68>>2]=a,r[u- -64>>2]=m,r[u+60>>2]=y,r[u+56>>2]=c,r[u+48>>2]=0,r[u+52>>2]=0,r[u>>2]=8108,r[u+88>>2]=1065353216,r[u+92>>2]=-1,r[u+80>>2]=-1,r[u+84>>2]=-1,r[u+72>>2]=1,r[u+76>>2]=-1,r[u+44>>2]=8500,a=u+96|0,r[a>>2]=0,r[a+4>>2]=0,D[a+5|0]=0,D[a+6|0]=0,D[a+7|0]=0,D[a+8|0]=0,D[a+9|0]=0,D[a+10|0]=0,D[a+11|0]=0,D[a+12|0]=0}if(u)break e}u=Te(28),r[u+4>>2]=T,a=r[f+12>>2],r[u+8>>2]=r[f+8>>2],r[u+12>>2]=a,a=r[f+20>>2],r[u+16>>2]=r[f+16>>2],r[u+20>>2]=a,r[u+24>>2]=r[f+24>>2],r[u>>2]=8888;break e;case 1:break t;default:break e}if(c=r[a+4>>2],h=r[a+12>>2],r[f+24>>2]=-1,r[f+16>>2]=-1,r[f+20>>2]=1065353216,r[f+8>>2]=-1,r[f+12>>2]=-1,(s|0)==-2)break e;if(T=r[r[r[c+4>>2]+8>>2]+(h<<2)>>2],(pt[r[r[c>>2]+8>>2]](c)|0)==1){A=r[r[r[c+4>>2]+8>>2]+(h<<2)>>2];t:{if((pt[r[r[c>>2]+8>>2]](c)|0)!=1|s-1>>>0>5||(y=pt[r[r[c>>2]+36>>2]](c)|0,a=pt[r[r[c>>2]+44>>2]](c,h)|0,!y|!a))break t;if(m=a+12|0,h=pt[r[r[c>>2]+40>>2]](c,h)|0,c=r[c+44>>2],h){if((s|0)!=6)break t;u=Te(112),r[u+4>>2]=A,s=r[f+12>>2],r[u+8>>2]=r[f+8>>2],r[u+12>>2]=s,s=r[f+20>>2],r[u+16>>2]=r[f+16>>2],r[u+20>>2]=s,r[u+24>>2]=r[f+24>>2],r[u+40>>2]=a,r[u+36>>2]=m,r[u+32>>2]=h,r[u+28>>2]=c,r[u+68>>2]=a,r[u- -64>>2]=m,r[u+60>>2]=h,r[u+56>>2]=c,r[u+48>>2]=0,r[u+52>>2]=0,r[u>>2]=9056,r[u+88>>2]=1065353216,r[u+92>>2]=-1,r[u+80>>2]=-1,r[u+84>>2]=-1,r[u+72>>2]=1,r[u+76>>2]=-1,r[u+44>>2]=9620,a=u+96|0,r[a>>2]=0,r[a+4>>2]=0,D[a+5|0]=0,D[a+6|0]=0,D[a+7|0]=0,D[a+8|0]=0,D[a+9|0]=0,D[a+10|0]=0,D[a+11|0]=0,D[a+12|0]=0;break t}if((s|0)!=6)break t;u=Te(112),r[u+4>>2]=A,s=r[f+12>>2],r[u+8>>2]=r[f+8>>2],r[u+12>>2]=s,s=r[f+20>>2],r[u+16>>2]=r[f+16>>2],r[u+20>>2]=s,r[u+24>>2]=r[f+24>>2],r[u+40>>2]=a,r[u+36>>2]=m,r[u+32>>2]=y,r[u+28>>2]=c,r[u+68>>2]=a,r[u- -64>>2]=m,r[u+60>>2]=y,r[u+56>>2]=c,r[u+48>>2]=0,r[u+52>>2]=0,r[u>>2]=10060,r[u+88>>2]=1065353216,r[u+92>>2]=-1,r[u+80>>2]=-1,r[u+84>>2]=-1,r[u+72>>2]=1,r[u+76>>2]=-1,r[u+44>>2]=10480,a=u+96|0,r[a>>2]=0,r[a+4>>2]=0,D[a+5|0]=0,D[a+6|0]=0,D[a+7|0]=0,D[a+8|0]=0,D[a+9|0]=0,D[a+10|0]=0,D[a+11|0]=0,D[a+12|0]=0}if(u)break e}u=Te(28),r[u+4>>2]=T,a=r[f+12>>2],r[u+8>>2]=r[f+8>>2],r[u+12>>2]=a,a=r[f+20>>2],r[u+16>>2]=r[f+16>>2],r[u+20>>2]=a,r[u+24>>2]=r[f+24>>2],r[u>>2]=10892}return re=f+32|0,u|0}function JSe(a,s,c,u,f,h){a=a|0,s=s|0,c=c|0,u=u|0,f=f|0,h=h|0;var m=0,y=0,A=_e(0),T=_e(0),R=0,N=0,z=0,U=_e(0),H=_e(0),Z=_e(0),ie=_e(0),ge=0,we=_e(0),Me=_e(0),Ie=_e(0),We=_e(0),ut=_e(0),vt=_e(0),Pt=_e(0),Wt=_e(0),gn=_e(0),En=0,Nn=_e(0);r[a+64>>2]=h,r[a+72>>2]=f,h=Te((f&1073741823)!=(f|0)?-1:f<<2),u=r[a+68>>2],r[a+68>>2]=h,u&&W(u),r[a+8>>2]=f,h=a+32|0,m=r[h>>2],u=r[a+36>>2]-m>>2;e:{if(u>>>0<f>>>0){Xr(h,f-u|0);break e}if(u>>>0<=f>>>0)break e;r[a+36>>2]=m+(f<<2)}e:{if(u=r[a+56>>2],m=r[u+4>>2],h=r[u>>2],u=m-h|0,(u|0)<=0)break e;if((h|0)!=(m|0))for(u=u>>>2|0,En=u>>>0>1?u:1;;){y=r[(z<<2)+h>>2],T=_e(0),m=re-48|0,re=m,h=-1,u=-1;t:{if((y|0)==-1||(u=y+1|0,h=(u>>>0)%3|0?u:y-2|0,u=y-1|0,(y>>>0)%3|0))break t;u=y+2|0}R=r[a+52>>2],y=r[R>>2];t:{n:{if(R=r[R+4>>2]-y>>2,N=h<<2,h=r[r[a+48>>2]+28>>2],N=r[N+h>>2],R>>>0<=N>>>0||(h=r[h+(u<<2)>>2],h>>>0>=R>>>0))break n;R=r[y+(h<<2)>>2],u=r[y+(N<<2)>>2];i:{if(!((R|0)>=(z|0)|(u|0)>=(z|0))){if(h=r[a+72>>2],y=(ne(h,R)<<2)+c|0,U=_e(r[y+4>>2]),h=(ne(u,h)<<2)+c|0,ie=_e(r[h+4>>2]),we=_e(r[y>>2]),vt=_e(r[h>>2]),!(we!=vt|U!=ie)){if(u=r[a+68>>2],_e(ui(U))<_e(2147483648)?h=~~U:h=-2147483648,r[u+4>>2]=h,_e(ui(we))<_e(2147483648)){r[u>>2]=~~we;break i}r[u>>2]=-2147483648;break i}h=r[r[a+64>>2]+(z<<2)>>2],r[m+40>>2]=0,r[m+32>>2]=0,r[m+36>>2]=0,y=r[a+60>>2],I[y+84|0]||(h=r[r[y+68>>2]+(h<<2)>>2]),Gf(y,h,D[y+24|0],m+32|0),h=r[r[a+64>>2]+(u<<2)>>2],r[m+24>>2]=0,r[m+16>>2]=0,r[m+20>>2]=0,u=r[a+60>>2],I[u+84|0]||(h=r[r[u+68>>2]+(h<<2)>>2]),Gf(u,h,D[u+24|0],m+16|0),h=r[r[a+64>>2]+(R<<2)>>2],r[m+8>>2]=0,r[m>>2]=0,r[m+4>>2]=0,u=r[a+60>>2],I[u+84|0]||(h=r[r[u+68>>2]+(h<<2)>>2]),Gf(u,h,D[u+24|0],m),Me=At[m+40>>2],Ie=At[m+36>>2],Nn=At[m+32>>2],H=At[m+24>>2],A=_e(At[m+8>>2]-H),Wt=At[m+20>>2],We=_e(At[m+4>>2]-Wt),gn=At[m+16>>2],ut=_e(At[m>>2]-gn),Pt=_e(_e(A*A)+_e(_e(We*We)+_e(_e(ut*ut)+_e(0))));r:{if(!(Pt>_e(0))&&(Z=_e(0),r[a+88>>2]>257))break r;H=_e(Me-H),Me=_e(Ie-Wt),Ie=_e(Nn-gn),T=_e(_e(_e(A*H)+_e(_e(We*Me)+_e(_e(ut*Ie)+_e(0))))/Pt),A=_e(H-_e(A*T)),H=_e(A*A),A=_e(Me-_e(We*T)),Z=_e(A*A),A=_e(Ie-_e(ut*T)),Z=_e(yB(_e(_e(H+_e(Z+_e(_e(A*A)+_e(0))))/Pt)))}H=Z,u=r[a+80>>2]-1|0,h=r[r[a+76>>2]+(u>>>3&536870908)>>2],r[a+80>>2]=u,A=_e(U-ie),Z=_e(_e(A*T)+ie),ie=_e(we-vt),U=_e(ie*H),u=h>>>u&1,U=_e(Z+(u?U:_e(-U))),Z=_e(_e(ie*T)+vt),T=_e(A*H),T=_e(Z+(u?_e(-T):T));r:{if(T!=T){h=r[a+68>>2],r[h>>2]=-2147483648;break r}h=r[a+68>>2],ge=Oo(+T+.5);s:{if(ui(ge)<2147483648){u=~~ge;break s}u=-2147483648}r[h>>2]=u}ge=Oo(+U+.5);r:{if(ui(ge)<2147483648){u=~~ge;break r}u=-2147483648}r[h+4>>2]=U!=U?-2147483648:u;break i}r:{if((u|0)<(z|0)){h=r[a+72>>2],u=ne(u,h);break r}if(h=0,(z|0)<=0){if(r[a+72>>2]<=0)break i;for(u=r[a+68>>2];r[u+(h<<2)>>2]=0,h=h+1|0,(h|0)<r[a+72>>2];);break i}h=r[a+72>>2],u=ne(h,z-1|0)}if((h|0)<=0)break i;for(y=r[a+68>>2],h=0;r[y+(h<<2)>>2]=r[(u+h<<2)+c>>2],h=h+1|0,(h|0)<r[a+72>>2];);}re=m+48|0;break t}ps(),Xe()}t:{if(r[a+8>>2]<=0)break t;for(y=r[a+32>>2],R=r[a+68>>2],h=0;;){u=h<<2,m=r[u+R>>2],N=r[a+16>>2];n:{if((m|0)>(N|0)){r[u+y>>2]=N;break n}if(u=u+y|0,N=r[a+12>>2],(N|0)>(m|0)){r[u>>2]=N;break n}r[u>>2]=m}if(h=h+1|0,m=r[a+8>>2],!((h|0)<(m|0)))break}if(u=0,(m|0)<=0)break t;for(h=ne(f,z)<<2,R=h+c|0,N=s+h|0;;){m=u<<2,h=m+R|0,m=r[m+N>>2]+r[m+y>>2]|0,r[h>>2]=m;n:{if((m|0)>r[a+16>>2])m=m-r[a+20>>2]|0;else{if((m|0)>=r[a+12>>2])break n;m=m+r[a+20>>2]|0}r[h>>2]=m}if(u=u+1|0,!((u|0)<r[a+8>>2]))break}}if(z=z+1|0,(En|0)==(z|0))break e;if(u=r[a+56>>2],h=r[u>>2],!(r[u+4>>2]-h>>2>>>0>z>>>0))break}ps(),Xe()}return 1}function eTe(a,s,c,u,f,h){a=a|0,s=s|0,c=c|0,u=u|0,f=f|0,h=h|0;var m=0,y=0,A=_e(0),T=0,R=_e(0),N=0,z=_e(0),U=_e(0),H=_e(0),Z=0,ie=_e(0),ge=0,we=_e(0),Me=_e(0),Ie=_e(0),We=_e(0),ut=_e(0),vt=_e(0),Pt=_e(0),Wt=_e(0),gn=_e(0),En=0,Nn=_e(0);r[a+64>>2]=h,r[a+72>>2]=f,h=Te((f&1073741823)!=(f|0)?-1:f<<2),u=r[a+68>>2],r[a+68>>2]=h,u&&W(u),r[a+8>>2]=f,h=a+32|0,m=r[h>>2],u=r[a+36>>2]-m>>2;e:{if(u>>>0<f>>>0){Xr(h,f-u|0);break e}if(u>>>0<=f>>>0)break e;r[a+36>>2]=m+(f<<2)}e:{if(u=r[a+56>>2],m=r[u+4>>2],h=r[u>>2],u=m-h|0,(u|0)<=0)break e;if((h|0)!=(m|0))for(u=u>>>2|0,En=u>>>0>1?u:1;;){R=_e(0),m=re-48|0,re=m,y=-1;t:{n:{if(u=r[(N<<2)+h>>2],(u|0)==-1||(T=r[a+48>>2],h=u+1|0,h=(h>>>0)%3|0?h:u-2|0,(h|0)!=-1&&(y=r[r[T>>2]+(h<<2)>>2]),h=-1,u=u+((u>>>0)%3|0?-1:2)|0,(u|0)!=-1&&(h=r[r[T>>2]+(u<<2)>>2]),u=r[a+52>>2],T=r[u>>2],u=r[u+4>>2]-T>>2,u>>>0<=y>>>0|u>>>0<=h>>>0))break n;u=r[T+(y<<2)>>2],T=r[T+(h<<2)>>2];i:{if(!((T|0)>=(N|0)|(u|0)>=(N|0))){if(h=r[a+72>>2],y=(ne(h,T)<<2)+c|0,z=_e(r[y+4>>2]),h=(ne(u,h)<<2)+c|0,ie=_e(r[h+4>>2]),we=_e(r[y>>2]),vt=_e(r[h>>2]),!(we!=vt|z!=ie)){if(u=r[a+68>>2],_e(ui(z))<_e(2147483648)?h=~~z:h=-2147483648,r[u+4>>2]=h,_e(ui(we))<_e(2147483648)){r[u>>2]=~~we;break i}r[u>>2]=-2147483648;break i}h=r[r[a+64>>2]+(N<<2)>>2],r[m+40>>2]=0,r[m+32>>2]=0,r[m+36>>2]=0,y=r[a+60>>2],I[y+84|0]||(h=r[r[y+68>>2]+(h<<2)>>2]),Gf(y,h,D[y+24|0],m+32|0),h=r[r[a+64>>2]+(u<<2)>>2],r[m+24>>2]=0,r[m+16>>2]=0,r[m+20>>2]=0,u=r[a+60>>2],I[u+84|0]||(h=r[r[u+68>>2]+(h<<2)>>2]),Gf(u,h,D[u+24|0],m+16|0),h=r[r[a+64>>2]+(T<<2)>>2],r[m+8>>2]=0,r[m>>2]=0,r[m+4>>2]=0,u=r[a+60>>2],I[u+84|0]||(h=r[r[u+68>>2]+(h<<2)>>2]),Gf(u,h,D[u+24|0],m),Me=At[m+40>>2],Ie=At[m+36>>2],Nn=At[m+32>>2],U=At[m+24>>2],A=_e(At[m+8>>2]-U),Wt=At[m+20>>2],We=_e(At[m+4>>2]-Wt),gn=At[m+16>>2],ut=_e(At[m>>2]-gn),Pt=_e(_e(A*A)+_e(_e(We*We)+_e(_e(ut*ut)+_e(0))));r:{if(!(Pt>_e(0))&&(H=_e(0),r[a+88>>2]>257))break r;U=_e(Me-U),Me=_e(Ie-Wt),Ie=_e(Nn-gn),R=_e(_e(_e(A*U)+_e(_e(We*Me)+_e(_e(ut*Ie)+_e(0))))/Pt),A=_e(U-_e(A*R)),U=_e(A*A),A=_e(Me-_e(We*R)),H=_e(A*A),A=_e(Ie-_e(ut*R)),H=_e(yB(_e(_e(U+_e(H+_e(_e(A*A)+_e(0))))/Pt)))}U=H,u=r[a+80>>2]-1|0,h=r[r[a+76>>2]+(u>>>3&536870908)>>2],r[a+80>>2]=u,A=_e(z-ie),H=_e(_e(A*R)+ie),ie=_e(we-vt),z=_e(ie*U),u=h>>>u&1,z=_e(H+(u?z:_e(-z))),H=_e(_e(ie*R)+vt),R=_e(A*U),R=_e(H+(u?_e(-R):R));r:{if(R!=R){h=r[a+68>>2],r[h>>2]=-2147483648;break r}h=r[a+68>>2],ge=Oo(+R+.5);s:{if(ui(ge)<2147483648){u=~~ge;break s}u=-2147483648}r[h>>2]=u}ge=Oo(+z+.5);r:{if(ui(ge)<2147483648){u=~~ge;break r}u=-2147483648}r[h+4>>2]=z!=z?-2147483648:u;break i}r:{if((u|0)<(N|0)){h=r[a+72>>2],u=ne(u,h);break r}if(h=0,(N|0)<=0){if(r[a+72>>2]<=0)break i;for(u=r[a+68>>2];r[u+(h<<2)>>2]=0,h=h+1|0,(h|0)<r[a+72>>2];);break i}h=r[a+72>>2],u=ne(h,N-1|0)}if((h|0)<=0)break i;for(y=r[a+68>>2],h=0;r[y+(h<<2)>>2]=r[(u+h<<2)+c>>2],h=h+1|0,(h|0)<r[a+72>>2];);}re=m+48|0;break t}ps(),Xe()}t:{if(r[a+8>>2]<=0)break t;for(y=r[a+32>>2],T=r[a+68>>2],h=0;;){u=h<<2,m=r[u+T>>2],Z=r[a+16>>2];n:{if((m|0)>(Z|0)){r[u+y>>2]=Z;break n}if(u=u+y|0,Z=r[a+12>>2],(Z|0)>(m|0)){r[u>>2]=Z;break n}r[u>>2]=m}if(h=h+1|0,m=r[a+8>>2],!((h|0)<(m|0)))break}if(u=0,(m|0)<=0)break t;for(h=ne(f,N)<<2,T=h+c|0,Z=s+h|0;;){m=u<<2,h=m+T|0,m=r[m+Z>>2]+r[m+y>>2]|0,r[h>>2]=m;n:{if((m|0)>r[a+16>>2])m=m-r[a+20>>2]|0;else{if((m|0)>=r[a+12>>2])break n;m=m+r[a+20>>2]|0}r[h>>2]=m}if(u=u+1|0,!((u|0)<r[a+8>>2]))break}}if(N=N+1|0,(En|0)==(N|0))break e;if(u=r[a+56>>2],h=r[u>>2],!(r[u+4>>2]-h>>2>>>0>N>>>0))break}ps(),Xe()}return 1}function tTe(a,s,c,u){a=a|0,s=s|0,c=c|0,u=u|0;var f=_e(0),h=0,m=0,y=0,A=0,T=0,R=_e(0),N=0,z=0,U=0,H=0,Z=0,ie=0,ge=0,we=0,Me=0,Ie=0,We=0,ut=0,vt=0,Pt=0,Wt=0;if(r[c>>2]==r[c+4>>2]){m=r[u+80>>2],We=re-16|0,re=We,T=r[a+4>>2],y=r[u+48>>2],u=r[r[u>>2]>>2],A=D[s+24|0],c=We+8|0,r[c>>2]=1065353216,Ie=c,At[c>>2]=_e(-1<<T^-1)/At[a+20>>2],ut=Te((A|0)!=(A&1073741823)?-1:A<<2);e:{if(!m|(A|0)<=0)break e;if(we=u+y|0,Pt=r[s>>2],c=r[s+48>>2],Wt=r[s+44>>2],vt=r[s+40>>2],!I[s+84|0]){for(U=r[s+68>>2],Me=A&-2,T=A&1,s=0;;){if(h=r[Pt>>2],u=rt(vt,Wt,r[U+(H<<2)>>2],0)+c|0,Z=$e(ut,h+u|0,vt),R=At[Ie>>2],N=r[a+8>>2],u=0,z=0,(A|0)!=1)for(;;){h=we+(s<<2)|0,ie=u<<2,f=_e(Oo(_e(_e(R*_e(At[ie+Z>>2]-At[N+ie>>2]))+_e(.5))));t:{if(_e(ui(f))<_e(2147483648)){y=~~f;break t}y=-2147483648}r[h>>2]=y,y=ie|4,f=_e(Oo(_e(_e(R*_e(At[y+Z>>2]-At[N+y>>2]))+_e(.5))));t:{if(_e(ui(f))<_e(2147483648)){y=~~f;break t}y=-2147483648}if(r[h+4>>2]=y,u=u+2|0,s=s+2|0,z=z+2|0,(Me|0)==(z|0))break}if(T){h=we+(s<<2)|0,u=u<<2,f=_e(Oo(_e(_e(R*_e(At[u+Z>>2]-At[u+N>>2]))+_e(.5))));t:{if(_e(ui(f))<_e(2147483648)){u=~~f;break t}u=-2147483648}r[h>>2]=u,s=s+1|0}if(H=H+1|0,(m|0)==(H|0))break}break e}for(U=A&-2,Me=A&1,s=0;;){if(y=r[Pt>>2],u=rt(vt,Wt,H,h)+c|0,Z=$e(ut,y+u|0,vt),R=At[Ie>>2],N=r[a+8>>2],u=0,z=0,(A|0)!=1)for(;;){y=we+(s<<2)|0,ie=u<<2,f=_e(Oo(_e(_e(R*_e(At[ie+Z>>2]-At[N+ie>>2]))+_e(.5))));t:{if(_e(ui(f))<_e(2147483648)){T=~~f;break t}T=-2147483648}r[y>>2]=T,T=ie|4,f=_e(Oo(_e(_e(R*_e(At[T+Z>>2]-At[N+T>>2]))+_e(.5))));t:{if(_e(ui(f))<_e(2147483648)){T=~~f;break t}T=-2147483648}if(r[y+4>>2]=T,u=u+2|0,s=s+2|0,z=z+2|0,(U|0)==(z|0))break}if(Me){y=we+(s<<2)|0,u=u<<2,f=_e(Oo(_e(_e(R*_e(At[u+Z>>2]-At[u+N>>2]))+_e(.5))));t:{if(_e(ui(f))<_e(2147483648)){u=~~f;break t}u=-2147483648}r[y>>2]=u,s=s+1|0}if(u=H+1|0,h=u?h:h+1|0,H=u,!((m|0)!=(u|0)|h))break}}return W(ut),re=We+16|0,1}We=re-16|0,re=We,Ie=r[a+4>>2],m=r[u+48>>2],h=r[r[u>>2]>>2],ge=D[s+24|0],u=We+8|0,r[u>>2]=1065353216,y=u,At[u>>2]=_e(-1<<Ie^-1)/At[a+20>>2],ut=Te((ge|0)!=(ge&1073741823)?-1:ge<<2),Pt=r[c>>2],c=r[c+4>>2]-Pt|0;e:{if(!c|(ge|0)<=0)break e;if(we=h+m|0,Wt=r[s>>2],u=r[s+48>>2],vt=r[s+44>>2],H=r[s+40>>2],c=c>>2,ie=c>>>0>1?c:1,I[s+84|0]){for(T=ge&-2,Ie=ge&1,s=0;;){if(h=r[Wt>>2],c=rt(H,vt,r[Pt+(z<<2)>>2],0)+u|0,N=$e(ut,h+c|0,H),R=At[y>>2],U=r[a+8>>2],c=0,A=0,(ge|0)!=1)for(;;){h=we+(s<<2)|0,Me=c<<2,f=_e(Oo(_e(_e(R*_e(At[Me+N>>2]-At[U+Me>>2]))+_e(.5))));t:{if(_e(ui(f))<_e(2147483648)){m=~~f;break t}m=-2147483648}r[h>>2]=m,m=Me|4,f=_e(Oo(_e(_e(R*_e(At[m+N>>2]-At[U+m>>2]))+_e(.5))));t:{if(_e(ui(f))<_e(2147483648)){m=~~f;break t}m=-2147483648}if(r[h+4>>2]=m,c=c+2|0,s=s+2|0,A=A+2|0,(T|0)==(A|0))break}if(Ie){h=we+(s<<2)|0,c=c<<2,f=_e(Oo(_e(_e(R*_e(At[c+N>>2]-At[c+U>>2]))+_e(.5))));t:{if(_e(ui(f))<_e(2147483648)){c=~~f;break t}c=-2147483648}r[h>>2]=c,s=s+1|0}if(z=z+1|0,(ie|0)==(z|0))break}break e}for(Me=r[s+68>>2],T=ge&-2,Ie=ge&1,s=0;;){if(h=r[Wt>>2],c=rt(H,vt,r[Me+(r[Pt+(z<<2)>>2]<<2)>>2],0)+u|0,Z=$e(ut,h+c|0,H),R=At[y>>2],N=r[a+8>>2],c=0,A=0,(ge|0)!=1)for(;;){h=we+(s<<2)|0,U=c<<2,f=_e(Oo(_e(_e(R*_e(At[U+Z>>2]-At[N+U>>2]))+_e(.5))));t:{if(_e(ui(f))<_e(2147483648)){m=~~f;break t}m=-2147483648}r[h>>2]=m,m=U|4,f=_e(Oo(_e(_e(R*_e(At[m+Z>>2]-At[N+m>>2]))+_e(.5))));t:{if(_e(ui(f))<_e(2147483648)){m=~~f;break t}m=-2147483648}if(r[h+4>>2]=m,c=c+2|0,s=s+2|0,A=A+2|0,(T|0)==(A|0))break}if(Ie){h=we+(s<<2)|0,c=c<<2,f=_e(Oo(_e(_e(R*_e(At[c+Z>>2]-At[c+N>>2]))+_e(.5))));t:{if(_e(ui(f))<_e(2147483648)){c=~~f;break t}c=-2147483648}r[h>>2]=c,s=s+1|0}if(z=z+1|0,(ie|0)==(z|0))break}}return W(ut),re=We+16|0,1}function nTe(a,s){a=a|0,s=s|0;var c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0,ie=0,ge=0;h=re-704|0,re=h,z=1;e:{t:{n:{i:{if(Ut[s+38>>1]<515||(z=0,c=r[s+20>>2],f=r[s+12>>2],u=r[s+16>>2],(c|0)>=(f|0)&u>>>0>=Ue[s+8>>2]|(c|0)>(f|0)))break i;if(H=I[u+r[s>>2]|0],u=u+1|0,c=u?c:c+1|0,r[s+16>>2]=u,r[s+20>>2]=c,U=r[r[(pt[r[r[a>>2]+28>>2]](a)|0)+4>>2]+80>>2],c=pt[r[r[a>>2]+24>>2]](a)|0,r[h+696>>2]=0,r[h+688>>2]=0,r[h+692>>2]=0,c){if(c>>>0>=214748365)break n;c=ne(c,20),u=Te(c),r[h+688>>2]=u,r[h+696>>2]=c+u,c=ne((c-20>>>0)/20|0,20)+20|0,ie=h,ge=Ct(u,0,c)+c|0,r[ie+692>>2]=ge}r:{if((pt[r[r[a>>2]+24>>2]](a)|0)>0)for(;;){if(c=pt[r[r[a>>2]+20>>2]](a,N)|0,f=r[r[r[(pt[r[r[a>>2]+28>>2]](a)|0)+4>>2]+8>>2]+(c<<2)>>2],Ym(f,U),D[f+84|0]=1,r[f+72>>2]=r[f+68>>2],c=r[f+28>>2],c>>>0>9)break r;s:{a:{o:{if(u=1<<c,!(u&42)){if(u&84)break s;if((c|0)!=9)break r;if(c=D[f+24|0],u=$v(h),m=c,c=ne(c,r[3409]),KM(u,r[f+56>>2],m,6,0,c,c>>31),f=Te(96),c=HM(f,u),r[h+656>>2]=f,D[c+84|0]=1,r[c+72>>2]=r[c+68>>2],Ym(c,U),c=r[a+64>>2],c>>>0>=Ue[a+68>>2])break o;u=r[h+656>>2],r[h+656>>2]=0,r[c>>2]=u,u=c+4|0,r[a+64>>2]=u;break a}if(u=0,D[f+24|0]<=0)break s;for(;;){c=r[a+52>>2],m=r[a+56>>2];c:{if(c>>>0<m>>>0){r[c>>2]=0,r[a+52>>2]=c+4;break c}if(y=r[a+48>>2],R=c-y|0,T=R>>2,c=T+1|0,c>>>0>=1073741824)break t;if(Z=T<<2,m=m-y|0,T=m>>1,m=m>>>0<2147483644?c>>>0>T>>>0?c:T:1073741823,m){if(m>>>0>=1073741824)break e;c=Te(m<<2)}else c=0;if(T=Z+c|0,r[T>>2]=0,(R|0)>0&&$e(c,y,R),r[a+56>>2]=c+(m<<2),r[a+52>>2]=T+4,r[a+48>>2]=c,!y)break c;W(y)}if(u=u+1|0,!((u|0)<D[f+24|0]))break}break s}u=0;o:{c:{l:{if(f=r[a+60>>2],y=r[a+64>>2]-f>>2,c=y+1|0,c>>>0<1073741824){if(f=r[a+68>>2]-f|0,m=f>>1,f=f>>>0<2147483644?c>>>0>m>>>0?c:m:1073741823,f){if(f>>>0>=1073741824)break l;u=Te(f<<2)}if(m=r[h+656>>2],r[h+656>>2]=0,c=(y<<2)+u|0,r[c>>2]=m,y=(f<<2)+u|0,m=c+4|0,u=r[a+64>>2],f=r[a+60>>2],(u|0)==(f|0))break c;for(;u=u-4|0,R=r[u>>2],r[u>>2]=0,c=c-4|0,r[c>>2]=R,(u|0)!=(f|0););if(r[a+68>>2]=y,u=r[a+64>>2],r[a+64>>2]=m,f=r[a+60>>2],r[a+60>>2]=c,(u|0)==(f|0))break o;for(;u=u-4|0,c=r[u>>2],r[u>>2]=0,c&&ha(c),(u|0)!=(f|0););break o}jt(),Xe()}qn(1336),Xe()}r[a+68>>2]=y,r[a+64>>2]=m,r[a+60>>2]=c}f&&W(f),u=r[a+64>>2]}if(f=r[u-4>>2],c=r[h+656>>2],r[h+656>>2]=0,!c)break s;ha(c)}if(y=r[f+28>>2],c=y-1|0,c>>>0<=10?u=r[(c<<2)+13616>>2]:u=-1,c=r[h+688>>2]+ne(N,20)|0,m=D[f+24|0],r[c+16>>2]=m,r[c+12>>2]=(u|0)>0?u:0,r[c+8>>2]=y,r[c+4>>2]=A,r[c>>2]=f,A=m+A|0,N=N+1|0,!((pt[r[r[a>>2]+24>>2]](a)|0)>(N|0)))break}a=zB(h+656|0,h+688|0);s:{a:{o:switch(H|0){case 0:if(c=Dv(h,A),s=Eee(c,s,a),Uv(c),s)break a;break s;case 1:if(c=Dv(h,A),s=See(c,s,a),Uv(c),s)break a;break s;case 2:if(c=Pv(h,A),s=Tee(c,s,a),Fv(c),s)break a;break s;case 3:if(c=Pv(h,A),s=Mee(c,s,a),Fv(c),s)break a;break s;case 4:if(c=Yd(h,A),s=xee(c,s,a),Xd(c),s)break a;break s;case 5:if(c=Yd(h,A),s=kee(c,s,a),Xd(c),s)break a;break s;case 6:break o;default:break s}if(c=Yd(h,A),s=Cee(c,s,a),Xd(c),!s)break s}z=1}if(s=r[a+16>>2],s&&(r[a+20>>2]=s,W(s)),s=r[a>>2],!s)break r;r[a+4>>2]=s,W(s)}if(a=r[h+688>>2],!a)break i;r[h+692>>2]=a,W(a)}return re=h+704|0,z|0}jt(),Xe()}jt(),Xe()}qn(1336),Xe()}function Iee(a,s,c,u){var f=0,h=0,m=0,y=0,A=0,T=0,R=0;h=re-80|0,re=h,f=r[c+36>>2],r[h+72>>2]=r[c+32>>2],r[h+76>>2]=f,m=r[c+28>>2],f=h- -64|0,r[f>>2]=r[c+24>>2],r[f+4>>2]=m,f=r[c+20>>2],r[h+56>>2]=r[c+16>>2],r[h+60>>2]=f,f=r[c+12>>2],r[h+48>>2]=r[c+8>>2],r[h+52>>2]=f,f=r[c+4>>2],r[h+40>>2]=r[c>>2],r[h+44>>2]=f,NM(a,h+40|0,h+24|0);e:{if(r[a>>2])break e;if(T=a+4|0,D[a+15|0]<0&&W(r[T>>2]),I[h+31|0]){s=Te(32),c=I[1665]|I[1666]<<8|(I[1667]<<16|I[1668]<<24),D[s+23|0]=c,D[s+24|0]=c>>>8,D[s+25|0]=c>>>16,D[s+26|0]=c>>>24,c=I[1662]|I[1663]<<8|(I[1664]<<16|I[1665]<<24),u=I[1658]|I[1659]<<8|(I[1660]<<16|I[1661]<<24),D[s+16|0]=u,D[s+17|0]=u>>>8,D[s+18|0]=u>>>16,D[s+19|0]=u>>>24,D[s+20|0]=c,D[s+21|0]=c>>>8,D[s+22|0]=c>>>16,D[s+23|0]=c>>>24,c=I[1654]|I[1655]<<8|(I[1656]<<16|I[1657]<<24),u=I[1650]|I[1651]<<8|(I[1652]<<16|I[1653]<<24),D[s+8|0]=u,D[s+9|0]=u>>>8,D[s+10|0]=u>>>16,D[s+11|0]=u>>>24,D[s+12|0]=c,D[s+13|0]=c>>>8,D[s+14|0]=c>>>16,D[s+15|0]=c>>>24,c=I[1646]|I[1647]<<8|(I[1648]<<16|I[1649]<<24),u=I[1642]|I[1643]<<8|(I[1644]<<16|I[1645]<<24),D[s|0]=u,D[s+1|0]=u>>>8,D[s+2|0]=u>>>16,D[s+3|0]=u>>>24,D[s+4|0]=c,D[s+5|0]=c>>>8,D[s+6|0]=c>>>16,D[s+7|0]=c>>>24,D[s+27|0]=0,r[a>>2]=-1,Ri(T,s,27),W(s);break e}A=re-16|0,re=A;t:{n:switch(D[h+32|0]){case 0:f=Te(44),r[f>>2]=0,r[f+4>>2]=0,r[f+40>>2]=0,r[f+32>>2]=0,r[f+36>>2]=0,r[f+24>>2]=0,r[f+28>>2]=0,r[f+16>>2]=0,r[f+20>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0,m=KB(f),r[f>>2]=13528,r[h+8>>2]=0,r[h+12>>2]=0,r[h>>2]=0,r[h+4>>2]=0,r[h+16>>2]=m;break t;case 1:f=Te(44),r[f>>2]=0,r[f+4>>2]=0,r[f+40>>2]=0,r[f+32>>2]=0,r[f+36>>2]=0,r[f+24>>2]=0,r[f+28>>2]=0,r[f+16>>2]=0,r[f+20>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0,m=KB(f),r[f>>2]=13436,r[h+8>>2]=0,r[h+12>>2]=0,r[h>>2]=0,r[h+4>>2]=0,r[h+16>>2]=m;break t;default:break n}m=Te(32),f=I[1694]|I[1695]<<8|(I[1696]<<16|I[1697]<<24),D[m+24|0]=f,D[m+25|0]=f>>>8,D[m+26|0]=f>>>16,D[m+27|0]=f>>>24,f=I[1690]|I[1691]<<8|(I[1692]<<16|I[1693]<<24),y=I[1686]|I[1687]<<8|(I[1688]<<16|I[1689]<<24),D[m+16|0]=y,D[m+17|0]=y>>>8,D[m+18|0]=y>>>16,D[m+19|0]=y>>>24,D[m+20|0]=f,D[m+21|0]=f>>>8,D[m+22|0]=f>>>16,D[m+23|0]=f>>>24,f=I[1682]|I[1683]<<8|(I[1684]<<16|I[1685]<<24),y=I[1678]|I[1679]<<8|(I[1680]<<16|I[1681]<<24),D[m+8|0]=y,D[m+9|0]=y>>>8,D[m+10|0]=y>>>16,D[m+11|0]=y>>>24,D[m+12|0]=f,D[m+13|0]=f>>>8,D[m+14|0]=f>>>16,D[m+15|0]=f>>>24,f=I[1674]|I[1675]<<8|(I[1676]<<16|I[1677]<<24),y=I[1670]|I[1671]<<8|(I[1672]<<16|I[1673]<<24),D[m|0]=y,D[m+1|0]=y>>>8,D[m+2|0]=y>>>16,D[m+3|0]=y>>>24,D[m+4|0]=f,D[m+5|0]=f>>>8,D[m+6|0]=f>>>16,D[m+7|0]=f>>>24,D[m+28|0]=0,r[A>>2]=-1,f=A|4,Ri(f,m,28),R=D[A+15|0],r[h>>2]=r[A>>2],y=h+4|0;n:{if((R|0)>=0){R=r[f+4>>2],r[y>>2]=r[f>>2],r[y+4>>2]=R,r[y+8>>2]=r[f+8>>2];break n}Ri(y,r[A+4>>2],r[A+8>>2])}r[h+16>>2]=0,D[A+15|0]<0&&W(r[A+4>>2]),W(m)}re=A+16|0,f=r[h>>2];t:{if(f){if(r[a>>2]=f,D[h+15|0]>=0){a=h|4,s=r[a+4>>2],r[T>>2]=r[a>>2],r[T+4>>2]=s,r[T+8>>2]=r[a+8>>2];break t}Ri(T,r[h+4>>2],r[h+8>>2]);break t}f=r[h+16>>2],r[h+16>>2]=0,wee(a,f,s,c,u),r[a>>2]||(D[T+11|0]<0&&W(r[T>>2]),r[a>>2]=0,r[a+4>>2]=0,r[a+8>>2]=0,r[a+12>>2]=0),pt[r[r[f>>2]+4>>2]](f)}if(a=r[h+16>>2],r[h+16>>2]=0,a&&pt[r[r[a>>2]+4>>2]](a),D[h+15|0]>=0)break e;W(r[h+4>>2])}re=h+80|0}function EB(a,s){var c=0,u=0,f=0,h=0,m=0,y=0;if(c=r[a+4>>2],u=r[a>>2],h=(c-u|0)/144|0,h>>>0<s>>>0){u=a,m=s-h|0,c=r[a+8>>2],a=r[a+4>>2];e:{if(m>>>0<=(c-a|0)/144>>>0){if(m){for(s=ne(m,144)+a|0;r[a>>2]=-1,Ste(a+4|0),r[a+104>>2]=0,r[a+108>>2]=0,D[a+100|0]=1,r[a+112>>2]=0,r[a+116>>2]=0,r[a+120>>2]=0,r[a+124>>2]=0,r[a+128>>2]=0,r[a+132>>2]=0,r[a+136>>2]=0,r[a+140>>2]=0,a=a+144|0,(s|0)!=(a|0););a=s}r[u+4>>2]=a;break e}t:{n:{i:{if(s=a,a=r[u>>2],h=(s-a|0)/144|0,y=h+m|0,y>>>0<29826162){if(s=(c-a|0)/144|0,a=s<<1,f=s>>>0<14913080?a>>>0<y>>>0?y:a:29826161,f){if(f>>>0>=29826162)break i;c=Te(ne(f,144))}else c=0;for(s=c+ne(h,144)|0,y=s+ne(m,144)|0,a=s;r[a>>2]=-1,Ste(a+4|0),r[a+104>>2]=0,r[a+108>>2]=0,D[a+100|0]=1,r[a+112>>2]=0,r[a+116>>2]=0,r[a+120>>2]=0,r[a+124>>2]=0,r[a+128>>2]=0,r[a+132>>2]=0,r[a+136>>2]=0,r[a+140>>2]=0,a=a+144|0,(y|0)!=(a|0););if(h=c+ne(f,144)|0,a=r[u+4>>2],f=r[u>>2],(a|0)==(f|0))break n;for(;s=s-144|0,a=a-144|0,r[s>>2]=r[a>>2],r[s+4>>2]=r[a+4>>2],r[s+8>>2]=r[a+8>>2],r[s+12>>2]=r[a+12>>2],r[a+12>>2]=0,r[a+4>>2]=0,r[a+8>>2]=0,r[s+16>>2]=r[a+16>>2],r[s+20>>2]=r[a+20>>2],r[s+24>>2]=r[a+24>>2],r[a+24>>2]=0,r[a+16>>2]=0,r[a+20>>2]=0,c=I[a+28|0],r[s+40>>2]=0,r[s+32>>2]=0,r[s+36>>2]=0,D[s+28|0]=c,r[s+32>>2]=r[a+32>>2],r[s+36>>2]=r[a+36>>2],r[s+40>>2]=r[a+40>>2],r[a+40>>2]=0,r[a+32>>2]=0,r[a+36>>2]=0,r[s+52>>2]=0,r[s+44>>2]=0,r[s+48>>2]=0,r[s+44>>2]=r[a+44>>2],r[s+48>>2]=r[a+48>>2],r[s+52>>2]=r[a+52>>2],r[a+52>>2]=0,r[a+44>>2]=0,r[a+48>>2]=0,c=s- -64|0,r[c>>2]=0,r[s+56>>2]=0,r[s+60>>2]=0,r[s+56>>2]=r[a+56>>2],r[s+60>>2]=r[a+60>>2],m=c,c=a- -64|0,r[m>>2]=r[c>>2],r[c>>2]=0,r[a+56>>2]=0,r[a+60>>2]=0,r[s+68>>2]=r[a+68>>2],c=r[a+72>>2],r[s+84>>2]=0,r[s+76>>2]=0,r[s+80>>2]=0,r[s+72>>2]=c,r[s+76>>2]=r[a+76>>2],r[s+80>>2]=r[a+80>>2],r[s+84>>2]=r[a+84>>2],r[a+84>>2]=0,r[a+76>>2]=0,r[a+80>>2]=0,r[s+96>>2]=0,r[s+88>>2]=0,r[s+92>>2]=0,r[s+88>>2]=r[a+88>>2],r[s+92>>2]=r[a+92>>2],r[s+96>>2]=r[a+96>>2],r[a+96>>2]=0,r[a+88>>2]=0,r[a+92>>2]=0,c=I[a+100|0],r[s+112>>2]=0,r[s+104>>2]=0,r[s+108>>2]=0,D[s+100|0]=c,r[s+104>>2]=r[a+104>>2],r[s+108>>2]=r[a+108>>2],r[s+112>>2]=r[a+112>>2],r[a+112>>2]=0,r[a+104>>2]=0,r[a+108>>2]=0,r[s+124>>2]=0,r[s+116>>2]=0,r[s+120>>2]=0,r[s+116>>2]=r[a+116>>2],r[s+120>>2]=r[a+120>>2],r[s+124>>2]=r[a+124>>2],r[a+124>>2]=0,r[a+116>>2]=0,r[a+120>>2]=0,c=r[a+128>>2],r[s+140>>2]=0,r[s+132>>2]=0,r[s+136>>2]=0,r[s+128>>2]=c,r[s+132>>2]=r[a+132>>2],r[s+136>>2]=r[a+136>>2],r[s+140>>2]=r[a+140>>2],r[a+140>>2]=0,r[a+132>>2]=0,r[a+136>>2]=0,(a|0)!=(f|0););if(r[u+8>>2]=h,a=r[u+4>>2],r[u+4>>2]=y,f=r[u>>2],r[u>>2]=s,(a|0)==(f|0))break t;for(;s=r[a-12>>2],s&&(r[a-8>>2]=s,W(s)),s=r[a-28>>2],s&&(r[a-24>>2]=s,W(s)),s=r[a-40>>2],s&&(r[a-36>>2]=s,W(s)),YM(a-140|0),a=a-144|0,(f|0)!=(a|0););break t}jt(),Xe()}qn(1336),Xe()}r[u+8>>2]=h,r[u+4>>2]=y,r[u>>2]=s}f&&W(f)}return}if(s>>>0<h>>>0){if(u=u+ne(s,144)|0,(u|0)!=(c|0))for(;s=r[c-12>>2],s&&(r[c-8>>2]=s,W(s)),s=r[c-28>>2],s&&(r[c-24>>2]=s,W(s)),s=r[c-40>>2],s&&(r[c-36>>2]=s,W(s)),YM(c-140|0),c=c-144|0,(u|0)!=(c|0););r[a+4>>2]=u}}function Cv(a,s,c){a=a|0,s=s|0,c=c|0;var u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0,ie=0,ge=0,we=0,Me=0,Ie=0,We=0,ut=0,vt=0;f=re-96|0,re=f,u=r[a+16>>2],D[f+92|0]=1,r[f+88>>2]=s,r[f+84>>2]=s,r[f+80>>2]=u;e:{if((s|0)==-1||(z=r[a+20>>2],h=r[z>>2],u=r[r[u>>2]+(s<<2)>>2],u>>>0>=r[z+4>>2]-h>>2>>>0))break e;u=r[r[a+8>>2]+(r[h+(u<<2)>>2]<<2)>>2],h=r[a+4>>2],I[h+84|0]||(u=r[r[h+68>>2]+(u<<2)>>2]),r[f+72>>2]=0,r[f+76>>2]=0,z=f- -64|0,r[z>>2]=0,r[z+4>>2]=0,r[f+56>>2]=0,r[f+60>>2]=0,Hu(h,u,D[h+24|0],f+56|0),u=s+1|0,z=(u>>>0)%3|0?u:s-2|0,y=((s>>>0)%3|0?-1:2)+s|0;t:{n:{for(;;){h=z,u=y;i:{if(!r[a+28>>2]||(u=s+1|0,h=(u>>>0)%3|0?u:s-2|0,u=s-1|0,(s>>>0)%3|0))break i;u=s+2|0}if((h|0)==-1||(R=r[a+20>>2],s=r[R>>2],h=r[r[r[a+16>>2]>>2]+(h<<2)>>2],h>>>0>=r[R+4>>2]-s>>2>>>0))break t;if(h=r[r[a+8>>2]+(r[(h<<2)+s>>2]<<2)>>2],s=r[a+4>>2],I[s+84|0]||(h=r[r[s+68>>2]+(h<<2)>>2]),r[f+48>>2]=0,r[f+52>>2]=0,r[f+40>>2]=0,r[f+44>>2]=0,r[f+32>>2]=0,r[f+36>>2]=0,Hu(s,h,D[s+24|0],f+32|0),(u|0)==-1||(h=r[a+20>>2],s=r[h>>2],u=r[r[r[a+16>>2]>>2]+(u<<2)>>2],u>>>0>=r[h+4>>2]-s>>2>>>0))break n;if(h=r[r[a+8>>2]+(r[s+(u<<2)>>2]<<2)>>2],s=r[a+4>>2],I[s+84|0]||(h=r[r[s+68>>2]+(h<<2)>>2]),r[f+24>>2]=0,r[f+28>>2]=0,r[f+16>>2]=0,r[f+20>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0,Hu(s,h,D[s+24|0],f+8|0),u=r[f+8>>2],s=r[f+56>>2],h=u-s|0,R=r[f+60>>2],U=r[f+12>>2]-(R+(s>>>0>u>>>0)|0)|0,A=r[f+40>>2],u=r[f+64>>2],we=A-u|0,Me=r[f+68>>2],A=r[f+44>>2]-(Me+(u>>>0>A>>>0)|0)|0,Ie=rt(h,U,we,A),We=T-Ie|0,m=m-(nn+(T>>>0<Ie>>>0)|0)|0,ut=We,T=r[f+16>>2],Ie=T-u|0,Me=r[f+20>>2]-((u>>>0>T>>>0)+Me|0)|0,T=r[f+32>>2],We=T-s|0,R=r[f+36>>2]-((s>>>0>T>>>0)+R|0)|0,u=rt(Ie,Me,We,R),T=ut+u|0,s=nn+m|0,s=u>>>0>T>>>0?s+1|0:s,m=s,ut=H,Z=U,s=r[f+48>>2],u=r[f+72>>2],U=s-u|0,H=r[f+76>>2],vt=r[f+52>>2]-(H+(s>>>0<u>>>0)|0)|0,Z=rt(h,Z,U,vt),h=ut+Z|0,s=nn+N|0,s=h>>>0<Z>>>0?s+1|0:s,N=r[f+24>>2],Z=N-u|0,u=r[f+28>>2]-((u>>>0>N>>>0)+H|0)|0,N=rt(Z,u,We,R),H=h-N|0,N=s-(nn+(h>>>0<N>>>0)|0)|0,s=rt(Ie,Me,U,vt),h=ie-s|0,s=ge-(nn+(s>>>0>ie>>>0)|0)|0,ge=rt(Z,u,we,A),ie=ge+h|0,s=nn+s|0,s=ie>>>0<ge>>>0?s+1|0:s,ge=s,GM(f+80|0),s=r[f+88>>2],(s|0)==-1)break}s=ge>>31,h=s+ie|0,u=s,s=s+ge|0,R=h^u,y=u^(h>>>0<u>>>0?s+1|0:s),U=-1,h=2147483647,s=N>>31,A=s,u=s+H|0,s=s+N|0,s=u>>>0<A>>>0?s+1|0:s,u=u^A,s=s^A,A=s,we=u^-1,s=s^2147483647,z=m;i:{r:{if(!r[a+28>>2]){if((s|0)==(y|0)&R>>>0>we>>>0|s>>>0<y>>>0||(s=y+A|0,a=u+R|0,s=a>>>0<u>>>0?s+1|0:s,u=a,a=s,s=m>>31,h=s+T|0,y=m,m=s,s=y+s|0,s=h>>>0<m>>>0?s+1|0:s,y=h^m,h=y+u|0,m=s^m,s=h,m=m^2147483647,a=(m|0)==(a|0)&(y^-1)>>>0<u>>>0|a>>>0>m>>>0,m=!(a&0),a=a?-1:s,m&(a|0)<=536870912|(a|0)<536870912))break i;s=0,a=a>>>29|0;break r}s:{if((s|0)==(y|0)&R>>>0>we>>>0|s>>>0<y>>>0||(s=y+A|0,a=u+R|0,s=a>>>0<u>>>0?s+1|0:s,u=s,y=m,s=m>>31,m=s+T|0,A=y,y=s,s=A+s|0,s=m>>>0<y>>>0?s+1|0:s,m=m^y,s=s^y,y=s^2147483647,(y|0)==(u|0)&(m^-1)>>>0<a>>>0|u>>>0>y>>>0))break s;if(s=s+u|0,a=a+m|0,s=a>>>0<m>>>0?s+1|0:s,U=a,h=s,!s&a>>>0<536870913)break i}s=h>>>29|0,a=(h&536870911)<<3|U>>>29}T=ss(T,z,a,s),H=ss(H,N,a,s),ie=ss(ie,ge,a,s)}r[c+8>>2]=T,r[c+4>>2]=H,r[c>>2]=ie,re=f+96|0;return}ps(),Xe()}ps(),Xe()}ps(),Xe()}function Nee(a,s){a=a|0,s=s|0;var c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0;e:{if((s|0)<0||(u=r[a+12>>2],c=r[a+8>>2],u-c>>2>>>0<=s>>>0))break e;f=c+(s<<2)|0,h=r[f>>2],A=r[h+60>>2],m=r[h+56>>2],c=f+4|0;t:{if((c|0)!=(u|0)){for(;;){if(y=r[c>>2],r[c>>2]=0,r[f>>2]=y,h&&ha(h),f=f+4|0,c=c+4|0,(c|0)!=(u|0)){h=r[f>>2];continue}break}if(u=r[a+12>>2],(f|0)==(u|0))break t}for(;u=u-4|0,c=r[u>>2],r[u>>2]=0,c&&ha(c),(u|0)!=(f|0););}r[a+12>>2]=f,h=r[a+4>>2];t:{if(!h|(A|0)<0||(u=r[h+24>>2],c=r[h+28>>2],(u|0)==(c|0)))break t;for(;;){if((A|0)==r[r[u>>2]+24>>2]){f=u+4|0,A=r[h+28>>2];n:{if((f|0)!=(A|0)){for(;y=r[f>>2],r[f>>2]=0,c=r[u>>2],r[u>>2]=y,c&&(Qc(c+12|0,r[c+16>>2]),Kc(c,r[c+4>>2]),W(c)),u=u+4|0,f=f+4|0,(A|0)!=(f|0););if(f=r[h+28>>2],(f|0)==(u|0))break n}for(;f=f-4|0,c=r[f>>2],r[f>>2]=0,c&&(Qc(c+12|0,r[c+16>>2]),Kc(c,r[c+4>>2]),W(c)),(u|0)!=(f|0););}r[h+28>>2]=u;break t}if(u=u+4|0,(c|0)==(u|0))break}}t:{if((m|0)>4)break t;n:{if(f=ne(m,12)+a|0,u=r[f+20>>2],c=r[f+24>>2],(u|0)==(c|0))break n;for(;;){if(r[u>>2]==(s|0))break n;if(u=u+4|0,(c|0)==(u|0))break}break t}if((u|0)==(c|0))break t;h=u+4|0,c=c-h|0,c&&Hf(u,h,c),r[f+24>>2]=u+c}f=r[a+20>>2],c=r[a+24>>2]-f|0;t:{if(!c)break t;if(u=c>>2,h=u>>>0>1?u:1,A=h&1,u=0,c>>>0>=8)for(h=h&-2,c=0;m=u<<2,y=m+f|0,T=r[y>>2],(T|0)>(s|0)&&(r[y>>2]=T-1),m=f+(m|4)|0,y=r[m>>2],(y|0)>(s|0)&&(r[m>>2]=y-1),u=u+2|0,c=c+2|0,(h|0)!=(c|0););if(!A||(u=f+(u<<2)|0,c=r[u>>2],(c|0)<=(s|0)))break t;r[u>>2]=c-1}f=r[a+32>>2],c=r[a+36>>2]-f|0;t:{if(!c)break t;if(u=c>>2,h=u>>>0>1?u:1,A=h&1,u=0,c>>>0>=8)for(h=h&-2,c=0;m=u<<2,y=m+f|0,T=r[y>>2],(T|0)>(s|0)&&(r[y>>2]=T-1),m=f+(m|4)|0,y=r[m>>2],(y|0)>(s|0)&&(r[m>>2]=y-1),u=u+2|0,c=c+2|0,(h|0)!=(c|0););if(!A||(u=f+(u<<2)|0,c=r[u>>2],(c|0)<=(s|0)))break t;r[u>>2]=c-1}f=r[a+44>>2],c=r[a+48>>2]-f|0;t:{if(!c)break t;if(u=c>>2,h=u>>>0>1?u:1,A=h&1,u=0,c>>>0>=8)for(h=h&-2,c=0;m=u<<2,y=m+f|0,T=r[y>>2],(T|0)>(s|0)&&(r[y>>2]=T-1),m=f+(m|4)|0,y=r[m>>2],(y|0)>(s|0)&&(r[m>>2]=y-1),u=u+2|0,c=c+2|0,(h|0)!=(c|0););if(!A||(u=f+(u<<2)|0,c=r[u>>2],(c|0)<=(s|0)))break t;r[u>>2]=c-1}f=r[a+56>>2],c=r[a+60>>2]-f|0;t:{if(!c)break t;if(u=c>>2,h=u>>>0>1?u:1,A=h&1,u=0,c>>>0>=8)for(h=h&-2,c=0;m=u<<2,y=m+f|0,T=r[y>>2],(T|0)>(s|0)&&(r[y>>2]=T-1),m=f+(m|4)|0,y=r[m>>2],(y|0)>(s|0)&&(r[m>>2]=y-1),u=u+2|0,c=c+2|0,(h|0)!=(c|0););if(!A||(u=f+(u<<2)|0,c=r[u>>2],(c|0)<=(s|0)))break t;r[u>>2]=c-1}if(c=r[a+72>>2],a=r[a+68>>2],c=c-a|0,!c)break e;if(u=c>>2,f=u>>>0>1?u:1,h=f&1,u=0,c>>>0>=8)for(f=f&-2,c=0;A=u<<2,m=A+a|0,y=r[m>>2],(y|0)>(s|0)&&(r[m>>2]=y-1),A=a+(A|4)|0,m=r[A>>2],(m|0)>(s|0)&&(r[A>>2]=m-1),u=u+2|0,c=c+2|0,(f|0)!=(c|0););if(!h||(c=s,a=a+(u<<2)|0,s=r[a>>2],(c|0)>=(s|0)))break e;r[a>>2]=s-1}}function W(a){a=a|0;var s=0,c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0;e:{if(!a)break e;u=a-8|0,s=r[a-4>>2],a=s&-8,h=u+a|0;t:{if(s&1)break t;if(!(s&3)||(s=r[u>>2],u=u-s|0,u>>>0<Ue[4237]))break e;if(a=a+s|0,r[4238]!=(u|0)){if(s>>>0<=255){if(f=r[u+8>>2],s=s>>>3|0,c=r[u+12>>2],(c|0)==(f|0)){A=16932,T=r[4233]&Yi(s),r[A>>2]=T;break t}r[f+12>>2]=c,r[c+8>>2]=f;break t}y=r[u+24>>2],s=r[u+12>>2];n:{if((u|0)!=(s|0)){c=r[u+8>>2],r[c+12>>2]=s,r[s+8>>2]=c;break n}i:{if(f=u+20|0,c=r[f>>2],c||(f=u+16|0,c=r[f>>2],c))break i;s=0;break n}for(;m=f,s=c,f=s+20|0,c=r[f>>2],!(!c&&(f=s+16|0,c=r[s+16>>2],!c)););r[m>>2]=0}if(!y)break t;f=r[u+28>>2],c=(f<<2)+17236|0;n:{if(r[c>>2]==(u|0)){if(r[c>>2]=s,s)break n;A=16936,T=r[4234]&Yi(f),r[A>>2]=T;break t}if(r[y+(r[y+16>>2]==(u|0)?16:20)>>2]=s,!s)break t}if(r[s+24>>2]=y,c=r[u+16>>2],c&&(r[s+16>>2]=c,r[c+24>>2]=s),c=r[u+20>>2],!c)break t;r[s+20>>2]=c,r[c+24>>2]=s;break t}if(s=r[h+4>>2],(s&3)!=3)break t;r[4235]=a,r[h+4>>2]=s&-2,r[u+4>>2]=a|1,r[a+u>>2]=a;return}if(u>>>0>=h>>>0||(s=r[h+4>>2],!(s&1)))break e;t:{if(!(s&2)){if(r[4239]==(h|0)){if(r[4239]=u,a=r[4236]+a|0,r[4236]=a,r[u+4>>2]=a|1,r[4238]!=(u|0))break e;r[4235]=0,r[4238]=0;return}if(r[4238]==(h|0)){r[4238]=u,a=r[4235]+a|0,r[4235]=a,r[u+4>>2]=a|1,r[a+u>>2]=a;return}a=(s&-8)+a|0;n:{if(s>>>0<=255){if(f=r[h+8>>2],s=s>>>3|0,c=r[h+12>>2],(c|0)==(f|0)){A=16932,T=r[4233]&Yi(s),r[A>>2]=T;break n}r[f+12>>2]=c,r[c+8>>2]=f;break n}y=r[h+24>>2],s=r[h+12>>2];i:{if((h|0)!=(s|0)){c=r[h+8>>2],r[c+12>>2]=s,r[s+8>>2]=c;break i}r:{if(f=h+20|0,c=r[f>>2],c||(f=h+16|0,c=r[f>>2],c))break r;s=0;break i}for(;m=f,s=c,f=s+20|0,c=r[f>>2],!(!c&&(f=s+16|0,c=r[s+16>>2],!c)););r[m>>2]=0}if(!y)break n;f=r[h+28>>2],c=(f<<2)+17236|0;i:{if(r[c>>2]==(h|0)){if(r[c>>2]=s,s)break i;A=16936,T=r[4234]&Yi(f),r[A>>2]=T;break n}if(r[y+(r[y+16>>2]==(h|0)?16:20)>>2]=s,!s)break n}if(r[s+24>>2]=y,c=r[h+16>>2],c&&(r[s+16>>2]=c,r[c+24>>2]=s),c=r[h+20>>2],!c)break n;r[s+20>>2]=c,r[c+24>>2]=s}if(r[u+4>>2]=a|1,r[a+u>>2]=a,r[4238]!=(u|0))break t;r[4235]=a;return}r[h+4>>2]=s&-2,r[u+4>>2]=a|1,r[a+u>>2]=a}if(a>>>0<=255){a=a>>>3|0,s=(a<<3)+16972|0,c=r[4233],a=1<<a;t:{if(!(c&a)){r[4233]=a|c,a=s;break t}a=r[s+8>>2]}r[s+8>>2]=u,r[a+12>>2]=u,r[u+12>>2]=s,r[u+8>>2]=a;return}f=31,r[u+16>>2]=0,r[u+20>>2]=0,a>>>0<=16777215&&(s=a>>>8|0,m=s+1048320>>>16&8,s=s<<m,f=s+520192>>>16&4,s=s<<f,c=s+245760>>>16&2,s=(s<<c>>>15|0)-(c|(f|m))|0,f=(s<<1|a>>>s+21&1)+28|0),r[u+28>>2]=f,m=(f<<2)+17236|0;t:{n:{c=r[4234],s=1<<f;i:{if(!(c&s)){r[4234]=s|c,r[m>>2]=u,r[u+24>>2]=m;break i}for(f=a<<((f|0)==31?0:25-(f>>>1|0)|0),s=r[m>>2];;){if(c=s,(r[s+4>>2]&-8)==(a|0))break n;if(s=f>>>29|0,f=f<<1,m=c+(s&4)|0,s=r[m+16>>2],!s)break}r[m+16>>2]=u,r[u+24>>2]=c}r[u+12>>2]=u,r[u+8>>2]=u;break t}a=r[c+8>>2],r[a+12>>2]=u,r[c+8>>2]=u,r[u+24>>2]=0,r[u+12>>2]=c,r[u+8>>2]=a}a=r[4241]-1|0,r[4241]=a||-1}}function SB(a,s,c,u){var f=0,h=0,m=0,y=0,A=0,T=0,R=_e(0),N=0,z=0,U=_e(0);T=r[c>>2];e:{t:{if(h=r[s+4>>2],!h)break t;m=Xv(h);n:{if(m>>>0>=2){if(f=T,f>>>0>=h>>>0&&(f=(T>>>0)%(h>>>0)|0),c=r[r[s>>2]+(f<<2)>>2],!c)break t;if(m>>>0<=1)break n;for(;;){if(c=r[c>>2],!c||(m=r[c+4>>2],(m|0)!=(T|0)&&(h>>>0<=m>>>0&&(m=(m>>>0)%(h>>>0)|0),(f|0)!=(m|0))))break t;if(r[c+8>>2]==(T|0))break}s=0;break e}if(f=h-1&T,c=r[r[s>>2]+(f<<2)>>2],!c)break t}for(m=h-1|0;;){if(c=r[c>>2],!c||(y=r[c+4>>2],(y|0)!=(T|0)&(m&y)!=(f|0)))break t;if(r[c+8>>2]==(T|0))break}s=0;break e}c=Te(16),u=r[r[u>>2]>>2],r[c+12>>2]=0,r[c+8>>2]=u,r[c+4>>2]=T,r[c>>2]=0,U=_e(r[s+12>>2]+1>>>0),R=At[s+16>>2];t:{if(!(U>_e(R*_e(h>>>0)))&&h)break t;m=(h-1&h)!=0|h>>>0<3|h<<1,f=2,R=_e(PM(_e(U/R)));n:{if(R<_e(4294967296)&R>=_e(0)){u=~~R>>>0;break n}u=0}u=u>>>0>m>>>0?u:m;n:{if((u|0)==1)break n;if(!(u&u-1)){f=u;break n}f=Ree(u),h=r[s+4>>2]}n:{if(f>>>0<=h>>>0){if(f>>>0>=h>>>0)break n;m=h>>>0<3,R=_e(PM(_e(_e(Ue[s+12>>2])/At[s+16>>2])));i:{if(R<_e(4294967296)&R>=_e(0)){u=~~R>>>0;break i}u=0}i:{r:{if(m||Xv(h)>>>0>1)break r;u=u>>>0<2?u:1<<32-Ms(u-1|0);break i}u=Ree(u)}if(f=u>>>0>f>>>0?u:f,f>>>0>=h>>>0)break n}h=0,y=f;i:{r:{s:{a:{if(f){if(y>>>0>=1073741824)break a;if(f=Te(y<<2),u=r[s>>2],r[s>>2]=f,u&&W(u),r[s+4>>2]=y,f=0,y-1>>>0>=3)for(m=y&-4;u=f<<2,r[u+r[s>>2]>>2]=0,r[r[s>>2]+(u|4)>>2]=0,r[r[s>>2]+(u|8)>>2]=0,r[r[s>>2]+(u|12)>>2]=0,f=f+4|0,h=h+4|0,(m|0)!=(h|0););if(u=y&3,u)for(;r[r[s>>2]+(f<<2)>>2]=0,f=f+1|0,A=A+1|0,(u|0)!=(A|0););if(h=r[s+8>>2],!h)break i;if(u=s+8|0,m=r[h+4>>2],f=Xv(y),f>>>0<2)break s;if(m=m>>>0>=y>>>0?(m>>>0)%(y>>>0)|0:m,r[r[s>>2]+(m<<2)>>2]=u,u=r[h>>2],!u)break i;if(f>>>0<=1)break r;for(;;){A=r[u+4>>2],y>>>0<=A>>>0&&(A=(A>>>0)%(y>>>0)|0);o:{if((m|0)==(A|0)){h=u;break o}if(f=u,N=A<<2,z=N+r[s>>2]|0,!r[z>>2]){r[z>>2]=h,h=u,m=A;break o}for(;A=f,f=r[f>>2],!!(r[u+8>>2]==r[f+8>>2]&&f););r[h>>2]=f,r[A>>2]=r[r[N+r[s>>2]>>2]>>2],r[r[N+r[s>>2]>>2]>>2]=u}if(u=r[h>>2],!u)break}break i}u=r[s>>2],r[s>>2]=0,u&&W(u),r[s+4>>2]=0;break i}qn(1336),Xe()}if(m=y-1&m,r[r[s>>2]+(m<<2)>>2]=u,u=r[h>>2],!u)break i}for(N=y-1|0;;){y=N&r[u+4>>2];r:{if((y|0)==(m|0)){h=u;break r}if(f=u,A=y<<2,z=A+r[s>>2]|0,r[z>>2]){for(;y=f,f=r[f>>2],!!(r[u+8>>2]==r[f+8>>2]&&f););r[h>>2]=f,r[y>>2]=r[r[A+r[s>>2]>>2]>>2],r[r[A+r[s>>2]>>2]>>2]=u;break r}r[z>>2]=h,h=u,m=y}if(u=r[h>>2],!u)break}}}if(h=r[s+4>>2],u=h-1|0,!(u&h)){f=u&T;break t}if(h>>>0>T>>>0){f=T;break t}f=(T>>>0)%(h>>>0)|0}f=r[s>>2]+(f<<2)|0,u=r[f>>2];t:{if(!u){if(r[c>>2]=r[s+8>>2],r[s+8>>2]=c,r[f>>2]=s+8,u=r[c>>2],!u)break t;u=r[u+4>>2],f=h-1|0;n:{if(!(f&h)){u=u&f;break n}if(u>>>0<h>>>0)break n;u=(u>>>0)%(h>>>0)|0}r[r[s>>2]+(u<<2)>>2]=c;break t}r[c>>2]=r[u>>2],r[u>>2]=c}r[s+12>>2]=r[s+12>>2]+1,s=1}D[a+4|0]=s,r[a>>2]=c}function rTe(a,s,c,u,f,h){a=a|0,s=s|0,c=c|0,u=u|0,f=f|0,h=h|0;var m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0,ie=0,ge=0,we=0,Me=0,Ie=0;r[a+8>>2]=f,u=a+32|0,R=r[u>>2],h=r[a+36>>2]-R>>2;e:{if(h>>>0<f>>>0){Xr(u,f-h|0),R=r[u>>2],u=r[a+8>>2];break e}f>>>0<h>>>0&&(r[a+36>>2]=(f<<2)+R),u=f}ie=r[a+52>>2],U=r[a+48>>2],h=0,z=(f&1073741823)!=(f|0)?-1:f<<2,z=Ct(Te(z),0,z);e:{if((u|0)<=0)break e;for(;;){u=h<<2,m=r[u+z>>2],A=r[a+16>>2];t:{if((m|0)>(A|0)){r[u+R>>2]=A;break t}if(u=u+R|0,A=r[a+12>>2],(A|0)>(m|0)){r[u>>2]=A;break t}r[u>>2]=m}if(u=r[a+8>>2],h=h+1|0,!((u|0)>(h|0)))break}if((u|0)<=0)break e;for(h=0;;){m=h<<2,u=m+c|0,m=r[s+m>>2]+r[m+R>>2]|0,r[u>>2]=m;t:{if((m|0)>r[a+16>>2])y=m-r[a+20>>2]|0;else{if((m|0)>=r[a+12>>2])break t;y=m+r[a+20>>2]|0}r[u>>2]=y}if(u=r[a+8>>2],h=h+1|0,!((u|0)>(h|0)))break}}if(h=r[a+56>>2],H=r[h>>2],h=r[h+4>>2]-H|0,(h|0)>=5)for(h=h>>2,ge=(h|0)>2?h:2,we=h>>>0>1?h:1,Me=f&-2,Ie=f&1,R=1;;){e:{t:{if((R|0)!=(we|0)){if(Z=ne(f,R),h=r[(R<<2)+H>>2],(h|0)==-1||(h=r[r[U+12>>2]+(h<<2)>>2],(h|0)==-1))break t;A=r[ie>>2],m=r[U>>2],T=r[A+(r[m+(h<<2)>>2]<<2)>>2],y=h+1|0,y=(y>>>0)%3|0?y:h-2|0,(y|0)!=-1?y=r[m+(y<<2)>>2]:y=-1;n:{i:{if((h>>>0)%3|0){h=h-1|0;break i}if(h=h+2|0,N=-1,(h|0)==-1)break n}N=r[m+(h<<2)>>2]}if((T|0)>=(R|0)||(h=r[(y<<2)+A>>2],(h|0)>=(R|0))||(m=r[A+(N<<2)>>2],(m|0)>=(R|0)))break t;n:{if((f|0)<=0)break n;if(m=ne(f,m),A=ne(f,h),T=ne(f,T),h=0,N=0,(f|0)!=1)for(;r[z+(h<<2)>>2]=(r[(h+m<<2)+c>>2]+r[(h+A<<2)+c>>2]|0)-r[(h+T<<2)+c>>2],y=h|1,r[z+(y<<2)>>2]=(r[(m+y<<2)+c>>2]+r[(A+y<<2)+c>>2]|0)-r[(y+T<<2)+c>>2],h=h+2|0,N=N+2|0,(Me|0)!=(N|0););if(!Ie)break n;r[z+(h<<2)>>2]=(r[(h+m<<2)+c>>2]+r[(h+A<<2)+c>>2]|0)-r[(h+T<<2)+c>>2]}if((u|0)<=0)break e;for(A=r[a+32>>2],h=0;;){u=h<<2,m=r[u+z>>2],T=r[a+16>>2];n:{if((m|0)>(T|0)){r[u+A>>2]=T;break n}if(u=u+A|0,T=r[a+12>>2],(T|0)>(m|0)){r[u>>2]=T;break n}r[u>>2]=m}if(u=r[a+8>>2],h=h+1|0,!((u|0)>(h|0)))break}if(h=0,(u|0)<=0)break e;for(u=Z<<2,T=u+c|0,y=s+u|0;;){m=h<<2,u=m+T|0,m=r[m+y>>2]+r[m+A>>2]|0,r[u>>2]=m;n:{if((m|0)>r[a+16>>2])N=m-r[a+20>>2]|0;else{if((m|0)>=r[a+12>>2])break n;N=m+r[a+20>>2]|0}r[u>>2]=N}if(u=r[a+8>>2],h=h+1|0,!((u|0)>(h|0)))break}break e}ps(),Xe()}if((u|0)<=0)break e;for(T=(ne(R-1|0,f)<<2)+c|0,A=r[a+32>>2],h=0;;){u=h<<2,m=r[u+T>>2],y=r[a+16>>2];t:{if((m|0)>(y|0)){r[u+A>>2]=y;break t}if(u=u+A|0,y=r[a+12>>2],(y|0)>(m|0)){r[u>>2]=y;break t}r[u>>2]=m}if(u=r[a+8>>2],h=h+1|0,!((u|0)>(h|0)))break}if(h=0,(u|0)<=0)break e;for(u=Z<<2,T=u+c|0,y=s+u|0;;){m=h<<2,u=m+T|0,m=r[m+y>>2]+r[m+A>>2]|0,r[u>>2]=m;t:{if((m|0)>r[a+16>>2])N=m-r[a+20>>2]|0;else{if((m|0)>=r[a+12>>2])break t;N=m+r[a+20>>2]|0}r[u>>2]=N}if(u=r[a+8>>2],h=h+1|0,!((u|0)>(h|0)))break}}if(R=R+1|0,(ge|0)==(R|0))break}return W(z),1}function TB(a){var s=0,c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0;r[a+56>>2]=r[a+52>>2],r[a+44>>2]=r[a+40>>2];e:{t:{n:{if(f=r[a+64>>2],c=r[f+24>>2],(c|0)!=r[f+28>>2])for(;;){u=s,A=r[(T<<2)+c>>2];i:{if((A|0)==-1)break i;s=r[a+56>>2];r:{if((s|0)!=r[a+60>>2]){r[s>>2]=u,r[a+56>>2]=s+4;break r}if(f=r[a+52>>2],c=s-f|0,m=c>>2,s=m+1|0,s>>>0>=1073741824)break n;if(h=c>>1,h=c>>>0<2147483644?s>>>0>h>>>0?s:h:1073741823,h){if(h>>>0>=1073741824)break e;s=Te(h<<2)}else s=0;if(m=s+(m<<2)|0,r[m>>2]=u,(c|0)>0&&$e(s,f,c),r[a+60>>2]=s+(h<<2),r[a+56>>2]=m+4,r[a+52>>2]=s,!f)break r;W(f)}r:{if(!(r[r[a+12>>2]+(T>>>3&536870908)>>2]>>>T&1)||(s=A+1|0,s=(s>>>0)%3|0?s:A-2|0,(s|0)==-1)||(f=r[a>>2],r[f+(s>>>3&536870908)>>2]>>>s&1)||(s=r[r[r[a+64>>2]+12>>2]+(s<<2)>>2],(s|0)==-1)||(c=s+1|0,c=(c>>>0)%3|0?c:s-2|0,(c|0)==-1))break r;for(h=r[a+64>>2];;){if(A=c,s=c+1|0,s=(s>>>0)%3|0?s:c-2|0,(s|0)==-1|r[f+(s>>>3&536870908)>>2]>>>s&1||(s=r[r[h+12>>2]+(s<<2)>>2],(s|0)==-1))break r;if(c=s+1|0,c=(c>>>0)%3|0?c:s-2|0,(c|0)==-1)break}}r[r[a+28>>2]+(A<<2)>>2]=u,s=r[a+44>>2];r:{if((s|0)!=r[a+48>>2]){r[s>>2]=A,r[a+44>>2]=s+4;break r}if(f=r[a+40>>2],c=s-f|0,m=c>>2,s=m+1|0,s>>>0>=1073741824)break t;if(h=c>>1,h=c>>>0<2147483644?s>>>0>h>>>0?s:h:1073741823,h){if(h>>>0>=1073741824)break e;s=Te(h<<2)}else s=0;if(m=s+(m<<2)|0,r[m>>2]=A,(c|0)>0&&$e(s,f,c),r[a+48>>2]=s+(h<<2),r[a+44>>2]=m+4,r[a+40>>2]=s,!f)break r;W(f)}s=u+1|0,f=r[a+64>>2];r:{if((A>>>0)%3|0){c=A-1|0;break r}if(c=A+2|0,(c|0)==-1)break i}if(c=r[r[f+12>>2]+(c<<2)>>2],(c|0)==-1||(c=c+((c>>>0)%3|0?-1:2)|0,(c|0)==-1|(c|0)==(A|0)))break i;for(;;){if(f=c+1|0,f=(f>>>0)%3|0?f:c-2|0,r[r[a>>2]+(f>>>3&536870908)>>2]>>>f&1){u=r[a+56>>2];r:{if((u|0)!=r[a+60>>2]){r[u>>2]=s,r[a+56>>2]=u+4;break r}if(h=r[a+52>>2],f=u-h|0,y=f>>2,u=y+1|0,u>>>0>=1073741824)break n;if(m=f>>1,m=f>>>0<2147483644?u>>>0>m>>>0?u:m:1073741823,m){if(m>>>0>=1073741824)break e;u=Te(m<<2)}else u=0;if(y=u+(y<<2)|0,r[y>>2]=s,(f|0)>0&&$e(u,h,f),r[a+60>>2]=u+(m<<2),r[a+56>>2]=y+4,r[a+52>>2]=u,!h)break r;W(h)}f=s+1|0,u=r[a+44>>2];r:{if((u|0)!=r[a+48>>2]){r[u>>2]=c,r[a+44>>2]=u+4;break r}if(m=r[a+40>>2],h=u-m|0,R=h>>2,u=R+1|0,u>>>0>=1073741824)break t;if(y=h>>1,y=h>>>0<2147483644?u>>>0>y>>>0?u:y:1073741823,y){if(y>>>0>=1073741824)break e;u=Te(y<<2)}else u=0;if(R=u+(R<<2)|0,r[R>>2]=c,(h|0)>0&&$e(u,m,h),r[a+48>>2]=u+(y<<2),r[a+44>>2]=R+4,r[a+40>>2]=u,!m)break r;W(m)}u=s,s=f}r[r[a+28>>2]+(c<<2)>>2]=u,f=r[a+64>>2];r:{if((c>>>0)%3|0){c=c-1|0;break r}if(c=c+2|0,(c|0)==-1)break i}if(c=r[r[f+12>>2]+(c<<2)>>2],(c|0)==-1||(c=c+((c>>>0)%3|0?-1:2)|0,(c|0)==-1))break i;if((c|0)==(A|0))break}}if(T=T+1|0,c=r[f+24>>2],!(T>>>0<r[f+28>>2]-c>>2>>>0))break}return}jt(),Xe()}jt(),Xe()}qn(1336),Xe()}function iTe(a,s,c,u,f,h){a=a|0,s=s|0,c=c|0,u=u|0,f=f|0,h=h|0;var m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0,ie=0,ge=0,we=0,Me=0,Ie=0;r[a+8>>2]=f,u=a+32|0,R=r[u>>2],h=r[a+36>>2]-R>>2;e:{if(h>>>0<f>>>0){Xr(u,f-h|0),R=r[u>>2],u=r[a+8>>2];break e}f>>>0<h>>>0&&(r[a+36>>2]=(f<<2)+R),u=f}ie=r[a+52>>2],z=r[a+48>>2],h=0,N=(f&1073741823)!=(f|0)?-1:f<<2,N=Ct(Te(N),0,N);e:{if((u|0)<=0)break e;for(;;){u=h<<2,m=r[u+N>>2],y=r[a+16>>2];t:{if((m|0)>(y|0)){r[u+R>>2]=y;break t}if(u=u+R|0,y=r[a+12>>2],(y|0)>(m|0)){r[u>>2]=y;break t}r[u>>2]=m}if(u=r[a+8>>2],h=h+1|0,!((u|0)>(h|0)))break}if((u|0)<=0)break e;for(h=0;;){m=h<<2,u=m+c|0,m=r[s+m>>2]+r[m+R>>2]|0,r[u>>2]=m;t:{if((m|0)>r[a+16>>2])m=m-r[a+20>>2]|0;else{if((m|0)>=r[a+12>>2])break t;m=m+r[a+20>>2]|0}r[u>>2]=m}if(u=r[a+8>>2],h=h+1|0,!((u|0)>(h|0)))break}}if(h=r[a+56>>2],H=r[h>>2],h=r[h+4>>2]-H|0,(h|0)>=5)for(h=h>>2,ge=(h|0)>2?h:2,we=h>>>0>1?h:1,Me=f&-2,Ie=f&1,R=1;;){e:{t:{if((R|0)!=(we|0)){if(Z=ne(f,R),h=r[(R<<2)+H>>2],(h|0)==-1|r[r[z>>2]+(h>>>3&536870908)>>2]>>>h&1||(h=r[r[r[z+64>>2]+12>>2]+(h<<2)>>2],(h|0)==-1)||(y=r[ie>>2],m=r[z+28>>2],T=r[y+(r[m+(h<<2)>>2]<<2)>>2],(T|0)>=(R|0))||(A=h+1|0,A=r[y+(r[m+(((A>>>0)%3|0?A:h-2|0)<<2)>>2]<<2)>>2],(A|0)>=(R|0))||(h=r[y+(r[m+(h+((h>>>0)%3|0?-1:2)<<2)>>2]<<2)>>2],(h|0)>=(R|0)))break t;n:{if((f|0)<=0)break n;if(m=ne(f,h),y=ne(f,A),T=ne(f,T),h=0,U=0,(f|0)!=1)for(;r[N+(h<<2)>>2]=(r[(h+m<<2)+c>>2]+r[(h+y<<2)+c>>2]|0)-r[(h+T<<2)+c>>2],A=h|1,r[N+(A<<2)>>2]=(r[(m+A<<2)+c>>2]+r[(y+A<<2)+c>>2]|0)-r[(T+A<<2)+c>>2],h=h+2|0,U=U+2|0,(Me|0)!=(U|0););if(!Ie)break n;r[N+(h<<2)>>2]=(r[(h+m<<2)+c>>2]+r[(h+y<<2)+c>>2]|0)-r[(h+T<<2)+c>>2]}if((u|0)<=0)break e;for(y=r[a+32>>2],h=0;;){u=h<<2,m=r[u+N>>2],T=r[a+16>>2];n:{if((m|0)>(T|0)){r[u+y>>2]=T;break n}if(u=u+y|0,T=r[a+12>>2],(T|0)>(m|0)){r[u>>2]=T;break n}r[u>>2]=m}if(u=r[a+8>>2],h=h+1|0,!((u|0)>(h|0)))break}if(h=0,(u|0)<=0)break e;for(u=Z<<2,T=u+c|0,A=s+u|0;;){m=h<<2,u=m+T|0,m=r[m+A>>2]+r[m+y>>2]|0,r[u>>2]=m;n:{if((m|0)>r[a+16>>2])m=m-r[a+20>>2]|0;else{if((m|0)>=r[a+12>>2])break n;m=m+r[a+20>>2]|0}r[u>>2]=m}if(u=r[a+8>>2],h=h+1|0,!((u|0)>(h|0)))break}break e}ps(),Xe()}if((u|0)<=0)break e;for(T=(ne(R-1|0,f)<<2)+c|0,y=r[a+32>>2],h=0;;){u=h<<2,m=r[u+T>>2],A=r[a+16>>2];t:{if((m|0)>(A|0)){r[u+y>>2]=A;break t}if(u=u+y|0,A=r[a+12>>2],(A|0)>(m|0)){r[u>>2]=A;break t}r[u>>2]=m}if(u=r[a+8>>2],h=h+1|0,!((u|0)>(h|0)))break}if(h=0,(u|0)<=0)break e;for(u=Z<<2,T=u+c|0,A=s+u|0;;){m=h<<2,u=m+T|0,m=r[m+A>>2]+r[m+y>>2]|0,r[u>>2]=m;t:{if((m|0)>r[a+16>>2])m=m-r[a+20>>2]|0;else{if((m|0)>=r[a+12>>2])break t;m=m+r[a+20>>2]|0}r[u>>2]=m}if(u=r[a+8>>2],h=h+1|0,!((u|0)>(h|0)))break}}if(R=R+1|0,(ge|0)==(R|0))break}return W(N),1}function Lee(a,s){var c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0;if((s|0)==-1)return 1;if(c=(s>>>0)/3|0,!(r[r[a+24>>2]+(c>>>3&268435452)>>2]>>>c&1)){u=r[a+48>>2],r[a+52>>2]=u;e:{if((u|0)!=r[a+56>>2]){r[u>>2]=s,r[a+52>>2]=u+4;break e}if(f=Te(4),r[f>>2]=s,h=f+4|0,r[a+56>>2]=h,r[a+52>>2]=h,r[a+48>>2]=f,!u)break e;W(u)}if(h=r[r[a+4>>2]+28>>2],u=s+1|0,f=(u>>>0)%3|0?u:s-2|0,u=r[h+(f<<2)>>2],(u|0)==-1||(m=(s-ne(c,3)|0?-1:2)+s|0,c=r[h+(m<<2)>>2],(c|0)==-1))return 0;if(s=r[a+36>>2],h=s+(u>>>3&536870908)|0,y=r[h>>2],A=1<<u,y&A||(r[h>>2]=y|A,jf(a+8|0,u,f),s=r[a+36>>2]),s=(c>>>3&536870908)+s|0,u=r[s>>2],f=1<<c,u&f||(r[s>>2]=u|f,jf(a+8|0,c,m)),c=r[a+52>>2],(c|0)==r[a+48>>2])return 1;for(R=a+8|0;;){c=c-4|0,s=r[c>>2],u=(s>>>0)/3|0;e:{t:{if((s|0)==-1||(f=r[a+24>>2]+(u>>>3&268435452)|0,h=r[f>>2],u=1<<u,h&u))break t;if(r[f>>2]=u|h,f=r[a+4>>2],u=r[r[f+28>>2]+(s<<2)>>2],(u|0)==-1)return 0;for(;;){c=s;n:{i:{if(h=r[a+36>>2]+(u>>>3&536870908)|0,m=r[h>>2],y=1<<u,m&y)break i;r:{s=r[r[f+40>>2]+(u<<2)>>2];s:{if((s|0)==-1||(A=s+1|0,s=(A>>>0)%3|0?A:s-2|0,(s|0)==-1|r[r[f>>2]+(s>>>3&536870908)>>2]>>>s&1))break s;if(s=r[r[r[f+64>>2]+12>>2]+(s<<2)>>2],(s|0)!=-1)break r}r[h>>2]=m|y,jf(R,u,c);break i}if(r[h>>2]=m|y,jf(R,u,c),u=s+1|0,(((u>>>0)%3|0?u:s-2|0)|0)==-1)break i;s=-1,f=r[a+4>>2];r:{if((c|0)==-1||(u=c+1|0,u=(u>>>0)%3|0?u:c-2|0,(u|0)==-1|r[r[f>>2]+(u>>>3&536870908)>>2]>>>u&1))break r;s=r[r[r[f+64>>2]+12>>2]+(u<<2)>>2]}u=(s>>>0)/3|0,y=1<<u,c=r[a+24>>2],A=u>>>5|0,h=r[c+(A<<2)>>2];break n}i:{r:{if((c|0)==-1)break r;u=-1,s=c+1|0,s=(s>>>0)%3|0?s:c-2|0,f=r[a+4>>2],(s|0)==-1|r[r[f>>2]+(s>>>3&536870908)>>2]>>>s&1||(u=r[r[r[f+64>>2]+12>>2]+(s<<2)>>2]);s:{a:{if((c>>>0)%3|0){c=c-1|0;break a}if(c=c+2|0,s=-1,(c|0)==-1)break s}if(s=-1,r[r[f>>2]+(c>>>3&536870908)>>2]>>>c&1)break s;s=r[r[r[f+64>>2]+12>>2]+(c<<2)>>2]}if(T=(s|0)==-1,m=T?-1:(s>>>0)/3|0,h=(u>>>0)/3|0,y=(u|0)==-1,!y&&(c=r[a+24>>2],y=y?-1:h,A=y>>>5|0,h=r[c+(A<<2)>>2],y=1<<y,!(h&y)))break i;if(T)break r;if(y=1<<m,c=r[a+24>>2],A=m>>>5|0,h=r[c+(A<<2)>>2],!(y&h))break n}c=r[a+52>>2]-4|0,r[a+52>>2]=c;break e}if(T){s=u;break n}if(r[(m>>>3&536870908)+c>>2]>>>m&1){s=u;break n}if(c=r[a+52>>2],r[c-4>>2]=s,(c|0)!=r[a+56>>2]){r[c>>2]=u,c=c+4|0;break t}i:{if(h=r[a+48>>2],f=c-h|0,c=f>>2,s=c+1|0,s>>>0<1073741824){if(m=f>>1,m=f>>>0<2147483644?s>>>0>m>>>0?s:m:1073741823,m){if(m>>>0>=1073741824)break i;s=Te(m<<2)}else s=0;if(c=s+(c<<2)|0,r[c>>2]=u,c=c+4|0,(f|0)>0&&$e(s,h,f),r[a+56>>2]=s+(m<<2),r[a+52>>2]=c,r[a+48>>2]=s,!h)break e;W(h),c=r[a+52>>2];break e}jt(),Xe()}qn(1336),Xe()}if(r[(A<<2)+c>>2]=h|y,u=r[r[f+28>>2]+(s<<2)>>2],(u|0)==-1)break}return 0}r[a+52>>2]=c}if(r[a+48>>2]==(c|0))break}}return 1}function zee(a,s,c,u){var f=0,h=0,m=0,y=0,A=0,T=0,R=0;h=re-80|0,re=h,f=r[c+36>>2],r[h+72>>2]=r[c+32>>2],r[h+76>>2]=f,m=r[c+28>>2],f=h- -64|0,r[f>>2]=r[c+24>>2],r[f+4>>2]=m,f=r[c+20>>2],r[h+56>>2]=r[c+16>>2],r[h+60>>2]=f,f=r[c+12>>2],r[h+48>>2]=r[c+8>>2],r[h+52>>2]=f,f=r[c+4>>2],r[h+40>>2]=r[c>>2],r[h+44>>2]=f,NM(a,h+40|0,h+24|0);e:{if(r[a>>2])break e;if(T=a+4|0,D[a+15|0]<0&&W(r[T>>2]),I[h+31|0]!=1){s=Te(32),c=I[1592]|I[1593]<<8|(I[1594]<<16|I[1595]<<24),D[s+16|0]=c,D[s+17|0]=c>>>8,D[s+18|0]=c>>>16,D[s+19|0]=c>>>24,c=I[1588]|I[1589]<<8|(I[1590]<<16|I[1591]<<24),u=I[1584]|I[1585]<<8|(I[1586]<<16|I[1587]<<24),D[s+8|0]=u,D[s+9|0]=u>>>8,D[s+10|0]=u>>>16,D[s+11|0]=u>>>24,D[s+12|0]=c,D[s+13|0]=c>>>8,D[s+14|0]=c>>>16,D[s+15|0]=c>>>24,c=I[1580]|I[1581]<<8|(I[1582]<<16|I[1583]<<24),u=I[1576]|I[1577]<<8|(I[1578]<<16|I[1579]<<24),D[s|0]=u,D[s+1|0]=u>>>8,D[s+2|0]=u>>>16,D[s+3|0]=u>>>24,D[s+4|0]=c,D[s+5|0]=c>>>8,D[s+6|0]=c>>>16,D[s+7|0]=c>>>24,D[s+20|0]=0,r[a>>2]=-1,Ri(T,s,20),W(s);break e}A=re-16|0,re=A;t:{n:switch(I[h+32|0]){case 0:f=Te(48),Zte(f),r[f>>2]=13144,r[h+8>>2]=0,r[h+12>>2]=0,r[h>>2]=0,r[h+4>>2]=0,r[h+16>>2]=f;break t;case 1:f=Te(52),Zte(f),r[f+48>>2]=0,r[f>>2]=11304,r[h+8>>2]=0,r[h+12>>2]=0,r[h>>2]=0,r[h+4>>2]=0,r[h+16>>2]=f;break t;default:break n}m=Te(32),f=I[1694]|I[1695]<<8|(I[1696]<<16|I[1697]<<24),D[m+24|0]=f,D[m+25|0]=f>>>8,D[m+26|0]=f>>>16,D[m+27|0]=f>>>24,f=I[1690]|I[1691]<<8|(I[1692]<<16|I[1693]<<24),y=I[1686]|I[1687]<<8|(I[1688]<<16|I[1689]<<24),D[m+16|0]=y,D[m+17|0]=y>>>8,D[m+18|0]=y>>>16,D[m+19|0]=y>>>24,D[m+20|0]=f,D[m+21|0]=f>>>8,D[m+22|0]=f>>>16,D[m+23|0]=f>>>24,f=I[1682]|I[1683]<<8|(I[1684]<<16|I[1685]<<24),y=I[1678]|I[1679]<<8|(I[1680]<<16|I[1681]<<24),D[m+8|0]=y,D[m+9|0]=y>>>8,D[m+10|0]=y>>>16,D[m+11|0]=y>>>24,D[m+12|0]=f,D[m+13|0]=f>>>8,D[m+14|0]=f>>>16,D[m+15|0]=f>>>24,f=I[1674]|I[1675]<<8|(I[1676]<<16|I[1677]<<24),y=I[1670]|I[1671]<<8|(I[1672]<<16|I[1673]<<24),D[m|0]=y,D[m+1|0]=y>>>8,D[m+2|0]=y>>>16,D[m+3|0]=y>>>24,D[m+4|0]=f,D[m+5|0]=f>>>8,D[m+6|0]=f>>>16,D[m+7|0]=f>>>24,D[m+28|0]=0,r[A>>2]=-1,f=A|4,Ri(f,m,28),R=D[A+15|0],r[h>>2]=r[A>>2],y=h+4|0;n:{if((R|0)>=0){R=r[f+4>>2],r[y>>2]=r[f>>2],r[y+4>>2]=R,r[y+8>>2]=r[f+8>>2];break n}Ri(y,r[A+4>>2],r[A+8>>2])}r[h+16>>2]=0,D[A+15|0]<0&&W(r[A+4>>2]),W(m)}re=A+16|0,f=r[h>>2];t:{if(f){if(r[a>>2]=f,D[h+15|0]>=0){a=h|4,s=r[a+4>>2],r[T>>2]=r[a>>2],r[T+4>>2]=s,r[T+8>>2]=r[a+8>>2];break t}Ri(T,r[h+4>>2],r[h+8>>2]);break t}f=r[h+16>>2],r[h+16>>2]=0,r[f+44>>2]=u,wee(a,f,s,c,u),r[a>>2]||(D[T+11|0]<0&&W(r[T>>2]),r[a>>2]=0,r[a+4>>2]=0,r[a+8>>2]=0,r[a+12>>2]=0),pt[r[r[f>>2]+4>>2]](f)}if(a=r[h+16>>2],r[h+16>>2]=0,a&&pt[r[r[a>>2]+4>>2]](a),D[h+15|0]>=0)break e;W(r[h+4>>2])}re=h+80|0}function xB(a,s,c){var u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0,ie=0;A=ne(s,12)+a|0,r[A+12>>2]=r[A+8>>2],R=(c|0)==-1?-1:(c>>>0)/3|0,U=1,T=c;e:{t:{n:{for(;;){i:{if(H=f&1,H){if((T|0)==-1)break i;if((ute(a,((T>>>0)%3|0?-1:2)+T|0)|0)==-1||(c=T+1|0,u=(c>>>0)%3|0?c:T-2|0,(u|0)==-1)||(c=u+1|0,c=(c>>>0)%3|0?c:u-2|0,(c|0)==-1)||(u=r[r[r[a+4>>2]+12>>2]+(c<<2)>>2],(u|0)==-1)||(c=u+1|0,c=(c>>>0)%3|0?c:u-2|0,(c|0)==-1))break e;R=(c>>>0)/3|0}m=1<<R,z=r[a+56>>2]+(R>>>3&536870908)|0,N=r[z>>2];r:{if(m&N)break r;for(f=0;;){r[z>>2]=m|N,u=r[A+12>>2];s:{if((u|0)!=r[A+16>>2]){r[u>>2]=R,r[A+12>>2]=u+4;break s}if(N=r[A+8>>2],m=u-N|0,y=m>>2,h=y+1|0,h>>>0>=1073741824)break n;if(u=m>>1,h=m>>>0<2147483644?u>>>0<h>>>0?h:u:1073741823,h){if(h>>>0>=1073741824)break t;u=Te(h<<2)}else u=0;if(y=u+(y<<2)|0,r[y>>2]=R,(m|0)>0&&$e(u,N,m),r[A+8>>2]=u,r[A+12>>2]=y+4,r[A+16>>2]=u+(h<<2),!N)break s;W(N)}y=f+1|0;s:{a:{o:{if(!f)break o;if(y&1){if((c|0)==-1){c=-1;break s}u=c+1|0,c=(u>>>0)%3|0?u:c-2|0;break o}if(T=H?c:T,(c|0)==-1){c=-1;break s}if((c>>>0)%3|0){f=c-1|0;break a}c=c+2|0}if(u=c,c=-1,f=u,(u|0)==-1)break s}c=r[r[r[a+4>>2]+12>>2]+(f<<2)>>2],z=-1,N=-1,u=f+1|0,h=(u>>>0)%3|0?u:f-2|0,(h|0)>=0&&(u=(h>>>0)/3|0,N=r[(r[r[a>>2]+96>>2]+ne(u,12)|0)+(h-ne(u,3)<<2)>>2]);a:{if((c|0)==-1){m=1;break a}if(m=0,h=((c>>>0)%3|0?-1:2)+c|0,(h|0)<0)break a;u=(h>>>0)/3|0,z=r[(r[r[a>>2]+96>>2]+ne(u,12)|0)+(h-ne(u,3)<<2)>>2]}if((N|0)!=(z|0)){c=-1;break s}a:{o:{f=((f>>>0)%3|0?-1:2)+f|0;c:{l:{if((f|0)>=0){if(u=(f>>>0)/3|0,z=r[(r[r[a>>2]+96>>2]+ne(u,12)|0)+(f-ne(u,3)<<2)>>2],f=-1,!m)break l;break c}if(z=-1,m)break o}if(u=c+1|0,f=(u>>>0)%3|0?u:c-2|0,(f|0)<0){f=-1;break c}u=(f>>>0)/3|0,f=r[(r[r[a>>2]+96>>2]+ne(u,12)|0)+(f-ne(u,3)<<2)>>2]}if((f|0)!=(z|0)){c=-1;break s}if((c|0)!=-1)break a;c=-1;break s}if((c|0)!=-1)break a;c=-1;break s}if(f=y,R=(c>>>0)/3|0,z=r[a+56>>2]+(R>>>3&268435452)|0,N=r[z>>2],m=1<<R,!(N&m))continue}break}if(!H|!(y&1))break r;h=r[A+12>>2]-4|0,y=r[h>>2],f=r[a+56>>2]+(y>>>3&536870908)|0,u=r[f>>2],Z=f,ie=Yi(y)&u,r[Z>>2]=ie,r[A+12>>2]=h}if(f=1,u=U,U=0,u)continue;break e}break}T=-1,ute(a,-1);break e}jt(),Xe()}qn(1336),Xe()}r[((s<<2)+a|0)+44>>2]=T,h=r[A+8>>2],s=r[A+12>>2]-h|0;e:{if(!s)break e;if(T=r[a+56>>2],a=s>>2,a=a>>>0>1?a:1,y=a&1,c=0,s>>>0>=8)for(U=a&-2,R=0;f=c<<2,u=r[f+h>>2],s=T+(u>>>3&536870908)|0,a=r[s>>2],Z=s,ie=Yi(u)&a,r[Z>>2]=ie,u=r[h+(f|4)>>2],s=T+(u>>>3&536870908)|0,a=r[s>>2],Z=s,ie=Yi(u)&a,r[Z>>2]=ie,c=c+2|0,R=R+2|0,(U|0)!=(R|0););if(!y)break e;c=r[h+(c<<2)>>2],s=T+(c>>>3&536870908)|0,a=r[s>>2],Z=s,ie=Yi(c)&a,r[Z>>2]=ie}}function Bee(a,s){var c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0;if((s|0)==-1)return 1;if(u=(s>>>0)/3|0,!(r[r[a+24>>2]+(u>>>3&268435452)>>2]>>>u&1)){c=r[a+48>>2],r[a+52>>2]=c;e:{if((c|0)!=r[a+56>>2]){r[c>>2]=s,r[a+52>>2]=c+4;break e}if(f=Te(4),r[f>>2]=s,h=f+4|0,r[a+56>>2]=h,r[a+52>>2]=h,r[a+48>>2]=f,!c)break e;W(c)}f=-1,h=r[a+4>>2],c=s+1|0,m=(c>>>0)%3|0?c:s-2|0,(m|0)!=-1&&(f=r[r[h>>2]+(m<<2)>>2]);e:{if(y=s-ne(u,3)|0,y){c=s-1|0;break e}if(c=s+2|0,(c|0)!=-1)break e;return 0}if((f|0)==-1||(u=r[r[h>>2]+(c<<2)>>2],(u|0)==-1))return 0;if(c=r[a+36>>2],h=c+(f>>>3&536870908)|0,A=r[h>>2],T=1<<f,A&T||(r[h>>2]=A|T,jf(a+8|0,f,m),c=r[a+36>>2]),c=(u>>>3&536870908)+c|0,f=r[c>>2],h=1<<u,f&h||(r[c>>2]=f|h,jf(a+8|0,u,(y?-1:2)+s|0)),c=r[a+52>>2],(c|0)==r[a+48>>2])return 1;for(T=a+8|0;;){c=c-4|0,s=r[c>>2],u=(s>>>0)/3|0;e:{t:{if((s|0)==-1||(f=r[a+24>>2]+(u>>>3&268435452)|0,h=r[f>>2],u=1<<u,h&u))break t;for(r[f>>2]=u|h;;){if(u=r[a+4>>2],c=r[r[u>>2]+(s<<2)>>2],(c|0)==-1)return 0;n:{i:{if(f=r[a+36>>2]+(c>>>3&536870908)|0,h=r[f>>2],m=1<<c,h&m)break i;r:{y=r[r[u+24>>2]+(c<<2)>>2];s:{if((y|0)==-1||(A=y+1|0,y=(A>>>0)%3|0?A:y-2|0,(y|0)==-1))break s;if(u=r[r[u+12>>2]+(y<<2)>>2],(u|0)!=-1)break r}r[f>>2]=h|m,jf(T,c,s);break i}if(r[f>>2]=h|m,jf(T,c,s),c=u+1|0,(((c>>>0)%3|0?c:u-2|0)|0)==-1)break i;u=s-2|0,c=s+1|0,s=-1,c=(c>>>0)%3|0?c:u,(c|0)!=-1&&(s=r[r[r[a+4>>2]+12>>2]+(c<<2)>>2]),c=(s>>>0)/3|0,m=1<<c,f=r[a+24>>2],y=c>>>5|0,u=r[f+(y<<2)>>2];break n}c=-1,h=r[a+4>>2],u=s+1|0,u=(u>>>0)%3|0?u:s-2|0,(u|0)!=-1&&(c=r[r[h+12>>2]+(u<<2)>>2]);i:{r:{if((s>>>0)%3|0){f=s-1|0;break r}if(f=s+2|0,s=-1,(f|0)==-1)break i}s=r[r[h+12>>2]+(f<<2)>>2]}A=(s|0)==-1,h=A?-1:(s>>>0)/3|0,u=(c>>>0)/3|0;i:{if(m=(c|0)==-1,!m&&(f=r[a+24>>2],m=m?-1:u,y=m>>>5|0,u=r[f+(y<<2)>>2],m=1<<m,!(u&m)))break i;if(!A&&(m=1<<h,f=r[a+24>>2],y=h>>>5|0,u=r[f+(y<<2)>>2],!(m&u)))break n;c=r[a+52>>2]-4|0,r[a+52>>2]=c;break e}if(A){s=c;break n}if(r[(h>>>3&536870908)+f>>2]>>>h&1){s=c;break n}if(u=r[a+52>>2],r[u-4>>2]=s,(u|0)!=r[a+56>>2]){r[u>>2]=c,c=u+4|0;break t}i:{if(f=r[a+48>>2],u=u-f|0,m=u>>2,s=m+1|0,s>>>0<1073741824){if(h=u>>1,h=u>>>0<2147483644?s>>>0>h>>>0?s:h:1073741823,h){if(h>>>0>=1073741824)break i;s=Te(h<<2)}else s=0;if(m=s+(m<<2)|0,r[m>>2]=c,c=m+4|0,(u|0)>0&&$e(s,f,u),r[a+56>>2]=s+(h<<2),r[a+52>>2]=c,r[a+48>>2]=s,!f)break e;W(f),c=r[a+52>>2];break e}jt(),Xe()}qn(1336),Xe()}if(r[(y<<2)+f>>2]=u|m,(s|0)==-1)break}return 0}r[a+52>>2]=c}if(r[a+48>>2]==(c|0))break}}return 1}function Uee(a,s){a=a|0,s=s|0;var c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0;A=re-32|0,re=A;e:{if(Ut[s+38>>1]<=513&&(c=r[s+20>>2],y=r[s+12>>2],u=r[s+16>>2],(c|0)>=(y|0)&u>>>0>=Ue[s+8>>2]|(c|0)>(y|0)||(y=I[u+r[s>>2]|0],u=u+1|0,c=u?c:c+1|0,r[s+16>>2]=u,r[s+20>>2]=c,y)))break e;t:{if(!Gv(1,A+28|0,s))break t;n:{if(u=r[A+28>>2],u){if(Ov(a+60|0,u),c=A+8|0,r[c>>2]=0,r[c+4>>2]=0,D[c+5|0]=0,D[c+6|0]=0,D[c+7|0]=0,D[c+8|0]=0,D[c+9|0]=0,D[c+10|0]=0,D[c+11|0]=0,D[c+12|0]=0,!sr(c,s))break n;for(;y=1<<f,h=js(c),m=r[a+60>>2]+(f>>>3&536870908)|0,h?h=y|r[m>>2]:h=r[m>>2]&(y^-1),r[m>>2]=h,f=f+1|0,(u|0)!=(f|0););}if(!Gv(1,A+28|0,s))break t;if(u=r[A+28>>2],u){if(f=0,Ov(a+72|0,u),c=A+8|0,r[c>>2]=0,r[c+4>>2]=0,D[c+5|0]=0,D[c+6|0]=0,D[c+7|0]=0,D[c+8|0]=0,D[c+9|0]=0,D[c+10|0]=0,D[c+11|0]=0,D[c+12|0]=0,!sr(c,s))break n;for(;y=1<<f,h=js(c),m=r[a+72>>2]+(f>>>3&536870908)|0,h?h=y|r[m>>2]:h=r[m>>2]&(y^-1),r[m>>2]=h,f=f+1|0,(u|0)!=(f|0););}if(!Gv(1,A+28|0,s))break t;if(u=r[A+28>>2],u){if(f=0,Ov(a+84|0,u),c=A+8|0,r[c>>2]=0,r[c+4>>2]=0,D[c+5|0]=0,D[c+6|0]=0,D[c+7|0]=0,D[c+8|0]=0,D[c+9|0]=0,D[c+10|0]=0,D[c+11|0]=0,D[c+12|0]=0,!sr(c,s))break n;for(;y=1<<f,h=js(c),m=r[a+84>>2]+(f>>>3&536870908)|0,h?h=y|r[m>>2]:h=r[m>>2]&(y^-1),r[m>>2]=h,f=f+1|0,(u|0)!=(f|0););}if(!Gv(1,A+28|0,s))break t;if(u=r[A+28>>2],u){if(f=0,Ov(a+96|0,u),c=A+8|0,r[c>>2]=0,r[c+4>>2]=0,D[c+5|0]=0,D[c+6|0]=0,D[c+7|0]=0,D[c+8|0]=0,D[c+9|0]=0,D[c+10|0]=0,D[c+11|0]=0,D[c+12|0]=0,!sr(c,s))break n;for(;y=1<<f,h=js(c),m=r[a+96>>2]+(f>>>3&536870908)|0,h?h=y|r[m>>2]:h=r[m>>2]&(y^-1),r[m>>2]=h,f=f+1|0,(u|0)!=(f|0););}if(f=0,u=r[s+12>>2],y=u,c=r[s+20>>2],m=c,h=r[s+16>>2],T=h+4|0,c=T>>>0<4?c+1|0:c,R=r[s+8>>2],R>>>0<T>>>0&(c|0)>=(u|0)|(c|0)>(u|0)||(N=r[s>>2],u=N+h|0,u=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),r[s+16>>2]=T,r[s+20>>2]=c,c=m,m=h+8|0,c=m>>>0<8?c+1|0:c,h=m,m=c,h>>>0>R>>>0&(c|0)>=(y|0)|(c|0)>(y|0))||(c=T+N|0,c=I[c|0]|I[c+1|0]<<8|(I[c+2|0]<<16|I[c+3|0]<<24),r[s+16>>2]=h,r[s+20>>2]=m,(c|0)<(u|0))||(r[a+16>>2]=c,r[a+12>>2]=u,s=(c>>31)-((u>>31)+(c>>>0<u>>>0)|0)|0,c=c-u|0,!s&c>>>0>2147483646|s)||(f=1,s=c+1|0,r[a+20>>2]=s,c=s>>>1|0,r[a+24>>2]=c,r[a+28>>2]=0-c,s&1))break e;r[a+24>>2]=c-1;break e}}f=0}return re=A+32|0,f|0}function MB(a,s,c){a=a|0,s=s|0,c=c|0;var u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0;e:{if(U=pt[r[r[a>>2]+44>>2]](a)|0,(U|0)<=0||(f=r[s+4>>2]-r[s>>2]>>2,m=re+-64|0,re=m,u=$v(m),h=ne(r[3408],U),KM(u,r[r[a+8>>2]+56>>2],U<<24>>24,5,0,h,h>>31),h=Te(96),u=HM(h,u),D[u+84|0]=1,r[u+72>>2]=r[u+68>>2],Ym(u,f),r[u+60>>2]=r[r[a+8>>2]+60>>2],u=r[a+16>>2],r[a+16>>2]=h,u&&ha(u),re=m- -64|0,m=r[a+16>>2],!r[m+80>>2])||(A=r[r[m>>2]>>2],!A)||(y=r[c+12>>2],u=r[c+20>>2],T=r[c+8>>2],h=r[c+16>>2],(y|0)<=(u|0)&T>>>0<=h>>>0|(u|0)>(y|0)))break e;R=ne(f,U),A=A+r[m+48>>2]|0,N=r[c>>2],z=I[N+h|0],m=h+1|0,f=m?u:u+1|0,r[c+16>>2]=m,r[c+20>>2]=f;t:{n:{i:{if(z){if(bB(R,U,c,A))break i;break e}if((f|0)>=(y|0)&m>>>0>=T>>>0|(f|0)>(y|0))break e;m=I[m+N|0],f=h+2|0,u=f>>>0<2?u+1|0:u,r[c+16>>2]=f,r[c+20>>2]=u,u=r[r[a+16>>2]+64>>2],u=r[u+4>>2]-r[u>>2]|0;r:{if((m|0)==r[3408]){if(f=u,u=R<<2,f>>>0<u>>>0)break e;if(y=r[c+8>>2],m=r[c+12>>2],f=r[c+20>>2],T=r[c+16>>2],h=u+T|0,f=h>>>0<u>>>0?f+1|0:f,(f|0)<=(m|0)&h>>>0<=y>>>0|(f|0)<(m|0))break r;break e}if(u>>>0<ne(m,R)>>>0||(y=r[c+12>>2],f=r[c+20>>2],N=r[c+8>>2],h=N,T=r[c+16>>2],u=m,Z=h-T>>>0<rt(u,0,R,0)>>>0,h=y-(f+(h>>>0<T>>>0)|0)|0,z=nn,Z&(h|0)<=(z|0)|(h|0)<(z|0)))break e;if(h=1,!R)break n;if(h=0,z=N,N=u+T|0,f=N>>>0<u>>>0?f+1|0:f,z>>>0<N>>>0&(f|0)>=(y|0)|(f|0)>(y|0))break t;for(;;){if($e(A+(H<<2)|0,T+r[c>>2]|0,m),f=r[c+20>>2],y=u+r[c+16>>2]|0,f=y>>>0<u>>>0?f+1|0:f,T=y,r[c+16>>2]=y,r[c+20>>2]=f,H=H+1|0,(R|0)==(H|0))break i;if(z=r[c+8>>2],y=r[c+12>>2],N=u+T|0,f=N>>>0<u>>>0?f+1|0:f,!((f|0)<=(y|0)&N>>>0<=z>>>0|(f|0)<(y|0)))break}break t}$e(A,T+r[c>>2]|0,u),f=u,m=u+r[c+16>>2]|0,u=r[c+20>>2],r[c+16>>2]=m,r[c+20>>2]=f>>>0>m>>>0?u+1|0:u}if(h=1,!R||(u=r[a+20>>2],u&&(h=0,pt[r[r[u>>2]+32>>2]](u)|0)))break n;u=0,h=0;i:{if((R|0)<=0)break i;if((R|0)!=1)for(y=R&-2;f=u<<2,m=r[f+A>>2],r[f+A>>2]=0-(m&1)^m>>>1,m=f|4,f=r[m+A>>2],r[m+A>>2]=0-(f&1)^f>>>1,u=u+2|0,h=h+2|0,(y|0)!=(h|0););if(!(R&1))break i;f=u<<2,u=r[f+A>>2],r[f+A>>2]=0-(u&1)^u>>>1}h=0}u=r[a+20>>2];n:{if(!u)break n;if(!(pt[r[r[u>>2]+40>>2]](u,c)|0))break e;if(h)break n;if(h=0,a=r[a+20>>2],!(pt[r[r[a>>2]+44>>2]](a,A,A,R,U,r[s>>2])|0))break t}h=1}return h|0}return 0}function qd(a,s){var c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0;m=re-32|0,re=m;e:{t:{if(r[a+8>>2]<<5>>>0>=s>>>0)break t;if(r[m+24>>2]=0,r[m+16>>2]=0,r[m+20>>2]=0,(s|0)<0)break e;s=(s-1>>>5|0)+1|0,c=Te(s<<2),r[m+24>>2]=s,r[m+20>>2]=0,r[m+16>>2]=c,s=r[a>>2],r[m+12>>2]=0,r[m+8>>2]=s,c=r[a+4>>2],r[m+4>>2]=c&31,r[m>>2]=s+(c>>>3&536870908),h=re-32|0,re=h,T=r[m+4>>2],f=r[m+12>>2],R=r[m>>2],A=r[m+8>>2],s=(T-f|0)+(R-A<<3)|0,u=r[m+20>>2],y=s+u|0,r[m+20>>2]=y;n:{if(!(!u|(y-1^u-1)>>>0>31)){c=r[m+16>>2];break n}if(c=r[m+16>>2],y>>>0<=32){r[c>>2]=0;break n}r[(y-1>>>3&536870908)+c>>2]=0}c=(u>>>3&536870908)+c|0,u=u&31;n:{if((u|0)==(f|0)){if((s|0)<=0||(f&&(y=32-f|0,u=(s|0)<(y|0)?s:y,y=-1<<f&-1>>>y-u,r[c>>2]=r[c>>2]&(y^-1)|y&r[A>>2],s=s-u|0,A=A+4|0,c=c+(u+f>>>3&536870908)|0),T=c,f=(s|0)/32|0,c=f<<2,u=Hf(T,A,c),s=s-(f<<5)|0,(s|0)<=0))break n;f=c+u|0,s=-1>>>32-s|0,r[f>>2]=r[f>>2]&(s^-1)|s&r[c+A>>2];break n}r[h+28>>2]=f,r[h+24>>2]=A,r[h+20>>2]=T,r[h+16>>2]=R,r[h+12>>2]=u,r[h+8>>2]=c,s=r[h+28>>2],c=r[h+24>>2],A=(r[h+20>>2]-s|0)+(r[h+16>>2]-c<<3)|0;i:{if((A|0)<=0){s=r[h+12>>2];break i}r:{if(!s){s=r[h+12>>2];break r}f=r[h+12>>2],T=32-f|0,R=32-s|0,u=(A|0)<(R|0)?A:R,y=u>>>0>T>>>0?T:u,N=r[h+8>>2],z=r[N>>2]&(-1<<f&-1>>>T-y^-1),T=r[c>>2]&(-1<<s&-1>>>R-u),r[N>>2]=z|(s>>>0<f>>>0?T<<f-s:T>>>s-f|0),c=f+y|0,s=c&31,r[h+12>>2]=s,f=N+(c>>>3&536870908)|0,r[h+8>>2]=f,c=u-y|0,(c|0)>0&&(r[f>>2]=r[f>>2]&(-1>>>32-c^-1)|T>>>y+r[h+28>>2],r[h+12>>2]=c,s=c),A=A-u|0,c=r[h+24>>2]+4|0,r[h+24>>2]=c}if(f=32-s|0,y=-1<<s,(A|0)>=32)for(T=y^-1;u=r[h+8>>2],c=r[c>>2],r[u>>2]=T&r[u>>2]|c<<s,r[h+8>>2]=u+4,r[u+4>>2]=y&r[u+4>>2]|c>>>f,c=r[h+24>>2]+4|0,r[h+24>>2]=c,u=A>>>0>63,A=A-32|0,!!u;);if((A|0)<=0||(u=r[h+8>>2],T=f,f=(f|0)<(A|0)?f:A,T=r[u>>2]&(y&-1>>>T-f^-1),y=r[c>>2]&-1>>>32-A,r[u>>2]=T|y<<s,c=s+f|0,s=c&31,r[h+12>>2]=s,u=u+(c>>>3&536870908)|0,r[h+8>>2]=u,c=A-f|0,(c|0)<=0))break i;r[u>>2]=r[u>>2]&(-1>>>32-c^-1)|y>>>f,r[h+12>>2]=c,s=c}c=r[h+8>>2],r[h+4>>2]=s,r[h>>2]=c}if(re=h+32|0,s=r[a>>2],r[a>>2]=r[m+16>>2],r[m+16>>2]=s,c=r[a+4>>2],r[a+4>>2]=r[m+20>>2],r[m+20>>2]=c,c=r[a+8>>2],r[a+8>>2]=r[m+24>>2],r[m+24>>2]=c,!s)break t;W(s)}re=m+32|0;return}eu(),Xe()}function sTe(a,s,c,u,f,h){a=a|0,s=s|0,c=c|0,u=u|0,f=f|0,h=h|0;var m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0;m=re-32|0,re=m,r[a+68>>2]=h,f=r[a+56>>2],u=r[f>>2],h=r[f+4>>2],r[m+24>>2]=0,r[m+16>>2]=0,r[m+20>>2]=0;e:{if(h=h-u|0,(h|0)<=0)break e;if(u=r[f>>2],(u|0)!=r[f+4>>2])for(z=a+112|0,U=a+60|0,f=h>>>2|0,H=f>>>0>1?f:1;;){kv(U,r[(R<<2)+u>>2],m+16|0),f=r[m+20>>2],u=f>>31,h=r[m+16>>2],y=h>>31,T=r[m+24>>2],A=T>>31,A=A^A+T,y=A+((u^u+f)+(y^h+y)|0)|0,u=0,u=y>>>0<A>>>0?1:u;t:{if(!(u|y)){r[m+16>>2]=r[a+108>>2];break t}if(A=r[a+108>>2],N=A>>31,h=ss(rt(A,N,h,h>>31),nn,y,u),r[m+16>>2]=h,u=ss(rt(A,N,f,f>>31),nn,y,u),r[m+20>>2]=u,f=u,u=u>>31,f=f+u^u,u=h>>31,u=f+(u+h^u)|0,(T|0)>=0){r[m+24>>2]=A-u;break t}r[m+24>>2]=u-A}u=js(z),h=r[m+16>>2];t:{if(u){r[m+24>>2]=0-r[m+24>>2],f=0-r[m+20>>2]|0,r[m+20>>2]=f,h=0-h|0,r[m+16>>2]=h;break t}f=r[m+20>>2]}t:{if((h|0)>=0){u=r[a+108>>2],h=u+r[m+24>>2]|0,u=u+f|0;break t}n:{if((f|0)<0){h=r[m+24>>2],u=h>>31,u=u^u+h;break n}h=r[m+24>>2],u=h>>31,u=r[a+100>>2]-(u^u+h)|0}if((h|0)<0){h=f,f=f>>31,h=h+f^f;break t}h=f,f=f>>31,h=r[a+100>>2]-(h+f^f)|0}f=r[a+100>>2];t:{if(!(u|h)){h=f,u=h;break t}if(!((f|0)!=(h|0)|u)){u=h;break t}if(!((u|0)!=(f|0)|h)){h=u;break t}n:{if(u||(y=r[a+108>>2],(y|0)>=(h|0)))break n;h=(y<<1)-h|0,u=0;break t}n:{if((u|0)!=(f|0)||(y=r[a+108>>2],(y|0)<=(h|0)))break n;h=(y<<1)-h|0;break t}n:{if((f|0)!=(h|0)||(f=r[a+108>>2],(f|0)<=(u|0)))break n;u=(f<<1)-u|0;break t}if(h||(h=0,f=r[a+108>>2],(f|0)>=(u|0)))break t;u=(f<<1)-u|0}r[m+12>>2]=h,r[m+8>>2]=u;t:{if(r[a+8>>2]<=0)break t;for(y=r[a+32>>2],h=0;;){f=r[a+16>>2];n:{if((f|0)<(u|0)){r[y+(h<<2)>>2]=f;break n}if(f=y+(h<<2)|0,T=r[a+12>>2],(T|0)>(u|0)){r[f>>2]=T;break n}r[f>>2]=u}if(h=h+1|0,f=r[a+8>>2],(h|0)<(f|0)){u=r[(m+8|0)+(h<<2)>>2];continue}break}if(u=0,(f|0)<=0)break t;for(f=R<<3,T=f+c|0,A=s+f|0;;){h=u<<2,f=h+T|0,h=r[h+A>>2]+r[h+y>>2]|0,r[f>>2]=h;n:{if((h|0)>r[a+16>>2])h=h-r[a+20>>2]|0;else{if((h|0)>=r[a+12>>2])break n;h=h+r[a+20>>2]|0}r[f>>2]=h}if(u=u+1|0,!((u|0)<r[a+8>>2]))break}}if(R=R+1|0,(H|0)==(R|0))break e;if(f=r[a+56>>2],u=r[f>>2],!(r[f+4>>2]-u>>2>>>0>R>>>0))break}ps(),Xe()}return re=m+32|0,1}function oTe(a,s,c,u,f,h){a=a|0,s=s|0,c=c|0,u=u|0,f=f|0,h=h|0;var m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0;m=re-32|0,re=m,r[a+68>>2]=h,f=r[a+56>>2],u=r[f>>2],h=r[f+4>>2],r[m+24>>2]=0,r[m+16>>2]=0,r[m+20>>2]=0;e:{if(h=h-u|0,(h|0)<=0)break e;if(u=r[f>>2],(u|0)!=r[f+4>>2])for(z=a+112|0,U=a+60|0,f=h>>>2|0,H=f>>>0>1?f:1;;){Cv(U,r[(R<<2)+u>>2],m+16|0),f=r[m+20>>2],u=f>>31,h=r[m+16>>2],y=h>>31,T=r[m+24>>2],A=T>>31,A=A^A+T,y=A+((u^u+f)+(y^h+y)|0)|0,u=0,u=y>>>0<A>>>0?1:u;t:{if(!(u|y)){r[m+16>>2]=r[a+108>>2];break t}if(A=r[a+108>>2],N=A>>31,h=ss(rt(A,N,h,h>>31),nn,y,u),r[m+16>>2]=h,u=ss(rt(A,N,f,f>>31),nn,y,u),r[m+20>>2]=u,f=u,u=u>>31,f=f+u^u,u=h>>31,u=f+(u+h^u)|0,(T|0)>=0){r[m+24>>2]=A-u;break t}r[m+24>>2]=u-A}u=js(z),h=r[m+16>>2];t:{if(u){r[m+24>>2]=0-r[m+24>>2],f=0-r[m+20>>2]|0,r[m+20>>2]=f,h=0-h|0,r[m+16>>2]=h;break t}f=r[m+20>>2]}t:{if((h|0)>=0){u=r[a+108>>2],h=u+r[m+24>>2]|0,u=u+f|0;break t}n:{if((f|0)<0){h=r[m+24>>2],u=h>>31,u=u^u+h;break n}h=r[m+24>>2],u=h>>31,u=r[a+100>>2]-(u^u+h)|0}if((h|0)<0){h=f,f=f>>31,h=h+f^f;break t}h=f,f=f>>31,h=r[a+100>>2]-(h+f^f)|0}f=r[a+100>>2];t:{if(!(u|h)){h=f,u=h;break t}if(!((f|0)!=(h|0)|u)){u=h;break t}if(!((u|0)!=(f|0)|h)){h=u;break t}n:{if(u||(y=r[a+108>>2],(y|0)>=(h|0)))break n;h=(y<<1)-h|0,u=0;break t}n:{if((u|0)!=(f|0)||(y=r[a+108>>2],(y|0)<=(h|0)))break n;h=(y<<1)-h|0;break t}n:{if((f|0)!=(h|0)||(f=r[a+108>>2],(f|0)<=(u|0)))break n;u=(f<<1)-u|0;break t}if(h||(h=0,f=r[a+108>>2],(f|0)>=(u|0)))break t;u=(f<<1)-u|0}r[m+12>>2]=h,r[m+8>>2]=u;t:{if(r[a+8>>2]<=0)break t;for(y=r[a+32>>2],h=0;;){f=r[a+16>>2];n:{if((f|0)<(u|0)){r[y+(h<<2)>>2]=f;break n}if(f=y+(h<<2)|0,T=r[a+12>>2],(T|0)>(u|0)){r[f>>2]=T;break n}r[f>>2]=u}if(h=h+1|0,f=r[a+8>>2],(h|0)<(f|0)){u=r[(m+8|0)+(h<<2)>>2];continue}break}if(u=0,(f|0)<=0)break t;for(f=R<<3,T=f+c|0,A=s+f|0;;){h=u<<2,f=h+T|0,h=r[h+A>>2]+r[h+y>>2]|0,r[f>>2]=h;n:{if((h|0)>r[a+16>>2])h=h-r[a+20>>2]|0;else{if((h|0)>=r[a+12>>2])break n;h=h+r[a+20>>2]|0}r[f>>2]=h}if(u=u+1|0,!((u|0)<r[a+8>>2]))break}}if(R=R+1|0,(H|0)==(R|0))break e;if(f=r[a+56>>2],u=r[f>>2],!(r[f+4>>2]-u>>2>>>0>R>>>0))break}ps(),Xe()}return re=m+32|0,1}function Fee(a,s){a=a|0,s=s|0;var c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0,ie=0,ge=0;y=re-80|0,re=y;e:{t:{if(I[r[a+28>>2]+36|0]<=1){if(u=r[s+20>>2],c=r[s+16>>2],f=c+4|0,u=f>>>0<4?u+1|0:u,R=r[s+12>>2],(R|0)<=(u|0)&f>>>0>Ue[s+8>>2]|(u|0)>(R|0))break e;c=c+r[s>>2]|0,A=I[c|0]|I[c+1|0]<<8|(I[c+2|0]<<16|I[c+3|0]<<24),r[s+16>>2]=f,r[s+20>>2]=u;break t}if(!$B(1,y+76|0,s))break e;A=r[y+76>>2]}if(!A||(u=r[s+8>>2],c=r[s+16>>2],u=rt(u-c|0,r[s+12>>2]-(r[s+20>>2]+(c>>>0>u>>>0)|0)|0,5,0),c=nn,u>>>0<A>>>0&(c|0)<=0|(c|0)<0))break e;c=r[a+4>>2],u=r[a+8>>2]-c>>2;t:{if(u>>>0<A>>>0){Xr(a+4|0,A-u|0);break t}if(u>>>0<=A>>>0)break t;r[a+8>>2]=c+(A<<2)}for(ge=a+16|0,z=r[a+32>>2],h=1;;){t:{if(m=r[s+12>>2],c=m,u=r[s+20>>2],H=r[s+8>>2],T=r[s+16>>2],(c|0)<=(u|0)&H>>>0<=T>>>0|(c|0)<(u|0)||(Z=r[s>>2],R=I[Z+T|0],c=u,f=T+1|0,c=f?c:c+1|0,r[s+16>>2]=f,r[s+20>>2]=c,(c|0)>=(m|0)&f>>>0>=H>>>0|(c|0)>(m|0))||(f=I[f+Z|0],c=u,N=T+2|0,c=N>>>0<2?c+1|0:c,r[s+16>>2]=N,r[s+20>>2]=c,(c|0)>=(m|0)&N>>>0>=H>>>0|(c|0)>(m|0))||(N=I[N+Z|0],c=u,ie=T+3|0,c=ie>>>0<3?c+1|0:c,r[s+16>>2]=ie,r[s+20>>2]=c,(c|0)>=(m|0)&ie>>>0>=H>>>0|(c|0)>(m|0))||(m=I[ie+Z|0],c=u,u=T+4|0,c=u>>>0<4?c+1|0:c,r[s+16>>2]=u,r[s+20>>2]=c,!N|((f-12&255)>>>0<245|R>>>0>4)))break t;T=$v(y+8|0),H=N<<24>>24,m=(m|0)!=0,u=f-1|0,u>>>0<=10?c=r[(u<<2)+13616>>2]:c=-1,u=ne(c,N),KM(T,R,H,f,m,u,u>>31),u=Ut[r[a+28>>2]+36>>1];n:{if(((u<<8|u>>>8)&65535)>>>0<=258){if(c=r[s+20>>2],u=r[s+16>>2],f=u+2|0,c=f>>>0<2?c+1|0:c,R=r[s+12>>2],(R|0)<=(c|0)&f>>>0>Ue[s+8>>2]|(c|0)>(R|0))break t;u=u+r[s>>2]|0,h=I[u|0]|I[u+1|0]<<8,r[s+16>>2]=f,r[s+20>>2]=c;break n}if(!$B(1,y+4|0,s))break t;h=r[y+4>>2]}r[y+68>>2]=h,u=HM(Te(96),T),pt[r[r[z>>2]+8>>2]](z,r[z+12>>2]-r[z+8>>2]>>2,u),u=(r[z+12>>2]-r[z+8>>2]>>2)-1|0,f=u<<2,r[r[f+r[z+8>>2]>>2]+60>>2]=h,r[r[a+4>>2]+(U<<2)>>2]=u,h=r[a+16>>2],c=r[a+20>>2]-h>>2;n:{if((c|0)>(u|0))break n;if(r[y>>2]=-1,u=u+1|0,u>>>0>c>>>0){ea(ge,u-c|0,y),h=r[ge>>2];break n}if(c>>>0<=u>>>0)break n;r[a+20>>2]=(u<<2)+h}if(r[f+h>>2]=U,U=U+1|0,h=U>>>0<A>>>0,(A|0)!=(U|0))continue}break}U=!h}return re=y+80|0,U&1}function Vee(a,s){var c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0;c=Ut[s+38>>1];e:{if(!c)break e;t:{if(c>>>0<=511){if(u=r[s+12>>2],c=r[s+20>>2],m=r[s+16>>2],f=m+4|0,c=f>>>0<4?c+1|0:c,f>>>0>Ue[s+8>>2]&(c|0)>=(u|0)|(c|0)>(u|0))break e;c=m+r[s>>2]|0,h=I[c|0]|I[c+1|0]<<8|(I[c+2|0]<<16|I[c+3|0]<<24),r[a+12>>2]=h,c=r[s+20>>2],u=r[s+16>>2]+4|0,c=u>>>0<4?c+1|0:c,r[s+16>>2]=u,r[s+20>>2]=c;break t}if(!Np(1,a+12|0,s))break e;h=r[a+12>>2]}u=r[a>>2],c=r[a+4>>2]-u>>2;t:{if(c>>>0<h>>>0){Xr(a,h-c|0),h=r[a+12>>2];break t}if(c>>>0<=h>>>0)break t;r[a+4>>2]=u+(h<<2)}if(!h)return 1;for(T=r[s+8>>2],A=r[s+12>>2],N=r[a>>2],m=0;;){if(c=r[s+20>>2],u=r[s+16>>2],(A|0)<=(c|0)&T>>>0<=u>>>0|(c|0)>(A|0))return 0;z=r[s>>2],R=I[z+u|0],u=u+1|0,c=u?c:c+1|0,y=u,r[s+16>>2]=u,r[s+20>>2]=c,u=R>>>2|0,f=0;t:{n:{i:{r:switch(U=R&3,U|0){case 0:break n;case 3:break r;default:break i}if(c=u+m|0,c>>>0>=h>>>0)return 0;Ct(N+(m<<2)|0,0,(R&252)+4|0),m=c;break t}for(;;){if((c|0)>=(A|0)&y>>>0>=T>>>0|(c|0)>(A|0))break e;if(h=I[y+z|0],y=y+1|0,c=y?c:c+1|0,r[s+16>>2]=y,r[s+20>>2]=c,u=h<<(f<<3|6)|u,f=f+1|0,(U|0)==(f|0))break}}r[N+(m<<2)>>2]=u}if(h=r[a+12>>2],m=m+1|0,!(h>>>0>m>>>0))break}c=a+16|0,R=r[a>>2],u=r[a+16>>2],s=r[a+20>>2]-u|0;t:{if(s>>>0<=16383){Xr(c,4096-(s>>>2|0)|0);break t}if((s|0)==16384)break t;r[a+20>>2]=u+16384}s=a+28|0,m=r[s>>2],u=r[a+32>>2]-m>>3;t:{if(u>>>0<h>>>0){Xm(s,h-u|0),m=r[s>>2];break t}if(u>>>0>h>>>0&&(r[a+32>>2]=(h<<3)+m),!h)break e}for(f=0,a=0;;){if(s=R+(f<<2)|0,A=r[s>>2],u=a,y=(f<<3)+m|0,r[y+4>>2]=u,r[y>>2]=A,A=r[s>>2],a=A+u|0,a>>>0>4096)break e;t:{if(a>>>0<=u>>>0)break t;if(y=r[c>>2],s=0,T=A&7,T)for(;r[y+(u<<2)>>2]=f,u=u+1|0,s=s+1|0,(T|0)!=(s|0););if(A-1>>>0<=6)break t;for(;s=y+(u<<2)|0,r[s>>2]=f,r[s+28>>2]=f,r[s+24>>2]=f,r[s+20>>2]=f,r[s+16>>2]=f,r[s+12>>2]=f,r[s+8>>2]=f,r[s+4>>2]=f,u=u+8|0,(u|0)!=(a|0););}if(f=f+1|0,(f|0)==(h|0))break}H=(a|0)==4096}return H}function aTe(a,s,c,u,f,h){a=a|0,s=s|0,c=c|0,u=u|0,f=f|0,h=h|0;var m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0;m=re-48|0,re=m,u=r[a+8>>2],u-31>>>0>=4294967267&&(r[a+76>>2]=u,f=-1<<u,u=-2-f|0,r[a+84>>2]=u,r[a+80>>2]=f^-1,r[a+92>>2]=(u|0)/2,At[a+88>>2]=_e(2)/_e(u|0)),r[a+52>>2]=h,f=r[a+40>>2],u=r[f>>2],h=r[f+4>>2],r[m+16>>2]=0,r[m+8>>2]=0,r[m+12>>2]=0;e:{if(h=h-u|0,(h|0)<=0)break e;if(u=r[f>>2],(u|0)!=r[f+4>>2])for(z=a+8|0,U=a+96|0,H=a+44|0,f=h>>>2|0,Z=f>>>0>1?f:1;;){kv(H,r[(T<<2)+u>>2],m+8|0),f=r[m+12>>2],u=f>>31,h=r[m+8>>2],y=h>>31,R=r[m+16>>2],A=R>>31,A=A^A+R,y=A+((u^u+f)+(y^h+y)|0)|0,u=0,u=y>>>0<A>>>0?1:u;t:{if(!(u|y)){r[m+8>>2]=r[a+92>>2];break t}if(A=r[a+92>>2],N=A>>31,h=ss(rt(A,N,h,h>>31),nn,y,u),r[m+8>>2]=h,u=ss(rt(A,N,f,f>>31),nn,y,u),r[m+12>>2]=u,f=u>>31,f=f^u+f,u=h>>31,u=f+(u+h^u)|0,(R|0)>=0){r[m+16>>2]=A-u;break t}r[m+16>>2]=u-A}u=js(U),h=r[m+8>>2];t:{if(u){r[m+16>>2]=0-r[m+16>>2],f=0-r[m+12>>2]|0,r[m+12>>2]=f,h=0-h|0,r[m+8>>2]=h;break t}f=r[m+12>>2]}t:{if((h|0)>=0){h=r[a+92>>2],u=h+r[m+16>>2]|0,h=f+h|0;break t}n:{if((f|0)<0){u=r[m+16>>2],h=u>>31,h=h^u+h;break n}u=r[m+16>>2],h=u>>31,h=r[a+84>>2]-(h^u+h)|0}if((u|0)<0){u=f>>31,u=u+f^u;break t}u=f>>31,u=r[a+84>>2]-(u+f^u)|0}f=r[a+84>>2];t:{if(!(u|h)){u=f,h=u;break t}if(!((u|0)!=(f|0)|h)){h=u;break t}if(!((f|0)!=(h|0)|u)){u=h;break t}n:{if(h||(y=r[a+92>>2],(y|0)>=(u|0)))break n;u=(y<<1)-u|0,h=0;break t}n:{if((f|0)!=(h|0)||(y=r[a+92>>2],(y|0)<=(u|0)))break n;u=(y<<1)-u|0;break t}n:{if((u|0)!=(f|0)||(f=r[a+92>>2],(f|0)<=(h|0)))break n;h=(f<<1)-h|0;break t}if(u||(u=0,f=r[a+92>>2],(f|0)>=(h|0)))break t;h=(f<<1)-h|0}if(f=T<<3,y=f+s|0,R=r[y+4>>2],y=r[y>>2],r[m+36>>2]=u,r[m+32>>2]=h,r[m+24>>2]=y,r[m+28>>2]=R,BM(m+40|0,z,m+32|0,m+24|0),u=c+f|0,r[u>>2]=r[m+40>>2],r[u+4>>2]=r[m+44>>2],T=T+1|0,(Z|0)==(T|0))break e;if(f=r[a+40>>2],u=r[f>>2],!(r[f+4>>2]-u>>2>>>0>T>>>0))break}ps(),Xe()}return re=m+48|0,1}function lTe(a,s,c,u,f,h){a=a|0,s=s|0,c=c|0,u=u|0,f=f|0,h=h|0;var m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0;m=re-48|0,re=m,u=r[a+8>>2],u-31>>>0>=4294967267&&(r[a+76>>2]=u,f=-1<<u,u=-2-f|0,r[a+84>>2]=u,r[a+80>>2]=f^-1,r[a+92>>2]=(u|0)/2,At[a+88>>2]=_e(2)/_e(u|0)),r[a+52>>2]=h,f=r[a+40>>2],u=r[f>>2],h=r[f+4>>2],r[m+16>>2]=0,r[m+8>>2]=0,r[m+12>>2]=0;e:{if(h=h-u|0,(h|0)<=0)break e;if(u=r[f>>2],(u|0)!=r[f+4>>2])for(z=a+8|0,U=a+96|0,H=a+44|0,f=h>>>2|0,Z=f>>>0>1?f:1;;){Cv(H,r[(T<<2)+u>>2],m+8|0),f=r[m+12>>2],u=f>>31,h=r[m+8>>2],y=h>>31,R=r[m+16>>2],A=R>>31,A=A^A+R,y=A+((u^u+f)+(y^h+y)|0)|0,u=0,u=y>>>0<A>>>0?1:u;t:{if(!(u|y)){r[m+8>>2]=r[a+92>>2];break t}if(A=r[a+92>>2],N=A>>31,h=ss(rt(A,N,h,h>>31),nn,y,u),r[m+8>>2]=h,u=ss(rt(A,N,f,f>>31),nn,y,u),r[m+12>>2]=u,f=u>>31,f=f^u+f,u=h>>31,u=f+(u+h^u)|0,(R|0)>=0){r[m+16>>2]=A-u;break t}r[m+16>>2]=u-A}u=js(U),h=r[m+8>>2];t:{if(u){r[m+16>>2]=0-r[m+16>>2],f=0-r[m+12>>2]|0,r[m+12>>2]=f,h=0-h|0,r[m+8>>2]=h;break t}f=r[m+12>>2]}t:{if((h|0)>=0){h=r[a+92>>2],u=h+r[m+16>>2]|0,h=f+h|0;break t}n:{if((f|0)<0){u=r[m+16>>2],h=u>>31,h=h^u+h;break n}u=r[m+16>>2],h=u>>31,h=r[a+84>>2]-(h^u+h)|0}if((u|0)<0){u=f>>31,u=u+f^u;break t}u=f>>31,u=r[a+84>>2]-(u+f^u)|0}f=r[a+84>>2];t:{if(!(u|h)){u=f,h=u;break t}if(!((u|0)!=(f|0)|h)){h=u;break t}if(!((f|0)!=(h|0)|u)){u=h;break t}n:{if(h||(y=r[a+92>>2],(y|0)>=(u|0)))break n;u=(y<<1)-u|0,h=0;break t}n:{if((f|0)!=(h|0)||(y=r[a+92>>2],(y|0)<=(u|0)))break n;u=(y<<1)-u|0;break t}n:{if((u|0)!=(f|0)||(f=r[a+92>>2],(f|0)<=(h|0)))break n;h=(f<<1)-h|0;break t}if(u||(u=0,f=r[a+92>>2],(f|0)>=(h|0)))break t;h=(f<<1)-h|0}if(f=T<<3,y=f+s|0,R=r[y+4>>2],y=r[y>>2],r[m+36>>2]=u,r[m+32>>2]=h,r[m+24>>2]=y,r[m+28>>2]=R,BM(m+40|0,z,m+32|0,m+24|0),u=c+f|0,r[u>>2]=r[m+40>>2],r[u+4>>2]=r[m+44>>2],T=T+1|0,(Z|0)==(T|0))break e;if(f=r[a+40>>2],u=r[f>>2],!(r[f+4>>2]-u>>2>>>0>T>>>0))break}ps(),Xe()}return re=m+48|0,1}function cTe(a,s,c,u,f,h){a=a|0,s=s|0,c=c|0,u=u|0,f=f|0,h=h|0;var m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0;m=re-48|0,re=m,u=r[a+8>>2],u-31>>>0>=4294967267&&(r[a+76>>2]=u,f=-1<<u,u=-2-f|0,r[a+84>>2]=u,r[a+80>>2]=f^-1,r[a+92>>2]=(u|0)/2,At[a+88>>2]=_e(2)/_e(u|0)),r[a+52>>2]=h,f=r[a+40>>2],u=r[f>>2],h=r[f+4>>2],r[m+16>>2]=0,r[m+8>>2]=0,r[m+12>>2]=0;e:{if(h=h-u|0,(h|0)<=0)break e;if(u=r[f>>2],(u|0)!=r[f+4>>2])for(z=a+8|0,U=a+96|0,H=a+44|0,f=h>>>2|0,Z=f>>>0>1?f:1;;){kv(H,r[(T<<2)+u>>2],m+8|0),f=r[m+12>>2],u=f>>31,h=r[m+8>>2],y=h>>31,R=r[m+16>>2],A=R>>31,A=A^A+R,y=A+((u^u+f)+(y^h+y)|0)|0,u=0,u=y>>>0<A>>>0?1:u;t:{if(!(u|y)){r[m+8>>2]=r[a+92>>2];break t}if(A=r[a+92>>2],N=A>>31,h=ss(rt(A,N,h,h>>31),nn,y,u),r[m+8>>2]=h,u=ss(rt(A,N,f,f>>31),nn,y,u),r[m+12>>2]=u,f=u>>31,f=f^u+f,u=h>>31,u=f+(u+h^u)|0,(R|0)>=0){r[m+16>>2]=A-u;break t}r[m+16>>2]=u-A}u=js(U),h=r[m+8>>2];t:{if(u){r[m+16>>2]=0-r[m+16>>2],f=0-r[m+12>>2]|0,r[m+12>>2]=f,h=0-h|0,r[m+8>>2]=h;break t}f=r[m+12>>2]}t:{if((h|0)>=0){h=r[a+92>>2],u=h+r[m+16>>2]|0,h=f+h|0;break t}n:{if((f|0)<0){u=r[m+16>>2],h=u>>31,h=h^u+h;break n}u=r[m+16>>2],h=u>>31,h=r[a+84>>2]-(h^u+h)|0}if((u|0)<0){u=f>>31,u=u+f^u;break t}u=f>>31,u=r[a+84>>2]-(u+f^u)|0}f=r[a+84>>2];t:{if(!(u|h)){u=f,h=u;break t}if(!((u|0)!=(f|0)|h)){h=u;break t}if(!((f|0)!=(h|0)|u)){u=h;break t}n:{if(h||(y=r[a+92>>2],(y|0)>=(u|0)))break n;u=(y<<1)-u|0,h=0;break t}n:{if((f|0)!=(h|0)||(y=r[a+92>>2],(y|0)<=(u|0)))break n;u=(y<<1)-u|0;break t}n:{if((u|0)!=(f|0)||(f=r[a+92>>2],(f|0)<=(h|0)))break n;h=(f<<1)-h|0;break t}if(u||(u=0,f=r[a+92>>2],(f|0)>=(h|0)))break t;h=(f<<1)-h|0}if(f=T<<3,y=f+s|0,R=r[y+4>>2],r[m+40>>2]=r[y>>2],r[m+44>>2]=R,r[m+28>>2]=u,r[m+24>>2]=h,FM(m+32|0,z,m+24|0,m+40|0),u=c+f|0,r[u>>2]=r[m+32>>2],r[u+4>>2]=r[m+36>>2],T=T+1|0,(Z|0)==(T|0))break e;if(f=r[a+40>>2],u=r[f>>2],!(r[f+4>>2]-u>>2>>>0>T>>>0))break}ps(),Xe()}return re=m+48|0,1}function uTe(a,s,c,u,f,h){a=a|0,s=s|0,c=c|0,u=u|0,f=f|0,h=h|0;var m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0;m=re-48|0,re=m,u=r[a+8>>2],u-31>>>0>=4294967267&&(r[a+76>>2]=u,f=-1<<u,u=-2-f|0,r[a+84>>2]=u,r[a+80>>2]=f^-1,r[a+92>>2]=(u|0)/2,At[a+88>>2]=_e(2)/_e(u|0)),r[a+52>>2]=h,f=r[a+40>>2],u=r[f>>2],h=r[f+4>>2],r[m+16>>2]=0,r[m+8>>2]=0,r[m+12>>2]=0;e:{if(h=h-u|0,(h|0)<=0)break e;if(u=r[f>>2],(u|0)!=r[f+4>>2])for(z=a+8|0,U=a+96|0,H=a+44|0,f=h>>>2|0,Z=f>>>0>1?f:1;;){Cv(H,r[(T<<2)+u>>2],m+8|0),f=r[m+12>>2],u=f>>31,h=r[m+8>>2],y=h>>31,R=r[m+16>>2],A=R>>31,A=A^A+R,y=A+((u^u+f)+(y^h+y)|0)|0,u=0,u=y>>>0<A>>>0?1:u;t:{if(!(u|y)){r[m+8>>2]=r[a+92>>2];break t}if(A=r[a+92>>2],N=A>>31,h=ss(rt(A,N,h,h>>31),nn,y,u),r[m+8>>2]=h,u=ss(rt(A,N,f,f>>31),nn,y,u),r[m+12>>2]=u,f=u>>31,f=f^u+f,u=h>>31,u=f+(u+h^u)|0,(R|0)>=0){r[m+16>>2]=A-u;break t}r[m+16>>2]=u-A}u=js(U),h=r[m+8>>2];t:{if(u){r[m+16>>2]=0-r[m+16>>2],f=0-r[m+12>>2]|0,r[m+12>>2]=f,h=0-h|0,r[m+8>>2]=h;break t}f=r[m+12>>2]}t:{if((h|0)>=0){h=r[a+92>>2],u=h+r[m+16>>2]|0,h=f+h|0;break t}n:{if((f|0)<0){u=r[m+16>>2],h=u>>31,h=h^u+h;break n}u=r[m+16>>2],h=u>>31,h=r[a+84>>2]-(h^u+h)|0}if((u|0)<0){u=f>>31,u=u+f^u;break t}u=f>>31,u=r[a+84>>2]-(u+f^u)|0}f=r[a+84>>2];t:{if(!(u|h)){u=f,h=u;break t}if(!((u|0)!=(f|0)|h)){h=u;break t}if(!((f|0)!=(h|0)|u)){u=h;break t}n:{if(h||(y=r[a+92>>2],(y|0)>=(u|0)))break n;u=(y<<1)-u|0,h=0;break t}n:{if((f|0)!=(h|0)||(y=r[a+92>>2],(y|0)<=(u|0)))break n;u=(y<<1)-u|0;break t}n:{if((u|0)!=(f|0)||(f=r[a+92>>2],(f|0)<=(h|0)))break n;h=(f<<1)-h|0;break t}if(u||(u=0,f=r[a+92>>2],(f|0)>=(h|0)))break t;h=(f<<1)-h|0}if(f=T<<3,y=f+s|0,R=r[y+4>>2],r[m+40>>2]=r[y>>2],r[m+44>>2]=R,r[m+28>>2]=u,r[m+24>>2]=h,FM(m+32|0,z,m+24|0,m+40|0),u=c+f|0,r[u>>2]=r[m+32>>2],r[u+4>>2]=r[m+36>>2],T=T+1|0,(Z|0)==(T|0))break e;if(f=r[a+40>>2],u=r[f>>2],!(r[f+4>>2]-u>>2>>>0>T>>>0))break}ps(),Xe()}return re=m+48|0,1}function Gee(a,s){var c=0,u=0,f=0,h=0,m=0,y=0,A=0;h=re-16|0,re=h,c=r[a+4>>2],r[a+40>>2]=r[a>>2],r[a+44>>2]=c,c=r[a+36>>2],r[a+72>>2]=r[a+32>>2],r[a+76>>2]=c,u=r[a+28>>2],c=a- -64|0,r[c>>2]=r[a+24>>2],r[c+4>>2]=u,c=r[a+20>>2],r[a+56>>2]=r[a+16>>2],r[a+60>>2]=c,c=r[a+12>>2],r[a+48>>2]=r[a+8>>2],r[a+52>>2]=c;e:{t:{if(Lv(a+40|0,1,h+8|0)&&(c=r[a+44>>2],r[a>>2]=r[a+40>>2],r[a+4>>2]=c,c=r[a+76>>2],r[a+32>>2]=r[a+72>>2],r[a+36>>2]=c,c=r[a+68>>2],r[a+24>>2]=r[a+64>>2],r[a+28>>2]=c,u=r[a+60>>2],y=u,c=r[a+56>>2],r[a+16>>2]=c,r[a+20>>2]=u,f=r[a+52>>2],u=r[a+48>>2],r[a+8>>2]=u,r[a+12>>2]=f,A=u-c|0,m=r[h+12>>2],f=f-((c>>>0>u>>>0)+y|0)|0,u=r[h+8>>2],(m|0)==(f|0)&A>>>0>=u>>>0|f>>>0>m>>>0))break t;c=0;break e}f=c+u|0,c=y+m|0,r[a+16>>2]=f,r[a+20>>2]=u>>>0>f>>>0?c+1|0:c;t:{if(Ut[a+38>>1]<=513){c=r[a+4>>2],r[a+96>>2]=r[a>>2],r[a+100>>2]=c,c=r[a+36>>2],r[a+128>>2]=r[a+32>>2],r[a+132>>2]=c,c=r[a+28>>2],r[a+120>>2]=r[a+24>>2],r[a+124>>2]=c,c=r[a+20>>2],r[a+112>>2]=r[a+16>>2],r[a+116>>2]=c,c=r[a+12>>2],r[a+104>>2]=r[a+8>>2],r[a+108>>2]=c;n:{if(Lv(a+96|0,1,h+8|0)&&(c=r[a+100>>2],r[a>>2]=r[a+96>>2],r[a+4>>2]=c,c=r[a+132>>2],r[a+32>>2]=r[a+128>>2],r[a+36>>2]=c,c=r[a+124>>2],r[a+24>>2]=r[a+120>>2],r[a+28>>2]=c,u=r[a+116>>2],y=u,c=r[a+112>>2],r[a+16>>2]=c,r[a+20>>2]=u,f=r[a+108>>2],u=r[a+104>>2],r[a+8>>2]=u,r[a+12>>2]=f,A=u-c|0,m=r[h+12>>2],f=f-((c>>>0>u>>>0)+y|0)|0,u=r[h+8>>2],(m|0)==(f|0)&A>>>0>=u>>>0|f>>>0>m>>>0))break n;c=0;break e}f=c+u|0,c=y+m|0,r[a+16>>2]=f,r[a+20>>2]=u>>>0>f>>>0?c+1|0:c;break t}if(c=0,!sr(a+80|0,a))break e}if(c=0,!dte(a))break e;c=r[a+4>>2],r[s>>2]=r[a>>2],r[s+4>>2]=c,c=r[a+36>>2],r[s+32>>2]=r[a+32>>2],r[s+36>>2]=c,c=r[a+28>>2],r[s+24>>2]=r[a+24>>2],r[s+28>>2]=c,c=r[a+20>>2],r[s+16>>2]=r[a+16>>2],r[s+20>>2]=c,c=r[a+12>>2],r[s+8>>2]=r[a+8>>2],r[s+12>>2]=c,c=1}return re=h+16|0,c}function fTe(a,s){a=a|0,s=s|0;var c=0,u=0,f=0,h=0;h=re-32|0,re=h,f=h+8|0,c=re-80|0,re=c,a=r[s+36>>2],r[c+72>>2]=r[s+32>>2],r[c+76>>2]=a,u=r[s+28>>2],a=c- -64|0,r[a>>2]=r[s+24>>2],r[a+4>>2]=u,a=r[s+20>>2],r[c+56>>2]=r[s+16>>2],r[c+60>>2]=a,a=r[s+12>>2],r[c+48>>2]=r[s+8>>2],r[c+52>>2]=a,a=r[s+4>>2],r[c+40>>2]=r[s>>2],r[c+44>>2]=a,NM(c+8|0,c+40|0,c+24|0),a=r[c+8>>2];e:{if(a){if(r[f>>2]=a,a=f+4|0,D[c+23|0]>=0){s=c+8|4,f=r[s+4>>2],r[a>>2]=r[s>>2],r[a+4>>2]=f,r[a+8>>2]=r[s+8>>2];break e}if(Ri(a,r[c+12>>2],r[c+16>>2]),D[c+23|0]>=0)break e;W(r[c+12>>2]);break e}if(D[c+23|0]<0&&W(r[c+12>>2]),a=I[c+31|0],a>>>0>=2){a=Te(32),s=I[1621]|I[1622]<<8,D[a+24|0]=s,D[a+25|0]=s>>>8,s=I[1617]|I[1618]<<8|(I[1619]<<16|I[1620]<<24),u=I[1613]|I[1614]<<8|(I[1615]<<16|I[1616]<<24),D[a+16|0]=u,D[a+17|0]=u>>>8,D[a+18|0]=u>>>16,D[a+19|0]=u>>>24,D[a+20|0]=s,D[a+21|0]=s>>>8,D[a+22|0]=s>>>16,D[a+23|0]=s>>>24,s=I[1609]|I[1610]<<8|(I[1611]<<16|I[1612]<<24),u=I[1605]|I[1606]<<8|(I[1607]<<16|I[1608]<<24),D[a+8|0]=u,D[a+9|0]=u>>>8,D[a+10|0]=u>>>16,D[a+11|0]=u>>>24,D[a+12|0]=s,D[a+13|0]=s>>>8,D[a+14|0]=s>>>16,D[a+15|0]=s>>>24,s=I[1601]|I[1602]<<8|(I[1603]<<16|I[1604]<<24),u=I[1597]|I[1598]<<8|(I[1599]<<16|I[1600]<<24),D[a|0]=u,D[a+1|0]=u>>>8,D[a+2|0]=u>>>16,D[a+3|0]=u>>>24,D[a+4|0]=s,D[a+5|0]=s>>>8,D[a+6|0]=s>>>16,D[a+7|0]=s>>>24,D[a+26|0]=0,r[c+8>>2]=-1,s=c+8|4,Ri(s,a,26),u=D[c+23|0],r[f>>2]=r[c+8>>2],f=f+4|0;t:{if((u|0)>=0){u=r[s+4>>2],r[f>>2]=r[s>>2],r[f+4>>2]=u,r[f+8>>2]=r[s+8>>2];break t}Ri(f,r[c+12>>2],r[c+16>>2])}D[c+23|0]<0&&W(r[c+12>>2]),W(a);break e}r[f>>2]=0,r[f+4>>2]=0,r[f+16>>2]=a,r[f+8>>2]=0,r[f+12>>2]=0}return re=c+80|0,a=r[h+24>>2],D[h+23|0]<0&&W(r[h+12>>2]),re=h+32|0,a|0}function dTe(a,s,c){a=a|0,s=s|0,c=c|0;var u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0;A=c;e:{if(u=a,r[u+12>>2]==(s|0))break e;if(a=s,s=r[u+4>>2],c=r[u>>2],(s|0)!=(c|0))for(;f=s-12|0,D[s-1|0]<0&&W(r[f>>2]),s=f,(c|0)!=(s|0););if(r[u+12>>2]=a,r[u+4>>2]=c,s=r[a>>2],T=a+4|0,(s|0)==(T|0))break e;for(;;){t:{if(r[u+8>>2]!=(c|0)){n:{if(D[s+27|0]>=0){a=r[s+20>>2],r[c>>2]=r[s+16>>2],r[c+4>>2]=a,r[c+8>>2]=r[s+24>>2];break n}Ri(c,r[s+16>>2],r[s+20>>2])}r[u+4>>2]=c+12;break t}m=0;n:{i:{r:{if(f=r[u+4>>2],a=r[u>>2],h=(f-a|0)/12|0,c=h+1|0,c>>>0<357913942){if(y=(r[u+8>>2]-a|0)/12|0,R=y<<1,c=y>>>0<178956970?c>>>0>R>>>0?c:R:357913941,c){if(c>>>0>=357913942)break r;m=Te(ne(c,12))}y=ne(c,12),c=ne(h,12)+m|0;s:{if(D[s+27|0]>=0){h=r[s+20>>2],r[c>>2]=r[s+16>>2],r[c+4>>2]=h,r[c+8>>2]=r[s+24>>2];break s}Ri(c,r[s+16>>2],r[s+20>>2]),f=r[u+4>>2],a=r[u>>2]}if(m=m+y|0,h=c+12|0,(a|0)==(f|0))break i;for(;f=f-12|0,y=r[f+4>>2],c=c-12|0,r[c>>2]=r[f>>2],r[c+4>>2]=y,r[c+8>>2]=r[f+8>>2],r[f>>2]=0,r[f+4>>2]=0,r[f+8>>2]=0,(a|0)!=(f|0););if(r[u+8>>2]=m,a=r[u+4>>2],r[u+4>>2]=h,f=r[u>>2],r[u>>2]=c,(a|0)==(f|0))break n;for(;c=a-12|0,D[a-1|0]<0&&W(r[c>>2]),a=c,(c|0)!=(f|0););break n}jt(),Xe()}qn(1336),Xe()}r[u+8>>2]=m,r[u+4>>2]=h,r[u>>2]=c}f&&W(f)}c=r[s+4>>2];t:{if(!c){if(a=r[s+8>>2],r[a>>2]==(s|0))break t;for(s=s+8|0;c=r[s>>2],s=c+8|0,a=r[c+8>>2],(c|0)!=r[a>>2];);break t}for(;a=c,c=r[c>>2],!!c;);}if((a|0)==(T|0))break e;c=r[u+4>>2],s=a}}c=0;e:{if((A|0)<0||(a=r[u>>2],(r[u+4>>2]-a|0)/12>>>0<=A>>>0))break e;a=a+ne(A,12)|0,c=D[a+11|0]<0?r[a>>2]:a}return c|0}function jee(a,s,c){a=a|0,s=s|0,c=c|0;var u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0;R=re-16|0,re=R,r[R+8>>2]=c,f=r[a+12>>2],u=r[a+8>>2],h=f-u>>2;e:{if((h|0)>(s|0))break e;if(y=s+1|0,y>>>0>h>>>0){if(h=y-h|0,m=r[a+16>>2],u=r[a+12>>2],h>>>0<=m-u>>2>>>0){h&&(f=u,u=h<<2,u=Ct(f,0,u)+u|0),r[a+12>>2]=u;break e}t:{n:{i:{if(y=r[a+8>>2],A=u-y>>2,f=A+h|0,f>>>0<1073741824){if(m=m-y|0,N=m>>1,m=m>>>0<2147483644?f>>>0>N>>>0?f:N:1073741823,m){if(m>>>0>=1073741824)break i;T=Te(m<<2)}if(f=(A<<2)+T|0,A=h<<2,h=Ct(f,0,A),A=h+A|0,m=(m<<2)+T|0,(u|0)==(y|0))break n;for(;u=u-4|0,h=r[u>>2],r[u>>2]=0,f=f-4|0,r[f>>2]=h,(u|0)!=(y|0););if(r[a+16>>2]=m,h=r[a+12>>2],r[a+12>>2]=A,u=r[a+8>>2],r[a+8>>2]=f,(u|0)==(h|0))break t;for(;h=h-4|0,f=r[h>>2],r[h>>2]=0,f&&ha(f),(u|0)!=(h|0););break t}jt(),Xe()}qn(1336),Xe()}r[a+16>>2]=m,r[a+12>>2]=A,r[a+8>>2]=h}u&&W(u);break e}if(h>>>0<=y>>>0)break e;if(u=u+(y<<2)|0,(u|0)!=(f|0)){for(;f=f-4|0,c=r[f>>2],r[f>>2]=0,c&&ha(c),(u|0)!=(f|0););c=r[R+8>>2]}r[a+12>>2]=u}e:{t:{u=r[c+56>>2];n:{if((u|0)>4)break n;if(f=ne(u,12)+a|0,u=r[f+24>>2],(u|0)!=r[f+28>>2]){r[u>>2]=s,r[f+24>>2]=u+4;break n}if(y=r[f+20>>2],h=u-y|0,T=h>>2,u=T+1|0,u>>>0>=1073741824)break t;if(m=h>>1,m=h>>>0<2147483644?u>>>0>m>>>0?u:m:1073741823,m){if(m>>>0>=1073741824)break e;u=Te(m<<2)}else u=0;if(T=u+(T<<2)|0,r[T>>2]=s,(h|0)>0&&$e(u,y,h),r[f+20>>2]=u,r[f+24>>2]=T+4,r[f+28>>2]=u+(m<<2),!y)break n;W(y)}r[c+60>>2]=s,a=r[a+8>>2],r[R+8>>2]=0,s=a+(s<<2)|0,a=r[s>>2],r[s>>2]=c,a&&ha(a),a=r[R+8>>2],r[R+8>>2]=0,a&&ha(a),re=R+16|0;return}jt(),Xe()}qn(1336),Xe()}function kB(a,s){var c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0;A=re-16|0,re=A,r[A>>2]=s,m=-1;e:{if((s|0)==-1){r[A+4>>2]=-1;break e}if(c=s+1|0,r[A+4>>2]=(c>>>0)%3|0?c:s-2|0,(s>>>0)%3|0){m=s-1|0;break e}m=s+2|0}r[A+8>>2]=m,z=(s|0)==-1?-1:(s>>>0)/3|0;e:{t:{n:{i:{for(;;){r:{s:{if((s|0)!=-1&&(c=r[r[r[a+8>>2]+12>>2]+(s<<2)>>2],(c|0)!=-1))break s;if(m=0,c=r[a+216>>2],(c|0)==r[a+220>>2])break r;for(;;){h=ne(m,144)+c|0,c=r[h+136>>2],u=r[h+140>>2];a:{if(c>>>0<u>>>0){r[c>>2]=s,r[h+136>>2]=c+4;break a}if(y=r[h+132>>2],T=c-y|0,f=T>>2,c=f+1|0,c>>>0>=1073741824)break i;if(R=f<<2,u=u-y|0,f=u>>1,u=u>>>0<2147483644?c>>>0>f>>>0?c:f:1073741823,u){if(u>>>0>=1073741824)break n;c=Te(u<<2)}else c=0;if(f=R+c|0,r[f>>2]=s,(T|0)>0&&$e(c,y,T),r[h+132>>2]=c,r[h+136>>2]=f+4,r[h+140>>2]=c+(u<<2),!y)break a;W(y)}if(m=m+1|0,c=r[a+216>>2],!(m>>>0<(r[a+220>>2]-c|0)/144>>>0))break}break r}if((c>>>0)/3>>>0<z>>>0||(m=0,r[a+220>>2]==r[a+216>>2]))break r;for(;;){s:{if(!js(r[a+368>>2]+(m<<4)|0))break s;if(h=r[a+216>>2]+ne(m,144)|0,c=r[h+136>>2],u=r[h+140>>2],c>>>0<u>>>0){r[c>>2]=s,r[h+136>>2]=c+4;break s}if(y=r[h+132>>2],T=c-y|0,f=T>>2,c=f+1|0,c>>>0>=1073741824)break t;if(R=f<<2,u=u-y|0,f=u>>1,u=u>>>0<2147483644?c>>>0>f>>>0?c:f:1073741823,u){if(u>>>0>=1073741824)break e;c=Te(u<<2)}else c=0;if(f=R+c|0,r[f>>2]=s,(T|0)>0&&$e(c,y,T),r[h+132>>2]=c,r[h+136>>2]=f+4,r[h+140>>2]=c+(u<<2),!y)break s;W(y)}if(m=m+1|0,!(m>>>0<(r[a+220>>2]-r[a+216>>2]|0)/144>>>0))break}}if(N=N+1|0,(N|0)!=3){s=r[(N<<2)+A>>2];continue}break}return re=A+16|0,1}jt(),Xe()}qn(1336),Xe()}jt(),Xe()}qn(1336),Xe()}function CB(a,s){var c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0;A=re-16|0,re=A,r[A>>2]=s,m=-1;e:{if((s|0)==-1){r[A+4>>2]=-1;break e}if(c=s+1|0,r[A+4>>2]=(c>>>0)%3|0?c:s-2|0,(s>>>0)%3|0){m=s-1|0;break e}m=s+2|0}r[A+8>>2]=m;e:{t:{for(;;){n:{if(!((s|0)==-1|r[r[r[a+8>>2]+12>>2]+(s<<2)>>2]==-1)){if(m=0,r[a+220>>2]==r[a+216>>2])break n;i:{for(;;){r:{s:{if(!js(r[a+368>>2]+(m<<4)|0))break s;if(h=r[a+216>>2]+ne(m,144)|0,c=r[h+136>>2],u=r[h+140>>2],c>>>0<u>>>0){r[c>>2]=s,r[h+136>>2]=c+4;break s}if(y=r[h+132>>2],T=c-y|0,f=T>>2,c=f+1|0,c>>>0>=1073741824)break r;if(R=f<<2,u=u-y|0,f=u>>1,u=u>>>0<2147483644?c>>>0>f>>>0?c:f:1073741823,u){if(u>>>0>=1073741824)break i;c=Te(u<<2)}else c=0;if(f=R+c|0,r[f>>2]=s,(T|0)>0&&$e(c,y,T),r[h+132>>2]=c,r[h+136>>2]=f+4,r[h+140>>2]=c+(u<<2),!y)break s;W(y)}if(m=m+1|0,m>>>0<(r[a+220>>2]-r[a+216>>2]|0)/144>>>0)continue;break n}break}jt(),Xe()}qn(1336),Xe()}if(m=0,c=r[a+216>>2],(c|0)==r[a+220>>2])break n;for(;;){h=ne(m,144)+c|0,c=r[h+136>>2],u=r[h+140>>2];i:{if(c>>>0<u>>>0){r[c>>2]=s,r[h+136>>2]=c+4;break i}if(y=r[h+132>>2],T=c-y|0,f=T>>2,c=f+1|0,c>>>0>=1073741824)break t;if(R=f<<2,u=u-y|0,f=u>>1,u=u>>>0<2147483644?c>>>0>f>>>0?c:f:1073741823,u){if(u>>>0>=1073741824)break e;c=Te(u<<2)}else c=0;if(f=R+c|0,r[f>>2]=s,(T|0)>0&&$e(c,y,T),r[h+132>>2]=c,r[h+136>>2]=f+4,r[h+140>>2]=c+(u<<2),!y)break i;W(y)}if(m=m+1|0,c=r[a+216>>2],!(m>>>0<(r[a+220>>2]-c|0)/144>>>0))break}}if(N=N+1|0,(N|0)!=3){s=r[(N<<2)+A>>2];continue}break}return re=A+16|0,1}jt(),Xe()}qn(1336),Xe()}function PB(a,s,c){var u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0;if(f=r[a+8>>2],m=r[a+4>>2],(f-m|0)/12>>>0>=s>>>0){e:{if(!s)break e;if(u=m,f=ne(s,12)-12|0,h=((f>>>0)/12|0)+1&3,h)for(;T=r[c+4>>2],r[u>>2]=r[c>>2],r[u+4>>2]=T,r[u+8>>2]=r[c+8>>2],u=u+12|0,y=y+1|0,(h|0)!=(y|0););if(m=ne(s,12)+m|0,f>>>0<36)break e;for(;s=r[c+4>>2],r[u>>2]=r[c>>2],r[u+4>>2]=s,r[u+8>>2]=r[c+8>>2],r[u+20>>2]=r[c+8>>2],s=r[c+4>>2],r[u+12>>2]=r[c>>2],r[u+16>>2]=s,r[u+32>>2]=r[c+8>>2],s=r[c+4>>2],r[u+24>>2]=r[c>>2],r[u+28>>2]=s,s=r[c+4>>2],r[u+36>>2]=r[c>>2],r[u+40>>2]=s,r[u+44>>2]=r[c+8>>2],u=u+48|0,(m|0)!=(u|0););}r[a+4>>2]=m;return}e:{if(h=r[a>>2],A=(m-h|0)/12|0,u=A+s|0,u>>>0<357913942){if(f=(f-h|0)/12|0,h=f<<1,h=f>>>0<178956970?u>>>0>h>>>0?u:h:357913941,h){if(h>>>0>=357913942)break e;T=Te(ne(h,12))}if(f=ne(A,12)+T|0,u=f,s=ne(s,12),A=s-12|0,R=((A>>>0)/12|0)+1&3,R)for(u=f;N=r[c+4>>2],r[u>>2]=r[c>>2],r[u+4>>2]=N,r[u+8>>2]=r[c+8>>2],u=u+12|0,y=y+1|0,(R|0)!=(y|0););if(y=s+f|0,A>>>0>=36)for(;s=r[c+4>>2],r[u>>2]=r[c>>2],r[u+4>>2]=s,r[u+8>>2]=r[c+8>>2],r[u+20>>2]=r[c+8>>2],s=r[c+4>>2],r[u+12>>2]=r[c>>2],r[u+16>>2]=s,r[u+32>>2]=r[c+8>>2],s=r[c+4>>2],r[u+24>>2]=r[c>>2],r[u+28>>2]=s,s=r[c+4>>2],r[u+36>>2]=r[c>>2],r[u+40>>2]=s,r[u+44>>2]=r[c+8>>2],u=u+48|0,(y|0)!=(u|0););s=r[a>>2],c=m-s|0,u=f+ne((c|0)/-12|0,12)|0,(c|0)>0&&$e(u,s,c),r[a+8>>2]=ne(h,12)+T,r[a+4>>2]=y,r[a>>2]=u,s&&W(s);return}jt(),Xe()}qn(1336),Xe()}function hTe(a,s,c,u){a=a|0,s=s|0,c=c|0,u=u|0;var f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0,ie=0;a=0,y=re-16|0,re=y,T=r[s+80>>2],f=D[c+24|0],r[y+8>>2]=0,r[y>>2]=0,r[y+4>>2]=0;e:{t:{if(f){if((f|0)<0)break t;s=f<<2,a=Te(s),r[y>>2]=a,m=a+s|0,r[y+8>>2]=m,R=f-1&1073741823,N=f&7;n:{if(!N){s=a;break n}for(s=a;r[s>>2]=-1073741824,s=s+4|0,h=h+1|0,(N|0)!=(h|0););}if(R>>>0>=7)for(;r[s+24>>2]=-1073741824,r[s+28>>2]=-1073741824,r[s+16>>2]=-1073741824,r[s+20>>2]=-1073741824,r[s+8>>2]=-1073741824,r[s+12>>2]=-1073741824,r[s>>2]=-1073741824,r[s+4>>2]=-1073741824,s=s+32|0,(m|0)!=(s|0););r[y+4>>2]=m}s=ne(f,T),m=r[u>>2],h=r[u+4>>2]-m>>2;n:{if(s>>>0>h>>>0){Xr(u,s-h|0);break n}if(s>>>0>=h>>>0)break n;r[u+4>>2]=m+(s<<2)}n:{if(!T)break n;if(A=1,(f|0)<=0){for(s=0;;){if(!Gf(c,I[c+84|0]?s:r[r[c+68>>2]+(s<<2)>>2],D[c+24|0],a))break n;if(s=s+1|0,A=T>>>0>s>>>0,(s|0)==(T|0))break}break n}for(Z=f&-4,N=f&3,h=0,ie=f-1>>>0<3;;){if(Gf(c,I[c+84|0]?z:r[r[c+68>>2]+(z<<2)>>2],D[c+24|0],a)){if(H=r[u>>2],U=0,f=r[y>>2],s=0,A=0,!ie)for(;m=H+(h<<2)|0,R=s<<2,At[m>>2]=At[R+f>>2],At[m+4>>2]=At[(R|4)+f>>2],At[m+8>>2]=At[(R|8)+f>>2],At[m+12>>2]=At[(R|12)+f>>2],s=s+4|0,h=h+4|0,A=A+4|0,(Z|0)!=(A|0););if(N)for(;At[H+(h<<2)>>2]=At[(s<<2)+f>>2],s=s+1|0,h=h+1|0,U=U+1|0,(N|0)!=(U|0););if(z=z+1|0,A=z>>>0<T>>>0,(T|0)!=(z|0))continue}break}a=r[y>>2]}a&&W(a),re=y+16|0,a=(A^-1)&1;break e}jt(),Xe()}return a|0}function BM(a,s,c,u){var f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0;R=r[s+16>>2],m=r[c+4>>2]-R|0,f=m,h=r[c>>2]-R|0,r[c>>2]=h,r[c+4>>2]=f,T=r[s+16>>2],f=f>>31,y=f+m^f,f=h>>31,N=(T|0)>=(y+(f+h^f)|0);e:{if(N){f=m;break e}t:{n:{if((h|0)>=0){if(A=1,y=1,(m|0)>=0)break t;if(f=1,A=-1,y=-1,h)break n;break t}if(f=-1,A=-1,y=-1,(m|0)<=0)break t}A=(m|0)<=0?-1:1,y=f}f=h<<1,h=ne(y,T),f=f-h|0,y=(ne(A,y)|0)>=0,A=ne(A,T),f=((y?0-f|0:f)+A|0)/2|0,r[c+4>>2]=f,T=h,h=(m<<1)-A|0,h=(T+(y?0-h|0:h)|0)/2|0,r[c>>2]=h}e:{t:{n:{i:{r:{s:{a:{if(h){if((h|0)<0)break a;if((f|0)>=0)break s;break n}if(f)break r;A=1,m=0,f=0,y=0;break e}if(A=1,(f|0)>0)break i;y=(f|0)>0?253:0,m=f,f=h;break e}m=0-f|0,f=0-h|0,y=254;break t}if((f|0)<=0)break n}f=0-f|0,m=h,y=253;break t}m=0-h|0,y=255}r[c>>2]=f,r[c+4>>2]=m,A=0}c=r[u+4>>2]+m|0,h=r[u>>2]+f|0,m=r[s+16>>2];e:{if((h|0)>(m|0)){h=h-r[s+4>>2]|0;break e}if((0-m|0)<=(h|0))break e;h=r[s+4>>2]+h|0}e:{if((c|0)>(m|0)){c=c-r[s+4>>2]|0;break e}if((0-m|0)<=(c|0))break e;c=r[s+4>>2]+c|0}e:{if(A){s=c;break e}s=c;t:switch((y&3)-1|0){case 0:s=0-h|0,h=c;break e;case 1:s=0-c|0,h=0-h|0;break e;case 2:break t;default:break e}s=h,h=0-c|0}e:{if(N){c=s;break e}t:{n:{if((h|0)>=0){if(c=1,f=1,(s|0)>=0)break t;if(u=1,c=-1,f=-1,h)break n;break t}if(u=-1,c=-1,f=-1,(s|0)<=0)break t}c=(s|0)<=0?-1:1,f=u}u=h<<1,h=ne(f,m),u=u-h|0,r[a>>2]=u,T=0-u|0,y=u,u=(ne(c,f)|0)>=0,f=ne(c,m),c=((u?T:y)+f|0)/2|0,s=(s<<1)-f|0,h=(h+(u?0-s|0:s)|0)/2|0}r[a>>2]=h+R,r[a+4>>2]=c+R}function Hee(a,s){var c=0,u=0,f=0,h=0;r[a+64>>2]||(c=Te(32),r[c+16>>2]=0,r[c+20>>2]=0,r[c+8>>2]=0,r[c>>2]=0,r[c+4>>2]=0,r[c+24>>2]=0,r[c+28>>2]=0,u=r[a+64>>2],r[a+64>>2]=c,u&&(c=r[u>>2],c&&(r[u+4>>2]=c,W(c)),W(u),c=r[a+64>>2]),r[a>>2]=c,u=r[c+20>>2],r[a+8>>2]=r[c+16>>2],r[a+12>>2]=u,u=r[c+24>>2],c=r[c+28>>2],r[a+48>>2]=0,r[a+52>>2]=0,r[a+40>>2]=0,r[a+44>>2]=0,r[a+16>>2]=u,r[a+20>>2]=c);e:{D[a+24|0]=I[s+24|0],r[a+28>>2]=r[s+28>>2],D[a+32|0]=I[s+32|0],c=r[s+44>>2],r[a+40>>2]=r[s+40>>2],r[a+44>>2]=c,c=r[s+52>>2],r[a+48>>2]=r[s+48>>2],r[a+52>>2]=c,r[a+56>>2]=r[s+56>>2],c=r[s+12>>2],r[a+8>>2]=r[s+8>>2],r[a+12>>2]=c,c=r[s+20>>2],r[a+16>>2]=r[s+16>>2],r[a+20>>2]=c,r[a+60>>2]=r[s+60>>2],u=r[s>>2];t:{if(!u){r[a>>2]=0,c=1;break t}if(f=r[a>>2],c=0,!f)break t;c=r[u>>2],Cte(f,c,r[u+4>>2]-c|0,0),c=1}t:{if(!c)break t;D[a+84|0]=I[s+84|0],r[a+80>>2]=r[s+80>>2],(a|0)!=(s|0)&&Nv(a+68|0,r[s+68>>2],r[s+72>>2]),u=r[s+88>>2];n:{if(u){if(s=Te(40),c=r[u>>2],r[s+16>>2]=0,r[s+8>>2]=0,r[s+12>>2]=0,r[s>>2]=c,f=r[u+12>>2]-r[u+8>>2]|0,f){if((f|0)<0)break e;c=Te(f),r[s+8>>2]=c,r[s+12>>2]=c,r[s+16>>2]=c+f,h=r[u+8>>2],f=r[u+12>>2]-h|0,(f|0)>0&&(c=$e(c,h,f)+f|0),r[s+12>>2]=c}if(c=r[u+36>>2],r[s+32>>2]=r[u+32>>2],r[s+36>>2]=c,c=r[u+28>>2],r[s+24>>2]=r[u+24>>2],r[s+28>>2]=c,c=r[a+88>>2],r[a+88>>2]=s,c)break n;break t}if(c=r[a+88>>2],r[a+88>>2]=0,!c)break t}a=r[c+8>>2],a&&(r[c+12>>2]=a,W(a)),W(c)}return}jt(),Xe()}function UM(a,s,c,u){var f=0,h=0,m=0,y=0,A=0,T=0;if(y=u-c|0,!((y|0)<=0)){e:{if(h=r[a+8>>2],A=r[a+4>>2],(y|0)<=(h-A|0)){if(T=A-s|0,(T|0)>=(y|0)){m=A,h=u;break e}if(m=A,h=c+T|0,(h|0)!=(u|0))for(f=h;D[m|0]=I[f|0],m=m+1|0,f=f+1|0,(f|0)!=(u|0););if(r[a+4>>2]=m,(T|0)>0)break e;return}if(f=r[a>>2],u=y+(A-f|0)|0,(u|0)>=0){if(m=s-f|0,h=h-f|0,T=h<<1,h=h>>>0<1073741823?u>>>0>T>>>0?u:T:2147483647,h?u=Te(h):u=0,c=$e(m+u|0,c,y),(m|0)>0&&$e(u,f,m),c=c+y|0,(s|0)!=(A|0)){if(m=(s^-1)+A|0,y=A-s&7,y)for(f=0;D[c|0]=I[s|0],c=c+1|0,s=s+1|0,f=f+1|0,(y|0)!=(f|0););if(m>>>0>=7)for(;D[c|0]=I[s|0],D[c+1|0]=I[s+1|0],D[c+2|0]=I[s+2|0],D[c+3|0]=I[s+3|0],D[c+4|0]=I[s+4|0],D[c+5|0]=I[s+5|0],D[c+6|0]=I[s+6|0],D[c+7|0]=I[s+7|0],c=c+8|0,s=s+8|0,(A|0)!=(s|0););f=r[a>>2]}r[a+8>>2]=u+h,r[a+4>>2]=c,r[a>>2]=u,f&&W(f);return}jt(),Xe()}if(f=m,u=f-y|0,A>>>0>u>>>0)for(;D[f|0]=I[u|0],f=f+1|0,u=u+1|0,A>>>0>u>>>0;);if(r[a+4>>2]=f,a=m-(s+y|0)|0,a&&Hf(m-a|0,s,a),(c|0)!=(h|0)){a=(c^-1)+h|0,m=h-c&7;e:{if(!m){f=s;break e}for(u=0,f=s;D[f|0]=I[c|0],f=f+1|0,c=c+1|0,u=u+1|0,(m|0)!=(u|0););}if(!(a>>>0<7))for(;D[f|0]=I[c|0],D[f+1|0]=I[c+1|0],D[f+2|0]=I[c+2|0],D[f+3|0]=I[c+3|0],D[f+4|0]=I[c+4|0],D[f+5|0]=I[c+5|0],D[f+6|0]=I[c+6|0],D[f+7|0]=I[c+7|0],f=f+8|0,c=c+8|0,(h|0)!=(c|0););}}}function pTe(a,s,c,u){a=a|0,s=s|0,c=c|0,u=u|0;var f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0,ie=0;f=re-16|0,re=f,A=r[s+80>>2],a=D[c+24|0],h=ne(A,a);e:{t:{s=r[c+28>>2];n:{if(!(!I[c+84|0]|(s|0)!=5&(s|0)!=6)){if(y=r[c+48>>2],A=r[r[c>>2]>>2],s=0,r[f+8>>2]=0,r[f>>2]=0,r[f+4>>2]=0,c=0,a=h<<2,a){if((a|0)<0)break t;c=Te(a),s=$e(c,y+A|0,a),T=s+a|0,s=s+(a>>2<<2)|0}a=r[u>>2],a&&(r[u+4>>2]=a,W(a)),r[u+8>>2]=s,r[u+4>>2]=T,r[u>>2]=c,a=1;break n}if(r[f+8>>2]=0,r[f>>2]=0,r[f+4>>2]=0,a){if((a|0)<0)break t;s=a<<2,y=Te(s),r[f>>2]=y,m=s+y|0,r[f+8>>2]=m,Ct(y,0,s),r[f+4>>2]=m}m=r[u>>2],s=r[u+4>>2]-m>>2;i:{if(s>>>0<h>>>0){Xr(u,h-s|0);break i}if(s>>>0<=h>>>0)break i;r[u+4>>2]=m+(h<<2)}i:{if(!A){s=0;break i}if(!a){for(a=0,s=1;;){if(!zM(c,I[c+84|0]?a:r[r[c+68>>2]+(a<<2)>>2],D[c+24|0],y))break i;if(a=a+1|0,s=A>>>0>a>>>0,(a|0)==(A|0))break}break i}for(Z=a&-4,U=a&3,ie=a-1>>>0<3,s=1,h=0;;){if(zM(c,I[c+84|0]?h:r[r[c+68>>2]+(h<<2)>>2],D[c+24|0],y)){if(H=r[u>>2],z=0,m=r[f>>2],a=0,s=0,!ie)for(;R=(T<<2)+H|0,N=a<<2,r[R>>2]=r[m+N>>2],r[R+4>>2]=r[m+(N|4)>>2],r[R+8>>2]=r[m+(N|8)>>2],r[R+12>>2]=r[m+(N|12)>>2],a=a+4|0,T=T+4|0,s=s+4|0,(Z|0)!=(s|0););if(U)for(;r[(T<<2)+H>>2]=r[m+(a<<2)>>2],a=a+1|0,T=T+1|0,z=z+1|0,(z|0)!=(U|0););if(h=h+1|0,s=A>>>0>h>>>0,(h|0)!=(A|0))continue}break}y=r[f>>2]}y&&W(y),a=s^1}re=f+16|0,a=a&1;break e}jt(),Xe()}return a|0}function $ee(a,s,c,u){a=a|0,s=s|0,c=c|0,u=u|0;var f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0,ie=0;f=re-16|0,re=f,A=r[s+80>>2],a=D[c+24|0],h=ne(A,a);e:{t:{s=r[c+28>>2];n:{if(!(!I[c+84|0]|(s|0)!=5&(s|0)!=6)){if(y=r[c+48>>2],A=r[r[c>>2]>>2],s=0,r[f+8>>2]=0,r[f>>2]=0,r[f+4>>2]=0,c=0,a=h<<2,a){if((a|0)<0)break t;c=Te(a),s=$e(c,y+A|0,a),T=s+a|0,s=s+(a>>2<<2)|0}a=r[u>>2],a&&(r[u+4>>2]=a,W(a)),r[u+8>>2]=s,r[u+4>>2]=T,r[u>>2]=c,a=1;break n}if(r[f+8>>2]=0,r[f>>2]=0,r[f+4>>2]=0,a){if((a|0)<0)break t;s=a<<2,y=Te(s),r[f>>2]=y,m=s+y|0,r[f+8>>2]=m,Ct(y,0,s),r[f+4>>2]=m}m=r[u>>2],s=r[u+4>>2]-m>>2;i:{if(s>>>0<h>>>0){Xr(u,h-s|0);break i}if(s>>>0<=h>>>0)break i;r[u+4>>2]=m+(h<<2)}i:{if(!A){s=0;break i}if(!a){for(a=0,s=1;;){if(!LM(c,I[c+84|0]?a:r[r[c+68>>2]+(a<<2)>>2],D[c+24|0],y))break i;if(a=a+1|0,s=A>>>0>a>>>0,(a|0)==(A|0))break}break i}for(Z=a&-4,U=a&3,ie=a-1>>>0<3,s=1,h=0;;){if(LM(c,I[c+84|0]?h:r[r[c+68>>2]+(h<<2)>>2],D[c+24|0],y)){if(H=r[u>>2],z=0,m=r[f>>2],a=0,s=0,!ie)for(;R=(T<<2)+H|0,N=a<<2,r[R>>2]=r[m+N>>2],r[R+4>>2]=r[m+(N|4)>>2],r[R+8>>2]=r[m+(N|8)>>2],r[R+12>>2]=r[m+(N|12)>>2],a=a+4|0,T=T+4|0,s=s+4|0,(Z|0)!=(s|0););if(U)for(;r[(T<<2)+H>>2]=r[m+(a<<2)>>2],a=a+1|0,T=T+1|0,z=z+1|0,(z|0)!=(U|0););if(h=h+1|0,s=A>>>0>h>>>0,(h|0)!=(A|0))continue}break}y=r[f>>2]}y&&W(y),a=s^1}re=f+16|0,a=a&1;break e}jt(),Xe()}return a|0}function mTe(a,s,c,u){a=a|0,s=s|0,c=c|0,u=u|0;var f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0,ie=0;f=re-16|0,re=f,A=r[s+80>>2],a=D[c+24|0],h=ne(A,a);e:{t:{s=r[c+28>>2];n:{if(!(!I[c+84|0]|(s|0)!=3&(s|0)!=4)){if(y=r[c+48>>2],A=r[r[c>>2]>>2],s=0,r[f+8>>2]=0,r[f>>2]=0,r[f+4>>2]=0,c=0,a=h<<1,a){if((a|0)<0)break t;c=Te(a),s=$e(c,y+A|0,a),T=s+a|0,s=s+(a>>1<<1)|0}a=r[u>>2],a&&(r[u+4>>2]=a,W(a)),r[u+8>>2]=s,r[u+4>>2]=T,r[u>>2]=c,a=1;break n}if(r[f+8>>2]=0,r[f>>2]=0,r[f+4>>2]=0,a){if((a|0)<0)break t;s=a<<1,y=Te(s),r[f>>2]=y,m=s+y|0,r[f+8>>2]=m,Ct(y,0,s),r[f+4>>2]=m}m=r[u>>2],s=r[u+4>>2]-m>>1;i:{if(s>>>0<h>>>0){yte(u,h-s|0);break i}if(s>>>0<=h>>>0)break i;r[u+4>>2]=m+(h<<1)}i:{if(!A){s=0;break i}if(!a){for(a=0,s=1;;){if(!OM(c,I[c+84|0]?a:r[r[c+68>>2]+(a<<2)>>2],D[c+24|0],y))break i;if(a=a+1|0,s=A>>>0>a>>>0,(a|0)==(A|0))break}break i}for(Z=a&-4,U=a&3,ie=a-1>>>0<3,s=1,h=0;;){if(OM(c,I[c+84|0]?h:r[r[c+68>>2]+(h<<2)>>2],D[c+24|0],y)){if(H=r[u>>2],z=0,m=r[f>>2],a=0,s=0,!ie)for(;R=(T<<1)+H|0,N=a<<1,zt[R>>1]=Ut[m+N>>1],zt[R+2>>1]=Ut[m+(N|2)>>1],zt[R+4>>1]=Ut[m+(N|4)>>1],zt[R+6>>1]=Ut[m+(N|6)>>1],a=a+4|0,T=T+4|0,s=s+4|0,(Z|0)!=(s|0););if(U)for(;zt[(T<<1)+H>>1]=Ut[m+(a<<1)>>1],a=a+1|0,T=T+1|0,z=z+1|0,(z|0)!=(U|0););if(h=h+1|0,s=A>>>0>h>>>0,(h|0)!=(A|0))continue}break}y=r[f>>2]}y&&W(y),a=s^1}re=f+16|0,a=a&1;break e}jt(),Xe()}return a|0}function gTe(a,s,c,u){a=a|0,s=s|0,c=c|0,u=u|0;var f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0,ie=0;f=re-16|0,re=f,A=r[s+80>>2],a=D[c+24|0],h=ne(A,a);e:{t:{s=r[c+28>>2];n:{if(!(!I[c+84|0]|(s|0)!=3&(s|0)!=4)){if(y=r[c+48>>2],A=r[r[c>>2]>>2],s=0,r[f+8>>2]=0,r[f>>2]=0,r[f+4>>2]=0,c=0,a=h<<1,a){if((a|0)<0)break t;c=Te(a),s=$e(c,y+A|0,a),T=s+a|0,s=s+(a>>1<<1)|0}a=r[u>>2],a&&(r[u+4>>2]=a,W(a)),r[u+8>>2]=s,r[u+4>>2]=T,r[u>>2]=c,a=1;break n}if(r[f+8>>2]=0,r[f>>2]=0,r[f+4>>2]=0,a){if((a|0)<0)break t;s=a<<1,y=Te(s),r[f>>2]=y,m=s+y|0,r[f+8>>2]=m,Ct(y,0,s),r[f+4>>2]=m}m=r[u>>2],s=r[u+4>>2]-m>>1;i:{if(s>>>0<h>>>0){yte(u,h-s|0);break i}if(s>>>0<=h>>>0)break i;r[u+4>>2]=m+(h<<1)}i:{if(!A){s=0;break i}if(!a){for(a=0,s=1;;){if(!IM(c,I[c+84|0]?a:r[r[c+68>>2]+(a<<2)>>2],D[c+24|0],y))break i;if(a=a+1|0,s=A>>>0>a>>>0,(a|0)==(A|0))break}break i}for(Z=a&-4,U=a&3,ie=a-1>>>0<3,s=1,h=0;;){if(IM(c,I[c+84|0]?h:r[r[c+68>>2]+(h<<2)>>2],D[c+24|0],y)){if(H=r[u>>2],z=0,m=r[f>>2],a=0,s=0,!ie)for(;R=(T<<1)+H|0,N=a<<1,zt[R>>1]=Ut[m+N>>1],zt[R+2>>1]=Ut[m+(N|2)>>1],zt[R+4>>1]=Ut[m+(N|4)>>1],zt[R+6>>1]=Ut[m+(N|6)>>1],a=a+4|0,T=T+4|0,s=s+4|0,(Z|0)!=(s|0););if(U)for(;zt[(T<<1)+H>>1]=Ut[m+(a<<1)>>1],a=a+1|0,T=T+1|0,z=z+1|0,(z|0)!=(U|0););if(h=h+1|0,s=A>>>0>h>>>0,(h|0)!=(A|0))continue}break}y=r[f>>2]}y&&W(y),a=s^1}re=f+16|0,a=a&1;break e}jt(),Xe()}return a|0}function vTe(a,s,c,u,f,h){a=a|0,s=s|0,c=c|0,u=u|0,f=f|0,h=h|0;var m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0,H=0,Z=0;r[a+8>>2]=f,h=a+32|0,A=r[h>>2],y=r[a+36>>2]-A>>2;e:{if(y>>>0<f>>>0){Xr(h,f-y|0),A=r[h>>2],h=r[a+8>>2];break e}f>>>0<y>>>0&&(r[a+36>>2]=(f<<2)+A),h=f}y=0,m=(f&1073741823)!=(f|0)?-1:f<<2,z=Ct(Te(m),0,m);e:{if((h|0)<=0)break e;for(;;){h=y<<2,m=r[h+z>>2],T=r[a+16>>2];t:{if((m|0)>(T|0)){r[h+A>>2]=T;break t}if(h=h+A|0,T=r[a+12>>2],(T|0)>(m|0)){r[h>>2]=T;break t}r[h>>2]=m}if(h=r[a+8>>2],y=y+1|0,!((h|0)>(y|0)))break}if((h|0)<=0)break e;for(y=0;;){m=y<<2,h=m+c|0,m=r[s+m>>2]+r[m+A>>2]|0,r[h>>2]=m;t:{if((m|0)>r[a+16>>2])m=m-r[a+20>>2]|0;else{if((m|0)>=r[a+12>>2])break t;m=m+r[a+20>>2]|0}r[h>>2]=m}if(h=r[a+8>>2],y=y+1|0,!((h|0)>(y|0)))break}}if(!((u|0)<=(f|0)|(h|0)<=0))for(H=0-f<<2,A=f;;){e:{if((h|0)<=0)break e;for(N=A<<2,U=N+c|0,Z=U+H|0,T=r[a+32>>2],y=0;;){h=y<<2,m=r[h+Z>>2],R=r[a+16>>2];t:{if((m|0)>(R|0)){r[h+T>>2]=R;break t}if(h=h+T|0,R=r[a+12>>2],(R|0)>(m|0)){r[h>>2]=R;break t}r[h>>2]=m}if(h=r[a+8>>2],y=y+1|0,!((h|0)>(y|0)))break}if(y=0,(h|0)<=0)break e;for(N=s+N|0;;){m=y<<2,h=m+U|0,m=r[m+N>>2]+r[m+T>>2]|0,r[h>>2]=m;t:{if((m|0)>r[a+16>>2])m=m-r[a+20>>2]|0;else{if((m|0)>=r[a+12>>2])break t;m=m+r[a+20>>2]|0}r[h>>2]=m}if(h=r[a+8>>2],y=y+1|0,!((h|0)>(y|0)))break}}if(A=f+A|0,!((A|0)<(u|0)))break}return W(z),1}function Wee(a,s){a=a|0,s=s|0;var c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0;A=re-32|0,re=A,r[A+28>>2]=0;e:{t:{if(Ut[s+38>>1]<=513){if(c=r[s+20>>2],u=r[s+16>>2],m=u+4|0,c=m>>>0<4?c+1|0:c,f=r[s+12>>2],(f|0)<=(c|0)&m>>>0>Ue[s+8>>2]|(c|0)>(f|0))break e;u=u+r[s>>2]|0,u=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),r[s+16>>2]=m,r[s+20>>2]=c;break t}if(!Gv(1,A+28|0,s))break e;u=r[A+28>>2]}if(!u)break e;Ov(a+76|0,u),c=A+8|0,r[c>>2]=0,r[c+4>>2]=0,D[c+5|0]=0,D[c+6|0]=0,D[c+7|0]=0,D[c+8|0]=0,D[c+9|0]=0,D[c+10|0]=0,D[c+11|0]=0,D[c+12|0]=0;t:{if(!sr(c,s))break t;for(f=1;h=1<<y,T=js(c),m=r[a+76>>2]+(y>>>3&536870908)|0,f=f^T,f&1?h=r[m>>2]&(h^-1):h=h|r[m>>2],f=f^1,r[m>>2]=h,y=y+1|0,(y|0)!=(u|0););if(y=0,u=r[s+12>>2],m=u,c=r[s+20>>2],f=c,h=r[s+16>>2],T=h+4|0,c=T>>>0<4?c+1|0:c,R=r[s+8>>2],R>>>0<T>>>0&(c|0)>=(u|0)|(c|0)>(u|0)||(N=r[s>>2],u=N+h|0,u=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),r[s+16>>2]=T,r[s+20>>2]=c,c=f,f=h+8|0,c=f>>>0<8?c+1|0:c,h=f,f=c,h>>>0>R>>>0&(c|0)>=(m|0)|(c|0)>(m|0))||(c=T+N|0,c=I[c|0]|I[c+1|0]<<8|(I[c+2|0]<<16|I[c+3|0]<<24),r[s+16>>2]=h,r[s+20>>2]=f,(c|0)<(u|0))||(r[a+16>>2]=c,r[a+12>>2]=u,s=(c>>31)-((u>>31)+(c>>>0<u>>>0)|0)|0,c=c-u|0,!s&c>>>0>2147483646|s)||(y=1,s=c+1|0,r[a+20>>2]=s,c=s>>>1|0,r[a+24>>2]=c,r[a+28>>2]=0-c,s&1))break t;r[a+24>>2]=c-1}}return re=A+32|0,y|0}function RB(a,s){var c=0,u=0,f=0,h=0,m=0;u=-1,h=-1;e:{if((s|0)==-1||(c=s+1|0,u=(c>>>0)%3|0?c:s-2|0,h=s-1|0,(s>>>0)%3|0))break e;h=s+2|0}e:{t:{n:{i:{r:{s:switch(f=r[a+184>>2],f|0){case 7:break n;case 3:break i;case 5:break r;case 0:case 1:break s;default:break e}m=r[a+148>>2],c=-1,f=1,u=((u|0)!=-1?r[r[m>>2]+(u<<2)>>2]:c)<<2,c=r[a+156>>2],u=u+c|0,r[u>>2]=r[u>>2]+1,c=(((h|0)!=-1?r[r[m>>2]+(h<<2)>>2]:-1)<<2)+c|0;break t}m=r[a+148>>2],c=r[a+156>>2],f=c+(((s|0)!=-1?r[r[m>>2]+(s<<2)>>2]:-1)<<2)|0,r[f>>2]=r[f>>2]+1,u=(((u|0)!=-1?r[r[m>>2]+(u<<2)>>2]:-1)<<2)+c|0,r[u>>2]=r[u>>2]+1,f=2,c=(((h|0)!=-1?r[r[m>>2]+(h<<2)>>2]:-1)<<2)+c|0;break t}m=r[a+148>>2],c=r[a+156>>2],f=c+(((s|0)!=-1?r[r[m>>2]+(s<<2)>>2]:-1)<<2)|0,r[f>>2]=r[f>>2]+1,u=(((u|0)!=-1?r[r[m>>2]+(u<<2)>>2]:-1)<<2)+c|0,r[u>>2]=r[u>>2]+2,f=1,c=(((h|0)!=-1?r[r[m>>2]+(h<<2)>>2]:-1)<<2)+c|0;break t}m=r[a+148>>2],c=r[a+156>>2],f=c+(((s|0)!=-1?r[r[m>>2]+(s<<2)>>2]:-1)<<2)|0,r[f>>2]=r[f>>2]+2,u=(((u|0)!=-1?r[r[m>>2]+(u<<2)>>2]:-1)<<2)+c|0,r[u>>2]=r[u>>2]+2,f=2,c=(((h|0)!=-1?r[r[m>>2]+(h<<2)>>2]:-1)<<2)+c|0}r[c>>2]=r[c>>2]+f,f=r[a+184>>2]}e:switch(f|0){case 0:case 5:h=r[a+156>>2],c=-1;t:{if((s|0)==-1||(u=s+1|0,s=(u>>>0)%3|0?u:s-2|0,c=-1,(s|0)==-1))break t;c=r[r[r[a+148>>2]>>2]+(s<<2)>>2]}if(r[h+(c<<2)>>2]<=5){r[a+188>>2]=5;return}r[a+188>>2]=0;return;default:break e}r[a+188>>2]=-1}function _Te(a){a=a|0;var s=0,c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0;f=re-16|0,re=f,y=1,A=pt[r[r[a>>2]+24>>2]](a)|0;e:{if((A|0)<=0){y=0;break e}for(N=a+48|0;;){t:{n:{if(!r[(pt[r[r[a>>2]+28>>2]](a)|0)+40>>2]||(T=h<<2,m=r[T+r[a+36>>2]>>2],s=r[m+8>>2],R=Bv(m),!R)||(m=r[(pt[r[r[a>>2]+28>>2]](a)|0)+40>>2],r[f+12>>2]=r[s+56>>2],s=Te(32),r[f>>2]=s,r[f+4>>2]=24,r[f+8>>2]=-2147483616,D[s+24|0]=0,c=I[1318]|I[1319]<<8|(I[1320]<<16|I[1321]<<24),u=I[1314]|I[1315]<<8|(I[1316]<<16|I[1317]<<24),D[s+16|0]=u,D[s+17|0]=u>>>8,D[s+18|0]=u>>>16,D[s+19|0]=u>>>24,D[s+20|0]=c,D[s+21|0]=c>>>8,D[s+22|0]=c>>>16,D[s+23|0]=c>>>24,c=I[1310]|I[1311]<<8|(I[1312]<<16|I[1313]<<24),u=I[1306]|I[1307]<<8|(I[1308]<<16|I[1309]<<24),D[s+8|0]=u,D[s+9|0]=u>>>8,D[s+10|0]=u>>>16,D[s+11|0]=u>>>24,D[s+12|0]=c,D[s+13|0]=c>>>8,D[s+14|0]=c>>>16,D[s+15|0]=c>>>24,c=I[1302]|I[1303]<<8|(I[1304]<<16|I[1305]<<24),u=I[1298]|I[1299]<<8|(I[1300]<<16|I[1301]<<24),D[s|0]=u,D[s+1|0]=u>>>8,D[s+2|0]=u>>>16,D[s+3|0]=u>>>24,D[s+4|0]=c,D[s+5|0]=c>>>8,D[s+6|0]=c>>>16,D[s+7|0]=c>>>24,s=fte(m,f+12|0,f),D[f+11|0]<0&&W(r[f>>2]),!s))break n;Hee(r[r[r[a+36>>2]+T>>2]+8>>2],R);break t}if(s=r[r[a+36>>2]+(h<<2)>>2],!(pt[r[r[s>>2]+24>>2]](s,N)|0))break e}if(h=h+1|0,y=(A|0)>(h|0),(h|0)==(A|0))break}}return re=f+16|0,(y^-1)&1}function Yee(a,s){a=a|0,s=s|0;var c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0;T=re-16|0,re=T,c=r[s+20>>2],u=r[s+16>>2],m=u+4|0,c=m>>>0<4?c+1|0:c,f=r[s+12>>2];e:{if((f|0)<=(c|0)&m>>>0>Ue[s+8>>2]|(c|0)>(f|0)||(u=u+r[s>>2]|0,u=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),r[s+16>>2]=m,r[s+20>>2]=c,(u|0)<0))break e;Ov(a+76|0,u),c=T,r[c>>2]=0,r[c+4>>2]=0,D[c+5|0]=0,D[c+6|0]=0,D[c+7|0]=0,D[c+8|0]=0,D[c+9|0]=0,D[c+10|0]=0,D[c+11|0]=0,D[c+12|0]=0;t:{if(!sr(c,s))break t;if(u)for(f=1;h=1<<y,A=js(c),m=r[a+76>>2]+(y>>>3&536870908)|0,f=f^A,f&1?h=r[m>>2]&(h^-1):h=h|r[m>>2],f=f^1,r[m>>2]=h,y=y+1|0,(u|0)!=(y|0););if(y=0,u=r[s+12>>2],m=u,c=r[s+20>>2],f=c,h=r[s+16>>2],A=h+4|0,c=A>>>0<4?c+1|0:c,R=r[s+8>>2],R>>>0<A>>>0&(c|0)>=(u|0)|(c|0)>(u|0)||(N=r[s>>2],u=N+h|0,u=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),r[s+16>>2]=A,r[s+20>>2]=c,c=f,f=h+8|0,c=f>>>0<8?c+1|0:c,h=f,f=c,h>>>0>R>>>0&(c|0)>=(m|0)|(c|0)>(m|0))||(c=A+N|0,c=I[c|0]|I[c+1|0]<<8|(I[c+2|0]<<16|I[c+3|0]<<24),r[s+16>>2]=h,r[s+20>>2]=f,(c|0)<(u|0))||(r[a+16>>2]=c,r[a+12>>2]=u,s=(c>>31)-((u>>31)+(c>>>0<u>>>0)|0)|0,c=c-u|0,!s&c>>>0>2147483646|s)||(y=1,s=c+1|0,r[a+20>>2]=s,c=s>>>1|0,r[a+24>>2]=c,r[a+28>>2]=0-c,s&1))break t;r[a+24>>2]=c-1}}return re=T+16|0,y|0}function yTe(a,s,c,u){a=a|0,s=s|0,c=c|0,u=u|0;var f=0,h=0,m=0,y=0,A=0,T=0,R=0;m=re-16|0,re=m,y=r[s+80>>2],A=I[c+24|0],f=A<<24>>24,s=ne(y,f);e:{t:{a=r[c+28>>2];n:{if(!(!I[c+84|0]|(a|0)!=1&(a|0)!=2)){if(f=r[c+48>>2],c=r[r[c>>2]>>2],a=0,r[m+8>>2]=0,r[m>>2]=0,r[m+4>>2]=0,s){if((s|0)<0)break t;h=Te(s),a=$e(h,c+f|0,s)+s|0}s=r[u>>2],s&&(r[u+4>>2]=s,W(s)),r[u+8>>2]=a,r[u+4>>2]=a,r[u>>2]=h,s=1;break n}a=0,r[m+8>>2]=0,r[m>>2]=0,r[m+4>>2]=0;i:{r:{if(f){if((f|0)<0)break t;if(h=Te(f),r[m>>2]=h,Ct(h,0,f),$f(u,s),y)break r;s=1;break i}if($f(u,s),s=1,!y)break n;for(;RM(c,I[c+84|0]?a:r[r[c+68>>2]+(a<<2)>>2],D[c+24|0],0)&&(a=a+1|0,s=y>>>0>a>>>0,(a|0)!=(y|0)););s=s^1;break n}s=f-1|0,T=s&-2,R=s&1,s=1,f=0;r:{for(;;){if(h=r[m>>2],!RM(c,I[c+84|0]?f:r[r[c+68>>2]+(f<<2)>>2],D[c+24|0],h))break r;D[r[u>>2]+a|0]=I[h|0],s=1,a=a+1|0,h=0;s:{a:switch(A-1|0){default:for(;D[r[u>>2]+a|0]=I[r[m>>2]+s|0],D[(r[u>>2]+a|0)+1|0]=I[(r[m>>2]+s|0)+1|0],s=s+2|0,a=a+2|0,h=h+2|0,(T|0)!=(h|0););break;case 0:break s;case 1:break a}if(!R)break s;D[r[u>>2]+a|0]=I[r[m>>2]+s|0],a=a+1|0}if(f=f+1|0,s=y>>>0>f>>>0,(f|0)==(y|0))break}h=r[m>>2]}if(s=!s,!h)break n}W(h)}re=m+16|0,a=s&1;break e}jt(),Xe()}return a|0}function bTe(a,s,c,u){a=a|0,s=s|0,c=c|0,u=u|0;var f=0,h=0,m=0,y=0,A=0,T=0,R=0;m=re-16|0,re=m,y=r[s+80>>2],A=I[c+24|0],f=A<<24>>24,s=ne(y,f);e:{t:{a=r[c+28>>2];n:{if(!(!I[c+84|0]|(a|0)!=1&(a|0)!=2)){if(f=r[c+48>>2],c=r[r[c>>2]>>2],a=0,r[m+8>>2]=0,r[m>>2]=0,r[m+4>>2]=0,s){if((s|0)<0)break t;h=Te(s),a=$e(h,c+f|0,s)+s|0}s=r[u>>2],s&&(r[u+4>>2]=s,W(s)),r[u+8>>2]=a,r[u+4>>2]=a,r[u>>2]=h,s=1;break n}a=0,r[m+8>>2]=0,r[m>>2]=0,r[m+4>>2]=0;i:{r:{if(f){if((f|0)<0)break t;if(h=Te(f),r[m>>2]=h,Ct(h,0,f),$f(u,s),y)break r;s=1;break i}if($f(u,s),s=1,!y)break n;for(;DM(c,I[c+84|0]?a:r[r[c+68>>2]+(a<<2)>>2],D[c+24|0],0)&&(a=a+1|0,s=y>>>0>a>>>0,(a|0)!=(y|0)););s=s^1;break n}s=f-1|0,T=s&-2,R=s&1,s=1,f=0;r:{for(;;){if(h=r[m>>2],!DM(c,I[c+84|0]?f:r[r[c+68>>2]+(f<<2)>>2],D[c+24|0],h))break r;D[r[u>>2]+a|0]=I[h|0],s=1,a=a+1|0,h=0;s:{a:switch(A-1|0){default:for(;D[r[u>>2]+a|0]=I[r[m>>2]+s|0],D[(r[u>>2]+a|0)+1|0]=I[(r[m>>2]+s|0)+1|0],s=s+2|0,a=a+2|0,h=h+2|0,(T|0)!=(h|0););break;case 0:break s;case 1:break a}if(!R)break s;D[r[u>>2]+a|0]=I[r[m>>2]+s|0],a=a+1|0}if(f=f+1|0,s=y>>>0>f>>>0,(f|0)==(y|0))break}h=r[m>>2]}if(s=!s,!h)break n}W(h)}re=m+16|0,a=s&1;break e}jt(),Xe()}return a|0}function qee(a,s){var c=0,u=0,f=0,h=0,m=0;h=-1,u=-1;e:{if((s|0)==-1||(u=s+1|0,h=(u>>>0)%3|0?u:s-2|0,u=s-1|0,(s>>>0)%3|0))break e;u=s+2|0}e:{t:{n:switch(r[a+168>>2]){case 0:case 1:f=r[a+148>>2],c=1,s=r[a+156>>2],m=s+(((h|0)!=-1?r[r[f>>2]+(h<<2)>>2]:-1)<<2)|0,r[m>>2]=r[m>>2]+1,s=(((u|0)!=-1?r[r[f>>2]+(u<<2)>>2]:-1)<<2)+s|0;break t;case 5:f=r[a+148>>2],c=-1,c=((s|0)!=-1?r[r[f>>2]+(s<<2)>>2]:c)<<2,s=r[a+156>>2],c=c+s|0,r[c>>2]=r[c>>2]+1,c=(((h|0)!=-1?r[r[f>>2]+(h<<2)>>2]:-1)<<2)+s|0,r[c>>2]=r[c>>2]+1,c=2,s=(((u|0)!=-1?r[r[f>>2]+(u<<2)>>2]:-1)<<2)+s|0;break t;case 3:f=r[a+148>>2],c=-1,c=((s|0)!=-1?r[r[f>>2]+(s<<2)>>2]:c)<<2,s=r[a+156>>2],c=c+s|0,r[c>>2]=r[c>>2]+1,c=(((h|0)!=-1?r[r[f>>2]+(h<<2)>>2]:-1)<<2)+s|0,r[c>>2]=r[c>>2]+2,c=1,s=(((u|0)!=-1?r[r[f>>2]+(u<<2)>>2]:-1)<<2)+s|0;break t;case 7:break n;default:break e}f=r[a+148>>2],c=-1,c=((s|0)!=-1?r[r[f>>2]+(s<<2)>>2]:c)<<2,s=r[a+156>>2],c=c+s|0,r[c>>2]=r[c>>2]+2,c=(((h|0)!=-1?r[r[f>>2]+(h<<2)>>2]:-1)<<2)+s|0,r[c>>2]=r[c>>2]+2,c=2,s=(((u|0)!=-1?r[r[f>>2]+(u<<2)>>2]:-1)<<2)+s|0}r[s>>2]=r[s>>2]+c}c=a,u=r[a+180>>2],s=r[r[a+156>>2]+(((h|0)!=-1?r[r[r[a+148>>2]>>2]+(h<<2)>>2]:-1)<<2)>>2],a=r[a+176>>2],r[c+172>>2]=(a|0)>(s|0)?0:((s|0)>(u|0)?u:s)-a|0}function DB(a,s,c){var u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0;if(u=r[a+8>>2],f=r[a>>2],u-f>>2>>>0>=s>>>0){m=r[a+4>>2],y=m-f>>2,h=s>>>0>y>>>0?y:s;e:{if(!h)break e;R=h-1|0,A=h&7;t:{if(!A){u=f;break t}for(u=f;r[u>>2]=r[c>>2],h=h-1|0,u=u+4|0,T=T+1|0,(T|0)!=(A|0););}if(R>>>0<7)break e;for(;r[u>>2]=r[c>>2],r[u+4>>2]=r[c>>2],r[u+8>>2]=r[c>>2],r[u+12>>2]=r[c>>2],r[u+16>>2]=r[c>>2],r[u+20>>2]=r[c>>2],r[u+24>>2]=r[c>>2],r[u+28>>2]=r[c>>2],u=u+32|0,h=h-8|0,!!h;);}if(s>>>0>y>>>0){if(u=a,a=s-y|0,a)for(a=(a<<2)+m|0;r[m>>2]=r[c>>2],m=m+4|0,(a|0)!=(m|0););else a=m;r[u+4>>2]=a;return}r[a+4>>2]=f+(s<<2);return}f&&(r[a+4>>2]=f,W(f),r[a+8>>2]=0,r[a>>2]=0,r[a+4>>2]=0,u=0);e:{if(s>>>0>=1073741824||(f=u>>1,u=u>>>0<2147483644?s>>>0>f>>>0?s:f:1073741823,u>>>0>=1073741824))break e;if(u=u<<2,f=Te(u),r[a>>2]=f,r[a+8>>2]=u+f,c=r[c>>2],u=f,m=s&7,m)for(;r[u>>2]=c,u=u+4|0,h=h+1|0,(m|0)!=(h|0););if(f=f+(s<<2)|0,(s-1&1073741823)>>>0>=7)for(;r[u+28>>2]=c,r[u+24>>2]=c,r[u+20>>2]=c,r[u+16>>2]=c,r[u+12>>2]=c,r[u+8>>2]=c,r[u+4>>2]=c,r[u>>2]=c,u=u+32|0,(f|0)!=(u|0););r[a+4>>2]=f;return}jt(),Xe()}function ATe(a){a=a|0;var s=0,c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0;e:{c=r[a+32>>2],f=r[c+8>>2],h=r[c+12>>2],u=r[c+20>>2],m=f,f=r[c+16>>2],s=0;t:{if((h|0)<=(u|0)&m>>>0<=f>>>0|(u|0)>(h|0))break t;m=I[f+r[c>>2]|0],h=f+1|0,u=h?u:u+1|0,r[c+16>>2]=h,r[c+20>>2]=u;n:{if(!m)break n;for(;;){if(pt[r[r[a>>2]+16>>2]](a,s)|0){if(s=s+1|0,(m|0)!=(s|0))continue;break n}break}return 0}if(s=r[a+8>>2],u=r[a+12>>2],(s|0)!=(u|0))for(;;){if(c=r[s>>2],!(pt[r[r[c>>2]+8>>2]](c,a,r[a+4>>2])|0))break e;if(s=s+4|0,(u|0)==(s|0))break}n:{if(!m)break n;for(s=0;;){if(c=r[r[a+8>>2]+(s<<2)>>2],!(pt[r[r[c>>2]+12>>2]](c,r[a+32>>2])|0))break e;if(s=s+1|0,(m|0)==(s|0))break}if(!m)break n;for(f=a+20|0;;){if(s=0,h=y<<2,c=r[h+r[a+8>>2]>>2],u=pt[r[r[c>>2]+24>>2]](c)|0,(u|0)>0)for(;;){c=r[r[a+8>>2]+h>>2],R=pt[r[r[c>>2]+20>>2]](c,s)|0,A=r[a+20>>2],T=r[a+24>>2]-A>>2;i:{if(R>>>0<T>>>0)break i;if(c=R+1|0,c>>>0>T>>>0){Xr(f,c-T|0),A=r[f>>2];break i}if(c>>>0>=T>>>0)break i;r[a+24>>2]=(c<<2)+A}if(r[(R<<2)+A>>2]=y,s=s+1|0,(u|0)==(s|0))break}if(y=y+1|0,(m|0)==(y|0))break}}if(s=0,!(pt[r[r[a>>2]+28>>2]](a)|0))break t;s=pt[r[r[a>>2]+32>>2]](a)|0}return s|0}return 0}function wTe(a,s,c){a=a|0,s=s|0,c=c|0;var u=0,f=0,h=0,m=0,y=0,A=0,T=0;jee(a,s,c),c=r[a+84>>2],u=r[a+88>>2]-c>>2;e:{if((u|0)>(s|0))break e;if(s=s+1|0,s>>>0>u>>>0){t:{if(u=s-u|0,f=r[a+92>>2],c=r[a+88>>2],u>>>0<=f-c>>2>>>0){n:{if(!u)break n;if(s=c,h=u&7,h)for(;r[s>>2]=1,s=s+4|0,m=m+1|0,(h|0)!=(m|0););if(c=(u<<2)+c|0,(u-1&1073741823)>>>0<7)break n;for(;r[s+24>>2]=1,r[s+28>>2]=1,r[s+16>>2]=1,r[s+20>>2]=1,r[s+8>>2]=1,r[s+12>>2]=1,r[s>>2]=1,r[s+4>>2]=1,s=s+32|0,(c|0)!=(s|0););}r[a+88>>2]=c;break t}n:{if(h=r[a+84>>2],T=c-h|0,c=T>>2,s=c+u|0,s>>>0<1073741824){if(f=f-h|0,y=f>>1,f=f>>>0<2147483644?s>>>0>y>>>0?s:y:1073741823,f){if(f>>>0>=1073741824)break n;A=Te(f<<2)}if(c=(c<<2)+A|0,s=c,y=u&7,y)for(s=c;r[s>>2]=1,s=s+4|0,m=m+1|0,(y|0)!=(m|0););if(c=c+(u<<2)|0,(u-1&1073741823)>>>0>=7)for(;r[s+24>>2]=1,r[s+28>>2]=1,r[s+16>>2]=1,r[s+20>>2]=1,r[s+8>>2]=1,r[s+12>>2]=1,r[s>>2]=1,r[s+4>>2]=1,s=s+32|0,(c|0)!=(s|0););(T|0)>0&&$e(A,h,T),r[a+92>>2]=(f<<2)+A,r[a+88>>2]=c,r[a+84>>2]=A,h&&W(h);break t}jt(),Xe()}qn(1336),Xe()}return}if(s>>>0>=u>>>0)break e;r[a+88>>2]=c+(s<<2)}}function sr(a,s){var c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0;A=re-16|0,re=A,f=r[s+20>>2],c=r[s+12>>2],h=r[s+16>>2];e:{if((f|0)>=(c|0)&h>>>0>=Ue[s+8>>2]|(c|0)<(f|0))break e;D[a+12|0]=I[h+r[s>>2]|0],f=r[s+20>>2],c=f,h=r[s+16>>2],u=h+1|0,f=u?c:c+1|0,y=u,r[s+16>>2]=u,r[s+20>>2]=f;t:{if(Ut[s+38>>1]<=513){if(m=r[s+12>>2],f=c,c=h+5|0,f=c>>>0<5?f+1|0:f,u=r[s+8>>2],h=c,u>>>0<c>>>0&(f|0)>=(m|0)|(f|0)>(m|0))break e;c=y+r[s>>2]|0,c=I[c|0]|I[c+1|0]<<8|(I[c+2|0]<<16|I[c+3|0]<<24),r[s+16>>2]=h,r[s+20>>2]=f;break t}if(!xte(1,A+12|0,s))break e;h=r[s+16>>2],f=r[s+20>>2],u=r[s+8>>2],m=r[s+12>>2],c=r[A+12>>2]}if(y=u-h|0,u=m-(f+(u>>>0<h>>>0)|0)|0,(u|0)<=0&c>>>0>y>>>0|(u|0)<0|(c|0)<=0)break e;u=h+r[s>>2]|0,r[a>>2]=u,R=a,m=c-1|0,y=m+u|0,T=I[y|0];t:{if(T>>>0<=63){r[a+4>>2]=m,a=I[y|0]&63;break t}n:switch((T>>>6|0)-1|0){case 0:if(c>>>0<2)break e;r[a+4>>2]=c-2,u=(c+u|0)-2|0,a=I[u+1|0]<<8&16128|I[u|0];break t;case 1:break n;default:break e}if(c>>>0<3)break e;r[a+4>>2]=c-3,u=(c+u|0)-3|0,a=I[u+2|0]<<16&4128768|I[u+1|0]<<8|I[u|0]}if(a=a+4096|0,r[R+8>>2]=a,a>>>0>1048575)break e;a=c+h|0,f=a>>>0<c>>>0?f+1|0:f,r[s+16>>2]=a,r[s+20>>2]=f,N=1}return re=A+16|0,N}function Xee(a,s){var c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0;y=re-16|0,re=y;e:{t:{if(Ut[s+38>>1]<=511){if(m=r[s+12>>2],A=m,c=r[s+20>>2],u=r[s+16>>2],h=u+8|0,c=h>>>0<8?c+1|0:c,f=r[s+8>>2],f>>>0<h>>>0&(c|0)>=(m|0)|(c|0)>(m|0))break e;u=u+r[s>>2]|0,m=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),u=I[u+4|0]|I[u+5|0]<<8|(I[u+6|0]<<16|I[u+7|0]<<24),r[s+16>>2]=h,r[s+20>>2]=c;break t}if(!Ip(1,y+8|0,s))break e;h=r[s+16>>2],c=r[s+20>>2],f=r[s+8>>2],A=r[s+12>>2],m=r[y+8>>2],u=r[y+12>>2]}if(T=f-h|0,f=A-(c+(h>>>0>f>>>0)|0)|0,(f|0)==(u|0)&m>>>0>T>>>0|u>>>0>f>>>0||(c=c+u|0,f=h+m|0,c=f>>>0<h>>>0?c+1|0:c,r[s+16>>2]=f,r[s+20>>2]=c,c=m,(c|0)<=0))break e;s=h+r[s>>2]|0,r[a+40>>2]=s,A=a,h=c-1|0,m=s+h|0,f=I[m|0];t:{if(f>>>0<=63){r[a+44>>2]=h,a=I[m|0]&63;break t}n:switch((f>>>6|0)-1|0){case 0:if(c>>>0<2)break e;r[a+44>>2]=c-2,s=(s+c|0)-2|0,a=I[s+1|0]<<8&16128|I[s|0];break t;case 1:if(c>>>0<3)break e;r[a+44>>2]=c-3,s=(s+c|0)-3|0,a=I[s+2|0]<<16&4128768|I[s+1|0]<<8|I[s|0];break t;default:break n}r[a+44>>2]=c-4,s=(s+c|0)-4|0,a=I[s+2|0]<<16|I[s+3|0]<<24&1056964608|I[s+1|0]<<8|I[s|0]}a=a+16384|0,r[A+48>>2]=a,R=a>>>0<4194304}return re=y+16|0,R}function $e(a,s,c){var u=0,f=0,h=0;if(c>>>0>=512)return RSe(a|0,s|0,c|0)|0,a;f=a+c|0;e:{if(!((a^s)&3)){t:{if(!(a&3)){c=a;break t}if(!c){c=a;break t}for(c=a;;){if(D[c|0]=I[s|0],s=s+1|0,c=c+1|0,!(c&3))break t;if(!(c>>>0<f>>>0))break}}u=f&-4;t:{if(u>>>0<64||(h=u+-64|0,h>>>0<c>>>0))break t;for(;r[c>>2]=r[s>>2],r[c+4>>2]=r[s+4>>2],r[c+8>>2]=r[s+8>>2],r[c+12>>2]=r[s+12>>2],r[c+16>>2]=r[s+16>>2],r[c+20>>2]=r[s+20>>2],r[c+24>>2]=r[s+24>>2],r[c+28>>2]=r[s+28>>2],r[c+32>>2]=r[s+32>>2],r[c+36>>2]=r[s+36>>2],r[c+40>>2]=r[s+40>>2],r[c+44>>2]=r[s+44>>2],r[c+48>>2]=r[s+48>>2],r[c+52>>2]=r[s+52>>2],r[c+56>>2]=r[s+56>>2],r[c+60>>2]=r[s+60>>2],s=s- -64|0,c=c- -64|0,h>>>0>=c>>>0;);}if(c>>>0>=u>>>0)break e;for(;r[c>>2]=r[s>>2],s=s+4|0,c=c+4|0,u>>>0>c>>>0;);break e}if(f>>>0<4){c=a;break e}if(u=f-4|0,u>>>0<a>>>0){c=a;break e}for(c=a;D[c|0]=I[s|0],D[c+1|0]=I[s+1|0],D[c+2|0]=I[s+2|0],D[c+3|0]=I[s+3|0],s=s+4|0,c=c+4|0,u>>>0>=c>>>0;);}if(c>>>0<f>>>0)for(;D[c|0]=I[s|0],s=s+1|0,c=c+1|0,(f|0)!=(c|0););return a}function ea(a,s,c){var u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0;if(h=r[a+8>>2],f=r[a+4>>2],h-f>>2>>>0>=s>>>0){e:{if(!s)break e;if(u=f,m=s&7,m)for(;r[u>>2]=r[c>>2],u=u+4|0,y=y+1|0,(m|0)!=(y|0););if(f=(s<<2)+f|0,(s-1&1073741823)>>>0<7)break e;for(;r[u>>2]=r[c>>2],r[u+4>>2]=r[c>>2],r[u+8>>2]=r[c>>2],r[u+12>>2]=r[c>>2],r[u+16>>2]=r[c>>2],r[u+20>>2]=r[c>>2],r[u+24>>2]=r[c>>2],r[u+28>>2]=r[c>>2],u=u+32|0,(f|0)!=(u|0););}r[a+4>>2]=f;return}e:{if(m=r[a>>2],R=f-m|0,f=R>>2,u=f+s|0,u>>>0<1073741824){if(h=h-m|0,A=h>>1,h=h>>>0<2147483644?u>>>0>A>>>0?u:A:1073741823,h){if(h>>>0>=1073741824)break e;T=Te(h<<2)}if(f=(f<<2)+T|0,u=f,A=s&7,A)for(u=f;r[u>>2]=r[c>>2],u=u+4|0,y=y+1|0,(A|0)!=(y|0););if(f=f+(s<<2)|0,(s-1&1073741823)>>>0>=7)for(;r[u>>2]=r[c>>2],r[u+4>>2]=r[c>>2],r[u+8>>2]=r[c>>2],r[u+12>>2]=r[c>>2],r[u+16>>2]=r[c>>2],r[u+20>>2]=r[c>>2],r[u+24>>2]=r[c>>2],r[u+28>>2]=r[c>>2],u=u+32|0,(f|0)!=(u|0););(R|0)>0&&$e(T,m,R),r[a+8>>2]=(h<<2)+T,r[a+4>>2]=f,r[a>>2]=T,m&&W(m);return}jt(),Xe()}qn(1336),Xe()}function Zee(a){a=a|0;var s=0,c=0,u=0,f=0,h=0;if(r[a>>2]=11512,u=a+232|0,s=r[u+196>>2],s&&(r[u+200>>2]=s,W(s)),c=r[u+184>>2],c){if(s=r[u+188>>2],(c|0)==(s|0))s=c;else{for(;f=s-12|0,h=r[f>>2],h&&(r[s-8>>2]=h,W(h)),s=f,(c|0)!=(s|0););s=r[u+184>>2]}r[u+188>>2]=c,W(s)}if(s=r[u+156>>2],s&&(r[u+160>>2]=s,W(s)),c=r[u+136>>2],r[u+136>>2]=0,c){if(f=c-4|0,s=r[f>>2],s)for(s=c+(s<<4)|0;s=s-16|0,(c|0)!=(s|0););W(f)}if(YB(a+216|0),s=r[a+196>>2],s&&(r[a+200>>2]=s,W(s)),s=r[a+184>>2],s&&(r[a+188>>2]=s,W(s)),s=r[a+172>>2],s&&(r[a+176>>2]=s,W(s)),s=r[a+160>>2],s&&(r[a+164>>2]=s,W(s)),s=r[a+144>>2],s)for(;c=r[s>>2],W(s),s=c,!!s;);return s=r[a+136>>2],r[a+136>>2]=0,s&&W(s),s=r[a+120>>2],s&&W(s),s=r[a+108>>2],s&&W(s),s=r[a+96>>2],s&&W(s),s=r[a+72>>2],s&&(r[a+76>>2]=s,W(s)),s=r[a+60>>2],s&&W(s),s=r[a+48>>2],s&&(r[a+52>>2]=s,W(s)),s=r[a+36>>2],s&&(r[a+40>>2]=s,W(s)),s=r[a+24>>2],s&&(r[a+28>>2]=s,W(s)),s=r[a+12>>2],s&&(r[a+16>>2]=s,W(s)),s=r[a+8>>2],r[a+8>>2]=0,s&&Zd(s),a|0}function Pv(a,s){var c=0,u=0,f=0,h=0,m=0;u=re-16|0,re=u,r[a+12>>2]=s,r[a+8>>2]=0,r[a>>2]=0,r[a+4>>2]=0,c=a+16|0,r[c>>2]=0,r[c+4>>2]=0,D[c+5|0]=0,D[c+6|0]=0,D[c+7|0]=0,D[c+8|0]=0,D[c+9|0]=0,D[c+10|0]=0,D[c+11|0]=0,D[c+12|0]=0,r[a+32>>2]=0,r[a+36>>2]=0,r[a+48>>2]=0,r[a+40>>2]=0,r[a+44>>2]=0,r[a+52>>2]=0,r[a+56>>2]=0,r[a+68>>2]=0,r[a+60>>2]=0,r[a+64>>2]=0,r[a+72>>2]=0,r[a+76>>2]=0,r[a+88>>2]=0,r[a+80>>2]=0,r[a+84>>2]=0,r[a+100>>2]=0,r[a+92>>2]=0,r[a+96>>2]=0,m=a+116|0;e:{t:{if(s){if(s>>>0<1073741824)break t;jt(),Xe()}r[a+104>>2]=0,r[a+108>>2]=0,r[a+112>>2]=0,r[u+8>>2]=0,r[u>>2]=0,r[u+4>>2]=0,c=1;break e}c=s<<2,f=Te(c),r[a+92>>2]=f,h=c+f|0,r[a+100>>2]=h,Ct(f,0,c),r[a+112>>2]=0,r[a+104>>2]=0,r[a+108>>2]=0,r[a+96>>2]=h,f=Te(c),r[a+104>>2]=f,h=c+f|0,r[a+112>>2]=h,Ct(f,0,c),r[a+108>>2]=h,f=Te(c),r[u>>2]=f,h=c+f|0,r[u+8>>2]=h,Ct(f,0,c),r[u+4>>2]=h,c=s<<5|1}return zv(m,c,u),f=r[u>>2],f&&(r[u+4>>2]=f,W(f)),r[u+8>>2]=0,r[u>>2]=0,r[u+4>>2]=0,s&&(s=s<<2,f=Te(s),r[u>>2]=f,h=s+f|0,r[u+8>>2]=h,Ct(f,0,s),r[u+4>>2]=h),zv(a+128|0,c,u),s=r[u>>2],s&&(r[u+4>>2]=s,W(s)),re=u+16|0,a}function Rv(a,s,c,u){var f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0;m=c;e:{t:{n:{i:{r:{s:{a:{o:{c:{l:{u:{if(s){if(!m)break u;if(!u)break l;if(c=Ms(u)-Ms(s)|0,c>>>0<=31)break c;break n}if((u|0)==1|u>>>0>1)break n;a=(a>>>0)/(m>>>0)|0,nn=0;break e}if(!a)break o;if(!u||u-1&u)break a;a=s>>>Wte(u)|0,nn=0;break e}if(!(m-1&m))break s;y=(Ms(m)+33|0)-Ms(s)|0,f=0-y|0;break i}y=c+1|0,f=63-c|0;break i}a=(s>>>0)/(u>>>0)|0,nn=0;break e}if(c=Ms(u)-Ms(s)|0,c>>>0<31)break r;break n}if((m|0)==1)break t;c=Wte(m),u=c&31,(c&63)>>>0>=32?(c=0,a=s>>>u|0):(c=s>>>u|0,a=((1<<u)-1&s)<<32-u|a>>>u),nn=c;break e}y=c+1|0,f=63-c|0}if(c=y&63,h=c&31,c>>>0>=32?(c=0,A=s>>>h|0):(c=s>>>h|0,A=((1<<h)-1&s)<<32-h|a>>>h),h=c,c=f&63,f=c&31,c>>>0>=32?(c=a<<f,a=0):(c=(1<<f)-1&a>>>32-f|s<<f,a=a<<f),s=c,y)for(c=u-1|0,f=m-1|0,z=(f|0)!=-1?c+1|0:c;c=A<<1|s>>>31,h=h<<1|A>>>31,T=z-(h+(c>>>0>f>>>0)|0)>>31,R=m&T,A=c-R|0,h=h-((u&T)+(c>>>0<R>>>0)|0)|0,s=s<<1|a>>>31,a=N|a<<1,N=T&1,y=y-1|0,!!y;);nn=s<<1|a>>>31,a=N|a<<1;break e}a=0,s=0}nn=s}return a}function Dv(a,s){var c=0,u=0,f=0,h=0,m=0;c=re-16|0,re=c,r[a+12>>2]=s,r[a+8>>2]=0,r[a>>2]=0,r[a+4>>2]=0,r[a+16>>2]=0,r[a+20>>2]=0,r[a+32>>2]=0,r[a+24>>2]=0,r[a+28>>2]=0,r[a+36>>2]=0,r[a+40>>2]=0,r[a+52>>2]=0,r[a+44>>2]=0,r[a+48>>2]=0,r[a+56>>2]=0,r[a+60>>2]=0,r[a+72>>2]=0,r[a+64>>2]=0,r[a+68>>2]=0,r[a+76>>2]=0,r[a+80>>2]=0,r[a+92>>2]=0,r[a+84>>2]=0,r[a+88>>2]=0,r[a+104>>2]=0,r[a+96>>2]=0,r[a+100>>2]=0,m=a+120|0;e:{t:{if(s){if(s>>>0<1073741824)break t;jt(),Xe()}r[a+108>>2]=0,r[a+112>>2]=0,r[a+116>>2]=0,r[c+8>>2]=0,r[c>>2]=0,r[c+4>>2]=0,f=1;break e}f=s<<2,u=Te(f),r[a+96>>2]=u,h=u+f|0,r[a+104>>2]=h,Ct(u,0,f),r[a+116>>2]=0,r[a+108>>2]=0,r[a+112>>2]=0,r[a+100>>2]=h,u=Te(f),r[a+108>>2]=u,h=u+f|0,r[a+116>>2]=h,Ct(u,0,f),r[a+112>>2]=h,u=Te(f),r[c>>2]=u,h=u+f|0,r[c+8>>2]=h,Ct(u,0,f),r[c+4>>2]=h,f=s<<5|1}return zv(m,f,c),u=r[c>>2],u&&(r[c+4>>2]=u,W(u)),r[c+8>>2]=0,r[c>>2]=0,r[c+4>>2]=0,s&&(s=s<<2,u=Te(s),r[c>>2]=u,h=s+u|0,r[c+8>>2]=h,Ct(u,0,s),r[c+4>>2]=h),zv(a+132|0,f,c),s=r[c>>2],s&&(r[c+4>>2]=s,W(s)),re=c+16|0,a}function HA(a,s){var c=0,u=0,f=0;c=(a|0)==(s|0),D[s+12|0]=c;e:{if(c)break e;for(;;){if(u=r[s+8>>2],I[u+12|0])break e;t:{c=r[u+8>>2],f=r[c>>2];n:{if((u|0)==(f|0)){if(f=r[c+4>>2],!(!f|I[f+12|0]))break t;i:{if(r[u>>2]==(s|0)){s=u;break i}s=r[u+4>>2],a=r[s>>2],r[u+4>>2]=a,a&&(r[a+8>>2]=u,c=r[u+8>>2]),r[s+8>>2]=c,a=r[u+8>>2],r[(((u|0)!=r[a>>2])<<2)+a>>2]=s,r[s>>2]=u,r[u+8>>2]=s,c=r[s+8>>2]}D[s+12|0]=1,D[c+12|0]=0,a=r[c>>2],s=r[a+4>>2],r[c>>2]=s,s&&(r[s+8>>2]=c),r[a+8>>2]=r[c+8>>2],s=r[c+8>>2],r[((r[s>>2]!=(c|0))<<2)+s>>2]=a,r[a+4>>2]=c,s=c+8|0;break n}if(!(I[f+12|0]|!f))break t;i:{if(r[u>>2]!=(s|0)){s=u;break i}a=r[s+4>>2],r[u>>2]=a,a&&(r[a+8>>2]=u,c=r[u+8>>2]),r[s+8>>2]=c,a=r[u+8>>2],r[(((u|0)!=r[a>>2])<<2)+a>>2]=s,r[s+4>>2]=u,r[u+8>>2]=s,c=r[s+8>>2]}D[s+12|0]=1,D[c+12|0]=0,a=r[c+4>>2],s=r[a>>2],r[c+4>>2]=s,s&&(r[s+8>>2]=c),r[a+8>>2]=r[c+8>>2],s=r[c+8>>2],r[((r[s>>2]!=(c|0))<<2)+s>>2]=a,r[a>>2]=c,s=c+8|0}r[s>>2]=a;break e}if(D[u+12|0]=1,u=(a|0)==(c|0),D[c+12|0]=u,D[f+12|0]=1,s=c,!!u)break}}}function FM(a,s,c,u){var f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0;R=r[s+16>>2],A=r[c+4>>2]-R|0,f=A,h=r[c>>2]-R|0,r[c>>2]=h,r[c+4>>2]=f,m=r[s+16>>2],f=f>>31,y=f+A^f,f=h>>31,N=(m|0)>=(y+(f+h^f)|0);e:{if(N){f=A;break e}t:{n:{if((h|0)>=0){if(f=1,y=1,(A|0)>=0)break t;if(T=1,f=-1,y=-1,h)break n;break t}if(T=-1,f=-1,y=-1,(A|0)<=0)break t}f=(A|0)<=0?-1:1,y=T}T=ne(m,y),h=(h<<1)-T|0,y=(ne(f,y)|0)>=0,m=ne(f,m),f=((y?0-h|0:h)+m|0)/2|0,r[c+4>>2]=f,z=c,c=(A<<1)-m|0,h=(T+(y?0-c|0:c)|0)/2|0,r[z>>2]=h,m=r[s+16>>2]}c=r[u+4>>2]+f|0,h=r[u>>2]+h|0;e:{if((m|0)<(h|0)){h=h-r[s+4>>2]|0;break e}if((0-m|0)<=(h|0))break e;h=r[s+4>>2]+h|0}e:{if((c|0)>(m|0)){c=c-r[s+4>>2]|0;break e}if((0-m|0)<=(c|0))break e;c=r[s+4>>2]+c|0}e:{if(N){m=c;break e}t:{n:{if((h|0)>=0){if(s=1,f=1,(c|0)>=0)break t;if(u=1,s=-1,f=-1,h)break n;break t}if(u=-1,s=-1,f=-1,(c|0)<=0)break t}s=(c|0)<=0?-1:1,f=u}A=ne(f,m),u=(h<<1)-A|0,r[a>>2]=u,T=0-u|0,y=u,u=(ne(s,f)|0)>=0,s=ne(s,m),m=((u?T:y)+s|0)/2|0,s=(c<<1)-s|0,h=(A+(u?0-s|0:s)|0)/2|0}r[a>>2]=h+R,r[a+4>>2]=m+R}function Ir(a){var s=0,c=0,u=0,f=0,h=0,m=0,y=0;s=re-32|0,re=s,c=r[a+16>>2];e:{if(c>>>0>=341){r[a+16>>2]=c-341,c=r[a+4>>2],r[s+8>>2]=r[c>>2],r[a+4>>2]=c+4,VM(a,s+8|0);break e}t:{n:{i:{r:{if(f=r[a+8>>2],h=f-r[a+4>>2]>>2,u=r[a+12>>2],c=u-r[a>>2]|0,h>>>0<c>>2>>>0){if((u|0)==(f|0))break r;m=s,y=Te(4092),r[m+8>>2]=y,VM(a,s+8|0);break e}if(r[s+24>>2]=a+12,c=c?c>>1:1,c>>>0>=1073741824)break i;if(u=c<<2,c=Te(u),r[s+8>>2]=c,f=c+(h<<2)|0,r[s+16>>2]=f,r[s+20>>2]=c+u,r[s+12>>2]=f,m=s,y=Te(4092),r[m+4>>2]=y,VM(s+8|0,s+4|0),u=r[a+8>>2],(u|0)==r[a+4>>2]){c=u;break t}for(;u=u-4|0,ete(s+8|0,u),r[a+4>>2]!=(u|0););break n}m=s,y=Te(4092),r[m+8>>2]=y,c=s+8|0,ete(a,c),u=r[a+4>>2],r[s+8>>2]=r[u>>2],r[a+4>>2]=u+4,VM(a,c);break e}qn(1336),Xe()}c=r[a+8>>2]}if(f=r[a>>2],r[a>>2]=r[s+8>>2],r[s+8>>2]=f,r[a+4>>2]=r[s+12>>2],r[s+12>>2]=u,r[a+8>>2]=r[s+16>>2],r[s+16>>2]=c,h=r[a+12>>2],r[a+12>>2]=r[s+20>>2],r[s+20>>2]=h,(c|0)!=(u|0)&&(r[s+16>>2]=c+(((c-u|0)-4>>>2^-1)<<2)),!f)break e;W(f)}re=s+32|0}function Qee(a,s,c){a=a|0,s=s|0,c=c|0;var u=0,f=0,h=0,m=0,y=0,A=_e(0),T=0,R=0,N=0,z=0,U=0,H=0,Z=0,ie=0,ge=0,we=0,Me=0,Ie=0;if(R=re-16|0,re=R,r[c+28>>2]==9){u=r[a+4>>2],m=D[c+24|0],f=m<<2,h=Te((m&1073741823)!=(m|0)?-1:f),N=R+8|0,r[N>>2]=1065353216,A=At[a+20>>2],u=-1<<u^-1,(u|0)>0&&(At[N>>2]=A/_e(u|0)),H=(u|0)>0;e:{if(!H||(T=r[c+80>>2],!T))break e;if(u=0,(m|0)<=0){if((T|0)!=1)for(a=T&-2,s=0;$e(r[r[c+64>>2]>>2]+u|0,h,f),u=u+f|0,$e(u+r[r[c+64>>2]>>2]|0,h,f),u=u+f|0,s=s+2|0,(a|0)!=(s|0););if(!(T&1))break e;$e(r[r[c+64>>2]>>2]+u|0,h,f);break e}for(Z=r[r[s>>2]>>2]+r[s+48>>2]|0,Me=m&-2,Ie=m&1;;){if(z=r[a+8>>2],A=At[N>>2],s=0,U=0,(m|0)!=1)for(;y=s<<2,ie=(u<<2)+Z|0,At[y+h>>2]=_e(A*_e(r[ie>>2]))+At[y+z>>2],y=y|4,At[y+h>>2]=_e(A*_e(r[ie+4>>2]))+At[y+z>>2],s=s+2|0,u=u+2|0,U=U+2|0,(Me|0)!=(U|0););if(Ie&&(s=s<<2,At[s+h>>2]=_e(A*_e(r[(u<<2)+Z>>2]))+At[s+z>>2],u=u+1|0),$e(r[r[c+64>>2]>>2]+ge|0,h,f),ge=f+ge|0,we=we+1|0,(we|0)==(T|0))break}}W(h)}return re=R+16|0,H|0}function ETe(a,s){a=a|0,s=s|0;var c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0;if(Fee(a,s)){A=a+36|0,m=pt[r[r[a>>2]+24>>2]](a)|0,u=r[a+40>>2],f=r[a+36>>2],c=u-f>>2;e:{if(m>>>0>c>>>0){jM(A,m-c|0);break e}if(c>>>0<=m>>>0)break e;if(f=f+(m<<2)|0,(f|0)!=(u|0))for(;u=u-4|0,c=r[u>>2],r[u>>2]=0,c&&pt[r[r[c>>2]+4>>2]](c),(u|0)!=(f|0););r[a+40>>2]=f}e:{if((m|0)<=0){f=0;break e}if(f=1,c=r[s+20>>2],u=r[s+12>>2],h=r[s+16>>2],(c|0)>=(u|0)&h>>>0>=Ue[s+8>>2]|(c|0)>(u|0))break e;for(u=0;;){if(y=I[h+r[s>>2]|0],h=h+1|0,c=h?c:c+1|0,r[s+16>>2]=h,r[s+20>>2]=c,h=pt[r[r[a>>2]+48>>2]](a,y)|0,y=u<<2,T=y+r[a+36>>2]|0,c=r[T>>2],r[T>>2]=h,c&&pt[r[r[c>>2]+4>>2]](c),c=r[r[A>>2]+y>>2],!c||(N=c,z=pt[r[r[a>>2]+28>>2]](a)|0,U=pt[r[r[a>>2]+20>>2]](a,u)|0,R=r[r[c>>2]+8>>2],!(pt[R](N|0,z|0,U|0)|0))||(u=u+1|0,f=(m|0)>(u|0),(u|0)==(m|0)))break e;if(h=r[s+16>>2],c=r[s+20>>2],y=r[s+12>>2],!(h>>>0<Ue[s+8>>2]&(c|0)<=(y|0)|(c|0)<(y|0)))break}}a=!f}else a=0;return a|0}function STe(a,s){a=a|0,s=s|0;var c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0;if(c=r[s+88>>2],!(!c|r[c>>2]!=1)){u=r[c+8>>2],r[a+4>>2]=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),u=D[s+24|0],f=r[a+8>>2],h=r[a+12>>2]-f>>2;e:{if(u>>>0>h>>>0){Xr(a+8|0,u-h|0),u=D[s+24|0],f=r[a+8>>2];break e}if(u>>>0>=h>>>0)break e;r[a+12>>2]=(u<<2)+f}R=1,h=r[c+8>>2];e:{if((u|0)<=0){s=4;break e}y=u&3;t:{if(u-1>>>0<3){s=4,u=0;break t}for(N=u&-4,u=0,s=4;m=u<<2,c=s+h|0,r[m+f>>2]=I[c|0]|I[c+1|0]<<8|(I[c+2|0]<<16|I[c+3|0]<<24),r[(m|4)+f>>2]=I[c+4|0]|I[c+5|0]<<8|(I[c+6|0]<<16|I[c+7|0]<<24),r[(m|8)+f>>2]=I[c+8|0]|I[c+9|0]<<8|(I[c+10|0]<<16|I[c+11|0]<<24),r[(m|12)+f>>2]=I[c+12|0]|I[c+13|0]<<8|(I[c+14|0]<<16|I[c+15|0]<<24),u=u+4|0,s=s+16|0,A=A+4|0,(N|0)!=(A|0););}if(!y)break e;for(;c=s+h|0,r[(u<<2)+f>>2]=I[c|0]|I[c+1|0]<<8|(I[c+2|0]<<16|I[c+3|0]<<24),u=u+1|0,s=s+4|0,T=T+1|0,(T|0)!=(y|0););}c=a,a=s+h|0,r[c+20>>2]=I[a|0]|I[a+1|0]<<8|(I[a+2|0]<<16|I[a+3|0]<<24)}return R|0}function jf(a,s,c){var u=0,f=0,h=0,m=0,y=0,A=0,T=0;u=(c>>>0)/3|0,A=r[(r[r[a+8>>2]+96>>2]+ne(u,12)|0)+(c-ne(u,3)<<2)>>2],f=r[r[a+12>>2]+4>>2],u=r[f+4>>2];e:{if((u|0)!=r[f+8>>2]){r[u>>2]=A,r[f+4>>2]=u+4;break e}t:{if(y=r[f>>2],m=u-y|0,T=m>>2,u=T+1|0,u>>>0<1073741824){if(h=m>>1,h=m>>>0<2147483644?u>>>0>h>>>0?u:h:1073741823,h){if(h>>>0>=1073741824)break t;u=Te(h<<2)}else u=0;T=u+(T<<2)|0,r[T>>2]=A,(m|0)>0&&$e(u,y,m),r[f+8>>2]=u+(h<<2),r[f+4>>2]=T+4,r[f>>2]=u,y&&W(y);break e}jt(),Xe()}qn(1336),Xe()}f=r[a+4>>2],u=r[f+4>>2];e:{t:{n:{if((u|0)!=r[f+8>>2]){r[u>>2]=c,r[f+4>>2]=u+4;break n}if(y=r[f>>2],m=u-y|0,A=m>>2,u=A+1|0,u>>>0>=1073741824)break t;if(h=m>>1,h=m>>>0<2147483644?u>>>0>h>>>0?u:h:1073741823,h){if(h>>>0>=1073741824)break e;u=Te(h<<2)}else u=0;if(A=u+(A<<2)|0,r[A>>2]=c,(m|0)>0&&$e(u,y,m),r[f+8>>2]=u+(h<<2),r[f+4>>2]=A+4,r[f>>2]=u,!y)break n;W(y)}a=r[a+4>>2],r[r[a+12>>2]+(s<<2)>>2]=r[a+24>>2],r[a+24>>2]=r[a+24>>2]+1;return}jt(),Xe()}qn(1336),Xe()}function TTe(a,s,c,u){a=a|0,s=s|0,c=c|0,u=u|0;var f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0;y=r[u+80>>2],f=re-48|0,re=f,a=r[a+4>>2];e:{if(a-31>>>0<4294967267)break e;if(A=r[r[u>>2]>>2]+r[u+48>>2]|0,r[f+16>>2]=a,a=-1<<a,r[f+20>>2]=a^-1,a=-2-a|0,r[f+24>>2]=a,r[f+32>>2]=(a|0)/2,At[f+28>>2]=_e(2)/_e(a|0),m=r[c>>2],(m|0)!=r[c+4>>2]){for(a=0,u=0;h=r[(u<<2)+m>>2],y=f+36|0,T=r[r[s>>2]>>2],N=r[s+48>>2],m=r[s+44>>2],R=r[s+40>>2],I[s+84|0]||(h=r[r[s+68>>2]+(h<<2)>>2]),h=rt(R,m,h,0)+N|0,$e(y,h+T|0,R),tte(f+16|0,y,f+12|0,f+8|0),m=a<<2,r[m+A>>2]=r[f+12>>2],r[(m|4)+A>>2]=r[f+8>>2],h=1,a=a+2|0,u=u+1|0,m=r[c>>2],u>>>0<r[c+4>>2]-m>>2>>>0;);break e}if(!y){h=1;break e}for(u=0,a=0;T=f+36|0,c=r[r[s>>2]>>2],h=r[s+40>>2],m=r[s+48>>2]+rt(h,r[s+44>>2],I[s+84|0]?a:r[r[s+68>>2]+(a<<2)>>2],0)|0,$e(T,c+m|0,h),tte(f+16|0,T,f+12|0,f+8|0),c=u<<2,r[c+A>>2]=r[f+12>>2],r[(c|4)+A>>2]=r[f+8>>2],u=u+2|0,h=1,a=a+1|0,(y|0)!=(a|0););}return re=f+48|0,h|0}function OB(a,s){var c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0;if(u=I[a+11|0]>>>7|0?r[a+4>>2]:I[a+11|0],u>>>0<s>>>0){if(y=re-16|0,re=y,h=s-u|0,h){if(s=I[a+11|0]>>>7|0,m=s?r[a+4>>2]:I[a+11|0],A=m+h|0,s=s?(r[a+8>>2]&2147483647)-1|0:10,s-m>>>0<h>>>0)e:{if(u=re-16|0,re=u,c=A-s|0,c>>>0<=-17-s>>>0){T=I[a+11|0]>>>7|0?r[a>>2]:a;t:{if(s>>>0<2147483623){r[u+8>>2]=s<<1,r[u+12>>2]=s+c,c=re-16|0,re=c,re=c+16|0,c=u+8|0,f=u+12|0,c=r[(Ue[f>>2]<Ue[c>>2]?c:f)>>2],c>>>0>=11?(f=c+16&-16,c=f-1|0,c=(c|0)==11?f:c):c=10;break t}c=-18}f=c+1|0,c=Te(f),m&&Qv(c,T,m),(s|0)!=10&&W(T),r[a>>2]=c,r[a+8>>2]=f|-2147483648,re=u+16|0;break e}mc(),Xe()}s=I[a+11|0]>>>7|0?r[a>>2]:a,u=m+s|0,h&&Ct(u,0,h);e:{if(I[a+11|0]>>>7|0){r[a+4>>2]=A;break e}D[a+11|0]=A}D[y+15|0]=0,D[s+A|0]=I[y+15|0]}re=y+16|0;return}u=re-16|0,re=u;e:{if(I[a+11|0]>>>7|0){h=r[a>>2],D[u+15|0]=0,D[s+h|0]=I[u+15|0],r[a+4>>2]=s;break e}D[u+14|0]=0,D[a+s|0]=I[u+14|0],D[a+11|0]=s}re=u+16|0}function Kee(a,s){a=a|0,s=s|0;var c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0;h=r[s+12>>2],c=h,u=r[s+20>>2],m=u,A=r[s+16>>2],f=A+4|0,u=f>>>0<4?u+1|0:u,T=r[s+8>>2];e:{if(T>>>0<f>>>0&(c|0)<=(u|0)|(c|0)<(u|0)||(R=r[s>>2],c=A+R|0,c=I[c|0]|I[c+1|0]<<8|(I[c+2|0]<<16|I[c+3|0]<<24),r[s+16>>2]=f,r[s+20>>2]=u,u=m,y=A+8|0,u=y>>>0<8?u+1|0:u,y>>>0>T>>>0&(u|0)>=(h|0)|(u|0)>(h|0))||(f=f+R|0,f=I[f|0]|I[f+1|0]<<8|(I[f+2|0]<<16|I[f+3|0]<<24),r[s+16>>2]=y,r[s+20>>2]=u,(c|0)>(f|0))||(r[a+16>>2]=f,r[a+12>>2]=c,z=(f>>31)-((c>>31)+(c>>>0>f>>>0)|0)|0,c=f-c|0,!z&c>>>0>2147483646|z))break e;if(c=c+1|0,r[a+20>>2]=c,f=c>>>1|0,r[a+24>>2]=f,r[a+28>>2]=0-f,c&1||(r[a+24>>2]=f-1),Ut[s+38>>1]<=513){if((u|0)>=(h|0)&y>>>0>=T>>>0|(u|0)>(h|0))break e;c=I[y+R|0],u=m,m=A+9|0,u=m>>>0<9?u+1|0:u,r[s+16>>2]=m,r[s+20>>2]=u;t:switch(c|0){case 1:N=1;break;case 0:break t;default:break e}r[a+88>>2]=N}N=sr(a+112|0,s)}return N|0}function Ov(a,s){var c=0,u=0,f=0,h=0,m=0,y=0,A=0;u=re-16|0,re=u;e:{f=r[a+4>>2];t:{if(f>>>0<s>>>0){h=s-f|0,y=r[a+8>>2],c=y<<5;n:{if(!(h>>>0>c>>>0|f>>>0>c-h>>>0)){r[a+4>>2]=s,m=f&31,s=r[a>>2]+(f>>>3&536870908)|0;break n}if(r[u+8>>2]=0,r[u>>2]=0,r[u+4>>2]=0,(s|0)<0)break e;c>>>0<=1073741822?(c=s+31&-32,s=y<<6,s=s>>>0<c>>>0?c:s):s=2147483647,qd(u,s),f=r[a+4>>2],r[u+4>>2]=f+h,A=r[a>>2],s=r[u>>2];i:{if((f|0)<=0)break i;c=f>>>5|0,y=c<<2,s=Hf(s,A,y)+y|0,m=f-(c<<5)|0;r:{if((m|0)<=0){m=0;break r}c=-1>>>32-m|0,r[s>>2]=r[s>>2]&(c^-1)|c&r[A+y>>2]}A=r[a>>2]}if(r[a>>2]=r[u>>2],r[u>>2]=A,c=r[a+4>>2],r[a+4>>2]=r[u+4>>2],r[u+4>>2]=c,c=r[a+8>>2],r[a+8>>2]=r[u+8>>2],r[u+8>>2]=c,!A)break n;W(A)}if(!h||(m&&(c=32-m|0,a=c>>>0>h>>>0?h:c,r[s>>2]=r[s>>2]&(-1<<m&-1>>>c-a^-1),h=h-a|0,s=s+4|0),c=h>>>5<<2,a=Ct(s,0,c),s=h&31,!s))break t;a=a+c|0,r[a>>2]=r[a>>2]&(-1>>>32-s^-1);break t}r[a+4>>2]=s}re=u+16|0;return}eu(),Xe()}function xTe(a){a=a|0;var s=0,c=0,u=0,f=0,h=0,m=0,y=0;m=re-16|0,re=m,s=r[a+4>>2],u=r[s>>2];e:{c=r[a+12>>2],c=r[c+28>>2]-r[c+24>>2]|0,f=c>>2;t:{if(f>>>0<=r[s+8>>2]-u>>2>>>0)break t;if((c|0)<0)break e;if(h=r[s+4>>2],c=Te(c),y=c+(f<<2)|0,f=h-u|0,h=f+c|0,(f|0)>0&&$e(c,u,f),r[s+8>>2]=y,r[s+4>>2]=h,r[s>>2]=c,!u)break t;W(u)}s=r[a+12>>2],u=r[s+28>>2],s=r[s+24>>2],r[m+12>>2]=0,s=u-s>>2,c=a+96|0,f=r[c>>2],u=r[a+100>>2]-f>>2;t:{if(s>>>0>u>>>0){ea(c,s-u|0,m+12|0);break t}if(s>>>0>=u>>>0)break t;r[a+100>>2]=f+(s<<2)}f=a+8|0,s=r[a+116>>2];t:{if(s){if(c=r[s>>2],(c|0)==r[s+4>>2]){u=1;break t}for(s=0;;){if(u=Dee(f,r[(s<<2)+c>>2]),!u)break t;if(h=r[a+116>>2],c=r[h>>2],s=s+1|0,!(s>>>0<r[h+4>>2]-c>>2>>>0))break}break t}if(u=1,a=r[a+12>>2],a=r[a+4>>2]-r[a>>2]|0,a>>>0<12)break t;for(a=(a>>2>>>0)/3|0,s=0;;){if(u=Dee(f,ne(s,3)),!u)break t;if(s=s+1|0,(a|0)==(s|0))break}}return re=m+16|0,u|0}qn(1336),Xe()}function MTe(a,s){a=a|0,s=s|0;var c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0;N=r[a+12>>2],c=r[a+108>>2],f=r[c+80>>2],D[s+84|0]=0,h=r[s+68>>2],u=r[s+72>>2]-h>>2;e:{if(u>>>0<f>>>0){ea(s+68|0,f-u|0,12404),c=r[a+108>>2],f=r[c+80>>2];break e}if(f>>>0>=u>>>0)break e;r[s+72>>2]=h+(f<<2)}if(R=r[c+96>>2],c=r[c+100>>2]-R|0,!c)return 1;c=(c|0)/12|0,z=c>>>0>1?c:1,c=0;e:{for(;;){if((c|0)==1431655765||(u=r[N>>2]+(ne(c,3)<<2)|0,y=r[u>>2],(y|0)==-1)||(h=ne(c,12)+R|0,m=r[h>>2],m>>>0>=f>>>0)||(T=r[r[a+112>>2]+12>>2],A=r[T+(y<<2)>>2],A>>>0>=f>>>0)||(y=r[s+68>>2],r[y+(m<<2)>>2]=A,m=r[u+4>>2],(m|0)==-1)||(A=r[h+4>>2],A>>>0>=f>>>0)||(m=r[(m<<2)+T>>2],m>>>0>=f>>>0)||(r[y+(A<<2)>>2]=m,u=r[u+8>>2],(u|0)==-1)||(h=r[h+8>>2],h>>>0>=f>>>0)||(u=r[(u<<2)+T>>2],u>>>0>=f>>>0))break e;if(r[y+(h<<2)>>2]=u,c=c+1|0,(z|0)==(c|0))break}return 1}return 0}function kTe(a,s){a=a|0,s=s|0;var c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0;N=r[a+12>>2],c=r[a+68>>2],f=r[c+80>>2],D[s+84|0]=0,h=r[s+68>>2],u=r[s+72>>2]-h>>2;e:{if(u>>>0<f>>>0){ea(s+68|0,f-u|0,12404),c=r[a+68>>2],f=r[c+80>>2];break e}if(f>>>0>=u>>>0)break e;r[s+72>>2]=h+(f<<2)}if(R=r[c+96>>2],c=r[c+100>>2]-R|0,!c)return 1;c=(c|0)/12|0,z=c>>>0>1?c:1,c=0;e:{for(;;){if((c|0)==1431655765||(u=r[N>>2]+(ne(c,3)<<2)|0,y=r[u>>2],(y|0)==-1)||(h=ne(c,12)+R|0,m=r[h>>2],m>>>0>=f>>>0)||(T=r[r[a+72>>2]+12>>2],A=r[T+(y<<2)>>2],A>>>0>=f>>>0)||(y=r[s+68>>2],r[y+(m<<2)>>2]=A,m=r[u+4>>2],(m|0)==-1)||(A=r[h+4>>2],A>>>0>=f>>>0)||(m=r[(m<<2)+T>>2],m>>>0>=f>>>0)||(r[y+(A<<2)>>2]=m,u=r[u+8>>2],(u|0)==-1)||(h=r[h+8>>2],h>>>0>=f>>>0)||(u=r[(u<<2)+T>>2],u>>>0>=f>>>0))break e;if(r[y+(h<<2)>>2]=u,c=c+1|0,(z|0)==(c|0))break}return 1}return 0}function Jee(a,s,c){a=a|0,s=s|0,c=c|0;var u=0,f=0,h=0,m=0,y=0,A=0,T=0;h=r[a+12>>2],y=r[a+8>>2],u=h-y>>2,s=D[s+24|0];e:{if(u>>>0<s>>>0){Xr(a+8|0,s-u|0),y=r[a+8>>2],h=r[a+12>>2];break e}if(s>>>0>=u>>>0)break e;h=(s<<2)+y|0,r[a+12>>2]=h}s=0,A=r[c+20>>2],f=r[c+16>>2],u=h-y|0,h=u,m=f+u|0,T=r[c+12>>2],A=u>>>0>m>>>0?A+1|0:A;e:{if(m>>>0>Ue[c+8>>2]&(T|0)<=(A|0)|(A|0)>(T|0)||($e(y,f+r[c>>2]|0,u),u=r[c+20>>2],f=h+r[c+16>>2]|0,u=f>>>0<h>>>0?u+1|0:u,m=f,r[c+16>>2]=f,r[c+20>>2]=u,f=r[c+12>>2],h=m+4|0,u=h>>>0<4?u+1|0:u,h>>>0>Ue[c+8>>2]&(u|0)>=(f|0)|(u|0)>(f|0))||(u=m+r[c>>2]|0,r[a+20>>2]=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),u=r[c+20>>2],m=r[c+16>>2],f=m+4|0,h=f>>>0<4?u+1|0:u,T=f,r[c+16>>2]=f,r[c+20>>2]=h,f=r[c+12>>2],(h|0)>=(f|0)&T>>>0>=Ue[c+8>>2]|(h|0)>(f|0))||(f=I[T+r[c>>2]|0],h=m+5|0,u=h>>>0<5?u+1|0:u,r[c+16>>2]=h,r[c+20>>2]=u,f-1>>>0>29))break e;r[a+4>>2]=f,s=1}return s|0}function Iv(a,s){var c=0;e:{if(!sr(a,s)||!sr(a+16|0,s)||!sr(a+32|0,s)||!sr(a+48|0,s)||!sr(a- -64|0,s)||!sr(a+80|0,s)||!sr(a+96|0,s)||!sr(a+112|0,s)||!sr(a+128|0,s)||!sr(a+144|0,s)||!sr(a+160|0,s)||!sr(a+176|0,s)||!sr(a+192|0,s)||!sr(a+208|0,s)||!sr(a+224|0,s)||!sr(a+240|0,s)||!sr(a+256|0,s)||!sr(a+272|0,s)||!sr(a+288|0,s)||!sr(a+304|0,s)||!sr(a+320|0,s)||!sr(a+336|0,s)||!sr(a+352|0,s)||!sr(a+368|0,s)||!sr(a+384|0,s)||!sr(a+400|0,s)||!sr(a+416|0,s)||!sr(a+432|0,s)||!sr(a+448|0,s)||!sr(a+464|0,s)||!sr(a+480|0,s)||!sr(a+496|0,s))break e;c=sr(a+512|0,s)}return c}function VM(a,s){var c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0;e:{f=r[a+8>>2];t:{if((f|0)!=r[a+12>>2])break t;if(u=r[a+4>>2],m=r[a>>2],u>>>0>m>>>0){m=((u-m>>2)+1|0)/-2<<2,c=m+u|0,h=f-u|0,h&&(Hf(c,u,h),u=r[a+4>>2]),f=c+h|0,r[a+8>>2]=f,r[a+4>>2]=u+m;break t}if(c=f-m|0,h=c?c>>1:1,h>>>0>=1073741824)break e;c=h<<2,y=Te(c),R=y+c|0,c=f-u|0,h=(h&-4)+y|0,f=h;n:{if(!c)break n;N=c&-4,A=c-4|0,T=(A>>>2|0)+1&7;i:{if(!T){c=h;break i}for(f=0,c=h;r[c>>2]=r[u>>2],u=u+4|0,c=c+4|0,f=f+1|0,(T|0)!=(f|0););}if(f=h+N|0,A>>>0<28)break n;for(;r[c>>2]=r[u>>2],r[c+4>>2]=r[u+4>>2],r[c+8>>2]=r[u+8>>2],r[c+12>>2]=r[u+12>>2],r[c+16>>2]=r[u+16>>2],r[c+20>>2]=r[u+20>>2],r[c+24>>2]=r[u+24>>2],r[c+28>>2]=r[u+28>>2],u=u+32|0,c=c+32|0,(f|0)!=(c|0););}if(r[a+12>>2]=R,r[a+8>>2]=f,r[a+4>>2]=h,r[a>>2]=y,!m)break t;W(m),f=r[a+8>>2]}r[f>>2]=r[s>>2],r[a+8>>2]=r[a+8>>2]+4;return}qn(1336),Xe()}function IB(a,s){var c=0,u=0,f=0,h=0,m=0,y=0;m=re-16|0,re=m;e:{t:{if(s){r[a+88>>2]=0,r[a+92>>2]=0,c=r[a+84>>2],r[a+84>>2]=0,c&&W(c),r[a+76>>2]=0,r[a+80>>2]=0,c=r[a+72>>2],r[a+72>>2]=0,c&&W(c),c=r[s>>2],u=r[s+4>>2],D[m+15|0]=0,hc(a,u-c>>2,m+15|0),c=r[s+28>>2],u=r[s+24>>2],D[m+14|0]=0,hc(a+12|0,c-u>>2,m+14|0),DB(a+28|0,r[s+4>>2]-r[s>>2]>>2,13740),u=r[s+28>>2]-r[s+24>>2]|0,f=u>>2,c=r[a+52>>2];n:{if(f>>>0<=r[a+60>>2]-c>>2>>>0)break n;if((u|0)<0)break t;if(h=r[a+56>>2],u=Te(u),y=u+(f<<2)|0,f=h-c|0,h=f+u|0,(f|0)>0&&$e(u,c,f),r[a+60>>2]=y,r[a+56>>2]=h,r[a+52>>2]=u,!c)break n;W(c)}u=r[s+28>>2]-r[s+24>>2]|0,f=u>>2,c=r[a+40>>2];n:{if(f>>>0<=r[a+48>>2]-c>>2>>>0)break n;if((u|0)<0)break e;if(h=r[a+44>>2],u=Te(u),y=u+(f<<2)|0,f=h-c|0,h=f+u|0,(f|0)>0&&$e(u,c,f),r[a+48>>2]=y,r[a+44>>2]=h,r[a+40>>2]=u,!c)break n;W(c)}D[a+24|0]=1,r[a+64>>2]=s}re=m+16|0;return}qn(1336),Xe()}qn(1336),Xe()}function ete(a,s){var c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0;e:{m=r[a+4>>2];t:{if((m|0)!=r[a>>2]){c=m;break t}if(u=r[a+8>>2],c=r[a+12>>2],u>>>0<c>>>0){h=((c-u>>2)+1|0)/2<<2,c=h+u|0,f=u-m|0,f&&(c=c-f|0,Hf(c,m,f),u=r[a+8>>2]),r[a+4>>2]=c,r[a+8>>2]=u+h;break t}if(c=c-m|0,c=c?c>>1:1,c>>>0>=1073741824)break e;f=c<<2,y=Te(f),N=y+f|0,c=(c+3&-4)+y|0,h=c,A=u-m|0;n:{if(!A)break n;if(u=c,f=m,T=A-4|0,R=(T>>>2|0)+1&7,R)for(h=0;r[u>>2]=r[f>>2],f=f+4|0,u=u+4|0,h=h+1|0,(R|0)!=(h|0););if(h=(A&-4)+c|0,T>>>0<28)break n;for(;r[u>>2]=r[f>>2],r[u+4>>2]=r[f+4>>2],r[u+8>>2]=r[f+8>>2],r[u+12>>2]=r[f+12>>2],r[u+16>>2]=r[f+16>>2],r[u+20>>2]=r[f+20>>2],r[u+24>>2]=r[f+24>>2],r[u+28>>2]=r[f+28>>2],f=f+32|0,u=u+32|0,(h|0)!=(u|0););}if(r[a+12>>2]=N,r[a+8>>2]=h,r[a+4>>2]=c,r[a>>2]=y,!m)break t;W(m),c=r[a+4>>2]}r[c-4>>2]=r[s>>2],r[a+4>>2]=r[a+4>>2]-4;return}qn(1336),Xe()}function CTe(a,s){a=a|0,s=s|0;var c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0;y=r[a+12>>2],c=r[a+68>>2],f=r[c+80>>2],D[s+84|0]=0,m=r[s+68>>2],u=r[s+72>>2]-m>>2;e:{if(u>>>0<f>>>0){ea(s+68|0,f-u|0,12404),c=r[a+68>>2],f=r[c+80>>2];break e}if(f>>>0>=u>>>0)break e;r[s+72>>2]=m+(f<<2)}if(R=r[c+96>>2],c=r[c+100>>2]-R|0,!c)return 1;c=(c|0)/12|0,N=c>>>0>1?c:1,z=r[y+28>>2],c=0;e:{for(;;){if(u=(ne(c,3)<<2)+z|0,m=r[u>>2],(m|0)==-1||(y=ne(c,12)+R|0,A=r[y>>2],A>>>0>=f>>>0)||(h=m<<2,m=r[r[a+72>>2]+12>>2],h=r[h+m>>2],h>>>0>=f>>>0)||(T=A<<2,A=r[s+68>>2],r[T+A>>2]=h,h=r[u+4>>2],(h|0)==-1)||(T=r[y+4>>2],T>>>0>=f>>>0)||(h=r[m+(h<<2)>>2],h>>>0>=f>>>0)||(r[A+(T<<2)>>2]=h,u=r[u+8>>2],(u|0)==-1)||(y=r[y+8>>2],y>>>0>=f>>>0)||(u=r[m+(u<<2)>>2],u>>>0>=f>>>0))break e;if(r[A+(y<<2)>>2]=u,c=c+1|0,(N|0)==(c|0))break}return 1}return 0}function tte(a,s,c,u){var f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0;T=+At[s>>2],R=+At[s+4>>2],N=+At[s+8>>2],m=ui(T)+ui(R)+ui(N);e:{if(!(m>1e-6)){T=1,R=0,f=0;break e}m=1/m,R=m*R,T=m*T,f=m*N<0}y=r[a+16>>2],N=+(y|0),m=Oo(T*N+.5);e:{if(ui(m)<2147483648){z=~~m;break e}z=-2147483648}h=z>>31,A=h+z^h,m=Oo(R*N+.5);e:{if(ui(m)<2147483648){h=~~m;break e}h=-2147483648}s=h>>31,s=y-(A+(h+s^s)|0)|0,A=(s|0)<0?0:s,f=f?0-A|0:A,h=h+(s>>31&((h|0)>0?s:0-s|0))|0;e:{if((z|0)>=0){s=f+y|0,a=r[a+8>>2],f=y+h|0;break e}s=h>>31,s=s+h^s,a=r[a+8>>2],s=(f|0)<0?s:a-s|0,f=(h|0)<0?A:a-A|0}e:{if(!(s|f)){s=a;break e}if(!((a|0)!=(s|0)|f)){s=a;break e}if(!((a|0)!=(f|0)|s)){s=a;break e}if(!((s|0)<=(y|0)|f)){s=(y<<1)-s|0,a=0;break e}if(!((a|0)!=(f|0)|(s|0)>=(y|0))){s=(y<<1)-s|0;break e}if(!((a|0)!=(s|0)|(f|0)>=(y|0))){s=a,a=(y<<1)-f|0;break e}if(s){a=f;break e}if(s=0,(f|0)<=(y|0)){a=f;break e}a=(y<<1)-f|0}r[c>>2]=a,r[u>>2]=s}function nte(a,s,c){a=a|0,s=s|0,c=c|0;var u=0,f=_e(0),h=_e(0),m=_e(0),y=_e(0),A=_e(0),T=0,R=_e(0),N=_e(0),z=_e(0),U=_e(0),H=0;e:{if(r[c+28>>2]!=9|I[c+24|0]!=3||(a=r[a+4>>2],a-31>>>0<4294967267)||(H=1,T=r[c+80>>2],!T))break e;for(R=_e(_e(2)/_e((1<<a)-2|0)),c=r[r[c>>2]>>2]+r[c+48>>2]|0,a=r[r[s>>2]>>2]+r[s+48>>2]|0,s=0;m=_e(0),N=_e(0),z=_e(0),f=_e(_e(_e(r[a>>2])*R)+_e(-1)),h=_e(_e(_e(r[a+4>>2])*R)+_e(-1)),A=_e(_e(_e(1)-_e(ui(f)))-_e(ui(h))),y=_e(MSe(_e(-A),_e(0))),U=_e(-y),h=_e(h+(h<_e(0)?y:U)),f=_e(f+(f<_e(0)?y:U)),y=_e(_e(h*h)+_e(_e(A*A)+_e(f*f))),+y<1e-6||(m=_e(_e(1)/_e(yB(y))),z=_e(h*m),N=_e(f*m),m=_e(A*m)),a=a+8|0,u=(vB(z),_B(2)),D[c+8|0]=u,D[c+9|0]=u>>>8,D[c+10|0]=u>>>16,D[c+11|0]=u>>>24,u=(vB(N),_B(2)),D[c+4|0]=u,D[c+5|0]=u>>>8,D[c+6|0]=u>>>16,D[c+7|0]=u>>>24,u=(vB(m),_B(2)),D[c|0]=u,D[c+1|0]=u>>>8,D[c+2|0]=u>>>16,D[c+3|0]=u>>>24,c=c+12|0,s=s+1|0,(T|0)!=(s|0););}return H|0}function NB(a,s){var c=0,u=0,f=0,h=0,m=0,y=0;m=r[a>>2],c=m+(s>>>3&536870908)|0,r[c>>2]=r[c>>2]|1<<s,h=r[a+64>>2],f=(s|0)==-1,u=-1;e:{if(f||(c=s+1|0,c=(c>>>0)%3|0?c:s-2|0,u=-1,(c|0)==-1))break e;u=r[r[h>>2]+(c<<2)>>2]}c=r[a+12>>2],y=(u>>>3&536870908)+c|0,r[y>>2]=r[y>>2]|1<<u;e:{t:{if(!f){n:{i:{if((s>>>0)%3|0){f=s-1|0;break i}if(f=s+2|0,u=-1,(f|0)==-1)break n}u=r[r[h>>2]+(f<<2)>>2]}if(f=(u>>>3&536870908)+c|0,r[f>>2]=r[f>>2]|1<<u,u=-1,s=r[r[h+12>>2]+(s<<2)>>2],(s|0)==-1)break e;D[a+24|0]=0,a=(s>>>3&536870908)+m|0,r[a>>2]=r[a>>2]|1<<s,a=s+1|0,a=(a>>>0)%3|0?a:s-2|0,(a|0)!=-1&&(u=r[r[h>>2]+(a<<2)>>2]),a=c+(u>>>3&536870908)|0,r[a>>2]=r[a>>2]|1<<u;n:{i:{if((s>>>0)%3|0){s=s-1|0;break i}if(s=s+2|0,a=-1,(s|0)==-1)break n}a=r[r[h>>2]+(s<<2)>>2]}s=1<<a,a=c+(a>>>3&536870908)|0,c=r[a>>2];break t}a=c+536870908|0,s=r[c+536870908>>2],c=-2147483648}r[a>>2]=s|c}}function rte(a,s,c){var u=0,f=0,h=0,m=0,y=0,A=0,T=0;e:{if(s>>>0<=63){if(s=0,a=r[a+12>>2],a>>>0<2)break e;u=r[c>>2],s=a-1|0,f=s&3,c=0;t:{if(a-2>>>0<3){a=1,s=0;break t}for(h=s&-4,s=0,a=1;m=a+3|0,y=a+2|0,A=a+1|0,s=Ue[u+(s<<2)>>2]>Ue[u+(a<<2)>>2]?a:s,s=Ue[u+(s<<2)>>2]>Ue[u+(A<<2)>>2]?A:s,s=Ue[u+(s<<2)>>2]>Ue[u+(y<<2)>>2]?y:s,s=Ue[u+(s<<2)>>2]>Ue[u+(m<<2)>>2]?m:s,a=a+4|0,T=T+4|0,(h|0)!=(T|0););}if(!f)break e;for(;s=Ue[u+(s<<2)>>2]>Ue[u+(a<<2)>>2]?a:s,a=a+1|0,c=c+1|0,(f|0)!=(c|0););break e}if(s=r[a+580>>2],u=32-s|0,(u|0)>=4){if(c=r[a+576>>2],(c|0)==r[a+568>>2])return 0;if(u=r[c>>2],f=s+4|0,r[a+580>>2]=f,s=u<<s>>>28|0,(f|0)!=32)break e;return r[a+580>>2]=0,r[a+576>>2]=c+4,s}if(c=r[a+576>>2],f=c+4|0,(f|0)==r[a+568>>2])return 0;h=r[c>>2],r[a+576>>2]=f,r[a+580>>2]=s-28,a=60-s|0,s=r[c+4>>2]>>>a|h<<s>>>a-u}return s}function ite(a){a=a|0;var s=0,c=0,u=0,f=0;if(r[a>>2]=11464,s=r[a+388>>2],s&&(r[a+392>>2]=s,W(s)),u=r[a+368>>2],r[a+368>>2]=0,u){if(f=u-4|0,s=r[f>>2],s)for(c=(s<<4)+u|0;c=c-16|0,(u|0)!=(c|0););W(f)}if(YB(a+216|0),s=r[a+196>>2],s&&(r[a+200>>2]=s,W(s)),s=r[a+184>>2],s&&(r[a+188>>2]=s,W(s)),s=r[a+172>>2],s&&(r[a+176>>2]=s,W(s)),s=r[a+160>>2],s&&(r[a+164>>2]=s,W(s)),c=r[a+144>>2],c)for(;s=r[c>>2],W(c),c=s,!!s;);return s=r[a+136>>2],r[a+136>>2]=0,s&&W(s),s=r[a+120>>2],s&&W(s),s=r[a+108>>2],s&&W(s),s=r[a+96>>2],s&&W(s),s=r[a+72>>2],s&&(r[a+76>>2]=s,W(s)),s=r[a+60>>2],s&&W(s),s=r[a+48>>2],s&&(r[a+52>>2]=s,W(s)),s=r[a+36>>2],s&&(r[a+40>>2]=s,W(s)),s=r[a+24>>2],s&&(r[a+28>>2]=s,W(s)),s=r[a+12>>2],s&&(r[a+16>>2]=s,W(s)),s=r[a+8>>2],r[a+8>>2]=0,s&&Zd(s),a|0}function LB(a,s){var c=0,u=0;c=r[s+8>>2],r[a+4>>2]=r[s+4>>2],r[a+8>>2]=c,r[a+20>>2]=r[s+20>>2],c=r[s+16>>2],r[a+12>>2]=r[s+12>>2],r[a+16>>2]=c;e:{t:{if((a|0)!=(s|0)){if(c=r[s+28>>2],c){n:{if(r[a+32>>2]<<5>>>0>=c>>>0){u=r[a+24>>2];break n}if(u=r[a+24>>2],u&&(W(u),r[a+32>>2]=0,r[a+24>>2]=0,r[a+28>>2]=0,c=r[s+28>>2]),(c|0)<0)break t;c=(c-1>>>5|0)+1|0,u=Te(c<<2),r[a+32>>2]=c,r[a+28>>2]=0,r[a+24>>2]=u,c=r[s+28>>2]}Hf(u,r[s+24>>2],(c-1>>>3&536870908)+4|0),c=r[s+28>>2]}else c=0;if(r[a+28>>2]=c,c=r[s+40>>2],c){n:{if(r[a+44>>2]<<5>>>0>=c>>>0){u=r[a+36>>2];break n}if(u=r[a+36>>2],u&&(W(u),r[a+44>>2]=0,r[a+36>>2]=0,r[a+40>>2]=0,c=r[s+40>>2]),(c|0)<0)break e;c=(c-1>>>5|0)+1|0,u=Te(c<<2),r[a+44>>2]=c,r[a+40>>2]=0,r[a+36>>2]=u,c=r[s+40>>2]}Hf(u,r[s+36>>2],(c-1>>>3&536870908)+4|0),s=r[s+40>>2]}else s=0;r[a+40>>2]=s}return}eu(),Xe()}eu(),Xe()}function PTe(a,s,c){a=a|0,s=s|0,c=c|0;var u=0,f=0,h=0,m=0,y=0;h=re+-64|0,re=h,u=1;e:{if(W0(a,s,0)||(u=0,!s))break e;u=re+-64|0,re=u,f=r[s>>2],m=r[f-4>>2],y=r[f-8>>2],r[u+20>>2]=0,r[u+16>>2]=14956,r[u+12>>2]=s,r[u+8>>2]=15004,f=0,Ct(u+24|0,0,39),s=s+y|0;t:{if(W0(m,15004,0)){r[u+56>>2]=1,pt[r[r[m>>2]+20>>2]](m,u+8|0,s,s,1,0),f=r[u+32>>2]==1?s:0;break t}pt[r[r[m>>2]+24>>2]](m,u+8|0,s,1,0);n:switch(r[u+44>>2]){case 0:f=r[u+48>>2]==1&&r[u+36>>2]==1&&r[u+40>>2]==1?r[u+28>>2]:0;break t;case 1:break n;default:break t}if(r[u+32>>2]!=1&&r[u+48>>2]|r[u+36>>2]!=1|r[u+40>>2]!=1)break t;f=r[u+24>>2]}if(re=u- -64|0,u=0,!f)break e;s=h+8|0,Ct(s|4,0,52),r[h+56>>2]=1,r[h+20>>2]=-1,r[h+16>>2]=a,r[h+8>>2]=f,pt[r[r[f>>2]+28>>2]](f,s,r[c>>2],1),a=r[h+32>>2],(a|0)==1&&(r[c>>2]=r[h+24>>2]),u=(a|0)==1}return re=h- -64|0,u|0}function ste(a,s){a=a|0,s=s|0;var c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0;h=r[s+12>>2],c=r[s+20>>2],u=c,A=r[s+16>>2],f=A+4|0,c=f>>>0<4?c+1|0:c,T=r[s+8>>2],m=f;e:{if(T>>>0<f>>>0&(c|0)>=(h|0)|(c|0)>(h|0))break e;if(N=r[s>>2],f=A+N|0,y=I[f|0]|I[f+1|0]<<8|(I[f+2|0]<<16|I[f+3|0]<<24),r[s+16>>2]=m,r[s+20>>2]=c,f=Ut[s+38>>1],f>>>0<=513){if(c=u,u=A+8|0,c=u>>>0<8?c+1|0:c,m=u,u>>>0>T>>>0&(c|0)>=(h|0)|(c|0)>(h|0))break e;r[s+16>>2]=m,r[s+20>>2]=c}if(!(y&1)||(u=Ms(y)^31,u-30>>>0<4294967267))break e;if(r[a+8>>2]=u+1,u=-2<<u,y=-2-u|0,r[a+16>>2]=y,r[a+12>>2]=u^-1,r[a+24>>2]=(y|0)/2,At[a+20>>2]=_e(2)/_e(y|0),f>>>0<=513){if((c|0)>=(h|0)&m>>>0>=T>>>0|(c|0)>(h|0))break e;h=I[m+N|0],u=m+1|0,c=u?c:c+1|0,r[s+16>>2]=u,r[s+20>>2]=c;t:switch(h|0){case 1:R=1;break;case 0:break t;default:break e}r[a+72>>2]=R}R=sr(a+96|0,s)}return R|0}function ote(a,s){a=a|0,s=s|0;var c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0;h=r[s+12>>2],c=r[s+20>>2],m=c,y=r[s+16>>2],u=y+4|0,c=u>>>0<4?c+1|0:c,A=r[s+8>>2];e:{if(A>>>0<u>>>0&(c|0)>=(h|0)|(c|0)>(h|0)||(N=r[s>>2],f=y+N|0,f=I[f|0]|I[f+1|0]<<8|(I[f+2|0]<<16|I[f+3|0]<<24),r[s+16>>2]=u,r[s+20>>2]=c,c=m,u=y+8|0,c=u>>>0<8?c+1|0:c,T=u,u>>>0>A>>>0&(c|0)>=(h|0)|(c|0)>(h|0))||(r[s+16>>2]=T,r[s+20>>2]=c,!(f&1))||(u=Ms(f)^31,u-30>>>0<4294967267))break e;if(r[a+8>>2]=u+1,u=-2<<u,f=-2-u|0,r[a+16>>2]=f,r[a+12>>2]=u^-1,r[a+24>>2]=(f|0)/2,At[a+20>>2]=_e(2)/_e(f|0),Ut[s+38>>1]<=513){if((c|0)>=(h|0)&T>>>0>=A>>>0|(c|0)>(h|0))break e;h=I[T+N|0],c=y+9|0,m=c>>>0<9?m+1|0:m,r[s+16>>2]=c,r[s+20>>2]=m;t:switch(h|0){case 1:R=1;break;case 0:break t;default:break e}r[a+72>>2]=R}R=sr(a+96|0,s)}return R|0}function ate(a){a=a|0;var s=0,c=0,u=0,f=0;if(r[a>>2]=11412,u=r[a+368>>2],r[a+368>>2]=0,u){if(f=u-4|0,s=r[f>>2],s)for(c=(s<<4)+u|0;c=c-16|0,(u|0)!=(c|0););W(f)}if(YB(a+216|0),s=r[a+196>>2],s&&(r[a+200>>2]=s,W(s)),s=r[a+184>>2],s&&(r[a+188>>2]=s,W(s)),s=r[a+172>>2],s&&(r[a+176>>2]=s,W(s)),s=r[a+160>>2],s&&(r[a+164>>2]=s,W(s)),c=r[a+144>>2],c)for(;s=r[c>>2],W(c),c=s,!!s;);return s=r[a+136>>2],r[a+136>>2]=0,s&&W(s),s=r[a+120>>2],s&&W(s),s=r[a+108>>2],s&&W(s),s=r[a+96>>2],s&&W(s),s=r[a+72>>2],s&&(r[a+76>>2]=s,W(s)),s=r[a+60>>2],s&&W(s),s=r[a+48>>2],s&&(r[a+52>>2]=s,W(s)),s=r[a+36>>2],s&&(r[a+40>>2]=s,W(s)),s=r[a+24>>2],s&&(r[a+28>>2]=s,W(s)),s=r[a+12>>2],s&&(r[a+16>>2]=s,W(s)),s=r[a+8>>2],r[a+8>>2]=0,s&&Zd(s),a|0}function RTe(a,s,c,u){a=a|0,s=s|0,c=c|0,u=u|0;var f=0,h=0,m=0;e:{if(a=re-32|0,re=a,f=pc(c),f>>>0<4294967280){t:{n:{if(f>>>0>=11){m=f+16&-16,h=Te(m),r[a+24>>2]=m|-2147483648,r[a+16>>2]=h,r[a+20>>2]=f;break n}if(D[a+27|0]=f,h=a+16|0,!f)break t}$e(h,c,f)}D[f+h|0]=0,r[a+8>>2]=0,r[a>>2]=0,r[a+4>>2]=0;t:{if(c=qm(s,a+16|0),(c|0)==(s+4|0)||(s=r[c+28>>2],h=r[c+32>>2],(s|0)==(h|0))||(s=h-s|0,s&3))break t;f=s>>>2|0,h=r[a+4>>2],s=r[a>>2],m=h-s>>2;n:{if(f>>>0>m>>>0){Xr(a,f-m|0),s=r[a>>2],h=r[a+4>>2];break n}if(f>>>0>=m>>>0)break n;h=(f<<2)+s|0,r[a+4>>2]=h}if((s|0)!=(h|0)){f=s,s=r[c+28>>2],$e(f,s,r[c+32>>2]-s|0);break t}ps(),Xe()}s=r[u>>2],s&&(r[u+4>>2]=s,W(s)),r[u>>2]=r[a>>2],r[u+4>>2]=r[a+4>>2],r[u+8>>2]=r[a+8>>2],D[a+27|0]<0&&W(r[a+16>>2]),re=a+32|0;break e}mc(),Xe()}}function GM(a){var s=0,c=0,u=0;s=r[a+8>>2],u=r[a>>2];e:{if(I[a+12|0]){t:{n:{i:{r:{if((s|0)==-1||(c=s+1|0,s=(c>>>0)%3|0?c:s-2|0,(s|0)==-1))break r;if(s=r[r[u+12>>2]+(s<<2)>>2],(s|0)!=-1)break i}r[a+8>>2]=-1;break n}if(c=s+1|0,s=(c>>>0)%3|0?c:s-2|0,r[a+8>>2]=s,(s|0)!=-1)break t}c=r[a+4>>2],s=-1;n:{if((c|0)==-1)break n;i:{if((c>>>0)%3|0){c=c-1|0;break i}if(c=c+2|0,s=-1,(c|0)==-1)break n}if(c=r[r[u+12>>2]+(c<<2)>>2],s=-1,(c|0)==-1||(s=c-1|0,(c>>>0)%3|0))break n;s=c+2|0}D[a+12|0]=0,r[a+8>>2]=s;return}if((s|0)!=r[a+4>>2])break e;r[a+8>>2]=-1;return}c=-1;t:{if((s|0)==-1)break t;n:{if((s>>>0)%3|0){s=s-1|0;break n}if(s=s+2|0,c=-1,(s|0)==-1)break t}if(s=r[r[u+12>>2]+(s<<2)>>2],c=-1,(s|0)==-1||(c=s-1|0,(s>>>0)%3|0))break t;c=s+2|0}r[a+8>>2]=c}}function DTe(a,s,c){a=a|0,s=s|0,c=c|0;var u=0,f=0,h=0,m=0,y=0,A=0,T=0;f=re-32|0,re=f,h=r[a+28>>2],r[f+16>>2]=h,u=r[a+20>>2],r[f+28>>2]=c,r[f+24>>2]=s,s=u-h|0,r[f+20>>2]=s,h=s+c|0,T=2;e:{t:{s=f+16|0,u=_ee(r[a+60>>2],s|0,2,f+12|0)|0,u?(r[4190]=u,u=-1):u=0;n:{if(!u)for(;;){if(u=r[f+12>>2],(u|0)==(h|0))break n;if((u|0)<0)break t;if(m=r[s+4>>2],y=m>>>0<u>>>0,A=(y<<3)+s|0,m=u-(y?m:0)|0,r[A>>2]=m+r[A>>2],A=(y?12:4)+s|0,r[A>>2]=r[A>>2]-m,h=h-u|0,s=y?s+8|0:s,T=T-y|0,u=_ee(r[a+60>>2],s|0,T|0,f+12|0)|0,u?(r[4190]=u,u=-1):u=0,!!u)break}if((h|0)!=-1)break t}s=r[a+44>>2],r[a+28>>2]=s,r[a+20>>2]=s,r[a+16>>2]=s+r[a+48>>2],a=c;break e}if(r[a+28>>2]=0,r[a+16>>2]=0,r[a+20>>2]=0,r[a>>2]=r[a>>2]|32,a=0,(T|0)==2)break e;a=c-r[s+4>>2]|0}return re=f+32|0,a|0}function OTe(a,s,c){a=a|0,s=s|0,c=c|0;var u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0;u=re-16|0,re=u;e:{if(f=pc(c),f>>>0<4294967280){t:{n:{if(f>>>0>=11){h=f+16&-16,a=Te(h),r[u+8>>2]=h|-2147483648,r[u>>2]=a,r[u+4>>2]=f;break n}if(D[u+11|0]=f,a=u,!f)break t}$e(a,c,f)}D[a+f|0]=0,c=I[u+11|0],f=c<<24>>24,h=r[u>>2],s=r[s+4>>2],a=0;t:{if(!s)break t;for(a=c,c=(f|0)<0,a=c?r[u+4>>2]:a,T=c?h:u;;){c=I[s+27|0],m=c<<24>>24<0,c=m?r[s+20>>2]:c,R=c>>>0<a>>>0;n:{i:{A=R?c:a;r:{if(A){y=s+16|0,m=m?r[y>>2]:y,y=Io(T,m,A);s:{if(!y){if(a>>>0>=c>>>0)break s;break n}if((y|0)<0)break n}if(c=Io(m,T,A),!c)break r;if((c|0)<0)break i;a=1;break t}if(a>>>0<c>>>0)break n}if(R)break i;a=1;break t}s=s+4|0}if(s=r[s>>2],!s)break}a=0}(f|0)<0&&W(h),re=u+16|0;break e}mc(),Xe()}return a|0}function zB(a,s){var c=0,u=0,f=0,h=0,m=0,y=0,A=0;r[a+16>>2]=0,r[a+20>>2]=0,r[a+8>>2]=0,r[a>>2]=0,r[a+4>>2]=0,r[a+24>>2]=0,h=r[s+4>>2]-r[s>>2]|0,A=(h|0)/20|0;e:{t:{n:{if(h){if(A>>>0>=214748365)break n;u=Te(h),r[a+16>>2]=u,r[a+20>>2]=u,r[a+24>>2]=ne(A,20)+u,c=r[s>>2],s=r[s+4>>2]-c|0,(s|0)<=0?s=u:s=$e(u,c,s)+ne((s>>>0)/20|0,20)|0,c=s,r[a+20>>2]=c}if(r[a+28>>2]=0,s=c-u|0,!s)break e;if(s=(s|0)/20|0,c=s>>>0>1?s:1,h=c&1,s>>>0<2){s=0;break t}for(A=c&-2,s=0,c=0;m=ne(s|1,20)+u|0,m=ne(r[m+16>>2],r[m+12>>2]),y=ne(s,20)+u|0,y=ne(r[y+16>>2],r[y+12>>2]),f=f>>>0<y>>>0?y:f,f=f>>>0<m>>>0?m:f,s=s+2|0,c=c+2|0,(A|0)!=(c|0););break t}jt(),Xe()}if(!h)break e;s=ne(s,20)+u|0,s=ne(r[s+16>>2],r[s+12>>2]),f=s>>>0>f>>>0?s:f}return $f(a,f),r[a+12>>2]=r[a>>2],a}function Hf(a,s,c){var u=0,f=0;e:{if((a|0)==(s|0))break e;if(f=a+c|0,s-f>>>0<=0-(c<<1)>>>0)return $e(a,s,c);u=(a^s)&3;t:{n:{if(a>>>0<s>>>0){if(u){u=a;break t}if(!(a&3)){u=a;break n}for(u=a;;){if(!c)break e;if(D[u|0]=I[s|0],s=s+1|0,c=c-1|0,u=u+1|0,!(u&3))break}break n}i:{if(u)break i;if(f&3)for(;;){if(!c)break e;if(c=c-1|0,u=c+a|0,D[u|0]=I[s+c|0],!(u&3))break}if(c>>>0<=3)break i;for(;c=c-4|0,r[c+a>>2]=r[s+c>>2],c>>>0>3;);}if(!c)break e;for(;c=c-1|0,D[c+a|0]=I[s+c|0],!!c;);break e}if(c>>>0<=3)break t;for(;r[u>>2]=r[s>>2],s=s+4|0,u=u+4|0,c=c-4|0,c>>>0>3;);}if(!c)break e;for(;D[u|0]=I[s|0],u=u+1|0,s=s+1|0,c=c-1|0,!!c;);}return a}function ITe(a,s,c){a=a|0,s=s|0,c=c|0;var u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0;y=r[c+12>>2],u=y,f=r[c+20>>2],A=r[c+8>>2],h=r[c+16>>2];e:{if((u|0)<=(f|0)&A>>>0<=h>>>0|(u|0)<(f|0))break e;T=r[c>>2],R=D[T+h|0],u=f,m=h+1|0,u=m?u:u+1|0,r[c+16>>2]=m,r[c+20>>2]=u;t:{if((R|0)==-2)break t;if((u|0)>=(y|0)&m>>>0>=A>>>0|(u|0)>(y|0)||(u=D[m+T|0],h=h+2|0,f=h>>>0<2?f+1|0:f,r[c+16>>2]=h,r[c+20>>2]=f,(u-4&255)>>>0<251))break e;if(f=pt[r[r[a>>2]+40>>2]](a,R,u)|0,u=r[a+20>>2],r[a+20>>2]=f,!u)break t;pt[r[r[u>>2]+4>>2]](u)}if(u=r[a+20>>2],u&&!(pt[r[r[a>>2]+28>>2]](a,u)|0)||!(pt[r[r[a>>2]+36>>2]](a,s,c)|0)||(c=r[a+4>>2],!(!c|I[c+36|0]>1)&&!(pt[r[r[a>>2]+48>>2]](a,r[s+4>>2]-r[s>>2]>>2)|0)))break e;N=1}return N|0}function lte(a,s,c){var u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0;u=re-16|0,re=u,m=r[a+24>>2],N=r[a+28>>2];e:{if((m|0)!=(N|0))for(;;){r[u+8>>2]=0,r[u>>2]=0,r[u+4>>2]=0,f=Dte(r[m>>2],s,u),a=I[u+11|0],A=a<<24>>24,T=3;t:{n:{i:{r:{if(!f||(T=0,f=I[c+11|0],h=f<<24>>24,R=(A|0)<0?r[u+4>>2]:a,(R|0)!=(((h|0)<0?r[c+4>>2]:f)|0)))break r;y=(h|0)<0?r[c>>2]:c,h=r[u>>2],f=(A|0)<0;s:{if(!f){if(!A)break s;if(f=u,I[y|0]!=(h&255))break t;for(;;){if(a=a-1|0,!a)break s;if(h=I[y+1|0],y=y+1|0,f=f+1|0,(h|0)!=I[f|0])break}break r}if(!R)break s;if(Io(f?h:u,y,R))break i}z=r[m>>2],T=1}if((A|0)>=0)break n}W(r[u>>2])}switch(T|0){case 0:case 3:break t;default:break e}}if(m=m+4|0,(N|0)==(m|0))break}z=0}return re=u+16|0,z}function cte(a,s,c){e:switch(s-9|0){case 0:s=r[c>>2],r[c>>2]=s+4,r[a>>2]=r[s>>2];return;case 6:s=r[c>>2],r[c>>2]=s+4,s=zt[s>>1],r[a>>2]=s,r[a+4>>2]=s>>31;return;case 7:s=r[c>>2],r[c>>2]=s+4,r[a>>2]=Ut[s>>1],r[a+4>>2]=0;return;case 8:s=r[c>>2],r[c>>2]=s+4,s=D[s|0],r[a>>2]=s,r[a+4>>2]=s>>31;return;case 9:s=r[c>>2],r[c>>2]=s+4,r[a>>2]=I[s|0],r[a+4>>2]=0;return;case 16:s=r[c>>2]+7&-8,r[c>>2]=s+8,Zc[a>>3]=Zc[s>>3];return;case 17:pt[0](a,c);default:return;case 1:case 4:case 14:s=r[c>>2],r[c>>2]=s+4,s=r[s>>2],r[a>>2]=s,r[a+4>>2]=s>>31;return;case 2:case 5:case 11:case 15:s=r[c>>2],r[c>>2]=s+4,r[a>>2]=r[s>>2],r[a+4>>2]=0;return;case 3:case 10:case 12:case 13:break e}s=r[c>>2]+7&-8,r[c>>2]=s+8,c=r[s+4>>2],r[a>>2]=r[s>>2],r[a+4>>2]=c}function jM(a,s){var c=0,u=0,f=0,h=0,m=0,y=0,A=0;if(u=r[a+8>>2],c=r[a+4>>2],u-c>>2>>>0>=s>>>0){s&&(s=s<<2,c=Ct(c,0,s)+s|0),r[a+4>>2]=c;return}e:{t:{n:{if(m=r[a>>2],h=c-m>>2,f=h+s|0,f>>>0<1073741824){if(u=u-m|0,y=u>>1,f=u>>>0<2147483644?f>>>0>y>>>0?f:y:1073741823,f){if(f>>>0>=1073741824)break n;A=Te(f<<2)}if(u=(h<<2)+A|0,h=s<<2,s=Ct(u,0,h),h=s+h|0,f=(f<<2)+A|0,(c|0)==(m|0))break t;for(;c=c-4|0,s=r[c>>2],r[c>>2]=0,u=u-4|0,r[u>>2]=s,(c|0)!=(m|0););if(r[a+8>>2]=f,s=r[a+4>>2],r[a+4>>2]=h,c=r[a>>2],r[a>>2]=u,(s|0)==(c|0))break e;for(;s=s-4|0,a=r[s>>2],r[s>>2]=0,a&&pt[r[r[a>>2]+4>>2]](a),(s|0)!=(c|0););break e}jt(),Xe()}qn(1336),Xe()}r[a+8>>2]=f,r[a+4>>2]=h,r[a>>2]=s}c&&W(c)}function Ar(a,s){var c=0,u=0,f=0,h=0,m=0,y=0,A=0;r[a+16>>2]=0,c=r[a>>2],r[a+4>>2]=c,r[a+12>>2]=c,m=r[s+12>>2],c=m,u=r[s+20>>2],h=r[s+16>>2],f=h+4|0,u=f>>>0<4?u+1|0:u,y=r[s+8>>2];e:{if(y>>>0<f>>>0&(c|0)<=(u|0)|(c|0)<(u|0)||(c=h+r[s>>2]|0,c=I[c|0]|I[c+1|0]<<8|(I[c+2|0]<<16|I[c+3|0]<<24),r[s+16>>2]=f,r[s+20>>2]=u,!c|c&3)||(h=m-(u+(f>>>0>y>>>0)|0)|0,y-f>>>0<c>>>0&(h|0)<=0|(h|0)<0)||(c>>>0>=4&&(Xr(a,c>>>2|0),y=r[s+8>>2],m=r[s+12>>2],f=r[s+16>>2],u=r[s+20>>2]),h=c+f|0,u=c>>>0>h>>>0?u+1|0:u,h>>>0>y>>>0&(u|0)>=(m|0)|(u|0)>(m|0)))break e;$e(r[a>>2],f+r[s>>2]|0,c),u=r[s+20>>2],f=c+r[s+16>>2]|0,u=f>>>0<c>>>0?u+1|0:u,r[s+16>>2]=f,r[s+20>>2]=u,r[a+16>>2]=0,r[a+12>>2]=r[a>>2],A=1}return A}function NTe(a,s){a=a|0,s=s|0;var c=0,u=0,f=0,h=0,m=0,y=0;c=Te(72),r[c+4>>2]=0,r[c+8>>2]=0,r[c>>2]=2012,r[c+12>>2]=0,r[c+16>>2]=0,r[c+20>>2]=0,r[c+24>>2]=0,r[c+28>>2]=0,r[c+32>>2]=0,r[c+36>>2]=0,r[c+40>>2]=0,r[c>>2]=2156,r[c+44>>2]=0,r[c+48>>2]=0,r[c+52>>2]=0,r[c+56>>2]=0,r[c+60>>2]=0,r[c+64>>2]=0,r[c+68>>2]=0,y=c;e:{if((s|0)>=0){m=a+8|0,c=r[a+12>>2],f=r[a+8>>2],h=c-f>>2;t:{if((h|0)>(s|0))break t;if(u=s+1|0,s>>>0>=h>>>0){jM(m,u-h|0);break t}if(u>>>0>=h>>>0)break t;if(f=(u<<2)+f|0,(f|0)!=(c|0))for(;c=c-4|0,u=r[c>>2],r[c>>2]=0,u&&pt[r[r[u>>2]+4>>2]](u),(c|0)!=(f|0););r[a+12>>2]=f}if(a=r[m>>2]+(s<<2)|0,c=r[a>>2],r[a>>2]=y,!c)break e}pt[r[r[c>>2]+4>>2]](c)}return(s^-1)>>>31|0}function Ct(a,s,c){var u=0,f=0,h=0;e:{if(!c||(D[a|0]=s,f=a+c|0,D[f-1|0]=s,c>>>0<3)||(D[a+2|0]=s,D[a+1|0]=s,D[f-3|0]=s,D[f-2|0]=s,c>>>0<7)||(D[a+3|0]=s,D[f-4|0]=s,c>>>0<9)||(f=0-a&3,h=f+a|0,u=ne(s&255,16843009),r[h>>2]=u,s=c-f&-4,c=s+h|0,r[c-4>>2]=u,s>>>0<9)||(r[h+8>>2]=u,r[h+4>>2]=u,r[c-8>>2]=u,r[c-12>>2]=u,s>>>0<25)||(r[h+24>>2]=u,r[h+20>>2]=u,r[h+16>>2]=u,r[h+12>>2]=u,r[c-16>>2]=u,r[c-20>>2]=u,r[c-24>>2]=u,r[c-28>>2]=u,c=s,s=h&4|24,c=c-s|0,c>>>0<32))break e;for(u=rt(u,0,1,1),f=nn,s=s+h|0;r[s+24>>2]=u,r[s+28>>2]=f,r[s+16>>2]=u,r[s+20>>2]=f,r[s+8>>2]=u,r[s+12>>2]=f,r[s>>2]=u,r[s+4>>2]=f,s=s+32|0,c=c-32|0,c>>>0>31;);}return a}function ute(a,s){var c=0,u=0,f=0,h=0,m=0;u=-1,h=-1,f=-1;e:{t:{if((s|0)==-1)break t;m=1,h=r[r[r[a+4>>2]+12>>2]+(s<<2)>>2],c=s+1|0,c=(c>>>0)%3|0?c:s-2|0,(c|0)>=0&&(f=(c>>>0)/3|0,f=r[(r[r[a>>2]+96>>2]+ne(f,12)|0)+(c-ne(f,3)<<2)>>2]);n:{if((h|0)==-1||(m=0,c=((h>>>0)%3|0?-1:2)+h|0,(c|0)<0))break n;u=(c>>>0)/3|0,u=r[(r[r[a>>2]+96>>2]+ne(u,12)|0)+(c-ne(u,3)<<2)>>2]}if(c=-1,(u|0)!=(f|0))break e;f=-1;n:{if(s=((s>>>0)%3|0?-1:2)+s|0,(s|0)>=0){if(u=(s>>>0)/3|0,u=r[(r[r[a>>2]+96>>2]+ne(u,12)|0)+(s-ne(u,3)<<2)>>2],m)break t;break n}if(u=-1,!m)break n;break t}if(s=h+1|0,s=(s>>>0)%3|0?s:h-2|0,(s|0)<0)break t;c=r[r[a>>2]+96>>2],a=(s>>>0)/3|0,f=r[(c+ne(a,12)|0)+(s-ne(a,3)<<2)>>2]}c=(u|0)==(f|0)?h:-1}return c}function LTe(a){a=a|0;var s=0,c=0,u=0,f=0,h=0,m=0;s=r[a+4>>2],u=r[s>>2];e:{c=r[a+12>>2],c=r[c+56>>2]-r[c+52>>2]|0,f=c>>2;t:{if(f>>>0<=r[s+8>>2]-u>>2>>>0)break t;if((c|0)<0)break e;if(h=r[s+4>>2],c=Te(c),m=c+(f<<2)|0,f=h-u|0,h=f+c|0,(f|0)>0&&$e(c,u,f),r[s+8>>2]=m,r[s+4>>2]=h,r[s>>2]=c,!u)break t;W(u)}f=a+8|0,s=r[a+76>>2];t:{if(s){if(u=r[s>>2],(u|0)==r[s+4>>2])return 1;for(s=0;;){if(c=Lee(f,r[(s<<2)+u>>2]),!c)break t;if(h=r[a+76>>2],u=r[h>>2],s=s+1|0,!(s>>>0<r[h+4>>2]-u>>2>>>0))break}break t}if(c=1,a=r[r[a+12>>2]+64>>2],a=r[a+4>>2]-r[a>>2]|0,a>>>0<12)break t;for(a=(a>>2>>>0)/3|0,s=0;;){if(c=Lee(f,ne(s,3)),!c)break t;if(s=s+1|0,(a|0)==(s|0))break}}return c|0}qn(1336),Xe()}function zTe(a,s){a=a|0,s=s|0;var c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0;u=r[s+12>>2],y=u,c=r[s+20>>2],f=c,h=r[s+16>>2],m=h+4|0,c=m>>>0<4?c+1|0:c,A=r[s+8>>2];e:{if(A>>>0<m>>>0&(c|0)>=(u|0)|(c|0)>(u|0)||(T=r[s>>2],u=T+h|0,u=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),r[s+16>>2]=m,r[s+20>>2]=c,c=f,f=h+8|0,c=f>>>0<8?c+1|0:c,h=f,f=c,h>>>0>A>>>0&(c|0)>=(y|0)|(c|0)>(y|0))||(c=m+T|0,c=I[c|0]|I[c+1|0]<<8|(I[c+2|0]<<16|I[c+3|0]<<24),r[s+16>>2]=h,r[s+20>>2]=f,(c|0)<(u|0))||(r[a+16>>2]=c,r[a+12>>2]=u,s=(c>>31)-((u>>31)+(c>>>0<u>>>0)|0)|0,c=c-u|0,!s&c>>>0>2147483646|s)||(R=1,s=c+1|0,r[a+20>>2]=s,c=s>>>1|0,r[a+24>>2]=c,r[a+28>>2]=0-c,s&1))break e;r[a+24>>2]=c-1}return R|0}function BTe(a,s,c,u){a=a|0,s=s|0,c=c|0,u=u|0;var f=0,h=0,m=0;h=re+-64|0,re=h,f=h+8|0,zt[f+38>>1]=0,r[f>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0,r[f+16>>2]=0,r[f+20>>2]=0,r[f+24>>2]=0,r[f+28>>2]=0,D[f+29|0]=0,D[f+30|0]=0,D[f+31|0]=0,D[f+32|0]=0,D[f+33|0]=0,D[f+34|0]=0,D[f+35|0]=0,D[f+36|0]=0,r[f+16>>2]=0,r[f+20>>2]=0,r[f>>2]=s,r[f+8>>2]=c,r[f+12>>2]=0,s=h+48|0,Iee(s,a,f,u),r[a+24>>2]=r[h+48>>2],c=a+24|0;e:{if((c|0)==(s|0))break e;if(f=h+48|4,s=I[h+63|0],u=s<<24>>24,m=a+28|0,D[m+11|0]>=0){if((u|0)>=0){a=r[f+4>>2],r[m>>2]=r[f>>2],r[m+4>>2]=a,r[m+8>>2]=r[f+8>>2];break e}ZM(m,r[h+52>>2],r[h+56>>2]);break e}a=(u|0)<0,XM(m,a?r[h+52>>2]:f,a?r[h+56>>2]:s)}return D[h+63|0]<0&&W(r[h+52>>2]),re=h- -64|0,c|0}function UTe(a,s,c,u){a=a|0,s=s|0,c=c|0,u=u|0;var f=0,h=0,m=0;h=re+-64|0,re=h,f=h+8|0,zt[f+38>>1]=0,r[f>>2]=0,r[f+8>>2]=0,r[f+12>>2]=0,r[f+16>>2]=0,r[f+20>>2]=0,r[f+24>>2]=0,r[f+28>>2]=0,D[f+29|0]=0,D[f+30|0]=0,D[f+31|0]=0,D[f+32|0]=0,D[f+33|0]=0,D[f+34|0]=0,D[f+35|0]=0,D[f+36|0]=0,r[f+16>>2]=0,r[f+20>>2]=0,r[f>>2]=s,r[f+8>>2]=c,r[f+12>>2]=0,s=h+48|0,zee(s,a,f,u),r[a+24>>2]=r[h+48>>2],c=a+24|0;e:{if((c|0)==(s|0))break e;if(f=h+48|4,s=I[h+63|0],u=s<<24>>24,m=a+28|0,D[m+11|0]>=0){if((u|0)>=0){a=r[f+4>>2],r[m>>2]=r[f>>2],r[m+4>>2]=a,r[m+8>>2]=r[f+8>>2];break e}ZM(m,r[h+52>>2],r[h+56>>2]);break e}a=(u|0)<0,XM(m,a?r[h+52>>2]:f,a?r[h+56>>2]:s)}return D[h+63|0]<0&&W(r[h+52>>2]),re=h- -64|0,c|0}function FTe(a){a=a|0;var s=0,c=0,u=0,f=0,h=0,m=0;s=r[a+4>>2],u=r[s>>2];e:{c=r[a+12>>2],c=r[c+28>>2]-r[c+24>>2]|0,f=c>>2;t:{if(f>>>0<=r[s+8>>2]-u>>2>>>0)break t;if((c|0)<0)break e;if(h=r[s+4>>2],c=Te(c),m=c+(f<<2)|0,f=h-u|0,h=f+c|0,(f|0)>0&&$e(c,u,f),r[s+8>>2]=m,r[s+4>>2]=h,r[s>>2]=c,!u)break t;W(u)}f=a+8|0,s=r[a+76>>2];t:{if(s){if(u=r[s>>2],(u|0)==r[s+4>>2])return 1;for(s=0;;){if(c=Bee(f,r[(s<<2)+u>>2]),!c)break t;if(h=r[a+76>>2],u=r[h>>2],s=s+1|0,!(s>>>0<r[h+4>>2]-u>>2>>>0))break}break t}if(c=1,a=r[a+12>>2],a=r[a+4>>2]-r[a>>2]|0,a>>>0<12)break t;for(a=(a>>2>>>0)/3|0,s=0;;){if(c=Bee(f,ne(s,3)),!c)break t;if(s=s+1|0,(a|0)==(s|0))break}}return c|0}qn(1336),Xe()}function fte(a,s,c){var u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0;f=a+16|0,u=r[f>>2];e:{if(!u)break e;for(m=r[s>>2],s=f;h=(m|0)>r[u+16>>2],s=h?s:u,u=r[(h<<2)+u>>2],!!u;);if((s|0)==(f|0)|(m|0)<r[s+16>>2]||(u=r[s+24>>2],!u))break e;for(f=I[c+11|0],h=f<<24>>24<0,m=h?r[c>>2]:c,f=h?r[c+4>>2]:f,h=s+20|0;;){s=I[u+27|0],y=s<<24>>24<0,s=y?r[u+20>>2]:s,R=s>>>0<f>>>0;t:{n:{T=R?s:f;i:{if(T){A=u+16|0,y=y?r[A>>2]:A,A=Io(m,y,T);r:{if(!A){if(s>>>0<=f>>>0)break r;break t}if((A|0)<0)break t}if(s=Io(y,m,T),!s)break i;if((s|0)<0)break n;return VB(h,c)}if(s>>>0>f>>>0)break t}if(R)break n;return VB(h,c)}u=u+4|0}if(u=r[u>>2],!u)break}}return VB(a,c)}function VTe(a,s,c){a=a|0,s=s|0,c=c|0;var u=0,f=0,h=0,m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0;u=r[s>>2],s=r[s+4>>2],h=r[r[a+8>>2]+40>>2],z=Te((h|0)>=0?h:-1),m=1,y=s-u|0;e:{if((y|0)<=0||(s=0,m=0,u=0+r[c+20>>2]|0,A=r[c+16>>2],f=h+A|0,u=f>>>0<h>>>0?u+1|0:u,T=f,f=r[c+12>>2],T>>>0>Ue[c+8>>2]&(f|0)<=(u|0)|(u|0)>(f|0)))break e;for(R=y>>2,m=(R|0)>1?R:1;;){t:{if(f=$e(z,A+r[c>>2]|0,h),r[c+16>>2]=T,r[c+20>>2]=u,$e(r[r[r[a+8>>2]+64>>2]>>2]+s|0,f,h),N=N+1|0,(m|0)==(N|0))break t;if(s=s+h|0,u=U+r[c+20>>2]|0,A=r[c+16>>2],f=h+A|0,u=f>>>0<h>>>0?u+1|0:u,T=f,y=f,f=r[c+12>>2],(f|0)>=(u|0)&Ue[c+8>>2]>=y>>>0|(u|0)<(f|0))continue}break}m=(N|0)>=(R|0)}return W(z),m|0}function GTe(a,s){a=a|0,s=s|0,a=0;e:switch(s|0){case 0:return a=Te(20),r[a+12>>2]=-1,r[a+16>>2]=0,r[a+4>>2]=0,r[a+8>>2]=0,r[a>>2]=2260,a|0;case 1:return a=Te(24),r[a+12>>2]=-1,r[a+16>>2]=0,r[a+4>>2]=0,r[a+8>>2]=0,r[a>>2]=2260,r[a+20>>2]=0,r[a>>2]=2476,a|0;case 2:return a=Te(48),r[a+12>>2]=-1,r[a+16>>2]=0,r[a+4>>2]=0,r[a+8>>2]=0,r[a>>2]=2260,r[a+20>>2]=0,r[a>>2]=2476,r[a+32>>2]=0,r[a+36>>2]=0,r[a+28>>2]=-1,r[a+24>>2]=1140,r[a>>2]=11076,r[a+40>>2]=0,r[a+44>>2]=0,a|0;case 3:a=Te(32),r[a+12>>2]=-1,r[a+16>>2]=0,r[a+4>>2]=0,r[a+8>>2]=0,r[a>>2]=2260,r[a+20>>2]=0,r[a>>2]=2476,r[a+28>>2]=-1,r[a+24>>2]=1032,r[a>>2]=7056;break;default:break e}return a|0}function jTe(a,s,c,u){a=a|0,s=s|0,c=c|0,u=u|0;var f=0,h=0,m=0;f=re-32|0,re=f;e:{t:{if(h=pc(c),h>>>0<4294967280){n:{i:{if(h>>>0>=11){m=h+16&-16,a=Te(m),r[f+24>>2]=m|-2147483648,r[f+16>>2]=a,r[f+20>>2]=h;break i}if(D[f+27|0]=h,a=f+16|0,!h)break n}$e(a,c,h)}if(D[a+h|0]=0,c=pc(u),c>>>0>=4294967280)break t;n:{i:{if(c>>>0>=11){h=c+16&-16,a=Te(h),r[f+8>>2]=h|-2147483648,r[f>>2]=a,r[f+4>>2]=c;break i}if(D[f+11|0]=c,a=f,!c)break n}$e(a,u,c)}D[a+c|0]=0,c=r[s+4>>2],a=-1;n:{if(!c||(c=lte(c,f+16|0,f),a=-1,!c))break n;a=Ote(s,r[c+24>>2])}D[f+11|0]<0&&W(r[f>>2]),D[f+27|0]<0&&W(r[f+16>>2]),re=f+32|0;break e}mc(),Xe()}mc(),Xe()}return a|0}function HTe(a,s){a=a|0,s=s|0;var c=0,u=0,f=0,h=0,m=0;if(r[s>>2]=1,h=s+8|0,c=r[s+8>>2],u=r[s+12>>2]-c|0,u>>>0<=4294967291&&(e8(h,u+4|0),c=r[h>>2]),c=c+u|0,u=r[a+4>>2],D[c|0]=u,D[c+1|0]=u>>>8,D[c+2|0]=u>>>16,D[c+3|0]=u>>>24,c=r[a+8>>2],(c|0)!=r[a+12>>2])for(u=0;m=(u<<2)+c|0,c=r[s+8>>2],f=r[s+12>>2]-c|0,f>>>0<=4294967291&&(e8(h,f+4|0),c=r[h>>2]),c=c+f|0,f=r[m>>2],D[c|0]=f,D[c+1|0]=f>>>8,D[c+2|0]=f>>>16,D[c+3|0]=f>>>24,u=u+1|0,c=r[a+8>>2],u>>>0<r[a+12>>2]-c>>2>>>0;);c=r[s+12>>2],s=r[s+8>>2],c=c-s|0,c>>>0<=4294967291&&(e8(h,c+4|0),s=r[h>>2]),s=s+c|0,a=r[a+20>>2],D[s|0]=a,D[s+1|0]=a>>>8,D[s+2|0]=a>>>16,D[s+3|0]=a>>>24}function hc(a,s,c){var u=0,f=0,h=0,m=0;f=re-16|0,re=f,r[a+4>>2]=0;e:{t:{if(!s)break t;m=r[a+8>>2],u=m<<5;n:{if(u>>>0>=s>>>0){r[a+4>>2]=s;break n}if(r[f+8>>2]=0,r[f>>2]=0,r[f+4>>2]=0,(s|0)<0)break e;if(u>>>0<=1073741822?(h=s+31&-32,u=m<<6,u=u>>>0<h>>>0?h:u):u=2147483647,qd(f,u),h=r[a>>2],r[a>>2]=r[f>>2],r[f>>2]=h,u=r[a+4>>2],r[a+4>>2]=s,r[f+4>>2]=u,u=r[a+8>>2],r[a+8>>2]=r[f+8>>2],r[f+8>>2]=u,!h)break n;W(h)}if(h=s>>>5|0,u=h<<2,a=r[a>>2],I[c|0]){if(a=Ct(a,255,u),s=s&31,!s)break t;a=a+(h<<2)|0,r[a>>2]=r[a>>2]|-1>>>32-s;break t}if(a=Ct(a,0,u),s=s&31,!s)break t;a=a+(h<<2)|0,r[a>>2]=r[a>>2]&(-1>>>32-s^-1)}re=f+16|0;return}eu(),Xe()}function Wm(a,s){var c=0,u=0,f=0,h=0,m=0,y=0;if(u=r[a+4>>2],f=r[a+8>>2],u>>>0<f>>>0){r[u>>2]=r[s>>2],r[u+4>>2]=r[s+4>>2],r[u+8>>2]=r[s+8>>2],r[a+4>>2]=u+12;return}e:{if(h=r[a>>2],m=(u-h|0)/12|0,c=m+1|0,c>>>0<357913942){if(f=(f-h|0)/12|0,y=f<<1,c=f>>>0<178956970?c>>>0>y>>>0?c:y:357913941,c>>>0>=357913942)break e;if(y=ne(m,12),f=ne(c,12),m=Te(f),c=y+m|0,r[c>>2]=r[s>>2],r[c+4>>2]=r[s+4>>2],r[c+8>>2]=r[s+8>>2],s=c+12|0,(u|0)!=(h|0))for(;c=c-12|0,u=u-12|0,r[c>>2]=r[u>>2],r[c+4>>2]=r[u+4>>2],r[c+8>>2]=r[u+8>>2],(u|0)!=(h|0););r[a+8>>2]=f+m,r[a+4>>2]=s,r[a>>2]=c,h&&W(h);return}jt(),Xe()}qn(1336),Xe()}function $Te(a,s,c,u,f,h){a=a|0,s=s|0,c=c|0,u=u|0,f=f|0,h=h|0;var m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0;if(h=re-32|0,re=h,m=(f&1073741823)!=(f|0)?-1:f<<2,N=Ct(Te(m),0,m),m=N,A=r[m>>2],m=r[m+4>>2],R=r[s+4>>2],r[h+24>>2]=r[s>>2],r[h+28>>2]=R,r[h+8>>2]=A,r[h+12>>2]=m,A=a+8|0,FM(h+16|0,A,h+8|0,h+24|0),r[c>>2]=r[h+16>>2],r[c+4>>2]=r[h+20>>2],(u|0)>(f|0))for(R=0-f<<2,a=f;y=a<<2,m=y+c|0,T=m+R|0,z=r[T>>2],T=r[T+4>>2],y=s+y|0,U=r[y+4>>2],r[h+24>>2]=r[y>>2],r[h+28>>2]=U,r[h+8>>2]=z,r[h+12>>2]=T,FM(h+16|0,A,h+8|0,h+24|0),r[m>>2]=r[h+16>>2],r[m+4>>2]=r[h+20>>2],a=a+f|0,(u|0)>(a|0););return W(N),re=h+32|0,1}function WTe(a,s,c,u,f,h){a=a|0,s=s|0,c=c|0,u=u|0,f=f|0,h=h|0;var m=0,y=0,A=0,T=0,R=0,N=0,z=0,U=0;if(h=re-32|0,re=h,y=(f&1073741823)!=(f|0)?-1:f<<2,y=Ct(Te(y),0,y),m=r[s>>2],A=r[s+4>>2],R=r[y+4>>2],r[h+16>>2]=r[y>>2],r[h+20>>2]=R,r[h+8>>2]=m,r[h+12>>2]=A,A=a+8|0,BM(h+24|0,A,h+16|0,h+8|0),r[c>>2]=r[h+24>>2],r[c+4>>2]=r[h+28>>2],(u|0)>(f|0))for(R=0-f<<2,a=f;m=a<<2,T=m+s|0,z=r[T>>2],T=r[T+4>>2],m=c+m|0,N=m+R|0,U=r[N+4>>2],r[h+16>>2]=r[N>>2],r[h+20>>2]=U,r[h+8>>2]=z,r[h+12>>2]=T,BM(h+24|0,A,h+16|0,h+8|0),r[m>>2]=r[h+24>>2],r[m+4>>2]=r[h+28>>2],a=a+f|0,(u|0)>(a|0););return W(y),re=h+32|0,1}function YTe(a,s){a=a|0,s=s|0;var c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0;f=r[s+12>>2],c=r[s+20>>2],h=c,m=r[s+16>>2],u=m+4|0,c=u>>>0<4?c+1|0:c,y=r[s+8>>2],A=u;e:{if(y>>>0<u>>>0&(c|0)>=(f|0)|(c|0)>(f|0))break e;if(u=m+r[s>>2]|0,u=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),r[s+16>>2]=A,r[s+20>>2]=c,Ut[s+38>>1]<=513){if(c=h,h=m+8|0,c=h>>>0<8?c+1|0:c,h>>>0>y>>>0&(c|0)>=(f|0)|(c|0)>(f|0))break e;r[s+16>>2]=h,r[s+20>>2]=c}if(!(u&1))break e;s=Ms(u)^31,c=s-30|0,c>>>0>=4294967267&&(r[a+8>>2]=s+1,f=-2<<s,s=-2-f|0,r[a+16>>2]=s,r[a+12>>2]=f^-1,r[a+24>>2]=(s|0)/2,At[a+20>>2]=_e(2)/_e(s|0)),T=c>>>0>4294967266}return T|0}function Nv(a,s,c){var u=0,f=0,h=0,m=0,y=0;if(h=c-s|0,m=h>>2,u=r[a+8>>2],f=r[a>>2],m>>>0<=u-f>>2>>>0){if(h=r[a+4>>2],u=h-f|0,y=u>>2,u=m>>>0>y>>>0?s+u|0:c,(u|0)!=(s|0))for(;r[f>>2]=r[s>>2],f=f+4|0,s=s+4|0,(u|0)!=(s|0););if(m>>>0>y>>>0){s=c-u|0,(s|0)>0&&(h=$e(h,u,s)+s|0),r[a+4>>2]=h;return}r[a+4>>2]=f;return}f&&(r[a+4>>2]=f,W(f),r[a+8>>2]=0,r[a>>2]=0,r[a+4>>2]=0,u=0);e:{if((h|0)<0||(c=u>>1,c=u>>>0<2147483644?c>>>0<m>>>0?m:c:1073741823,c>>>0>=1073741824))break e;f=c<<2,c=Te(f),r[a>>2]=c,r[a+4>>2]=c,r[a+8>>2]=c+f,h&&(c=$e(c,s,h)+h|0),r[a+4>>2]=c;return}jt(),Xe()}function qTe(a,s){a=a|0,s=s|0;var c=0,u=0,f=0,h=0,m=0,y=0;h=1;e:{if((pt[r[r[s>>2]+20>>2]](s)|0)<=0)break e;for(;;){if(h=0,c=Ute(r[r[a+4>>2]+4>>2],pt[r[r[s>>2]+24>>2]](s,m)|0),(c|0)==-1)break e;f=r[a+4>>2];t:{if(I[f+36|0]<=1){if(pt[r[r[s>>2]+28>>2]](s,r[r[r[f+4>>2]+8>>2]+(c<<2)>>2])|0)break t;break e}u=0;n:{if((c|0)<0||(y=r[f+4>>2],r[y+12>>2]-r[y+8>>2]>>2<=(c|0)))break n;u=r[r[f+8>>2]+(r[r[f+20>>2]+(c<<2)>>2]<<2)>>2],u=pt[r[r[u>>2]+32>>2]](u,c)|0}if(!u||!(pt[r[r[s>>2]+28>>2]](s,u)|0))break e}if(h=1,m=m+1|0,!((pt[r[r[s>>2]+20>>2]](s)|0)>(m|0)))break}}return h|0}function XTe(a,s,c){a=a|0,s=s|0,c=c|0;var u=0,f=0,h=0,m=0;a=re-32|0,re=a,r[a+24>>2]=0,r[a+28>>2]=0;e:{if(u=pc(c),u>>>0<4294967280){t:{n:{if(u>>>0>=11){h=u+16&-16,f=Te(h),r[a+16>>2]=h|-2147483648,r[a+8>>2]=f,r[a+12>>2]=u;break n}if(D[a+19|0]=u,f=a+8|0,!u)break t}$e(f,c,u)}D[u+f|0]=0,c=s+4|0,s=qm(s,a+8|0);t:{if((c|0)==(s|0)||(c=r[s+32>>2],s=r[s+28>>2],(c-s|0)!=8))break t;c=I[s+4|0]|I[s+5|0]<<8|(I[s+6|0]<<16|I[s+7|0]<<24),r[a+24>>2]=I[s|0]|I[s+1|0]<<8|(I[s+2|0]<<16|I[s+3|0]<<24),r[a+28>>2]=c}m=Zc[a+24>>3],D[a+19|0]<0&&W(r[a+8>>2]),re=a+32|0;break e}mc(),Xe()}return+m}function dte(a){var s=0,c=0,u=0,f=0;c=1,u=r[a+140>>2];e:{if((u|0)<=0)break e;for(s=u<<4,c=Te((u|0)!=(u&268435455)?-1:s|4),r[c>>2]=u,c=c+4|0,u=c+s|0,s=c;r[s>>2]=0,r[s+4>>2]=0,D[s+5|0]=0,D[s+6|0]=0,D[s+7|0]=0,D[s+8|0]=0,D[s+9|0]=0,D[s+10|0]=0,D[s+11|0]=0,D[s+12|0]=0,s=s+16|0,(u|0)!=(s|0););if(f=r[a+136>>2],r[a+136>>2]=c,f){if(u=f-4|0,c=r[u>>2],c)for(s=(c<<4)+f|0;s=s-16|0,(f|0)!=(s|0););W(u)}if(c=1,r[a+140>>2]<=0)break e;for(s=0;;){if(c=sr(r[a+136>>2]+(s<<4)|0,a),!c)break e;if(s=s+1|0,!((s|0)<r[a+140>>2]))break}}return c}function Ym(a,s){var c=0,u=0,f=0,h=0,m=0;e:{if(r[a+64>>2]||(c=Te(32),r[c+16>>2]=0,r[c+20>>2]=0,r[c+8>>2]=0,r[c>>2]=0,r[c+4>>2]=0,r[c+24>>2]=0,r[c+28>>2]=0,u=r[a+64>>2],r[a+64>>2]=c,!u))break e;c=r[u>>2],c&&(r[u+4>>2]=c,W(c)),W(u)}return f=r[a+64>>2],c=r[a+28>>2]-1|0,c>>>0<=10?u=r[(c<<2)+13616>>2]:u=-1,c=ne(u,D[a+24|0]),u=c,m=c>>31,f=Cte(f,0,rt(c,m,s,0),nn),f&&(c=r[a+64>>2],r[a>>2]=c,h=r[c+20>>2],r[a+8>>2]=r[c+16>>2],r[a+12>>2]=h,h=r[c+24>>2],c=r[c+28>>2],r[a+48>>2]=0,r[a+52>>2]=0,r[a+40>>2]=u,r[a+44>>2]=m,r[a+16>>2]=h,r[a+20>>2]=c,r[a+80>>2]=s),f}function ZTe(a,s){a=a|0,s=s|0;var c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0;h=r[s+12>>2],c=r[s+20>>2],f=c,m=r[s+16>>2],u=m+4|0,c=u>>>0<4?c+1|0:c,y=r[s+8>>2],A=u;e:{if(y>>>0<u>>>0&(c|0)>=(h|0)|(c|0)>(h|0)||(u=m+r[s>>2]|0,u=I[u|0]|I[u+1|0]<<8|(I[u+2|0]<<16|I[u+3|0]<<24),r[s+16>>2]=A,r[s+20>>2]=c,c=f,f=m+8|0,c=f>>>0<8?c+1|0:c,f>>>0>y>>>0&(c|0)>=(h|0)|(c|0)>(h|0))||(r[s+16>>2]=f,r[s+20>>2]=c,!(u&1))||(s=Ms(u)^31,s-30>>>0<4294967267))break e;T=1,r[a+8>>2]=s+1,c=-2<<s,s=-2-c|0,r[a+16>>2]=s,r[a+12>>2]=c^-1,r[a+24>>2]=(s|0)/2,At[a+20>>2]=_e(2)/_e(s|0)}return T|0}function hte(a,s,c){var u=0,f=0,h=0,m=0,y=0,A=0,T=0;h=a+4|0;e:{if(a=r[a+4>>2],a)for(f=I[c+11|0],u=f<<24>>24<0,A=u?r[c>>2]:c,f=u?r[c+4>>2]:f;;){c=I[a+27|0],u=c<<24>>24<0,c=u?r[a+20>>2]:c,T=c>>>0<f>>>0;t:{n:{i:{r:{s:{y=T?c:f;a:{if(y){if(m=a+16|0,u=u?r[m>>2]:m,m=Io(A,u,y),!m){if(c>>>0>f>>>0)break a;break s}if((m|0)>=0)break s;break a}if(c>>>0<=f>>>0)break r}if(c=r[a>>2],c)break t;return r[s>>2]=a,a}if(c=Io(u,A,y),c)break i}if(T)break n;break e}if((c|0)>=0)break e}if(h=a+4|0,c=r[a+4>>2],!c)break e;a=h}h=a,a=c}return r[s>>2]=h,h}return r[s>>2]=a,h}function HM(a,s){var c=0;return c=r[s+4>>2],r[a>>2]=r[s>>2],r[a+4>>2]=c,c=r[s+60>>2],r[a+56>>2]=r[s+56>>2],r[a+60>>2]=c,c=r[s+52>>2],r[a+48>>2]=r[s+48>>2],r[a+52>>2]=c,c=r[s+44>>2],r[a+40>>2]=r[s+40>>2],r[a+44>>2]=c,c=r[s+36>>2],r[a+32>>2]=r[s+32>>2],r[a+36>>2]=c,c=r[s+28>>2],r[a+24>>2]=r[s+24>>2],r[a+28>>2]=c,c=r[s+20>>2],r[a+16>>2]=r[s+16>>2],r[a+20>>2]=c,c=r[s+12>>2],r[a+8>>2]=r[s+8>>2],r[a+12>>2]=c,r[a+88>>2]=0,r[a+64>>2]=0,r[a+68>>2]=0,r[a+72>>2]=0,r[a+76>>2]=0,D[a+77|0]=0,D[a+78|0]=0,D[a+79|0]=0,D[a+80|0]=0,D[a+81|0]=0,D[a+82|0]=0,D[a+83|0]=0,D[a+84|0]=0,a}function qm(a,s){var c=0,u=0,f=0,h=0,m=0,y=0,A=0,T=0;m=a+4|0,a=r[a+4>>2];e:{t:{if(!a)break t;for(u=I[s+11|0],c=u<<24>>24<0,A=c?r[s>>2]:s,f=c?r[s+4>>2]:u,c=m;;){s=I[a+27|0],T=s<<24>>24<0,y=T?r[a+20>>2]:s,h=y>>>0>f>>>0,u=h?f:y;n:{if(u&&(s=a+16|0,s=Io(T?r[s>>2]:s,A,u),s))break n;s=f>>>0>y>>>0?-1:h}if(c=(s|0)<0?c:a,a=r[(s>>>29&4)+a>>2],!a)break}if((c|0)==(m|0))break t;a=I[c+27|0],h=a<<24>>24<0;n:{if(u=h?r[c+20>>2]:a,s=u>>>0<f>>>0?u:f,s&&(a=c+16|0,a=Io(A,h?r[a>>2]:a,s),a))break n;if(u>>>0>f>>>0)break t;break e}if((a|0)>=0)break e}c=m}return c}function QTe(a,s,c,u,f){if(a=a|0,s=s|0,c=c|0,u=u|0,f=f|0,W0(a,r[s+8>>2],f)){r[s+28>>2]==1|r[s+4>>2]!=(c|0)||(r[s+28>>2]=u);return}e:{if(W0(a,r[s>>2],f)){if(!(r[s+16>>2]!=(c|0)&r[s+20>>2]!=(c|0))){if((u|0)!=1)break e;r[s+32>>2]=1;return}r[s+32>>2]=u;t:{if(r[s+44>>2]==4)break t;if(zt[s+52>>1]=0,a=r[a+8>>2],pt[r[r[a>>2]+20>>2]](a,s,c,c,1,f),I[s+53|0]){if(r[s+44>>2]=3,!I[s+52|0])break t;break e}r[s+44>>2]=4}if(r[s+20>>2]=c,r[s+40>>2]=r[s+40>>2]+1,r[s+36>>2]!=1|r[s+24>>2]!=2)break e;D[s+54|0]=1;return}a=r[a+8>>2],pt[r[r[a>>2]+24>>2]](a,s,c,u,f)}}function Lv(a,s,c){var u=0,f=0,h=0,m=0;e:{t:{if(!s)break t;if(Ut[a+38>>1]<=513){if(f=r[a+12>>2],s=r[a+20>>2],h=r[a+16>>2],m=h+8|0,s=m>>>0<8?s+1|0:s,m>>>0>Ue[a+8>>2]&(s|0)>=(f|0)|(s|0)>(f|0))break e;s=h+r[a>>2]|0,u=I[s+4|0]|I[s+5|0]<<8|(I[s+6|0]<<16|I[s+7|0]<<24),r[c>>2]=I[s|0]|I[s+1|0]<<8|(I[s+2|0]<<16|I[s+3|0]<<24),r[c+4>>2]=u,s=r[a+20>>2],c=r[a+16>>2]+8|0,s=c>>>0<8?s+1|0:s,r[a+16>>2]=c,r[a+20>>2]=s;break t}if(!bte(1,c,a))break e}D[a+36|0]=1,r[a+32>>2]=0,s=r[a+16>>2],c=s+r[a>>2]|0,r[a+24>>2]=c,u=a,a=r[a+8>>2],r[u+28>>2]=c+(a-s|0),u=1}return u}function zv(a,s,c){var u=0,f=0,h=0,m=0,y=0,A=0,T=0;r[a+8>>2]=0,r[a>>2]=0,r[a+4>>2]=0;e:{t:{if(s){if(s>>>0>=357913942)break t;u=ne(s,12),s=Te(u),r[a>>2]=s,r[a+4>>2]=s,f=s+u|0,r[a+8>>2]=f,h=r[c>>2],c=r[c+4>>2]-h|0;n:{if(!c){c=s,s=u-12|0,Ct(c,0,(s-((s>>>0)%12|0)|0)+12|0);break n}if((c|0)<0)break e;for(m=c>>2<<2,y=c>>>2<<2;r[s+8>>2]=0,r[s>>2]=0,r[s+4>>2]=0,u=Te(c),r[s>>2]=u,r[s+4>>2]=u,r[s+8>>2]=u+m,A=s,T=$e(u,h,c)+y|0,r[A+4>>2]=T,s=s+12|0,(f|0)!=(s|0););}r[a+4>>2]=f}return}jt(),Xe()}r[s+8>>2]=0,r[s>>2]=0,r[s+4>>2]=0,jt(),Xe()}function pte(a,s){a=a|0,s=s|0;var c=0,u=0,f=0,h=0,m=0,y=0;h=Te(64),c=Te(12),r[c+8>>2]=r[r[a+4>>2]+80>>2],r[c>>2]=13248,r[c+4>>2]=0,h=kte(h,c);e:{t:{if((s|0)<0){c=h;break t}y=a+8|0,c=r[a+12>>2],f=r[a+8>>2],m=c-f>>2;n:{if((m|0)>(s|0))break n;if(u=s+1|0,s>>>0>=m>>>0){jM(y,u-m|0);break n}if(u>>>0>=m>>>0)break n;if(f=f+(u<<2)|0,(f|0)!=(c|0))for(;c=c-4|0,u=r[c>>2],r[c>>2]=0,u&&pt[r[r[u>>2]+4>>2]](u),(c|0)!=(f|0););r[a+12>>2]=f}if(a=r[y>>2]+(s<<2)|0,c=r[a>>2],r[a>>2]=h,!c)break e}pt[r[r[c>>2]+4>>2]](c)}return(s^-1)>>>31|0}function mte(a,s){var c=0,u=0,f=0,h=0;u=re-16|0,re=u,r[u+12>>2]=s,c=re-208|0,re=c,r[c+204>>2]=s,s=c+160|0,Ct(s,0,40),r[c+200>>2]=r[c+204>>2];e:{if((Pee(0,a,c+200|0,c+80|0,s)|0)<0)break e;h=r[3885]>=0,s=r[3866],r[3884]<=0&&(r[3866]=s&-33);t:{n:{i:{if(!r[3878]){r[3878]=80,r[3873]=0,r[3870]=0,r[3871]=0,f=r[3877],r[3877]=c;break i}if(r[3870])break n}if(Ite(15464))break t}Pee(15464,a,c+200|0,c+80|0,c+160|0)}if(f&&(pt[r[3875]](15464,0,0)|0,r[3878]=0,r[3877]=f,r[3873]=0,r[3870]=0,r[3871]=0),r[3866]=r[3866]|s&32,!h)break e}re=c+208|0,re=u+16|0}function Wi(a,s,c){var u=0,f=0,h=0,m=0,y=0;if(h=c-s|0,m=h>>2,u=r[a+8>>2],f=r[a>>2],m>>>0<=u-f>>2>>>0){if(u=r[a+4>>2]-f|0,h=u>>2,u=h>>>0<m>>>0?s+u|0:c,y=u-s|0,y&&Hf(f,s,y),h>>>0<m>>>0){s=r[a+4>>2],c=c-u|0,(c|0)>0&&(s=$e(s,u,c)+c|0),r[a+4>>2]=s;return}r[a+4>>2]=f+y;return}f&&(r[a+4>>2]=f,W(f),r[a+8>>2]=0,r[a>>2]=0,r[a+4>>2]=0,u=0);e:{if((h|0)<0||(c=u>>1,c=u>>>0<2147483644?c>>>0<m>>>0?m:c:1073741823,c>>>0>=1073741824))break e;f=c<<2,c=Te(f),r[a>>2]=c,r[a+4>>2]=c,r[a+8>>2]=c+f,h&&(c=$e(c,s,h)+h|0),r[a+4>>2]=c;return}jt(),Xe()}function BB(a,s,c){var u=0,f=0,h=0,m=0;e:{if((s|c)>=0){t:{if(s>>>0>1431655765)break t;u=ne(s,3),DB(a,u,13680),DB(a+12|0,u,13684),u=r[a+24>>2];n:{if(r[a+32>>2]-u>>2>>>0>=c>>>0)break n;if(c>>>0>=1073741824)break e;if(f=r[a+28>>2],h=c<<2,c=Te(h),h=c+h|0,f=f-u|0,m=f+c|0,(f|0)>0&&$e(c,u,f),r[a+32>>2]=h,r[a+28>>2]=m,r[a+24>>2]=c,!u)break n;W(u)}if(r[a+80>>2]=0,r[a+84>>2]=0,c=r[a+76>>2],r[a+76>>2]=0,c&&W(c),r[a+68>>2]=0,r[a+72>>2]=0,c=a- -64|0,a=r[c>>2],r[c>>2]=0,!a)break t;W(a)}a=s>>>0<1431655766}else a=0;return a}qn(1336),Xe()}function Bv(a){var s=0,c=0,u=0,f=0,h=0;u=r[a+8>>2];e:{if(I[u+84|0]||(s=r[a+16>>2],!s|!I[s+84|0]))break e;c=r[u+72>>2],f=r[u+68>>2],D[s+84|0]=0,c=c-f>>2,h=r[s+68>>2],f=r[s+72>>2]-h>>2;t:{if(c>>>0>f>>>0){ea(s+68|0,c-f|0,2344),u=r[a+8>>2];break t}if(c>>>0>=f>>>0)break t;r[s+72>>2]=h+(c<<2)}if(s=I[u+84|0],s||(c=r[u+68>>2],(c|0)==r[u+72>>2]))break e;if(f=r[r[a+16>>2]+68>>2],!s){for(s=0;h=s<<2,r[h+f>>2]=r[c+h>>2],s=s+1|0,c=r[u+68>>2],s>>>0<r[u+72>>2]-c>>2>>>0;);break e}r[f>>2]=0}return r[a+16>>2]}function UB(a,s){a=a|0,s=s|0;var c=0,u=0,f=0,h=0;e:{if(c=r[a+216>>2],(c|0)==r[a+220>>2])break e;for(;;){t:{if(c=r[ne(f,144)+c>>2],(c|0)<0||(u=r[a+4>>2],h=r[u+8>>2],(c|0)>=r[u+12>>2]-h>>2)||(u=0,c=r[(c<<2)+h>>2],(pt[r[r[c>>2]+24>>2]](c)|0)<=0))break t;for(;;){if((pt[r[r[c>>2]+20>>2]](c,u)|0)!=(s|0)){if(u=u+1|0,(pt[r[r[c>>2]+24>>2]](c)|0)>(u|0))continue;break t}break}a=r[a+216>>2]+ne(f,144)|0,f=I[a+100|0]?a+4|0:0;break e}if(f=f+1|0,c=r[a+216>>2],!(f>>>0<(r[a+220>>2]-c|0)/144>>>0))break}return 0}return f|0}function $A(a,s){var c=0,u=0,f=0,h=0,m=0,y=0;if(c=r[a+4>>2],(c|0)!=r[a+8>>2]){u=r[s+4>>2],r[c>>2]=r[s>>2],r[c+4>>2]=u,r[c+8>>2]=r[s+8>>2],r[a+4>>2]=c+12;return}e:{if(h=r[a>>2],m=c-h|0,u=(m|0)/12|0,c=u+1|0,c>>>0<357913942){if(f=u<<1,f=u>>>0<178956970?c>>>0>f>>>0?c:f:357913941,f){if(f>>>0>=357913942)break e;c=Te(ne(f,12))}else c=0;u=c+ne(u,12)|0,y=r[s+4>>2],r[u>>2]=r[s>>2],r[u+4>>2]=y,r[u+8>>2]=r[s+8>>2],s=u+ne((m|0)/-12|0,12)|0,(m|0)>0&&$e(s,h,m),r[a+8>>2]=c+ne(f,12),r[a+4>>2]=u+12,r[a>>2]=s,h&&W(h);return}jt(),Xe()}qn(1336),Xe()}function KTe(a,s){a=a|0,s=s|0;var c=0,u=0,f=0,h=0,m=0;c=r[a+60>>2];e:{if(!c||(r[c+4>>2]=a+48,!(pt[r[r[c>>2]+12>>2]](c)|0)))break e;t:{if(c=pt[r[r[a>>2]+24>>2]](a)|0,(c|0)<=0)break t;for(;;){n:{if(h=r[(pt[r[r[a>>2]+28>>2]](a)|0)+4>>2],m=pt[r[r[a>>2]+20>>2]](a,u)|0,f=r[a+60>>2],!(pt[r[r[f>>2]+8>>2]](f,r[r[h+8>>2]+(m<<2)>>2])|0))break n;if(u=u+1|0,(c|0)!=(u|0))continue;break t}break}return 0}if(u=0,!(pt[r[r[a>>2]+36>>2]](a,s)|0)||!(pt[r[r[a>>2]+40>>2]](a,s)|0))break e;u=pt[r[r[a>>2]+44>>2]](a)|0}return u|0}function gte(a){a=a|0;var s=0,c=0,u=0;if(r[a>>2]=2156,s=r[a+60>>2],s){if(c=r[a- -64>>2],(s|0)==(c|0))c=s;else{for(;c=c-4|0,u=r[c>>2],r[c>>2]=0,u&&ha(u),(s|0)!=(c|0););c=r[a+60>>2]}r[a+64>>2]=s,W(c)}if(s=r[a+48>>2],s&&(r[a+52>>2]=s,W(s)),s=r[a+36>>2],s){if(c=r[a+40>>2],(s|0)==(c|0))c=s;else{for(;c=c-24|0,pt[r[r[c>>2]>>2]](c)|0,(s|0)!=(c|0););c=r[a+36>>2]}r[a+40>>2]=s,W(c)}return r[a>>2]=2012,s=r[a+16>>2],s&&(r[a+20>>2]=s,W(s)),s=r[a+4>>2],s&&(r[a+8>>2]=s,W(s)),a|0}function Uv(a){var s=0,c=0,u=0,f=0;if(c=r[a+132>>2],c){if(s=r[a+136>>2],(c|0)==(s|0))s=c;else{for(;f=s-12|0,u=r[f>>2],u&&(r[s-8>>2]=u,W(u)),s=f,(c|0)!=(s|0););s=r[a+132>>2]}r[a+136>>2]=c,W(s)}if(c=r[a+120>>2],c){if(s=r[a+124>>2],(c|0)==(s|0))s=c;else{for(;f=s-12|0,u=r[f>>2],u&&(r[s-8>>2]=u,W(u)),s=f,(c|0)!=(s|0););s=r[a+120>>2]}r[a+124>>2]=c,W(s)}s=r[a+108>>2],s&&(r[a+112>>2]=s,W(s)),s=r[a+96>>2],s&&(r[a+100>>2]=s,W(s)),Y0(a+76|0),Y0(a+56|0),Y0(a+36|0),Y0(a+16|0)}function vte(a,s,c,u,f,h,m){var y=0,A=0,T=0;if(y=re-16|0,re=y,(s^-1)-17>>>0>=c>>>0){I[a+11|0]>>>7|0?T=r[a>>2]:T=a;e:{if(s>>>0<2147483623){r[y+8>>2]=s<<1,r[y+12>>2]=s+c,c=re-16|0,re=c,re=c+16|0,c=y+8|0,A=y+12|0,c=r[(Ue[A>>2]<Ue[c>>2]?c:A)>>2],c>>>0>=11?(A=c+16&-16,c=A-1|0,c=(c|0)==11?A:c):c=10;break e}c=-18}A=c+1|0,c=Te(A),h&&Qv(c,m,h),u=u-f|0,u&&Qv(c+h|0,f+T|0,u),(s|0)!=10&&W(T),r[a>>2]=c,r[a+8>>2]=A|-2147483648,s=a,a=u+h|0,r[s+4>>2]=a,D[y+7|0]=0,D[a+c|0]=I[y+7|0],re=y+16|0;return}mc(),Xe()}function Xd(a){var s=0,c=0,u=0,f=0;if(c=r[a+640>>2],c){if(s=r[a+644>>2],(c|0)==(s|0))s=c;else{for(;f=s-12|0,u=r[f>>2],u&&(r[s-8>>2]=u,W(u)),s=f,(c|0)!=(s|0););s=r[a+640>>2]}r[a+644>>2]=c,W(s)}if(c=r[a+628>>2],c){if(s=r[a+632>>2],(c|0)==(s|0))s=c;else{for(;f=s-12|0,u=r[f>>2],u&&(r[s-8>>2]=u,W(u)),s=f,(c|0)!=(s|0););s=r[a+628>>2]}r[a+632>>2]=c,W(s)}s=r[a+616>>2],s&&(r[a+620>>2]=s,W(s)),s=r[a+604>>2],s&&(r[a+608>>2]=s,W(s)),Y0(a+584|0),Y0(a+564|0),Y0(a+544|0)}function Fv(a){var s=0,c=0,u=0,f=0;if(c=r[a+128>>2],c){if(s=r[a+132>>2],(c|0)==(s|0))s=c;else{for(;f=s-12|0,u=r[f>>2],u&&(r[s-8>>2]=u,W(u)),s=f,(c|0)!=(s|0););s=r[a+128>>2]}r[a+132>>2]=c,W(s)}if(c=r[a+116>>2],c){if(s=r[a+120>>2],(c|0)==(s|0))s=c;else{for(;f=s-12|0,u=r[f>>2],u&&(r[s-8>>2]=u,W(u)),s=f,(c|0)!=(s|0););s=r[a+116>>2]}r[a+120>>2]=c,W(s)}s=r[a+104>>2],s&&(r[a+108>>2]=s,W(s)),s=r[a+92>>2],s&&(r[a+96>>2]=s,W(s)),Y0(a+72|0),Y0(a+52|0),Y0(a+32|0)}function FB(a,s){a=a|0,s=s|0;var c=0,u=0,f=0,h=0;if(c=r[a+216>>2],(c|0)!=r[a+220>>2])for(;;){e:{if(c=r[ne(f,144)+c>>2],(c|0)<0||(u=r[a+4>>2],h=r[u+8>>2],(c|0)>=r[u+12>>2]-h>>2)||(u=0,c=r[(c<<2)+h>>2],(pt[r[r[c>>2]+24>>2]](c)|0)<=0))break e;for(;;){if((pt[r[r[c>>2]+20>>2]](c,u)|0)!=(s|0)){if(u=u+1|0,(pt[r[r[c>>2]+24>>2]](c)|0)>(u|0))continue;break e}break}return(r[a+216>>2]+ne(f,144)|0)+104|0}if(f=f+1|0,c=r[a+216>>2],!(f>>>0<(r[a+220>>2]-c|0)/144>>>0))break}return a+184|0}function JTe(a,s,c){a=a|0,s=s|0,c=c|0;var u=0,f=0,h=0;a=re-32|0,re=a;e:{if(u=pc(c),u>>>0<4294967280){t:{n:{if(u>>>0>=11){h=u+16&-16,f=Te(h),r[a+24>>2]=h|-2147483648,r[a+16>>2]=f,r[a+20>>2]=u;break n}if(D[a+27|0]=u,f=a+16|0,!u)break t}$e(f,c,u)}D[u+f|0]=0,D[a+4|0]=0,r[a>>2]=1701667182,D[a+11|0]=4,u=r[s+4>>2],c=-1;t:{if(!u||(u=lte(u,a,a+16|0),c=-1,!u))break t;c=Ote(s,r[u+24>>2])}s=c,D[a+11|0]<0&&W(r[a>>2]),D[a+27|0]<0&&W(r[a+16>>2]),re=a+32|0;break e}mc(),Xe()}return s|0}function e6e(a,s,c){a=a|0,s=s|0,c=c|0;var u=0,f=0,h=0;u=re-16|0,re=u,r[u+12>>2]=0;e:{if(f=pc(c),f>>>0<4294967280){t:{n:{if(f>>>0>=11){h=f+16&-16,a=Te(h),r[u+8>>2]=h|-2147483648,r[u>>2]=a,r[u+4>>2]=f;break n}if(D[u+11|0]=f,a=u,!f)break t}$e(a,c,f)}D[a+f|0]=0,a=qm(s,u);t:{if((a|0)==(s+4|0)||(s=r[a+32>>2],a=r[a+28>>2],(s-a|0)!=4))break t;r[u+12>>2]=I[a|0]|I[a+1|0]<<8|(I[a+2|0]<<16|I[a+3|0]<<24)}a=r[u+12>>2],D[u+11|0]<0&&W(r[u>>2]),re=u+16|0;break e}mc(),Xe()}return a|0}function _te(a,s){if(!a)return 0;e:{t:{if(a){if(s>>>0<=127)break t;n:{if(!r[r[4227]>>2]){if((s&-128)==57216)break t;break n}if(s>>>0<=2047){D[a+1|0]=s&63|128,D[a|0]=s>>>6|192,a=2;break e}if(!((s&-8192)!=57344&s>>>0>=55296)){D[a+2|0]=s&63|128,D[a|0]=s>>>12|224,D[a+1|0]=s>>>6&63|128,a=3;break e}if(s-65536>>>0<=1048575){D[a+3|0]=s&63|128,D[a|0]=s>>>18|240,D[a+2|0]=s>>>6&63|128,D[a+1|0]=s>>>12&63|128,a=4;break e}}r[4190]=25,a=-1}else a=1;break e}D[a|0]=s,a=1}return a}function $M(a){a=a|0;var s=0,c=0,u=0;if(r[a>>2]=13756,s=r[a+68>>2],s&&(r[a+72>>2]=s,W(s)),s=r[a+56>>2],s&&(r[a+60>>2]=s,W(s)),s=r[a+44>>2],s&&(r[a+48>>2]=s,W(s)),s=r[a+32>>2],s&&(r[a+36>>2]=s,W(s)),s=r[a+20>>2],s&&(r[a+24>>2]=s,W(s)),u=r[a+8>>2],u){if(c=r[a+12>>2],(c|0)==(u|0))s=u;else{for(;c=c-4|0,s=r[c>>2],r[c>>2]=0,s&&ha(s),(u|0)!=(c|0););s=r[a+8>>2]}r[a+12>>2]=u,W(s)}return s=r[a+4>>2],r[a+4>>2]=0,s&&WB(s),a|0}function Xr(a,s){var c=0,u=0,f=0,h=0,m=0,y=0,A=0;if(f=r[a+8>>2],c=r[a+4>>2],f-c>>2>>>0>=s>>>0){s&&(s=s<<2,c=Ct(c,0,s)+s|0),r[a+4>>2]=c;return}e:{if(h=r[a>>2],m=c-h|0,y=m>>2,u=y+s|0,u>>>0<1073741824){if(c=0,f=f-h|0,A=f>>1,u=f>>>0<2147483644?u>>>0>A>>>0?u:A:1073741823,u){if(u>>>0>=1073741824)break e;c=Te(u<<2)}s=s<<2,s=Ct((y<<2)+c|0,0,s)+s|0,(m|0)>0&&$e(c,h,m),r[a+8>>2]=(u<<2)+c,r[a+4>>2]=s,r[a>>2]=c,h&&W(h);return}jt(),Xe()}qn(1336),Xe()}function Xm(a,s){var c=0,u=0,f=0,h=0,m=0,y=0,A=0;if(f=r[a+8>>2],c=r[a+4>>2],f-c>>3>>>0>=s>>>0){s&&(s=s<<3,c=Ct(c,0,s)+s|0),r[a+4>>2]=c;return}e:{if(h=r[a>>2],m=c-h|0,y=m>>3,u=y+s|0,u>>>0<536870912){if(c=0,f=f-h|0,A=f>>2,u=f>>>0<2147483640?u>>>0>A>>>0?u:A:536870911,u){if(u>>>0>=536870912)break e;c=Te(u<<3)}s=s<<3,s=Ct((y<<3)+c|0,0,s)+s|0,(m|0)>0&&$e(c,h,m),r[a+8>>2]=(u<<3)+c,r[a+4>>2]=s,r[a>>2]=c,h&&W(h);return}jt(),Xe()}qn(1336),Xe()}function Op(a,s){var c=0,u=0,f=0,h=0,m=0,y=0;if(f=r[a>>2],a=r[f+4>>2],c=r[f+8>>2],a>>>0<c>>>0){r[a>>2]=r[s>>2],r[f+4>>2]=a+4;return}e:{if(h=r[f>>2],m=a-h|0,u=m>>2,a=u+1|0,a>>>0<1073741824){if(y=u<<2,c=c-h|0,u=c>>1,c=c>>>0<2147483644?a>>>0>u>>>0?a:u:1073741823,c){if(c>>>0>=1073741824)break e;a=Te(c<<2)}else a=0;u=y+a|0,r[u>>2]=r[s>>2],(m|0)>0&&$e(a,h,m),r[f+8>>2]=a+(c<<2),r[f+4>>2]=u+4,r[f>>2]=a,h&&W(h);return}jt(),Xe()}qn(1336),Xe()}function VB(a,s){var c=0,u=0,f=0,h=0;c=a+4|0,a=qm(a,s);e:{if((c|0)==(a|0))break e;for(s=D[a+39|0]<0?r[a+28>>2]:a+28|0;a=s,s=a+1|0,c=D[a|0],!!((c|0)==32|c-9>>>0<5););t:{n:{i:switch(c=D[a|0],c-43|0){case 0:break n;case 2:break i;default:break t}f=1}c=D[s|0],a=s}if(c-48>>>0<10)for(;u=(ne(u,10)-D[a|0]|0)+48|0,s=D[a+1|0],a=a+1|0,s-48>>>0<10;);if(a=f?u:0-u|0,(a|0)==-1)break e;h=(a|0)!=0}return h}function t6e(a){a=a|0;var s=0,c=0,u=0;if(r[a>>2]=2356,s=r[a+60>>2],r[a+60>>2]=0,s&&pt[r[r[s>>2]+4>>2]](s),s=r[a+48>>2],s&&(r[a+52>>2]=s,W(s)),u=r[a+36>>2],u){if(c=r[a+40>>2],(c|0)==(u|0))s=u;else{for(;c=c-4|0,s=r[c>>2],r[c>>2]=0,s&&pt[r[r[s>>2]+4>>2]](s),(u|0)!=(c|0););s=r[a+36>>2]}r[a+40>>2]=u,W(s)}return r[a>>2]=2012,s=r[a+16>>2],s&&(r[a+20>>2]=s,W(s)),s=r[a+4>>2],s&&(r[a+8>>2]=s,W(s)),a|0}function n6e(a){a=a|0;var s=0,c=0,u=0;if(r[a>>2]=2356,s=r[a+60>>2],r[a+60>>2]=0,s&&pt[r[r[s>>2]+4>>2]](s),s=r[a+48>>2],s&&(r[a+52>>2]=s,W(s)),u=r[a+36>>2],u){if(c=r[a+40>>2],(c|0)==(u|0))s=u;else{for(;c=c-4|0,s=r[c>>2],r[c>>2]=0,s&&pt[r[r[s>>2]+4>>2]](s),(u|0)!=(c|0););s=r[a+36>>2]}r[a+40>>2]=u,W(s)}r[a>>2]=2012,s=r[a+16>>2],s&&(r[a+20>>2]=s,W(s)),s=r[a+4>>2],s&&(r[a+8>>2]=s,W(s)),W(a)}function yte(a,s){var c=0,u=0,f=0,h=0,m=0,y=0;if(f=r[a+8>>2],c=r[a+4>>2],f-c>>1>>>0>=s>>>0){s&&(s=s<<1,c=Ct(c,0,s)+s|0),r[a+4>>2]=c;return}e:{if(h=r[a>>2],m=c-h|0,y=m>>1,u=y+s|0,(u|0)>=0){if(c=0,f=f-h|0,u=f>>>0<2147483646?u>>>0>f>>>0?u:f:2147483647,u){if((u|0)<0)break e;c=Te(u<<1)}s=s<<1,s=Ct((y<<1)+c|0,0,s)+s|0,(m|0)>0&&$e(c,h,m),r[a+8>>2]=(u<<1)+c,r[a+4>>2]=s,r[a>>2]=c,h&&W(h);return}jt(),Xe()}qn(1336),Xe()}function $f(a,s){var c=0,u=0,f=0,h=0,m=0;e:{c=r[a+4>>2],f=r[a>>2],h=c-f|0;t:{if(h>>>0<s>>>0){if(m=s-h|0,u=r[a+8>>2],m>>>0<=u-c>>>0){m&&(c=Ct(c,0,m)+m|0),r[a+4>>2]=c;return}if((s|0)<0)break e;if(c=u-f|0,u=c<<1,u=c>>>0<1073741823?s>>>0>u>>>0?s:u:2147483647,c=Te(u),Ct(c+h|0,0,m),(h|0)>0&&$e(c,f,h),r[a+8>>2]=c+u,r[a+4>>2]=s+c,r[a>>2]=c,!f)break t;W(f);return}if(s>>>0>=h>>>0)break t;r[a+4>>2]=s+f}return}jt(),Xe()}function r6e(a,s){a=a|0,s=s|0;var c=0,u=0,f=0,h=0;u=re-16|0,re=u,f=r[a+4>>2];e:{if((f|0)==-1||(c=r[s+20>>2],!!r[s+16>>2]&(c|0)>=0|(c|0)>0)||(UM(s,r[s+4>>2],r[a+8>>2],r[a+12>>2]),c=r[s+20>>2],!!r[s+16>>2]&(c|0)>=0|(c|0)>0)||(c=a+20|0,UM(s,r[s+4>>2],c,c+4|0),c=r[s+20>>2],h=r[s+16>>2],D[u+15|0]=r[a+4>>2],!!h&(c|0)>=0|(c|0)>0))break e;UM(s,r[s+4>>2],u+15|0,u+16|0)}return re=u+16|0,(f|0)!=-1|0}function i6e(a){a=a|0;var s=0,c=0,u=0,f=0,h=0;e:{s=r[a+8>>2];t:{if((s|0)<0)break t;c=r[a+4>>2],f=r[c>>2],u=r[c+4>>2]-f>>2;n:{if(u>>>0<s>>>0){Xr(c,s-u|0),h=r[a+8>>2];break n}if(h=s,s>>>0>=u>>>0)break n;r[c+4>>2]=f+(s<<2),h=s}if(u=h,(u|0)<=0)break t;for(a=r[a+4>>2],c=r[a>>2],f=r[a+4>>2]-c>>2,a=0;;){if((a|0)==(f|0))break e;if(r[c+(a<<2)>>2]=a,a=a+1|0,(u|0)==(a|0))break}}return(s^-1)>>>31|0}ps(),Xe()}function s6e(a,s,c){a=a|0,s=s|0,c=c|0;var u=0,f=0,h=0,m=0;u=re-16|0,re=u,Iee(u,a,s,c),r[a+24>>2]=r[u>>2],f=a+24|0;e:{if((f|0)==(u|0))break e;if(s=u|4,h=I[u+15|0],c=h<<24>>24,a=a+28|0,D[a+11|0]>=0){if((c|0)>=0){c=r[s+4>>2],r[a>>2]=r[s>>2],r[a+4>>2]=c,r[a+8>>2]=r[s+8>>2];break e}ZM(a,r[u+4>>2],r[u+8>>2]);break e}m=a,a=(c|0)<0,XM(m,a?r[u+4>>2]:s,a?r[u+8>>2]:h)}return D[u+15|0]<0&&W(r[u+4>>2]),re=u+16|0,f|0}function o6e(a,s,c){a=a|0,s=s|0,c=c|0;var u=0,f=0,h=0,m=0;u=re-16|0,re=u,zee(u,a,s,c),r[a+24>>2]=r[u>>2],f=a+24|0;e:{if((f|0)==(u|0))break e;if(s=u|4,h=I[u+15|0],c=h<<24>>24,a=a+28|0,D[a+11|0]>=0){if((c|0)>=0){c=r[s+4>>2],r[a>>2]=r[s>>2],r[a+4>>2]=c,r[a+8>>2]=r[s+8>>2];break e}ZM(a,r[u+4>>2],r[u+8>>2]);break e}m=a,a=(c|0)<0,XM(m,a?r[u+4>>2]:s,a?r[u+8>>2]:h)}return D[u+15|0]<0&&W(r[u+4>>2]),re=u+16|0,f|0}function $u(a){var s=0,c=0,u=0,f=0,h=0;if(s=r[a+4>>2],(s|0)!=r[a+8>>2]){r[s>>2]=r[2863],r[a+4>>2]=s+4;return}e:{if(h=r[a>>2],u=s-h|0,f=u>>2,s=f+1|0,s>>>0<1073741824){if(c=u>>1,c=u>>>0<2147483644?s>>>0>c>>>0?s:c:1073741823,c){if(c>>>0>=1073741824)break e;s=Te(c<<2)}else s=0;f=s+(f<<2)|0,r[f>>2]=r[2863],(u|0)>0&&$e(s,h,u),r[a+8>>2]=s+(c<<2),r[a+4>>2]=f+4,r[a>>2]=s,h&&W(h);return}jt(),Xe()}qn(1336),Xe()}function a6e(a,s,c,u){a=a|0,s=s|0,c=c|0,u=u|0;var f=0,h=0,m=0;a=re-32|0,re=a,f=D[s+24|0],h=r[3419],r[a+24>>2]=r[3418],r[a+28>>2]=h,h=r[3417],r[a+16>>2]=r[3416],r[a+20>>2]=h;e:{t:{if(c=Gf(s,c,f,a+16|0),c){if(r[a+8>>2]=0,r[a>>2]=0,r[a+4>>2]=0,s=0,f){if((f|0)<0)break t;f=f<<2,s=Te(f),m=$e(s,a+16|0,f)+f|0}f=r[u>>2],f&&(r[u+4>>2]=f,W(f)),r[u+8>>2]=m,r[u+4>>2]=m,r[u>>2]=s}re=a+32|0;break e}jt(),Xe()}return c|0}function Vv(a,s){var c=0,u=0,f=0,h=0;u=r[a+12>>2],c=r[a+16>>2]-u>>2;e:{if(c>>>0<s>>>0){Xr(a+12|0,s-c|0);break e}if(s>>>0>=c>>>0)break e;r[a+16>>2]=u+(s<<2)}e:{c=r[a>>2];t:{if(r[a+8>>2]-c>>2>>>0>=s>>>0)break t;if(s>>>0>=1073741824)break e;if(u=r[a+4>>2],f=s<<2,s=Te(f),f=s+f|0,u=u-c|0,h=u+s|0,(u|0)>0&&$e(s,c,u),r[a+8>>2]=f,r[a+4>>2]=h,r[a>>2]=s,!c)break t;W(c)}return}qn(1336),Xe()}function GB(a,s,c){var u=0,f=0,h=0;u=r[c+16>>2];e:{if(!u){if(Ite(c))break e;u=r[c+16>>2]}if(h=r[c+20>>2],u-h>>>0<s>>>0)return pt[r[c+36>>2]](c,a,s)|0;t:{if(r[c+80>>2]<0){u=0;break t}for(f=s;;){if(u=f,!u){u=0;break t}if(f=u-1|0,I[f+a|0]==10)break}if(f=pt[r[c+36>>2]](c,a,u)|0,f>>>0<u>>>0)break e;a=a+u|0,s=s-u|0,h=r[c+20>>2]}$e(h,a,s),r[c+20>>2]=r[c+20>>2]+s,f=s+u|0}return f}function l6e(a,s,c){a=a|0,s=s|0,c=c|0;var u=0,f=0,h=0,m=0;u=re-16|0,re=u;e:{if(f=pc(c),f>>>0<4294967280){t:{n:{if(f>>>0>=11){m=f+16&-16,h=Te(m),r[u+8>>2]=m|-2147483648,r[u>>2]=h,r[u+4>>2]=f;break n}if(D[u+11|0]=f,h=u,!f)break t}$e(h,c,f)}D[f+h|0]=0,h=a+16|0,c=Dte(s,u,h),s=D[a+27|0],a=r[a+16>>2],D[u+11|0]<0&&W(r[u>>2]),re=u+16|0,a=c?(s|0)<0?a:h:0;break e}mc(),Xe()}return a|0}function jB(a){var s=0,c=0,u=0,f=0;I[a+76|0]&&(D[a+76|0]=0,u=r[a+60>>2],c=r[a+72>>2]+7|0,s=c>>>0<7?1:s,f=s>>>3|0,c=s<<29|c>>>3,s=c+r[a+56>>2]|0,u=u+f|0,r[a+56>>2]=s,r[a+60>>2]=s>>>0<c>>>0?u+1|0:u),Ut[a+38>>1]<=513&&(D[a+132|0]=0,u=r[a+116>>2],s=0,c=r[a+128>>2]+7|0,s=c>>>0<7?1:s,f=s>>>3|0,c=s<<29|c>>>3,s=c+r[a+112>>2]|0,u=u+f|0,r[a+112>>2]=s,r[a+116>>2]=s>>>0<c>>>0?u+1|0:u)}function c6e(a,s,c){a=a|0,s=s|0,c=c|0;var u=0,f=0,h=0,m=0,y=0,A=0;return u=re+-64|0,re=u,f=pt[r[r[a>>2]+44>>2]](a,s)|0,a=pt[r[r[a>>2]+40>>2]](a,s)|0,h=$v(u),m=r[s+56>>2],y=f<<24>>24,A=a,a=a-1|0,a>>>0<=10?a=r[(a<<2)+13616>>2]:a=-1,a=ne(a,f),KM(h,m,y,A,0,a,a>>31),a=HM(Te(96),h),Ym(a,c),D[a+84|0]=1,r[a+72>>2]=r[a+68>>2],r[a+60>>2]=r[s+60>>2],re=u- -64|0,a|0}function bte(a,s,c){var u=0,f=0,h=0,m=0;e:{if(a>>>0>10||(u=r[c+20>>2],f=r[c+12>>2],h=r[c+16>>2],(u|0)>=(f|0)&h>>>0>=Ue[c+8>>2]|(u|0)>(f|0)))break e;f=D[h+r[c>>2]|0],h=h+1|0,u=h?u:u+1|0,r[c+16>>2]=h,r[c+20>>2]=u;t:{if((f|0)<0){if(!bte(a+1|0,s,c))break e;c=r[s>>2],a=r[s+4>>2]<<7|c>>>25,c=f&127|c<<7;break t}a=0,c=f&255}r[s>>2]=c,r[s+4>>2]=a,m=1}return m}function Ip(a,s,c){var u=0,f=0,h=0,m=0;e:{if(a>>>0>10||(u=r[c+20>>2],f=r[c+12>>2],h=r[c+16>>2],(u|0)>=(f|0)&h>>>0>=Ue[c+8>>2]|(u|0)>(f|0)))break e;f=D[h+r[c>>2]|0],h=h+1|0,u=h?u:u+1|0,r[c+16>>2]=h,r[c+20>>2]=u;t:{if((f|0)<0){if(!Ip(a+1|0,s,c))break e;c=r[s>>2],a=r[s+4>>2]<<7|c>>>25,c=f&127|c<<7;break t}a=0,c=f&255}r[s>>2]=c,r[s+4>>2]=a,m=1}return m}function Ate(a,s){var c=0,u=0,f=0,h=0,m=0;r[a+144>>2]=s,c=r[(pt[r[r[s>>2]+32>>2]](s)|0)+32>>2],f=r[c>>2]+r[c+16>>2]|0,u=r[(pt[r[r[s>>2]+32>>2]](s)|0)+32>>2],c=r[u+8>>2],u=r[u+16>>2],c=c-u|0,h=a,m=Ut[r[(pt[r[r[s>>2]+32>>2]](s)|0)+32>>2]+38>>1],zt[h+38>>1]=m,r[a>>2]=f,r[a+16>>2]=0,r[a+20>>2]=0,r[a+8>>2]=c,r[a+12>>2]=0,h=a,m=pt[r[r[s>>2]+36>>2]](s)|0,r[h+148>>2]=m}function u6e(a,s,c,u,f){if(a=a|0,s=s|0,c=c|0,u=u|0,f=f|0,W0(a,r[s+8>>2],f)){r[s+28>>2]==1|r[s+4>>2]!=(c|0)||(r[s+28>>2]=u);return}e:{if(!W0(a,r[s>>2],f))break e;if(!(r[s+16>>2]!=(c|0)&r[s+20>>2]!=(c|0))){if((u|0)!=1)break e;r[s+32>>2]=1;return}r[s+20>>2]=c,r[s+32>>2]=u,r[s+40>>2]=r[s+40>>2]+1,r[s+36>>2]!=1|r[s+24>>2]!=2||(D[s+54|0]=1),r[s+44>>2]=4}}function f6e(a,s,c,u){a=a|0,s=s|0,c=c|0,u=u|0;var f=0,h=0,m=0;e:{if(Ue[s+80>>2]>65535||(h=r[s+96>>2],s=r[s+100>>2]-h|0,a=(s|0)/12|0,f=ne(a,6),m=(f|0)==(c|0),!s|(c|0)!=(f|0)))break e;for(m=1,f=a>>>0>1?a:1,a=0;s=ne(a,6)+u|0,c=ne(a,12)+h|0,zt[s>>1]=r[c>>2],zt[s+2>>1]=r[c+4>>2],zt[s+4>>1]=r[c+8>>2],a=a+1|0,(f|0)!=(a|0););}return m|0}function d6e(a){a=a|0;var s=0,c=0,u=0;if(r[a>>2]=11304,s=r[a+48>>2],r[a+48>>2]=0,s&&pt[r[r[s>>2]+4>>2]](s),r[a>>2]=13312,s=r[a+20>>2],s&&(r[a+24>>2]=s,W(s)),u=r[a+8>>2],u){if(c=r[a+12>>2],(c|0)==(u|0))s=u;else{for(;c=c-4|0,s=r[c>>2],r[c>>2]=0,s&&pt[r[r[s>>2]+4>>2]](s),(u|0)!=(c|0););s=r[a+8>>2]}r[a+12>>2]=u,W(s)}return a|0}function h6e(a){a=a|0;var s=0,c=0,u=0;if(r[a>>2]=11304,s=r[a+48>>2],r[a+48>>2]=0,s&&pt[r[r[s>>2]+4>>2]](s),r[a>>2]=13312,s=r[a+20>>2],s&&(r[a+24>>2]=s,W(s)),u=r[a+8>>2],u){if(c=r[a+12>>2],(c|0)==(u|0))s=u;else{for(;c=c-4|0,s=r[c>>2],r[c>>2]=0,s&&pt[r[r[s>>2]+4>>2]](s),(u|0)!=(c|0););s=r[a+8>>2]}r[a+12>>2]=u,W(s)}W(a)}function p6e(a){a=a|0;var s=0,c=0,u=0,f=0,h=0,m=0,y=0;s=r[a+32>>2],h=r[s+8>>2],f=r[s+12>>2],u=r[s+20>>2],y=h,h=r[s+16>>2],m=h+4|0,u=m>>>0<4?u+1|0:u;e:{if(y>>>0<m>>>0&(u|0)>=(f|0)|(u|0)>(f|0)||(c=h+r[s>>2]|0,f=I[c|0]|I[c+1|0]<<8|(I[c+2|0]<<16|I[c+3|0]<<24),r[s+16>>2]=m,r[s+20>>2]=u,c=0,(f|0)<0))break e;r[r[a+4>>2]+80>>2]=f,c=1}return c|0}function wte(a,s,c,u){D[a+53|0]=1;e:{if(r[a+4>>2]!=(c|0))break e;D[a+52|0]=1,c=r[a+16>>2];t:{if(!c){if(r[a+36>>2]=1,r[a+24>>2]=u,r[a+16>>2]=s,(u|0)!=1)break e;if(r[a+48>>2]==1)break t;break e}if((s|0)==(c|0)){if(c=r[a+24>>2],(c|0)==2&&(r[a+24>>2]=u,c=u),r[a+48>>2]!=1)break e;if((c|0)==1)break t;break e}r[a+36>>2]=r[a+36>>2]+1}D[a+54|0]=1}}function m6e(a){a=a|0;var s=0,c=0,u=0,f=0,h=0,m=0,y=0;return u=r[a+32>>2],f=r[u+12>>2],m=r[u+8>>2],s=m,c=r[u+20>>2],y=r[u+16>>2],h=y+4|0,c=h>>>0<4?c+1|0:c,(c|0)<=(f|0)&s>>>0>=h>>>0|(c|0)<(f|0)&&(s=y+r[u>>2]|0,s=I[s|0]|I[s+1|0]<<8|(I[s+2|0]<<16|I[s+3|0]<<24),r[u+16>>2]=h,r[u+20>>2]=c,r[r[a+4>>2]+80>>2]=s),(c|0)<=(f|0)&h>>>0<=m>>>0|(c|0)<(f|0)}function Ete(a,s,c){a=a|0,s=s|0,c=c|0;var u=0,f=0;u=re-16|0,re=u,r[a+4>>2]=s,s=r[s+64>>2],f=r[s>>2],s=r[s+4>>2],D[u+15|0]=0,hc(a+24|0,(s-f>>2>>>0)/3|0,u+15|0),s=r[a+4>>2],f=r[s+56>>2],s=r[s+52>>2],D[u+14|0]=0,hc(a+36|0,f-s>>2,u+14|0),s=r[c+12>>2],r[a+16>>2]=r[c+8>>2],r[a+20>>2]=s,s=r[c+4>>2],r[a+8>>2]=r[c>>2],r[a+12>>2]=s,re=u+16|0}function g6e(a,s){a=a|0,s=s|0;var c=0,u=0,f=0,h=0,m=0;f=pt[r[r[a>>2]+24>>2]](a)|0,c=1;e:{if((f|0)<=0||(u=r[r[a+36>>2]>>2],h=a+48|0,c=0,!(pt[r[r[u>>2]+16>>2]](u,h,s)|0)))break e;for(u=1;c=u,!!((f|0)!=(c|0)&&(u=c+1|0,m=r[r[a+36>>2]+(c<<2)>>2],pt[r[r[m>>2]+16>>2]](m,h,s)|0)););c=(c|0)>=(f|0)}return c|0}function v6e(a,s){a=a|0,s=s|0;var c=0,u=0,f=0,h=0,m=0;f=pt[r[r[a>>2]+24>>2]](a)|0,c=1;e:{if((f|0)<=0||(u=r[r[a+36>>2]>>2],h=a+48|0,c=0,!(pt[r[r[u>>2]+20>>2]](u,h,s)|0)))break e;for(u=1;c=u,!!((f|0)!=(c|0)&&(u=c+1|0,m=r[r[a+36>>2]+(c<<2)>>2],pt[r[r[m>>2]+20>>2]](m,h,s)|0)););c=(c|0)>=(f|0)}return c|0}function WM(a,s,c){var u=0,f=0,h=0,m=0,y=0,A=0,T=0;if(s)for(m=0-I[a+12|0]&255,y=r[a>>2],f=r[a+8>>2];;){A=u<<1;e:{if(f>>>0>4095||(u=r[a+4>>2],(u|0)<=0))break e;u=u-1|0,r[a+4>>2]=u,f=I[u+y|0]|f<<8}if(h=f&255,u=h>>>0<m>>>0,T=h,h=ne(f>>>8|0,m),f=u?T+h|0:f-(m+h|0)|0,r[a+8>>2]=f,u=u|A,s=s-1|0,!s)break}r[c>>2]=u}function Ste(a){r[a>>2]=0,r[a+4>>2]=0,r[a+28>>2]=0,r[a+32>>2]=0,D[a+24|0]=1,r[a+16>>2]=0,r[a+20>>2]=0,r[a+8>>2]=0,r[a+12>>2]=0,r[a+36>>2]=0,r[a+40>>2]=0,r[a+44>>2]=0,r[a+48>>2]=0,r[a+52>>2]=0,r[a+56>>2]=0,r[a+60>>2]=0,r[a+64>>2]=0,r[a+72>>2]=0,r[a+76>>2]=0,r[a+80>>2]=0,r[a+84>>2]=0,r[a+88>>2]=0,r[a+92>>2]=0,r[a+68>>2]=a}function _6e(a,s,c){a=a|0,s=s|0,c=c|0;var u=0,f=0;u=re-16|0,re=u,r[a+4>>2]=s,f=r[s>>2],s=r[s+4>>2],D[u+15|0]=0,hc(a+24|0,(s-f>>2>>>0)/3|0,u+15|0),s=r[a+4>>2],f=r[s+28>>2],s=r[s+24>>2],D[u+14|0]=0,hc(a+36|0,f-s>>2,u+14|0),s=r[c+12>>2],r[a+16>>2]=r[c+8>>2],r[a+20>>2]=s,s=r[c+4>>2],r[a+8>>2]=r[c>>2],r[a+12>>2]=s,re=u+16|0}function HB(a){var s=0;r[a>>2]=0,r[a+4>>2]=0,r[a+56>>2]=0,r[a+48>>2]=0,r[a+52>>2]=0,r[a+40>>2]=0,r[a+44>>2]=0,r[a+32>>2]=0,r[a+36>>2]=0,r[a+24>>2]=0,r[a+28>>2]=0,r[a+16>>2]=0,r[a+20>>2]=0,r[a+8>>2]=0,r[a+12>>2]=0,s=a- -64|0,r[s>>2]=0,r[s+4>>2]=0,r[a+72>>2]=0,r[a+76>>2]=0,r[a+80>>2]=0,r[a+84>>2]=0,r[a+60>>2]=a}function Tte(a,s,c){var u=0,f=0,h=0,m=0,y=0;e:{if(a>>>0>5||(h=r[c+20>>2],u=h,m=r[c+12>>2],f=r[c+16>>2],(u|0)>=(m|0)&f>>>0>=Ue[c+8>>2]|(u|0)>(m|0)))break e;if(u=I[f+r[c>>2]|0],f=f+1|0,h=f?h:h+1|0,r[c+16>>2]=f,r[c+20>>2]=h,u&128){if(!Tte(a+1|0,s,c))break e;u=u&127|r[s>>2]<<7}r[s>>2]=u,y=1}return y}function Zm(a,s,c){var u=0,f=0,h=0,m=0,y=0;e:{if(a>>>0>5||(h=r[c+20>>2],u=h,m=r[c+12>>2],f=r[c+16>>2],(u|0)>=(m|0)&f>>>0>=Ue[c+8>>2]|(u|0)>(m|0)))break e;if(u=I[f+r[c>>2]|0],f=f+1|0,h=f?h:h+1|0,r[c+16>>2]=f,r[c+20>>2]=h,u&128){if(!Zm(a+1|0,s,c))break e;u=u&127|r[s>>2]<<7}r[s>>2]=u,y=1}return y}function Np(a,s,c){var u=0,f=0,h=0,m=0,y=0;e:{if(a>>>0>5||(h=r[c+20>>2],u=h,m=r[c+12>>2],f=r[c+16>>2],(u|0)>=(m|0)&f>>>0>=Ue[c+8>>2]|(u|0)>(m|0)))break e;if(u=I[f+r[c>>2]|0],f=f+1|0,h=f?h:h+1|0,r[c+16>>2]=f,r[c+20>>2]=h,u&128){if(!Np(a+1|0,s,c))break e;u=u&127|r[s>>2]<<7}r[s>>2]=u,y=1}return y}function Gv(a,s,c){var u=0,f=0,h=0,m=0,y=0;e:{if(a>>>0>5||(h=r[c+20>>2],u=h,m=r[c+12>>2],f=r[c+16>>2],(u|0)>=(m|0)&f>>>0>=Ue[c+8>>2]|(u|0)>(m|0)))break e;if(u=I[f+r[c>>2]|0],f=f+1|0,h=f?h:h+1|0,r[c+16>>2]=f,r[c+20>>2]=h,u&128){if(!Gv(a+1|0,s,c))break e;u=u&127|r[s>>2]<<7}r[s>>2]=u,y=1}return y}function $B(a,s,c){var u=0,f=0,h=0,m=0,y=0;e:{if(a>>>0>5||(h=r[c+20>>2],u=h,m=r[c+12>>2],f=r[c+16>>2],(u|0)>=(m|0)&f>>>0>=Ue[c+8>>2]|(u|0)>(m|0)))break e;if(u=I[f+r[c>>2]|0],f=f+1|0,h=f?h:h+1|0,r[c+16>>2]=f,r[c+20>>2]=h,u&128){if(!$B(a+1|0,s,c))break e;u=u&127|r[s>>2]<<7}r[s>>2]=u,y=1}return y}function xte(a,s,c){var u=0,f=0,h=0,m=0,y=0;e:{if(a>>>0>5||(h=r[c+20>>2],u=h,m=r[c+12>>2],f=r[c+16>>2],(u|0)>=(m|0)&f>>>0>=Ue[c+8>>2]|(u|0)>(m|0)))break e;if(u=I[f+r[c>>2]|0],f=f+1|0,h=f?h:h+1|0,r[c+16>>2]=f,r[c+20>>2]=h,u&128){if(!xte(a+1|0,s,c))break e;u=u&127|r[s>>2]<<7}r[s>>2]=u,y=1}return y}function ks(a,s,c){var u=0,f=0,h=0,m=0,y=0;e:{if(a>>>0>5||(h=r[c+20>>2],u=h,m=r[c+12>>2],f=r[c+16>>2],(u|0)>=(m|0)&f>>>0>=Ue[c+8>>2]|(u|0)>(m|0)))break e;if(u=I[f+r[c>>2]|0],f=f+1|0,h=f?h:h+1|0,r[c+16>>2]=f,r[c+20>>2]=h,u&128){if(!ks(a+1|0,s,c))break e;u=u&127|r[s>>2]<<7}r[s>>2]=u,y=1}return y}function jv(a,s,c){var u=0,f=0,h=0,m=0,y=0;e:{if(a>>>0>5||(h=r[c+20>>2],u=h,m=r[c+12>>2],f=r[c+16>>2],(u|0)>=(m|0)&f>>>0>=Ue[c+8>>2]|(u|0)>(m|0)))break e;if(u=I[f+r[c>>2]|0],f=f+1|0,h=f?h:h+1|0,r[c+16>>2]=f,r[c+20>>2]=h,u&128){if(!jv(a+1|0,s,c))break e;u=u&127|r[s>>2]<<7}r[s>>2]=u,y=1}return y}function y6e(a,s,c,u){a=a|0,s=s|0,c=c|0,u=u|0;var f=0,h=0,m=0,y=0;if(m=r[s+96>>2],s=r[s+100>>2]-m|0,!((s|0)!=(c|0)|!s))for(a=(c|0)/12|0,y=a>>>0>1?a:1,a=0;f=ne(a,12),h=f+u|0,f=f+m|0,r[h>>2]=r[f>>2],r[h+4>>2]=r[f+4>>2],r[h+8>>2]=r[f+8>>2],a=a+1|0,(y|0)!=(a|0););return(s|0)==(c|0)|0}function Io(a,s,c){var u=0,f=0;e:{t:{if(c>>>0>=4){if((a|s)&3)break t;for(;;){if(r[a>>2]!=r[s>>2])break t;if(s=s+4|0,a=a+4|0,c=c-4|0,!(c>>>0>3))break}}if(!c)break e}for(;;){if(u=I[a|0],f=I[s|0],(u|0)==(f|0)){if(s=s+1|0,a=a+1|0,c=c-1|0,c)continue;break e}break}return u-f|0}return 0}function b6e(a,s,c){a=a|0,s=s|0,c=c|0;var u=0,f=0;u=r[s+4>>2];e:{if(!u||(s=r[r[r[s+8>>2]+(c<<2)>>2]+60>>2],(s|0)<0)||(a=r[u+24>>2],c=r[u+28>>2],(a|0)==(c|0)))break e;t:{for(;;){if(f=r[a>>2],(s|0)==r[f+24>>2])break t;if(a=a+4|0,(c|0)==(a|0))break}f=0}}return f|0}function WB(a){var s=0,c=0,u=0;if(a){if(u=r[a+24>>2],u){if(c=r[a+28>>2],(c|0)==(u|0))s=u;else{for(;c=c-4|0,s=r[c>>2],r[c>>2]=0,s&&(Qc(s+12|0,r[s+16>>2]),Kc(s,r[s+4>>2]),W(s)),(u|0)!=(c|0););s=r[a+24>>2]}r[a+28>>2]=u,W(s)}Qc(a+12|0,r[a+16>>2]),Kc(a,r[a+4>>2]),W(a)}}function YB(a){var s=0,c=0,u=0;if(u=r[a>>2],u){if(s=r[a+4>>2],(u|0)==(s|0))s=u;else{for(;c=r[s-12>>2],c&&(r[s-8>>2]=c,W(c)),c=r[s-28>>2],c&&(r[s-24>>2]=c,W(c)),c=r[s-40>>2],c&&(r[s-36>>2]=c,W(c)),YM(s-140|0),s=s-144|0,(u|0)!=(s|0););s=r[a>>2]}r[a+4>>2]=u,W(s)}}function A6e(a){a=a|0;var s=0;return r[a+8>>2]=12416,r[a>>2]=12204,s=r[a+96>>2],s&&(r[a+100>>2]=s,W(s)),s=r[a+80>>2],s&&(r[a+84>>2]=s,W(s)),s=r[a+68>>2],s&&(r[a+72>>2]=s,W(s)),s=r[a+56>>2],s&&(r[a+60>>2]=s,W(s)),r[a+8>>2]=12652,s=r[a+44>>2],s&&W(s),s=r[a+32>>2],s&&W(s),a|0}function w6e(a){a=a|0;var s=0,c=0,u=0;if(r[a>>2]=13312,s=r[a+20>>2],s&&(r[a+24>>2]=s,W(s)),u=r[a+8>>2],u){if(c=r[a+12>>2],(c|0)==(u|0))s=u;else{for(;c=c-4|0,s=r[c>>2],r[c>>2]=0,s&&pt[r[r[s>>2]+4>>2]](s),(u|0)!=(c|0););s=r[a+8>>2]}r[a+12>>2]=u,W(s)}return a|0}function E6e(a){a=a|0;var s=0;r[a+8>>2]=12416,r[a>>2]=12204,s=r[a+96>>2],s&&(r[a+100>>2]=s,W(s)),s=r[a+80>>2],s&&(r[a+84>>2]=s,W(s)),s=r[a+68>>2],s&&(r[a+72>>2]=s,W(s)),s=r[a+56>>2],s&&(r[a+60>>2]=s,W(s)),r[a+8>>2]=12652,s=r[a+44>>2],s&&W(s),s=r[a+32>>2],s&&W(s),W(a)}function pc(a){var s=0,c=0,u=0;s=a;e:{if(s&3)for(;;){if(!I[s|0])break e;if(s=s+1|0,!(s&3))break}for(;c=s,s=s+4|0,u=r[c>>2],!((u^-1)&u-16843009&-2139062144););if(!(u&255))return c-a|0;for(;u=I[c+1|0],s=c+1|0,c=s,!!u;);}return s-a|0}function qB(a){a=a|0;var s=0,c=0,u=0;if(r[a>>2]=13312,s=r[a+20>>2],s&&(r[a+24>>2]=s,W(s)),u=r[a+8>>2],u){if(c=r[a+12>>2],(c|0)==(u|0))s=u;else{for(;c=c-4|0,s=r[c>>2],r[c>>2]=0,s&&pt[r[r[s>>2]+4>>2]](s),(u|0)!=(c|0););s=r[a+8>>2]}r[a+12>>2]=u,W(s)}W(a)}function XB(a,s,c){a=a|0,s=s|0,c=c|0;var u=0,f=0,h=0,m=0,y=0,A=0;return y=r[c+8>>2],f=r[c+16>>2],m=r[c+12>>2],h=m,u=r[c+20>>2],y>>>0>f>>>0&(h|0)>=(u|0)|(u|0)<(h|0)&&(s=I[f+r[c>>2]|0],A=f+1|0,h=A?u:u+1|0,r[c+16>>2]=A,r[c+20>>2]=h,r[a+4>>2]=s),f>>>0<y>>>0&(u|0)<=(m|0)|(u|0)<(m|0)}function W0(a,s,c){var u=0;if(!c)return r[a+4>>2]==r[s+4>>2];if((a|0)==(s|0))return 1;u=r[a+4>>2],a=I[u|0],c=r[s+4>>2],s=I[c|0];e:{if(!a|(s|0)!=(a|0))break e;for(;;){if(s=I[c+1|0],a=I[u+1|0],!a)break e;if(c=c+1|0,u=u+1|0,(a|0)!=(s|0))break}}return(a|0)==(s|0)}function S6e(a){a=a|0;var s=0;return r[a>>2]=12416,s=r[a+88>>2],s&&(r[a+92>>2]=s,W(s)),s=r[a+72>>2],s&&(r[a+76>>2]=s,W(s)),s=r[a+60>>2],s&&(r[a- -64>>2]=s,W(s)),s=r[a+48>>2],s&&(r[a+52>>2]=s,W(s)),r[a>>2]=12652,s=r[a+36>>2],s&&W(s),s=r[a+24>>2],s&&W(s),a|0}function Hv(a,s){var c=0,u=0,f=0,h=0;e:{c=r[a>>2];t:{if(r[a+8>>2]-c>>2>>>0>=s>>>0)break t;if(s>>>0>=1073741824)break e;if(u=r[a+4>>2],f=s<<2,s=Te(f),f=s+f|0,u=u-c|0,h=u+s|0,(u|0)>0&&$e(s,c,u),r[a+8>>2]=f,r[a+4>>2]=h,r[a>>2]=s,!c)break t;W(c)}return}qn(1336),Xe()}function T6e(a){a=a|0;var s=0;r[a>>2]=12416,s=r[a+88>>2],s&&(r[a+92>>2]=s,W(s)),s=r[a+72>>2],s&&(r[a+76>>2]=s,W(s)),s=r[a+60>>2],s&&(r[a- -64>>2]=s,W(s)),s=r[a+48>>2],s&&(r[a+52>>2]=s,W(s)),r[a>>2]=12652,s=r[a+36>>2],s&&W(s),s=r[a+24>>2],s&&W(s),W(a)}function x6e(a,s,c){a=a|0,s=s|0,c=c|0;var u=0,f=0;a=r[s+12>>2],s=r[s+8>>2],u=a-s|0,a=0;e:{if(!u)break e;a=u>>2,u=a>>>0>1?a:1,a=0;t:{for(;;){if(f=r[s+(a<<2)>>2],r[f+60>>2]==(c|0))break t;if(a=a+1|0,(u|0)==(a|0))break}a=0;break e}a=(a|0)==-1?0:f}return a|0}function Zd(a){var s=0;a&&(s=r[a+76>>2],s&&(r[a+80>>2]=s,W(s)),s=r[a- -64>>2],s&&(r[a+68>>2]=s,W(s)),s=r[a+48>>2],s&&(r[a+52>>2]=s,W(s)),s=r[a+24>>2],s&&(r[a+28>>2]=s,W(s)),s=r[a+12>>2],s&&(r[a+16>>2]=s,W(s)),s=r[a>>2],s&&(r[a+4>>2]=s,W(s)),W(a))}function YM(a){var s=0;s=r[a+84>>2],s&&(r[a+88>>2]=s,W(s)),s=r[a+72>>2],s&&(r[a+76>>2]=s,W(s)),s=r[a+52>>2],s&&(r[a+56>>2]=s,W(s)),s=r[a+40>>2],s&&(r[a+44>>2]=s,W(s)),s=r[a+28>>2],s&&(r[a+32>>2]=s,W(s)),s=r[a+12>>2],s&&W(s),a=r[a>>2],a&&W(a)}function Mte(a,s,c){var u=0,f=0,h=0,m=0,y=0;for(h=re-16|0,re=h,u=re-16|0,re=u,s=s-a>>2;;){if(s){r[u+12>>2]=a,f=s>>>1|0,r[u+12>>2]=r[u+12>>2]+(f<<2),y=(f^-1)+s|0,s=f,f=r[u+12>>2],m=Ue[f>>2]<Ue[c>>2],s=m?y:s,a=m?f+4|0:a;continue}break}return re=u+16|0,re=h+16|0,a}function ZB(a){var s=0,c=0,u=0;if(s=r[a+4>>2],u=r[a>>2],(s|0)!=(u|0))for(;c=r[s-12>>2],c&&(r[s-8>>2]=c,W(c)),c=r[s-28>>2],c&&(r[s-24>>2]=c,W(c)),c=r[s-40>>2],c&&(r[s-36>>2]=c,W(c)),YM(s-140|0),s=s-144|0,(u|0)!=(s|0););r[a+4>>2]=u}function Ri(a,s,c){var u=0,f=0;e:{t:{if(c>>>0<=10){u=a,D[u+11|0]=c;break t}if(c>>>0>4294967279)break e;c>>>0>=11?(f=c+16&-16,u=f-1|0,u=(u|0)==11?f:u):u=10,f=u+1|0,u=Te(f),r[a>>2]=u,r[a+8>>2]=f|-2147483648,r[a+4>>2]=c}Qv(u,s,c+1|0);return}mc(),Xe()}function QB(a,s){var c=0,u=0;return u=Te(40),r[u>>2]=-1,c=u+8|0,r[c+16>>2]=0,r[c+20>>2]=0,r[c+8>>2]=0,r[c>>2]=0,r[c+4>>2]=0,r[c+24>>2]=0,r[c+28>>2]=0,pt[r[r[a>>2]+16>>2]](a,u),a=r[s+88>>2],r[s+88>>2]=u,a&&(s=r[a+8>>2],s&&(r[a+12>>2]=s,W(s)),W(a)),1}function M6e(a,s,c,u){a=a|0,s=s|0,c=c|0,u=u|0;var f=0,h=0;return a=re-16|0,re=a,s=r[s+96>>2],r[a+8>>2]=0,r[a>>2]=0,r[a+4>>2]=0,f=Te(12),c=$e(f,s+ne(c,12)|0,12),h=c+12|0,s=r[u>>2],s&&(r[u+4>>2]=s,W(s)),r[u+8>>2]=c+12,r[u+4>>2]=h,r[u>>2]=f,re=a+16|0,1}function js(a){var s=0,c=0,u=0,f=0,h=0;u=I[a+12|0],c=r[a+8>>2];e:{if(c>>>0>4095||(s=r[a+4>>2],(s|0)<=0))break e;s=s-1|0,r[a+4>>2]=s,c=I[s+r[a>>2]|0]|c<<8}return u=0-u&255,s=ne(u,c>>>8|0),f=c&255,h=f>>>0<u>>>0,r[a+8>>2]=h?s+f|0:c-(s+u|0)|0,h}function kte(a,s){return r[a+4>>2]=0,r[a+8>>2]=0,r[a>>2]=2012,r[a+12>>2]=0,r[a+16>>2]=0,r[a+20>>2]=0,r[a+24>>2]=0,r[a+28>>2]=0,r[a+32>>2]=0,r[a+36>>2]=0,r[a+40>>2]=0,r[a>>2]=2356,r[a+44>>2]=0,r[a+48>>2]=0,r[a+52>>2]=0,r[a+56>>2]=0,r[a+60>>2]=s,a}function Cte(a,s,c,u){e:{if(!s){if((u|0)<0)return 0;$f(a,c);break e}if((u|0)<0)return 0;if(!u&r[a+4>>2]-r[a>>2]>>>0>=c>>>0||$f(a,c),!c)break e;Hf(r[a>>2],s,c)}return s=r[a+28>>2],c=r[a+24>>2]+1|0,s=c?s:s+1|0,r[a+24>>2]=c,r[a+28>>2]=s,1}function k6e(a){a=a|0;var s=0,c=0,u=0;if(a){if(D[a+27|0]<0&&W(r[a+16>>2]),s=r[a>>2],s){if(c=r[a+4>>2],(c|0)==(s|0))u=s;else{for(;u=c-12|0,D[c-1|0]<0&&W(r[u>>2]),c=u,(c|0)!=(s|0););u=r[a>>2]}r[a+4>>2]=s,W(u)}W(a)}}function C6e(){var a=0;return a=Te(40),zt[a+38>>1]=0,r[a>>2]=0,r[a+8>>2]=0,r[a+12>>2]=0,r[a+16>>2]=0,r[a+20>>2]=0,r[a+24>>2]=0,r[a+28>>2]=0,D[a+29|0]=0,D[a+30|0]=0,D[a+31|0]=0,D[a+32|0]=0,D[a+33|0]=0,D[a+34|0]=0,D[a+35|0]=0,D[a+36|0]=0,a|0}function Pte(a){var s=0,c=0,u=0;if(D[r[a>>2]]-48>>>0>=10)return 0;for(;u=r[a>>2],c=-1,s>>>0<=214748364&&(c=D[u|0]-48|0,s=ne(s,10),c=(c|0)>(2147483647-s|0)?-1:c+s|0),r[a>>2]=u+1,s=c,D[u+1|0]-48>>>0<10;);return s}function ha(a){a=a|0;var s=0,c=0;a&&(s=r[a+88>>2],r[a+88>>2]=0,s&&(c=r[s+8>>2],c&&(r[s+12>>2]=c,W(c)),W(s)),s=r[a+68>>2],s&&(r[a+72>>2]=s,W(s)),s=r[a+64>>2],r[a+64>>2]=0,s&&(c=r[s>>2],c&&(r[s+4>>2]=c,W(c)),W(s)),W(a))}function P6e(a){a=a|0;var s=0;return r[a+24>>2]=1140,r[a>>2]=11076,s=r[a+32>>2],s&&(r[a+36>>2]=s,W(s)),r[a>>2]=2476,s=r[a+20>>2],r[a+20>>2]=0,s&&pt[r[r[s>>2]+4>>2]](s),r[a>>2]=2260,s=r[a+16>>2],r[a+16>>2]=0,s&&ha(s),a|0}function qM(a,s){var c=0,u=0,f=0;if(c=pc(s),c>>>0<4294967280){e:{t:{if(c>>>0>=11){f=c+16&-16,u=Te(f),r[a+8>>2]=f|-2147483648,r[a>>2]=u,r[a+4>>2]=c;break t}if(D[a+11|0]=c,u=a,!c)break e}$e(u,s,c)}return D[c+u|0]=0,a}mc(),Xe()}function ss(a,s,c,u){var f=0,h=0,m=0,y=0;return h=s^u,m=h>>31,f=s>>31,a=a^f,y=a-f|0,f=(s^f)-((a>>>0<f>>>0)+f|0)|0,a=u>>31,s=c^a,h=h>>31,a=Rv(y,f,s-a|0,(a^u)-((a>>>0>s>>>0)+a|0)|0)^h,s=a-h|0,nn=(m^nn)-((a>>>0<h>>>0)+m|0)|0,s}function R6e(a){a=a|0;var s=0;r[a+24>>2]=1140,r[a>>2]=11076,s=r[a+32>>2],s&&(r[a+36>>2]=s,W(s)),r[a>>2]=2476,s=r[a+20>>2],r[a+20>>2]=0,s&&pt[r[r[s>>2]+4>>2]](s),r[a>>2]=2260,s=r[a+16>>2],r[a+16>>2]=0,s&&ha(s),W(a)}function XM(a,s,c){var u=0,f=0,h=0;f=re-16|0,re=f,u=r[a+8>>2]&2147483647;e:{if(u>>>0>c>>>0){u=r[a>>2],r[a+4>>2]=c,Qv(u,s,c),D[f+15|0]=0,D[c+u|0]=I[f+15|0];break e}h=a,a=r[a+4>>2],vte(h,u-1|0,(c-u|0)+1|0,a,a,c,s)}re=f+16|0}function D6e(a,s){a=a|0,s=s|0;var c=0,u=0;c=re-16|0,re=c,a=r[a+4>>2];e:{if((a|0)==-1||(D[c+15|0]=a,u=r[s+20>>2],!!r[s+16>>2]&(u|0)>=0|(u|0)>0))break e;UM(s,r[s+4>>2],c+15|0,c+16|0)}return re=c+16|0,(a|0)!=-1|0}function rt(a,s,c,u){var f=0,h=0,m=0,y=0,A=0,T=0;return f=c>>>16|0,h=a>>>16|0,T=ne(f,h),m=c&65535,y=a&65535,A=ne(m,y),h=(A>>>16|0)+ne(h,m)|0,f=(h&65535)+ne(f,y)|0,nn=(ne(s,c)+T|0)+ne(a,u)+(h>>>16)+(f>>>16)|0,A&65535|f<<16}function O6e(){var a=0;return a=Te(96),$v(a),r[a+64>>2]=0,r[a+68>>2]=0,r[a+88>>2]=0,r[a+72>>2]=0,r[a+76>>2]=0,D[a+77|0]=0,D[a+78|0]=0,D[a+79|0]=0,D[a+80|0]=0,D[a+81|0]=0,D[a+82|0]=0,D[a+83|0]=0,D[a+84|0]=0,a|0}function Rte(a,s,c){var u=0;if(u=r[a+16>>2],!u){r[a+36>>2]=1,r[a+24>>2]=c,r[a+16>>2]=s;return}e:{if((s|0)==(u|0)){if(r[a+24>>2]!=2)break e;r[a+24>>2]=c;return}D[a+54|0]=1,r[a+24>>2]=2,r[a+36>>2]=r[a+36>>2]+1}}function I6e(a,s){a=a|0,s=s|0;var c=0,u=0;r[s>>2]=2,c=r[s+8>>2],u=r[s+12>>2]-c|0,u>>>0<=4294967291&&(e8(s+8|0,u+4|0),c=r[s+8>>2]),s=c+u|0,a=r[a+4>>2],D[s|0]=a,D[s+1|0]=a>>>8,D[s+2|0]=a>>>16,D[s+3|0]=a>>>24}function N6e(a){a=a|0;var s=0;return r[a>>2]=3592,s=r[a+96>>2],s&&W(s),s=r[a+84>>2],s&&W(s),s=r[a+72>>2],s&&W(s),s=r[a+60>>2],s&&W(s),r[a>>2]=3300,s=r[a+32>>2],s&&(r[a+36>>2]=s,W(s)),a|0}function L6e(a){a=a|0;var s=0,c=0,u=0;if(s=r[a+8>>2],u=r[a+12>>2],(s|0)==(u|0))return 1;for(;c=r[s>>2],c=pt[r[r[c>>2]+16>>2]](c,r[a+32>>2])|0,!!(c&&(s=s+4|0,(u|0)!=(s|0))););return c|0}function qn(a){var s=0,c=0,u=0,f=0,h=0;s=OSe(8)|0,r[s>>2]=15156,r[s>>2]=15200,c=pc(a),u=Te(c+13|0),r[u+8>>2]=0,r[u+4>>2]=c,r[u>>2]=c,f=s,h=$e(u+12|0,a,c+1|0),r[f+4>>2]=h,r[s>>2]=15248,DSe(s|0,15280,13),Xe()}function Qm(a,s,c,u,f){var h=0;if(h=re-256|0,re=h,!(f&73728|(c|0)<=(u|0))){if(c=c-u|0,u=c>>>0<256,Ct(h,s&255,u?c:256),!u)for(;Zv(a,h,256),c=c-256|0,c>>>0>255;);Zv(a,h,c)}re=h+256|0}function z6e(a){a=a|0;var s=0;return r[a>>2]=5608,s=r[a+96>>2],s&&W(s),s=r[a+84>>2],s&&W(s),s=r[a+72>>2],s&&W(s),s=r[a+60>>2],s&&W(s),r[a>>2]=3300,s=r[a+32>>2],s&&(r[a+36>>2]=s,W(s)),a|0}function B6e(a){a=a|0;var s=0;r[a>>2]=3592,s=r[a+96>>2],s&&W(s),s=r[a+84>>2],s&&W(s),s=r[a+72>>2],s&&W(s),s=r[a+60>>2],s&&W(s),r[a>>2]=3300,s=r[a+32>>2],s&&(r[a+36>>2]=s,W(s)),W(a)}function U6e(a){a=a|0;var s=0;r[a>>2]=5608,s=r[a+96>>2],s&&W(s),s=r[a+84>>2],s&&W(s),s=r[a+72>>2],s&&W(s),s=r[a+60>>2],s&&W(s),r[a>>2]=3300,s=r[a+32>>2],s&&(r[a+36>>2]=s,W(s)),W(a)}function Dte(a,s,c){var u=0,f=0;return u=a+4|0,a=qm(a,s),(u|0)==(a|0)?0:(s=r[a+32>>2],u=r[a+28>>2],(s|0)!=(u|0)&&(OB(c,s-u|0),f=JB(c),c=r[a+28>>2],$e(f,c,r[a+32>>2]-c|0)),(s|0)!=(u|0))}function Ote(a,s){var c=0,u=0;if(c=r[a+8>>2],a=r[a+12>>2]-c|0,a)for(a=a>>2,u=a>>>0>1?a:1,a=0;;){if(r[r[(a<<2)+c>>2]+60>>2]==(s|0))return a;if(a=a+1|0,(u|0)==(a|0))break}return-1}function F6e(a,s,c,u){a=a|0,s=s|0,c=c|0,u=u|0;var f=0;return f=re-16|0,re=f,a=kSe(r[a+60>>2],s|0,c|0,u&255,f+8|0)|0,a?(r[4190]=a,a=-1):a=0,re=f+16|0,nn=a?-1:r[f+12>>2],(a?-1:r[f+8>>2])|0}function Ite(a){var s=0;return s=r[a+72>>2],r[a+72>>2]=s-1|s,s=r[a>>2],s&8?(r[a>>2]=s|32,-1):(r[a+4>>2]=0,r[a+8>>2]=0,s=r[a+44>>2],r[a+28>>2]=s,r[a+20>>2]=s,r[a+16>>2]=s+r[a+48>>2],0)}function $v(a){return r[a+8>>2]=0,r[a+12>>2]=0,r[a>>2]=0,r[a+40>>2]=0,r[a+44>>2]=0,r[a+28>>2]=9,D[a+24|0]=1,r[a+56>>2]=-1,r[a+60>>2]=0,r[a+16>>2]=0,r[a+20>>2]=0,r[a+48>>2]=0,r[a+52>>2]=0,a}function V6e(a,s){a=a|0,s=s|0;var c=0,u=0;Nee(a,s);e:{if((s|0)<0||(c=r[a+88>>2],u=r[a+84>>2],c-u>>2<=(s|0)))break e;s=u+(s<<2)|0,u=s+4|0,c=c-u|0,c&&Hf(s,u,c),r[a+88>>2]=s+c}}function G6e(a,s){a=a|0,s=s|0;var c=0,u=0;u=r[a+16>>2],c=0;e:{if(r[a+20>>2]-u>>2<=(s|0)||(s=r[(s<<2)+u>>2],c=0,(s|0)<0))break e;c=Bv(r[r[a+36>>2]+(s<<2)>>2])}return c|0}function j6e(){var a=0,s=0;return a=Te(40),r[a+4>>2]=0,r[a+8>>2]=0,r[a>>2]=a+4,s=a+16|0,r[s>>2]=0,r[s+4>>2]=0,r[a+24>>2]=0,r[a+28>>2]=0,r[a+12>>2]=s,r[a+32>>2]=0,r[a+36>>2]=0,a|0}function ZM(a,s,c){var u=0,f=0;u=re-16|0,re=u;e:{if(c>>>0<=10){D[a+11|0]=c,Qv(a,s,c),D[u+15|0]=0,D[a+c|0]=I[u+15|0];break e}f=a,a=I[a+11|0],vte(f,10,c-10|0,a,a,c,s)}re=u+16|0}function H6e(a){a=a|0;var s=0;return r[a+8>>2]=12836,r[a>>2]=12672,s=r[a+56>>2],s&&(r[a+60>>2]=s,W(s)),r[a+8>>2]=12652,s=r[a+44>>2],s&&W(s),s=r[a+32>>2],s&&W(s),a|0}function $6e(a){a=a|0;var s=0;return r[a+8>>2]=11900,r[a>>2]=12964,s=r[a+56>>2],s&&(r[a+60>>2]=s,W(s)),r[a+8>>2]=12152,s=r[a+44>>2],s&&W(s),s=r[a+32>>2],s&&W(s),a|0}function Km(a){var s=0,c=0;s=r[3902],c=a+3&-4,a=s+c|0;e:{if(a>>>0<=s>>>0&&c||a>>>0>sne()<<16>>>0&&!(CSe(a|0)|0))break e;return r[3902]=a,s}return r[4190]=48,-1}function W6e(a,s,c){a=a|0,s=s|0,c=c|0;var u=0,f=0;u=r[a+8>>2];e:{if(D[u+24|0]<=0||!Ym(u,r[s+4>>2]-r[s>>2]>>2))break e;f=pt[r[r[a>>2]+32>>2]](a,s,c)|0}return f|0}function Y6e(a,s,c){a=a|0,s=s|0,c=c|0;var u=0;return r[a+4>>2]=s,s=r[r[r[s+4>>2]+8>>2]+(c<<2)>>2],r[a+12>>2]=c,r[a+8>>2]=s,a=r[a+8>>2],I[a+24|0]==3&&(u=r[a+28>>2]==9),u|0}function q6e(a){a=a|0;var s=0;r[a+8>>2]=12836,r[a>>2]=12672,s=r[a+56>>2],s&&(r[a+60>>2]=s,W(s)),r[a+8>>2]=12652,s=r[a+44>>2],s&&W(s),s=r[a+32>>2],s&&W(s),W(a)}function X6e(a){a=a|0;var s=0;r[a+8>>2]=11900,r[a>>2]=12964,s=r[a+56>>2],s&&(r[a+60>>2]=s,W(s)),r[a+8>>2]=12152,s=r[a+44>>2],s&&W(s),s=r[a+32>>2],s&&W(s),W(a)}function Z6e(a){a=a|0;var s=0;return r[a>>2]=3840,s=r[a+76>>2],s&&W(s),s=r[a+68>>2],r[a+68>>2]=0,s&&W(s),r[a>>2]=3300,s=r[a+32>>2],s&&(r[a+36>>2]=s,W(s)),a|0}function Q6e(a){a=a|0;var s=0;return r[a>>2]=5844,s=r[a+76>>2],s&&W(s),s=r[a+68>>2],r[a+68>>2]=0,s&&W(s),r[a>>2]=3300,s=r[a+32>>2],s&&(r[a+36>>2]=s,W(s)),a|0}function Qc(a,s){s&&(Qc(a,r[s>>2]),Qc(a,r[s+4>>2]),a=r[s+28>>2],r[s+28>>2]=0,a&&(Qc(a+12|0,r[a+16>>2]),Kc(a,r[a+4>>2]),W(a)),D[s+27|0]<0&&W(r[s+16>>2]),W(s))}function K6e(a,s,c){a=a|0,s=s|0,c=c|0;var u=0;return r[a+4>>2]=s,u=r[r[r[s+4>>2]+8>>2]+(c<<2)>>2],r[a+12>>2]=c,r[a+8>>2]=u,r[r[r[r[s+4>>2]+8>>2]+(c<<2)>>2]+28>>2]==9|0}function KB(a){return r[a+40>>2]=0,r[a+4>>2]=0,r[a+8>>2]=0,r[a>>2]=13312,r[a+12>>2]=0,r[a+16>>2]=0,r[a+20>>2]=0,r[a+24>>2]=0,r[a+28>>2]=0,r[a+32>>2]=0,zt[a+36>>1]=0,a}function J6e(a,s){a=a|0,s=s|0;var c=0;e:{if(!(pt[r[r[a>>2]+36>>2]](a,s)|0)||!(pt[r[r[a>>2]+40>>2]](a,s)|0))break e;c=pt[r[r[a>>2]+44>>2]](a)|0}return c|0}function exe(a){a=a|0;var s=0;r[a>>2]=3840,s=r[a+76>>2],s&&W(s),s=r[a+68>>2],r[a+68>>2]=0,s&&W(s),r[a>>2]=3300,s=r[a+32>>2],s&&(r[a+36>>2]=s,W(s)),W(a)}function txe(a){a=a|0;var s=0;r[a>>2]=5844,s=r[a+76>>2],s&&W(s),s=r[a+68>>2],r[a+68>>2]=0,s&&W(s),r[a>>2]=3300,s=r[a+32>>2],s&&(r[a+36>>2]=s,W(s)),W(a)}function Nte(a){a=a|0;var s=0;e:{if(!r[a- -64>>2]|!r[a+68>>2]|(!r[a+44>>2]|!r[a+48>>2])||!r[a+52>>2]|!r[a+56>>2])break e;s=r[a+92>>2]!=-1}return s|0}function nxe(a,s){a=a|0,s=s|0;var c=0;return s=r[s+88>>2],!s|r[s>>2]!=2||(c=a,a=r[s+8>>2],r[c+4>>2]=I[a|0]|I[a+1|0]<<8|(I[a+2|0]<<16|I[a+3|0]<<24),c=1),c|0}function Lte(a){a=a|0;var s=0;return r[a>>2]=2476,s=r[a+20>>2],r[a+20>>2]=0,s&&pt[r[r[s>>2]+4>>2]](s),r[a>>2]=2260,s=r[a+16>>2],r[a+16>>2]=0,s&&ha(s),a|0}function QM(a){a=a|0;var s=0;e:{if(!r[a+48>>2]|!r[a+52>>2]|(!r[a+28>>2]|!r[a+32>>2])||!r[a+36>>2]|!r[a+40>>2])break e;s=r[a+76>>2]!=-1}return s|0}function rxe(a){a=a|0;var s=0;return r[a>>2]=12836,s=r[a+48>>2],s&&(r[a+52>>2]=s,W(s)),r[a>>2]=12652,s=r[a+36>>2],s&&W(s),s=r[a+24>>2],s&&W(s),a|0}function zte(a){a=a|0;var s=0;return r[a>>2]=11900,s=r[a+48>>2],s&&(r[a+52>>2]=s,W(s)),r[a>>2]=12152,s=r[a+36>>2],s&&W(s),s=r[a+24>>2],s&&W(s),a|0}function Bte(a){a=a|0;var s=0;r[a>>2]=2476,s=r[a+20>>2],r[a+20>>2]=0,s&&pt[r[r[s>>2]+4>>2]](s),r[a>>2]=2260,s=r[a+16>>2],r[a+16>>2]=0,s&&ha(s),W(a)}function ixe(){var a=0,s=0;return s=Te(40),r[s>>2]=-1,a=s+8|0,r[a+16>>2]=0,r[a+20>>2]=0,r[a+8>>2]=0,r[a>>2]=0,r[a+4>>2]=0,r[a+24>>2]=0,r[a+28>>2]=0,s|0}function sxe(a,s){a=a|0,s=s|0;var c=0,u=0;u=r[a+4>>2];e:{if(u&&(c=1,I[u+36|0]<2))break e;c=pt[r[r[a>>2]+48>>2]](a,r[s+4>>2]-r[s>>2]>>2)|0}return c|0}function oxe(a){a=a|0;var s=0;r[a>>2]=11900,s=r[a+48>>2],s&&(r[a+52>>2]=s,W(s)),r[a>>2]=12152,s=r[a+36>>2],s&&W(s),s=r[a+24>>2],s&&W(s),W(a)}function axe(a){a=a|0;var s=0;r[a>>2]=12836,s=r[a+48>>2],s&&(r[a+52>>2]=s,W(s)),r[a>>2]=12652,s=r[a+36>>2],s&&W(s),s=r[a+24>>2],s&&W(s),W(a)}function lxe(a,s,c,u,f,h){if(a=a|0,s=s|0,c=c|0,u=u|0,f=f|0,h=h|0,W0(a,r[s+8>>2],h)){wte(s,c,u,f);return}a=r[a+8>>2],pt[r[r[a>>2]+20>>2]](a,s,c,u,f,h)}function cxe(a,s,c){a=a|0,s=s|0;e:{if(I[r[a+4>>2]+36|0]>=2&&(s=0,!(pt[r[r[a>>2]+52>>2]](a)|0)))break e;s=QB(a+24|0,r[a+16>>2])}return s|0}function uxe(){var a=0;return a=Te(108),$te(a),r[a+84>>2]=0,r[a+88>>2]=0,r[a>>2]=13696,r[a+92>>2]=0,r[a+96>>2]=0,r[a+100>>2]=0,r[a+104>>2]=0,a|0}function fxe(a,s,c){a=a|0,s=s|0,c=c|0;var u=0;e:{if(I[r[a+4>>2]+36|0]<=1&&(u=0,!(pt[r[r[a>>2]+52>>2]](a)|0)))break e;u=MB(a,s,c)}return u|0}function Ute(a,s){var c=0;c=-1;e:{if((s|0)==-1|(s|0)>4||(s=ne(s,12)+a|0,a=r[s+20>>2],(r[s+24>>2]-a|0)<=0))break e;c=r[a>>2]}return c}function KM(a,s,c,u,f,h,m){r[a>>2]=0,r[a+56>>2]=s,r[a+48>>2]=0,r[a+52>>2]=0,r[a+40>>2]=h,r[a+44>>2]=m,D[a+32|0]=f,r[a+28>>2]=u,D[a+24|0]=c}function dxe(a,s,c){a=a|0,s=s|0,c=c|0;var u=0;e:{if(I[r[a+4>>2]+36|0]<=1&&(u=0,!XB(a+24|0,r[a+8>>2],c)))break e;u=MB(a,s,c)}return u|0}function hxe(a,s,c){a=a|0,s=s|0,c=c|0;e:{if(I[r[a+4>>2]+36|0]>=2&&(s=0,!XB(a+24|0,Bv(a),c)))break e;s=QB(a+24|0,r[a+16>>2])}return s|0}function pxe(a){a=a|0;var s=0;return r[a>>2]=13696,s=r[a+96>>2],s&&(r[a+100>>2]=s,W(s)),s=r[a+84>>2],s&&(r[a+88>>2]=s,W(s)),$M(a),a|0}function mxe(a){a=a|0;var s=0;r[a>>2]=13696,s=r[a+96>>2],s&&(r[a+100>>2]=s,W(s)),s=r[a+84>>2],s&&(r[a+88>>2]=s,W(s)),$M(a),W(a)}function gxe(a){a=a|0;var s=0;return r[a>>2]=4068,s=r[a+76>>2],s&&W(s),r[a>>2]=3300,s=r[a+32>>2],s&&(r[a+36>>2]=s,W(s)),a|0}function vxe(a){a=a|0;var s=0;return r[a>>2]=6060,s=r[a+76>>2],s&&W(s),r[a>>2]=3300,s=r[a+32>>2],s&&(r[a+36>>2]=s,W(s)),a|0}function Kc(a,s){s&&(Kc(a,r[s>>2]),Kc(a,r[s+4>>2]),a=r[s+28>>2],a&&(r[s+32>>2]=a,W(a)),D[s+27|0]<0&&W(r[s+16>>2]),W(s))}function _xe(){var a=0;return a=Te(28),r[a>>2]=0,r[a+4>>2]=0,r[a+24>>2]=0,r[a+16>>2]=0,r[a+20>>2]=0,r[a+8>>2]=0,r[a+12>>2]=0,a|0}function yxe(a){a=a|0;var s=0;return r[a>>2]=2012,s=r[a+16>>2],s&&(r[a+20>>2]=s,W(s)),s=r[a+4>>2],s&&(r[a+8>>2]=s,W(s)),a|0}function JB(a){var s=0;return I[a+11|0]>>>7|0?s=r[a+4>>2]:s=I[a+11|0],s||(o8(),Xe()),I[a+11|0]>>>7|0&&(a=r[a>>2]),a}function bxe(a,s,c,u){if(a=a|0,s=s|0,c=c|0,u=u|0,W0(a,r[s+8>>2],0)){Rte(s,c,u);return}a=r[a+8>>2],pt[r[r[a>>2]+28>>2]](a,s,c,u)}function Axe(){var a=0,s=0;return a=Te(24),r[a+4>>2]=0,r[a+8>>2]=0,s=a+16|0,r[s>>2]=0,r[s+4>>2]=0,r[a>>2]=a+4,r[a+12>>2]=s,a|0}function wxe(a){a=a|0;var s=0;r[a>>2]=4068,s=r[a+76>>2],s&&W(s),r[a>>2]=3300,s=r[a+32>>2],s&&(r[a+36>>2]=s,W(s)),W(a)}function Exe(a){a=a|0;var s=0;r[a>>2]=6060,s=r[a+76>>2],s&&W(s),r[a>>2]=3300,s=r[a+32>>2],s&&(r[a+36>>2]=s,W(s)),W(a)}function Te(a){var s=0;a=a||1;e:{for(;;){if(s=bee(a),s)break e;if(s=r[4357],s){pt[s|0]();continue}break}vee(),Xe()}return s}function Wv(a,s){s&&(Wv(a,r[s>>2]),Wv(a,r[s+4>>2]),D[s+39|0]<0&&W(r[s+28>>2]),D[s+27|0]<0&&W(r[s+16>>2]),W(s))}function Yv(a,s){a=a|0,s=s|0;var c=0;e:switch(s|0){case 1:s=1;case 0:r[a+28>>2]=s,c=1;break;default:break e}return c|0}function eU(a){a=a|0;var s=0,c=0;return r[a>>2]=15200,s=r[a+4>>2]-12|0,c=r[s+8>>2]-1|0,r[s+8>>2]=c,(c|0)<0&&W(s),a|0}function Sxe(){var a=0;return a=Te(24),r[a+8>>2]=0,r[a+12>>2]=0,r[a+4>>2]=-1,r[a>>2]=1140,r[a+16>>2]=0,r[a+20>>2]=0,a|0}function Fte(a,s,c){return a=a|0,s=s|0,c=c|0,r[a+4>>2]=s,s=r[r[r[s+4>>2]+8>>2]+(c<<2)>>2],r[a+12>>2]=c,r[a+8>>2]=s,1}function JM(a){a=a|0;var s=0;return!r[a+60>>2]|!r[a+44>>2]|(!r[a+48>>2]|!r[a+52>>2])||(s=r[a+56>>2]!=0),s|0}function e8(a,s){var c=0,u=0;$f(a,s),s=r[a+28>>2],c=s,u=s+1|0,s=r[a+24>>2]+1|0,r[a+24>>2]=s,r[a+28>>2]=s?c:u}function Txe(a){a=a|0;var s=0;return r[a>>2]=4304,r[a>>2]=3300,s=r[a+32>>2],s&&(r[a+36>>2]=s,W(s)),a|0}function xxe(a){a=a|0;var s=0;return r[a>>2]=6284,r[a>>2]=3300,s=r[a+32>>2],s&&(r[a+36>>2]=s,W(s)),a|0}function Mxe(a){a=a|0;var s=0;return r[a>>2]=12152,s=r[a+36>>2],s&&W(s),s=r[a+24>>2],s&&W(s),a|0}function kxe(a){a=a|0;var s=0;return r[a>>2]=12652,s=r[a+36>>2],s&&W(s),s=r[a+24>>2],s&&W(s),a|0}function Cxe(a){a=a|0,a&&(D[a+39|0]<0&&W(r[a+28>>2]),nU(a+12|0,r[a+16>>2]),Wv(a,r[a+4>>2]),W(a))}function qv(a){a=a|0;var s=0;return!r[a+52>>2]|(!r[a+44>>2]|!r[a+48>>2])||(s=r[a+56>>2]!=0),s|0}function t8(a,s){a=a|0,s=s|0;var c=0;return r[s+56>>2]|!s|I[s+24|0]!=3||(r[a+60>>2]=s,c=1),c|0}function Pxe(a){a=a|0;var s=0;r[a>>2]=4304,r[a>>2]=3300,s=r[a+32>>2],s&&(r[a+36>>2]=s,W(s)),W(a)}function Rxe(a){a=a|0;var s=0;r[a>>2]=12152,s=r[a+36>>2],s&&W(s),s=r[a+24>>2],s&&W(s),W(a)}function Dxe(a){a=a|0;var s=0;r[a>>2]=12652,s=r[a+36>>2],s&&W(s),s=r[a+24>>2],s&&W(s),W(a)}function Oxe(a){a=a|0;var s=0;r[a>>2]=6284,r[a>>2]=3300,s=r[a+32>>2],s&&(r[a+36>>2]=s,W(s)),W(a)}function Ixe(a,s,c){a=a|0,s=s|0,c=c|0,r[a+16>>2]=0,r[a+20>>2]=0,r[a>>2]=s,r[a+8>>2]=c,r[a+12>>2]=0}function Vte(a,s){a=a|0,s=s|0;var c=0;return r[s+56>>2]|I[s+24|0]!=3||(r[a- -64>>2]=s,c=1),c|0}function tU(a){var s=0;s=r[a+16>>2],s&&(r[a+20>>2]=s,W(s)),s=r[a>>2],s&&(r[a+4>>2]=s,W(s))}function n8(a,s){a=a|0,s=s|0;var c=0;return r[s+56>>2]|I[s+24|0]!=3||(r[a+48>>2]=s,c=1),c|0}function Nxe(a,s,c,u,f,h){a=a|0,s=s|0,c=c|0,u=u|0,f=f|0,h=h|0,W0(a,r[s+8>>2],h)&&wte(s,c,u,f)}function Lxe(a){a=a|0;var s=0;return r[a>>2]=2260,s=r[a+16>>2],r[a+16>>2]=0,s&&ha(s),a|0}function zxe(a){a=a|0;var s=0;return r[a>>2]=3300,s=r[a+32>>2],s&&(r[a+36>>2]=s,W(s)),a|0}function Bxe(a){a=a|0;var s=0;return s=Bv(a),Jee(a+24|0,s||r[a+8>>2],r[r[a+4>>2]+32>>2])|0}function Uxe(a){a=a|0;var s=0;return r[a>>2]=1140,s=r[a+8>>2],s&&(r[a+12>>2]=s,W(s)),a|0}function Fxe(a){a=a|0;var s=0;r[a>>2]=2260,s=r[a+16>>2],r[a+16>>2]=0,s&&ha(s),W(a)}function Vxe(a){a=a|0;var s=0;r[a>>2]=1140,s=r[a+8>>2],s&&(r[a+12>>2]=s,W(s)),W(a)}function WA(a){a=a|0;var s=0;r[a>>2]=3300,s=r[a+32>>2],s&&(r[a+36>>2]=s,W(s)),W(a)}function Y0(a){var s=0;r[a+16>>2]=0,s=r[a>>2],r[a+4>>2]=s,r[a+12>>2]=s,s&&W(s)}function nU(a,s){s&&(nU(a,r[s>>2]),nU(a,r[s+4>>2]),Wv(s+20|0,r[s+24>>2]),W(s))}function Gxe(a){return a=a|0,r[a+44>>2]?pt[r[r[a>>2]+48>>2]](a)|0:0}function jxe(a){a=a|0;var s=0;a&&(s=r[a+8>>2],s&&(r[a+12>>2]=s,W(s)),W(a))}function Xv(a){for(var s=0;;){if(a){a=a-1&a,s=s+1|0;continue}break}return s}function Hxe(a,s,c,u){a=a|0,s=s|0,c=c|0,u=u|0,W0(a,r[s+8>>2],0)&&Rte(s,c,u)}function $xe(a,s){return a=a|0,s=s|0,a=r[a+48>>2],pt[r[r[a>>2]+20>>2]](a,s)|0}function Wxe(a,s){return a=a|0,s=s|0,a=r[a+48>>2],pt[r[r[a>>2]+12>>2]](a,s)|0}function Yxe(a,s){return a=a|0,s=s|0,a=r[a+48>>2],pt[r[r[a>>2]+16>>2]](a,s)|0}function Jm(){var a=0;return a=Te(12),r[a>>2]=0,r[a+4>>2]=0,r[a+8>>2]=0,a|0}function e1(a){a=a|0;var s=0;a&&(s=r[a>>2],s&&(r[a+4>>2]=s,W(s)),W(a))}function Yi(a){var s=0;return s=a&31,a=0-a&31,(-1>>>s&-2)<<s|(-1<<a&-2)>>>a}function qxe(a){a=a|0,a&&(Qc(a+12|0,r[a+16>>2]),Kc(a,r[a+4>>2]),W(a))}function Xxe(a,s,c){return a=a|0,s=s|0,c=c|0,r[a+32>>2]=c,r[a+28>>2]=s,1}function Gte(a,s,c){e:{if(r[c+76>>2]<0){a=GB(a,s,c);break e}a=GB(a,s,c)}}function Zxe(a,s){return s=s|0,D[s+84|0]=1,r[s+72>>2]=r[s+68>>2],1}function Qxe(a){return a=a|0,a=r[a+48>>2],pt[r[r[a>>2]+24>>2]](a)|0}function Kxe(a){return a=a|0,a=r[a+48>>2],pt[r[r[a>>2]+28>>2]](a)|0}function Jxe(a){return a=a|0,a=r[a+48>>2],pt[r[r[a>>2]+36>>2]](a)|0}function eMe(){var a=0;return a=Te(8),r[a+4>>2]=-1,r[a>>2]=1032,a|0}function tMe(a,s,c){return s=s|0,c=c|0,r[r[s+8>>2]+(c<<2)>>2]}function nMe(a,s){return a=a|0,Qee(a+24|0,Bv(a),r[a+8>>2])|0}function rMe(a,s){return a=a|0,nte(a+24|0,Bv(a),r[a+8>>2])|0}function iMe(a,s){return a=a|0,s=s|0,pt[r[r[a>>2]+56>>2]](a,s)|0}function sMe(a,s){return a=a|0,s=s|0,r[a+12>>2]=-1,r[a+8>>2]=s,1}function jte(a,s){return a=a|0,s=s|0,pt[r[r[a>>2]+12>>2]](a,s)|0}function oMe(a){a=a|0,a&&(D[a+15|0]<0&&W(r[a+4>>2]),W(a))}function aMe(a,s){return a=a|0,s=s|0,_e(At[r[a+8>>2]+(s<<2)>>2])}function lMe(a,s){return a=a|0,s=s|0,_e(At[r[a>>2]+(s<<2)>>2])}function cMe(a){return a=a|0,(r[a+100>>2]-r[a+96>>2]|0)/12|0}function uMe(a){return a=a|0,(D[a+15|0]<0?r[a+4>>2]:a+4|0)|0}function fMe(a,s){return a=a|0,s=s|0,r[r[a+4>>2]+(s<<2)>>2]}function dMe(a,s,c,u){return nn=0,0}function Hte(a,s){return a=a|0,s=s|0,r[r[a>>2]+(s<<2)>>2]}function hMe(a,s){return a=a|0,s=s|0,zt[r[a>>2]+(s<<1)>>1]}function pMe(a,s){return a=a|0,s=s|0,Ut[r[a>>2]+(s<<1)>>1]}function mMe(a,s,c){return s=s|0,c=c|0,Ute(s,c)|0}function $te(a){return r[a>>2]=13756,Ct(a+4|0,0,80),a}function Wte(a){return a?31-Ms(a-1^a)|0:32}function Yte(a){return a=a|0,r[a+12>>2]-r[a+8>>2]>>2}function r8(a){a=a|0,a&&pt[r[r[a>>2]+4>>2]](a)}function gMe(a,s){return a=a|0,s=s|0,D[r[a>>2]+s|0]}function vMe(a,s){return a=a|0,s=s|0,I[r[a>>2]+s|0]}function _Me(a){return a=a|0,r[a+8>>2]-r[a+4>>2]>>2}function rU(a,s){return a=a|0,s=s|0,r[a+4>>2]=s,1}function qte(a){return a=a|0,r[a+4>>2]-r[a>>2]>>1}function iU(a){return a=a|0,r[a+4>>2]-r[a>>2]>>2}function Xte(a){return a=a|0,r[a+4>>2]-r[a>>2]|0}function Zte(a){KB(a),r[a+44>>2]=0,r[a>>2]=11208}function Zv(a,s,c){I[a|0]&32||GB(s,c,a)}function yMe(a,s){return s=s|0,r[s+4>>2]}function bMe(a,s,c){return 1}function AMe(a,s){return s=s|0,D[s+24|0]}function wMe(a,s){return s=s|0,r[s+8>>2]}function EMe(a){return a=a|0,r[a>>2]=10060,a|0}function SMe(a){return a=a|0,D[r[a+8>>2]+24|0]}function TMe(a){return a=a|0,r[a>>2]=7172,a|0}function xMe(a){return a=a|0,r[a>>2]=8108,a|0}function MMe(a){return a=a|0,PSe(r[a+60>>2])|0}function kMe(a){return a=a|0,r[a>>2]=9056,a|0}function CMe(a){return a=a|0,_e(At[a+20>>2])}function PMe(a){a=a|0,r[a>>2]=10060,W(a)}function RMe(){r[4227]=16796,r[4209]=42}function DMe(a){a=a|0,r[a>>2]=7172,W(a)}function OMe(a){a=a|0,r[a>>2]=8108,W(a)}function IMe(a){a=a|0,r[a>>2]=9056,W(a)}function NMe(a){return a=a|0,r[a+88>>2]}function LMe(a){return a=a|0,r[a+56>>2]}function zMe(a){return a=a|0,r[a+40>>2]}function BMe(a){return a=a|0,r[a+48>>2]}function UMe(a){return a=a|0,r[a+60>>2]}function Lp(a){return a=a|0,r[a+28>>2]}function sU(a){return a=a|0,r[a+80>>2]}function FMe(a,s){return 2}function oU(a,s){return-1}function VMe(a){return a=a|0,D[a+24|0]}function GMe(a){return a=a|0,I[a+32|0]}function Qd(a){return a=a|0,r[a+4>>2]}function jMe(a){return a=a|0,!r[a>>2]|0}function aU(a){return a=a|0,r[a+8>>2]}function Qte(a,s){return 6}function Kte(a,s){return 1}function tl(a,s){return 0}function Jte(a){return a=a|0,r[a>>2]}function Qv(a,s,c){c&&$e(a,s,c)}function HMe(){return $v(Te(64))|0}function $Me(){return $te(Te(84))|0}function lU(a){a=a|0,a&&W(a)}function WMe(a){a=a|0,eU(a),W(a)}function YMe(a){return 1283}function Wf(a){return a=a|0,a|0}function qMe(a){a=a|0,W(gte(a))}function XMe(a){a=a|0,W(ate(a))}function ZMe(a){a=a|0,W(Zee(a))}function QMe(a){a=a|0,W($M(a))}function KMe(a){a=a|0,W(eU(a))}function JMe(a){a=a|0,W(ite(a))}function cU(a){return 3}function ene(a){return 4}function tne(a){return 5}function YA(a){return 2}function Kv(a){return 6}function As(a){return 1}function q0(a){return 0}function Jc(a){a=a|0,W(a)}function eu(){qn(1276),Xe()}function mc(){qn(1323),Xe()}function zp(a){Xe()}function e8e(){return 10}function t8e(){return 11}function n8e(){return 12}function jt(){eu(),Xe()}function r8e(){return 5}function i8e(){return 6}function s8e(){return 7}function nne(){return 3}function o8e(){return 8}function rne(){return 4}function i8(){return-1}function a8e(){return 9}function s8(){return 1}function l8e(){return-2}function c8e(){return-3}function u8e(){return-4}function f8e(){return-5}function qA(){return 0}function uU(){return 2}function ps(){o8(),Xe()}function o8(){vee(),Xe()}function ine(a){}Hn=I,Rp();var pt=Zn([null,Wf,Jc,YA,nxe,I6e,TTe,nte,D6e,XB,c6e,Qte,FMe,eU,Uxe,Vxe,As,STe,HTe,tTe,Qee,r6e,Jee,Qte,AMe,yxe,zp,Xxe,Fee,J6e,fMe,_Me,Lp,tl,o8,Kte,As,gte,qMe,nTe,FSe,qSe,Lxe,Fxe,Fte,sMe,W6e,bMe,Kte,qTe,VTe,t6e,n6e,ETe,KTe,G6e,g6e,v6e,_Te,GTe,Lte,Bte,Fte,sxe,ITe,MB,USe,SMe,HSe,zxe,WA,As,Qd,qv,q0,oU,tl,q0,As,zTe,iTe,zp,zp,WA,YA,qv,ZSe,N6e,B6e,ene,qv,Uee,VSe,Z6e,exe,cU,JM,As,tl,t8,Wee,JSe,gxe,wxe,tne,JM,As,tl,t8,Yee,WSe,Txe,Pxe,Kv,Nte,As,tl,Vte,Kee,sTe,Wf,Jc,Yv,Lp,kv,zp,WA,As,qv,rTe,zp,WA,YA,qv,QSe,z6e,U6e,ene,qv,Uee,jSe,Q6e,txe,cU,JM,As,tl,t8,Wee,eTe,vxe,Exe,tne,JM,As,tl,t8,Yee,YSe,xxe,Oxe,Kv,Nte,As,tl,Vte,Kee,oTe,Wf,Jc,Yv,Lp,Cv,zp,WA,q0,As,vTe,Lte,Bte,Y6e,hxe,dxe,KSe,YA,rMe,TMe,DMe,Kv,Qd,QM,As,tl,n8,As,YA,ste,cTe,Wf,Jc,Yv,Lp,kv,xMe,OMe,Kv,QM,As,tl,n8,ste,uTe,Wf,Jc,Yv,Lp,Cv,Wf,Jc,q0,As,q0,oU,tl,YTe,$Te,kMe,IMe,Kv,Qd,QM,As,tl,n8,As,cU,ote,aTe,Wf,Jc,Yv,Lp,kv,EMe,PMe,Kv,QM,As,tl,n8,ote,lTe,Wf,Jc,Yv,Lp,Cv,Jc,q0,As,q0,oU,tl,ZTe,WTe,P6e,R6e,K6e,cxe,fxe,iMe,Bxe,nMe,w6e,zp,As,As,Gxe,ATe,L6e,As,q0,tl,tl,d6e,h6e,$Se,$xe,Kxe,Jxe,Wxe,Yxe,Qxe,ate,XMe,rU,UB,FB,AB,LSe,As,Qd,aU,ite,JMe,rU,UB,FB,AB,NSe,As,Qd,aU,Zee,ZMe,rU,UB,FB,AB,ISe,As,Qd,aU,zte,oxe,Ete,Mxe,Rxe,A6e,E6e,MTe,xTe,S6e,T6e,_6e,kxe,Dxe,H6e,q6e,kTe,FTe,rxe,axe,$6e,X6e,CTe,LTe,qB,pte,XSe,Wf,Jc,Zxe,i6e,zp,q0,As,qB,NTe,p6e,qB,pte,m6e,pxe,mxe,wTe,V6e,$M,QMe,jee,Nee,MMe,DTe,F6e,q0,dMe,Wf,Jc,ine,ine,PTe,Nxe,u6e,Hxe,Jc,lxe,QTe,bxe,Wf,Jc,YMe,KMe,Qd,WMe]);function sne(){return yo.byteLength/65536|0}function d8e(a){a=a|0;var s=sne()|0,c=s+a|0;if(s<c&&c<65536){var u=new ArrayBuffer(ne(c,65536)),f=new Int8Array(u);f.set(D),D=new Int8Array(u),zt=new Int16Array(u),r=new Int32Array(u),I=new Uint8Array(u),Ut=new Uint16Array(u),Ue=new Uint32Array(u),At=new Float32Array(u),Zc=new Float64Array(u),yo=u,ju.buffer=yo,Hn=I}return s}return{j:RMe,k:pt,l:lU,m:C6e,n:Ixe,o:lU,p:ixe,q:Jte,r:jxe,s:HMe,t:lU,u:O6e,v:sU,w:NMe,x:LMe,y:Lp,z:VMe,A:GMe,B:zMe,C:BMe,D:UMe,E:ha,F:Sxe,G:jte,H:Qd,I:aMe,J:CMe,K:r8,L:eMe,M:jte,N:Qd,O:r8,P:$Me,Q:Yte,R:sU,S:r8,T:uxe,U:cMe,V:Yte,W:sU,X:r8,Y:Axe,Z:qxe,_:Jte,$:jMe,aa:uMe,ba:oMe,ca:Jm,da:lMe,ea:iU,fa:e1,ga:Jm,ha:gMe,ia:Xte,ja:e1,ka:Jm,la:vMe,ma:Xte,na:e1,oa:Jm,pa:hMe,qa:qte,ra:e1,sa:Jm,ta:pMe,ua:qte,va:e1,wa:Jm,xa:Hte,ya:iU,za:e1,Aa:Jm,Ba:Hte,Ca:iU,Da:e1,Ea:_xe,Fa:OTe,Ga:e6e,Ha:RTe,Ia:XTe,Ja:l6e,Ka:wMe,La:dTe,Ma:k6e,Na:j6e,Oa:BTe,Pa:UTe,Qa:mMe,Ra:JTe,Sa:jTe,Ta:tMe,Ua:x6e,Va:yMe,Wa:b6e,Xa:M6e,Ya:BSe,Za:f6e,_a:y6e,$a:a6e,ab:hTe,bb:$ee,cb:yTe,db:bTe,eb:mTe,fb:gTe,gb:$ee,hb:pTe,ib:zSe,jb:GSe,kb:fTe,lb:s6e,mb:o6e,nb:Cxe,ob:i8,pb:qA,qb:s8,rb:uU,sb:i8,tb:qA,ub:s8,vb:uU,wb:nne,xb:rne,yb:i8,zb:qA,Ab:s8,Bb:qA,Cb:s8,Db:uU,Eb:nne,Fb:rne,Gb:r8e,Hb:i8e,Ib:s8e,Jb:o8e,Kb:a8e,Lb:e8e,Mb:t8e,Nb:n8e,Ob:qA,Pb:i8,Qb:l8e,Rb:c8e,Sb:u8e,Tb:f8e,Ub:bee,Vb:W}}return xSe(Bt)}(gi)},instantiate:function(ee,ve){return{then:function(Ye){var Bt=new q.Module(ee);Ye({instance:new q.Instance(Bt)})}}},RuntimeError:Error};F=[],typeof q!="object"&&he("no native wasm support detected");var fe,ue=!1;function J(ee,ve){ee||he(ve)}var le=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function me(ee,ve,Ye){for(var Bt=ve+Ye,Zn=ve;ee[Zn]&&!(Zn>=Bt);)++Zn;if(Zn-ve>16&&ee.subarray&&le)return le.decode(ee.subarray(ve,Zn));for(var Hn="";ve<Zn;){var Tr=ee[ve++];if(!(Tr&128)){Hn+=String.fromCharCode(Tr);continue}var gr=ee[ve++]&63;if((Tr&224)==192){Hn+=String.fromCharCode((Tr&31)<<6|gr);continue}var vr=ee[ve++]&63;if((Tr&240)==224?Tr=(Tr&15)<<12|gr<<6|vr:Tr=(Tr&7)<<18|gr<<12|vr<<6|ee[ve++]&63,Tr<65536)Hn+=String.fromCharCode(Tr);else{var Rp=Tr-65536;Hn+=String.fromCharCode(55296|Rp>>10,56320|Rp&1023)}}return Hn}function be(ee,ve){return ee?me(Se,ee,ve):""}function ye(ee,ve,Ye,Bt){if(!(Bt>0))return 0;for(var Zn=Ye,Hn=Ye+Bt-1,Tr=0;Tr<ee.length;++Tr){var gr=ee.charCodeAt(Tr);if(gr>=55296&&gr<=57343){var vr=ee.charCodeAt(++Tr);gr=65536+((gr&1023)<<10)|vr&1023}if(gr<=127){if(Ye>=Hn)break;ve[Ye++]=gr}else if(gr<=2047){if(Ye+1>=Hn)break;ve[Ye++]=192|gr>>6,ve[Ye++]=128|gr&63}else if(gr<=65535){if(Ye+2>=Hn)break;ve[Ye++]=224|gr>>12,ve[Ye++]=128|gr>>6&63,ve[Ye++]=128|gr&63}else{if(Ye+3>=Hn)break;ve[Ye++]=240|gr>>18,ve[Ye++]=128|gr>>12&63,ve[Ye++]=128|gr>>6&63,ve[Ye++]=128|gr&63}}return ve[Ye]=0,Ye-Zn}function pe(ee){for(var ve=0,Ye=0;Ye<ee.length;++Ye){var Bt=ee.charCodeAt(Ye);Bt>=55296&&Bt<=57343&&(Bt=65536+((Bt&1023)<<10)|ee.charCodeAt(++Ye)&1023),Bt<=127?++ve:Bt<=2047?ve+=2:Bt<=65535?ve+=3:ve+=4}return ve}function oe(ee,ve){return ee%ve>0&&(ee+=ve-ee%ve),ee}var Ce,it,Se,Oe;function ct(ee){Ce=ee,l.HEAP8=it=new Int8Array(ee),l.HEAP16=new Int16Array(ee),l.HEAP32=Oe=new Int32Array(ee),l.HEAPU8=Se=new Uint8Array(ee),l.HEAPU16=new Uint16Array(ee),l.HEAPU32=new Uint32Array(ee),l.HEAPF32=new Float32Array(ee),l.HEAPF64=new Float64Array(ee)}var _t=l.INITIAL_MEMORY||16777216;l.wasmMemory?fe=l.wasmMemory:fe=new q.Memory({initial:_t/65536,maximum:32768}),fe&&(Ce=fe.buffer),_t=Ce.byteLength,ct(Ce);var Nt,Je=[],ot=[],fn=[],Ht=!1;function Re(){if(l.preRun)for(typeof l.preRun=="function"&&(l.preRun=[l.preRun]);l.preRun.length;)ht(l.preRun.shift());lt(Je)}function Lt(){Ht=!0,lt(ot)}function mt(){if(l.postRun)for(typeof l.postRun=="function"&&(l.postRun=[l.postRun]);l.postRun.length;)Mt(l.postRun.shift());lt(fn)}function ht(ee){Je.unshift(ee)}function at(ee){ot.unshift(ee)}function Mt(ee){fn.unshift(ee)}var Ot=0,It=null;function Zt(ee){Ot++,l.monitorRunDependencies&&l.monitorRunDependencies(Ot)}function ke(ee){if(Ot--,l.monitorRunDependencies&&l.monitorRunDependencies(Ot),Ot==0&&It){var ve=It;It=null,ve()}}l.preloadedImages={},l.preloadedAudios={};function he(ee){l.onAbort&&l.onAbort(ee),ee="Aborted("+ee+")",j(ee),ue=!0,ee+=". Build with -s ASSERTIONS=1 for more info.";var ve=new q.RuntimeError(ee);throw g(ve),ve}var tt="data:application/octet-stream;base64,";function wt(ee){return ee.startsWith(tt)}function St(ee){return ee.startsWith("file://")}var De;De="draco_decoder.wasm",wt(De)||(De=x(De));function nt(ee){try{if(ee==De&&F)return new Uint8Array(F);var ve=mr(ee);if(ve)return ve;if(O)return O(ee);throw"both async and sync fetching of the wasm failed"}catch(Ye){he(Ye)}}function Et(){if(!F&&(E||S)){if(typeof fetch=="function"&&!St(De))return fetch(De,{credentials:"same-origin"}).then(function(ee){if(!ee.ok)throw"failed to load wasm binary file at '"+De+"'";return ee.arrayBuffer()}).catch(function(){return nt(De)});if(P)return new Promise(function(ee,ve){P(De,function(Ye){ee(new Uint8Array(Ye))},ve)})}return Promise.resolve().then(function(){return nt(De)})}function Qe(){var ee={a:gi};function ve(Tr,gr){var vr=Tr.exports;l.asm=vr,Nt=l.asm.k,at(l.asm.j),ke()}Zt();function Ye(Tr){ve(Tr.instance)}function Bt(Tr){return Et().then(function(gr){return q.instantiate(gr,ee)}).then(function(gr){return gr}).then(Tr,function(gr){j("failed to asynchronously prepare wasm: "+gr),he(gr)})}function Zn(){return!F&&typeof q.instantiateStreaming=="function"&&!wt(De)&&!St(De)&&typeof fetch=="function"?fetch(De,{credentials:"same-origin"}).then(function(Tr){var gr=q.instantiateStreaming(Tr,ee);return gr.then(Ye,function(vr){return j("wasm streaming compile failed: "+vr),j("falling back to ArrayBuffer instantiation"),Bt(Ye)})}):Bt(Ye)}if(l.instantiateWasm)try{var Hn=l.instantiateWasm(ee,ve);return Hn}catch(Tr){return j("Module.instantiateWasm callback failed with error: "+Tr),!1}return Zn().catch(g),{}}function lt(ee){for(;ee.length>0;){var ve=ee.shift();if(typeof ve=="function"){ve(l);continue}var Ye=ve.func;typeof Ye=="number"?ve.arg===void 0?ft(Ye)():ft(Ye)(ve.arg):Ye(ve.arg===void 0?null:ve.arg)}}var xt=[];function ft(ee){var ve=xt[ee];return ve||(ee>=xt.length&&(xt.length=ee+1),xt[ee]=ve=Nt.get(ee)),ve}function Cn(ee){return hee(ee+16)+16}function Rn(ee){this.excPtr=ee,this.ptr=ee-16,this.set_type=function(ve){Oe[this.ptr+4>>2]=ve},this.get_type=function(){return Oe[this.ptr+4>>2]},this.set_destructor=function(ve){Oe[this.ptr+8>>2]=ve},this.get_destructor=function(){return Oe[this.ptr+8>>2]},this.set_refcount=function(ve){Oe[this.ptr>>2]=ve},this.set_caught=function(ve){ve=ve?1:0,it[this.ptr+12>>0]=ve},this.get_caught=function(){return it[this.ptr+12>>0]!=0},this.set_rethrown=function(ve){ve=ve?1:0,it[this.ptr+13>>0]=ve},this.get_rethrown=function(){return it[this.ptr+13>>0]!=0},this.init=function(ve,Ye){this.set_type(ve),this.set_destructor(Ye),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var ve=Oe[this.ptr>>2];Oe[this.ptr>>2]=ve+1},this.release_ref=function(){var ve=Oe[this.ptr>>2];return Oe[this.ptr>>2]=ve-1,ve===1}}function dn(ee,ve,Ye){var Bt=new Rn(ee);throw Bt.init(ve,Ye),ee}function Qt(){he("")}function vn(ee,ve,Ye){Se.copyWithin(ee,ve,ve+Ye)}function Yn(ee){try{return fe.grow(ee-Ce.byteLength+65535>>>16),ct(fe.buffer),1}catch{}}function ir(ee){var ve=Se.length;ee=ee>>>0;var Ye=2147483648;if(ee>Ye)return!1;for(var Bt=1;Bt<=4;Bt*=2){var Zn=ve*(1+.2/Bt);Zn=Math.min(Zn,ee+100663296);var Hn=Math.min(Ye,oe(Math.max(ee,Zn),65536)),Tr=Yn(Hn);if(Tr)return!0}return!1}var li={mappings:{},buffers:[null,[],[]],printChar:function(ee,ve){var Ye=li.buffers[ee];ve===0||ve===10?((ee===1?G:j)(me(Ye,0)),Ye.length=0):Ye.push(ve)},varargs:void 0,get:function(){li.varargs+=4;var ee=Oe[li.varargs-4>>2];return ee},getStr:function(ee){var ve=be(ee);return ve},get64:function(ee,ve){return ee}};function st(ee){return 0}function sn(ee,ve,Ye,Bt,Zn){}function gt(ee,ve,Ye,Bt){for(var Zn=0,Hn=0;Hn<Ye;Hn++){var Tr=Oe[ve>>2],gr=Oe[ve+4>>2];ve+=8;for(var vr=0;vr<gr;vr++)li.printChar(ee,Se[Tr+vr]);Zn+=gr}return Oe[Bt>>2]=Zn,0}function on(ee,ve,Ye){var Bt=pe(ee)+1,Zn=new Array(Bt);return ye(ee,Zn,0,Zn.length),Zn}function _n(ee){for(var ve=[],Ye=0;Ye<ee.length;Ye++){var Bt=ee[Ye];Bt>255&&(Bt&=255),ve.push(String.fromCharCode(Bt))}return ve.join("")}var Sr=typeof atob=="function"?atob:function(ee){var ve="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Ye="",Bt,Zn,Hn,Tr,gr,vr,Rp,Dp=0;ee=ee.replace(/[^A-Za-z0-9\+\/\=]/g,"");do Tr=ve.indexOf(ee.charAt(Dp++)),gr=ve.indexOf(ee.charAt(Dp++)),vr=ve.indexOf(ee.charAt(Dp++)),Rp=ve.indexOf(ee.charAt(Dp++)),Bt=Tr<<2|gr>>4,Zn=(gr&15)<<4|vr>>2,Hn=(vr&3)<<6|Rp,Ye=Ye+String.fromCharCode(Bt),vr!==64&&(Ye=Ye+String.fromCharCode(Zn)),Rp!==64&&(Ye=Ye+String.fromCharCode(Hn));while(Dp<ee.length);return Ye};function si(ee){if(typeof M=="boolean"&&M){var ve=Buffer.from(ee,"base64");return new Uint8Array(ve.buffer,ve.byteOffset,ve.byteLength)}try{for(var Ye=Sr(ee),Bt=new Uint8Array(Ye.length),Zn=0;Zn<Ye.length;++Zn)Bt[Zn]=Ye.charCodeAt(Zn);return Bt}catch{throw new Error("Converting base64 string to bytes failed.")}}function mr(ee){if(wt(ee))return si(ee.slice(tt.length))}var gi={i:Cn,h:dn,b:Qt,g:vn,e:ir,f:st,d:sn,c:gt,a:fe};Qe(),l.___wasm_call_ctors=function(){return(l.___wasm_call_ctors=l.asm.j).apply(null,arguments)};var qr=l._emscripten_bind_VoidPtr___destroy___0=function(){return(qr=l._emscripten_bind_VoidPtr___destroy___0=l.asm.l).apply(null,arguments)},ji=l._emscripten_bind_DecoderBuffer_DecoderBuffer_0=function(){return(ji=l._emscripten_bind_DecoderBuffer_DecoderBuffer_0=l.asm.m).apply(null,arguments)},Ks=l._emscripten_bind_DecoderBuffer_Init_2=function(){return(Ks=l._emscripten_bind_DecoderBuffer_Init_2=l.asm.n).apply(null,arguments)},zu=l._emscripten_bind_DecoderBuffer___destroy___0=function(){return(zu=l._emscripten_bind_DecoderBuffer___destroy___0=l.asm.o).apply(null,arguments)},Ff=l._emscripten_bind_AttributeTransformData_AttributeTransformData_0=function(){return(Ff=l._emscripten_bind_AttributeTransformData_AttributeTransformData_0=l.asm.p).apply(null,arguments)},Yc=l._emscripten_bind_AttributeTransformData_transform_type_0=function(){return(Yc=l._emscripten_bind_AttributeTransformData_transform_type_0=l.asm.q).apply(null,arguments)},Vf=l._emscripten_bind_AttributeTransformData___destroy___0=function(){return(Vf=l._emscripten_bind_AttributeTransformData___destroy___0=l.asm.r).apply(null,arguments)},Ka=l._emscripten_bind_GeometryAttribute_GeometryAttribute_0=function(){return(Ka=l._emscripten_bind_GeometryAttribute_GeometryAttribute_0=l.asm.s).apply(null,arguments)},go=l._emscripten_bind_GeometryAttribute___destroy___0=function(){return(go=l._emscripten_bind_GeometryAttribute___destroy___0=l.asm.t).apply(null,arguments)},vi=l._emscripten_bind_PointAttribute_PointAttribute_0=function(){return(vi=l._emscripten_bind_PointAttribute_PointAttribute_0=l.asm.u).apply(null,arguments)},rc=l._emscripten_bind_PointAttribute_size_0=function(){return(rc=l._emscripten_bind_PointAttribute_size_0=l.asm.v).apply(null,arguments)},qc=l._emscripten_bind_PointAttribute_GetAttributeTransformData_0=function(){return(qc=l._emscripten_bind_PointAttribute_GetAttributeTransformData_0=l.asm.w).apply(null,arguments)},K=l._emscripten_bind_PointAttribute_attribute_type_0=function(){return(K=l._emscripten_bind_PointAttribute_attribute_type_0=l.asm.x).apply(null,arguments)},$=l._emscripten_bind_PointAttribute_data_type_0=function(){return($=l._emscripten_bind_PointAttribute_data_type_0=l.asm.y).apply(null,arguments)},Q=l._emscripten_bind_PointAttribute_num_components_0=function(){return(Q=l._emscripten_bind_PointAttribute_num_components_0=l.asm.z).apply(null,arguments)},te=l._emscripten_bind_PointAttribute_normalized_0=function(){return(te=l._emscripten_bind_PointAttribute_normalized_0=l.asm.A).apply(null,arguments)},ce=l._emscripten_bind_PointAttribute_byte_stride_0=function(){return(ce=l._emscripten_bind_PointAttribute_byte_stride_0=l.asm.B).apply(null,arguments)},ae=l._emscripten_bind_PointAttribute_byte_offset_0=function(){return(ae=l._emscripten_bind_PointAttribute_byte_offset_0=l.asm.C).apply(null,arguments)},xe=l._emscripten_bind_PointAttribute_unique_id_0=function(){return(xe=l._emscripten_bind_PointAttribute_unique_id_0=l.asm.D).apply(null,arguments)},Ne=l._emscripten_bind_PointAttribute___destroy___0=function(){return(Ne=l._emscripten_bind_PointAttribute___destroy___0=l.asm.E).apply(null,arguments)},je=l._emscripten_bind_AttributeQuantizationTransform_AttributeQuantizationTransform_0=function(){return(je=l._emscripten_bind_AttributeQuantizationTransform_AttributeQuantizationTransform_0=l.asm.F).apply(null,arguments)},Ve=l._emscripten_bind_AttributeQuantizationTransform_InitFromAttribute_1=function(){return(Ve=l._emscripten_bind_AttributeQuantizationTransform_InitFromAttribute_1=l.asm.G).apply(null,arguments)},Ke=l._emscripten_bind_AttributeQuantizationTransform_quantization_bits_0=function(){return(Ke=l._emscripten_bind_AttributeQuantizationTransform_quantization_bits_0=l.asm.H).apply(null,arguments)},dt=l._emscripten_bind_AttributeQuantizationTransform_min_value_1=function(){return(dt=l._emscripten_bind_AttributeQuantizationTransform_min_value_1=l.asm.I).apply(null,arguments)},bt=l._emscripten_bind_AttributeQuantizationTransform_range_0=function(){return(bt=l._emscripten_bind_AttributeQuantizationTransform_range_0=l.asm.J).apply(null,arguments)},un=l._emscripten_bind_AttributeQuantizationTransform___destroy___0=function(){return(un=l._emscripten_bind_AttributeQuantizationTransform___destroy___0=l.asm.K).apply(null,arguments)},Xn=l._emscripten_bind_AttributeOctahedronTransform_AttributeOctahedronTransform_0=function(){return(Xn=l._emscripten_bind_AttributeOctahedronTransform_AttributeOctahedronTransform_0=l.asm.L).apply(null,arguments)},kn=l._emscripten_bind_AttributeOctahedronTransform_InitFromAttribute_1=function(){return(kn=l._emscripten_bind_AttributeOctahedronTransform_InitFromAttribute_1=l.asm.M).apply(null,arguments)},Bi=l._emscripten_bind_AttributeOctahedronTransform_quantization_bits_0=function(){return(Bi=l._emscripten_bind_AttributeOctahedronTransform_quantization_bits_0=l.asm.N).apply(null,arguments)},jn=l._emscripten_bind_AttributeOctahedronTransform___destroy___0=function(){return(jn=l._emscripten_bind_AttributeOctahedronTransform___destroy___0=l.asm.O).apply(null,arguments)},Un=l._emscripten_bind_PointCloud_PointCloud_0=function(){return(Un=l._emscripten_bind_PointCloud_PointCloud_0=l.asm.P).apply(null,arguments)},Or=l._emscripten_bind_PointCloud_num_attributes_0=function(){return(Or=l._emscripten_bind_PointCloud_num_attributes_0=l.asm.Q).apply(null,arguments)},hr=l._emscripten_bind_PointCloud_num_points_0=function(){return(hr=l._emscripten_bind_PointCloud_num_points_0=l.asm.R).apply(null,arguments)},Qo=l._emscripten_bind_PointCloud___destroy___0=function(){return(Qo=l._emscripten_bind_PointCloud___destroy___0=l.asm.S).apply(null,arguments)},co=l._emscripten_bind_Mesh_Mesh_0=function(){return(co=l._emscripten_bind_Mesh_Mesh_0=l.asm.T).apply(null,arguments)},Ta=l._emscripten_bind_Mesh_num_faces_0=function(){return(Ta=l._emscripten_bind_Mesh_num_faces_0=l.asm.U).apply(null,arguments)},Ja=l._emscripten_bind_Mesh_num_attributes_0=function(){return(Ja=l._emscripten_bind_Mesh_num_attributes_0=l.asm.V).apply(null,arguments)},hs=l._emscripten_bind_Mesh_num_points_0=function(){return(hs=l._emscripten_bind_Mesh_num_points_0=l.asm.W).apply(null,arguments)},xa=l._emscripten_bind_Mesh___destroy___0=function(){return(xa=l._emscripten_bind_Mesh___destroy___0=l.asm.X).apply(null,arguments)},Ro=l._emscripten_bind_Metadata_Metadata_0=function(){return(Ro=l._emscripten_bind_Metadata_Metadata_0=l.asm.Y).apply(null,arguments)},Vs=l._emscripten_bind_Metadata___destroy___0=function(){return(Vs=l._emscripten_bind_Metadata___destroy___0=l.asm.Z).apply(null,arguments)},Ma=l._emscripten_bind_Status_code_0=function(){return(Ma=l._emscripten_bind_Status_code_0=l.asm._).apply(null,arguments)},Il=l._emscripten_bind_Status_ok_0=function(){return(Il=l._emscripten_bind_Status_ok_0=l.asm.$).apply(null,arguments)},is=l._emscripten_bind_Status_error_msg_0=function(){return(is=l._emscripten_bind_Status_error_msg_0=l.asm.aa).apply(null,arguments)},Pi=l._emscripten_bind_Status___destroy___0=function(){return(Pi=l._emscripten_bind_Status___destroy___0=l.asm.ba).apply(null,arguments)},CA=l._emscripten_bind_DracoFloat32Array_DracoFloat32Array_0=function(){return(CA=l._emscripten_bind_DracoFloat32Array_DracoFloat32Array_0=l.asm.ca).apply(null,arguments)},PA=l._emscripten_bind_DracoFloat32Array_GetValue_1=function(){return(PA=l._emscripten_bind_DracoFloat32Array_GetValue_1=l.asm.da).apply(null,arguments)},wv=l._emscripten_bind_DracoFloat32Array_size_0=function(){return(wv=l._emscripten_bind_DracoFloat32Array_size_0=l.asm.ea).apply(null,arguments)},RA=l._emscripten_bind_DracoFloat32Array___destroy___0=function(){return(RA=l._emscripten_bind_DracoFloat32Array___destroy___0=l.asm.fa).apply(null,arguments)},Gm=l._emscripten_bind_DracoInt8Array_DracoInt8Array_0=function(){return(Gm=l._emscripten_bind_DracoInt8Array_DracoInt8Array_0=l.asm.ga).apply(null,arguments)},jm=l._emscripten_bind_DracoInt8Array_GetValue_1=function(){return(jm=l._emscripten_bind_DracoInt8Array_GetValue_1=l.asm.ha).apply(null,arguments)},Bu=l._emscripten_bind_DracoInt8Array_size_0=function(){return(Bu=l._emscripten_bind_DracoInt8Array_size_0=l.asm.ia).apply(null,arguments)},Hd=l._emscripten_bind_DracoInt8Array___destroy___0=function(){return(Hd=l._emscripten_bind_DracoInt8Array___destroy___0=l.asm.ja).apply(null,arguments)},Ev=l._emscripten_bind_DracoUInt8Array_DracoUInt8Array_0=function(){return(Ev=l._emscripten_bind_DracoUInt8Array_DracoUInt8Array_0=l.asm.ka).apply(null,arguments)},Sv=l._emscripten_bind_DracoUInt8Array_GetValue_1=function(){return(Sv=l._emscripten_bind_DracoUInt8Array_GetValue_1=l.asm.la).apply(null,arguments)},wM=l._emscripten_bind_DracoUInt8Array_size_0=function(){return(wM=l._emscripten_bind_DracoUInt8Array_size_0=l.asm.ma).apply(null,arguments)},j0=l._emscripten_bind_DracoUInt8Array___destroy___0=function(){return(j0=l._emscripten_bind_DracoUInt8Array___destroy___0=l.asm.na).apply(null,arguments)},EM=l._emscripten_bind_DracoInt16Array_DracoInt16Array_0=function(){return(EM=l._emscripten_bind_DracoInt16Array_DracoInt16Array_0=l.asm.oa).apply(null,arguments)},SM=l._emscripten_bind_DracoInt16Array_GetValue_1=function(){return(SM=l._emscripten_bind_DracoInt16Array_GetValue_1=l.asm.pa).apply(null,arguments)},vo=l._emscripten_bind_DracoInt16Array_size_0=function(){return(vo=l._emscripten_bind_DracoInt16Array_size_0=l.asm.qa).apply(null,arguments)},$d=l._emscripten_bind_DracoInt16Array___destroy___0=function(){return($d=l._emscripten_bind_DracoInt16Array___destroy___0=l.asm.ra).apply(null,arguments)},DA=l._emscripten_bind_DracoUInt16Array_DracoUInt16Array_0=function(){return(DA=l._emscripten_bind_DracoUInt16Array_DracoUInt16Array_0=l.asm.sa).apply(null,arguments)},TM=l._emscripten_bind_DracoUInt16Array_GetValue_1=function(){return(TM=l._emscripten_bind_DracoUInt16Array_GetValue_1=l.asm.ta).apply(null,arguments)},OA=l._emscripten_bind_DracoUInt16Array_size_0=function(){return(OA=l._emscripten_bind_DracoUInt16Array_size_0=l.asm.ua).apply(null,arguments)},Tv=l._emscripten_bind_DracoUInt16Array___destroy___0=function(){return(Tv=l._emscripten_bind_DracoUInt16Array___destroy___0=l.asm.va).apply(null,arguments)},IA=l._emscripten_bind_DracoInt32Array_DracoInt32Array_0=function(){return(IA=l._emscripten_bind_DracoInt32Array_DracoInt32Array_0=l.asm.wa).apply(null,arguments)},NA=l._emscripten_bind_DracoInt32Array_GetValue_1=function(){return(NA=l._emscripten_bind_DracoInt32Array_GetValue_1=l.asm.xa).apply(null,arguments)},xM=l._emscripten_bind_DracoInt32Array_size_0=function(){return(xM=l._emscripten_bind_DracoInt32Array_size_0=l.asm.ya).apply(null,arguments)},Hm=l._emscripten_bind_DracoInt32Array___destroy___0=function(){return(Hm=l._emscripten_bind_DracoInt32Array___destroy___0=l.asm.za).apply(null,arguments)},xv=l._emscripten_bind_DracoUInt32Array_DracoUInt32Array_0=function(){return(xv=l._emscripten_bind_DracoUInt32Array_DracoUInt32Array_0=l.asm.Aa).apply(null,arguments)},MM=l._emscripten_bind_DracoUInt32Array_GetValue_1=function(){return(MM=l._emscripten_bind_DracoUInt32Array_GetValue_1=l.asm.Ba).apply(null,arguments)},ka=l._emscripten_bind_DracoUInt32Array_size_0=function(){return(ka=l._emscripten_bind_DracoUInt32Array_size_0=l.asm.Ca).apply(null,arguments)},$m=l._emscripten_bind_DracoUInt32Array___destroy___0=function(){return($m=l._emscripten_bind_DracoUInt32Array___destroy___0=l.asm.Da).apply(null,arguments)},LA=l._emscripten_bind_MetadataQuerier_MetadataQuerier_0=function(){return(LA=l._emscripten_bind_MetadataQuerier_MetadataQuerier_0=l.asm.Ea).apply(null,arguments)},zA=l._emscripten_bind_MetadataQuerier_HasEntry_2=function(){return(zA=l._emscripten_bind_MetadataQuerier_HasEntry_2=l.asm.Fa).apply(null,arguments)},BA=l._emscripten_bind_MetadataQuerier_GetIntEntry_2=function(){return(BA=l._emscripten_bind_MetadataQuerier_GetIntEntry_2=l.asm.Ga).apply(null,arguments)},Cp=l._emscripten_bind_MetadataQuerier_GetIntEntryArray_3=function(){return(Cp=l._emscripten_bind_MetadataQuerier_GetIntEntryArray_3=l.asm.Ha).apply(null,arguments)},Uu=l._emscripten_bind_MetadataQuerier_GetDoubleEntry_2=function(){return(Uu=l._emscripten_bind_MetadataQuerier_GetDoubleEntry_2=l.asm.Ia).apply(null,arguments)},UA=l._emscripten_bind_MetadataQuerier_GetStringEntry_2=function(){return(UA=l._emscripten_bind_MetadataQuerier_GetStringEntry_2=l.asm.Ja).apply(null,arguments)},FA=l._emscripten_bind_MetadataQuerier_NumEntries_1=function(){return(FA=l._emscripten_bind_MetadataQuerier_NumEntries_1=l.asm.Ka).apply(null,arguments)},VA=l._emscripten_bind_MetadataQuerier_GetEntryName_2=function(){return(VA=l._emscripten_bind_MetadataQuerier_GetEntryName_2=l.asm.La).apply(null,arguments)},GA=l._emscripten_bind_MetadataQuerier___destroy___0=function(){return(GA=l._emscripten_bind_MetadataQuerier___destroy___0=l.asm.Ma).apply(null,arguments)},kM=l._emscripten_bind_Decoder_Decoder_0=function(){return(kM=l._emscripten_bind_Decoder_Decoder_0=l.asm.Na).apply(null,arguments)},Fn=l._emscripten_bind_Decoder_DecodeArrayToPointCloud_3=function(){return(Fn=l._emscripten_bind_Decoder_DecodeArrayToPointCloud_3=l.asm.Oa).apply(null,arguments)},et=l._emscripten_bind_Decoder_DecodeArrayToMesh_3=function(){return(et=l._emscripten_bind_Decoder_DecodeArrayToMesh_3=l.asm.Pa).apply(null,arguments)},Yt=l._emscripten_bind_Decoder_GetAttributeId_2=function(){return(Yt=l._emscripten_bind_Decoder_GetAttributeId_2=l.asm.Qa).apply(null,arguments)},mn=l._emscripten_bind_Decoder_GetAttributeIdByName_2=function(){return(mn=l._emscripten_bind_Decoder_GetAttributeIdByName_2=l.asm.Ra).apply(null,arguments)},pr=l._emscripten_bind_Decoder_GetAttributeIdByMetadataEntry_3=function(){return(pr=l._emscripten_bind_Decoder_GetAttributeIdByMetadataEntry_3=l.asm.Sa).apply(null,arguments)},Ca=l._emscripten_bind_Decoder_GetAttribute_2=function(){return(Ca=l._emscripten_bind_Decoder_GetAttribute_2=l.asm.Ta).apply(null,arguments)},Ko=l._emscripten_bind_Decoder_GetAttributeByUniqueId_2=function(){return(Ko=l._emscripten_bind_Decoder_GetAttributeByUniqueId_2=l.asm.Ua).apply(null,arguments)},Do=l._emscripten_bind_Decoder_GetMetadata_1=function(){return(Do=l._emscripten_bind_Decoder_GetMetadata_1=l.asm.Va).apply(null,arguments)},H0=l._emscripten_bind_Decoder_GetAttributeMetadata_2=function(){return(H0=l._emscripten_bind_Decoder_GetAttributeMetadata_2=l.asm.Wa).apply(null,arguments)},Nl=l._emscripten_bind_Decoder_GetFaceFromMesh_3=function(){return(Nl=l._emscripten_bind_Decoder_GetFaceFromMesh_3=l.asm.Xa).apply(null,arguments)},Pa=l._emscripten_bind_Decoder_GetTriangleStripsFromMesh_2=function(){return(Pa=l._emscripten_bind_Decoder_GetTriangleStripsFromMesh_2=l.asm.Ya).apply(null,arguments)},jA=l._emscripten_bind_Decoder_GetTrianglesUInt16Array_3=function(){return(jA=l._emscripten_bind_Decoder_GetTrianglesUInt16Array_3=l.asm.Za).apply(null,arguments)},pB=l._emscripten_bind_Decoder_GetTrianglesUInt32Array_3=function(){return(pB=l._emscripten_bind_Decoder_GetTrianglesUInt32Array_3=l.asm._a).apply(null,arguments)},bJ=l._emscripten_bind_Decoder_GetAttributeFloat_3=function(){return(bJ=l._emscripten_bind_Decoder_GetAttributeFloat_3=l.asm.$a).apply(null,arguments)},AJ=l._emscripten_bind_Decoder_GetAttributeFloatForAllPoints_3=function(){return(AJ=l._emscripten_bind_Decoder_GetAttributeFloatForAllPoints_3=l.asm.ab).apply(null,arguments)},wJ=l._emscripten_bind_Decoder_GetAttributeIntForAllPoints_3=function(){return(wJ=l._emscripten_bind_Decoder_GetAttributeIntForAllPoints_3=l.asm.bb).apply(null,arguments)},EJ=l._emscripten_bind_Decoder_GetAttributeInt8ForAllPoints_3=function(){return(EJ=l._emscripten_bind_Decoder_GetAttributeInt8ForAllPoints_3=l.asm.cb).apply(null,arguments)},SJ=l._emscripten_bind_Decoder_GetAttributeUInt8ForAllPoints_3=function(){return(SJ=l._emscripten_bind_Decoder_GetAttributeUInt8ForAllPoints_3=l.asm.db).apply(null,arguments)},TJ=l._emscripten_bind_Decoder_GetAttributeInt16ForAllPoints_3=function(){return(TJ=l._emscripten_bind_Decoder_GetAttributeInt16ForAllPoints_3=l.asm.eb).apply(null,arguments)},xJ=l._emscripten_bind_Decoder_GetAttributeUInt16ForAllPoints_3=function(){return(xJ=l._emscripten_bind_Decoder_GetAttributeUInt16ForAllPoints_3=l.asm.fb).apply(null,arguments)},MJ=l._emscripten_bind_Decoder_GetAttributeInt32ForAllPoints_3=function(){return(MJ=l._emscripten_bind_Decoder_GetAttributeInt32ForAllPoints_3=l.asm.gb).apply(null,arguments)},kJ=l._emscripten_bind_Decoder_GetAttributeUInt32ForAllPoints_3=function(){return(kJ=l._emscripten_bind_Decoder_GetAttributeUInt32ForAllPoints_3=l.asm.hb).apply(null,arguments)},CJ=l._emscripten_bind_Decoder_GetAttributeDataArrayForAllPoints_5=function(){return(CJ=l._emscripten_bind_Decoder_GetAttributeDataArrayForAllPoints_5=l.asm.ib).apply(null,arguments)},PJ=l._emscripten_bind_Decoder_SkipAttributeTransform_1=function(){return(PJ=l._emscripten_bind_Decoder_SkipAttributeTransform_1=l.asm.jb).apply(null,arguments)},RJ=l._emscripten_bind_Decoder_GetEncodedGeometryType_Deprecated_1=function(){return(RJ=l._emscripten_bind_Decoder_GetEncodedGeometryType_Deprecated_1=l.asm.kb).apply(null,arguments)},DJ=l._emscripten_bind_Decoder_DecodeBufferToPointCloud_2=function(){return(DJ=l._emscripten_bind_Decoder_DecodeBufferToPointCloud_2=l.asm.lb).apply(null,arguments)},OJ=l._emscripten_bind_Decoder_DecodeBufferToMesh_2=function(){return(OJ=l._emscripten_bind_Decoder_DecodeBufferToMesh_2=l.asm.mb).apply(null,arguments)},IJ=l._emscripten_bind_Decoder___destroy___0=function(){return(IJ=l._emscripten_bind_Decoder___destroy___0=l.asm.nb).apply(null,arguments)},NJ=l._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_INVALID_TRANSFORM=function(){return(NJ=l._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_INVALID_TRANSFORM=l.asm.ob).apply(null,arguments)},LJ=l._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_NO_TRANSFORM=function(){return(LJ=l._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_NO_TRANSFORM=l.asm.pb).apply(null,arguments)},zJ=l._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_QUANTIZATION_TRANSFORM=function(){return(zJ=l._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_QUANTIZATION_TRANSFORM=l.asm.qb).apply(null,arguments)},BJ=l._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_OCTAHEDRON_TRANSFORM=function(){return(BJ=l._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_OCTAHEDRON_TRANSFORM=l.asm.rb).apply(null,arguments)},UJ=l._emscripten_enum_draco_GeometryAttribute_Type_INVALID=function(){return(UJ=l._emscripten_enum_draco_GeometryAttribute_Type_INVALID=l.asm.sb).apply(null,arguments)},FJ=l._emscripten_enum_draco_GeometryAttribute_Type_POSITION=function(){return(FJ=l._emscripten_enum_draco_GeometryAttribute_Type_POSITION=l.asm.tb).apply(null,arguments)},VJ=l._emscripten_enum_draco_GeometryAttribute_Type_NORMAL=function(){return(VJ=l._emscripten_enum_draco_GeometryAttribute_Type_NORMAL=l.asm.ub).apply(null,arguments)},GJ=l._emscripten_enum_draco_GeometryAttribute_Type_COLOR=function(){return(GJ=l._emscripten_enum_draco_GeometryAttribute_Type_COLOR=l.asm.vb).apply(null,arguments)},jJ=l._emscripten_enum_draco_GeometryAttribute_Type_TEX_COORD=function(){return(jJ=l._emscripten_enum_draco_GeometryAttribute_Type_TEX_COORD=l.asm.wb).apply(null,arguments)},HJ=l._emscripten_enum_draco_GeometryAttribute_Type_GENERIC=function(){return(HJ=l._emscripten_enum_draco_GeometryAttribute_Type_GENERIC=l.asm.xb).apply(null,arguments)},$J=l._emscripten_enum_draco_EncodedGeometryType_INVALID_GEOMETRY_TYPE=function(){return($J=l._emscripten_enum_draco_EncodedGeometryType_INVALID_GEOMETRY_TYPE=l.asm.yb).apply(null,arguments)},WJ=l._emscripten_enum_draco_EncodedGeometryType_POINT_CLOUD=function(){return(WJ=l._emscripten_enum_draco_EncodedGeometryType_POINT_CLOUD=l.asm.zb).apply(null,arguments)},YJ=l._emscripten_enum_draco_EncodedGeometryType_TRIANGULAR_MESH=function(){return(YJ=l._emscripten_enum_draco_EncodedGeometryType_TRIANGULAR_MESH=l.asm.Ab).apply(null,arguments)},qJ=l._emscripten_enum_draco_DataType_DT_INVALID=function(){return(qJ=l._emscripten_enum_draco_DataType_DT_INVALID=l.asm.Bb).apply(null,arguments)},XJ=l._emscripten_enum_draco_DataType_DT_INT8=function(){return(XJ=l._emscripten_enum_draco_DataType_DT_INT8=l.asm.Cb).apply(null,arguments)},ZJ=l._emscripten_enum_draco_DataType_DT_UINT8=function(){return(ZJ=l._emscripten_enum_draco_DataType_DT_UINT8=l.asm.Db).apply(null,arguments)},QJ=l._emscripten_enum_draco_DataType_DT_INT16=function(){return(QJ=l._emscripten_enum_draco_DataType_DT_INT16=l.asm.Eb).apply(null,arguments)},KJ=l._emscripten_enum_draco_DataType_DT_UINT16=function(){return(KJ=l._emscripten_enum_draco_DataType_DT_UINT16=l.asm.Fb).apply(null,arguments)},JJ=l._emscripten_enum_draco_DataType_DT_INT32=function(){return(JJ=l._emscripten_enum_draco_DataType_DT_INT32=l.asm.Gb).apply(null,arguments)},eee=l._emscripten_enum_draco_DataType_DT_UINT32=function(){return(eee=l._emscripten_enum_draco_DataType_DT_UINT32=l.asm.Hb).apply(null,arguments)},tee=l._emscripten_enum_draco_DataType_DT_INT64=function(){return(tee=l._emscripten_enum_draco_DataType_DT_INT64=l.asm.Ib).apply(null,arguments)},nee=l._emscripten_enum_draco_DataType_DT_UINT64=function(){return(nee=l._emscripten_enum_draco_DataType_DT_UINT64=l.asm.Jb).apply(null,arguments)},ree=l._emscripten_enum_draco_DataType_DT_FLOAT32=function(){return(ree=l._emscripten_enum_draco_DataType_DT_FLOAT32=l.asm.Kb).apply(null,arguments)},iee=l._emscripten_enum_draco_DataType_DT_FLOAT64=function(){return(iee=l._emscripten_enum_draco_DataType_DT_FLOAT64=l.asm.Lb).apply(null,arguments)},see=l._emscripten_enum_draco_DataType_DT_BOOL=function(){return(see=l._emscripten_enum_draco_DataType_DT_BOOL=l.asm.Mb).apply(null,arguments)},oee=l._emscripten_enum_draco_DataType_DT_TYPES_COUNT=function(){return(oee=l._emscripten_enum_draco_DataType_DT_TYPES_COUNT=l.asm.Nb).apply(null,arguments)},aee=l._emscripten_enum_draco_StatusCode_OK=function(){return(aee=l._emscripten_enum_draco_StatusCode_OK=l.asm.Ob).apply(null,arguments)},lee=l._emscripten_enum_draco_StatusCode_DRACO_ERROR=function(){return(lee=l._emscripten_enum_draco_StatusCode_DRACO_ERROR=l.asm.Pb).apply(null,arguments)},cee=l._emscripten_enum_draco_StatusCode_IO_ERROR=function(){return(cee=l._emscripten_enum_draco_StatusCode_IO_ERROR=l.asm.Qb).apply(null,arguments)},uee=l._emscripten_enum_draco_StatusCode_INVALID_PARAMETER=function(){return(uee=l._emscripten_enum_draco_StatusCode_INVALID_PARAMETER=l.asm.Rb).apply(null,arguments)},fee=l._emscripten_enum_draco_StatusCode_UNSUPPORTED_VERSION=function(){return(fee=l._emscripten_enum_draco_StatusCode_UNSUPPORTED_VERSION=l.asm.Sb).apply(null,arguments)},dee=l._emscripten_enum_draco_StatusCode_UNKNOWN_VERSION=function(){return(dee=l._emscripten_enum_draco_StatusCode_UNKNOWN_VERSION=l.asm.Tb).apply(null,arguments)},hee=l._malloc=function(){return(hee=l._malloc=l.asm.Ub).apply(null,arguments)};l._free=function(){return(l._free=l.asm.Vb).apply(null,arguments)};var CM;It=function ee(){CM||mB(),CM||(It=ee)};function mB(ee){if(Ot>0||(Re(),Ot>0))return;function ve(){CM||(CM=!0,l.calledRun=!0,!ue&&(Lt(),p(l),l.onRuntimeInitialized&&l.onRuntimeInitialized(),mt()))}l.setStatus?(l.setStatus("Running..."),setTimeout(function(){setTimeout(function(){l.setStatus("")},1),ve()},1)):ve()}if(l.run=mB,l.preInit)for(typeof l.preInit=="function"&&(l.preInit=[l.preInit]);l.preInit.length>0;)l.preInit.pop()();mB();function Hi(){}Hi.prototype=Object.create(Hi.prototype),Hi.prototype.constructor=Hi,Hi.prototype.__class__=Hi,Hi.__cache__={},l.WrapperObject=Hi;function _o(ee){return(ee||Hi).__cache__}l.getCache=_o;function Fu(ee,ve){var Ye=_o(ve),Bt=Ye[ee];return Bt||(Bt=Object.create((ve||Hi).prototype),Bt.ptr=ee,Ye[ee]=Bt)}l.wrapPointer=Fu;function ySe(ee,ve){return Fu(ee.ptr,ve)}l.castObject=ySe,l.NULL=Fu(0);function bSe(ee){if(!ee.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";ee.__destroy__(),delete _o(ee.__class__)[ee.ptr]}l.destroy=bSe;function ASe(ee,ve){return ee.ptr===ve.ptr}l.compare=ASe;function wSe(ee){return ee.ptr}l.getPointer=wSe;function ESe(ee){return ee.__class__}l.getClass=ESe;var ci={buffer:0,size:0,pos:0,temps:[],needed:0,prepare:function(){if(ci.needed){for(var ee=0;ee<ci.temps.length;ee++)l._free(ci.temps[ee]);ci.temps.length=0,l._free(ci.buffer),ci.buffer=0,ci.size+=ci.needed,ci.needed=0}ci.buffer||(ci.size+=128,ci.buffer=l._malloc(ci.size),J(ci.buffer)),ci.pos=0},alloc:function(ee,ve){J(ci.buffer);var Ye=ve.BYTES_PER_ELEMENT,Bt=ee.length*Ye;Bt=Bt+7&-8;var Zn;return ci.pos+Bt>=ci.size?(J(Bt>0),ci.needed+=Bt,Zn=l._malloc(Bt),ci.temps.push(Zn)):(Zn=ci.buffer+ci.pos,ci.pos+=Bt),Zn},copy:function(ee,ve,Ye){Ye>>>=0;var Bt=ve.BYTES_PER_ELEMENT;switch(Bt){case 2:Ye>>>=1;break;case 4:Ye>>>=2;break;case 8:Ye>>>=3;break}for(var Zn=0;Zn<ee.length;Zn++)ve[Ye+Zn]=ee[Zn]}};function Pp(ee){if(typeof ee=="string"){var ve=on(ee),Ye=ci.alloc(ve,it);return ci.copy(ve,it,Ye),Ye}return ee}function gB(ee){if(typeof ee=="object"){var ve=ci.alloc(ee,it);return ci.copy(ee,it,ve),ve}return ee}function Wd(){throw"cannot construct a VoidPtr, no constructor in IDL"}Wd.prototype=Object.create(Hi.prototype),Wd.prototype.constructor=Wd,Wd.prototype.__class__=Wd,Wd.__cache__={},l.VoidPtr=Wd,Wd.prototype.__destroy__=Wd.prototype.__destroy__=function(){var ee=this.ptr;qr(ee)};function Vu(){this.ptr=ji(),_o(Vu)[this.ptr]=this}Vu.prototype=Object.create(Hi.prototype),Vu.prototype.constructor=Vu,Vu.prototype.__class__=Vu,Vu.__cache__={},l.DecoderBuffer=Vu,Vu.prototype.Init=Vu.prototype.Init=function(ee,ve){var Ye=this.ptr;ci.prepare(),typeof ee=="object"&&(ee=gB(ee)),ve&&typeof ve=="object"&&(ve=ve.ptr),Ks(Ye,ee,ve)},Vu.prototype.__destroy__=Vu.prototype.__destroy__=function(){var ee=this.ptr;zu(ee)};function Xc(){this.ptr=Ff(),_o(Xc)[this.ptr]=this}Xc.prototype=Object.create(Hi.prototype),Xc.prototype.constructor=Xc,Xc.prototype.__class__=Xc,Xc.__cache__={},l.AttributeTransformData=Xc,Xc.prototype.transform_type=Xc.prototype.transform_type=function(){var ee=this.ptr;return Yc(ee)},Xc.prototype.__destroy__=Xc.prototype.__destroy__=function(){var ee=this.ptr;Vf(ee)};function $0(){this.ptr=Ka(),_o($0)[this.ptr]=this}$0.prototype=Object.create(Hi.prototype),$0.prototype.constructor=$0,$0.prototype.__class__=$0,$0.__cache__={},l.GeometryAttribute=$0,$0.prototype.__destroy__=$0.prototype.__destroy__=function(){var ee=this.ptr;go(ee)};function $i(){this.ptr=vi(),_o($i)[this.ptr]=this}$i.prototype=Object.create(Hi.prototype),$i.prototype.constructor=$i,$i.prototype.__class__=$i,$i.__cache__={},l.PointAttribute=$i,$i.prototype.size=$i.prototype.size=function(){var ee=this.ptr;return rc(ee)},$i.prototype.GetAttributeTransformData=$i.prototype.GetAttributeTransformData=function(){var ee=this.ptr;return Fu(qc(ee),Xc)},$i.prototype.attribute_type=$i.prototype.attribute_type=function(){var ee=this.ptr;return K(ee)},$i.prototype.data_type=$i.prototype.data_type=function(){var ee=this.ptr;return $(ee)},$i.prototype.num_components=$i.prototype.num_components=function(){var ee=this.ptr;return Q(ee)},$i.prototype.normalized=$i.prototype.normalized=function(){var ee=this.ptr;return!!te(ee)},$i.prototype.byte_stride=$i.prototype.byte_stride=function(){var ee=this.ptr;return ce(ee)},$i.prototype.byte_offset=$i.prototype.byte_offset=function(){var ee=this.ptr;return ae(ee)},$i.prototype.unique_id=$i.prototype.unique_id=function(){var ee=this.ptr;return xe(ee)},$i.prototype.__destroy__=$i.prototype.__destroy__=function(){var ee=this.ptr;Ne(ee)};function da(){this.ptr=je(),_o(da)[this.ptr]=this}da.prototype=Object.create(Hi.prototype),da.prototype.constructor=da,da.prototype.__class__=da,da.__cache__={},l.AttributeQuantizationTransform=da,da.prototype.InitFromAttribute=da.prototype.InitFromAttribute=function(ee){var ve=this.ptr;return ee&&typeof ee=="object"&&(ee=ee.ptr),!!Ve(ve,ee)},da.prototype.quantization_bits=da.prototype.quantization_bits=function(){var ee=this.ptr;return Ke(ee)},da.prototype.min_value=da.prototype.min_value=function(ee){var ve=this.ptr;return ee&&typeof ee=="object"&&(ee=ee.ptr),dt(ve,ee)},da.prototype.range=da.prototype.range=function(){var ee=this.ptr;return bt(ee)},da.prototype.__destroy__=da.prototype.__destroy__=function(){var ee=this.ptr;un(ee)};function ic(){this.ptr=Xn(),_o(ic)[this.ptr]=this}ic.prototype=Object.create(Hi.prototype),ic.prototype.constructor=ic,ic.prototype.__class__=ic,ic.__cache__={},l.AttributeOctahedronTransform=ic,ic.prototype.InitFromAttribute=ic.prototype.InitFromAttribute=function(ee){var ve=this.ptr;return ee&&typeof ee=="object"&&(ee=ee.ptr),!!kn(ve,ee)},ic.prototype.quantization_bits=ic.prototype.quantization_bits=function(){var ee=this.ptr;return Bi(ee)},ic.prototype.__destroy__=ic.prototype.__destroy__=function(){var ee=this.ptr;jn(ee)};function sc(){this.ptr=Un(),_o(sc)[this.ptr]=this}sc.prototype=Object.create(Hi.prototype),sc.prototype.constructor=sc,sc.prototype.__class__=sc,sc.__cache__={},l.PointCloud=sc,sc.prototype.num_attributes=sc.prototype.num_attributes=function(){var ee=this.ptr;return Or(ee)},sc.prototype.num_points=sc.prototype.num_points=function(){var ee=this.ptr;return hr(ee)},sc.prototype.__destroy__=sc.prototype.__destroy__=function(){var ee=this.ptr;Qo(ee)};function el(){this.ptr=co(),_o(el)[this.ptr]=this}el.prototype=Object.create(Hi.prototype),el.prototype.constructor=el,el.prototype.__class__=el,el.__cache__={},l.Mesh=el,el.prototype.num_faces=el.prototype.num_faces=function(){var ee=this.ptr;return Ta(ee)},el.prototype.num_attributes=el.prototype.num_attributes=function(){var ee=this.ptr;return Ja(ee)},el.prototype.num_points=el.prototype.num_points=function(){var ee=this.ptr;return hs(ee)},el.prototype.__destroy__=el.prototype.__destroy__=function(){var ee=this.ptr;xa(ee)};function Gu(){this.ptr=Ro(),_o(Gu)[this.ptr]=this}Gu.prototype=Object.create(Hi.prototype),Gu.prototype.constructor=Gu,Gu.prototype.__class__=Gu,Gu.__cache__={},l.Metadata=Gu,Gu.prototype.__destroy__=Gu.prototype.__destroy__=function(){var ee=this.ptr;Vs(ee)};function Jo(){throw"cannot construct a Status, no constructor in IDL"}Jo.prototype=Object.create(Hi.prototype),Jo.prototype.constructor=Jo,Jo.prototype.__class__=Jo,Jo.__cache__={},l.Status=Jo,Jo.prototype.code=Jo.prototype.code=function(){var ee=this.ptr;return Ma(ee)},Jo.prototype.ok=Jo.prototype.ok=function(){var ee=this.ptr;return!!Il(ee)},Jo.prototype.error_msg=Jo.prototype.error_msg=function(){var ee=this.ptr;return be(is(ee))},Jo.prototype.__destroy__=Jo.prototype.__destroy__=function(){var ee=this.ptr;Pi(ee)};function oc(){this.ptr=CA(),_o(oc)[this.ptr]=this}oc.prototype=Object.create(Hi.prototype),oc.prototype.constructor=oc,oc.prototype.__class__=oc,oc.__cache__={},l.DracoFloat32Array=oc,oc.prototype.GetValue=oc.prototype.GetValue=function(ee){var ve=this.ptr;return ee&&typeof ee=="object"&&(ee=ee.ptr),PA(ve,ee)},oc.prototype.size=oc.prototype.size=function(){var ee=this.ptr;return wv(ee)},oc.prototype.__destroy__=oc.prototype.__destroy__=function(){var ee=this.ptr;RA(ee)};function ac(){this.ptr=Gm(),_o(ac)[this.ptr]=this}ac.prototype=Object.create(Hi.prototype),ac.prototype.constructor=ac,ac.prototype.__class__=ac,ac.__cache__={},l.DracoInt8Array=ac,ac.prototype.GetValue=ac.prototype.GetValue=function(ee){var ve=this.ptr;return ee&&typeof ee=="object"&&(ee=ee.ptr),jm(ve,ee)},ac.prototype.size=ac.prototype.size=function(){var ee=this.ptr;return Bu(ee)},ac.prototype.__destroy__=ac.prototype.__destroy__=function(){var ee=this.ptr;Hd(ee)};function lc(){this.ptr=Ev(),_o(lc)[this.ptr]=this}lc.prototype=Object.create(Hi.prototype),lc.prototype.constructor=lc,lc.prototype.__class__=lc,lc.__cache__={},l.DracoUInt8Array=lc,lc.prototype.GetValue=lc.prototype.GetValue=function(ee){var ve=this.ptr;return ee&&typeof ee=="object"&&(ee=ee.ptr),Sv(ve,ee)},lc.prototype.size=lc.prototype.size=function(){var ee=this.ptr;return wM(ee)},lc.prototype.__destroy__=lc.prototype.__destroy__=function(){var ee=this.ptr;j0(ee)};function cc(){this.ptr=EM(),_o(cc)[this.ptr]=this}cc.prototype=Object.create(Hi.prototype),cc.prototype.constructor=cc,cc.prototype.__class__=cc,cc.__cache__={},l.DracoInt16Array=cc,cc.prototype.GetValue=cc.prototype.GetValue=function(ee){var ve=this.ptr;return ee&&typeof ee=="object"&&(ee=ee.ptr),SM(ve,ee)},cc.prototype.size=cc.prototype.size=function(){var ee=this.ptr;return vo(ee)},cc.prototype.__destroy__=cc.prototype.__destroy__=function(){var ee=this.ptr;$d(ee)};function uc(){this.ptr=DA(),_o(uc)[this.ptr]=this}uc.prototype=Object.create(Hi.prototype),uc.prototype.constructor=uc,uc.prototype.__class__=uc,uc.__cache__={},l.DracoUInt16Array=uc,uc.prototype.GetValue=uc.prototype.GetValue=function(ee){var ve=this.ptr;return ee&&typeof ee=="object"&&(ee=ee.ptr),TM(ve,ee)},uc.prototype.size=uc.prototype.size=function(){var ee=this.ptr;return OA(ee)},uc.prototype.__destroy__=uc.prototype.__destroy__=function(){var ee=this.ptr;Tv(ee)};function fc(){this.ptr=IA(),_o(fc)[this.ptr]=this}fc.prototype=Object.create(Hi.prototype),fc.prototype.constructor=fc,fc.prototype.__class__=fc,fc.__cache__={},l.DracoInt32Array=fc,fc.prototype.GetValue=fc.prototype.GetValue=function(ee){var ve=this.ptr;return ee&&typeof ee=="object"&&(ee=ee.ptr),NA(ve,ee)},fc.prototype.size=fc.prototype.size=function(){var ee=this.ptr;return xM(ee)},fc.prototype.__destroy__=fc.prototype.__destroy__=function(){var ee=this.ptr;Hm(ee)};function dc(){this.ptr=xv(),_o(dc)[this.ptr]=this}dc.prototype=Object.create(Hi.prototype),dc.prototype.constructor=dc,dc.prototype.__class__=dc,dc.__cache__={},l.DracoUInt32Array=dc,dc.prototype.GetValue=dc.prototype.GetValue=function(ee){var ve=this.ptr;return ee&&typeof ee=="object"&&(ee=ee.ptr),MM(ve,ee)},dc.prototype.size=dc.prototype.size=function(){var ee=this.ptr;return ka(ee)},dc.prototype.__destroy__=dc.prototype.__destroy__=function(){var ee=this.ptr;$m(ee)};function Gs(){this.ptr=LA(),_o(Gs)[this.ptr]=this}Gs.prototype=Object.create(Hi.prototype),Gs.prototype.constructor=Gs,Gs.prototype.__class__=Gs,Gs.__cache__={},l.MetadataQuerier=Gs,Gs.prototype.HasEntry=Gs.prototype.HasEntry=function(ee,ve){var Ye=this.ptr;return ci.prepare(),ee&&typeof ee=="object"&&(ee=ee.ptr),ve&&typeof ve=="object"?ve=ve.ptr:ve=Pp(ve),!!zA(Ye,ee,ve)},Gs.prototype.GetIntEntry=Gs.prototype.GetIntEntry=function(ee,ve){var Ye=this.ptr;return ci.prepare(),ee&&typeof ee=="object"&&(ee=ee.ptr),ve&&typeof ve=="object"?ve=ve.ptr:ve=Pp(ve),BA(Ye,ee,ve)},Gs.prototype.GetIntEntryArray=Gs.prototype.GetIntEntryArray=function(ee,ve,Ye){var Bt=this.ptr;ci.prepare(),ee&&typeof ee=="object"&&(ee=ee.ptr),ve&&typeof ve=="object"?ve=ve.ptr:ve=Pp(ve),Ye&&typeof Ye=="object"&&(Ye=Ye.ptr),Cp(Bt,ee,ve,Ye)},Gs.prototype.GetDoubleEntry=Gs.prototype.GetDoubleEntry=function(ee,ve){var Ye=this.ptr;return ci.prepare(),ee&&typeof ee=="object"&&(ee=ee.ptr),ve&&typeof ve=="object"?ve=ve.ptr:ve=Pp(ve),Uu(Ye,ee,ve)},Gs.prototype.GetStringEntry=Gs.prototype.GetStringEntry=function(ee,ve){var Ye=this.ptr;return ci.prepare(),ee&&typeof ee=="object"&&(ee=ee.ptr),ve&&typeof ve=="object"?ve=ve.ptr:ve=Pp(ve),be(UA(Ye,ee,ve))},Gs.prototype.NumEntries=Gs.prototype.NumEntries=function(ee){var ve=this.ptr;return ee&&typeof ee=="object"&&(ee=ee.ptr),FA(ve,ee)},Gs.prototype.GetEntryName=Gs.prototype.GetEntryName=function(ee,ve){var Ye=this.ptr;return ee&&typeof ee=="object"&&(ee=ee.ptr),ve&&typeof ve=="object"&&(ve=ve.ptr),be(VA(Ye,ee,ve))},Gs.prototype.__destroy__=Gs.prototype.__destroy__=function(){var ee=this.ptr;GA(ee)};function In(){this.ptr=kM(),_o(In)[this.ptr]=this}return In.prototype=Object.create(Hi.prototype),In.prototype.constructor=In,In.prototype.__class__=In,In.__cache__={},l.Decoder=In,In.prototype.DecodeArrayToPointCloud=In.prototype.DecodeArrayToPointCloud=function(ee,ve,Ye){var Bt=this.ptr;return ci.prepare(),typeof ee=="object"&&(ee=gB(ee)),ve&&typeof ve=="object"&&(ve=ve.ptr),Ye&&typeof Ye=="object"&&(Ye=Ye.ptr),Fu(Fn(Bt,ee,ve,Ye),Jo)},In.prototype.DecodeArrayToMesh=In.prototype.DecodeArrayToMesh=function(ee,ve,Ye){var Bt=this.ptr;return ci.prepare(),typeof ee=="object"&&(ee=gB(ee)),ve&&typeof ve=="object"&&(ve=ve.ptr),Ye&&typeof Ye=="object"&&(Ye=Ye.ptr),Fu(et(Bt,ee,ve,Ye),Jo)},In.prototype.GetAttributeId=In.prototype.GetAttributeId=function(ee,ve){var Ye=this.ptr;return ee&&typeof ee=="object"&&(ee=ee.ptr),ve&&typeof ve=="object"&&(ve=ve.ptr),Yt(Ye,ee,ve)},In.prototype.GetAttributeIdByName=In.prototype.GetAttributeIdByName=function(ee,ve){var Ye=this.ptr;return ci.prepare(),ee&&typeof ee=="object"&&(ee=ee.ptr),ve&&typeof ve=="object"?ve=ve.ptr:ve=Pp(ve),mn(Ye,ee,ve)},In.prototype.GetAttributeIdByMetadataEntry=In.prototype.GetAttributeIdByMetadataEntry=function(ee,ve,Ye){var Bt=this.ptr;return ci.prepare(),ee&&typeof ee=="object"&&(ee=ee.ptr),ve&&typeof ve=="object"?ve=ve.ptr:ve=Pp(ve),Ye&&typeof Ye=="object"?Ye=Ye.ptr:Ye=Pp(Ye),pr(Bt,ee,ve,Ye)},In.prototype.GetAttribute=In.prototype.GetAttribute=function(ee,ve){var Ye=this.ptr;return ee&&typeof ee=="object"&&(ee=ee.ptr),ve&&typeof ve=="object"&&(ve=ve.ptr),Fu(Ca(Ye,ee,ve),$i)},In.prototype.GetAttributeByUniqueId=In.prototype.GetAttributeByUniqueId=function(ee,ve){var Ye=this.ptr;return ee&&typeof ee=="object"&&(ee=ee.ptr),ve&&typeof ve=="object"&&(ve=ve.ptr),Fu(Ko(Ye,ee,ve),$i)},In.prototype.GetMetadata=In.prototype.GetMetadata=function(ee){var ve=this.ptr;return ee&&typeof ee=="object"&&(ee=ee.ptr),Fu(Do(ve,ee),Gu)},In.prototype.GetAttributeMetadata=In.prototype.GetAttributeMetadata=function(ee,ve){var Ye=this.ptr;return ee&&typeof ee=="object"&&(ee=ee.ptr),ve&&typeof ve=="object"&&(ve=ve.ptr),Fu(H0(Ye,ee,ve),Gu)},In.prototype.GetFaceFromMesh=In.prototype.GetFaceFromMesh=function(ee,ve,Ye){var Bt=this.ptr;return ee&&typeof ee=="object"&&(ee=ee.ptr),ve&&typeof ve=="object"&&(ve=ve.ptr),Ye&&typeof Ye=="object"&&(Ye=Ye.ptr),!!Nl(Bt,ee,ve,Ye)},In.prototype.GetTriangleStripsFromMesh=In.prototype.GetTriangleStripsFromMesh=function(ee,ve){var Ye=this.ptr;return ee&&typeof ee=="object"&&(ee=ee.ptr),ve&&typeof ve=="object"&&(ve=ve.ptr),Pa(Ye,ee,ve)},In.prototype.GetTrianglesUInt16Array=In.prototype.GetTrianglesUInt16Array=function(ee,ve,Ye){var Bt=this.ptr;return ee&&typeof ee=="object"&&(ee=ee.ptr),ve&&typeof ve=="object"&&(ve=ve.ptr),Ye&&typeof Ye=="object"&&(Ye=Ye.ptr),!!jA(Bt,ee,ve,Ye)},In.prototype.GetTrianglesUInt32Array=In.prototype.GetTrianglesUInt32Array=function(ee,ve,Ye){var Bt=this.ptr;return ee&&typeof ee=="object"&&(ee=ee.ptr),ve&&typeof ve=="object"&&(ve=ve.ptr),Ye&&typeof Ye=="object"&&(Ye=Ye.ptr),!!pB(Bt,ee,ve,Ye)},In.prototype.GetAttributeFloat=In.prototype.GetAttributeFloat=function(ee,ve,Ye){var Bt=this.ptr;return ee&&typeof ee=="object"&&(ee=ee.ptr),ve&&typeof ve=="object"&&(ve=ve.ptr),Ye&&typeof Ye=="object"&&(Ye=Ye.ptr),!!bJ(Bt,ee,ve,Ye)},In.prototype.GetAttributeFloatForAllPoints=In.prototype.GetAttributeFloatForAllPoints=function(ee,ve,Ye){var Bt=this.ptr;return ee&&typeof ee=="object"&&(ee=ee.ptr),ve&&typeof ve=="object"&&(ve=ve.ptr),Ye&&typeof Ye=="object"&&(Ye=Ye.ptr),!!AJ(Bt,ee,ve,Ye)},In.prototype.GetAttributeIntForAllPoints=In.prototype.GetAttributeIntForAllPoints=function(ee,ve,Ye){var Bt=this.ptr;return ee&&typeof ee=="object"&&(ee=ee.ptr),ve&&typeof ve=="object"&&(ve=ve.ptr),Ye&&typeof Ye=="object"&&(Ye=Ye.ptr),!!wJ(Bt,ee,ve,Ye)},In.prototype.GetAttributeInt8ForAllPoints=In.prototype.GetAttributeInt8ForAllPoints=function(ee,ve,Ye){var Bt=this.ptr;return ee&&typeof ee=="object"&&(ee=ee.ptr),ve&&typeof ve=="object"&&(ve=ve.ptr),Ye&&typeof Ye=="object"&&(Ye=Ye.ptr),!!EJ(Bt,ee,ve,Ye)},In.prototype.GetAttributeUInt8ForAllPoints=In.prototype.GetAttributeUInt8ForAllPoints=function(ee,ve,Ye){var Bt=this.ptr;return ee&&typeof ee=="object"&&(ee=ee.ptr),ve&&typeof ve=="object"&&(ve=ve.ptr),Ye&&typeof Ye=="object"&&(Ye=Ye.ptr),!!SJ(Bt,ee,ve,Ye)},In.prototype.GetAttributeInt16ForAllPoints=In.prototype.GetAttributeInt16ForAllPoints=function(ee,ve,Ye){var Bt=this.ptr;return ee&&typeof ee=="object"&&(ee=ee.ptr),ve&&typeof ve=="object"&&(ve=ve.ptr),Ye&&typeof Ye=="object"&&(Ye=Ye.ptr),!!TJ(Bt,ee,ve,Ye)},In.prototype.GetAttributeUInt16ForAllPoints=In.prototype.GetAttributeUInt16ForAllPoints=function(ee,ve,Ye){var Bt=this.ptr;return ee&&typeof ee=="object"&&(ee=ee.ptr),ve&&typeof ve=="object"&&(ve=ve.ptr),Ye&&typeof Ye=="object"&&(Ye=Ye.ptr),!!xJ(Bt,ee,ve,Ye)},In.prototype.GetAttributeInt32ForAllPoints=In.prototype.GetAttributeInt32ForAllPoints=function(ee,ve,Ye){var Bt=this.ptr;return ee&&typeof ee=="object"&&(ee=ee.ptr),ve&&typeof ve=="object"&&(ve=ve.ptr),Ye&&typeof Ye=="object"&&(Ye=Ye.ptr),!!MJ(Bt,ee,ve,Ye)},In.prototype.GetAttributeUInt32ForAllPoints=In.prototype.GetAttributeUInt32ForAllPoints=function(ee,ve,Ye){var Bt=this.ptr;return ee&&typeof ee=="object"&&(ee=ee.ptr),ve&&typeof ve=="object"&&(ve=ve.ptr),Ye&&typeof Ye=="object"&&(Ye=Ye.ptr),!!kJ(Bt,ee,ve,Ye)},In.prototype.GetAttributeDataArrayForAllPoints=In.prototype.GetAttributeDataArrayForAllPoints=function(ee,ve,Ye,Bt,Zn){var Hn=this.ptr;return ee&&typeof ee=="object"&&(ee=ee.ptr),ve&&typeof ve=="object"&&(ve=ve.ptr),Ye&&typeof Ye=="object"&&(Ye=Ye.ptr),Bt&&typeof Bt=="object"&&(Bt=Bt.ptr),Zn&&typeof Zn=="object"&&(Zn=Zn.ptr),!!CJ(Hn,ee,ve,Ye,Bt,Zn)},In.prototype.SkipAttributeTransform=In.prototype.SkipAttributeTransform=function(ee){var ve=this.ptr;ee&&typeof ee=="object"&&(ee=ee.ptr),PJ(ve,ee)},In.prototype.GetEncodedGeometryType_Deprecated=In.prototype.GetEncodedGeometryType_Deprecated=function(ee){var ve=this.ptr;return ee&&typeof ee=="object"&&(ee=ee.ptr),RJ(ve,ee)},In.prototype.DecodeBufferToPointCloud=In.prototype.DecodeBufferToPointCloud=function(ee,ve){var Ye=this.ptr;return ee&&typeof ee=="object"&&(ee=ee.ptr),ve&&typeof ve=="object"&&(ve=ve.ptr),Fu(DJ(Ye,ee,ve),Jo)},In.prototype.DecodeBufferToMesh=In.prototype.DecodeBufferToMesh=function(ee,ve){var Ye=this.ptr;return ee&&typeof ee=="object"&&(ee=ee.ptr),ve&&typeof ve=="object"&&(ve=ve.ptr),Fu(OJ(Ye,ee,ve),Jo)},In.prototype.__destroy__=In.prototype.__destroy__=function(){var ee=this.ptr;IJ(ee)},function(){function ee(){l.ATTRIBUTE_INVALID_TRANSFORM=NJ(),l.ATTRIBUTE_NO_TRANSFORM=LJ(),l.ATTRIBUTE_QUANTIZATION_TRANSFORM=zJ(),l.ATTRIBUTE_OCTAHEDRON_TRANSFORM=BJ(),l.INVALID=UJ(),l.POSITION=FJ(),l.NORMAL=VJ(),l.COLOR=GJ(),l.TEX_COORD=jJ(),l.GENERIC=HJ(),l.INVALID_GEOMETRY_TYPE=$J(),l.POINT_CLOUD=WJ(),l.TRIANGULAR_MESH=YJ(),l.DT_INVALID=qJ(),l.DT_INT8=XJ(),l.DT_UINT8=ZJ(),l.DT_INT16=QJ(),l.DT_UINT16=KJ(),l.DT_INT32=JJ(),l.DT_UINT32=eee(),l.DT_INT64=tee(),l.DT_UINT64=nee(),l.DT_FLOAT32=ree(),l.DT_FLOAT64=iee(),l.DT_BOOL=see(),l.DT_TYPES_COUNT=oee(),l.OK=aee(),l.DRACO_ERROR=lee(),l.IO_ERROR=cee(),l.INVALID_PARAMETER=uee(),l.UNSUPPORTED_VERSION=fee(),l.UNKNOWN_VERSION=dee()}Ht?ee():at(ee)}(),typeof l.onModuleParsed=="function"&&l.onModuleParsed(),l.Decoder.prototype.GetEncodedGeometryType=function(ee){if(ee.__class__&&ee.__class__===l.DecoderBuffer)return l.Decoder.prototype.GetEncodedGeometryType_Deprecated(ee);if(ee.byteLength<8)return l.INVALID_GEOMETRY_TYPE;switch(ee[7]){case 0:return l.POINT_CLOUD;case 1:return l.TRIANGULAR_MESH;default:return l.INVALID_GEOMETRY_TYPE}},o.ready}})();t.exports=n})(Tye);var Uit=Tye.exports,Poe;function _Q(){return Poe||(Poe=1,function(t){var e=X&&X.__awaiter||function(x,C,P,O){function L(B){return B instanceof P?B:new P(function(V){V(B)})}return new(P||(P=Promise))(function(B,V){function G(q){try{F(O.next(q))}catch(fe){V(fe)}}function j(q){try{F(O.throw(q))}catch(fe){V(fe)}}function F(q){q.done?B(q.value):L(q.value).then(G,j)}F((O=O.apply(x,C||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.GLTFLoader=t.GLTF_EXTENSIONS=void 0;const n=dr,i=Mn,o=Cr,l=Gi,d=F0,p=Pm,g=HN,v=$N,_=WN,b=YN,w=zit(),E=Bit();var S;(function(x){x.KHR_BINARY_GLTF="KHR_binary_glTF",x.KHR_DRACO_MESH_COMPRESSION="KHR_draco_mesh_compression",x.KHR_LIGHTS_PUNCTUAL="KHR_lights_punctual",x.KHR_MATERIALS_CLEARCOAT="KHR_materials_clearcoat",x.KHR_MATERIALS_IOR="KHR_materials_ior",x.KHR_MATERIALS_PBRSPECULARGLOSSINESS="KHR_materials_pbrSpecularGlossiness",x.KHR_MATERIALS_SHEEN="KHR_materials_sheen",x.KHR_MATERIALS_SPECULAR="KHR_materials_specular",x.KHR_MATERIALS_TRANSMISSION="KHR_materials_transmission",x.KHR_MATERIALS_UNLIT="KHR_materials_unlit",x.KHR_MATERIALS_VARIANTS="KHR_materials_variants",x.KHR_MATERIALS_VOLUME="KHR_materials_volume",x.KHR_MESH_QUANTIZATION="KHR_mesh_quantization",x.KHR_TEXTURE_TRANSFORM="KHR_texture_transform",x.SHAPEDIVER_MATERIALS_PRESET="SHAPEDIVER_materials_preset"})(S=t.GLTF_EXTENSIONS||(t.GLTF_EXTENSIONS={}));const M=Uit;class k{constructor(){this.BINARY_EXTENSION_HEADER_LENGTH=20,this._eventEngine=i.EventEngine.instance,this._globalTransformation=o.mat4.fromValues(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1),this._httpClient=i.HttpClient.instance,this._logger=i.Logger.instance,this._performanceEvaluator=i.PerformanceEvaluator.instance,this._progressUpdateLimit=500,this._uuidGenerator=i.UuidGenerator.instance,this._eventId="",this._nodes={},this._numberOfConvertedNodes=0,this._numberOfNodes=0,this._progressTimer=0}load(C,P,O,L,B){var V,G;return e(this,void 0,void 0,function*(){this._eventId=B||this._uuidGenerator.create();const j={type:l.TASK_TYPE.GLTF_CONTENT_LOADING,id:this._eventId,progress:0,status:"Starting glTF 2.0 loading."};this._eventEngine.emitEvent(i.EVENTTYPE.TASK.TASK_START,j),this._numberOfConvertedNodes=0,this._numberOfNodes=C.nodes?C.nodes.length:0,this._progressTimer=performance.now(),this._baseUri=L,P&&O&&(this._body=P.slice(this.BINARY_EXTENSION_HEADER_LENGTH+O.contentLength+8,O.length)),this._content=C,this.validateVersionAndExtensions();const F=yield new M;this._bufferLoader=new g.BufferLoader(this._content,this._body,this._baseUri),yield this._bufferLoader.load(),this._bufferViewLoader=new v.BufferViewLoader(this._content,this._bufferLoader),this._bufferViewLoader.load(),this._accessorLoader=new _.AccessorLoader(this._content,this._bufferViewLoader),this._accessorLoader.load(),this._textureLoader=new b.TextureLoader(this._content,this._bufferViewLoader,this._baseUri),yield this._textureLoader.load(),this._materialLoader=new w.MaterialLoader(this._content,this._textureLoader),yield this._materialLoader.load(),this._geometryLoader=new E.GeometryLoader(this._content,this._accessorLoader,this._bufferViewLoader,this._materialLoader,F);const q={type:l.TASK_TYPE.GLTF_CONTENT_LOADING,id:this._eventId,progress:.1,status:"Initial logic of glTF loading."};this._eventEngine.emitEvent(i.EVENTTYPE.TASK.TASK_PROCESS,q);const fe=yield this.loadScene();if(this._content.extensions&&this._content.extensions[S.KHR_MATERIALS_VARIANTS]){const J=this._content.extensions[S.KHR_MATERIALS_VARIANTS].variants;for(let le=0;le<J.length;le++)this._geometryLoader.materialVariantsData.variants.push(J[le].name);this._geometryLoader.materialVariantsData.variantIndex=0,fe.data.push(this._geometryLoader.materialVariantsData)}if(this._content.skins!==void 0&&this._content.nodes!==void 0){for(let J=0;J<((V=this._content.nodes)===null||V===void 0?void 0:V.length);J++)if(this._content.nodes[J].skin!==void 0){const le=this.loadSkin(this._content.nodes[J].skin),me=this._nodes[J],be=[],ye=[];for(let pe=0;pe<le.joints.length;pe++){this._nodes[le.joints[pe]].data.push(new l.BoneData),be.push(this._nodes[le.joints[pe]]);let oe=o.mat4.create();if(le.inverseBindMatrices!==void 0){const Ce=le.inverseBindMatrices.array;oe=o.mat4.fromValues(Ce[pe*16+0],Ce[pe*16+1],Ce[pe*16+2],Ce[pe*16+3],Ce[pe*16+4],Ce[pe*16+5],Ce[pe*16+6],Ce[pe*16+7],Ce[pe*16+8],Ce[pe*16+9],Ce[pe*16+10],Ce[pe*16+11],Ce[pe*16+12],Ce[pe*16+13],Ce[pe*16+14],Ce[pe*16+15])}ye.push(oe)}me.skinNode=!0,me.bones=be,me.boneInverses=ye}}if(this._content.animations)for(let J=0;J<((G=this._content.animations)===null||G===void 0?void 0:G.length);J++)fe.data.push(this.loadAnimation(J));const ue={type:l.TASK_TYPE.GLTF_CONTENT_LOADING,id:this._eventId,progress:1,status:"GlTF loading complete."};return this._eventEngine.emitEvent(i.EVENTTYPE.TASK.TASK_END,ue),fe})}loadWithUrl(C){return e(this,void 0,void 0,function*(){this._performanceEvaluator.startSection("gltfProcessing."+C),this._performanceEvaluator.startSection("loadGltf."+C);const P=yield this._httpClient.get(C,{responseType:"arraybuffer"});this._performanceEvaluator.endSection("loadGltf."+C);let O,L,B,V;const G=new TextDecoder().decode(new Uint8Array(P.data,0,4));if(G==="glTF"||P.headers["content-type"]&&(P.headers["content-type"]==="model/gltf-binary"||P.headers["content-type"]==="application/octet-stream"||P.headers["content-type"]==="model/gltf.binary")){L=P.data;const F=new DataView(L,0,this.BINARY_EXTENSION_HEADER_LENGTH);if(V={magic:G,version:F.getUint32(4,!0),length:F.getUint32(8,!0),contentLength:F.getUint32(12,!0),contentFormat:F.getUint32(16,!0)},V.magic!="glTF")throw new i.ShapeDiverViewerDataProcessingError("GLTFLoader.load: Invalid data: sdgTF magic wrong.");const q=new DataView(L,this.BINARY_EXTENSION_HEADER_LENGTH,V.contentLength),fe=new TextDecoder().decode(q);O=JSON.parse(fe),this._body=L.slice(this.BINARY_EXTENSION_HEADER_LENGTH+V.contentLength+8,V.length)}else{O=JSON.parse(new TextDecoder().decode(P.data));const F=q=>{const fe=q.includes("/")?"/":"\\",ue=q.split(fe);return ue.pop(),ue.join(fe)};B=F(C),!B&&window&&window.location&&window.location.href&&(B=F(window.location.href))}return yield this.load(O,L,V,B)})}loadAnimation(C){if(!this._content.animations)throw new Error("Animations not available.");if(!this._content.animations[C])throw new Error("Animations not available.");const P=this._content.animations[C],O=[];let L=1/0,B=-1/0;for(let V=0;V<P.channels.length;V++){const G=P.channels[V],j=P.samplers[G.sampler],F=G.target,q=F.path,fe=this._nodes[F.node];if(fe===void 0)throw new Error("Animation node not available.");const ue=this._accessorLoader.getAccessor(j.input);L=Math.min(L,ue.min[0]),B=Math.max(B,ue.max[0]);const J=this._accessorLoader.getAccessor(j.output);let le=j.interpolation;le==="CUBICSPLINE"&&(this._logger.warn("Animation with CUBICSPLINE interpolation is currently not supported. Assigning linear interpolation instead."),le="linear"),O.push({node:fe,times:ue.array,values:J.array,path:q,interpolation:le==null?void 0:le.toLowerCase()})}return new l.AnimationData(P.name||"gltf_animation_"+C,O,L,B-L)}loadCamera(C){if(!this._content.cameras)throw new Error("Cameras not available.");if(!this._content.cameras[C])throw new Error("Cameras not available.");const P=this._content.cameras[C],O=new n.TreeNode(P.name||"camera_"+C);let L;if(P.type==="perspective"){const B=P.perspective;L=new d.PerspectiveCamera(O.id),O.data.push(L),L.fov=B.yfov*(180/Math.PI),L.aspect=B.aspectRatio||1,L.near=B.znear||1,L.far=B.zfar||2e6}else{const B=P.orthographic;L=new d.OrthographicCamera(O.id),O.data.push(L),L.left=-B.xmag,L.right=B.xmag,L.top=-B.ymag,L.bottom=B.ymag,L.near=B.znear||1,L.far=B.zfar||2e6}return L.useNodeData=!0,L.node=O,O}loadLights(C){if(!this._content.extensions||!this._content.extensions[S.KHR_LIGHTS_PUNCTUAL]||!this._content.extensions[S.KHR_LIGHTS_PUNCTUAL].lights)throw new Error(`Extension ${S.KHR_LIGHTS_PUNCTUAL} not available.`);if(!this._content.extensions[S.KHR_LIGHTS_PUNCTUAL].lights[C])throw new Error("Light not available.");const P=this._content.extensions[S.KHR_LIGHTS_PUNCTUAL].lights[C],O=new n.TreeNode(P.name||"light_"+C);let L="#ffffffff";P.color!==void 0&&(L=[P.color[0]*255,P.color[1]*255,P.color[2]*255]);const B=P.range!==void 0?P.range:0;let V;if(P.type==="directional"){V=new p.DirectionalLight({color:L}),O.data.push(V);const G=V;P.intensity!==void 0&&(G.intensity=P.intensity)}else if(P.type==="point"){V=new p.PointLight({color:L}),O.data.push(V);const G=V;G.distance=B,G.decay=2,P.intensity!==void 0&&(V.intensity=P.intensity),G.position=[0,0,0]}else if(P.type==="spot"){V=new p.SpotLight({color:L}),O.data.push(V),P.spot=P.spot||{},P.spot.innerConeAngle=P.spot.innerConeAngle!==void 0?P.spot.innerConeAngle:0,P.spot.outerConeAngle=P.spot.outerConeAngle!==void 0?P.spot.outerConeAngle:Math.PI/4;const G=V;G.distance=B,G.angle=P.spot.outerConeAngle,G.penumbra=1-P.spot.innerConeAngle/P.spot.outerConeAngle,G.decay=2,P.intensity!==void 0&&(V.intensity=P.intensity),G.position=[0,0,0],G.target=[0,0,-1]}else throw new Error("Unexpected light type: "+P.type);return V.useNodeData=!0,O}loadNode(C){return e(this,void 0,void 0,function*(){if(!this._content.nodes)throw new Error("Nodes not available.");if(!this._content.nodes[C])throw new Error("Node not available.");const P=this._content.nodes[C],O=new n.TreeNode(P.name||"node_"+C);if(this._nodes[C]=O,P.matrix)O.addTransformation({id:"gltf_matrix",matrix:o.mat4.fromValues(P.matrix[0],P.matrix[1],P.matrix[2],P.matrix[3],P.matrix[4],P.matrix[5],P.matrix[6],P.matrix[7],P.matrix[8],P.matrix[9],P.matrix[10],P.matrix[11],P.matrix[12],P.matrix[13],P.matrix[14],P.matrix[15])}),O.addTransformation({id:"gltf_matrix_translation",matrix:o.mat4.create()}),O.addTransformation({id:"gltf_matrix_rotation",matrix:o.mat4.create()}),O.addTransformation({id:"gltf_matrix_scale",matrix:o.mat4.create()});else if(P.translation||P.scale||P.rotation){const L=P.translation?o.mat4.fromTranslation(o.mat4.create(),o.vec3.fromValues(P.translation[0],P.translation[1],P.translation[2])):o.mat4.create(),B=P.scale?o.mat4.fromScaling(o.mat4.create(),o.vec3.fromValues(P.scale[0],P.scale[1],P.scale[2])):o.mat4.create(),V=P.rotation?o.mat4.fromQuat(o.mat4.create(),o.vec4.fromValues(P.rotation[0],P.rotation[1],P.rotation[2],P.rotation[3])):o.mat4.create();O.addTransformation({id:"gltf_matrix_translation",matrix:L}),O.addTransformation({id:"gltf_matrix_rotation",matrix:V}),O.addTransformation({id:"gltf_matrix_scale",matrix:B})}if(P.mesh!==void 0&&O.addChild(this._geometryLoader.loadMesh(P.mesh,P.weights)),P.camera!==void 0&&O.addChild(this.loadCamera(P.camera)),P.extensions&&P.extensions[S.KHR_LIGHTS_PUNCTUAL]&&O.addChild(this.loadLights(P.extensions[S.KHR_LIGHTS_PUNCTUAL].light)),P.children)for(let L=0,B=P.children.length;L<B;L++)O.addChild(yield this.loadNode(P.children[L]));if(this._numberOfConvertedNodes++,performance.now()-this._progressTimer>this._progressUpdateLimit){this._progressTimer=performance.now();const L={type:l.TASK_TYPE.GLTF_CONTENT_LOADING,id:this._eventId,progress:this._numberOfConvertedNodes/this._numberOfNodes/2+.1,status:`GlTF conversion progress: ${this._numberOfConvertedNodes}/${this._numberOfNodes} nodes.`};this._eventEngine.emitEvent(i.EVENTTYPE.TASK.TASK_PROCESS,L),yield new Promise(B=>setTimeout(B,0))}return O})}loadScene(){return e(this,void 0,void 0,function*(){if(!this._content.scenes)throw new Error("Scenes not available.");const C=this._content.scene||0;if(!this._content.scenes[C])throw new Error("Scene not available.");const P=this._content.scenes[C],O=new n.TreeNode(P.name||"scene_"+C);if(O.addTransformation({id:this._uuidGenerator.create(),matrix:this._globalTransformation}),P.nodes)for(let L=0,B=P.nodes.length;L<B;L++)O.addChild(yield this.loadNode(P.nodes[L]));return O})}loadSkin(C){if(!this._content.skins)throw new Error("Skins not available.");if(!this._content.skins[C])throw new Error("Skin not available.");const P=this._content.skins[C],O={joints:P.joints,inverseBindMatrices:null};return P.inverseBindMatrices===void 0||(O.inverseBindMatrices=this._accessorLoader.getAccessor(P.inverseBindMatrices)),O}validateVersionAndExtensions(){if(!this._content.asset)throw new Error("Asset not available.");const C=this._content.asset;if(!C.version)throw new Error("Asset does not have a version.");if(!(C.minVersion?C.minVersion:C.version).startsWith("2"))throw new Error("Version of the glTF not supported.");if(this._content.extensionsUsed){const O=[];for(let L=0;L<this._content.extensionsUsed.length;L++)Object.values(S).includes(this._content.extensionsUsed[L])||O.push(this._content.extensionsUsed[L]);if(O.length>0){let L="Extension"+(O.length===1?" ":"s ");O.forEach((B,V)=>{L+='"'+B+'"'+(V===O.length-1?"":V===O.length-2?" and ":", ")}),L+=(O.length===1?" is":" are")+" not supported, but used. Loading glTF regardless.",this._logger.info("GLTFLoader.validateVersionAndExtensions: "+L)}}if(this._content.extensionsRequired){const O=[];for(let L=0;L<this._content.extensionsRequired.length;L++)Object.values(S).includes(this._content.extensionsRequired[L])||O.push(this._content.extensionsRequired[L]);if(O.length>0){let L="Extension"+(O.length===1?" ":"s ");throw O.forEach((B,V)=>{L+='"'+B+'"'+(V===O.length-1?"":V===O.length-2?" and ":", ")}),L+=(O.length===1?" is":" are")+" not supported, but required. Aborting glTF loading.",new Error(L)}}}}t.GLTFLoader=k}($F)),$F}var Roe=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty(w9,"__esModule",{value:!0});w9.GeometryEngine=void 0;const p1=Mn,Fit=E9,Vit=_Q();class Git{constructor(){this.BINARY_EXTENSION_HEADER_LENGTH=20,this._httpClient=p1.HttpClient.instance,this._loadingQueue=[],this._logger=p1.Logger.instance,this._performanceEvaluator=p1.PerformanceEvaluator.instance,this._loadingQueueLength=1/0}static get instance(){return this._instance||(this._instance=new this)}get parallelGlTFProcessing(){return this._loadingQueueLength}set parallelGlTFProcessing(e){this._loadingQueueLength=e}loadContent(e,n){return Roe(this,void 0,void 0,function*(){if(!e||e&&!e.href)throw new p1.ShapeDiverViewerDataProcessingError("GeometryEngine cannot load content.");for(;this._loadingQueueLength<=this._loadingQueue.length;)yield new Promise(d=>setTimeout(d,10));const i=e.href,o=new Promise((d,p)=>Roe(this,void 0,void 0,function*(){let g,v,_,b,w="2.0";if(e.format==="glb"||e.format==="gltf"){this._performanceEvaluator.startSection("gltfProcessing."+i),this._performanceEvaluator.startSection("loadGltf."+i);const S=yield this._httpClient.get(i,{responseType:"arraybuffer"});this._performanceEvaluator.endSection("loadGltf."+i);const M=new TextDecoder().decode(new Uint8Array(S.data,0,4));if(M==="glTF"){v=S.data;const x=new DataView(v,0,this.BINARY_EXTENSION_HEADER_LENGTH);if(b={magic:M,version:x.getUint32(4,!0),length:x.getUint32(8,!0),contentLength:x.getUint32(12,!0),contentFormat:x.getUint32(16,!0)},b.magic!="glTF")throw new p1.ShapeDiverViewerDataProcessingError("Invalid data: glTF magic wrong.");const C=new DataView(v,this.BINARY_EXTENSION_HEADER_LENGTH,b.contentLength),P=new TextDecoder().decode(C);if(g=JSON.parse(P),g&&g.asset&&g.asset.version){const O=(g.asset.version+"").endsWith(".0")?g.asset.version:g.asset.version+".0";if(b.version+".0"===O)w=b.version+".0";else throw new p1.ShapeDiverViewerDataProcessingError("GeometryEngine.loadContent: glTF header version ("+b.version+") is not the same as asset version ("+O+").")}else w=b.version+".0"}else{if(g=JSON.parse(new TextDecoder().decode(S.data)),g&&g.asset&&g.asset.version){if(g.asset.version!=="2.0")throw new p1.ShapeDiverViewerDataProcessingError("GeometryEngine.loadContent: Only gltf v2 is supported in a non-binary format.")}else this._logger.warn("GeometryEngine.loadContent: No version specified in asset, trying to load as v2."),w="2.0";const x=C=>{const P=C.includes("/")?"/":"\\",O=C.split(P);return O.pop(),O.join(P)};_=x(i),!_&&window&&window.location&&window.location.href&&(_=x(window.location.href))}}let E;w==="1.0"?E=new Fit.GLTFLoader().load(g,v,b,_,n):E=new Vit.GLTFLoader().load(g,v,b,_,n),E.catch(S=>{p(S)}),d(E)}));this._loadingQueue.push(o);const l=yield o;return this._loadingQueue.splice(this._loadingQueue.indexOf(o),1),this._performanceEvaluator.endSection("gltfProcessing."+i),l})}}w9.GeometryEngine=Git;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.GeometryEngine=void 0;const e=w9;Object.defineProperty(t,"GeometryEngine",{enumerable:!0,get:function(){return e.GeometryEngine}})})(W6);Object.defineProperty(oa,"__esModule",{value:!0});oa.generalOptions=oa.showConsoleMessage=oa.version=oa.sceneTree=oa.removeListener=oa.addListener=void 0;const h$=k6,_x=Mn,jit=W6,Hit=dr;class $it{get caching(){return{enable:g_.enableCaching,excludedQueryParameters:g_.excludedQueryParameters,maxCacheSize:g_.maxCacheSize}}set caching(e){d0.validateAndError("caching",e,"object",!0),d0.validateAndError("caching",e.enable,"boolean"),d0.validateAndError("caching",e.excludedQueryParameters,"stringArray"),d0.validateAndError("caching",e.maxCacheSize,"number"),e.enable!==void 0&&(g_.enableCaching=e.enable),e.excludedQueryParameters!==void 0&&(g_.excludedQueryParameters=e.excludedQueryParameters),e.maxCacheSize!==void 0&&(g_.maxCacheSize=e.maxCacheSize),u0.debug(`caching: CoggingLevel was set to: ${e}`)}get consoleBranding(){return p$}set consoleBranding(e){d0.validateAndError("consoleBranding",e,"boolean"),p$=e,u0.debug(`consoleBranding: ConsoleBranding was set to: ${e}`)}get loggingLevel(){return u0.loggingLevel}set loggingLevel(e){d0.validateAndError("loggingLevel",e,"enum",!0,Object.values(_x.LOGGING_LEVEL)),u0.loggingLevel=e,u0.debug(`loggingLevel: LoggingLevel was set to: ${e}`)}get parallelGlTFProcessing(){return Doe.parallelGlTFProcessing}set parallelGlTFProcessing(e){d0.validateAndError("parallelGlTFProcessing",e,"number"),Doe.parallelGlTFProcessing=e,u0.debug(`parallelGlTFProcessing: ParallelGlTFProcessing was set to: ${e}`)}get showMessages(){return u0.showMessages}set showMessages(e){d0.validateAndError("showMessages",e,"boolean"),u0.showMessages=e,u0.debug(`showMessages: ShowMessages was set to: ${e}`)}}const g_=_x.HttpClient.instance,d0=_x.InputValidator.instance,u0=_x.Logger.instance,xye=_x.EventEngine.instance,Doe=jit.GeometryEngine.instance;let Ooe=!1,p$=!0;const Wit=(t,e)=>(d0.validateAndError("addListener",t,"string"),d0.validateAndError("addListener",e,"function"),u0.debug(`addListener: Event Listener was registered for ${t}.`),xye.addListener(t,e));oa.addListener=Wit;const Yit=t=>(d0.validateAndError("removeListener",t,"string"),u0.debug(`removeListener: Removing event listener with id ${t}.`),xye.removeListener(t));oa.removeListener=Yit;oa.sceneTree=Hit.Tree.instance;oa.version=h$.build_data.build_version.replace("3.","");const qit=()=>{Ooe!==!0&&(Ooe=!0,console.log(p$===!0?`Powered by:
   _____  __                         ____   _                   
  / ___/ / /_   ____ _ ____   ___   / __ \\ (_)_   __ ___   _____
  \\__ \\ / __ \\ / __ '// __ \\ / _ \\ / / / // /| | / // _ \\ / ___/
 ___/ // / / // /_/ // /_/ //  __// /_/ // / | |/ //  __// /    
/____//_/ /_/ \\__,_// .___/ \\___//_____//_/  |___/ \\___//_/     
                   /_/                                          
ShapeDiver Viewer 3, Version ${h$.build_data.build_version.replace("3.","")}
Visit us at https://shapediver.com/ and find out more!
`:`ShapeDiver Viewer 3, Version ${h$.build_data.build_version.replace("3.","")}`))};oa.showConsoleMessage=qit;oa.generalOptions=new $it;var yx={},ZN={},se={};/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const QN="162",Xit={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Zit={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Mye=0,m$=1,kye=2,Qit=3,Kit=0,yQ=1,Cye=2,hd=3,mp=0,Zl=1,yd=2,Jh=0,Bg=1,g$=2,v$=3,_$=4,Pye=5,L2=100,Rye=101,Dye=102,y$=103,b$=104,Oye=200,Iye=201,Nye=202,Lye=203,QO=204,KO=205,zye=206,Bye=207,Uye=208,Fye=209,Vye=210,Gye=211,jye=212,Hye=213,$ye=214,Wye=0,Yye=1,qye=2,NT=3,Xye=4,Zye=5,Qye=6,Kye=7,bx=0,Jye=1,ebe=2,ep=0,tbe=1,nbe=2,rbe=3,ibe=4,sbe=5,obe=6,abe=7,A$="attached",lbe="detached",KN=300,gp=301,vm=302,LT=303,zT=304,gA=306,BT=1e3,xl=1001,UT=1002,ko=1003,JO=1004,Jit=1004,mg=1005,est=1005,so=1006,XS=1007,tst=1007,Ed=1008,nst=1008,tp=1009,cbe=1010,ube=1011,JN=1012,bQ=1013,Hh=1014,bu=1015,y4=1016,AQ=1017,wQ=1018,nm=1020,fbe=1021,Oc=1023,dbe=1024,hbe=1025,rm=1026,Jg=1027,EQ=1028,SQ=1029,pbe=1030,TQ=1031,xQ=1033,aD=33776,lD=33777,cD=33778,uD=33779,w$=35840,E$=35841,S$=35842,T$=35843,MQ=36196,x$=37492,M$=37496,k$=37808,C$=37809,P$=37810,R$=37811,D$=37812,O$=37813,I$=37814,N$=37815,L$=37816,z$=37817,B$=37818,U$=37819,F$=37820,V$=37821,fD=36492,G$=36494,j$=36495,mbe=36283,H$=36284,$$=36285,W$=36286,gbe=2200,vbe=2201,_be=2202,FT=2300,VT=2301,dD=2302,Mg=2400,kg=2401,GT=2402,eL=2500,kQ=2501,rst=0,ist=1,sst=2,ybe=3200,bbe=3201,Dm=0,Abe=1,Lh="",uf="srgb",xp="srgb-linear",tL="display-p3",Ax="display-p3-linear",jT="linear",Ps="srgb",HT="rec709",$T="p3",ost=0,K1=7680,ast=7681,lst=7682,cst=7683,ust=34055,fst=34056,dst=5386,hst=512,pst=513,mst=514,gst=515,vst=516,_st=517,yst=518,Y$=519,wbe=512,Ebe=513,Sbe=514,CQ=515,Tbe=516,xbe=517,Mbe=518,kbe=519,WT=35044,bst=35048,Ast=35040,wst=35045,Est=35049,Sst=35041,Tst=35046,xst=35050,Mst=35042,kst="100",q$="300 es",eI=1035,Sd=2e3,YT=2001;class Mp{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(n)===-1&&i[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const o=this._listeners[e];if(o!==void 0){const l=o.indexOf(n);l!==-1&&o.splice(l,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const o=i.slice(0);for(let l=0,d=o.length;l<d;l++)o[l].call(this,e);e.target=null}}}const pl=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Ioe=1234567;const Ug=Math.PI/180,b4=180/Math.PI;function xu(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(pl[t&255]+pl[t>>8&255]+pl[t>>16&255]+pl[t>>24&255]+"-"+pl[e&255]+pl[e>>8&255]+"-"+pl[e>>16&15|64]+pl[e>>24&255]+"-"+pl[n&63|128]+pl[n>>8&255]+"-"+pl[n>>16&255]+pl[n>>24&255]+pl[i&255]+pl[i>>8&255]+pl[i>>16&255]+pl[i>>24&255]).toLowerCase()}function po(t,e,n){return Math.max(e,Math.min(n,t))}function PQ(t,e){return(t%e+e)%e}function Cst(t,e,n,i,o){return i+(t-e)*(o-i)/(n-e)}function Pst(t,e,n){return t!==e?(n-t)/(e-t):0}function ZS(t,e,n){return(1-n)*t+n*e}function Rst(t,e,n,i){return ZS(t,e,1-Math.exp(-n*i))}function Dst(t,e=1){return e-Math.abs(PQ(t,e*2)-e)}function Ost(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function Ist(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function Nst(t,e){return t+Math.floor(Math.random()*(e-t+1))}function Lst(t,e){return t+Math.random()*(e-t)}function zst(t){return t*(.5-Math.random())}function Bst(t){t!==void 0&&(Ioe=t);let e=Ioe+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Ust(t){return t*Ug}function Fst(t){return t*b4}function X$(t){return(t&t-1)===0&&t!==0}function Vst(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function tI(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function Gst(t,e,n,i,o){const l=Math.cos,d=Math.sin,p=l(n/2),g=d(n/2),v=l((e+i)/2),_=d((e+i)/2),b=l((e-i)/2),w=d((e-i)/2),E=l((i-e)/2),S=d((i-e)/2);switch(o){case"XYX":t.set(p*_,g*b,g*w,p*v);break;case"YZY":t.set(g*w,p*_,g*b,p*v);break;case"ZXZ":t.set(g*b,g*w,p*_,p*v);break;case"XZX":t.set(p*_,g*S,g*E,p*v);break;case"YXY":t.set(g*E,p*_,g*S,p*v);break;case"ZYZ":t.set(g*S,g*E,p*_,p*v);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+o)}}function ql(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Gr(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const jst={DEG2RAD:Ug,RAD2DEG:b4,generateUUID:xu,clamp:po,euclideanModulo:PQ,mapLinear:Cst,inverseLerp:Pst,lerp:ZS,damp:Rst,pingpong:Dst,smoothstep:Ost,smootherstep:Ist,randInt:Nst,randFloat:Lst,randFloatSpread:zst,seededRandom:Bst,degToRad:Ust,radToDeg:Fst,isPowerOfTwo:X$,ceilPowerOfTwo:Vst,floorPowerOfTwo:tI,setQuaternionFromProperEuler:Gst,normalize:Gr,denormalize:ql};class $t{constructor(e=0,n=0){$t.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,i=this.y,o=e.elements;return this.x=o[0]*n+o[3]*i+o[6],this.y=o[1]*n+o[4]*i+o[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(po(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y;return n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const i=Math.cos(n),o=Math.sin(n),l=this.x-e.x,d=this.y-e.y;return this.x=l*i-d*o+e.x,this.y=l*o+d*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Vr{constructor(e,n,i,o,l,d,p,g,v){Vr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,i,o,l,d,p,g,v)}set(e,n,i,o,l,d,p,g,v){const _=this.elements;return _[0]=e,_[1]=o,_[2]=p,_[3]=n,_[4]=l,_[5]=g,_[6]=i,_[7]=d,_[8]=v,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this}extractBasis(e,n,i){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,o=n.elements,l=this.elements,d=i[0],p=i[3],g=i[6],v=i[1],_=i[4],b=i[7],w=i[2],E=i[5],S=i[8],M=o[0],k=o[3],x=o[6],C=o[1],P=o[4],O=o[7],L=o[2],B=o[5],V=o[8];return l[0]=d*M+p*C+g*L,l[3]=d*k+p*P+g*B,l[6]=d*x+p*O+g*V,l[1]=v*M+_*C+b*L,l[4]=v*k+_*P+b*B,l[7]=v*x+_*O+b*V,l[2]=w*M+E*C+S*L,l[5]=w*k+E*P+S*B,l[8]=w*x+E*O+S*V,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[1],o=e[2],l=e[3],d=e[4],p=e[5],g=e[6],v=e[7],_=e[8];return n*d*_-n*p*v-i*l*_+i*p*g+o*l*v-o*d*g}invert(){const e=this.elements,n=e[0],i=e[1],o=e[2],l=e[3],d=e[4],p=e[5],g=e[6],v=e[7],_=e[8],b=_*d-p*v,w=p*g-_*l,E=v*l-d*g,S=n*b+i*w+o*E;if(S===0)return this.set(0,0,0,0,0,0,0,0,0);const M=1/S;return e[0]=b*M,e[1]=(o*v-_*i)*M,e[2]=(p*i-o*d)*M,e[3]=w*M,e[4]=(_*n-o*g)*M,e[5]=(o*l-p*n)*M,e[6]=E*M,e[7]=(i*g-v*n)*M,e[8]=(d*n-i*l)*M,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,i,o,l,d,p){const g=Math.cos(l),v=Math.sin(l);return this.set(i*g,i*v,-i*(g*d+v*p)+d+e,-o*v,o*g,-o*(-v*d+g*p)+p+n,0,0,1),this}scale(e,n){return this.premultiply(XF.makeScale(e,n)),this}rotate(e){return this.premultiply(XF.makeRotation(-e)),this}translate(e,n){return this.premultiply(XF.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,i,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,i=e.elements;for(let o=0;o<9;o++)if(n[o]!==i[o])return!1;return!0}fromArray(e,n=0){for(let i=0;i<9;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const XF=new Vr;function Cbe(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const Hst={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function ob(t,e){return new Hst[t](e)}function qT(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function Pbe(){const t=qT("canvas");return t.style.display="block",t}const Noe={};function Rbe(t){t in Noe||(Noe[t]=!0,console.warn(t))}const Loe=new Vr().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),zoe=new Vr().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),K8={[xp]:{transfer:jT,primaries:HT,toReference:t=>t,fromReference:t=>t},[uf]:{transfer:Ps,primaries:HT,toReference:t=>t.convertSRGBToLinear(),fromReference:t=>t.convertLinearToSRGB()},[Ax]:{transfer:jT,primaries:$T,toReference:t=>t.applyMatrix3(zoe),fromReference:t=>t.applyMatrix3(Loe)},[tL]:{transfer:Ps,primaries:$T,toReference:t=>t.convertSRGBToLinear().applyMatrix3(zoe),fromReference:t=>t.applyMatrix3(Loe).convertLinearToSRGB()}},$st=new Set([xp,Ax]),cs={enabled:!0,_workingColorSpace:xp,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(t){if(!$st.has(t))throw new Error(`Unsupported working color space, "${t}".`);this._workingColorSpace=t},convert:function(t,e,n){if(this.enabled===!1||e===n||!e||!n)return t;const i=K8[e].toReference,o=K8[n].fromReference;return o(i(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this._workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this._workingColorSpace)},getPrimaries:function(t){return K8[t].primaries},getTransfer:function(t){return t===Lh?jT:K8[t].transfer}};function Tb(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function ZF(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let v_;class RQ{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{v_===void 0&&(v_=qT("canvas")),v_.width=e.width,v_.height=e.height;const i=v_.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),n=v_}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=qT("canvas");n.width=e.width,n.height=e.height;const i=n.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const o=i.getImageData(0,0,e.width,e.height),l=o.data;for(let d=0;d<l.length;d++)l[d]=Tb(l[d]/255)*255;return i.putImageData(o,0,0),n}else if(e.data){const n=e.data.slice(0);for(let i=0;i<n.length;i++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[i]=Math.floor(Tb(n[i]/255)*255):n[i]=Tb(n[i]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Wst=0;class Cg{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Wst++}),this.uuid=xu(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},o=this.data;if(o!==null){let l;if(Array.isArray(o)){l=[];for(let d=0,p=o.length;d<p;d++)o[d].isDataTexture?l.push(QF(o[d].image)):l.push(QF(o[d]))}else l=QF(o);i.url=l}return n||(e.images[this.uuid]=i),i}}function QF(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?RQ.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Yst=0;class mo extends Mp{constructor(e=mo.DEFAULT_IMAGE,n=mo.DEFAULT_MAPPING,i=xl,o=xl,l=so,d=Ed,p=Oc,g=tp,v=mo.DEFAULT_ANISOTROPY,_=Lh){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Yst++}),this.uuid=xu(),this.name="",this.source=new Cg(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=i,this.wrapT=o,this.magFilter=l,this.minFilter=d,this.anisotropy=v,this.format=p,this.internalFormat=null,this.type=g,this.offset=new $t(0,0),this.repeat=new $t(1,1),this.center=new $t(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Vr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=_,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),n||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==KN)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case BT:e.x=e.x-Math.floor(e.x);break;case xl:e.x=e.x<0?0:1;break;case UT:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case BT:e.y=e.y-Math.floor(e.y);break;case xl:e.y=e.y<0?0:1;break;case UT:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}}mo.DEFAULT_IMAGE=null;mo.DEFAULT_MAPPING=KN;mo.DEFAULT_ANISOTROPY=1;class fs{constructor(e=0,n=0,i=0,o=1){fs.prototype.isVector4=!0,this.x=e,this.y=n,this.z=i,this.w=o}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,i,o){return this.x=e,this.y=n,this.z=i,this.w=o,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,i=this.y,o=this.z,l=this.w,d=e.elements;return this.x=d[0]*n+d[4]*i+d[8]*o+d[12]*l,this.y=d[1]*n+d[5]*i+d[9]*o+d[13]*l,this.z=d[2]*n+d[6]*i+d[10]*o+d[14]*l,this.w=d[3]*n+d[7]*i+d[11]*o+d[15]*l,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,i,o,l;const g=e.elements,v=g[0],_=g[4],b=g[8],w=g[1],E=g[5],S=g[9],M=g[2],k=g[6],x=g[10];if(Math.abs(_-w)<.01&&Math.abs(b-M)<.01&&Math.abs(S-k)<.01){if(Math.abs(_+w)<.1&&Math.abs(b+M)<.1&&Math.abs(S+k)<.1&&Math.abs(v+E+x-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const P=(v+1)/2,O=(E+1)/2,L=(x+1)/2,B=(_+w)/4,V=(b+M)/4,G=(S+k)/4;return P>O&&P>L?P<.01?(i=0,o=.707106781,l=.707106781):(i=Math.sqrt(P),o=B/i,l=V/i):O>L?O<.01?(i=.707106781,o=0,l=.707106781):(o=Math.sqrt(O),i=B/o,l=G/o):L<.01?(i=.707106781,o=.707106781,l=0):(l=Math.sqrt(L),i=V/l,o=G/l),this.set(i,o,l,n),this}let C=Math.sqrt((k-S)*(k-S)+(b-M)*(b-M)+(w-_)*(w-_));return Math.abs(C)<.001&&(C=1),this.x=(k-S)/C,this.y=(b-M)/C,this.z=(w-_)/C,this.w=Math.acos((v+E+x-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this.w=e.w+(n.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Dbe extends Mp{constructor(e=1,n=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new fs(0,0,e,n),this.scissorTest=!1,this.viewport=new fs(0,0,e,n);const o={width:e,height:n,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:so,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0,count:1},i);const l=new mo(o,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);l.flipY=!1,l.generateMipmaps=i.generateMipmaps,l.internalFormat=i.internalFormat,this.textures=[];const d=i.count;for(let p=0;p<d;p++)this.textures[p]=l.clone(),this.textures[p].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,n,i=1){if(this.width!==e||this.height!==n||this.depth!==i){this.width=e,this.height=n,this.depth=i;for(let o=0,l=this.textures.length;o<l;o++)this.textures[o].image.width=e,this.textures[o].image.height=n,this.textures[o].image.depth=i;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,o=e.textures.length;i<o;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new Cg(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class L0 extends Dbe{constructor(e=1,n=1,i={}){super(e,n,i),this.isWebGLRenderTarget=!0}}class nL extends mo{constructor(e=null,n=1,i=1,o=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:i,depth:o},this.magFilter=ko,this.minFilter=ko,this.wrapR=xl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class qst extends L0{constructor(e=1,n=1,i=1,o={}){super(e,n,o),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new nL(null,e,n,i),this.texture.isRenderTargetTexture=!0}}class DQ extends mo{constructor(e=null,n=1,i=1,o=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:i,depth:o},this.magFilter=ko,this.minFilter=ko,this.wrapR=xl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Xst extends L0{constructor(e=1,n=1,i=1,o={}){super(e,n,o),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new DQ(null,e,n,i),this.texture.isRenderTargetTexture=!0}}class Gc{constructor(e=0,n=0,i=0,o=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=i,this._w=o}static slerpFlat(e,n,i,o,l,d,p){let g=i[o+0],v=i[o+1],_=i[o+2],b=i[o+3];const w=l[d+0],E=l[d+1],S=l[d+2],M=l[d+3];if(p===0){e[n+0]=g,e[n+1]=v,e[n+2]=_,e[n+3]=b;return}if(p===1){e[n+0]=w,e[n+1]=E,e[n+2]=S,e[n+3]=M;return}if(b!==M||g!==w||v!==E||_!==S){let k=1-p;const x=g*w+v*E+_*S+b*M,C=x>=0?1:-1,P=1-x*x;if(P>Number.EPSILON){const L=Math.sqrt(P),B=Math.atan2(L,x*C);k=Math.sin(k*B)/L,p=Math.sin(p*B)/L}const O=p*C;if(g=g*k+w*O,v=v*k+E*O,_=_*k+S*O,b=b*k+M*O,k===1-p){const L=1/Math.sqrt(g*g+v*v+_*_+b*b);g*=L,v*=L,_*=L,b*=L}}e[n]=g,e[n+1]=v,e[n+2]=_,e[n+3]=b}static multiplyQuaternionsFlat(e,n,i,o,l,d){const p=i[o],g=i[o+1],v=i[o+2],_=i[o+3],b=l[d],w=l[d+1],E=l[d+2],S=l[d+3];return e[n]=p*S+_*b+g*E-v*w,e[n+1]=g*S+_*w+v*b-p*E,e[n+2]=v*S+_*E+p*w-g*b,e[n+3]=_*S-p*b-g*w-v*E,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,i,o){return this._x=e,this._y=n,this._z=i,this._w=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const i=e._x,o=e._y,l=e._z,d=e._order,p=Math.cos,g=Math.sin,v=p(i/2),_=p(o/2),b=p(l/2),w=g(i/2),E=g(o/2),S=g(l/2);switch(d){case"XYZ":this._x=w*_*b+v*E*S,this._y=v*E*b-w*_*S,this._z=v*_*S+w*E*b,this._w=v*_*b-w*E*S;break;case"YXZ":this._x=w*_*b+v*E*S,this._y=v*E*b-w*_*S,this._z=v*_*S-w*E*b,this._w=v*_*b+w*E*S;break;case"ZXY":this._x=w*_*b-v*E*S,this._y=v*E*b+w*_*S,this._z=v*_*S+w*E*b,this._w=v*_*b-w*E*S;break;case"ZYX":this._x=w*_*b-v*E*S,this._y=v*E*b+w*_*S,this._z=v*_*S-w*E*b,this._w=v*_*b+w*E*S;break;case"YZX":this._x=w*_*b+v*E*S,this._y=v*E*b+w*_*S,this._z=v*_*S-w*E*b,this._w=v*_*b-w*E*S;break;case"XZY":this._x=w*_*b-v*E*S,this._y=v*E*b-w*_*S,this._z=v*_*S+w*E*b,this._w=v*_*b+w*E*S;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+d)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const i=n/2,o=Math.sin(i);return this._x=e.x*o,this._y=e.y*o,this._z=e.z*o,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,i=n[0],o=n[4],l=n[8],d=n[1],p=n[5],g=n[9],v=n[2],_=n[6],b=n[10],w=i+p+b;if(w>0){const E=.5/Math.sqrt(w+1);this._w=.25/E,this._x=(_-g)*E,this._y=(l-v)*E,this._z=(d-o)*E}else if(i>p&&i>b){const E=2*Math.sqrt(1+i-p-b);this._w=(_-g)/E,this._x=.25*E,this._y=(o+d)/E,this._z=(l+v)/E}else if(p>b){const E=2*Math.sqrt(1+p-i-b);this._w=(l-v)/E,this._x=(o+d)/E,this._y=.25*E,this._z=(g+_)/E}else{const E=2*Math.sqrt(1+b-i-p);this._w=(d-o)/E,this._x=(l+v)/E,this._y=(g+_)/E,this._z=.25*E}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let i=e.dot(n)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(po(this.dot(e),-1,1)))}rotateTowards(e,n){const i=this.angleTo(e);if(i===0)return this;const o=Math.min(1,n/i);return this.slerp(e,o),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const i=e._x,o=e._y,l=e._z,d=e._w,p=n._x,g=n._y,v=n._z,_=n._w;return this._x=i*_+d*p+o*v-l*g,this._y=o*_+d*g+l*p-i*v,this._z=l*_+d*v+i*g-o*p,this._w=d*_-i*p-o*g-l*v,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const i=this._x,o=this._y,l=this._z,d=this._w;let p=d*e._w+i*e._x+o*e._y+l*e._z;if(p<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,p=-p):this.copy(e),p>=1)return this._w=d,this._x=i,this._y=o,this._z=l,this;const g=1-p*p;if(g<=Number.EPSILON){const E=1-n;return this._w=E*d+n*this._w,this._x=E*i+n*this._x,this._y=E*o+n*this._y,this._z=E*l+n*this._z,this.normalize(),this}const v=Math.sqrt(g),_=Math.atan2(v,p),b=Math.sin((1-n)*_)/v,w=Math.sin(n*_)/v;return this._w=d*b+this._w*w,this._x=i*b+this._x*w,this._y=o*b+this._y*w,this._z=l*b+this._z*w,this._onChangeCallback(),this}slerpQuaternions(e,n,i){return this.copy(e).slerp(n,i)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),i=Math.random(),o=Math.sqrt(1-i),l=Math.sqrt(i);return this.set(o*Math.sin(e),o*Math.cos(e),l*Math.sin(n),l*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Le{constructor(e=0,n=0,i=0){Le.prototype.isVector3=!0,this.x=e,this.y=n,this.z=i}set(e,n,i){return i===void 0&&(i=this.z),this.x=e,this.y=n,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(Boe.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(Boe.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,i=this.y,o=this.z,l=e.elements;return this.x=l[0]*n+l[3]*i+l[6]*o,this.y=l[1]*n+l[4]*i+l[7]*o,this.z=l[2]*n+l[5]*i+l[8]*o,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,i=this.y,o=this.z,l=e.elements,d=1/(l[3]*n+l[7]*i+l[11]*o+l[15]);return this.x=(l[0]*n+l[4]*i+l[8]*o+l[12])*d,this.y=(l[1]*n+l[5]*i+l[9]*o+l[13])*d,this.z=(l[2]*n+l[6]*i+l[10]*o+l[14])*d,this}applyQuaternion(e){const n=this.x,i=this.y,o=this.z,l=e.x,d=e.y,p=e.z,g=e.w,v=2*(d*o-p*i),_=2*(p*n-l*o),b=2*(l*i-d*n);return this.x=n+g*v+d*b-p*_,this.y=i+g*_+p*v-l*b,this.z=o+g*b+l*_-d*v,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,i=this.y,o=this.z,l=e.elements;return this.x=l[0]*n+l[4]*i+l[8]*o,this.y=l[1]*n+l[5]*i+l[9]*o,this.z=l[2]*n+l[6]*i+l[10]*o,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(n,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const i=e.x,o=e.y,l=e.z,d=n.x,p=n.y,g=n.z;return this.x=o*g-l*p,this.y=l*d-i*g,this.z=i*p-o*d,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const i=e.dot(this)/n;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return KF.copy(this).projectOnVector(e),this.sub(KF)}reflect(e){return this.sub(KF.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(po(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y,o=this.z-e.z;return n*n+i*i+o*o}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,i){const o=Math.sin(n)*e;return this.x=o*Math.sin(i),this.y=Math.cos(n)*e,this.z=o*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,i){return this.x=e*Math.sin(n),this.y=i,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),o=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=i,this.z=o,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,i=Math.sqrt(1-n*n);return this.x=i*Math.cos(e),this.y=n,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const KF=new Le,Boe=new Gc;class Ql{constructor(e=new Le(1/0,1/0,1/0),n=new Le(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n+=3)this.expandByPoint(Zf.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,i=e.count;n<i;n++)this.expandByPoint(Zf.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=Zf.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const l=i.getAttribute("position");if(n===!0&&l!==void 0&&e.isInstancedMesh!==!0)for(let d=0,p=l.count;d<p;d++)e.isMesh===!0?e.getVertexPosition(d,Zf):Zf.fromBufferAttribute(l,d),Zf.applyMatrix4(e.matrixWorld),this.expandByPoint(Zf);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),J8.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),J8.copy(i.boundingBox)),J8.applyMatrix4(e.matrixWorld),this.union(J8)}const o=e.children;for(let l=0,d=o.length;l<d;l++)this.expandByObject(o[l],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Zf),Zf.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,i;return e.normal.x>0?(n=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),n<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(C3),ek.subVectors(this.max,C3),__.subVectors(e.a,C3),y_.subVectors(e.b,C3),b_.subVectors(e.c,C3),Qp.subVectors(y_,__),Kp.subVectors(b_,y_),m1.subVectors(__,b_);let n=[0,-Qp.z,Qp.y,0,-Kp.z,Kp.y,0,-m1.z,m1.y,Qp.z,0,-Qp.x,Kp.z,0,-Kp.x,m1.z,0,-m1.x,-Qp.y,Qp.x,0,-Kp.y,Kp.x,0,-m1.y,m1.x,0];return!JF(n,__,y_,b_,ek)||(n=[1,0,0,0,1,0,0,0,1],!JF(n,__,y_,b_,ek))?!1:(tk.crossVectors(Qp,Kp),n=[tk.x,tk.y,tk.z],JF(n,__,y_,b_,ek))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Zf).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Zf).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(rh[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),rh[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),rh[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),rh[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),rh[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),rh[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),rh[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),rh[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(rh),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const rh=[new Le,new Le,new Le,new Le,new Le,new Le,new Le,new Le],Zf=new Le,J8=new Ql,__=new Le,y_=new Le,b_=new Le,Qp=new Le,Kp=new Le,m1=new Le,C3=new Le,ek=new Le,tk=new Le,g1=new Le;function JF(t,e,n,i,o){for(let l=0,d=t.length-3;l<=d;l+=3){g1.fromArray(t,l);const p=o.x*Math.abs(g1.x)+o.y*Math.abs(g1.y)+o.z*Math.abs(g1.z),g=e.dot(g1),v=n.dot(g1),_=i.dot(g1);if(Math.max(-Math.max(g,v,_),Math.min(g,v,_))>p)return!1}return!0}const Zst=new Ql,P3=new Le,eV=new Le;class Ml{constructor(e=new Le,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const i=this.center;n!==void 0?i.copy(n):Zst.setFromPoints(e).getCenter(i);let o=0;for(let l=0,d=e.length;l<d;l++)o=Math.max(o,i.distanceToSquared(e[l]));return this.radius=Math.sqrt(o),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const i=this.center.distanceToSquared(e);return n.copy(e),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;P3.subVectors(e,this.center);const n=P3.lengthSq();if(n>this.radius*this.radius){const i=Math.sqrt(n),o=(i-this.radius)*.5;this.center.addScaledVector(P3,o/i),this.radius+=o}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(eV.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(P3.copy(e.center).add(eV)),this.expandByPoint(P3.copy(e.center).sub(eV))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const ih=new Le,tV=new Le,nk=new Le,Jp=new Le,nV=new Le,rk=new Le,rV=new Le;class vA{constructor(e=new Le,n=new Le(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ih)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=ih.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(ih.copy(this.origin).addScaledVector(this.direction,n),ih.distanceToSquared(e))}distanceSqToSegment(e,n,i,o){tV.copy(e).add(n).multiplyScalar(.5),nk.copy(n).sub(e).normalize(),Jp.copy(this.origin).sub(tV);const l=e.distanceTo(n)*.5,d=-this.direction.dot(nk),p=Jp.dot(this.direction),g=-Jp.dot(nk),v=Jp.lengthSq(),_=Math.abs(1-d*d);let b,w,E,S;if(_>0)if(b=d*g-p,w=d*p-g,S=l*_,b>=0)if(w>=-S)if(w<=S){const M=1/_;b*=M,w*=M,E=b*(b+d*w+2*p)+w*(d*b+w+2*g)+v}else w=l,b=Math.max(0,-(d*w+p)),E=-b*b+w*(w+2*g)+v;else w=-l,b=Math.max(0,-(d*w+p)),E=-b*b+w*(w+2*g)+v;else w<=-S?(b=Math.max(0,-(-d*l+p)),w=b>0?-l:Math.min(Math.max(-l,-g),l),E=-b*b+w*(w+2*g)+v):w<=S?(b=0,w=Math.min(Math.max(-l,-g),l),E=w*(w+2*g)+v):(b=Math.max(0,-(d*l+p)),w=b>0?l:Math.min(Math.max(-l,-g),l),E=-b*b+w*(w+2*g)+v);else w=d>0?-l:l,b=Math.max(0,-(d*w+p)),E=-b*b+w*(w+2*g)+v;return i&&i.copy(this.origin).addScaledVector(this.direction,b),o&&o.copy(tV).addScaledVector(nk,w),E}intersectSphere(e,n){ih.subVectors(e.center,this.origin);const i=ih.dot(this.direction),o=ih.dot(ih)-i*i,l=e.radius*e.radius;if(o>l)return null;const d=Math.sqrt(l-o),p=i-d,g=i+d;return g<0?null:p<0?this.at(g,n):this.at(p,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/n;return i>=0?i:null}intersectPlane(e,n){const i=this.distanceToPlane(e);return i===null?null:this.at(i,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let i,o,l,d,p,g;const v=1/this.direction.x,_=1/this.direction.y,b=1/this.direction.z,w=this.origin;return v>=0?(i=(e.min.x-w.x)*v,o=(e.max.x-w.x)*v):(i=(e.max.x-w.x)*v,o=(e.min.x-w.x)*v),_>=0?(l=(e.min.y-w.y)*_,d=(e.max.y-w.y)*_):(l=(e.max.y-w.y)*_,d=(e.min.y-w.y)*_),i>d||l>o||((l>i||isNaN(i))&&(i=l),(d<o||isNaN(o))&&(o=d),b>=0?(p=(e.min.z-w.z)*b,g=(e.max.z-w.z)*b):(p=(e.max.z-w.z)*b,g=(e.min.z-w.z)*b),i>g||p>o)||((p>i||i!==i)&&(i=p),(g<o||o!==o)&&(o=g),o<0)?null:this.at(i>=0?i:o,n)}intersectsBox(e){return this.intersectBox(e,ih)!==null}intersectTriangle(e,n,i,o,l){nV.subVectors(n,e),rk.subVectors(i,e),rV.crossVectors(nV,rk);let d=this.direction.dot(rV),p;if(d>0){if(o)return null;p=1}else if(d<0)p=-1,d=-d;else return null;Jp.subVectors(this.origin,e);const g=p*this.direction.dot(rk.crossVectors(Jp,rk));if(g<0)return null;const v=p*this.direction.dot(nV.cross(Jp));if(v<0||g+v>d)return null;const _=-p*Jp.dot(rV);return _<0?null:this.at(_/d,l)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class cr{constructor(e,n,i,o,l,d,p,g,v,_,b,w,E,S,M,k){cr.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,i,o,l,d,p,g,v,_,b,w,E,S,M,k)}set(e,n,i,o,l,d,p,g,v,_,b,w,E,S,M,k){const x=this.elements;return x[0]=e,x[4]=n,x[8]=i,x[12]=o,x[1]=l,x[5]=d,x[9]=p,x[13]=g,x[2]=v,x[6]=_,x[10]=b,x[14]=w,x[3]=E,x[7]=S,x[11]=M,x[15]=k,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new cr().fromArray(this.elements)}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this}copyPosition(e){const n=this.elements,i=e.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,i){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,n,i){return this.set(e.x,n.x,i.x,0,e.y,n.y,i.y,0,e.z,n.z,i.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,i=e.elements,o=1/A_.setFromMatrixColumn(e,0).length(),l=1/A_.setFromMatrixColumn(e,1).length(),d=1/A_.setFromMatrixColumn(e,2).length();return n[0]=i[0]*o,n[1]=i[1]*o,n[2]=i[2]*o,n[3]=0,n[4]=i[4]*l,n[5]=i[5]*l,n[6]=i[6]*l,n[7]=0,n[8]=i[8]*d,n[9]=i[9]*d,n[10]=i[10]*d,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,i=e.x,o=e.y,l=e.z,d=Math.cos(i),p=Math.sin(i),g=Math.cos(o),v=Math.sin(o),_=Math.cos(l),b=Math.sin(l);if(e.order==="XYZ"){const w=d*_,E=d*b,S=p*_,M=p*b;n[0]=g*_,n[4]=-g*b,n[8]=v,n[1]=E+S*v,n[5]=w-M*v,n[9]=-p*g,n[2]=M-w*v,n[6]=S+E*v,n[10]=d*g}else if(e.order==="YXZ"){const w=g*_,E=g*b,S=v*_,M=v*b;n[0]=w+M*p,n[4]=S*p-E,n[8]=d*v,n[1]=d*b,n[5]=d*_,n[9]=-p,n[2]=E*p-S,n[6]=M+w*p,n[10]=d*g}else if(e.order==="ZXY"){const w=g*_,E=g*b,S=v*_,M=v*b;n[0]=w-M*p,n[4]=-d*b,n[8]=S+E*p,n[1]=E+S*p,n[5]=d*_,n[9]=M-w*p,n[2]=-d*v,n[6]=p,n[10]=d*g}else if(e.order==="ZYX"){const w=d*_,E=d*b,S=p*_,M=p*b;n[0]=g*_,n[4]=S*v-E,n[8]=w*v+M,n[1]=g*b,n[5]=M*v+w,n[9]=E*v-S,n[2]=-v,n[6]=p*g,n[10]=d*g}else if(e.order==="YZX"){const w=d*g,E=d*v,S=p*g,M=p*v;n[0]=g*_,n[4]=M-w*b,n[8]=S*b+E,n[1]=b,n[5]=d*_,n[9]=-p*_,n[2]=-v*_,n[6]=E*b+S,n[10]=w-M*b}else if(e.order==="XZY"){const w=d*g,E=d*v,S=p*g,M=p*v;n[0]=g*_,n[4]=-b,n[8]=v*_,n[1]=w*b+M,n[5]=d*_,n[9]=E*b-S,n[2]=S*b-E,n[6]=p*_,n[10]=M*b+w}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Qst,e,Kst)}lookAt(e,n,i){const o=this.elements;return nu.subVectors(e,n),nu.lengthSq()===0&&(nu.z=1),nu.normalize(),e2.crossVectors(i,nu),e2.lengthSq()===0&&(Math.abs(i.z)===1?nu.x+=1e-4:nu.z+=1e-4,nu.normalize(),e2.crossVectors(i,nu)),e2.normalize(),ik.crossVectors(nu,e2),o[0]=e2.x,o[4]=ik.x,o[8]=nu.x,o[1]=e2.y,o[5]=ik.y,o[9]=nu.y,o[2]=e2.z,o[6]=ik.z,o[10]=nu.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,o=n.elements,l=this.elements,d=i[0],p=i[4],g=i[8],v=i[12],_=i[1],b=i[5],w=i[9],E=i[13],S=i[2],M=i[6],k=i[10],x=i[14],C=i[3],P=i[7],O=i[11],L=i[15],B=o[0],V=o[4],G=o[8],j=o[12],F=o[1],q=o[5],fe=o[9],ue=o[13],J=o[2],le=o[6],me=o[10],be=o[14],ye=o[3],pe=o[7],oe=o[11],Ce=o[15];return l[0]=d*B+p*F+g*J+v*ye,l[4]=d*V+p*q+g*le+v*pe,l[8]=d*G+p*fe+g*me+v*oe,l[12]=d*j+p*ue+g*be+v*Ce,l[1]=_*B+b*F+w*J+E*ye,l[5]=_*V+b*q+w*le+E*pe,l[9]=_*G+b*fe+w*me+E*oe,l[13]=_*j+b*ue+w*be+E*Ce,l[2]=S*B+M*F+k*J+x*ye,l[6]=S*V+M*q+k*le+x*pe,l[10]=S*G+M*fe+k*me+x*oe,l[14]=S*j+M*ue+k*be+x*Ce,l[3]=C*B+P*F+O*J+L*ye,l[7]=C*V+P*q+O*le+L*pe,l[11]=C*G+P*fe+O*me+L*oe,l[15]=C*j+P*ue+O*be+L*Ce,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[4],o=e[8],l=e[12],d=e[1],p=e[5],g=e[9],v=e[13],_=e[2],b=e[6],w=e[10],E=e[14],S=e[3],M=e[7],k=e[11],x=e[15];return S*(+l*g*b-o*v*b-l*p*w+i*v*w+o*p*E-i*g*E)+M*(+n*g*E-n*v*w+l*d*w-o*d*E+o*v*_-l*g*_)+k*(+n*v*b-n*p*E-l*d*b+i*d*E+l*p*_-i*v*_)+x*(-o*p*_-n*g*b+n*p*w+o*d*b-i*d*w+i*g*_)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,i){const o=this.elements;return e.isVector3?(o[12]=e.x,o[13]=e.y,o[14]=e.z):(o[12]=e,o[13]=n,o[14]=i),this}invert(){const e=this.elements,n=e[0],i=e[1],o=e[2],l=e[3],d=e[4],p=e[5],g=e[6],v=e[7],_=e[8],b=e[9],w=e[10],E=e[11],S=e[12],M=e[13],k=e[14],x=e[15],C=b*k*v-M*w*v+M*g*E-p*k*E-b*g*x+p*w*x,P=S*w*v-_*k*v-S*g*E+d*k*E+_*g*x-d*w*x,O=_*M*v-S*b*v+S*p*E-d*M*E-_*p*x+d*b*x,L=S*b*g-_*M*g-S*p*w+d*M*w+_*p*k-d*b*k,B=n*C+i*P+o*O+l*L;if(B===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const V=1/B;return e[0]=C*V,e[1]=(M*w*l-b*k*l-M*o*E+i*k*E+b*o*x-i*w*x)*V,e[2]=(p*k*l-M*g*l+M*o*v-i*k*v-p*o*x+i*g*x)*V,e[3]=(b*g*l-p*w*l-b*o*v+i*w*v+p*o*E-i*g*E)*V,e[4]=P*V,e[5]=(_*k*l-S*w*l+S*o*E-n*k*E-_*o*x+n*w*x)*V,e[6]=(S*g*l-d*k*l-S*o*v+n*k*v+d*o*x-n*g*x)*V,e[7]=(d*w*l-_*g*l+_*o*v-n*w*v-d*o*E+n*g*E)*V,e[8]=O*V,e[9]=(S*b*l-_*M*l-S*i*E+n*M*E+_*i*x-n*b*x)*V,e[10]=(d*M*l-S*p*l+S*i*v-n*M*v-d*i*x+n*p*x)*V,e[11]=(_*p*l-d*b*l-_*i*v+n*b*v+d*i*E-n*p*E)*V,e[12]=L*V,e[13]=(_*M*o-S*b*o+S*i*w-n*M*w-_*i*k+n*b*k)*V,e[14]=(S*p*o-d*M*o-S*i*g+n*M*g+d*i*k-n*p*k)*V,e[15]=(d*b*o-_*p*o+_*i*g-n*b*g-d*i*w+n*p*w)*V,this}scale(e){const n=this.elements,i=e.x,o=e.y,l=e.z;return n[0]*=i,n[4]*=o,n[8]*=l,n[1]*=i,n[5]*=o,n[9]*=l,n[2]*=i,n[6]*=o,n[10]*=l,n[3]*=i,n[7]*=o,n[11]*=l,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],o=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,i,o))}makeTranslation(e,n,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,i,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const i=Math.cos(n),o=Math.sin(n),l=1-i,d=e.x,p=e.y,g=e.z,v=l*d,_=l*p;return this.set(v*d+i,v*p-o*g,v*g+o*p,0,v*p+o*g,_*p+i,_*g-o*d,0,v*g-o*p,_*g+o*d,l*g*g+i,0,0,0,0,1),this}makeScale(e,n,i){return this.set(e,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,n,i,o,l,d){return this.set(1,i,l,0,e,1,d,0,n,o,1,0,0,0,0,1),this}compose(e,n,i){const o=this.elements,l=n._x,d=n._y,p=n._z,g=n._w,v=l+l,_=d+d,b=p+p,w=l*v,E=l*_,S=l*b,M=d*_,k=d*b,x=p*b,C=g*v,P=g*_,O=g*b,L=i.x,B=i.y,V=i.z;return o[0]=(1-(M+x))*L,o[1]=(E+O)*L,o[2]=(S-P)*L,o[3]=0,o[4]=(E-O)*B,o[5]=(1-(w+x))*B,o[6]=(k+C)*B,o[7]=0,o[8]=(S+P)*V,o[9]=(k-C)*V,o[10]=(1-(w+M))*V,o[11]=0,o[12]=e.x,o[13]=e.y,o[14]=e.z,o[15]=1,this}decompose(e,n,i){const o=this.elements;let l=A_.set(o[0],o[1],o[2]).length();const d=A_.set(o[4],o[5],o[6]).length(),p=A_.set(o[8],o[9],o[10]).length();this.determinant()<0&&(l=-l),e.x=o[12],e.y=o[13],e.z=o[14],Qf.copy(this);const v=1/l,_=1/d,b=1/p;return Qf.elements[0]*=v,Qf.elements[1]*=v,Qf.elements[2]*=v,Qf.elements[4]*=_,Qf.elements[5]*=_,Qf.elements[6]*=_,Qf.elements[8]*=b,Qf.elements[9]*=b,Qf.elements[10]*=b,n.setFromRotationMatrix(Qf),i.x=l,i.y=d,i.z=p,this}makePerspective(e,n,i,o,l,d,p=Sd){const g=this.elements,v=2*l/(n-e),_=2*l/(i-o),b=(n+e)/(n-e),w=(i+o)/(i-o);let E,S;if(p===Sd)E=-(d+l)/(d-l),S=-2*d*l/(d-l);else if(p===YT)E=-d/(d-l),S=-d*l/(d-l);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+p);return g[0]=v,g[4]=0,g[8]=b,g[12]=0,g[1]=0,g[5]=_,g[9]=w,g[13]=0,g[2]=0,g[6]=0,g[10]=E,g[14]=S,g[3]=0,g[7]=0,g[11]=-1,g[15]=0,this}makeOrthographic(e,n,i,o,l,d,p=Sd){const g=this.elements,v=1/(n-e),_=1/(i-o),b=1/(d-l),w=(n+e)*v,E=(i+o)*_;let S,M;if(p===Sd)S=(d+l)*b,M=-2*b;else if(p===YT)S=l*b,M=-1*b;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+p);return g[0]=2*v,g[4]=0,g[8]=0,g[12]=-w,g[1]=0,g[5]=2*_,g[9]=0,g[13]=-E,g[2]=0,g[6]=0,g[10]=M,g[14]=-S,g[3]=0,g[7]=0,g[11]=0,g[15]=1,this}equals(e){const n=this.elements,i=e.elements;for(let o=0;o<16;o++)if(n[o]!==i[o])return!1;return!0}fromArray(e,n=0){for(let i=0;i<16;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e[n+9]=i[9],e[n+10]=i[10],e[n+11]=i[11],e[n+12]=i[12],e[n+13]=i[13],e[n+14]=i[14],e[n+15]=i[15],e}}const A_=new Le,Qf=new cr,Qst=new Le(0,0,0),Kst=new Le(1,1,1),e2=new Le,ik=new Le,nu=new Le,Uoe=new cr,Foe=new Gc;class Du{constructor(e=0,n=0,i=0,o=Du.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=i,this._order=o}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,i,o=this._order){return this._x=e,this._y=n,this._z=i,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,i=!0){const o=e.elements,l=o[0],d=o[4],p=o[8],g=o[1],v=o[5],_=o[9],b=o[2],w=o[6],E=o[10];switch(n){case"XYZ":this._y=Math.asin(po(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(-_,E),this._z=Math.atan2(-d,l)):(this._x=Math.atan2(w,v),this._z=0);break;case"YXZ":this._x=Math.asin(-po(_,-1,1)),Math.abs(_)<.9999999?(this._y=Math.atan2(p,E),this._z=Math.atan2(g,v)):(this._y=Math.atan2(-b,l),this._z=0);break;case"ZXY":this._x=Math.asin(po(w,-1,1)),Math.abs(w)<.9999999?(this._y=Math.atan2(-b,E),this._z=Math.atan2(-d,v)):(this._y=0,this._z=Math.atan2(g,l));break;case"ZYX":this._y=Math.asin(-po(b,-1,1)),Math.abs(b)<.9999999?(this._x=Math.atan2(w,E),this._z=Math.atan2(g,l)):(this._x=0,this._z=Math.atan2(-d,v));break;case"YZX":this._z=Math.asin(po(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(-_,v),this._y=Math.atan2(-b,l)):(this._x=0,this._y=Math.atan2(p,E));break;case"XZY":this._z=Math.asin(-po(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(w,v),this._y=Math.atan2(p,l)):(this._x=Math.atan2(-_,E),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,i){return Uoe.makeRotationFromQuaternion(e),this.setFromRotationMatrix(Uoe,n,i)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return Foe.setFromEuler(this),this.setFromQuaternion(Foe,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Du.DEFAULT_ORDER="XYZ";class rL{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Jst=0;const Voe=new Le,w_=new Gc,sh=new cr,sk=new Le,R3=new Le,eot=new Le,tot=new Gc,Goe=new Le(1,0,0),joe=new Le(0,1,0),Hoe=new Le(0,0,1),not={type:"added"},rot={type:"removed"},iV={type:"childadded",child:null},sV={type:"childremoved",child:null};class Li extends Mp{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Jst++}),this.uuid=xu(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Li.DEFAULT_UP.clone();const e=new Le,n=new Du,i=new Gc,o=new Le(1,1,1);function l(){i.setFromEuler(n,!1)}function d(){n.setFromQuaternion(i,void 0,!1)}n._onChange(l),i._onChange(d),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new cr},normalMatrix:{value:new Vr}}),this.matrix=new cr,this.matrixWorld=new cr,this.matrixAutoUpdate=Li.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Li.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new rL,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return w_.setFromAxisAngle(e,n),this.quaternion.multiply(w_),this}rotateOnWorldAxis(e,n){return w_.setFromAxisAngle(e,n),this.quaternion.premultiply(w_),this}rotateX(e){return this.rotateOnAxis(Goe,e)}rotateY(e){return this.rotateOnAxis(joe,e)}rotateZ(e){return this.rotateOnAxis(Hoe,e)}translateOnAxis(e,n){return Voe.copy(e).applyQuaternion(this.quaternion),this.position.add(Voe.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(Goe,e)}translateY(e){return this.translateOnAxis(joe,e)}translateZ(e){return this.translateOnAxis(Hoe,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(sh.copy(this.matrixWorld).invert())}lookAt(e,n,i){e.isVector3?sk.copy(e):sk.set(e,n,i);const o=this.parent;this.updateWorldMatrix(!0,!1),R3.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?sh.lookAt(R3,sk,this.up):sh.lookAt(sk,R3,this.up),this.quaternion.setFromRotationMatrix(sh),o&&(sh.extractRotation(o.matrixWorld),w_.setFromRotationMatrix(sh),this.quaternion.premultiply(w_.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(not),iV.child=e,this.dispatchEvent(iV),iV.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(rot),sV.child=e,this.dispatchEvent(sV),sV.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),sh.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),sh.multiply(e.parent.matrixWorld)),e.applyMatrix4(sh),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let i=0,o=this.children.length;i<o;i++){const d=this.children[i].getObjectByProperty(e,n);if(d!==void 0)return d}}getObjectsByProperty(e,n,i=[]){this[e]===n&&i.push(this);const o=this.children;for(let l=0,d=o.length;l<d;l++)o[l].getObjectsByProperty(e,n,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(R3,e,eot),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(R3,tot,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let i=0,o=n.length;i<o;i++)n[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let i=0,o=n.length;i<o;i++)n[i].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let i=0,o=n.length;i<o;i++){const l=n[i];(l.matrixWorldAutoUpdate===!0||e===!0)&&l.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const o=this.children;for(let l=0,d=o.length;l<d;l++){const p=o[l];p.matrixWorldAutoUpdate===!0&&p.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",i={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const o={};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),this.frustumCulled===!1&&(o.frustumCulled=!1),this.renderOrder!==0&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(o.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(o.type="BatchedMesh",o.perObjectFrustumCulled=this.perObjectFrustumCulled,o.sortObjects=this.sortObjects,o.drawRanges=this._drawRanges,o.reservedRanges=this._reservedRanges,o.visibility=this._visibility,o.active=this._active,o.bounds=this._bounds.map(p=>({boxInitialized:p.boxInitialized,boxMin:p.box.min.toArray(),boxMax:p.box.max.toArray(),sphereInitialized:p.sphereInitialized,sphereRadius:p.sphere.radius,sphereCenter:p.sphere.center.toArray()})),o.maxGeometryCount=this._maxGeometryCount,o.maxVertexCount=this._maxVertexCount,o.maxIndexCount=this._maxIndexCount,o.geometryInitialized=this._geometryInitialized,o.geometryCount=this._geometryCount,o.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(o.boundingSphere={center:o.boundingSphere.center.toArray(),radius:o.boundingSphere.radius}),this.boundingBox!==null&&(o.boundingBox={min:o.boundingBox.min.toArray(),max:o.boundingBox.max.toArray()}));function l(p,g){return p[g.uuid]===void 0&&(p[g.uuid]=g.toJSON(e)),g.uuid}if(this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(o.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=l(e.geometries,this.geometry);const p=this.geometry.parameters;if(p!==void 0&&p.shapes!==void 0){const g=p.shapes;if(Array.isArray(g))for(let v=0,_=g.length;v<_;v++){const b=g[v];l(e.shapes,b)}else l(e.shapes,g)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(l(e.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const p=[];for(let g=0,v=this.material.length;g<v;g++)p.push(l(e.materials,this.material[g]));o.material=p}else o.material=l(e.materials,this.material);if(this.children.length>0){o.children=[];for(let p=0;p<this.children.length;p++)o.children.push(this.children[p].toJSON(e).object)}if(this.animations.length>0){o.animations=[];for(let p=0;p<this.animations.length;p++){const g=this.animations[p];o.animations.push(l(e.animations,g))}}if(n){const p=d(e.geometries),g=d(e.materials),v=d(e.textures),_=d(e.images),b=d(e.shapes),w=d(e.skeletons),E=d(e.animations),S=d(e.nodes);p.length>0&&(i.geometries=p),g.length>0&&(i.materials=g),v.length>0&&(i.textures=v),_.length>0&&(i.images=_),b.length>0&&(i.shapes=b),w.length>0&&(i.skeletons=w),E.length>0&&(i.animations=E),S.length>0&&(i.nodes=S)}return i.object=o,i;function d(p){const g=[];for(const v in p){const _=p[v];delete _.metadata,g.push(_)}return g}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let i=0;i<e.children.length;i++){const o=e.children[i];this.add(o.clone())}return this}}Li.DEFAULT_UP=new Le(0,1,0);Li.DEFAULT_MATRIX_AUTO_UPDATE=!0;Li.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Kf=new Le,oh=new Le,oV=new Le,ah=new Le,E_=new Le,S_=new Le,$oe=new Le,aV=new Le,lV=new Le,cV=new Le;class Au{constructor(e=new Le,n=new Le,i=new Le){this.a=e,this.b=n,this.c=i}static getNormal(e,n,i,o){o.subVectors(i,n),Kf.subVectors(e,n),o.cross(Kf);const l=o.lengthSq();return l>0?o.multiplyScalar(1/Math.sqrt(l)):o.set(0,0,0)}static getBarycoord(e,n,i,o,l){Kf.subVectors(o,n),oh.subVectors(i,n),oV.subVectors(e,n);const d=Kf.dot(Kf),p=Kf.dot(oh),g=Kf.dot(oV),v=oh.dot(oh),_=oh.dot(oV),b=d*v-p*p;if(b===0)return l.set(0,0,0),null;const w=1/b,E=(v*g-p*_)*w,S=(d*_-p*g)*w;return l.set(1-E-S,S,E)}static containsPoint(e,n,i,o){return this.getBarycoord(e,n,i,o,ah)===null?!1:ah.x>=0&&ah.y>=0&&ah.x+ah.y<=1}static getInterpolation(e,n,i,o,l,d,p,g){return this.getBarycoord(e,n,i,o,ah)===null?(g.x=0,g.y=0,"z"in g&&(g.z=0),"w"in g&&(g.w=0),null):(g.setScalar(0),g.addScaledVector(l,ah.x),g.addScaledVector(d,ah.y),g.addScaledVector(p,ah.z),g)}static isFrontFacing(e,n,i,o){return Kf.subVectors(i,n),oh.subVectors(e,n),Kf.cross(oh).dot(o)<0}set(e,n,i){return this.a.copy(e),this.b.copy(n),this.c.copy(i),this}setFromPointsAndIndices(e,n,i,o){return this.a.copy(e[n]),this.b.copy(e[i]),this.c.copy(e[o]),this}setFromAttributeAndIndices(e,n,i,o){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,o),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Kf.subVectors(this.c,this.b),oh.subVectors(this.a,this.b),Kf.cross(oh).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Au.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Au.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,i,o,l){return Au.getInterpolation(e,this.a,this.b,this.c,n,i,o,l)}containsPoint(e){return Au.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Au.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const i=this.a,o=this.b,l=this.c;let d,p;E_.subVectors(o,i),S_.subVectors(l,i),aV.subVectors(e,i);const g=E_.dot(aV),v=S_.dot(aV);if(g<=0&&v<=0)return n.copy(i);lV.subVectors(e,o);const _=E_.dot(lV),b=S_.dot(lV);if(_>=0&&b<=_)return n.copy(o);const w=g*b-_*v;if(w<=0&&g>=0&&_<=0)return d=g/(g-_),n.copy(i).addScaledVector(E_,d);cV.subVectors(e,l);const E=E_.dot(cV),S=S_.dot(cV);if(S>=0&&E<=S)return n.copy(l);const M=E*v-g*S;if(M<=0&&v>=0&&S<=0)return p=v/(v-S),n.copy(i).addScaledVector(S_,p);const k=_*S-E*b;if(k<=0&&b-_>=0&&E-S>=0)return $oe.subVectors(l,o),p=(b-_)/(b-_+(E-S)),n.copy(o).addScaledVector($oe,p);const x=1/(k+M+w);return d=M*x,p=w*x,n.copy(i).addScaledVector(E_,d).addScaledVector(S_,p)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Obe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},t2={h:0,s:0,l:0},ok={h:0,s:0,l:0};function uV(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class Pn{constructor(e,n,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,i)}set(e,n,i){if(n===void 0&&i===void 0){const o=e;o&&o.isColor?this.copy(o):typeof o=="number"?this.setHex(o):typeof o=="string"&&this.setStyle(o)}else this.setRGB(e,n,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=uf){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,cs.toWorkingColorSpace(this,n),this}setRGB(e,n,i,o=cs.workingColorSpace){return this.r=e,this.g=n,this.b=i,cs.toWorkingColorSpace(this,o),this}setHSL(e,n,i,o=cs.workingColorSpace){if(e=PQ(e,1),n=po(n,0,1),i=po(i,0,1),n===0)this.r=this.g=this.b=i;else{const l=i<=.5?i*(1+n):i+n-i*n,d=2*i-l;this.r=uV(d,l,e+1/3),this.g=uV(d,l,e),this.b=uV(d,l,e-1/3)}return cs.toWorkingColorSpace(this,o),this}setStyle(e,n=uf){function i(l){l!==void 0&&parseFloat(l)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let o;if(o=/^(\w+)\(([^\)]*)\)/.exec(e)){let l;const d=o[1],p=o[2];switch(d){case"rgb":case"rgba":if(l=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(p))return i(l[4]),this.setRGB(Math.min(255,parseInt(l[1],10))/255,Math.min(255,parseInt(l[2],10))/255,Math.min(255,parseInt(l[3],10))/255,n);if(l=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(p))return i(l[4]),this.setRGB(Math.min(100,parseInt(l[1],10))/100,Math.min(100,parseInt(l[2],10))/100,Math.min(100,parseInt(l[3],10))/100,n);break;case"hsl":case"hsla":if(l=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(p))return i(l[4]),this.setHSL(parseFloat(l[1])/360,parseFloat(l[2])/100,parseFloat(l[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(o=/^\#([A-Fa-f\d]+)$/.exec(e)){const l=o[1],d=l.length;if(d===3)return this.setRGB(parseInt(l.charAt(0),16)/15,parseInt(l.charAt(1),16)/15,parseInt(l.charAt(2),16)/15,n);if(d===6)return this.setHex(parseInt(l,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=uf){const i=Obe[e.toLowerCase()];return i!==void 0?this.setHex(i,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Tb(e.r),this.g=Tb(e.g),this.b=Tb(e.b),this}copyLinearToSRGB(e){return this.r=ZF(e.r),this.g=ZF(e.g),this.b=ZF(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=uf){return cs.fromWorkingColorSpace(ml.copy(this),e),Math.round(po(ml.r*255,0,255))*65536+Math.round(po(ml.g*255,0,255))*256+Math.round(po(ml.b*255,0,255))}getHexString(e=uf){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=cs.workingColorSpace){cs.fromWorkingColorSpace(ml.copy(this),n);const i=ml.r,o=ml.g,l=ml.b,d=Math.max(i,o,l),p=Math.min(i,o,l);let g,v;const _=(p+d)/2;if(p===d)g=0,v=0;else{const b=d-p;switch(v=_<=.5?b/(d+p):b/(2-d-p),d){case i:g=(o-l)/b+(o<l?6:0);break;case o:g=(l-i)/b+2;break;case l:g=(i-o)/b+4;break}g/=6}return e.h=g,e.s=v,e.l=_,e}getRGB(e,n=cs.workingColorSpace){return cs.fromWorkingColorSpace(ml.copy(this),n),e.r=ml.r,e.g=ml.g,e.b=ml.b,e}getStyle(e=uf){cs.fromWorkingColorSpace(ml.copy(this),e);const n=ml.r,i=ml.g,o=ml.b;return e!==uf?`color(${e} ${n.toFixed(3)} ${i.toFixed(3)} ${o.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(i*255)},${Math.round(o*255)})`}offsetHSL(e,n,i){return this.getHSL(t2),this.setHSL(t2.h+e,t2.s+n,t2.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,i){return this.r=e.r+(n.r-e.r)*i,this.g=e.g+(n.g-e.g)*i,this.b=e.b+(n.b-e.b)*i,this}lerpHSL(e,n){this.getHSL(t2),e.getHSL(ok);const i=ZS(t2.h,ok.h,n),o=ZS(t2.s,ok.s,n),l=ZS(t2.l,ok.l,n);return this.setHSL(i,o,l),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,i=this.g,o=this.b,l=e.elements;return this.r=l[0]*n+l[3]*i+l[6]*o,this.g=l[1]*n+l[4]*i+l[7]*o,this.b=l[2]*n+l[5]*i+l[8]*o,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ml=new Pn;Pn.NAMES=Obe;let iot=0;class Dl extends Mp{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:iot++}),this.uuid=xu(),this.name="",this.type="Material",this.blending=Bg,this.side=mp,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=QO,this.blendDst=KO,this.blendEquation=L2,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Pn(0,0,0),this.blendAlpha=0,this.depthFunc=NT,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Y$,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=K1,this.stencilZFail=K1,this.stencilZPass=K1,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const i=e[n];if(i===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const o=this[n];if(o===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}o&&o.isColor?o.set(i):o&&o.isVector3&&i&&i.isVector3?o.copy(i):this[n]=i}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Bg&&(i.blending=this.blending),this.side!==mp&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==QO&&(i.blendSrc=this.blendSrc),this.blendDst!==KO&&(i.blendDst=this.blendDst),this.blendEquation!==L2&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==NT&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Y$&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==K1&&(i.stencilFail=this.stencilFail),this.stencilZFail!==K1&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==K1&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function o(l){const d=[];for(const p in l){const g=l[p];delete g.metadata,d.push(g)}return d}if(n){const l=o(e.textures),d=o(e.images);l.length>0&&(i.textures=l),d.length>0&&(i.images=d)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let i=null;if(n!==null){const o=n.length;i=new Array(o);for(let l=0;l!==o;++l)i[l]=n[l].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Om extends Dl{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Pn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Du,this.combine=bx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const zh=sot();function sot(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),i=new Uint32Array(512),o=new Uint32Array(512);for(let g=0;g<256;++g){const v=g-127;v<-27?(i[g]=0,i[g|256]=32768,o[g]=24,o[g|256]=24):v<-14?(i[g]=1024>>-v-14,i[g|256]=1024>>-v-14|32768,o[g]=-v-1,o[g|256]=-v-1):v<=15?(i[g]=v+15<<10,i[g|256]=v+15<<10|32768,o[g]=13,o[g|256]=13):v<128?(i[g]=31744,i[g|256]=64512,o[g]=24,o[g|256]=24):(i[g]=31744,i[g|256]=64512,o[g]=13,o[g|256]=13)}const l=new Uint32Array(2048),d=new Uint32Array(64),p=new Uint32Array(64);for(let g=1;g<1024;++g){let v=g<<13,_=0;for(;!(v&8388608);)v<<=1,_-=8388608;v&=-8388609,_+=947912704,l[g]=v|_}for(let g=1024;g<2048;++g)l[g]=939524096+(g-1024<<13);for(let g=1;g<31;++g)d[g]=g<<23;d[31]=1199570944,d[32]=2147483648;for(let g=33;g<63;++g)d[g]=2147483648+(g-32<<23);d[63]=3347054592;for(let g=1;g<64;++g)g!==32&&(p[g]=1024);return{floatView:e,uint32View:n,baseTable:i,shiftTable:o,mantissaTable:l,exponentTable:d,offsetTable:p}}function Ec(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=po(t,-65504,65504),zh.floatView[0]=t;const e=zh.uint32View[0],n=e>>23&511;return zh.baseTable[n]+((e&8388607)>>zh.shiftTable[n])}function qE(t){const e=t>>10;return zh.uint32View[0]=zh.mantissaTable[zh.offsetTable[e]+(t&1023)]+zh.exponentTable[e],zh.floatView[0]}const oot={toHalfFloat:Ec,fromHalfFloat:qE},zo=new Le,ak=new $t;class _s{constructor(e,n,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=i,this.usage=WT,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=bu,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return Rbe("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,i){e*=this.itemSize,i*=n.itemSize;for(let o=0,l=this.itemSize;o<l;o++)this.array[e+o]=n.array[i+o];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,i=this.count;n<i;n++)ak.fromBufferAttribute(this,n),ak.applyMatrix3(e),this.setXY(n,ak.x,ak.y);else if(this.itemSize===3)for(let n=0,i=this.count;n<i;n++)zo.fromBufferAttribute(this,n),zo.applyMatrix3(e),this.setXYZ(n,zo.x,zo.y,zo.z);return this}applyMatrix4(e){for(let n=0,i=this.count;n<i;n++)zo.fromBufferAttribute(this,n),zo.applyMatrix4(e),this.setXYZ(n,zo.x,zo.y,zo.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)zo.fromBufferAttribute(this,n),zo.applyNormalMatrix(e),this.setXYZ(n,zo.x,zo.y,zo.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)zo.fromBufferAttribute(this,n),zo.transformDirection(e),this.setXYZ(n,zo.x,zo.y,zo.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let i=this.array[e*this.itemSize+n];return this.normalized&&(i=ql(i,this.array)),i}setComponent(e,n,i){return this.normalized&&(i=Gr(i,this.array)),this.array[e*this.itemSize+n]=i,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=ql(n,this.array)),n}setX(e,n){return this.normalized&&(n=Gr(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=ql(n,this.array)),n}setY(e,n){return this.normalized&&(n=Gr(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=ql(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Gr(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=ql(n,this.array)),n}setW(e,n){return this.normalized&&(n=Gr(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=Gr(n,this.array),i=Gr(i,this.array)),this.array[e+0]=n,this.array[e+1]=i,this}setXYZ(e,n,i,o){return e*=this.itemSize,this.normalized&&(n=Gr(n,this.array),i=Gr(i,this.array),o=Gr(o,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=o,this}setXYZW(e,n,i,o,l){return e*=this.itemSize,this.normalized&&(n=Gr(n,this.array),i=Gr(i,this.array),o=Gr(o,this.array),l=Gr(l,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=o,this.array[e+3]=l,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==WT&&(e.usage=this.usage),e}}class aot extends _s{constructor(e,n,i){super(new Int8Array(e),n,i)}}class lot extends _s{constructor(e,n,i){super(new Uint8Array(e),n,i)}}class cot extends _s{constructor(e,n,i){super(new Uint8ClampedArray(e),n,i)}}class uot extends _s{constructor(e,n,i){super(new Int16Array(e),n,i)}}class OQ extends _s{constructor(e,n,i){super(new Uint16Array(e),n,i)}}class fot extends _s{constructor(e,n,i){super(new Int32Array(e),n,i)}}class IQ extends _s{constructor(e,n,i){super(new Uint32Array(e),n,i)}}class dot extends _s{constructor(e,n,i){super(new Uint16Array(e),n,i),this.isFloat16BufferAttribute=!0}getX(e){let n=qE(this.array[e*this.itemSize]);return this.normalized&&(n=ql(n,this.array)),n}setX(e,n){return this.normalized&&(n=Gr(n,this.array)),this.array[e*this.itemSize]=Ec(n),this}getY(e){let n=qE(this.array[e*this.itemSize+1]);return this.normalized&&(n=ql(n,this.array)),n}setY(e,n){return this.normalized&&(n=Gr(n,this.array)),this.array[e*this.itemSize+1]=Ec(n),this}getZ(e){let n=qE(this.array[e*this.itemSize+2]);return this.normalized&&(n=ql(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Gr(n,this.array)),this.array[e*this.itemSize+2]=Ec(n),this}getW(e){let n=qE(this.array[e*this.itemSize+3]);return this.normalized&&(n=ql(n,this.array)),n}setW(e,n){return this.normalized&&(n=Gr(n,this.array)),this.array[e*this.itemSize+3]=Ec(n),this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=Gr(n,this.array),i=Gr(i,this.array)),this.array[e+0]=Ec(n),this.array[e+1]=Ec(i),this}setXYZ(e,n,i,o){return e*=this.itemSize,this.normalized&&(n=Gr(n,this.array),i=Gr(i,this.array),o=Gr(o,this.array)),this.array[e+0]=Ec(n),this.array[e+1]=Ec(i),this.array[e+2]=Ec(o),this}setXYZW(e,n,i,o,l){return e*=this.itemSize,this.normalized&&(n=Gr(n,this.array),i=Gr(i,this.array),o=Gr(o,this.array),l=Gr(l,this.array)),this.array[e+0]=Ec(n),this.array[e+1]=Ec(i),this.array[e+2]=Ec(o),this.array[e+3]=Ec(l),this}}class zn extends _s{constructor(e,n,i){super(new Float32Array(e),n,i)}}let hot=0;const Ju=new cr,fV=new Li,T_=new Le,ru=new Ql,D3=new Ql,ga=new Le;class Kr extends Mp{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:hot++}),this.uuid=xu(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Cbe(e)?IQ:OQ)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,i=0){this.groups.push({start:e,count:n,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const l=new Vr().getNormalMatrix(e);i.applyNormalMatrix(l),i.needsUpdate=!0}const o=this.attributes.tangent;return o!==void 0&&(o.transformDirection(e),o.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ju.makeRotationFromQuaternion(e),this.applyMatrix4(Ju),this}rotateX(e){return Ju.makeRotationX(e),this.applyMatrix4(Ju),this}rotateY(e){return Ju.makeRotationY(e),this.applyMatrix4(Ju),this}rotateZ(e){return Ju.makeRotationZ(e),this.applyMatrix4(Ju),this}translate(e,n,i){return Ju.makeTranslation(e,n,i),this.applyMatrix4(Ju),this}scale(e,n,i){return Ju.makeScale(e,n,i),this.applyMatrix4(Ju),this}lookAt(e){return fV.lookAt(e),fV.updateMatrix(),this.applyMatrix4(fV.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(T_).negate(),this.translate(T_.x,T_.y,T_.z),this}setFromPoints(e){const n=[];for(let i=0,o=e.length;i<o;i++){const l=e[i];n.push(l.x,l.y,l.z||0)}return this.setAttribute("position",new zn(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ql);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Le(-1/0,-1/0,-1/0),new Le(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let i=0,o=n.length;i<o;i++){const l=n[i];ru.setFromBufferAttribute(l),this.morphTargetsRelative?(ga.addVectors(this.boundingBox.min,ru.min),this.boundingBox.expandByPoint(ga),ga.addVectors(this.boundingBox.max,ru.max),this.boundingBox.expandByPoint(ga)):(this.boundingBox.expandByPoint(ru.min),this.boundingBox.expandByPoint(ru.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ml);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Le,1/0);return}if(e){const i=this.boundingSphere.center;if(ru.setFromBufferAttribute(e),n)for(let l=0,d=n.length;l<d;l++){const p=n[l];D3.setFromBufferAttribute(p),this.morphTargetsRelative?(ga.addVectors(ru.min,D3.min),ru.expandByPoint(ga),ga.addVectors(ru.max,D3.max),ru.expandByPoint(ga)):(ru.expandByPoint(D3.min),ru.expandByPoint(D3.max))}ru.getCenter(i);let o=0;for(let l=0,d=e.count;l<d;l++)ga.fromBufferAttribute(e,l),o=Math.max(o,i.distanceToSquared(ga));if(n)for(let l=0,d=n.length;l<d;l++){const p=n[l],g=this.morphTargetsRelative;for(let v=0,_=p.count;v<_;v++)ga.fromBufferAttribute(p,v),g&&(T_.fromBufferAttribute(e,v),ga.add(T_)),o=Math.max(o,i.distanceToSquared(ga))}this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=n.position,o=n.normal,l=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new _s(new Float32Array(4*i.count),4));const d=this.getAttribute("tangent"),p=[],g=[];for(let G=0;G<i.count;G++)p[G]=new Le,g[G]=new Le;const v=new Le,_=new Le,b=new Le,w=new $t,E=new $t,S=new $t,M=new Le,k=new Le;function x(G,j,F){v.fromBufferAttribute(i,G),_.fromBufferAttribute(i,j),b.fromBufferAttribute(i,F),w.fromBufferAttribute(l,G),E.fromBufferAttribute(l,j),S.fromBufferAttribute(l,F),_.sub(v),b.sub(v),E.sub(w),S.sub(w);const q=1/(E.x*S.y-S.x*E.y);isFinite(q)&&(M.copy(_).multiplyScalar(S.y).addScaledVector(b,-E.y).multiplyScalar(q),k.copy(b).multiplyScalar(E.x).addScaledVector(_,-S.x).multiplyScalar(q),p[G].add(M),p[j].add(M),p[F].add(M),g[G].add(k),g[j].add(k),g[F].add(k))}let C=this.groups;C.length===0&&(C=[{start:0,count:e.count}]);for(let G=0,j=C.length;G<j;++G){const F=C[G],q=F.start,fe=F.count;for(let ue=q,J=q+fe;ue<J;ue+=3)x(e.getX(ue+0),e.getX(ue+1),e.getX(ue+2))}const P=new Le,O=new Le,L=new Le,B=new Le;function V(G){L.fromBufferAttribute(o,G),B.copy(L);const j=p[G];P.copy(j),P.sub(L.multiplyScalar(L.dot(j))).normalize(),O.crossVectors(B,j);const q=O.dot(g[G])<0?-1:1;d.setXYZW(G,P.x,P.y,P.z,q)}for(let G=0,j=C.length;G<j;++G){const F=C[G],q=F.start,fe=F.count;for(let ue=q,J=q+fe;ue<J;ue+=3)V(e.getX(ue+0)),V(e.getX(ue+1)),V(e.getX(ue+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new _s(new Float32Array(n.count*3),3),this.setAttribute("normal",i);else for(let w=0,E=i.count;w<E;w++)i.setXYZ(w,0,0,0);const o=new Le,l=new Le,d=new Le,p=new Le,g=new Le,v=new Le,_=new Le,b=new Le;if(e)for(let w=0,E=e.count;w<E;w+=3){const S=e.getX(w+0),M=e.getX(w+1),k=e.getX(w+2);o.fromBufferAttribute(n,S),l.fromBufferAttribute(n,M),d.fromBufferAttribute(n,k),_.subVectors(d,l),b.subVectors(o,l),_.cross(b),p.fromBufferAttribute(i,S),g.fromBufferAttribute(i,M),v.fromBufferAttribute(i,k),p.add(_),g.add(_),v.add(_),i.setXYZ(S,p.x,p.y,p.z),i.setXYZ(M,g.x,g.y,g.z),i.setXYZ(k,v.x,v.y,v.z)}else for(let w=0,E=n.count;w<E;w+=3)o.fromBufferAttribute(n,w+0),l.fromBufferAttribute(n,w+1),d.fromBufferAttribute(n,w+2),_.subVectors(d,l),b.subVectors(o,l),_.cross(b),i.setXYZ(w+0,_.x,_.y,_.z),i.setXYZ(w+1,_.x,_.y,_.z),i.setXYZ(w+2,_.x,_.y,_.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,i=e.count;n<i;n++)ga.fromBufferAttribute(e,n),ga.normalize(),e.setXYZ(n,ga.x,ga.y,ga.z)}toNonIndexed(){function e(p,g){const v=p.array,_=p.itemSize,b=p.normalized,w=new v.constructor(g.length*_);let E=0,S=0;for(let M=0,k=g.length;M<k;M++){p.isInterleavedBufferAttribute?E=g[M]*p.data.stride+p.offset:E=g[M]*_;for(let x=0;x<_;x++)w[S++]=v[E++]}return new _s(w,_,b)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new Kr,i=this.index.array,o=this.attributes;for(const p in o){const g=o[p],v=e(g,i);n.setAttribute(p,v)}const l=this.morphAttributes;for(const p in l){const g=[],v=l[p];for(let _=0,b=v.length;_<b;_++){const w=v[_],E=e(w,i);g.push(E)}n.morphAttributes[p]=g}n.morphTargetsRelative=this.morphTargetsRelative;const d=this.groups;for(let p=0,g=d.length;p<g;p++){const v=d[p];n.addGroup(v.start,v.count,v.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const g=this.parameters;for(const v in g)g[v]!==void 0&&(e[v]=g[v]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const i=this.attributes;for(const g in i){const v=i[g];e.data.attributes[g]=v.toJSON(e.data)}const o={};let l=!1;for(const g in this.morphAttributes){const v=this.morphAttributes[g],_=[];for(let b=0,w=v.length;b<w;b++){const E=v[b];_.push(E.toJSON(e.data))}_.length>0&&(o[g]=_,l=!0)}l&&(e.data.morphAttributes=o,e.data.morphTargetsRelative=this.morphTargetsRelative);const d=this.groups;d.length>0&&(e.data.groups=JSON.parse(JSON.stringify(d)));const p=this.boundingSphere;return p!==null&&(e.data.boundingSphere={center:p.center.toArray(),radius:p.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(n));const o=e.attributes;for(const v in o){const _=o[v];this.setAttribute(v,_.clone(n))}const l=e.morphAttributes;for(const v in l){const _=[],b=l[v];for(let w=0,E=b.length;w<E;w++)_.push(b[w].clone(n));this.morphAttributes[v]=_}this.morphTargetsRelative=e.morphTargetsRelative;const d=e.groups;for(let v=0,_=d.length;v<_;v++){const b=d[v];this.addGroup(b.start,b.count,b.materialIndex)}const p=e.boundingBox;p!==null&&(this.boundingBox=p.clone());const g=e.boundingSphere;return g!==null&&(this.boundingSphere=g.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Woe=new cr,v1=new vA,lk=new Ml,Yoe=new Le,x_=new Le,M_=new Le,k_=new Le,dV=new Le,ck=new Le,uk=new $t,fk=new $t,dk=new $t,qoe=new Le,Xoe=new Le,Zoe=new Le,hk=new Le,pk=new Le;class jo extends Li{constructor(e=new Kr,n=new Om){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const o=n[i[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,d=o.length;l<d;l++){const p=o[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[p]=l}}}}getVertexPosition(e,n){const i=this.geometry,o=i.attributes.position,l=i.morphAttributes.position,d=i.morphTargetsRelative;n.fromBufferAttribute(o,e);const p=this.morphTargetInfluences;if(l&&p){ck.set(0,0,0);for(let g=0,v=l.length;g<v;g++){const _=p[g],b=l[g];_!==0&&(dV.fromBufferAttribute(b,e),d?ck.addScaledVector(dV,_):ck.addScaledVector(dV.sub(n),_))}n.add(ck)}return n}raycast(e,n){const i=this.geometry,o=this.material,l=this.matrixWorld;o!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),lk.copy(i.boundingSphere),lk.applyMatrix4(l),v1.copy(e.ray).recast(e.near),!(lk.containsPoint(v1.origin)===!1&&(v1.intersectSphere(lk,Yoe)===null||v1.origin.distanceToSquared(Yoe)>(e.far-e.near)**2))&&(Woe.copy(l).invert(),v1.copy(e.ray).applyMatrix4(Woe),!(i.boundingBox!==null&&v1.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,n,v1)))}_computeIntersections(e,n,i){let o;const l=this.geometry,d=this.material,p=l.index,g=l.attributes.position,v=l.attributes.uv,_=l.attributes.uv1,b=l.attributes.normal,w=l.groups,E=l.drawRange;if(p!==null)if(Array.isArray(d))for(let S=0,M=w.length;S<M;S++){const k=w[S],x=d[k.materialIndex],C=Math.max(k.start,E.start),P=Math.min(p.count,Math.min(k.start+k.count,E.start+E.count));for(let O=C,L=P;O<L;O+=3){const B=p.getX(O),V=p.getX(O+1),G=p.getX(O+2);o=mk(this,x,e,i,v,_,b,B,V,G),o&&(o.faceIndex=Math.floor(O/3),o.face.materialIndex=k.materialIndex,n.push(o))}}else{const S=Math.max(0,E.start),M=Math.min(p.count,E.start+E.count);for(let k=S,x=M;k<x;k+=3){const C=p.getX(k),P=p.getX(k+1),O=p.getX(k+2);o=mk(this,d,e,i,v,_,b,C,P,O),o&&(o.faceIndex=Math.floor(k/3),n.push(o))}}else if(g!==void 0)if(Array.isArray(d))for(let S=0,M=w.length;S<M;S++){const k=w[S],x=d[k.materialIndex],C=Math.max(k.start,E.start),P=Math.min(g.count,Math.min(k.start+k.count,E.start+E.count));for(let O=C,L=P;O<L;O+=3){const B=O,V=O+1,G=O+2;o=mk(this,x,e,i,v,_,b,B,V,G),o&&(o.faceIndex=Math.floor(O/3),o.face.materialIndex=k.materialIndex,n.push(o))}}else{const S=Math.max(0,E.start),M=Math.min(g.count,E.start+E.count);for(let k=S,x=M;k<x;k+=3){const C=k,P=k+1,O=k+2;o=mk(this,d,e,i,v,_,b,C,P,O),o&&(o.faceIndex=Math.floor(k/3),n.push(o))}}}}function pot(t,e,n,i,o,l,d,p){let g;if(e.side===Zl?g=i.intersectTriangle(d,l,o,!0,p):g=i.intersectTriangle(o,l,d,e.side===mp,p),g===null)return null;pk.copy(p),pk.applyMatrix4(t.matrixWorld);const v=n.ray.origin.distanceTo(pk);return v<n.near||v>n.far?null:{distance:v,point:pk.clone(),object:t}}function mk(t,e,n,i,o,l,d,p,g,v){t.getVertexPosition(p,x_),t.getVertexPosition(g,M_),t.getVertexPosition(v,k_);const _=pot(t,e,n,i,x_,M_,k_,hk);if(_){o&&(uk.fromBufferAttribute(o,p),fk.fromBufferAttribute(o,g),dk.fromBufferAttribute(o,v),_.uv=Au.getInterpolation(hk,x_,M_,k_,uk,fk,dk,new $t)),l&&(uk.fromBufferAttribute(l,p),fk.fromBufferAttribute(l,g),dk.fromBufferAttribute(l,v),_.uv1=Au.getInterpolation(hk,x_,M_,k_,uk,fk,dk,new $t)),d&&(qoe.fromBufferAttribute(d,p),Xoe.fromBufferAttribute(d,g),Zoe.fromBufferAttribute(d,v),_.normal=Au.getInterpolation(hk,x_,M_,k_,qoe,Xoe,Zoe,new Le),_.normal.dot(i.direction)>0&&_.normal.multiplyScalar(-1));const b={a:p,b:g,c:v,normal:new Le,materialIndex:0};Au.getNormal(x_,M_,k_,b.normal),_.face=b}return _}class mv extends Kr{constructor(e=1,n=1,i=1,o=1,l=1,d=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:i,widthSegments:o,heightSegments:l,depthSegments:d};const p=this;o=Math.floor(o),l=Math.floor(l),d=Math.floor(d);const g=[],v=[],_=[],b=[];let w=0,E=0;S("z","y","x",-1,-1,i,n,e,d,l,0),S("z","y","x",1,-1,i,n,-e,d,l,1),S("x","z","y",1,1,e,i,n,o,d,2),S("x","z","y",1,-1,e,i,-n,o,d,3),S("x","y","z",1,-1,e,n,i,o,l,4),S("x","y","z",-1,-1,e,n,-i,o,l,5),this.setIndex(g),this.setAttribute("position",new zn(v,3)),this.setAttribute("normal",new zn(_,3)),this.setAttribute("uv",new zn(b,2));function S(M,k,x,C,P,O,L,B,V,G,j){const F=O/V,q=L/G,fe=O/2,ue=L/2,J=B/2,le=V+1,me=G+1;let be=0,ye=0;const pe=new Le;for(let oe=0;oe<me;oe++){const Ce=oe*q-ue;for(let it=0;it<le;it++){const Se=it*F-fe;pe[M]=Se*C,pe[k]=Ce*P,pe[x]=J,v.push(pe.x,pe.y,pe.z),pe[M]=0,pe[k]=0,pe[x]=B>0?1:-1,_.push(pe.x,pe.y,pe.z),b.push(it/V),b.push(1-oe/G),be+=1}}for(let oe=0;oe<G;oe++)for(let Ce=0;Ce<V;Ce++){const it=w+Ce+le*oe,Se=w+Ce+le*(oe+1),Oe=w+(Ce+1)+le*(oe+1),ct=w+(Ce+1)+le*oe;g.push(it,Se,ct),g.push(Se,Oe,ct),ye+=6}p.addGroup(E,ye,j),E+=ye,w+=be}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new mv(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function A4(t){const e={};for(const n in t){e[n]={};for(const i in t[n]){const o=t[n][i];o&&(o.isColor||o.isMatrix3||o.isMatrix4||o.isVector2||o.isVector3||o.isVector4||o.isTexture||o.isQuaternion)?o.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][i]=null):e[n][i]=o.clone():Array.isArray(o)?e[n][i]=o.slice():e[n][i]=o}}return e}function $l(t){const e={};for(let n=0;n<t.length;n++){const i=A4(t[n]);for(const o in i)e[o]=i[o]}return e}function mot(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function Ibe(t){return t.getRenderTarget()===null?t.outputColorSpace:cs.workingColorSpace}const Nbe={clone:A4,merge:$l};var got=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,vot=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class z0 extends Dl{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=got,this.fragmentShader=vot,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=A4(e.uniforms),this.uniformsGroups=mot(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const o in this.uniforms){const d=this.uniforms[o].value;d&&d.isTexture?n.uniforms[o]={type:"t",value:d.toJSON(e).uuid}:d&&d.isColor?n.uniforms[o]={type:"c",value:d.getHex()}:d&&d.isVector2?n.uniforms[o]={type:"v2",value:d.toArray()}:d&&d.isVector3?n.uniforms[o]={type:"v3",value:d.toArray()}:d&&d.isVector4?n.uniforms[o]={type:"v4",value:d.toArray()}:d&&d.isMatrix3?n.uniforms[o]={type:"m3",value:d.toArray()}:d&&d.isMatrix4?n.uniforms[o]={type:"m4",value:d.toArray()}:n.uniforms[o]={value:d}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const i={};for(const o in this.extensions)this.extensions[o]===!0&&(i[o]=!0);return Object.keys(i).length>0&&(n.extensions=i),n}}class iL extends Li{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new cr,this.projectionMatrix=new cr,this.projectionMatrixInverse=new cr,this.coordinateSystem=Sd}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const n2=new Le,Qoe=new $t,Koe=new $t;class Ha extends iL{constructor(e=50,n=1,i=.1,o=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=o,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=b4*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Ug*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return b4*2*Math.atan(Math.tan(Ug*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,i){n2.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(n2.x,n2.y).multiplyScalar(-e/n2.z),n2.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(n2.x,n2.y).multiplyScalar(-e/n2.z)}getViewSize(e,n){return this.getViewBounds(e,Qoe,Koe),n.subVectors(Koe,Qoe)}setViewOffset(e,n,i,o,l,d){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=o,this.view.width=l,this.view.height=d,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(Ug*.5*this.fov)/this.zoom,i=2*n,o=this.aspect*i,l=-.5*o;const d=this.view;if(this.view!==null&&this.view.enabled){const g=d.fullWidth,v=d.fullHeight;l+=d.offsetX*o/g,n-=d.offsetY*i/v,o*=d.width/g,i*=d.height/v}const p=this.filmOffset;p!==0&&(l+=e*p/this.getFilmWidth()),this.projectionMatrix.makePerspective(l,l+o,n,n-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const C_=-90,P_=1;class Lbe extends Li{constructor(e,n,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const o=new Ha(C_,P_,e,n);o.layers=this.layers,this.add(o);const l=new Ha(C_,P_,e,n);l.layers=this.layers,this.add(l);const d=new Ha(C_,P_,e,n);d.layers=this.layers,this.add(d);const p=new Ha(C_,P_,e,n);p.layers=this.layers,this.add(p);const g=new Ha(C_,P_,e,n);g.layers=this.layers,this.add(g);const v=new Ha(C_,P_,e,n);v.layers=this.layers,this.add(v)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[i,o,l,d,p,g]=n;for(const v of n)this.remove(v);if(e===Sd)i.up.set(0,1,0),i.lookAt(1,0,0),o.up.set(0,1,0),o.lookAt(-1,0,0),l.up.set(0,0,-1),l.lookAt(0,1,0),d.up.set(0,0,1),d.lookAt(0,-1,0),p.up.set(0,1,0),p.lookAt(0,0,1),g.up.set(0,1,0),g.lookAt(0,0,-1);else if(e===YT)i.up.set(0,-1,0),i.lookAt(-1,0,0),o.up.set(0,-1,0),o.lookAt(1,0,0),l.up.set(0,0,1),l.lookAt(0,1,0),d.up.set(0,0,-1),d.lookAt(0,-1,0),p.up.set(0,-1,0),p.lookAt(0,0,1),g.up.set(0,-1,0),g.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const v of n)this.add(v),v.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:o}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[l,d,p,g,v,_]=this.children,b=e.getRenderTarget(),w=e.getActiveCubeFace(),E=e.getActiveMipmapLevel(),S=e.xr.enabled;e.xr.enabled=!1;const M=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,o),e.render(n,l),e.setRenderTarget(i,1,o),e.render(n,d),e.setRenderTarget(i,2,o),e.render(n,p),e.setRenderTarget(i,3,o),e.render(n,g),e.setRenderTarget(i,4,o),e.render(n,v),i.texture.generateMipmaps=M,e.setRenderTarget(i,5,o),e.render(n,_),e.setRenderTarget(b,w,E),e.xr.enabled=S,i.texture.needsPMREMUpdate=!0}}class wx extends mo{constructor(e,n,i,o,l,d,p,g,v,_){e=e!==void 0?e:[],n=n!==void 0?n:gp,super(e,n,i,o,l,d,p,g,v,_),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class zbe extends L0{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},o=[i,i,i,i,i,i];this.texture=new wx(o,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:so}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},o=new mv(5,5,5),l=new z0({name:"CubemapFromEquirect",uniforms:A4(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Zl,blending:Jh});l.uniforms.tEquirect.value=n;const d=new jo(o,l),p=n.minFilter;return n.minFilter===Ed&&(n.minFilter=so),new Lbe(1,10,this).update(e,d),n.minFilter=p,d.geometry.dispose(),d.material.dispose(),this}clear(e,n,i,o){const l=e.getRenderTarget();for(let d=0;d<6;d++)e.setRenderTarget(this,d),e.clear(n,i,o);e.setRenderTarget(l)}}const hV=new Le,_ot=new Le,yot=new Vr;class P2{constructor(e=new Le(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,i,o){return this.normal.set(e,n,i),this.constant=o,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,i){const o=hV.subVectors(i,n).cross(_ot.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(o,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const i=e.delta(hV),o=this.normal.dot(i);if(o===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const l=-(e.start.dot(this.normal)+this.constant)/o;return l<0||l>1?null:n.copy(e.start).addScaledVector(i,l)}intersectsLine(e){const n=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return n<0&&i>0||i<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const i=n||yot.getNormalMatrix(e),o=this.coplanarPoint(hV).applyMatrix4(e),l=this.normal.applyMatrix3(i).normalize();return this.constant=-o.dot(l),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const _1=new Ml,gk=new Le;class Ex{constructor(e=new P2,n=new P2,i=new P2,o=new P2,l=new P2,d=new P2){this.planes=[e,n,i,o,l,d]}set(e,n,i,o,l,d){const p=this.planes;return p[0].copy(e),p[1].copy(n),p[2].copy(i),p[3].copy(o),p[4].copy(l),p[5].copy(d),this}copy(e){const n=this.planes;for(let i=0;i<6;i++)n[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,n=Sd){const i=this.planes,o=e.elements,l=o[0],d=o[1],p=o[2],g=o[3],v=o[4],_=o[5],b=o[6],w=o[7],E=o[8],S=o[9],M=o[10],k=o[11],x=o[12],C=o[13],P=o[14],O=o[15];if(i[0].setComponents(g-l,w-v,k-E,O-x).normalize(),i[1].setComponents(g+l,w+v,k+E,O+x).normalize(),i[2].setComponents(g+d,w+_,k+S,O+C).normalize(),i[3].setComponents(g-d,w-_,k-S,O-C).normalize(),i[4].setComponents(g-p,w-b,k-M,O-P).normalize(),n===Sd)i[5].setComponents(g+p,w+b,k+M,O+P).normalize();else if(n===YT)i[5].setComponents(p,b,M,P).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),_1.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),_1.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(_1)}intersectsSprite(e){return _1.center.set(0,0,0),_1.radius=.7071067811865476,_1.applyMatrix4(e.matrixWorld),this.intersectsSphere(_1)}intersectsSphere(e){const n=this.planes,i=e.center,o=-e.radius;for(let l=0;l<6;l++)if(n[l].distanceToPoint(i)<o)return!1;return!0}intersectsBox(e){const n=this.planes;for(let i=0;i<6;i++){const o=n[i];if(gk.x=o.normal.x>0?e.max.x:e.min.x,gk.y=o.normal.y>0?e.max.y:e.min.y,gk.z=o.normal.z>0?e.max.z:e.min.z,o.distanceToPoint(gk)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let i=0;i<6;i++)if(n[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Bbe(){let t=null,e=!1,n=null,i=null;function o(l,d){n(l,d),i=t.requestAnimationFrame(o)}return{start:function(){e!==!0&&n!==null&&(i=t.requestAnimationFrame(o),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(l){n=l},setContext:function(l){t=l}}}function bot(t,e){const n=e.isWebGL2,i=new WeakMap;function o(v,_){const b=v.array,w=v.usage,E=b.byteLength,S=t.createBuffer();t.bindBuffer(_,S),t.bufferData(_,b,w),v.onUploadCallback();let M;if(b instanceof Float32Array)M=t.FLOAT;else if(b instanceof Uint16Array)if(v.isFloat16BufferAttribute)if(n)M=t.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else M=t.UNSIGNED_SHORT;else if(b instanceof Int16Array)M=t.SHORT;else if(b instanceof Uint32Array)M=t.UNSIGNED_INT;else if(b instanceof Int32Array)M=t.INT;else if(b instanceof Int8Array)M=t.BYTE;else if(b instanceof Uint8Array)M=t.UNSIGNED_BYTE;else if(b instanceof Uint8ClampedArray)M=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+b);return{buffer:S,type:M,bytesPerElement:b.BYTES_PER_ELEMENT,version:v.version,size:E}}function l(v,_,b){const w=_.array,E=_._updateRange,S=_.updateRanges;if(t.bindBuffer(b,v),E.count===-1&&S.length===0&&t.bufferSubData(b,0,w),S.length!==0){for(let M=0,k=S.length;M<k;M++){const x=S[M];n?t.bufferSubData(b,x.start*w.BYTES_PER_ELEMENT,w,x.start,x.count):t.bufferSubData(b,x.start*w.BYTES_PER_ELEMENT,w.subarray(x.start,x.start+x.count))}_.clearUpdateRanges()}E.count!==-1&&(n?t.bufferSubData(b,E.offset*w.BYTES_PER_ELEMENT,w,E.offset,E.count):t.bufferSubData(b,E.offset*w.BYTES_PER_ELEMENT,w.subarray(E.offset,E.offset+E.count)),E.count=-1),_.onUploadCallback()}function d(v){return v.isInterleavedBufferAttribute&&(v=v.data),i.get(v)}function p(v){v.isInterleavedBufferAttribute&&(v=v.data);const _=i.get(v);_&&(t.deleteBuffer(_.buffer),i.delete(v))}function g(v,_){if(v.isGLBufferAttribute){const w=i.get(v);(!w||w.version<v.version)&&i.set(v,{buffer:v.buffer,type:v.type,bytesPerElement:v.elementSize,version:v.version});return}v.isInterleavedBufferAttribute&&(v=v.data);const b=i.get(v);if(b===void 0)i.set(v,o(v,_));else if(b.version<v.version){if(b.size!==v.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");l(b.buffer,v,_),b.version=v.version}}return{get:d,remove:p,update:g}}class _A extends Kr{constructor(e=1,n=1,i=1,o=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:i,heightSegments:o};const l=e/2,d=n/2,p=Math.floor(i),g=Math.floor(o),v=p+1,_=g+1,b=e/p,w=n/g,E=[],S=[],M=[],k=[];for(let x=0;x<_;x++){const C=x*w-d;for(let P=0;P<v;P++){const O=P*b-l;S.push(O,-C,0),M.push(0,0,1),k.push(P/p),k.push(1-x/g)}}for(let x=0;x<g;x++)for(let C=0;C<p;C++){const P=C+v*x,O=C+v*(x+1),L=C+1+v*(x+1),B=C+1+v*x;E.push(P,O,B),E.push(O,L,B)}this.setIndex(E),this.setAttribute("position",new zn(S,3)),this.setAttribute("normal",new zn(M,3)),this.setAttribute("uv",new zn(k,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _A(e.width,e.height,e.widthSegments,e.heightSegments)}}var Aot=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,wot=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Eot=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Sot=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Tot=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,xot=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Mot=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,kot=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Cot=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,Pot=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,Rot=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Dot=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Oot=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Iot=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Not=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Lot=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,zot=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Bot=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Uot=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Fot=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Vot=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Got=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,jot=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Hot=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,$ot=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Wot=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Yot=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,qot=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Xot=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Zot=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Qot="gl_FragColor = linearToOutputTexel( gl_FragColor );",Kot=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,Jot=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,eat=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,tat=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,nat=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,rat=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,iat=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,sat=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,oat=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,aat=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,lat=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,cat=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,uat=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,fat=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,dat=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,hat=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,pat=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,mat=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,gat=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,vat=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,_at=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,yat=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,bat=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Aat=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,wat=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Eat=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Sat=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Tat=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,xat=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Mat=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,kat=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Cat=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Pat=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Rat=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Dat=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Oat=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Iat=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[MORPHTARGETS_COUNT];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Nat=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Lat=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,zat=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
	#endif
	#ifdef MORPHTARGETS_TEXTURE
		#ifndef USE_INSTANCING_MORPH
			uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		#endif
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Bat=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,Uat=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Fat=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Vat=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Gat=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,jat=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Hat=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,$at=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,Wat=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Yat=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,qat=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Xat=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Zat=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Qat=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,Kat=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Jat=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,elt=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,tlt=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,nlt=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,rlt=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,ilt=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,slt=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,olt=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,alt=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,llt=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,clt=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,ult=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,flt=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,dlt=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,hlt=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,plt=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	float startCompression = 0.8 - 0.04;
	float desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min(color.r, min(color.g, color.b));
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max(color.r, max(color.g, color.b));
	if (peak < startCompression) return color;
	float d = 1. - startCompression;
	float newPeak = 1. - d * d / (peak + d - startCompression);
	color *= newPeak / peak;
	float g = 1. - 1. / (desaturation * (peak - newPeak) + 1.);
	return mix(color, vec3(1, 1, 1), g);
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,mlt=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,glt=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,vlt=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,_lt=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,ylt=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,blt=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Alt=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,wlt=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Elt=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Slt=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Tlt=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,xlt=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Mlt=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,klt=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Clt=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Plt=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Rlt=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,Dlt=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Olt=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Ilt=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Nlt=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,Llt=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,zlt=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Blt=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ult=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Flt=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Vlt=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Glt=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,jlt=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Hlt=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$lt=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,Wlt=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Ylt=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,qlt=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Xlt=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Zlt=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Qlt=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Klt=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Jlt=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,ect=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Yr={alphahash_fragment:Aot,alphahash_pars_fragment:wot,alphamap_fragment:Eot,alphamap_pars_fragment:Sot,alphatest_fragment:Tot,alphatest_pars_fragment:xot,aomap_fragment:Mot,aomap_pars_fragment:kot,batching_pars_vertex:Cot,batching_vertex:Pot,begin_vertex:Rot,beginnormal_vertex:Dot,bsdfs:Oot,iridescence_fragment:Iot,bumpmap_pars_fragment:Not,clipping_planes_fragment:Lot,clipping_planes_pars_fragment:zot,clipping_planes_pars_vertex:Bot,clipping_planes_vertex:Uot,color_fragment:Fot,color_pars_fragment:Vot,color_pars_vertex:Got,color_vertex:jot,common:Hot,cube_uv_reflection_fragment:$ot,defaultnormal_vertex:Wot,displacementmap_pars_vertex:Yot,displacementmap_vertex:qot,emissivemap_fragment:Xot,emissivemap_pars_fragment:Zot,colorspace_fragment:Qot,colorspace_pars_fragment:Kot,envmap_fragment:Jot,envmap_common_pars_fragment:eat,envmap_pars_fragment:tat,envmap_pars_vertex:nat,envmap_physical_pars_fragment:pat,envmap_vertex:rat,fog_vertex:iat,fog_pars_vertex:sat,fog_fragment:oat,fog_pars_fragment:aat,gradientmap_pars_fragment:lat,lightmap_fragment:cat,lightmap_pars_fragment:uat,lights_lambert_fragment:fat,lights_lambert_pars_fragment:dat,lights_pars_begin:hat,lights_toon_fragment:mat,lights_toon_pars_fragment:gat,lights_phong_fragment:vat,lights_phong_pars_fragment:_at,lights_physical_fragment:yat,lights_physical_pars_fragment:bat,lights_fragment_begin:Aat,lights_fragment_maps:wat,lights_fragment_end:Eat,logdepthbuf_fragment:Sat,logdepthbuf_pars_fragment:Tat,logdepthbuf_pars_vertex:xat,logdepthbuf_vertex:Mat,map_fragment:kat,map_pars_fragment:Cat,map_particle_fragment:Pat,map_particle_pars_fragment:Rat,metalnessmap_fragment:Dat,metalnessmap_pars_fragment:Oat,morphinstance_vertex:Iat,morphcolor_vertex:Nat,morphnormal_vertex:Lat,morphtarget_pars_vertex:zat,morphtarget_vertex:Bat,normal_fragment_begin:Uat,normal_fragment_maps:Fat,normal_pars_fragment:Vat,normal_pars_vertex:Gat,normal_vertex:jat,normalmap_pars_fragment:Hat,clearcoat_normal_fragment_begin:$at,clearcoat_normal_fragment_maps:Wat,clearcoat_pars_fragment:Yat,iridescence_pars_fragment:qat,opaque_fragment:Xat,packing:Zat,premultiplied_alpha_fragment:Qat,project_vertex:Kat,dithering_fragment:Jat,dithering_pars_fragment:elt,roughnessmap_fragment:tlt,roughnessmap_pars_fragment:nlt,shadowmap_pars_fragment:rlt,shadowmap_pars_vertex:ilt,shadowmap_vertex:slt,shadowmask_pars_fragment:olt,skinbase_vertex:alt,skinning_pars_vertex:llt,skinning_vertex:clt,skinnormal_vertex:ult,specularmap_fragment:flt,specularmap_pars_fragment:dlt,tonemapping_fragment:hlt,tonemapping_pars_fragment:plt,transmission_fragment:mlt,transmission_pars_fragment:glt,uv_pars_fragment:vlt,uv_pars_vertex:_lt,uv_vertex:ylt,worldpos_vertex:blt,background_vert:Alt,background_frag:wlt,backgroundCube_vert:Elt,backgroundCube_frag:Slt,cube_vert:Tlt,cube_frag:xlt,depth_vert:Mlt,depth_frag:klt,distanceRGBA_vert:Clt,distanceRGBA_frag:Plt,equirect_vert:Rlt,equirect_frag:Dlt,linedashed_vert:Olt,linedashed_frag:Ilt,meshbasic_vert:Nlt,meshbasic_frag:Llt,meshlambert_vert:zlt,meshlambert_frag:Blt,meshmatcap_vert:Ult,meshmatcap_frag:Flt,meshnormal_vert:Vlt,meshnormal_frag:Glt,meshphong_vert:jlt,meshphong_frag:Hlt,meshphysical_vert:$lt,meshphysical_frag:Wlt,meshtoon_vert:Ylt,meshtoon_frag:qlt,points_vert:Xlt,points_frag:Zlt,shadow_vert:Qlt,shadow_frag:Klt,sprite_vert:Jlt,sprite_frag:ect},hn={common:{diffuse:{value:new Pn(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Vr},alphaMap:{value:null},alphaMapTransform:{value:new Vr},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Vr}},envmap:{envMap:{value:null},envMapRotation:{value:new Vr},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Vr}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Vr}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Vr},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Vr},normalScale:{value:new $t(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Vr},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Vr}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Vr}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Vr}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Pn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Pn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Vr},alphaTest:{value:0},uvTransform:{value:new Vr}},sprite:{diffuse:{value:new Pn(16777215)},opacity:{value:1},center:{value:new $t(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Vr},alphaMap:{value:null},alphaMapTransform:{value:new Vr},alphaTest:{value:0}}},g0={basic:{uniforms:$l([hn.common,hn.specularmap,hn.envmap,hn.aomap,hn.lightmap,hn.fog]),vertexShader:Yr.meshbasic_vert,fragmentShader:Yr.meshbasic_frag},lambert:{uniforms:$l([hn.common,hn.specularmap,hn.envmap,hn.aomap,hn.lightmap,hn.emissivemap,hn.bumpmap,hn.normalmap,hn.displacementmap,hn.fog,hn.lights,{emissive:{value:new Pn(0)}}]),vertexShader:Yr.meshlambert_vert,fragmentShader:Yr.meshlambert_frag},phong:{uniforms:$l([hn.common,hn.specularmap,hn.envmap,hn.aomap,hn.lightmap,hn.emissivemap,hn.bumpmap,hn.normalmap,hn.displacementmap,hn.fog,hn.lights,{emissive:{value:new Pn(0)},specular:{value:new Pn(1118481)},shininess:{value:30}}]),vertexShader:Yr.meshphong_vert,fragmentShader:Yr.meshphong_frag},standard:{uniforms:$l([hn.common,hn.envmap,hn.aomap,hn.lightmap,hn.emissivemap,hn.bumpmap,hn.normalmap,hn.displacementmap,hn.roughnessmap,hn.metalnessmap,hn.fog,hn.lights,{emissive:{value:new Pn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Yr.meshphysical_vert,fragmentShader:Yr.meshphysical_frag},toon:{uniforms:$l([hn.common,hn.aomap,hn.lightmap,hn.emissivemap,hn.bumpmap,hn.normalmap,hn.displacementmap,hn.gradientmap,hn.fog,hn.lights,{emissive:{value:new Pn(0)}}]),vertexShader:Yr.meshtoon_vert,fragmentShader:Yr.meshtoon_frag},matcap:{uniforms:$l([hn.common,hn.bumpmap,hn.normalmap,hn.displacementmap,hn.fog,{matcap:{value:null}}]),vertexShader:Yr.meshmatcap_vert,fragmentShader:Yr.meshmatcap_frag},points:{uniforms:$l([hn.points,hn.fog]),vertexShader:Yr.points_vert,fragmentShader:Yr.points_frag},dashed:{uniforms:$l([hn.common,hn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Yr.linedashed_vert,fragmentShader:Yr.linedashed_frag},depth:{uniforms:$l([hn.common,hn.displacementmap]),vertexShader:Yr.depth_vert,fragmentShader:Yr.depth_frag},normal:{uniforms:$l([hn.common,hn.bumpmap,hn.normalmap,hn.displacementmap,{opacity:{value:1}}]),vertexShader:Yr.meshnormal_vert,fragmentShader:Yr.meshnormal_frag},sprite:{uniforms:$l([hn.sprite,hn.fog]),vertexShader:Yr.sprite_vert,fragmentShader:Yr.sprite_frag},background:{uniforms:{uvTransform:{value:new Vr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Yr.background_vert,fragmentShader:Yr.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Vr}},vertexShader:Yr.backgroundCube_vert,fragmentShader:Yr.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Yr.cube_vert,fragmentShader:Yr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Yr.equirect_vert,fragmentShader:Yr.equirect_frag},distanceRGBA:{uniforms:$l([hn.common,hn.displacementmap,{referencePosition:{value:new Le},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Yr.distanceRGBA_vert,fragmentShader:Yr.distanceRGBA_frag},shadow:{uniforms:$l([hn.lights,hn.fog,{color:{value:new Pn(0)},opacity:{value:1}}]),vertexShader:Yr.shadow_vert,fragmentShader:Yr.shadow_frag}};g0.physical={uniforms:$l([g0.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Vr},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Vr},clearcoatNormalScale:{value:new $t(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Vr},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Vr},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Vr},sheen:{value:0},sheenColor:{value:new Pn(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Vr},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Vr},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Vr},transmissionSamplerSize:{value:new $t},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Vr},attenuationDistance:{value:0},attenuationColor:{value:new Pn(0)},specularColor:{value:new Pn(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Vr},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Vr},anisotropyVector:{value:new $t},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Vr}}]),vertexShader:Yr.meshphysical_vert,fragmentShader:Yr.meshphysical_frag};const vk={r:0,b:0,g:0},y1=new Du,tct=new cr;function nct(t,e,n,i,o,l,d){const p=new Pn(0);let g=l===!0?0:1,v,_,b=null,w=0,E=null;function S(k,x){let C=!1,P=x.isScene===!0?x.background:null;P&&P.isTexture&&(P=(x.backgroundBlurriness>0?n:e).get(P)),P===null?M(p,g):P&&P.isColor&&(M(P,1),C=!0);const O=t.xr.getEnvironmentBlendMode();O==="additive"?i.buffers.color.setClear(0,0,0,1,d):O==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,d),(t.autoClear||C)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),P&&(P.isCubeTexture||P.mapping===gA)?(_===void 0&&(_=new jo(new mv(1,1,1),new z0({name:"BackgroundCubeMaterial",uniforms:A4(g0.backgroundCube.uniforms),vertexShader:g0.backgroundCube.vertexShader,fragmentShader:g0.backgroundCube.fragmentShader,side:Zl,depthTest:!1,depthWrite:!1,fog:!1})),_.geometry.deleteAttribute("normal"),_.geometry.deleteAttribute("uv"),_.onBeforeRender=function(L,B,V){this.matrixWorld.copyPosition(V.matrixWorld)},Object.defineProperty(_.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),o.update(_)),y1.copy(x.backgroundRotation),y1.x*=-1,y1.y*=-1,y1.z*=-1,P.isCubeTexture&&P.isRenderTargetTexture===!1&&(y1.y*=-1,y1.z*=-1),_.material.uniforms.envMap.value=P,_.material.uniforms.flipEnvMap.value=P.isCubeTexture&&P.isRenderTargetTexture===!1?-1:1,_.material.uniforms.backgroundBlurriness.value=x.backgroundBlurriness,_.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,_.material.uniforms.backgroundRotation.value.setFromMatrix4(tct.makeRotationFromEuler(y1)),_.material.toneMapped=cs.getTransfer(P.colorSpace)!==Ps,(b!==P||w!==P.version||E!==t.toneMapping)&&(_.material.needsUpdate=!0,b=P,w=P.version,E=t.toneMapping),_.layers.enableAll(),k.unshift(_,_.geometry,_.material,0,0,null)):P&&P.isTexture&&(v===void 0&&(v=new jo(new _A(2,2),new z0({name:"BackgroundMaterial",uniforms:A4(g0.background.uniforms),vertexShader:g0.background.vertexShader,fragmentShader:g0.background.fragmentShader,side:mp,depthTest:!1,depthWrite:!1,fog:!1})),v.geometry.deleteAttribute("normal"),Object.defineProperty(v.material,"map",{get:function(){return this.uniforms.t2D.value}}),o.update(v)),v.material.uniforms.t2D.value=P,v.material.uniforms.backgroundIntensity.value=x.backgroundIntensity,v.material.toneMapped=cs.getTransfer(P.colorSpace)!==Ps,P.matrixAutoUpdate===!0&&P.updateMatrix(),v.material.uniforms.uvTransform.value.copy(P.matrix),(b!==P||w!==P.version||E!==t.toneMapping)&&(v.material.needsUpdate=!0,b=P,w=P.version,E=t.toneMapping),v.layers.enableAll(),k.unshift(v,v.geometry,v.material,0,0,null))}function M(k,x){k.getRGB(vk,Ibe(t)),i.buffers.color.setClear(vk.r,vk.g,vk.b,x,d)}return{getClearColor:function(){return p},setClearColor:function(k,x=1){p.set(k),g=x,M(p,g)},getClearAlpha:function(){return g},setClearAlpha:function(k){g=k,M(p,g)},render:S}}function rct(t,e,n,i){const o=t.getParameter(t.MAX_VERTEX_ATTRIBS),l=i.isWebGL2?null:e.get("OES_vertex_array_object"),d=i.isWebGL2||l!==null,p={},g=k(null);let v=g,_=!1;function b(J,le,me,be,ye){let pe=!1;if(d){const oe=M(be,me,le);v!==oe&&(v=oe,E(v.object)),pe=x(J,be,me,ye),pe&&C(J,be,me,ye)}else{const oe=le.wireframe===!0;(v.geometry!==be.id||v.program!==me.id||v.wireframe!==oe)&&(v.geometry=be.id,v.program=me.id,v.wireframe=oe,pe=!0)}ye!==null&&n.update(ye,t.ELEMENT_ARRAY_BUFFER),(pe||_)&&(_=!1,G(J,le,me,be),ye!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(ye).buffer))}function w(){return i.isWebGL2?t.createVertexArray():l.createVertexArrayOES()}function E(J){return i.isWebGL2?t.bindVertexArray(J):l.bindVertexArrayOES(J)}function S(J){return i.isWebGL2?t.deleteVertexArray(J):l.deleteVertexArrayOES(J)}function M(J,le,me){const be=me.wireframe===!0;let ye=p[J.id];ye===void 0&&(ye={},p[J.id]=ye);let pe=ye[le.id];pe===void 0&&(pe={},ye[le.id]=pe);let oe=pe[be];return oe===void 0&&(oe=k(w()),pe[be]=oe),oe}function k(J){const le=[],me=[],be=[];for(let ye=0;ye<o;ye++)le[ye]=0,me[ye]=0,be[ye]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:le,enabledAttributes:me,attributeDivisors:be,object:J,attributes:{},index:null}}function x(J,le,me,be){const ye=v.attributes,pe=le.attributes;let oe=0;const Ce=me.getAttributes();for(const it in Ce)if(Ce[it].location>=0){const Oe=ye[it];let ct=pe[it];if(ct===void 0&&(it==="instanceMatrix"&&J.instanceMatrix&&(ct=J.instanceMatrix),it==="instanceColor"&&J.instanceColor&&(ct=J.instanceColor)),Oe===void 0||Oe.attribute!==ct||ct&&Oe.data!==ct.data)return!0;oe++}return v.attributesNum!==oe||v.index!==be}function C(J,le,me,be){const ye={},pe=le.attributes;let oe=0;const Ce=me.getAttributes();for(const it in Ce)if(Ce[it].location>=0){let Oe=pe[it];Oe===void 0&&(it==="instanceMatrix"&&J.instanceMatrix&&(Oe=J.instanceMatrix),it==="instanceColor"&&J.instanceColor&&(Oe=J.instanceColor));const ct={};ct.attribute=Oe,Oe&&Oe.data&&(ct.data=Oe.data),ye[it]=ct,oe++}v.attributes=ye,v.attributesNum=oe,v.index=be}function P(){const J=v.newAttributes;for(let le=0,me=J.length;le<me;le++)J[le]=0}function O(J){L(J,0)}function L(J,le){const me=v.newAttributes,be=v.enabledAttributes,ye=v.attributeDivisors;me[J]=1,be[J]===0&&(t.enableVertexAttribArray(J),be[J]=1),ye[J]!==le&&((i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](J,le),ye[J]=le)}function B(){const J=v.newAttributes,le=v.enabledAttributes;for(let me=0,be=le.length;me<be;me++)le[me]!==J[me]&&(t.disableVertexAttribArray(me),le[me]=0)}function V(J,le,me,be,ye,pe,oe){oe===!0?t.vertexAttribIPointer(J,le,me,ye,pe):t.vertexAttribPointer(J,le,me,be,ye,pe)}function G(J,le,me,be){if(i.isWebGL2===!1&&(J.isInstancedMesh||be.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;P();const ye=be.attributes,pe=me.getAttributes(),oe=le.defaultAttributeValues;for(const Ce in pe){const it=pe[Ce];if(it.location>=0){let Se=ye[Ce];if(Se===void 0&&(Ce==="instanceMatrix"&&J.instanceMatrix&&(Se=J.instanceMatrix),Ce==="instanceColor"&&J.instanceColor&&(Se=J.instanceColor)),Se!==void 0){const Oe=Se.normalized,ct=Se.itemSize,_t=n.get(Se);if(_t===void 0)continue;const Nt=_t.buffer,Je=_t.type,ot=_t.bytesPerElement,fn=i.isWebGL2===!0&&(Je===t.INT||Je===t.UNSIGNED_INT||Se.gpuType===bQ);if(Se.isInterleavedBufferAttribute){const Ht=Se.data,Re=Ht.stride,Lt=Se.offset;if(Ht.isInstancedInterleavedBuffer){for(let mt=0;mt<it.locationSize;mt++)L(it.location+mt,Ht.meshPerAttribute);J.isInstancedMesh!==!0&&be._maxInstanceCount===void 0&&(be._maxInstanceCount=Ht.meshPerAttribute*Ht.count)}else for(let mt=0;mt<it.locationSize;mt++)O(it.location+mt);t.bindBuffer(t.ARRAY_BUFFER,Nt);for(let mt=0;mt<it.locationSize;mt++)V(it.location+mt,ct/it.locationSize,Je,Oe,Re*ot,(Lt+ct/it.locationSize*mt)*ot,fn)}else{if(Se.isInstancedBufferAttribute){for(let Ht=0;Ht<it.locationSize;Ht++)L(it.location+Ht,Se.meshPerAttribute);J.isInstancedMesh!==!0&&be._maxInstanceCount===void 0&&(be._maxInstanceCount=Se.meshPerAttribute*Se.count)}else for(let Ht=0;Ht<it.locationSize;Ht++)O(it.location+Ht);t.bindBuffer(t.ARRAY_BUFFER,Nt);for(let Ht=0;Ht<it.locationSize;Ht++)V(it.location+Ht,ct/it.locationSize,Je,Oe,ct*ot,ct/it.locationSize*Ht*ot,fn)}}else if(oe!==void 0){const Oe=oe[Ce];if(Oe!==void 0)switch(Oe.length){case 2:t.vertexAttrib2fv(it.location,Oe);break;case 3:t.vertexAttrib3fv(it.location,Oe);break;case 4:t.vertexAttrib4fv(it.location,Oe);break;default:t.vertexAttrib1fv(it.location,Oe)}}}}B()}function j(){fe();for(const J in p){const le=p[J];for(const me in le){const be=le[me];for(const ye in be)S(be[ye].object),delete be[ye];delete le[me]}delete p[J]}}function F(J){if(p[J.id]===void 0)return;const le=p[J.id];for(const me in le){const be=le[me];for(const ye in be)S(be[ye].object),delete be[ye];delete le[me]}delete p[J.id]}function q(J){for(const le in p){const me=p[le];if(me[J.id]===void 0)continue;const be=me[J.id];for(const ye in be)S(be[ye].object),delete be[ye];delete me[J.id]}}function fe(){ue(),_=!0,v!==g&&(v=g,E(v.object))}function ue(){g.geometry=null,g.program=null,g.wireframe=!1}return{setup:b,reset:fe,resetDefaultState:ue,dispose:j,releaseStatesOfGeometry:F,releaseStatesOfProgram:q,initAttributes:P,enableAttribute:O,disableUnusedAttributes:B}}function ict(t,e,n,i){const o=i.isWebGL2;let l;function d(_){l=_}function p(_,b){t.drawArrays(l,_,b),n.update(b,l,1)}function g(_,b,w){if(w===0)return;let E,S;if(o)E=t,S="drawArraysInstanced";else if(E=e.get("ANGLE_instanced_arrays"),S="drawArraysInstancedANGLE",E===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}E[S](l,_,b,w),n.update(b,l,w)}function v(_,b,w){if(w===0)return;const E=e.get("WEBGL_multi_draw");if(E===null)for(let S=0;S<w;S++)this.render(_[S],b[S]);else{E.multiDrawArraysWEBGL(l,_,0,b,0,w);let S=0;for(let M=0;M<w;M++)S+=b[M];n.update(S,l,1)}}this.setMode=d,this.render=p,this.renderInstances=g,this.renderMultiDraw=v}function sct(t,e,n){let i;function o(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const V=e.get("EXT_texture_filter_anisotropic");i=t.getParameter(V.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function l(V){if(V==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";V="mediump"}return V==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const d=typeof WebGL2RenderingContext<"u"&&t.constructor.name==="WebGL2RenderingContext";let p=n.precision!==void 0?n.precision:"highp";const g=l(p);g!==p&&(console.warn("THREE.WebGLRenderer:",p,"not supported, using",g,"instead."),p=g);const v=d||e.has("WEBGL_draw_buffers"),_=n.logarithmicDepthBuffer===!0,b=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),w=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),E=t.getParameter(t.MAX_TEXTURE_SIZE),S=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),M=t.getParameter(t.MAX_VERTEX_ATTRIBS),k=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),x=t.getParameter(t.MAX_VARYING_VECTORS),C=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),P=w>0,O=d||e.has("OES_texture_float"),L=P&&O,B=d?t.getParameter(t.MAX_SAMPLES):0;return{isWebGL2:d,drawBuffers:v,getMaxAnisotropy:o,getMaxPrecision:l,precision:p,logarithmicDepthBuffer:_,maxTextures:b,maxVertexTextures:w,maxTextureSize:E,maxCubemapSize:S,maxAttributes:M,maxVertexUniforms:k,maxVaryings:x,maxFragmentUniforms:C,vertexTextures:P,floatFragmentTextures:O,floatVertexTextures:L,maxSamples:B}}function oct(t){const e=this;let n=null,i=0,o=!1,l=!1;const d=new P2,p=new Vr,g={value:null,needsUpdate:!1};this.uniform=g,this.numPlanes=0,this.numIntersection=0,this.init=function(b,w){const E=b.length!==0||w||i!==0||o;return o=w,i=b.length,E},this.beginShadows=function(){l=!0,_(null)},this.endShadows=function(){l=!1},this.setGlobalState=function(b,w){n=_(b,w,0)},this.setState=function(b,w,E){const S=b.clippingPlanes,M=b.clipIntersection,k=b.clipShadows,x=t.get(b);if(!o||S===null||S.length===0||l&&!k)l?_(null):v();else{const C=l?0:i,P=C*4;let O=x.clippingState||null;g.value=O,O=_(S,w,P,E);for(let L=0;L!==P;++L)O[L]=n[L];x.clippingState=O,this.numIntersection=M?this.numPlanes:0,this.numPlanes+=C}};function v(){g.value!==n&&(g.value=n,g.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function _(b,w,E,S){const M=b!==null?b.length:0;let k=null;if(M!==0){if(k=g.value,S!==!0||k===null){const x=E+M*4,C=w.matrixWorldInverse;p.getNormalMatrix(C),(k===null||k.length<x)&&(k=new Float32Array(x));for(let P=0,O=E;P!==M;++P,O+=4)d.copy(b[P]).applyMatrix4(C,p),d.normal.toArray(k,O),k[O+3]=d.constant}g.value=k,g.needsUpdate=!0}return e.numPlanes=M,e.numIntersection=0,k}}function act(t){let e=new WeakMap;function n(d,p){return p===LT?d.mapping=gp:p===zT&&(d.mapping=vm),d}function i(d){if(d&&d.isTexture){const p=d.mapping;if(p===LT||p===zT)if(e.has(d)){const g=e.get(d).texture;return n(g,d.mapping)}else{const g=d.image;if(g&&g.height>0){const v=new zbe(g.height);return v.fromEquirectangularTexture(t,d),e.set(d,v),d.addEventListener("dispose",o),n(v.texture,d.mapping)}else return null}}return d}function o(d){const p=d.target;p.removeEventListener("dispose",o);const g=e.get(p);g!==void 0&&(e.delete(p),g.dispose())}function l(){e=new WeakMap}return{get:i,dispose:l}}class sL extends iL{constructor(e=-1,n=1,i=1,o=-1,l=.1,d=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=i,this.bottom=o,this.near=l,this.far=d,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,i,o,l,d){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=o,this.view.width=l,this.view.height=d,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,o=(this.top+this.bottom)/2;let l=i-e,d=i+e,p=o+n,g=o-n;if(this.view!==null&&this.view.enabled){const v=(this.right-this.left)/this.view.fullWidth/this.zoom,_=(this.top-this.bottom)/this.view.fullHeight/this.zoom;l+=v*this.view.offsetX,d=l+v*this.view.width,p-=_*this.view.offsetY,g=p-_*this.view.height}this.projectionMatrix.makeOrthographic(l,d,p,g,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const ab=4,Joe=[.125,.215,.35,.446,.526,.582],gg=20,pV=new sL,eae=new Pn;let mV=null,gV=0,vV=0;const J1=(1+Math.sqrt(5))/2,R_=1/J1,tae=[new Le(1,1,1),new Le(-1,1,1),new Le(1,1,-1),new Le(-1,1,-1),new Le(0,J1,R_),new Le(0,J1,-R_),new Le(R_,0,J1),new Le(-R_,0,J1),new Le(J1,R_,0),new Le(-J1,R_,0)];class Z${constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,i=.1,o=100){mV=this._renderer.getRenderTarget(),gV=this._renderer.getActiveCubeFace(),vV=this._renderer.getActiveMipmapLevel(),this._setSize(256);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,i,o,l),n>0&&this._blur(l,0,0,n),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=iae(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=rae(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(mV,gV,vV),e.scissorTest=!1,_k(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===gp||e.mapping===vm?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),mV=this._renderer.getRenderTarget(),gV=this._renderer.getActiveCubeFace(),vV=this._renderer.getActiveMipmapLevel();const i=n||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,i={magFilter:so,minFilter:so,generateMipmaps:!1,type:y4,format:Oc,colorSpace:xp,depthBuffer:!1},o=nae(e,n,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=nae(e,n,i);const{_lodMax:l}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=lct(l)),this._blurMaterial=cct(l,e,n)}return o}_compileMaterial(e){const n=new jo(this._lodPlanes[0],e);this._renderer.compile(n,pV)}_sceneToCubeUV(e,n,i,o){const p=new Ha(90,1,n,i),g=[1,-1,1,1,1,1],v=[1,1,1,-1,-1,-1],_=this._renderer,b=_.autoClear,w=_.toneMapping;_.getClearColor(eae),_.toneMapping=ep,_.autoClear=!1;const E=new Om({name:"PMREM.Background",side:Zl,depthWrite:!1,depthTest:!1}),S=new jo(new mv,E);let M=!1;const k=e.background;k?k.isColor&&(E.color.copy(k),e.background=null,M=!0):(E.color.copy(eae),M=!0);for(let x=0;x<6;x++){const C=x%3;C===0?(p.up.set(0,g[x],0),p.lookAt(v[x],0,0)):C===1?(p.up.set(0,0,g[x]),p.lookAt(0,v[x],0)):(p.up.set(0,g[x],0),p.lookAt(0,0,v[x]));const P=this._cubeSize;_k(o,C*P,x>2?P:0,P,P),_.setRenderTarget(o),M&&_.render(S,p),_.render(e,p)}S.geometry.dispose(),S.material.dispose(),_.toneMapping=w,_.autoClear=b,e.background=k}_textureToCubeUV(e,n){const i=this._renderer,o=e.mapping===gp||e.mapping===vm;o?(this._cubemapMaterial===null&&(this._cubemapMaterial=iae()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=rae());const l=o?this._cubemapMaterial:this._equirectMaterial,d=new jo(this._lodPlanes[0],l),p=l.uniforms;p.envMap.value=e;const g=this._cubeSize;_k(n,0,0,3*g,2*g),i.setRenderTarget(n),i.render(d,pV)}_applyPMREM(e){const n=this._renderer,i=n.autoClear;n.autoClear=!1;for(let o=1;o<this._lodPlanes.length;o++){const l=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),d=tae[(o-1)%tae.length];this._blur(e,o-1,o,l,d)}n.autoClear=i}_blur(e,n,i,o,l){const d=this._pingPongRenderTarget;this._halfBlur(e,d,n,i,o,"latitudinal",l),this._halfBlur(d,e,i,i,o,"longitudinal",l)}_halfBlur(e,n,i,o,l,d,p){const g=this._renderer,v=this._blurMaterial;d!=="latitudinal"&&d!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const _=3,b=new jo(this._lodPlanes[o],v),w=v.uniforms,E=this._sizeLods[i]-1,S=isFinite(l)?Math.PI/(2*E):2*Math.PI/(2*gg-1),M=l/S,k=isFinite(l)?1+Math.floor(_*M):gg;k>gg&&console.warn(`sigmaRadians, ${l}, is too large and will clip, as it requested ${k} samples when the maximum is set to ${gg}`);const x=[];let C=0;for(let V=0;V<gg;++V){const G=V/M,j=Math.exp(-G*G/2);x.push(j),V===0?C+=j:V<k&&(C+=2*j)}for(let V=0;V<x.length;V++)x[V]=x[V]/C;w.envMap.value=e.texture,w.samples.value=k,w.weights.value=x,w.latitudinal.value=d==="latitudinal",p&&(w.poleAxis.value=p);const{_lodMax:P}=this;w.dTheta.value=S,w.mipInt.value=P-i;const O=this._sizeLods[o],L=3*O*(o>P-ab?o-P+ab:0),B=4*(this._cubeSize-O);_k(n,L,B,3*O,2*O),g.setRenderTarget(n),g.render(b,pV)}}function lct(t){const e=[],n=[],i=[];let o=t;const l=t-ab+1+Joe.length;for(let d=0;d<l;d++){const p=Math.pow(2,o);n.push(p);let g=1/p;d>t-ab?g=Joe[d-t+ab-1]:d===0&&(g=0),i.push(g);const v=1/(p-2),_=-v,b=1+v,w=[_,_,b,_,b,b,_,_,b,b,_,b],E=6,S=6,M=3,k=2,x=1,C=new Float32Array(M*S*E),P=new Float32Array(k*S*E),O=new Float32Array(x*S*E);for(let B=0;B<E;B++){const V=B%3*2/3-1,G=B>2?0:-1,j=[V,G,0,V+2/3,G,0,V+2/3,G+1,0,V,G,0,V+2/3,G+1,0,V,G+1,0];C.set(j,M*S*B),P.set(w,k*S*B);const F=[B,B,B,B,B,B];O.set(F,x*S*B)}const L=new Kr;L.setAttribute("position",new _s(C,M)),L.setAttribute("uv",new _s(P,k)),L.setAttribute("faceIndex",new _s(O,x)),e.push(L),o>ab&&o--}return{lodPlanes:e,sizeLods:n,sigmas:i}}function nae(t,e,n){const i=new L0(t,e,n);return i.texture.mapping=gA,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function _k(t,e,n,i,o){t.viewport.set(e,n,i,o),t.scissor.set(e,n,i,o)}function cct(t,e,n){const i=new Float32Array(gg),o=new Le(0,1,0);return new z0({name:"SphericalGaussianBlur",defines:{n:gg,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:o}},vertexShader:NQ(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Jh,depthTest:!1,depthWrite:!1})}function rae(){return new z0({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:NQ(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Jh,depthTest:!1,depthWrite:!1})}function iae(){return new z0({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:NQ(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Jh,depthTest:!1,depthWrite:!1})}function NQ(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function uct(t){let e=new WeakMap,n=null;function i(p){if(p&&p.isTexture){const g=p.mapping,v=g===LT||g===zT,_=g===gp||g===vm;if(v||_)if(p.isRenderTargetTexture&&p.needsPMREMUpdate===!0){p.needsPMREMUpdate=!1;let b=e.get(p);return n===null&&(n=new Z$(t)),b=v?n.fromEquirectangular(p,b):n.fromCubemap(p,b),e.set(p,b),b.texture}else{if(e.has(p))return e.get(p).texture;{const b=p.image;if(v&&b&&b.height>0||_&&b&&o(b)){n===null&&(n=new Z$(t));const w=v?n.fromEquirectangular(p):n.fromCubemap(p);return e.set(p,w),p.addEventListener("dispose",l),w.texture}else return null}}}return p}function o(p){let g=0;const v=6;for(let _=0;_<v;_++)p[_]!==void 0&&g++;return g===v}function l(p){const g=p.target;g.removeEventListener("dispose",l);const v=e.get(g);v!==void 0&&(e.delete(g),v.dispose())}function d(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:i,dispose:d}}function fct(t){const e={};function n(i){if(e[i]!==void 0)return e[i];let o;switch(i){case"WEBGL_depth_texture":o=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":o=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":o=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":o=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:o=t.getExtension(i)}return e[i]=o,o}return{has:function(i){return n(i)!==null},init:function(i){i.isWebGL2?(n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance")):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(i){const o=n(i);return o===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),o}}}function dct(t,e,n,i){const o={},l=new WeakMap;function d(b){const w=b.target;w.index!==null&&e.remove(w.index);for(const S in w.attributes)e.remove(w.attributes[S]);for(const S in w.morphAttributes){const M=w.morphAttributes[S];for(let k=0,x=M.length;k<x;k++)e.remove(M[k])}w.removeEventListener("dispose",d),delete o[w.id];const E=l.get(w);E&&(e.remove(E),l.delete(w)),i.releaseStatesOfGeometry(w),w.isInstancedBufferGeometry===!0&&delete w._maxInstanceCount,n.memory.geometries--}function p(b,w){return o[w.id]===!0||(w.addEventListener("dispose",d),o[w.id]=!0,n.memory.geometries++),w}function g(b){const w=b.attributes;for(const S in w)e.update(w[S],t.ARRAY_BUFFER);const E=b.morphAttributes;for(const S in E){const M=E[S];for(let k=0,x=M.length;k<x;k++)e.update(M[k],t.ARRAY_BUFFER)}}function v(b){const w=[],E=b.index,S=b.attributes.position;let M=0;if(E!==null){const C=E.array;M=E.version;for(let P=0,O=C.length;P<O;P+=3){const L=C[P+0],B=C[P+1],V=C[P+2];w.push(L,B,B,V,V,L)}}else if(S!==void 0){const C=S.array;M=S.version;for(let P=0,O=C.length/3-1;P<O;P+=3){const L=P+0,B=P+1,V=P+2;w.push(L,B,B,V,V,L)}}else return;const k=new(Cbe(w)?IQ:OQ)(w,1);k.version=M;const x=l.get(b);x&&e.remove(x),l.set(b,k)}function _(b){const w=l.get(b);if(w){const E=b.index;E!==null&&w.version<E.version&&v(b)}else v(b);return l.get(b)}return{get:p,update:g,getWireframeAttribute:_}}function hct(t,e,n,i){const o=i.isWebGL2;let l;function d(E){l=E}let p,g;function v(E){p=E.type,g=E.bytesPerElement}function _(E,S){t.drawElements(l,S,p,E*g),n.update(S,l,1)}function b(E,S,M){if(M===0)return;let k,x;if(o)k=t,x="drawElementsInstanced";else if(k=e.get("ANGLE_instanced_arrays"),x="drawElementsInstancedANGLE",k===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}k[x](l,S,p,E*g,M),n.update(S,l,M)}function w(E,S,M){if(M===0)return;const k=e.get("WEBGL_multi_draw");if(k===null)for(let x=0;x<M;x++)this.render(E[x]/g,S[x]);else{k.multiDrawElementsWEBGL(l,S,0,p,E,0,M);let x=0;for(let C=0;C<M;C++)x+=S[C];n.update(x,l,1)}}this.setMode=d,this.setIndex=v,this.render=_,this.renderInstances=b,this.renderMultiDraw=w}function pct(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(l,d,p){switch(n.calls++,d){case t.TRIANGLES:n.triangles+=p*(l/3);break;case t.LINES:n.lines+=p*(l/2);break;case t.LINE_STRIP:n.lines+=p*(l-1);break;case t.LINE_LOOP:n.lines+=p*l;break;case t.POINTS:n.points+=p*l;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",d);break}}function o(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:o,update:i}}function mct(t,e){return t[0]-e[0]}function gct(t,e){return Math.abs(e[1])-Math.abs(t[1])}function vct(t,e,n){const i={},o=new Float32Array(8),l=new WeakMap,d=new fs,p=[];for(let v=0;v<8;v++)p[v]=[v,0];function g(v,_,b){const w=v.morphTargetInfluences;if(e.isWebGL2===!0){const E=_.morphAttributes.position||_.morphAttributes.normal||_.morphAttributes.color,S=E!==void 0?E.length:0;let M=l.get(_);if(M===void 0||M.count!==S){let fe=function(){F.dispose(),l.delete(_),_.removeEventListener("dispose",fe)};M!==void 0&&M.texture.dispose();const k=_.morphAttributes.position!==void 0,x=_.morphAttributes.normal!==void 0,C=_.morphAttributes.color!==void 0,P=_.morphAttributes.position||[],O=_.morphAttributes.normal||[],L=_.morphAttributes.color||[];let B=0;k===!0&&(B=1),x===!0&&(B=2),C===!0&&(B=3);let V=_.attributes.position.count*B,G=1;V>e.maxTextureSize&&(G=Math.ceil(V/e.maxTextureSize),V=e.maxTextureSize);const j=new Float32Array(V*G*4*S),F=new nL(j,V,G,S);F.type=bu,F.needsUpdate=!0;const q=B*4;for(let ue=0;ue<S;ue++){const J=P[ue],le=O[ue],me=L[ue],be=V*G*4*ue;for(let ye=0;ye<J.count;ye++){const pe=ye*q;k===!0&&(d.fromBufferAttribute(J,ye),j[be+pe+0]=d.x,j[be+pe+1]=d.y,j[be+pe+2]=d.z,j[be+pe+3]=0),x===!0&&(d.fromBufferAttribute(le,ye),j[be+pe+4]=d.x,j[be+pe+5]=d.y,j[be+pe+6]=d.z,j[be+pe+7]=0),C===!0&&(d.fromBufferAttribute(me,ye),j[be+pe+8]=d.x,j[be+pe+9]=d.y,j[be+pe+10]=d.z,j[be+pe+11]=me.itemSize===4?d.w:1)}}M={count:S,texture:F,size:new $t(V,G)},l.set(_,M),_.addEventListener("dispose",fe)}if(v.isInstancedMesh===!0&&v.morphTexture!==null)b.getUniforms().setValue(t,"morphTexture",v.morphTexture,n);else{let k=0;for(let C=0;C<w.length;C++)k+=w[C];const x=_.morphTargetsRelative?1:1-k;b.getUniforms().setValue(t,"morphTargetBaseInfluence",x),b.getUniforms().setValue(t,"morphTargetInfluences",w)}b.getUniforms().setValue(t,"morphTargetsTexture",M.texture,n),b.getUniforms().setValue(t,"morphTargetsTextureSize",M.size)}else{const E=w===void 0?0:w.length;let S=i[_.id];if(S===void 0||S.length!==E){S=[];for(let P=0;P<E;P++)S[P]=[P,0];i[_.id]=S}for(let P=0;P<E;P++){const O=S[P];O[0]=P,O[1]=w[P]}S.sort(gct);for(let P=0;P<8;P++)P<E&&S[P][1]?(p[P][0]=S[P][0],p[P][1]=S[P][1]):(p[P][0]=Number.MAX_SAFE_INTEGER,p[P][1]=0);p.sort(mct);const M=_.morphAttributes.position,k=_.morphAttributes.normal;let x=0;for(let P=0;P<8;P++){const O=p[P],L=O[0],B=O[1];L!==Number.MAX_SAFE_INTEGER&&B?(M&&_.getAttribute("morphTarget"+P)!==M[L]&&_.setAttribute("morphTarget"+P,M[L]),k&&_.getAttribute("morphNormal"+P)!==k[L]&&_.setAttribute("morphNormal"+P,k[L]),o[P]=B,x+=B):(M&&_.hasAttribute("morphTarget"+P)===!0&&_.deleteAttribute("morphTarget"+P),k&&_.hasAttribute("morphNormal"+P)===!0&&_.deleteAttribute("morphNormal"+P),o[P]=0)}const C=_.morphTargetsRelative?1:1-x;b.getUniforms().setValue(t,"morphTargetBaseInfluence",C),b.getUniforms().setValue(t,"morphTargetInfluences",o)}}return{update:g}}function _ct(t,e,n,i){let o=new WeakMap;function l(g){const v=i.render.frame,_=g.geometry,b=e.get(g,_);if(o.get(b)!==v&&(e.update(b),o.set(b,v)),g.isInstancedMesh&&(g.hasEventListener("dispose",p)===!1&&g.addEventListener("dispose",p),o.get(g)!==v&&(n.update(g.instanceMatrix,t.ARRAY_BUFFER),g.instanceColor!==null&&n.update(g.instanceColor,t.ARRAY_BUFFER),o.set(g,v))),g.isSkinnedMesh){const w=g.skeleton;o.get(w)!==v&&(w.update(),o.set(w,v))}return b}function d(){o=new WeakMap}function p(g){const v=g.target;v.removeEventListener("dispose",p),n.remove(v.instanceMatrix),v.instanceColor!==null&&n.remove(v.instanceColor)}return{update:l,dispose:d}}class LQ extends mo{constructor(e,n,i,o,l,d,p,g,v,_){if(_=_!==void 0?_:rm,_!==rm&&_!==Jg)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&_===rm&&(i=Hh),i===void 0&&_===Jg&&(i=nm),super(null,o,l,d,p,g,_,i,v),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=p!==void 0?p:ko,this.minFilter=g!==void 0?g:ko,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}const Ube=new mo,Fbe=new LQ(1,1);Fbe.compareFunction=CQ;const Vbe=new nL,Gbe=new DQ,jbe=new wx,sae=[],oae=[],aae=new Float32Array(16),lae=new Float32Array(9),cae=new Float32Array(4);function yA(t,e,n){const i=t[0];if(i<=0||i>0)return t;const o=e*n;let l=sae[o];if(l===void 0&&(l=new Float32Array(o),sae[o]=l),e!==0){i.toArray(l,0);for(let d=1,p=0;d!==e;++d)p+=n,t[d].toArray(l,p)}return l}function ca(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function ua(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function oL(t,e){let n=oae[e];n===void 0&&(n=new Int32Array(e),oae[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function yct(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function bct(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ca(n,e))return;t.uniform2fv(this.addr,e),ua(n,e)}}function Act(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(ca(n,e))return;t.uniform3fv(this.addr,e),ua(n,e)}}function wct(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ca(n,e))return;t.uniform4fv(this.addr,e),ua(n,e)}}function Ect(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(ca(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),ua(n,e)}else{if(ca(n,i))return;cae.set(i),t.uniformMatrix2fv(this.addr,!1,cae),ua(n,i)}}function Sct(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(ca(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),ua(n,e)}else{if(ca(n,i))return;lae.set(i),t.uniformMatrix3fv(this.addr,!1,lae),ua(n,i)}}function Tct(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(ca(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),ua(n,e)}else{if(ca(n,i))return;aae.set(i),t.uniformMatrix4fv(this.addr,!1,aae),ua(n,i)}}function xct(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Mct(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ca(n,e))return;t.uniform2iv(this.addr,e),ua(n,e)}}function kct(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(ca(n,e))return;t.uniform3iv(this.addr,e),ua(n,e)}}function Cct(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ca(n,e))return;t.uniform4iv(this.addr,e),ua(n,e)}}function Pct(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Rct(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ca(n,e))return;t.uniform2uiv(this.addr,e),ua(n,e)}}function Dct(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(ca(n,e))return;t.uniform3uiv(this.addr,e),ua(n,e)}}function Oct(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ca(n,e))return;t.uniform4uiv(this.addr,e),ua(n,e)}}function Ict(t,e,n){const i=this.cache,o=n.allocateTextureUnit();i[0]!==o&&(t.uniform1i(this.addr,o),i[0]=o);const l=this.type===t.SAMPLER_2D_SHADOW?Fbe:Ube;n.setTexture2D(e||l,o)}function Nct(t,e,n){const i=this.cache,o=n.allocateTextureUnit();i[0]!==o&&(t.uniform1i(this.addr,o),i[0]=o),n.setTexture3D(e||Gbe,o)}function Lct(t,e,n){const i=this.cache,o=n.allocateTextureUnit();i[0]!==o&&(t.uniform1i(this.addr,o),i[0]=o),n.setTextureCube(e||jbe,o)}function zct(t,e,n){const i=this.cache,o=n.allocateTextureUnit();i[0]!==o&&(t.uniform1i(this.addr,o),i[0]=o),n.setTexture2DArray(e||Vbe,o)}function Bct(t){switch(t){case 5126:return yct;case 35664:return bct;case 35665:return Act;case 35666:return wct;case 35674:return Ect;case 35675:return Sct;case 35676:return Tct;case 5124:case 35670:return xct;case 35667:case 35671:return Mct;case 35668:case 35672:return kct;case 35669:case 35673:return Cct;case 5125:return Pct;case 36294:return Rct;case 36295:return Dct;case 36296:return Oct;case 35678:case 36198:case 36298:case 36306:case 35682:return Ict;case 35679:case 36299:case 36307:return Nct;case 35680:case 36300:case 36308:case 36293:return Lct;case 36289:case 36303:case 36311:case 36292:return zct}}function Uct(t,e){t.uniform1fv(this.addr,e)}function Fct(t,e){const n=yA(e,this.size,2);t.uniform2fv(this.addr,n)}function Vct(t,e){const n=yA(e,this.size,3);t.uniform3fv(this.addr,n)}function Gct(t,e){const n=yA(e,this.size,4);t.uniform4fv(this.addr,n)}function jct(t,e){const n=yA(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function Hct(t,e){const n=yA(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function $ct(t,e){const n=yA(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Wct(t,e){t.uniform1iv(this.addr,e)}function Yct(t,e){t.uniform2iv(this.addr,e)}function qct(t,e){t.uniform3iv(this.addr,e)}function Xct(t,e){t.uniform4iv(this.addr,e)}function Zct(t,e){t.uniform1uiv(this.addr,e)}function Qct(t,e){t.uniform2uiv(this.addr,e)}function Kct(t,e){t.uniform3uiv(this.addr,e)}function Jct(t,e){t.uniform4uiv(this.addr,e)}function eut(t,e,n){const i=this.cache,o=e.length,l=oL(n,o);ca(i,l)||(t.uniform1iv(this.addr,l),ua(i,l));for(let d=0;d!==o;++d)n.setTexture2D(e[d]||Ube,l[d])}function tut(t,e,n){const i=this.cache,o=e.length,l=oL(n,o);ca(i,l)||(t.uniform1iv(this.addr,l),ua(i,l));for(let d=0;d!==o;++d)n.setTexture3D(e[d]||Gbe,l[d])}function nut(t,e,n){const i=this.cache,o=e.length,l=oL(n,o);ca(i,l)||(t.uniform1iv(this.addr,l),ua(i,l));for(let d=0;d!==o;++d)n.setTextureCube(e[d]||jbe,l[d])}function rut(t,e,n){const i=this.cache,o=e.length,l=oL(n,o);ca(i,l)||(t.uniform1iv(this.addr,l),ua(i,l));for(let d=0;d!==o;++d)n.setTexture2DArray(e[d]||Vbe,l[d])}function iut(t){switch(t){case 5126:return Uct;case 35664:return Fct;case 35665:return Vct;case 35666:return Gct;case 35674:return jct;case 35675:return Hct;case 35676:return $ct;case 5124:case 35670:return Wct;case 35667:case 35671:return Yct;case 35668:case 35672:return qct;case 35669:case 35673:return Xct;case 5125:return Zct;case 36294:return Qct;case 36295:return Kct;case 36296:return Jct;case 35678:case 36198:case 36298:case 36306:case 35682:return eut;case 35679:case 36299:case 36307:return tut;case 35680:case 36300:case 36308:case 36293:return nut;case 36289:case 36303:case 36311:case 36292:return rut}}class sut{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.type=n.type,this.setValue=Bct(n.type)}}class out{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=iut(n.type)}}class aut{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,i){const o=this.seq;for(let l=0,d=o.length;l!==d;++l){const p=o[l];p.setValue(e,n[p.id],i)}}}const _V=/(\w+)(\])?(\[|\.)?/g;function uae(t,e){t.seq.push(e),t.map[e.id]=e}function lut(t,e,n){const i=t.name,o=i.length;for(_V.lastIndex=0;;){const l=_V.exec(i),d=_V.lastIndex;let p=l[1];const g=l[2]==="]",v=l[3];if(g&&(p=p|0),v===void 0||v==="["&&d+2===o){uae(n,v===void 0?new sut(p,t,e):new out(p,t,e));break}else{let b=n.map[p];b===void 0&&(b=new aut(p),uae(n,b)),n=b}}}class hD{constructor(e,n){this.seq=[],this.map={};const i=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let o=0;o<i;++o){const l=e.getActiveUniform(n,o),d=e.getUniformLocation(n,l.name);lut(l,d,this)}}setValue(e,n,i,o){const l=this.map[n];l!==void 0&&l.setValue(e,i,o)}setOptional(e,n,i){const o=n[i];o!==void 0&&this.setValue(e,i,o)}static upload(e,n,i,o){for(let l=0,d=n.length;l!==d;++l){const p=n[l],g=i[p.id];g.needsUpdate!==!1&&p.setValue(e,g.value,o)}}static seqWithValue(e,n){const i=[];for(let o=0,l=e.length;o!==l;++o){const d=e[o];d.id in n&&i.push(d)}return i}}function fae(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}const cut=37297;let uut=0;function fut(t,e){const n=t.split(`
`),i=[],o=Math.max(e-6,0),l=Math.min(e+6,n.length);for(let d=o;d<l;d++){const p=d+1;i.push(`${p===e?">":" "} ${p}: ${n[d]}`)}return i.join(`
`)}function dut(t){const e=cs.getPrimaries(cs.workingColorSpace),n=cs.getPrimaries(t);let i;switch(e===n?i="":e===$T&&n===HT?i="LinearDisplayP3ToLinearSRGB":e===HT&&n===$T&&(i="LinearSRGBToLinearDisplayP3"),t){case xp:case Ax:return[i,"LinearTransferOETF"];case uf:case tL:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),[i,"LinearTransferOETF"]}}function dae(t,e,n){const i=t.getShaderParameter(e,t.COMPILE_STATUS),o=t.getShaderInfoLog(e).trim();if(i&&o==="")return"";const l=/ERROR: 0:(\d+)/.exec(o);if(l){const d=parseInt(l[1]);return n.toUpperCase()+`

`+o+`

`+fut(t.getShaderSource(e),d)}else return o}function hut(t,e){const n=dut(e);return`vec4 ${t}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function put(t,e){let n;switch(e){case tbe:n="Linear";break;case nbe:n="Reinhard";break;case rbe:n="OptimizedCineon";break;case ibe:n="ACESFilmic";break;case obe:n="AgX";break;case abe:n="Neutral";break;case sbe:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function mut(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||t.alphaToCoverage||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(lb).join(`
`)}function gut(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(lb).join(`
`)}function vut(t){const e=[];for(const n in t){const i=t[n];i!==!1&&e.push("#define "+n+" "+i)}return e.join(`
`)}function _ut(t,e){const n={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let o=0;o<i;o++){const l=t.getActiveAttrib(e,o),d=l.name;let p=1;l.type===t.FLOAT_MAT2&&(p=2),l.type===t.FLOAT_MAT3&&(p=3),l.type===t.FLOAT_MAT4&&(p=4),n[d]={type:l.type,location:t.getAttribLocation(e,d),locationSize:p}}return n}function lb(t){return t!==""}function hae(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function pae(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const yut=/^[ \t]*#include +<([\w\d./]+)>/gm;function Q$(t){return t.replace(yut,Aut)}const but=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function Aut(t,e){let n=Yr[e];if(n===void 0){const i=but.get(e);if(i!==void 0)n=Yr[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return Q$(n)}const wut=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function mae(t){return t.replace(wut,Eut)}function Eut(t,e,n,i){let o="";for(let l=parseInt(e);l<parseInt(n);l++)o+=i.replace(/\[\s*i\s*\]/g,"[ "+l+" ]").replace(/UNROLLED_LOOP_INDEX/g,l);return o}function gae(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	`;return t.isWebGL2&&(e+=`precision ${t.precision} sampler3D;
		precision ${t.precision} sampler2DArray;
		precision ${t.precision} sampler2DShadow;
		precision ${t.precision} samplerCubeShadow;
		precision ${t.precision} sampler2DArrayShadow;
		precision ${t.precision} isampler2D;
		precision ${t.precision} isampler3D;
		precision ${t.precision} isamplerCube;
		precision ${t.precision} isampler2DArray;
		precision ${t.precision} usampler2D;
		precision ${t.precision} usampler3D;
		precision ${t.precision} usamplerCube;
		precision ${t.precision} usampler2DArray;
		`),t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Sut(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===yQ?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===Cye?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===hd&&(e="SHADOWMAP_TYPE_VSM"),e}function Tut(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case gp:case vm:e="ENVMAP_TYPE_CUBE";break;case gA:e="ENVMAP_TYPE_CUBE_UV";break}return e}function xut(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case vm:e="ENVMAP_MODE_REFRACTION";break}return e}function Mut(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case bx:e="ENVMAP_BLENDING_MULTIPLY";break;case Jye:e="ENVMAP_BLENDING_MIX";break;case ebe:e="ENVMAP_BLENDING_ADD";break}return e}function kut(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:i,maxMip:n}}function Cut(t,e,n,i){const o=t.getContext(),l=n.defines;let d=n.vertexShader,p=n.fragmentShader;const g=Sut(n),v=Tut(n),_=xut(n),b=Mut(n),w=kut(n),E=n.isWebGL2?"":mut(n),S=gut(n),M=vut(l),k=o.createProgram();let x,C,P=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(x=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,M].filter(lb).join(`
`),x.length>0&&(x+=`
`),C=[E,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,M].filter(lb).join(`
`),C.length>0&&(C+=`
`)):(x=[gae(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,M,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+_:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+g:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(lb).join(`
`),C=[E,gae(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,M,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+v:"",n.envMap?"#define "+_:"",n.envMap?"#define "+b:"",w?"#define CUBEUV_TEXEL_WIDTH "+w.texelWidth:"",w?"#define CUBEUV_TEXEL_HEIGHT "+w.texelHeight:"",w?"#define CUBEUV_MAX_MIP "+w.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+g:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==ep?"#define TONE_MAPPING":"",n.toneMapping!==ep?Yr.tonemapping_pars_fragment:"",n.toneMapping!==ep?put("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Yr.colorspace_pars_fragment,hut("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(lb).join(`
`)),d=Q$(d),d=hae(d,n),d=pae(d,n),p=Q$(p),p=hae(p,n),p=pae(p,n),d=mae(d),p=mae(p),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(P=`#version 300 es
`,x=[S,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+x,C=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===q$?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===q$?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+C);const O=P+x+d,L=P+C+p,B=fae(o,o.VERTEX_SHADER,O),V=fae(o,o.FRAGMENT_SHADER,L);o.attachShader(k,B),o.attachShader(k,V),n.index0AttributeName!==void 0?o.bindAttribLocation(k,0,n.index0AttributeName):n.morphTargets===!0&&o.bindAttribLocation(k,0,"position"),o.linkProgram(k);function G(fe){if(t.debug.checkShaderErrors){const ue=o.getProgramInfoLog(k).trim(),J=o.getShaderInfoLog(B).trim(),le=o.getShaderInfoLog(V).trim();let me=!0,be=!0;if(o.getProgramParameter(k,o.LINK_STATUS)===!1)if(me=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(o,k,B,V);else{const ye=dae(o,B,"vertex"),pe=dae(o,V,"fragment");console.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(k,o.VALIDATE_STATUS)+`

Material Name: `+fe.name+`
Material Type: `+fe.type+`

Program Info Log: `+ue+`
`+ye+`
`+pe)}else ue!==""?console.warn("THREE.WebGLProgram: Program Info Log:",ue):(J===""||le==="")&&(be=!1);be&&(fe.diagnostics={runnable:me,programLog:ue,vertexShader:{log:J,prefix:x},fragmentShader:{log:le,prefix:C}})}o.deleteShader(B),o.deleteShader(V),j=new hD(o,k),F=_ut(o,k)}let j;this.getUniforms=function(){return j===void 0&&G(this),j};let F;this.getAttributes=function(){return F===void 0&&G(this),F};let q=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return q===!1&&(q=o.getProgramParameter(k,cut)),q},this.destroy=function(){i.releaseStatesOfProgram(this),o.deleteProgram(k),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=uut++,this.cacheKey=e,this.usedTimes=1,this.program=k,this.vertexShader=B,this.fragmentShader=V,this}let Put=0;class Rut{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,i=e.fragmentShader,o=this._getShaderStage(n),l=this._getShaderStage(i),d=this._getShaderCacheForMaterial(e);return d.has(o)===!1&&(d.add(o),o.usedTimes++),d.has(l)===!1&&(d.add(l),l.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const i of n)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let i=n.get(e);return i===void 0&&(i=new Set,n.set(e,i)),i}_getShaderStage(e){const n=this.shaderCache;let i=n.get(e);return i===void 0&&(i=new Dut(e),n.set(e,i)),i}}class Dut{constructor(e){this.id=Put++,this.code=e,this.usedTimes=0}}function Out(t,e,n,i,o,l,d){const p=new rL,g=new Rut,v=new Set,_=[],b=o.isWebGL2,w=o.logarithmicDepthBuffer,E=o.vertexTextures;let S=o.precision;const M={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function k(F){return v.add(F),F===0?"uv":`uv${F}`}function x(F,q,fe,ue,J){const le=ue.fog,me=J.geometry,be=F.isMeshStandardMaterial?ue.environment:null,ye=(F.isMeshStandardMaterial?n:e).get(F.envMap||be),pe=ye&&ye.mapping===gA?ye.image.height:null,oe=M[F.type];F.precision!==null&&(S=o.getMaxPrecision(F.precision),S!==F.precision&&console.warn("THREE.WebGLProgram.getParameters:",F.precision,"not supported, using",S,"instead."));const Ce=me.morphAttributes.position||me.morphAttributes.normal||me.morphAttributes.color,it=Ce!==void 0?Ce.length:0;let Se=0;me.morphAttributes.position!==void 0&&(Se=1),me.morphAttributes.normal!==void 0&&(Se=2),me.morphAttributes.color!==void 0&&(Se=3);let Oe,ct,_t,Nt;if(oe){const si=g0[oe];Oe=si.vertexShader,ct=si.fragmentShader}else Oe=F.vertexShader,ct=F.fragmentShader,g.update(F),_t=g.getVertexShaderID(F),Nt=g.getFragmentShaderID(F);const Je=t.getRenderTarget(),ot=J.isInstancedMesh===!0,fn=J.isBatchedMesh===!0,Ht=!!F.map,Re=!!F.matcap,Lt=!!ye,mt=!!F.aoMap,ht=!!F.lightMap,at=!!F.bumpMap,Mt=!!F.normalMap,Ot=!!F.displacementMap,It=!!F.emissiveMap,Zt=!!F.metalnessMap,ke=!!F.roughnessMap,he=F.anisotropy>0,tt=F.clearcoat>0,wt=F.iridescence>0,St=F.sheen>0,De=F.transmission>0,nt=he&&!!F.anisotropyMap,Et=tt&&!!F.clearcoatMap,Qe=tt&&!!F.clearcoatNormalMap,lt=tt&&!!F.clearcoatRoughnessMap,xt=wt&&!!F.iridescenceMap,ft=wt&&!!F.iridescenceThicknessMap,Cn=St&&!!F.sheenColorMap,Rn=St&&!!F.sheenRoughnessMap,dn=!!F.specularMap,Qt=!!F.specularColorMap,vn=!!F.specularIntensityMap,Yn=De&&!!F.transmissionMap,ir=De&&!!F.thicknessMap,li=!!F.gradientMap,st=!!F.alphaMap,sn=F.alphaTest>0,gt=!!F.alphaHash,on=!!F.extensions;let _n=ep;F.toneMapped&&(Je===null||Je.isXRRenderTarget===!0)&&(_n=t.toneMapping);const Sr={isWebGL2:b,shaderID:oe,shaderType:F.type,shaderName:F.name,vertexShader:Oe,fragmentShader:ct,defines:F.defines,customVertexShaderID:_t,customFragmentShaderID:Nt,isRawShaderMaterial:F.isRawShaderMaterial===!0,glslVersion:F.glslVersion,precision:S,batching:fn,instancing:ot,instancingColor:ot&&J.instanceColor!==null,instancingMorph:ot&&J.morphTexture!==null,supportsVertexTextures:E,outputColorSpace:Je===null?t.outputColorSpace:Je.isXRRenderTarget===!0?Je.texture.colorSpace:xp,alphaToCoverage:!!F.alphaToCoverage,map:Ht,matcap:Re,envMap:Lt,envMapMode:Lt&&ye.mapping,envMapCubeUVHeight:pe,aoMap:mt,lightMap:ht,bumpMap:at,normalMap:Mt,displacementMap:E&&Ot,emissiveMap:It,normalMapObjectSpace:Mt&&F.normalMapType===Abe,normalMapTangentSpace:Mt&&F.normalMapType===Dm,metalnessMap:Zt,roughnessMap:ke,anisotropy:he,anisotropyMap:nt,clearcoat:tt,clearcoatMap:Et,clearcoatNormalMap:Qe,clearcoatRoughnessMap:lt,iridescence:wt,iridescenceMap:xt,iridescenceThicknessMap:ft,sheen:St,sheenColorMap:Cn,sheenRoughnessMap:Rn,specularMap:dn,specularColorMap:Qt,specularIntensityMap:vn,transmission:De,transmissionMap:Yn,thicknessMap:ir,gradientMap:li,opaque:F.transparent===!1&&F.blending===Bg&&F.alphaToCoverage===!1,alphaMap:st,alphaTest:sn,alphaHash:gt,combine:F.combine,mapUv:Ht&&k(F.map.channel),aoMapUv:mt&&k(F.aoMap.channel),lightMapUv:ht&&k(F.lightMap.channel),bumpMapUv:at&&k(F.bumpMap.channel),normalMapUv:Mt&&k(F.normalMap.channel),displacementMapUv:Ot&&k(F.displacementMap.channel),emissiveMapUv:It&&k(F.emissiveMap.channel),metalnessMapUv:Zt&&k(F.metalnessMap.channel),roughnessMapUv:ke&&k(F.roughnessMap.channel),anisotropyMapUv:nt&&k(F.anisotropyMap.channel),clearcoatMapUv:Et&&k(F.clearcoatMap.channel),clearcoatNormalMapUv:Qe&&k(F.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:lt&&k(F.clearcoatRoughnessMap.channel),iridescenceMapUv:xt&&k(F.iridescenceMap.channel),iridescenceThicknessMapUv:ft&&k(F.iridescenceThicknessMap.channel),sheenColorMapUv:Cn&&k(F.sheenColorMap.channel),sheenRoughnessMapUv:Rn&&k(F.sheenRoughnessMap.channel),specularMapUv:dn&&k(F.specularMap.channel),specularColorMapUv:Qt&&k(F.specularColorMap.channel),specularIntensityMapUv:vn&&k(F.specularIntensityMap.channel),transmissionMapUv:Yn&&k(F.transmissionMap.channel),thicknessMapUv:ir&&k(F.thicknessMap.channel),alphaMapUv:st&&k(F.alphaMap.channel),vertexTangents:!!me.attributes.tangent&&(Mt||he),vertexColors:F.vertexColors,vertexAlphas:F.vertexColors===!0&&!!me.attributes.color&&me.attributes.color.itemSize===4,pointsUvs:J.isPoints===!0&&!!me.attributes.uv&&(Ht||st),fog:!!le,useFog:F.fog===!0,fogExp2:!!le&&le.isFogExp2,flatShading:F.flatShading===!0,sizeAttenuation:F.sizeAttenuation===!0,logarithmicDepthBuffer:w,skinning:J.isSkinnedMesh===!0,morphTargets:me.morphAttributes.position!==void 0,morphNormals:me.morphAttributes.normal!==void 0,morphColors:me.morphAttributes.color!==void 0,morphTargetsCount:it,morphTextureStride:Se,numDirLights:q.directional.length,numPointLights:q.point.length,numSpotLights:q.spot.length,numSpotLightMaps:q.spotLightMap.length,numRectAreaLights:q.rectArea.length,numHemiLights:q.hemi.length,numDirLightShadows:q.directionalShadowMap.length,numPointLightShadows:q.pointShadowMap.length,numSpotLightShadows:q.spotShadowMap.length,numSpotLightShadowsWithMaps:q.numSpotLightShadowsWithMaps,numLightProbes:q.numLightProbes,numClippingPlanes:d.numPlanes,numClipIntersection:d.numIntersection,dithering:F.dithering,shadowMapEnabled:t.shadowMap.enabled&&fe.length>0,shadowMapType:t.shadowMap.type,toneMapping:_n,useLegacyLights:t._useLegacyLights,decodeVideoTexture:Ht&&F.map.isVideoTexture===!0&&cs.getTransfer(F.map.colorSpace)===Ps,premultipliedAlpha:F.premultipliedAlpha,doubleSided:F.side===yd,flipSided:F.side===Zl,useDepthPacking:F.depthPacking>=0,depthPacking:F.depthPacking||0,index0AttributeName:F.index0AttributeName,extensionDerivatives:on&&F.extensions.derivatives===!0,extensionFragDepth:on&&F.extensions.fragDepth===!0,extensionDrawBuffers:on&&F.extensions.drawBuffers===!0,extensionShaderTextureLOD:on&&F.extensions.shaderTextureLOD===!0,extensionClipCullDistance:on&&F.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:on&&F.extensions.multiDraw===!0&&i.has("WEBGL_multi_draw"),rendererExtensionFragDepth:b||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:b||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:b||i.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:F.customProgramCacheKey()};return Sr.vertexUv1s=v.has(1),Sr.vertexUv2s=v.has(2),Sr.vertexUv3s=v.has(3),v.clear(),Sr}function C(F){const q=[];if(F.shaderID?q.push(F.shaderID):(q.push(F.customVertexShaderID),q.push(F.customFragmentShaderID)),F.defines!==void 0)for(const fe in F.defines)q.push(fe),q.push(F.defines[fe]);return F.isRawShaderMaterial===!1&&(P(q,F),O(q,F),q.push(t.outputColorSpace)),q.push(F.customProgramCacheKey),q.join()}function P(F,q){F.push(q.precision),F.push(q.outputColorSpace),F.push(q.envMapMode),F.push(q.envMapCubeUVHeight),F.push(q.mapUv),F.push(q.alphaMapUv),F.push(q.lightMapUv),F.push(q.aoMapUv),F.push(q.bumpMapUv),F.push(q.normalMapUv),F.push(q.displacementMapUv),F.push(q.emissiveMapUv),F.push(q.metalnessMapUv),F.push(q.roughnessMapUv),F.push(q.anisotropyMapUv),F.push(q.clearcoatMapUv),F.push(q.clearcoatNormalMapUv),F.push(q.clearcoatRoughnessMapUv),F.push(q.iridescenceMapUv),F.push(q.iridescenceThicknessMapUv),F.push(q.sheenColorMapUv),F.push(q.sheenRoughnessMapUv),F.push(q.specularMapUv),F.push(q.specularColorMapUv),F.push(q.specularIntensityMapUv),F.push(q.transmissionMapUv),F.push(q.thicknessMapUv),F.push(q.combine),F.push(q.fogExp2),F.push(q.sizeAttenuation),F.push(q.morphTargetsCount),F.push(q.morphAttributeCount),F.push(q.numDirLights),F.push(q.numPointLights),F.push(q.numSpotLights),F.push(q.numSpotLightMaps),F.push(q.numHemiLights),F.push(q.numRectAreaLights),F.push(q.numDirLightShadows),F.push(q.numPointLightShadows),F.push(q.numSpotLightShadows),F.push(q.numSpotLightShadowsWithMaps),F.push(q.numLightProbes),F.push(q.shadowMapType),F.push(q.toneMapping),F.push(q.numClippingPlanes),F.push(q.numClipIntersection),F.push(q.depthPacking)}function O(F,q){p.disableAll(),q.isWebGL2&&p.enable(0),q.supportsVertexTextures&&p.enable(1),q.instancing&&p.enable(2),q.instancingColor&&p.enable(3),q.instancingMorph&&p.enable(4),q.matcap&&p.enable(5),q.envMap&&p.enable(6),q.normalMapObjectSpace&&p.enable(7),q.normalMapTangentSpace&&p.enable(8),q.clearcoat&&p.enable(9),q.iridescence&&p.enable(10),q.alphaTest&&p.enable(11),q.vertexColors&&p.enable(12),q.vertexAlphas&&p.enable(13),q.vertexUv1s&&p.enable(14),q.vertexUv2s&&p.enable(15),q.vertexUv3s&&p.enable(16),q.vertexTangents&&p.enable(17),q.anisotropy&&p.enable(18),q.alphaHash&&p.enable(19),q.batching&&p.enable(20),F.push(p.mask),p.disableAll(),q.fog&&p.enable(0),q.useFog&&p.enable(1),q.flatShading&&p.enable(2),q.logarithmicDepthBuffer&&p.enable(3),q.skinning&&p.enable(4),q.morphTargets&&p.enable(5),q.morphNormals&&p.enable(6),q.morphColors&&p.enable(7),q.premultipliedAlpha&&p.enable(8),q.shadowMapEnabled&&p.enable(9),q.useLegacyLights&&p.enable(10),q.doubleSided&&p.enable(11),q.flipSided&&p.enable(12),q.useDepthPacking&&p.enable(13),q.dithering&&p.enable(14),q.transmission&&p.enable(15),q.sheen&&p.enable(16),q.opaque&&p.enable(17),q.pointsUvs&&p.enable(18),q.decodeVideoTexture&&p.enable(19),q.alphaToCoverage&&p.enable(20),F.push(p.mask)}function L(F){const q=M[F.type];let fe;if(q){const ue=g0[q];fe=Nbe.clone(ue.uniforms)}else fe=F.uniforms;return fe}function B(F,q){let fe;for(let ue=0,J=_.length;ue<J;ue++){const le=_[ue];if(le.cacheKey===q){fe=le,++fe.usedTimes;break}}return fe===void 0&&(fe=new Cut(t,q,F,l),_.push(fe)),fe}function V(F){if(--F.usedTimes===0){const q=_.indexOf(F);_[q]=_[_.length-1],_.pop(),F.destroy()}}function G(F){g.remove(F)}function j(){g.dispose()}return{getParameters:x,getProgramCacheKey:C,getUniforms:L,acquireProgram:B,releaseProgram:V,releaseShaderCache:G,programs:_,dispose:j}}function Iut(){let t=new WeakMap;function e(l){let d=t.get(l);return d===void 0&&(d={},t.set(l,d)),d}function n(l){t.delete(l)}function i(l,d,p){t.get(l)[d]=p}function o(){t=new WeakMap}return{get:e,remove:n,update:i,dispose:o}}function Nut(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function vae(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function _ae(){const t=[];let e=0;const n=[],i=[],o=[];function l(){e=0,n.length=0,i.length=0,o.length=0}function d(b,w,E,S,M,k){let x=t[e];return x===void 0?(x={id:b.id,object:b,geometry:w,material:E,groupOrder:S,renderOrder:b.renderOrder,z:M,group:k},t[e]=x):(x.id=b.id,x.object=b,x.geometry=w,x.material=E,x.groupOrder=S,x.renderOrder=b.renderOrder,x.z=M,x.group=k),e++,x}function p(b,w,E,S,M,k){const x=d(b,w,E,S,M,k);E.transmission>0?i.push(x):E.transparent===!0?o.push(x):n.push(x)}function g(b,w,E,S,M,k){const x=d(b,w,E,S,M,k);E.transmission>0?i.unshift(x):E.transparent===!0?o.unshift(x):n.unshift(x)}function v(b,w){n.length>1&&n.sort(b||Nut),i.length>1&&i.sort(w||vae),o.length>1&&o.sort(w||vae)}function _(){for(let b=e,w=t.length;b<w;b++){const E=t[b];if(E.id===null)break;E.id=null,E.object=null,E.geometry=null,E.material=null,E.group=null}}return{opaque:n,transmissive:i,transparent:o,init:l,push:p,unshift:g,finish:_,sort:v}}function Lut(){let t=new WeakMap;function e(i,o){const l=t.get(i);let d;return l===void 0?(d=new _ae,t.set(i,[d])):o>=l.length?(d=new _ae,l.push(d)):d=l[o],d}function n(){t=new WeakMap}return{get:e,dispose:n}}function zut(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new Le,color:new Pn};break;case"SpotLight":n={position:new Le,direction:new Le,color:new Pn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Le,color:new Pn,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Le,skyColor:new Pn,groundColor:new Pn};break;case"RectAreaLight":n={color:new Pn,position:new Le,halfWidth:new Le,halfHeight:new Le};break}return t[e.id]=n,n}}}function But(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new $t};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new $t};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new $t,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let Uut=0;function Fut(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function Vut(t,e){const n=new zut,i=But(),o={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let _=0;_<9;_++)o.probe.push(new Le);const l=new Le,d=new cr,p=new cr;function g(_,b){let w=0,E=0,S=0;for(let fe=0;fe<9;fe++)o.probe[fe].set(0,0,0);let M=0,k=0,x=0,C=0,P=0,O=0,L=0,B=0,V=0,G=0,j=0;_.sort(Fut);const F=b===!0?Math.PI:1;for(let fe=0,ue=_.length;fe<ue;fe++){const J=_[fe],le=J.color,me=J.intensity,be=J.distance,ye=J.shadow&&J.shadow.map?J.shadow.map.texture:null;if(J.isAmbientLight)w+=le.r*me*F,E+=le.g*me*F,S+=le.b*me*F;else if(J.isLightProbe){for(let pe=0;pe<9;pe++)o.probe[pe].addScaledVector(J.sh.coefficients[pe],me);j++}else if(J.isDirectionalLight){const pe=n.get(J);if(pe.color.copy(J.color).multiplyScalar(J.intensity*F),J.castShadow){const oe=J.shadow,Ce=i.get(J);Ce.shadowBias=oe.bias,Ce.shadowNormalBias=oe.normalBias,Ce.shadowRadius=oe.radius,Ce.shadowMapSize=oe.mapSize,o.directionalShadow[M]=Ce,o.directionalShadowMap[M]=ye,o.directionalShadowMatrix[M]=J.shadow.matrix,O++}o.directional[M]=pe,M++}else if(J.isSpotLight){const pe=n.get(J);pe.position.setFromMatrixPosition(J.matrixWorld),pe.color.copy(le).multiplyScalar(me*F),pe.distance=be,pe.coneCos=Math.cos(J.angle),pe.penumbraCos=Math.cos(J.angle*(1-J.penumbra)),pe.decay=J.decay,o.spot[x]=pe;const oe=J.shadow;if(J.map&&(o.spotLightMap[V]=J.map,V++,oe.updateMatrices(J),J.castShadow&&G++),o.spotLightMatrix[x]=oe.matrix,J.castShadow){const Ce=i.get(J);Ce.shadowBias=oe.bias,Ce.shadowNormalBias=oe.normalBias,Ce.shadowRadius=oe.radius,Ce.shadowMapSize=oe.mapSize,o.spotShadow[x]=Ce,o.spotShadowMap[x]=ye,B++}x++}else if(J.isRectAreaLight){const pe=n.get(J);pe.color.copy(le).multiplyScalar(me),pe.halfWidth.set(J.width*.5,0,0),pe.halfHeight.set(0,J.height*.5,0),o.rectArea[C]=pe,C++}else if(J.isPointLight){const pe=n.get(J);if(pe.color.copy(J.color).multiplyScalar(J.intensity*F),pe.distance=J.distance,pe.decay=J.decay,J.castShadow){const oe=J.shadow,Ce=i.get(J);Ce.shadowBias=oe.bias,Ce.shadowNormalBias=oe.normalBias,Ce.shadowRadius=oe.radius,Ce.shadowMapSize=oe.mapSize,Ce.shadowCameraNear=oe.camera.near,Ce.shadowCameraFar=oe.camera.far,o.pointShadow[k]=Ce,o.pointShadowMap[k]=ye,o.pointShadowMatrix[k]=J.shadow.matrix,L++}o.point[k]=pe,k++}else if(J.isHemisphereLight){const pe=n.get(J);pe.skyColor.copy(J.color).multiplyScalar(me*F),pe.groundColor.copy(J.groundColor).multiplyScalar(me*F),o.hemi[P]=pe,P++}}C>0&&(e.isWebGL2?t.has("OES_texture_float_linear")===!0?(o.rectAreaLTC1=hn.LTC_FLOAT_1,o.rectAreaLTC2=hn.LTC_FLOAT_2):(o.rectAreaLTC1=hn.LTC_HALF_1,o.rectAreaLTC2=hn.LTC_HALF_2):t.has("OES_texture_float_linear")===!0?(o.rectAreaLTC1=hn.LTC_FLOAT_1,o.rectAreaLTC2=hn.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(o.rectAreaLTC1=hn.LTC_HALF_1,o.rectAreaLTC2=hn.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),o.ambient[0]=w,o.ambient[1]=E,o.ambient[2]=S;const q=o.hash;(q.directionalLength!==M||q.pointLength!==k||q.spotLength!==x||q.rectAreaLength!==C||q.hemiLength!==P||q.numDirectionalShadows!==O||q.numPointShadows!==L||q.numSpotShadows!==B||q.numSpotMaps!==V||q.numLightProbes!==j)&&(o.directional.length=M,o.spot.length=x,o.rectArea.length=C,o.point.length=k,o.hemi.length=P,o.directionalShadow.length=O,o.directionalShadowMap.length=O,o.pointShadow.length=L,o.pointShadowMap.length=L,o.spotShadow.length=B,o.spotShadowMap.length=B,o.directionalShadowMatrix.length=O,o.pointShadowMatrix.length=L,o.spotLightMatrix.length=B+V-G,o.spotLightMap.length=V,o.numSpotLightShadowsWithMaps=G,o.numLightProbes=j,q.directionalLength=M,q.pointLength=k,q.spotLength=x,q.rectAreaLength=C,q.hemiLength=P,q.numDirectionalShadows=O,q.numPointShadows=L,q.numSpotShadows=B,q.numSpotMaps=V,q.numLightProbes=j,o.version=Uut++)}function v(_,b){let w=0,E=0,S=0,M=0,k=0;const x=b.matrixWorldInverse;for(let C=0,P=_.length;C<P;C++){const O=_[C];if(O.isDirectionalLight){const L=o.directional[w];L.direction.setFromMatrixPosition(O.matrixWorld),l.setFromMatrixPosition(O.target.matrixWorld),L.direction.sub(l),L.direction.transformDirection(x),w++}else if(O.isSpotLight){const L=o.spot[S];L.position.setFromMatrixPosition(O.matrixWorld),L.position.applyMatrix4(x),L.direction.setFromMatrixPosition(O.matrixWorld),l.setFromMatrixPosition(O.target.matrixWorld),L.direction.sub(l),L.direction.transformDirection(x),S++}else if(O.isRectAreaLight){const L=o.rectArea[M];L.position.setFromMatrixPosition(O.matrixWorld),L.position.applyMatrix4(x),p.identity(),d.copy(O.matrixWorld),d.premultiply(x),p.extractRotation(d),L.halfWidth.set(O.width*.5,0,0),L.halfHeight.set(0,O.height*.5,0),L.halfWidth.applyMatrix4(p),L.halfHeight.applyMatrix4(p),M++}else if(O.isPointLight){const L=o.point[E];L.position.setFromMatrixPosition(O.matrixWorld),L.position.applyMatrix4(x),E++}else if(O.isHemisphereLight){const L=o.hemi[k];L.direction.setFromMatrixPosition(O.matrixWorld),L.direction.transformDirection(x),k++}}}return{setup:g,setupView:v,state:o}}function yae(t,e){const n=new Vut(t,e),i=[],o=[];function l(){i.length=0,o.length=0}function d(b){i.push(b)}function p(b){o.push(b)}function g(b){n.setup(i,b)}function v(b){n.setupView(i,b)}return{init:l,state:{lightsArray:i,shadowsArray:o,lights:n},setupLights:g,setupLightsView:v,pushLight:d,pushShadow:p}}function Gut(t,e){let n=new WeakMap;function i(l,d=0){const p=n.get(l);let g;return p===void 0?(g=new yae(t,e),n.set(l,[g])):d>=p.length?(g=new yae(t,e),p.push(g)):g=p[d],g}function o(){n=new WeakMap}return{get:i,dispose:o}}class zQ extends Dl{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=ybe,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class BQ extends Dl{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const jut=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Hut=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function $ut(t,e,n){let i=new Ex;const o=new $t,l=new $t,d=new fs,p=new zQ({depthPacking:bbe}),g=new BQ,v={},_=n.maxTextureSize,b={[mp]:Zl,[Zl]:mp,[yd]:yd},w=new z0({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new $t},radius:{value:4}},vertexShader:jut,fragmentShader:Hut}),E=w.clone();E.defines.HORIZONTAL_PASS=1;const S=new Kr;S.setAttribute("position",new _s(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const M=new jo(S,w),k=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=yQ;let x=this.type;this.render=function(B,V,G){if(k.enabled===!1||k.autoUpdate===!1&&k.needsUpdate===!1||B.length===0)return;const j=t.getRenderTarget(),F=t.getActiveCubeFace(),q=t.getActiveMipmapLevel(),fe=t.state;fe.setBlending(Jh),fe.buffers.color.setClear(1,1,1,1),fe.buffers.depth.setTest(!0),fe.setScissorTest(!1);const ue=x!==hd&&this.type===hd,J=x===hd&&this.type!==hd;for(let le=0,me=B.length;le<me;le++){const be=B[le],ye=be.shadow;if(ye===void 0){console.warn("THREE.WebGLShadowMap:",be,"has no shadow.");continue}if(ye.autoUpdate===!1&&ye.needsUpdate===!1)continue;o.copy(ye.mapSize);const pe=ye.getFrameExtents();if(o.multiply(pe),l.copy(ye.mapSize),(o.x>_||o.y>_)&&(o.x>_&&(l.x=Math.floor(_/pe.x),o.x=l.x*pe.x,ye.mapSize.x=l.x),o.y>_&&(l.y=Math.floor(_/pe.y),o.y=l.y*pe.y,ye.mapSize.y=l.y)),ye.map===null||ue===!0||J===!0){const Ce=this.type!==hd?{minFilter:ko,magFilter:ko}:{};ye.map!==null&&ye.map.dispose(),ye.map=new L0(o.x,o.y,Ce),ye.map.texture.name=be.name+".shadowMap",ye.camera.updateProjectionMatrix()}t.setRenderTarget(ye.map),t.clear();const oe=ye.getViewportCount();for(let Ce=0;Ce<oe;Ce++){const it=ye.getViewport(Ce);d.set(l.x*it.x,l.y*it.y,l.x*it.z,l.y*it.w),fe.viewport(d),ye.updateMatrices(be,Ce),i=ye.getFrustum(),O(V,G,ye.camera,be,this.type)}ye.isPointLightShadow!==!0&&this.type===hd&&C(ye,G),ye.needsUpdate=!1}x=this.type,k.needsUpdate=!1,t.setRenderTarget(j,F,q)};function C(B,V){const G=e.update(M);w.defines.VSM_SAMPLES!==B.blurSamples&&(w.defines.VSM_SAMPLES=B.blurSamples,E.defines.VSM_SAMPLES=B.blurSamples,w.needsUpdate=!0,E.needsUpdate=!0),B.mapPass===null&&(B.mapPass=new L0(o.x,o.y)),w.uniforms.shadow_pass.value=B.map.texture,w.uniforms.resolution.value=B.mapSize,w.uniforms.radius.value=B.radius,t.setRenderTarget(B.mapPass),t.clear(),t.renderBufferDirect(V,null,G,w,M,null),E.uniforms.shadow_pass.value=B.mapPass.texture,E.uniforms.resolution.value=B.mapSize,E.uniforms.radius.value=B.radius,t.setRenderTarget(B.map),t.clear(),t.renderBufferDirect(V,null,G,E,M,null)}function P(B,V,G,j){let F=null;const q=G.isPointLight===!0?B.customDistanceMaterial:B.customDepthMaterial;if(q!==void 0)F=q;else if(F=G.isPointLight===!0?g:p,t.localClippingEnabled&&V.clipShadows===!0&&Array.isArray(V.clippingPlanes)&&V.clippingPlanes.length!==0||V.displacementMap&&V.displacementScale!==0||V.alphaMap&&V.alphaTest>0||V.map&&V.alphaTest>0){const fe=F.uuid,ue=V.uuid;let J=v[fe];J===void 0&&(J={},v[fe]=J);let le=J[ue];le===void 0&&(le=F.clone(),J[ue]=le,V.addEventListener("dispose",L)),F=le}if(F.visible=V.visible,F.wireframe=V.wireframe,j===hd?F.side=V.shadowSide!==null?V.shadowSide:V.side:F.side=V.shadowSide!==null?V.shadowSide:b[V.side],F.alphaMap=V.alphaMap,F.alphaTest=V.alphaTest,F.map=V.map,F.clipShadows=V.clipShadows,F.clippingPlanes=V.clippingPlanes,F.clipIntersection=V.clipIntersection,F.displacementMap=V.displacementMap,F.displacementScale=V.displacementScale,F.displacementBias=V.displacementBias,F.wireframeLinewidth=V.wireframeLinewidth,F.linewidth=V.linewidth,G.isPointLight===!0&&F.isMeshDistanceMaterial===!0){const fe=t.properties.get(F);fe.light=G}return F}function O(B,V,G,j,F){if(B.visible===!1)return;if(B.layers.test(V.layers)&&(B.isMesh||B.isLine||B.isPoints)&&(B.castShadow||B.receiveShadow&&F===hd)&&(!B.frustumCulled||i.intersectsObject(B))){B.modelViewMatrix.multiplyMatrices(G.matrixWorldInverse,B.matrixWorld);const ue=e.update(B),J=B.material;if(Array.isArray(J)){const le=ue.groups;for(let me=0,be=le.length;me<be;me++){const ye=le[me],pe=J[ye.materialIndex];if(pe&&pe.visible){const oe=P(B,pe,j,F);B.onBeforeShadow(t,B,V,G,ue,oe,ye),t.renderBufferDirect(G,null,ue,oe,B,ye),B.onAfterShadow(t,B,V,G,ue,oe,ye)}}}else if(J.visible){const le=P(B,J,j,F);B.onBeforeShadow(t,B,V,G,ue,le,null),t.renderBufferDirect(G,null,ue,le,B,null),B.onAfterShadow(t,B,V,G,ue,le,null)}}const fe=B.children;for(let ue=0,J=fe.length;ue<J;ue++)O(fe[ue],V,G,j,F)}function L(B){B.target.removeEventListener("dispose",L);for(const G in v){const j=v[G],F=B.target.uuid;F in j&&(j[F].dispose(),delete j[F])}}}function Wut(t,e,n){const i=n.isWebGL2;function o(){let st=!1;const sn=new fs;let gt=null;const on=new fs(0,0,0,0);return{setMask:function(_n){gt!==_n&&!st&&(t.colorMask(_n,_n,_n,_n),gt=_n)},setLocked:function(_n){st=_n},setClear:function(_n,Sr,si,mr,gi){gi===!0&&(_n*=mr,Sr*=mr,si*=mr),sn.set(_n,Sr,si,mr),on.equals(sn)===!1&&(t.clearColor(_n,Sr,si,mr),on.copy(sn))},reset:function(){st=!1,gt=null,on.set(-1,0,0,0)}}}function l(){let st=!1,sn=null,gt=null,on=null;return{setTest:function(_n){_n?ot(t.DEPTH_TEST):fn(t.DEPTH_TEST)},setMask:function(_n){sn!==_n&&!st&&(t.depthMask(_n),sn=_n)},setFunc:function(_n){if(gt!==_n){switch(_n){case Wye:t.depthFunc(t.NEVER);break;case Yye:t.depthFunc(t.ALWAYS);break;case qye:t.depthFunc(t.LESS);break;case NT:t.depthFunc(t.LEQUAL);break;case Xye:t.depthFunc(t.EQUAL);break;case Zye:t.depthFunc(t.GEQUAL);break;case Qye:t.depthFunc(t.GREATER);break;case Kye:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}gt=_n}},setLocked:function(_n){st=_n},setClear:function(_n){on!==_n&&(t.clearDepth(_n),on=_n)},reset:function(){st=!1,sn=null,gt=null,on=null}}}function d(){let st=!1,sn=null,gt=null,on=null,_n=null,Sr=null,si=null,mr=null,gi=null;return{setTest:function(qr){st||(qr?ot(t.STENCIL_TEST):fn(t.STENCIL_TEST))},setMask:function(qr){sn!==qr&&!st&&(t.stencilMask(qr),sn=qr)},setFunc:function(qr,ji,Ks){(gt!==qr||on!==ji||_n!==Ks)&&(t.stencilFunc(qr,ji,Ks),gt=qr,on=ji,_n=Ks)},setOp:function(qr,ji,Ks){(Sr!==qr||si!==ji||mr!==Ks)&&(t.stencilOp(qr,ji,Ks),Sr=qr,si=ji,mr=Ks)},setLocked:function(qr){st=qr},setClear:function(qr){gi!==qr&&(t.clearStencil(qr),gi=qr)},reset:function(){st=!1,sn=null,gt=null,on=null,_n=null,Sr=null,si=null,mr=null,gi=null}}}const p=new o,g=new l,v=new d,_=new WeakMap,b=new WeakMap;let w={},E={},S=new WeakMap,M=[],k=null,x=!1,C=null,P=null,O=null,L=null,B=null,V=null,G=null,j=new Pn(0,0,0),F=0,q=!1,fe=null,ue=null,J=null,le=null,me=null;const be=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ye=!1,pe=0;const oe=t.getParameter(t.VERSION);oe.indexOf("WebGL")!==-1?(pe=parseFloat(/^WebGL (\d)/.exec(oe)[1]),ye=pe>=1):oe.indexOf("OpenGL ES")!==-1&&(pe=parseFloat(/^OpenGL ES (\d)/.exec(oe)[1]),ye=pe>=2);let Ce=null,it={};const Se=t.getParameter(t.SCISSOR_BOX),Oe=t.getParameter(t.VIEWPORT),ct=new fs().fromArray(Se),_t=new fs().fromArray(Oe);function Nt(st,sn,gt,on){const _n=new Uint8Array(4),Sr=t.createTexture();t.bindTexture(st,Sr),t.texParameteri(st,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(st,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let si=0;si<gt;si++)i&&(st===t.TEXTURE_3D||st===t.TEXTURE_2D_ARRAY)?t.texImage3D(sn,0,t.RGBA,1,1,on,0,t.RGBA,t.UNSIGNED_BYTE,_n):t.texImage2D(sn+si,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,_n);return Sr}const Je={};Je[t.TEXTURE_2D]=Nt(t.TEXTURE_2D,t.TEXTURE_2D,1),Je[t.TEXTURE_CUBE_MAP]=Nt(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(Je[t.TEXTURE_2D_ARRAY]=Nt(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),Je[t.TEXTURE_3D]=Nt(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),p.setClear(0,0,0,1),g.setClear(1),v.setClear(0),ot(t.DEPTH_TEST),g.setFunc(NT),Ot(!1),It(m$),ot(t.CULL_FACE),at(Jh);function ot(st){w[st]!==!0&&(t.enable(st),w[st]=!0)}function fn(st){w[st]!==!1&&(t.disable(st),w[st]=!1)}function Ht(st,sn){return E[st]!==sn?(t.bindFramebuffer(st,sn),E[st]=sn,i&&(st===t.DRAW_FRAMEBUFFER&&(E[t.FRAMEBUFFER]=sn),st===t.FRAMEBUFFER&&(E[t.DRAW_FRAMEBUFFER]=sn)),!0):!1}function Re(st,sn){let gt=M,on=!1;if(st){gt=S.get(sn),gt===void 0&&(gt=[],S.set(sn,gt));const _n=st.textures;if(gt.length!==_n.length||gt[0]!==t.COLOR_ATTACHMENT0){for(let Sr=0,si=_n.length;Sr<si;Sr++)gt[Sr]=t.COLOR_ATTACHMENT0+Sr;gt.length=_n.length,on=!0}}else gt[0]!==t.BACK&&(gt[0]=t.BACK,on=!0);if(on)if(n.isWebGL2)t.drawBuffers(gt);else if(e.has("WEBGL_draw_buffers")===!0)e.get("WEBGL_draw_buffers").drawBuffersWEBGL(gt);else throw new Error("THREE.WebGLState: Usage of gl.drawBuffers() require WebGL2 or WEBGL_draw_buffers extension")}function Lt(st){return k!==st?(t.useProgram(st),k=st,!0):!1}const mt={[L2]:t.FUNC_ADD,[Rye]:t.FUNC_SUBTRACT,[Dye]:t.FUNC_REVERSE_SUBTRACT};if(i)mt[y$]=t.MIN,mt[b$]=t.MAX;else{const st=e.get("EXT_blend_minmax");st!==null&&(mt[y$]=st.MIN_EXT,mt[b$]=st.MAX_EXT)}const ht={[Oye]:t.ZERO,[Iye]:t.ONE,[Nye]:t.SRC_COLOR,[QO]:t.SRC_ALPHA,[Vye]:t.SRC_ALPHA_SATURATE,[Uye]:t.DST_COLOR,[zye]:t.DST_ALPHA,[Lye]:t.ONE_MINUS_SRC_COLOR,[KO]:t.ONE_MINUS_SRC_ALPHA,[Fye]:t.ONE_MINUS_DST_COLOR,[Bye]:t.ONE_MINUS_DST_ALPHA,[Gye]:t.CONSTANT_COLOR,[jye]:t.ONE_MINUS_CONSTANT_COLOR,[Hye]:t.CONSTANT_ALPHA,[$ye]:t.ONE_MINUS_CONSTANT_ALPHA};function at(st,sn,gt,on,_n,Sr,si,mr,gi,qr){if(st===Jh){x===!0&&(fn(t.BLEND),x=!1);return}if(x===!1&&(ot(t.BLEND),x=!0),st!==Pye){if(st!==C||qr!==q){if((P!==L2||B!==L2)&&(t.blendEquation(t.FUNC_ADD),P=L2,B=L2),qr)switch(st){case Bg:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case g$:t.blendFunc(t.ONE,t.ONE);break;case v$:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case _$:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",st);break}else switch(st){case Bg:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case g$:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case v$:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case _$:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",st);break}O=null,L=null,V=null,G=null,j.set(0,0,0),F=0,C=st,q=qr}return}_n=_n||sn,Sr=Sr||gt,si=si||on,(sn!==P||_n!==B)&&(t.blendEquationSeparate(mt[sn],mt[_n]),P=sn,B=_n),(gt!==O||on!==L||Sr!==V||si!==G)&&(t.blendFuncSeparate(ht[gt],ht[on],ht[Sr],ht[si]),O=gt,L=on,V=Sr,G=si),(mr.equals(j)===!1||gi!==F)&&(t.blendColor(mr.r,mr.g,mr.b,gi),j.copy(mr),F=gi),C=st,q=!1}function Mt(st,sn){st.side===yd?fn(t.CULL_FACE):ot(t.CULL_FACE);let gt=st.side===Zl;sn&&(gt=!gt),Ot(gt),st.blending===Bg&&st.transparent===!1?at(Jh):at(st.blending,st.blendEquation,st.blendSrc,st.blendDst,st.blendEquationAlpha,st.blendSrcAlpha,st.blendDstAlpha,st.blendColor,st.blendAlpha,st.premultipliedAlpha),g.setFunc(st.depthFunc),g.setTest(st.depthTest),g.setMask(st.depthWrite),p.setMask(st.colorWrite);const on=st.stencilWrite;v.setTest(on),on&&(v.setMask(st.stencilWriteMask),v.setFunc(st.stencilFunc,st.stencilRef,st.stencilFuncMask),v.setOp(st.stencilFail,st.stencilZFail,st.stencilZPass)),ke(st.polygonOffset,st.polygonOffsetFactor,st.polygonOffsetUnits),st.alphaToCoverage===!0?ot(t.SAMPLE_ALPHA_TO_COVERAGE):fn(t.SAMPLE_ALPHA_TO_COVERAGE)}function Ot(st){fe!==st&&(st?t.frontFace(t.CW):t.frontFace(t.CCW),fe=st)}function It(st){st!==Mye?(ot(t.CULL_FACE),st!==ue&&(st===m$?t.cullFace(t.BACK):st===kye?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):fn(t.CULL_FACE),ue=st}function Zt(st){st!==J&&(ye&&t.lineWidth(st),J=st)}function ke(st,sn,gt){st?(ot(t.POLYGON_OFFSET_FILL),(le!==sn||me!==gt)&&(t.polygonOffset(sn,gt),le=sn,me=gt)):fn(t.POLYGON_OFFSET_FILL)}function he(st){st?ot(t.SCISSOR_TEST):fn(t.SCISSOR_TEST)}function tt(st){st===void 0&&(st=t.TEXTURE0+be-1),Ce!==st&&(t.activeTexture(st),Ce=st)}function wt(st,sn,gt){gt===void 0&&(Ce===null?gt=t.TEXTURE0+be-1:gt=Ce);let on=it[gt];on===void 0&&(on={type:void 0,texture:void 0},it[gt]=on),(on.type!==st||on.texture!==sn)&&(Ce!==gt&&(t.activeTexture(gt),Ce=gt),t.bindTexture(st,sn||Je[st]),on.type=st,on.texture=sn)}function St(){const st=it[Ce];st!==void 0&&st.type!==void 0&&(t.bindTexture(st.type,null),st.type=void 0,st.texture=void 0)}function De(){try{t.compressedTexImage2D.apply(t,arguments)}catch(st){console.error("THREE.WebGLState:",st)}}function nt(){try{t.compressedTexImage3D.apply(t,arguments)}catch(st){console.error("THREE.WebGLState:",st)}}function Et(){try{t.texSubImage2D.apply(t,arguments)}catch(st){console.error("THREE.WebGLState:",st)}}function Qe(){try{t.texSubImage3D.apply(t,arguments)}catch(st){console.error("THREE.WebGLState:",st)}}function lt(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(st){console.error("THREE.WebGLState:",st)}}function xt(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(st){console.error("THREE.WebGLState:",st)}}function ft(){try{t.texStorage2D.apply(t,arguments)}catch(st){console.error("THREE.WebGLState:",st)}}function Cn(){try{t.texStorage3D.apply(t,arguments)}catch(st){console.error("THREE.WebGLState:",st)}}function Rn(){try{t.texImage2D.apply(t,arguments)}catch(st){console.error("THREE.WebGLState:",st)}}function dn(){try{t.texImage3D.apply(t,arguments)}catch(st){console.error("THREE.WebGLState:",st)}}function Qt(st){ct.equals(st)===!1&&(t.scissor(st.x,st.y,st.z,st.w),ct.copy(st))}function vn(st){_t.equals(st)===!1&&(t.viewport(st.x,st.y,st.z,st.w),_t.copy(st))}function Yn(st,sn){let gt=b.get(sn);gt===void 0&&(gt=new WeakMap,b.set(sn,gt));let on=gt.get(st);on===void 0&&(on=t.getUniformBlockIndex(sn,st.name),gt.set(st,on))}function ir(st,sn){const on=b.get(sn).get(st);_.get(sn)!==on&&(t.uniformBlockBinding(sn,on,st.__bindingPointIndex),_.set(sn,on))}function li(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),i===!0&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),w={},Ce=null,it={},E={},S=new WeakMap,M=[],k=null,x=!1,C=null,P=null,O=null,L=null,B=null,V=null,G=null,j=new Pn(0,0,0),F=0,q=!1,fe=null,ue=null,J=null,le=null,me=null,ct.set(0,0,t.canvas.width,t.canvas.height),_t.set(0,0,t.canvas.width,t.canvas.height),p.reset(),g.reset(),v.reset()}return{buffers:{color:p,depth:g,stencil:v},enable:ot,disable:fn,bindFramebuffer:Ht,drawBuffers:Re,useProgram:Lt,setBlending:at,setMaterial:Mt,setFlipSided:Ot,setCullFace:It,setLineWidth:Zt,setPolygonOffset:ke,setScissorTest:he,activeTexture:tt,bindTexture:wt,unbindTexture:St,compressedTexImage2D:De,compressedTexImage3D:nt,texImage2D:Rn,texImage3D:dn,updateUBOMapping:Yn,uniformBlockBinding:ir,texStorage2D:ft,texStorage3D:Cn,texSubImage2D:Et,texSubImage3D:Qe,compressedTexSubImage2D:lt,compressedTexSubImage3D:xt,scissor:Qt,viewport:vn,reset:li}}function Yut(t,e,n,i,o,l,d){const p=o.isWebGL2,g=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,v=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),_=new $t,b=new WeakMap;let w;const E=new WeakMap;let S=!1;try{S=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function M(ke,he){return S?new OffscreenCanvas(ke,he):qT("canvas")}function k(ke,he,tt,wt){let St=1;const De=Zt(ke);if((De.width>wt||De.height>wt)&&(St=wt/Math.max(De.width,De.height)),St<1||he===!0)if(typeof HTMLImageElement<"u"&&ke instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ke instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ke instanceof ImageBitmap||typeof VideoFrame<"u"&&ke instanceof VideoFrame){const nt=he?tI:Math.floor,Et=nt(St*De.width),Qe=nt(St*De.height);w===void 0&&(w=M(Et,Qe));const lt=tt?M(Et,Qe):w;return lt.width=Et,lt.height=Qe,lt.getContext("2d").drawImage(ke,0,0,Et,Qe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+De.width+"x"+De.height+") to ("+Et+"x"+Qe+")."),lt}else return"data"in ke&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+De.width+"x"+De.height+")."),ke;return ke}function x(ke){const he=Zt(ke);return X$(he.width)&&X$(he.height)}function C(ke){return p?!1:ke.wrapS!==xl||ke.wrapT!==xl||ke.minFilter!==ko&&ke.minFilter!==so}function P(ke,he){return ke.generateMipmaps&&he&&ke.minFilter!==ko&&ke.minFilter!==so}function O(ke){t.generateMipmap(ke)}function L(ke,he,tt,wt,St=!1){if(p===!1)return he;if(ke!==null){if(t[ke]!==void 0)return t[ke];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ke+"'")}let De=he;if(he===t.RED&&(tt===t.FLOAT&&(De=t.R32F),tt===t.HALF_FLOAT&&(De=t.R16F),tt===t.UNSIGNED_BYTE&&(De=t.R8)),he===t.RED_INTEGER&&(tt===t.UNSIGNED_BYTE&&(De=t.R8UI),tt===t.UNSIGNED_SHORT&&(De=t.R16UI),tt===t.UNSIGNED_INT&&(De=t.R32UI),tt===t.BYTE&&(De=t.R8I),tt===t.SHORT&&(De=t.R16I),tt===t.INT&&(De=t.R32I)),he===t.RG&&(tt===t.FLOAT&&(De=t.RG32F),tt===t.HALF_FLOAT&&(De=t.RG16F),tt===t.UNSIGNED_BYTE&&(De=t.RG8)),he===t.RG_INTEGER&&(tt===t.UNSIGNED_BYTE&&(De=t.RG8UI),tt===t.UNSIGNED_SHORT&&(De=t.RG16UI),tt===t.UNSIGNED_INT&&(De=t.RG32UI),tt===t.BYTE&&(De=t.RG8I),tt===t.SHORT&&(De=t.RG16I),tt===t.INT&&(De=t.RG32I)),he===t.RGBA){const nt=St?jT:cs.getTransfer(wt);tt===t.FLOAT&&(De=t.RGBA32F),tt===t.HALF_FLOAT&&(De=t.RGBA16F),tt===t.UNSIGNED_BYTE&&(De=nt===Ps?t.SRGB8_ALPHA8:t.RGBA8),tt===t.UNSIGNED_SHORT_4_4_4_4&&(De=t.RGBA4),tt===t.UNSIGNED_SHORT_5_5_5_1&&(De=t.RGB5_A1)}return(De===t.R16F||De===t.R32F||De===t.RG16F||De===t.RG32F||De===t.RGBA16F||De===t.RGBA32F)&&e.get("EXT_color_buffer_float"),De}function B(ke,he,tt){return P(ke,tt)===!0||ke.isFramebufferTexture&&ke.minFilter!==ko&&ke.minFilter!==so?Math.log2(Math.max(he.width,he.height))+1:ke.mipmaps!==void 0&&ke.mipmaps.length>0?ke.mipmaps.length:ke.isCompressedTexture&&Array.isArray(ke.image)?he.mipmaps.length:1}function V(ke){return ke===ko||ke===JO||ke===mg?t.NEAREST:t.LINEAR}function G(ke){const he=ke.target;he.removeEventListener("dispose",G),F(he),he.isVideoTexture&&b.delete(he)}function j(ke){const he=ke.target;he.removeEventListener("dispose",j),fe(he)}function F(ke){const he=i.get(ke);if(he.__webglInit===void 0)return;const tt=ke.source,wt=E.get(tt);if(wt){const St=wt[he.__cacheKey];St.usedTimes--,St.usedTimes===0&&q(ke),Object.keys(wt).length===0&&E.delete(tt)}i.remove(ke)}function q(ke){const he=i.get(ke);t.deleteTexture(he.__webglTexture);const tt=ke.source,wt=E.get(tt);delete wt[he.__cacheKey],d.memory.textures--}function fe(ke){const he=i.get(ke);if(ke.depthTexture&&ke.depthTexture.dispose(),ke.isWebGLCubeRenderTarget)for(let wt=0;wt<6;wt++){if(Array.isArray(he.__webglFramebuffer[wt]))for(let St=0;St<he.__webglFramebuffer[wt].length;St++)t.deleteFramebuffer(he.__webglFramebuffer[wt][St]);else t.deleteFramebuffer(he.__webglFramebuffer[wt]);he.__webglDepthbuffer&&t.deleteRenderbuffer(he.__webglDepthbuffer[wt])}else{if(Array.isArray(he.__webglFramebuffer))for(let wt=0;wt<he.__webglFramebuffer.length;wt++)t.deleteFramebuffer(he.__webglFramebuffer[wt]);else t.deleteFramebuffer(he.__webglFramebuffer);if(he.__webglDepthbuffer&&t.deleteRenderbuffer(he.__webglDepthbuffer),he.__webglMultisampledFramebuffer&&t.deleteFramebuffer(he.__webglMultisampledFramebuffer),he.__webglColorRenderbuffer)for(let wt=0;wt<he.__webglColorRenderbuffer.length;wt++)he.__webglColorRenderbuffer[wt]&&t.deleteRenderbuffer(he.__webglColorRenderbuffer[wt]);he.__webglDepthRenderbuffer&&t.deleteRenderbuffer(he.__webglDepthRenderbuffer)}const tt=ke.textures;for(let wt=0,St=tt.length;wt<St;wt++){const De=i.get(tt[wt]);De.__webglTexture&&(t.deleteTexture(De.__webglTexture),d.memory.textures--),i.remove(tt[wt])}i.remove(ke)}let ue=0;function J(){ue=0}function le(){const ke=ue;return ke>=o.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+ke+" texture units while this GPU supports only "+o.maxTextures),ue+=1,ke}function me(ke){const he=[];return he.push(ke.wrapS),he.push(ke.wrapT),he.push(ke.wrapR||0),he.push(ke.magFilter),he.push(ke.minFilter),he.push(ke.anisotropy),he.push(ke.internalFormat),he.push(ke.format),he.push(ke.type),he.push(ke.generateMipmaps),he.push(ke.premultiplyAlpha),he.push(ke.flipY),he.push(ke.unpackAlignment),he.push(ke.colorSpace),he.join()}function be(ke,he){const tt=i.get(ke);if(ke.isVideoTexture&&Ot(ke),ke.isRenderTargetTexture===!1&&ke.version>0&&tt.__version!==ke.version){const wt=ke.image;if(wt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(wt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{_t(tt,ke,he);return}}n.bindTexture(t.TEXTURE_2D,tt.__webglTexture,t.TEXTURE0+he)}function ye(ke,he){const tt=i.get(ke);if(ke.version>0&&tt.__version!==ke.version){_t(tt,ke,he);return}n.bindTexture(t.TEXTURE_2D_ARRAY,tt.__webglTexture,t.TEXTURE0+he)}function pe(ke,he){const tt=i.get(ke);if(ke.version>0&&tt.__version!==ke.version){_t(tt,ke,he);return}n.bindTexture(t.TEXTURE_3D,tt.__webglTexture,t.TEXTURE0+he)}function oe(ke,he){const tt=i.get(ke);if(ke.version>0&&tt.__version!==ke.version){Nt(tt,ke,he);return}n.bindTexture(t.TEXTURE_CUBE_MAP,tt.__webglTexture,t.TEXTURE0+he)}const Ce={[BT]:t.REPEAT,[xl]:t.CLAMP_TO_EDGE,[UT]:t.MIRRORED_REPEAT},it={[ko]:t.NEAREST,[JO]:t.NEAREST_MIPMAP_NEAREST,[mg]:t.NEAREST_MIPMAP_LINEAR,[so]:t.LINEAR,[XS]:t.LINEAR_MIPMAP_NEAREST,[Ed]:t.LINEAR_MIPMAP_LINEAR},Se={[wbe]:t.NEVER,[kbe]:t.ALWAYS,[Ebe]:t.LESS,[CQ]:t.LEQUAL,[Sbe]:t.EQUAL,[Mbe]:t.GEQUAL,[Tbe]:t.GREATER,[xbe]:t.NOTEQUAL};function Oe(ke,he,tt){if(he.type===bu&&e.has("OES_texture_float_linear")===!1&&(he.magFilter===so||he.magFilter===XS||he.magFilter===mg||he.magFilter===Ed||he.minFilter===so||he.minFilter===XS||he.minFilter===mg||he.minFilter===Ed)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),tt?(t.texParameteri(ke,t.TEXTURE_WRAP_S,Ce[he.wrapS]),t.texParameteri(ke,t.TEXTURE_WRAP_T,Ce[he.wrapT]),(ke===t.TEXTURE_3D||ke===t.TEXTURE_2D_ARRAY)&&t.texParameteri(ke,t.TEXTURE_WRAP_R,Ce[he.wrapR]),t.texParameteri(ke,t.TEXTURE_MAG_FILTER,it[he.magFilter]),t.texParameteri(ke,t.TEXTURE_MIN_FILTER,it[he.minFilter])):(t.texParameteri(ke,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(ke,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),(ke===t.TEXTURE_3D||ke===t.TEXTURE_2D_ARRAY)&&t.texParameteri(ke,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),(he.wrapS!==xl||he.wrapT!==xl)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(ke,t.TEXTURE_MAG_FILTER,V(he.magFilter)),t.texParameteri(ke,t.TEXTURE_MIN_FILTER,V(he.minFilter)),he.minFilter!==ko&&he.minFilter!==so&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),he.compareFunction&&(t.texParameteri(ke,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(ke,t.TEXTURE_COMPARE_FUNC,Se[he.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(he.magFilter===ko||he.minFilter!==mg&&he.minFilter!==Ed||he.type===bu&&e.has("OES_texture_float_linear")===!1||p===!1&&he.type===y4&&e.has("OES_texture_half_float_linear")===!1)return;if(he.anisotropy>1||i.get(he).__currentAnisotropy){const wt=e.get("EXT_texture_filter_anisotropic");t.texParameterf(ke,wt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(he.anisotropy,o.getMaxAnisotropy())),i.get(he).__currentAnisotropy=he.anisotropy}}}function ct(ke,he){let tt=!1;ke.__webglInit===void 0&&(ke.__webglInit=!0,he.addEventListener("dispose",G));const wt=he.source;let St=E.get(wt);St===void 0&&(St={},E.set(wt,St));const De=me(he);if(De!==ke.__cacheKey){St[De]===void 0&&(St[De]={texture:t.createTexture(),usedTimes:0},d.memory.textures++,tt=!0),St[De].usedTimes++;const nt=St[ke.__cacheKey];nt!==void 0&&(St[ke.__cacheKey].usedTimes--,nt.usedTimes===0&&q(he)),ke.__cacheKey=De,ke.__webglTexture=St[De].texture}return tt}function _t(ke,he,tt){let wt=t.TEXTURE_2D;(he.isDataArrayTexture||he.isCompressedArrayTexture)&&(wt=t.TEXTURE_2D_ARRAY),he.isData3DTexture&&(wt=t.TEXTURE_3D);const St=ct(ke,he),De=he.source;n.bindTexture(wt,ke.__webglTexture,t.TEXTURE0+tt);const nt=i.get(De);if(De.version!==nt.__version||St===!0){n.activeTexture(t.TEXTURE0+tt);const Et=cs.getPrimaries(cs.workingColorSpace),Qe=he.colorSpace===Lh?null:cs.getPrimaries(he.colorSpace),lt=he.colorSpace===Lh||Et===Qe?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,he.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,he.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,he.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,lt);const xt=C(he)&&x(he.image)===!1;let ft=k(he.image,xt,!1,o.maxTextureSize);ft=It(he,ft);const Cn=x(ft)||p,Rn=l.convert(he.format,he.colorSpace);let dn=l.convert(he.type),Qt=L(he.internalFormat,Rn,dn,he.colorSpace,he.isVideoTexture);Oe(wt,he,Cn);let vn;const Yn=he.mipmaps,ir=p&&he.isVideoTexture!==!0&&Qt!==MQ,li=nt.__version===void 0||St===!0,st=De.dataReady,sn=B(he,ft,Cn);if(he.isDepthTexture)Qt=t.DEPTH_COMPONENT,p?he.type===bu?Qt=t.DEPTH_COMPONENT32F:he.type===Hh?Qt=t.DEPTH_COMPONENT24:he.type===nm?Qt=t.DEPTH24_STENCIL8:Qt=t.DEPTH_COMPONENT16:he.type===bu&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),he.format===rm&&Qt===t.DEPTH_COMPONENT&&he.type!==JN&&he.type!==Hh&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),he.type=Hh,dn=l.convert(he.type)),he.format===Jg&&Qt===t.DEPTH_COMPONENT&&(Qt=t.DEPTH_STENCIL,he.type!==nm&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),he.type=nm,dn=l.convert(he.type))),li&&(ir?n.texStorage2D(t.TEXTURE_2D,1,Qt,ft.width,ft.height):n.texImage2D(t.TEXTURE_2D,0,Qt,ft.width,ft.height,0,Rn,dn,null));else if(he.isDataTexture)if(Yn.length>0&&Cn){ir&&li&&n.texStorage2D(t.TEXTURE_2D,sn,Qt,Yn[0].width,Yn[0].height);for(let gt=0,on=Yn.length;gt<on;gt++)vn=Yn[gt],ir?st&&n.texSubImage2D(t.TEXTURE_2D,gt,0,0,vn.width,vn.height,Rn,dn,vn.data):n.texImage2D(t.TEXTURE_2D,gt,Qt,vn.width,vn.height,0,Rn,dn,vn.data);he.generateMipmaps=!1}else ir?(li&&n.texStorage2D(t.TEXTURE_2D,sn,Qt,ft.width,ft.height),st&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,ft.width,ft.height,Rn,dn,ft.data)):n.texImage2D(t.TEXTURE_2D,0,Qt,ft.width,ft.height,0,Rn,dn,ft.data);else if(he.isCompressedTexture)if(he.isCompressedArrayTexture){ir&&li&&n.texStorage3D(t.TEXTURE_2D_ARRAY,sn,Qt,Yn[0].width,Yn[0].height,ft.depth);for(let gt=0,on=Yn.length;gt<on;gt++)vn=Yn[gt],he.format!==Oc?Rn!==null?ir?st&&n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,gt,0,0,0,vn.width,vn.height,ft.depth,Rn,vn.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,gt,Qt,vn.width,vn.height,ft.depth,0,vn.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ir?st&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,gt,0,0,0,vn.width,vn.height,ft.depth,Rn,dn,vn.data):n.texImage3D(t.TEXTURE_2D_ARRAY,gt,Qt,vn.width,vn.height,ft.depth,0,Rn,dn,vn.data)}else{ir&&li&&n.texStorage2D(t.TEXTURE_2D,sn,Qt,Yn[0].width,Yn[0].height);for(let gt=0,on=Yn.length;gt<on;gt++)vn=Yn[gt],he.format!==Oc?Rn!==null?ir?st&&n.compressedTexSubImage2D(t.TEXTURE_2D,gt,0,0,vn.width,vn.height,Rn,vn.data):n.compressedTexImage2D(t.TEXTURE_2D,gt,Qt,vn.width,vn.height,0,vn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ir?st&&n.texSubImage2D(t.TEXTURE_2D,gt,0,0,vn.width,vn.height,Rn,dn,vn.data):n.texImage2D(t.TEXTURE_2D,gt,Qt,vn.width,vn.height,0,Rn,dn,vn.data)}else if(he.isDataArrayTexture)ir?(li&&n.texStorage3D(t.TEXTURE_2D_ARRAY,sn,Qt,ft.width,ft.height,ft.depth),st&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,ft.width,ft.height,ft.depth,Rn,dn,ft.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,Qt,ft.width,ft.height,ft.depth,0,Rn,dn,ft.data);else if(he.isData3DTexture)ir?(li&&n.texStorage3D(t.TEXTURE_3D,sn,Qt,ft.width,ft.height,ft.depth),st&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,ft.width,ft.height,ft.depth,Rn,dn,ft.data)):n.texImage3D(t.TEXTURE_3D,0,Qt,ft.width,ft.height,ft.depth,0,Rn,dn,ft.data);else if(he.isFramebufferTexture){if(li)if(ir)n.texStorage2D(t.TEXTURE_2D,sn,Qt,ft.width,ft.height);else{let gt=ft.width,on=ft.height;for(let _n=0;_n<sn;_n++)n.texImage2D(t.TEXTURE_2D,_n,Qt,gt,on,0,Rn,dn,null),gt>>=1,on>>=1}}else if(Yn.length>0&&Cn){if(ir&&li){const gt=Zt(Yn[0]);n.texStorage2D(t.TEXTURE_2D,sn,Qt,gt.width,gt.height)}for(let gt=0,on=Yn.length;gt<on;gt++)vn=Yn[gt],ir?st&&n.texSubImage2D(t.TEXTURE_2D,gt,0,0,Rn,dn,vn):n.texImage2D(t.TEXTURE_2D,gt,Qt,Rn,dn,vn);he.generateMipmaps=!1}else if(ir){if(li){const gt=Zt(ft);n.texStorage2D(t.TEXTURE_2D,sn,Qt,gt.width,gt.height)}st&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,Rn,dn,ft)}else n.texImage2D(t.TEXTURE_2D,0,Qt,Rn,dn,ft);P(he,Cn)&&O(wt),nt.__version=De.version,he.onUpdate&&he.onUpdate(he)}ke.__version=he.version}function Nt(ke,he,tt){if(he.image.length!==6)return;const wt=ct(ke,he),St=he.source;n.bindTexture(t.TEXTURE_CUBE_MAP,ke.__webglTexture,t.TEXTURE0+tt);const De=i.get(St);if(St.version!==De.__version||wt===!0){n.activeTexture(t.TEXTURE0+tt);const nt=cs.getPrimaries(cs.workingColorSpace),Et=he.colorSpace===Lh?null:cs.getPrimaries(he.colorSpace),Qe=he.colorSpace===Lh||nt===Et?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,he.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,he.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,he.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,Qe);const lt=he.isCompressedTexture||he.image[0].isCompressedTexture,xt=he.image[0]&&he.image[0].isDataTexture,ft=[];for(let gt=0;gt<6;gt++)!lt&&!xt?ft[gt]=k(he.image[gt],!1,!0,o.maxCubemapSize):ft[gt]=xt?he.image[gt].image:he.image[gt],ft[gt]=It(he,ft[gt]);const Cn=ft[0],Rn=x(Cn)||p,dn=l.convert(he.format,he.colorSpace),Qt=l.convert(he.type),vn=L(he.internalFormat,dn,Qt,he.colorSpace),Yn=p&&he.isVideoTexture!==!0,ir=De.__version===void 0||wt===!0,li=St.dataReady;let st=B(he,Cn,Rn);Oe(t.TEXTURE_CUBE_MAP,he,Rn);let sn;if(lt){Yn&&ir&&n.texStorage2D(t.TEXTURE_CUBE_MAP,st,vn,Cn.width,Cn.height);for(let gt=0;gt<6;gt++){sn=ft[gt].mipmaps;for(let on=0;on<sn.length;on++){const _n=sn[on];he.format!==Oc?dn!==null?Yn?li&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+gt,on,0,0,_n.width,_n.height,dn,_n.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+gt,on,vn,_n.width,_n.height,0,_n.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Yn?li&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+gt,on,0,0,_n.width,_n.height,dn,Qt,_n.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+gt,on,vn,_n.width,_n.height,0,dn,Qt,_n.data)}}}else{if(sn=he.mipmaps,Yn&&ir){sn.length>0&&st++;const gt=Zt(ft[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,st,vn,gt.width,gt.height)}for(let gt=0;gt<6;gt++)if(xt){Yn?li&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+gt,0,0,0,ft[gt].width,ft[gt].height,dn,Qt,ft[gt].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+gt,0,vn,ft[gt].width,ft[gt].height,0,dn,Qt,ft[gt].data);for(let on=0;on<sn.length;on++){const Sr=sn[on].image[gt].image;Yn?li&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+gt,on+1,0,0,Sr.width,Sr.height,dn,Qt,Sr.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+gt,on+1,vn,Sr.width,Sr.height,0,dn,Qt,Sr.data)}}else{Yn?li&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+gt,0,0,0,dn,Qt,ft[gt]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+gt,0,vn,dn,Qt,ft[gt]);for(let on=0;on<sn.length;on++){const _n=sn[on];Yn?li&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+gt,on+1,0,0,dn,Qt,_n.image[gt]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+gt,on+1,vn,dn,Qt,_n.image[gt])}}}P(he,Rn)&&O(t.TEXTURE_CUBE_MAP),De.__version=St.version,he.onUpdate&&he.onUpdate(he)}ke.__version=he.version}function Je(ke,he,tt,wt,St,De){const nt=l.convert(tt.format,tt.colorSpace),Et=l.convert(tt.type),Qe=L(tt.internalFormat,nt,Et,tt.colorSpace);if(!i.get(he).__hasExternalTextures){const xt=Math.max(1,he.width>>De),ft=Math.max(1,he.height>>De);St===t.TEXTURE_3D||St===t.TEXTURE_2D_ARRAY?n.texImage3D(St,De,Qe,xt,ft,he.depth,0,nt,Et,null):n.texImage2D(St,De,Qe,xt,ft,0,nt,Et,null)}n.bindFramebuffer(t.FRAMEBUFFER,ke),Mt(he)?g.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,wt,St,i.get(tt).__webglTexture,0,at(he)):(St===t.TEXTURE_2D||St>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&St<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,wt,St,i.get(tt).__webglTexture,De),n.bindFramebuffer(t.FRAMEBUFFER,null)}function ot(ke,he,tt){if(t.bindRenderbuffer(t.RENDERBUFFER,ke),he.depthBuffer&&!he.stencilBuffer){let wt=p===!0?t.DEPTH_COMPONENT24:t.DEPTH_COMPONENT16;if(tt||Mt(he)){const St=he.depthTexture;St&&St.isDepthTexture&&(St.type===bu?wt=t.DEPTH_COMPONENT32F:St.type===Hh&&(wt=t.DEPTH_COMPONENT24));const De=at(he);Mt(he)?g.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,De,wt,he.width,he.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,De,wt,he.width,he.height)}else t.renderbufferStorage(t.RENDERBUFFER,wt,he.width,he.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,ke)}else if(he.depthBuffer&&he.stencilBuffer){const wt=at(he);tt&&Mt(he)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,wt,t.DEPTH24_STENCIL8,he.width,he.height):Mt(he)?g.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,wt,t.DEPTH24_STENCIL8,he.width,he.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,he.width,he.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,ke)}else{const wt=he.textures;for(let St=0;St<wt.length;St++){const De=wt[St],nt=l.convert(De.format,De.colorSpace),Et=l.convert(De.type),Qe=L(De.internalFormat,nt,Et,De.colorSpace),lt=at(he);tt&&Mt(he)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,lt,Qe,he.width,he.height):Mt(he)?g.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,lt,Qe,he.width,he.height):t.renderbufferStorage(t.RENDERBUFFER,Qe,he.width,he.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function fn(ke,he){if(he&&he.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,ke),!(he.depthTexture&&he.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(he.depthTexture).__webglTexture||he.depthTexture.image.width!==he.width||he.depthTexture.image.height!==he.height)&&(he.depthTexture.image.width=he.width,he.depthTexture.image.height=he.height,he.depthTexture.needsUpdate=!0),be(he.depthTexture,0);const wt=i.get(he.depthTexture).__webglTexture,St=at(he);if(he.depthTexture.format===rm)Mt(he)?g.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,wt,0,St):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,wt,0);else if(he.depthTexture.format===Jg)Mt(he)?g.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,wt,0,St):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,wt,0);else throw new Error("Unknown depthTexture format")}function Ht(ke){const he=i.get(ke),tt=ke.isWebGLCubeRenderTarget===!0;if(ke.depthTexture&&!he.__autoAllocateDepthBuffer){if(tt)throw new Error("target.depthTexture not supported in Cube render targets");fn(he.__webglFramebuffer,ke)}else if(tt){he.__webglDepthbuffer=[];for(let wt=0;wt<6;wt++)n.bindFramebuffer(t.FRAMEBUFFER,he.__webglFramebuffer[wt]),he.__webglDepthbuffer[wt]=t.createRenderbuffer(),ot(he.__webglDepthbuffer[wt],ke,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,he.__webglFramebuffer),he.__webglDepthbuffer=t.createRenderbuffer(),ot(he.__webglDepthbuffer,ke,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function Re(ke,he,tt){const wt=i.get(ke);he!==void 0&&Je(wt.__webglFramebuffer,ke,ke.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),tt!==void 0&&Ht(ke)}function Lt(ke){const he=ke.texture,tt=i.get(ke),wt=i.get(he);ke.addEventListener("dispose",j);const St=ke.textures,De=ke.isWebGLCubeRenderTarget===!0,nt=St.length>1,Et=x(ke)||p;if(nt||(wt.__webglTexture===void 0&&(wt.__webglTexture=t.createTexture()),wt.__version=he.version,d.memory.textures++),De){tt.__webglFramebuffer=[];for(let Qe=0;Qe<6;Qe++)if(p&&he.mipmaps&&he.mipmaps.length>0){tt.__webglFramebuffer[Qe]=[];for(let lt=0;lt<he.mipmaps.length;lt++)tt.__webglFramebuffer[Qe][lt]=t.createFramebuffer()}else tt.__webglFramebuffer[Qe]=t.createFramebuffer()}else{if(p&&he.mipmaps&&he.mipmaps.length>0){tt.__webglFramebuffer=[];for(let Qe=0;Qe<he.mipmaps.length;Qe++)tt.__webglFramebuffer[Qe]=t.createFramebuffer()}else tt.__webglFramebuffer=t.createFramebuffer();if(nt)if(o.drawBuffers)for(let Qe=0,lt=St.length;Qe<lt;Qe++){const xt=i.get(St[Qe]);xt.__webglTexture===void 0&&(xt.__webglTexture=t.createTexture(),d.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(p&&ke.samples>0&&Mt(ke)===!1){tt.__webglMultisampledFramebuffer=t.createFramebuffer(),tt.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,tt.__webglMultisampledFramebuffer);for(let Qe=0;Qe<St.length;Qe++){const lt=St[Qe];tt.__webglColorRenderbuffer[Qe]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,tt.__webglColorRenderbuffer[Qe]);const xt=l.convert(lt.format,lt.colorSpace),ft=l.convert(lt.type),Cn=L(lt.internalFormat,xt,ft,lt.colorSpace,ke.isXRRenderTarget===!0),Rn=at(ke);t.renderbufferStorageMultisample(t.RENDERBUFFER,Rn,Cn,ke.width,ke.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Qe,t.RENDERBUFFER,tt.__webglColorRenderbuffer[Qe])}t.bindRenderbuffer(t.RENDERBUFFER,null),ke.depthBuffer&&(tt.__webglDepthRenderbuffer=t.createRenderbuffer(),ot(tt.__webglDepthRenderbuffer,ke,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(De){n.bindTexture(t.TEXTURE_CUBE_MAP,wt.__webglTexture),Oe(t.TEXTURE_CUBE_MAP,he,Et);for(let Qe=0;Qe<6;Qe++)if(p&&he.mipmaps&&he.mipmaps.length>0)for(let lt=0;lt<he.mipmaps.length;lt++)Je(tt.__webglFramebuffer[Qe][lt],ke,he,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,lt);else Je(tt.__webglFramebuffer[Qe],ke,he,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+Qe,0);P(he,Et)&&O(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(nt){for(let Qe=0,lt=St.length;Qe<lt;Qe++){const xt=St[Qe],ft=i.get(xt);n.bindTexture(t.TEXTURE_2D,ft.__webglTexture),Oe(t.TEXTURE_2D,xt,Et),Je(tt.__webglFramebuffer,ke,xt,t.COLOR_ATTACHMENT0+Qe,t.TEXTURE_2D,0),P(xt,Et)&&O(t.TEXTURE_2D)}n.unbindTexture()}else{let Qe=t.TEXTURE_2D;if((ke.isWebGL3DRenderTarget||ke.isWebGLArrayRenderTarget)&&(p?Qe=ke.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(Qe,wt.__webglTexture),Oe(Qe,he,Et),p&&he.mipmaps&&he.mipmaps.length>0)for(let lt=0;lt<he.mipmaps.length;lt++)Je(tt.__webglFramebuffer[lt],ke,he,t.COLOR_ATTACHMENT0,Qe,lt);else Je(tt.__webglFramebuffer,ke,he,t.COLOR_ATTACHMENT0,Qe,0);P(he,Et)&&O(Qe),n.unbindTexture()}ke.depthBuffer&&Ht(ke)}function mt(ke){const he=x(ke)||p,tt=ke.textures;for(let wt=0,St=tt.length;wt<St;wt++){const De=tt[wt];if(P(De,he)){const nt=ke.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,Et=i.get(De).__webglTexture;n.bindTexture(nt,Et),O(nt),n.unbindTexture()}}}function ht(ke){if(p&&ke.samples>0&&Mt(ke)===!1){const he=ke.textures,tt=ke.width,wt=ke.height;let St=t.COLOR_BUFFER_BIT;const De=[],nt=ke.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Et=i.get(ke),Qe=he.length>1;if(Qe)for(let lt=0;lt<he.length;lt++)n.bindFramebuffer(t.FRAMEBUFFER,Et.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+lt,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,Et.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+lt,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,Et.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Et.__webglFramebuffer);for(let lt=0;lt<he.length;lt++){De.push(t.COLOR_ATTACHMENT0+lt),ke.depthBuffer&&De.push(nt);const xt=Et.__ignoreDepthValues!==void 0?Et.__ignoreDepthValues:!1;if(xt===!1&&(ke.depthBuffer&&(St|=t.DEPTH_BUFFER_BIT),ke.stencilBuffer&&(St|=t.STENCIL_BUFFER_BIT)),Qe&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,Et.__webglColorRenderbuffer[lt]),xt===!0&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[nt]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[nt])),Qe){const ft=i.get(he[lt]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,ft,0)}t.blitFramebuffer(0,0,tt,wt,0,0,tt,wt,St,t.NEAREST),v&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,De)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),Qe)for(let lt=0;lt<he.length;lt++){n.bindFramebuffer(t.FRAMEBUFFER,Et.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+lt,t.RENDERBUFFER,Et.__webglColorRenderbuffer[lt]);const xt=i.get(he[lt]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,Et.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+lt,t.TEXTURE_2D,xt,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Et.__webglMultisampledFramebuffer)}}function at(ke){return Math.min(o.maxSamples,ke.samples)}function Mt(ke){const he=i.get(ke);return p&&ke.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&he.__useRenderToTexture!==!1}function Ot(ke){const he=d.render.frame;b.get(ke)!==he&&(b.set(ke,he),ke.update())}function It(ke,he){const tt=ke.colorSpace,wt=ke.format,St=ke.type;return ke.isCompressedTexture===!0||ke.isVideoTexture===!0||ke.format===eI||tt!==xp&&tt!==Lh&&(cs.getTransfer(tt)===Ps?p===!1?e.has("EXT_sRGB")===!0&&wt===Oc?(ke.format=eI,ke.minFilter=so,ke.generateMipmaps=!1):he=RQ.sRGBToLinear(he):(wt!==Oc||St!==tp)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",tt)),he}function Zt(ke){return typeof HTMLImageElement<"u"&&ke instanceof HTMLImageElement?(_.width=ke.naturalWidth||ke.width,_.height=ke.naturalHeight||ke.height):typeof VideoFrame<"u"&&ke instanceof VideoFrame?(_.width=ke.displayWidth,_.height=ke.displayHeight):(_.width=ke.width,_.height=ke.height),_}this.allocateTextureUnit=le,this.resetTextureUnits=J,this.setTexture2D=be,this.setTexture2DArray=ye,this.setTexture3D=pe,this.setTextureCube=oe,this.rebindTextures=Re,this.setupRenderTarget=Lt,this.updateRenderTargetMipmap=mt,this.updateMultisampleRenderTarget=ht,this.setupDepthRenderbuffer=Ht,this.setupFrameBufferTexture=Je,this.useMultisampledRTT=Mt}function Hbe(t,e,n){const i=n.isWebGL2;function o(l,d=Lh){let p;const g=cs.getTransfer(d);if(l===tp)return t.UNSIGNED_BYTE;if(l===AQ)return t.UNSIGNED_SHORT_4_4_4_4;if(l===wQ)return t.UNSIGNED_SHORT_5_5_5_1;if(l===cbe)return t.BYTE;if(l===ube)return t.SHORT;if(l===JN)return t.UNSIGNED_SHORT;if(l===bQ)return t.INT;if(l===Hh)return t.UNSIGNED_INT;if(l===bu)return t.FLOAT;if(l===y4)return i?t.HALF_FLOAT:(p=e.get("OES_texture_half_float"),p!==null?p.HALF_FLOAT_OES:null);if(l===fbe)return t.ALPHA;if(l===Oc)return t.RGBA;if(l===dbe)return t.LUMINANCE;if(l===hbe)return t.LUMINANCE_ALPHA;if(l===rm)return t.DEPTH_COMPONENT;if(l===Jg)return t.DEPTH_STENCIL;if(l===eI)return p=e.get("EXT_sRGB"),p!==null?p.SRGB_ALPHA_EXT:null;if(l===EQ)return t.RED;if(l===SQ)return t.RED_INTEGER;if(l===pbe)return t.RG;if(l===TQ)return t.RG_INTEGER;if(l===xQ)return t.RGBA_INTEGER;if(l===aD||l===lD||l===cD||l===uD)if(g===Ps)if(p=e.get("WEBGL_compressed_texture_s3tc_srgb"),p!==null){if(l===aD)return p.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(l===lD)return p.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(l===cD)return p.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(l===uD)return p.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(p=e.get("WEBGL_compressed_texture_s3tc"),p!==null){if(l===aD)return p.COMPRESSED_RGB_S3TC_DXT1_EXT;if(l===lD)return p.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(l===cD)return p.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(l===uD)return p.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(l===w$||l===E$||l===S$||l===T$)if(p=e.get("WEBGL_compressed_texture_pvrtc"),p!==null){if(l===w$)return p.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(l===E$)return p.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(l===S$)return p.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(l===T$)return p.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(l===MQ)return p=e.get("WEBGL_compressed_texture_etc1"),p!==null?p.COMPRESSED_RGB_ETC1_WEBGL:null;if(l===x$||l===M$)if(p=e.get("WEBGL_compressed_texture_etc"),p!==null){if(l===x$)return g===Ps?p.COMPRESSED_SRGB8_ETC2:p.COMPRESSED_RGB8_ETC2;if(l===M$)return g===Ps?p.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:p.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(l===k$||l===C$||l===P$||l===R$||l===D$||l===O$||l===I$||l===N$||l===L$||l===z$||l===B$||l===U$||l===F$||l===V$)if(p=e.get("WEBGL_compressed_texture_astc"),p!==null){if(l===k$)return g===Ps?p.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:p.COMPRESSED_RGBA_ASTC_4x4_KHR;if(l===C$)return g===Ps?p.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:p.COMPRESSED_RGBA_ASTC_5x4_KHR;if(l===P$)return g===Ps?p.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:p.COMPRESSED_RGBA_ASTC_5x5_KHR;if(l===R$)return g===Ps?p.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:p.COMPRESSED_RGBA_ASTC_6x5_KHR;if(l===D$)return g===Ps?p.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:p.COMPRESSED_RGBA_ASTC_6x6_KHR;if(l===O$)return g===Ps?p.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:p.COMPRESSED_RGBA_ASTC_8x5_KHR;if(l===I$)return g===Ps?p.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:p.COMPRESSED_RGBA_ASTC_8x6_KHR;if(l===N$)return g===Ps?p.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:p.COMPRESSED_RGBA_ASTC_8x8_KHR;if(l===L$)return g===Ps?p.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:p.COMPRESSED_RGBA_ASTC_10x5_KHR;if(l===z$)return g===Ps?p.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:p.COMPRESSED_RGBA_ASTC_10x6_KHR;if(l===B$)return g===Ps?p.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:p.COMPRESSED_RGBA_ASTC_10x8_KHR;if(l===U$)return g===Ps?p.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:p.COMPRESSED_RGBA_ASTC_10x10_KHR;if(l===F$)return g===Ps?p.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:p.COMPRESSED_RGBA_ASTC_12x10_KHR;if(l===V$)return g===Ps?p.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:p.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(l===fD||l===G$||l===j$)if(p=e.get("EXT_texture_compression_bptc"),p!==null){if(l===fD)return g===Ps?p.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:p.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(l===G$)return p.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(l===j$)return p.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(l===mbe||l===H$||l===$$||l===W$)if(p=e.get("EXT_texture_compression_rgtc"),p!==null){if(l===fD)return p.COMPRESSED_RED_RGTC1_EXT;if(l===H$)return p.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(l===$$)return p.COMPRESSED_RED_GREEN_RGTC2_EXT;if(l===W$)return p.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return l===nm?i?t.UNSIGNED_INT_24_8:(p=e.get("WEBGL_depth_texture"),p!==null?p.UNSIGNED_INT_24_8_WEBGL:null):t[l]!==void 0?t[l]:null}return{convert:o}}class $be extends Ha{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class cb extends Li{constructor(){super(),this.isGroup=!0,this.type="Group"}}const qut={type:"move"};class yV{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new cb,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new cb,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Le,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Le),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new cb,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Le,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Le),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const i of e.hand.values())this._getHandJoint(n,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,i){let o=null,l=null,d=null;const p=this._targetRay,g=this._grip,v=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(v&&e.hand){d=!0;for(const M of e.hand.values()){const k=n.getJointPose(M,i),x=this._getHandJoint(v,M);k!==null&&(x.matrix.fromArray(k.transform.matrix),x.matrix.decompose(x.position,x.rotation,x.scale),x.matrixWorldNeedsUpdate=!0,x.jointRadius=k.radius),x.visible=k!==null}const _=v.joints["index-finger-tip"],b=v.joints["thumb-tip"],w=_.position.distanceTo(b.position),E=.02,S=.005;v.inputState.pinching&&w>E+S?(v.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!v.inputState.pinching&&w<=E-S&&(v.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else g!==null&&e.gripSpace&&(l=n.getPose(e.gripSpace,i),l!==null&&(g.matrix.fromArray(l.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,l.linearVelocity?(g.hasLinearVelocity=!0,g.linearVelocity.copy(l.linearVelocity)):g.hasLinearVelocity=!1,l.angularVelocity?(g.hasAngularVelocity=!0,g.angularVelocity.copy(l.angularVelocity)):g.hasAngularVelocity=!1));p!==null&&(o=n.getPose(e.targetRaySpace,i),o===null&&l!==null&&(o=l),o!==null&&(p.matrix.fromArray(o.transform.matrix),p.matrix.decompose(p.position,p.rotation,p.scale),p.matrixWorldNeedsUpdate=!0,o.linearVelocity?(p.hasLinearVelocity=!0,p.linearVelocity.copy(o.linearVelocity)):p.hasLinearVelocity=!1,o.angularVelocity?(p.hasAngularVelocity=!0,p.angularVelocity.copy(o.angularVelocity)):p.hasAngularVelocity=!1,this.dispatchEvent(qut)))}return p!==null&&(p.visible=o!==null),g!==null&&(g.visible=l!==null),v!==null&&(v.visible=d!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const i=new cb;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[n.jointName]=i,e.add(i)}return e.joints[n.jointName]}}const Xut=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Zut=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepthEXT = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Qut{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n,i){if(this.texture===null){const o=new mo,l=e.properties.get(o);l.__webglTexture=n.texture,(n.depthNear!=i.depthNear||n.depthFar!=i.depthFar)&&(this.depthNear=n.depthNear,this.depthFar=n.depthFar),this.texture=o}}render(e,n){if(this.texture!==null){if(this.mesh===null){const i=n.cameras[0].viewport,o=new z0({extensions:{fragDepth:!0},vertexShader:Xut,fragmentShader:Zut,uniforms:{depthColor:{value:this.texture},depthWidth:{value:i.z},depthHeight:{value:i.w}}});this.mesh=new jo(new _A(20,20),o)}e.render(this.mesh,n)}}reset(){this.texture=null,this.mesh=null}}class Kut extends Mp{constructor(e,n){super();const i=this;let o=null,l=1,d=null,p="local-floor",g=1,v=null,_=null,b=null,w=null,E=null,S=null;const M=new Qut,k=n.getContextAttributes();let x=null,C=null;const P=[],O=[],L=new $t;let B=null;const V=new Ha;V.layers.enable(1),V.viewport=new fs;const G=new Ha;G.layers.enable(2),G.viewport=new fs;const j=[V,G],F=new $be;F.layers.enable(1),F.layers.enable(2);let q=null,fe=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Oe){let ct=P[Oe];return ct===void 0&&(ct=new yV,P[Oe]=ct),ct.getTargetRaySpace()},this.getControllerGrip=function(Oe){let ct=P[Oe];return ct===void 0&&(ct=new yV,P[Oe]=ct),ct.getGripSpace()},this.getHand=function(Oe){let ct=P[Oe];return ct===void 0&&(ct=new yV,P[Oe]=ct),ct.getHandSpace()};function ue(Oe){const ct=O.indexOf(Oe.inputSource);if(ct===-1)return;const _t=P[ct];_t!==void 0&&(_t.update(Oe.inputSource,Oe.frame,v||d),_t.dispatchEvent({type:Oe.type,data:Oe.inputSource}))}function J(){o.removeEventListener("select",ue),o.removeEventListener("selectstart",ue),o.removeEventListener("selectend",ue),o.removeEventListener("squeeze",ue),o.removeEventListener("squeezestart",ue),o.removeEventListener("squeezeend",ue),o.removeEventListener("end",J),o.removeEventListener("inputsourceschange",le);for(let Oe=0;Oe<P.length;Oe++){const ct=O[Oe];ct!==null&&(O[Oe]=null,P[Oe].disconnect(ct))}q=null,fe=null,M.reset(),e.setRenderTarget(x),E=null,w=null,b=null,o=null,C=null,Se.stop(),i.isPresenting=!1,e.setPixelRatio(B),e.setSize(L.width,L.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Oe){l=Oe,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Oe){p=Oe,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return v||d},this.setReferenceSpace=function(Oe){v=Oe},this.getBaseLayer=function(){return w!==null?w:E},this.getBinding=function(){return b},this.getFrame=function(){return S},this.getSession=function(){return o},this.setSession=async function(Oe){if(o=Oe,o!==null){if(x=e.getRenderTarget(),o.addEventListener("select",ue),o.addEventListener("selectstart",ue),o.addEventListener("selectend",ue),o.addEventListener("squeeze",ue),o.addEventListener("squeezestart",ue),o.addEventListener("squeezeend",ue),o.addEventListener("end",J),o.addEventListener("inputsourceschange",le),k.xrCompatible!==!0&&await n.makeXRCompatible(),B=e.getPixelRatio(),e.getSize(L),o.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const ct={antialias:o.renderState.layers===void 0?k.antialias:!0,alpha:!0,depth:k.depth,stencil:k.stencil,framebufferScaleFactor:l};E=new XRWebGLLayer(o,n,ct),o.updateRenderState({baseLayer:E}),e.setPixelRatio(1),e.setSize(E.framebufferWidth,E.framebufferHeight,!1),C=new L0(E.framebufferWidth,E.framebufferHeight,{format:Oc,type:tp,colorSpace:e.outputColorSpace,stencilBuffer:k.stencil})}else{let ct=null,_t=null,Nt=null;k.depth&&(Nt=k.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,ct=k.stencil?Jg:rm,_t=k.stencil?nm:Hh);const Je={colorFormat:n.RGBA8,depthFormat:Nt,scaleFactor:l};b=new XRWebGLBinding(o,n),w=b.createProjectionLayer(Je),o.updateRenderState({layers:[w]}),e.setPixelRatio(1),e.setSize(w.textureWidth,w.textureHeight,!1),C=new L0(w.textureWidth,w.textureHeight,{format:Oc,type:tp,depthTexture:new LQ(w.textureWidth,w.textureHeight,_t,void 0,void 0,void 0,void 0,void 0,void 0,ct),stencilBuffer:k.stencil,colorSpace:e.outputColorSpace,samples:k.antialias?4:0});const ot=e.properties.get(C);ot.__ignoreDepthValues=w.ignoreDepthValues}C.isXRRenderTarget=!0,this.setFoveation(g),v=null,d=await o.requestReferenceSpace(p),Se.setContext(o),Se.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(o!==null)return o.environmentBlendMode};function le(Oe){for(let ct=0;ct<Oe.removed.length;ct++){const _t=Oe.removed[ct],Nt=O.indexOf(_t);Nt>=0&&(O[Nt]=null,P[Nt].disconnect(_t))}for(let ct=0;ct<Oe.added.length;ct++){const _t=Oe.added[ct];let Nt=O.indexOf(_t);if(Nt===-1){for(let ot=0;ot<P.length;ot++)if(ot>=O.length){O.push(_t),Nt=ot;break}else if(O[ot]===null){O[ot]=_t,Nt=ot;break}if(Nt===-1)break}const Je=P[Nt];Je&&Je.connect(_t)}}const me=new Le,be=new Le;function ye(Oe,ct,_t){me.setFromMatrixPosition(ct.matrixWorld),be.setFromMatrixPosition(_t.matrixWorld);const Nt=me.distanceTo(be),Je=ct.projectionMatrix.elements,ot=_t.projectionMatrix.elements,fn=Je[14]/(Je[10]-1),Ht=Je[14]/(Je[10]+1),Re=(Je[9]+1)/Je[5],Lt=(Je[9]-1)/Je[5],mt=(Je[8]-1)/Je[0],ht=(ot[8]+1)/ot[0],at=fn*mt,Mt=fn*ht,Ot=Nt/(-mt+ht),It=Ot*-mt;ct.matrixWorld.decompose(Oe.position,Oe.quaternion,Oe.scale),Oe.translateX(It),Oe.translateZ(Ot),Oe.matrixWorld.compose(Oe.position,Oe.quaternion,Oe.scale),Oe.matrixWorldInverse.copy(Oe.matrixWorld).invert();const Zt=fn+Ot,ke=Ht+Ot,he=at-It,tt=Mt+(Nt-It),wt=Re*Ht/ke*Zt,St=Lt*Ht/ke*Zt;Oe.projectionMatrix.makePerspective(he,tt,wt,St,Zt,ke),Oe.projectionMatrixInverse.copy(Oe.projectionMatrix).invert()}function pe(Oe,ct){ct===null?Oe.matrixWorld.copy(Oe.matrix):Oe.matrixWorld.multiplyMatrices(ct.matrixWorld,Oe.matrix),Oe.matrixWorldInverse.copy(Oe.matrixWorld).invert()}this.updateCamera=function(Oe){if(o===null)return;M.texture!==null&&(Oe.near=M.depthNear,Oe.far=M.depthFar),F.near=G.near=V.near=Oe.near,F.far=G.far=V.far=Oe.far,(q!==F.near||fe!==F.far)&&(o.updateRenderState({depthNear:F.near,depthFar:F.far}),q=F.near,fe=F.far,V.near=q,V.far=fe,G.near=q,G.far=fe,V.updateProjectionMatrix(),G.updateProjectionMatrix(),Oe.updateProjectionMatrix());const ct=Oe.parent,_t=F.cameras;pe(F,ct);for(let Nt=0;Nt<_t.length;Nt++)pe(_t[Nt],ct);_t.length===2?ye(F,V,G):F.projectionMatrix.copy(V.projectionMatrix),oe(Oe,F,ct)};function oe(Oe,ct,_t){_t===null?Oe.matrix.copy(ct.matrixWorld):(Oe.matrix.copy(_t.matrixWorld),Oe.matrix.invert(),Oe.matrix.multiply(ct.matrixWorld)),Oe.matrix.decompose(Oe.position,Oe.quaternion,Oe.scale),Oe.updateMatrixWorld(!0),Oe.projectionMatrix.copy(ct.projectionMatrix),Oe.projectionMatrixInverse.copy(ct.projectionMatrixInverse),Oe.isPerspectiveCamera&&(Oe.fov=b4*2*Math.atan(1/Oe.projectionMatrix.elements[5]),Oe.zoom=1)}this.getCamera=function(){return F},this.getFoveation=function(){if(!(w===null&&E===null))return g},this.setFoveation=function(Oe){g=Oe,w!==null&&(w.fixedFoveation=Oe),E!==null&&E.fixedFoveation!==void 0&&(E.fixedFoveation=Oe)},this.hasDepthSensing=function(){return M.texture!==null};let Ce=null;function it(Oe,ct){if(_=ct.getViewerPose(v||d),S=ct,_!==null){const _t=_.views;E!==null&&(e.setRenderTargetFramebuffer(C,E.framebuffer),e.setRenderTarget(C));let Nt=!1;_t.length!==F.cameras.length&&(F.cameras.length=0,Nt=!0);for(let ot=0;ot<_t.length;ot++){const fn=_t[ot];let Ht=null;if(E!==null)Ht=E.getViewport(fn);else{const Lt=b.getViewSubImage(w,fn);Ht=Lt.viewport,ot===0&&(e.setRenderTargetTextures(C,Lt.colorTexture,w.ignoreDepthValues?void 0:Lt.depthStencilTexture),e.setRenderTarget(C))}let Re=j[ot];Re===void 0&&(Re=new Ha,Re.layers.enable(ot),Re.viewport=new fs,j[ot]=Re),Re.matrix.fromArray(fn.transform.matrix),Re.matrix.decompose(Re.position,Re.quaternion,Re.scale),Re.projectionMatrix.fromArray(fn.projectionMatrix),Re.projectionMatrixInverse.copy(Re.projectionMatrix).invert(),Re.viewport.set(Ht.x,Ht.y,Ht.width,Ht.height),ot===0&&(F.matrix.copy(Re.matrix),F.matrix.decompose(F.position,F.quaternion,F.scale)),Nt===!0&&F.cameras.push(Re)}const Je=o.enabledFeatures;if(Je&&Je.includes("depth-sensing")){const ot=b.getDepthInformation(_t[0]);ot&&ot.isValid&&ot.texture&&M.init(e,ot,o.renderState)}}for(let _t=0;_t<P.length;_t++){const Nt=O[_t],Je=P[_t];Nt!==null&&Je!==void 0&&Je.update(Nt,ct,v||d)}M.render(e,F),Ce&&Ce(Oe,ct),ct.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:ct}),S=null}const Se=new Bbe;Se.setAnimationLoop(it),this.setAnimationLoop=function(Oe){Ce=Oe},this.dispose=function(){}}}const b1=new Du,Jut=new cr;function eft(t,e){function n(k,x){k.matrixAutoUpdate===!0&&k.updateMatrix(),x.value.copy(k.matrix)}function i(k,x){x.color.getRGB(k.fogColor.value,Ibe(t)),x.isFog?(k.fogNear.value=x.near,k.fogFar.value=x.far):x.isFogExp2&&(k.fogDensity.value=x.density)}function o(k,x,C,P,O){x.isMeshBasicMaterial||x.isMeshLambertMaterial?l(k,x):x.isMeshToonMaterial?(l(k,x),b(k,x)):x.isMeshPhongMaterial?(l(k,x),_(k,x)):x.isMeshStandardMaterial?(l(k,x),w(k,x),x.isMeshPhysicalMaterial&&E(k,x,O)):x.isMeshMatcapMaterial?(l(k,x),S(k,x)):x.isMeshDepthMaterial?l(k,x):x.isMeshDistanceMaterial?(l(k,x),M(k,x)):x.isMeshNormalMaterial?l(k,x):x.isLineBasicMaterial?(d(k,x),x.isLineDashedMaterial&&p(k,x)):x.isPointsMaterial?g(k,x,C,P):x.isSpriteMaterial?v(k,x):x.isShadowMaterial?(k.color.value.copy(x.color),k.opacity.value=x.opacity):x.isShaderMaterial&&(x.uniformsNeedUpdate=!1)}function l(k,x){k.opacity.value=x.opacity,x.color&&k.diffuse.value.copy(x.color),x.emissive&&k.emissive.value.copy(x.emissive).multiplyScalar(x.emissiveIntensity),x.map&&(k.map.value=x.map,n(x.map,k.mapTransform)),x.alphaMap&&(k.alphaMap.value=x.alphaMap,n(x.alphaMap,k.alphaMapTransform)),x.bumpMap&&(k.bumpMap.value=x.bumpMap,n(x.bumpMap,k.bumpMapTransform),k.bumpScale.value=x.bumpScale,x.side===Zl&&(k.bumpScale.value*=-1)),x.normalMap&&(k.normalMap.value=x.normalMap,n(x.normalMap,k.normalMapTransform),k.normalScale.value.copy(x.normalScale),x.side===Zl&&k.normalScale.value.negate()),x.displacementMap&&(k.displacementMap.value=x.displacementMap,n(x.displacementMap,k.displacementMapTransform),k.displacementScale.value=x.displacementScale,k.displacementBias.value=x.displacementBias),x.emissiveMap&&(k.emissiveMap.value=x.emissiveMap,n(x.emissiveMap,k.emissiveMapTransform)),x.specularMap&&(k.specularMap.value=x.specularMap,n(x.specularMap,k.specularMapTransform)),x.alphaTest>0&&(k.alphaTest.value=x.alphaTest);const C=e.get(x),P=C.envMap,O=C.envMapRotation;if(P&&(k.envMap.value=P,b1.copy(O),b1.x*=-1,b1.y*=-1,b1.z*=-1,P.isCubeTexture&&P.isRenderTargetTexture===!1&&(b1.y*=-1,b1.z*=-1),k.envMapRotation.value.setFromMatrix4(Jut.makeRotationFromEuler(b1)),k.flipEnvMap.value=P.isCubeTexture&&P.isRenderTargetTexture===!1?-1:1,k.reflectivity.value=x.reflectivity,k.ior.value=x.ior,k.refractionRatio.value=x.refractionRatio),x.lightMap){k.lightMap.value=x.lightMap;const L=t._useLegacyLights===!0?Math.PI:1;k.lightMapIntensity.value=x.lightMapIntensity*L,n(x.lightMap,k.lightMapTransform)}x.aoMap&&(k.aoMap.value=x.aoMap,k.aoMapIntensity.value=x.aoMapIntensity,n(x.aoMap,k.aoMapTransform))}function d(k,x){k.diffuse.value.copy(x.color),k.opacity.value=x.opacity,x.map&&(k.map.value=x.map,n(x.map,k.mapTransform))}function p(k,x){k.dashSize.value=x.dashSize,k.totalSize.value=x.dashSize+x.gapSize,k.scale.value=x.scale}function g(k,x,C,P){k.diffuse.value.copy(x.color),k.opacity.value=x.opacity,k.size.value=x.size*C,k.scale.value=P*.5,x.map&&(k.map.value=x.map,n(x.map,k.uvTransform)),x.alphaMap&&(k.alphaMap.value=x.alphaMap,n(x.alphaMap,k.alphaMapTransform)),x.alphaTest>0&&(k.alphaTest.value=x.alphaTest)}function v(k,x){k.diffuse.value.copy(x.color),k.opacity.value=x.opacity,k.rotation.value=x.rotation,x.map&&(k.map.value=x.map,n(x.map,k.mapTransform)),x.alphaMap&&(k.alphaMap.value=x.alphaMap,n(x.alphaMap,k.alphaMapTransform)),x.alphaTest>0&&(k.alphaTest.value=x.alphaTest)}function _(k,x){k.specular.value.copy(x.specular),k.shininess.value=Math.max(x.shininess,1e-4)}function b(k,x){x.gradientMap&&(k.gradientMap.value=x.gradientMap)}function w(k,x){k.metalness.value=x.metalness,x.metalnessMap&&(k.metalnessMap.value=x.metalnessMap,n(x.metalnessMap,k.metalnessMapTransform)),k.roughness.value=x.roughness,x.roughnessMap&&(k.roughnessMap.value=x.roughnessMap,n(x.roughnessMap,k.roughnessMapTransform)),e.get(x).envMap&&(k.envMapIntensity.value=x.envMapIntensity)}function E(k,x,C){k.ior.value=x.ior,x.sheen>0&&(k.sheenColor.value.copy(x.sheenColor).multiplyScalar(x.sheen),k.sheenRoughness.value=x.sheenRoughness,x.sheenColorMap&&(k.sheenColorMap.value=x.sheenColorMap,n(x.sheenColorMap,k.sheenColorMapTransform)),x.sheenRoughnessMap&&(k.sheenRoughnessMap.value=x.sheenRoughnessMap,n(x.sheenRoughnessMap,k.sheenRoughnessMapTransform))),x.clearcoat>0&&(k.clearcoat.value=x.clearcoat,k.clearcoatRoughness.value=x.clearcoatRoughness,x.clearcoatMap&&(k.clearcoatMap.value=x.clearcoatMap,n(x.clearcoatMap,k.clearcoatMapTransform)),x.clearcoatRoughnessMap&&(k.clearcoatRoughnessMap.value=x.clearcoatRoughnessMap,n(x.clearcoatRoughnessMap,k.clearcoatRoughnessMapTransform)),x.clearcoatNormalMap&&(k.clearcoatNormalMap.value=x.clearcoatNormalMap,n(x.clearcoatNormalMap,k.clearcoatNormalMapTransform),k.clearcoatNormalScale.value.copy(x.clearcoatNormalScale),x.side===Zl&&k.clearcoatNormalScale.value.negate())),x.iridescence>0&&(k.iridescence.value=x.iridescence,k.iridescenceIOR.value=x.iridescenceIOR,k.iridescenceThicknessMinimum.value=x.iridescenceThicknessRange[0],k.iridescenceThicknessMaximum.value=x.iridescenceThicknessRange[1],x.iridescenceMap&&(k.iridescenceMap.value=x.iridescenceMap,n(x.iridescenceMap,k.iridescenceMapTransform)),x.iridescenceThicknessMap&&(k.iridescenceThicknessMap.value=x.iridescenceThicknessMap,n(x.iridescenceThicknessMap,k.iridescenceThicknessMapTransform))),x.transmission>0&&(k.transmission.value=x.transmission,k.transmissionSamplerMap.value=C.texture,k.transmissionSamplerSize.value.set(C.width,C.height),x.transmissionMap&&(k.transmissionMap.value=x.transmissionMap,n(x.transmissionMap,k.transmissionMapTransform)),k.thickness.value=x.thickness,x.thicknessMap&&(k.thicknessMap.value=x.thicknessMap,n(x.thicknessMap,k.thicknessMapTransform)),k.attenuationDistance.value=x.attenuationDistance,k.attenuationColor.value.copy(x.attenuationColor)),x.anisotropy>0&&(k.anisotropyVector.value.set(x.anisotropy*Math.cos(x.anisotropyRotation),x.anisotropy*Math.sin(x.anisotropyRotation)),x.anisotropyMap&&(k.anisotropyMap.value=x.anisotropyMap,n(x.anisotropyMap,k.anisotropyMapTransform))),k.specularIntensity.value=x.specularIntensity,k.specularColor.value.copy(x.specularColor),x.specularColorMap&&(k.specularColorMap.value=x.specularColorMap,n(x.specularColorMap,k.specularColorMapTransform)),x.specularIntensityMap&&(k.specularIntensityMap.value=x.specularIntensityMap,n(x.specularIntensityMap,k.specularIntensityMapTransform))}function S(k,x){x.matcap&&(k.matcap.value=x.matcap)}function M(k,x){const C=e.get(x).light;k.referencePosition.value.setFromMatrixPosition(C.matrixWorld),k.nearDistance.value=C.shadow.camera.near,k.farDistance.value=C.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:o}}function tft(t,e,n,i){let o={},l={},d=[];const p=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function g(C,P){const O=P.program;i.uniformBlockBinding(C,O)}function v(C,P){let O=o[C.id];O===void 0&&(S(C),O=_(C),o[C.id]=O,C.addEventListener("dispose",k));const L=P.program;i.updateUBOMapping(C,L);const B=e.render.frame;l[C.id]!==B&&(w(C),l[C.id]=B)}function _(C){const P=b();C.__bindingPointIndex=P;const O=t.createBuffer(),L=C.__size,B=C.usage;return t.bindBuffer(t.UNIFORM_BUFFER,O),t.bufferData(t.UNIFORM_BUFFER,L,B),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,P,O),O}function b(){for(let C=0;C<p;C++)if(d.indexOf(C)===-1)return d.push(C),C;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function w(C){const P=o[C.id],O=C.uniforms,L=C.__cache;t.bindBuffer(t.UNIFORM_BUFFER,P);for(let B=0,V=O.length;B<V;B++){const G=Array.isArray(O[B])?O[B]:[O[B]];for(let j=0,F=G.length;j<F;j++){const q=G[j];if(E(q,B,j,L)===!0){const fe=q.__offset,ue=Array.isArray(q.value)?q.value:[q.value];let J=0;for(let le=0;le<ue.length;le++){const me=ue[le],be=M(me);typeof me=="number"||typeof me=="boolean"?(q.__data[0]=me,t.bufferSubData(t.UNIFORM_BUFFER,fe+J,q.__data)):me.isMatrix3?(q.__data[0]=me.elements[0],q.__data[1]=me.elements[1],q.__data[2]=me.elements[2],q.__data[3]=0,q.__data[4]=me.elements[3],q.__data[5]=me.elements[4],q.__data[6]=me.elements[5],q.__data[7]=0,q.__data[8]=me.elements[6],q.__data[9]=me.elements[7],q.__data[10]=me.elements[8],q.__data[11]=0):(me.toArray(q.__data,J),J+=be.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,fe,q.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function E(C,P,O,L){const B=C.value,V=P+"_"+O;if(L[V]===void 0)return typeof B=="number"||typeof B=="boolean"?L[V]=B:L[V]=B.clone(),!0;{const G=L[V];if(typeof B=="number"||typeof B=="boolean"){if(G!==B)return L[V]=B,!0}else if(G.equals(B)===!1)return G.copy(B),!0}return!1}function S(C){const P=C.uniforms;let O=0;const L=16;for(let V=0,G=P.length;V<G;V++){const j=Array.isArray(P[V])?P[V]:[P[V]];for(let F=0,q=j.length;F<q;F++){const fe=j[F],ue=Array.isArray(fe.value)?fe.value:[fe.value];for(let J=0,le=ue.length;J<le;J++){const me=ue[J],be=M(me),ye=O%L;ye!==0&&L-ye<be.boundary&&(O+=L-ye),fe.__data=new Float32Array(be.storage/Float32Array.BYTES_PER_ELEMENT),fe.__offset=O,O+=be.storage}}}const B=O%L;return B>0&&(O+=L-B),C.__size=O,C.__cache={},this}function M(C){const P={boundary:0,storage:0};return typeof C=="number"||typeof C=="boolean"?(P.boundary=4,P.storage=4):C.isVector2?(P.boundary=8,P.storage=8):C.isVector3||C.isColor?(P.boundary=16,P.storage=12):C.isVector4?(P.boundary=16,P.storage=16):C.isMatrix3?(P.boundary=48,P.storage=48):C.isMatrix4?(P.boundary=64,P.storage=64):C.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",C),P}function k(C){const P=C.target;P.removeEventListener("dispose",k);const O=d.indexOf(P.__bindingPointIndex);d.splice(O,1),t.deleteBuffer(o[P.id]),delete o[P.id],delete l[P.id]}function x(){for(const C in o)t.deleteBuffer(o[C]);d=[],o={},l={}}return{bind:g,update:v,dispose:x}}class Wbe{constructor(e={}){const{canvas:n=Pbe(),context:i=null,depth:o=!0,stencil:l=!0,alpha:d=!1,antialias:p=!1,premultipliedAlpha:g=!0,preserveDrawingBuffer:v=!1,powerPreference:_="default",failIfMajorPerformanceCaveat:b=!1}=e;this.isWebGLRenderer=!0;let w;i!==null?w=i.getContextAttributes().alpha:w=d;const E=new Uint32Array(4),S=new Int32Array(4);let M=null,k=null;const x=[],C=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=uf,this._useLegacyLights=!1,this.toneMapping=ep,this.toneMappingExposure=1;const P=this;let O=!1,L=0,B=0,V=null,G=-1,j=null;const F=new fs,q=new fs;let fe=null;const ue=new Pn(0);let J=0,le=n.width,me=n.height,be=1,ye=null,pe=null;const oe=new fs(0,0,le,me),Ce=new fs(0,0,le,me);let it=!1;const Se=new Ex;let Oe=!1,ct=!1,_t=null;const Nt=new cr,Je=new $t,ot=new Le,fn={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ht(){return V===null?be:1}let Re=i;function Lt($,Q){for(let te=0;te<$.length;te++){const ce=$[te],ae=n.getContext(ce,Q);if(ae!==null)return ae}return null}try{const $={alpha:!0,depth:o,stencil:l,antialias:p,premultipliedAlpha:g,preserveDrawingBuffer:v,powerPreference:_,failIfMajorPerformanceCaveat:b};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${QN}`),n.addEventListener("webglcontextlost",li,!1),n.addEventListener("webglcontextrestored",st,!1),n.addEventListener("webglcontextcreationerror",sn,!1),Re===null){const Q=["webgl2","webgl","experimental-webgl"];if(P.isWebGL1Renderer===!0&&Q.shift(),Re=Lt(Q,$),Re===null)throw Lt(Q)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&Re instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),Re.getShaderPrecisionFormat===void 0&&(Re.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch($){throw console.error("THREE.WebGLRenderer: "+$.message),$}let mt,ht,at,Mt,Ot,It,Zt,ke,he,tt,wt,St,De,nt,Et,Qe,lt,xt,ft,Cn,Rn,dn,Qt,vn;function Yn(){mt=new fct(Re),ht=new sct(Re,mt,e),mt.init(ht),dn=new Hbe(Re,mt,ht),at=new Wut(Re,mt,ht),Mt=new pct(Re),Ot=new Iut,It=new Yut(Re,mt,at,Ot,ht,dn,Mt),Zt=new act(P),ke=new uct(P),he=new bot(Re,ht),Qt=new rct(Re,mt,he,ht),tt=new dct(Re,he,Mt,Qt),wt=new _ct(Re,tt,he,Mt),ft=new vct(Re,ht,It),Qe=new oct(Ot),St=new Out(P,Zt,ke,mt,ht,Qt,Qe),De=new eft(P,Ot),nt=new Lut,Et=new Gut(mt,ht),xt=new nct(P,Zt,ke,at,wt,w,g),lt=new $ut(P,wt,ht),vn=new tft(Re,Mt,ht,at),Cn=new ict(Re,mt,Mt,ht),Rn=new hct(Re,mt,Mt,ht),Mt.programs=St.programs,P.capabilities=ht,P.extensions=mt,P.properties=Ot,P.renderLists=nt,P.shadowMap=lt,P.state=at,P.info=Mt}Yn();const ir=new Kut(P,Re);this.xr=ir,this.getContext=function(){return Re},this.getContextAttributes=function(){return Re.getContextAttributes()},this.forceContextLoss=function(){const $=mt.get("WEBGL_lose_context");$&&$.loseContext()},this.forceContextRestore=function(){const $=mt.get("WEBGL_lose_context");$&&$.restoreContext()},this.getPixelRatio=function(){return be},this.setPixelRatio=function($){$!==void 0&&(be=$,this.setSize(le,me,!1))},this.getSize=function($){return $.set(le,me)},this.setSize=function($,Q,te=!0){if(ir.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}le=$,me=Q,n.width=Math.floor($*be),n.height=Math.floor(Q*be),te===!0&&(n.style.width=$+"px",n.style.height=Q+"px"),this.setViewport(0,0,$,Q)},this.getDrawingBufferSize=function($){return $.set(le*be,me*be).floor()},this.setDrawingBufferSize=function($,Q,te){le=$,me=Q,be=te,n.width=Math.floor($*te),n.height=Math.floor(Q*te),this.setViewport(0,0,$,Q)},this.getCurrentViewport=function($){return $.copy(F)},this.getViewport=function($){return $.copy(oe)},this.setViewport=function($,Q,te,ce){$.isVector4?oe.set($.x,$.y,$.z,$.w):oe.set($,Q,te,ce),at.viewport(F.copy(oe).multiplyScalar(be).round())},this.getScissor=function($){return $.copy(Ce)},this.setScissor=function($,Q,te,ce){$.isVector4?Ce.set($.x,$.y,$.z,$.w):Ce.set($,Q,te,ce),at.scissor(q.copy(Ce).multiplyScalar(be).round())},this.getScissorTest=function(){return it},this.setScissorTest=function($){at.setScissorTest(it=$)},this.setOpaqueSort=function($){ye=$},this.setTransparentSort=function($){pe=$},this.getClearColor=function($){return $.copy(xt.getClearColor())},this.setClearColor=function(){xt.setClearColor.apply(xt,arguments)},this.getClearAlpha=function(){return xt.getClearAlpha()},this.setClearAlpha=function(){xt.setClearAlpha.apply(xt,arguments)},this.clear=function($=!0,Q=!0,te=!0){let ce=0;if($){let ae=!1;if(V!==null){const xe=V.texture.format;ae=xe===xQ||xe===TQ||xe===SQ}if(ae){const xe=V.texture.type,Ne=xe===tp||xe===Hh||xe===JN||xe===nm||xe===AQ||xe===wQ,je=xt.getClearColor(),Ve=xt.getClearAlpha(),Ke=je.r,dt=je.g,bt=je.b;Ne?(E[0]=Ke,E[1]=dt,E[2]=bt,E[3]=Ve,Re.clearBufferuiv(Re.COLOR,0,E)):(S[0]=Ke,S[1]=dt,S[2]=bt,S[3]=Ve,Re.clearBufferiv(Re.COLOR,0,S))}else ce|=Re.COLOR_BUFFER_BIT}Q&&(ce|=Re.DEPTH_BUFFER_BIT),te&&(ce|=Re.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Re.clear(ce)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",li,!1),n.removeEventListener("webglcontextrestored",st,!1),n.removeEventListener("webglcontextcreationerror",sn,!1),nt.dispose(),Et.dispose(),Ot.dispose(),Zt.dispose(),ke.dispose(),wt.dispose(),Qt.dispose(),vn.dispose(),St.dispose(),ir.dispose(),ir.removeEventListener("sessionstart",gi),ir.removeEventListener("sessionend",qr),_t&&(_t.dispose(),_t=null),ji.stop()};function li($){$.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),O=!0}function st(){console.log("THREE.WebGLRenderer: Context Restored."),O=!1;const $=Mt.autoReset,Q=lt.enabled,te=lt.autoUpdate,ce=lt.needsUpdate,ae=lt.type;Yn(),Mt.autoReset=$,lt.enabled=Q,lt.autoUpdate=te,lt.needsUpdate=ce,lt.type=ae}function sn($){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",$.statusMessage)}function gt($){const Q=$.target;Q.removeEventListener("dispose",gt),on(Q)}function on($){_n($),Ot.remove($)}function _n($){const Q=Ot.get($).programs;Q!==void 0&&(Q.forEach(function(te){St.releaseProgram(te)}),$.isShaderMaterial&&St.releaseShaderCache($))}this.renderBufferDirect=function($,Q,te,ce,ae,xe){Q===null&&(Q=fn);const Ne=ae.isMesh&&ae.matrixWorld.determinant()<0,je=rc($,Q,te,ce,ae);at.setMaterial(ce,Ne);let Ve=te.index,Ke=1;if(ce.wireframe===!0){if(Ve=tt.getWireframeAttribute(te),Ve===void 0)return;Ke=2}const dt=te.drawRange,bt=te.attributes.position;let un=dt.start*Ke,Xn=(dt.start+dt.count)*Ke;xe!==null&&(un=Math.max(un,xe.start*Ke),Xn=Math.min(Xn,(xe.start+xe.count)*Ke)),Ve!==null?(un=Math.max(un,0),Xn=Math.min(Xn,Ve.count)):bt!=null&&(un=Math.max(un,0),Xn=Math.min(Xn,bt.count));const kn=Xn-un;if(kn<0||kn===1/0)return;Qt.setup(ae,ce,je,te,Ve);let Bi,jn=Cn;if(Ve!==null&&(Bi=he.get(Ve),jn=Rn,jn.setIndex(Bi)),ae.isMesh)ce.wireframe===!0?(at.setLineWidth(ce.wireframeLinewidth*Ht()),jn.setMode(Re.LINES)):jn.setMode(Re.TRIANGLES);else if(ae.isLine){let Un=ce.linewidth;Un===void 0&&(Un=1),at.setLineWidth(Un*Ht()),ae.isLineSegments?jn.setMode(Re.LINES):ae.isLineLoop?jn.setMode(Re.LINE_LOOP):jn.setMode(Re.LINE_STRIP)}else ae.isPoints?jn.setMode(Re.POINTS):ae.isSprite&&jn.setMode(Re.TRIANGLES);if(ae.isBatchedMesh)jn.renderMultiDraw(ae._multiDrawStarts,ae._multiDrawCounts,ae._multiDrawCount);else if(ae.isInstancedMesh)jn.renderInstances(un,kn,ae.count);else if(te.isInstancedBufferGeometry){const Un=te._maxInstanceCount!==void 0?te._maxInstanceCount:1/0,Or=Math.min(te.instanceCount,Un);jn.renderInstances(un,kn,Or)}else jn.render(un,kn)};function Sr($,Q,te){$.transparent===!0&&$.side===yd&&$.forceSinglePass===!1?($.side=Zl,$.needsUpdate=!0,Ka($,Q,te),$.side=mp,$.needsUpdate=!0,Ka($,Q,te),$.side=yd):Ka($,Q,te)}this.compile=function($,Q,te=null){te===null&&(te=$),k=Et.get(te),k.init(),C.push(k),te.traverseVisible(function(ae){ae.isLight&&ae.layers.test(Q.layers)&&(k.pushLight(ae),ae.castShadow&&k.pushShadow(ae))}),$!==te&&$.traverseVisible(function(ae){ae.isLight&&ae.layers.test(Q.layers)&&(k.pushLight(ae),ae.castShadow&&k.pushShadow(ae))}),k.setupLights(P._useLegacyLights);const ce=new Set;return $.traverse(function(ae){const xe=ae.material;if(xe)if(Array.isArray(xe))for(let Ne=0;Ne<xe.length;Ne++){const je=xe[Ne];Sr(je,te,ae),ce.add(je)}else Sr(xe,te,ae),ce.add(xe)}),C.pop(),k=null,ce},this.compileAsync=function($,Q,te=null){const ce=this.compile($,Q,te);return new Promise(ae=>{function xe(){if(ce.forEach(function(Ne){Ot.get(Ne).currentProgram.isReady()&&ce.delete(Ne)}),ce.size===0){ae($);return}setTimeout(xe,10)}mt.get("KHR_parallel_shader_compile")!==null?xe():setTimeout(xe,10)})};let si=null;function mr($){si&&si($)}function gi(){ji.stop()}function qr(){ji.start()}const ji=new Bbe;ji.setAnimationLoop(mr),typeof self<"u"&&ji.setContext(self),this.setAnimationLoop=function($){si=$,ir.setAnimationLoop($),$===null?ji.stop():ji.start()},ir.addEventListener("sessionstart",gi),ir.addEventListener("sessionend",qr),this.render=function($,Q){if(Q!==void 0&&Q.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(O===!0)return;$.matrixWorldAutoUpdate===!0&&$.updateMatrixWorld(),Q.parent===null&&Q.matrixWorldAutoUpdate===!0&&Q.updateMatrixWorld(),ir.enabled===!0&&ir.isPresenting===!0&&(ir.cameraAutoUpdate===!0&&ir.updateCamera(Q),Q=ir.getCamera()),$.isScene===!0&&$.onBeforeRender(P,$,Q,V),k=Et.get($,C.length),k.init(),C.push(k),Nt.multiplyMatrices(Q.projectionMatrix,Q.matrixWorldInverse),Se.setFromProjectionMatrix(Nt),ct=this.localClippingEnabled,Oe=Qe.init(this.clippingPlanes,ct),M=nt.get($,x.length),M.init(),x.push(M),Ks($,Q,0,P.sortObjects),M.finish(),P.sortObjects===!0&&M.sort(ye,pe),this.info.render.frame++,Oe===!0&&Qe.beginShadows();const te=k.state.shadowsArray;if(lt.render(te,$,Q),Oe===!0&&Qe.endShadows(),this.info.autoReset===!0&&this.info.reset(),(ir.enabled===!1||ir.isPresenting===!1||ir.hasDepthSensing()===!1)&&xt.render(M,$),k.setupLights(P._useLegacyLights),Q.isArrayCamera){const ce=Q.cameras;for(let ae=0,xe=ce.length;ae<xe;ae++){const Ne=ce[ae];zu(M,$,Ne,Ne.viewport)}}else zu(M,$,Q);V!==null&&(It.updateMultisampleRenderTarget(V),It.updateRenderTargetMipmap(V)),$.isScene===!0&&$.onAfterRender(P,$,Q),Qt.resetDefaultState(),G=-1,j=null,C.pop(),C.length>0?k=C[C.length-1]:k=null,x.pop(),x.length>0?M=x[x.length-1]:M=null};function Ks($,Q,te,ce){if($.visible===!1)return;if($.layers.test(Q.layers)){if($.isGroup)te=$.renderOrder;else if($.isLOD)$.autoUpdate===!0&&$.update(Q);else if($.isLight)k.pushLight($),$.castShadow&&k.pushShadow($);else if($.isSprite){if(!$.frustumCulled||Se.intersectsSprite($)){ce&&ot.setFromMatrixPosition($.matrixWorld).applyMatrix4(Nt);const Ne=wt.update($),je=$.material;je.visible&&M.push($,Ne,je,te,ot.z,null)}}else if(($.isMesh||$.isLine||$.isPoints)&&(!$.frustumCulled||Se.intersectsObject($))){const Ne=wt.update($),je=$.material;if(ce&&($.boundingSphere!==void 0?($.boundingSphere===null&&$.computeBoundingSphere(),ot.copy($.boundingSphere.center)):(Ne.boundingSphere===null&&Ne.computeBoundingSphere(),ot.copy(Ne.boundingSphere.center)),ot.applyMatrix4($.matrixWorld).applyMatrix4(Nt)),Array.isArray(je)){const Ve=Ne.groups;for(let Ke=0,dt=Ve.length;Ke<dt;Ke++){const bt=Ve[Ke],un=je[bt.materialIndex];un&&un.visible&&M.push($,Ne,un,te,ot.z,bt)}}else je.visible&&M.push($,Ne,je,te,ot.z,null)}}const xe=$.children;for(let Ne=0,je=xe.length;Ne<je;Ne++)Ks(xe[Ne],Q,te,ce)}function zu($,Q,te,ce){const ae=$.opaque,xe=$.transmissive,Ne=$.transparent;k.setupLightsView(te),Oe===!0&&Qe.setGlobalState(P.clippingPlanes,te),xe.length>0&&Ff(ae,xe,Q,te),ce&&at.viewport(F.copy(ce)),ae.length>0&&Yc(ae,Q,te),xe.length>0&&Yc(xe,Q,te),Ne.length>0&&Yc(Ne,Q,te),at.buffers.depth.setTest(!0),at.buffers.depth.setMask(!0),at.buffers.color.setMask(!0),at.setPolygonOffset(!1)}function Ff($,Q,te,ce){if((te.isScene===!0?te.overrideMaterial:null)!==null)return;const xe=ht.isWebGL2;_t===null&&(_t=new L0(1,1,{generateMipmaps:!0,type:mt.has("EXT_color_buffer_half_float")?y4:tp,minFilter:Ed,samples:xe?4:0})),P.getDrawingBufferSize(Je),xe?_t.setSize(Je.x,Je.y):_t.setSize(tI(Je.x),tI(Je.y));const Ne=P.getRenderTarget();P.setRenderTarget(_t),P.getClearColor(ue),J=P.getClearAlpha(),J<1&&P.setClearColor(16777215,.5),P.clear();const je=P.toneMapping;P.toneMapping=ep,Yc($,te,ce),It.updateMultisampleRenderTarget(_t),It.updateRenderTargetMipmap(_t);let Ve=!1;for(let Ke=0,dt=Q.length;Ke<dt;Ke++){const bt=Q[Ke],un=bt.object,Xn=bt.geometry,kn=bt.material,Bi=bt.group;if(kn.side===yd&&un.layers.test(ce.layers)){const jn=kn.side;kn.side=Zl,kn.needsUpdate=!0,Vf(un,te,ce,Xn,kn,Bi),kn.side=jn,kn.needsUpdate=!0,Ve=!0}}Ve===!0&&(It.updateMultisampleRenderTarget(_t),It.updateRenderTargetMipmap(_t)),P.setRenderTarget(Ne),P.setClearColor(ue,J),P.toneMapping=je}function Yc($,Q,te){const ce=Q.isScene===!0?Q.overrideMaterial:null;for(let ae=0,xe=$.length;ae<xe;ae++){const Ne=$[ae],je=Ne.object,Ve=Ne.geometry,Ke=ce===null?Ne.material:ce,dt=Ne.group;je.layers.test(te.layers)&&Vf(je,Q,te,Ve,Ke,dt)}}function Vf($,Q,te,ce,ae,xe){$.onBeforeRender(P,Q,te,ce,ae,xe),$.modelViewMatrix.multiplyMatrices(te.matrixWorldInverse,$.matrixWorld),$.normalMatrix.getNormalMatrix($.modelViewMatrix),ae.onBeforeRender(P,Q,te,ce,$,xe),ae.transparent===!0&&ae.side===yd&&ae.forceSinglePass===!1?(ae.side=Zl,ae.needsUpdate=!0,P.renderBufferDirect(te,Q,ce,ae,$,xe),ae.side=mp,ae.needsUpdate=!0,P.renderBufferDirect(te,Q,ce,ae,$,xe),ae.side=yd):P.renderBufferDirect(te,Q,ce,ae,$,xe),$.onAfterRender(P,Q,te,ce,ae,xe)}function Ka($,Q,te){Q.isScene!==!0&&(Q=fn);const ce=Ot.get($),ae=k.state.lights,xe=k.state.shadowsArray,Ne=ae.state.version,je=St.getParameters($,ae.state,xe,Q,te),Ve=St.getProgramCacheKey(je);let Ke=ce.programs;ce.environment=$.isMeshStandardMaterial?Q.environment:null,ce.fog=Q.fog,ce.envMap=($.isMeshStandardMaterial?ke:Zt).get($.envMap||ce.environment),ce.envMapRotation=ce.environment!==null&&$.envMap===null?Q.environmentRotation:$.envMapRotation,Ke===void 0&&($.addEventListener("dispose",gt),Ke=new Map,ce.programs=Ke);let dt=Ke.get(Ve);if(dt!==void 0){if(ce.currentProgram===dt&&ce.lightsStateVersion===Ne)return vi($,je),dt}else je.uniforms=St.getUniforms($),$.onBuild(te,je,P),$.onBeforeCompile(je,P),dt=St.acquireProgram(je,Ve),Ke.set(Ve,dt),ce.uniforms=je.uniforms;const bt=ce.uniforms;return(!$.isShaderMaterial&&!$.isRawShaderMaterial||$.clipping===!0)&&(bt.clippingPlanes=Qe.uniform),vi($,je),ce.needsLights=K($),ce.lightsStateVersion=Ne,ce.needsLights&&(bt.ambientLightColor.value=ae.state.ambient,bt.lightProbe.value=ae.state.probe,bt.directionalLights.value=ae.state.directional,bt.directionalLightShadows.value=ae.state.directionalShadow,bt.spotLights.value=ae.state.spot,bt.spotLightShadows.value=ae.state.spotShadow,bt.rectAreaLights.value=ae.state.rectArea,bt.ltc_1.value=ae.state.rectAreaLTC1,bt.ltc_2.value=ae.state.rectAreaLTC2,bt.pointLights.value=ae.state.point,bt.pointLightShadows.value=ae.state.pointShadow,bt.hemisphereLights.value=ae.state.hemi,bt.directionalShadowMap.value=ae.state.directionalShadowMap,bt.directionalShadowMatrix.value=ae.state.directionalShadowMatrix,bt.spotShadowMap.value=ae.state.spotShadowMap,bt.spotLightMatrix.value=ae.state.spotLightMatrix,bt.spotLightMap.value=ae.state.spotLightMap,bt.pointShadowMap.value=ae.state.pointShadowMap,bt.pointShadowMatrix.value=ae.state.pointShadowMatrix),ce.currentProgram=dt,ce.uniformsList=null,dt}function go($){if($.uniformsList===null){const Q=$.currentProgram.getUniforms();$.uniformsList=hD.seqWithValue(Q.seq,$.uniforms)}return $.uniformsList}function vi($,Q){const te=Ot.get($);te.outputColorSpace=Q.outputColorSpace,te.batching=Q.batching,te.instancing=Q.instancing,te.instancingColor=Q.instancingColor,te.instancingMorph=Q.instancingMorph,te.skinning=Q.skinning,te.morphTargets=Q.morphTargets,te.morphNormals=Q.morphNormals,te.morphColors=Q.morphColors,te.morphTargetsCount=Q.morphTargetsCount,te.numClippingPlanes=Q.numClippingPlanes,te.numIntersection=Q.numClipIntersection,te.vertexAlphas=Q.vertexAlphas,te.vertexTangents=Q.vertexTangents,te.toneMapping=Q.toneMapping}function rc($,Q,te,ce,ae){Q.isScene!==!0&&(Q=fn),It.resetTextureUnits();const xe=Q.fog,Ne=ce.isMeshStandardMaterial?Q.environment:null,je=V===null?P.outputColorSpace:V.isXRRenderTarget===!0?V.texture.colorSpace:xp,Ve=(ce.isMeshStandardMaterial?ke:Zt).get(ce.envMap||Ne),Ke=ce.vertexColors===!0&&!!te.attributes.color&&te.attributes.color.itemSize===4,dt=!!te.attributes.tangent&&(!!ce.normalMap||ce.anisotropy>0),bt=!!te.morphAttributes.position,un=!!te.morphAttributes.normal,Xn=!!te.morphAttributes.color;let kn=ep;ce.toneMapped&&(V===null||V.isXRRenderTarget===!0)&&(kn=P.toneMapping);const Bi=te.morphAttributes.position||te.morphAttributes.normal||te.morphAttributes.color,jn=Bi!==void 0?Bi.length:0,Un=Ot.get(ce),Or=k.state.lights;if(Oe===!0&&(ct===!0||$!==j)){const Vs=$===j&&ce.id===G;Qe.setState(ce,$,Vs)}let hr=!1;ce.version===Un.__version?(Un.needsLights&&Un.lightsStateVersion!==Or.state.version||Un.outputColorSpace!==je||ae.isBatchedMesh&&Un.batching===!1||!ae.isBatchedMesh&&Un.batching===!0||ae.isInstancedMesh&&Un.instancing===!1||!ae.isInstancedMesh&&Un.instancing===!0||ae.isSkinnedMesh&&Un.skinning===!1||!ae.isSkinnedMesh&&Un.skinning===!0||ae.isInstancedMesh&&Un.instancingColor===!0&&ae.instanceColor===null||ae.isInstancedMesh&&Un.instancingColor===!1&&ae.instanceColor!==null||ae.isInstancedMesh&&Un.instancingMorph===!0&&ae.morphTexture===null||ae.isInstancedMesh&&Un.instancingMorph===!1&&ae.morphTexture!==null||Un.envMap!==Ve||ce.fog===!0&&Un.fog!==xe||Un.numClippingPlanes!==void 0&&(Un.numClippingPlanes!==Qe.numPlanes||Un.numIntersection!==Qe.numIntersection)||Un.vertexAlphas!==Ke||Un.vertexTangents!==dt||Un.morphTargets!==bt||Un.morphNormals!==un||Un.morphColors!==Xn||Un.toneMapping!==kn||ht.isWebGL2===!0&&Un.morphTargetsCount!==jn)&&(hr=!0):(hr=!0,Un.__version=ce.version);let Qo=Un.currentProgram;hr===!0&&(Qo=Ka(ce,Q,ae));let co=!1,Ta=!1,Ja=!1;const hs=Qo.getUniforms(),xa=Un.uniforms;if(at.useProgram(Qo.program)&&(co=!0,Ta=!0,Ja=!0),ce.id!==G&&(G=ce.id,Ta=!0),co||j!==$){hs.setValue(Re,"projectionMatrix",$.projectionMatrix),hs.setValue(Re,"viewMatrix",$.matrixWorldInverse);const Vs=hs.map.cameraPosition;Vs!==void 0&&Vs.setValue(Re,ot.setFromMatrixPosition($.matrixWorld)),ht.logarithmicDepthBuffer&&hs.setValue(Re,"logDepthBufFC",2/(Math.log($.far+1)/Math.LN2)),(ce.isMeshPhongMaterial||ce.isMeshToonMaterial||ce.isMeshLambertMaterial||ce.isMeshBasicMaterial||ce.isMeshStandardMaterial||ce.isShaderMaterial)&&hs.setValue(Re,"isOrthographic",$.isOrthographicCamera===!0),j!==$&&(j=$,Ta=!0,Ja=!0)}if(ae.isSkinnedMesh){hs.setOptional(Re,ae,"bindMatrix"),hs.setOptional(Re,ae,"bindMatrixInverse");const Vs=ae.skeleton;Vs&&(ht.floatVertexTextures?(Vs.boneTexture===null&&Vs.computeBoneTexture(),hs.setValue(Re,"boneTexture",Vs.boneTexture,It)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}ae.isBatchedMesh&&(hs.setOptional(Re,ae,"batchingTexture"),hs.setValue(Re,"batchingTexture",ae._matricesTexture,It));const Ro=te.morphAttributes;if((Ro.position!==void 0||Ro.normal!==void 0||Ro.color!==void 0&&ht.isWebGL2===!0)&&ft.update(ae,te,Qo),(Ta||Un.receiveShadow!==ae.receiveShadow)&&(Un.receiveShadow=ae.receiveShadow,hs.setValue(Re,"receiveShadow",ae.receiveShadow)),ce.isMeshGouraudMaterial&&ce.envMap!==null&&(xa.envMap.value=Ve,xa.flipEnvMap.value=Ve.isCubeTexture&&Ve.isRenderTargetTexture===!1?-1:1),Ta&&(hs.setValue(Re,"toneMappingExposure",P.toneMappingExposure),Un.needsLights&&qc(xa,Ja),xe&&ce.fog===!0&&De.refreshFogUniforms(xa,xe),De.refreshMaterialUniforms(xa,ce,be,me,_t),hD.upload(Re,go(Un),xa,It)),ce.isShaderMaterial&&ce.uniformsNeedUpdate===!0&&(hD.upload(Re,go(Un),xa,It),ce.uniformsNeedUpdate=!1),ce.isSpriteMaterial&&hs.setValue(Re,"center",ae.center),hs.setValue(Re,"modelViewMatrix",ae.modelViewMatrix),hs.setValue(Re,"normalMatrix",ae.normalMatrix),hs.setValue(Re,"modelMatrix",ae.matrixWorld),ce.isShaderMaterial||ce.isRawShaderMaterial){const Vs=ce.uniformsGroups;for(let Ma=0,Il=Vs.length;Ma<Il;Ma++)if(ht.isWebGL2){const is=Vs[Ma];vn.update(is,Qo),vn.bind(is,Qo)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Qo}function qc($,Q){$.ambientLightColor.needsUpdate=Q,$.lightProbe.needsUpdate=Q,$.directionalLights.needsUpdate=Q,$.directionalLightShadows.needsUpdate=Q,$.pointLights.needsUpdate=Q,$.pointLightShadows.needsUpdate=Q,$.spotLights.needsUpdate=Q,$.spotLightShadows.needsUpdate=Q,$.rectAreaLights.needsUpdate=Q,$.hemisphereLights.needsUpdate=Q}function K($){return $.isMeshLambertMaterial||$.isMeshToonMaterial||$.isMeshPhongMaterial||$.isMeshStandardMaterial||$.isShadowMaterial||$.isShaderMaterial&&$.lights===!0}this.getActiveCubeFace=function(){return L},this.getActiveMipmapLevel=function(){return B},this.getRenderTarget=function(){return V},this.setRenderTargetTextures=function($,Q,te){Ot.get($.texture).__webglTexture=Q,Ot.get($.depthTexture).__webglTexture=te;const ce=Ot.get($);ce.__hasExternalTextures=!0,ce.__autoAllocateDepthBuffer=te===void 0,ce.__autoAllocateDepthBuffer||mt.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ce.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function($,Q){const te=Ot.get($);te.__webglFramebuffer=Q,te.__useDefaultFramebuffer=Q===void 0},this.setRenderTarget=function($,Q=0,te=0){V=$,L=Q,B=te;let ce=!0,ae=null,xe=!1,Ne=!1;if($){const Ve=Ot.get($);Ve.__useDefaultFramebuffer!==void 0?(at.bindFramebuffer(Re.FRAMEBUFFER,null),ce=!1):Ve.__webglFramebuffer===void 0?It.setupRenderTarget($):Ve.__hasExternalTextures&&It.rebindTextures($,Ot.get($.texture).__webglTexture,Ot.get($.depthTexture).__webglTexture);const Ke=$.texture;(Ke.isData3DTexture||Ke.isDataArrayTexture||Ke.isCompressedArrayTexture)&&(Ne=!0);const dt=Ot.get($).__webglFramebuffer;$.isWebGLCubeRenderTarget?(Array.isArray(dt[Q])?ae=dt[Q][te]:ae=dt[Q],xe=!0):ht.isWebGL2&&$.samples>0&&It.useMultisampledRTT($)===!1?ae=Ot.get($).__webglMultisampledFramebuffer:Array.isArray(dt)?ae=dt[te]:ae=dt,F.copy($.viewport),q.copy($.scissor),fe=$.scissorTest}else F.copy(oe).multiplyScalar(be).floor(),q.copy(Ce).multiplyScalar(be).floor(),fe=it;if(at.bindFramebuffer(Re.FRAMEBUFFER,ae)&&ht.drawBuffers&&ce&&at.drawBuffers($,ae),at.viewport(F),at.scissor(q),at.setScissorTest(fe),xe){const Ve=Ot.get($.texture);Re.framebufferTexture2D(Re.FRAMEBUFFER,Re.COLOR_ATTACHMENT0,Re.TEXTURE_CUBE_MAP_POSITIVE_X+Q,Ve.__webglTexture,te)}else if(Ne){const Ve=Ot.get($.texture),Ke=Q||0;Re.framebufferTextureLayer(Re.FRAMEBUFFER,Re.COLOR_ATTACHMENT0,Ve.__webglTexture,te||0,Ke)}G=-1},this.readRenderTargetPixels=function($,Q,te,ce,ae,xe,Ne){if(!($&&$.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let je=Ot.get($).__webglFramebuffer;if($.isWebGLCubeRenderTarget&&Ne!==void 0&&(je=je[Ne]),je){at.bindFramebuffer(Re.FRAMEBUFFER,je);try{const Ve=$.texture,Ke=Ve.format,dt=Ve.type;if(Ke!==Oc&&dn.convert(Ke)!==Re.getParameter(Re.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const bt=dt===y4&&(mt.has("EXT_color_buffer_half_float")||ht.isWebGL2&&mt.has("EXT_color_buffer_float"));if(dt!==tp&&dn.convert(dt)!==Re.getParameter(Re.IMPLEMENTATION_COLOR_READ_TYPE)&&!(dt===bu&&(ht.isWebGL2||mt.has("OES_texture_float")||mt.has("WEBGL_color_buffer_float")))&&!bt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Q>=0&&Q<=$.width-ce&&te>=0&&te<=$.height-ae&&Re.readPixels(Q,te,ce,ae,dn.convert(Ke),dn.convert(dt),xe)}finally{const Ve=V!==null?Ot.get(V).__webglFramebuffer:null;at.bindFramebuffer(Re.FRAMEBUFFER,Ve)}}},this.copyFramebufferToTexture=function($,Q,te=0){const ce=Math.pow(2,-te),ae=Math.floor(Q.image.width*ce),xe=Math.floor(Q.image.height*ce);It.setTexture2D(Q,0),Re.copyTexSubImage2D(Re.TEXTURE_2D,te,0,0,$.x,$.y,ae,xe),at.unbindTexture()},this.copyTextureToTexture=function($,Q,te,ce=0){const ae=Q.image.width,xe=Q.image.height,Ne=dn.convert(te.format),je=dn.convert(te.type);It.setTexture2D(te,0),Re.pixelStorei(Re.UNPACK_FLIP_Y_WEBGL,te.flipY),Re.pixelStorei(Re.UNPACK_PREMULTIPLY_ALPHA_WEBGL,te.premultiplyAlpha),Re.pixelStorei(Re.UNPACK_ALIGNMENT,te.unpackAlignment),Q.isDataTexture?Re.texSubImage2D(Re.TEXTURE_2D,ce,$.x,$.y,ae,xe,Ne,je,Q.image.data):Q.isCompressedTexture?Re.compressedTexSubImage2D(Re.TEXTURE_2D,ce,$.x,$.y,Q.mipmaps[0].width,Q.mipmaps[0].height,Ne,Q.mipmaps[0].data):Re.texSubImage2D(Re.TEXTURE_2D,ce,$.x,$.y,Ne,je,Q.image),ce===0&&te.generateMipmaps&&Re.generateMipmap(Re.TEXTURE_2D),at.unbindTexture()},this.copyTextureToTexture3D=function($,Q,te,ce,ae=0){if(P.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const xe=Math.round($.max.x-$.min.x),Ne=Math.round($.max.y-$.min.y),je=$.max.z-$.min.z+1,Ve=dn.convert(ce.format),Ke=dn.convert(ce.type);let dt;if(ce.isData3DTexture)It.setTexture3D(ce,0),dt=Re.TEXTURE_3D;else if(ce.isDataArrayTexture||ce.isCompressedArrayTexture)It.setTexture2DArray(ce,0),dt=Re.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Re.pixelStorei(Re.UNPACK_FLIP_Y_WEBGL,ce.flipY),Re.pixelStorei(Re.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ce.premultiplyAlpha),Re.pixelStorei(Re.UNPACK_ALIGNMENT,ce.unpackAlignment);const bt=Re.getParameter(Re.UNPACK_ROW_LENGTH),un=Re.getParameter(Re.UNPACK_IMAGE_HEIGHT),Xn=Re.getParameter(Re.UNPACK_SKIP_PIXELS),kn=Re.getParameter(Re.UNPACK_SKIP_ROWS),Bi=Re.getParameter(Re.UNPACK_SKIP_IMAGES),jn=te.isCompressedTexture?te.mipmaps[ae]:te.image;Re.pixelStorei(Re.UNPACK_ROW_LENGTH,jn.width),Re.pixelStorei(Re.UNPACK_IMAGE_HEIGHT,jn.height),Re.pixelStorei(Re.UNPACK_SKIP_PIXELS,$.min.x),Re.pixelStorei(Re.UNPACK_SKIP_ROWS,$.min.y),Re.pixelStorei(Re.UNPACK_SKIP_IMAGES,$.min.z),te.isDataTexture||te.isData3DTexture?Re.texSubImage3D(dt,ae,Q.x,Q.y,Q.z,xe,Ne,je,Ve,Ke,jn.data):ce.isCompressedArrayTexture?Re.compressedTexSubImage3D(dt,ae,Q.x,Q.y,Q.z,xe,Ne,je,Ve,jn.data):Re.texSubImage3D(dt,ae,Q.x,Q.y,Q.z,xe,Ne,je,Ve,Ke,jn),Re.pixelStorei(Re.UNPACK_ROW_LENGTH,bt),Re.pixelStorei(Re.UNPACK_IMAGE_HEIGHT,un),Re.pixelStorei(Re.UNPACK_SKIP_PIXELS,Xn),Re.pixelStorei(Re.UNPACK_SKIP_ROWS,kn),Re.pixelStorei(Re.UNPACK_SKIP_IMAGES,Bi),ae===0&&ce.generateMipmaps&&Re.generateMipmap(dt),at.unbindTexture()},this.initTexture=function($){$.isCubeTexture?It.setTextureCube($,0):$.isData3DTexture?It.setTexture3D($,0):$.isDataArrayTexture||$.isCompressedArrayTexture?It.setTexture2DArray($,0):It.setTexture2D($,0),at.unbindTexture()},this.resetState=function(){L=0,B=0,V=null,at.reset(),Qt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Sd}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=e===tL?"display-p3":"srgb",n.unpackColorSpace=cs.workingColorSpace===Ax?"display-p3":"srgb"}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class Ybe extends Wbe{}Ybe.prototype.isWebGL1Renderer=!0;class aL{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new Pn(e),this.density=n}clone(){return new aL(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class lL{constructor(e,n=1,i=1e3){this.isFog=!0,this.name="",this.color=new Pn(e),this.near=n,this.far=i}clone(){return new lL(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class qbe extends Li{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Du,this.environmentRotation=new Du,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),n.object.environmentRotation=this.environmentRotation.toArray(),n}}class cL{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=WT,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=xu()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return Rbe("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,i){e*=this.stride,i*=n.stride;for(let o=0,l=this.stride;o<l;o++)this.array[e+o]=n.array[i+o];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=xu()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(n,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=xu()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ul=new Le;class ev{constructor(e,n,i,o=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=i,this.normalized=o}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,i=this.data.count;n<i;n++)Ul.fromBufferAttribute(this,n),Ul.applyMatrix4(e),this.setXYZ(n,Ul.x,Ul.y,Ul.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)Ul.fromBufferAttribute(this,n),Ul.applyNormalMatrix(e),this.setXYZ(n,Ul.x,Ul.y,Ul.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)Ul.fromBufferAttribute(this,n),Ul.transformDirection(e),this.setXYZ(n,Ul.x,Ul.y,Ul.z);return this}getComponent(e,n){let i=this.array[e*this.data.stride+this.offset+n];return this.normalized&&(i=ql(i,this.array)),i}setComponent(e,n,i){return this.normalized&&(i=Gr(i,this.array)),this.data.array[e*this.data.stride+this.offset+n]=i,this}setX(e,n){return this.normalized&&(n=Gr(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=Gr(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=Gr(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=Gr(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=ql(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=ql(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=ql(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=ql(n,this.array)),n}setXY(e,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=Gr(n,this.array),i=Gr(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this}setXYZ(e,n,i,o){return e=e*this.data.stride+this.offset,this.normalized&&(n=Gr(n,this.array),i=Gr(i,this.array),o=Gr(o,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=o,this}setXYZW(e,n,i,o,l){return e=e*this.data.stride+this.offset,this.normalized&&(n=Gr(n,this.array),i=Gr(i,this.array),o=Gr(o,this.array),l=Gr(l,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=i,this.data.array[e+2]=o,this.data.array[e+3]=l,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const o=i*this.data.stride+this.offset;for(let l=0;l<this.itemSize;l++)n.push(this.data.array[o+l])}return new _s(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new ev(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let i=0;i<this.count;i++){const o=i*this.data.stride+this.offset;for(let l=0;l<this.itemSize;l++)n.push(this.data.array[o+l])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class UQ extends Dl{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Pn(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let D_;const O3=new Le,O_=new Le,I_=new Le,N_=new $t,I3=new $t,Xbe=new cr,yk=new Le,N3=new Le,bk=new Le,bae=new $t,bV=new $t,Aae=new $t;class Zbe extends Li{constructor(e=new UQ){if(super(),this.isSprite=!0,this.type="Sprite",D_===void 0){D_=new Kr;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new cL(n,5);D_.setIndex([0,1,2,0,2,3]),D_.setAttribute("position",new ev(i,3,0,!1)),D_.setAttribute("uv",new ev(i,2,3,!1))}this.geometry=D_,this.material=e,this.center=new $t(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),O_.setFromMatrixScale(this.matrixWorld),Xbe.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),I_.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&O_.multiplyScalar(-I_.z);const i=this.material.rotation;let o,l;i!==0&&(l=Math.cos(i),o=Math.sin(i));const d=this.center;Ak(yk.set(-.5,-.5,0),I_,d,O_,o,l),Ak(N3.set(.5,-.5,0),I_,d,O_,o,l),Ak(bk.set(.5,.5,0),I_,d,O_,o,l),bae.set(0,0),bV.set(1,0),Aae.set(1,1);let p=e.ray.intersectTriangle(yk,N3,bk,!1,O3);if(p===null&&(Ak(N3.set(-.5,.5,0),I_,d,O_,o,l),bV.set(0,1),p=e.ray.intersectTriangle(yk,bk,N3,!1,O3),p===null))return;const g=e.ray.origin.distanceTo(O3);g<e.near||g>e.far||n.push({distance:g,point:O3.clone(),uv:Au.getInterpolation(O3,yk,N3,bk,bae,bV,Aae,new $t),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Ak(t,e,n,i,o,l){N_.subVectors(t,n).addScalar(.5).multiply(i),o!==void 0?(I3.x=l*N_.x-o*N_.y,I3.y=o*N_.x+l*N_.y):I3.copy(N_),t.copy(e),t.x+=I3.x,t.y+=I3.y,t.applyMatrix4(Xbe)}const wk=new Le,wae=new Le;class Qbe extends Li{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let i=0,o=n.length;i<o;i++){const l=n[i];this.addLevel(l.object.clone(),l.distance,l.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,i=0){n=Math.abs(n);const o=this.levels;let l;for(l=0;l<o.length&&!(n<o[l].distance);l++);return o.splice(l,0,{distance:n,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let i,o;for(i=1,o=n.length;i<o;i++){let l=n[i].distance;if(n[i].object.visible&&(l-=l*n[i].hysteresis),e<l)break}return n[i-1].object}return null}raycast(e,n){if(this.levels.length>0){wk.setFromMatrixPosition(this.matrixWorld);const o=e.ray.origin.distanceTo(wk);this.getObjectForDistance(o).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){wk.setFromMatrixPosition(e.matrixWorld),wae.setFromMatrixPosition(this.matrixWorld);const i=wk.distanceTo(wae)/e.zoom;n[0].object.visible=!0;let o,l;for(o=1,l=n.length;o<l;o++){let d=n[o].distance;if(n[o].object.visible&&(d-=d*n[o].hysteresis),i>=d)n[o-1].object.visible=!1,n[o].object.visible=!0;else break}for(this._currentLevel=o-1;o<l;o++)n[o].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const i=this.levels;for(let o=0,l=i.length;o<l;o++){const d=i[o];n.object.levels.push({object:d.object.uuid,distance:d.distance,hysteresis:d.hysteresis})}return n}}const Eae=new Le,Sae=new fs,Tae=new fs,nft=new Le,xae=new cr,Ek=new Le,AV=new Ml,Mae=new cr,wV=new vA;class Kbe extends jo{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=A$,this.bindMatrix=new cr,this.bindMatrixInverse=new cr,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Ql),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let i=0;i<n.count;i++)this.getVertexPosition(i,Ek),this.boundingBox.expandByPoint(Ek)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Ml),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let i=0;i<n.count;i++)this.getVertexPosition(i,Ek),this.boundingSphere.expandByPoint(Ek)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const i=this.material,o=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),AV.copy(this.boundingSphere),AV.applyMatrix4(o),e.ray.intersectsSphere(AV)!==!1&&(Mae.copy(o).invert(),wV.copy(e.ray).applyMatrix4(Mae),!(this.boundingBox!==null&&wV.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,wV)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new fs,n=this.geometry.attributes.skinWeight;for(let i=0,o=n.count;i<o;i++){e.fromBufferAttribute(n,i);const l=1/e.manhattanLength();l!==1/0?e.multiplyScalar(l):e.set(1,0,0,0),n.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===A$?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===lbe?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const i=this.skeleton,o=this.geometry;Sae.fromBufferAttribute(o.attributes.skinIndex,e),Tae.fromBufferAttribute(o.attributes.skinWeight,e),Eae.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let l=0;l<4;l++){const d=Tae.getComponent(l);if(d!==0){const p=Sae.getComponent(l);xae.multiplyMatrices(i.bones[p].matrixWorld,i.boneInverses[p]),n.addScaledVector(nft.copy(Eae).applyMatrix4(xae),d)}}return n.applyMatrix4(this.bindMatrixInverse)}}class FQ extends Li{constructor(){super(),this.isBone=!0,this.type="Bone"}}class im extends mo{constructor(e=null,n=1,i=1,o,l,d,p,g,v=ko,_=ko,b,w){super(null,d,p,g,v,_,o,l,b,w),this.isDataTexture=!0,this.image={data:e,width:n,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const kae=new cr,rft=new cr;class uL{constructor(e=[],n=[]){this.uuid=xu(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,o=this.bones.length;i<o;i++)this.boneInverses.push(new cr)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const i=new cr;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,n=this.boneInverses,i=this.boneMatrices,o=this.boneTexture;for(let l=0,d=e.length;l<d;l++){const p=e[l]?e[l].matrixWorld:rft;kae.multiplyMatrices(p,n[l]),kae.toArray(i,l*16)}o!==null&&(o.needsUpdate=!0)}clone(){return new uL(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const i=new im(n,e,e,Oc,bu);return i.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=i,this}getBoneByName(e){for(let n=0,i=this.bones.length;n<i;n++){const o=this.bones[n];if(o.name===e)return o}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let i=0,o=e.bones.length;i<o;i++){const l=e.bones[i];let d=n[l];d===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",l),d=new FQ),this.bones.push(d),this.boneInverses.push(new cr().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,i=this.boneInverses;for(let o=0,l=n.length;o<l;o++){const d=n[o];e.bones.push(d.uuid);const p=i[o];e.boneInverses.push(p.toArray())}return e}}class w4 extends _s{constructor(e,n,i,o=1){super(e,n,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=o}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const L_=new cr,Cae=new cr,Sk=[],Pae=new Ql,ift=new cr,L3=new jo,z3=new Ml;class Jbe extends jo{constructor(e,n,i){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new w4(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let o=0;o<i;o++)this.setMatrixAt(o,ift)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new Ql),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<n;i++)this.getMatrixAt(i,L_),Pae.copy(e.boundingBox).applyMatrix4(L_),this.boundingBox.union(Pae)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new Ml),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<n;i++)this.getMatrixAt(i,L_),z3.copy(e.boundingSphere).applyMatrix4(L_),this.boundingSphere.union(z3)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,n){const i=n.morphTargetInfluences,o=this.morphTexture.source.data.data,l=i.length+1,d=e*l+1;for(let p=0;p<i.length;p++)i[p]=o[d+p]}raycast(e,n){const i=this.matrixWorld,o=this.count;if(L3.geometry=this.geometry,L3.material=this.material,L3.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),z3.copy(this.boundingSphere),z3.applyMatrix4(i),e.ray.intersectsSphere(z3)!==!1))for(let l=0;l<o;l++){this.getMatrixAt(l,L_),Cae.multiplyMatrices(i,L_),L3.matrixWorld=Cae,L3.raycast(e,Sk);for(let d=0,p=Sk.length;d<p;d++){const g=Sk[d];g.instanceId=l,g.object=this,n.push(g)}Sk.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new w4(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,n){const i=n.morphTargetInfluences,o=i.length+1;this.morphTexture===null&&(this.morphTexture=new im(new Float32Array(o*this.count),o,this.count,EQ,bu));const l=this.morphTexture.source.data.data;let d=0;for(let v=0;v<i.length;v++)d+=i[v];const p=this.geometry.morphTargetsRelative?1:1-d,g=o*e;l[g]=p,l.set(i,g+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}function sft(t,e){return t.z-e.z}function oft(t,e){return e.z-t.z}class aft{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,n){const i=this.pool,o=this.list;this.index>=i.length&&i.push({start:-1,count:-1,z:-1});const l=i[this.index];o.push(l),this.index++,l.start=e.start,l.count=e.count,l.z=n}reset(){this.list.length=0,this.index=0}}const z_="batchId",r2=new cr,Rae=new cr,lft=new cr,Dae=new cr,EV=new Ex,Tk=new Ql,A1=new Ml,B3=new Le,SV=new aft,gl=new jo,xk=[];function cft(t,e,n=0){const i=e.itemSize;if(t.isInterleavedBufferAttribute||t.array.constructor!==e.array.constructor){const o=t.count;for(let l=0;l<o;l++)for(let d=0;d<i;d++)e.setComponent(l+n,d,t.getComponent(l,d))}else e.array.set(t.array,n*i);e.needsUpdate=!0}class e4e extends jo{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,n,i=n*2,o){super(new Kr,o),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=n,this._maxIndexCount=i,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxGeometryCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const n=new Float32Array(e*e*4),i=new im(n,e,e,Oc,bu);this._matricesTexture=i}_initializeGeometry(e){const n=this.geometry,i=this._maxVertexCount,o=this._maxGeometryCount,l=this._maxIndexCount;if(this._geometryInitialized===!1){for(const p in e.attributes){const g=e.getAttribute(p),{array:v,itemSize:_,normalized:b}=g,w=new v.constructor(i*_),E=new g.constructor(w,_,b);E.setUsage(g.usage),n.setAttribute(p,E)}if(e.getIndex()!==null){const p=i>65536?new Uint32Array(l):new Uint16Array(l);n.setIndex(new _s(p,1))}const d=o>65536?new Uint32Array(i):new Uint16Array(i);n.setAttribute(z_,new _s(d,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(z_))throw new Error(`BatchedMesh: Geometry cannot use attribute "${z_}"`);const n=this.geometry;if(!!e.getIndex()!=!!n.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const i in n.attributes){if(i===z_)continue;if(!e.hasAttribute(i))throw new Error(`BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const o=e.getAttribute(i),l=n.getAttribute(i);if(o.itemSize!==l.itemSize||o.normalized!==l.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ql);const e=this._geometryCount,n=this.boundingBox,i=this._active;n.makeEmpty();for(let o=0;o<e;o++)i[o]!==!1&&(this.getMatrixAt(o,r2),this.getBoundingBoxAt(o,Tk).applyMatrix4(r2),n.union(Tk))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ml);const e=this._geometryCount,n=this.boundingSphere,i=this._active;n.makeEmpty();for(let o=0;o<e;o++)i[o]!==!1&&(this.getMatrixAt(o,r2),this.getBoundingSphereAt(o,A1).applyMatrix4(r2),n.union(A1))}addGeometry(e,n=-1,i=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const o={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let l=null;const d=this._reservedRanges,p=this._drawRanges,g=this._bounds;this._geometryCount!==0&&(l=d[d.length-1]),n===-1?o.vertexCount=e.getAttribute("position").count:o.vertexCount=n,l===null?o.vertexStart=0:o.vertexStart=l.vertexStart+l.vertexCount;const v=e.getIndex(),_=v!==null;if(_&&(i===-1?o.indexCount=v.count:o.indexCount=i,l===null?o.indexStart=0:o.indexStart=l.indexStart+l.indexCount),o.indexStart!==-1&&o.indexStart+o.indexCount>this._maxIndexCount||o.vertexStart+o.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const b=this._visibility,w=this._active,E=this._matricesTexture,S=this._matricesTexture.image.data;b.push(!0),w.push(!0);const M=this._geometryCount;this._geometryCount++,lft.toArray(S,M*16),E.needsUpdate=!0,d.push(o),p.push({start:_?o.indexStart:o.vertexStart,count:-1}),g.push({boxInitialized:!1,box:new Ql,sphereInitialized:!1,sphere:new Ml});const k=this.geometry.getAttribute(z_);for(let x=0;x<o.vertexCount;x++)k.setX(o.vertexStart+x,M);return k.needsUpdate=!0,this.setGeometryAt(M,e),M}setGeometryAt(e,n){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(n);const i=this.geometry,o=i.getIndex()!==null,l=i.getIndex(),d=n.getIndex(),p=this._reservedRanges[e];if(o&&d.count>p.indexCount||n.attributes.position.count>p.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const g=p.vertexStart,v=p.vertexCount;for(const E in i.attributes){if(E===z_)continue;const S=n.getAttribute(E),M=i.getAttribute(E);cft(S,M,g);const k=S.itemSize;for(let x=S.count,C=v;x<C;x++){const P=g+x;for(let O=0;O<k;O++)M.setComponent(P,O,0)}M.needsUpdate=!0}if(o){const E=p.indexStart;for(let S=0;S<d.count;S++)l.setX(E+S,g+d.getX(S));for(let S=d.count,M=p.indexCount;S<M;S++)l.setX(E+S,g);l.needsUpdate=!0}const _=this._bounds[e];n.boundingBox!==null?(_.box.copy(n.boundingBox),_.boxInitialized=!0):_.boxInitialized=!1,n.boundingSphere!==null?(_.sphere.copy(n.boundingSphere),_.sphereInitialized=!0):_.sphereInitialized=!1;const b=this._drawRanges[e],w=n.getAttribute("position");return b.count=o?d.count:w.count,this._visibilityChanged=!0,e}deleteGeometry(e){const n=this._active;return e>=n.length||n[e]===!1?this:(n[e]=!1,this._visibilityChanged=!0,this)}getBoundingBoxAt(e,n){if(this._active[e]===!1)return null;const o=this._bounds[e],l=o.box,d=this.geometry;if(o.boxInitialized===!1){l.makeEmpty();const p=d.index,g=d.attributes.position,v=this._drawRanges[e];for(let _=v.start,b=v.start+v.count;_<b;_++){let w=_;p&&(w=p.getX(w)),l.expandByPoint(B3.fromBufferAttribute(g,w))}o.boxInitialized=!0}return n.copy(l),n}getBoundingSphereAt(e,n){if(this._active[e]===!1)return null;const o=this._bounds[e],l=o.sphere,d=this.geometry;if(o.sphereInitialized===!1){l.makeEmpty(),this.getBoundingBoxAt(e,Tk),Tk.getCenter(l.center);const p=d.index,g=d.attributes.position,v=this._drawRanges[e];let _=0;for(let b=v.start,w=v.start+v.count;b<w;b++){let E=b;p&&(E=p.getX(E)),B3.fromBufferAttribute(g,E),_=Math.max(_,l.center.distanceToSquared(B3))}l.radius=Math.sqrt(_),o.sphereInitialized=!0}return n.copy(l),n}setMatrixAt(e,n){const i=this._active,o=this._matricesTexture,l=this._matricesTexture.image.data,d=this._geometryCount;return e>=d||i[e]===!1?this:(n.toArray(l,e*16),o.needsUpdate=!0,this)}getMatrixAt(e,n){const i=this._active,o=this._matricesTexture.image.data,l=this._geometryCount;return e>=l||i[e]===!1?null:n.fromArray(o,e*16)}setVisibleAt(e,n){const i=this._visibility,o=this._active,l=this._geometryCount;return e>=l||o[e]===!1||i[e]===n?this:(i[e]=n,this._visibilityChanged=!0,this)}getVisibleAt(e){const n=this._visibility,i=this._active,o=this._geometryCount;return e>=o||i[e]===!1?!1:n[e]}raycast(e,n){const i=this._visibility,o=this._active,l=this._drawRanges,d=this._geometryCount,p=this.matrixWorld,g=this.geometry;gl.material=this.material,gl.geometry.index=g.index,gl.geometry.attributes=g.attributes,gl.geometry.boundingBox===null&&(gl.geometry.boundingBox=new Ql),gl.geometry.boundingSphere===null&&(gl.geometry.boundingSphere=new Ml);for(let v=0;v<d;v++){if(!i[v]||!o[v])continue;const _=l[v];gl.geometry.setDrawRange(_.start,_.count),this.getMatrixAt(v,gl.matrixWorld).premultiply(p),this.getBoundingBoxAt(v,gl.geometry.boundingBox),this.getBoundingSphereAt(v,gl.geometry.boundingSphere),gl.raycast(e,xk);for(let b=0,w=xk.length;b<w;b++){const E=xk[b];E.object=this,E.batchId=v,n.push(E)}xk.length=0}gl.material=null,gl.geometry.index=null,gl.geometry.attributes={},gl.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(n=>({...n})),this._reservedRanges=e._reservedRanges.map(n=>({...n})),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map(n=>({boxInitialized:n.boxInitialized,box:n.box.clone(),sphereInitialized:n.sphereInitialized,sphere:n.sphere.clone()})),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this}onBeforeRender(e,n,i,o,l){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const d=o.getIndex(),p=d===null?1:d.array.BYTES_PER_ELEMENT,g=this._active,v=this._visibility,_=this._multiDrawStarts,b=this._multiDrawCounts,w=this._drawRanges,E=this.perObjectFrustumCulled;E&&(Dae.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),EV.setFromProjectionMatrix(Dae,e.coordinateSystem));let S=0;if(this.sortObjects){Rae.copy(this.matrixWorld).invert(),B3.setFromMatrixPosition(i.matrixWorld).applyMatrix4(Rae);for(let x=0,C=v.length;x<C;x++)if(v[x]&&g[x]){this.getMatrixAt(x,r2),this.getBoundingSphereAt(x,A1).applyMatrix4(r2);let P=!1;if(E&&(P=!EV.intersectsSphere(A1)),!P){const O=B3.distanceTo(A1.center);SV.push(w[x],O)}}const M=SV.list,k=this.customSort;k===null?M.sort(l.transparent?oft:sft):k.call(this,M,i);for(let x=0,C=M.length;x<C;x++){const P=M[x];_[S]=P.start*p,b[S]=P.count,S++}SV.reset()}else for(let M=0,k=v.length;M<k;M++)if(v[M]&&g[M]){let x=!1;if(E&&(this.getMatrixAt(M,r2),this.getBoundingSphereAt(M,A1).applyMatrix4(r2),x=!EV.intersectsSphere(A1)),!x){const C=w[M];_[S]=C.start*p,b[S]=C.count,S++}}this._multiDrawCount=S,this._visibilityChanged=!1}onBeforeShadow(e,n,i,o,l,d){this.onBeforeRender(e,null,o,l,d)}}class nc extends Dl{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Pn(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Oae=new Le,Iae=new Le,Nae=new cr,TV=new vA,Mk=new Ml;class _m extends Li{constructor(e=new Kr,n=new nc){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[0];for(let o=1,l=n.count;o<l;o++)Oae.fromBufferAttribute(n,o-1),Iae.fromBufferAttribute(n,o),i[o]=i[o-1],i[o]+=Oae.distanceTo(Iae);e.setAttribute("lineDistance",new zn(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const i=this.geometry,o=this.matrixWorld,l=e.params.Line.threshold,d=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Mk.copy(i.boundingSphere),Mk.applyMatrix4(o),Mk.radius+=l,e.ray.intersectsSphere(Mk)===!1)return;Nae.copy(o).invert(),TV.copy(e.ray).applyMatrix4(Nae);const p=l/((this.scale.x+this.scale.y+this.scale.z)/3),g=p*p,v=new Le,_=new Le,b=new Le,w=new Le,E=this.isLineSegments?2:1,S=i.index,k=i.attributes.position;if(S!==null){const x=Math.max(0,d.start),C=Math.min(S.count,d.start+d.count);for(let P=x,O=C-1;P<O;P+=E){const L=S.getX(P),B=S.getX(P+1);if(v.fromBufferAttribute(k,L),_.fromBufferAttribute(k,B),TV.distanceSqToSegment(v,_,w,b)>g)continue;w.applyMatrix4(this.matrixWorld);const G=e.ray.origin.distanceTo(w);G<e.near||G>e.far||n.push({distance:G,point:b.clone().applyMatrix4(this.matrixWorld),index:P,face:null,faceIndex:null,object:this})}}else{const x=Math.max(0,d.start),C=Math.min(k.count,d.start+d.count);for(let P=x,O=C-1;P<O;P+=E){if(v.fromBufferAttribute(k,P),_.fromBufferAttribute(k,P+1),TV.distanceSqToSegment(v,_,w,b)>g)continue;w.applyMatrix4(this.matrixWorld);const B=e.ray.origin.distanceTo(w);B<e.near||B>e.far||n.push({distance:B,point:b.clone().applyMatrix4(this.matrixWorld),index:P,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const o=n[i[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,d=o.length;l<d;l++){const p=o[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[p]=l}}}}}const Lae=new Le,zae=new Le;class Ud extends _m{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,i=[];for(let o=0,l=n.count;o<l;o+=2)Lae.fromBufferAttribute(n,o),zae.fromBufferAttribute(n,o+1),i[o]=o===0?0:i[o-1],i[o+1]=i[o]+Lae.distanceTo(zae);e.setAttribute("lineDistance",new zn(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class t4e extends _m{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class VQ extends Dl{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Pn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Bae=new cr,K$=new vA,kk=new Ml,Ck=new Le;class n4e extends Li{constructor(e=new Kr,n=new VQ){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,n){const i=this.geometry,o=this.matrixWorld,l=e.params.Points.threshold,d=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),kk.copy(i.boundingSphere),kk.applyMatrix4(o),kk.radius+=l,e.ray.intersectsSphere(kk)===!1)return;Bae.copy(o).invert(),K$.copy(e.ray).applyMatrix4(Bae);const p=l/((this.scale.x+this.scale.y+this.scale.z)/3),g=p*p,v=i.index,b=i.attributes.position;if(v!==null){const w=Math.max(0,d.start),E=Math.min(v.count,d.start+d.count);for(let S=w,M=E;S<M;S++){const k=v.getX(S);Ck.fromBufferAttribute(b,k),Uae(Ck,k,g,o,e,n,this)}}else{const w=Math.max(0,d.start),E=Math.min(b.count,d.start+d.count);for(let S=w,M=E;S<M;S++)Ck.fromBufferAttribute(b,S),Uae(Ck,S,g,o,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const o=n[i[0]];if(o!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,d=o.length;l<d;l++){const p=o[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[p]=l}}}}}function Uae(t,e,n,i,o,l,d){const p=K$.distanceSqToPoint(t);if(p<n){const g=new Le;K$.closestPointToPoint(t,g),g.applyMatrix4(i);const v=o.ray.origin.distanceTo(g);if(v<o.near||v>o.far)return;l.push({distance:v,distanceToRay:Math.sqrt(p),point:g,index:e,face:null,object:d})}}class uft extends mo{constructor(e,n,i,o,l,d,p,g,v){super(e,n,i,o,l,d,p,g,v),this.isVideoTexture=!0,this.minFilter=d!==void 0?d:so,this.magFilter=l!==void 0?l:so,this.generateMipmaps=!1;const _=this;function b(){_.needsUpdate=!0,e.requestVideoFrameCallback(b)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(b)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class fft extends mo{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=ko,this.minFilter=ko,this.generateMipmaps=!1,this.needsUpdate=!0}}class fL extends mo{constructor(e,n,i,o,l,d,p,g,v,_,b,w){super(null,d,p,g,v,_,o,l,b,w),this.isCompressedTexture=!0,this.image={width:n,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class dft extends fL{constructor(e,n,i,o,l,d){super(e,n,i,l,d),this.isCompressedArrayTexture=!0,this.image.depth=o,this.wrapR=xl}}class hft extends fL{constructor(e,n,i){super(void 0,e[0].width,e[0].height,n,i,gp),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class pft extends mo{constructor(e,n,i,o,l,d,p,g,v){super(e,n,i,o,l,d,p,g,v),this.isCanvasTexture=!0,this.needsUpdate=!0}}class V0{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const i=this.getUtoTmapping(e);return this.getPoint(i,n)}getPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return n}getSpacedPoints(e=5){const n=[];for(let i=0;i<=e;i++)n.push(this.getPointAt(i/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let i,o=this.getPoint(0),l=0;n.push(0);for(let d=1;d<=e;d++)i=this.getPoint(d/e),l+=i.distanceTo(o),n.push(l),o=i;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const i=this.getLengths();let o=0;const l=i.length;let d;n?d=n:d=e*i[l-1];let p=0,g=l-1,v;for(;p<=g;)if(o=Math.floor(p+(g-p)/2),v=i[o]-d,v<0)p=o+1;else if(v>0)g=o-1;else{g=o;break}if(o=g,i[o]===d)return o/(l-1);const _=i[o],w=i[o+1]-_,E=(d-_)/w;return(o+E)/(l-1)}getTangent(e,n){let o=e-1e-4,l=e+1e-4;o<0&&(o=0),l>1&&(l=1);const d=this.getPoint(o),p=this.getPoint(l),g=n||(d.isVector2?new $t:new Le);return g.copy(p).sub(d).normalize(),g}getTangentAt(e,n){const i=this.getUtoTmapping(e);return this.getTangent(i,n)}computeFrenetFrames(e,n){const i=new Le,o=[],l=[],d=[],p=new Le,g=new cr;for(let E=0;E<=e;E++){const S=E/e;o[E]=this.getTangentAt(S,new Le)}l[0]=new Le,d[0]=new Le;let v=Number.MAX_VALUE;const _=Math.abs(o[0].x),b=Math.abs(o[0].y),w=Math.abs(o[0].z);_<=v&&(v=_,i.set(1,0,0)),b<=v&&(v=b,i.set(0,1,0)),w<=v&&i.set(0,0,1),p.crossVectors(o[0],i).normalize(),l[0].crossVectors(o[0],p),d[0].crossVectors(o[0],l[0]);for(let E=1;E<=e;E++){if(l[E]=l[E-1].clone(),d[E]=d[E-1].clone(),p.crossVectors(o[E-1],o[E]),p.length()>Number.EPSILON){p.normalize();const S=Math.acos(po(o[E-1].dot(o[E]),-1,1));l[E].applyMatrix4(g.makeRotationAxis(p,S))}d[E].crossVectors(o[E],l[E])}if(n===!0){let E=Math.acos(po(l[0].dot(l[e]),-1,1));E/=e,o[0].dot(p.crossVectors(l[0],l[e]))>0&&(E=-E);for(let S=1;S<=e;S++)l[S].applyMatrix4(g.makeRotationAxis(o[S],E*S)),d[S].crossVectors(o[S],l[S])}return{tangents:o,normals:l,binormals:d}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class dL extends V0{constructor(e=0,n=0,i=1,o=1,l=0,d=Math.PI*2,p=!1,g=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=i,this.yRadius=o,this.aStartAngle=l,this.aEndAngle=d,this.aClockwise=p,this.aRotation=g}getPoint(e,n=new $t){const i=n,o=Math.PI*2;let l=this.aEndAngle-this.aStartAngle;const d=Math.abs(l)<Number.EPSILON;for(;l<0;)l+=o;for(;l>o;)l-=o;l<Number.EPSILON&&(d?l=0:l=o),this.aClockwise===!0&&!d&&(l===o?l=-o:l=l-o);const p=this.aStartAngle+e*l;let g=this.aX+this.xRadius*Math.cos(p),v=this.aY+this.yRadius*Math.sin(p);if(this.aRotation!==0){const _=Math.cos(this.aRotation),b=Math.sin(this.aRotation),w=g-this.aX,E=v-this.aY;g=w*_-E*b+this.aX,v=w*b+E*_+this.aY}return i.set(g,v)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class r4e extends dL{constructor(e,n,i,o,l,d){super(e,n,i,i,o,l,d),this.isArcCurve=!0,this.type="ArcCurve"}}function GQ(){let t=0,e=0,n=0,i=0;function o(l,d,p,g){t=l,e=p,n=-3*l+3*d-2*p-g,i=2*l-2*d+p+g}return{initCatmullRom:function(l,d,p,g,v){o(d,p,v*(p-l),v*(g-d))},initNonuniformCatmullRom:function(l,d,p,g,v,_,b){let w=(d-l)/v-(p-l)/(v+_)+(p-d)/_,E=(p-d)/_-(g-d)/(_+b)+(g-p)/b;w*=_,E*=_,o(d,p,w,E)},calc:function(l){const d=l*l,p=d*l;return t+e*l+n*d+i*p}}}const Pk=new Le,xV=new GQ,MV=new GQ,kV=new GQ;class i4e extends V0{constructor(e=[],n=!1,i="centripetal",o=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=i,this.tension=o}getPoint(e,n=new Le){const i=n,o=this.points,l=o.length,d=(l-(this.closed?0:1))*e;let p=Math.floor(d),g=d-p;this.closed?p+=p>0?0:(Math.floor(Math.abs(p)/l)+1)*l:g===0&&p===l-1&&(p=l-2,g=1);let v,_;this.closed||p>0?v=o[(p-1)%l]:(Pk.subVectors(o[0],o[1]).add(o[0]),v=Pk);const b=o[p%l],w=o[(p+1)%l];if(this.closed||p+2<l?_=o[(p+2)%l]:(Pk.subVectors(o[l-1],o[l-2]).add(o[l-1]),_=Pk),this.curveType==="centripetal"||this.curveType==="chordal"){const E=this.curveType==="chordal"?.5:.25;let S=Math.pow(v.distanceToSquared(b),E),M=Math.pow(b.distanceToSquared(w),E),k=Math.pow(w.distanceToSquared(_),E);M<1e-4&&(M=1),S<1e-4&&(S=M),k<1e-4&&(k=M),xV.initNonuniformCatmullRom(v.x,b.x,w.x,_.x,S,M,k),MV.initNonuniformCatmullRom(v.y,b.y,w.y,_.y,S,M,k),kV.initNonuniformCatmullRom(v.z,b.z,w.z,_.z,S,M,k)}else this.curveType==="catmullrom"&&(xV.initCatmullRom(v.x,b.x,w.x,_.x,this.tension),MV.initCatmullRom(v.y,b.y,w.y,_.y,this.tension),kV.initCatmullRom(v.z,b.z,w.z,_.z,this.tension));return i.set(xV.calc(g),MV.calc(g),kV.calc(g)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const o=e.points[n];this.points.push(o.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const o=this.points[n];e.points.push(o.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const o=e.points[n];this.points.push(new Le().fromArray(o))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Fae(t,e,n,i,o){const l=(i-e)*.5,d=(o-n)*.5,p=t*t,g=t*p;return(2*n-2*i+l+d)*g+(-3*n+3*i-2*l-d)*p+l*t+n}function mft(t,e){const n=1-t;return n*n*e}function gft(t,e){return 2*(1-t)*t*e}function vft(t,e){return t*t*e}function QS(t,e,n,i){return mft(t,e)+gft(t,n)+vft(t,i)}function _ft(t,e){const n=1-t;return n*n*n*e}function yft(t,e){const n=1-t;return 3*n*n*t*e}function bft(t,e){return 3*(1-t)*t*t*e}function Aft(t,e){return t*t*t*e}function KS(t,e,n,i,o){return _ft(t,e)+yft(t,n)+bft(t,i)+Aft(t,o)}class jQ extends V0{constructor(e=new $t,n=new $t,i=new $t,o=new $t){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=i,this.v3=o}getPoint(e,n=new $t){const i=n,o=this.v0,l=this.v1,d=this.v2,p=this.v3;return i.set(KS(e,o.x,l.x,d.x,p.x),KS(e,o.y,l.y,d.y,p.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class s4e extends V0{constructor(e=new Le,n=new Le,i=new Le,o=new Le){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=i,this.v3=o}getPoint(e,n=new Le){const i=n,o=this.v0,l=this.v1,d=this.v2,p=this.v3;return i.set(KS(e,o.x,l.x,d.x,p.x),KS(e,o.y,l.y,d.y,p.y),KS(e,o.z,l.z,d.z,p.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class HQ extends V0{constructor(e=new $t,n=new $t){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new $t){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new $t){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class o4e extends V0{constructor(e=new Le,n=new Le){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new Le){const i=n;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new Le){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class $Q extends V0{constructor(e=new $t,n=new $t,i=new $t){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new $t){const i=n,o=this.v0,l=this.v1,d=this.v2;return i.set(QS(e,o.x,l.x,d.x),QS(e,o.y,l.y,d.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class WQ extends V0{constructor(e=new Le,n=new Le,i=new Le){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=i}getPoint(e,n=new Le){const i=n,o=this.v0,l=this.v1,d=this.v2;return i.set(QS(e,o.x,l.x,d.x),QS(e,o.y,l.y,d.y),QS(e,o.z,l.z,d.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class YQ extends V0{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new $t){const i=n,o=this.points,l=(o.length-1)*e,d=Math.floor(l),p=l-d,g=o[d===0?d:d-1],v=o[d],_=o[d>o.length-2?o.length-1:d+1],b=o[d>o.length-3?o.length-1:d+2];return i.set(Fae(p,g.x,v.x,_.x,b.x),Fae(p,g.y,v.y,_.y,b.y)),i}copy(e){super.copy(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const o=e.points[n];this.points.push(o.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,i=this.points.length;n<i;n++){const o=this.points[n];e.points.push(o.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,i=e.points.length;n<i;n++){const o=e.points[n];this.points.push(new $t().fromArray(o))}return this}}var nI=Object.freeze({__proto__:null,ArcCurve:r4e,CatmullRomCurve3:i4e,CubicBezierCurve:jQ,CubicBezierCurve3:s4e,EllipseCurve:dL,LineCurve:HQ,LineCurve3:o4e,QuadraticBezierCurve:$Q,QuadraticBezierCurve3:WQ,SplineCurve:YQ});class a4e extends V0{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(n)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new nI[i](n,e))}return this}getPoint(e,n){const i=e*this.getLength(),o=this.getCurveLengths();let l=0;for(;l<o.length;){if(o[l]>=i){const d=o[l]-i,p=this.curves[l],g=p.getLength(),v=g===0?0:1-d/g;return p.getPointAt(v,n)}l++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let i=0,o=this.curves.length;i<o;i++)n+=this.curves[i].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let i=0;i<=e;i++)n.push(this.getPoint(i/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let i;for(let o=0,l=this.curves;o<l.length;o++){const d=l[o],p=d.isEllipseCurve?e*2:d.isLineCurve||d.isLineCurve3?1:d.isSplineCurve?e*d.points.length:e,g=d.getPoints(p);for(let v=0;v<g.length;v++){const _=g[v];i&&i.equals(_)||(n.push(_),i=_)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const o=e.curves[n];this.curves.push(o.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,i=this.curves.length;n<i;n++){const o=this.curves[n];e.curves.push(o.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,i=e.curves.length;n<i;n++){const o=e.curves[n];this.curves.push(new nI[o.type]().fromJSON(o))}return this}}class XT extends a4e{constructor(e){super(),this.type="Path",this.currentPoint=new $t,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,i=e.length;n<i;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const i=new HQ(this.currentPoint.clone(),new $t(e,n));return this.curves.push(i),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,i,o){const l=new $Q(this.currentPoint.clone(),new $t(e,n),new $t(i,o));return this.curves.push(l),this.currentPoint.set(i,o),this}bezierCurveTo(e,n,i,o,l,d){const p=new jQ(this.currentPoint.clone(),new $t(e,n),new $t(i,o),new $t(l,d));return this.curves.push(p),this.currentPoint.set(l,d),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),i=new YQ(n);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,i,o,l,d){const p=this.currentPoint.x,g=this.currentPoint.y;return this.absarc(e+p,n+g,i,o,l,d),this}absarc(e,n,i,o,l,d){return this.absellipse(e,n,i,i,o,l,d),this}ellipse(e,n,i,o,l,d,p,g){const v=this.currentPoint.x,_=this.currentPoint.y;return this.absellipse(e+v,n+_,i,o,l,d,p,g),this}absellipse(e,n,i,o,l,d,p,g){const v=new dL(e,n,i,o,l,d,p,g);if(this.curves.length>0){const b=v.getPoint(0);b.equals(this.currentPoint)||this.lineTo(b.x,b.y)}this.curves.push(v);const _=v.getPoint(1);return this.currentPoint.copy(_),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Sx extends Kr{constructor(e=[new $t(0,-.5),new $t(.5,0),new $t(0,.5)],n=12,i=0,o=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:i,phiLength:o},n=Math.floor(n),o=po(o,0,Math.PI*2);const l=[],d=[],p=[],g=[],v=[],_=1/n,b=new Le,w=new $t,E=new Le,S=new Le,M=new Le;let k=0,x=0;for(let C=0;C<=e.length-1;C++)switch(C){case 0:k=e[C+1].x-e[C].x,x=e[C+1].y-e[C].y,E.x=x*1,E.y=-k,E.z=x*0,M.copy(E),E.normalize(),g.push(E.x,E.y,E.z);break;case e.length-1:g.push(M.x,M.y,M.z);break;default:k=e[C+1].x-e[C].x,x=e[C+1].y-e[C].y,E.x=x*1,E.y=-k,E.z=x*0,S.copy(E),E.x+=M.x,E.y+=M.y,E.z+=M.z,E.normalize(),g.push(E.x,E.y,E.z),M.copy(S)}for(let C=0;C<=n;C++){const P=i+C*_*o,O=Math.sin(P),L=Math.cos(P);for(let B=0;B<=e.length-1;B++){b.x=e[B].x*O,b.y=e[B].y,b.z=e[B].x*L,d.push(b.x,b.y,b.z),w.x=C/n,w.y=B/(e.length-1),p.push(w.x,w.y);const V=g[3*B+0]*O,G=g[3*B+1],j=g[3*B+0]*L;v.push(V,G,j)}}for(let C=0;C<n;C++)for(let P=0;P<e.length-1;P++){const O=P+C*e.length,L=O,B=O+e.length,V=O+e.length+1,G=O+1;l.push(L,B,G),l.push(V,G,B)}this.setIndex(l),this.setAttribute("position",new zn(d,3)),this.setAttribute("uv",new zn(p,2)),this.setAttribute("normal",new zn(v,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Sx(e.points,e.segments,e.phiStart,e.phiLength)}}class hL extends Sx{constructor(e=1,n=1,i=4,o=8){const l=new XT;l.absarc(0,-n/2,e,Math.PI*1.5,0),l.absarc(0,n/2,e,0,Math.PI*.5),super(l.getPoints(i),o),this.type="CapsuleGeometry",this.parameters={radius:e,length:n,capSegments:i,radialSegments:o}}static fromJSON(e){return new hL(e.radius,e.length,e.capSegments,e.radialSegments)}}class pL extends Kr{constructor(e=1,n=32,i=0,o=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:i,thetaLength:o},n=Math.max(3,n);const l=[],d=[],p=[],g=[],v=new Le,_=new $t;d.push(0,0,0),p.push(0,0,1),g.push(.5,.5);for(let b=0,w=3;b<=n;b++,w+=3){const E=i+b/n*o;v.x=e*Math.cos(E),v.y=e*Math.sin(E),d.push(v.x,v.y,v.z),p.push(0,0,1),_.x=(d[w]/e+1)/2,_.y=(d[w+1]/e+1)/2,g.push(_.x,_.y)}for(let b=1;b<=n;b++)l.push(b,b+1,0);this.setIndex(l),this.setAttribute("position",new zn(d,3)),this.setAttribute("normal",new zn(p,3)),this.setAttribute("uv",new zn(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new pL(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class bA extends Kr{constructor(e=1,n=1,i=1,o=32,l=1,d=!1,p=0,g=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:i,radialSegments:o,heightSegments:l,openEnded:d,thetaStart:p,thetaLength:g};const v=this;o=Math.floor(o),l=Math.floor(l);const _=[],b=[],w=[],E=[];let S=0;const M=[],k=i/2;let x=0;C(),d===!1&&(e>0&&P(!0),n>0&&P(!1)),this.setIndex(_),this.setAttribute("position",new zn(b,3)),this.setAttribute("normal",new zn(w,3)),this.setAttribute("uv",new zn(E,2));function C(){const O=new Le,L=new Le;let B=0;const V=(n-e)/i;for(let G=0;G<=l;G++){const j=[],F=G/l,q=F*(n-e)+e;for(let fe=0;fe<=o;fe++){const ue=fe/o,J=ue*g+p,le=Math.sin(J),me=Math.cos(J);L.x=q*le,L.y=-F*i+k,L.z=q*me,b.push(L.x,L.y,L.z),O.set(le,V,me).normalize(),w.push(O.x,O.y,O.z),E.push(ue,1-F),j.push(S++)}M.push(j)}for(let G=0;G<o;G++)for(let j=0;j<l;j++){const F=M[j][G],q=M[j+1][G],fe=M[j+1][G+1],ue=M[j][G+1];_.push(F,q,ue),_.push(q,fe,ue),B+=6}v.addGroup(x,B,0),x+=B}function P(O){const L=S,B=new $t,V=new Le;let G=0;const j=O===!0?e:n,F=O===!0?1:-1;for(let fe=1;fe<=o;fe++)b.push(0,k*F,0),w.push(0,F,0),E.push(.5,.5),S++;const q=S;for(let fe=0;fe<=o;fe++){const J=fe/o*g+p,le=Math.cos(J),me=Math.sin(J);V.x=j*me,V.y=k*F,V.z=j*le,b.push(V.x,V.y,V.z),w.push(0,F,0),B.x=le*.5+.5,B.y=me*.5*F+.5,E.push(B.x,B.y),S++}for(let fe=0;fe<o;fe++){const ue=L+fe,J=q+fe;O===!0?_.push(J,J+1,ue):_.push(J+1,J,ue),G+=3}v.addGroup(x,G,O===!0?1:2),x+=G}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new bA(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class mL extends bA{constructor(e=1,n=1,i=32,o=1,l=!1,d=0,p=Math.PI*2){super(0,e,n,i,o,l,d,p),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:i,heightSegments:o,openEnded:l,thetaStart:d,thetaLength:p}}static fromJSON(e){return new mL(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Im extends Kr{constructor(e=[],n=[],i=1,o=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:i,detail:o};const l=[],d=[];p(o),v(i),_(),this.setAttribute("position",new zn(l,3)),this.setAttribute("normal",new zn(l.slice(),3)),this.setAttribute("uv",new zn(d,2)),o===0?this.computeVertexNormals():this.normalizeNormals();function p(C){const P=new Le,O=new Le,L=new Le;for(let B=0;B<n.length;B+=3)E(n[B+0],P),E(n[B+1],O),E(n[B+2],L),g(P,O,L,C)}function g(C,P,O,L){const B=L+1,V=[];for(let G=0;G<=B;G++){V[G]=[];const j=C.clone().lerp(O,G/B),F=P.clone().lerp(O,G/B),q=B-G;for(let fe=0;fe<=q;fe++)fe===0&&G===B?V[G][fe]=j:V[G][fe]=j.clone().lerp(F,fe/q)}for(let G=0;G<B;G++)for(let j=0;j<2*(B-G)-1;j++){const F=Math.floor(j/2);j%2===0?(w(V[G][F+1]),w(V[G+1][F]),w(V[G][F])):(w(V[G][F+1]),w(V[G+1][F+1]),w(V[G+1][F]))}}function v(C){const P=new Le;for(let O=0;O<l.length;O+=3)P.x=l[O+0],P.y=l[O+1],P.z=l[O+2],P.normalize().multiplyScalar(C),l[O+0]=P.x,l[O+1]=P.y,l[O+2]=P.z}function _(){const C=new Le;for(let P=0;P<l.length;P+=3){C.x=l[P+0],C.y=l[P+1],C.z=l[P+2];const O=k(C)/2/Math.PI+.5,L=x(C)/Math.PI+.5;d.push(O,1-L)}S(),b()}function b(){for(let C=0;C<d.length;C+=6){const P=d[C+0],O=d[C+2],L=d[C+4],B=Math.max(P,O,L),V=Math.min(P,O,L);B>.9&&V<.1&&(P<.2&&(d[C+0]+=1),O<.2&&(d[C+2]+=1),L<.2&&(d[C+4]+=1))}}function w(C){l.push(C.x,C.y,C.z)}function E(C,P){const O=C*3;P.x=e[O+0],P.y=e[O+1],P.z=e[O+2]}function S(){const C=new Le,P=new Le,O=new Le,L=new Le,B=new $t,V=new $t,G=new $t;for(let j=0,F=0;j<l.length;j+=9,F+=6){C.set(l[j+0],l[j+1],l[j+2]),P.set(l[j+3],l[j+4],l[j+5]),O.set(l[j+6],l[j+7],l[j+8]),B.set(d[F+0],d[F+1]),V.set(d[F+2],d[F+3]),G.set(d[F+4],d[F+5]),L.copy(C).add(P).add(O).divideScalar(3);const q=k(L);M(B,F+0,C,q),M(V,F+2,P,q),M(G,F+4,O,q)}}function M(C,P,O,L){L<0&&C.x===1&&(d[P]=C.x-1),O.x===0&&O.z===0&&(d[P]=L/2/Math.PI+.5)}function k(C){return Math.atan2(C.z,-C.x)}function x(C){return Math.atan2(-C.y,Math.sqrt(C.x*C.x+C.z*C.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Im(e.vertices,e.indices,e.radius,e.details)}}class gL extends Im{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,o=1/i,l=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-o,-i,0,-o,i,0,o,-i,0,o,i,-o,-i,0,-o,i,0,o,-i,0,o,i,0,-i,0,-o,i,0,-o,-i,0,o,i,0,o],d=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(l,d,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new gL(e.radius,e.detail)}}const Rk=new Le,Dk=new Le,CV=new Le,Ok=new Au;class l4e extends Kr{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const o=Math.pow(10,4),l=Math.cos(Ug*n),d=e.getIndex(),p=e.getAttribute("position"),g=d?d.count:p.count,v=[0,0,0],_=["a","b","c"],b=new Array(3),w={},E=[];for(let S=0;S<g;S+=3){d?(v[0]=d.getX(S),v[1]=d.getX(S+1),v[2]=d.getX(S+2)):(v[0]=S,v[1]=S+1,v[2]=S+2);const{a:M,b:k,c:x}=Ok;if(M.fromBufferAttribute(p,v[0]),k.fromBufferAttribute(p,v[1]),x.fromBufferAttribute(p,v[2]),Ok.getNormal(CV),b[0]=`${Math.round(M.x*o)},${Math.round(M.y*o)},${Math.round(M.z*o)}`,b[1]=`${Math.round(k.x*o)},${Math.round(k.y*o)},${Math.round(k.z*o)}`,b[2]=`${Math.round(x.x*o)},${Math.round(x.y*o)},${Math.round(x.z*o)}`,!(b[0]===b[1]||b[1]===b[2]||b[2]===b[0]))for(let C=0;C<3;C++){const P=(C+1)%3,O=b[C],L=b[P],B=Ok[_[C]],V=Ok[_[P]],G=`${O}_${L}`,j=`${L}_${O}`;j in w&&w[j]?(CV.dot(w[j].normal)<=l&&(E.push(B.x,B.y,B.z),E.push(V.x,V.y,V.z)),w[j]=null):G in w||(w[G]={index0:v[C],index1:v[P],normal:CV.clone()})}}for(const S in w)if(w[S]){const{index0:M,index1:k}=w[S];Rk.fromBufferAttribute(p,M),Dk.fromBufferAttribute(p,k),E.push(Rk.x,Rk.y,Rk.z),E.push(Dk.x,Dk.y,Dk.z)}this.setAttribute("position",new zn(E,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Fg extends XT{constructor(e){super(e),this.uuid=xu(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let i=0,o=this.holes.length;i<o;i++)n[i]=this.holes[i].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const o=e.holes[n];this.holes.push(o.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,i=this.holes.length;n<i;n++){const o=this.holes[n];e.holes.push(o.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,i=e.holes.length;n<i;n++){const o=e.holes[n];this.holes.push(new XT().fromJSON(o))}return this}}const wft={triangulate:function(t,e,n=2){const i=e&&e.length,o=i?e[0]*n:t.length;let l=c4e(t,0,o,n,!0);const d=[];if(!l||l.next===l.prev)return d;let p,g,v,_,b,w,E;if(i&&(l=Mft(t,e,l,n)),t.length>80*n){p=v=t[0],g=_=t[1];for(let S=n;S<o;S+=n)b=t[S],w=t[S+1],b<p&&(p=b),w<g&&(g=w),b>v&&(v=b),w>_&&(_=w);E=Math.max(v-p,_-g),E=E!==0?32767/E:0}return ZT(l,d,n,p,g,E,0),d}};function c4e(t,e,n,i,o){let l,d;if(o===Bft(t,e,n,i)>0)for(l=e;l<n;l+=i)d=Vae(l,t[l],t[l+1],d);else for(l=n-i;l>=e;l-=i)d=Vae(l,t[l],t[l+1],d);return d&&vL(d,d.next)&&(KT(d),d=d.next),d}function tv(t,e){if(!t)return t;e||(e=t);let n=t,i;do if(i=!1,!n.steiner&&(vL(n,n.next)||oo(n.prev,n,n.next)===0)){if(KT(n),n=e=n.prev,n===n.next)break;i=!0}else n=n.next;while(i||n!==e);return e}function ZT(t,e,n,i,o,l,d){if(!t)return;!d&&l&&Dft(t,i,o,l);let p=t,g,v;for(;t.prev!==t.next;){if(g=t.prev,v=t.next,l?Sft(t,i,o,l):Eft(t)){e.push(g.i/n|0),e.push(t.i/n|0),e.push(v.i/n|0),KT(t),t=v.next,p=v.next;continue}if(t=v,t===p){d?d===1?(t=Tft(tv(t),e,n),ZT(t,e,n,i,o,l,2)):d===2&&xft(t,e,n,i,o,l):ZT(tv(t),e,n,i,o,l,1);break}}}function Eft(t){const e=t.prev,n=t,i=t.next;if(oo(e,n,i)>=0)return!1;const o=e.x,l=n.x,d=i.x,p=e.y,g=n.y,v=i.y,_=o<l?o<d?o:d:l<d?l:d,b=p<g?p<v?p:v:g<v?g:v,w=o>l?o>d?o:d:l>d?l:d,E=p>g?p>v?p:v:g>v?g:v;let S=i.next;for(;S!==e;){if(S.x>=_&&S.x<=w&&S.y>=b&&S.y<=E&&ub(o,p,l,g,d,v,S.x,S.y)&&oo(S.prev,S,S.next)>=0)return!1;S=S.next}return!0}function Sft(t,e,n,i){const o=t.prev,l=t,d=t.next;if(oo(o,l,d)>=0)return!1;const p=o.x,g=l.x,v=d.x,_=o.y,b=l.y,w=d.y,E=p<g?p<v?p:v:g<v?g:v,S=_<b?_<w?_:w:b<w?b:w,M=p>g?p>v?p:v:g>v?g:v,k=_>b?_>w?_:w:b>w?b:w,x=J$(E,S,e,n,i),C=J$(M,k,e,n,i);let P=t.prevZ,O=t.nextZ;for(;P&&P.z>=x&&O&&O.z<=C;){if(P.x>=E&&P.x<=M&&P.y>=S&&P.y<=k&&P!==o&&P!==d&&ub(p,_,g,b,v,w,P.x,P.y)&&oo(P.prev,P,P.next)>=0||(P=P.prevZ,O.x>=E&&O.x<=M&&O.y>=S&&O.y<=k&&O!==o&&O!==d&&ub(p,_,g,b,v,w,O.x,O.y)&&oo(O.prev,O,O.next)>=0))return!1;O=O.nextZ}for(;P&&P.z>=x;){if(P.x>=E&&P.x<=M&&P.y>=S&&P.y<=k&&P!==o&&P!==d&&ub(p,_,g,b,v,w,P.x,P.y)&&oo(P.prev,P,P.next)>=0)return!1;P=P.prevZ}for(;O&&O.z<=C;){if(O.x>=E&&O.x<=M&&O.y>=S&&O.y<=k&&O!==o&&O!==d&&ub(p,_,g,b,v,w,O.x,O.y)&&oo(O.prev,O,O.next)>=0)return!1;O=O.nextZ}return!0}function Tft(t,e,n){let i=t;do{const o=i.prev,l=i.next.next;!vL(o,l)&&u4e(o,i,i.next,l)&&QT(o,l)&&QT(l,o)&&(e.push(o.i/n|0),e.push(i.i/n|0),e.push(l.i/n|0),KT(i),KT(i.next),i=t=l),i=i.next}while(i!==t);return tv(i)}function xft(t,e,n,i,o,l){let d=t;do{let p=d.next.next;for(;p!==d.prev;){if(d.i!==p.i&&Nft(d,p)){let g=f4e(d,p);d=tv(d,d.next),g=tv(g,g.next),ZT(d,e,n,i,o,l,0),ZT(g,e,n,i,o,l,0);return}p=p.next}d=d.next}while(d!==t)}function Mft(t,e,n,i){const o=[];let l,d,p,g,v;for(l=0,d=e.length;l<d;l++)p=e[l]*i,g=l<d-1?e[l+1]*i:t.length,v=c4e(t,p,g,i,!1),v===v.next&&(v.steiner=!0),o.push(Ift(v));for(o.sort(kft),l=0;l<o.length;l++)n=Cft(o[l],n);return n}function kft(t,e){return t.x-e.x}function Cft(t,e){const n=Pft(t,e);if(!n)return e;const i=f4e(n,t);return tv(i,i.next),tv(n,n.next)}function Pft(t,e){let n=e,i=-1/0,o;const l=t.x,d=t.y;do{if(d<=n.y&&d>=n.next.y&&n.next.y!==n.y){const w=n.x+(d-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(w<=l&&w>i&&(i=w,o=n.x<n.next.x?n:n.next,w===l))return o}n=n.next}while(n!==e);if(!o)return null;const p=o,g=o.x,v=o.y;let _=1/0,b;n=o;do l>=n.x&&n.x>=g&&l!==n.x&&ub(d<v?l:i,d,g,v,d<v?i:l,d,n.x,n.y)&&(b=Math.abs(d-n.y)/(l-n.x),QT(n,t)&&(b<_||b===_&&(n.x>o.x||n.x===o.x&&Rft(o,n)))&&(o=n,_=b)),n=n.next;while(n!==p);return o}function Rft(t,e){return oo(t.prev,t,e.prev)<0&&oo(e.next,t,t.next)<0}function Dft(t,e,n,i){let o=t;do o.z===0&&(o.z=J$(o.x,o.y,e,n,i)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==t);o.prevZ.nextZ=null,o.prevZ=null,Oft(o)}function Oft(t){let e,n,i,o,l,d,p,g,v=1;do{for(n=t,t=null,l=null,d=0;n;){for(d++,i=n,p=0,e=0;e<v&&(p++,i=i.nextZ,!!i);e++);for(g=v;p>0||g>0&&i;)p!==0&&(g===0||!i||n.z<=i.z)?(o=n,n=n.nextZ,p--):(o=i,i=i.nextZ,g--),l?l.nextZ=o:t=o,o.prevZ=l,l=o;n=i}l.nextZ=null,v*=2}while(d>1);return t}function J$(t,e,n,i,o){return t=(t-n)*o|0,e=(e-i)*o|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function Ift(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function ub(t,e,n,i,o,l,d,p){return(o-d)*(e-p)>=(t-d)*(l-p)&&(t-d)*(i-p)>=(n-d)*(e-p)&&(n-d)*(l-p)>=(o-d)*(i-p)}function Nft(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Lft(t,e)&&(QT(t,e)&&QT(e,t)&&zft(t,e)&&(oo(t.prev,t,e.prev)||oo(t,e.prev,e))||vL(t,e)&&oo(t.prev,t,t.next)>0&&oo(e.prev,e,e.next)>0)}function oo(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function vL(t,e){return t.x===e.x&&t.y===e.y}function u4e(t,e,n,i){const o=Nk(oo(t,e,n)),l=Nk(oo(t,e,i)),d=Nk(oo(n,i,t)),p=Nk(oo(n,i,e));return!!(o!==l&&d!==p||o===0&&Ik(t,n,e)||l===0&&Ik(t,i,e)||d===0&&Ik(n,t,i)||p===0&&Ik(n,e,i))}function Ik(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Nk(t){return t>0?1:t<0?-1:0}function Lft(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&u4e(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function QT(t,e){return oo(t.prev,t,t.next)<0?oo(t,e,t.next)>=0&&oo(t,t.prev,e)>=0:oo(t,e,t.prev)<0||oo(t,t.next,e)<0}function zft(t,e){let n=t,i=!1;const o=(t.x+e.x)/2,l=(t.y+e.y)/2;do n.y>l!=n.next.y>l&&n.next.y!==n.y&&o<(n.next.x-n.x)*(l-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==t);return i}function f4e(t,e){const n=new eW(t.i,t.x,t.y),i=new eW(e.i,e.x,e.y),o=t.next,l=e.prev;return t.next=e,e.prev=t,n.next=o,o.prev=n,i.next=n,n.prev=i,l.next=i,i.prev=l,i}function Vae(t,e,n,i){const o=new eW(t,e,n);return i?(o.next=i.next,o.prev=i,i.next.prev=o,i.next=o):(o.prev=o,o.next=o),o}function KT(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function eW(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Bft(t,e,n,i){let o=0;for(let l=e,d=n-i;l<n;l+=i)o+=(t[d]-t[l])*(t[l+1]+t[d+1]),d=l;return o}class kd{static area(e){const n=e.length;let i=0;for(let o=n-1,l=0;l<n;o=l++)i+=e[o].x*e[l].y-e[l].x*e[o].y;return i*.5}static isClockWise(e){return kd.area(e)<0}static triangulateShape(e,n){const i=[],o=[],l=[];Gae(e),jae(i,e);let d=e.length;n.forEach(Gae);for(let g=0;g<n.length;g++)o.push(d),d+=n[g].length,jae(i,n[g]);const p=wft.triangulate(i,o);for(let g=0;g<p.length;g+=3)l.push(p.slice(g,g+3));return l}}function Gae(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function jae(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class _L extends Kr{constructor(e=new Fg([new $t(.5,.5),new $t(-.5,.5),new $t(-.5,-.5),new $t(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const i=this,o=[],l=[];for(let p=0,g=e.length;p<g;p++){const v=e[p];d(v)}this.setAttribute("position",new zn(o,3)),this.setAttribute("uv",new zn(l,2)),this.computeVertexNormals();function d(p){const g=[],v=n.curveSegments!==void 0?n.curveSegments:12,_=n.steps!==void 0?n.steps:1,b=n.depth!==void 0?n.depth:1;let w=n.bevelEnabled!==void 0?n.bevelEnabled:!0,E=n.bevelThickness!==void 0?n.bevelThickness:.2,S=n.bevelSize!==void 0?n.bevelSize:E-.1,M=n.bevelOffset!==void 0?n.bevelOffset:0,k=n.bevelSegments!==void 0?n.bevelSegments:3;const x=n.extrudePath,C=n.UVGenerator!==void 0?n.UVGenerator:Uft;let P,O=!1,L,B,V,G;x&&(P=x.getSpacedPoints(_),O=!0,w=!1,L=x.computeFrenetFrames(_,!1),B=new Le,V=new Le,G=new Le),w||(k=0,E=0,S=0,M=0);const j=p.extractPoints(v);let F=j.shape;const q=j.holes;if(!kd.isClockWise(F)){F=F.reverse();for(let Re=0,Lt=q.length;Re<Lt;Re++){const mt=q[Re];kd.isClockWise(mt)&&(q[Re]=mt.reverse())}}const ue=kd.triangulateShape(F,q),J=F;for(let Re=0,Lt=q.length;Re<Lt;Re++){const mt=q[Re];F=F.concat(mt)}function le(Re,Lt,mt){return Lt||console.error("THREE.ExtrudeGeometry: vec does not exist"),Re.clone().addScaledVector(Lt,mt)}const me=F.length,be=ue.length;function ye(Re,Lt,mt){let ht,at,Mt;const Ot=Re.x-Lt.x,It=Re.y-Lt.y,Zt=mt.x-Re.x,ke=mt.y-Re.y,he=Ot*Ot+It*It,tt=Ot*ke-It*Zt;if(Math.abs(tt)>Number.EPSILON){const wt=Math.sqrt(he),St=Math.sqrt(Zt*Zt+ke*ke),De=Lt.x-It/wt,nt=Lt.y+Ot/wt,Et=mt.x-ke/St,Qe=mt.y+Zt/St,lt=((Et-De)*ke-(Qe-nt)*Zt)/(Ot*ke-It*Zt);ht=De+Ot*lt-Re.x,at=nt+It*lt-Re.y;const xt=ht*ht+at*at;if(xt<=2)return new $t(ht,at);Mt=Math.sqrt(xt/2)}else{let wt=!1;Ot>Number.EPSILON?Zt>Number.EPSILON&&(wt=!0):Ot<-Number.EPSILON?Zt<-Number.EPSILON&&(wt=!0):Math.sign(It)===Math.sign(ke)&&(wt=!0),wt?(ht=-It,at=Ot,Mt=Math.sqrt(he)):(ht=Ot,at=It,Mt=Math.sqrt(he/2))}return new $t(ht/Mt,at/Mt)}const pe=[];for(let Re=0,Lt=J.length,mt=Lt-1,ht=Re+1;Re<Lt;Re++,mt++,ht++)mt===Lt&&(mt=0),ht===Lt&&(ht=0),pe[Re]=ye(J[Re],J[mt],J[ht]);const oe=[];let Ce,it=pe.concat();for(let Re=0,Lt=q.length;Re<Lt;Re++){const mt=q[Re];Ce=[];for(let ht=0,at=mt.length,Mt=at-1,Ot=ht+1;ht<at;ht++,Mt++,Ot++)Mt===at&&(Mt=0),Ot===at&&(Ot=0),Ce[ht]=ye(mt[ht],mt[Mt],mt[Ot]);oe.push(Ce),it=it.concat(Ce)}for(let Re=0;Re<k;Re++){const Lt=Re/k,mt=E*Math.cos(Lt*Math.PI/2),ht=S*Math.sin(Lt*Math.PI/2)+M;for(let at=0,Mt=J.length;at<Mt;at++){const Ot=le(J[at],pe[at],ht);Nt(Ot.x,Ot.y,-mt)}for(let at=0,Mt=q.length;at<Mt;at++){const Ot=q[at];Ce=oe[at];for(let It=0,Zt=Ot.length;It<Zt;It++){const ke=le(Ot[It],Ce[It],ht);Nt(ke.x,ke.y,-mt)}}}const Se=S+M;for(let Re=0;Re<me;Re++){const Lt=w?le(F[Re],it[Re],Se):F[Re];O?(V.copy(L.normals[0]).multiplyScalar(Lt.x),B.copy(L.binormals[0]).multiplyScalar(Lt.y),G.copy(P[0]).add(V).add(B),Nt(G.x,G.y,G.z)):Nt(Lt.x,Lt.y,0)}for(let Re=1;Re<=_;Re++)for(let Lt=0;Lt<me;Lt++){const mt=w?le(F[Lt],it[Lt],Se):F[Lt];O?(V.copy(L.normals[Re]).multiplyScalar(mt.x),B.copy(L.binormals[Re]).multiplyScalar(mt.y),G.copy(P[Re]).add(V).add(B),Nt(G.x,G.y,G.z)):Nt(mt.x,mt.y,b/_*Re)}for(let Re=k-1;Re>=0;Re--){const Lt=Re/k,mt=E*Math.cos(Lt*Math.PI/2),ht=S*Math.sin(Lt*Math.PI/2)+M;for(let at=0,Mt=J.length;at<Mt;at++){const Ot=le(J[at],pe[at],ht);Nt(Ot.x,Ot.y,b+mt)}for(let at=0,Mt=q.length;at<Mt;at++){const Ot=q[at];Ce=oe[at];for(let It=0,Zt=Ot.length;It<Zt;It++){const ke=le(Ot[It],Ce[It],ht);O?Nt(ke.x,ke.y+P[_-1].y,P[_-1].x+mt):Nt(ke.x,ke.y,b+mt)}}}Oe(),ct();function Oe(){const Re=o.length/3;if(w){let Lt=0,mt=me*Lt;for(let ht=0;ht<be;ht++){const at=ue[ht];Je(at[2]+mt,at[1]+mt,at[0]+mt)}Lt=_+k*2,mt=me*Lt;for(let ht=0;ht<be;ht++){const at=ue[ht];Je(at[0]+mt,at[1]+mt,at[2]+mt)}}else{for(let Lt=0;Lt<be;Lt++){const mt=ue[Lt];Je(mt[2],mt[1],mt[0])}for(let Lt=0;Lt<be;Lt++){const mt=ue[Lt];Je(mt[0]+me*_,mt[1]+me*_,mt[2]+me*_)}}i.addGroup(Re,o.length/3-Re,0)}function ct(){const Re=o.length/3;let Lt=0;_t(J,Lt),Lt+=J.length;for(let mt=0,ht=q.length;mt<ht;mt++){const at=q[mt];_t(at,Lt),Lt+=at.length}i.addGroup(Re,o.length/3-Re,1)}function _t(Re,Lt){let mt=Re.length;for(;--mt>=0;){const ht=mt;let at=mt-1;at<0&&(at=Re.length-1);for(let Mt=0,Ot=_+k*2;Mt<Ot;Mt++){const It=me*Mt,Zt=me*(Mt+1),ke=Lt+ht+It,he=Lt+at+It,tt=Lt+at+Zt,wt=Lt+ht+Zt;ot(ke,he,tt,wt)}}}function Nt(Re,Lt,mt){g.push(Re),g.push(Lt),g.push(mt)}function Je(Re,Lt,mt){fn(Re),fn(Lt),fn(mt);const ht=o.length/3,at=C.generateTopUV(i,o,ht-3,ht-2,ht-1);Ht(at[0]),Ht(at[1]),Ht(at[2])}function ot(Re,Lt,mt,ht){fn(Re),fn(Lt),fn(ht),fn(Lt),fn(mt),fn(ht);const at=o.length/3,Mt=C.generateSideWallUV(i,o,at-6,at-3,at-2,at-1);Ht(Mt[0]),Ht(Mt[1]),Ht(Mt[3]),Ht(Mt[1]),Ht(Mt[2]),Ht(Mt[3])}function fn(Re){o.push(g[Re*3+0]),o.push(g[Re*3+1]),o.push(g[Re*3+2])}function Ht(Re){l.push(Re.x),l.push(Re.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,i=this.parameters.options;return Fft(n,i,e)}static fromJSON(e,n){const i=[];for(let l=0,d=e.shapes.length;l<d;l++){const p=n[e.shapes[l]];i.push(p)}const o=e.options.extrudePath;return o!==void 0&&(e.options.extrudePath=new nI[o.type]().fromJSON(o)),new _L(i,e.options)}}const Uft={generateTopUV:function(t,e,n,i,o){const l=e[n*3],d=e[n*3+1],p=e[i*3],g=e[i*3+1],v=e[o*3],_=e[o*3+1];return[new $t(l,d),new $t(p,g),new $t(v,_)]},generateSideWallUV:function(t,e,n,i,o,l){const d=e[n*3],p=e[n*3+1],g=e[n*3+2],v=e[i*3],_=e[i*3+1],b=e[i*3+2],w=e[o*3],E=e[o*3+1],S=e[o*3+2],M=e[l*3],k=e[l*3+1],x=e[l*3+2];return Math.abs(p-_)<Math.abs(d-v)?[new $t(d,1-g),new $t(v,1-b),new $t(w,1-S),new $t(M,1-x)]:[new $t(p,1-g),new $t(_,1-b),new $t(E,1-S),new $t(k,1-x)]}};function Fft(t,e,n){if(n.shapes=[],Array.isArray(t))for(let i=0,o=t.length;i<o;i++){const l=t[i];n.shapes.push(l.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class yL extends Im{constructor(e=1,n=0){const i=(1+Math.sqrt(5))/2,o=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],l=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(o,l,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new yL(e.radius,e.detail)}}class Tx extends Im{constructor(e=1,n=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],o=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,o,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new Tx(e.radius,e.detail)}}class bL extends Kr{constructor(e=.5,n=1,i=32,o=1,l=0,d=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:i,phiSegments:o,thetaStart:l,thetaLength:d},i=Math.max(3,i),o=Math.max(1,o);const p=[],g=[],v=[],_=[];let b=e;const w=(n-e)/o,E=new Le,S=new $t;for(let M=0;M<=o;M++){for(let k=0;k<=i;k++){const x=l+k/i*d;E.x=b*Math.cos(x),E.y=b*Math.sin(x),g.push(E.x,E.y,E.z),v.push(0,0,1),S.x=(E.x/n+1)/2,S.y=(E.y/n+1)/2,_.push(S.x,S.y)}b+=w}for(let M=0;M<o;M++){const k=M*(i+1);for(let x=0;x<i;x++){const C=x+k,P=C,O=C+i+1,L=C+i+2,B=C+1;p.push(P,O,B),p.push(O,L,B)}}this.setIndex(p),this.setAttribute("position",new zn(g,3)),this.setAttribute("normal",new zn(v,3)),this.setAttribute("uv",new zn(_,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new bL(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class AL extends Kr{constructor(e=new Fg([new $t(0,.5),new $t(-.5,-.5),new $t(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const i=[],o=[],l=[],d=[];let p=0,g=0;if(Array.isArray(e)===!1)v(e);else for(let _=0;_<e.length;_++)v(e[_]),this.addGroup(p,g,_),p+=g,g=0;this.setIndex(i),this.setAttribute("position",new zn(o,3)),this.setAttribute("normal",new zn(l,3)),this.setAttribute("uv",new zn(d,2));function v(_){const b=o.length/3,w=_.extractPoints(n);let E=w.shape;const S=w.holes;kd.isClockWise(E)===!1&&(E=E.reverse());for(let k=0,x=S.length;k<x;k++){const C=S[k];kd.isClockWise(C)===!0&&(S[k]=C.reverse())}const M=kd.triangulateShape(E,S);for(let k=0,x=S.length;k<x;k++){const C=S[k];E=E.concat(C)}for(let k=0,x=E.length;k<x;k++){const C=E[k];o.push(C.x,C.y,0),l.push(0,0,1),d.push(C.x,C.y)}for(let k=0,x=M.length;k<x;k++){const C=M[k],P=C[0]+b,O=C[1]+b,L=C[2]+b;i.push(P,O,L),g+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return Vft(n,e)}static fromJSON(e,n){const i=[];for(let o=0,l=e.shapes.length;o<l;o++){const d=n[e.shapes[o]];i.push(d)}return new AL(i,e.curveSegments)}}function Vft(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,i=t.length;n<i;n++){const o=t[n];e.shapes.push(o.uuid)}else e.shapes.push(t.uuid);return e}class xx extends Kr{constructor(e=1,n=32,i=16,o=0,l=Math.PI*2,d=0,p=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:i,phiStart:o,phiLength:l,thetaStart:d,thetaLength:p},n=Math.max(3,Math.floor(n)),i=Math.max(2,Math.floor(i));const g=Math.min(d+p,Math.PI);let v=0;const _=[],b=new Le,w=new Le,E=[],S=[],M=[],k=[];for(let x=0;x<=i;x++){const C=[],P=x/i;let O=0;x===0&&d===0?O=.5/n:x===i&&g===Math.PI&&(O=-.5/n);for(let L=0;L<=n;L++){const B=L/n;b.x=-e*Math.cos(o+B*l)*Math.sin(d+P*p),b.y=e*Math.cos(d+P*p),b.z=e*Math.sin(o+B*l)*Math.sin(d+P*p),S.push(b.x,b.y,b.z),w.copy(b).normalize(),M.push(w.x,w.y,w.z),k.push(B+O,1-P),C.push(v++)}_.push(C)}for(let x=0;x<i;x++)for(let C=0;C<n;C++){const P=_[x][C+1],O=_[x][C],L=_[x+1][C],B=_[x+1][C+1];(x!==0||d>0)&&E.push(P,O,B),(x!==i-1||g<Math.PI)&&E.push(O,L,B)}this.setIndex(E),this.setAttribute("position",new zn(S,3)),this.setAttribute("normal",new zn(M,3)),this.setAttribute("uv",new zn(k,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xx(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class wL extends Im{constructor(e=1,n=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],o=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,o,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new wL(e.radius,e.detail)}}class EL extends Kr{constructor(e=1,n=.4,i=12,o=48,l=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:i,tubularSegments:o,arc:l},i=Math.floor(i),o=Math.floor(o);const d=[],p=[],g=[],v=[],_=new Le,b=new Le,w=new Le;for(let E=0;E<=i;E++)for(let S=0;S<=o;S++){const M=S/o*l,k=E/i*Math.PI*2;b.x=(e+n*Math.cos(k))*Math.cos(M),b.y=(e+n*Math.cos(k))*Math.sin(M),b.z=n*Math.sin(k),p.push(b.x,b.y,b.z),_.x=e*Math.cos(M),_.y=e*Math.sin(M),w.subVectors(b,_).normalize(),g.push(w.x,w.y,w.z),v.push(S/o),v.push(E/i)}for(let E=1;E<=i;E++)for(let S=1;S<=o;S++){const M=(o+1)*E+S-1,k=(o+1)*(E-1)+S-1,x=(o+1)*(E-1)+S,C=(o+1)*E+S;d.push(M,k,C),d.push(k,x,C)}this.setIndex(d),this.setAttribute("position",new zn(p,3)),this.setAttribute("normal",new zn(g,3)),this.setAttribute("uv",new zn(v,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new EL(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class SL extends Kr{constructor(e=1,n=.4,i=64,o=8,l=2,d=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:i,radialSegments:o,p:l,q:d},i=Math.floor(i),o=Math.floor(o);const p=[],g=[],v=[],_=[],b=new Le,w=new Le,E=new Le,S=new Le,M=new Le,k=new Le,x=new Le;for(let P=0;P<=i;++P){const O=P/i*l*Math.PI*2;C(O,l,d,e,E),C(O+.01,l,d,e,S),k.subVectors(S,E),x.addVectors(S,E),M.crossVectors(k,x),x.crossVectors(M,k),M.normalize(),x.normalize();for(let L=0;L<=o;++L){const B=L/o*Math.PI*2,V=-n*Math.cos(B),G=n*Math.sin(B);b.x=E.x+(V*x.x+G*M.x),b.y=E.y+(V*x.y+G*M.y),b.z=E.z+(V*x.z+G*M.z),g.push(b.x,b.y,b.z),w.subVectors(b,E).normalize(),v.push(w.x,w.y,w.z),_.push(P/i),_.push(L/o)}}for(let P=1;P<=i;P++)for(let O=1;O<=o;O++){const L=(o+1)*(P-1)+(O-1),B=(o+1)*P+(O-1),V=(o+1)*P+O,G=(o+1)*(P-1)+O;p.push(L,B,G),p.push(B,V,G)}this.setIndex(p),this.setAttribute("position",new zn(g,3)),this.setAttribute("normal",new zn(v,3)),this.setAttribute("uv",new zn(_,2));function C(P,O,L,B,V){const G=Math.cos(P),j=Math.sin(P),F=L/O*P,q=Math.cos(F);V.x=B*(2+q)*.5*G,V.y=B*(2+q)*j*.5,V.z=B*Math.sin(F)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new SL(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class TL extends Kr{constructor(e=new WQ(new Le(-1,-1,0),new Le(-1,1,0),new Le(1,1,0)),n=64,i=1,o=8,l=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:i,radialSegments:o,closed:l};const d=e.computeFrenetFrames(n,l);this.tangents=d.tangents,this.normals=d.normals,this.binormals=d.binormals;const p=new Le,g=new Le,v=new $t;let _=new Le;const b=[],w=[],E=[],S=[];M(),this.setIndex(S),this.setAttribute("position",new zn(b,3)),this.setAttribute("normal",new zn(w,3)),this.setAttribute("uv",new zn(E,2));function M(){for(let P=0;P<n;P++)k(P);k(l===!1?n:0),C(),x()}function k(P){_=e.getPointAt(P/n,_);const O=d.normals[P],L=d.binormals[P];for(let B=0;B<=o;B++){const V=B/o*Math.PI*2,G=Math.sin(V),j=-Math.cos(V);g.x=j*O.x+G*L.x,g.y=j*O.y+G*L.y,g.z=j*O.z+G*L.z,g.normalize(),w.push(g.x,g.y,g.z),p.x=_.x+i*g.x,p.y=_.y+i*g.y,p.z=_.z+i*g.z,b.push(p.x,p.y,p.z)}}function x(){for(let P=1;P<=n;P++)for(let O=1;O<=o;O++){const L=(o+1)*(P-1)+(O-1),B=(o+1)*P+(O-1),V=(o+1)*P+O,G=(o+1)*(P-1)+O;S.push(L,B,G),S.push(B,V,G)}}function C(){for(let P=0;P<=n;P++)for(let O=0;O<=o;O++)v.x=P/n,v.y=O/o,E.push(v.x,v.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new TL(new nI[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class d4e extends Kr{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],i=new Set,o=new Le,l=new Le;if(e.index!==null){const d=e.attributes.position,p=e.index;let g=e.groups;g.length===0&&(g=[{start:0,count:p.count,materialIndex:0}]);for(let v=0,_=g.length;v<_;++v){const b=g[v],w=b.start,E=b.count;for(let S=w,M=w+E;S<M;S+=3)for(let k=0;k<3;k++){const x=p.getX(S+k),C=p.getX(S+(k+1)%3);o.fromBufferAttribute(d,x),l.fromBufferAttribute(d,C),Hae(o,l,i)===!0&&(n.push(o.x,o.y,o.z),n.push(l.x,l.y,l.z))}}}else{const d=e.attributes.position;for(let p=0,g=d.count/3;p<g;p++)for(let v=0;v<3;v++){const _=3*p+v,b=3*p+(v+1)%3;o.fromBufferAttribute(d,_),l.fromBufferAttribute(d,b),Hae(o,l,i)===!0&&(n.push(o.x,o.y,o.z),n.push(l.x,l.y,l.z))}}this.setAttribute("position",new zn(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function Hae(t,e,n){const i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,o=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(i)===!0||n.has(o)===!0?!1:(n.add(i),n.add(o),!0)}var $ae=Object.freeze({__proto__:null,BoxGeometry:mv,CapsuleGeometry:hL,CircleGeometry:pL,ConeGeometry:mL,CylinderGeometry:bA,DodecahedronGeometry:gL,EdgesGeometry:l4e,ExtrudeGeometry:_L,IcosahedronGeometry:yL,LatheGeometry:Sx,OctahedronGeometry:Tx,PlaneGeometry:_A,PolyhedronGeometry:Im,RingGeometry:bL,ShapeGeometry:AL,SphereGeometry:xx,TetrahedronGeometry:wL,TorusGeometry:EL,TorusKnotGeometry:SL,TubeGeometry:TL,WireframeGeometry:d4e});class h4e extends Dl{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Pn(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class p4e extends z0{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class qQ extends Dl{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Pn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Dm,this.normalScale=new $t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Du,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class m4e extends qQ{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new $t(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return po(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Pn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Pn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Pn(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class g4e extends Dl{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Pn(16777215),this.specular=new Pn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Dm,this.normalScale=new $t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Du,this.combine=bx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class v4e extends Dl{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Pn(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Dm,this.normalScale=new $t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class _4e extends Dl{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Dm,this.normalScale=new $t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class y4e extends Dl{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Pn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Pn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Dm,this.normalScale=new $t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Du,this.combine=bx,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class b4e extends Dl{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Pn(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Dm,this.normalScale=new $t(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class A4e extends nc{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Pg(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function w4e(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function E4e(t){function e(o,l){return t[o]-t[l]}const n=t.length,i=new Array(n);for(let o=0;o!==n;++o)i[o]=o;return i.sort(e),i}function tW(t,e,n){const i=t.length,o=new t.constructor(i);for(let l=0,d=0;d!==i;++l){const p=n[l]*e;for(let g=0;g!==e;++g)o[d++]=t[p+g]}return o}function XQ(t,e,n,i){let o=1,l=t[0];for(;l!==void 0&&l[i]===void 0;)l=t[o++];if(l===void 0)return;let d=l[i];if(d!==void 0)if(Array.isArray(d))do d=l[i],d!==void 0&&(e.push(l.time),n.push.apply(n,d)),l=t[o++];while(l!==void 0);else if(d.toArray!==void 0)do d=l[i],d!==void 0&&(e.push(l.time),d.toArray(n,n.length)),l=t[o++];while(l!==void 0);else do d=l[i],d!==void 0&&(e.push(l.time),n.push(d)),l=t[o++];while(l!==void 0)}function Gft(t,e,n,i,o=30){const l=t.clone();l.name=e;const d=[];for(let g=0;g<l.tracks.length;++g){const v=l.tracks[g],_=v.getValueSize(),b=[],w=[];for(let E=0;E<v.times.length;++E){const S=v.times[E]*o;if(!(S<n||S>=i)){b.push(v.times[E]);for(let M=0;M<_;++M)w.push(v.values[E*_+M])}}b.length!==0&&(v.times=Pg(b,v.times.constructor),v.values=Pg(w,v.values.constructor),d.push(v))}l.tracks=d;let p=1/0;for(let g=0;g<l.tracks.length;++g)p>l.tracks[g].times[0]&&(p=l.tracks[g].times[0]);for(let g=0;g<l.tracks.length;++g)l.tracks[g].shift(-1*p);return l.resetDuration(),l}function jft(t,e=0,n=t,i=30){i<=0&&(i=30);const o=n.tracks.length,l=e/i;for(let d=0;d<o;++d){const p=n.tracks[d],g=p.ValueTypeName;if(g==="bool"||g==="string")continue;const v=t.tracks.find(function(x){return x.name===p.name&&x.ValueTypeName===g});if(v===void 0)continue;let _=0;const b=p.getValueSize();p.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(_=b/3);let w=0;const E=v.getValueSize();v.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(w=E/3);const S=p.times.length-1;let M;if(l<=p.times[0]){const x=_,C=b-_;M=p.values.slice(x,C)}else if(l>=p.times[S]){const x=S*b+_,C=x+b-_;M=p.values.slice(x,C)}else{const x=p.createInterpolant(),C=_,P=b-_;x.evaluate(l),M=x.resultBuffer.slice(C,P)}g==="quaternion"&&new Gc().fromArray(M).normalize().conjugate().toArray(M);const k=v.times.length;for(let x=0;x<k;++x){const C=x*E+w;if(g==="quaternion")Gc.multiplyQuaternionsFlat(v.values,C,M,0,v.values,C);else{const P=E-w*2;for(let O=0;O<P;++O)v.values[C+O]-=M[O]}}}return t.blendMode=kQ,t}const Hft={convertArray:Pg,isTypedArray:w4e,getKeyframeOrder:E4e,sortedArray:tW,flattenJSON:XQ,subclip:Gft,makeClipAdditive:jft};class Mx{constructor(e,n,i,o){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=o!==void 0?o:new n.constructor(i),this.sampleValues=n,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let i=this._cachedIndex,o=n[i],l=n[i-1];e:{t:{let d;n:{i:if(!(e<o)){for(let p=i+2;;){if(o===void 0){if(e<l)break i;return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===p)break;if(l=o,o=n[++i],e<o)break t}d=n.length;break n}if(!(e>=l)){const p=n[1];e<p&&(i=2,l=p);for(let g=i-2;;){if(l===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===g)break;if(o=l,l=n[--i-1],e>=l)break t}d=i,i=0;break n}break e}for(;i<d;){const p=i+d>>>1;e<n[p]?d=p:i=p+1}if(o=n[i],l=n[i-1],l===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(o===void 0)return i=n.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,l,o)}return this.interpolate_(i,l,e,o)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,i=this.sampleValues,o=this.valueSize,l=e*o;for(let d=0;d!==o;++d)n[d]=i[l+d];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class S4e extends Mx{constructor(e,n,i,o){super(e,n,i,o),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Mg,endingEnd:Mg}}intervalChanged_(e,n,i){const o=this.parameterPositions;let l=e-2,d=e+1,p=o[l],g=o[d];if(p===void 0)switch(this.getSettings_().endingStart){case kg:l=e,p=2*n-i;break;case GT:l=o.length-2,p=n+o[l]-o[l+1];break;default:l=e,p=i}if(g===void 0)switch(this.getSettings_().endingEnd){case kg:d=e,g=2*i-n;break;case GT:d=1,g=i+o[1]-o[0];break;default:d=e-1,g=n}const v=(i-n)*.5,_=this.valueSize;this._weightPrev=v/(n-p),this._weightNext=v/(g-i),this._offsetPrev=l*_,this._offsetNext=d*_}interpolate_(e,n,i,o){const l=this.resultBuffer,d=this.sampleValues,p=this.valueSize,g=e*p,v=g-p,_=this._offsetPrev,b=this._offsetNext,w=this._weightPrev,E=this._weightNext,S=(i-n)/(o-n),M=S*S,k=M*S,x=-w*k+2*w*M-w*S,C=(1+w)*k+(-1.5-2*w)*M+(-.5+w)*S+1,P=(-1-E)*k+(1.5+E)*M+.5*S,O=E*k-E*M;for(let L=0;L!==p;++L)l[L]=x*d[_+L]+C*d[v+L]+P*d[g+L]+O*d[b+L];return l}}class ZQ extends Mx{constructor(e,n,i,o){super(e,n,i,o)}interpolate_(e,n,i,o){const l=this.resultBuffer,d=this.sampleValues,p=this.valueSize,g=e*p,v=g-p,_=(i-n)/(o-n),b=1-_;for(let w=0;w!==p;++w)l[w]=d[v+w]*b+d[g+w]*_;return l}}class T4e extends Mx{constructor(e,n,i,o){super(e,n,i,o)}interpolate_(e){return this.copySampleValue_(e-1)}}class G0{constructor(e,n,i,o){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Pg(n,this.TimeBufferType),this.values=Pg(i,this.ValueBufferType),this.setInterpolation(o||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let i;if(n.toJSON!==this.toJSON)i=n.toJSON(e);else{i={name:e.name,times:Pg(e.times,Array),values:Pg(e.values,Array)};const o=e.getInterpolation();o!==e.DefaultInterpolation&&(i.interpolation=o)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new T4e(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new ZQ(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new S4e(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case FT:n=this.InterpolantFactoryMethodDiscrete;break;case VT:n=this.InterpolantFactoryMethodLinear;break;case dD:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return FT;case this.InterpolantFactoryMethodLinear:return VT;case this.InterpolantFactoryMethodSmooth:return dD}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let i=0,o=n.length;i!==o;++i)n[i]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let i=0,o=n.length;i!==o;++i)n[i]*=e}return this}trim(e,n){const i=this.times,o=i.length;let l=0,d=o-1;for(;l!==o&&i[l]<e;)++l;for(;d!==-1&&i[d]>n;)--d;if(++d,l!==0||d!==o){l>=d&&(d=Math.max(d,1),l=d-1);const p=this.getValueSize();this.times=i.slice(l,d),this.values=this.values.slice(l*p,d*p)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,o=this.values,l=i.length;l===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let d=null;for(let p=0;p!==l;p++){const g=i[p];if(typeof g=="number"&&isNaN(g)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,p,g),e=!1;break}if(d!==null&&d>g){console.error("THREE.KeyframeTrack: Out of order keys.",this,p,g,d),e=!1;break}d=g}if(o!==void 0&&w4e(o))for(let p=0,g=o.length;p!==g;++p){const v=o[p];if(isNaN(v)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,p,v),e=!1;break}}return e}optimize(){const e=this.times.slice(),n=this.values.slice(),i=this.getValueSize(),o=this.getInterpolation()===dD,l=e.length-1;let d=1;for(let p=1;p<l;++p){let g=!1;const v=e[p],_=e[p+1];if(v!==_&&(p!==1||v!==e[0]))if(o)g=!0;else{const b=p*i,w=b-i,E=b+i;for(let S=0;S!==i;++S){const M=n[b+S];if(M!==n[w+S]||M!==n[E+S]){g=!0;break}}}if(g){if(p!==d){e[d]=e[p];const b=p*i,w=d*i;for(let E=0;E!==i;++E)n[w+E]=n[b+E]}++d}}if(l>0){e[d]=e[l];for(let p=l*i,g=d*i,v=0;v!==i;++v)n[g+v]=n[p+v];++d}return d!==e.length?(this.times=e.slice(0,d),this.values=n.slice(0,d*i)):(this.times=e,this.values=n),this}clone(){const e=this.times.slice(),n=this.values.slice(),i=this.constructor,o=new i(this.name,e,n);return o.createInterpolant=this.createInterpolant,o}}G0.prototype.TimeBufferType=Float32Array;G0.prototype.ValueBufferType=Float32Array;G0.prototype.DefaultInterpolation=VT;class gv extends G0{}gv.prototype.ValueTypeName="bool";gv.prototype.ValueBufferType=Array;gv.prototype.DefaultInterpolation=FT;gv.prototype.InterpolantFactoryMethodLinear=void 0;gv.prototype.InterpolantFactoryMethodSmooth=void 0;class QQ extends G0{}QQ.prototype.ValueTypeName="color";class JT extends G0{}JT.prototype.ValueTypeName="number";class x4e extends Mx{constructor(e,n,i,o){super(e,n,i,o)}interpolate_(e,n,i,o){const l=this.resultBuffer,d=this.sampleValues,p=this.valueSize,g=(i-n)/(o-n);let v=e*p;for(let _=v+p;v!==_;v+=4)Gc.slerpFlat(l,0,d,v-p,d,v,g);return l}}class AA extends G0{InterpolantFactoryMethodLinear(e){return new x4e(this.times,this.values,this.getValueSize(),e)}}AA.prototype.ValueTypeName="quaternion";AA.prototype.DefaultInterpolation=VT;AA.prototype.InterpolantFactoryMethodSmooth=void 0;class vv extends G0{}vv.prototype.ValueTypeName="string";vv.prototype.ValueBufferType=Array;vv.prototype.DefaultInterpolation=FT;vv.prototype.InterpolantFactoryMethodLinear=void 0;vv.prototype.InterpolantFactoryMethodSmooth=void 0;class e6 extends G0{}e6.prototype.ValueTypeName="vector";class t6{constructor(e,n=-1,i,o=eL){this.name=e,this.tracks=i,this.duration=n,this.blendMode=o,this.uuid=xu(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],i=e.tracks,o=1/(e.fps||1);for(let d=0,p=i.length;d!==p;++d)n.push(Wft(i[d]).scale(o));const l=new this(e.name,e.duration,n,e.blendMode);return l.uuid=e.uuid,l}static toJSON(e){const n=[],i=e.tracks,o={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let l=0,d=i.length;l!==d;++l)n.push(G0.toJSON(i[l]));return o}static CreateFromMorphTargetSequence(e,n,i,o){const l=n.length,d=[];for(let p=0;p<l;p++){let g=[],v=[];g.push((p+l-1)%l,p,(p+1)%l),v.push(0,1,0);const _=E4e(g);g=tW(g,1,_),v=tW(v,1,_),!o&&g[0]===0&&(g.push(l),v.push(v[0])),d.push(new JT(".morphTargetInfluences["+n[p].name+"]",g,v).scale(1/i))}return new this(e,-1,d)}static findByName(e,n){let i=e;if(!Array.isArray(e)){const o=e;i=o.geometry&&o.geometry.animations||o.animations}for(let o=0;o<i.length;o++)if(i[o].name===n)return i[o];return null}static CreateClipsFromMorphTargetSequences(e,n,i){const o={},l=/^([\w-]*?)([\d]+)$/;for(let p=0,g=e.length;p<g;p++){const v=e[p],_=v.name.match(l);if(_&&_.length>1){const b=_[1];let w=o[b];w||(o[b]=w=[]),w.push(v)}}const d=[];for(const p in o)d.push(this.CreateFromMorphTargetSequence(p,o[p],n,i));return d}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(b,w,E,S,M){if(E.length!==0){const k=[],x=[];XQ(E,k,x,S),k.length!==0&&M.push(new b(w,k,x))}},o=[],l=e.name||"default",d=e.fps||30,p=e.blendMode;let g=e.length||-1;const v=e.hierarchy||[];for(let b=0;b<v.length;b++){const w=v[b].keys;if(!(!w||w.length===0))if(w[0].morphTargets){const E={};let S;for(S=0;S<w.length;S++)if(w[S].morphTargets)for(let M=0;M<w[S].morphTargets.length;M++)E[w[S].morphTargets[M]]=-1;for(const M in E){const k=[],x=[];for(let C=0;C!==w[S].morphTargets.length;++C){const P=w[S];k.push(P.time),x.push(P.morphTarget===M?1:0)}o.push(new JT(".morphTargetInfluence["+M+"]",k,x))}g=E.length*d}else{const E=".bones["+n[b].name+"]";i(e6,E+".position",w,"pos",o),i(AA,E+".quaternion",w,"rot",o),i(e6,E+".scale",w,"scl",o)}}return o.length===0?null:new this(l,g,o,p)}resetDuration(){const e=this.tracks;let n=0;for(let i=0,o=e.length;i!==o;++i){const l=this.tracks[i];n=Math.max(n,l.times[l.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function $ft(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return JT;case"vector":case"vector2":case"vector3":case"vector4":return e6;case"color":return QQ;case"quaternion":return AA;case"bool":case"boolean":return gv;case"string":return vv}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function Wft(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=$ft(t.type);if(t.times===void 0){const n=[],i=[];XQ(t.keys,n,i,"value"),t.times=n,t.values=i}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const $h={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class KQ{constructor(e,n,i){const o=this;let l=!1,d=0,p=0,g;const v=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=i,this.itemStart=function(_){p++,l===!1&&o.onStart!==void 0&&o.onStart(_,d,p),l=!0},this.itemEnd=function(_){d++,o.onProgress!==void 0&&o.onProgress(_,d,p),d===p&&(l=!1,o.onLoad!==void 0&&o.onLoad())},this.itemError=function(_){o.onError!==void 0&&o.onError(_)},this.resolveURL=function(_){return g?g(_):_},this.setURLModifier=function(_){return g=_,this},this.addHandler=function(_,b){return v.push(_,b),this},this.removeHandler=function(_){const b=v.indexOf(_);return b!==-1&&v.splice(b,2),this},this.getHandler=function(_){for(let b=0,w=v.length;b<w;b+=2){const E=v[b],S=v[b+1];if(E.global&&(E.lastIndex=0),E.test(_))return S}return null}}}const M4e=new KQ;class $c{constructor(e){this.manager=e!==void 0?e:M4e,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const i=this;return new Promise(function(o,l){i.load(e,o,n,l)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}$c.DEFAULT_MATERIAL_NAME="__DEFAULT";const lh={};class Yft extends Error{constructor(e,n){super(e),this.response=n}}class vp extends $c{constructor(e){super(e)}load(e,n,i,o){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const l=$h.get(e);if(l!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(l),this.manager.itemEnd(e)},0),l;if(lh[e]!==void 0){lh[e].push({onLoad:n,onProgress:i,onError:o});return}lh[e]=[],lh[e].push({onLoad:n,onProgress:i,onError:o});const d=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),p=this.mimeType,g=this.responseType;fetch(d).then(v=>{if(v.status===200||v.status===0){if(v.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||v.body===void 0||v.body.getReader===void 0)return v;const _=lh[e],b=v.body.getReader(),w=v.headers.get("Content-Length")||v.headers.get("X-File-Size"),E=w?parseInt(w):0,S=E!==0;let M=0;const k=new ReadableStream({start(x){C();function C(){b.read().then(({done:P,value:O})=>{if(P)x.close();else{M+=O.byteLength;const L=new ProgressEvent("progress",{lengthComputable:S,loaded:M,total:E});for(let B=0,V=_.length;B<V;B++){const G=_[B];G.onProgress&&G.onProgress(L)}x.enqueue(O),C()}})}}});return new Response(k)}else throw new Yft(`fetch for "${v.url}" responded with ${v.status}: ${v.statusText}`,v)}).then(v=>{switch(g){case"arraybuffer":return v.arrayBuffer();case"blob":return v.blob();case"document":return v.text().then(_=>new DOMParser().parseFromString(_,p));case"json":return v.json();default:if(p===void 0)return v.text();{const b=/charset="?([^;"\s]*)"?/i.exec(p),w=b&&b[1]?b[1].toLowerCase():void 0,E=new TextDecoder(w);return v.arrayBuffer().then(S=>E.decode(S))}}}).then(v=>{$h.add(e,v);const _=lh[e];delete lh[e];for(let b=0,w=_.length;b<w;b++){const E=_[b];E.onLoad&&E.onLoad(v)}}).catch(v=>{const _=lh[e];if(_===void 0)throw this.manager.itemError(e),v;delete lh[e];for(let b=0,w=_.length;b<w;b++){const E=_[b];E.onError&&E.onError(v)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class qft extends $c{constructor(e){super(e)}load(e,n,i,o){const l=this,d=new vp(this.manager);d.setPath(this.path),d.setRequestHeader(this.requestHeader),d.setWithCredentials(this.withCredentials),d.load(e,function(p){try{n(l.parse(JSON.parse(p)))}catch(g){o?o(g):console.error(g),l.manager.itemError(e)}},i,o)}parse(e){const n=[];for(let i=0;i<e.length;i++){const o=t6.parse(e[i]);n.push(o)}return n}}class Xft extends $c{constructor(e){super(e)}load(e,n,i,o){const l=this,d=[],p=new fL,g=new vp(this.manager);g.setPath(this.path),g.setResponseType("arraybuffer"),g.setRequestHeader(this.requestHeader),g.setWithCredentials(l.withCredentials);let v=0;function _(b){g.load(e[b],function(w){const E=l.parse(w,!0);d[b]={width:E.width,height:E.height,format:E.format,mipmaps:E.mipmaps},v+=1,v===6&&(E.mipmapCount===1&&(p.minFilter=so),p.image=d,p.format=E.format,p.needsUpdate=!0,n&&n(p))},i,o)}if(Array.isArray(e))for(let b=0,w=e.length;b<w;++b)_(b);else g.load(e,function(b){const w=l.parse(b,!0);if(w.isCubemap){const E=w.mipmaps.length/w.mipmapCount;for(let S=0;S<E;S++){d[S]={mipmaps:[]};for(let M=0;M<w.mipmapCount;M++)d[S].mipmaps.push(w.mipmaps[S*w.mipmapCount+M]),d[S].format=w.format,d[S].width=w.width,d[S].height=w.height}p.image=d}else p.image.width=w.width,p.image.height=w.height,p.mipmaps=w.mipmaps;w.mipmapCount===1&&(p.minFilter=so),p.format=w.format,p.needsUpdate=!0,n&&n(p)},i,o);return p}}class n6 extends $c{constructor(e){super(e)}load(e,n,i,o){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const l=this,d=$h.get(e);if(d!==void 0)return l.manager.itemStart(e),setTimeout(function(){n&&n(d),l.manager.itemEnd(e)},0),d;const p=qT("img");function g(){_(),$h.add(e,this),n&&n(this),l.manager.itemEnd(e)}function v(b){_(),o&&o(b),l.manager.itemError(e),l.manager.itemEnd(e)}function _(){p.removeEventListener("load",g,!1),p.removeEventListener("error",v,!1)}return p.addEventListener("load",g,!1),p.addEventListener("error",v,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(p.crossOrigin=this.crossOrigin),l.manager.itemStart(e),p.src=e,p}}class Zft extends $c{constructor(e){super(e)}load(e,n,i,o){const l=new wx;l.colorSpace=uf;const d=new n6(this.manager);d.setCrossOrigin(this.crossOrigin),d.setPath(this.path);let p=0;function g(v){d.load(e[v],function(_){l.images[v]=_,p++,p===6&&(l.needsUpdate=!0,n&&n(l))},void 0,o)}for(let v=0;v<e.length;++v)g(v);return l}}class Qft extends $c{constructor(e){super(e)}load(e,n,i,o){const l=this,d=new im,p=new vp(this.manager);return p.setResponseType("arraybuffer"),p.setRequestHeader(this.requestHeader),p.setPath(this.path),p.setWithCredentials(l.withCredentials),p.load(e,function(g){let v;try{v=l.parse(g)}catch(_){if(o!==void 0)o(_);else{console.error(_);return}}v.image!==void 0?d.image=v.image:v.data!==void 0&&(d.image.width=v.width,d.image.height=v.height,d.image.data=v.data),d.wrapS=v.wrapS!==void 0?v.wrapS:xl,d.wrapT=v.wrapT!==void 0?v.wrapT:xl,d.magFilter=v.magFilter!==void 0?v.magFilter:so,d.minFilter=v.minFilter!==void 0?v.minFilter:so,d.anisotropy=v.anisotropy!==void 0?v.anisotropy:1,v.colorSpace!==void 0&&(d.colorSpace=v.colorSpace),v.flipY!==void 0&&(d.flipY=v.flipY),v.format!==void 0&&(d.format=v.format),v.type!==void 0&&(d.type=v.type),v.mipmaps!==void 0&&(d.mipmaps=v.mipmaps,d.minFilter=Ed),v.mipmapCount===1&&(d.minFilter=so),v.generateMipmaps!==void 0&&(d.generateMipmaps=v.generateMipmaps),d.needsUpdate=!0,n&&n(d,v)},i,o),d}}class Kft extends $c{constructor(e){super(e)}load(e,n,i,o){const l=new mo,d=new n6(this.manager);return d.setCrossOrigin(this.crossOrigin),d.setPath(this.path),d.load(e,function(p){l.image=p,l.needsUpdate=!0,n!==void 0&&n(l)},i,o),l}}class Nm extends Li{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new Pn(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class k4e extends Nm{constructor(e,n,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Li.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Pn(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const PV=new cr,Wae=new Le,Yae=new Le;class JQ{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new $t(512,512),this.map=null,this.mapPass=null,this.matrix=new cr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Ex,this._frameExtents=new $t(1,1),this._viewportCount=1,this._viewports=[new fs(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,i=this.matrix;Wae.setFromMatrixPosition(e.matrixWorld),n.position.copy(Wae),Yae.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(Yae),n.updateMatrixWorld(),PV.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(PV),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(PV)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Jft extends JQ{constructor(){super(new Ha(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,i=b4*2*e.angle*this.focus,o=this.mapSize.width/this.mapSize.height,l=e.distance||n.far;(i!==n.fov||o!==n.aspect||l!==n.far)&&(n.fov=i,n.aspect=o,n.far=l,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class C4e extends Nm{constructor(e,n,i=0,o=Math.PI/3,l=0,d=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Li.DEFAULT_UP),this.updateMatrix(),this.target=new Li,this.distance=i,this.angle=o,this.penumbra=l,this.decay=d,this.map=null,this.shadow=new Jft}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const qae=new cr,U3=new Le,RV=new Le;class e0t extends JQ{constructor(){super(new Ha(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new $t(4,2),this._viewportCount=6,this._viewports=[new fs(2,1,1,1),new fs(0,1,1,1),new fs(3,1,1,1),new fs(1,1,1,1),new fs(3,0,1,1),new fs(1,0,1,1)],this._cubeDirections=[new Le(1,0,0),new Le(-1,0,0),new Le(0,0,1),new Le(0,0,-1),new Le(0,1,0),new Le(0,-1,0)],this._cubeUps=[new Le(0,1,0),new Le(0,1,0),new Le(0,1,0),new Le(0,1,0),new Le(0,0,1),new Le(0,0,-1)]}updateMatrices(e,n=0){const i=this.camera,o=this.matrix,l=e.distance||i.far;l!==i.far&&(i.far=l,i.updateProjectionMatrix()),U3.setFromMatrixPosition(e.matrixWorld),i.position.copy(U3),RV.copy(i.position),RV.add(this._cubeDirections[n]),i.up.copy(this._cubeUps[n]),i.lookAt(RV),i.updateMatrixWorld(),o.makeTranslation(-U3.x,-U3.y,-U3.z),qae.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(qae)}}class P4e extends Nm{constructor(e,n,i=0,o=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=o,this.shadow=new e0t}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class t0t extends JQ{constructor(){super(new sL(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class R4e extends Nm{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Li.DEFAULT_UP),this.updateMatrix(),this.target=new Li,this.shadow=new t0t}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class D4e extends Nm{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class O4e extends Nm{constructor(e,n,i=10,o=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=o}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class I4e{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Le)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const i=e.x,o=e.y,l=e.z,d=this.coefficients;return n.copy(d[0]).multiplyScalar(.282095),n.addScaledVector(d[1],.488603*o),n.addScaledVector(d[2],.488603*l),n.addScaledVector(d[3],.488603*i),n.addScaledVector(d[4],1.092548*(i*o)),n.addScaledVector(d[5],1.092548*(o*l)),n.addScaledVector(d[6],.315392*(3*l*l-1)),n.addScaledVector(d[7],1.092548*(i*l)),n.addScaledVector(d[8],.546274*(i*i-o*o)),n}getIrradianceAt(e,n){const i=e.x,o=e.y,l=e.z,d=this.coefficients;return n.copy(d[0]).multiplyScalar(.886227),n.addScaledVector(d[1],2*.511664*o),n.addScaledVector(d[2],2*.511664*l),n.addScaledVector(d[3],2*.511664*i),n.addScaledVector(d[4],2*.429043*i*o),n.addScaledVector(d[5],2*.429043*o*l),n.addScaledVector(d[6],.743125*l*l-.247708),n.addScaledVector(d[7],2*.429043*i*l),n.addScaledVector(d[8],.429043*(i*i-o*o)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const i=this.coefficients;for(let o=0;o<9;o++)i[o].fromArray(e,n+o*3);return this}toArray(e=[],n=0){const i=this.coefficients;for(let o=0;o<9;o++)i[o].toArray(e,n+o*3);return e}static getBasisAt(e,n){const i=e.x,o=e.y,l=e.z;n[0]=.282095,n[1]=.488603*o,n[2]=.488603*l,n[3]=.488603*i,n[4]=1.092548*i*o,n[5]=1.092548*o*l,n[6]=.315392*(3*l*l-1),n[7]=1.092548*i*l,n[8]=.546274*(i*i-o*o)}}class N4e extends Nm{constructor(e=new I4e,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}let L4e=class z4e extends $c{constructor(e){super(e),this.textures={}}load(e,n,i,o){const l=this,d=new vp(l.manager);d.setPath(l.path),d.setRequestHeader(l.requestHeader),d.setWithCredentials(l.withCredentials),d.load(e,function(p){try{n(l.parse(JSON.parse(p)))}catch(g){o?o(g):console.error(g),l.manager.itemError(e)}},i,o)}parse(e){const n=this.textures;function i(l){return n[l]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",l),n[l]}const o=z4e.createMaterialFromType(e.type);if(e.uuid!==void 0&&(o.uuid=e.uuid),e.name!==void 0&&(o.name=e.name),e.color!==void 0&&o.color!==void 0&&o.color.setHex(e.color),e.roughness!==void 0&&(o.roughness=e.roughness),e.metalness!==void 0&&(o.metalness=e.metalness),e.sheen!==void 0&&(o.sheen=e.sheen),e.sheenColor!==void 0&&(o.sheenColor=new Pn().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(o.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&o.emissive!==void 0&&o.emissive.setHex(e.emissive),e.specular!==void 0&&o.specular!==void 0&&o.specular.setHex(e.specular),e.specularIntensity!==void 0&&(o.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&o.specularColor!==void 0&&o.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(o.shininess=e.shininess),e.clearcoat!==void 0&&(o.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(o.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(o.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(o.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(o.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(o.transmission=e.transmission),e.thickness!==void 0&&(o.thickness=e.thickness),e.attenuationDistance!==void 0&&(o.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&o.attenuationColor!==void 0&&o.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(o.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(o.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(o.fog=e.fog),e.flatShading!==void 0&&(o.flatShading=e.flatShading),e.blending!==void 0&&(o.blending=e.blending),e.combine!==void 0&&(o.combine=e.combine),e.side!==void 0&&(o.side=e.side),e.shadowSide!==void 0&&(o.shadowSide=e.shadowSide),e.opacity!==void 0&&(o.opacity=e.opacity),e.transparent!==void 0&&(o.transparent=e.transparent),e.alphaTest!==void 0&&(o.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(o.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(o.depthFunc=e.depthFunc),e.depthTest!==void 0&&(o.depthTest=e.depthTest),e.depthWrite!==void 0&&(o.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(o.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(o.blendSrc=e.blendSrc),e.blendDst!==void 0&&(o.blendDst=e.blendDst),e.blendEquation!==void 0&&(o.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(o.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(o.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(o.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&o.blendColor!==void 0&&o.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(o.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(o.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(o.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(o.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(o.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(o.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(o.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(o.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(o.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(o.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(o.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(o.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(o.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(o.rotation=e.rotation),e.linewidth!==void 0&&(o.linewidth=e.linewidth),e.dashSize!==void 0&&(o.dashSize=e.dashSize),e.gapSize!==void 0&&(o.gapSize=e.gapSize),e.scale!==void 0&&(o.scale=e.scale),e.polygonOffset!==void 0&&(o.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(o.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(o.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(o.dithering=e.dithering),e.alphaToCoverage!==void 0&&(o.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(o.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(o.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(o.visible=e.visible),e.toneMapped!==void 0&&(o.toneMapped=e.toneMapped),e.userData!==void 0&&(o.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?o.vertexColors=e.vertexColors>0:o.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const l in e.uniforms){const d=e.uniforms[l];switch(o.uniforms[l]={},d.type){case"t":o.uniforms[l].value=i(d.value);break;case"c":o.uniforms[l].value=new Pn().setHex(d.value);break;case"v2":o.uniforms[l].value=new $t().fromArray(d.value);break;case"v3":o.uniforms[l].value=new Le().fromArray(d.value);break;case"v4":o.uniforms[l].value=new fs().fromArray(d.value);break;case"m3":o.uniforms[l].value=new Vr().fromArray(d.value);break;case"m4":o.uniforms[l].value=new cr().fromArray(d.value);break;default:o.uniforms[l].value=d.value}}if(e.defines!==void 0&&(o.defines=e.defines),e.vertexShader!==void 0&&(o.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(o.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(o.glslVersion=e.glslVersion),e.extensions!==void 0)for(const l in e.extensions)o.extensions[l]=e.extensions[l];if(e.lights!==void 0&&(o.lights=e.lights),e.clipping!==void 0&&(o.clipping=e.clipping),e.size!==void 0&&(o.size=e.size),e.sizeAttenuation!==void 0&&(o.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(o.map=i(e.map)),e.matcap!==void 0&&(o.matcap=i(e.matcap)),e.alphaMap!==void 0&&(o.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(o.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(o.bumpScale=e.bumpScale),e.normalMap!==void 0&&(o.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(o.normalMapType=e.normalMapType),e.normalScale!==void 0){let l=e.normalScale;Array.isArray(l)===!1&&(l=[l,l]),o.normalScale=new $t().fromArray(l)}return e.displacementMap!==void 0&&(o.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(o.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(o.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(o.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(o.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(o.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(o.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(o.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(o.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(o.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(o.envMap=i(e.envMap)),e.envMapRotation!==void 0&&o.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(o.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(o.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(o.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(o.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(o.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(o.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(o.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(o.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(o.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(o.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(o.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(o.clearcoatNormalScale=new $t().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(o.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(o.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(o.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(o.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(o.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(o.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(o.sheenRoughnessMap=i(e.sheenRoughnessMap)),o}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const n={ShadowMaterial:h4e,SpriteMaterial:UQ,RawShaderMaterial:p4e,ShaderMaterial:z0,PointsMaterial:VQ,MeshPhysicalMaterial:m4e,MeshStandardMaterial:qQ,MeshPhongMaterial:g4e,MeshToonMaterial:v4e,MeshNormalMaterial:_4e,MeshLambertMaterial:y4e,MeshDepthMaterial:zQ,MeshDistanceMaterial:BQ,MeshBasicMaterial:Om,MeshMatcapMaterial:b4e,LineDashedMaterial:A4e,LineBasicMaterial:nc,Material:Dl};return new n[e]}};class nW{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let i=0,o=e.length;i<o;i++)n+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class B4e extends Kr{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class U4e extends $c{constructor(e){super(e)}load(e,n,i,o){const l=this,d=new vp(l.manager);d.setPath(l.path),d.setRequestHeader(l.requestHeader),d.setWithCredentials(l.withCredentials),d.load(e,function(p){try{n(l.parse(JSON.parse(p)))}catch(g){o?o(g):console.error(g),l.manager.itemError(e)}},i,o)}parse(e){const n={},i={};function o(E,S){if(n[S]!==void 0)return n[S];const k=E.interleavedBuffers[S],x=l(E,k.buffer),C=ob(k.type,x),P=new cL(C,k.stride);return P.uuid=k.uuid,n[S]=P,P}function l(E,S){if(i[S]!==void 0)return i[S];const k=E.arrayBuffers[S],x=new Uint32Array(k).buffer;return i[S]=x,x}const d=e.isInstancedBufferGeometry?new B4e:new Kr,p=e.data.index;if(p!==void 0){const E=ob(p.type,p.array);d.setIndex(new _s(E,1))}const g=e.data.attributes;for(const E in g){const S=g[E];let M;if(S.isInterleavedBufferAttribute){const k=o(e.data,S.data);M=new ev(k,S.itemSize,S.offset,S.normalized)}else{const k=ob(S.type,S.array),x=S.isInstancedBufferAttribute?w4:_s;M=new x(k,S.itemSize,S.normalized)}S.name!==void 0&&(M.name=S.name),S.usage!==void 0&&M.setUsage(S.usage),d.setAttribute(E,M)}const v=e.data.morphAttributes;if(v)for(const E in v){const S=v[E],M=[];for(let k=0,x=S.length;k<x;k++){const C=S[k];let P;if(C.isInterleavedBufferAttribute){const O=o(e.data,C.data);P=new ev(O,C.itemSize,C.offset,C.normalized)}else{const O=ob(C.type,C.array);P=new _s(O,C.itemSize,C.normalized)}C.name!==void 0&&(P.name=C.name),M.push(P)}d.morphAttributes[E]=M}e.data.morphTargetsRelative&&(d.morphTargetsRelative=!0);const b=e.data.groups||e.data.drawcalls||e.data.offsets;if(b!==void 0)for(let E=0,S=b.length;E!==S;++E){const M=b[E];d.addGroup(M.start,M.count,M.materialIndex)}const w=e.data.boundingSphere;if(w!==void 0){const E=new Le;w.center!==void 0&&E.fromArray(w.center),d.boundingSphere=new Ml(E,w.radius)}return e.name&&(d.name=e.name),e.userData&&(d.userData=e.userData),d}}class n0t extends $c{constructor(e){super(e)}load(e,n,i,o){const l=this,d=this.path===""?nW.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||d;const p=new vp(this.manager);p.setPath(this.path),p.setRequestHeader(this.requestHeader),p.setWithCredentials(this.withCredentials),p.load(e,function(g){let v=null;try{v=JSON.parse(g)}catch(b){o!==void 0&&o(b),console.error("THREE:ObjectLoader: Can't parse "+e+".",b.message);return}const _=v.metadata;if(_===void 0||_.type===void 0||_.type.toLowerCase()==="geometry"){o!==void 0&&o(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}l.parse(v,n)},i,o)}async loadAsync(e,n){const i=this,o=this.path===""?nW.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const l=new vp(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials);const d=await l.loadAsync(e,n),p=JSON.parse(d),g=p.metadata;if(g===void 0||g.type===void 0||g.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(p)}parse(e,n){const i=this.parseAnimations(e.animations),o=this.parseShapes(e.shapes),l=this.parseGeometries(e.geometries,o),d=this.parseImages(e.images,function(){n!==void 0&&n(v)}),p=this.parseTextures(e.textures,d),g=this.parseMaterials(e.materials,p),v=this.parseObject(e.object,l,g,p,i),_=this.parseSkeletons(e.skeletons,v);if(this.bindSkeletons(v,_),n!==void 0){let b=!1;for(const w in d)if(d[w].data instanceof HTMLImageElement){b=!0;break}b===!1&&n(v)}return v}async parseAsync(e){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),o=this.parseGeometries(e.geometries,i),l=await this.parseImagesAsync(e.images),d=this.parseTextures(e.textures,l),p=this.parseMaterials(e.materials,d),g=this.parseObject(e.object,o,p,d,n),v=this.parseSkeletons(e.skeletons,g);return this.bindSkeletons(g,v),g}parseShapes(e){const n={};if(e!==void 0)for(let i=0,o=e.length;i<o;i++){const l=new Fg().fromJSON(e[i]);n[l.uuid]=l}return n}parseSkeletons(e,n){const i={},o={};if(n.traverse(function(l){l.isBone&&(o[l.uuid]=l)}),e!==void 0)for(let l=0,d=e.length;l<d;l++){const p=new uL().fromJSON(e[l],o);i[p.uuid]=p}return i}parseGeometries(e,n){const i={};if(e!==void 0){const o=new U4e;for(let l=0,d=e.length;l<d;l++){let p;const g=e[l];switch(g.type){case"BufferGeometry":case"InstancedBufferGeometry":p=o.parse(g);break;default:g.type in $ae?p=$ae[g.type].fromJSON(g,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${g.type}"`)}p.uuid=g.uuid,g.name!==void 0&&(p.name=g.name),g.userData!==void 0&&(p.userData=g.userData),i[g.uuid]=p}}return i}parseMaterials(e,n){const i={},o={};if(e!==void 0){const l=new L4e;l.setTextures(n);for(let d=0,p=e.length;d<p;d++){const g=e[d];i[g.uuid]===void 0&&(i[g.uuid]=l.parse(g)),o[g.uuid]=i[g.uuid]}}return o}parseAnimations(e){const n={};if(e!==void 0)for(let i=0;i<e.length;i++){const o=e[i],l=t6.parse(o);n[l.uuid]=l}return n}parseImages(e,n){const i=this,o={};let l;function d(g){return i.manager.itemStart(g),l.load(g,function(){i.manager.itemEnd(g)},void 0,function(){i.manager.itemError(g),i.manager.itemEnd(g)})}function p(g){if(typeof g=="string"){const v=g,_=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(v)?v:i.resourcePath+v;return d(_)}else return g.data?{data:ob(g.type,g.data),width:g.width,height:g.height}:null}if(e!==void 0&&e.length>0){const g=new KQ(n);l=new n6(g),l.setCrossOrigin(this.crossOrigin);for(let v=0,_=e.length;v<_;v++){const b=e[v],w=b.url;if(Array.isArray(w)){const E=[];for(let S=0,M=w.length;S<M;S++){const k=w[S],x=p(k);x!==null&&(x instanceof HTMLImageElement?E.push(x):E.push(new im(x.data,x.width,x.height)))}o[b.uuid]=new Cg(E)}else{const E=p(b.url);o[b.uuid]=new Cg(E)}}}return o}async parseImagesAsync(e){const n=this,i={};let o;async function l(d){if(typeof d=="string"){const p=d,g=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:n.resourcePath+p;return await o.loadAsync(g)}else return d.data?{data:ob(d.type,d.data),width:d.width,height:d.height}:null}if(e!==void 0&&e.length>0){o=new n6(this.manager),o.setCrossOrigin(this.crossOrigin);for(let d=0,p=e.length;d<p;d++){const g=e[d],v=g.url;if(Array.isArray(v)){const _=[];for(let b=0,w=v.length;b<w;b++){const E=v[b],S=await l(E);S!==null&&(S instanceof HTMLImageElement?_.push(S):_.push(new im(S.data,S.width,S.height)))}i[g.uuid]=new Cg(_)}else{const _=await l(g.url);i[g.uuid]=new Cg(_)}}}return i}parseTextures(e,n){function i(l,d){return typeof l=="number"?l:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",l),d[l])}const o={};if(e!==void 0)for(let l=0,d=e.length;l<d;l++){const p=e[l];p.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',p.uuid),n[p.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",p.image);const g=n[p.image],v=g.data;let _;Array.isArray(v)?(_=new wx,v.length===6&&(_.needsUpdate=!0)):(v&&v.data?_=new im:_=new mo,v&&(_.needsUpdate=!0)),_.source=g,_.uuid=p.uuid,p.name!==void 0&&(_.name=p.name),p.mapping!==void 0&&(_.mapping=i(p.mapping,r0t)),p.channel!==void 0&&(_.channel=p.channel),p.offset!==void 0&&_.offset.fromArray(p.offset),p.repeat!==void 0&&_.repeat.fromArray(p.repeat),p.center!==void 0&&_.center.fromArray(p.center),p.rotation!==void 0&&(_.rotation=p.rotation),p.wrap!==void 0&&(_.wrapS=i(p.wrap[0],Xae),_.wrapT=i(p.wrap[1],Xae)),p.format!==void 0&&(_.format=p.format),p.internalFormat!==void 0&&(_.internalFormat=p.internalFormat),p.type!==void 0&&(_.type=p.type),p.colorSpace!==void 0&&(_.colorSpace=p.colorSpace),p.minFilter!==void 0&&(_.minFilter=i(p.minFilter,Zae)),p.magFilter!==void 0&&(_.magFilter=i(p.magFilter,Zae)),p.anisotropy!==void 0&&(_.anisotropy=p.anisotropy),p.flipY!==void 0&&(_.flipY=p.flipY),p.generateMipmaps!==void 0&&(_.generateMipmaps=p.generateMipmaps),p.premultiplyAlpha!==void 0&&(_.premultiplyAlpha=p.premultiplyAlpha),p.unpackAlignment!==void 0&&(_.unpackAlignment=p.unpackAlignment),p.compareFunction!==void 0&&(_.compareFunction=p.compareFunction),p.userData!==void 0&&(_.userData=p.userData),o[p.uuid]=_}return o}parseObject(e,n,i,o,l){let d;function p(w){return n[w]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",w),n[w]}function g(w){if(w!==void 0){if(Array.isArray(w)){const E=[];for(let S=0,M=w.length;S<M;S++){const k=w[S];i[k]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",k),E.push(i[k])}return E}return i[w]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",w),i[w]}}function v(w){return o[w]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",w),o[w]}let _,b;switch(e.type){case"Scene":d=new qbe,e.background!==void 0&&(Number.isInteger(e.background)?d.background=new Pn(e.background):d.background=v(e.background)),e.environment!==void 0&&(d.environment=v(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?d.fog=new lL(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(d.fog=new aL(e.fog.color,e.fog.density)),e.fog.name!==""&&(d.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(d.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(d.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&d.backgroundRotation.fromArray(e.backgroundRotation),e.environmentRotation!==void 0&&d.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":d=new Ha(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(d.focus=e.focus),e.zoom!==void 0&&(d.zoom=e.zoom),e.filmGauge!==void 0&&(d.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(d.filmOffset=e.filmOffset),e.view!==void 0&&(d.view=Object.assign({},e.view));break;case"OrthographicCamera":d=new sL(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(d.zoom=e.zoom),e.view!==void 0&&(d.view=Object.assign({},e.view));break;case"AmbientLight":d=new D4e(e.color,e.intensity);break;case"DirectionalLight":d=new R4e(e.color,e.intensity);break;case"PointLight":d=new P4e(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":d=new O4e(e.color,e.intensity,e.width,e.height);break;case"SpotLight":d=new C4e(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":d=new k4e(e.color,e.groundColor,e.intensity);break;case"LightProbe":d=new N4e().fromJSON(e);break;case"SkinnedMesh":_=p(e.geometry),b=g(e.material),d=new Kbe(_,b),e.bindMode!==void 0&&(d.bindMode=e.bindMode),e.bindMatrix!==void 0&&d.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(d.skeleton=e.skeleton);break;case"Mesh":_=p(e.geometry),b=g(e.material),d=new jo(_,b);break;case"InstancedMesh":_=p(e.geometry),b=g(e.material);const w=e.count,E=e.instanceMatrix,S=e.instanceColor;d=new Jbe(_,b,w),d.instanceMatrix=new w4(new Float32Array(E.array),16),S!==void 0&&(d.instanceColor=new w4(new Float32Array(S.array),S.itemSize));break;case"BatchedMesh":_=p(e.geometry),b=g(e.material),d=new e4e(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,b),d.geometry=_,d.perObjectFrustumCulled=e.perObjectFrustumCulled,d.sortObjects=e.sortObjects,d._drawRanges=e.drawRanges,d._reservedRanges=e.reservedRanges,d._visibility=e.visibility,d._active=e.active,d._bounds=e.bounds.map(M=>{const k=new Ql;k.min.fromArray(M.boxMin),k.max.fromArray(M.boxMax);const x=new Ml;return x.radius=M.sphereRadius,x.center.fromArray(M.sphereCenter),{boxInitialized:M.boxInitialized,box:k,sphereInitialized:M.sphereInitialized,sphere:x}}),d._maxGeometryCount=e.maxGeometryCount,d._maxVertexCount=e.maxVertexCount,d._maxIndexCount=e.maxIndexCount,d._geometryInitialized=e.geometryInitialized,d._geometryCount=e.geometryCount,d._matricesTexture=v(e.matricesTexture.uuid);break;case"LOD":d=new Qbe;break;case"Line":d=new _m(p(e.geometry),g(e.material));break;case"LineLoop":d=new t4e(p(e.geometry),g(e.material));break;case"LineSegments":d=new Ud(p(e.geometry),g(e.material));break;case"PointCloud":case"Points":d=new n4e(p(e.geometry),g(e.material));break;case"Sprite":d=new Zbe(g(e.material));break;case"Group":d=new cb;break;case"Bone":d=new FQ;break;default:d=new Li}if(d.uuid=e.uuid,e.name!==void 0&&(d.name=e.name),e.matrix!==void 0?(d.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(d.matrixAutoUpdate=e.matrixAutoUpdate),d.matrixAutoUpdate&&d.matrix.decompose(d.position,d.quaternion,d.scale)):(e.position!==void 0&&d.position.fromArray(e.position),e.rotation!==void 0&&d.rotation.fromArray(e.rotation),e.quaternion!==void 0&&d.quaternion.fromArray(e.quaternion),e.scale!==void 0&&d.scale.fromArray(e.scale)),e.up!==void 0&&d.up.fromArray(e.up),e.castShadow!==void 0&&(d.castShadow=e.castShadow),e.receiveShadow!==void 0&&(d.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(d.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(d.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(d.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&d.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(d.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(d.visible=e.visible),e.frustumCulled!==void 0&&(d.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(d.renderOrder=e.renderOrder),e.userData!==void 0&&(d.userData=e.userData),e.layers!==void 0&&(d.layers.mask=e.layers),e.children!==void 0){const w=e.children;for(let E=0;E<w.length;E++)d.add(this.parseObject(w[E],n,i,o,l))}if(e.animations!==void 0){const w=e.animations;for(let E=0;E<w.length;E++){const S=w[E];d.animations.push(l[S])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(d.autoUpdate=e.autoUpdate);const w=e.levels;for(let E=0;E<w.length;E++){const S=w[E],M=d.getObjectByProperty("uuid",S.object);M!==void 0&&d.addLevel(M,S.distance,S.hysteresis)}}return d}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const o=n[i.skeleton];o===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(o,i.bindMatrix)}})}}const r0t={UVMapping:KN,CubeReflectionMapping:gp,CubeRefractionMapping:vm,EquirectangularReflectionMapping:LT,EquirectangularRefractionMapping:zT,CubeUVReflectionMapping:gA},Xae={RepeatWrapping:BT,ClampToEdgeWrapping:xl,MirroredRepeatWrapping:UT},Zae={NearestFilter:ko,NearestMipmapNearestFilter:JO,NearestMipmapLinearFilter:mg,LinearFilter:so,LinearMipmapNearestFilter:XS,LinearMipmapLinearFilter:Ed};class i0t extends $c{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,i,o){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const l=this,d=$h.get(e);if(d!==void 0){if(l.manager.itemStart(e),d.then){d.then(v=>{n&&n(v),l.manager.itemEnd(e)}).catch(v=>{o&&o(v)});return}return setTimeout(function(){n&&n(d),l.manager.itemEnd(e)},0),d}const p={};p.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",p.headers=this.requestHeader;const g=fetch(e,p).then(function(v){return v.blob()}).then(function(v){return createImageBitmap(v,Object.assign(l.options,{colorSpaceConversion:"none"}))}).then(function(v){return $h.add(e,v),n&&n(v),l.manager.itemEnd(e),v}).catch(function(v){o&&o(v),$h.remove(e),l.manager.itemError(e),l.manager.itemEnd(e)});$h.add(e,g),l.manager.itemStart(e)}}let Lk;class eK{static getContext(){return Lk===void 0&&(Lk=new(window.AudioContext||window.webkitAudioContext)),Lk}static setContext(e){Lk=e}}class s0t extends $c{constructor(e){super(e)}load(e,n,i,o){const l=this,d=new vp(this.manager);d.setResponseType("arraybuffer"),d.setPath(this.path),d.setRequestHeader(this.requestHeader),d.setWithCredentials(this.withCredentials),d.load(e,function(g){try{const v=g.slice(0);eK.getContext().decodeAudioData(v,function(b){n(b)}).catch(p)}catch(v){p(v)}},i,o);function p(g){o?o(g):console.error(g),l.manager.itemError(e)}}}const Qae=new cr,Kae=new cr,w1=new cr;class o0t{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ha,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ha,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,w1.copy(e.projectionMatrix);const o=n.eyeSep/2,l=o*n.near/n.focus,d=n.near*Math.tan(Ug*n.fov*.5)/n.zoom;let p,g;Kae.elements[12]=-o,Qae.elements[12]=o,p=-d*n.aspect+l,g=d*n.aspect+l,w1.elements[0]=2*n.near/(g-p),w1.elements[8]=(g+p)/(g-p),this.cameraL.projectionMatrix.copy(w1),p=-d*n.aspect-l,g=d*n.aspect-l,w1.elements[0]=2*n.near/(g-p),w1.elements[8]=(g+p)/(g-p),this.cameraR.projectionMatrix.copy(w1)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Kae),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Qae)}}class F4e{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Jae(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=Jae();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function Jae(){return(typeof performance>"u"?Date:performance).now()}const E1=new Le,ele=new Gc,a0t=new Le,S1=new Le;class l0t extends Li{constructor(){super(),this.type="AudioListener",this.context=eK.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new F4e}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(E1,ele,a0t),S1.set(0,0,-1).applyQuaternion(ele),n.positionX){const o=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(E1.x,o),n.positionY.linearRampToValueAtTime(E1.y,o),n.positionZ.linearRampToValueAtTime(E1.z,o),n.forwardX.linearRampToValueAtTime(S1.x,o),n.forwardY.linearRampToValueAtTime(S1.y,o),n.forwardZ.linearRampToValueAtTime(S1.z,o),n.upX.linearRampToValueAtTime(i.x,o),n.upY.linearRampToValueAtTime(i.y,o),n.upZ.linearRampToValueAtTime(i.z,o)}else n.setPosition(E1.x,E1.y,E1.z),n.setOrientation(S1.x,S1.y,S1.z,i.x,i.y,i.z)}}class V4e extends Li{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const T1=new Le,tle=new Gc,c0t=new Le,x1=new Le;class u0t extends V4e{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(T1,tle,c0t),x1.set(0,0,1).applyQuaternion(tle);const n=this.panner;if(n.positionX){const i=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(T1.x,i),n.positionY.linearRampToValueAtTime(T1.y,i),n.positionZ.linearRampToValueAtTime(T1.z,i),n.orientationX.linearRampToValueAtTime(x1.x,i),n.orientationY.linearRampToValueAtTime(x1.y,i),n.orientationZ.linearRampToValueAtTime(x1.z,i)}else n.setPosition(T1.x,T1.y,T1.z),n.setOrientation(x1.x,x1.y,x1.z)}}class f0t{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let i=0;i<n.length;i++)e+=n[i];return e/n.length}}class G4e{constructor(e,n,i){this.binding=e,this.valueSize=i;let o,l,d;switch(n){case"quaternion":o=this._slerp,l=this._slerpAdditive,d=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":o=this._select,l=this._select,d=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:o=this._lerp,l=this._lerpAdditive,d=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=o,this._mixBufferRegionAdditive=l,this._setIdentity=d,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const i=this.buffer,o=this.valueSize,l=e*o+o;let d=this.cumulativeWeight;if(d===0){for(let p=0;p!==o;++p)i[l+p]=i[p];d=n}else{d+=n;const p=n/d;this._mixBufferRegion(i,l,0,p,o)}this.cumulativeWeight=d}accumulateAdditive(e){const n=this.buffer,i=this.valueSize,o=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,o,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,i=this.buffer,o=e*n+n,l=this.cumulativeWeight,d=this.cumulativeWeightAdditive,p=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,l<1){const g=n*this._origIndex;this._mixBufferRegion(i,o,g,1-l,n)}d>0&&this._mixBufferRegionAdditive(i,o,this._addIndex*n,1,n);for(let g=n,v=n+n;g!==v;++g)if(i[g]!==i[g+n]){p.setValue(i,o);break}}saveOriginalState(){const e=this.binding,n=this.buffer,i=this.valueSize,o=i*this._origIndex;e.getValue(n,o);for(let l=i,d=o;l!==d;++l)n[l]=n[o+l%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let i=e;i<n;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[n+i]=this.buffer[e+i]}_select(e,n,i,o,l){if(o>=.5)for(let d=0;d!==l;++d)e[n+d]=e[i+d]}_slerp(e,n,i,o){Gc.slerpFlat(e,n,e,n,e,i,o)}_slerpAdditive(e,n,i,o,l){const d=this._workIndex*l;Gc.multiplyQuaternionsFlat(e,d,e,n,e,i),Gc.slerpFlat(e,n,e,n,e,d,o)}_lerp(e,n,i,o,l){const d=1-o;for(let p=0;p!==l;++p){const g=n+p;e[g]=e[g]*d+e[i+p]*o}}_lerpAdditive(e,n,i,o,l){for(let d=0;d!==l;++d){const p=n+d;e[p]=e[p]+e[i+d]*o}}}const tK="\\[\\]\\.:\\/",d0t=new RegExp("["+tK+"]","g"),nK="[^"+tK+"]",h0t="[^"+tK.replace("\\.","")+"]",p0t=/((?:WC+[\/:])*)/.source.replace("WC",nK),m0t=/(WCOD+)?/.source.replace("WCOD",h0t),g0t=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",nK),v0t=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",nK),_0t=new RegExp("^"+p0t+m0t+g0t+v0t+"$"),y0t=["material","materials","bones","map"];class b0t{constructor(e,n,i){const o=i||ki.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,o)}getValue(e,n){this.bind();const i=this._targetGroup.nCachedObjects_,o=this._bindings[i];o!==void 0&&o.getValue(e,n)}setValue(e,n){const i=this._bindings;for(let o=this._targetGroup.nCachedObjects_,l=i.length;o!==l;++o)i[o].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,i=e.length;n!==i;++n)e[n].unbind()}}class ki{constructor(e,n,i){this.path=n,this.parsedPath=i||ki.parseTrackName(n),this.node=ki.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,i){return e&&e.isAnimationObjectGroup?new ki.Composite(e,n,i):new ki(e,n,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(d0t,"")}static parseTrackName(e){const n=_0t.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},o=i.nodeName&&i.nodeName.lastIndexOf(".");if(o!==void 0&&o!==-1){const l=i.nodeName.substring(o+1);y0t.indexOf(l)!==-1&&(i.nodeName=i.nodeName.substring(0,o),i.objectName=l)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(n);if(i!==void 0)return i}if(e.children){const i=function(l){for(let d=0;d<l.length;d++){const p=l[d];if(p.name===n||p.uuid===n)return p;const g=i(p.children);if(g)return g}return null},o=i(e.children);if(o)return o}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const i=this.resolvedProperty;for(let o=0,l=i.length;o!==l;++o)e[n++]=i[o]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const i=this.resolvedProperty;for(let o=0,l=i.length;o!==l;++o)i[o]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const i=this.resolvedProperty;for(let o=0,l=i.length;o!==l;++o)i[o]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const i=this.resolvedProperty;for(let o=0,l=i.length;o!==l;++o)i[o]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,i=n.objectName,o=n.propertyName;let l=n.propertyIndex;if(e||(e=ki.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let v=n.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let _=0;_<e.length;_++)if(e[_].name===v){v=_;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(v!==void 0){if(e[v]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[v]}}const d=e[o];if(d===void 0){const v=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+v+"."+o+" but it wasn't found.",e);return}let p=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?p=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(p=this.Versioning.MatrixWorldNeedsUpdate);let g=this.BindingType.Direct;if(l!==void 0){if(o==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[l]!==void 0&&(l=e.morphTargetDictionary[l])}g=this.BindingType.ArrayElement,this.resolvedProperty=d,this.propertyIndex=l}else d.fromArray!==void 0&&d.toArray!==void 0?(g=this.BindingType.HasFromToArray,this.resolvedProperty=d):Array.isArray(d)?(g=this.BindingType.EntireArray,this.resolvedProperty=d):this.propertyName=o;this.getValue=this.GetterByBindingType[g],this.setValue=this.SetterByBindingTypeAndVersioning[g][p]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}ki.Composite=b0t;ki.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};ki.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};ki.prototype.GetterByBindingType=[ki.prototype._getValue_direct,ki.prototype._getValue_array,ki.prototype._getValue_arrayElement,ki.prototype._getValue_toArray];ki.prototype.SetterByBindingTypeAndVersioning=[[ki.prototype._setValue_direct,ki.prototype._setValue_direct_setNeedsUpdate,ki.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ki.prototype._setValue_array,ki.prototype._setValue_array_setNeedsUpdate,ki.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ki.prototype._setValue_arrayElement,ki.prototype._setValue_arrayElement_setNeedsUpdate,ki.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ki.prototype._setValue_fromArray,ki.prototype._setValue_fromArray_setNeedsUpdate,ki.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class A0t{constructor(){this.isAnimationObjectGroup=!0,this.uuid=xu(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,o=arguments.length;i!==o;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,i=this._paths,o=this._parsedPaths,l=this._bindings,d=l.length;let p,g=e.length,v=this.nCachedObjects_;for(let _=0,b=arguments.length;_!==b;++_){const w=arguments[_],E=w.uuid;let S=n[E];if(S===void 0){S=g++,n[E]=S,e.push(w);for(let M=0,k=d;M!==k;++M)l[M].push(new ki(w,i[M],o[M]))}else if(S<v){p=e[S];const M=--v,k=e[M];n[k.uuid]=S,e[S]=k,n[E]=M,e[M]=w;for(let x=0,C=d;x!==C;++x){const P=l[x],O=P[M];let L=P[S];P[S]=O,L===void 0&&(L=new ki(w,i[x],o[x])),P[M]=L}}else e[S]!==p&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=v}remove(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,o=i.length;let l=this.nCachedObjects_;for(let d=0,p=arguments.length;d!==p;++d){const g=arguments[d],v=g.uuid,_=n[v];if(_!==void 0&&_>=l){const b=l++,w=e[b];n[w.uuid]=_,e[_]=w,n[v]=b,e[b]=g;for(let E=0,S=o;E!==S;++E){const M=i[E],k=M[b],x=M[_];M[_]=k,M[b]=x}}}this.nCachedObjects_=l}uncache(){const e=this._objects,n=this._indicesByUUID,i=this._bindings,o=i.length;let l=this.nCachedObjects_,d=e.length;for(let p=0,g=arguments.length;p!==g;++p){const v=arguments[p],_=v.uuid,b=n[_];if(b!==void 0)if(delete n[_],b<l){const w=--l,E=e[w],S=--d,M=e[S];n[E.uuid]=b,e[b]=E,n[M.uuid]=w,e[w]=M,e.pop();for(let k=0,x=o;k!==x;++k){const C=i[k],P=C[w],O=C[S];C[b]=P,C[w]=O,C.pop()}}else{const w=--d,E=e[w];w>0&&(n[E.uuid]=b),e[b]=E,e.pop();for(let S=0,M=o;S!==M;++S){const k=i[S];k[b]=k[w],k.pop()}}}this.nCachedObjects_=l}subscribe_(e,n){const i=this._bindingsIndicesByPath;let o=i[e];const l=this._bindings;if(o!==void 0)return l[o];const d=this._paths,p=this._parsedPaths,g=this._objects,v=g.length,_=this.nCachedObjects_,b=new Array(v);o=l.length,i[e]=o,d.push(e),p.push(n),l.push(b);for(let w=_,E=g.length;w!==E;++w){const S=g[w];b[w]=new ki(S,e,n)}return b}unsubscribe_(e){const n=this._bindingsIndicesByPath,i=n[e];if(i!==void 0){const o=this._paths,l=this._parsedPaths,d=this._bindings,p=d.length-1,g=d[p],v=e[p];n[v]=i,d[i]=g,d.pop(),l[i]=l[p],l.pop(),o[i]=o[p],o.pop()}}}class j4e{constructor(e,n,i=null,o=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=i,this.blendMode=o;const l=n.tracks,d=l.length,p=new Array(d),g={endingStart:Mg,endingEnd:Mg};for(let v=0;v!==d;++v){const _=l[v].createInterpolant(null);p[v]=_,_.settings=g}this._interpolantSettings=g,this._interpolants=p,this._propertyBindings=new Array(d),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=vbe,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,i){if(e.fadeOut(n),this.fadeIn(n),i){const o=this._clip.duration,l=e._clip.duration,d=l/o,p=o/l;e.warp(1,d,n),this.warp(p,1,n)}return this}crossFadeTo(e,n,i){return e.crossFadeFrom(this,n,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,i){const o=this._mixer,l=o.time,d=this.timeScale;let p=this._timeScaleInterpolant;p===null&&(p=o._lendControlInterpolant(),this._timeScaleInterpolant=p);const g=p.parameterPositions,v=p.sampleValues;return g[0]=l,g[1]=l+i,v[0]=e/d,v[1]=n/d,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,i,o){if(!this.enabled){this._updateWeight(e);return}const l=this._startTime;if(l!==null){const g=(e-l)*i;g<0||i===0?n=0:(this._startTime=null,n=i*g)}n*=this._updateTimeScale(e);const d=this._updateTime(n),p=this._updateWeight(e);if(p>0){const g=this._interpolants,v=this._propertyBindings;switch(this.blendMode){case kQ:for(let _=0,b=g.length;_!==b;++_)g[_].evaluate(d),v[_].accumulateAdditive(p);break;case eL:default:for(let _=0,b=g.length;_!==b;++_)g[_].evaluate(d),v[_].accumulate(o,p)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const i=this._weightInterpolant;if(i!==null){const o=i.evaluate(e)[0];n*=o,e>i.parameterPositions[1]&&(this.stopFading(),o===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const o=i.evaluate(e)[0];n*=o,e>i.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,i=this.loop;let o=this.time+e,l=this._loopCount;const d=i===_be;if(e===0)return l===-1?o:d&&(l&1)===1?n-o:o;if(i===gbe){l===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(o>=n)o=n;else if(o<0)o=0;else{this.time=o;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=o,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(l===-1&&(e>=0?(l=0,this._setEndings(!0,this.repetitions===0,d)):this._setEndings(this.repetitions===0,!0,d)),o>=n||o<0){const p=Math.floor(o/n);o-=n*p,l+=Math.abs(p);const g=this.repetitions-l;if(g<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,o=e>0?n:0,this.time=o,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(g===1){const v=e<0;this._setEndings(v,!v,d)}else this._setEndings(!1,!1,d);this._loopCount=l,this.time=o,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:p})}}else this.time=o;if(d&&(l&1)===1)return n-o}return o}_setEndings(e,n,i){const o=this._interpolantSettings;i?(o.endingStart=kg,o.endingEnd=kg):(e?o.endingStart=this.zeroSlopeAtStart?kg:Mg:o.endingStart=GT,n?o.endingEnd=this.zeroSlopeAtEnd?kg:Mg:o.endingEnd=GT)}_scheduleFading(e,n,i){const o=this._mixer,l=o.time;let d=this._weightInterpolant;d===null&&(d=o._lendControlInterpolant(),this._weightInterpolant=d);const p=d.parameterPositions,g=d.sampleValues;return p[0]=l,g[0]=n,p[1]=l+e,g[1]=i,this}}const w0t=new Float32Array(1);class E0t extends Mp{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const i=e._localRoot||this._root,o=e._clip.tracks,l=o.length,d=e._propertyBindings,p=e._interpolants,g=i.uuid,v=this._bindingsByRootAndName;let _=v[g];_===void 0&&(_={},v[g]=_);for(let b=0;b!==l;++b){const w=o[b],E=w.name;let S=_[E];if(S!==void 0)++S.referenceCount,d[b]=S;else{if(S=d[b],S!==void 0){S._cacheIndex===null&&(++S.referenceCount,this._addInactiveBinding(S,g,E));continue}const M=n&&n._propertyBindings[b].binding.parsedPath;S=new G4e(ki.create(i,E,M),w.ValueTypeName,w.getValueSize()),++S.referenceCount,this._addInactiveBinding(S,g,E),d[b]=S}p[b].resultBuffer=S.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,o=e._clip.uuid,l=this._actionsByClip[o];this._bindAction(e,l&&l.knownActions[0]),this._addInactiveAction(e,o,i)}const n=e._propertyBindings;for(let i=0,o=n.length;i!==o;++i){const l=n[i];l.useCount++===0&&(this._lendBinding(l),l.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let i=0,o=n.length;i!==o;++i){const l=n[i];--l.useCount===0&&(l.restoreOriginalState(),this._takeBackBinding(l))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,i){const o=this._actions,l=this._actionsByClip;let d=l[n];if(d===void 0)d={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,l[n]=d;else{const p=d.knownActions;e._byClipCacheIndex=p.length,p.push(e)}e._cacheIndex=o.length,o.push(e),d.actionByRoot[i]=e}_removeInactiveAction(e){const n=this._actions,i=n[n.length-1],o=e._cacheIndex;i._cacheIndex=o,n[o]=i,n.pop(),e._cacheIndex=null;const l=e._clip.uuid,d=this._actionsByClip,p=d[l],g=p.knownActions,v=g[g.length-1],_=e._byClipCacheIndex;v._byClipCacheIndex=_,g[_]=v,g.pop(),e._byClipCacheIndex=null;const b=p.actionByRoot,w=(e._localRoot||this._root).uuid;delete b[w],g.length===0&&delete d[l],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let i=0,o=n.length;i!==o;++i){const l=n[i];--l.referenceCount===0&&this._removeInactiveBinding(l)}}_lendAction(e){const n=this._actions,i=e._cacheIndex,o=this._nActiveActions++,l=n[o];e._cacheIndex=o,n[o]=e,l._cacheIndex=i,n[i]=l}_takeBackAction(e){const n=this._actions,i=e._cacheIndex,o=--this._nActiveActions,l=n[o];e._cacheIndex=o,n[o]=e,l._cacheIndex=i,n[i]=l}_addInactiveBinding(e,n,i){const o=this._bindingsByRootAndName,l=this._bindings;let d=o[n];d===void 0&&(d={},o[n]=d),d[i]=e,e._cacheIndex=l.length,l.push(e)}_removeInactiveBinding(e){const n=this._bindings,i=e.binding,o=i.rootNode.uuid,l=i.path,d=this._bindingsByRootAndName,p=d[o],g=n[n.length-1],v=e._cacheIndex;g._cacheIndex=v,n[v]=g,n.pop(),delete p[l],Object.keys(p).length===0&&delete d[o]}_lendBinding(e){const n=this._bindings,i=e._cacheIndex,o=this._nActiveBindings++,l=n[o];e._cacheIndex=o,n[o]=e,l._cacheIndex=i,n[i]=l}_takeBackBinding(e){const n=this._bindings,i=e._cacheIndex,o=--this._nActiveBindings,l=n[o];e._cacheIndex=o,n[o]=e,l._cacheIndex=i,n[i]=l}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let i=e[n];return i===void 0&&(i=new ZQ(new Float32Array(2),new Float32Array(2),1,w0t),i.__cacheIndex=n,e[n]=i),i}_takeBackControlInterpolant(e){const n=this._controlInterpolants,i=e.__cacheIndex,o=--this._nActiveControlInterpolants,l=n[o];e.__cacheIndex=o,n[o]=e,l.__cacheIndex=i,n[i]=l}clipAction(e,n,i){const o=n||this._root,l=o.uuid;let d=typeof e=="string"?t6.findByName(o,e):e;const p=d!==null?d.uuid:e,g=this._actionsByClip[p];let v=null;if(i===void 0&&(d!==null?i=d.blendMode:i=eL),g!==void 0){const b=g.actionByRoot[l];if(b!==void 0&&b.blendMode===i)return b;v=g.knownActions[0],d===null&&(d=v._clip)}if(d===null)return null;const _=new j4e(this,d,n,i);return this._bindAction(_,v),this._addInactiveAction(_,p,l),_}existingAction(e,n){const i=n||this._root,o=i.uuid,l=typeof e=="string"?t6.findByName(i,e):e,d=l?l.uuid:e,p=this._actionsByClip[d];return p!==void 0&&p.actionByRoot[o]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let i=n-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const n=this._actions,i=this._nActiveActions,o=this.time+=e,l=Math.sign(e),d=this._accuIndex^=1;for(let v=0;v!==i;++v)n[v]._update(o,e,l,d);const p=this._bindings,g=this._nActiveBindings;for(let v=0;v!==g;++v)p[v].apply(d);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,i=e.uuid,o=this._actionsByClip,l=o[i];if(l!==void 0){const d=l.knownActions;for(let p=0,g=d.length;p!==g;++p){const v=d[p];this._deactivateAction(v);const _=v._cacheIndex,b=n[n.length-1];v._cacheIndex=null,v._byClipCacheIndex=null,b._cacheIndex=_,n[_]=b,n.pop(),this._removeInactiveBindingsForAction(v)}delete o[i]}}uncacheRoot(e){const n=e.uuid,i=this._actionsByClip;for(const d in i){const p=i[d].actionByRoot,g=p[n];g!==void 0&&(this._deactivateAction(g),this._removeInactiveAction(g))}const o=this._bindingsByRootAndName,l=o[n];if(l!==void 0)for(const d in l){const p=l[d];p.restoreOriginalState(),this._removeInactiveBinding(p)}}uncacheAction(e,n){const i=this.existingAction(e,n);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class rK{constructor(e){this.value=e}clone(){return new rK(this.value.clone===void 0?this.value:this.value.clone())}}let S0t=0;class T0t extends Mp{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:S0t++}),this.name="",this.usage=WT,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let i=0,o=n.length;i<o;i++){const l=Array.isArray(n[i])?n[i]:[n[i]];for(let d=0;d<l.length;d++)this.uniforms.push(l[d].clone())}return this}clone(){return new this.constructor().copy(this)}}class x0t extends cL{constructor(e,n,i=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class M0t{constructor(e,n,i,o,l){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=i,this.elementSize=o,this.count=l,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const nle=new cr;class k0t{constructor(e,n,i=0,o=1/0){this.ray=new vA(e,n),this.near=i,this.far=o,this.camera=null,this.layers=new rL,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}setFromXRController(e){return nle.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(nle),this}intersectObject(e,n=!0,i=[]){return rW(e,this,i,n),i.sort(rle),i}intersectObjects(e,n=!0,i=[]){for(let o=0,l=e.length;o<l;o++)rW(e[o],this,i,n);return i.sort(rle),i}}function rle(t,e){return t.distance-e.distance}function rW(t,e,n,i){if(t.layers.test(e.layers)&&t.raycast(e,n),i===!0){const o=t.children;for(let l=0,d=o.length;l<d;l++)rW(o[l],e,n,!0)}}class C0t{constructor(e=1,n=0,i=0){return this.radius=e,this.phi=n,this.theta=i,this}set(e,n,i){return this.radius=e,this.phi=n,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+n*n+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(po(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class P0t{constructor(e=1,n=0,i=0){return this.radius=e,this.theta=n,this.y=i,this}set(e,n,i){return this.radius=e,this.theta=n,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=n,this}clone(){return new this.constructor().copy(this)}}const ile=new $t;class R0t{constructor(e=new $t(1/0,1/0),n=new $t(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=ile.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ile).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const sle=new Le,zk=new Le;class D0t{constructor(e=new Le,n=new Le){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){sle.subVectors(e,this.start),zk.subVectors(this.end,this.start);const i=zk.dot(zk);let l=zk.dot(sle)/i;return n&&(l=po(l,0,1)),l}closestPointToPoint(e,n,i){const o=this.closestPointToPointParameter(e,n);return this.delta(i).multiplyScalar(o).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const ole=new Le;class O0t extends Li{constructor(e,n){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const i=new Kr,o=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let d=0,p=1,g=32;d<g;d++,p++){const v=d/g*Math.PI*2,_=p/g*Math.PI*2;o.push(Math.cos(v),Math.sin(v),1,Math.cos(_),Math.sin(_),1)}i.setAttribute("position",new zn(o,3));const l=new nc({fog:!1,toneMapped:!1});this.cone=new Ud(i,l),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),ole.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(ole),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const i2=new Le,Bk=new cr,DV=new cr;class I0t extends Ud{constructor(e){const n=H4e(e),i=new Kr,o=[],l=[],d=new Pn(0,0,1),p=new Pn(0,1,0);for(let v=0;v<n.length;v++){const _=n[v];_.parent&&_.parent.isBone&&(o.push(0,0,0),o.push(0,0,0),l.push(d.r,d.g,d.b),l.push(p.r,p.g,p.b))}i.setAttribute("position",new zn(o,3)),i.setAttribute("color",new zn(l,3));const g=new nc({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,g),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,i=this.geometry,o=i.getAttribute("position");DV.copy(this.root.matrixWorld).invert();for(let l=0,d=0;l<n.length;l++){const p=n[l];p.parent&&p.parent.isBone&&(Bk.multiplyMatrices(DV,p.matrixWorld),i2.setFromMatrixPosition(Bk),o.setXYZ(d,i2.x,i2.y,i2.z),Bk.multiplyMatrices(DV,p.parent.matrixWorld),i2.setFromMatrixPosition(Bk),o.setXYZ(d+1,i2.x,i2.y,i2.z),d+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function H4e(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,H4e(t.children[n]));return e}class N0t extends jo{constructor(e,n,i){const o=new xx(n,4,2),l=new Om({wireframe:!0,fog:!1,toneMapped:!1});super(o,l),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const L0t=new Le,ale=new Pn,lle=new Pn;class z0t extends Li{constructor(e,n,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const o=new Tx(n);o.rotateY(Math.PI*.5),this.material=new Om({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const l=o.getAttribute("position"),d=new Float32Array(l.count*3);o.setAttribute("color",new _s(d,3)),this.add(new jo(o,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");ale.copy(this.light.color),lle.copy(this.light.groundColor);for(let i=0,o=n.count;i<o;i++){const l=i<o/2?ale:lle;n.setXYZ(i,l.r,l.g,l.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(L0t.setFromMatrixPosition(this.light.matrixWorld).negate())}}class B0t extends Ud{constructor(e=10,n=10,i=4473924,o=8947848){i=new Pn(i),o=new Pn(o);const l=n/2,d=e/n,p=e/2,g=[],v=[];for(let w=0,E=0,S=-p;w<=n;w++,S+=d){g.push(-p,0,S,p,0,S),g.push(S,0,-p,S,0,p);const M=w===l?i:o;M.toArray(v,E),E+=3,M.toArray(v,E),E+=3,M.toArray(v,E),E+=3,M.toArray(v,E),E+=3}const _=new Kr;_.setAttribute("position",new zn(g,3)),_.setAttribute("color",new zn(v,3));const b=new nc({vertexColors:!0,toneMapped:!1});super(_,b),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class U0t extends Ud{constructor(e=10,n=16,i=8,o=64,l=4473924,d=8947848){l=new Pn(l),d=new Pn(d);const p=[],g=[];if(n>1)for(let b=0;b<n;b++){const w=b/n*(Math.PI*2),E=Math.sin(w)*e,S=Math.cos(w)*e;p.push(0,0,0),p.push(E,0,S);const M=b&1?l:d;g.push(M.r,M.g,M.b),g.push(M.r,M.g,M.b)}for(let b=0;b<i;b++){const w=b&1?l:d,E=e-e/i*b;for(let S=0;S<o;S++){let M=S/o*(Math.PI*2),k=Math.sin(M)*E,x=Math.cos(M)*E;p.push(k,0,x),g.push(w.r,w.g,w.b),M=(S+1)/o*(Math.PI*2),k=Math.sin(M)*E,x=Math.cos(M)*E,p.push(k,0,x),g.push(w.r,w.g,w.b)}}const v=new Kr;v.setAttribute("position",new zn(p,3)),v.setAttribute("color",new zn(g,3));const _=new nc({vertexColors:!0,toneMapped:!1});super(v,_),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const cle=new Le,Uk=new Le,ule=new Le;class F0t extends Li{constructor(e,n,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",n===void 0&&(n=1);let o=new Kr;o.setAttribute("position",new zn([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const l=new nc({fog:!1,toneMapped:!1});this.lightPlane=new _m(o,l),this.add(this.lightPlane),o=new Kr,o.setAttribute("position",new zn([0,0,0,0,0,1],3)),this.targetLine=new _m(o,l),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),cle.setFromMatrixPosition(this.light.matrixWorld),Uk.setFromMatrixPosition(this.light.target.matrixWorld),ule.subVectors(Uk,cle),this.lightPlane.lookAt(Uk),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Uk),this.targetLine.scale.z=ule.length()}}const Fk=new Le,uo=new iL;class V0t extends Ud{constructor(e){const n=new Kr,i=new nc({color:16777215,vertexColors:!0,toneMapped:!1}),o=[],l=[],d={};p("n1","n2"),p("n2","n4"),p("n4","n3"),p("n3","n1"),p("f1","f2"),p("f2","f4"),p("f4","f3"),p("f3","f1"),p("n1","f1"),p("n2","f2"),p("n3","f3"),p("n4","f4"),p("p","n1"),p("p","n2"),p("p","n3"),p("p","n4"),p("u1","u2"),p("u2","u3"),p("u3","u1"),p("c","t"),p("p","c"),p("cn1","cn2"),p("cn3","cn4"),p("cf1","cf2"),p("cf3","cf4");function p(S,M){g(S),g(M)}function g(S){o.push(0,0,0),l.push(0,0,0),d[S]===void 0&&(d[S]=[]),d[S].push(o.length/3-1)}n.setAttribute("position",new zn(o,3)),n.setAttribute("color",new zn(l,3)),super(n,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=d,this.update();const v=new Pn(16755200),_=new Pn(16711680),b=new Pn(43775),w=new Pn(16777215),E=new Pn(3355443);this.setColors(v,_,b,w,E)}setColors(e,n,i,o,l){const p=this.geometry.getAttribute("color");p.setXYZ(0,e.r,e.g,e.b),p.setXYZ(1,e.r,e.g,e.b),p.setXYZ(2,e.r,e.g,e.b),p.setXYZ(3,e.r,e.g,e.b),p.setXYZ(4,e.r,e.g,e.b),p.setXYZ(5,e.r,e.g,e.b),p.setXYZ(6,e.r,e.g,e.b),p.setXYZ(7,e.r,e.g,e.b),p.setXYZ(8,e.r,e.g,e.b),p.setXYZ(9,e.r,e.g,e.b),p.setXYZ(10,e.r,e.g,e.b),p.setXYZ(11,e.r,e.g,e.b),p.setXYZ(12,e.r,e.g,e.b),p.setXYZ(13,e.r,e.g,e.b),p.setXYZ(14,e.r,e.g,e.b),p.setXYZ(15,e.r,e.g,e.b),p.setXYZ(16,e.r,e.g,e.b),p.setXYZ(17,e.r,e.g,e.b),p.setXYZ(18,e.r,e.g,e.b),p.setXYZ(19,e.r,e.g,e.b),p.setXYZ(20,e.r,e.g,e.b),p.setXYZ(21,e.r,e.g,e.b),p.setXYZ(22,e.r,e.g,e.b),p.setXYZ(23,e.r,e.g,e.b),p.setXYZ(24,n.r,n.g,n.b),p.setXYZ(25,n.r,n.g,n.b),p.setXYZ(26,n.r,n.g,n.b),p.setXYZ(27,n.r,n.g,n.b),p.setXYZ(28,n.r,n.g,n.b),p.setXYZ(29,n.r,n.g,n.b),p.setXYZ(30,n.r,n.g,n.b),p.setXYZ(31,n.r,n.g,n.b),p.setXYZ(32,i.r,i.g,i.b),p.setXYZ(33,i.r,i.g,i.b),p.setXYZ(34,i.r,i.g,i.b),p.setXYZ(35,i.r,i.g,i.b),p.setXYZ(36,i.r,i.g,i.b),p.setXYZ(37,i.r,i.g,i.b),p.setXYZ(38,o.r,o.g,o.b),p.setXYZ(39,o.r,o.g,o.b),p.setXYZ(40,l.r,l.g,l.b),p.setXYZ(41,l.r,l.g,l.b),p.setXYZ(42,l.r,l.g,l.b),p.setXYZ(43,l.r,l.g,l.b),p.setXYZ(44,l.r,l.g,l.b),p.setXYZ(45,l.r,l.g,l.b),p.setXYZ(46,l.r,l.g,l.b),p.setXYZ(47,l.r,l.g,l.b),p.setXYZ(48,l.r,l.g,l.b),p.setXYZ(49,l.r,l.g,l.b),p.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,i=1,o=1;uo.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),To("c",n,e,uo,0,0,-1),To("t",n,e,uo,0,0,1),To("n1",n,e,uo,-i,-o,-1),To("n2",n,e,uo,i,-o,-1),To("n3",n,e,uo,-i,o,-1),To("n4",n,e,uo,i,o,-1),To("f1",n,e,uo,-i,-o,1),To("f2",n,e,uo,i,-o,1),To("f3",n,e,uo,-i,o,1),To("f4",n,e,uo,i,o,1),To("u1",n,e,uo,i*.7,o*1.1,-1),To("u2",n,e,uo,-i*.7,o*1.1,-1),To("u3",n,e,uo,0,o*2,-1),To("cf1",n,e,uo,-i,0,1),To("cf2",n,e,uo,i,0,1),To("cf3",n,e,uo,0,-o,1),To("cf4",n,e,uo,0,o,1),To("cn1",n,e,uo,-i,0,-1),To("cn2",n,e,uo,i,0,-1),To("cn3",n,e,uo,0,-o,-1),To("cn4",n,e,uo,0,o,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function To(t,e,n,i,o,l,d){Fk.set(o,l,d).unproject(i);const p=e[t];if(p!==void 0){const g=n.getAttribute("position");for(let v=0,_=p.length;v<_;v++)g.setXYZ(p[v],Fk.x,Fk.y,Fk.z)}}const Vk=new Ql;class G0t extends Ud{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=new Float32Array(8*3),l=new Kr;l.setIndex(new _s(i,1)),l.setAttribute("position",new _s(o,3)),super(l,new nc({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Vk.setFromObject(this.object),Vk.isEmpty())return;const n=Vk.min,i=Vk.max,o=this.geometry.attributes.position,l=o.array;l[0]=i.x,l[1]=i.y,l[2]=i.z,l[3]=n.x,l[4]=i.y,l[5]=i.z,l[6]=n.x,l[7]=n.y,l[8]=i.z,l[9]=i.x,l[10]=n.y,l[11]=i.z,l[12]=i.x,l[13]=i.y,l[14]=n.z,l[15]=n.x,l[16]=i.y,l[17]=n.z,l[18]=n.x,l[19]=n.y,l[20]=n.z,l[21]=i.x,l[22]=n.y,l[23]=n.z,o.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class j0t extends Ud{constructor(e,n=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),o=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],l=new Kr;l.setIndex(new _s(i,1)),l.setAttribute("position",new zn(o,3)),super(l,new nc({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class H0t extends _m{constructor(e,n=1,i=16776960){const o=i,l=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],d=new Kr;d.setAttribute("position",new zn(l,3)),d.computeBoundingSphere(),super(d,new nc({color:o,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const p=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],g=new Kr;g.setAttribute("position",new zn(p,3)),g.computeBoundingSphere(),this.add(new jo(g,new Om({color:o,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const fle=new Le;let Gk,OV;class $0t extends Li{constructor(e=new Le(0,0,1),n=new Le(0,0,0),i=1,o=16776960,l=i*.2,d=l*.2){super(),this.type="ArrowHelper",Gk===void 0&&(Gk=new Kr,Gk.setAttribute("position",new zn([0,0,0,0,1,0],3)),OV=new bA(0,.5,1,5,1),OV.translate(0,-.5,0)),this.position.copy(n),this.line=new _m(Gk,new nc({color:o,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new jo(OV,new Om({color:o,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,l,d)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{fle.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(fle,n)}}setLength(e,n=e*.2,i=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(i,n,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class W0t extends Ud{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],o=new Kr;o.setAttribute("position",new zn(n,3)),o.setAttribute("color",new zn(i,3));const l=new nc({vertexColors:!0,toneMapped:!1});super(o,l),this.type="AxesHelper"}setColors(e,n,i){const o=new Pn,l=this.geometry.attributes.color.array;return o.set(e),o.toArray(l,0),o.toArray(l,3),o.set(n),o.toArray(l,6),o.toArray(l,9),o.set(i),o.toArray(l,12),o.toArray(l,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Y0t{constructor(){this.type="ShapePath",this.color=new Pn,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new XT,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,i,o){return this.currentPath.quadraticCurveTo(e,n,i,o),this}bezierCurveTo(e,n,i,o,l,d){return this.currentPath.bezierCurveTo(e,n,i,o,l,d),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(x){const C=[];for(let P=0,O=x.length;P<O;P++){const L=x[P],B=new Fg;B.curves=L.curves,C.push(B)}return C}function i(x,C){const P=C.length;let O=!1;for(let L=P-1,B=0;B<P;L=B++){let V=C[L],G=C[B],j=G.x-V.x,F=G.y-V.y;if(Math.abs(F)>Number.EPSILON){if(F<0&&(V=C[B],j=-j,G=C[L],F=-F),x.y<V.y||x.y>G.y)continue;if(x.y===V.y){if(x.x===V.x)return!0}else{const q=F*(x.x-V.x)-j*(x.y-V.y);if(q===0)return!0;if(q<0)continue;O=!O}}else{if(x.y!==V.y)continue;if(G.x<=x.x&&x.x<=V.x||V.x<=x.x&&x.x<=G.x)return!0}}return O}const o=kd.isClockWise,l=this.subPaths;if(l.length===0)return[];let d,p,g;const v=[];if(l.length===1)return p=l[0],g=new Fg,g.curves=p.curves,v.push(g),v;let _=!o(l[0].getPoints());_=e?!_:_;const b=[],w=[];let E=[],S=0,M;w[S]=void 0,E[S]=[];for(let x=0,C=l.length;x<C;x++)p=l[x],M=p.getPoints(),d=o(M),d=e?!d:d,d?(!_&&w[S]&&S++,w[S]={s:new Fg,p:M},w[S].s.curves=p.curves,_&&S++,E[S]=[]):E[S].push({h:p,p:M[0]});if(!w[0])return n(l);if(w.length>1){let x=!1,C=0;for(let P=0,O=w.length;P<O;P++)b[P]=[];for(let P=0,O=w.length;P<O;P++){const L=E[P];for(let B=0;B<L.length;B++){const V=L[B];let G=!0;for(let j=0;j<w.length;j++)i(V.p,w[j].p)&&(P!==j&&C++,G?(G=!1,b[j].push(V)):x=!0);G&&b[P].push(V)}}C>0&&x===!1&&(E=b)}let k;for(let x=0,C=w.length;x<C;x++){g=w[x].s,v.push(g),k=E[x];for(let P=0,O=k.length;P<O;P++)g.holes.push(k[P].h)}return v}}class q0t extends L0{constructor(e=1,n=1,i=1,o={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,n,{...o,count:i}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:QN}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=QN);se.ACESFilmicToneMapping=ibe;se.AddEquation=L2;se.AddOperation=ebe;se.AdditiveAnimationBlendMode=kQ;se.AdditiveBlending=g$;se.AgXToneMapping=obe;se.AlphaFormat=fbe;se.AlwaysCompare=kbe;se.AlwaysDepth=Yye;se.AlwaysStencilFunc=Y$;se.AmbientLight=D4e;se.AnimationAction=j4e;se.AnimationClip=t6;se.AnimationLoader=qft;se.AnimationMixer=E0t;se.AnimationObjectGroup=A0t;se.AnimationUtils=Hft;se.ArcCurve=r4e;se.ArrayCamera=$be;se.ArrowHelper=$0t;se.AttachedBindMode=A$;se.Audio=V4e;se.AudioAnalyser=f0t;se.AudioContext=eK;se.AudioListener=l0t;se.AudioLoader=s0t;se.AxesHelper=W0t;se.BackSide=Zl;se.BasicDepthPacking=ybe;se.BasicShadowMap=Kit;se.BatchedMesh=e4e;se.Bone=FQ;se.BooleanKeyframeTrack=gv;se.Box2=R0t;se.Box3=Ql;se.Box3Helper=j0t;se.BoxGeometry=mv;se.BoxHelper=G0t;se.BufferAttribute=_s;se.BufferGeometry=Kr;se.BufferGeometryLoader=U4e;se.ByteType=cbe;se.Cache=$h;se.Camera=iL;se.CameraHelper=V0t;se.CanvasTexture=pft;se.CapsuleGeometry=hL;se.CatmullRomCurve3=i4e;se.CineonToneMapping=rbe;se.CircleGeometry=pL;se.ClampToEdgeWrapping=xl;se.Clock=F4e;se.Color=Pn;se.ColorKeyframeTrack=QQ;se.ColorManagement=cs;se.CompressedArrayTexture=dft;se.CompressedCubeTexture=hft;se.CompressedTexture=fL;se.CompressedTextureLoader=Xft;se.ConeGeometry=mL;se.ConstantAlphaFactor=Hye;se.ConstantColorFactor=Gye;se.CubeCamera=Lbe;se.CubeReflectionMapping=gp;se.CubeRefractionMapping=vm;se.CubeTexture=wx;se.CubeTextureLoader=Zft;se.CubeUVReflectionMapping=gA;se.CubicBezierCurve=jQ;se.CubicBezierCurve3=s4e;se.CubicInterpolant=S4e;se.CullFaceBack=m$;se.CullFaceFront=kye;se.CullFaceFrontBack=Qit;se.CullFaceNone=Mye;se.Curve=V0;se.CurvePath=a4e;se.CustomBlending=Pye;se.CustomToneMapping=sbe;se.CylinderGeometry=bA;se.Cylindrical=P0t;se.Data3DTexture=DQ;se.DataArrayTexture=nL;se.DataTexture=im;se.DataTextureLoader=Qft;se.DataUtils=oot;se.DecrementStencilOp=cst;se.DecrementWrapStencilOp=fst;se.DefaultLoadingManager=M4e;se.DepthFormat=rm;se.DepthStencilFormat=Jg;se.DepthTexture=LQ;se.DetachedBindMode=lbe;se.DirectionalLight=R4e;se.DirectionalLightHelper=F0t;se.DiscreteInterpolant=T4e;se.DisplayP3ColorSpace=tL;se.DodecahedronGeometry=gL;se.DoubleSide=yd;se.DstAlphaFactor=zye;se.DstColorFactor=Uye;se.DynamicCopyUsage=xst;se.DynamicDrawUsage=bst;se.DynamicReadUsage=Est;se.EdgesGeometry=l4e;se.EllipseCurve=dL;se.EqualCompare=Sbe;se.EqualDepth=Xye;se.EqualStencilFunc=mst;se.EquirectangularReflectionMapping=LT;se.EquirectangularRefractionMapping=zT;se.Euler=Du;se.EventDispatcher=Mp;se.ExtrudeGeometry=_L;se.FileLoader=vp;se.Float16BufferAttribute=dot;se.Float32BufferAttribute=zn;se.FloatType=bu;se.Fog=lL;se.FogExp2=aL;se.FramebufferTexture=fft;se.FrontSide=mp;se.Frustum=Ex;se.GLBufferAttribute=M0t;se.GLSL1=kst;se.GLSL3=q$;se.GreaterCompare=Tbe;se.GreaterDepth=Qye;se.GreaterEqualCompare=Mbe;se.GreaterEqualDepth=Zye;se.GreaterEqualStencilFunc=yst;se.GreaterStencilFunc=vst;se.GridHelper=B0t;se.Group=cb;se.HalfFloatType=y4;se.HemisphereLight=k4e;se.HemisphereLightHelper=z0t;se.IcosahedronGeometry=yL;se.ImageBitmapLoader=i0t;se.ImageLoader=n6;se.ImageUtils=RQ;se.IncrementStencilOp=lst;se.IncrementWrapStencilOp=ust;se.InstancedBufferAttribute=w4;se.InstancedBufferGeometry=B4e;se.InstancedInterleavedBuffer=x0t;se.InstancedMesh=Jbe;se.Int16BufferAttribute=uot;se.Int32BufferAttribute=fot;se.Int8BufferAttribute=aot;se.IntType=bQ;se.InterleavedBuffer=cL;se.InterleavedBufferAttribute=ev;se.Interpolant=Mx;se.InterpolateDiscrete=FT;se.InterpolateLinear=VT;se.InterpolateSmooth=dD;se.InvertStencilOp=dst;se.KeepStencilOp=K1;se.KeyframeTrack=G0;se.LOD=Qbe;se.LatheGeometry=Sx;se.Layers=rL;se.LessCompare=Ebe;se.LessDepth=qye;se.LessEqualCompare=CQ;se.LessEqualDepth=NT;se.LessEqualStencilFunc=gst;se.LessStencilFunc=pst;se.Light=Nm;se.LightProbe=N4e;se.Line=_m;se.Line3=D0t;se.LineBasicMaterial=nc;se.LineCurve=HQ;se.LineCurve3=o4e;se.LineDashedMaterial=A4e;se.LineLoop=t4e;se.LineSegments=Ud;se.LinearDisplayP3ColorSpace=Ax;se.LinearFilter=so;se.LinearInterpolant=ZQ;se.LinearMipMapLinearFilter=nst;se.LinearMipMapNearestFilter=tst;se.LinearMipmapLinearFilter=Ed;se.LinearMipmapNearestFilter=XS;se.LinearSRGBColorSpace=xp;se.LinearToneMapping=tbe;se.LinearTransfer=jT;se.Loader=$c;se.LoaderUtils=nW;se.LoadingManager=KQ;se.LoopOnce=gbe;se.LoopPingPong=_be;se.LoopRepeat=vbe;se.LuminanceAlphaFormat=hbe;se.LuminanceFormat=dbe;se.MOUSE=Xit;se.Material=Dl;se.MaterialLoader=L4e;se.MathUtils=jst;se.Matrix3=Vr;se.Matrix4=cr;se.MaxEquation=b$;se.Mesh=jo;se.MeshBasicMaterial=Om;se.MeshDepthMaterial=zQ;se.MeshDistanceMaterial=BQ;se.MeshLambertMaterial=y4e;se.MeshMatcapMaterial=b4e;se.MeshNormalMaterial=_4e;se.MeshPhongMaterial=g4e;se.MeshPhysicalMaterial=m4e;se.MeshStandardMaterial=qQ;se.MeshToonMaterial=v4e;se.MinEquation=y$;se.MirroredRepeatWrapping=UT;se.MixOperation=Jye;se.MultiplyBlending=_$;se.MultiplyOperation=bx;se.NearestFilter=ko;se.NearestMipMapLinearFilter=est;se.NearestMipMapNearestFilter=Jit;se.NearestMipmapLinearFilter=mg;se.NearestMipmapNearestFilter=JO;se.NeutralToneMapping=abe;se.NeverCompare=wbe;se.NeverDepth=Wye;se.NeverStencilFunc=hst;se.NoBlending=Jh;se.NoColorSpace=Lh;se.NoToneMapping=ep;se.NormalAnimationBlendMode=eL;se.NormalBlending=Bg;se.NotEqualCompare=xbe;se.NotEqualDepth=Kye;se.NotEqualStencilFunc=_st;se.NumberKeyframeTrack=JT;se.Object3D=Li;se.ObjectLoader=n0t;se.ObjectSpaceNormalMap=Abe;se.OctahedronGeometry=Tx;se.OneFactor=Iye;se.OneMinusConstantAlphaFactor=$ye;se.OneMinusConstantColorFactor=jye;se.OneMinusDstAlphaFactor=Bye;se.OneMinusDstColorFactor=Fye;se.OneMinusSrcAlphaFactor=KO;se.OneMinusSrcColorFactor=Lye;se.OrthographicCamera=sL;se.P3Primaries=$T;se.PCFShadowMap=yQ;se.PCFSoftShadowMap=Cye;se.PMREMGenerator=Z$;se.Path=XT;se.PerspectiveCamera=Ha;se.Plane=P2;se.PlaneGeometry=_A;se.PlaneHelper=H0t;se.PointLight=P4e;se.PointLightHelper=N0t;se.Points=n4e;se.PointsMaterial=VQ;se.PolarGridHelper=U0t;se.PolyhedronGeometry=Im;se.PositionalAudio=u0t;se.PropertyBinding=ki;se.PropertyMixer=G4e;se.QuadraticBezierCurve=$Q;se.QuadraticBezierCurve3=WQ;se.Quaternion=Gc;se.QuaternionKeyframeTrack=AA;se.QuaternionLinearInterpolant=x4e;se.RED_GREEN_RGTC2_Format=$$;se.RED_RGTC1_Format=mbe;se.REVISION=QN;se.RGBADepthPacking=bbe;se.RGBAFormat=Oc;se.RGBAIntegerFormat=xQ;se.RGBA_ASTC_10x10_Format=U$;se.RGBA_ASTC_10x5_Format=L$;se.RGBA_ASTC_10x6_Format=z$;se.RGBA_ASTC_10x8_Format=B$;se.RGBA_ASTC_12x10_Format=F$;se.RGBA_ASTC_12x12_Format=V$;se.RGBA_ASTC_4x4_Format=k$;se.RGBA_ASTC_5x4_Format=C$;se.RGBA_ASTC_5x5_Format=P$;se.RGBA_ASTC_6x5_Format=R$;se.RGBA_ASTC_6x6_Format=D$;se.RGBA_ASTC_8x5_Format=O$;se.RGBA_ASTC_8x6_Format=I$;se.RGBA_ASTC_8x8_Format=N$;se.RGBA_BPTC_Format=fD;se.RGBA_ETC2_EAC_Format=M$;se.RGBA_PVRTC_2BPPV1_Format=T$;se.RGBA_PVRTC_4BPPV1_Format=S$;se.RGBA_S3TC_DXT1_Format=lD;se.RGBA_S3TC_DXT3_Format=cD;se.RGBA_S3TC_DXT5_Format=uD;se.RGB_BPTC_SIGNED_Format=G$;se.RGB_BPTC_UNSIGNED_Format=j$;se.RGB_ETC1_Format=MQ;se.RGB_ETC2_Format=x$;se.RGB_PVRTC_2BPPV1_Format=E$;se.RGB_PVRTC_4BPPV1_Format=w$;se.RGB_S3TC_DXT1_Format=aD;se.RGFormat=pbe;se.RGIntegerFormat=TQ;se.RawShaderMaterial=p4e;se.Ray=vA;se.Raycaster=k0t;se.Rec709Primaries=HT;se.RectAreaLight=O4e;se.RedFormat=EQ;se.RedIntegerFormat=SQ;se.ReinhardToneMapping=nbe;se.RenderTarget=Dbe;se.RepeatWrapping=BT;se.ReplaceStencilOp=ast;se.ReverseSubtractEquation=Dye;se.RingGeometry=bL;se.SIGNED_RED_GREEN_RGTC2_Format=W$;se.SIGNED_RED_RGTC1_Format=H$;se.SRGBColorSpace=uf;se.SRGBTransfer=Ps;se.Scene=qbe;se.ShaderChunk=Yr;se.ShaderLib=g0;se.ShaderMaterial=z0;se.ShadowMaterial=h4e;se.Shape=Fg;se.ShapeGeometry=AL;se.ShapePath=Y0t;se.ShapeUtils=kd;se.ShortType=ube;se.Skeleton=uL;se.SkeletonHelper=I0t;se.SkinnedMesh=Kbe;se.Source=Cg;se.Sphere=Ml;se.SphereGeometry=xx;se.Spherical=C0t;se.SphericalHarmonics3=I4e;se.SplineCurve=YQ;se.SpotLight=C4e;se.SpotLightHelper=O0t;se.Sprite=Zbe;se.SpriteMaterial=UQ;se.SrcAlphaFactor=QO;se.SrcAlphaSaturateFactor=Vye;se.SrcColorFactor=Nye;se.StaticCopyUsage=Tst;se.StaticDrawUsage=WT;se.StaticReadUsage=wst;se.StereoCamera=o0t;se.StreamCopyUsage=Mst;se.StreamDrawUsage=Ast;se.StreamReadUsage=Sst;se.StringKeyframeTrack=vv;se.SubtractEquation=Rye;se.SubtractiveBlending=v$;se.TOUCH=Zit;se.TangentSpaceNormalMap=Dm;se.TetrahedronGeometry=wL;se.Texture=mo;se.TextureLoader=Kft;se.TorusGeometry=EL;se.TorusKnotGeometry=SL;se.Triangle=Au;se.TriangleFanDrawMode=sst;se.TriangleStripDrawMode=ist;se.TrianglesDrawMode=rst;se.TubeGeometry=TL;se.UVMapping=KN;se.Uint16BufferAttribute=OQ;se.Uint32BufferAttribute=IQ;se.Uint8BufferAttribute=lot;se.Uint8ClampedBufferAttribute=cot;se.Uniform=rK;se.UniformsGroup=T0t;se.UniformsLib=hn;se.UniformsUtils=Nbe;se.UnsignedByteType=tp;se.UnsignedInt248Type=nm;se.UnsignedIntType=Hh;se.UnsignedShort4444Type=AQ;se.UnsignedShort5551Type=wQ;se.UnsignedShortType=JN;se.VSMShadowMap=hd;se.Vector2=$t;se.Vector3=Le;se.Vector4=fs;se.VectorKeyframeTrack=e6;se.VideoTexture=uft;se.WebGL1Renderer=Ybe;se.WebGL3DRenderTarget=Xst;se.WebGLArrayRenderTarget=qst;se.WebGLCoordinateSystem=Sd;se.WebGLCubeRenderTarget=zbe;se.WebGLMultipleRenderTargets=q0t;se.WebGLRenderTarget=L0;se.WebGLRenderer=Wbe;se.WebGLUtils=Hbe;se.WebGPUCoordinateSystem=YT;se.WireframeGeometry=d4e;se.WrapAroundEnding=GT;se.ZeroCurvatureEnding=Mg;se.ZeroFactor=Oye;se.ZeroSlopeEnding=kg;se.ZeroStencilOp=ost;se._SRGBAFormat=eI;se.createCanvasElement=Pbe;var $4e={},E4={};Object.defineProperty(E4,"__esModule",{value:!0});E4.entry=E4.main=void 0;E4.main=`

uniform float lightSizeUV;
uniform float blending;

#ifdef SHADOWMAP_TYPE_PCF

#define NEAR_PLANE 0.1
#define NUM_SAMPLES 20
#define NUM_RINGS 11

vec2 poissonDisk[NUM_SAMPLES];

void initPoissonSamples( const in vec2 randomSeed ) {
    float ANGLE_STEP = PI2 * float(NUM_RINGS) / float(NUM_SAMPLES);
    float INV_NUM_SAMPLES = 1.0 / float(NUM_SAMPLES);

    // jsfiddle that shows sample pattern: https://jsfiddle.net/a16ff1p7/
    float angle = rand(randomSeed) * PI2;
    float radius = INV_NUM_SAMPLES;
    float radiusStep = radius;

    for (int i = 0; i < int(NUM_SAMPLES); i++ ) {
        poissonDisk[i] = vec2(cos(angle), sin(angle)) * pow(radius, 0.75);
        radius += radiusStep;
        angle += ANGLE_STEP;
    }
}

float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation
    return (zReceiver - zBlocker) / zBlocker;
}

float findBlocker(sampler2D shadowMap, const in vec2 uv, const in float zReceiver ) {
    // This uses similar triangles to compute what
    // area of the shadow map we should search
    float searchRadius = lightSizeUV * (zReceiver - NEAR_PLANE) / zReceiver;
    float blockerDepthSum = 0.0;
    int numBlockers = 0;

    for (int i = 0; i < int(NUM_SAMPLES); i++ ) {
        float shadowMapDepth = unpackRGBAToDepth(texture2D(shadowMap, uv + poissonDisk[i] * searchRadius));
        if (shadowMapDepth < zReceiver) {
            blockerDepthSum += shadowMapDepth;
            numBlockers++;
        }
    }

    if (numBlockers == 0) return -1.0;

    return blockerDepthSum / float(numBlockers);
}

float PCF_Filter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius) {
    float sum = 0.0;
    for (int i = 0; i < int(NUM_SAMPLES); i++ ) {
        float depth = unpackRGBAToDepth(texture2D(shadowMap, uv + poissonDisk[i] * filterRadius));
        if (zReceiver <= depth) sum += 1.0;
    }
    for (int i = 0; i < int(NUM_SAMPLES); i++ ) {
        float depth = unpackRGBAToDepth(texture2D(shadowMap, uv + -poissonDisk[i].yx * filterRadius));
        if (zReceiver <= depth) sum += 1.0;
    }
    return sum / (2.0 * float(NUM_SAMPLES));
}

float PCSS(sampler2D shadowMap, vec4 coords) {
    vec2 uv = coords.xy;
    float zReceiver = coords.z; // Assumed to be eye-space z in this code

    initPoissonSamples(uv);
    // STEP 1: blocker search
    float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver);

    //There are no occluders so early out (this saves filtering)
    if (avgBlockerDepth == -1.0) return 1.0;

    // STEP 2: penumbra size
    float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);
    float filterRadius = penumbraRatio * lightSizeUV * NEAR_PLANE / zReceiver;

    // STEP 3: filtering
    //return avgBlockerDepth;
    return PCF_Filter(shadowMap, uv, zReceiver, filterRadius);
}
#endif
`;E4.entry=`
// PCSS implementation
vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
float dx = texelSize.x;
float dy = texelSize.y;
vec2 uv = shadowCoord.xy;
vec2 f = fract( uv * shadowMapSize + 0.5 );
uv -= f * texelSize;
float shadow1 = (
    texture2DCompare( shadowMap, uv, shadowCoord.z ) +
    texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
    texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
    texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
    mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
         texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
         f.x ) +
    mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
         texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
         f.x ) +
    mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
         texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
         f.y ) +
    mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
         texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
         f.y ) +
    mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
              texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
              f.x ),
         mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
              texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
              f.x ),
         f.y )
) * ( 1.0 / 9.0 );
float shadow2 = PCSS( shadowMap, shadowCoord );
shadow = shadow1 * (1.0 - blending) + blending * shadow2;
            `;var xL={},ML={};Object.defineProperty(ML,"__esModule",{value:!0});ML.RGBELoader=void 0;const va=se;class X0t extends va.DataTextureLoader{constructor(e){super(e),this.type=va.HalfFloatType}parse(e){const p=function(P,O){switch(P){case 1:console.error("THREE.RGBELoader Read Error: "+(O||""));break;case 2:console.error("THREE.RGBELoader Write Error: "+(O||""));break;case 3:console.error("THREE.RGBELoader Bad File Format: "+(O||""));break;default:case 4:console.error("THREE.RGBELoader: Error: "+(O||""))}return-1},b=`
`,w=function(P,O,L){O=O||1024;let V=P.pos,G=-1,j=0,F="",q=String.fromCharCode.apply(null,new Uint16Array(P.subarray(V,V+128)));for(;0>(G=q.indexOf(b))&&j<O&&V<P.byteLength;)F+=q,j+=q.length,V+=128,q+=String.fromCharCode.apply(null,new Uint16Array(P.subarray(V,V+128)));return-1<G?(P.pos+=j+G+1,F+q.slice(0,G)):!1},E=function(P){const O=/^#\?(\S+)/,L=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,B=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,V=/^\s*FORMAT=(\S+)\s*$/,G=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,j={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let F,q;if(P.pos>=P.byteLength||!(F=w(P,void 0)))return p(1,"no header found");if(!(q=F.match(O)))return p(3,"bad initial token");for(j.valid|=1,j.programtype=q[1],j.string+=F+`
`;F=w(P,void 0),F!==!1;){if(j.string+=F+`
`,F.charAt(0)==="#"){j.comments+=F+`
`;continue}if((q=F.match(L))&&(j.gamma=parseFloat(q[1])),(q=F.match(B))&&(j.exposure=parseFloat(q[1])),(q=F.match(V))&&(j.valid|=2,j.format=q[1]),(q=F.match(G))&&(j.valid|=4,j.height=parseInt(q[1],10),j.width=parseInt(q[2],10)),j.valid&2&&j.valid&4)break}return j.valid&2?j.valid&4?j:p(3,"missing image size specifier"):p(3,"missing format specifier")},S=function(P,O,L){const B=O;if(B<8||B>32767||P[0]!==2||P[1]!==2||P[2]&128)return new Uint8Array(P);if(B!==(P[2]<<8|P[3]))return p(3,"wrong scanline width");const V=new Uint8Array(4*O*L);if(!V.length)return p(4,"unable to allocate buffer space");let G=0,j=0;const F=4*B,q=new Uint8Array(4),fe=new Uint8Array(F);let ue=L;for(;ue>0&&j<P.byteLength;){if(j+4>P.byteLength)return p(1,void 0);if(q[0]=P[j++],q[1]=P[j++],q[2]=P[j++],q[3]=P[j++],q[0]!=2||q[1]!=2||(q[2]<<8|q[3])!=B)return p(3,"bad rgbe scanline format");let J=0,le;for(;J<F&&j<P.byteLength;){le=P[j++];const be=le>128;if(be&&(le-=128),le===0||J+le>F)return p(3,"bad scanline data");if(be){const ye=P[j++];for(let pe=0;pe<le;pe++)fe[J++]=ye}else fe.set(P.subarray(j,j+le),J),J+=le,j+=le}const me=B;for(let be=0;be<me;be++){let ye=0;V[G]=fe[be+ye],ye+=B,V[G+1]=fe[be+ye],ye+=B,V[G+2]=fe[be+ye],ye+=B,V[G+3]=fe[be+ye],G+=4}ue--}return V},M=function(P,O,L,B){const V=P[O+3],G=Math.pow(2,V-128)/255;L[B+0]=P[O+0]*G,L[B+1]=P[O+1]*G,L[B+2]=P[O+2]*G,L[B+3]=1},k=function(P,O,L,B){const V=P[O+3],G=Math.pow(2,V-128)/255;L[B+0]=va.DataUtils.toHalfFloat(Math.min(P[O+0]*G,65504)),L[B+1]=va.DataUtils.toHalfFloat(Math.min(P[O+1]*G,65504)),L[B+2]=va.DataUtils.toHalfFloat(Math.min(P[O+2]*G,65504)),L[B+3]=va.DataUtils.toHalfFloat(1)},x=new Uint8Array(e);x.pos=0;const C=E(x);if(C!==-1){const P=C.width,O=C.height,L=S(x.subarray(x.pos),P,O);if(L!==-1){let B,V,G,j;switch(this.type){case va.FloatType:j=L.length/4;const F=new Float32Array(j*4);for(let fe=0;fe<j;fe++)M(L,fe*4,F,fe*4);B=F,G=va.FloatType;break;case va.HalfFloatType:j=L.length/4;const q=new Uint16Array(j*4);for(let fe=0;fe<j;fe++)k(L,fe*4,q,fe*4);B=q,G=va.HalfFloatType;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:P,height:O,data:B,header:C.string,gamma:C.gamma,exposure:C.exposure,format:V,type:G}}}return null}setDataType(e){return this.type=e,this}load(e,n,i,o){function l(d,p){switch(d.type){case va.FloatType:d.colorSpace=va.LinearSRGBColorSpace,d.minFilter=va.LinearFilter,d.magFilter=va.LinearFilter,d.generateMipmaps=!1,d.flipY=!0;break;case va.HalfFloatType:d.colorSpace=va.LinearSRGBColorSpace,d.minFilter=va.LinearFilter,d.magFilter=va.LinearFilter,d.generateMipmaps=!1,d.flipY=!0;break}n&&n(d,p)}return super.load(e,l,i,o)}}ML.RGBELoader=X0t;(function(t){var e=X&&X.__createBinding||(Object.create?function(w,E,S,M){M===void 0&&(M=S);var k=Object.getOwnPropertyDescriptor(E,S);(!k||("get"in k?!E.__esModule:k.writable||k.configurable))&&(k={enumerable:!0,get:function(){return E[S]}}),Object.defineProperty(w,M,k)}:function(w,E,S,M){M===void 0&&(M=S),w[M]=E[S]}),n=X&&X.__setModuleDefault||(Object.create?function(w,E){Object.defineProperty(w,"default",{enumerable:!0,value:E})}:function(w,E){w.default=E}),i=X&&X.__importStar||function(w){if(w&&w.__esModule)return w;var E={};if(w!=null)for(var S in w)S!=="default"&&Object.prototype.hasOwnProperty.call(w,S)&&e(E,w,S);return n(E,w),E},o=X&&X.__awaiter||function(w,E,S,M){function k(x){return x instanceof S?x:new S(function(C){C(x)})}return new(S||(S=Promise))(function(x,C){function P(B){try{L(M.next(B))}catch(V){C(V)}}function O(B){try{L(M.throw(B))}catch(V){C(V)}}function L(B){B.done?x(B.value):k(B.value).then(P,O)}L((M=M.apply(w,E||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.EnvironmentMapLoader=t.ENVIRONMENT_MAP_TYPE=t.ENVIRONMENT_MAP_EMPTY=t.ENVIRONMENT_MAP=t.ENVIRONMENT_MAP_CUBE=void 0;const l=i(se),d=Mn,p=ML,g=Gi;(function(w){w.DEFAULT="default",w.DEFAULT_BW="default_bw",w.BLURRED_LIGHTS="blurred_lights",w.GEORGENTOR="georgentor",w.GEORGENTOR_BLUR="georgentor_blur",w.GEORGENTOR_BLUE_BLUR="georgentor_blue_blur",w.GEORGENTOR_BW_BLUR="georgentor_bw_blur",w.LEVELSETS="levelsets",w.LYTHWOOD_FIELD="lythwood_field",w.MOUNTAINS="mountains",w.OCEAN="ocean",w.PIAZZA_SAN_MARCO="piazza_san_marco",w.RESIDENTIAL_GARDEN="residential_garden",w.ROOM_ABSTRACT_1="room_abstract_1",w.SKY="sky",w.STORAGE_ROOM="storage_room",w.STORM="storm",w.SUBWAY_ENTRANCE="subway_entrance",w.SUBWAY_ENTRANCE_BW_BLUR="subway_entrance_bw_blur",w.WHITE="white",w.YOKOHAMA="yokohama"})(t.ENVIRONMENT_MAP_CUBE||(t.ENVIRONMENT_MAP_CUBE={}));var v;(function(w){w.ANNIVERSARY_LOUNGE="anniversary_lounge",w.BALLROOM="ballroom",w.CANNON_EXTERIOR="cannon_exterior",w.CAPE_HILL="cape_hill",w.CHRISTMAS_PHOTO_STUDIO="christmas_photo_studio",w.CIRCUS_MAXIMUS="circus_maximus",w.COLORFUL_STUDIO="colorful_studio",w.COMBINATION_ROOM="combination_room",w.GREEN_POINT_PARK="green_point_park",w.HILLTOP_CONSTRUCTION="hilltop_construction",w.LARGE_CORRIDOR="large_corridor",w.LYTHWOOD_LOUNGE="lythwood_lounge",w.NEUTRAL="neutral",w.OBERER_KUHBERG="oberer_kuhberg",w.OLD_HALL="old_hall",w.PAUL_LOBE_HAUS="paul_lobe_haus",w.PHOTO_STUDIO="photo_studio",w.PHOTO_STUDIO_BROADWAY_HALL="photo_studio_broadway_hall",w.SNOWY_FIELD="snowy_field",w.STUDIO_SMALL="studio_small",w.SUNFLOWERS="sunflowers",w.TABLE_MOUNTAIN="table_mountain",w.VENICE_SUNSET="venice_sunset",w.WIDE_STREET="wide_street"})(v=t.ENVIRONMENT_MAP||(t.ENVIRONMENT_MAP={})),function(w){w.NONE="none",w.NULL="null"}(t.ENVIRONMENT_MAP_EMPTY||(t.ENVIRONMENT_MAP_EMPTY={}));var _;(function(w){w.LDR="ldr",w.HDR="hdr",w.NONE="none",w.NULL="null"})(_=t.ENVIRONMENT_MAP_TYPE||(t.ENVIRONMENT_MAP_TYPE={}));class b{constructor(E){this._renderingEngine=E,this._environmentMapFilenames=["px","nx","pz","nz","py","ny"],this._environmentMapHDR=[],this._environmentMapNamesHDR=Object.values(v).filter(S=>typeof S=="string"),this._environmentMapNamesHDRKhronos=["cannon_exterior","colorful_studio","neutral","wide_street"],this._environmentMapNamesJPG=["default","default_bw","blurred_lights","georgentor","georgentor_blur","georgentor_blue_blur","georgentor_bw_blur","levelsets","lythwood_field","mountains","ocean","piazza_san_marco","residential_garden","room_abstract_1","sky","storage_room","storm","subway_entrance","subway_entrance_bw_blur","white","yokohama"],this._environmentMaps={},this._eventEngine=d.EventEngine.instance,this._httpClient=d.HttpClient.instance,this._stateEngine=d.StateEngine.instance,this._uuidGenerator=d.UuidGenerator.instance,this._envMap=null,this._isHDRMap=!1,this._textureEncoding=l.SRGBColorSpace,this._type=_.NULL}get environmentMap(){return this._envMap}get isHDRMap(){return this._isHDRMap}get textureEncoding(){return this._textureEncoding}set textureEncoding(E){this._textureEncoding=E,this.assignTextureEncoding()}getEnvironmentMapImageUrl(E){if(Array.isArray(E))return"";if(this._environmentMapNamesHDR.indexOf(E)>=0){let S="https://viewer.shapediver.com/v3/envmaps/1k/"+E+"_1k.hdr";return this._environmentMapNamesHDRKhronos.indexOf(E)>=0&&(S="https://viewer.shapediver.com/v3/envmaps/khronos/"+E+".hdr"),S}else if((E.startsWith("https://")||E.startsWith("http://"))&&(E.endsWith(".hdr")||E.endsWith(".jpg")||E.endsWith(".png")))return E;return""}init(){this._environmentMaps.null={name:"null",map:Promise.resolve(null),type:_.NULL},this._environmentMaps.none={name:"none",map:Promise.resolve(null),type:_.NONE},this._pmremGenerator=new l.PMREMGenerator(this._renderingEngine.renderer),this._pmremGenerator.compileEquirectangularShader()}load(E){return o(this,void 0,void 0,function*(){const S=this._uuidGenerator.create(),M=this.loadEnvMap(E,S);return yield this.assignEnvironmentMap(M.name,M.type,S),Promise.resolve(!0)})}loadEnvMap(E,S){const M=S||this._uuidGenerator.create(),k={type:g.TASK_TYPE.ENVIRONMENT_MAP_LOADING,id:M,data:{input:E},progress:0,status:"Loading EnvironmentMap"};if(this._eventEngine.emitEvent(d.EVENTTYPE.TASK.TASK_START,k),E==="none"||E==="null")return this._environmentMaps[E];let x,C,P;if(!Array.isArray(E)&&E.startsWith('["https')&&E.endsWith('"]'))try{E=JSON.parse(E)}catch{throw this.notify(M,!0),new d.ShapeDiverViewerEnvironmentMapError("EnvironmentMapLoader.load: Was not able to load environment map.",E)}if(!Array.isArray(E))x=E.toLowerCase().replace(/ /g,"_"),C=x+this._renderingEngine.environmentMapResolution;else{if(E.length!==6)throw this.notify(M,!0),new d.ShapeDiverViewerEnvironmentMapError("EnvironmentMapLoader.load: Was not able to load environment map, exactly 6 files are needed in the array.",E);x=JSON.stringify(E,null,0),C=x}for(const O in this._environmentMaps)if(O===C)return this._environmentMaps[O];try{if(Array.isArray(E))P=E;else{P=[];let O;if(this._environmentMapNamesHDR.indexOf(x)>=0){let L="https://viewer.shapediver.com/v3/envmaps/1k/"+x+"_1k.hdr";return this._environmentMapNamesHDRKhronos.indexOf(x)>=0&&(L="https://viewer.shapediver.com/v3/envmaps/khronos/"+x+".hdr"),this._environmentMapHDR.push(L),this.loadEnvironmentMap(C,L,M)}else if(this._environmentMapNamesJPG.indexOf(x)>=0)for(O=0;O<this._environmentMapFilenames.length;O++)P.push("https://viewer.shapediver.com/v2/envmaps/"+this._renderingEngine.environmentMapResolution+"/"+x+"/"+this._environmentMapFilenames[O]+".jpg");else if(E.startsWith("https://")||E.startsWith("http://")){if(E.endsWith(".hdr"))return this._environmentMapHDR.push(E),this.loadEnvironmentMap(C,E,M);for(E.endsWith("/")||(E+="/"),O=0;O<this._environmentMapFilenames.length;O++)P.push(E+this._environmentMapFilenames[O]+".jpg")}else throw this.notify(M,!0),new d.ShapeDiverViewerEnvironmentMapError("EnvironmentMapLoader.load: Was not able to load environment map, format not supported.",E)}return this.loadEnvironmentMap(C,P,M)}catch(O){throw this.notify(M,!0),O}}assignEnvironmentMap(E,S,M){return o(this,void 0,void 0,function*(){if(!(E in this._environmentMaps))return;this._type=S;const k=yield this._environmentMaps[E].map;this._renderingEngine.materialLoader.assignEnvironmentMap(k,S),this._envMap=k,this.notify(M)})}assignTextureEncoding(){for(const E in this._environmentMaps)this._environmentMaps[E]&&this._environmentMaps[E].resolved===!0&&this._environmentMaps[E].map.then(S=>{S instanceof l.Texture&&(S.dispose(),S.colorSpace=this._textureEncoding,S.needsUpdate=!0)})}loadEnvironmentMap(E,S,M){return this._environmentMaps[E]={name:E,type:Array.isArray(S)?_.LDR:_.HDR,map:new Promise((k,x)=>o(this,void 0,void 0,function*(){try{if(Array.isArray(S)){const C=[];S.forEach(L=>C.push(this._httpClient.get(L,void 0,!0)));const O=(yield Promise.all(C)).map(L=>{const B=new Uint8Array(L.data),V=new Blob([B],{type:L.headers["content-type"]});return URL.createObjectURL(V)});new l.CubeTextureLoader().load(O,L=>{L.colorSpace=l.SRGBColorSpace,L.format=l.RGBAFormat,L.mapping=l.CubeReflectionMapping,O.forEach(B=>URL.revokeObjectURL(B)),this._environmentMaps[E].resolved=!0,k(L)},()=>{},L=>x(L))}else{const C=yield this._httpClient.get(S,void 0,!0),P=new Uint8Array(C.data),O=new Blob([P],{type:C.headers["content-type"]}),L=URL.createObjectURL(O);new p.RGBELoader().load(L,B=>{const V=this._pmremGenerator.fromEquirectangular(B).texture;this._pmremGenerator.dispose(),URL.revokeObjectURL(L),this._environmentMaps[E].resolved=!0,k(V)},()=>{},B=>x(B))}}catch(C){throw this.notify(M,!0),C}}))},this._environmentMaps[E]}notify(E,S=!1){let M;S?(M={type:g.TASK_TYPE.ENVIRONMENT_MAP_LOADING,id:E,progress:1,status:"Loading of EnvironmentMap failed"},this._eventEngine.emitEvent(d.EVENTTYPE.TASK.TASK_CANCEL,M)):(M={type:g.TASK_TYPE.ENVIRONMENT_MAP_LOADING,id:E,progress:1,status:"Loaded EnvironmentMap"},this._stateEngine.viewportEngines[this._renderingEngine.id].environmentMapLoaded.resolve(!0),this._stateEngine.viewportEngines[this._renderingEngine.id].environmentMapLoaded=new d.StatePromise,this._eventEngine.emitEvent(d.EVENTTYPE.TASK.TASK_END,M))}}t.EnvironmentMapLoader=b})(xL);var wA={},S4={};Object.defineProperty(S4,"__esModule",{value:!0});S4.frag=S4.vert=void 0;S4.vert=`
#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>

// CUSTOM START
varying vec3 frag_position;
varying vec3 frag_normal;
// CUSTOM END

void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
    #ifdef USE_TRANSMISSION
        vWorldPosition = worldPosition.xyz;
    #endif

    // CUSTOM START
    frag_position = position;
    frag_normal = objectNormal;
    // CUSTOM END
}
`;S4.frag=`
#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif

// CUSTOM START
#ifdef USE_IMPURITYMAP
	uniform sampler2D impurityMap;
#endif
// CUSTOM END

uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>



// CUSTOM START

varying vec4 initialPosition;
varying vec3 initialNormal;

varying vec3 frag_position;
varying vec3 frag_normal;

uniform vec3 center;
uniform float radius;
uniform samplerCube sphericalNormalMap;
uniform mat3 normalMatrix;
uniform mat4 modelMatrix;

uniform float impurityScale;
uniform vec3 colorTransferBegin;
uniform vec3 colorTransferEnd;
uniform float refractionIndex;
uniform float gamma;
uniform float contrast;
uniform float brightness;
uniform float dispersion;
uniform float tracingOpacity;


vec3 getIBLRadianceVariation( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
	#if defined( ENVMAP_TYPE_CUBE_UV )
		vec3 reflectVec = reflect( - viewDir, normal );
		// Mixing the reflection with the normal is more accurate and keeps rough objects from gathering light from behind their tangent plane.
		reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
		vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
		return min(envMapColor.rgb * envMapIntensity, vec3(1.0));
	#else
		return vec3( 0.0 );
	#endif
}

vec3 calculateReflectedLight(vec3 position, vec3 normal, vec3 viewDir, PhysicalMaterial material, int depth) {
	
	vec3 currentGeometryPosition = (modelMatrix * vec4(position, 1.0)).xyz;

	mat3 normalMatrix;
	normalMatrix[0] = normalize(modelMatrix[0].xyz);
	normalMatrix[1] = normalize(modelMatrix[1].xyz);
	normalMatrix[2] = normalize(modelMatrix[2].xyz);
	
	// Calculate the normal vector in world space
	vec3 currentGeometryNormal = normalize(normalMatrix * normal);
	
	// Calculate the view direction vector in world space
	vec3 currentGeometryViewDir = normalize(normalMatrix * -viewDir);

    vec3 currentGeometryClearcoatNormal;
	
	#ifdef USE_CLEARCOAT
        currentGeometryClearcoatNormal = clearcoatNormal;
    #endif

	ReflectedLight rLight;
	IncidentLight dLight;

	float temp = material.roughness;
	material.roughness = 0.5;

	#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )

		PointLight pointLight;
        #if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
            PointLightShadow pointLightShadow;
        #endif

	    #pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
			pointLight = pointLights[ i ];
            getPointLightInfo( pointLight, currentGeometryPosition, dLight );
            #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
                pointLightShadow = pointLightShadows[ i ];
                dLight.color *= all( bvec2( dLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
            #endif
		    RE_Direct( dLight, currentGeometryPosition, currentGeometryNormal, currentGeometryViewDir, currentGeometryClearcoatNormal, material, rLight );
		}
        #pragma unroll_loop_end
	#endif
	#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
        SpotLight spotLight;
        #if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
            SpotLightShadow spotLightShadow;
        #endif
        #pragma unroll_loop_start
        for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
            spotLight = spotLights[ i ];
            getSpotLightInfo( spotLight, currentGeometryPosition, dLight );
            #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
                spotLightShadow = spotLightShadows[ i ];
                dLight.color *= all( bvec2( dLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
            #endif
            RE_Direct( dLight, currentGeometryPosition, currentGeometryNormal, currentGeometryViewDir, currentGeometryClearcoatNormal, material, rLight );
        }
        #pragma unroll_loop_end
	#endif

    #if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
        DirectionalLight directionalLight;
        #if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
            DirectionalLightShadow directionalLightShadow;
        #endif
        #pragma unroll_loop_start
        for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
            directionalLight = directionalLights[ i ];
            getDirectionalLightInfo( directionalLight, dLight );
            #if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
                directionalLightShadow = directionalLightShadows[ i ];
                dLight.color *= all( bvec2( dLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
            #endif
            RE_Direct( dLight, currentGeometryPosition, currentGeometryNormal, currentGeometryViewDir, currentGeometryClearcoatNormal, material, rLight );
        }
        #pragma unroll_loop_end
    #endif
	material.roughness = temp;
	
    #if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
        RectAreaLight rectAreaLight;
        #pragma unroll_loop_start
        for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
            rectAreaLight = rectAreaLights[ i ];
            RE_Direct_RectArea( rectAreaLight, currentGeometryPosition, currentGeometryNormal, currentGeometryViewDir, currentGeometryClearcoatNormal, material, rLight );
        }
        #pragma unroll_loop_end
    #endif
    #if defined( RE_IndirectDiffuse )
        vec3 iblIrradiance = vec3( 0.0 );
        vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
		
		#if defined( USE_LIGHT_PROBES )
        	irradiance += getLightProbeIrradiance( lightProbe, currentGeometryNormal );
		#endif
        #if ( NUM_HEMI_LIGHTS > 0 )
            #pragma unroll_loop_start
            for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
                irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], currentGeometryNormal );
            }
            #pragma unroll_loop_end
        #endif
    #endif
    #if defined( RE_IndirectSpecular )
        vec3 radiance = vec3( 0.0 );
        vec3 clearcoatRadiance = vec3( 0.0 );
    #endif


    #if defined( RE_IndirectDiffuse )
        #ifdef USE_LIGHTMAP
            vec4 lightMapTexel = texture2D( lightMap, vUv2 );
            vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
            irradiance += lightMapIrradiance;
        #endif
        #if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
            iblIrradiance += getIBLIrradiance( currentGeometryNormal );
        #endif
    #endif
    #if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
        radiance += getIBLRadianceVariation( currentGeometryViewDir, currentGeometryNormal, material.roughness );
        #ifdef USE_CLEARCOAT
            clearcoatRadiance += getIBLRadianceVariation( currentGeometryViewDir, currentGeometryClearcoatNormal, material.clearcoatRoughness );
        #endif
    #endif

    #if defined( RE_IndirectDiffuse )
        RE_IndirectDiffuse( irradiance, currentGeometryPosition, currentGeometryNormal, currentGeometryViewDir, currentGeometryClearcoatNormal, material, rLight );
    #endif
    #if defined( RE_IndirectSpecular )
        RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, currentGeometryPosition, currentGeometryNormal, currentGeometryViewDir, currentGeometryClearcoatNormal, material, rLight );
    #endif

	if(depth >= 0) {
		float frac = float(depth) / float(TRACING_DEPTH);
		vec3 colorTransfer = (1.0-frac) * colorTransferBegin + frac * colorTransferEnd;
		rLight.indirectSpecular *= colorTransfer;
		rLight.directSpecular *= colorTransfer;
	}

	vec3 color = rLight.indirectSpecular + rLight.directSpecular + rLight.indirectDiffuse + rLight.directDiffuse;

	// gamma
	color = pow(color, vec3(1.0/gamma)); 

	// contrast
	color.rgb = ((color.rgb - 0.5) * max(contrast, 0.0)) + 0.5; 

	// brightness
	color.r = min(max(color.r + brightness, 0.0), 1.0);
	color.g = min(max(color.g + brightness, 0.0), 1.0);
	color.b = min(max(color.b + brightness, 0.0), 1.0);

	return color;
}

vec3 normalLookUp(vec3 dir) {
	vec4 s = textureCube(sphericalNormalMap, dir);
	if(s.a < 1.0/256.0) {
		return normalize(vec3(-s.x, -s.y, -s.z));
	} else if(s.a < 3.0/256.0) {
		return normalize(vec3(-s.x, -s.y, s.z));
	} else if(s.a < 5.0/256.0) {
		return normalize(vec3(-s.x, s.y, -s.z));
	} else if(s.a < 7.0/256.0) {
		return normalize(vec3(s.x, -s.y, -s.z));
	} else if(s.a < 9.0/256.0) {
		return normalize(vec3(-s.x, s.y, s.z));
	} else if(s.a < 11.0/256.0) {
		return normalize(vec3(s.x, -s.y, s.z));
	} else if(s.a < 13.0/256.0) {
		return normalize(vec3(s.x, s.y, -s.z));
	} else {
		return normalize(s.xyz);
	}
}

#ifdef USE_IMPURITYMAP
	float impurityLookUp(vec3 dir) {
		vec3 c = textureCube(impurityMap, dir.xy).rgb;
		return (c.x + c.y + c.z) / 3.0;
	}
#endif

vec3 raySphereIntersection(vec3 o, vec3 d) {

	vec3 oc = o - center;
    float a = dot(d, d);
    float b = 2.0 * dot(oc, d);
    float c = dot(oc,oc) - radius*radius;
    float discriminant = b*b - 4.0*a*c;
    if(discriminant < 0.0){
        return vec3(0.0);
    }
    else{
        return o +( (-b + sqrt(discriminant)) / (2.0*a)) * d;
    }
}

vec3 hueToSaturatedColor(float hue) {
    float r,g,b;
    if (hue < 0.25){
		float t = 1.0 - (hue / 0.25);
        r = 1.0;
        g = 1.0;
        b = t;    
	} else if (hue < 0.5){
    	float t = 1.0 - (hue - 0.25 / 0.25);
		r = 1.0;
        g = t;
        b = 0.0;
	} else if (hue < 0.75){
    	float t = 1.0 - (hue - 0.5 / 0.25);
		r = t;
        g = 0.0;
        b = 1.0 - t;
    } else {
    	float t = hue - 0.75 / 0.25;
        r = t;
        g = t;
        b = 1.0;
    }
    return vec3(r, g, b) / 0.5 + 0.5;
}
// CUSTOM END

void main() {    
    // CUSTOM START
    vec3 frag_normal_normalized = frag_normal;
    // CUSTOM END
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <opaque_fragment>

    // CUSTOM START
	
    // Extract the translation part of the model matrix
	vec3 translation = modelMatrix[3].xyz;

	// Extract the rotation part of the model matrix (3x3 upper-left submatrix)
	mat3 rotationMatrix = mat3(modelMatrix);

	// Calculate the inverse of the rotation matrix (transpose since it's orthogonal)
	mat3 inverseRotationMatrix;
	inverseRotationMatrix[0] = vec3(rotationMatrix[0].x, rotationMatrix[1].x, rotationMatrix[2].x);
	inverseRotationMatrix[1] = vec3(rotationMatrix[0].y, rotationMatrix[1].y, rotationMatrix[2].y);
	inverseRotationMatrix[2] = vec3(rotationMatrix[0].z, rotationMatrix[1].z, rotationMatrix[2].z);

	// Calculate the camera position in model space
	vec3 cameraPositionInModelSpace = inverseRotationMatrix * (cameraPosition - translation);

	// Calculate the initial direction
	vec3 initialDirection = normalize(frag_position.xyz - cameraPositionInModelSpace);

	vec4 outgoingLight2;
	float r_0 = (1.0-refractionIndex)/(1.0+refractionIndex);
	r_0 = r_0*r_0;

	float cos_theta_0 = -dot(initialDirection, frag_normal_normalized);
	float r_0_outside = (refractionIndex-1.0)/(refractionIndex+1.0);
	r_0_outside = r_0_outside*r_0_outside;
	float initialProbability = r_0_outside + (1.0 - r_0_outside)*pow(1.0 - cos_theta_0, 5.0);

	outgoingLight2 = vec4(calculateReflectedLight(frag_position, frag_normal_normalized, initialDirection, material, -1), 1.0);
	// gl_FragColor = outgoingLight2;
	// return;
	if(TRACING_DEPTH > 0) 
		outgoingLight2 *= initialProbability;
		
	vec3 tempColor;

	#ifdef DISPERSION
		const int loop = 3;
		vec3 dispersionColor;
	#else
		const int loop = 1;
	#endif
		#pragma unroll_loop_start
		for(int j = 0; j < loop; j++){
			vec3 refractedDirection = refract(initialDirection, frag_normal_normalized, 1.0/refractionIndex + float(j)*dispersion * 0.025);
			vec3 newPosition = raySphereIntersection(frag_position, refractedDirection);
			vec3 lookUpVector = normalize(newPosition - center);
			vec3 newNormal = normalLookUp(lookUpVector);
			vec3 newDirection = reflect(refractedDirection, newNormal);

			float currentProbability = 1.0;

			#ifdef USE_IMPURITYMAP
				float impurityProbability = impurityLookUp(lookUpVector);
				currentProbability -= impurityProbability * impurityScale;
				// gl_FragColor = vec4(vec3(impurityProbability), 1.0);
				// return;
			#endif
			
			// if(0 == TRACING_DEPTH) {
			// 	gl_FragColor = vec4(0.5 * newNormal + 0.5, 1.0);
			// 	return;
			// }

			tempColor = vec3(0.0);
			#pragma unroll_loop_start
			for(int i = 0; i < TRACING_DEPTH; i++) {
				// small position correction to avoid artefacts
				newPosition = newPosition - lookUpVector * 1e-6;
				newPosition = raySphereIntersection(newPosition, newDirection);
				lookUpVector = normalize(newPosition - center);
				newNormal = normalLookUp(lookUpVector);
			
				float cos_theta = dot(newDirection, newNormal);
				float ratio;
				if(cos_theta > 0.0) {
					ratio = refractionIndex;
				} else {
					cos_theta = -cos_theta;
					ratio = 1.0 / refractionIndex;
				}
				float cos_theta_2 = 1.0 - ratio*ratio * (1.0 - cos_theta*cos_theta);
				float probability = r_0 + (1.0 - r_0)*pow(1.0 - cos_theta, 5.0);
				if(cos_theta_2 < 0.0) probability = 0.0;

				vec3 refracted = refract(newDirection, newNormal*-1.0, 1.0/refractionIndex);
				tempColor += probability * currentProbability * calculateReflectedLight(newPosition, newNormal*-1.0, reflect(refracted, newNormal), material, i);
				if(i+1 == TRACING_DEPTH)
					tempColor += (1.0 - probability) * currentProbability * calculateReflectedLight(newPosition, newNormal, newDirection, material, i);

				newDirection = reflect(newDirection, newNormal);

				// if(i+1 == TRACING_DEPTH) {
				// 	gl_FragColor = vec4(0.5 * newNormal + 0.5, 1.0);
				// 	return;
				// }

				currentProbability *= (1.0 - probability);
			}
			#pragma unroll_loop_end

			#ifdef DISPERSION
				if(j == 0) {
					dispersionColor.r = tempColor.r;	
				} else if(j == 1) {
					dispersionColor.g = tempColor.g;	
				} else if(j == 2) {
					dispersionColor.b = tempColor.b;	
				}
				tempColor = dispersionColor;
			#endif
		}	
		#pragma unroll_loop_end

	if(TRACING_DEPTH > 0)
		outgoingLight2.rgb += (1.0 - initialProbability) * tempColor;

	float alpha = (1.0 - initialProbability) + initialProbability*tracingOpacity;
	gl_FragColor = vec4(outgoingLight2.rgb, alpha*diffuseColor.a);

    // CUSTOM END

	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}

`;var Z0t=X&&X.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,o)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),Q0t=X&&X.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),K0t=X&&X.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Z0t(e,t,n);return Q0t(e,t),e};Object.defineProperty(wA,"__esModule",{value:!0});wA.GemMaterial=void 0;const ch=K0t(se),J0t=se,dle=S4;class edt extends J0t.MeshPhysicalMaterial{constructor(e){super(),this.refractionIndex=2.4,this.impurityMap=null,this.impurityScale=1,this.colorTransferBegin=new ch.Color(16777215),this.colorTransferEnd=new ch.Color(16777215),this.center=new ch.Vector3(0,0,0),this.tracingDepth=5,this.radius=1,this.sphericalNormalMap=null,this.gamma=1,this.contrast=1,this.brightness=0,this.dispersion=0,this.tracingOpacity=0,this.isGemMaterial=!0;const n={refractionIndex:{value:2.4},impurityMap:{value:null},impurityScale:{value:1},colorTransferBegin:{value:new ch.Color(16777215)},colorTransferEnd:{value:new ch.Color(16777215)},center:{value:new ch.Vector3(0,0,0)},tracingDepth:{value:5},radius:{value:1},sphericalNormalMap:{value:null},gamma:{value:1},contrast:{value:1},brightness:{value:0},dispersion:{value:0},tracingOpacity:{value:0}};this._extraUniforms=n,this.onBeforeCompile=function(i){for(const o in n)i.uniforms[o]=n[o];i.vertexShader=dle.vert,i.fragmentShader=dle.frag},Object.defineProperties(this,{tracingDepth:{get:function(){return n.tracingDepth.value},set:function(i){n.tracingDepth.value=i,i?this.defines.TRACING_DEPTH=Math.floor(i):delete this.defines.TRACING_DEPTH}},refractionIndex:{get:function(){return n.refractionIndex.value},set:function(i){n.refractionIndex.value=i}},impurityMap:{get:function(){return n.impurityMap.value},set:function(i){n.impurityMap.value=i,i?(this.defines.USE_IMPURITYMAP="",this.defines.USE_UV=""):(delete this.defines.USE_IMPURITYMAP,delete this.defines.USE_UV)}},impurityScale:{get:function(){return n.impurityScale.value},set:function(i){n.impurityScale.value=i}},colorTransferBegin:{get:function(){return n.colorTransferBegin.value},set:function(i){n.colorTransferBegin.value=i}},colorTransferEnd:{get:function(){return n.colorTransferEnd.value},set:function(i){n.colorTransferEnd.value=i}},center:{get:function(){return n.center.value},set:function(i){n.center.value=i}},radius:{get:function(){return n.radius.value},set:function(i){n.radius.value=i}},sphericalNormalMap:{get:function(){return n.sphericalNormalMap.value},set:function(i){n.sphericalNormalMap.value=i,i?this.defines.USE_UV="":delete this.defines.USE_UV}},gamma:{get:function(){return n.gamma.value},set:function(i){n.gamma.value=i}},contrast:{get:function(){return n.contrast.value},set:function(i){n.contrast.value=i}},brightness:{get:function(){return n.brightness.value},set:function(i){n.brightness.value=i}},dispersion:{get:function(){return n.dispersion.value},set:function(i){n.dispersion.value=i,i!==0?this.defines.DISPERSION="":delete this.defines.DISPERSION}},tracingOpacity:{get:function(){return n.tracingOpacity.value},set:function(i){n.tracingOpacity.value=i}}}),this.refractionIndex=e.refractionIndex||2.4,this.impurityMap=e.impurityMap||null,this.impurityScale=e.impurityScale||1,this.colorTransferBegin.copy(e.colorTransferBegin||new ch.Color(16777215)),this.colorTransferEnd.copy(e.colorTransferEnd||new ch.Color(16777215)),this.center.copy(e.center||new ch.Vector3(0,0,0)),this.tracingDepth=e.tracingDepth||5,this.radius=e.radius||1,this.sphericalNormalMap=e.sphericalNormalMap||null,this.gamma=e.gamma||1,this.contrast=e.contrast||1,this.brightness=e.brightness||0,this.dispersion=e.dispersion||0,this.tracingOpacity=e.tracingOpacity||0,this.setValues(e)}copy(e){super.copy(e);const n=e;return this.refractionIndex=n.refractionIndex,this.impurityMap=n.impurityMap,this.impurityScale=n.impurityScale,this.colorTransferBegin.copy(n.colorTransferBegin),this.colorTransferEnd.copy(n.colorTransferEnd),this.center.copy(n.center),this.tracingDepth=n.tracingDepth,this.radius=n.radius,this.sphericalNormalMap=n.sphericalNormalMap,this.gamma=n.gamma,this.contrast=n.contrast,this.brightness=n.brightness,this.dispersion=n.dispersion,this.tracingOpacity=n.tracingOpacity,this}}wA.GemMaterial=edt;var kx={},T4={};Object.defineProperty(T4,"__esModule",{value:!0});T4.frag=T4.vert=void 0;T4.vert=`
attribute float positionIndex;
flat varying int vMaterialIndex;
flat varying int vPositionIndex;

uniform float size_0;
uniform float size_1;
uniform float size_2;
uniform float size_3;
uniform float size_4;
uniform float size_5;
uniform float size_6;
uniform float size_7;

uniform bool sizeAttenuation_0;
uniform bool sizeAttenuation_1;
uniform bool sizeAttenuation_2;
uniform bool sizeAttenuation_3;
uniform bool sizeAttenuation_4;
uniform bool sizeAttenuation_5;
uniform bool sizeAttenuation_6;
uniform bool sizeAttenuation_7;

uniform highp usampler2D materialIndexDataTexture;

uniform float scale;

float getSize(int materialIndex) {
    if ( materialIndex == 1 ) {
        return size_1;
    } else if ( materialIndex == 2 ) {
        return size_2;
    } else if ( materialIndex == 3 ) {
        return size_3;
    } else if ( materialIndex == 4 ) {
        return size_4;
    } else if ( materialIndex == 5 ) {
        return size_5;
    } else if ( materialIndex == 6 ) {
        return size_6;
    } else if ( materialIndex == 7 ) {
        return size_7;
    } else {
        return size_0;
    }
}

bool getSizeAttenuation(int materialIndex) {
    if ( materialIndex == 1 ) {
        return sizeAttenuation_1;
    } else if ( materialIndex == 2 ) {
        return sizeAttenuation_2;
    } else if ( materialIndex == 3 ) {
        return sizeAttenuation_3;
    } else if ( materialIndex == 4 ) {
        return sizeAttenuation_4;
    } else if ( materialIndex == 5 ) {
        return sizeAttenuation_5;
    } else if ( materialIndex == 6 ) {
        return sizeAttenuation_6;
    } else if ( materialIndex == 7 ) {
        return sizeAttenuation_7;
    } else {
        return sizeAttenuation_0;
    }
}

#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>

#ifdef USE_POINTS_UV

	varying vec2 vUv;
	uniform mat3 uvTransform;

#endif

int retrieveMaterialIndex() {
    vec2 uv = vec2(positionIndex/1024.0, 0.5);

    // get the value of a texture at a specific index
    return int(texture2D(materialIndexDataTexture, uv).r);
}

void main() {
    int materialIndex = retrieveMaterialIndex();
    vMaterialIndex = materialIndex;

    float size = getSize(materialIndex);
    bool sizeAttenuation = getSizeAttenuation(materialIndex);

	#ifdef USE_POINTS_UV

		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;

	#endif

	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>

    gl_PointSize = size;

	if(sizeAttenuation) {
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
    }


	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>

}
`;T4.frag=`
uniform vec3 diffuse;
uniform vec3 color_0;
uniform vec3 color_1;
uniform vec3 color_2;
uniform vec3 color_3;
uniform vec3 color_4;
uniform vec3 color_5;
uniform vec3 color_6;
uniform vec3 color_7;


uniform float opacity;
flat varying int vMaterialIndex;
flat varying int vPositionIndex;

#include <common>
#include <color_pars_fragment>

#if defined( USE_POINTS_UV )

	varying vec2 vUv;

#else

	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )

		uniform mat3 uvTransform;

	#endif

#endif

#ifdef USE_MAP

	uniform sampler2D map_0;
	uniform sampler2D map_1;
	uniform sampler2D map_2;
	uniform sampler2D map_3;
    uniform sampler2D map_4;
    uniform sampler2D map_5;
    uniform sampler2D map_6;
    uniform sampler2D map_7;

#endif

#ifdef USE_ALPHAMAP

	uniform sampler2D alphaMap_0;
    uniform sampler2D alphaMap_1;
    uniform sampler2D alphaMap_2;
    uniform sampler2D alphaMap_3;
    uniform sampler2D alphaMap_4;
    uniform sampler2D alphaMap_5;
    uniform sampler2D alphaMap_6;
    uniform sampler2D alphaMap_7;

#endif


#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>

void main() {

	#include <clipping_planes_fragment>

	vec3 outgoingLight = vec3( 0.0 );

    vec3 c = vec3(1.0, 0.0, 0.0);
    if ( vMaterialIndex == 1 ) {
        c = color_1;
    } else if ( vMaterialIndex == 2 ) {
        c = color_2;
    } else if ( vMaterialIndex == 3 ) {
        c = color_3;
    } else if ( vMaterialIndex == 4 ) {
        c = color_4;
    } else if ( vMaterialIndex == 5 ) {
        c = color_5;
    } else if ( vMaterialIndex == 6 ) {
        c = color_6;
    } else if ( vMaterialIndex == 7 ) {
        c = color_7;
    } else {
        c = color_0;
    }

	vec4 diffuseColor = vec4( c, opacity );

    


	#include <logdepthbuf_fragment>

    #if defined( USE_MAP ) || defined( USE_ALPHAMAP )

        #if defined( USE_POINTS_UV )

            vec2 uv = vUv;

        #else

            vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;

        #endif

    #endif

    #ifdef USE_MAP

        if ( vMaterialIndex == 1 ) {
            diffuseColor *= texture2D( map_1, uv );
        } else if ( vMaterialIndex == 2 ) {
            diffuseColor *= texture2D( map_2, uv );
        } else if ( vMaterialIndex == 3 ) {
            diffuseColor *= texture2D( map_3, uv );
        } else if ( vMaterialIndex == 4 ) {
            diffuseColor *= texture2D( map_4, uv );
        } else if ( vMaterialIndex == 5 ) {
            diffuseColor *= texture2D( map_5, uv );
        } else if ( vMaterialIndex == 6 ) {
            diffuseColor *= texture2D( map_6, uv );
        } else if ( vMaterialIndex == 7 ) {
            diffuseColor *= texture2D( map_7, uv );
        } else {
            diffuseColor *= texture2D( map_0, uv );
        }

    #endif

    #ifdef USE_ALPHAMAP

        if ( vMaterialIndex == 1 ) {
            diffuseColor *= texture2D( alphaMap_1, uv );
        } else if ( vMaterialIndex == 2 ) {
            diffuseColor *= texture2D( alphaMap_2, uv );
        } else if ( vMaterialIndex == 3 ) {
            diffuseColor *= texture2D( alphaMap_3, uv );
        } else if ( vMaterialIndex == 4 ) {
            diffuseColor *= texture2D( alphaMap_4, uv );
        } else if ( vMaterialIndex == 5 ) {
            diffuseColor *= texture2D( alphaMap_5, uv );
        } else if ( vMaterialIndex == 6 ) {
            diffuseColor *= texture2D( alphaMap_6, uv );
        } else if ( vMaterialIndex == 7 ) {
            diffuseColor *= texture2D( alphaMap_7, uv );
        } else {
            diffuseColor *= texture2D( alphaMap_0, uv );
        }

    #endif

	#include <color_fragment>
	#include <alphatest_fragment>

	outgoingLight = diffuseColor.rgb;

	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>

}
`;var tdt=X&&X.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,o)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),ndt=X&&X.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),rdt=X&&X.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&tdt(e,t,n);return ndt(e,t),e};Object.defineProperty(kx,"__esModule",{value:!0});kx.MultiPointsMaterial=void 0;const Ls=rdt(se),hle=T4;class idt extends Ls.PointsMaterial{constructor(e){var n,i,o,l,d,p,g,v,_,b,w,E,S,M,k,x,C,P,O,L,B,V,G,j,F,q,fe,ue,J,le,me,be,ye,pe,oe,Ce,it,Se,Oe,ct,_t,Nt;super(),this.alphaMap_0=null,this.alphaMap_1=null,this.alphaMap_2=null,this.alphaMap_3=null,this.alphaMap_4=null,this.alphaMap_5=null,this.alphaMap_6=null,this.alphaMap_7=null,this.color_0=new Ls.Color(16777215),this.color_1=new Ls.Color(16777215),this.color_2=new Ls.Color(16777215),this.color_3=new Ls.Color(16777215),this.color_4=new Ls.Color(16777215),this.color_5=new Ls.Color(16777215),this.color_6=new Ls.Color(16777215),this.color_7=new Ls.Color(16777215),this.map_0=null,this.map_1=null,this.map_2=null,this.map_3=null,this.map_4=null,this.map_5=null,this.map_6=null,this.map_7=null,this.materialIndexDataTexture=null,this.materialIndexDataTextureSize=1024,this.sizeAttenuation_0=!1,this.sizeAttenuation_1=!1,this.sizeAttenuation_2=!1,this.sizeAttenuation_3=!1,this.sizeAttenuation_4=!1,this.sizeAttenuation_5=!1,this.sizeAttenuation_6=!1,this.sizeAttenuation_7=!1,this.size_0=1,this.size_1=1,this.size_2=1,this.size_3=1,this.size_4=1,this.size_5=1,this.size_6=1,this.size_7=1,this.isMultiPointsMaterial=!0;const Je={materialIndexDataTexture:{value:null},materialIndexDataTextureSize:{value:1024},map_0:{value:null},color_0:{value:new Ls.Color(16711680)},alphaMap_0:{value:null},size_0:{value:1},sizeAttenuation_0:{value:!1},map_1:{value:null},color_1:{value:new Ls.Color(65280)},alphaMap_1:{value:null},size_1:{value:1},sizeAttenuation_1:{value:!1},map_2:{value:null},color_2:{value:new Ls.Color(255)},alphaMap_2:{value:null},size_2:{value:1},sizeAttenuation_2:{value:!1},map_3:{value:null},color_3:{value:new Ls.Color(255)},alphaMap_3:{value:null},size_3:{value:1},sizeAttenuation_3:{value:!1},map_4:{value:null},color_4:{value:new Ls.Color(255)},alphaMap_4:{value:null},size_4:{value:1},sizeAttenuation_4:{value:!1},map_5:{value:null},color_5:{value:new Ls.Color(255)},alphaMap_5:{value:null},size_5:{value:1},sizeAttenuation_5:{value:!1},map_6:{value:null},color_6:{value:new Ls.Color(255)},alphaMap_6:{value:null},size_6:{value:1},sizeAttenuation_6:{value:!1},map_7:{value:null},color_7:{value:new Ls.Color(255)},alphaMap_7:{value:null},size_7:{value:1},sizeAttenuation_7:{value:!1}};this._extraUniforms=Je,this.onBeforeCompile=function(ot){for(const fn in Je)ot.uniforms[fn]=Je[fn];ot.vertexShader=hle.vert,ot.fragmentShader=hle.frag},Object.defineProperties(this,{materialIndexDataTexture:{get:function(){return Je.materialIndexDataTexture.value},set:function(ot){Je.materialIndexDataTexture.value=ot}},materialIndexDataTextureSize:{get:function(){return Je.materialIndexDataTextureSize.value},set:function(ot){Je.materialIndexDataTextureSize.value=ot}},map_0:{get:function(){return Je.map_0.value},set:function(ot){Je.map_0.value=ot}},color_0:{get:function(){return Je.color_0.value},set:function(ot){Je.color_0.value=ot}},alphaMap_0:{get:function(){return Je.alphaMap_0.value},set:function(ot){Je.alphaMap_0.value=ot}},size_0:{get:function(){return Je.size_0.value},set:function(ot){Je.size_0.value=ot}},sizeAttenuation_0:{get:function(){return Je.sizeAttenuation_0.value},set:function(ot){Je.sizeAttenuation_0.value=ot}},map_1:{get:function(){return Je.map_1.value},set:function(ot){Je.map_1.value=ot}},color_1:{get:function(){return Je.color_1.value},set:function(ot){Je.color_1.value=ot}},alphaMap_1:{get:function(){return Je.alphaMap_1.value},set:function(ot){Je.alphaMap_1.value=ot}},size_1:{get:function(){return Je.size_1.value},set:function(ot){Je.size_1.value=ot}},sizeAttenuation_1:{get:function(){return Je.sizeAttenuation_1.value},set:function(ot){Je.sizeAttenuation_1.value=ot}},map_2:{get:function(){return Je.map_2.value},set:function(ot){Je.map_2.value=ot}},color_2:{get:function(){return Je.color_2.value},set:function(ot){Je.color_2.value=ot}},alphaMap_2:{get:function(){return Je.alphaMap_2.value},set:function(ot){Je.alphaMap_2.value=ot}},size_2:{get:function(){return Je.size_2.value},set:function(ot){Je.size_2.value=ot}},sizeAttenuation_2:{get:function(){return Je.sizeAttenuation_2.value},set:function(ot){Je.sizeAttenuation_2.value=ot}},map_3:{get:function(){return Je.map_3.value},set:function(ot){Je.map_3.value=ot}},color_3:{get:function(){return Je.color_3.value},set:function(ot){Je.color_3.value=ot}},alphaMap_3:{get:function(){return Je.alphaMap_3.value},set:function(ot){Je.alphaMap_3.value=ot}},size_3:{get:function(){return Je.size_3.value},set:function(ot){Je.size_3.value=ot}},sizeAttenuation_3:{get:function(){return Je.sizeAttenuation_3.value},set:function(ot){Je.sizeAttenuation_3.value=ot}},map_4:{get:function(){return Je.map_4.value},set:function(ot){Je.map_4.value=ot}},color_4:{get:function(){return Je.color_4.value},set:function(ot){Je.color_4.value=ot}},alphaMap_4:{get:function(){return Je.alphaMap_4.value},set:function(ot){Je.alphaMap_4.value=ot}},size_4:{get:function(){return Je.size_4.value},set:function(ot){Je.size_4.value=ot}},sizeAttenuation_4:{get:function(){return Je.sizeAttenuation_4.value},set:function(ot){Je.sizeAttenuation_4.value=ot}},map_5:{get:function(){return Je.map_5.value},set:function(ot){Je.map_5.value=ot}},color_5:{get:function(){return Je.color_5.value},set:function(ot){Je.color_5.value=ot}},alphaMap_5:{get:function(){return Je.alphaMap_5.value},set:function(ot){Je.alphaMap_5.value=ot}},size_5:{get:function(){return Je.size_5.value},set:function(ot){Je.size_5.value=ot}},sizeAttenuation_5:{get:function(){return Je.sizeAttenuation_5.value},set:function(ot){Je.sizeAttenuation_5.value=ot}},map_6:{get:function(){return Je.map_6.value},set:function(ot){Je.map_6.value=ot}},color_6:{get:function(){return Je.color_6.value},set:function(ot){Je.color_6.value=ot}},alphaMap_6:{get:function(){return Je.alphaMap_6.value},set:function(ot){Je.alphaMap_6.value=ot}},size_6:{get:function(){return Je.size_6.value},set:function(ot){Je.size_6.value=ot}},sizeAttenuation_6:{get:function(){return Je.sizeAttenuation_6.value},set:function(ot){Je.sizeAttenuation_6.value=ot}},map_7:{get:function(){return Je.map_7.value},set:function(ot){Je.map_7.value=ot}},color_7:{get:function(){return Je.color_7.value},set:function(ot){Je.color_7.value=ot}},alphaMap_7:{get:function(){return Je.alphaMap_7.value},set:function(ot){Je.alphaMap_7.value=ot}},size_7:{get:function(){return Je.size_7.value},set:function(ot){Je.size_7.value=ot}},sizeAttenuation_7:{get:function(){return Je.sizeAttenuation_7.value},set:function(ot){Je.sizeAttenuation_7.value=ot}}}),this.materialIndexDataTexture=(n=e.materialIndexDataTexture)!==null&&n!==void 0?n:null,this.materialIndexDataTextureSize=(i=e.materialIndexDataTextureSize)!==null&&i!==void 0?i:1024,this.map_0=(o=e.map_0)!==null&&o!==void 0?o:null,this.color_0=new Ls.Color((l=e.color_0)!==null&&l!==void 0?l:16777215),this.alphaMap_0=(d=e.alphaMap_0)!==null&&d!==void 0?d:null,this.size_0=(p=e.size_0)!==null&&p!==void 0?p:1,this.sizeAttenuation_0=(g=e.sizeAttenuation_0)!==null&&g!==void 0?g:!1,this.map_1=(v=e.map_1)!==null&&v!==void 0?v:null,this.color_1=new Ls.Color((_=e.color_1)!==null&&_!==void 0?_:16777215),this.alphaMap_1=(b=e.alphaMap_1)!==null&&b!==void 0?b:null,this.size_1=(w=e.size_1)!==null&&w!==void 0?w:1,this.sizeAttenuation_1=(E=e.sizeAttenuation_1)!==null&&E!==void 0?E:!1,this.map_2=(S=e.map_2)!==null&&S!==void 0?S:null,this.color_2=new Ls.Color((M=e.color_2)!==null&&M!==void 0?M:16777215),this.alphaMap_2=(k=e.alphaMap_2)!==null&&k!==void 0?k:null,this.size_2=(x=e.size_2)!==null&&x!==void 0?x:1,this.sizeAttenuation_2=(C=e.sizeAttenuation_2)!==null&&C!==void 0?C:!1,this.map_3=(P=e.map_3)!==null&&P!==void 0?P:null,this.color_3=new Ls.Color((O=e.color_3)!==null&&O!==void 0?O:16777215),this.alphaMap_3=(L=e.alphaMap_3)!==null&&L!==void 0?L:null,this.size_3=(B=e.size_3)!==null&&B!==void 0?B:1,this.sizeAttenuation_3=(V=e.sizeAttenuation_3)!==null&&V!==void 0?V:!1,this.map_4=(G=e.map_4)!==null&&G!==void 0?G:null,this.color_4=new Ls.Color((j=e.color_4)!==null&&j!==void 0?j:16777215),this.alphaMap_4=(F=e.alphaMap_4)!==null&&F!==void 0?F:null,this.size_4=(q=e.size_4)!==null&&q!==void 0?q:1,this.sizeAttenuation_4=(fe=e.sizeAttenuation_4)!==null&&fe!==void 0?fe:!1,this.map_5=(ue=e.map_5)!==null&&ue!==void 0?ue:null,this.color_5=new Ls.Color((J=e.color_5)!==null&&J!==void 0?J:16777215),this.alphaMap_5=(le=e.alphaMap_5)!==null&&le!==void 0?le:null,this.size_5=(me=e.size_5)!==null&&me!==void 0?me:1,this.sizeAttenuation_5=(be=e.sizeAttenuation_5)!==null&&be!==void 0?be:!1,this.map_6=(ye=e.map_6)!==null&&ye!==void 0?ye:null,this.color_6=new Ls.Color((pe=e.color_6)!==null&&pe!==void 0?pe:16777215),this.alphaMap_6=(oe=e.alphaMap_6)!==null&&oe!==void 0?oe:null,this.size_6=(Ce=e.size_6)!==null&&Ce!==void 0?Ce:1,this.sizeAttenuation_6=(it=e.sizeAttenuation_6)!==null&&it!==void 0?it:!1,this.map_7=(Se=e.map_7)!==null&&Se!==void 0?Se:null,this.color_7=new Ls.Color((Oe=e.color_7)!==null&&Oe!==void 0?Oe:16777215),this.alphaMap_7=(ct=e.alphaMap_7)!==null&&ct!==void 0?ct:null,this.size_7=(_t=e.size_7)!==null&&_t!==void 0?_t:1,this.sizeAttenuation_7=(Nt=e.sizeAttenuation_7)!==null&&Nt!==void 0?Nt:!1,this.setValues(e)}copy(e){super.copy(e);const n=e;return this.materialIndexDataTexture=n.materialIndexDataTexture,this.materialIndexDataTextureSize=n.materialIndexDataTextureSize,this.map_0=n.map_0,this.color_0.copy(n.color_0),this.alphaMap_0=n.alphaMap_0,this.size_0=n.size_0,this.sizeAttenuation_0=n.sizeAttenuation_0,this.map_1=n.map_1,this.color_1.copy(n.color_1),this.alphaMap_1=n.alphaMap_1,this.size_1=n.size_1,this.sizeAttenuation_1=n.sizeAttenuation_1,this.map_2=n.map_2,this.color_2.copy(n.color_2),this.alphaMap_2=n.alphaMap_2,this.size_2=n.size_2,this.sizeAttenuation_2=n.sizeAttenuation_2,this.map_3=n.map_3,this.color_3.copy(n.color_3),this.alphaMap_3=n.alphaMap_3,this.size_3=n.size_3,this.sizeAttenuation_3=n.sizeAttenuation_3,this.map_4=n.map_4,this.color_4.copy(n.color_4),this.alphaMap_4=n.alphaMap_4,this.size_4=n.size_4,this.sizeAttenuation_4=n.sizeAttenuation_4,this.map_5=n.map_5,this.color_5.copy(n.color_5),this.alphaMap_5=n.alphaMap_5,this.size_5=n.size_5,this.sizeAttenuation_5=n.sizeAttenuation_5,this.map_6=n.map_6,this.color_6.copy(n.color_6),this.alphaMap_6=n.alphaMap_6,this.size_6=n.size_6,this.sizeAttenuation_6=n.sizeAttenuation_6,this.map_7=n.map_7,this.color_7.copy(n.color_7),this.alphaMap_7=n.alphaMap_7,this.size_7=n.size_7,this.sizeAttenuation_7=n.sizeAttenuation_7,this}}kx.MultiPointsMaterial=idt;var Cx={};Object.defineProperty(Cx,"__esModule",{value:!0});Cx.SDColor=void 0;const sdt=se;class odt extends sdt.Color{constructor(e,n){super(e),this._colorSpace="srgb-linear",this._originalColorSpace="srgb-linear",typeof n=="number"||Array.isArray(n)&&(n.length==3||n.length==4)?(this._colorSpace="srgb-linear",this._originalColorSpace="srgb-linear"):(this._colorSpace="srgb",this._originalColorSpace="srgb")}colorCorrection(e){this._colorSpace==="srgb"&&e===!0?(this.convertSRGBToLinear(),this._colorSpace="srgb-linear"):this._colorSpace==="srgb-linear"&&e===!1&&this._originalColorSpace!=="srgb-linear"&&(this.convertLinearToSRGB(),this._colorSpace="srgb")}}Cx.SDColor=odt;var kL={},adt=X&&X.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,o)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),ldt=X&&X.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),cdt=X&&X.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&adt(e,t,n);return ldt(e,t),e};Object.defineProperty(kL,"__esModule",{value:!0});kL.SpecularGlossinessMaterial=void 0;const udt=cdt(se),fdt=se;class ddt extends fdt.MeshStandardMaterial{constructor(e){super(),this.isGLTFSpecularGlossinessMaterial=!0;const n=["#ifdef USE_SPECULARMAP2","	uniform sampler2D specularMap2;","#endif"].join(`
`),i=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),o=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP2","	vec4 texelSpecular = texture2D( specularMap2, vUv );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),l=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),d=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( nonPerturbedNormal  ) ), abs( dFdy( nonPerturbedNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),p={specular:{value:new udt.Color().setHex(16777215)},glossiness:{value:1},specularMap2:{value:null},glossinessMap:{value:null}};this._extraUniforms=p,this.onBeforeCompile=function(g){for(const v in p)g.uniforms[v]=p[v];g.fragmentShader=g.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",n).replace("#include <metalnessmap_pars_fragment>",i).replace("#include <roughnessmap_fragment>",o).replace("#include <metalnessmap_fragment>",l).replace("#include <lights_physical_fragment>",d)},Object.defineProperties(this,{specular:{get:function(){return p.specular.value},set:function(g){p.specular.value=g}},specularMap2:{get:function(){return p.specularMap2.value},set:function(g){p.specularMap2.value=g,g?this.defines.USE_SPECULARMAP2="":delete this.defines.USE_SPECULARMAP2}},glossiness:{get:function(){return p.glossiness.value},set:function(g){p.glossiness.value=g}},glossinessMap:{get:function(){return p.glossinessMap.value},set:function(g){p.glossinessMap.value=g,g?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}copy(e){return super.copy(e),this.specularMap2=e.specularMap2,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}kL.SpecularGlossinessMaterial=ddt;(function(t){var e=X&&X.__createBinding||(Object.create?function(x,C,P,O){O===void 0&&(O=P);var L=Object.getOwnPropertyDescriptor(C,P);(!L||("get"in L?!C.__esModule:L.writable||L.configurable))&&(L={enumerable:!0,get:function(){return C[P]}}),Object.defineProperty(x,O,L)}:function(x,C,P,O){O===void 0&&(O=P),x[O]=C[P]}),n=X&&X.__setModuleDefault||(Object.create?function(x,C){Object.defineProperty(x,"default",{enumerable:!0,value:C})}:function(x,C){x.default=C}),i=X&&X.__importStar||function(x){if(x&&x.__esModule)return x;var C={};if(x!=null)for(var P in x)P!=="default"&&Object.prototype.hasOwnProperty.call(x,P)&&e(C,x,P);return n(C,x),C};Object.defineProperty(t,"__esModule",{value:!0}),t.adaptShaders=t.MATERIAL_TYPE=t.MaterialLoader=void 0;const o=i(se),l=Mn,d=E4,p=xL,g=wA,v=Gi,_=Cr,b=kx,w=Cx,E=kL;class S{constructor(C){this._renderingEngine=C,this._converter=l.Converter.instance,this._blending=0,this._defaultLineMaterialData=new v.MaterialBasicLineData({color:"#199b9b"}),this._defaultMaterialData=new v.MaterialStandardData({color:"#199b9b",side:v.MATERIAL_SIDE.DOUBLE,metalness:0}),this._defaultPointMaterialData=new v.MaterialPointData({color:"#199b9b"}),this._envMap=null,this._envMapIntensity=1,this._envMapType=p.ENVIRONMENT_MAP_TYPE.NULL,this._environmentMapRotationEuler=new o.Euler,this._height=1020,this._lightSizeUV=.025,this._materialCache={},this._maxMapCount=0,this._pointSize=1,this._textureEncoding=o.SRGBColorSpace,this._threeJsTextureCache={}}get defaultLineMaterialData(){return this._defaultLineMaterialData}set defaultLineMaterialData(C){this._defaultLineMaterialData=C,this.assignDefaultLineMaterial()}get defaultMaterialData(){return this._defaultMaterialData}set defaultMaterialData(C){this._defaultMaterialData=C,this.assignDefaultMaterial()}get defaultPointMaterialData(){return this._defaultPointMaterialData}set defaultPointMaterialData(C){this._defaultPointMaterialData=C,this.assignDefaultPointMaterial()}get maxMapCount(){return this._maxMapCount}set maxMapCount(C){this._maxMapCount=C}get textureEncoding(){return this._textureEncoding}set textureEncoding(C){this._textureEncoding=C,this.assignTextureEncoding()}get threeJsTextureCache(){return this._threeJsTextureCache}set threeJsTextureCache(C){this._threeJsTextureCache=C}assignColorCorrection(C){const P=(O,L)=>{if(O){if(O instanceof w.SDColor)return O.colorCorrection(L),O;{const B=this._renderingEngine.colorCache.find(V=>V.equals(O));if(B)return B.colorCorrection(L),B;{const V=O.clone();L===!0?V.convertSRGBToLinear():V.convertLinearToSRGB();const G=this._renderingEngine.colorCache.find(j=>j.equals(V));return G?(G.colorCorrection(L),G):O}}}};for(const O in this._materialCache){const L=this._materialCache[O].material;L.color&&(L.color=P(L.color,C)),L.specular&&(L.specular=P(L.specular,C)),L.emissive&&(L.emissive=P(L.emissive,C)),L.colorTransferBegin&&(L.colorTransferBegin=P(L.colorTransferBegin,C)),L.colorTransferEnd&&(L.colorTransferEnd=P(L.colorTransferEnd,C)),L.attenuationColor&&(L.attenuationColor=P(L.attenuationColor,C)),L.sheencolor&&(L.sheencolor=P(L.sheencolor,C)),L.specularColor&&(L.specularColor=P(L.specularColor,C)),L.needsUpdate=!0}}assignDefaultLineMaterial(){for(const C in this._materialCache)if(this._materialCache[C].material instanceof o.LineBasicMaterial&&this._materialCache[C].materialData===void 0){const P=this._materialCache[C].material;if(this._materialCache[C].materialData&&this._materialCache[C].materialData instanceof v.MaterialBasicLineData)continue;const{properties:O,mapCount:L}=this.getMaterialProperties(this._defaultLineMaterialData,M.LINE,void 0);this.maxMapCount=Math.max(this.maxMapCount,L),P.copy(new o.LineBasicMaterial(O)),P.needsUpdate=!0}}assignDefaultMaterial(){for(const C in this._materialCache)if(this._materialCache[C].material instanceof o.MeshPhysicalMaterial&&this._materialCache[C].materialData===void 0){const P=this._materialCache[C].material;if(this._materialCache[C].materialData&&this._materialCache[C].materialData instanceof v.MaterialStandardData)continue;const{properties:O,mapCount:L}=this.getMaterialProperties(this._defaultMaterialData,M.MESH,this._materialCache[C].materialSettings);this.maxMapCount=Math.max(this.maxMapCount,L),P.copy(new o.MeshPhysicalMaterial(O)),P.needsUpdate=!0}}assignDefaultPointMaterial(){for(const C in this._materialCache)if(this._materialCache[C].material instanceof o.PointsMaterial&&this._materialCache[C].materialData===void 0){const P=this._materialCache[C].material;if(this._materialCache[C].materialData&&this._materialCache[C].materialData instanceof v.MaterialPointData)continue;const{properties:O,mapCount:L}=this.getMaterialProperties(this._defaultPointMaterialData,M.POINT,void 0);this.maxMapCount=Math.max(this.maxMapCount,L),P.copy(new o.PointsMaterial(O)),P.needsUpdate=!0}}assignEnvironmentMap(C,P){this._envMap=C,this._envMapType=P;for(const O in this._materialCache)if(this._materialCache[O].material instanceof o.MeshPhysicalMaterial||this._materialCache[O].material instanceof o.MeshStandardMaterial||this._materialCache[O].material instanceof o.MeshBasicMaterial){const L=this._materialCache[O].material;if(this._materialCache[O].materialData&&(this._materialCache[O].materialData instanceof v.MaterialStandardData||this._materialCache[O].materialData instanceof v.MaterialGemData||this._materialCache[O].materialData instanceof v.MaterialSpecularGlossinessData||this._materialCache[O].materialData instanceof v.MaterialUnlitData)&&this._materialCache[O].materialData.envMap!==void 0)continue;if(this._materialCache[O].materialData instanceof v.MaterialUnlitData&&this._renderingEngine.environmentMapForUnlitMaterials===!1)return;L.envMap=C,L.needsUpdate=!0;for(const B in L.defines)B.startsWith("ENVMAP_TYPE_")&&delete L.defines[B];L.defines&&(L.defines["ENVMAP_TYPE_"+this._envMapType.toUpperCase()]=""),this.assignEnvironmentMapRotation(this._renderingEngine.environmentMapRotation)}}assignEnvironmentMapForUnlitMaterials(C){for(const P in this._materialCache)if(this._materialCache[P].material instanceof o.MeshBasicMaterial){const O=this._materialCache[P].material;if(this._materialCache[P].materialData&&this._materialCache[P].materialData instanceof v.MaterialUnlitData&&this._materialCache[P].materialData.envMap!==void 0)continue;if(C){O.envMap=this._envMap,O.needsUpdate=!0;for(const L in O.defines)L.startsWith("ENVMAP_TYPE_")&&delete O.defines[L];O.defines&&(O.defines["ENVMAP_TYPE_"+this._envMapType.toUpperCase()]="")}else O.envMap=null,O.needsUpdate=!0}}assignEnvironmentMapIntensity(C){this._envMapIntensity=C;for(const P in this._materialCache)if(this._materialCache[P].material instanceof o.MeshPhysicalMaterial||this._materialCache[P].material instanceof o.MeshStandardMaterial){const O=this._materialCache[P].material;if(this._materialCache[P].materialData&&(this._materialCache[P].materialData instanceof v.MaterialStandardData||this._materialCache[P].materialData instanceof v.MaterialGemData||this._materialCache[P].materialData instanceof v.MaterialSpecularGlossinessData||this._materialCache[P].materialData instanceof v.MaterialUnlitData)&&this._materialCache[P].materialData.envMap!==void 0)continue;O.envMapIntensity=C,O.needsUpdate=!0}}assignEnvironmentMapRotation(C){const P=new o.Matrix4().fromArray(_.mat4.fromQuat(_.mat4.create(),_.quat.fromValues(C[0],C[2],-C[1],C[3]))).transpose();this._environmentMapRotationEuler=new o.Euler().setFromRotationMatrix(P),this._renderingEngine.scene.backgroundRotation=this._environmentMapRotationEuler;for(const O in this._materialCache)if(this._materialCache[O].material instanceof o.MeshPhysicalMaterial||this._materialCache[O].material instanceof o.MeshStandardMaterial){const L=this._materialCache[O].material;if(this._materialCache[O].materialData&&(this._materialCache[O].materialData instanceof v.MaterialStandardData||this._materialCache[O].materialData instanceof v.MaterialGemData||this._materialCache[O].materialData instanceof v.MaterialSpecularGlossinessData||this._materialCache[O].materialData instanceof v.MaterialUnlitData)&&this._materialCache[O].materialData.envMap!==void 0)continue;L.envMapRotation=this._environmentMapRotationEuler,L.needsUpdate=!0}}assignPointSize(C){const P=this._renderingEngine.renderer?this._renderingEngine.renderer.getSize(new o.Vector2).y:1080;if(!(P===this._height&&C*(this._height/1080)===this._pointSize)){this._height=P,this._pointSize=C*(this._height/1080);for(const O in this._materialCache)if(this._materialCache[O].material instanceof b.MultiPointsMaterial){const L=this._materialCache[O].material;this._materialCache[O].material.userData.customPointSize_0Enabled&&this._materialCache[O].material.userData.customPointSize_0Enabled===!0?(L.size_0=this._pointSize*this._materialCache[O].material.userData.customPointSize_0,L.needsUpdate=!0):(L.size_0=this._pointSize,L.needsUpdate=!0),this._materialCache[O].material.userData.customPointSize_1Enabled&&this._materialCache[O].material.userData.customPointSize_1Enabled===!0?(L.size_1=this._pointSize*this._materialCache[O].material.userData.customPointSize_1,L.needsUpdate=!0):(L.size_1=this._pointSize,L.needsUpdate=!0),this._materialCache[O].material.userData.customPointSize_2Enabled&&this._materialCache[O].material.userData.customPointSize_2Enabled===!0?(L.size_2=this._pointSize*this._materialCache[O].material.userData.customPointSize_2,L.needsUpdate=!0):(L.size_2=this._pointSize,L.needsUpdate=!0),this._materialCache[O].material.userData.customPointSize_3Enabled&&this._materialCache[O].material.userData.customPointSize_3Enabled===!0?(L.size_3=this._pointSize*this._materialCache[O].material.userData.customPointSize_3,L.needsUpdate=!0):(L.size_3=this._pointSize,L.needsUpdate=!0),this._materialCache[O].material.userData.customPointSize_4Enabled&&this._materialCache[O].material.userData.customPointSize_4Enabled===!0?(L.size_4=this._pointSize*this._materialCache[O].material.userData.customPointSize_4,L.needsUpdate=!0):(L.size_4=this._pointSize,L.needsUpdate=!0),this._materialCache[O].material.userData.customPointSize_5Enabled&&this._materialCache[O].material.userData.customPointSize_5Enabled===!0?(L.size_5=this._pointSize*this._materialCache[O].material.userData.customPointSize_5,L.needsUpdate=!0):(L.size_5=this._pointSize,L.needsUpdate=!0),this._materialCache[O].material.userData.customPointSize_6Enabled&&this._materialCache[O].material.userData.customPointSize_6Enabled===!0?(L.size_6=this._pointSize*this._materialCache[O].material.userData.customPointSize_6,L.needsUpdate=!0):(L.size_6=this._pointSize,L.needsUpdate=!0),this._materialCache[O].material.userData.customPointSize_7Enabled&&this._materialCache[O].material.userData.customPointSize_7Enabled===!0?(L.size_7=this._pointSize*this._materialCache[O].material.userData.customPointSize_7,L.needsUpdate=!0):(L.size_7=this._pointSize,L.needsUpdate=!0)}else if(this._materialCache[O].material instanceof o.PointsMaterial){const L=this._materialCache[O].material;this._materialCache[O].material.userData.customPointSizeEnabled&&this._materialCache[O].material.userData.customPointSizeEnabled===!0?(L.size=this._pointSize*this._materialCache[O].material.userData.customPointSize,L.needsUpdate=!0):(L.size=this._pointSize,L.needsUpdate=!0)}}}cacheSize(){return Object.entries(this._materialCache).length}createMaterial(C,P,O,L){const{properties:B,mapCount:V}=this.getMaterialProperties(O,C,L);this.maxMapCount=Math.max(this.maxMapCount,V);let G;if(C===M.POINT)O instanceof v.MaterialMultiPointData?G=new b.MultiPointsMaterial(B):G=new o.PointsMaterial(B);else if(C===M.LINE)G=new o.LineBasicMaterial(B);else if(O instanceof v.MaterialUnlitData)G=new o.MeshBasicMaterial(B);else{O instanceof v.MaterialShadowData?G=new o.ShadowMaterial({opacity:B.opacity,color:B.color}):O instanceof v.MaterialSpecularGlossinessData?G=new E.SpecularGlossinessMaterial(B):O instanceof v.MaterialGemData?G=new g.GemMaterial(B):G=new o.MeshPhysicalMaterial(B);const j=G.onBeforeCompile;G.onBeforeCompile=(F,q)=>{j(F,q),F.uniforms.lightSizeUV={value:this._lightSizeUV},F.uniforms.blending={value:this._blending},G.userData.shader=F},(G instanceof E.SpecularGlossinessMaterial||G instanceof o.MeshPhysicalMaterial)&&(G.defines["ENVMAP_TYPE_"+this._envMapType.toUpperCase()]="",L&&L.useVertexTangents&&(G.normalScale.y*=-1),L&&L.useVertexTangents&&G instanceof o.MeshPhysicalMaterial&&(G.clearcoatNormalScale.y*=-1),L&&L.useFlatShading&&(G.flatShading=!0))}if(L&&L.useVertexColors&&(G.vertexColors=!0),(O instanceof v.MaterialStandardData||O instanceof v.MaterialGemData||O instanceof v.MaterialSpecularGlossinessData||O instanceof v.MaterialUnlitData)&&O.envMap!==void 0){const j=O.envMap;j!==void 0&&this._renderingEngine.environmentMapLoader.loadEnvMap(j).map.then(q=>{if(G instanceof o.MeshBasicMaterial&&this._renderingEngine.environmentMapForUnlitMaterials===!1)return;G.envMap=q;const fe=G.envMap instanceof o.CubeTexture?p.ENVIRONMENT_MAP_TYPE.LDR:p.ENVIRONMENT_MAP_TYPE.HDR;for(const ue in G.defines)ue.startsWith("ENVMAP_TYPE_")&&delete G.defines[ue];G.defines&&(G.defines["ENVMAP_TYPE_"+fe.toUpperCase()]=""),G.needsUpdate=!0})}return O&&(O.convertedObject[this._renderingEngine.id]=G),G.needsUpdate=!0,G.userData?(G.userData.SDid=P.id,G.userData.SDversion=P.version):G.userData={SDid:P.id,SDversion:P.version},G}emptyMaterialCache(){this._materialCache={}}getMaterialProperties(C,P,O){const L={};let B=0;if(!C){if(P===M.POINT)return this.getMaterialProperties(this._defaultPointMaterialData,P,O);if(P===M.LINE)return this.getMaterialProperties(this._defaultLineMaterialData,P,O);if(O!==void 0&&O.useVertexColors){const j=this._defaultMaterialData.color;this._defaultMaterialData.color="#d3d3d3";const F=this.getMaterialProperties(this._defaultMaterialData,P,O);return this._defaultMaterialData.color=j,F}else return this.getMaterialProperties(this._defaultMaterialData,P,O)}if(L.alphaTest=C.alphaCutoff,C.opacity!==void 0&&(L.opacity=C.opacity,L.transparent=L.opacity<1),C.alphaMode===v.MATERIAL_ALPHA.BLEND?(L.transparent=!0,L.depthWrite=!1):L.transparent||(L.transparent=!1),C.depthTest!==void 0&&(L.depthTest=C.depthTest),C.depthWrite!==void 0&&(L.depthWrite=C.depthWrite),C.transparent!==void 0&&(L.transparent=C.transparent),C.color!==void 0&&(L.color=this._renderingEngine.createThreeJsColor(C.color)),C.color===void 0&&C.map!==void 0&&C.map.color!==void 0&&(L.color=this._renderingEngine.createThreeJsColor(C.map.color)),C.color===void 0&&C.map!==void 0&&C.map.color===void 0&&!(O!==void 0&&O.useVertexColors)&&(L.color=this._renderingEngine.createThreeJsColor(this._renderingEngine.defaultMaterialColor)),O!==void 0&&O.useVertexColors&&(C.color===this._converter.toHexColor(this._renderingEngine.defaultMaterialColor)||C.color+"ff"===this._converter.toHexColor(this._renderingEngine.defaultMaterialColor)||C.color===this._renderingEngine.defaultMaterialColor||C.color===this._renderingEngine.defaultMaterialColor+"ff"||C.color===void 0)&&(L.color=this._renderingEngine.createThreeJsColor("#d3d3d3")),C.side!==void 0&&(L.side=C.side===v.MATERIAL_SIDE.BACK?o.BackSide:C.side===v.MATERIAL_SIDE.FRONT?o.FrontSide:o.DoubleSide),P===M.POINT){if(C instanceof v.MaterialPointData){const j=L;j.size=C.size!==void 0?C.size:this._pointSize,j.userData={customPointSizeEnabled:C.size!==void 0,customPointSize:C.size},j.sizeAttenuation=C.sizeAttenuation!==void 0?C.sizeAttenuation:!0,C.map!==void 0&&(j.map=this.createTexture(C.map),B++),C.alphaMap!==void 0&&(j.alphaMap=this.createTexture(C.alphaMap),j.transparent=!0,j.depthWrite=!1,B++)}else if(C instanceof v.MaterialMultiPointData){const j=L;C.materialIndexDataMap?j.materialIndexDataTexture=this.createTexture(C.materialIndexDataMap):(j.materialIndexDataTexture=new o.DataTexture(new Uint8Array(j.materialIndexDataTextureSize||1024),j.materialIndexDataTextureSize||1024,1,o.RedIntegerFormat,o.UnsignedIntType),j.materialIndexDataTexture.internalFormat="R32UI"),j.size_0=C.size_0!==void 0?C.size_0:this._pointSize,j.size_1=C.size_1!==void 0?C.size_1:this._pointSize,j.size_2=C.size_2!==void 0?C.size_2:this._pointSize,j.size_3=C.size_3!==void 0?C.size_3:this._pointSize,j.size_4=C.size_4!==void 0?C.size_4:this._pointSize,j.size_5=C.size_5!==void 0?C.size_5:this._pointSize,j.size_6=C.size_6!==void 0?C.size_6:this._pointSize,j.size_7=C.size_7!==void 0?C.size_7:this._pointSize,j.userData={customPointSize_0Enabled:C.size_0!==void 0,customPointSize_1Enabled:C.size_1!==void 0,customPointSize_2Enabled:C.size_2!==void 0,customPointSize_3Enabled:C.size_3!==void 0,customPointSize_4Enabled:C.size_4!==void 0,customPointSize_5Enabled:C.size_5!==void 0,customPointSize_6Enabled:C.size_6!==void 0,customPointSize_7Enabled:C.size_7!==void 0,customPointSize_0:C.size_0,customPointSize_1:C.size_1,customPointSize_2:C.size_2,customPointSize_3:C.size_3,customPointSize_4:C.size_4,customPointSize_5:C.size_5,customPointSize_6:C.size_6,customPointSize_7:C.size_7},j.sizeAttenuation_0=C.sizeAttenuation_0!==void 0?C.sizeAttenuation_0:!1,j.sizeAttenuation_1=C.sizeAttenuation_1!==void 0?C.sizeAttenuation_1:!1,j.sizeAttenuation_2=C.sizeAttenuation_2!==void 0?C.sizeAttenuation_2:!1,j.sizeAttenuation_3=C.sizeAttenuation_3!==void 0?C.sizeAttenuation_3:!1,j.sizeAttenuation_4=C.sizeAttenuation_4!==void 0?C.sizeAttenuation_4:!1,j.sizeAttenuation_5=C.sizeAttenuation_5!==void 0?C.sizeAttenuation_5:!1,j.sizeAttenuation_6=C.sizeAttenuation_6!==void 0?C.sizeAttenuation_6:!1,j.sizeAttenuation_7=C.sizeAttenuation_7!==void 0?C.sizeAttenuation_7:!1,C.map_0!==void 0&&(j.map_0=this.createTexture(C.map_0),j.map=j.map_0,B++),C.map_1!==void 0&&(j.map_1=this.createTexture(C.map_1),j.map=j.map_0,B++),C.map_2!==void 0&&(j.map_2=this.createTexture(C.map_2),j.map=j.map_0,B++),C.map_3!==void 0&&(j.map_3=this.createTexture(C.map_3),j.map=j.map_0,B++),C.map_4!==void 0&&(j.map_4=this.createTexture(C.map_4),j.map=j.map_0,B++),C.map_5!==void 0&&(j.map_5=this.createTexture(C.map_5),j.map=j.map_0,B++),C.map_6!==void 0&&(j.map_6=this.createTexture(C.map_6),j.map=j.map_0,B++),C.map_7!==void 0&&(j.map_7=this.createTexture(C.map_7),j.map=j.map_0,B++),C.alphaMap_0!==void 0&&(j.alphaMap_0=this.createTexture(C.alphaMap_0),j.alphaMap=j.alphaMap_0,j.transparent=!0,j.depthWrite=!1,B++),C.alphaMap_1!==void 0&&(j.alphaMap_1=this.createTexture(C.alphaMap_1),j.alphaMap=j.alphaMap_0,j.transparent=!0,j.depthWrite=!1,B++),C.alphaMap_2!==void 0&&(j.alphaMap_2=this.createTexture(C.alphaMap_2),j.alphaMap=j.alphaMap_0,j.transparent=!0,j.depthWrite=!1,B++),C.alphaMap_3!==void 0&&(j.alphaMap_3=this.createTexture(C.alphaMap_3),j.alphaMap=j.alphaMap_0,j.transparent=!0,j.depthWrite=!1,B++),C.alphaMap_4!==void 0&&(j.alphaMap_4=this.createTexture(C.alphaMap_4),j.alphaMap=j.alphaMap_0,j.transparent=!0,j.depthWrite=!1,B++),C.alphaMap_5!==void 0&&(j.alphaMap_5=this.createTexture(C.alphaMap_5),j.alphaMap=j.alphaMap_0,j.transparent=!0,j.depthWrite=!1,B++),C.alphaMap_6!==void 0&&(j.alphaMap_6=this.createTexture(C.alphaMap_6),j.alphaMap=j.alphaMap_0,j.transparent=!0,j.depthWrite=!1,B++),C.alphaMap_7!==void 0&&(j.alphaMap_7=this.createTexture(C.alphaMap_7),j.alphaMap=j.alphaMap_0,j.transparent=!0,j.depthWrite=!1,B++),C.color_0!==void 0&&(j.color_0=this._renderingEngine.createThreeJsColor(C.color_0)),C.color_1!==void 0&&(j.color_1=this._renderingEngine.createThreeJsColor(C.color_1)),C.color_2!==void 0&&(j.color_2=this._renderingEngine.createThreeJsColor(C.color_2)),C.color_3!==void 0&&(j.color_3=this._renderingEngine.createThreeJsColor(C.color_3)),C.color_4!==void 0&&(j.color_4=this._renderingEngine.createThreeJsColor(C.color_4)),C.color_5!==void 0&&(j.color_5=this._renderingEngine.createThreeJsColor(C.color_5)),C.color_6!==void 0&&(j.color_6=this._renderingEngine.createThreeJsColor(C.color_6)),C.color_7!==void 0&&(j.color_7=this._renderingEngine.createThreeJsColor(C.color_7))}else{const j=L;j.size=this._pointSize}return{properties:L,mapCount:B}}else if(P===M.LINE)return{properties:L,mapCount:B};if(C instanceof v.MaterialShadowData)return{properties:L,mapCount:B};const V=L;if(C.alphaMap!==void 0&&(V.alphaMap=this.createTexture(C.alphaMap),V.transparent=!0,V.depthWrite=!1,B++),C.aoMap!==void 0&&(V.aoMap=this.createTexture(C.aoMap),B++),C.aoMapIntensity!==void 0&&(V.aoMapIntensity=C.aoMapIntensity),C.map!==void 0&&(V.map=this.createTexture(C.map),V.map.colorSpace=this._textureEncoding,B++),C instanceof v.MaterialUnlitData)return{properties:V,mapCount:B};const G=V;if(C.shading!==void 0&&(G.flatShading=C.shading!=="smooth"),C.bumpMap!==void 0&&(G.bumpMap=this.createTexture(C.bumpMap),B++),G.bumpScale=C.bumpScale,C.emissiveness!==void 0&&(G.emissive=this._renderingEngine.createThreeJsColor(C.emissiveness)),C.emissiveMap!==void 0&&(G.emissiveMap=this.createTexture(C.emissiveMap),G.emissiveMap.colorSpace=this._textureEncoding,B++),G.envMap=this._envMap,G.envMapIntensity=this._envMapIntensity,G.envMapRotation=this._environmentMapRotationEuler,C.normalMap!==void 0&&(G.normalMap=this.createTexture(C.normalMap),B++),C.normalScale!==void 0&&(G.normalScale=new o.Vector2(C.normalScale,-C.normalScale)),C instanceof v.MaterialSpecularGlossinessData){const j=G;return j.specular=this._renderingEngine.createThreeJsColor(C.specular),j.glossiness=C.glossiness,C.specularGlossinessMap!==void 0?(j.specularMap2=this.createTexture(C.specularGlossinessMap),j.specularMap2.colorSpace=o.SRGBColorSpace,j.glossinessMap=j.specularMap2,B++):(C.specularMap!==void 0&&(j.specularMap2=this.createTexture(C.specularMap),j.specularMap2.colorSpace=o.SRGBColorSpace,B++),C.glossinessMap!==void 0&&(j.glossinessMap=this.createTexture(C.glossinessMap),B++)),{properties:j,mapCount:B}}if(C instanceof v.MaterialGemData){const j=G;return j.refractionIndex=C.refractionIndex,C.impurityMap!==void 0&&(j.impurityMap=this.createTexture(C.impurityMap),B++),j.impurityScale=C.impurityScale,C.colorTransferBegin!==void 0&&(j.colorTransferBegin=this._renderingEngine.createThreeJsColor(C.colorTransferBegin)),C.colorTransferEnd!==void 0&&(j.colorTransferEnd=this._renderingEngine.createThreeJsColor(C.colorTransferEnd)),j.center=new o.Vector3(C.center[0],C.center[1],C.center[2]),j.tracingDepth=C.tracingDepth,j.radius=C.radius,j.sphericalNormalMap=C.sphericalNormalMap,j.gamma=C.gamma,j.contrast=C.contrast,j.brightness=C.brightness,j.dispersion=C.dispersion,j.tracingOpacity=C.tracingOpacity,j.roughness=0,j.metalness=1,j.transparent=!0,j.opacity=1,j.side=o.FrontSide,{properties:j,mapCount:B}}if(C instanceof v.MaterialStandardData){const j=G;return j.clearcoat=C.clearcoat,C.clearcoatMap!==void 0&&(j.clearcoatMap=this.createTexture(C.clearcoatMap),B++),C.clearcoatNormalMap!==void 0&&(j.clearcoatNormalMap=this.createTexture(C.clearcoatNormalMap),B++),j.clearcoatRoughness=C.clearcoatRoughness,C.clearcoatRoughnessMap!==void 0&&(j.clearcoatRoughnessMap=this.createTexture(C.clearcoatRoughnessMap),B++),C.displacementMap!==void 0&&(j.displacementMap=this.createTexture(C.displacementMap),B++),j.displacementScale=C.displacementScale,j.displacementBias=C.displacementBias,j.ior=C.ior,j.transmission=C.transmission,C.transmissionMap!==void 0&&(j.transmissionMap=this.createTexture(C.transmissionMap),B++),j.thickness=C.thickness,C.thicknessMap!==void 0&&(j.thicknessMap=this.createTexture(C.thicknessMap),B++),j.attenuationDistance=C.attenuationDistance,j.attenuationColor=this._renderingEngine.createThreeJsColor(C.attenuationColor),j.sheen=C.sheen,j.sheenColor=this._renderingEngine.createThreeJsColor(C.sheenColor),j.sheenRoughness=C.sheenRoughness,C.sheenColorMap!==void 0&&(j.sheenColorMap=this.createTexture(C.sheenColorMap),B++),C.sheenRoughnessMap!==void 0&&(j.sheenRoughnessMap=this.createTexture(C.sheenRoughnessMap),B++),j.specularIntensity=C.specularIntensity,C.specularIntensityMap!==void 0&&(j.specularIntensityMap=this.createTexture(C.specularIntensityMap),B++),j.specularColor=this._renderingEngine.createThreeJsColor(C.specularColor),C.specularColorMap!==void 0&&(j.specularColorMap=this.createTexture(C.specularColorMap),B++),j.metalness=C.metalness,j.roughness=C.roughness,C.metalnessRoughnessMap!==void 0?(j.metalnessMap=this.createTexture(C.metalnessRoughnessMap),j.roughnessMap=j.metalnessMap,B++):(C.metalnessMap!==void 0&&(j.metalnessMap=this.createTexture(C.metalnessMap),B++),C.roughnessMap!==void 0&&(j.roughnessMap=this.createTexture(C.roughnessMap),B++)),{properties:j,mapCount:B}}throw new l.ShapeDiverViewerDataProcessingError("MaterialLoader.getMaterialProperties: No proper material properties were found.")}init(){}load(C,P){let O=null;C instanceof v.GeometryData||(O=C);let L;P&&P.mode===0?L=M.POINT:P&&(P.mode===1||P.mode===2||P.mode===3)?L=M.LINE:L=M.MESH;const B=this.createMaterial(L,C,O,P),V=this.createDataKeyFromMaterial(C,L,P);return this._materialCache[V]?(this._materialCache[V].material.copy(B),this._materialCache[V].material):(this._materialCache[V]={material:B,materialData:O,materialSettings:P},B)}removeFromMaterialCache(C){for(const P in this._materialCache)(0,l.atobCustom)(P).startsWith(C)&&delete this._materialCache[P]}updateMaterials(){for(const C in this._materialCache)this._materialCache[C].material.needsUpdate=!0}updateSoftShadow(C,P){this._lightSizeUV=C,this._blending=P;for(const O in this._materialCache)this._materialCache[O].material.userData.shader&&(this._materialCache[O].material.userData.shader.uniforms.lightSizeUV.value=C,this._materialCache[O].material.userData.shader.uniforms.blending.value=P)}assignTextureEncoding(){for(const C in this._materialCache)if(this._materialCache[C].material instanceof o.MeshPhysicalMaterial||this._materialCache[C].material instanceof o.MeshStandardMaterial){const P=this._materialCache[C].material;P.emissiveMap&&(P.emissiveMap.colorSpace=this._textureEncoding,P.emissiveMap.needsUpdate=!0),P.map&&(P.map.colorSpace=this._textureEncoding,P.map.needsUpdate=!0),P.needsUpdate=!0}}createDataKeyFromMap(C){return(0,l.btoaCustom)(`${C.image.src}_${C.center}_${C.color}_${C.flipY}_${C.magFilter}_${C.minFilter}_${C.offset}_${C.repeat}_${C.rotation}_${C.texCoord}_${C.wrapS}_${C.wrapT}`)}createDataKeyFromMaterial(C,P,O){return C?(0,l.btoaCustom)(C.id+"_"+C.version+"_"+P+"_"+JSON.stringify(O)):(0,l.btoaCustom)(P+"_"+JSON.stringify(O))}createTexture(C){if(C.image instanceof ArrayBuffer)return new o.Texture;const P=this.createDataKeyFromMap(C);if(this._threeJsTextureCache[P])return this._threeJsTextureCache[P].usage++,this._threeJsTextureCache[P].texture;let O;return C.asData===!0?(O=new o.DataTexture(new Uint32Array(C.data),C.data.length,1,o.RedIntegerFormat,o.UnsignedIntType),O.internalFormat="R32UI"):(O=new o.Texture(C.image),O.format=o.RGBAFormat,O.minFilter=(()=>{switch(C.minFilter){case v.TEXTURE_FILTERING.NEAREST:return o.NearestFilter;case v.TEXTURE_FILTERING.NEAREST_MIPMAP_NEAREST:return o.NearestMipMapNearestFilter;case v.TEXTURE_FILTERING.LINEAR_MIPMAP_NEAREST:return o.LinearMipMapNearestFilter;case v.TEXTURE_FILTERING.NEAREST_MIPMAP_LINEAR:return o.NearestMipMapLinearFilter;case v.TEXTURE_FILTERING.LINEAR:return o.LinearFilter;case v.TEXTURE_FILTERING.LINEAR_MIPMAP_LINEAR:default:return o.LinearMipMapLinearFilter}})(),O.magFilter=(()=>{switch(C.magFilter){case v.TEXTURE_FILTERING.NEAREST:return o.NearestFilter;case v.TEXTURE_FILTERING.LINEAR:default:return o.LinearFilter}})(),O.wrapS=(()=>{switch(C.wrapS){case v.TEXTURE_WRAPPING.CLAMP_TO_EDGE:return o.ClampToEdgeWrapping;case v.TEXTURE_WRAPPING.MIRRORED_REPEAT:return o.MirroredRepeatWrapping;case v.TEXTURE_WRAPPING.REPEAT:default:return o.RepeatWrapping}})(),O.wrapT=(()=>{switch(C.wrapT){case v.TEXTURE_WRAPPING.CLAMP_TO_EDGE:return o.ClampToEdgeWrapping;case v.TEXTURE_WRAPPING.MIRRORED_REPEAT:return o.MirroredRepeatWrapping;case v.TEXTURE_WRAPPING.REPEAT:default:return o.RepeatWrapping}})(),O.center=new o.Vector2(C.center[0],C.center[1]),O.offset=new o.Vector2(C.offset[0],C.offset[1]),O.repeat=new o.Vector2(C.repeat[0],C.repeat[1]),O.rotation=C.rotation,C.texCoord!==void 0&&(O.channel=C.texCoord),O.flipY=C.flipY),O.needsUpdate=!0,O.userData.cacheKey=P,this._threeJsTextureCache[P]={texture:O,usage:1,initialized:!1},this._threeJsTextureCache[P].texture}}t.MaterialLoader=S;var M;(function(x){x.POINT="point",x.LINE="line",x.MESH="mesh"})(M=t.MATERIAL_TYPE||(t.MATERIAL_TYPE={}));const k=()=>{let x=o.ShaderChunk.shadowmap_pars_fragment;if(x.includes("PCSS implementation")||(x=x.replace("#ifdef USE_SHADOWMAP","#ifdef USE_SHADOWMAP"+d.main),x=x.replace(x.substr(x.indexOf("#if defined( SHADOWMAP_TYPE_PCF )"),x.indexOf("#elif defined( SHADOWMAP_TYPE_PCF_SOFT )")-x.indexOf("#if defined( SHADOWMAP_TYPE_PCF )")),`#if defined( SHADOWMAP_TYPE_PCF )
`+d.entry)),o.ShaderChunk.shadowmap_pars_fragment=x,o.ShaderChunk.backgroundCube_frag=o.ShaderChunk.backgroundCube_frag.replace("vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );","vec4 texColor = textureCube( envMap, inverse(backgroundRotation) * vec3( flipEnvMap * vWorldDirection.x, -vWorldDirection.y, vWorldDirection.z ) );"),o.ShaderLib.backgroundCube.fragmentShader=o.ShaderChunk.backgroundCube_frag,o.ShaderChunk.envmap_physical_pars_fragment=o.ShaderChunk.envmap_physical_pars_fragment.replace("vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );",`
            #ifdef ENVMAP_TYPE_LDR
                vec3 rotatedReflectVec = vec3(envMapRotation * worldNormal).xzy;
                vec4 envMapColor = textureCubeUV( envMap, vec3(rotatedReflectVec.xy, -rotatedReflectVec.z), 1.0 );
            #else
                vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
            #endif
            `),o.ShaderChunk.envmap_physical_pars_fragment=o.ShaderChunk.envmap_physical_pars_fragment.replace("vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );",`
            #ifdef ENVMAP_TYPE_LDR
                vec3 rotatedReflectVec = vec3(envMapRotation * reflectVec).xzy;
                vec4 envMapColor = textureCubeUV( envMap, vec3(rotatedReflectVec.xy, -rotatedReflectVec.z), roughness );
            #else
                vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
            #endif
            `),o.ShaderChunk.envmap_fragment=o.ShaderChunk.envmap_fragment.replace("vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );",`
        #ifdef ENVMAP_TYPE_LDR
            vec4 envColor = textureCube( envMap, envMapRotation * vec3(flipEnvMap * reflectVec.x, reflectVec.y, -reflectVec.z ) );
        #else
            vec4 envColor = textureCube( envMap, envMapRotation * vec3( -flipEnvMap * reflectVec.x, reflectVec.zy ) );
        #endif
        `),o.ShaderChunk.cube_uv_reflection_fragment=o.ShaderChunk.cube_uv_reflection_fragment.replace("vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );","vec3 color0 = bilinearCubeUV( envMap, sampleDir.xzy, mipInt );"),o.ShaderChunk.cube_uv_reflection_fragment=o.ShaderChunk.cube_uv_reflection_fragment.replace("vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );","vec3 color1 = bilinearCubeUV( envMap, sampleDir.xzy, mipInt + 1.0 );"),!o.ShaderChunk.lights_fragment_maps.includes("vec3 reflectVec")){const C=o.ShaderChunk.lights_fragment_maps.lastIndexOf("#endif");o.ShaderChunk.lights_fragment_maps=o.ShaderChunk.lights_fragment_maps.substring(0,C)+`#else
            #ifdef ENVMAP_TYPE_NONE
                vec3 reflectVec = reflect( -geometryViewDir, geometryNormal );
                reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
                vec4 adjustedEnvReflectVector = vec4(reflectVec, 1.0);
                radiance += (vec3((adjustedEnvReflectVector.z + 1.0) / 2.0) + 0.5) / 1.5;
            #endif
        #endif
        `+o.ShaderChunk.lights_fragment_maps.substring(C+6)}};t.adaptShaders=k})($4e);var Px={},CL={};Object.defineProperty(CL,"__esModule",{value:!0});CL.AnimationEngine=void 0;const kr=Cr,hdt=dr,ple=Gi;class pdt{constructor(){this._tree=hdt.Tree.instance,this._animations={}}static get instance(){return this._instance||(this._instance=new this)}get animations(){return this._animations}init(){}update(e){const n=Object.values(this._animations);let i=!1;for(let o=0;o<n.length;o++){const l=n[o];if(l.animationTime===-1&&(i=!0,l.animationTime=0),!l.animate)continue;i=!0,l.animationTime+=e,l.animationTime/1e3>l.duration&&(l.repeat?l.startAnimation():l.stopAnimation());const d=l.duration,p=l.animationTime/1e3%d;for(let g=0;g<l.tracks.length;g++){const v=l.tracks[g],_=l.id+"_"+g;if(!(p<v.times[0]||p>v.times[v.times.length-1])){for(let b=1;b<v.times.length;b++)if(p<v.times[b]&&p>v.times[b-1]){const w=v.node.transformations.filter(x=>x.id===_);v.node.transformations=v.node.transformations.filter(x=>!w.includes(x));const E=(p-v.times[b-1])/(v.times[b]-v.times[b-1]);let S=v.node.transformations.find(x=>x.id==="gltf_matrix_translation");S||(S={id:"gltf_matrix_translation",matrix:kr.mat4.create()},v.node.transformations.push(S));let M=v.node.transformations.find(x=>x.id==="gltf_matrix_rotation");M||(M={id:"gltf_matrix_rotation",matrix:kr.mat4.create()},v.node.transformations.push(M));let k=v.node.transformations.find(x=>x.id==="gltf_matrix_scale");if(k||(k={id:"gltf_matrix_scale",matrix:kr.mat4.create()},v.node.transformations.push(k)),v.path==="rotation"){let x,C;v.pivot&&(x=kr.mat4.fromTranslation(kr.mat4.create(),kr.vec3.fromValues(v.pivot[0],v.pivot[1],v.pivot[2])),C=kr.mat4.fromTranslation(kr.mat4.create(),kr.vec3.fromValues(-v.pivot[0],-v.pivot[1],-v.pivot[2])));let P;v.interpolation==="step"?P=kr.quat.fromValues(v.values[(b-1)*4+0],v.values[(b-1)*4+1],v.values[(b-1)*4+2],v.values[(b-1)*4+3]):P=kr.quat.slerp(kr.vec4.create(),kr.vec4.fromValues(v.values[(b-1)*4+0],v.values[(b-1)*4+1],v.values[(b-1)*4+2],v.values[(b-1)*4+3]),kr.vec4.fromValues(v.values[b*4+0],v.values[b*4+1],v.values[b*4+2],v.values[b*4+3]),E);const O=kr.mat4.fromQuat(kr.mat4.create(),P);x&&C?M.matrix=kr.mat4.multiply(kr.mat4.create(),kr.mat4.multiply(kr.mat4.create(),x,O),C):M.matrix=O}else if(v.path==="translation"){let x;v.interpolation==="step"?x=kr.vec3.fromValues(v.values[(b-1)*3+0],v.values[(b-1)*3+1],v.values[(b-1)*3+2]):x=kr.vec3.lerp(kr.vec3.create(),kr.vec3.fromValues(v.values[(b-1)*3+0],v.values[(b-1)*3+1],v.values[(b-1)*3+2]),kr.vec3.fromValues(v.values[b*3+0],v.values[b*3+1],v.values[b*3+2]),E),S.matrix=kr.mat4.fromTranslation(kr.mat4.create(),x)}else if(v.path==="scale"){let x,C;v.pivot&&(x=kr.mat4.fromTranslation(kr.mat4.create(),kr.vec3.fromValues(v.pivot[0],v.pivot[1],v.pivot[2])),C=kr.mat4.fromTranslation(kr.mat4.create(),kr.vec3.fromValues(-v.pivot[0],-v.pivot[1],-v.pivot[2])));let P;v.interpolation==="step"?P=kr.vec3.fromValues(v.values[(b-1)*3+0],v.values[(b-1)*3+1],v.values[(b-1)*3+2]):P=kr.vec3.lerp(kr.vec3.create(),kr.vec3.fromValues(v.values[(b-1)*3+0],v.values[(b-1)*3+1],v.values[(b-1)*3+2]),kr.vec3.fromValues(v.values[b*3+0],v.values[b*3+1],v.values[b*3+2]),E);const O=kr.mat4.fromScaling(kr.mat4.create(),P);x&&C?k.matrix=kr.mat4.multiply(kr.mat4.create(),kr.mat4.multiply(kr.mat4.create(),x,O),C):k.matrix=O}else if(v.path==="weights"){let x=[];const C=v.values.length/v.times.length;if(v.interpolation==="step")for(let O=0;O<C;O++)x.push(v.values[(b-1)*C+O]);else for(let O=0;O<C;O++)x.push(v.values[(b-1)*C+O]*(1-E)+E*v.values[(b-1)*C+O]);const P=O=>{for(let L=0;L<O.data.length;L++)O.data[L]instanceof ple.GeometryData&&O.data[L].morphWeights.length===C&&(O.data[L].morphWeights=x);for(let L=0;L<O.children.length;L++)P(O.children[L])};P(v.node)}break}}}}return i}updateAnimationData(){this._animations={};const e=this.gatherAnimations(),n=e.map(i=>i.name);for(let i=0;i<e.length;i++){const o=e[i].name,l=[];for(let p=0;p<n.length;p++)o===n[p]&&l.push(p);let d=o;if(l.length>1)for(d=o+"_"+l.indexOf(i);n.includes(d);)d+="_0";this._animations[d]=e[i]}}gatherAnimations(e=this._tree.root){let n=[];for(let i=0,o=e.data.length;i<o;i++)e.data[i]instanceof ple.AnimationData&&n.push(e.data[i]);for(let i=0,o=e.children.length;i<o;i++)n=n.concat(this.gatherAnimations(e.children[i]));return n}}CL.AnimationEngine=pdt;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.AnimationEngine=void 0;const e=CL;Object.defineProperty(t,"AnimationEngine",{enumerable:!0,get:function(){return e.AnimationEngine}})})(Px);var PL={},mdt=X&&X.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,o)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),gdt=X&&X.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),vdt=X&&X.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&mdt(e,t,n);return gdt(e,t),e},jk=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},_dt=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},pD,XE;Object.defineProperty(PL,"__esModule",{value:!0});PL.CameraManager=void 0;const IV=vdt(se),Fl=Cr,mle=F0;class ydt{constructor(e){this._renderingEngine=e,pD.set(this,new IV.PerspectiveCamera),XE.set(this,{})}get camera(){return jk(this,pD,"f")}adjustCamera(e){let n,i;const o=this._renderingEngine.cameraEngine.camera;if(o.useNodeData)n=o.convertedObject[this._renderingEngine.id].children[0].children[0];else if(this._renderingEngine.cameraEngine.camera.type===mle.CAMERA_TYPE.ORTHOGRAPHIC){const l=o;let d=l.convertedObject[this._renderingEngine.id];d||this.load(l),d=l.convertedObject[this._renderingEngine.id];const p=Fl.vec3.distance(l.position,l.target)/2;d.up.set(l.up[0],l.up[1],l.up[2]),d.left=l.left=-p*e,d.bottom=l.bottom=-p,d.right=l.right=p*e,d.top=l.top=p,d.near=l.near=.01,d.far=l.far=100*p,d.position.set(l.position[0],l.position[1],l.position[2]),d.lookAt(l.target[0],l.target[1],l.target[2]),d.updateProjectionMatrix(),l.controls.enableTurntableControls===!0?(i=Fl.mat4.create(),Fl.mat4.rotateZ(i,i,-l.sceneRotation[1]),Fl.mat4.translate(i,i,l.controls.turntableCenter)):l.controls.enableObjectControls===!0&&(i=Fl.mat4.create(),Fl.mat4.rotateX(i,i,-l.sceneRotation[0]),Fl.mat4.rotateZ(i,i,-l.sceneRotation[1]),Fl.mat4.translate(i,i,l.controls.objectControlsCenter)),n=d}else{const l=o;let d=l.convertedObject[this._renderingEngine.id];d||this.load(l),d=l.convertedObject[this._renderingEngine.id],d.up.set(0,0,1);const p=this._renderingEngine.cameraEngine.camera.fov,g=this._renderingEngine.sceneTreeManager.boundingBox.boundingSphere,v=g.radius>0?g.radius:2;d.fov=l.fov=p,d.aspect=l.aspect=e,d.far=l.far=p<10?p*100*100*v:100*v,d.near=l.near=p<10?p*100*.01*v:.01*v,d.position.set(l.position[0],l.position[1],l.position[2]),d.lookAt(l.target[0],l.target[1],l.target[2]),d.updateProjectionMatrix(),l.controls.enableTurntableControls===!0?(i=Fl.mat4.create(),Fl.mat4.rotateZ(i,i,-l.sceneRotation[1]),Fl.mat4.translate(i,i,l.controls.turntableCenter)):l.controls.enableObjectControls===!0&&(i=Fl.mat4.create(),Fl.mat4.rotateX(i,i,-l.sceneRotation[0]),Fl.mat4.rotateZ(i,i,-l.sceneRotation[1]),Fl.mat4.translate(i,i,l.controls.objectControlsCenter)),n=d}return _dt(this,pD,n,"f"),{camera:n,matrix:i}}init(){}load(e,n){let i=jk(this,XE,"f")[e.id];if(e instanceof mle.PerspectiveCamera){i?(e.convertedObject[this._renderingEngine.id]=i,n&&!n.children.find(d=>d===i)&&n.add(i)):(i=new IV.PerspectiveCamera,jk(this,XE,"f")[e.id]=i,e.convertedObject[this._renderingEngine.id]=i,n&&n.add(i));const o=e,l=i;l.up.set(0,0,1),o.useNodeData&&(l.fov=o.fov,l.aspect=o.aspect,l.far=o.far,l.near=o.near,l.updateProjectionMatrix())}else{i?(e.convertedObject[this._renderingEngine.id]=i,n&&!n.children.find(d=>d===i)&&n.add(i)):(i=new IV.OrthographicCamera(0,0,0,0),jk(this,XE,"f")[e.id]=i,e.convertedObject[this._renderingEngine.id]=i,n&&n.add(i));const o=e,l=i;l.up.set(o.up[0],o.up[1],o.up[2]),o.useNodeData&&(l.left=o.left,l.bottom=o.bottom,l.right=o.right,l.top=o.top,l.near=o.near,l.far=o.far,l.updateProjectionMatrix())}}updateCamera(e,n){var i;return((i=this._renderingEngine.cameraEngine.camera)===null||i===void 0?void 0:i.type)==="perspective"&&(this._renderingEngine.cameraEngine.camera.aspect=n),this._renderingEngine.cameraEngine.camera.update(e)}}PL.CameraManager=ydt;pD=new WeakMap,XE=new WeakMap;var W4e={},Rx={};Object.defineProperty(Rx,"__esModule",{value:!0});Rx.Canvas=void 0;class bdt{constructor(e,n,i){this._id=e,this._originalDefinition=n,this._canvasElement=i,this._originalDefinition&&this._originalDefinition instanceof HTMLCanvasElement&&(this._originalDefinition=this._originalDefinition.cloneNode(!0)),i?this._canvasElement=i:(this._canvasElement=document.createElement("canvas"),this._canvasElement.id=this._id),this._canvasElement.style.touchAction="none"}get canvasElement(){return this._canvasElement}get id(){return this._id}reset(){var e;const n=(e=this._canvasElement)===null||e===void 0?void 0:e.parentElement;n==null||n.removeChild(this._canvasElement),this._originalDefinition instanceof HTMLCanvasElement&&(n==null||n.appendChild(this._canvasElement))}}Rx.Canvas=bdt;var RL={};Object.defineProperty(RL,"__esModule",{value:!0});RL.CanvasEngine=void 0;const Adt=Mn,Hk=Rx;class wdt{constructor(){this._canvasDictionary={},this._uuidGenerator=Adt.UuidGenerator.instance}static get instance(){return this._instance||(this._instance=new this)}createCanvasObject(e,n){if(n=n!==void 0&&this._uuidGenerator.validate(n)?n:this._uuidGenerator.create(),e instanceof HTMLCanvasElement){const i=e;return i.id||(i.id=this._uuidGenerator.create()),this._canvasDictionary[n]=new Hk.Canvas(i.id,e,i),n}if(e){const i=e,o=document.getElementById(i);for(let l in this._canvasDictionary)if(this._canvasDictionary[l].id===i)return l;if(o instanceof HTMLCanvasElement)return this._canvasDictionary[n]=new Hk.Canvas(i,e,o),n;if(!o)return this._canvasDictionary[n]=new Hk.Canvas(i,e),n}return this._canvasDictionary[n]=new Hk.Canvas(n,e),n}getCanvas(e){return this._canvasDictionary[e]}}RL.CanvasEngine=wdt;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Canvas=t.CanvasEngine=void 0;const e=Rx;Object.defineProperty(t,"Canvas",{enumerable:!0,get:function(){return e.Canvas}});const n=RL;Object.defineProperty(t,"CanvasEngine",{enumerable:!0,get:function(){return n.CanvasEngine}})})(W4e);var DL={},OL={},EA={},Edt=X&&X.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,o)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),Sdt=X&&X.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Tdt=X&&X.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Edt(e,t,n);return Sdt(e,t),e},$k=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},gle=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},ZE,QE;Object.defineProperty(EA,"__esModule",{value:!0});EA.SDObject=void 0;const xdt=Tdt(se),Mdt=se;class kdt extends Mdt.Object3D{constructor(e,n){super(),ZE.set(this,void 0),QE.set(this,void 0),$k(this,ZE,e,"f"),$k(this,QE,n,"f")}applyTransformation(e){this.matrix.identity(),this.matrixWorld.identity(),this.position.set(0,0,0),this.scale.set(1,1,1),this.quaternion.set(0,0,0,1),this.applyMatrix4(new xdt.Matrix4().fromArray(e))}get SDid(){return gle(this,ZE,"f")}set SDid(e){$k(this,ZE,e,"f")}get SDversion(){return gle(this,QE,"f")}set SDversion(e){$k(this,QE,e,"f")}cloneObject(){const e=this.clone();return e.SDid=this.SDid,e.SDversion=this.SDversion,e}}EA.SDObject=kdt;ZE=new WeakMap,QE=new WeakMap;(function(t){var e=X&&X.__classPrivateFieldGet||function(p,g,v,_){if(v==="a"&&!_)throw new TypeError("Private accessor was defined without a getter");if(typeof g=="function"?p!==g||!_:!g.has(p))throw new TypeError("Cannot read private member from an object whose class did not declare it");return v==="m"?_:v==="a"?_.call(p):_?_.value:g.get(p)},n=X&&X.__classPrivateFieldSet||function(p,g,v,_,b){if(_==="m")throw new TypeError("Private method is not writable");if(_==="a"&&!b)throw new TypeError("Private accessor was defined without a setter");if(typeof g=="function"?p!==g||!b:!g.has(p))throw new TypeError("Cannot write private member to an object whose class did not declare it");return _==="a"?b.call(p,v):b?b.value=v:g.set(p,v),v},i;Object.defineProperty(t,"__esModule",{value:!0}),t.SDData=t.SD_DATA_TYPE=void 0;const o=EA;var l;(function(p){p.GEOMETRY="geometry",p.MATERIAL="material",p.THREEJS="threejs",p.LIGHT="light",p.CAMERA="camera",p.ANIMATION="animation",p.INTERACTION="interaction",p.HTML_ELEMENT_ANCHOR="html_element_anchor",p.CUSTOM="custom"})(l=t.SD_DATA_TYPE||(t.SD_DATA_TYPE={}));class d extends o.SDObject{constructor(g,v){super(g,v),i.set(this,l.CUSTOM)}get SDtype(){return e(this,i,"f")}set SDtype(g){n(this,i,g,"f")}}t.SDData=d,i=new WeakMap})(OL);var Cdt=X&&X.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,o)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),Pdt=X&&X.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Rdt=X&&X.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Cdt(e,t,n);return Pdt(e,t),e};Object.defineProperty(DL,"__esModule",{value:!0});DL.EnvironmentGeometryManager=void 0;const uh=Rdt(se),NV=Gi,vle=Cr,Ddt=Rl(),LV=Mn,zV=OL,Odt=EA;class Idt{constructor(e){this._renderingEngine=e,this._converter=LV.Converter.instance,this._eventEngine=LV.EventEngine.instance,this._groundPlaneColor="#d3d3d3ff",this._groundPlaneShadowColor="#d3d3d3ff",this._gridColor="#44444426",this._initialized=!1,this._eventEngine.addListener(LV.EVENTTYPE.SCENE.SCENE_BOUNDING_BOX_CHANGE,n=>{this.updateEnvironmentGeometryPosition()})}get gridColor(){return this._gridColor}set gridColor(e){this._gridColor=e,this._grid.material.opacity=typeof this._gridColor=="string"&&this._gridColor.length<=8?.15:this._converter.toAlpha(this._gridColor),this._grid.material.transparent=this._grid.material.opacity!==1,this._grid.material.color=this._renderingEngine.createThreeJsColor(this._gridColor),this._grid.material.needsUpdate=!0}get groundPlaneColor(){return this._groundPlaneColor}set groundPlaneColor(e){this._groundPlaneColor=e,this.assignGroundPlaneColor(e)}get groundPlaneShadowColor(){return this._groundPlaneShadowColor}set groundPlaneShadowColor(e){this._groundPlaneShadowColor=e,this.assignGroundPlaneShadowColor(e)}get grid(){return this._grid}get groundPlane(){return this._groundPlane}get groundPlaneShadow(){return this._groundPlaneShadow}assignGroundPlaneColor(e){this._groundPlane.material.opacity=this._converter.toAlpha(e),this._groundPlane.material.transparent=this._groundPlane.material.opacity!==1,this._groundPlane.material.depthWrite=!this._groundPlane.material.transparent,this._groundPlane.material.color=this._renderingEngine.createThreeJsColor(e),this._groundPlane.material.needsUpdate=!0}assignGroundPlaneShadowColor(e){this._groundPlaneShadow.material.opacity=this._converter.toAlpha(e),this._groundPlaneShadow.material.color=this._renderingEngine.createThreeJsColor(e),this._groundPlaneShadow.material.needsUpdate=!0}evaluateGridMeasurements(e){let n=.1,i=1;if(e>1){let o=Math.floor(e).toString(),l=Math.pow(10,o.length-1);i=Math.max(Math.ceil(e/l)*l,1),l=l/10,n=i/l}else if(e!==0){let o=1-Math.floor(Math.log(e)/Math.log(10))-2,l=e.toFixed(o+1),d=parseInt(l.substr(l.length-1))+1,p="0.";for(let g=0;g<o;++g)p=p+"0";i=parseFloat(p+d),n=d*10}return{divisions:n,gridExtents:i}}changeSceneExtents(e){if(e.min[0]===0&&e.min[1]===0&&e.min[2]===0&&e.max[0]===0&&e.max[1]===0&&e.max[2]===0||e.isEmpty())return;this._initialized=!0;let n=vle.vec3.distance(e.min,e.max);const{divisions:i,gridExtents:o}=this.evaluateGridMeasurements(n);this._gridObject.remove(this._grid),this._grid=new uh.GridHelper(2*o,i),this._grid.material.opacity=typeof this._gridColor=="string"&&this._gridColor.length<=8?.15:this._converter.toAlpha(this._gridColor),this._grid.material.transparent=this._grid.material.opacity!==1,this._grid.material.color=this._renderingEngine.createThreeJsColor(this._gridColor),this._grid.rotateX(Math.PI/2),this._grid.visible=this._renderingEngine.gridVisibility,this._gridObject.add(this._grid),this._groundPlane.geometry=new uh.PlaneGeometry(2*o,2*o,2,2),this._groundPlaneShadow.geometry=new uh.PlaneGeometry(2*o,2*o,2,2);let l=.005,d=e.boundingSphere;this._grid.position.set(d.center[0],d.center[1],e.min[2]-l),this._groundPlane.position.set(d.center[0],d.center[1],e.min[2]-2*l),this._groundPlaneShadow.position.set(d.center[0],d.center[1],e.min[2]-2*l)}init(){this._environmentGeometryObject=new Odt.SDObject("environmentGeometry",""),this._renderingEngine.sceneTreeManager.scene.add(this._environmentGeometryObject),this._gridObject=new zV.SDData("grid",""),this._grid=new uh.GridHelper,this._grid.material.opacity=typeof this._gridColor=="string"&&this._gridColor.length<=8?.15:this._converter.toAlpha(this._gridColor),this._grid.material.transparent=this._grid.material.opacity!==1,this._grid.material.color=this._renderingEngine.createThreeJsColor(this._gridColor),this._grid.rotateX(Math.PI/2),this._grid.visible=this._renderingEngine.gridVisibility,this._gridObject.add(this._grid),this._environmentGeometryObject.add(this._gridObject),this._groundPlaneObject=new zV.SDData("groundPlane","");let e=new NV.MaterialStandardData;e.color=this._groundPlaneColor,e.side=NV.MATERIAL_SIDE.FRONT,e.opacity=this._converter.toAlpha(this._groundPlaneColor),e.roughness=1,e.metalness=0,this._groundPlane=new uh.Mesh(new uh.PlaneGeometry,this._renderingEngine.materialLoader.load(e)),this._groundPlane.receiveShadow=!0,this._groundPlane.visible=this._renderingEngine.groundPlaneVisibility,this._groundPlaneObject.add(this._groundPlane),this._environmentGeometryObject.add(this._groundPlaneObject),this._groundPlaneShadowObject=new zV.SDData("groundPlaneShadow","");let n=new NV.MaterialShadowData;n.color=this._groundPlaneShadowColor,n.opacity=this._converter.toAlpha(this._groundPlaneShadowColor),this._groundPlaneShadow=new uh.Mesh(new uh.PlaneGeometry,this._renderingEngine.materialLoader.load(n)),this._groundPlaneShadow.receiveShadow=!0,this._groundPlaneShadow.visible=this._renderingEngine.groundPlaneShadowVisibility,this._groundPlaneShadowObject.add(this._groundPlaneShadow),this._groundPlaneShadowObject.userData.ambientOcclusion=!1,this._environmentGeometryObject.add(this._groundPlaneShadowObject);let i=.005;this._grid.position.set(0,0,-i),this._groundPlane.position.set(0,0,-i),this._groundPlaneShadow.position.set(0,0,-i)}updateEnvironmentGeometryPosition(){const e=new Ddt.Box(this._renderingEngine.sceneTreeManager.boundingBox.min,this._renderingEngine.sceneTreeManager.boundingBox.max);if(!(e.min[0]===0&&e.min[1]===0&&e.min[2]===0&&e.max[0]===0&&e.max[1]===0&&e.max[2]===0||e.isEmpty()))if(!this._initialized)this.changeSceneExtents(e);else{let n=.005,i=e.boundingSphere,o=vle.vec3.distance(e.min,e.max);const{divisions:l,gridExtents:d}=this.evaluateGridMeasurements(o);this._groundPlaneShadow.geometry=new uh.PlaneGeometry(2*d,2*d,2,2),this._grid&&this._grid.position.set(i.center[0],i.center[1],e.min[2]-n),this._groundPlane&&this._groundPlane.position.set(i.center[0],i.center[1],e.min[2]-2*n),this._groundPlaneShadow&&this._groundPlaneShadow.position.set(i.center[0],i.center[1],e.min[2]-2*n)}}}DL.EnvironmentGeometryManager=Idt;var IL={},Bf={},Y4e={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.VISIBILITY_MODE=t.TONE_MAPPING=t.TEXTURE_ENCODING=t.SPINNER_POSITIONING=t.RENDERER_TYPE=t.FLAG_TYPE=t.BUSY_MODE_DISPLAY=void 0,function(e){e.BLUR="blur",e.SPINNER="spinner",e.NONE="none"}(t.BUSY_MODE_DISPLAY||(t.BUSY_MODE_DISPLAY={})),function(e){e.BUSY_MODE="busy_mode",e.CAMERA_FREEZE="camera_freeze",e.CONTINUOUS_RENDERING="continuous_rendering",e.CONTINUOUS_SHADOW_MAP_UPDATE="continuous_shadow_map_update"}(t.FLAG_TYPE||(t.FLAG_TYPE={})),function(e){e.STANDARD="standard",e.ATTRIBUTES="attributes"}(t.RENDERER_TYPE||(t.RENDERER_TYPE={})),function(e){e.CENTER="center",e.TOP_LEFT="top_left",e.TOP_RIGHT="top_right",e.BOTTOM_LEFT="bottom_left",e.BOTTOM_RIGHT="bottom_right"}(t.SPINNER_POSITIONING||(t.SPINNER_POSITIONING={})),function(e){e.LINEAR="linear",e.SRGB="srgb",e.RGBE="rgbe",e.RGBM7="rgbm7",e.RGBM16="rgbm16",e.RGBD="rgbd",e.GAMMA="gamma"}(t.TEXTURE_ENCODING||(t.TEXTURE_ENCODING={})),function(e){e.NONE="none",e.LINEAR="linear",e.REINHARD="reinhard",e.CINEON="cineon",e.ACES_FILMIC="aces_filmic"}(t.TONE_MAPPING||(t.TONE_MAPPING={})),function(e){e.INSTANT="instant",e.SESSION="session",e.MANUAL="manual"}(t.VISIBILITY_MODE||(t.VISIBILITY_MODE={}))})(Y4e);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SPINNER_POSITIONING=t.FLAG_TYPE=t.BUSY_MODE_DISPLAY=t.TONE_MAPPING=t.TEXTURE_ENCODING=t.VISIBILITY_MODE=t.RENDERER_TYPE=void 0;const e=Y4e;Object.defineProperty(t,"BUSY_MODE_DISPLAY",{enumerable:!0,get:function(){return e.BUSY_MODE_DISPLAY}}),Object.defineProperty(t,"FLAG_TYPE",{enumerable:!0,get:function(){return e.FLAG_TYPE}}),Object.defineProperty(t,"RENDERER_TYPE",{enumerable:!0,get:function(){return e.RENDERER_TYPE}}),Object.defineProperty(t,"TEXTURE_ENCODING",{enumerable:!0,get:function(){return e.TEXTURE_ENCODING}}),Object.defineProperty(t,"TONE_MAPPING",{enumerable:!0,get:function(){return e.TONE_MAPPING}}),Object.defineProperty(t,"VISIBILITY_MODE",{enumerable:!0,get:function(){return e.VISIBILITY_MODE}}),Object.defineProperty(t,"SPINNER_POSITIONING",{enumerable:!0,get:function(){return e.SPINNER_POSITIONING}})})(Bf);var Ndt=X&&X.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,o)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),Ldt=X&&X.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),zdt=X&&X.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Ndt(e,t,n);return Ldt(e,t),e};Object.defineProperty(IL,"__esModule",{value:!0});IL.GeometryLoader=void 0;const rr=zdt(se),iu=Gi,Bdt=wA,B_=Mn,_le=Bf,Udt=OL,Fdt=Cr;class Vdt{constructor(e){this._renderingEngine=e,this._gemSphericalMapsCache={},this._geometryCache={},this._logger=B_.Logger.instance,this._primitiveCache={}}emptyGeometryCache(){this._geometryCache={},this._primitiveCache={}}init(){}load(e,n,i,o){const l=(()=>{if(this._primitiveCache[e.primitive.id+"_"+e.primitive.version]){this._primitiveCache[e.primitive.id+"_"+e.primitive.version].counter++;const _=this._primitiveCache[e.primitive.id+"_"+e.primitive.version].threeGeometry.clone();return this._primitiveCache[e.primitive.id+"_"+e.primitive.version].clones.push(_),_}else return this.loadPrimitive(e.primitive)})();let d;e.effectMaterials.length>0?d=e.effectMaterials[e.effectMaterials.length-1].material:this._renderingEngine.type===_le.RENDERER_TYPE.ATTRIBUTES?d=e.attributeMaterial:d=e.material;const p={mode:e.mode,useVertexTangents:l.attributes.tangent!==void 0,useVertexColors:l.attributes.color!==void 0&&this._renderingEngine.type!==_le.RENDERER_TYPE.ATTRIBUTES,useFlatShading:l.attributes.normal===void 0,useMorphTargets:Object.keys(l.morphAttributes).length>0,useMorphNormals:Object.keys(l.morphAttributes).length>0&&l.morphAttributes.normal!==void 0};if(d instanceof iu.MaterialGemData){const _=d;l.computeBoundingSphere();const b=this.createCubeNormalMap(e,l),w=l.boundingSphere.center,E=l.boundingSphere.radius;_.side=iu.MATERIAL_SIDE.FRONT,_.center=Fdt.vec3.fromValues(w.x,w.y,w.z),_.radius=E,_.sphericalNormalMap=b}for(;n.children.length!==0;)n.remove(n.children[0]);const g=this._renderingEngine.materialLoader.load(d||e,p);let v;return this._geometryCache[e.id+"_"+e.version]&&!o?(v=this._geometryCache[e.id+"_"+e.version].obj,(i===!1&&v.parent!==n||i===!0)&&(v=v.cloneObject(),n.add(v)),v.traverse(_=>{(_ instanceof rr.Points||_ instanceof rr.LineSegments||_ instanceof rr.LineLoop||_ instanceof rr.Line||_ instanceof rr.Mesh)&&(_.material=g)})):(v=new Udt.SDData(e.id,e.version),this.createMesh(v,e,l,g,o),this._geometryCache[e.id+"_"+e.version]={obj:v},n.add(v)),v.children.forEach(_=>_.castShadow=!0),g instanceof Bdt.GemMaterial?v.children.forEach(_=>_.receiveShadow=!1):v.children.forEach(_=>_.receiveShadow=!0),e.boundingBox.clone()}loadPrimitive(e){const n=new rr.BufferGeometry;e.indices&&n.setIndex(new rr.BufferAttribute(e.indices.array,e.indices.itemSize));for(const i in e.attributes){const o=this.loadAttribute(e.attributes[i],i),l=this.getAttributeName(i);if(i==="NORMAL"&&this.checkNormals(e,i,o,n))continue;n.setAttribute(l,o);const d=e.attributes[i].morphAttributeData;if(d.length>0){n.morphTargetsRelative=!0;const v=[];for(let _=0;_<d.length;_++)v.push(this.loadAttribute(d[_],i));n.morphAttributes[l]=v}const p="TEXCOORD_1",g="uv1";if(l==="uv"&&!e.attributes[p]){n.setAttribute(g,o);const v=e.attributes[i].morphAttributeData;if(v.length>0){n.morphTargetsRelative=!0;const _=[];for(let b=0;b<v.length;b++)_.push(this.loadAttribute(v[b],i));n.morphAttributes[g]=_}}}return e.convertedObject[this._renderingEngine.id]=n,this._primitiveCache[e.id+"_"+e.version]={threeGeometry:n,counter:1,clones:[]},n}removeFromGemSphericalMapsCache(e){this._gemSphericalMapsCache[e]&&(this._gemSphericalMapsCache[e].counter===1?(this._gemSphericalMapsCache[e].renderTarget.dispose(),this._gemSphericalMapsCache[e].texture.dispose(),delete this._gemSphericalMapsCache[e]):this._gemSphericalMapsCache[e].counter--)}removeFromGeometryCache(e){this._geometryCache[e]&&delete this._geometryCache[e]}removeFromPrimitiveCache(e){if(this._primitiveCache[e])if(this._primitiveCache[e].counter===1){this._primitiveCache[e].threeGeometry.dispose();for(const n in this._primitiveCache[e].threeGeometry.attributes)this._primitiveCache[e].threeGeometry.deleteAttribute(n);this._primitiveCache[e].threeGeometry.setIndex(null),this._primitiveCache[e].clones.forEach(n=>{n.dispose();for(const i in n.attributes)n.deleteAttribute(i);n.setIndex(null)}),delete this._primitiveCache[e]}else this._primitiveCache[e].counter--}checkNormals(e,n,i,o){let l=!1;for(let d=0;d<10;++d){if(Math.abs(i.array[d*3])>.001){l=!0;break}if(Math.abs(i.array[d*3+1])>.001){l=!0;break}if(Math.abs(i.array[d*3+2])>.001){l=!0;break}}if(!l){o.computeVertexNormals();const d=o.getAttribute("normal");return e.attributes[n]=new iu.AttributeData(new Float32Array(d.array),d.itemSize,0,0,3,d.normalized,d.array.length/3),!0}return!1}convertToTriangleMode(e,n){let i=e.getIndex();if(i===null){const d=[],p=e.getAttribute("position");if(p!==void 0){for(let g=0;g<p.count;g++)d.push(g);e.setIndex(d),i=e.getIndex()}else throw new B_.ShapeDiverViewerDataProcessingError("GeometryLoader.convertToTriangleMode: Undefined position attribute. Processing not possible.")}if(i===null)throw new B_.ShapeDiverViewerDataProcessingError("GeometryLoader.convertToTriangleMode: Undefined index. Processing not possible.");const o=i.count-2,l=[];if(n===iu.PRIMITIVE_MODE.TRIANGLE_FAN)for(let d=1;d<=o;d++)l.push(i.getX(0)),l.push(i.getX(d)),l.push(i.getX(d+1));else for(let d=0;d<o;d++)d%2===0?(l.push(i.getX(d)),l.push(i.getX(d+1)),l.push(i.getX(d+2))):(l.push(i.getX(d+2)),l.push(i.getX(d+1)),l.push(i.getX(d)));if(l.length/3!==o)throw new B_.ShapeDiverViewerDataProcessingError("GeometryLoader.convertToTriangleMode: Unable to generate correct amount of triangle.");e.setIndex(l)}createCubeNormalMap(e,n,i=1024){if(this._gemSphericalMapsCache[e.primitive.id+"_"+e.primitive.version])return this._gemSphericalMapsCache[e.primitive.id+"_"+e.primitive.version].counter++,this._gemSphericalMapsCache[e.primitive.id+"_"+e.primitive.version].texture;if(this._gemScene?(this._gemCubeCameraRenderTarget=new rr.WebGLCubeRenderTarget(i,{format:rr.RGBAFormat,magFilter:rr.LinearFilter,minFilter:rr.LinearFilter}),this._gemCubeCameraRenderTarget.texture.generateMipmaps=!1,this._gemCubeCameraRenderTarget.texture.minFilter=rr.NearestFilter,this._gemCubeCameraRenderTarget.texture.magFilter=rr.NearestFilter,this._gemCubeCameraRenderTarget.texture.format=rr.RGBAFormat,this._gemCubeCamera.renderTarget=this._gemCubeCameraRenderTarget):(this._gemScene=new rr.Scene,this._gemCubeCameraRenderTarget=new rr.WebGLCubeRenderTarget(i,{format:rr.RGBAFormat,magFilter:rr.LinearFilter,minFilter:rr.LinearFilter}),this._gemCubeCameraRenderTarget.texture.generateMipmaps=!1,this._gemCubeCameraRenderTarget.texture.minFilter=rr.NearestFilter,this._gemCubeCameraRenderTarget.texture.magFilter=rr.NearestFilter,this._gemCubeCameraRenderTarget.texture.format=rr.RGBAFormat,this._gemCubeCamera=new rr.CubeCamera(.001,1e4,this._gemCubeCameraRenderTarget),this._gemScene.add(this._gemCubeCamera)),!this._gemNormalMaterial){const l={defines:{},uniforms:rr.UniformsUtils.merge([rr.UniformsLib.common]),vertexShader:`
                varying vec3 vNormal;

                void main() {
                  vNormal = normal;
                  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
                }
                `,fragmentShader:`
                varying highp vec3 vNormal;

                float decodeFloat(float f) {
                    float r = mod(f, 1.0/255.0);
                    return /*r > 0.5/256.0 ? f + (1.0/256.0) - r : */f - r;
                }
                
                vec3 decodeVec3(vec3 v) {
                    return vec3(decodeFloat(v.x), decodeFloat(v.y), decodeFloat(v.z));
                }
                
                float signEncoding(vec3 v) {
                    float code = 1.0;
                     if(v.x < 0.0 && v.y < 0.0 && v.z < 0.0) {
                        code = 0.0;
                    } else if (v.x < 0.0 && v.y < 0.0) {
                        code = 2.0/256.0;
                    } else if (v.x < 0.0 && v.z < 0.0) {
                        code = 4.0/256.0;
                    } else if (v.y < 0.0 && v.z < 0.0) {
                        code = 6.0/256.0;
                    } else if (v.x < 0.0) {
                        code = 8.0/256.0;
                    } else if (v.y < 0.0) {
                        code = 10.0/256.0;
                    } else if (v.z < 0.0) {
                        code = 12.0/256.0;
                    }
                    return code;
                }
                
                void main() {
                    vec3 n = normalize(vNormal);
                    gl_FragColor = vec4(decodeVec3(abs(n)), signEncoding(n));
                }
                `};this._gemNormalMaterial=new rr.ShaderMaterial({uniforms:rr.UniformsUtils.clone(l.uniforms),defines:l.defines,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}),this._gemNormalMaterial.blending=rr.NoBlending,this._gemNormalMaterial.side=rr.DoubleSide,this._gemScene.overrideMaterial=this._gemNormalMaterial}const o=new rr.Mesh(n.clone(),this._gemNormalMaterial);return o.geometry.center(),this._gemScene.add(o),this._gemCubeCamera.update(this._renderingEngine.renderer,this._gemScene),this._gemScene.remove(o),o.geometry.dispose(),o.material.dispose(),this._gemCubeCamera.renderTarget.texture.userData={SDid:e.primitive.id,SDversion:e.primitive.version},this._gemSphericalMapsCache[e.primitive.id+"_"+e.primitive.version]={texture:this._gemCubeCameraRenderTarget.texture,renderTarget:this._gemCubeCameraRenderTarget,counter:1},this._gemSphericalMapsCache[e.primitive.id+"_"+e.primitive.version].texture}createMesh(e,n,i,o,l){if(n.mode===iu.PRIMITIVE_MODE.POINTS){const d=new rr.Points(i,o);n.convertedObject[this._renderingEngine.id]=d,e.add(d)}else if(n.mode===iu.PRIMITIVE_MODE.LINES){const d=new rr.LineSegments(i,o);n.convertedObject[this._renderingEngine.id]=d,e.add(d)}else if(n.mode===iu.PRIMITIVE_MODE.LINE_LOOP){const d=new rr.LineLoop(i,o);n.convertedObject[this._renderingEngine.id]=d,e.add(d)}else if(n.mode===iu.PRIMITIVE_MODE.LINE_STRIP){const d=new rr.Line(i,o);n.convertedObject[this._renderingEngine.id]=d,e.add(d)}else if(n.mode===iu.PRIMITIVE_MODE.TRIANGLES||n.mode===iu.PRIMITIVE_MODE.TRIANGLE_STRIP||n.mode===iu.PRIMITIVE_MODE.TRIANGLE_FAN){const d=i;if((n.mode===iu.PRIMITIVE_MODE.TRIANGLE_STRIP||n.mode===iu.PRIMITIVE_MODE.TRIANGLE_FAN)&&this.convertToTriangleMode(d,n.mode),l){const p=new rr.SkinnedMesh(d,o);n.convertedObject[this._renderingEngine.id]=p,p.bind(l,p.matrixWorld),d.attributes.skinWeight.normalized&&p.normalizeSkinWeights(),e.add(p)}else{const p=new rr.Mesh(d,o);n.convertedObject[this._renderingEngine.id]=p,e.add(p)}}else throw new B_.ShapeDiverViewerDataProcessingError(`GeometryLoader.load: Unrecognized primitive mode ${n.mode}.`);e.traverse(d=>{(d instanceof rr.Mesh||d instanceof rr.Points||d instanceof rr.LineSegments||d instanceof rr.LineLoop||d instanceof rr.Line)&&(d.geometry.userData={SDid:n.id,SDversion:n.version,primitiveSDid:n.primitive.id,primitiveSDversion:n.primitive.version},d.renderOrder=n.renderOrder),d instanceof rr.Mesh&&d.userData.transparencyPlaceholder!==!0&&(d.geometry.boundingBox=new rr.Box3(new rr.Vector3(n.boundingBox.min[0],n.boundingBox.min[1],n.boundingBox.min[2]),new rr.Vector3(n.boundingBox.max[0],n.boundingBox.max[1],n.boundingBox.max[2])),d.geometry.boundingSphere=new rr.Sphere(new rr.Vector3(n.boundingBox.boundingSphere.center[0],n.boundingBox.boundingSphere.center[1],n.boundingBox.boundingSphere.center[2]),n.boundingBox.boundingSphere.radius),d.morphTargetInfluences=n.morphWeights)})}getAttributeName(e){switch(e){case"POSITION":return"position";case"NORMAL":return"normal";case"TEXCOORD_0":case"TEXCOORD0":case"TEXCOORD":case"UV":return"uv";case"TEXCOORD_1":return"uv1";case"TEXCOORD_2":return"uv2";case"TEXCOORD_3":return"uv3";case"COLOR_0":case"COLOR0":case"COLOR":return"color";case"WEIGHT":case"WEIGHTS_0":return"skinWeight";case"JOINT":case"JOINTS_0":return"skinIndex";case"TANGENT":return"tangent";case"POSITION_INDEX":return"positionIndex";default:this._logger.warn(`GeometryLoader.loadPrimitive: Unrecognized attribute id ${e}.`)}return""}loadAttribute(e,n){let i;if(e.byteStride&&e.byteStride!==e.itemBytes){const o=new rr.InterleavedBuffer(e.array,e.byteStride/e.elementBytes);i=new rr.InterleavedBufferAttribute(o,e.itemSize,e.byteOffset%e.byteStride/e.elementBytes,e.normalized)}else i=new rr.BufferAttribute(e.array,e.itemSize,n==="COLOR_0"||n==="COLOR0"||n==="COLOR"?!0:e.normalized);if(e.sparse){e.array!==null&&(i=new rr.BufferAttribute(e.array.slice(),e.itemSize,e.normalized));for(let o=0,l=e.sparseIndices.length;o<l;o++){const d=e.sparseIndices[o];if(i.setX(d,e.sparseValues[o*e.itemSize]),e.itemSize>=2&&i.setY(d,e.sparseValues[o*e.itemSize+1]),e.itemSize>=3&&i.setZ(d,e.sparseValues[o*e.itemSize+2]),e.itemSize>=4&&i.setW(d,e.sparseValues[o*e.itemSize+3]),e.itemSize>=5)throw new B_.ShapeDiverViewerDataProcessingError("GeometryLoader.loadPrimitive: Unsupported itemSize in sparse BufferAttribute.")}}return i}}IL.GeometryLoader=Vdt;var NL={};Object.defineProperty(NL,"__esModule",{value:!0});NL.HTMLElementAnchorLoader=void 0;const Gdt=Bf,yle=Cr;class jdt{constructor(e){this._renderingEngine=e,this._htmlElements={},this._parentDiv=document.createElement("div"),this._parentDiv.classList.add("sdv-anchor-container")}get parentDiv(){return this._parentDiv}adjustPositions(e,n){for(const i in this._htmlElements){const o=this._htmlElements[i].anchor,{page:l,container:d,client:p,hidden:g}=this._renderingEngine.sceneTracingManager.convert3Dto2D(yle.vec3.clone(o.location)),v=o.createViewerHtmlElement(this._renderingEngine.id);if(!v)continue;let _=this._htmlElements[i].node,b=_.visible;for(;_.parent;)_=_.parent,b=_.visible&&b;this._renderingEngine.show===!1&&(b=!1),o.update({anchor:o,htmlElement:v,page:l,container:d,client:p,scale:yle.vec2.fromValues(e,n),hidden:g,visible:b})}}init(){var e;(e=this._renderingEngine.canvas.parentNode)===null||e===void 0||e.appendChild(this._parentDiv)}load(e,n,i){const o=n.createViewerHtmlElement(this._renderingEngine.id);o&&((this._renderingEngine.show===!1||i===!1)&&(o.style.display="none"),i!==!1&&(this._parentDiv.appendChild(o),this._htmlElements[n.id+"_"+n.version]={node:e,anchor:n}))}removeData(e,n){if(!this._htmlElements[e+"_"+n])return;const i=this._htmlElements[e+"_"+n].anchor;i&&i.getViewerHtmlElement(this._renderingEngine.id)&&(this._parentDiv.removeChild(i.getViewerHtmlElement(this._renderingEngine.id)),delete this._htmlElements[e+"_"+n])}toggleBusyMode(e){if(e&&this._renderingEngine.busyModeDisplay===Gdt.BUSY_MODE_DISPLAY.BLUR){if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&navigator.userAgent.toLowerCase().indexOf("android")>-1)return;this._parentDiv.style.filter="blur(3px)"}else this._parentDiv.style.filter=""}}NL.HTMLElementAnchorLoader=jdt;var q4e={},LL={};Object.defineProperty(LL,"__esModule",{value:!0});LL.IntersectionEngine=void 0;const M1=Gi,an=Cr,ble=Rl(),Hdt=dr,$dt=Bf,Ale=Mn;class Wdt{constructor(){this._eventEngine=Ale.EventEngine.instance,this._tree=Hdt.Tree.instance,this._intersectNodes=[],this.gatherNodes(),this._eventEngine.addListener(Ale.EVENTTYPE.VIEWPORT.VIEWPORT_UPDATED,()=>{this.gatherNodes()})}static get instance(){return this._instance||(this._instance=new this)}intersect(e,n,i,o=this._tree.root,l){let d=[];const p=(g,v,_,b)=>{if(v!==!1&&!(l!==void 0&&(_.includes(l)||b.length>0&&!b.includes(l)))){if(n){for(let w=0;w<n.length;w++)if(n[w](g)){const E=this.intersectNode(g,e,i);E&&(E.forEach(S=>S.node=g),d=d.concat(E));break}}else{const w=this.intersectNode(g,e);w&&(w.forEach(E=>E.node=g),d=d.concat(w))}for(let w=0;w<g.children.length;w++)p(g.children[w],v&&g.children[w].visible,_.concat(g.children[w].excludeViewports),b.concat(g.children[w].restrictViewports))}};for(let g=0;g<this._intersectNodes.length;g++)p(this._intersectNodes[g].node,this._intersectNodes[g].visible,this._intersectNodes[g].excludeViewports,this._intersectNodes[g].restrictViewports);return d.sort((g,v)=>g.distance-v.distance),d}intersectNode(e,n,i){if(e.visible===!1)return;const o=an.mat4.invert(an.mat4.create(),e.worldMatrix),l={origin:an.vec3.transformMat4(an.vec3.create(),n.origin,o),direction:an.vec3.normalize(an.vec3.create(),an.vec3.fromValues(o[0]*n.direction[0]+o[4]*n.direction[1]+o[8]*n.direction[2],o[1]*n.direction[0]+o[5]*n.direction[1]+o[9]*n.direction[2],o[2]*n.direction[0]+o[6]*n.direction[1]+o[10]*n.direction[2]))};let d;for(let p=0;p<e.data.length;p++)if(e.data[p]instanceof M1.GeometryData){d=e.data[p];break}if(d&&i){let p=null;if(d.effectMaterials.length>0?p=d.effectMaterials[d.effectMaterials.length-1].material:i.rendererType===$dt.RENDERER_TYPE.ATTRIBUTES?p=d.attributeMaterial:p=d.material,p&&p.opacity<=i.opacity)return}if(d)if(d.mode===M1.PRIMITIVE_MODE.LINES){if(e.boundingBox.intersects(n.origin,n.direction)===!1)return;const p=d.primitive.indices,g=d.primitive.attributes.POSITION,v=.1;let _=[];if(p!==null)for(let b=0,w=+p.count;b<w;b+=2){const E=p.array[b*p.itemSize],S=p.array[(b+1)*p.itemSize];let M=this.checkLineIntersection(e,l,v,an.vec3.fromValues(g.array[E*g.itemSize],g.array[E*g.itemSize+1],g.array[E*g.itemSize+2]),an.vec3.fromValues(g.array[S*g.itemSize],g.array[S*g.itemSize+1],g.array[S*g.itemSize+2]));M&&_.push(Object.assign(M,{geometryData:d}))}else if(g!==void 0)for(let b=0,w=+g.count;b<w;b+=2){const E=b,S=b+1;let M=this.checkLineIntersection(e,l,v,an.vec3.fromValues(g.array[E*g.itemSize],g.array[E*g.itemSize+1],g.array[E*g.itemSize+2]),an.vec3.fromValues(g.array[S*g.itemSize],g.array[S*g.itemSize+1],g.array[S*g.itemSize+2]));M&&_.push(Object.assign(M,{geometryData:d}))}return _.sort((b,w)=>b.distance-w.distance),_.forEach(b=>b.point=an.vec3.transformMat4(b.point,b.point,e.worldMatrix)),_}else if(d.mode===M1.PRIMITIVE_MODE.LINE_LOOP||d.mode===M1.PRIMITIVE_MODE.LINE_STRIP){if(e.boundingBox.intersects(n.origin,n.direction)===!1)return;const p=d.primitive.indices,g=d.primitive.attributes.POSITION,v=.1;let _=[];if(p!==null)for(let b=0,w=+p.count-1;b<w;b++){const E=p.array[b*p.itemSize],S=p.array[(b+1)*p.itemSize];let M=this.checkLineIntersection(e,l,v,an.vec3.fromValues(g.array[E*g.itemSize],g.array[E*g.itemSize+1],g.array[E*g.itemSize+2]),an.vec3.fromValues(g.array[S*g.itemSize],g.array[S*g.itemSize+1],g.array[S*g.itemSize+2]));M&&_.push(Object.assign(M,{geometryData:d}))}else if(g!==void 0)for(let b=0,w=+g.count;b<w;b+=2){const E=b,S=b+1;let M=this.checkLineIntersection(e,l,v,an.vec3.fromValues(g.array[E*g.itemSize],g.array[E*g.itemSize+1],g.array[E*g.itemSize+2]),an.vec3.fromValues(g.array[S*g.itemSize],g.array[S*g.itemSize+1],g.array[S*g.itemSize+2]));M&&_.push(Object.assign(M,{geometryData:d}))}return _.sort((b,w)=>b.distance-w.distance),_.forEach(b=>b.point=an.vec3.transformMat4(b.point,b.point,e.worldMatrix)),_}else if(d.mode===M1.PRIMITIVE_MODE.POINTS){const p=d.primitive.attributes.POSITION,g=.1;let v=[];if(p!==void 0)for(let _=0,b=+p.count;_<b;_++){let w=this.checkPointIntersection(e,l,g,an.vec3.fromValues(p.array[_*p.itemSize],p.array[_*p.itemSize+1],p.array[_*p.itemSize+2]));w&&v.push(Object.assign(w,{geometryData:d}))}return v.sort((_,b)=>_.distance-b.distance),v.forEach(_=>_.point=an.vec3.transformMat4(_.point,_.point,e.worldMatrix)),v}else{let p=an.vec3.sub(an.vec3.create(),e.boundingBox.boundingSphere.center,n.origin),g=an.vec3.dot(p,n.direction);g=Math.max(g,0);let v=an.vec3.add(an.vec3.create(),n.origin,an.vec3.scale(an.vec3.create(),n.direction,g));if(an.vec3.squaredDistance(v,e.boundingBox.boundingSphere.center)>e.boundingBox.boundingSphere.radius*e.boundingBox.boundingSphere.radius||e.boundingBox.intersects(n.origin,n.direction)===!1)return;const b=d.material,w=d.primitive.indices,E=d.primitive.attributes.POSITION;let S=[];if(w!==null)for(let M=0,k=+w.count;M<k;M+=3){const x=w.array[M*w.itemSize],C=w.array[(M+1)*w.itemSize],P=w.array[(M+2)*w.itemSize];let O=this.checkIntersection(e,b,l,an.vec3.fromValues(E.array[x*E.itemSize],E.array[x*E.itemSize+1],E.array[x*E.itemSize+2]),an.vec3.fromValues(E.array[C*E.itemSize],E.array[C*E.itemSize+1],E.array[C*E.itemSize+2]),an.vec3.fromValues(E.array[P*E.itemSize],E.array[P*E.itemSize+1],E.array[P*E.itemSize+2]));O&&S.push(Object.assign(O,{geometryData:d}))}else if(E!==void 0)for(let M=0,k=+E.count;M<k;M+=3){const x=M,C=M+1,P=M+2;let O=this.checkIntersection(e,b,l,an.vec3.fromValues(E.array[x*E.itemSize],E.array[x*E.itemSize+1],E.array[x*E.itemSize+2]),an.vec3.fromValues(E.array[C*E.itemSize],E.array[C*E.itemSize+1],E.array[C*E.itemSize+2]),an.vec3.fromValues(E.array[P*E.itemSize],E.array[P*E.itemSize+1],E.array[P*E.itemSize+2]));O&&S.push(Object.assign(O,{geometryData:d}))}return S.sort((M,k)=>M.distance-k.distance),S.forEach(M=>M.point=an.vec3.transformMat4(M.point,M.point,e.worldMatrix)),S}else{let p=[];for(let g=0;g<e.children.length;g++){let v=this.intersectNode(e.children[g],n,i);v&&(p=p.concat(v))}return p.length>0?(p.sort((g,v)=>g.distance-v.distance),p):void 0}}checkIntersection(e,n,i,o,l,d){let p;return n&&n.side===M1.MATERIAL_SIDE.BACK?p=new ble.Triangle(d,l,o).intersect(i.origin,i.direction):p=new ble.Triangle(o,l,d).intersect(i.origin,i.direction),p===null?void 0:{distance:an.vec3.distance(i.origin,p),point:an.vec3.clone(p),node:e}}checkLineIntersection(e,n,i,o,l){const d=an.vec3.sub(an.vec3.create(),l,o),p=an.vec3.length(d),g={origin:o,direction:an.vec3.divide(an.vec3.create(),d,an.vec3.fromValues(p,p,p))},v=an.vec3.cross(an.vec3.create(),n.direction,g.direction),_=an.vec3.normalize(an.vec3.create(),an.vec3.cross(an.vec3.create(),n.direction,v)),b=an.vec3.normalize(an.vec3.create(),an.vec3.cross(an.vec3.create(),g.direction,v)),w=an.vec3.dot(an.vec3.sub(an.vec3.create(),o,n.origin),b)/an.vec3.dot(n.direction,b),E=an.vec3.dot(an.vec3.sub(an.vec3.create(),n.origin,o),_)/an.vec3.dot(g.direction,_);let S=an.vec3.create();w<0?an.vec3.copy(S,n.origin):S=an.vec3.add(an.vec3.create(),n.origin,an.vec3.mul(an.vec3.create(),n.direction,an.vec3.fromValues(w,w,w)));let M=an.vec3.create();E<0?an.vec3.copy(M,o):E<p?M=an.vec3.add(an.vec3.create(),o,an.vec3.mul(an.vec3.create(),g.direction,an.vec3.fromValues(E,E,E))):an.vec3.copy(M,l);const k=an.vec3.distance(S,M);if(k<i)return{distance:k,point:an.vec3.clone(M),node:e}}checkPointIntersection(e,n,i,o){const l=an.vec3.sub(an.vec3.create(),o,n.origin),d=an.vec3.dot(l,n.direction);d<0?an.vec3.copy(l,n.origin):(an.vec3.multiply(l,an.vec3.copy(l,n.direction),an.vec3.fromValues(d,d,d)),an.vec3.add(l,l,n.origin));const p=an.vec3.distance(l,o);if(p<i)return{distance:p,point:an.vec3.clone(l),node:e}}gatherNodes(){this._intersectNodes=[],this._tree.root.traverse(e=>{if(e.visible!==!1){for(let n=0;n<e.data.length;n++)if(e.data[n]instanceof M1.GeometryData){let i=e,o=!0,l=[],d=[];for(;i.parent;)o=i.visible&&o,l=l.concat(i.restrictViewports),d=d.concat(i.excludeViewports),i=i.parent;this._intersectNodes.push({node:e,visible:o,restrictViewports:[...new Set(l)],excludeViewports:[...new Set(d)]})}}})}}LL.IntersectionEngine=Wdt;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.IntersectionEngine=void 0;const e=LL;Object.defineProperty(t,"IntersectionEngine",{enumerable:!0,get:function(){return e.IntersectionEngine}})})(q4e);var zL={},Ydt=X&&X.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,o)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),qdt=X&&X.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Xdt=X&&X.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Ydt(e,t,n);return qdt(e,t),e};Object.defineProperty(zL,"__esModule",{value:!0});zL.LightLoader=void 0;const U_=Xdt(se),F_=Pm;class Zdt{constructor(e){this._renderingEngine=e,this._forceDisabledShadows=!1,this._shadowMapCount=0}get forceDisabledShadows(){return this._forceDisabledShadows}set forceDisabledShadows(e){this._forceDisabledShadows=e}get shadowMapCount(){return this._shadowMapCount}set shadowMapCount(e){this._shadowMapCount=e}adjustToBoundingBox(e,n,i){const o=n.children[0];if(e instanceof F_.DirectionalLight){const l=o,d=i.boundingSphere;l.position.set(d.center[0]+e.direction[0]*d.radius*2.35,d.center[1]+e.direction[1]*d.radius*2.35,d.center[2]+e.direction[2]*d.radius*2.35),l.target.position.set(d.center[0],d.center[1],d.center[2]),e.castShadow===!0&&this.forceDisabledShadows===!1?(l.castShadow=!0,l.shadow.camera.up.set(0,0,1),l.shadow.camera.far=8*d.radius,l.shadow.camera.right=1.5*d.radius,l.shadow.camera.left=-1.5*d.radius,l.shadow.camera.top=1.5*d.radius,l.shadow.camera.bottom=-1.5*d.radius,l.shadow.mapSize.width=e.shadowMapResolution,l.shadow.mapSize.height=e.shadowMapResolution,l.shadow.bias=e.shadowMapBias,l.shadow.camera.updateProjectionMatrix(),this._shadowMapCount++):l.castShadow=!1}}init(){}load(e,n){let i=n.children[0]instanceof U_.Light?n.children[0]:null;if(e instanceof F_.AmbientLight){i||(i=new U_.AmbientLight,e.convertedObject[this._renderingEngine.id]=i,n.add(i));const o=i;o.color=this._renderingEngine.createThreeJsColor(e.color),o.intensity=e.intensity}if(e instanceof F_.DirectionalLight){i||(i=new U_.DirectionalLight,n.add(i),n.add(i.target),e.convertedObject[this._renderingEngine.id]=i);const o=i;o.color=this._renderingEngine.createThreeJsColor(e.color),o.intensity=e.intensity,e.useNodeData&&(o.position.set(0,0,0),o.target.position.set(0,0,-1))}if(e instanceof F_.HemisphereLight){i||(i=new U_.HemisphereLight,n.add(i),e.convertedObject[this._renderingEngine.id]=i);const o=i;o.color=this._renderingEngine.createThreeJsColor(e.color),o.intensity=e.intensity,o.groundColor=this._renderingEngine.createThreeJsColor(e.groundColor)}if(e instanceof F_.PointLight){i||(i=new U_.PointLight,n.add(i),e.convertedObject[this._renderingEngine.id]=i);const o=i;o.color=this._renderingEngine.createThreeJsColor(e.color),o.intensity=e.intensity,o.distance=e.distance,o.decay=e.decay,o.position.set(e.position[0],e.position[1],e.position[2])}if(e instanceof F_.SpotLight){i||(i=new U_.SpotLight(this._renderingEngine.createThreeJsColor(e.color),e.intensity,e.distance,e.angle,e.penumbra,e.decay),n.add(i),n.add(i.target),e.convertedObject[this._renderingEngine.id]=i);const o=i;o.color=this._renderingEngine.createThreeJsColor(e.color),o.intensity=e.intensity,o.distance=e.distance,o.angle=e.angle,o.penumbra=e.penumbra,o.decay=e.decay,o.position.set(e.position[0],e.position[1],e.position[2]),o.target.position.set(e.target[0],e.target[1],e.target[2])}}}zL.LightLoader=Zdt;var Dx={};/**
 * postprocessing v6.35.3 build Sat Mar 30 2024
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2024 Raoul van Rschen
 * @license Zlib
 */var iK=Object.defineProperty,Qdt=Object.getOwnPropertyDescriptor,Kdt=Object.getOwnPropertyNames,Jdt=Object.prototype.hasOwnProperty,eht=(t,e)=>{for(var n in e)iK(t,n,{get:e[n],enumerable:!0})},tht=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of Kdt(e))!Jdt.call(t,o)&&o!==n&&iK(t,o,{get:()=>e[o],enumerable:!(i=Qdt(e,o))||i.enumerable});return t},nht=t=>tht(iK({},"__esModule",{value:!0}),t),X4e={};eht(X4e,{AdaptiveLuminanceMaterial:()=>AAe,AdaptiveLuminancePass:()=>wAe,BlendFunction:()=>Jn,BlendMode:()=>nAe,BloomEffect:()=>aAe,BlurPass:()=>nv,BokehEffect:()=>opt,BokehMaterial:()=>KE,BoxBlurMaterial:()=>EAe,BoxBlurPass:()=>nmt,BrightnessContrastEffect:()=>lpt,ChromaticAberrationEffect:()=>gpt,CircleOfConfusionMaterial:()=>lAe,ClearMaskPass:()=>K4e,ClearPass:()=>yv,ColorAverageEffect:()=>upt,ColorChannel:()=>Rg,ColorDepthEffect:()=>hpt,ColorEdgesMaterial:()=>oW,ConvolutionMaterial:()=>iI,CopyMaterial:()=>Ox,CopyPass:()=>rI,DepthComparisonMaterial:()=>pAe,DepthCopyMaterial:()=>SAe,DepthCopyMode:()=>fb,DepthCopyPass:()=>cW,DepthDownsamplingMaterial:()=>vAe,DepthDownsamplingPass:()=>_Ae,DepthEffect:()=>_pt,DepthMaskMaterial:()=>lK,DepthOfFieldEffect:()=>Spt,DepthPass:()=>uK,DepthPickingPass:()=>imt,DepthSavePass:()=>cW,DepthTestStrategy:()=>xb,Disposable:()=>iht,DotScreenEffect:()=>xpt,DownsamplingMaterial:()=>iAe,EdgeDetectionMaterial:()=>oW,EdgeDetectionMode:()=>cK,Effect:()=>zi,EffectAttribute:()=>$o,EffectComposer:()=>dht,EffectMaterial:()=>TAe,EffectPass:()=>omt,EffectShaderData:()=>eAe,EffectShaderSection:()=>wi,FXAAEffect:()=>Cpt,GammaCorrectionEffect:()=>Dpt,GaussKernel:()=>tAe,GaussianBlurMaterial:()=>xAe,GaussianBlurPass:()=>amt,GlitchEffect:()=>Npt,GlitchMode:()=>Ey,GodRaysEffect:()=>Upt,GodRaysMaterial:()=>uAe,GridEffect:()=>Vpt,HueSaturationEffect:()=>jpt,ImmutableTimer:()=>pht,Initializable:()=>mht,KawaseBlurMaterial:()=>iI,KawaseBlurPass:()=>nv,KernelSize:()=>Fd,LUT1DEffect:()=>Ypt,LUT3DEffect:()=>Cle,LUT3dlLoader:()=>$2t,LUTCubeLoader:()=>W2t,LUTEffect:()=>Cle,LUTOperation:()=>fAe,LambdaPass:()=>lmt,LensDistortionEffect:()=>$pt,LookupTexture:()=>r6,LookupTexture3D:()=>r6,LuminanceMaterial:()=>rAe,LuminancePass:()=>oK,MaskFunction:()=>aK,MaskMaterial:()=>cAe,MaskPass:()=>J4e,MipmapBlurPass:()=>oAe,NoiseEffect:()=>Kpt,NoiseTexture:()=>sI,NormalPass:()=>cmt,OutlineEdgesMaterial:()=>sW,OutlineEffect:()=>s2t,OutlineMaterial:()=>sW,OverrideMaterialManager:()=>iW,Pass:()=>Zo,PixelationEffect:()=>a2t,PredicationMode:()=>hAe,RawImageData:()=>sm,RealisticBokehEffect:()=>c2t,RenderPass:()=>Ix,Resizable:()=>ght,Resizer:()=>Rr,Resolution:()=>Rr,SMAAAreaImageData:()=>_mt,SMAAEffect:()=>T2t,SMAAImageGenerator:()=>wmt,SMAAImageLoader:()=>Y2t,SMAAPreset:()=>Sy,SMAASearchImageData:()=>Tmt,SMAAWeightsMaterial:()=>mAe,SSAOEffect:()=>R2t,SSAOMaterial:()=>gAe,SavePass:()=>rI,ScanlineEffect:()=>f2t,Section:()=>wi,Selection:()=>sK,SelectiveBloomEffect:()=>g2t,SepiaEffect:()=>_2t,ShaderPass:()=>Rc,ShockWaveEffect:()=>m2t,TetrahedralUpscaler:()=>fmt,TextureEffect:()=>I2t,TiltShiftBlurMaterial:()=>yAe,TiltShiftBlurPass:()=>bAe,TiltShiftEffect:()=>U2t,Timer:()=>Z4e,ToneMappingEffect:()=>G2t,ToneMappingMode:()=>du,UpsamplingMaterial:()=>sAe,VignetteEffect:()=>H2t,VignetteTechnique:()=>Ty,WebGLExtension:()=>Zpt,version:()=>rht});var Lm=nht(X4e),rht="6.35.3",iht=class{dispose(){}},Bo=se,BV=1/1e3,sht=1e3,Z4e=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(t){typeof document<"u"&&document.hidden!==void 0&&(t?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=t)}get delta(){return this._delta*BV}get fixedDelta(){return this._fixedDelta*BV}set fixedDelta(t){this._fixedDelta=t*sht}get elapsed(){return this._elapsed*BV}update(t){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(t!==void 0?t:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}getDelta(){return this.delta}getElapsed(){return this.elapsed}handleEvent(t){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},yu=se,oht=new yu.Camera,s2=null;function aht(){if(s2===null){const t=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]);s2=new yu.BufferGeometry,s2.setAttribute!==void 0?(s2.setAttribute("position",new yu.BufferAttribute(t,3)),s2.setAttribute("uv",new yu.BufferAttribute(e,2))):(s2.addAttribute("position",new yu.BufferAttribute(t,3)),s2.addAttribute("uv",new yu.BufferAttribute(e,2)))}return s2}var Zo=class Q4e{constructor(e="Pass",n=new yu.Scene,i=oht){this.name=e,this.renderer=null,this.scene=n,this.camera=i,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){const n=this.fullscreenMaterial;n!==null&&(n.needsUpdate=!0),this.rtt=!e}}set mainScene(e){}set mainCamera(e){}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let n=this.screen;n!==null?n.material=e:(n=new yu.Mesh(aht(),e),n.frustumCulled=!1,this.scene===null&&(this.scene=new yu.Scene),this.scene.add(n),this.screen=n)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,n=yu.BasicDepthPacking){}render(e,n,i,o,l){throw new Error("Render method not implemented!")}setSize(e,n){}initialize(e,n,i){}dispose(){for(const e of Object.keys(this)){const n=this[e];(n instanceof yu.WebGLRenderTarget||n instanceof yu.Material||n instanceof yu.Texture||n instanceof Q4e)&&this[e].dispose()}}},K4e=class extends Zo{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(t,e,n,i,o){const l=t.state.buffers.stencil;l.setLocked(!1),l.setTest(!1)}},V_=se,Wk=se,lht=se,cht=Number(lht.REVISION.replace(/\D+/g,""));function _v(t){return cht<154?t.replace("colorspace_fragment","encodings_fragment"):t}var uht=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <colorspace_fragment>
#include <dithering_fragment>
}`,zm="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",Ox=class extends Wk.ShaderMaterial{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new Wk.Uniform(null),opacity:new Wk.Uniform(1)},blending:Wk.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:uht,vertexShader:zm}),this.fragmentShader=_v(this.fragmentShader)}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}},rI=class extends Zo{constructor(t,e=!0){super("CopyPass"),this.fullscreenMaterial=new Ox,this.needsSwap=!1,this.renderTarget=t,t===void 0&&(this.renderTarget=new V_.WebGLRenderTarget(1,1,{minFilter:V_.LinearFilter,magFilter:V_.LinearFilter,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(t){this.autoResize=t}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(t){this.autoResize=t}render(t,e,n,i,o){this.fullscreenMaterial.inputBuffer=e.texture,t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){this.autoResize&&this.renderTarget.setSize(t,e)}initialize(t,e,n){n!==void 0&&(this.renderTarget.texture.type=n,n!==V_.UnsignedByteType?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":t!==null&&t.outputColorSpace===V_.SRGBColorSpace&&(this.renderTarget.texture.colorSpace=V_.SRGBColorSpace))}},fht=se,wle=new fht.Color,yv=class extends Zo{constructor(t=!0,e=!0,n=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=t,this.depth=e,this.stencil=n,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(t,e,n){this.color=t,this.depth=e,this.stencil=n}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(t){this.overrideClearColor=t}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(t){this.overrideClearAlpha=t}render(t,e,n,i,o){const l=this.overrideClearColor,d=this.overrideClearAlpha,p=t.getClearAlpha(),g=l!==null,v=d>=0;g?(t.getClearColor(wle),t.setClearColor(l,v?d:p)):v&&t.setClearAlpha(d),t.setRenderTarget(this.renderToScreen?null:e),t.clear(this.color,this.depth,this.stencil),g?t.setClearColor(wle,p):v&&t.setClearAlpha(p)}},J4e=class extends Zo{constructor(t,e){super("MaskPass",t,e),this.needsSwap=!1,this.clearPass=new yv(!1,!1,!0),this.inverse=!1}set mainScene(t){this.scene=t}set mainCamera(t){this.camera=t}get inverted(){return this.inverse}set inverted(t){this.inverse=t}get clear(){return this.clearPass.enabled}set clear(t){this.clearPass.enabled=t}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(t){this.inverted=t}render(t,e,n,i,o){const l=t.getContext(),d=t.state.buffers,p=this.scene,g=this.camera,v=this.clearPass,_=this.inverted?0:1,b=1-_;d.color.setMask(!1),d.depth.setMask(!1),d.color.setLocked(!0),d.depth.setLocked(!0),d.stencil.setTest(!0),d.stencil.setOp(l.REPLACE,l.REPLACE,l.REPLACE),d.stencil.setFunc(l.ALWAYS,_,4294967295),d.stencil.setClear(b),d.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?v.render(t,null):(v.render(t,e),v.render(t,n))),this.renderToScreen?(t.setRenderTarget(null),t.render(p,g)):(t.setRenderTarget(e),t.render(p,g),t.setRenderTarget(n),t.render(p,g)),d.color.setLocked(!1),d.depth.setLocked(!1),d.stencil.setLocked(!1),d.stencil.setFunc(l.EQUAL,1,4294967295),d.stencil.setOp(l.KEEP,l.KEEP,l.KEEP),d.stencil.setLocked(!0)}},dht=class{constructor(t=null,{depthBuffer:e=!0,stencilBuffer:n=!1,multisampling:i=0,frameBufferType:o}={}){this.renderer=null,this.inputBuffer=this.createBuffer(e,n,o,i),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new rI,this.depthTexture=null,this.passes=[],this.timer=new Z4e,this.autoRenderToScreen=!0,this.setRenderer(t)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(t){const e=this.inputBuffer,n=this.multisampling;n>0&&t>0?(this.inputBuffer.samples=t,this.outputBuffer.samples=t,this.inputBuffer.dispose(),this.outputBuffer.dispose()):n!==t&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(e.depthBuffer,e.stencilBuffer,e.texture.type,t),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(t){if(this.renderer=t,t!==null){const e=t.getSize(new Bo.Vector2),n=t.getContext().getContextAttributes().alpha,i=this.inputBuffer.texture.type;i===Bo.UnsignedByteType&&t.outputColorSpace===Bo.SRGBColorSpace&&(this.inputBuffer.texture.colorSpace=Bo.SRGBColorSpace,this.outputBuffer.texture.colorSpace=Bo.SRGBColorSpace,this.inputBuffer.dispose(),this.outputBuffer.dispose()),t.autoClear=!1,this.setSize(e.width,e.height);for(const o of this.passes)o.initialize(t,n,i)}}replaceRenderer(t,e=!0){const n=this.renderer,i=n.domElement.parentNode;return this.setRenderer(t),e&&i!==null&&(i.removeChild(n.domElement),i.appendChild(t.domElement)),n}createDepthTexture(){const t=this.depthTexture=new Bo.DepthTexture;return this.inputBuffer.depthTexture=t,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(t.format=Bo.DepthStencilFormat,t.type=Bo.UnsignedInt248Type):t.type=Bo.UnsignedIntType,t}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const t of this.passes)t.setDepthTexture(null)}}createBuffer(t,e,n,i){const o=this.renderer,l=o===null?new Bo.Vector2:o.getDrawingBufferSize(new Bo.Vector2),d={minFilter:Bo.LinearFilter,magFilter:Bo.LinearFilter,stencilBuffer:e,depthBuffer:t,type:n},p=new Bo.WebGLRenderTarget(l.width,l.height,d);return i>0&&(p.ignoreDepthForMultisampleCopy=!1,p.samples=i),n===Bo.UnsignedByteType&&o!==null&&o.outputColorSpace===Bo.SRGBColorSpace&&(p.texture.colorSpace=Bo.SRGBColorSpace),p.texture.name="EffectComposer.Buffer",p.texture.generateMipmaps=!1,p}setMainScene(t){for(const e of this.passes)e.mainScene=t}setMainCamera(t){for(const e of this.passes)e.mainCamera=t}addPass(t,e){const n=this.passes,i=this.renderer,o=i.getDrawingBufferSize(new Bo.Vector2),l=i.getContext().getContextAttributes().alpha,d=this.inputBuffer.texture.type;if(t.setRenderer(i),t.setSize(o.width,o.height),t.initialize(i,l,d),this.autoRenderToScreen&&(n.length>0&&(n[n.length-1].renderToScreen=!1),t.renderToScreen&&(this.autoRenderToScreen=!1)),e!==void 0?n.splice(e,0,t):n.push(t),this.autoRenderToScreen&&(n[n.length-1].renderToScreen=!0),t.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const p=this.createDepthTexture();for(t of n)t.setDepthTexture(p)}else t.setDepthTexture(this.depthTexture)}removePass(t){const e=this.passes,n=e.indexOf(t);if(n!==-1&&e.splice(n,1).length>0){if(this.depthTexture!==null){const l=(p,g)=>p||g.needsDepthTexture;e.reduce(l,!1)||(t.getDepthTexture()===this.depthTexture&&t.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&n===e.length&&(t.renderToScreen=!1,e.length>0&&(e[e.length-1].renderToScreen=!0))}}removeAllPasses(){const t=this.passes;this.deleteDepthTexture(),t.length>0&&(this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!1),this.passes=[])}render(t){const e=this.renderer,n=this.copyPass;let i=this.inputBuffer,o=this.outputBuffer,l=!1,d,p,g;t===void 0&&(this.timer.update(),t=this.timer.getDelta());for(const v of this.passes)v.enabled&&(v.render(e,i,o,t,l),v.needsSwap&&(l&&(n.renderToScreen=v.renderToScreen,d=e.getContext(),p=e.state.buffers.stencil,p.setFunc(d.NOTEQUAL,1,4294967295),n.render(e,i,o,t,l),p.setFunc(d.EQUAL,1,4294967295)),g=i,i=o,o=g),v instanceof J4e?l=!0:v instanceof K4e&&(l=!1))}setSize(t,e,n){const i=this.renderer,o=i.getSize(new Bo.Vector2);(t===void 0||e===void 0)&&(t=o.width,e=o.height),(o.width!==t||o.height!==e)&&i.setSize(t,e,n);const l=i.getDrawingBufferSize(new Bo.Vector2);this.inputBuffer.setSize(l.width,l.height),this.outputBuffer.setSize(l.width,l.height);for(const d of this.passes)d.setSize(l.width,l.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const t of this.passes)t.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}},hht=se,$o={NONE:0,DEPTH:1,CONVOLUTION:2},wi={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},eAe=class{constructor(){this.shaderParts=new Map([[wi.FRAGMENT_HEAD,null],[wi.FRAGMENT_MAIN_UV,null],[wi.FRAGMENT_MAIN_IMAGE,null],[wi.VERTEX_HEAD,null],[wi.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=$o.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=hht.LinearSRGBColorSpace}};function Ele(t){let e;if(t===0)e=new Float64Array(0);else if(t===1)e=new Float64Array([1]);else if(t>1){let n=new Float64Array(t),i=new Float64Array(t);for(let o=1;o<=t;++o){for(let l=0;l<o;++l)i[l]=l===0||l===o-1?1:n[l-1]+n[l];e=i,i=n,n=e}}return e}var tAe=class{constructor(t,e=2){this.weights=null,this.offsets=null,this.linearWeights=null,this.linearOffsets=null,this.generate(t,e)}get steps(){return this.offsets===null?0:this.offsets.length}get linearSteps(){return this.linearOffsets===null?0:this.linearOffsets.length}generate(t,e){if(t<3||t>1020)throw new Error("The kernel size must be in the range [3, 1020]");const n=t+e*2,i=e>0?Ele(n).slice(e,-e):Ele(n),o=Math.floor((i.length-1)/2),l=i.reduce((b,w)=>b+w,0),d=i.slice(o),p=[...Array(o+1).keys()],g=new Float64Array(Math.floor(p.length/2)),v=new Float64Array(g.length);g[0]=d[0]/l;for(let b=1,w=1,E=p.length-1;b<E;b+=2,++w){const S=p[b],M=p[b+1],k=d[b],x=d[b+1],C=k+x,P=(S*k+M*x)/C;g[w]=C/l,v[w]=P}for(let b=0,w=d.length,E=1/l;b<w;++b)d[b]*=E;const _=(g.reduce((b,w)=>b+w,0)-g[0]*.5)*2;if(_!==0)for(let b=0,w=g.length,E=1/_;b<w;++b)g[b]*=E;this.offsets=p,this.weights=d,this.linearOffsets=v,this.linearWeights=g}},pht=class{getDelta(){return NaN}getElapsed(){return NaN}},mht=class{initialize(t,e,n){}},td=se,UV=!1,iW=class{constructor(t=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(t),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let n;if(e.material.flatShading)switch(e.material.side){case td.DoubleSide:n=this.materialsFlatShadedDoubleSide;break;case td.BackSide:n=this.materialsFlatShadedBackSide;break;default:n=this.materialsFlatShaded;break}else switch(e.material.side){case td.DoubleSide:n=this.materialsDoubleSide;break;case td.BackSide:n=this.materialsBackSide;break;default:n=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=n[2]:e.isInstancedMesh?e.material=n[1]:e.material=n[0],++this.meshCount}}}cloneMaterial(t){if(!(t instanceof td.ShaderMaterial))return t.clone();const e=t.uniforms,n=new Map;for(const o in e){const l=e[o].value;l.isRenderTargetTexture&&(e[o].value=null,n.set(o,l))}const i=t.clone();for(const o of n)e[o[0]].value=o[1],i.uniforms[o[0]].value=o[1];return i}setMaterial(t){if(this.disposeMaterials(),this.material=t,t!==null){const e=this.materials=[this.cloneMaterial(t),this.cloneMaterial(t),this.cloneMaterial(t)];for(const n of e)n.uniforms=Object.assign({},t.uniforms),n.side=td.FrontSide;e[2].skinning=!0,this.materialsBackSide=e.map(n=>{const i=this.cloneMaterial(n);return i.uniforms=Object.assign({},t.uniforms),i.side=td.BackSide,i}),this.materialsDoubleSide=e.map(n=>{const i=this.cloneMaterial(n);return i.uniforms=Object.assign({},t.uniforms),i.side=td.DoubleSide,i}),this.materialsFlatShaded=e.map(n=>{const i=this.cloneMaterial(n);return i.uniforms=Object.assign({},t.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=e.map(n=>{const i=this.cloneMaterial(n);return i.uniforms=Object.assign({},t.uniforms),i.flatShading=!0,i.side=td.BackSide,i}),this.materialsFlatShadedDoubleSide=e.map(n=>{const i=this.cloneMaterial(n);return i.uniforms=Object.assign({},t.uniforms),i.flatShading=!0,i.side=td.DoubleSide,i})}}render(t,e,n){const i=t.shadowMap.enabled;if(t.shadowMap.enabled=!1,UV){const o=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),t.render(e,n);for(const l of o)l[0].material=l[1];this.meshCount!==o.size&&o.clear()}else{const o=e.overrideMaterial;e.overrideMaterial=this.material,t.render(e,n),e.overrideMaterial=o}t.shadowMap.enabled=i}disposeMaterials(){if(this.material!==null){const t=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of t)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return UV}static set workaroundEnabled(t){UV=t}},ght=class{setSize(t,e){}},Yk=se,o2=-1,Rr=class extends Yk.EventDispatcher{constructor(t,e=o2,n=o2,i=1){super(),this.resizable=t,this.baseSize=new Yk.Vector2(1,1),this.preferredSize=new Yk.Vector2(e,n),this.target=this.preferredSize,this.s=i,this.effectiveSize=new Yk.Vector2,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const t=this.baseSize,e=this.preferredSize,n=this.effectiveSize,i=this.scale;e.width!==o2?n.width=e.width:e.height!==o2?n.width=Math.round(e.height*(t.width/Math.max(t.height,1))):n.width=Math.round(t.width*i),e.height!==o2?n.height=e.height:e.width!==o2?n.height=Math.round(e.width/Math.max(t.width/Math.max(t.height,1),1)):n.height=Math.round(t.height*i)}get width(){return this.effectiveSize.width}set width(t){this.preferredWidth=t}get height(){return this.effectiveSize.height}set height(t){this.preferredHeight=t}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(t){this.s!==t&&(this.s=t,this.preferredSize.setScalar(o2),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(t){this.scale=t}get baseWidth(){return this.baseSize.width}set baseWidth(t){this.baseSize.width!==t&&(this.baseSize.width=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(t){this.baseWidth=t}get baseHeight(){return this.baseSize.height}set baseHeight(t){this.baseSize.height!==t&&(this.baseSize.height=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(t){this.baseHeight=t}setBaseSize(t,e){(this.baseSize.width!==t||this.baseSize.height!==e)&&(this.baseSize.set(t,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(t){this.preferredSize.width!==t&&(this.preferredSize.width=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(t){this.preferredWidth=t}get preferredHeight(){return this.preferredSize.height}set preferredHeight(t){this.preferredSize.height!==t&&(this.preferredSize.height=t,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(t){this.preferredHeight=t}setPreferredSize(t,e){(this.preferredSize.width!==t||this.preferredSize.height!==e)&&(this.preferredSize.set(t,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(t){this.s=t.scale,this.baseSize.set(t.baseWidth,t.baseHeight),this.preferredSize.set(t.preferredWidth,t.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return o2}},sK=class extends Set{constructor(t,e=10){super(),this.l=e,this.exclusive=!1,t!==void 0&&this.set(t)}get layer(){return this.l}set layer(t){const e=this.l;for(const n of this)n.layers.disable(e),n.layers.enable(t);this.l=t}getLayer(){return this.layer}setLayer(t){this.layer=t}isExclusive(){return this.exclusive}setExclusive(t){this.exclusive=t}clear(){const t=this.layer;for(const e of this)e.layers.disable(t);return super.clear()}set(t){this.clear();for(const e of t)this.add(e);return this}indexOf(t){return this.has(t)?0:-1}add(t){return this.exclusive?t.layers.set(this.layer):t.layers.enable(this.layer),super.add(t)}delete(t){return this.has(t)&&t.layers.disable(this.layer),super.delete(t)}toggle(t){let e;return this.has(t)?(this.delete(t),e=!1):(this.add(t),e=!0),e}setVisible(t){for(const e of this)t?e.layers.enable(0):e.layers.disable(0);return this}},Sle=se,Jn={SKIP:9,SET:30,ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},vht="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",_ht="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",yht="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",bht="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",Aht="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",wht="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",Eht="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",Sht="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",Tht="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",xht="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",Mht="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",kht="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",Cht="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",Pht="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",Rht="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",Dht="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",Oht="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",Iht="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",Nht="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",Lht="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",zht="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",Bht="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",Uht="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",Fht="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",Vht="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",Ght="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",jht="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",Hht="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",$ht="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",Wht="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",Yht="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",qht="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",Xht=new Map([[Jn.ADD,vht],[Jn.ALPHA,_ht],[Jn.AVERAGE,yht],[Jn.COLOR,bht],[Jn.COLOR_BURN,Aht],[Jn.COLOR_DODGE,wht],[Jn.DARKEN,Eht],[Jn.DIFFERENCE,Sht],[Jn.DIVIDE,Tht],[Jn.DST,null],[Jn.EXCLUSION,xht],[Jn.HARD_LIGHT,Mht],[Jn.HARD_MIX,kht],[Jn.HUE,Cht],[Jn.INVERT,Pht],[Jn.INVERT_RGB,Rht],[Jn.LIGHTEN,Dht],[Jn.LINEAR_BURN,Oht],[Jn.LINEAR_DODGE,Iht],[Jn.LINEAR_LIGHT,Nht],[Jn.LUMINOSITY,Lht],[Jn.MULTIPLY,zht],[Jn.NEGATION,Bht],[Jn.NORMAL,Uht],[Jn.OVERLAY,Fht],[Jn.PIN_LIGHT,Vht],[Jn.REFLECT,Ght],[Jn.SATURATION,jht],[Jn.SCREEN,Hht],[Jn.SOFT_LIGHT,$ht],[Jn.SRC,Wht],[Jn.SUBTRACT,Yht],[Jn.VIVID_LIGHT,qht]]),nAe=class extends Sle.EventDispatcher{constructor(t,e=1){super(),this._blendFunction=t,this.opacity=new Sle.Uniform(e)}getOpacity(){return this.opacity.value}setOpacity(t){this.opacity.value=t}get blendFunction(){return this._blendFunction}set blendFunction(t){this._blendFunction=t,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(t){this.blendFunction=t}getShaderCode(){return Xht.get(this.blendFunction)}},F3=se,Fd={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},V3=se,a2=se,Zht=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,Qht="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",Kht=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],iI=class extends a2.ShaderMaterial{constructor(t=new a2.Vector4){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new a2.Uniform(null),texelSize:new a2.Uniform(new a2.Vector4),scale:new a2.Uniform(1),kernel:new a2.Uniform(0)},blending:a2.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Zht,vertexShader:Qht}),this.fragmentShader=_v(this.fragmentShader),this.setTexelSize(t.x,t.y),this.kernelSize=Fd.MEDIUM}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.inputBuffer=t}get kernelSequence(){return Kht[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(t){this.uniforms.scale.value=t}getScale(){return this.uniforms.scale.value}setScale(t){this.uniforms.scale.value=t}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(t){this.uniforms.kernel.value=t}setKernel(t){this.kernel=t}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e,t*.5,e*.5)}setSize(t,e){const n=1/t,i=1/e;this.uniforms.texelSize.value.set(n,i,n*.5,i*.5)}},nv=class extends Zo{constructor({kernelSize:t=Fd.MEDIUM,resolutionScale:e=.5,width:n=Rr.AUTO_SIZE,height:i=Rr.AUTO_SIZE,resolutionX:o=n,resolutionY:l=i}={}){super("KawaseBlurPass"),this.renderTargetA=new V3.WebGLRenderTarget(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const d=this.resolution=new Rr(this,o,l,e);d.addEventListener("change",p=>this.setSize(d.baseWidth,d.baseHeight)),this._blurMaterial=new iI,this._blurMaterial.kernelSize=t,this.copyMaterial=new Ox}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(t){this._blurMaterial=t}get dithering(){return this.copyMaterial.dithering}set dithering(t){this.copyMaterial.dithering=t}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(t){this.blurMaterial.kernelSize=t}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get scale(){return this.blurMaterial.scale}set scale(t){this.blurMaterial.scale=t}getScale(){return this.blurMaterial.scale}setScale(t){this.blurMaterial.scale=t}getKernelSize(){return this.kernelSize}setKernelSize(t){this.kernelSize=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}render(t,e,n,i,o){const l=this.scene,d=this.camera,p=this.renderTargetA,g=this.renderTargetB,v=this.blurMaterial,_=v.kernelSequence;let b=e;this.fullscreenMaterial=v;for(let w=0,E=_.length;w<E;++w){const S=w&1?g:p;v.kernel=_[w],v.inputBuffer=b.texture,t.setRenderTarget(S),t.render(l,d),b=S}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=b.texture,t.setRenderTarget(this.renderToScreen?null:n),t.render(l,d)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e);const i=n.width,o=n.height;this.renderTargetA.setSize(i,o),this.renderTargetB.setSize(i,o),this.blurMaterial.setSize(t,e)}initialize(t,e,n){n!==void 0&&(this.renderTargetA.texture.type=n,this.renderTargetB.texture.type=n,n!==V3.UnsignedByteType?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):t!==null&&t.outputColorSpace===V3.SRGBColorSpace&&(this.renderTargetA.texture.colorSpace=V3.SRGBColorSpace,this.renderTargetB.texture.colorSpace=V3.SRGBColorSpace))}static get AUTO_SIZE(){return Rr.AUTO_SIZE}},Tle=se,k1=se,Jht=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l)*l;
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*clamp(l,0.0,1.0),l);
#else
gl_FragColor=vec4(l);
#endif
}`,rAe=class extends k1.ShaderMaterial{constructor(t=!1,e=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:k1.REVISION.replace(/\D+/g,"")},uniforms:{inputBuffer:new k1.Uniform(null),threshold:new k1.Uniform(0),smoothing:new k1.Uniform(1),range:new k1.Uniform(null)},blending:k1.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Jht,vertexShader:zm}),this.colorOutput=t,this.luminanceRange=e}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get threshold(){return this.uniforms.threshold.value}set threshold(t){this.smoothing>0||t>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=t}getThreshold(){return this.threshold}setThreshold(t){this.threshold=t}get smoothing(){return this.uniforms.smoothing.value}set smoothing(t){this.threshold>0||t>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=t}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(t){this.smoothing=t}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(t){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(t){t?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(t){return this.colorOutput}setColorOutputEnabled(t){this.colorOutput=t}get useRange(){return this.luminanceRange!==null}set useRange(t){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(t){t!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=t,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(t){this.luminanceRange=t}},oK=class extends Zo{constructor({renderTarget:t,luminanceRange:e,colorOutput:n,resolutionScale:i=1,width:o=Rr.AUTO_SIZE,height:l=Rr.AUTO_SIZE,resolutionX:d=o,resolutionY:p=l}={}){super("LuminancePass"),this.fullscreenMaterial=new rAe(n,e),this.needsSwap=!1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new Tle.WebGLRenderTarget(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const g=this.resolution=new Rr(this,d,p,i);g.addEventListener("change",v=>this.setSize(g.baseWidth,g.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(t,e,n,i,o){const l=this.fullscreenMaterial;l.inputBuffer=e.texture,t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height)}initialize(t,e,n){n!==void 0&&n!==Tle.UnsignedByteType&&(this.renderTarget.texture.type=n,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},G3=se,j3=se,ept=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,tpt="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",iAe=class extends j3.ShaderMaterial{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new j3.Uniform(null),texelSize:new j3.Uniform(new j3.Vector2)},blending:j3.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:ept,vertexShader:tpt}),this.fragmentShader=_v(this.fragmentShader)}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},C1=se,npt=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,rpt="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",sAe=class extends C1.ShaderMaterial{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new C1.Uniform(null),supportBuffer:new C1.Uniform(null),texelSize:new C1.Uniform(new C1.Vector2),radius:new C1.Uniform(.85)},blending:C1.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:npt,vertexShader:rpt}),this.fragmentShader=_v(this.fragmentShader)}set inputBuffer(t){this.uniforms.inputBuffer.value=t}set supportBuffer(t){this.uniforms.supportBuffer.value=t}get radius(){return this.uniforms.radius.value}set radius(t){this.uniforms.radius.value=t}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},oAe=class extends Zo{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new G3.WebGLRenderTarget(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new iAe,this.upsamplingMaterial=new sAe,this.resolution=new G3.Vector2}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(t){if(this.levels!==t){const e=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let n=0;n<t;++n){const i=e.clone();i.texture.name="Downsampling.Mipmap"+n,this.downsamplingMipmaps.push(i)}this.upsamplingMipmaps.push(e);for(let n=1,i=t-1;n<i;++n){const o=e.clone();o.texture.name="Upsampling.Mipmap"+n,this.upsamplingMipmaps.push(o)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(t){this.upsamplingMaterial.radius=t}render(t,e,n,i,o){const{scene:l,camera:d}=this,{downsamplingMaterial:p,upsamplingMaterial:g}=this,{downsamplingMipmaps:v,upsamplingMipmaps:_}=this;let b=e;this.fullscreenMaterial=p;for(let w=0,E=v.length;w<E;++w){const S=v[w];p.setSize(b.width,b.height),p.inputBuffer=b.texture,t.setRenderTarget(S),t.render(l,d),b=S}this.fullscreenMaterial=g;for(let w=_.length-1;w>=0;--w){const E=_[w];g.setSize(b.width,b.height),g.inputBuffer=b.texture,g.supportBuffer=v[w].texture,t.setRenderTarget(E),t.render(l,d),b=E}}setSize(t,e){const n=this.resolution;n.set(t,e);let i=n.width,o=n.height;for(let l=0,d=this.downsamplingMipmaps.length;l<d;++l)i=Math.round(i*.5),o=Math.round(o*.5),this.downsamplingMipmaps[l].setSize(i,o),l<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[l].setSize(i,o)}initialize(t,e,n){if(n!==void 0){const i=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const o of i)o.texture.type=n;if(n!==G3.UnsignedByteType)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(t!==null&&t.outputColorSpace===G3.SRGBColorSpace)for(const o of i)o.texture.colorSpace=G3.SRGBColorSpace}}dispose(){super.dispose();for(const t of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))t.dispose()}},P1=se,zi=class extends P1.EventDispatcher{constructor(t,e,{attributes:n=$o.NONE,blendFunction:i=Jn.NORMAL,defines:o=new Map,uniforms:l=new Map,extensions:d=null,vertexShader:p=null}={}){super(),this.name=t,this.renderer=null,this.attributes=n,this.fragmentShader=e,this.vertexShader=p,this.defines=o,this.uniforms=l,this.extensions=d,this.blendMode=new nAe(i),this.blendMode.addEventListener("change",g=>this.setChanged()),this._inputColorSpace=P1.LinearSRGBColorSpace,this._outputColorSpace=P1.NoColorSpace}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(t){this._inputColorSpace=t,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t,this.setChanged()}set mainScene(t){}set mainCamera(t){}getName(){return this.name}setRenderer(t){this.renderer=t}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(t){this.attributes=t,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(t){this.fragmentShader=t,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(t){this.vertexShader=t,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(t,e=P1.BasicDepthPacking){}update(t,e,n){}setSize(t,e){}initialize(t,e,n){}dispose(){for(const t of Object.keys(this)){const e=this[t];(e instanceof P1.WebGLRenderTarget||e instanceof P1.Material||e instanceof P1.Texture||e instanceof Zo)&&this[t].dispose()}}},ipt=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,texel.a);}`,aAe=class extends zi{constructor({blendFunction:t=Jn.SCREEN,luminanceThreshold:e=.9,luminanceSmoothing:n=.025,mipmapBlur:i=!1,intensity:o=1,radius:l=.85,levels:d=8,kernelSize:p=Fd.LARGE,resolutionScale:g=.5,width:v=Rr.AUTO_SIZE,height:_=Rr.AUTO_SIZE,resolutionX:b=v,resolutionY:w=_}={}){super("BloomEffect",ipt,{blendFunction:t,uniforms:new Map([["map",new F3.Uniform(null)],["intensity",new F3.Uniform(o)]])}),this.renderTarget=new F3.WebGLRenderTarget(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new nv({kernelSize:p}),this.luminancePass=new oK({colorOutput:!0}),this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothing=n,this.mipmapBlurPass=new oAe,this.mipmapBlurPass.enabled=i,this.mipmapBlurPass.radius=l,this.mipmapBlurPass.levels=d,this.uniforms.get("map").value=i?this.mipmapBlurPass.texture:this.renderTarget.texture;const E=this.resolution=new Rr(this,b,w,g);E.addEventListener("change",S=>this.setSize(E.baseWidth,E.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get dithering(){return this.blurPass.dithering}set dithering(t){this.blurPass.dithering=t}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(t){this.blurPass.kernelSize=t}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(t){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(t){this.uniforms.get("intensity").value=t}getIntensity(){return this.intensity}setIntensity(t){this.intensity=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}update(t,e,n){const i=this.renderTarget,o=this.luminancePass;o.enabled?(o.render(t,e),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(t,o.renderTarget):this.blurPass.render(t,o.renderTarget,i)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(t,e):this.blurPass.render(t,e,i)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height),this.blurPass.resolution.copy(n),this.luminancePass.setSize(t,e),this.mipmapBlurPass.setSize(t,e)}initialize(t,e,n){this.blurPass.initialize(t,e,n),this.luminancePass.initialize(t,e,n),this.mipmapBlurPass.initialize(t,e,n),n!==void 0&&(this.renderTarget.texture.type=n,t!==null&&t.outputColorSpace===F3.SRGBColorSpace&&(this.renderTarget.texture.colorSpace=F3.SRGBColorSpace))}},qk=se,spt=`uniform float focus;uniform float dof;uniform float aperture;uniform float maxBlur;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec2 aspectCorrection=vec2(1.0,aspect);
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);
#else
float linearDepth=depth;
#endif
float focusNear=clamp(focus-dof,0.0,1.0);float focusFar=clamp(focus+dof,0.0,1.0);float low=step(linearDepth,focusNear);float high=step(focusFar,linearDepth);float factor=(linearDepth-focusNear)*low+(linearDepth-focusFar)*high;vec2 dofBlur=vec2(clamp(factor*aperture,-maxBlur,maxBlur));vec2 dofblur9=dofBlur*0.9;vec2 dofblur7=dofBlur*0.7;vec2 dofblur4=dofBlur*0.4;vec4 color=inputColor;color+=texture2D(inputBuffer,uv+(vec2(0.0,0.4)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.15,0.37)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.29,0.29)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.37,0.15)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.40,0.0)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.37,-0.15)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.29,-0.29)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.15,-0.37)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.0,-0.4)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.15,0.37)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.29,0.29)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.37,0.15)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.4,0.0)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.37,-0.15)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.29,-0.29)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.15,-0.37)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.15,0.37)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(-0.37,0.15)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(0.37,-0.15)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(-0.15,-0.37)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(-0.15,0.37)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(0.37,0.15)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(-0.37,-0.15)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(0.15,-0.37)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(0.29,0.29)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.40,0.0)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.29,-0.29)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.0,-0.4)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(-0.29,0.29)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(-0.4,0.0)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(-0.29,-0.29)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.0,0.4)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.29,0.29)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(0.4,0.0)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(0.29,-0.29)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(0.0,-0.4)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(-0.29,0.29)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(-0.4,0.0)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(-0.29,-0.29)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(0.0,0.4)*aspectCorrection)*dofblur4);outputColor=color/41.0;}`,opt=class extends zi{constructor({blendFunction:t,focus:e=.5,dof:n=.02,aperture:i=.015,maxBlur:o=1}={}){super("BokehEffect",spt,{blendFunction:t,attributes:$o.CONVOLUTION|$o.DEPTH,uniforms:new Map([["focus",new qk.Uniform(e)],["dof",new qk.Uniform(n)],["aperture",new qk.Uniform(i)],["maxBlur",new qk.Uniform(o)]])})}},FV=se,apt="uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(color+vec3(0.5),inputColor.a);}",lpt=class extends zi{constructor({blendFunction:t=Jn.SRC,brightness:e=0,contrast:n=0}={}){super("BrightnessContrastEffect",apt,{blendFunction:t,uniforms:new Map([["brightness",new FV.Uniform(e)],["contrast",new FV.Uniform(n)]])}),this.inputColorSpace=FV.SRGBColorSpace}get brightness(){return this.uniforms.get("brightness").value}set brightness(t){this.uniforms.get("brightness").value=t}getBrightness(){return this.brightness}setBrightness(t){this.brightness=t}get contrast(){return this.uniforms.get("contrast").value}set contrast(t){this.uniforms.get("contrast").value=t}getContrast(){return this.contrast}setContrast(t){this.contrast=t}},cpt="void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(vec3(average(inputColor.rgb)),inputColor.a);}",upt=class extends zi{constructor(t){super("ColorAverageEffect",cpt,{blendFunction:t})}},fpt=se,dpt="uniform float factor;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(floor(inputColor.rgb*factor+0.5)/factor,inputColor.a);}",hpt=class extends zi{constructor({blendFunction:t,bits:e=16}={}){super("ColorDepthEffect",dpt,{blendFunction:t,uniforms:new Map([["factor",new fpt.Uniform(1)]])}),this.bits=0,this.bitDepth=e}get bitDepth(){return this.bits}set bitDepth(t){this.bits=t,this.uniforms.get("factor").value=Math.pow(2,t/3)}getBitDepth(){return this.bitDepth}setBitDepth(t){this.bitDepth=t}},VV=se,ppt=`#ifdef RADIAL_MODULATION
uniform float modulationOffset;
#endif
varying float vActive;varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=inputColor.ra;vec2 ba=inputColor.ba;
#ifdef RADIAL_MODULATION
const vec2 center=vec2(0.5);float d=distance(uv,center)*2.0;d=max(d-modulationOffset,0.0);if(vActive>0.0&&d>0.0){ra=texture2D(inputBuffer,mix(uv,vUvR,d)).ra;ba=texture2D(inputBuffer,mix(uv,vUvB,d)).ba;}
#else
if(vActive>0.0){ra=texture2D(inputBuffer,vUvR).ra;ba=texture2D(inputBuffer,vUvB).ba;}
#endif
outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}`,mpt="uniform vec2 offset;varying float vActive;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vActive=(shift.x!=0.0||shift.y!=0.0)?1.0:0.0;vUvR=uv+shift;vUvB=uv-shift;}",gpt=class extends zi{constructor({offset:t=new VV.Vector2(.001,5e-4),radialModulation:e=!1,modulationOffset:n=.15}={}){super("ChromaticAberrationEffect",ppt,{vertexShader:mpt,attributes:$o.CONVOLUTION,uniforms:new Map([["offset",new VV.Uniform(t)],["modulationOffset",new VV.Uniform(n)]])}),this.radialModulation=e}get offset(){return this.uniforms.get("offset").value}set offset(t){this.uniforms.get("offset").value=t}get radialModulation(){return this.defines.has("RADIAL_MODULATION")}set radialModulation(t){t?this.defines.set("RADIAL_MODULATION","1"):this.defines.delete("RADIAL_MODULATION"),this.setChanged()}get modulationOffset(){return this.uniforms.get("modulationOffset").value}set modulationOffset(t){this.uniforms.get("modulationOffset").value=t}getOffset(){return this.offset}setOffset(t){this.offset=t}},vpt=`void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){
#ifdef INVERTED
vec3 color=vec3(1.0-depth);
#else
vec3 color=vec3(depth);
#endif
outputColor=vec4(color,inputColor.a);}`,_pt=class extends zi{constructor({blendFunction:t=Jn.SRC,inverted:e=!1}={}){super("DepthEffect",vpt,{blendFunction:t,attributes:$o.DEPTH}),this.inverted=e}get inverted(){return this.defines.has("INVERTED")}set inverted(t){this.inverted!==t&&(t?this.defines.set("INVERTED","1"):this.defines.delete("INVERTED"),this.setChanged())}isInverted(){return this.inverted}setInverted(t){this.inverted=t}},su=se,Rg={RED:0,GREEN:1,BLUE:2,ALPHA:3},aK={DISCARD:0,MULTIPLY:1,MULTIPLY_RGB_SET_ALPHA:2,MULTIPLY_RGB:3},fh=se,ypt=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if PASS == 1
uniform vec4 kernel64[32];
#else
uniform vec4 kernel16[8];
#endif
uniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;varying vec2 vUv;void main(){
#ifdef FOREGROUND
vec2 cocNearFar=texture2D(cocBuffer,vUv).rg*scale;float coc=cocNearFar.x;
#else
float coc=texture2D(cocBuffer,vUv).g*scale;
#endif
if(coc==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{
#ifdef FOREGROUND
vec2 step=texelSize*max(cocNearFar.x,cocNearFar.y);
#else
vec2 step=texelSize*coc;
#endif
#if PASS == 1
vec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;
#else
vec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<8;++i){vec4 kernel=kernel16[i];vec2 uv=step*kernel.xy+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);uv=step*kernel.zw+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;
#endif
}}`,KE=class extends fh.ShaderMaterial{constructor(t=!1,e=!1){super({name:"BokehMaterial",defines:{PASS:t?"2":"1"},uniforms:{inputBuffer:new fh.Uniform(null),cocBuffer:new fh.Uniform(null),texelSize:new fh.Uniform(new fh.Vector2),kernel64:new fh.Uniform(null),kernel16:new fh.Uniform(null),scale:new fh.Uniform(1)},blending:fh.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:ypt,vertexShader:zm}),e&&(this.defines.FOREGROUND="1"),this.generateKernel()}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}set cocBuffer(t){this.uniforms.cocBuffer.value=t}setCoCBuffer(t){this.uniforms.cocBuffer.value=t}get scale(){return this.uniforms.scale.value}set scale(t){this.uniforms.scale.value=t}getScale(t){return this.scale}setScale(t){this.scale=t}generateKernel(){const t=2.39996323,e=new Float64Array(128),n=new Float64Array(32);let i=0,o=0;for(let l=0,d=Math.sqrt(80);l<80;++l){const p=l*t,g=Math.sqrt(l)/d,v=g*Math.cos(p),_=g*Math.sin(p);l%5===0?(n[o++]=v,n[o++]=_):(e[i++]=v,e[i++]=_)}this.uniforms.kernel64.value=e,this.uniforms.kernel16.value=n}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e)}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},dh=se;function Dg(t,e,n){return t*(e-n)-e}function j2(t,e,n){return Math.min(Math.max((t+e)/(e-n),0),1)}var bpt=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
float depth=unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
float depth=texture2D(depthBuffer,uv).r;
#endif
#ifdef LOG_DEPTH
float d=pow(2.0,depth*log2(cameraFar+1.0))-1.0;float a=cameraFar/(cameraFar-cameraNear);float b=cameraFar*cameraNear/(cameraNear-cameraFar);depth=a+b/d;
#endif
return depth;}void main(){float depth=readDepth(vUv);
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);
#else
float linearDepth=depth;
#endif
float signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}`,lAe=class extends dh.ShaderMaterial{constructor(t){super({name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new dh.Uniform(null),focusDistance:new dh.Uniform(0),focusRange:new dh.Uniform(0),cameraNear:new dh.Uniform(.3),cameraFar:new dh.Uniform(1e3)},blending:dh.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:bpt,vertexShader:zm}),this.uniforms.focalLength=this.uniforms.focusRange,this.copyCameraSettings(t)}get near(){return this.uniforms.cameraNear.value}get far(){return this.uniforms.cameraFar.value}set depthBuffer(t){this.uniforms.depthBuffer.value=t}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=dh.BasicDepthPacking){this.depthBuffer=t,this.depthPacking=e}get focusDistance(){return this.uniforms.focusDistance.value}set focusDistance(t){this.uniforms.focusDistance.value=t}get worldFocusDistance(){return-Dg(this.focusDistance,this.near,this.far)}set worldFocusDistance(t){this.focusDistance=j2(-t,this.near,this.far)}getFocusDistance(t){this.uniforms.focusDistance.value=t}setFocusDistance(t){this.uniforms.focusDistance.value=t}get focalLength(){return this.focusRange}set focalLength(t){this.focusRange=t}get focusRange(){return this.uniforms.focusRange.value}set focusRange(t){this.uniforms.focusRange.value=t}get worldFocusRange(){return-Dg(this.focusRange,this.near,this.far)}set worldFocusRange(t){this.focusRange=j2(-t,this.near,this.far)}getFocalLength(t){return this.focusRange}setFocalLength(t){this.focusRange=t}adoptCameraSettings(t){this.copyCameraSettings(t)}copyCameraSettings(t){t&&(this.uniforms.cameraNear.value=t.near,this.uniforms.cameraFar.value=t.far,t instanceof dh.PerspectiveCamera?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},G_=se,Apt=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef MASK_PRECISION_HIGH
uniform mediump sampler2D maskTexture;
#else
uniform lowp sampler2D maskTexture;
#endif
#if MASK_FUNCTION != 0
uniform float strength;
#endif
varying vec2 vUv;void main(){
#if COLOR_CHANNEL == 0
float mask=texture2D(maskTexture,vUv).r;
#elif COLOR_CHANNEL == 1
float mask=texture2D(maskTexture,vUv).g;
#elif COLOR_CHANNEL == 2
float mask=texture2D(maskTexture,vUv).b;
#else
float mask=texture2D(maskTexture,vUv).a;
#endif
#if MASK_FUNCTION == 0
#ifdef INVERTED
mask=step(mask,0.0);
#else
mask=1.0-step(mask,0.0);
#endif
#else
mask=clamp(mask*strength,0.0,1.0);
#ifdef INVERTED
mask=1.0-mask;
#endif
#endif
#if MASK_FUNCTION == 3
vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=vec4(mask*texel.rgb,texel.a);
#elif MASK_FUNCTION == 2
gl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);
#else
gl_FragColor=mask*texture2D(inputBuffer,vUv);
#endif
}`,cAe=class extends G_.ShaderMaterial{constructor(t=null){super({name:"MaskMaterial",uniforms:{maskTexture:new G_.Uniform(t),inputBuffer:new G_.Uniform(null),strength:new G_.Uniform(1)},blending:G_.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Apt,vertexShader:zm}),this.colorChannel=Rg.RED,this.maskFunction=aK.DISCARD}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}set maskTexture(t){this.uniforms.maskTexture.value=t,delete this.defines.MASK_PRECISION_HIGH,t.type!==G_.UnsignedByteType&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}setMaskTexture(t){this.maskTexture=t}set colorChannel(t){this.defines.COLOR_CHANNEL=t.toFixed(0),this.needsUpdate=!0}setColorChannel(t){this.colorChannel=t}set maskFunction(t){this.defines.MASK_FUNCTION=t.toFixed(0),this.needsUpdate=!0}setMaskFunction(t){this.maskFunction=t}get inverted(){return this.defines.INVERTED!==void 0}set inverted(t){this.inverted&&!t?delete this.defines.INVERTED:t&&(this.defines.INVERTED="1"),this.needsUpdate=!0}isInverted(){return this.inverted}setInverted(t){this.inverted=t}get strength(){return this.uniforms.strength.value}set strength(t){this.uniforms.strength.value=t}getStrength(){return this.strength}setStrength(t){this.strength=t}},wpt=se,Rc=class extends Zo{constructor(t,e="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=t,this.input=e}setInput(t){this.input=t}render(t,e,n,i,o){const l=this.fullscreenMaterial.uniforms;e!==null&&l!==void 0&&l[this.input]!==void 0&&(l[this.input].value=e.texture),t.setRenderTarget(this.renderToScreen?null:n),t.render(this.scene,this.camera)}initialize(t,e,n){n!==void 0&&n!==wpt.UnsignedByteType&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},Ept=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;
#else
uniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;
#endif
uniform lowp sampler2D nearCoCBuffer;uniform lowp sampler2D farCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);
#if MASK_FUNCTION == 1
vec2 cocNearFar=vec2(texture2D(nearCoCBuffer,uv).r,colorFar.a);cocNearFar.x=min(cocNearFar.x*scale,1.0);
#else
vec2 cocNearFar=vec2(texture2D(nearCoCBuffer,uv).r,texture2D(farCoCBuffer,uv).g);cocNearFar=min(cocNearFar*scale,1.0);
#endif
vec4 result=inputColor*(1.0-cocNearFar.y)+colorFar;result=mix(result,colorNear,cocNearFar.x);outputColor=result;}`,Spt=class extends zi{constructor(t,{blendFunction:e,worldFocusDistance:n,worldFocusRange:i,focusDistance:o=0,focalLength:l=.1,focusRange:d=l,bokehScale:p=1,resolutionScale:g=1,width:v=Rr.AUTO_SIZE,height:_=Rr.AUTO_SIZE,resolutionX:b=v,resolutionY:w=_}={}){super("DepthOfFieldEffect",Ept,{blendFunction:e,attributes:$o.DEPTH,uniforms:new Map([["nearColorBuffer",new su.Uniform(null)],["farColorBuffer",new su.Uniform(null)],["nearCoCBuffer",new su.Uniform(null)],["farCoCBuffer",new su.Uniform(null)],["scale",new su.Uniform(1)]])}),this.camera=t,this.renderTarget=new su.WebGLRenderTarget(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.name="DoF.CoC",this.uniforms.get("farCoCBuffer").value=this.renderTargetCoC.texture,this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new Rc(new lAe(t));const E=this.cocMaterial;E.focusDistance=o,E.focusRange=d,n!==void 0&&(E.worldFocusDistance=n),i!==void 0&&(E.worldFocusRange=i),this.blurPass=new nv({resolutionScale:g,resolutionX:b,resolutionY:w,kernelSize:Fd.MEDIUM}),this.maskPass=new Rc(new cAe(this.renderTargetCoC.texture));const S=this.maskPass.fullscreenMaterial;S.colorChannel=Rg.GREEN,this.maskFunction=aK.MULTIPLY_RGB,this.bokehNearBasePass=new Rc(new KE(!1,!0)),this.bokehNearBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehNearFillPass=new Rc(new KE(!0,!0)),this.bokehNearFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehFarBasePass=new Rc(new KE(!1,!1)),this.bokehFarBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.bokehFarFillPass=new Rc(new KE(!0,!1)),this.bokehFarFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.target=null;const M=this.resolution=new Rr(this,b,w,g);M.addEventListener("change",k=>this.setSize(M.baseWidth,M.baseHeight)),this.bokehScale=p}set mainCamera(t){this.camera=t,this.cocMaterial.copyCameraSettings(t)}get cocTexture(){return this.renderTargetCoC.texture}get maskFunction(){return this.maskPass.fullscreenMaterial.maskFunction}set maskFunction(t){this.maskFunction!==t&&(this.defines.set("MASK_FUNCTION",t.toFixed(0)),this.maskPass.fullscreenMaterial.maskFunction=t,this.setChanged())}get cocMaterial(){return this.cocPass.fullscreenMaterial}get circleOfConfusionMaterial(){return this.cocMaterial}getCircleOfConfusionMaterial(){return this.cocMaterial}getBlurPass(){return this.blurPass}getResolution(){return this.resolution}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(t){this.bokehNearBasePass.fullscreenMaterial.scale=t,this.bokehNearFillPass.fullscreenMaterial.scale=t,this.bokehFarBasePass.fullscreenMaterial.scale=t,this.bokehFarFillPass.fullscreenMaterial.scale=t,this.maskPass.fullscreenMaterial.strength=t,this.uniforms.get("scale").value=t}getBokehScale(){return this.bokehScale}setBokehScale(t){this.bokehScale=t}getTarget(){return this.target}setTarget(t){this.target=t}calculateFocusDistance(t){const e=this.camera,n=e.position.distanceTo(t);return j2(-n,e.near,e.far)}setDepthTexture(t,e=su.BasicDepthPacking){this.cocMaterial.depthBuffer=t,this.cocMaterial.depthPacking=e}update(t,e,n){const i=this.renderTarget,o=this.renderTargetCoC,l=this.renderTargetCoCBlurred,d=this.renderTargetMasked;if(this.target!==null){const p=this.calculateFocusDistance(this.target);this.cocMaterial.focusDistance=p}this.cocPass.render(t,null,o),this.blurPass.render(t,o,l),this.maskPass.render(t,e,d),this.bokehFarBasePass.render(t,d,i),this.bokehFarFillPass.render(t,i,this.renderTargetFar),this.bokehNearBasePass.render(t,e,i),this.bokehNearFillPass.render(t,i,this.renderTargetNear)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e);const i=n.width,o=n.height;this.cocPass.setSize(t,e),this.blurPass.setSize(t,e),this.maskPass.setSize(t,e),this.renderTargetFar.setSize(t,e),this.renderTargetCoC.setSize(t,e),this.renderTargetMasked.setSize(t,e),this.renderTarget.setSize(i,o),this.renderTargetNear.setSize(i,o),this.renderTargetCoCBlurred.setSize(i,o),this.bokehNearBasePass.fullscreenMaterial.setSize(t,e),this.bokehNearFillPass.fullscreenMaterial.setSize(t,e),this.bokehFarBasePass.fullscreenMaterial.setSize(t,e),this.bokehFarFillPass.fullscreenMaterial.setSize(t,e)}initialize(t,e,n){this.cocPass.initialize(t,e,n),this.maskPass.initialize(t,e,n),this.bokehNearBasePass.initialize(t,e,n),this.bokehNearFillPass.initialize(t,e,n),this.bokehFarBasePass.initialize(t,e,n),this.bokehFarFillPass.initialize(t,e,n),this.blurPass.initialize(t,e,su.UnsignedByteType),t.capabilities.logarithmicDepthBuffer&&(this.cocPass.fullscreenMaterial.defines.LOG_DEPTH="1"),n!==void 0&&(this.renderTarget.texture.type=n,this.renderTargetNear.texture.type=n,this.renderTargetFar.texture.type=n,this.renderTargetMasked.texture.type=n,t!==null&&t.outputColorSpace===su.SRGBColorSpace&&(this.renderTarget.texture.colorSpace=su.SRGBColorSpace,this.renderTargetNear.texture.colorSpace=su.SRGBColorSpace,this.renderTargetFar.texture.colorSpace=su.SRGBColorSpace,this.renderTargetMasked.texture.colorSpace=su.SRGBColorSpace))}},GV=se,Tpt="uniform vec2 angle;uniform float scale;float pattern(const in vec2 uv){vec2 point=scale*vec2(dot(angle.yx,vec2(uv.x,-uv.y)),dot(angle,uv));return(sin(point.x)*sin(point.y))*4.0;}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(inputColor.rgb*10.0-5.0+pattern(uv*resolution));outputColor=vec4(color,inputColor.a);}",xpt=class extends zi{constructor({blendFunction:t,angle:e=Math.PI*.5,scale:n=1}={}){super("DotScreenEffect",Tpt,{blendFunction:t,uniforms:new Map([["angle",new GV.Uniform(new GV.Vector2)],["scale",new GV.Uniform(n)]])}),this.angle=e}get angle(){return Math.acos(this.uniforms.get("angle").value.y)}set angle(t){this.uniforms.get("angle").value.set(Math.sin(t),Math.cos(t))}getAngle(){return this.angle}setAngle(t){this.angle=t}get scale(){return this.uniforms.get("scale").value}set scale(t){this.uniforms.get("scale").value=t}},Mpt=`#define QUALITY(q) ((q) < 5 ? 1.0 : ((q) > 5 ? ((q) < 10 ? 2.0 : ((q) < 11 ? 4.0 : 8.0)) : 1.5))
#define ONE_OVER_TWELVE 0.08333333333333333
varying vec2 vUvDown;varying vec2 vUvUp;varying vec2 vUvLeft;varying vec2 vUvRight;varying vec2 vUvDownLeft;varying vec2 vUvUpRight;varying vec2 vUvUpLeft;varying vec2 vUvDownRight;vec4 fxaa(const in vec4 inputColor,const in vec2 uv){float lumaCenter=luminance(inputColor.rgb);float lumaDown=luminance(texture2D(inputBuffer,vUvDown).rgb);float lumaUp=luminance(texture2D(inputBuffer,vUvUp).rgb);float lumaLeft=luminance(texture2D(inputBuffer,vUvLeft).rgb);float lumaRight=luminance(texture2D(inputBuffer,vUvRight).rgb);float lumaMin=min(lumaCenter,min(min(lumaDown,lumaUp),min(lumaLeft,lumaRight)));float lumaMax=max(lumaCenter,max(max(lumaDown,lumaUp),max(lumaLeft,lumaRight)));float lumaRange=lumaMax-lumaMin;if(lumaRange<max(EDGE_THRESHOLD_MIN,lumaMax*EDGE_THRESHOLD_MAX)){return inputColor;}float lumaDownLeft=luminance(texture2D(inputBuffer,vUvDownLeft).rgb);float lumaUpRight=luminance(texture2D(inputBuffer,vUvUpRight).rgb);float lumaUpLeft=luminance(texture2D(inputBuffer,vUvUpLeft).rgb);float lumaDownRight=luminance(texture2D(inputBuffer,vUvDownRight).rgb);float lumaDownUp=lumaDown+lumaUp;float lumaLeftRight=lumaLeft+lumaRight;float lumaLeftCorners=lumaDownLeft+lumaUpLeft;float lumaDownCorners=lumaDownLeft+lumaDownRight;float lumaRightCorners=lumaDownRight+lumaUpRight;float lumaUpCorners=lumaUpRight+lumaUpLeft;float edgeHorizontal=(abs(-2.0*lumaLeft+lumaLeftCorners)+abs(-2.0*lumaCenter+lumaDownUp)*2.0+abs(-2.0*lumaRight+lumaRightCorners));float edgeVertical=(abs(-2.0*lumaUp+lumaUpCorners)+abs(-2.0*lumaCenter+lumaLeftRight)*2.0+abs(-2.0*lumaDown+lumaDownCorners));bool isHorizontal=(edgeHorizontal>=edgeVertical);float stepLength=isHorizontal?texelSize.y:texelSize.x;float luma1=isHorizontal?lumaDown:lumaLeft;float luma2=isHorizontal?lumaUp:lumaRight;float gradient1=abs(luma1-lumaCenter);float gradient2=abs(luma2-lumaCenter);bool is1Steepest=gradient1>=gradient2;float gradientScaled=0.25*max(gradient1,gradient2);float lumaLocalAverage=0.0;if(is1Steepest){stepLength=-stepLength;lumaLocalAverage=0.5*(luma1+lumaCenter);}else{lumaLocalAverage=0.5*(luma2+lumaCenter);}vec2 currentUv=uv;if(isHorizontal){currentUv.y+=stepLength*0.5;}else{currentUv.x+=stepLength*0.5;}vec2 offset=isHorizontal?vec2(texelSize.x,0.0):vec2(0.0,texelSize.y);vec2 uv1=currentUv-offset*QUALITY(0);vec2 uv2=currentUv+offset*QUALITY(0);float lumaEnd1=luminance(texture2D(inputBuffer,uv1).rgb);float lumaEnd2=luminance(texture2D(inputBuffer,uv2).rgb);lumaEnd1-=lumaLocalAverage;lumaEnd2-=lumaLocalAverage;bool reached1=abs(lumaEnd1)>=gradientScaled;bool reached2=abs(lumaEnd2)>=gradientScaled;bool reachedBoth=reached1&&reached2;if(!reached1){uv1-=offset*QUALITY(1);}if(!reached2){uv2+=offset*QUALITY(1);}if(!reachedBoth){for(int i=2;i<SAMPLES;++i){if(!reached1){lumaEnd1=luminance(texture2D(inputBuffer,uv1).rgb);lumaEnd1=lumaEnd1-lumaLocalAverage;}if(!reached2){lumaEnd2=luminance(texture2D(inputBuffer,uv2).rgb);lumaEnd2=lumaEnd2-lumaLocalAverage;}reached1=abs(lumaEnd1)>=gradientScaled;reached2=abs(lumaEnd2)>=gradientScaled;reachedBoth=reached1&&reached2;if(!reached1){uv1-=offset*QUALITY(i);}if(!reached2){uv2+=offset*QUALITY(i);}if(reachedBoth){break;}}}float distance1=isHorizontal?(uv.x-uv1.x):(uv.y-uv1.y);float distance2=isHorizontal?(uv2.x-uv.x):(uv2.y-uv.y);bool isDirection1=distance1<distance2;float distanceFinal=min(distance1,distance2);float edgeThickness=(distance1+distance2);bool isLumaCenterSmaller=lumaCenter<lumaLocalAverage;bool correctVariation1=(lumaEnd1<0.0)!=isLumaCenterSmaller;bool correctVariation2=(lumaEnd2<0.0)!=isLumaCenterSmaller;bool correctVariation=isDirection1?correctVariation1:correctVariation2;float pixelOffset=-distanceFinal/edgeThickness+0.5;float finalOffset=correctVariation?pixelOffset:0.0;float lumaAverage=ONE_OVER_TWELVE*(2.0*(lumaDownUp+lumaLeftRight)+lumaLeftCorners+lumaRightCorners);float subPixelOffset1=clamp(abs(lumaAverage-lumaCenter)/lumaRange,0.0,1.0);float subPixelOffset2=(-2.0*subPixelOffset1+3.0)*subPixelOffset1*subPixelOffset1;float subPixelOffsetFinal=subPixelOffset2*subPixelOffset2*SUBPIXEL_QUALITY;finalOffset=max(finalOffset,subPixelOffsetFinal);vec2 finalUv=uv;if(isHorizontal){finalUv.y+=finalOffset*stepLength;}else{finalUv.x+=finalOffset*stepLength;}return texture2D(inputBuffer,finalUv);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=fxaa(inputColor,uv);}`,kpt="varying vec2 vUvDown;varying vec2 vUvUp;varying vec2 vUvLeft;varying vec2 vUvRight;varying vec2 vUvDownLeft;varying vec2 vUvUpRight;varying vec2 vUvUpLeft;varying vec2 vUvDownRight;void mainSupport(const in vec2 uv){vUvDown=uv+vec2(0.0,-1.0)*texelSize;vUvUp=uv+vec2(0.0,1.0)*texelSize;vUvRight=uv+vec2(1.0,0.0)*texelSize;vUvLeft=uv+vec2(-1.0,0.0)*texelSize;vUvDownLeft=uv+vec2(-1.0,-1.0)*texelSize;vUvUpRight=uv+vec2(1.0,1.0)*texelSize;vUvUpLeft=uv+vec2(-1.0,1.0)*texelSize;vUvDownRight=uv+vec2(1.0,-1.0)*texelSize;}",Cpt=class extends zi{constructor({blendFunction:t=Jn.SRC}={}){super("FXAAEffect",Mpt,{vertexShader:kpt,blendFunction:t,defines:new Map([["EDGE_THRESHOLD_MIN","0.0312"],["EDGE_THRESHOLD_MAX","0.125"],["SUBPIXEL_QUALITY","0.75"],["SAMPLES","12"]])})}get minEdgeThreshold(){return Number(this.defines.get("EDGE_THRESHOLD_MIN"))}set minEdgeThreshold(t){this.defines.set("EDGE_THRESHOLD_MIN",t.toFixed(12)),this.setChanged()}get maxEdgeThreshold(){return Number(this.defines.get("EDGE_THRESHOLD_MAX"))}set maxEdgeThreshold(t){this.defines.set("EDGE_THRESHOLD_MAX",t.toFixed(12)),this.setChanged()}get subpixelQuality(){return Number(this.defines.get("SUBPIXEL_QUALITY"))}set subpixelQuality(t){this.defines.set("SUBPIXEL_QUALITY",t.toFixed(12)),this.setChanged()}get samples(){return Number(this.defines.get("SAMPLES"))}set samples(t){this.defines.set("SAMPLES",t.toFixed(0)),this.setChanged()}},Ppt=se,Rpt="uniform float gamma;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=LinearToGamma(max(inputColor,0.0),gamma);}",Dpt=class extends zi{constructor({blendFunction:t=Jn.SRC,gamma:e=2}={}){super("GammaCorrectionEffect",Rpt,{blendFunction:t,uniforms:new Map([["gamma",new Ppt.Uniform(e)]])})}},vl=se,Ey={DISABLED:0,SPORADIC:1,CONSTANT_MILD:2,CONSTANT_WILD:3},z2=se;function Opt(t,e,n){const i=new Map([[z2.LuminanceFormat,1],[z2.RedFormat,1],[z2.RGFormat,2],[z2.RGBAFormat,4]]);let o;if(i.has(e)||console.error("Invalid noise texture format"),n===z2.UnsignedByteType){o=new Uint8Array(t*i.get(e));for(let l=0,d=o.length;l<d;++l)o[l]=Math.random()*255+.5}else{o=new Float32Array(t*i.get(e));for(let l=0,d=o.length;l<d;++l)o[l]=Math.random()}return o}var sI=class extends z2.DataTexture{constructor(t,e,n=z2.LuminanceFormat,i=z2.UnsignedByteType){super(Opt(t*e,n,i),t,e,n,i),this.needsUpdate=!0}},Ipt="uniform lowp sampler2D perturbationMap;uniform bool active;uniform float columns;uniform float random;uniform vec2 seeds;uniform vec2 distortion;void mainUv(inout vec2 uv){if(active){if(uv.y<distortion.x+columns&&uv.y>distortion.x-columns*random){float sx=clamp(ceil(seeds.x),0.0,1.0);uv.y=sx*(1.0-(uv.y+distortion.y))+(1.0-sx)*distortion.y;}if(uv.x<distortion.y+columns&&uv.x>distortion.y-columns*random){float sy=clamp(ceil(seeds.y),0.0,1.0);uv.x=sy*distortion.x+(1.0-sy)*(1.0-(uv.x+distortion.x));}vec2 normal=texture2D(perturbationMap,uv*random*random).rg;uv+=normal*seeds*(random*0.2);}}",Xk="Glitch.Generated";function yc(t,e){return t+Math.random()*(e-t)}var Npt=class extends zi{constructor({chromaticAberrationOffset:t=null,delay:e=new vl.Vector2(1.5,3.5),duration:n=new vl.Vector2(.6,1),strength:i=new vl.Vector2(.3,1),columns:o=.05,ratio:l=.85,perturbationMap:d=null,dtSize:p=64}={}){if(super("GlitchEffect",Ipt,{uniforms:new Map([["perturbationMap",new vl.Uniform(null)],["columns",new vl.Uniform(o)],["active",new vl.Uniform(!1)],["random",new vl.Uniform(1)],["seeds",new vl.Uniform(new vl.Vector2)],["distortion",new vl.Uniform(new vl.Vector2)]])}),d===null){const g=new sI(p,p,vl.RGBAFormat);g.name=Xk,this.perturbationMap=g}else this.perturbationMap=d;this.time=0,this.distortion=this.uniforms.get("distortion").value,this.delay=e,this.duration=n,this.breakPoint=new vl.Vector2(yc(this.delay.x,this.delay.y),yc(this.duration.x,this.duration.y)),this.strength=i,this.mode=Ey.SPORADIC,this.ratio=l,this.chromaticAberrationOffset=t}get seeds(){return this.uniforms.get("seeds").value}get active(){return this.uniforms.get("active").value}isActive(){return this.active}get minDelay(){return this.delay.x}set minDelay(t){this.delay.x=t}getMinDelay(){return this.delay.x}setMinDelay(t){this.delay.x=t}get maxDelay(){return this.delay.y}set maxDelay(t){this.delay.y=t}getMaxDelay(){return this.delay.y}setMaxDelay(t){this.delay.y=t}get minDuration(){return this.duration.x}set minDuration(t){this.duration.x=t}getMinDuration(){return this.duration.x}setMinDuration(t){this.duration.x=t}get maxDuration(){return this.duration.y}set maxDuration(t){this.duration.y=t}getMaxDuration(){return this.duration.y}setMaxDuration(t){this.duration.y=t}get minStrength(){return this.strength.x}set minStrength(t){this.strength.x=t}getMinStrength(){return this.strength.x}setMinStrength(t){this.strength.x=t}get maxStrength(){return this.strength.y}set maxStrength(t){this.strength.y=t}getMaxStrength(){return this.strength.y}setMaxStrength(t){this.strength.y=t}getMode(){return this.mode}setMode(t){this.mode=t}getGlitchRatio(){return 1-this.ratio}setGlitchRatio(t){this.ratio=Math.min(Math.max(1-t,0),1)}get columns(){return this.uniforms.get("columns").value}set columns(t){this.uniforms.get("columns").value=t}getGlitchColumns(){return this.columns}setGlitchColumns(t){this.columns=t}getChromaticAberrationOffset(){return this.chromaticAberrationOffset}setChromaticAberrationOffset(t){this.chromaticAberrationOffset=t}get perturbationMap(){return this.uniforms.get("perturbationMap").value}set perturbationMap(t){const e=this.perturbationMap;e!==null&&e.name===Xk&&e.dispose(),t.minFilter=t.magFilter=vl.NearestFilter,t.wrapS=t.wrapT=vl.RepeatWrapping,t.generateMipmaps=!1,this.uniforms.get("perturbationMap").value=t}getPerturbationMap(){return this.perturbationMap}setPerturbationMap(t){this.perturbationMap=t}generatePerturbationMap(t=64){const e=new sI(t,t,vl.RGBAFormat);return e.name=Xk,e}update(t,e,n){const i=this.mode,o=this.breakPoint,l=this.chromaticAberrationOffset,d=this.strength;let p=this.time,g=!1,v=0,_=0,b;i!==Ey.DISABLED&&(i===Ey.SPORADIC&&(p+=n,b=p>o.x,p>=o.x+o.y&&(o.set(yc(this.delay.x,this.delay.y),yc(this.duration.x,this.duration.y)),p=0)),v=Math.random(),this.uniforms.get("random").value=v,b&&v>this.ratio||i===Ey.CONSTANT_WILD?(g=!0,v*=d.y*.03,_=yc(-Math.PI,Math.PI),this.seeds.set(yc(-d.y,d.y),yc(-d.y,d.y)),this.distortion.set(yc(0,1),yc(0,1))):(b||i===Ey.CONSTANT_MILD)&&(g=!0,v*=d.x*.03,_=yc(-Math.PI,Math.PI),this.seeds.set(yc(-d.x,d.x),yc(-d.x,d.x)),this.distortion.set(yc(0,1),yc(0,1))),this.time=p),l!==null&&(g?l.set(Math.cos(_),Math.sin(_)).multiplyScalar(v):l.set(0,0)),this.uniforms.get("active").value=g}dispose(){const t=this.perturbationMap;t!==null&&t.name===Xk&&t.dispose()}},Wl=se,na=se,xb={DEFAULT:0,KEEP_MAX_DEPTH:1,DISCARD_MAX_DEPTH:2},Lpt=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer0;uniform highp sampler2D depthBuffer1;
#else
uniform mediump sampler2D depthBuffer0;uniform mediump sampler2D depthBuffer1;
#endif
uniform sampler2D inputBuffer;uniform vec2 cameraNearFar;float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);
#else
return orthographicDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);
#endif
}varying vec2 vUv;void main(){vec2 depth;
#if DEPTH_PACKING_0 == 3201
depth.x=unpackRGBAToDepth(texture2D(depthBuffer0,vUv));
#else
depth.x=texture2D(depthBuffer0,vUv).r;
#ifdef LOG_DEPTH
float d=pow(2.0,depth.x*log2(cameraNearFar.y+1.0))-1.0;float a=cameraNearFar.y/(cameraNearFar.y-cameraNearFar.x);float b=cameraNearFar.y*cameraNearFar.x/(cameraNearFar.x-cameraNearFar.y);depth.x=a+b/d;
#endif
#endif
#if DEPTH_PACKING_1 == 3201
depth.y=unpackRGBAToDepth(texture2D(depthBuffer1,vUv));
#else
depth.y=texture2D(depthBuffer1,vUv).r;
#ifdef LOG_DEPTH
float d=pow(2.0,depth.y*log2(cameraNearFar.y+1.0))-1.0;float a=cameraNearFar.y/(cameraNearFar.y-cameraNearFar.x);float b=cameraNearFar.y*cameraNearFar.x/(cameraNearFar.x-cameraNearFar.y);depth.y=a+b/d;
#endif
#endif
bool isMaxDepth=(depth.x==1.0);
#ifdef PERSPECTIVE_CAMERA
depth.x=viewZToOrthographicDepth(getViewZ(depth.x),cameraNearFar.x,cameraNearFar.y);depth.y=viewZToOrthographicDepth(getViewZ(depth.y),cameraNearFar.x,cameraNearFar.y);
#endif
#if DEPTH_TEST_STRATEGY == 0
bool keep=depthTest(depth.x,depth.y);
#elif DEPTH_TEST_STRATEGY == 1
bool keep=isMaxDepth||depthTest(depth.x,depth.y);
#else
bool keep=!isMaxDepth&&depthTest(depth.x,depth.y);
#endif
if(keep){gl_FragColor=texture2D(inputBuffer,vUv);}else{discard;}}`,lK=class extends na.ShaderMaterial{constructor(){super({name:"DepthMaskMaterial",defines:{DEPTH_EPSILON:"0.0001",DEPTH_PACKING_0:"0",DEPTH_PACKING_1:"0",DEPTH_TEST_STRATEGY:xb.KEEP_MAX_DEPTH},uniforms:{inputBuffer:new na.Uniform(null),depthBuffer0:new na.Uniform(null),depthBuffer1:new na.Uniform(null),cameraNearFar:new na.Uniform(new na.Vector2(1,1))},blending:na.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Lpt,vertexShader:zm}),this.depthMode=na.LessDepth}set depthBuffer0(t){this.uniforms.depthBuffer0.value=t}set depthPacking0(t){this.defines.DEPTH_PACKING_0=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer0(t,e=na.BasicDepthPacking){this.depthBuffer0=t,this.depthPacking0=e}set depthBuffer1(t){this.uniforms.depthBuffer1.value=t}set depthPacking1(t){this.defines.DEPTH_PACKING_1=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer1(t,e=na.BasicDepthPacking){this.depthBuffer1=t,this.depthPacking1=e}get maxDepthStrategy(){return Number(this.defines.DEPTH_TEST_STRATEGY)}set maxDepthStrategy(t){this.defines.DEPTH_TEST_STRATEGY=t.toFixed(0),this.needsUpdate=!0}get keepFar(){return this.maxDepthStrategy}set keepFar(t){this.maxDepthStrategy=t?xb.KEEP_MAX_DEPTH:xb.DISCARD_MAX_DEPTH}getMaxDepthStrategy(){return this.maxDepthStrategy}setMaxDepthStrategy(t){this.maxDepthStrategy=t}get epsilon(){return Number(this.defines.DEPTH_EPSILON)}set epsilon(t){this.defines.DEPTH_EPSILON=t.toFixed(16),this.needsUpdate=!0}getEpsilon(){return this.epsilon}setEpsilon(t){this.epsilon=t}get depthMode(){return Number(this.defines.DEPTH_MODE)}set depthMode(t){let e;switch(t){case na.NeverDepth:e="false";break;case na.AlwaysDepth:e="true";break;case na.EqualDepth:e="abs(d1 - d0) <= DEPTH_EPSILON";break;case na.NotEqualDepth:e="abs(d1 - d0) > DEPTH_EPSILON";break;case na.LessDepth:e="d0 > d1";break;case na.LessEqualDepth:e="d0 >= d1";break;case na.GreaterEqualDepth:e="d0 <= d1";break;case na.GreaterDepth:default:e="d0 < d1";break}this.defines.DEPTH_MODE=t.toFixed(0),this.defines["depthTest(d0, d1)"]=e,this.needsUpdate=!0}getDepthMode(){return this.depthMode}setDepthMode(t){this.depthMode=t}adoptCameraSettings(t){this.copyCameraSettings(t)}copyCameraSettings(t){t&&(this.uniforms.cameraNearFar.value.set(t.near,t.far),t instanceof na.PerspectiveCamera?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},hh=se,zpt=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform vec2 lightPosition;uniform float exposure;uniform float decay;uniform float density;uniform float weight;uniform float clampMax;varying vec2 vUv;void main(){vec2 coord=vUv;vec2 delta=lightPosition-coord;delta*=1.0/SAMPLES_FLOAT*density;float illuminationDecay=1.0;vec4 color=vec4(0.0);for(int i=0;i<SAMPLES_INT;++i){coord+=delta;vec4 texel=texture2D(inputBuffer,coord);texel*=illuminationDecay*weight;color+=texel;illuminationDecay*=decay;}gl_FragColor=clamp(color*exposure,0.0,clampMax);
#include <dithering_fragment>
}`,uAe=class extends hh.ShaderMaterial{constructor(t){super({name:"GodRaysMaterial",defines:{SAMPLES_INT:"60",SAMPLES_FLOAT:"60.0"},uniforms:{inputBuffer:new hh.Uniform(null),lightPosition:new hh.Uniform(t),density:new hh.Uniform(1),decay:new hh.Uniform(1),weight:new hh.Uniform(1),exposure:new hh.Uniform(1),clampMax:new hh.Uniform(1)},blending:hh.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:zpt,vertexShader:zm})}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get lightPosition(){return this.uniforms.lightPosition.value}getLightPosition(){return this.uniforms.lightPosition.value}setLightPosition(t){this.uniforms.lightPosition.value=t}get density(){return this.uniforms.density.value}set density(t){this.uniforms.density.value=t}getDensity(){return this.uniforms.density.value}setDensity(t){this.uniforms.density.value=t}get decay(){return this.uniforms.decay.value}set decay(t){this.uniforms.decay.value=t}getDecay(){return this.uniforms.decay.value}setDecay(t){this.uniforms.decay.value=t}get weight(){return this.uniforms.weight.value}set weight(t){this.uniforms.weight.value=t}getWeight(){return this.uniforms.weight.value}setWeight(t){this.uniforms.weight.value=t}get exposure(){return this.uniforms.exposure.value}set exposure(t){this.uniforms.exposure.value=t}getExposure(){return this.uniforms.exposure.value}setExposure(t){this.uniforms.exposure.value=t}get maxIntensity(){return this.uniforms.clampMax.value}set maxIntensity(t){this.uniforms.clampMax.value=t}getMaxIntensity(){return this.uniforms.clampMax.value}setMaxIntensity(t){this.uniforms.clampMax.value=t}get samples(){return Number(this.defines.SAMPLES_INT)}set samples(t){const e=Math.floor(t);this.defines.SAMPLES_INT=e.toFixed(0),this.defines.SAMPLES_FLOAT=e.toFixed(1),this.needsUpdate=!0}getSamples(){return this.samples}setSamples(t){this.samples=t}},Ix=class extends Zo{constructor(e,n,i=null){super("RenderPass",e,n),this.needsSwap=!1,this.clearPass=new yv,this.overrideMaterialManager=i===null?null:new iW(i),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(e){this.scene=e}set mainCamera(e){this.camera=e}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){const e=this.overrideMaterialManager;return e!==null?e.material:null}set overrideMaterial(e){const n=this.overrideMaterialManager;e!==null?n!==null?n.setMaterial(e):this.overrideMaterialManager=new iW(e):n!==null&&(n.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,n,i,o,l){const d=this.scene,p=this.camera,g=this.selection,v=p.layers.mask,_=d.background,b=e.shadowMap.autoUpdate,w=this.renderToScreen?null:n;g!==null&&p.layers.set(g.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(d.background=null),this.clearPass.enabled&&this.clearPass.render(e,n),e.setRenderTarget(w),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(e,d,p):e.render(d,p),p.layers.mask=v,d.background=_,e.shadowMap.autoUpdate=b}},Bpt=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=texture2D(map,uv);}`,jV=new Wl.Vector3,xle=new Wl.Matrix4,Upt=class extends zi{constructor(t,e,{blendFunction:n=Jn.SCREEN,samples:i=60,density:o=.96,decay:l=.9,weight:d=.4,exposure:p=.6,clampMax:g=1,blur:v=!0,kernelSize:_=Fd.SMALL,resolutionScale:b=.5,width:w=Rr.AUTO_SIZE,height:E=Rr.AUTO_SIZE,resolutionX:S=w,resolutionY:M=E}={}){super("GodRaysEffect",Bpt,{blendFunction:n,attributes:$o.DEPTH,uniforms:new Map([["map",new Wl.Uniform(null)]])}),this.camera=t,this._lightSource=e,this.lightSource=e,this.lightScene=new Wl.Scene,this.screenPosition=new Wl.Vector2,this.renderTargetA=new Wl.WebGLRenderTarget(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="GodRays.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="GodRays.Target.B",this.uniforms.get("map").value=this.renderTargetB.texture,this.renderTargetLight=new Wl.WebGLRenderTarget(1,1),this.renderTargetLight.texture.name="GodRays.Light",this.renderTargetLight.depthTexture=new Wl.DepthTexture,this.renderPassLight=new Ix(this.lightScene,t),this.renderPassLight.clearPass.overrideClearColor=new Wl.Color(0),this.clearPass=new yv(!0,!1,!1),this.clearPass.overrideClearColor=new Wl.Color(0),this.blurPass=new nv({kernelSize:_}),this.blurPass.enabled=v,this.depthMaskPass=new Rc(new lK);const k=this.depthMaskMaterial;k.depthBuffer1=this.renderTargetLight.depthTexture,k.copyCameraSettings(t),this.godRaysPass=new Rc(new uAe(this.screenPosition));const x=this.godRaysMaterial;x.density=o,x.decay=l,x.weight=d,x.exposure=p,x.maxIntensity=g,x.samples=i;const C=this.resolution=new Rr(this,S,M,b);C.addEventListener("change",P=>this.setSize(C.baseWidth,C.baseHeight))}set mainCamera(t){this.camera=t,this.renderPassLight.mainCamera=t,this.depthMaskMaterial.copyCameraSettings(t)}get lightSource(){return this._lightSource}set lightSource(t){this._lightSource=t,t!==null&&(t.material.depthWrite=!1,t.material.transparent=!0)}getBlurPass(){return this.blurPass}get texture(){return this.renderTargetB.texture}getTexture(){return this.texture}get depthMaskMaterial(){return this.depthMaskPass.fullscreenMaterial}get godRaysMaterial(){return this.godRaysPass.fullscreenMaterial}getGodRaysMaterial(){return this.godRaysMaterial}getResolution(){return this.resolution}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get dithering(){return this.godRaysMaterial.dithering}set dithering(t){const e=this.godRaysMaterial;e.dithering=t,e.needsUpdate=!0}get blur(){return this.blurPass.enabled}set blur(t){this.blurPass.enabled=t}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(t){this.blurPass.kernelSize=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}get samples(){return this.godRaysMaterial.samples}set samples(t){this.godRaysMaterial.samples=t}setDepthTexture(t,e=Wl.BasicDepthPacking){this.depthMaskPass.fullscreenMaterial.depthBuffer0=t,this.depthMaskPass.fullscreenMaterial.depthPacking0=e}update(t,e,n){const i=this.lightSource,o=i.parent,l=i.matrixAutoUpdate,d=this.renderTargetA,p=this.renderTargetLight;i.material.depthWrite=!0,i.matrixAutoUpdate=!1,i.updateWorldMatrix(!0,!1),o!==null&&(l||xle.copy(i.matrix),i.matrix.copy(i.matrixWorld)),this.lightScene.add(i),this.renderPassLight.render(t,p),this.clearPass.render(t,d),this.depthMaskPass.render(t,p,d),i.material.depthWrite=!1,i.matrixAutoUpdate=l,o!==null&&(l||i.matrix.copy(xle),o.add(i)),jV.setFromMatrixPosition(i.matrixWorld).project(this.camera),this.screenPosition.set(Math.min(Math.max((jV.x+1)*.5,-1),2),Math.min(Math.max((jV.y+1)*.5,-1),2)),this.blurPass.enabled&&this.blurPass.render(t,d,d),this.godRaysPass.render(t,d,this.renderTargetB)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e);const i=n.width,o=n.height;this.renderTargetA.setSize(i,o),this.renderTargetB.setSize(i,o),this.renderTargetLight.setSize(i,o),this.blurPass.resolution.copy(n)}initialize(t,e,n){this.blurPass.initialize(t,e,n),this.renderPassLight.initialize(t,e,n),this.depthMaskPass.initialize(t,e,n),this.godRaysPass.initialize(t,e,n),n!==void 0&&(this.renderTargetA.texture.type=n,this.renderTargetB.texture.type=n,this.renderTargetLight.texture.type=n,t!==null&&t.outputColorSpace===Wl.SRGBColorSpace&&(this.renderTargetA.texture.colorSpace=Wl.SRGBColorSpace,this.renderTargetB.texture.colorSpace=Wl.SRGBColorSpace,this.renderTargetLight.texture.colorSpace=Wl.SRGBColorSpace))}},Zk=se,Fpt="uniform vec2 scale;uniform float lineWidth;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float grid=0.5-max(abs(mod(uv.x*scale.x,1.0)-0.5),abs(mod(uv.y*scale.y,1.0)-0.5));outputColor=vec4(vec3(smoothstep(0.0,lineWidth,grid)),inputColor.a);}",Vpt=class extends zi{constructor({blendFunction:t=Jn.OVERLAY,scale:e=1,lineWidth:n=0}={}){super("GridEffect",Fpt,{blendFunction:t,uniforms:new Map([["scale",new Zk.Uniform(new Zk.Vector2)],["lineWidth",new Zk.Uniform(n)]])}),this.resolution=new Zk.Vector2,this.s=0,this.scale=e,this.l=0,this.lineWidth=n}get scale(){return this.s}set scale(t){this.s=Math.max(t,1e-6),this.setSize(this.resolution.width,this.resolution.height)}getScale(){return this.scale}setScale(t){this.scale=t}get lineWidth(){return this.l}set lineWidth(t){this.l=t,this.setSize(this.resolution.width,this.resolution.height)}getLineWidth(){return this.lineWidth}setLineWidth(t){this.lineWidth=t}setSize(t,e){this.resolution.set(t,e);const n=t/e,i=this.scale*(e*.125);this.uniforms.get("scale").value.set(n*i,i),this.uniforms.get("lineWidth").value=i/e+this.lineWidth}},HV=se,Gpt="uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}",jpt=class extends zi{constructor({blendFunction:t=Jn.SRC,hue:e=0,saturation:n=0}={}){super("HueSaturationEffect",Gpt,{blendFunction:t,uniforms:new Map([["hue",new HV.Uniform(new HV.Vector3)],["saturation",new HV.Uniform(n)]])}),this.hue=e}get saturation(){return this.uniforms.get("saturation").value}set saturation(t){this.uniforms.get("saturation").value=t}getSaturation(){return this.saturation}setSaturation(t){this.saturation=t}get hue(){const t=this.uniforms.get("hue").value;return Math.acos((t.x*3-1)/2)}set hue(t){const e=Math.sin(t),n=Math.cos(t);this.uniforms.get("hue").value.set((2*n+1)/3,(-Math.sqrt(3)*e-n+1)/3,(Math.sqrt(3)*e-n+1)/3)}getHue(){return this.hue}setHue(t){this.hue=t}},R1=se,Hpt="uniform vec2 distortion;uniform vec2 principalPoint;uniform vec2 focalLength;uniform float skew;float mask(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void mainUv(inout vec2 uv){vec2 xn=2.0*(uv.st-0.5);vec3 xDistorted=vec3((1.0+distortion*dot(xn,xn))*xn,1.0);mat3 kk=mat3(vec3(focalLength.x,0.0,0.0),vec3(skew*focalLength.x,focalLength.y,0.0),vec3(principalPoint.x,principalPoint.y,1.0));uv=(kk*xDistorted).xy*0.5+0.5;}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=mask(uv)*inputColor;}",$pt=class extends zi{constructor({distortion:t=new R1.Vector2(0,0),principalPoint:e=new R1.Vector2(0,0),focalLength:n=new R1.Vector2(1,1),skew:i=0}={}){super("LensDistortionEffect",Hpt,{uniforms:new Map([["distortion",new R1.Uniform(t)],["principalPoint",new R1.Uniform(e)],["focalLength",new R1.Uniform(n)],["skew",new R1.Uniform(i)]])})}get distortion(){return this.uniforms.get("distortion").value}set distortion(t){this.uniforms.get("distortion").value=t}get principalPoint(){return this.uniforms.get("principalPoint").value}set principalPoint(t){this.uniforms.get("principalPoint").value=t}get focalLength(){return this.uniforms.get("focalLength").value}set focalLength(t){this.uniforms.get("focalLength").value=t}get skew(){return this.uniforms.get("skew").value}set skew(t){this.uniforms.get("skew").value=t}},$V=se,Wpt=`#ifdef LUT_PRECISION_HIGH
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D lut;
#else
uniform mediump sampler2D lut;
#endif
#else
uniform lowp sampler2D lut;
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(texture2D(lut,vec2(inputColor.r,0.5)).r,texture2D(lut,vec2(inputColor.g,0.5)).r,texture2D(lut,vec2(inputColor.b,0.5)).r,inputColor.a);}`,Ypt=class extends zi{constructor(t,{blendFunction:e=Jn.SRC}={}){super("LUT1DEffect",Wpt,{blendFunction:e,uniforms:new Map([["lut",new $V.Uniform(null)]])}),this.lut=t}get lut(){return this.uniforms.get("lut").value}set lut(t){this.uniforms.get("lut").value=t,t!==null&&(t.type===$V.FloatType||t.type===$V.HalfFloatType)&&this.defines.set("LUT_PRECISION_HIGH","1")}},Ia=se,xs=se,fAe={SCALE_UP:"lut.scaleup"};function Mle(t,e,n){const i=document.createElement("canvas"),o=i.getContext("2d");if(i.width=t,i.height=e,n instanceof Image)o.drawImage(n,0,0);else{const l=o.createImageData(t,e);l.data.set(n),o.putImageData(l,0,0)}return i}var sm=class dAe{constructor(e=0,n=0,i=null){this.width=e,this.height=n,this.data=i}toCanvas(){return typeof document>"u"?null:Mle(this.width,this.height,this.data)}static from(e){const{width:n,height:i}=e;let o;if(e instanceof Image){const l=Mle(n,i,e);l!==null&&(o=l.getContext("2d").getImageData(0,0,n,i).data)}else o=e.data;return new dAe(n,i,o)}},qpt=`"use strict";(()=>{var O={SCALE_UP:"lut.scaleup"};var _=[new Float32Array(3),new Float32Array(3)],n=[new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3)],Z=[[new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,0,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([1,0,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([0,1,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([0,1,1]),new Float32Array([1,1,1])]];function d(a,t,r,m){let i=r[0]-t[0],e=r[1]-t[1],y=r[2]-t[2],h=a[0]-t[0],A=a[1]-t[1],w=a[2]-t[2],c=e*w-y*A,l=y*h-i*w,x=i*A-e*h,u=Math.sqrt(c*c+l*l+x*x),b=u*.5,s=c/u,F=l/u,f=x/u,p=-(a[0]*s+a[1]*F+a[2]*f),M=m[0]*s+m[1]*F+m[2]*f;return Math.abs(M+p)*b/3}function V(a,t,r,m,i,e){let y=(r+m*t+i*t*t)*4;e[0]=a[y+0],e[1]=a[y+1],e[2]=a[y+2]}function k(a,t,r,m,i,e){let y=r*(t-1),h=m*(t-1),A=i*(t-1),w=Math.floor(y),c=Math.floor(h),l=Math.floor(A),x=Math.ceil(y),u=Math.ceil(h),b=Math.ceil(A),s=y-w,F=h-c,f=A-l;if(w===y&&c===h&&l===A)V(a,t,y,h,A,e);else{let p;s>=F&&F>=f?p=Z[0]:s>=f&&f>=F?p=Z[1]:f>=s&&s>=F?p=Z[2]:F>=s&&s>=f?p=Z[3]:F>=f&&f>=s?p=Z[4]:f>=F&&F>=s&&(p=Z[5]);let[M,g,X,Y]=p,P=_[0];P[0]=s,P[1]=F,P[2]=f;let o=_[1],L=x-w,S=u-c,U=b-l;o[0]=L*M[0]+w,o[1]=S*M[1]+c,o[2]=U*M[2]+l,V(a,t,o[0],o[1],o[2],n[0]),o[0]=L*g[0]+w,o[1]=S*g[1]+c,o[2]=U*g[2]+l,V(a,t,o[0],o[1],o[2],n[1]),o[0]=L*X[0]+w,o[1]=S*X[1]+c,o[2]=U*X[2]+l,V(a,t,o[0],o[1],o[2],n[2]),o[0]=L*Y[0]+w,o[1]=S*Y[1]+c,o[2]=U*Y[2]+l,V(a,t,o[0],o[1],o[2],n[3]);let T=d(g,X,Y,P)*6,q=d(M,X,Y,P)*6,C=d(M,g,Y,P)*6,E=d(M,g,X,P)*6;n[0][0]*=T,n[0][1]*=T,n[0][2]*=T,n[1][0]*=q,n[1][1]*=q,n[1][2]*=q,n[2][0]*=C,n[2][1]*=C,n[2][2]*=C,n[3][0]*=E,n[3][1]*=E,n[3][2]*=E,e[0]=n[0][0]+n[1][0]+n[2][0]+n[3][0],e[1]=n[0][1]+n[1][1]+n[2][1]+n[3][1],e[2]=n[0][2]+n[1][2]+n[2][2]+n[3][2]}}var v=class{static expand(t,r){let m=Math.cbrt(t.length/4),i=new Float32Array(3),e=new t.constructor(r**3*4),y=t instanceof Uint8Array?255:1,h=r**2,A=1/(r-1);for(let w=0;w<r;++w)for(let c=0;c<r;++c)for(let l=0;l<r;++l){let x=l*A,u=c*A,b=w*A,s=Math.round(l+c*r+w*h)*4;k(t,m,x,u,b,i),e[s+0]=i[0],e[s+1]=i[1],e[s+2]=i[2],e[s+3]=y}return e}};self.addEventListener("message",a=>{let t=a.data,r=t.data;switch(t.operation){case O.SCALE_UP:r=v.expand(r,t.size);break}postMessage(r,[r.buffer]),close()});})();
`,kle=new xs.Color,r6=class mD extends xs.Data3DTexture{constructor(e,n){super(e,n,n,n),this.type=xs.FloatType,this.format=xs.RGBAFormat,this.minFilter=xs.LinearFilter,this.magFilter=xs.LinearFilter,this.wrapS=xs.ClampToEdgeWrapping,this.wrapT=xs.ClampToEdgeWrapping,this.wrapR=xs.ClampToEdgeWrapping,this.unpackAlignment=1,this.needsUpdate=!0,this.colorSpace=xs.LinearSRGBColorSpace,this.domainMin=new xs.Vector3(0,0,0),this.domainMax=new xs.Vector3(1,1,1)}get isLookupTexture3D(){return!0}scaleUp(e,n=!0){const i=this.image;let o;return e<=i.width?o=Promise.reject(new Error("The target size must be greater than the current size")):o=new Promise((l,d)=>{const p=URL.createObjectURL(new Blob([qpt],{type:"text/javascript"})),g=new Worker(p);g.addEventListener("error",_=>d(_.error)),g.addEventListener("message",_=>{const b=new mD(_.data,e);this.colorSpace=b.colorSpace,b.type=this.type,b.name=this.name,URL.revokeObjectURL(p),l(b)});const v=n?[i.data.buffer]:[];g.postMessage({operation:fAe.SCALE_UP,data:i.data,size:e},v)}),o}applyLUT(e){const n=this.image,i=e.image,o=Math.min(n.width,n.height,n.depth),l=Math.min(i.width,i.height,i.depth);if(o!==l)console.error("Size mismatch");else if(e.type!==xs.FloatType||this.type!==xs.FloatType)console.error("Both LUTs must be FloatType textures");else if(e.format!==xs.RGBAFormat||this.format!==xs.RGBAFormat)console.error("Both LUTs must be RGBA textures");else{const d=n.data,p=i.data,g=o,v=g**2,_=g-1;for(let b=0,w=g**3;b<w;++b){const E=b*4,S=d[E+0]*_,M=d[E+1]*_,k=d[E+2]*_,x=Math.round(S+M*g+k*v)*4;d[E+0]=p[x+0],d[E+1]=p[x+1],d[E+2]=p[x+2]}this.needsUpdate=!0}return this}convertToUint8(){if(this.type===xs.FloatType){const e=this.image.data,n=new Uint8Array(e.length);for(let i=0,o=e.length;i<o;++i)n[i]=e[i]*255+.5;this.image.data=n,this.type=xs.UnsignedByteType,this.needsUpdate=!0}return this}convertToFloat(){if(this.type===xs.UnsignedByteType){const e=this.image.data,n=new Float32Array(e.length);for(let i=0,o=e.length;i<o;++i)n[i]=e[i]/255;this.image.data=n,this.type=xs.FloatType,this.needsUpdate=!0}return this}convertToRGBA(){return console.warn("LookupTexture","convertToRGBA() is deprecated, LUTs are now RGBA by default"),this}convertLinearToSRGB(){const e=this.image.data;if(this.type===xs.FloatType){for(let n=0,i=e.length;n<i;n+=4)kle.fromArray(e,n).convertLinearToSRGB().toArray(e,n);this.colorSpace=xs.SRGBColorSpace,this.needsUpdate=!0}else console.error("Color space conversion requires FloatType data");return this}convertSRGBToLinear(){const e=this.image.data;if(this.type===xs.FloatType){for(let n=0,i=e.length;n<i;n+=4)kle.fromArray(e,n).convertSRGBToLinear().toArray(e,n);this.colorSpace=xs.LinearSRGBColorSpace,this.needsUpdate=!0}else console.error("Color space conversion requires FloatType data");return this}toDataTexture(){const e=this.image.width,n=this.image.height*this.image.depth,i=new xs.DataTexture(this.image.data,e,n);return i.name=this.name,i.type=this.type,i.format=this.format,i.minFilter=xs.LinearFilter,i.magFilter=xs.LinearFilter,i.wrapS=this.wrapS,i.wrapT=this.wrapT,i.generateMipmaps=!1,i.needsUpdate=!0,this.colorSpace=i.colorSpace,i}static from(e){const n=e.image,{width:i,height:o}=n,l=Math.min(i,o);let d;if(n instanceof Image){const v=sm.from(n).data;if(i>o){d=new Uint8Array(v.length);for(let _=0;_<l;++_)for(let b=0;b<l;++b)for(let w=0;w<l;++w){const E=(w+_*l+b*l*l)*4,S=(w+b*l+_*l*l)*4;d[S+0]=v[E+0],d[S+1]=v[E+1],d[S+2]=v[E+2],d[S+3]=v[E+3]}}else d=new Uint8Array(v.buffer)}else d=n.data.slice();const p=new mD(d,l);return p.type=e.type,p.name=e.name,e.colorSpace=p.colorSpace,p}static createNeutral(e){const n=new Float32Array(e**3*4),i=e**2,o=1/(e-1);for(let d=0;d<e;++d)for(let p=0;p<e;++p)for(let g=0;g<e;++g){const v=(d+p*e+g*i)*4;n[v+0]=d*o,n[v+1]=p*o,n[v+2]=g*o,n[v+3]=1}const l=new mD(n,e);return l.name="neutral",l}},Xpt=`uniform vec3 scale;uniform vec3 offset;
#ifdef CUSTOM_INPUT_DOMAIN
uniform vec3 domainMin;uniform vec3 domainMax;
#endif
#ifdef LUT_3D
#ifdef LUT_PRECISION_HIGH
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler3D lut;
#else
uniform mediump sampler3D lut;
#endif
#else
uniform lowp sampler3D lut;
#endif
vec4 applyLUT(const in vec3 rgb){
#ifdef TETRAHEDRAL_INTERPOLATION
vec3 p=floor(rgb);vec3 f=rgb-p;vec3 v1=(p+0.5)*LUT_TEXEL_WIDTH;vec3 v4=(p+1.5)*LUT_TEXEL_WIDTH;vec3 v2,v3;vec3 frac;if(f.r>=f.g){if(f.g>f.b){frac=f.rgb;v2=vec3(v4.x,v1.y,v1.z);v3=vec3(v4.x,v4.y,v1.z);}else if(f.r>=f.b){frac=f.rbg;v2=vec3(v4.x,v1.y,v1.z);v3=vec3(v4.x,v1.y,v4.z);}else{frac=f.brg;v2=vec3(v1.x,v1.y,v4.z);v3=vec3(v4.x,v1.y,v4.z);}}else{if(f.b>f.g){frac=f.bgr;v2=vec3(v1.x,v1.y,v4.z);v3=vec3(v1.x,v4.y,v4.z);}else if(f.r>=f.b){frac=f.grb;v2=vec3(v1.x,v4.y,v1.z);v3=vec3(v4.x,v4.y,v1.z);}else{frac=f.gbr;v2=vec3(v1.x,v4.y,v1.z);v3=vec3(v1.x,v4.y,v4.z);}}vec4 n1=texture(lut,v1);vec4 n2=texture(lut,v2);vec4 n3=texture(lut,v3);vec4 n4=texture(lut,v4);vec4 weights=vec4(1.0-frac.x,frac.x-frac.y,frac.y-frac.z,frac.z);vec4 result=weights*mat4(vec4(n1.r,n2.r,n3.r,n4.r),vec4(n1.g,n2.g,n3.g,n4.g),vec4(n1.b,n2.b,n3.b,n4.b),vec4(1.0));return vec4(result.rgb,1.0);
#else
return texture(lut,rgb);
#endif
}
#else
#ifdef LUT_PRECISION_HIGH
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D lut;
#else
uniform mediump sampler2D lut;
#endif
#else
uniform lowp sampler2D lut;
#endif
vec4 applyLUT(const in vec3 rgb){float slice=rgb.b*LUT_SIZE;float slice0=floor(slice);float interp=slice-slice0;float centeredInterp=interp-0.5;float slice1=slice0+sign(centeredInterp);
#ifdef LUT_STRIP_HORIZONTAL
float xOffset=clamp(rgb.r*LUT_TEXEL_HEIGHT,LUT_TEXEL_WIDTH*0.5,LUT_TEXEL_HEIGHT-LUT_TEXEL_WIDTH*0.5);vec2 uv0=vec2(slice0*LUT_TEXEL_HEIGHT+xOffset,rgb.g);vec2 uv1=vec2(slice1*LUT_TEXEL_HEIGHT+xOffset,rgb.g);
#else
float yOffset=clamp(rgb.g*LUT_TEXEL_WIDTH,LUT_TEXEL_HEIGHT*0.5,LUT_TEXEL_WIDTH-LUT_TEXEL_HEIGHT*0.5);vec2 uv0=vec2(rgb.r,slice0*LUT_TEXEL_WIDTH+yOffset);vec2 uv1=vec2(rgb.r,slice1*LUT_TEXEL_WIDTH+yOffset);
#endif
vec4 sample0=texture2D(lut,uv0);vec4 sample1=texture2D(lut,uv1);return mix(sample0,sample1,abs(centeredInterp));}
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 c=inputColor.rgb;
#ifdef CUSTOM_INPUT_DOMAIN
if(c.r>=domainMin.r&&c.g>=domainMin.g&&c.b>=domainMin.b&&c.r<=domainMax.r&&c.g<=domainMax.g&&c.b<=domainMax.b){c=applyLUT(scale*c+offset).rgb;}else{c=inputColor.rgb;}
#else
#if !defined(LUT_3D) || defined(TETRAHEDRAL_INTERPOLATION)
c=clamp(c,0.0,1.0);
#endif
c=applyLUT(scale*c+offset).rgb;
#endif
outputColor=vec4(c,inputColor.a);}`,Cle=class extends zi{constructor(t,{blendFunction:e=Jn.SRC,tetrahedralInterpolation:n=!1,inputColorSpace:i=Ia.SRGBColorSpace}={}){super("LUT3DEffect",Xpt,{blendFunction:e,uniforms:new Map([["lut",new Ia.Uniform(null)],["scale",new Ia.Uniform(new Ia.Vector3)],["offset",new Ia.Uniform(new Ia.Vector3)],["domainMin",new Ia.Uniform(null)],["domainMax",new Ia.Uniform(null)]])}),this.tetrahedralInterpolation=n,this.inputColorSpace=i,this.lut=t}get lut(){return this.uniforms.get("lut").value}set lut(t){const e=this.defines,n=this.uniforms;if(this.lut!==t&&(n.get("lut").value=t,t!==null)){const i=t.image,o=this.tetrahedralInterpolation;if(e.clear(),e.set("LUT_SIZE",Math.min(i.width,i.height).toFixed(16)),e.set("LUT_TEXEL_WIDTH",(1/i.width).toFixed(16)),e.set("LUT_TEXEL_HEIGHT",(1/i.height).toFixed(16)),n.get("domainMin").value=null,n.get("domainMax").value=null,(t.type===Ia.FloatType||t.type===Ia.HalfFloatType)&&e.set("LUT_PRECISION_HIGH","1"),i.width>i.height?e.set("LUT_STRIP_HORIZONTAL","1"):t instanceof Ia.Data3DTexture&&e.set("LUT_3D","1"),t instanceof r6){const l=t.domainMin,d=t.domainMax;(l.x!==0||l.y!==0||l.z!==0||d.x!==1||d.y!==1||d.z!==1)&&(e.set("CUSTOM_INPUT_DOMAIN","1"),n.get("domainMin").value=l.clone(),n.get("domainMax").value=d.clone())}this.tetrahedralInterpolation=o}}getLUT(){return this.lut}setLUT(t){this.lut=t}updateScaleOffset(){const t=this.lut;if(t!==null){const e=Math.min(t.image.width,t.image.height),n=this.uniforms.get("scale").value,i=this.uniforms.get("offset").value;if(this.tetrahedralInterpolation&&t instanceof Ia.Data3DTexture)if(this.defines.has("CUSTOM_INPUT_DOMAIN")){const o=t.domainMax.clone().sub(t.domainMin);n.setScalar(e-1).divide(o),i.copy(t.domainMin).negate().multiply(n)}else n.setScalar(e-1),i.setScalar(0);else if(this.defines.has("CUSTOM_INPUT_DOMAIN")){const o=t.domainMax.clone().sub(t.domainMin).multiplyScalar(e);n.setScalar(e-1).divide(o),i.copy(t.domainMin).negate().multiply(n).addScalar(1/(2*e))}else n.setScalar((e-1)/e),i.setScalar(1/(2*e))}}configureTetrahedralInterpolation(){const t=this.lut;t!==null&&(t.minFilter=Ia.LinearFilter,t.magFilter=Ia.LinearFilter,this.tetrahedralInterpolation&&(t instanceof Ia.Data3DTexture?(t.minFilter=Ia.NearestFilter,t.magFilter=Ia.NearestFilter):console.warn("Tetrahedral interpolation requires a 3D texture")),t.source===void 0&&(t.needsUpdate=!0))}get tetrahedralInterpolation(){return this.defines.has("TETRAHEDRAL_INTERPOLATION")}set tetrahedralInterpolation(t){t?this.defines.set("TETRAHEDRAL_INTERPOLATION","1"):this.defines.delete("TETRAHEDRAL_INTERPOLATION"),this.configureTetrahedralInterpolation(),this.updateScaleOffset(),this.setChanged()}setTetrahedralInterpolationEnabled(t){this.tetrahedralInterpolation=t}},fb={FULL:0,SINGLE:1},cK={DEPTH:0,LUMA:1,COLOR:2},hAe={DISABLED:0,DEPTH:1,CUSTOM:2},Sy={LOW:0,MEDIUM:1,HIGH:2,ULTRA:3},du={LINEAR:0,REINHARD:1,REINHARD2:2,REINHARD2_ADAPTIVE:3,UNCHARTED2:4,OPTIMIZED_CINEON:5,ACES_FILMIC:6,AGX:7,NEUTRAL:8},Ty={DEFAULT:0,ESKIL:1},Zpt={DERIVATIVES:"derivatives",FRAG_DEPTH:"fragDepth",DRAW_BUFFERS:"drawBuffers",SHADER_TEXTURE_LOD:"shaderTextureLOD"},Qpt=`void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*(1.0+time)));
#ifdef PREMULTIPLY
outputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);
#else
outputColor=vec4(noise,inputColor.a);
#endif
}`,Kpt=class extends zi{constructor({blendFunction:t=Jn.SCREEN,premultiply:e=!1}={}){super("NoiseEffect",Qpt,{blendFunction:t}),this.premultiply=e}get premultiply(){return this.defines.has("PREMULTIPLY")}set premultiply(t){this.premultiply!==t&&(t?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}isPremultiplied(){return this.premultiply}setPremultiplied(t){this.premultiply=t}},_l=se,l2=se,Jpt=`#include <packing>
#include <clipping_planes_pars_fragment>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float cameraNear;uniform float cameraFar;centroid varying float vViewZ;centroid varying vec4 vProjTexCoord;void main(){
#include <clipping_planes_fragment>
vec2 projTexCoord=(vProjTexCoord.xy/vProjTexCoord.w)*0.5+0.5;projTexCoord=clamp(projTexCoord,0.002,0.998);
#if DEPTH_PACKING == 3201
float fragCoordZ=unpackRGBAToDepth(texture2D(depthBuffer,projTexCoord));
#else
float fragCoordZ=texture2D(depthBuffer,projTexCoord).r;
#endif
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(fragCoordZ,cameraNear,cameraFar);
#else
float viewZ=orthographicDepthToViewZ(fragCoordZ,cameraNear,cameraFar);
#endif
float depthTest=(-vViewZ>-viewZ)?1.0:0.0;gl_FragColor.rg=vec2(0.0,depthTest);}`,e2t=`#include <common>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
varying float vViewZ;varying vec4 vProjTexCoord;void main(){
#include <skinbase_vertex>
#include <begin_vertex>
#include <morphtarget_vertex>
#include <skinning_vertex>
#include <project_vertex>
vViewZ=mvPosition.z;vProjTexCoord=gl_Position;
#include <clipping_planes_vertex>
}`,pAe=class extends l2.ShaderMaterial{constructor(t=null,e){super({name:"DepthComparisonMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new l2.Uniform(null),cameraNear:new l2.Uniform(.3),cameraFar:new l2.Uniform(1e3)},blending:l2.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Jpt,vertexShader:e2t}),this.depthBuffer=t,this.depthPacking=l2.RGBADepthPacking,this.copyCameraSettings(e)}set depthBuffer(t){this.uniforms.depthBuffer.value=t}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=l2.RGBADepthPacking){this.depthBuffer=t,this.depthPacking=e}adoptCameraSettings(t){this.copyCameraSettings(t)}copyCameraSettings(t){t&&(this.uniforms.cameraNear.value=t.near,this.uniforms.cameraFar.value=t.far,t instanceof l2.PerspectiveCamera?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},j_=se,t2t="uniform lowp sampler2D inputBuffer;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 c0=texture2D(inputBuffer,vUv0).rg;vec2 c1=texture2D(inputBuffer,vUv1).rg;vec2 c2=texture2D(inputBuffer,vUv2).rg;vec2 c3=texture2D(inputBuffer,vUv3).rg;float d0=(c0.x-c1.x)*0.5;float d1=(c2.x-c3.x)*0.5;float d=length(vec2(d0,d1));float a0=min(c0.y,c1.y);float a1=min(c2.y,c3.y);float visibilityFactor=min(a0,a1);gl_FragColor.rg=(1.0-visibilityFactor>0.001)?vec2(d,0.0):vec2(0.0,d);}",n2t="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=vec2(uv.x+texelSize.x,uv.y);vUv1=vec2(uv.x-texelSize.x,uv.y);vUv2=vec2(uv.x,uv.y+texelSize.y);vUv3=vec2(uv.x,uv.y-texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}",sW=class extends j_.ShaderMaterial{constructor(t=new j_.Vector2){super({name:"OutlineMaterial",uniforms:{inputBuffer:new j_.Uniform(null),texelSize:new j_.Uniform(new j_.Vector2)},blending:j_.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:t2t,vertexShader:n2t}),this.uniforms.texelSize.value.set(t.x,t.y),this.uniforms.maskTexture=this.uniforms.inputBuffer}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e)}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},H_=se,uK=class extends Zo{constructor(t,e,{renderTarget:n,resolutionScale:i=1,width:o=Rr.AUTO_SIZE,height:l=Rr.AUTO_SIZE,resolutionX:d=o,resolutionY:p=l}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new Ix(t,e,new H_.MeshDepthMaterial({depthPacking:H_.RGBADepthPacking}));const g=this.renderPass;g.skipShadowMapUpdate=!0,g.ignoreBackground=!0;const v=g.clearPass;v.overrideClearColor=new H_.Color(16777215),v.overrideClearAlpha=1,this.renderTarget=n,this.renderTarget===void 0&&(this.renderTarget=new H_.WebGLRenderTarget(1,1,{minFilter:H_.NearestFilter,magFilter:H_.NearestFilter}),this.renderTarget.texture.name="DepthPass.Target");const _=this.resolution=new Rr(this,d,p,i);_.addEventListener("change",b=>this.setSize(_.baseWidth,_.baseHeight))}set mainScene(t){this.renderPass.mainScene=t}set mainCamera(t){this.renderPass.mainCamera=t}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}render(t,e,n,i,o){const l=this.renderToScreen?null:this.renderTarget;this.renderPass.render(t,l)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height)}},r2t=`uniform lowp sampler2D edgeTexture;uniform lowp sampler2D maskTexture;uniform vec3 visibleEdgeColor;uniform vec3 hiddenEdgeColor;uniform float pulse;uniform float edgeStrength;
#ifdef USE_PATTERN
uniform lowp sampler2D patternTexture;varying vec2 vUvPattern;
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 edge=texture2D(edgeTexture,uv).rg;vec2 mask=texture2D(maskTexture,uv).rg;
#ifndef X_RAY
edge.y=0.0;
#endif
edge*=(edgeStrength*mask.x*pulse);vec3 color=edge.x*visibleEdgeColor+edge.y*hiddenEdgeColor;float visibilityFactor=0.0;
#ifdef USE_PATTERN
vec4 patternColor=texture2D(patternTexture,vUvPattern);
#ifdef X_RAY
float hiddenFactor=0.5;
#else
float hiddenFactor=0.0;
#endif
visibilityFactor=(1.0-mask.y>0.0)?1.0:hiddenFactor;visibilityFactor*=(1.0-mask.x)*patternColor.a;color+=visibilityFactor*patternColor.rgb;
#endif
float alpha=max(max(edge.x,edge.y),visibilityFactor);
#ifdef ALPHA
outputColor=vec4(color,alpha);
#else
outputColor=vec4(color,max(alpha,inputColor.a));
#endif
}`,i2t="uniform float patternScale;varying vec2 vUvPattern;void mainSupport(const in vec2 uv){vUvPattern=uv*vec2(aspect,1.0)*patternScale;}",s2t=class extends zi{constructor(t,e,{blendFunction:n=Jn.SCREEN,patternTexture:i=null,patternScale:o=1,edgeStrength:l=1,pulseSpeed:d=0,visibleEdgeColor:p=16777215,hiddenEdgeColor:g=2230538,kernelSize:v=Fd.VERY_SMALL,blur:_=!1,xRay:b=!0,multisampling:w=0,resolutionScale:E=.5,width:S=Rr.AUTO_SIZE,height:M=Rr.AUTO_SIZE,resolutionX:k=S,resolutionY:x=M}={}){super("OutlineEffect",r2t,{uniforms:new Map([["maskTexture",new _l.Uniform(null)],["edgeTexture",new _l.Uniform(null)],["edgeStrength",new _l.Uniform(l)],["visibleEdgeColor",new _l.Uniform(new _l.Color(p))],["hiddenEdgeColor",new _l.Uniform(new _l.Color(g))],["pulse",new _l.Uniform(1)],["patternScale",new _l.Uniform(o)],["patternTexture",new _l.Uniform(null)]])}),this.blendMode.addEventListener("change",L=>{this.blendMode.blendFunction===Jn.ALPHA?this.defines.set("ALPHA","1"):this.defines.delete("ALPHA"),this.setChanged()}),this.blendMode.blendFunction=n,this.patternTexture=i,this.xRay=b,this.scene=t,this.camera=e,this.renderTargetMask=new _l.WebGLRenderTarget(1,1),this.renderTargetMask.samples=w,this.renderTargetMask.texture.name="Outline.Mask",this.uniforms.get("maskTexture").value=this.renderTargetMask.texture,this.renderTargetOutline=new _l.WebGLRenderTarget(1,1,{depthBuffer:!1}),this.renderTargetOutline.texture.name="Outline.Edges",this.uniforms.get("edgeTexture").value=this.renderTargetOutline.texture,this.clearPass=new yv,this.clearPass.overrideClearColor=new _l.Color(0),this.clearPass.overrideClearAlpha=1,this.depthPass=new uK(t,e),this.maskPass=new Ix(t,e,new pAe(this.depthPass.texture,e));const C=this.maskPass.clearPass;C.overrideClearColor=new _l.Color(16777215),C.overrideClearAlpha=1,this.blurPass=new nv({resolutionScale:E,resolutionX:k,resolutionY:x,kernelSize:v}),this.blurPass.enabled=_;const P=this.blurPass.resolution;P.addEventListener("change",L=>this.setSize(P.baseWidth,P.baseHeight)),this.outlinePass=new Rc(new sW);const O=this.outlinePass.fullscreenMaterial;O.inputBuffer=this.renderTargetMask.texture,this.time=0,this.forceUpdate=!0,this.selection=new sK,this.selection.layer=10,this.pulseSpeed=d}set mainScene(t){this.scene=t,this.depthPass.mainScene=t,this.maskPass.mainScene=t}set mainCamera(t){this.camera=t,this.depthPass.mainCamera=t,this.maskPass.mainCamera=t,this.maskPass.overrideMaterial.copyCameraSettings(t)}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.getResolution()}get multisampling(){return this.renderTargetMask.samples}set multisampling(t){this.renderTargetMask.samples=t,this.renderTargetMask.dispose()}get patternScale(){return this.uniforms.get("patternScale").value}set patternScale(t){this.uniforms.get("patternScale").value=t}get edgeStrength(){return this.uniforms.get("edgeStrength").value}set edgeStrength(t){this.uniforms.get("edgeStrength").value=t}get visibleEdgeColor(){return this.uniforms.get("visibleEdgeColor").value}set visibleEdgeColor(t){this.uniforms.get("visibleEdgeColor").value=t}get hiddenEdgeColor(){return this.uniforms.get("hiddenEdgeColor").value}set hiddenEdgeColor(t){this.uniforms.get("hiddenEdgeColor").value=t}getBlurPass(){return this.blurPass}getSelection(){return this.selection}getPulseSpeed(){return this.pulseSpeed}setPulseSpeed(t){this.pulseSpeed=t}get width(){return this.resolution.width}set width(t){this.resolution.preferredWidth=t}get height(){return this.resolution.height}set height(t){this.resolution.preferredHeight=t}get selectionLayer(){return this.selection.layer}set selectionLayer(t){this.selection.layer=t}get dithering(){return this.blurPass.dithering}set dithering(t){this.blurPass.dithering=t}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(t){this.blurPass.kernelSize=t}get blur(){return this.blurPass.enabled}set blur(t){this.blurPass.enabled=t}get xRay(){return this.defines.has("X_RAY")}set xRay(t){this.xRay!==t&&(t?this.defines.set("X_RAY","1"):this.defines.delete("X_RAY"),this.setChanged())}isXRayEnabled(){return this.xRay}setXRayEnabled(t){this.xRay=t}get patternTexture(){return this.uniforms.get("patternTexture").value}set patternTexture(t){t!==null?(t.wrapS=t.wrapT=_l.RepeatWrapping,this.defines.set("USE_PATTERN","1"),this.setVertexShader(i2t)):(this.defines.delete("USE_PATTERN"),this.setVertexShader(null)),this.uniforms.get("patternTexture").value=t,this.setChanged()}setPatternTexture(t){this.patternTexture=t}getResolutionScale(){return this.resolution.scale}setResolutionScale(t){this.resolution.scale=t}setSelection(t){return this.selection.set(t),this}clearSelection(){return this.selection.clear(),this}selectObject(t){return this.selection.add(t),this}deselectObject(t){return this.selection.delete(t),this}update(t,e,n){const i=this.scene,o=this.camera,l=this.selection,p=this.uniforms.get("pulse"),g=i.background,v=o.layers.mask;(this.forceUpdate||l.size>0)&&(i.background=null,p.value=1,this.pulseSpeed>0&&(p.value=Math.cos(this.time*this.pulseSpeed*10)*.375+.625),this.time+=n,l.setVisible(!1),this.depthPass.render(t),l.setVisible(!0),o.layers.set(l.layer),this.maskPass.render(t,this.renderTargetMask),o.layers.mask=v,i.background=g,this.outlinePass.render(t,null,this.renderTargetOutline),this.blurPass.enabled&&this.blurPass.render(t,this.renderTargetOutline,this.renderTargetOutline)),this.forceUpdate=l.size>0}setSize(t,e){this.blurPass.setSize(t,e),this.renderTargetMask.setSize(t,e);const n=this.resolution;n.setBaseSize(t,e);const i=n.width,o=n.height;this.depthPass.setSize(i,o),this.renderTargetOutline.setSize(i,o),this.outlinePass.fullscreenMaterial.setSize(i,o)}initialize(t,e,n){this.blurPass.initialize(t,e,_l.UnsignedByteType),n!==void 0&&(this.depthPass.initialize(t,e,n),this.maskPass.initialize(t,e,n),this.outlinePass.initialize(t,e,n))}},Qk=se,o2t="uniform bool active;uniform vec4 d;void mainUv(inout vec2 uv){if(active){uv=d.xy*(floor(uv*d.zw)+0.5);}}",a2t=class extends zi{constructor(t=30){super("PixelationEffect",o2t,{uniforms:new Map([["active",new Qk.Uniform(!1)],["d",new Qk.Uniform(new Qk.Vector4)]])}),this.resolution=new Qk.Vector2,this._granularity=0,this.granularity=t}get granularity(){return this._granularity}set granularity(t){let e=Math.floor(t);e%2>0&&(e+=1),this._granularity=e,this.uniforms.get("active").value=e>0,this.setSize(this.resolution.width,this.resolution.height)}getGranularity(){return this.granularity}setGranularity(t){this.granularity=t}setSize(t,e){const n=this.resolution;n.set(t,e);const i=this.granularity,o=i/n.x,l=i/n.y;this.uniforms.get("d").value.set(o,l,1/o,1/l)}},nd=se,l2t=`uniform float focus;uniform float focalLength;uniform float fStop;uniform float maxBlur;uniform float luminanceThreshold;uniform float luminanceGain;uniform float bias;uniform float fringe;
#ifdef MANUAL_DOF
uniform vec4 dof;
#endif
#ifdef PENTAGON
float pentagon(const in vec2 coords){const vec4 HS0=vec4(1.0,0.0,0.0,1.0);const vec4 HS1=vec4(0.309016994,0.951056516,0.0,1.0);const vec4 HS2=vec4(-0.809016994,0.587785252,0.0,1.0);const vec4 HS3=vec4(-0.809016994,-0.587785252,0.0,1.0);const vec4 HS4=vec4(0.309016994,-0.951056516,0.0,1.0);const vec4 HS5=vec4(0.0,0.0,1.0,1.0);const vec4 ONE=vec4(1.0);const float P_FEATHER=0.4;const float N_FEATHER=-P_FEATHER;float inOrOut=-4.0;vec4 P=vec4(coords,vec2(RINGS_FLOAT-1.3));vec4 dist=vec4(dot(P,HS0),dot(P,HS1),dot(P,HS2),dot(P,HS3));dist=smoothstep(N_FEATHER,P_FEATHER,dist);inOrOut+=dot(dist,ONE);dist.x=dot(P,HS4);dist.y=HS5.w-abs(P.z);dist=smoothstep(N_FEATHER,P_FEATHER,dist);inOrOut+=dist.x;return clamp(inOrOut,0.0,1.0);}
#endif
vec3 processTexel(const in vec2 coords,const in float blur){vec2 scale=texelSize*fringe*blur;vec3 c=vec3(texture2D(inputBuffer,coords+vec2(0.0,1.0)*scale).r,texture2D(inputBuffer,coords+vec2(-0.866,-0.5)*scale).g,texture2D(inputBuffer,coords+vec2(0.866,-0.5)*scale).b);float luminance=linearToRelativeLuminance(c);float threshold=max((luminance-luminanceThreshold)*luminanceGain,0.0);return c+mix(vec3(0.0),c,threshold*blur);}float gather(const in float i,const in float j,const in float ringSamples,const in vec2 uv,const in vec2 blurFactor,const in float blur,inout vec3 color){float step=PI2/ringSamples;vec2 wh=vec2(cos(j*step)*i,sin(j*step)*i);
#ifdef PENTAGON
float p=pentagon(wh);
#else
float p=1.0;
#endif
color+=processTexel(wh*blurFactor+uv,blur)*mix(1.0,i/RINGS_FLOAT,bias)*p;return mix(1.0,i/RINGS_FLOAT,bias)*p;}void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);
#else
float linearDepth=depth;
#endif
#ifdef MANUAL_DOF
float focalPlane=linearDepth-focus;float farDoF=(focalPlane-dof.z)/dof.w;float nearDoF=(-focalPlane-dof.x)/dof.y;float blur=(focalPlane>0.0)?farDoF:nearDoF;
#else
const float CIRCLE_OF_CONFUSION=0.03;float focalPlaneMM=focus*1000.0;float depthMM=linearDepth*1000.0;float focalPlane=(depthMM*focalLength)/(depthMM-focalLength);float farDoF=(focalPlaneMM*focalLength)/(focalPlaneMM-focalLength);float nearDoF=(focalPlaneMM-focalLength)/(focalPlaneMM*fStop*CIRCLE_OF_CONFUSION);float blur=abs(focalPlane-farDoF)*nearDoF;
#endif
const int MAX_RING_SAMPLES=RINGS_INT*SAMPLES_INT;blur=clamp(blur,0.0,1.0);vec3 color=inputColor.rgb;if(blur>=0.05){vec2 blurFactor=blur*maxBlur*texelSize;float s=1.0;int ringSamples;for(int i=1;i<=RINGS_INT;i++){ringSamples=i*SAMPLES_INT;for(int j=0;j<MAX_RING_SAMPLES;j++){if(j>=ringSamples){break;}s+=gather(float(i),float(j),float(ringSamples),uv,blurFactor,blur,color);}}color/=s;}
#ifdef SHOW_FOCUS
float edge=0.002*linearDepth;float m=clamp(smoothstep(0.0,edge,blur),0.0,1.0);float e=clamp(smoothstep(1.0-edge,1.0,blur),0.0,1.0);color=mix(color,vec3(1.0,0.5,0.0),(1.0-m)*0.6);color=mix(color,vec3(0.0,0.5,1.0),((1.0-e)-(1.0-m))*0.2);
#endif
outputColor=vec4(color,inputColor.a);}`,c2t=class extends zi{constructor({blendFunction:t,focus:e=1,focalLength:n=24,fStop:i=.9,luminanceThreshold:o=.5,luminanceGain:l=2,bias:d=.5,fringe:p=.7,maxBlur:g=1,rings:v=3,samples:_=2,showFocus:b=!1,manualDoF:w=!1,pentagon:E=!1}={}){super("RealisticBokehEffect",l2t,{blendFunction:t,attributes:$o.CONVOLUTION|$o.DEPTH,uniforms:new Map([["focus",new nd.Uniform(e)],["focalLength",new nd.Uniform(n)],["fStop",new nd.Uniform(i)],["luminanceThreshold",new nd.Uniform(o)],["luminanceGain",new nd.Uniform(l)],["bias",new nd.Uniform(d)],["fringe",new nd.Uniform(p)],["maxBlur",new nd.Uniform(g)],["dof",new nd.Uniform(null)]])}),this.rings=v,this.samples=_,this.showFocus=b,this.manualDoF=w,this.pentagon=E}get rings(){return Number.parseInt(this.defines.get("RINGS_INT"))}set rings(t){const e=Math.floor(t);this.defines.set("RINGS_INT",e.toFixed(0)),this.defines.set("RINGS_FLOAT",e.toFixed(1)),this.setChanged()}get samples(){return Number.parseInt(this.defines.get("SAMPLES_INT"))}set samples(t){const e=Math.floor(t);this.defines.set("SAMPLES_INT",e.toFixed(0)),this.defines.set("SAMPLES_FLOAT",e.toFixed(1)),this.setChanged()}get showFocus(){return this.defines.has("SHOW_FOCUS")}set showFocus(t){this.showFocus!==t&&(t?this.defines.set("SHOW_FOCUS","1"):this.defines.delete("SHOW_FOCUS"),this.setChanged())}get manualDoF(){return this.defines.has("MANUAL_DOF")}set manualDoF(t){this.manualDoF!==t&&(t?(this.defines.set("MANUAL_DOF","1"),this.uniforms.get("dof").value=new nd.Vector4(.2,1,.2,2)):(this.defines.delete("MANUAL_DOF"),this.uniforms.get("dof").value=null),this.setChanged())}get pentagon(){return this.defines.has("PENTAGON")}set pentagon(t){this.pentagon!==t&&(t?this.defines.set("PENTAGON","1"):this.defines.delete("PENTAGON"),this.setChanged())}},WV=se,u2t=`uniform float count;
#ifdef SCROLL
uniform float scrollSpeed;
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float y=uv.y;
#ifdef SCROLL
y+=time*scrollSpeed;
#endif
vec2 sl=vec2(sin(y*count),cos(y*count));outputColor=vec4(sl.xyx,inputColor.a);}`,f2t=class extends zi{constructor({blendFunction:t=Jn.OVERLAY,density:e=1.25,scrollSpeed:n=0}={}){super("ScanlineEffect",u2t,{blendFunction:t,uniforms:new Map([["count",new WV.Uniform(0)],["scrollSpeed",new WV.Uniform(0)]])}),this.resolution=new WV.Vector2,this.d=e,this.scrollSpeed=n}get density(){return this.d}set density(t){this.d=t,this.setSize(this.resolution.width,this.resolution.height)}getDensity(){return this.density}setDensity(t){this.density=t}get scrollSpeed(){return this.uniforms.get("scrollSpeed").value}set scrollSpeed(t){this.uniforms.get("scrollSpeed").value=t,t===0?this.defines.delete("SCROLL")&&this.setChanged():this.defines.has("SCROLL")||(this.defines.set("SCROLL","1"),this.setChanged())}setSize(t,e){this.resolution.set(t,e),this.uniforms.get("count").value=Math.round(e*this.density)}},lf=se,d2t="uniform bool active;uniform vec2 center;uniform float waveSize;uniform float radius;uniform float maxRadius;uniform float amplitude;varying float vSize;void mainUv(inout vec2 uv){if(active){vec2 aspectCorrection=vec2(aspect,1.0);vec2 difference=uv*aspectCorrection-center*aspectCorrection;float distance=sqrt(dot(difference,difference))*vSize;if(distance>radius){if(distance<radius+waveSize){float angle=(distance-radius)*PI2/waveSize;float cosSin=(1.0-cos(angle))*0.5;float extent=maxRadius+waveSize;float decay=max(extent-distance*distance,0.0)/extent;uv-=((cosSin*amplitude*difference)/distance)*decay;}}}}",h2t="uniform float size;uniform float cameraDistance;varying float vSize;void mainSupport(){vSize=(0.1*cameraDistance)/size;}",p2t=Math.PI*.5,H3=new lf.Vector3,Ple=new lf.Vector3,m2t=class extends zi{constructor(t,e=new lf.Vector3,{speed:n=2,maxRadius:i=1,waveSize:o=.2,amplitude:l=.05}={}){super("ShockWaveEffect",d2t,{vertexShader:h2t,uniforms:new Map([["active",new lf.Uniform(!1)],["center",new lf.Uniform(new lf.Vector2(.5,.5))],["cameraDistance",new lf.Uniform(1)],["size",new lf.Uniform(1)],["radius",new lf.Uniform(-o)],["maxRadius",new lf.Uniform(i)],["waveSize",new lf.Uniform(o)],["amplitude",new lf.Uniform(l)]])}),this.position=e,this.speed=n,this.camera=t,this.screenPosition=this.uniforms.get("center").value,this.time=0,this.active=!1}set mainCamera(t){this.camera=t}get amplitude(){return this.uniforms.get("amplitude").value}set amplitude(t){this.uniforms.get("amplitude").value=t}get waveSize(){return this.uniforms.get("waveSize").value}set waveSize(t){this.uniforms.get("waveSize").value=t}get maxRadius(){return this.uniforms.get("maxRadius").value}set maxRadius(t){this.uniforms.get("maxRadius").value=t}get epicenter(){return this.position}set epicenter(t){this.position=t}getPosition(){return this.position}setPosition(t){this.position=t}getSpeed(){return this.speed}setSpeed(t){this.speed=t}explode(){this.time=0,this.active=!0,this.uniforms.get("active").value=!0}update(t,e,n){const i=this.position,o=this.camera,l=this.uniforms,d=l.get("active");if(this.active){const p=l.get("waveSize").value;o.getWorldDirection(H3),Ple.copy(o.position).sub(i),d.value=H3.angleTo(Ple)>p2t,d.value&&(l.get("cameraDistance").value=o.position.distanceTo(i),H3.copy(i).project(o),this.screenPosition.set((H3.x+1)*.5,(H3.y+1)*.5)),this.time+=n*this.speed;const g=this.time-p;l.get("radius").value=g,g>=(l.get("maxRadius").value+p)*2&&(this.active=!1,d.value=!1)}}},ph=se,g2t=class extends aAe{constructor(t,e,n){super(n),this.setAttributes(this.getAttributes()|$o.DEPTH),this.camera=e,this.depthPass=new uK(t,e),this.clearPass=new yv(!0,!1,!1),this.clearPass.overrideClearColor=new ph.Color(0),this.depthMaskPass=new Rc(new lK);const i=this.depthMaskMaterial;i.copyCameraSettings(e),i.depthBuffer1=this.depthPass.texture,i.depthPacking1=ph.RGBADepthPacking,i.depthMode=ph.EqualDepth,this.renderTargetMasked=new ph.WebGLRenderTarget(1,1,{depthBuffer:!1}),this.renderTargetMasked.texture.name="Bloom.Masked",this.selection=new sK,this.selection.layer=11,this._inverted=!1,this._ignoreBackground=!1}set mainScene(t){this.depthPass.mainScene=t}set mainCamera(t){this.camera=t,this.depthPass.mainCamera=t,this.depthMaskMaterial.copyCameraSettings(t)}getSelection(){return this.selection}get depthMaskMaterial(){return this.depthMaskPass.fullscreenMaterial}get inverted(){return this._inverted}set inverted(t){this._inverted=t,this.depthMaskMaterial.depthMode=t?ph.NotEqualDepth:ph.EqualDepth}isInverted(){return this.inverted}setInverted(t){this.inverted=t}get ignoreBackground(){return this._ignoreBackground}set ignoreBackground(t){this._ignoreBackground=t,this.depthMaskMaterial.maxDepthStrategy=t?xb.DISCARD_MAX_DEPTH:xb.KEEP_MAX_DEPTH}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(t){this.ignoreBackground=t}setDepthTexture(t,e=ph.BasicDepthPacking){this.depthMaskMaterial.depthBuffer0=t,this.depthMaskMaterial.depthPacking0=e}update(t,e,n){const i=this.camera,o=this.selection,l=this.inverted;let d=e;if(this.ignoreBackground||!l||o.size>0){const p=i.layers.mask;i.layers.set(o.layer),this.depthPass.render(t),i.layers.mask=p,d=this.renderTargetMasked,this.clearPass.render(t,d),this.depthMaskPass.render(t,e,d)}super.update(t,d,n)}setSize(t,e){super.setSize(t,e),this.renderTargetMasked.setSize(t,e),this.depthPass.setSize(t,e)}initialize(t,e,n){super.initialize(t,e,n),this.clearPass.initialize(t,e,n),this.depthPass.initialize(t,e,n),this.depthMaskPass.initialize(t,e,n),t!==null&&t.capabilities.logarithmicDepthBuffer&&(this.depthMaskPass.fullscreenMaterial.defines.LOG_DEPTH="1"),n!==void 0&&(this.renderTargetMasked.texture.type=n,t!==null&&t.outputColorSpace===ph.SRGBColorSpace&&(this.renderTargetMasked.texture.colorSpace=ph.SRGBColorSpace))}},$_=se,v2t="uniform vec3 weightsR;uniform vec3 weightsG;uniform vec3 weightsB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,weightsR),dot(inputColor.rgb,weightsG),dot(inputColor.rgb,weightsB));outputColor=vec4(color,inputColor.a);}",_2t=class extends zi{constructor({blendFunction:t,intensity:e=1}={}){super("SepiaEffect",v2t,{blendFunction:t,uniforms:new Map([["weightsR",new $_.Uniform(new $_.Vector3(.393,.769,.189))],["weightsG",new $_.Uniform(new $_.Vector3(.349,.686,.168))],["weightsB",new $_.Uniform(new $_.Vector3(.272,.534,.131))]])})}get intensity(){return this.blendMode.opacity.value}set intensity(t){this.blendMode.opacity.value=t}getIntensity(){return this.intensity}setIntensity(t){this.intensity=t}get weightsR(){return this.uniforms.get("weightsR").value}get weightsG(){return this.uniforms.get("weightsG").value}get weightsB(){return this.uniforms.get("weightsB").value}},Jf=se,mh=se,y2t=`varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
#if EDGE_DETECTION_MODE == 1
#include <common>
#endif
#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}
#elif PREDICATION_MODE == 2
uniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}
#endif
#if PREDICATION_MODE != 0
vec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}
#endif
#if EDGE_DETECTION_MODE != 0
uniform sampler2D inputBuffer;
#endif
void main(){
#if EDGE_DETECTION_MODE == 0
const vec2 threshold=vec2(DEPTH_THRESHOLD);
#elif PREDICATION_MODE != 0
vec2 threshold=calculatePredicatedThreshold();
#else
const vec2 threshold=vec2(EDGE_THRESHOLD);
#endif
#if EDGE_DETECTION_MODE == 0
vec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 1
float l=luminance(texture2D(inputBuffer,vUv).rgb);float lLeft=luminance(texture2D(inputBuffer,vUv0).rgb);float lTop=luminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=luminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=luminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=luminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=luminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#elif EDGE_DETECTION_MODE == 2
vec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);
#endif
}`,b2t=`uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;
#if EDGE_DETECTION_MODE != 0
varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;
#endif
void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);
#if EDGE_DETECTION_MODE != 0
vUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);
#endif
gl_Position=vec4(position.xy,1.0,1.0);}`,oW=class extends mh.ShaderMaterial{constructor(t=new mh.Vector2,e=cK.COLOR){super({name:"EdgeDetectionMaterial",defines:{THREE_REVISION:mh.REVISION.replace(/\D+/g,""),LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new mh.Uniform(null),depthBuffer:new mh.Uniform(null),predicationBuffer:new mh.Uniform(null),texelSize:new mh.Uniform(t)},blending:mh.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:y2t,vertexShader:b2t}),this.edgeDetectionMode=e}set depthBuffer(t){this.uniforms.depthBuffer.value=t}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=mh.BasicDepthPacking){this.depthBuffer=t,this.depthPacking=e}get edgeDetectionMode(){return Number(this.defines.EDGE_DETECTION_MODE)}set edgeDetectionMode(t){this.defines.EDGE_DETECTION_MODE=t.toFixed(0),this.needsUpdate=!0}getEdgeDetectionMode(){return this.edgeDetectionMode}setEdgeDetectionMode(t){this.edgeDetectionMode=t}get localContrastAdaptationFactor(){return Number(this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR)}set localContrastAdaptationFactor(t){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=t.toFixed("6"),this.needsUpdate=!0}getLocalContrastAdaptationFactor(){return this.localContrastAdaptationFactor}setLocalContrastAdaptationFactor(t){this.localContrastAdaptationFactor=t}get edgeDetectionThreshold(){return Number(this.defines.EDGE_THRESHOLD)}set edgeDetectionThreshold(t){this.defines.EDGE_THRESHOLD=t.toFixed("6"),this.defines.DEPTH_THRESHOLD=(t*.1).toFixed("6"),this.needsUpdate=!0}getEdgeDetectionThreshold(){return this.edgeDetectionThreshold}setEdgeDetectionThreshold(t){this.edgeDetectionThreshold=t}get predicationMode(){return Number(this.defines.PREDICATION_MODE)}set predicationMode(t){this.defines.PREDICATION_MODE=t.toFixed(0),this.needsUpdate=!0}getPredicationMode(){return this.predicationMode}setPredicationMode(t){this.predicationMode=t}set predicationBuffer(t){this.uniforms.predicationBuffer.value=t}setPredicationBuffer(t){this.uniforms.predicationBuffer.value=t}get predicationThreshold(){return Number(this.defines.PREDICATION_THRESHOLD)}set predicationThreshold(t){this.defines.PREDICATION_THRESHOLD=t.toFixed("6"),this.needsUpdate=!0}getPredicationThreshold(){return this.predicationThreshold}setPredicationThreshold(t){this.predicationThreshold=t}get predicationScale(){return Number(this.defines.PREDICATION_SCALE)}set predicationScale(t){this.defines.PREDICATION_SCALE=t.toFixed("6"),this.needsUpdate=!0}getPredicationScale(){return this.predicationScale}setPredicationScale(t){this.predicationScale=t}get predicationStrength(){return Number(this.defines.PREDICATION_STRENGTH)}set predicationStrength(t){this.defines.PREDICATION_STRENGTH=t.toFixed("6"),this.needsUpdate=!0}getPredicationStrength(){return this.predicationStrength}setPredicationStrength(t){this.predicationStrength=t}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},gh=se,A2t=`#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)
#if __VERSION__ < 300
#define round(v) floor(v + 0.5)
#endif
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);
#endif
}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){
#if !defined(DISABLE_CORNER_DETECTION)
vec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);
#endif
}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){
#if !defined(DISABLE_DIAG_DETECTION)
weights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){
#endif
vec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);
#if !defined(DISABLE_DIAG_DETECTION)
}else{e.r=0.0;}
#endif
}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}`,w2t="uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}",mAe=class extends gh.ShaderMaterial{constructor(t=new gh.Vector2,e=new gh.Vector2){super({name:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new gh.Uniform(null),searchTexture:new gh.Uniform(null),areaTexture:new gh.Uniform(null),resolution:new gh.Uniform(e),texelSize:new gh.Uniform(t)},blending:gh.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:A2t,vertexShader:w2t})}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get searchTexture(){return this.uniforms.searchTexture.value}set searchTexture(t){this.uniforms.searchTexture.value=t}get areaTexture(){return this.uniforms.areaTexture.value}set areaTexture(t){this.uniforms.areaTexture.value=t}setLookupTextures(t,e){this.searchTexture=t,this.areaTexture=e}get orthogonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_INT)}set orthogonalSearchSteps(t){const e=Math.min(Math.max(t,0),112);this.defines.MAX_SEARCH_STEPS_INT=e.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=e.toFixed("1"),this.needsUpdate=!0}setOrthogonalSearchSteps(t){this.orthogonalSearchSteps=t}get diagonalSearchSteps(){return Number(this.defines.MAX_SEARCH_STEPS_DIAG_INT)}set diagonalSearchSteps(t){const e=Math.min(Math.max(t,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=e.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=e.toFixed("1"),this.needsUpdate=!0}setDiagonalSearchSteps(t){this.diagonalSearchSteps=t}get diagonalDetection(){return this.defines.DISABLE_DIAG_DETECTION===void 0}set diagonalDetection(t){t?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}isDiagonalDetectionEnabled(){return this.diagonalDetection}setDiagonalDetectionEnabled(t){this.diagonalDetection=t}get cornerRounding(){return Number(this.defines.CORNER_ROUNDING)}set cornerRounding(t){const e=Math.min(Math.max(t,0),100);this.defines.CORNER_ROUNDING=e.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=(e/100).toFixed("4"),this.needsUpdate=!0}setCornerRounding(t){this.cornerRounding=t}get cornerDetection(){return this.defines.DISABLE_CORNER_DETECTION===void 0}set cornerDetection(t){t?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}isCornerRoundingEnabled(){return this.cornerDetection}setCornerRoundingEnabled(t){this.cornerDetection=t}setSize(t,e){const n=this.uniforms;n.texelSize.value.set(1/t,1/e),n.resolution.value.set(t,e)}},aW="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC",lW="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAYAAAABNmBHAAAgAElEQVR4Xuy9CbhlV1ktOvbpq09DkiIkUBI6kxASIH0DlAQiIK1wRfSJTx+i4JX7vKIigs8HXpXvqVcvrcC9agQ7IDTSSWgqCQQliDRBJKkkhDSkqVPNqVOnP+8b//rH3P+eZ+199tlznVTlvVrft7+1T7OaueZY42/m37QALKNk2wHg1pITlB17mC+Pp11W3X/LHyT32vhg48/5SOv+PnwpsHA70JoGlueB1iKApeqzvOzn44GatTB76Xzhd7suBR7+WWADgDEAwwCG/L54b/poDLrHuvvm70Z2Avhsc+PVcxscBU8F8C8ADg5+ipIjD/PlGwfgju8B924E5seARUfLsiNmqQW0IjL8+7L2NYD/7COBzfcCm+aB8SVgdAkYIRCXKyDax4EdAanL5PuNPllNvXDlAHwFgP8AcC2AhRIoDXbsYb48dl5WkVFTE3LGDcC9m4CZCWBuFFgeAZaGAYJQQCRqDHT+McJrVb8zwATUXH02MHYfMHEIGFsAxgjApQqACYQORjtd/B7Axt/z79sC0+cMPgjjlwPwVwHcA+DfAHzTxcVgWBroqMN8+cYBeM71wH0TwKExYHYUWCIAHYRLTlkCYgcIBcAgU/n3qy8GRu4HRgnAOWBkERhddPAJhGJDBxkvw7cqimr+zFM/ZLnZF64cgL8BYD+AWwB8x/dlWuWagHiYL984AJ/0RWBy1AE4AizyM1yxYAcTigW55xMbAkxEiwEdkJ/ZCQxPAiOHgBECcKEC4TBZcKkSv+mTieNcNPNC26mLNsj45QD8LQDTAO4GcJt/7iw2bfoG4WG+vAGwm9ExiEg69zpg/wgwPQLMjgALzn4E4aIzoJjQ9g4024uygkj+pyuAoX0VAIfngOH5NgCHMhAm8Sv2y3XDZeBhNIp8OzJE8OsBzAKYBHAXgDt8/4O+MVT0j4f58o0D8Pxrgf3DwMwIMEPQEYRkNwfgsuuDZLskip0No0gWMD/9HGDoADAkAC4Aw/wsAgZAgs2Z0ABI0GU6IVmKv+f28KDnHxkA/G0A8y6G73N9kOCjXnh/Ebb6OvgwX75xAF5wLTA1VIHPADgMLDj4yIA5AAm6aCUnv4oz46eeDwxNAUMzwJAz4BABSNDFTwSfg7DDKHE23MG5PqIY8A1u/dINs9dBdy8AgnGPM2NfUBrsnw7z5RsH4IXXAAcJviFgluAbygBINnSLWOAjGxJ4pgOKDV0v/OSLKp8iGXBovhLBBOCQM2ACoTOhnYrAdItYbCij5JFzRyIAqRccAnDAQUjg6UNQ7hsMXP0cRQAexss3DsCLCECCLwCQzMcPwUi2MwAScAKbfnY/YRLFQ8DHX+IAJAMSfDkAF13kLvleIjhjQQHxUVS3jjgGpKeeNzYVQEjgUS8k+PghONdhIwAP4+XXBYCHKIJbwJyDTgaIAdCBJx3Q2M8tYAHP9m4df/ylQOsQ0JqtRLCx30K1wtLBggScQOgsKBGcWHAJeOwRC0BSM1mQIKRbhh+Bj98JQP6t4U0APEyXXxcAEnxkQAFwoVUxID9kvQg+c1C7vidRbIDkc24B//hTQGumDcCWA5DgMxASdNIFBUI5pCML8v8API5zfEQx4BudgqiczviSnJhQwCP4BMCGl+wO8+U7AJi/W4O4YS6+pmK/2ciADsAOBhTIIiAJnPB7AvNjP+0AnANaYkAHX2JBAc+tYaJXOqBZv24Vc386XW5dtkHGW+4HFAJonpOe+YYQZAShgKjv3PNvPQaxVoI8zJdfFwASfPzMUwS3Kt1v0UFIlos6oDFdAGFcliMAP/ryAEAGNwQRnDOgLbdlIEwrIs6AZ/QgkMMHQF6ZAKQcJAsSYPwIeAIk9wJgoPK1gi7+PwF4GC/fOAAvIQPSs0URTPBJ/Pp3GSEGRHfBCIQ0xowBtUbcAj7ys5X4Jfu1HIAGQrIgQRXEsAFQIORDFhiDY/rMHmrU4QUgR08AkgUjCAW6CD6CkwBsAIQC4GG6fPMA3OXiNzCg2I9gNCMksmAAoemDzoimFwL48M85AKkiuQVMAAp8CYRRDAt8GQiJ67N6GJODAXAHlsGguscA2AJg1IPGYmxOpBxFWkRN9LsATgIwXnNs/v/5z/9XCf8BO3YAtxbc/46/KDt+5+ea1Yku2VUxHz/z0v24FwMGK1gWsK2OUUxHHdCBeRUB6OxHABr4ZICIBd0QWSF+XRdMTAjgCdTrG9cBNwE4F8CpDkICyYLGsuhFt6zs+gISwUen8zEAjgMw4cfx2H6O/90yAFo84Cbg4ID3/9TfLTt+5+ebnRABkODjx0SwPi5ec/FrYpmqSAxM8Dn60CsqAFI6GfhqAMiDE/gokmvEr0C4PgDkBQm40wE8zMFEUDKEVoxIMLl/KS73mE7H9d+vcKHQQcjwW0Yu9nP8m8sAmOIBuWY6wP2/4s0ezjjg8TuvaR6ABJ70vxUApGrm7EbGE+i472BAB+WHfqHS/eoAaEwY2E9+wLSXTqhI7CXgnB6LCoOJ4BiST+hTnG0HcCwAglCx3ARoZEVFXnBPp/O/A/hXACc7CPs9/i1lAOyIB+RDX+P9/+pbQjjjAMfv/PL6AFDs1wFAgs/9fgKfgdE/ZEpuiQlbwAde6QAMBgiRmsSwA9BY0JfjovGRDBMH4TlcXGhcBOc6HkF0gjPhZgchxTLZMAci/04W/B6Ab3t09EPXcPyflgFwRTwgJ2MN9/8bf5qFM67x+B/aW4XQz42FeL0YrRyikztUFw0704mf9kXgxhOAqc3AAsPyRxxQCs/PdXOFY0W1KHy3QIUGtx+6vdnx1vsB+dsTncm2AogglFgVEAlUWrOMB2RyEmMCGQ/Y7/HvKns6tfGAnJQ+r/9b76oJZ1zD8WdyQjYBh8aBhVEHjELouQ8ukQ7VRSCJAALwkr+sALhnGzDD3JAJYJHg9uhoi4bx8ytkWUtvHT/7+Zc4dw1uZ3612fH2dkQf7yxIEEockwkJQn4IQoq8unhAhmPRKKFx0uv4K8ueTs94wD7u//VX9ghn7OP4c+4G7h8HpseB+dF2AKlFLwuAIZ8jD6NPrOhAffmfA9/ZBuzZCkyRWSeqBCWyoYGQ5yQrBpDbum/ME1HoPo0XEkSD2zlfbna8q6+EUJcTCxKEtHL5EQjP6BEPyIgYAZBvYt3xHyx7OqvGA65y/7/9wVXCGVc5/sl7qxD66dEqiYgRzAqhN1A4CBNAAlDyAFI+iZ9/N3DLJuC+jcDUBmCWyUnOrmTYCMIOkNclLg0B8/RsNLg9+UvNjnd1APLmmQpFHyEBROuWACQT8nN+H/GAvY7/VNnT6SsesMf13/CpahGnZzhjj+PPmwX2MYdDIfQexWyBAwEUOQDrRDN/98p3A7dvAO6fAA5sqHJDBEAyoUVGkwEd6HR12XU4kwzfl6fCXTZzjy57vvnR513X7Hj7AyDvggAUi9EyFgiZqNxPQF6345nOWbD1HQ/Y5fpvuLa/2+82/vNHgAPDFQDnhoF5j2C2qBWCI8bw1eRw5CL5l94L3DEOTI4DB8Y9OWmsEu/zBJ3rgsaybqBob/7A4C7jtWcooRrczr+u2fH2D0AOQgAUCxKEP7aGgLy64+m6KdjWFA9Yc/03/Osa4glrjr+AupqHz1sEs0cxG0BC9HIePLoit9eNkVf9L+DuUWByDJgaq4ybGYLPAWgiXmLedUE7dwC7saL7CqfPKXi4NYdaykCD410bAHlDEsNiwZ9wAPYbkJcfz6T2gm3N8YDZ9d/wHxUA+739fPwXPrSKYGb+BuP3jAFDElFH9HIWwbzCIGkBr/or4J4RYO8oMOW6ZVcAuvi1Cgoha04BCwT5gfMKHm7NoRde2+x41w5A3hQZkADk5+cGiAeMx3+/7AENFA8Yrv/G71cAXFM4Yzj+otOAaQLQA0gZxaIIZtMDFTigKJV8H9Iq6aZ59ZXAvSPAvpEKgBTtBODcSCWCZeRYtpzrmLyeGNCAyFl1v+Hei8qeb370Rdc2O97BAMi7EgB/2QG41nhAHU9LuWAbOB7Qr//GPRUA13r7Gv9FZwIMoVcEswEwfDoimEP0shKKtIphaZQAXv1+YM+wA3DEdcvRKkGJADQQEsQuhi1Tjt95vBsh5nx2IO59SsHDrTmUOStNjndwAAqEry0IyCMICkOyiuIBNwBvPFQQT7gBuPjc9oRYAIHyOEL4vIFEYVNaOou5vCGE/tV/A0wOVcnpzI47NOri3QFIBpSeaSDUdYLOSWvYImSGgftpJDa4MWJbAGxivGUA5MAOc0Be6eVLj7/4Mk+hzCOYPYpZDBiNkLh+G/M3yFyv/ltgL3W3YQfgcFUhgRY2PwY+Z7/EhAR1SFyXCOb57r28QfQBsJQBMn5D4y0HYLPje9Cd7RIC0PM3EiMofF4gVCBp1P840ix/gyz56r+vAMjk9Gl375iB4+CzveuZdLkkEPJ8ZEfX/6R73vOjzT5Si9hucLxHAVg4PwJgRwh9CKOXK8YA4ZEqKZXSQWh5P+5AftXfA/uGKvYjCKn72cctbFrZNECka5L5CPwIPtMH3TVz17MLB5gdLgA2Nd6jACycHwLQxFEUSR5ASvARDB0h9AQb9bXIgCGk6lUfAPYTgEPAITKgg1BObk58srTJgG58WMkWMaAbQQT1nc8rHGANAJsc71EAFs4PAagQestgC1lsBJ4BMCSOK6dDUcwqqaFiQr/0QeAAAdjy+jBiQQeeMSBZT3nCPUDIa9z+/MIB1gCwyfEeBWDh/BCAeQSzgkjFfGLBBD5nxQ4DxN0wv3hVxX5TBGDwL5obxvVA5YqYL5BeMLd66YYxJpRB0gK+96LCAdYAsMnxHgVg4fwIgMrhUPKQ2C+Bz0PmBTqBMQehAbDlIjj4F80KJguSVZ0FuXpjoCOgXawLjALhbT9eOMAuAGxqvEcBWDg/l1IE05Ed0ygZnyHdz0VwCqEPIfNyx0QQvvLDFQCp+8nfZk5und8tXwIgWcHSNX0N2CJmnAl3v6RwgNnhl17T7HiPArBwfghAS7mV/hey2JS9FvM3BLpUUi1YwDRMXvkRYJoAlAh2l0dcZ04s6JUTDIjyBcrl4yDc/dLCAdYAsMnxHgVg4fxwKVwJgGEJNmWtxpQMpX9on2eRhVA+O56AjMfnP+e3Xvf3NwG4xIPTleiY55bpGh6UbafNU0l0z0p+5Jh5HqYJ6b51nP6XP8cx12XNHQVgIQB/bFPVg2OC7Q+WgVFWng/FvtWLI06uWh5oguKEcXVS/9sEAF//VGD7t4ETDgJbF4CNi8CGZWBs2fPL/H6Vwp2KEtVk4fJ+v/EIYPN9wKa5qu+IncfPwXHVZe/aOL3EbwS7xv8A1rQvnO0j8PArTgTGZ4BxFv9mIxhOCGsv+0OPYDRghcLfkWkEuq0+G00x4OtfDGz+d2DbHmDLjL8si8AYP/7CGIAiEEMTG92zXqSbH+d9R2aA0XnvO+JjthiIrOVDHHPOkBrzUQAWAPsZp3oPDpa/Xag6EVkLBK+5rAnJC3/nYk/APD704WiEAV8OTHwX2LQH2DgFbJgFNrBhjd8r79deGoEwsllgNBOzy8CdjweG9wBj08AIAci2D6HafmyAk4/Z7SJ72hGYRwFYAMDLTwOGp4FRFgD3HhzqRGQiyeurqOdG6r0Rm8IEZjzRlkiqCWoEgK8Axm4BJu4HJhyAbFhDxmbDGnZO4j0SgLGDkpibgEq66TJw/1nA0F5gdLpq+zDqFfd5LMeWqu5HNST0uJOIllg+qgMWgI+HPv0xwLA3gWHpW2sC441gCECbmKziaGrnUdMO4aHeh6MxAP4SMHI7ML4HGD8AjHvHJGNAgpDgY/ck3stipRemvVhc+uASMPUEYGh/9dIRgGx8Y+MNbR/00uVtH0wEx94j/v0oAxaA8Ed+GBieAYZZg5kADC0QWGOFzGJlcGPzl1BxNLXD8sk4xftwNAbA/wwM3wGMUmxOOQBnHXzetIYvibonmSiuYTNjriVg7glAiwBk0fNZH6+PmX9P6kfNmCXGpftJ7TgKwBIAnln14BAAYxMYm5C6RjCyCoOyr0qkD/c+HI0B8DXA8N3AyCQwesD1VQKH7EcASm1Q+y4CkN9pUKiVF5nLvy+fBbTUd8QBaH1HvNBROiZvfsNnrF4kcvPwpdsBLBeU18Nf7AB23Dp4ecHC8oBgUlJJecLS+7+WOpE3gbE+HKw+yoevCYkMGKqPJrdEKARutaFYRs1fiEZ0wP8CDN8LDO8FRqYq3W10pgKgfYLaYCzootgA6KXaTA90y374TKB1sBozy77xHFZ536utRgAmEaw6g5kUSFZwSXnA330qsOlfgHMPDlZesLA8IOjoLypPWHj/11EnCiVwkz7kAExtsGraYUWdSDX5TmsagL8KDBGA7Bd30JsW0oWivnEOQNP7yGTSBR101AlZSUtGyfgZDkCWY1HnJdcBVe6325hTvelg2CQjZNDygG/2An0j1wKnL6y9vGBheUC8prQ8YeH9X39OVQSc7Mc6fCaKvAeHdCIVf4yMYCynTpX+nb97NJmlSQb8r8DQHm9YOFUZTKOzoXGhs6AxF0HIexcLBvWBuiHN8s2ne98R3qc6L4Vyb2oBVjfm9MIFHbjDCh6kPOBbQoG+oW8CO5bWVl6wsDwgfr20PGHh/X/1iaEIuDcCTIW/1Q4rFv8OnYiW3c+W2iKwUjKbyjQNwL1uuR6sAEgDgq1brXOmV81PxhNB6DUDBSYzQJwFtz623XcktX1Q1VWKaTF/zZhVazBVYA1tX5MazsGvobwe/jQr0Ne6BTh5uf/ygoXlAfG60vKEhff/rSe1i4DnTWDUACY1guFTDqLYdCBvf6DJYSMYATBfOx1kLfj1v1axH10nQ3Sd0GUkBnTfpemtBJgseIKQAHLQcVxa2TnuMW0Aqui5es8xBIegVdVVE8VhzHnLh65WMB9An+X18K6aAn2tO4ETl6vqbKuVFywsDwhevqg8YeH93/Rk70JE90nowxZbIJjvS3WYNSGUwGHJTpPxwwcbBuBrgRYBeKACn7VtpdUu/c0NJxO9BIxcKu4TTODzbkonPLoaL0vyUQRb2y8HsL1ckfWzMeuFi40Qezqi+yiPhyt7FOjr6/gCFwgP7Xb5vssTFt7/nQRg6MGRWmDRoeyTlpgw68GRTwgZgo1gGmXAX6/8dtaylSKY/koyID9BhzML3q1gAos2AcOrZYSoq/pJp1VtODRm9Z3LS/7WjVkvXOzEtOpKyGrlAT+4SoG+VY8vBGCvy/dVnrDw/vee65NBJiAjBIVcAJQjOm+DkCZEeiGAMw6sAwDZsJrAdhFM9rPGhd4904Co5oVuCZPV6kD40Ec6+9W8dBTBsfdc3nkpvnB82fp2RPcs79dHgb51LA9ofsDV6vut5/3PnxcAmLVBiDqgevDaJLkYrpuQxzcNwN8AWgIgRbB8loEBzXDwl4cGiDGft58SCOWGedgjvOJ+bPvgRkiuA+ZjzhnQQOiFNVbloa7l/fos0LdO5QENgEXlCfs8Qbf7HyMA3QVjYihYhLENgjX9y/qwxQmRU/asfd0ZcLU2CHVGyusJQLKfVi98CS12T5f7iECkHpsMkAhCF8+nshWH2I/jXsOYO144GV/9ApAIrS3vt4YCfetQHtAA2G+/4PW4/2PPbzMgmUMi2NoeSCRxIt2/FvuxWURIWCXg357gfTjEDNIHnTRXRCpH5ugKwGl3HpMBXQc0v6WLYVm/5limj04rG762K2uYY9jBkr9+rI03NL5ZbczS/dJ+LQyoga4o77fGAn0NlwdMAOy3vl/T938KAcj121z8Bn+Y9eWQJRz8Y6kNagDh2ey5EvxjxQD8TWdAuneCCO4An1vw5vdzQMmdktwq7pLZQR+dM34+ZumAxvY1Y04uqOAJ6FsExzeto7zfAAX6GiwPaLWR1lrfr8n7f/Rl3QGzmsis+/uO71V9OFgP2gpPhgr7TGRqRUT6dyvr4aIs/pm/2zVUNbBSv6G8e5pEv0Cvec7Po7+bTtjlBRlkvAMBkDeQyvsNWKCvofKACYBrre/X1P0/oWEAnnFD1YdjhtXxR73mX10FfCHHE9pVWcGAI/S0gKsfA2y+twrFZw6Hxf/F0Pk8Ri/kpGSnMuDx5T0iACgQHioo0NdAecBUHW6QdsV2/cL7v/Cyqr5gnc42CCOcfX1VIZ/V8We9IDmTzVXwPDJiXuKXPxtDBma8+lzP4WAgKkPxCUAPE4v5GzEuMX0PYJPLhB6FJsc7MAMmkVxaYC/K9gG+F1++8AQ7Gwbgk78I7GFpXgIwFiRXOwaJZPUbiR0yCUDRk+cHf+YpwMj9HgfI8ClGPyvsSiH0WSKRuYlitLb/zHM/JOSs5C/YIC9cMQDZr/dwxgOW9gtGYUBi0wA8l304vDQvAchilFbpIBQhZ7Ejq6ZQ0/Yhil8y4j89Axie9DAsD6FX9HOK3QtROTFkviN83kG4felIY8DCeLrSeMDSfsEovAECUFsTjHD+tcB+tkFgcXKvBRir7qtFl9owmO4Xy/1G3bAFfPrZHorFNWBFwHjQAFctIghj2kBarw06If/+MM9ZqTN6DgsDojCerjQesLRfMApvoGkAWh8Ob/tgAPSKWCp8ngNQtadjmTdltvNvn3peFYhgQQgh+iUmEaUAUoXM1yRLmWuFLaE9Z+XIAWBhPF1pPGBpv2AU3kDTALzwmqo6qtVh9kJErAudABia38TC5wJgS2xIhAwBn3yhByL4EhzXfRXxYsDTJ4IvrNN2JFMxZcBzVo4cABbG05XGA5b2C0bhDTQNQLZBYH1AVsQSAAU+imI1obHyblnjG/kJk3U8BHz8xVUQAhnQIl5CyNgKAGp5LKSSCoAySh5Jj79vTagcxUaIBeRNe79g9gq+DXig4wGzy+PONfT7RWFA4noAkGXZVAhcBckJQgNgrLiaNb3paIDo1vHHX+oA9LQBi4DxJcOUPJUnTgU2NJUyROs8irGARxQAC+PpCtsFd40H/AEf0gMQkLgeACT41PiGoLOKqyrJq3K/Ya9mNyr5FusN/uPLPIeDa8Bc+w3rtyl4VFHaMZc3i9RWBM9jjzgAFsbTFbYLRmm/YBTeQNMAtD4cBKDXBTQGdAB2MGBo8SCLmEuS1AFVAJ3A/NhPt0PoCcA8bSDG76XI7aySg6JYuGfKwJHFgH0E5B3ueMCe/Y4L+xVHAOZ+9EHcEgQgwbeiEYx6jwTdz4qfu7EhEJqxGqruf/RnHIAEnxgwBM0aC8aUAYWNBRCmoIll4HTqO122QcZbrgMWxtMVtgvuOx6wa7/jwhtoGoDWh4MBJ16WN4lfr8AqI0TVV1O1fa9BbQzovkAy4Ed+NgCQUSxZCFWvCOaOFREXyUwZOPIA2GdA3uGOB6wPaOz+QPv5S+MA3OXiN9aclghW+d3IgupBF2pPqxcxGenDPxfSRh2ASiKKiVP2PaZScvAKoA0VDc6cOlIB2GdA3uGOB1zR77iwX/F6AFB9ONSOQW0frA50sILVcckWJyIDSgwPAVcJgFbYuZ3FJvAlEHbJ3IsgJLGedeBIA+AAAXmHOx6wo99xYb/i9QKg2iAIfDJEJHqj4SExbEty0gkdhB/6P9oZbBZIGiKYVb9GKaN50lRHBLOvhDxh/5EKwDUG5B3ueMB2QGM/grb7/6wHAPNGMAY+GSGUjC52VX2f2CD4+HO0gqkZfegXKgBaHkcWtS0AWii9xG1ImrLlN5XR8L8fmQD05BVrmEENmpYSP9QX+KHiqj2/82+HqqDWwnbBRfGATdzAegGwru2DpRq7Mzq2fpAf0Nq0Rl2wBXzglZ4yUAPAmDSVWDBPHQjLcgTqOZ6zUvdKHh4ruDCerox/Dnu7YqwXAC1NI/QcEQuK6WK/kdgCTGC0PYAP/KIDMBgglq+hIkrOfsaCviLSofcJgJ5AdM7kkSaCj/HqQKVIGvD4swF8bcBjmzjsaQ2H5D/6acBd9wALB4DFWWB5AVherMp4GKIYEOp7+26UF0aSfT/xYuDG7wDjrIpAERytXf2vajj7ueryQXSFl10K/ON3gIWDwCLvjfGB8Z54O+Ee4ve6513uB2R1yzsqC+twbC8HcNVhfAeaBuDP/TvwtS3A/ePAIfYFVlPq2HHTuyulZCTlhbjhETF5yxTQGgPGhoHhIWC4VSXGD3n0tLkMHXHxu+YyB+MlPwDuZs5K6FlsbCzdVO9DuKfkHM8AEkP7B8fOkwDcD+B7np42+JkGOvKdAL4E4K8P0zvQdET0b14D3DgB3D0B7B8HZka9WzrD88N6sFm+YcUjrn7E1ZDvMtF9DBgeAYaHgSGB0PNHCD4BLwLRsByAyX/ij0/dDUxuqlIG5hix7eFhvLcOVUAtyPSydAFmOQNe6EYGV/9ZESiKgIEgtbaD/gHALQC4ovY5r5KwtjOU/XfTAHzzLuCmIeDuMWDvKHBwpMoN0WQzNtAaYSs0K4ZlOSAjGG9kPjCBRwZ0ABKEBJexYAZEAU3A7Oi1BeDym4EDnjQ1TwCGWMW8MXcKks0YOyZNlQOQjcgYIUHllEzYQ0ktm+r6oz8G4F4AXwXwRd8/kO9A0wB8y65KmPxgGJgcqYJTKYpTv2CCzyddQJRDOjKivn+Deh8BF8BnwBtaCUA+YYEyAU8h+c6Az9gNHHRmrgOgmDA3jHQ+iWupCeUAvNSrA9HNwqx+muk9nJVNg/CTfrmbAPwbgK8D+PcHkIibjob5o13A3XypWsAkG1cPA9PDFQDZM1id0i1KxsWfOrKnAFXlifCFFMMRcASigOcs2MGAIfE9iWXplS6On7UbmPaUUTXQrgsVMzcRj5Folg2V5ayUA5BWYKwOxKUafnosWjcJwk+7W5F2EKvlE3xcXaNYfiCYsGkA/smuqug6hcleAnAImPbO6YwRpMgjCAVAm/yQmKTv5hNsAf/i7SyNBSl2a8Qv/4/M1yF+BZSYlNQCnnVrpbC+mToAACAASURBVJcaI7sOSEY2NpaDXLqpR+vE/OVksDgImgGgghHoYJbTWc7oJtFWc65/cg2AYvh2ALsB3AzgVv95nS/f4QdsIkT9T3cBrGtITWZfC5hqtQHInsEGQn3UDDvEDEY/ICf7SxMOrAg8T+c00JGkvHGd2DABUYZIAONzCUDppCFhSukCBsLQrFtZe/IixYQpSyEoJoqnuPWrVRAubQh83HNlZB23z7j1ywmj6CIIqUPxw2Xeu9bx2jx10wz4Z7sqTYZaDD8EIDuoE3hMVEphWg66JIp90k0sBxBcy+iPIIaT1RtEsHS/yIAqw+VSNPWQfe5tlVEk8auXgVa5BUsEJuT5uoliAbE5AGotmIAjCPnR9xDG3TQernYAUupTdBGEFMf83OkApHG+XlvTAPwfuyrgSZOhas3u6cwTsUBVn2gTwyFMi8wjHZAA1M9fYGHDULJD1m8Cpa8fRxDad+l+Ykf/3XNvd11U+qiL39SxXevSsshdDFvgbI1O2AwAtRZMZzTBRuDFjxe1Xg8QEIB8yyj5yYIUxfQIkfkIRnmHCM712JoG4FsdgHHp3ACoMH2G6jM4lWzoQarSvwQ6MSB/vporVaFkh+mCLlpVR8Z+dqDZLoDOpHSiQeAFDkBjPrlgCHgCUaFifg67H/9uYjn4Ai1vpTERTAASBaoQJBAKeNqHlL6mwPDZYAOROag/EYRkPX34MwHIvzW9rQcA+TLpI22G7EcQKlJGsYIJhC6ClUMiXfBTbFUQAej6nPS/OuAl9pOOqIc2BLzg++3VmWgIEUz82cRuCAtLIHQQm0gO52uOAb22sC3JEWgRfPpZf2sQBQIgLydPEIFGwPEj8MlF2bSbsulghLftqsCXq9HGgHysznrGgi5qzTUTFH8FLhAUn3hIJwCN0HLncw37qaF2zoYvuKNivmQIuUNc7GvWt6sHNs26twA6vhyq8NEMAHlyntFrDCcQehyaPTl+FwAbXDcmAKMRThakEk8Q8kPg8SPL0qzLBl+A9QCgR6uZGs3vfHz8TtBZvkgGQrEPBVAUg2Sij50QAOjiVKI3saADJRm7dSLYWfSFDkCem/dhZeMy9pPY5QvSDYQyUJoDIK8qMezh3wY6fSL49PcGgCAA8pScJLIgAUYQEmz8RPA17StvGoBv39W24eREiBoNQSgWNI1HBkdgxJSw1AI+dFIbgOYmkjimQ1r6XXC3rAbCHycAgytohf8vsB/r2KRaRq7zpZ+D37HMX0s3DDcCUGLYaw53MJ4YUODzusqlGCQAOQCejuxA8UULUkxIwAmMAp8Wa3qkN/R9W+sBwOhIEPjk5SLr8HeKFbTQfb77csPIMHGl/4MPbReslPhNe4+MiTpi9AFGV4nI7MfvagNQLh/pfrYnDAS8aJQ42A2w4em2cAyWQUuJVQTGWLs1uL7DG9J1RjhA+jvYk4t3KXeMqijpzrud4At9z3XtP16yGfjKZmCGooYh1tZzvv8xXPFl4PoJYC97k9FlwZWD+Azi/deMZWeP13eQCGEyoERudChIjbb3mJYwH7V0QIKuCwj/gfMj0asn2I0FXRSHXfL/iRkNgLyeVj8ccMY//J1fyxzTAXT2+xoQViKYD/1hDqLxPiYxTgSvQrphphG97tz4Slqafnj7uk1kIQDZrvWTw8B3jwEW+RLxPgSiCERdPwPR7+wCPg/gulFgfruDkOMQkFc5x84e708JAMmCuRNBXi4TIg5CGRzGiBGE/D4E/C2r2vcAYJoify62i0aJSMhB+2IHoNwu0fkcjQ85pu3ack5nIBREqneYFyWLkAXIJHESe00Cyx5QyeL6F/tyEcDcrOW2n7fX8df0mME+/vQ/PQjhoy3gzo3AISYf80MQaQx1peH9wb7v2mrtmCBkIMMejp3jIJD1MsaxaMZ8v5N/67INAsB3BAYU4JL4DSo1J15AFPAEwuQHZJzkKfUAtOHLJSOQRWndBYQvCQA01cfnNopfsaCJaD2baBn79QjSTiOEP1EcawIpkq2kegBTNgHWEpOKF8Uwq2NRFPM4AqCf46/rA2U9/uVDvurB01zvAJpiiwOl3fEeciCGF+Ij11f+QkbSfMPfIzqw57mEFZ9Dl3Ps5HXWAYByHJAJKV7N+s0cCQQhwSlfm4lGZ0KB8C/rABgZUS6ZHITBSEhCowUYAAksF7cStWREyxRwtuPpOlgw+5s9sq6OaIJIIlUgEhA1edoTgHxa9HVw5jibZNF+j/9yGQA/7pbujZ4bwv2+cWB6tFo0NzYnkxFA+cvEAo43VBoEo2e+48EMXEOmD9F6xhCE8RwZEJ80VblKvDlmzwicfqy93/o+8K8TwB2jVSgW138FrJQTXBNlnJgmrjZwanow9CBP/rL9wF0jwAGWDtFyoN9PHutnIHT05mPXz93dMGQAPniJsjiBXiTbxDZFMF9NLUPQxKR5qezz1Y6/YZDH0D6GkdAkYJIvRalAdHAMmPZoYhb6NhDWvEyf/ma737CXN7R1ZC7hUbPgcFgqt/ZZjADnM1xqEVhYBpb4CUk5UsL7jQvj///5buDrLeCOEeD+YQchYwG9VIfyg1NaZszFiCH6DkRGLze5/dgk8IMWcMCjdCiCzR8od1B8OTwvJM8JEShFut1fzMhi+eRJr6LI7hYP2M/xVLwKNoZjUTwRMAQQmYyhWGQxsSADOflZ4kukj7PhZ75bETjBpkAGahMkcrGgwhsXeCyBHBj1wmOBQwvAwqKzoFeRV8ZaerjKYAuirmPY/o9X7q5Cyr7fAvYMAftCPGAEoYlBiVtFwLjtp2U4irj7yOANbi+crHyrfCbTquJV44O0F1FrwQGIMZFqdQDyP/gGSZ8TC0ZRRsOlVzzgasd/u+zpMByLehAfCgMQCDyGZJHFCCgLZ2f8mgI5qauEcVx9e5vACTgCTwEMWr5TdIpWKJb5MvrnoocDswvAPAG4VLGg6UKeqmi4iuDz4er30oX0FP7u5moMvIf7W8B+jwlUNAzFnlZCIhvGFRCeWzrgXSSIBreXTFZSgVLHAp4UHOFuociEEsn2PJwl/XEk0dzfSojeerFg1IOo5BKAveIBex1P67lgUzgWQaJwLAKRH04i14ItgDKEtGsRnWx49b2Vkk9wUefTGrKCF7R0JxZMqxN8cmPAxWcAcxGABKEAKPA5u9lEaAbCmKMI+sDN1X3z+ro24wEZFc0VEE64ABgT180PF9ZdBcDb6JpqcPtPk+1ACbmKjJnllwyuILunEAWjZHkBsrsRUnfD0qEiC5IJfyisgMhzWhcP2O14Ro4WbASgAMQJ48SJwchmBCDFa8qpyBbSP7OvU4PQ0p2W7+LSnSJUFOrI4V7w5IoBTQQTfJ6oTSYk2mQcpGRyH2syGjIF6EM3V/fM++C1CfwUExhCsmzCaQT43lZC3e1hBpEHh36XEqrB7Scmq5dV0XZxmV8WuDFzAF9iwhow9seAGoBcGtKjqAc+1l9rLb/1igesO55ysmCrC8ei6IxRMAKTWNBi6Xw98xNTFUi0jEcmpYgRAPhddpVi9OIEPP5cYD4CcLkCooHPwaW9kV+iwWrQHT8uA1fd3F7DFvgUHUP2k8jTiogAqLoxFpDgbMj9jXSuN7i9dLIdaxzBp5XVBMIMgFEnFAPKT9qPd6A9BIGI7MfPmf4U+40HzI8nWgq2PBxL4FEkjKJixGRRFyQQPzzd1iAUzCAQas1YOmAEoFjwkecDC/PAwhKw6CxIkCXwOdVJLxTobMjBdyIgfvimNvNJ7Evf4jWtdnRYD1YNGVuG93VWuWs4Jf+mlZCCZxwP/cnJ6mXVKk2+tK8lQQVHRTGc64SDAZB3Ey3JcxyACkToJx4wHl+YwqloGDICmYmTFgMQFBET8yyYzyAG/AfWX8mCGQg0BTRoHwt9KVaPE/HQ890AIfgWK+CRAaMRYnVdxHbhdY8Wslw1V93UDsmPIj9GxgiAioRRMIJNvoti+SW/Ikd0gwAU8+XxJcbGITJPDvI6XdCFREFSknTB83xka40H1PGF9dnycCxFwygkK0bASJQSVAbAYeD98xUAe5U3jKIwBosSgNsuABYogl3/IwgFPrOIg1Xc4ZrpAsSrvruykl2ucykapkMMh4CExD5DwJfWAYAxwk4MKPAJgOIjGSEGwuCakRhemw6Yv0UUwRf7L00L9pnsNx6Qx4feY4O8pDEcixOjsoTKKpMYjSFYYjOC8Eq3Wnnr0YYS+0Tmi2HysrPGLqwASNYzBnT2Mz2QD91laxLB0gs12GAh81cf/o/OcHyJ+qj0S/zxnhUZbSyYWaL8+Rq2S29wowiWkJPan4MvgrDDGAlRe7KIywDIgR3meEDWg9HbJgApNTkXo8o0i7oVgxnEgFr8F7jEdnU5GvqfJQKQKyEOPlsNIQvyvupAGHS/Okv4qv9oh+PHxMLk8ggBCRxvAmEN+AiEzz2iQfQBeNmkh4K52hJBKOaNe/FSLobLRXCz43rQnu2yi9oMSMDxs2jo8303ERz1wsCGZECF4kd3DwEYYwJjhoNlQrgIjlYodbBPrwMAZfEmyzcIv27gs6XDzC/IR1DOgA9a6DRz4wZAsZ+LYXvQYsHoD4ziOFklna6YD3+nnU6dZ7bGDAcBUImIAmEUw/zbJ1i/scGNDJiLXmle3RhQ+l/aq57gUQCWzwwBKPeLsZ/LFrGg/ShRXAe64Ajkv30kALAjF8R11Dy3K7KRwJcsUTaqWScARou3w/INVnCH+A36n8RvM3nB5XP4oD6DATBYwGb5ajlOLOh6X8JaBKRG77+7ygGYp1bn+V25/01AzBnwQ1ypanD7KWfA1QDYC3zJIj7KgOUzc9nFbetX/r+O5biwNhyX5uSEDr5o0xsJwLp8/m4A7GaJUv/j3/5+HQFYJ3oFPPkho/hNeqBcMkcB2BAA6XrxmMBkfFAci/m0JpwzXw0TXvXtzrz+PKc/Ml/ugzM9MDqCAbz/keVjjGcQA/YLvjoguo1mRslRI6RwfsiA5nqhL5D6nscF8gfTdfxpS+/hLzvWfzMQCoB1Fq/8b3VWaPIDZqsRV64DALsZHVHs1gEvsqFAeBSApQC8pHK90Oql4UEAyvCwNeGcBXNLOPMLftgZsI75ouUr9ousp2TEyIJ/sU4AzC1e+WIFshyAHPZREVwItrrD3wGAhibTYBhxVpe/xePyrNBuWaoNp3DgFwC81O+RAepK/a5Lfe51jxr7JwA83nPXYgq1asl0yX5N48+f4VEGLATlK1vAo5YB1gBSRmsM+NFE57lcfPD5pPFWCJImtyvGgGfOAacBYO59zFglgHgPefZsXV6/gPXBYeC0RVgyJNOGYuJjPka9eHWgjL9bWzhWk0/n/wPn+k8bgFNmgYcsVflZnBRmIShtJM/m7JGibGBoOIIez9wKPP4AcNpylfbNlGfdI+9NjBjz8JVzppckZuJ+dBw4aQ44drk6j1LIY9JkPD7P4s2lwVEGLHwJnncscNIh4Nh5YMsSsHm5ndOu1BGFThJ8/K6JrZtoslST2+XHA6ftB05ZAE5crgAups5TfaL6EF+UyIif3gAcOwtsXep82eIYY9JkXpMgMp/AeZQBC2b8OduBYw8C2+aALQvARgJwGZhY7swEzbNa88IRvAVO1qkF91J36DNOBE7eD2yfB45fqphLnevzdGeBKBfL8UX5/CZgyyyweRHYsFwxYHzRNK6oetSBMDLjUQAWTPqPngpsnQK2zgKbCMAlYMMSME4ALrcnR6JYQIwsoUnjpDRstOLy7cBJB4CHUGwuAtuW2nUDVH1EFUhycSwWjGD64mZg0xywcaECoI0z5P3X5P6nWlHdgHgUgAUAfOYOYMtBYNMssHEe2LgITBCADkIzSJZXpCOnIg25uPrhgnupO/TyhwLHHwSOmwW2LVSik2pCrDsQskzNIBGIpBdGI+VfNgMb5oENCxX4yPRjPj4xaJ0+WGeEHRXBDUz2Mx4FbDoIbJypADixUAFwzAFI8KUJChMV2SUaAGc1cE/xFJef3FYRti64nkqWDrqqEhbrsm5zvZCdPCd8nHzJOLZuABRz9hTHZwPL7LnLnoNMIY2VyaKcjtZLHOAbNgNPngKe4BacfGF1pnydD+hphQ/8XV5UiEueLGnDN1tWXj/3/4cTwAUzwGPcRcFJiDpPt3FLmf5vjwE2HAQ2zPrEzDv7OQg5OSM+ScYQy5Xbo8465u/ZfLTJ7fKHAdumKxVh8wKwealSE6inEoSy2MWCdbUHIghv3AqMzwHji9VLZuDzD8cXxxWZs5c7apmW0fMBnIHKn5X7d6I5npvRz94O7LgXuGIReJSb+Xl1tzqflybwRwqf9i97BQRWomWJQ7oZVFtJoqDX/b/oGODsvcBTATB9gsfGqmzdjtVz+G+PAyamgYmZCoDjFE2anCVg1CeJwOMnTRB/DmUINVkkgia3y08BtkwDW+YqAFJFMD1VAAw6XG61R31O9/fdrcDYPDDmY0zjc1UjivBuAMx1QdMB+WAYXU8dhEU16dOSkppbcHFSrng8MHwnsGMPcN5ypURHp2xMIa7zDz2z8Gn/kVe0YomO0wEwBYKujL7v/zHA6C3AxfOVh58g5AsZxx4fZM7sf3h6BcDxWWeGBZ+cMEFiwGEHHRnDzun7ONHs/djkRgBunql0VDOSHIDU3cxSD4aEajhFXS4H4S1bgVGN0V8we7E0Fh9jVDG6Obr1LJMRwn+kOCaTEYT0dsfqZHXl/p7PrLi9wIY7gO0H2yAgCAWCWCowKrYE8nMLn/a7PQn9X7zIJPPkCcK+758y7x7guNsB6l98gZjLLYet3Ay5n0sv4R+fCYxPA2MOwLEAQLIDPyP8uBg2cRYmzFweAYilKkn+OC8/Fdh0CNhEA4nGA40kd6FES13WLO8v1qHKAfh9B+DoYjU2Ak/js/8NAIwg7OUb7LCC+WAfB4CpBJoIiTRNRmS1l13kqWh3Adv2A8cdqqp1MB+aIOSxWv6pq5D2kkIAvt8rF7BLJksN/jMqfa7v+7/Ak4B3A6ceqpasKMq5akAmlLWY37t8ZW97PDB2qALg2BxgAFwANEGcnI5JcrDZRPlkaXL4u1KJUAfAjbTQ59x6dSvdLPXAgGYshZWR6JIRaXB/NwFI8C1WwLMXzMeSwLfcXuKrA2G+wrLCDcN/IIg4ERRn0qvyySAQX6mG1XuA4fuAbTOVwktRRr2MLCoQyvEZ/UY/WwjAj3jtFJZkU79g1ghkgEBf98+0Umb/3A2M3lkBl/fOcdMok2EjkZyv8773LAfgHDDKjwNwxEUw9yailpwdxBAEYhBbAuGzG3aKkQEJwAkCkOCjlb7Y6SYyf2UwlAS+vKYnAXjfNmDEX7DEfA5CjUcsnzvbu1nDtUMmCDkRZEEyGdlAk6G6lQTSa6m0MP6HuY73AxNTlcJLZ6WOJYC5/CNxLpHMgdKIKNl69Qvu6/75AjHOiTU87gKOOViJb748BKCWrnK/maTA+58AjM0Ao7PA6Lx/xBAupoYDC9okBRAmPdBZ47lNA/DhwMRsxX7mPgl+SrmK5EaRNRslXFQ9CKB9DkADn79cZtkHFkysJ103eBbqlh97DpmTQTYgk9VNxu+xYbXKU3lhFoJPOgdFGY+lPkgQxokkgF9Xgj4AvfoFs84eX4Ke9x9fIC+tRfDxvvniif358sSir2LCj5wNjBKAc8CIi2AxxLCzIAGY9L7AhGIKgpATw4l8wToB0JjPrfTkp+SLQbHrOqm5jNyajS6VCMIpApDAWwQ4LrGgXqzIfnq5cv0vN0ZXHTInME5GBNLb1DGdOYQsI7AfGKFjlgqve8wJwG4T+fuFAFytXzCLb+VgWnH/fIGYfc46Hs7iHC8ZkPcdXx4VfVXJw8+cA4wIgM6AHSLKWZCTESfLfg7WsIyRF3ckiRQ+HACXkwHptyP4KHrpJvKVGnOhRF9eBF9wE0mUEogz2wC+WGI/vVxiQQIxAs9+rmHA6E1YFYB8DJwQMZl0OrLZ++i7sfT8zroYHLS9df4RACWKxSZvLXzG/fQLZqk2gqn2/vUCUQ9UZaM9wDaPeSPrC4A5C1KV+NITKwCS/SiCR/jRBDlLmP7nHynsxno1IPwJSyRpbiMADXzuPDYfZfBTEoAmcuVQdiaW0zwXwQsCYDYmMaDA1wG8TBSvaoR0G77EcGSET6hjOvVApfRPAUN0zjr45JzVcSqiTxD+VeGzXku/4Nr7JwDJOkxFIwt6j6+RqUrlkO4bXzp1gCAAv04AzgLDDsBhKugLFUvQUhTwCEKbnKCw14HwJ9cDgGQ9WegRgDI8XEcVEDvAl7lVlglAgi+I4CR+Zf1mLGgMmDFhBGFfDCicRJFERviSABjLS7FC0MFKMU+07wOPE0kGvaoQgGvtF9z1/iODkwn3VWoEXxres5ib9xx1wZufBAwLgAQexbAD0JiQwJOuJBA68/H3Zhk6+3CifqqwWNMKN8wjKgbk6gWJgC+FMaBb5vJVmsUbV2vCqo3cRWZcCIACoax53+ulkqNd7iqOcU1WcC9cxEm5kQBUdZ+sTnSL/jEtTWngi21jhJNJBivZBukXvOL+yYBkcOqxKjJ4AGgxzMrBVwdAMmHrZOAYF2l6y/mwV6xD17zmWo6MbRyeWtOHwxJ91IIhr6rqZS70DPPLXDVUrfBwzHKr1EUp6/h0T/6L/GcCqslt4IhoTcwdAqDSs7I60WQH6R329pHuFyuXDJmEjuOSbdB+wSvuP5bGUjmsA5XoUvcvBXKKAQnApUdXwah0b8jXR2YzJTsC0ZHB33FL+2yiX3h/1YeD1fFZGT81g/H6yqkVa9YEpqMhTADle8erHA6t7Mh6j4ZBXdBGjFyO4CSIm9wGBiBvgqxwIAJQlXIyEJLyI/i0SkAG/FbhaEr6BXfcv+5dLKhCg4z1C1HEBJ8+BODQGZXfk/quAZC6ketAZEQCTWAU8PIJt0fgwHzZvVWNaKqi7JLOmtDWFy42g1FxH/XfqGkII0C+a0tnDkfsGxQjn3VPsk7tXmuy+Xp0JhtoJosAaFcUAJUYKiYJxcqHqKAH9rPlG2cMrmCUbMX9guMLpGTcCMKDlZGhMK8IPnPIn1X5PA2AwegwEEYmDGBMjOI5whGQP3NPBT7VJlRNaKvF4t2IWHbDErtDlSk1p4lJ7/zd246tglGZryIfrFhQ7pU8WCAX0ZENG+57U14Z4YrCeLrSxXdev6TfLwrbxT7znMrfKQXfHLQCnyvmRIv0Q3430ezMmL98P393G3wqz6am1NYzzoGn+svqRmTAU2citctqAX/2EI8F9ACEmLHXLZGoFxtSl2xyK2bAYwrj6Xr12+1noL/jUTCD9vvFrn6u0v1/nvGkaoVBAQi0eummMAuXQHMWJAA7gCixG8U0gFfcXdlBKk4Z6zELgAJfZEKrxpC1xOIl/+Sk7jkcdYlSco90y9+gK6vJrRiADD0piad7RuFo3udNCgft94vCdrGXn+tujgV3QAcHLcFnroelivHkchEL8ue0uQ74S3eubAITS3IQhKkMRjBMokgWG3L//2z3VSnP4VDgQWxUEEUxAZFHL0eR3HDfm3IRbDHkBfF0zy4EIKNhSvr9goGEBdvTz/MIYQLQdVsTwRTFDj5jQmdArRDYJQNDSs961R3tPhx5NXoVgoxleHnarjohgLec3D2HI492yQNvIwvqO9fJm9zKGbAwnu6FhaP5pFuMg/b7tTbpBdvTz68cz/zI8azVj8iAHTqgmFHXDUB89R2dtaC7tUGw4kDOgFb0R2wYRDGZ8g9O8aU4XwPOczhiwGlMjqqLWiFYGu570wADFsbTvaxg8nkow7E8nM/atfKzln6/1mS4YHv6BQ4+Z0BbqHcd0NwwYbVD3+1yWhXJxPBrbq8AqE/XApSqAxiBV2MZ/54DMOZwKE00rnDUWcR5KiV/brjtSAMALIyn+/mCyeehjIYp6fdrvVELth8RAClyHXxmhPi6r1m8FM0ucgk8+y4RHC1kAK/5XgW+2hZYofafWcPq1B5AqDqEYsQ3nepR2gqhV2yiol1COkD0C+aOaoGx4aL7DQCwMJ7uVwomn4fm7VrX2u/XAlELth+5sHPtN+l/Ap6sX2dCsZ/phZkIJgv9l++1wbcq+2WFv2NXIjNKAPzuw7MUAV8DTuynFIEsQy83RgTAhiv+NgBABaQOGE/3mwWTLwAqHnaQfr9GnwUbARgDNBUlkpzQboyYCyYDYdILdf0l4NduW9kGoa4geNdazLElKoA3Prx7DofiETtC6XvE7hGEzJlpcis3Qgrj6d5UOJoYDcMglrX2+y0NPtl5UZUjkfx/Hqbecoe0OZzdF1gHQrln9Bhee4s3f3Zxm4MvAk9VSFdUIw0i+Q2PaBtISiBSSFgCYMjMW00MP7pwvvLDmwFgQTzdHxcOSGvBg/b7ZRZByWYAlOERluKM3Ra9CKWc0q73dTBhMFT4ZwIw9l5Lrpes+HjeBiGCUOKXeuBvPcKTiEIOR0f+RhDBMYi0Lhea4GTaa5NbOQAVDzhgPB1La5RssV3rIP1+7yy5OAADoAchEHBkFbKfGRpiweAPtMs5IFNokyOGk/7rAYC9OhBFwNXVY1at5tftCBHaWVS2AJdEcEinrDNC+Lumiyc1B8AB4+muLARAXTDCWvr93lR4/Z0Xt6ODFQkj8WtumEwHTKDLQejAfN3uds/dfjoQdatGLxb8jQBAYz6/boxiFgAVudzNIc2/s3xLk1szAORoB4yn+2DhaATAGJCtbpkCYq9+v4V+aBgAQ4i66XtaC85YkDog/zdZvzUgfN1N7a633Xqv6fe9msDIHfNaB6Ay2JRE1AHAEDIfI5nzZCLeN4Nbm9yaA+CA8XSsul6yqV0rJ2WQfr+splCyCYBR/HJyKX4phs0PKBZ0lqOYTpvniAiUAmAd+HKjo1cvDjHgr+3wPJQsVCymUZrPMuRsRBDG4AQCsunyJtFGHwAAIABJREFUcc0BUJlxQoH62q8ST8cggpKNAFRGwCD9fkuvbwAkyGgJE3C+Nz1P1q9/T3F1EZBxvZh50s6AEYC5yyUHXt5/Q8zI5/KrAmAIkkipkyGPYwXz1aRT8v5ZO6jJrRyAvKOvNXlLazsXs9bo/ztc29Pohgotp5J49Rcj/pzfIwGS//3OM4CNd1dpntQpFUmjEH4LYIgnyn/OLjL8FeDGhwJbNgFjI8DIEDA8BAy1PFK7FSKf43cNKrvHx+8C/vmxwMgmYHgEaA35J0StpvvzL/nP8RbLAfhyT207TChgDRiu/ZL9DsfWNABvYzbhCDBKoBAk/pEobGWTqp819hzQ1/0k0PoaMDEJbJjxVZFgDad0SaUO5LksWVj+XScDmw5UEUDJ6U4d0nVbC91S3ovfVHp5al64cgC+k7mZAP768KCA0WD3A/ieLz090CDceVmlAuhBljLgrfcAw6PAyDAwPFwBkCAbItM4a/FiNtERjBl76W9ffD2AbwJDdwFj+6syImRXrd5Y2FjIYcnzWPLEqnsfC0zsr6qBMQmfIDR/pyJ6xMhKyMrSDiKD2xja6TADTt0/AGAs1KcAUCFrOLF6tbtiRVFavT/wuMCa7MfVTlH098YBeBcwNAIMEYAUlS4uBULOmK3LCnwOPANlEIOSoF9+C4DvVoWXhvdWZVOYqWgi3vOXDUQhgieB0EElViMYJ08HxqeqnG8D4IIDkAzo51DKQQJvBKUmKACzbM4+5hUivwrgiwC4LzvjmgCh6nBcgiMTcv9Abo0D8E6g5eCjfpUA6AxoQIzgi8ALmWwC4z//DxcPPwBak8DQFDB8yJPpPZHeGCyC0KN5DFCByfh9/+OAsekKgEzCTwD047X0SCPM1IYQjCv2E/MJoGVwUUQoPboq0MdqkWVn7RtDDMahB4g+P6qhXFpjVtkDtRGA2nKjos7IyOyHFUbIrXe0FXsTuzIYfNb4O2M3ATGIYQOmPn6hG6gi3eUkQQAeAIYOAUOzALMVh2pAlESqGFBAXAYOMQVjxll03iO/yYKRAT0FQXkwZkjp1pz51LO2XAT3KtD3AIAwj4Wg05kfiuUHYlsXAJLVnP0INLM0OYFx78AzcRySeTsw2AJueI+Dj2Fne4EWKz5MA0MzDkCCkAByUWqsJzarEanzj2zXwjEGFHuGY+pYsMojzZL1G9EBexXou339IRBrC3lJGmNDuSHX+w7WC4Cm6wWxm8DngLTImgC8pBcGBuTXf/1fXnyTugnFwxTQOgi0CECyIFlsvvJfEnh0mhsYI/s5uxFYi1xZof7oOqSAawwYjRGBzYGXbtWXaCIrlvHUagX6SP/ruMVYCEbEqECXAMjfree2HgA0ESur1/0vtnNwGSsG0RsZME20/+/XWH6Mugk/yngPAGy5GDYALjiIHIgRUIrsZjM7Ax+BSx1S4pfffQVIep8dL7dMDsTGjJB+CvQxTHmdtrw4l0CovFruC2NOe975egDQsCXRK/eK634JhBK90q2C7I1i+Gt0jxF40k1cPJAB7UP2m3MGJAAFQrGei9iUTH9yBUDTHfU3B5+BOIKQ43BWtNtPcWIOzEZE8FoK9K0DCGNxLi3FqaKA9gTgeoFwPQAoI0OulWT11oEwiFz7cwbErzNxWtEYBB+VY76Vh4DWrH8IOoGQ7Ocg1CqMRLPltmxvs1/SHaP4dcAJePYyyUCRIzrTB8tE8FoL9DUMwl61kQQ87Rmy2PS2rgB0a1ci18RudEJH57OsY02y/+83/sZdBKr4FXQTApBvprGgQCg9UEAM+h9F6ugJDkC3gJPBEvRGrYoYCBX9IxEcS5K4i6cZAHIw8oXQ4mLBb35YH5d7OekadtTV1UZSjaEIPH4nQzYNwgjAHNwDuWGYpZc7lzPfX1cQur5oBorfzDf+zi0yVTuSkuxBI2Q+PhQDIUEnMLo1TBCZLufGw/ixbQa0KB8CTODjPohdY78IQmfDjmW7Yo/doAX6GqIiAtDHaYswSmeMubV81kp11L6hy2PdAcgblfslOKC1IiKRmyRxZgV/8++DS8BFrxXi5Hd/U6MeSKdqEsEKhpBRsgRMbAtuG4KU/+9ry5brzP/lPVMv1EPOQegharrVcgZUhVHFxNPcp9VFtlOWkL437C0WABWypFRGsV0sb5Hn2zYBwvUGoKl10v1knDgo0y7XA8Pfv0UACnjaK33Co9gJQAOe64FkNvtZAHQdjz9v2Nz2GSa3jYej2W3KGuZ9ixGdIVSoKT13B2s5AHkGheST6qn0erHv5AIgAAU+LVfw/wq3CEAV7clBKDDGZG9/5oVXx/oyYARczcqH5GyH8eFplTawFvAtrtXLGpNrQDGbejupB3omlIHQGc/ErzOcGSRs8zrhAbbuL1Tco/JfbLlNwHOmi2kIcs3owbdwNpYtynDQhsFcgvuG9/YapGFvYX22zZcAU0/GwA2LJ/4AmGF9mwEbBu98Y3cMF+uAGQCj2HVp3BbPuo3IlqxAy5wHAq4OfARmEBXGfNIBa0BIsG0ecwC67merHgRpZLwocrWaovuTxew/V0txJQ2DWeae3WAGbdhb2DB4+wRw7w5g8Qpv88liyGtoWHzMi4C9fAEHbBi8kwUKu2xNAdBxaGBLbJdZux1LwAGECYAEm6wyfpelJrEgFnRDxESwgyUxIUsVMwjVy5AYO0bG89Auu1/5BF38KqjBHlUAYXsteNCGwTeWNuwtk4JMkrlzGNizA1hm69g1Nix+zDOBW0aBeRZZGqBh8M4emfWNADDT+zqMjQyESdQFHfDbZECCLRgdHeCTe8CBaKJY1rDnBRCIAuGW4TYAZeFG8ZuMkGiQ1IEwGCJtHZBmy1obBsvVMnDD3jIAerti3LEBOMjGcOpa3WfD4ic9t6oveDtLfw7QMHjnH6wPAybW6yaG4+8D4HIQfvtDIVtLejpBFsVvUI7NIBHw3DUjRzL3rDVtsYPOkAScuX3coNDynT2VYJCkn+PjqvUD8hVbS8NgjphGxcANe8sAGNoVY/824BCBtIaGxRe8pLKZdpMkTvXiJ2toGHzSNHDPScAyq3er4qPyGaNc7JCRXWLT2TjwGmCOeQashq6+qSpZmp8vojQpheF58ncdZVjLnjWPHr4VWKTKxrHGUqq97qXu3jp0wPy+eEC/DYNZsZAO6IEb9pY9lNCuGPcNV830ZmkM9dmw+OKfbdcXvJMPdY0Ng0/7GnDXKcDMccBS7MwdKz8KCAKQIgY0MWGCtr4TOHAasMwOkTqf6unyuLykfd254nkb7qsw/iVg7jhgmSX31Vpd9yRHeLx+zRhjEGRbB6wDYT8NdymyubzDzCCGfpMJWfSRYfr9HP/aMgBm7YoxNQHMbQHm+ID6aFh8yS93tAvGQb7da2gYfPoXgbtPAqaPA+a3AEubgGU1RM6B060fgkRoCzj+TcD+04CFE4BldZdRc4/YxlxgjJMewSiwN1zWfsOngdljq3EmY08vm5i/7j5yIMqpvupKyGoNg9lngYosl9wY/0dZdrMzYl8Ne8sAWNOu2MA3zw/F2CoNiy99XbvftrcLriz6PhsGn3U9cM9xMODObQYWCMANwPJ49UliuW6SaqqBn/gGYP8pwPyJwNIxwDK76ahDeN6uXYCuYyABkEza4LbpY5WEWdSLxjF26/dQB0SJ6r4ByAN6NQxmkWcqrnQ00x1DEDJFjR8CcNWGvWVPp6ZdMQ6OVOCb3wAscPJ6NCy+7PerkP5Q3tBY1PrT9tEw+JwbgPu2AlNbgVkCcCOwtAFYcgAuiwWlM/XqDjMEbP9t4MB2YO54YJFMo/5gHIcALV1TRZ17FXOhPtvgtvkqf9H4kvHDlyKK4l6VzvVSBF22uwjOb7pbw+CfcwBSkyeFEHAUx/yw9JTyEbo27C17Ol3aFWNuAlgIn9QxO2tYfNlbK6MvaxeMRYquvL9rTcPgJ30TuH8LcHAzMOugX3QALo21WXBZLEHwRF1OgHS2eOgbgIPHA7PHAezNu7QFWFZ7JnXJ5rnqxHEulvlzwyVNN3+wern5Yovl7SXLGwvn4riLWO4fgMRJXcPd/+pmOymELEhRzBxJAo9gVL4kwVnbsLccgHEpWi3epocCAMeBRU5eTcPiy/6qtl0wpvhA+2gYfO7NwOQm4OBGYGaDs+5ExYDGgqP+ccAkINaVpB8GTv4d4OBxwNw2YGFrxYCmV0YxLNYheCXau7EhV3ga3Lb8g4+R45uoGLADgHWqhsBXA8K1AZADyRvuvtkBSArh+i9DsQhCOtf0UUgW/7aiYW/Z0+nRrhizoxXwFhyAi5y4rGHxU66qAFhT3rDSIVdpGHzencDejcDBDcDsBDBP1uX1CMJRwFiQIBzxieL3KIY1YW5MPOxNwLRb8gs0aghAss1GZ1O+SFHsdRPt0i/PLHu++dFb/x4mXfhcbWxhfCtYMFr/uWvKxfDaAcg7ipPCvFOVpuo3HrCjYW/ZA+rRrti6TS6MVQ+L4NPH2nx698GnXF0BsKa8Iab4dFZpGHz+JLBvApieqAA4J8CPOQuOBBAOV0CUYbIskRkAecrvAdNbXc/aDCxSpyT4CEIyTgRgneiLIp3nP6fs+a4A4N8B8/48CUC+ZGJA29fpuLmxJW+5h5kNFg2jiWHSi0r0Uv4pCoZsxw8DUfnhd4Vk0XGdGvaWPaBV2hVjdjgA0BlpkQ/K9bmn/HOVqtClvKEBqlfD4AtmgP3jDsBxB6DA7tdbcvYzJvQJkii2n4NOeMpbgJktbYPGACiF3wFoEx1ZMNe/4jnPLXu+KwD4t/5SO/iMBcXuesHylyACMBPDgzGg7opM8mEHIGdwrfGA1rC37AH10a64Yr4APvvOSdwEPOVbKxu+K2pdKRTmdI3dqkPPVgbSTBGAY8AsATjWniBdx0QxJylOFCcr6HBiw1P/CDgU3EgEIMW52M8YkLolQRddIN1AyKWiBretf9MJQN6HsaCPxe4rvgDdHOcOxDIAcmDFDXvLnk4f7Yqt63gEIB/Yoj+4p9xaAbBHeUPM8qF2aRh84QQwNQYcGgdmx4C50WqCFngNsgSvQ+Dxu4MuiawhwIAXVk1O+e/A7CZgThY1dcno1nHL2oDIyZULpBsAFTBZ9pjT0QQgn2V6ufRicS8QRgbs5ZYpEsENDejBfpoLrwAOjgIzZMBRZ0AHoUC+SOA56xJwNlEyTFw5FxBPeWvlzpnbANCdQ1eSGTRybMuydgMggVBsKmtYoC6Mt8znZxsZMLzAxoAOvsh+ydDqtXx4FIDl8L/omQ7A0QqA82S/ERdTI22mNfaTuBIIxR4BhKe+y61punQC+MytI/Zz/c9EuvyBeetLAfGZ5WOMZ9j2/gqABB1fMLsHAVBqhfTcyH5d9MByEdzs+B50Z7voGZX+NzNSsd8cwUcG5ASRKYbdHRNYwhhDIHRgGmO0gFP+HJh15jOXjnyKblVT5Cbfoq+yJOszF8P8+VnNPlICkMAzds/YLxlYznrJwIpO6egTPMqA5ZNDAB6iCCYAyYBcBqTRQ0e4630SxZyQJQIvMJ8mSeLrYe+p/GzGfnTpEIBy6US/out+K1wg+brs88rHmDOgAVCMnrEfxxMte1Mt6j7u9zzKgIXzczEBOJIB0BnCJoqgIfDEhM58SWzJEPGJe9hfVH42un/Mfxl9bgSiBySIBWnAJBDGEDAB8QWFA8wO3/a+wH4+rg4RLPYLul8tCI8CsJmJMQAOuwFC9qMI9g9Z0CxhZz65K0wfFBPqu7PEyVdWAOTHVlTcpxhXHZLz1w0ZA6EDLhkCskRf0sw4dRYC0PQ/vVSRAYPo7QCdj7GqVOSMeBSAzUzMxZcDMwLgcKX/zbv45SQlHXDIgagJc+bjZBqAWhUoH/Y+B2D0J7rFa6LYDRmzomsAaOeKqxEvbWacHQB08JkRIteSXiSBLYJOLB+X4xrzAzY7vgfd2S4RAKkDDgPzNEAIxMASSWF38WsgkuXLyXTRSRCe/DduSZMBMwe6ObTd8JBj24Aot07uDObPP9XsIzUGFPs5+JJ/M6oT4buxHv9X7BeY8KgOWDg/Z58GTC9Xq5FxTXOw9c3Cm6k5fPcjgbHbgAlvVG2tH1T3Oavoq6BlniZ+12n5u/2sDbOvasqoFg8x2Lnbcd1GdhSAhXN+7qMrAC4sA8sORJ6yHwD28z+Ft4fdv8UyqUDrDmCEBcpZ39kLS6aq9l4D2rLb/KYsFTPWdfbvh86vQu2s1K/K+zIjTsXIVQ9a59Egs4Y6sZfIA/EcSp/jEXv8BWcAhxaA+SVgSQAkGAMICcwVlNLlqTc9Gbv/HAA7MrL4+f1VlXwrUq7SvCoyGcrrWpGhuur2fNGYwM8YT67hT3s1LaZvqn5MLM0bzmHMmIFSgdFNj/mIBct63NhFZwEzDsBFgpDPeanNgATfCtGsX9TIKwNrg9tuVkhlng7TI/YArX1VkXKrEe1l2SynN1RCsFJsqnQv3UIMxhwIRjU5AGN9QUteVz3BUAvahuNgjC3HxLAND7nBp/cgONXF5wCz8xUDGgCjKPbvevlzcKUHH2ag6cnYzepYBB9Zi2FxDJdjoXJv1WDFiLJ6MKqKZUzoQFTfj2HmwTKcTpVWvcxHKm6kKgoORAEvVclPD6NdzLXpMT8IYNPcLV7yJGB2AVhYrAC4SNA5AxKM9ryDPE5fs6eeVKWGZ2M3S3MQfEyJUKV8L1ZpJXpVJ9pLilmlAxWkVJHKwIhjjD9TtVXVm1HdOy/pJiaMFRWM+bo0rWl4yM1N7oPhTJecC8wRgAttBjQWdBBGESwgSiV0Pb9DRgu0TY19N+M1mRKh8niqFx3rRDsLqjgl9yaGXT80vcL1wnE252PAZCzAHQCoiqoW3yYWFIt664fUpKaREr1NPakH6XkuOQ+YDwy4FMSwgU8GSRSz0UJx3Vx/5vFNbrs/EiLRY+v4ACITww6iJEodQKwBIyBRv9vwhKzUW6z66TUGEwhDS3ezqusAyNxnJn8xa1KRPSFts9YfFB/QDZcAm78CnDBT5U8rCqjfc3yh8Gn/hGd/MsKf1+QzYJ4891Jye13iy1cAE9cDJ+6FpYrEkidxDN3OtXR+FwBGMezoMmxJLOumAuD4J4rxJrfdH/XCoLGFVKiUbw+LAPQqWWaMMLrd6/+JycSIm85w9lOpt1j1MwAwFTiqAWEUxeYH5ENn/jInUVHeMXQ/f/jRePvCa4DhTwLHfBc4frGqqaNJzLPw6iZxV+HTplFGvZrXZT45N39+HW3TujlZv8D6fp8HRq8Dts9XIOR5YtakgBgdrrrt5Qsq8Ssd0BhQ4HMwmVitAWHAY/LbLDQNQDaTVJ8Q6W4qVB51OOqDZDPVB3TLOBepW5jmqaLbec3jGgBGMSxvvemDYkQ9GoKF1ShUCSKCqBeQrvmfVZPC1keBjXcCmw911tTJ8q5XgOLaQgA+x/OdWA2EGZ98gbjleTHdQHQN+2iwls3nK3/Zhj3VeQhovYzdxmArSwQgDRA3QiSCJUrTnjfl4KozRCSCCeYmt90EoJJbVCk/1+FiCwFZxLk4dRfLFia6x8LbYkD9v9cXtLG6+O4AYQRfrgPygVIcqyhTXcWFOJH8fh3rz7EKwnUArq8mcGwK2MCC1i7WY7Zenh56feHT/jE3yliE4TZncd636gPFCKWavGhcRx2J+cvs9MlSw0Ty3cCm+c7n0G0MExdW4BMIbTXE9UCynvyCCX+Ovm4gbByA/xisVgJPpXrzLj4EoRJjJIZrWHArS9iprK+KcefgiyB0XVKGjOmCmW9xhRVMUSyRFnNeFGEdI2q+/HFXclkp9WsAbgTG9wGj08CI64WxRk/OTDcUAvBHXSLQxcVCDMQSWbzv+1e7WVbz+k5w2tJtsbcCYV6WJY7hmAsDA7r1Sz3OgOgoM+KTOJbcjSI5yGIaNE1uuwlAAU/MF+tF5/0sIghVLdVdM2S0bSzHx2Mi+FTxXf8X925NC4BycK8QwfmgVX1LlcFiykEMcL2BndJJ7aQfijKfxLGDwAhByM7aC5U4qwPzNwufNnNuOH4VZaCPlPo2AahqFqoPVFc14ga2m+WEEL0cAz9kdPrOmMu8r1o/rTsXz7f9oswFs+jO6LAqkvC3Ggg5Fg6mwW03CUI6X12h8lyfcz3QHqr3DIl64DbqaQKc9mI87QXACD6vpJqY0EVxz2CEyCI5eMSGX2e7VtI5J4yTRyZhscrvt1nQuivOAaNLlYESwcySgiVbr37Bfd0/u31yEgg2FVaiPCeVOguqAfGov0iR0R9JABJ0bnwk9nMxw+fOh55EbgRhzozrBUA1polN9CLwok5HEEUQBjFMQB7D+j656PW+IrJ8O/bBCo4sGFdGejqiyYCx3mKe9/JtTiBvmI5OFiTisg9LtJFF7gZGDrUbHKs79+hyu5hSaUvh1foFr3r/6vZJCiXgCDwVVFJ7MVmRLsrGltuFCc68yFdACMDAflwR4QM3HPoKgIExt4gz42SuaQb8hBOE2oZmlu+KFlKR3QSssMJxDPWbbjpfLoJrxG8CYT8MKGZSVTCxYFTIb84nkCxCIPLDiby30gXFghaF4c2ReR466Uu2fvoFr3r/fKAEFxvpqMcd9yonIrkuK5LLV7MVCM+/uDJCyIC2J8a0z1iwqyESgMl15Sa33QKgmtPEBnp11mwuXgO70Ud4DHWzfgDYC3zBEOk7HlA6XKyHQzb8HgGoCSQLqsxorIy1Bxie7Wx0rFaf+wr9Xv32C+56/7HbJ5VHtRYT+GJrsehHcya57PyKAQk6+vBkBZPpjPEExlwU59awg3C24W6KBsC6tqHR+MidyVG3i3rdAnAsH2T093XT+zLr197MTA80h3SfsZP2UqpCrPQ46oF317VrpeiKXTJ9MhMLkgGdCacKG/mupV9w1/vnwyGgCDCKWzJe3lqsyzLWZWe6/kc/oKzgKH4jC7oolhdC4jiuzM0WPo+cPQ2AsX1obFCTO5Jzn566PwbReiwnfTWjI4KvDoh1juh+aT+WKSYD3i8Aql2rJk+VsVQly5kkddv2FvHT61icqO7Fr71/IkLNXOi0FQjV0046oBy6wZ922Q95ICqDEaL4XWw3COcf9Mw73DFB9AqE6wZAAS8XuzGQIDKf+oVkqxt00ttAc+YT0PJ9qRFSB8xoye5Xu1ZVeCSgCLbYLVNswoncHxoeLwCzBGjBNki/4BX3z9lXgUCyIIGmhova83cRgO5Te9yLgP3MfmsBS8xs8/U67ePQOqy9umBUruDchqo8sHSd3PMfT5ifo+ack8eFHI6QEcnT5GvdOnVdXof+ptJ+BVPWceiaRHA8Us/nkACo8mzqlqmWrbFDppT5A5UIZm7CPA2Vgm3QfsEd909kKIqB1qJAKCBG8ZstZz3xHOAAiwmpDIdng1maZQAkZzsHZ537YfQrwNyxoQ+HakrnS0h1mUA1C96TdJTmORyhC3oeqdwROi+GDhkFI6bYNrcNDEDeAkXwQizPRpmnIs3OdqZPSaRFUcbchHlgie6agq2kX7Dd/+d8lUJVXuUzk8ERmS+2vfd4uvN2VOV5rSwb0y3JhgIh9wJeN3YMQCIgR78Q+nDEVYBYZUrUpbXFnM7COSdf7N4IPvtDnT2BY/h8Chh10MXQeYGS+7GGjaQiABpuNIFiECnzdWJMIUHcazLptC7YivsF8/7FgLFMqpiQL5TuNbKfA/DC46rqqAbAwIKWK+timRUBEiNGsOQsyQm+Gpjd4n046hbT84KPuYjOmHHyp92gcgDS2OoIuVIeh/xyUkaVwyEWdLrewHE3uBUDcKIwnq40HpDXL+n3CzbaKdguel5VnFJl2awaghLQBTzteZ0cjLq2A2n0M6EPh2pC57Wg41poLzZsAZNso0Hw6eVR/J8bF9YjWGmVCpGKwQLBRCcrbiSxNLgVAxCF8XSl8YDHHFPW7xeFBRwv/rGqOKUBkODzqgdWPYAM53vTASMQu4Bx9J+69OHIF+N71F1O1gUB+AsBfFqKC+4Wi4BWX+CYgOTAU36wdMVNVKka3MoBWBhPxyiuko3xkSX9fvGMkqsDlzzHC1N6SQ4DoINOe7KelWWTheziObeKCdARApD1AdVnRH048gKUAmAEYi6Oh4DJV4VoGDWqjq4XLbO5o1jBoimEPhPJmwu9FvnTLgdgYTwd2wyXbMyRKen3i2eXXB245FlVYUpVxUpGiLtmGBlrTEhVUwV8dEkVKAq3MHJ1uzRbRx+OOgDWFX6MsXJU/36lJoEoA2AKvw8+uwTEDIBbStdOs8ddDsDCeDom7ZdszBIs6fcL9ror2C75US9IxJJsEsHdGFBil4yYuUwknofJgF4XcEUfjrz+X7fKo4EJJ//PkMORO6FrVjQMeL5kJhZMMXzLwNZCt1nzDFgYT8cQwpLt4hDON0i/X7ys5OrAJVe0S/ISgFY7j9ZvnQ7I3+lyqpYaL98CWp/N+nDkZdhi6bW8An1kP3fRTLKVWlwF6RZCH2L4zDDR0k1IqeTNb2OQSYNbOQMWxtMxeqtkY6I+ny9VEz6btfb7xc+XXB249AoXv85+tIBVgJJ6n4lf6oV+mfjdDJNMH0wAVFX90GMk1f5TxlS3Fggh92DyN0IORy5665KIfCktsl+K3VsGtpVOWOMiuDCerlSnjQ2rB+n3C+pIBdulz8wqonrNPLKgwKaC5B3s53qhXVq6oDNg6sOhqvqhEr3V2VNLBjmnSSNdrOLJ1zkAu6VPRjFcFz4fXDJ8i45hG94Gt3IGjOFYA8TTlQZ/qGH1oP1+8ZtlT1MAtHK8mQg25zOZUSCLIliWcbw8wfW5Ln04ssqnHX04euiCk6/3de66MPpuAQVZAEFkw2MKFw6a1wEL4+lSBvmAOMhD8vkOkFX77feLNw14YT/ssmc4A6oOdHBEkwXlgjH2k4Nal6wB4fIuX9LzZjAmorNeHMo5Tc0OewHwDTUh9HXxfGJsYkAbAAAgAElEQVS/uvCpoAcew6zBBrdyBlQwwoDxdLZWXLDFkHyF8xGE/fb7xR8XXByAAVC1oB18HQYIT+8uGfP75SCUs1o64he8v4j6cIQ+IqkPhxrBCHjdjBH6AblQkAeY1ondukSiELmsUPpjbyp7XuvDgAXxdNZVvWCLIfmKg6Bbhrjup98v3lVwcQLw8gqA5v9zC9jErutltg8gMxDWWMBaMVkmANWFyEV6R0uH2I1IzW7ypbkQOTP5f2ch9KsFkwp0kQlDAOmxzHpscGuGAQvi6VD4RgmAg/b7xZVlT5MATNXwqQc6KGwf2U2uGV2uzg3D4ua7fDnPwZcKgIdq9GaIBPZb0YdD7hgyIFWMXiH0eQ5vXS5HcMkc++9lz2t9GLAgns7KxxZsCkgdtN8vWD+vYDMAUpcja7lOR9eLVcIP4tcuob/3AOHCdW02VTX62ApB4Mv1v24gnPy9HiH03fJ366KYHYTHsgBBg1s5AxbG0+HLZaOp65i+ln6/YM5EwdYBwGj1cmUkE7+8THLNdAHhwrUOXtcrO/pwhF4cct2oN68BMDCfmsJM/n6PEPoYPp8bH3kCkbtjji2tJJA962YAWBBPZ0WBCrbYsFoOf9pDAiENk179fkuvf9nTXewKcBSjsn7ldonWbgQpx+26otaLIwAlfi2QQSJY3Yjy5i9dmsFM/oEDMM/Z7Uf0RiYUA7J+ToNbOQC3e0WBBm9qLad6HICG1ZK1XB5PoxnuOOIcxSXe/Of8xHV/P+FpwN47gKUpYHmuSve0pKZgCKSq5wqniWE1WZz/xouBm74KTMwBI17lVBXwtWSs+8/vL45Ff3vhpcAnvwos8d48DZX3M2hx9XIAnu0IIO0chu35AOgLL0yuG/jOmwbg028G/mNz1YWdETbm4I5BrFlov+EtD2wIo7l+Atg8D2xY7iw3V5diEqO54mnj6XdMAYcU+6gon7A3NSO2qFjlyZYDkAX6uD5Iam44YaUfVNDNxaJcLIPXcGGpfi6PnZdVD1wPspQBX/wl4OaNwN6Jqg+xwrxslcVFuYJblehkcYYZGPS3L20BxueBcS8nwg5H5kZkx6TQSbXFZcCQKadx5Cz5mPurAFxrRaa17pAR2PFC+ElSHKQ/0QjQcgCyGyM9v3SnsDBRJgL6msWCf6IfWeUJac8UFlpY8500DcCfvgb43hiwZwyYVhd2D/VSrKGAmIDnBkiafEcN9cprHgKMzgNjS1V7rRjRlceyrqif6KAkMgXIM+6tAnDl+zSL36O9+U8p9jGHQo285/2XA/AnXeNnKAorDXH/AILwbSvLEz6Ql2+cAf/3XcCdw8DkKHBwpOpFbE2wadzIdyh3jjNQirYWEwYq+/zJwMh8pf+xKNSwM6DZMmzNRRbM2K+2Ii6TlFrAWfd5V3i/F7IgT2LBF5LbIdkqxLPWvtzlAGQ3RpU3Y7AiixMxLOUB2t7pKQ8M0qCTnp8HkojJgNqaMEJesQv4AR3Iw8DB4QqAs+6SWRiqgJgY0HVDAdBA4Ba4xN7ndlSFAAjAYX4IPO5dBDMAdS2i+Jx7XTf1eEdTDfgAQnR34p/wQkRmjNAoByDT/ugFphXAmjAEn8qaPQAgZCs0lSckCNmVigEbFMsPBBE3DcBX7gLuawH7hoAD7EM8DMw48AhATrjtQwiXoqkTEwWd7LOneXNCbz6Tiq/TInb2M8ZzIFrTQbGiy92oGz7pXl/7jvdAJnb2470IbB3T77Sai+hyAP5voTqW6sKwFAc/TAdc5+3dvcsTrvPVYSK4SQb8xV3+6IaAqSHg0FDVh3iOIFTIFxtit9orL5Z/LD1Q4s+B8OnHVuXwhhdd5DoLGsgCCJ04q66X/Ju/vSaeAxDPvbdtmdtKDV90gVEPIl/xySkviOhmAEjrlzSkwj40SlQZYZ39I+8JBMx8mZryhOsKwqYB+KpdVSDFvhYwPVR9BD7uyX4SwRS59nNI+bRck/DzJ05v12M0nY8fAk8iWL5BB5qASPGRCi8EVjzv3mqpkC9ACrrwhKukB67GhpqRRowQMqCiYbj8oOoHeUWpdYIBAUj8c8WjrjyhNIJ1unzjDPjqXdUjJAAP8TMEzLYq9uOHICQALe/EwWe+QgddAqCzzD8+vgIgg0qp+5nYjaDzCgjmnCYone0klqP4JSgvvK+6LoFPoFMlkPGh+0rPWta4RHTNJJQz4M8EAGoNTPVU8opS64CC9zoAWTFChcq7lCdch6s3L4J/2QFIEBKA1P9mHIBmhPh3Ai354RyAAmWsR/PRs6vOR8Z8FMPS97yxtIlYgVB/I7jC0rIKSfLXF1EEB+BFFjQ3jCLA49OWsRTTEPzvzQEwry7VrZ5KwzAQAPssT9jw1dcHgCrORQCS/bgn+1HsCYQSveaHkzvGv1scgU/6R55Y1YIxhvOm1EZekQWl8wVDxJgwc88QiJc6AKX/meHDawX9z16M/Em7bO8Q08GBP/jEkAEVjMBoAFWXUjRA3KtNwOBXW3EkAZhrALktpC6lKtTV4OU7RHB+3kHWgv/zrnYZl2kCkF4uF8MGQGc+MqEYUCA0n1tkwxbw4ScHAHr71Q7W4++c8czwcBAmHVB/c7Bcek9b3FuwbdD/kjGWgzJjQ3thGmVA3jhfOyU+RxB6FamOFp8NrhsTgLy8Cpzm5QlVptAU+6CiNgXCaIQ0BcDYV8b0P4pi30vfIxD5+w72C9aliegW8MHzqrmh/meuFhYi0pKbs6D9fsh/n1XFMrYMbPgUByCZz6J+uEknDA9AornWFRb01WZEsACoHhOqyC7wdetT0QAK2KqOb5MCUvPyhLE0oQxzqaYNXL5xBvyVXe12vByLADjXAvgxBvSPGFGMIjCmJbEW8HfntxtQmxT0cmxp9UPAdKAZ1upA6EB7qgDo6oCUxXRtPVSpAwJpnUhuxAqWCCYK1MBExZljY5S8SYr+pxAFAuBayhNG26jw8usCQLX0SAAkwwcAEngyQizaXoziIli+Oe7/9kJvNk1LmBMe9ECO3XRB7aPeF0EYHNVPdT8gj016YBcWtBfBVYJuz7mF7VgGY/pO8f5WdQ1/7U67nIKNS7j0wIbDPFZsyNHHY7od/xdlEHj8CcC3TgCWHgGAPSxiSdt4312u/8SPAl8/Dlh4pDeZW2PD4J1c9+uyDaIDkgEJQKnTfG/N8nUAmu5HUnMW5ARbPfEuIHy/ACjRK7FL5pOR4RaxgTHofKl8r/S1ZWBnAGDKefbn3AFIPRPXB7sFiVQimKVgGdl5ooNwLQ1/1U+DQGSXQ9r5Evy1q9rZbP1lGQDZsPpzI8APHgXgod7qUx11YtBbFzC+/C+BL7SAWwhgdoLkONSLqy5oLogYft3ZI1F7EAC+phsAnekokhP4HIzml/PvthQWmPB9LJ7jxkcSr14jWj4/0wFlgJD5eoDw6fe4DzAYPHokWhHJZ3TFSkn4h7YOSOBwEtiMTv1aY0uktFYTmI2/43EMQmCuAJmUE0gmVD8EFdPpdnxhVhqzDr8F4NMtYM9Jfg98EVTeNu9Q2OFZBX7vr9vtgm/lcezczZ61ZNN8DCvilYCdPXqNDQpAlfGTKm0M6AA0PTAyoMSx64cRfPQHXsniOTI+fEWDFGp+Qb9BeySRBV2kpl0QxxGAlHDmkI56X6z+EP7UDYSdRgh/IouwIZ36lHabBE0GJ0r10Rgb/xA/tt/j/6aMAf+7R4CxzuBXWRGULwBfIrY6UNfpvLae7n0I+LO/reoLMqiVMbW38oUhkNkQIzZO7tIweGePcmWlAFTjAYHPVGwXxWoLYblEDkLuTT8MDPhXLJ4jALpaJB+ggU6xfgJknT7IKXIQXh4Y0FZCog+wxiUTwSkXUbSMV1rB/A31OXWuFpPUda/mRHKi1e6U+hA7Zq7l+A+UAfDtHg/LrptkQpZ727cRWOL9542Pa3rOvuOqagUltgtmJM08j4/PILbIDKz6w5PAHsbraTnMGdZWIwIzxIfeK0rn578J3LAVuH8CODRahV/FFQ/1IumIvXP1QudNfyNT8oVqcHviPcBd48A0g2RDuoDqHdb2SalZAdG9dnfDkAE0gXnH5ijWCDbKCq5/MRiV0QD8HgHQ63jG0hdsLGxA3x9Bw1Asli7hO3BwApgng/Gjvq01IHrXJ7q3Cz7E++YziF2rs1ZLZ+8H9jJsSoECWXj6igmR87aLgfbGq4GvbgLu2gjsHwdmCEIPSI1h+SkCRjpfUC3iNWcpoRrcnrYbuGsUOMBo7QBCxSTG/igxVcBIVGPWM1h1JYQPnyKNExGZMDIJ9b66eEBGxPDY1Y5nv+GCjfGAxD+DDpiawphABWZPjwNzNLAEIH4XCH0M7/5c93bBfI8Yk2cgVAdvdT10ifDkBWC/r9lGH51NhIsnsWHOfPmEUKT94WeAG8eAO8aAfWPAwVEHISNQlKQUglJjJExqC+H6Nq93kOpUg9szbwLuHa66QzFWkaFieXxi6hgVHOMCYGRuJ+5V4jYJIDKI9KlsAvFDq8QDrnb8NWVPh9EwdFkQ79TlSMIsN0Mi5s9MoOGno4U6f3YAvefL7Y7rvdoFLxOANSA8f7xSgWmd0kCQbmZ6mTLEnJ0UqWLhUkxlrBn6n3wWuGkYuGukCsufGq2iojnRFpafsU7MDxErJuZhYCsJosHtWTcBe1oeq+hxigJgXBrMmTBPnJKLrr+VED54ibHYvZos8sO+DNcrHrDX8YVVyglAKud0LtMjFPtNMz6QLDY7VomLJd671AEH4Xu+3g7nWq28ISvX58/hguOBg8vtFQvV/hEzxfqOevuTfpjri8vAWz8L3NYCfjBc6ZYHmBcitnFd06pxyb8W4gPlgonBqffTtdTg9pybqiVNBssyUsdUD7eGO9amnf3sXtxQipl7Wg/sD4A8AwHIyZMYky50Tp/xgN2OL8y051qw2hXzwRCEdT2nmck1RxHG+w5jeO9NFQBpR6ldMIMXlFWgVndqF2dVFsJzuOgRwMElB6DcI6rznemD0RnbwQiSRS3g7Z+tVIl7PC9kahiYZm6IizuLigliT/VoUog+p8P9l3wJ7qGEanB77k3VczroUToWLCsABud4ypaLCUoxf9i/9w9ADiICULrQRWuIB6w7nuZrwaZwLBGwClSqSyz3AhHbaRGEFGOmC44D72UVgjW2C2Z4lIF4ArjodODQcqUGqAxfcpG4mJVuVqcL5tbs2z/veV0tYK/nhTAqesYNHdO5PCJZos+WuzxHJIViuXFyJxupNLg976ZK2lizUKodilGUgzyGhokF8yw5Mf+qRkjdjfuDtwkkm7DTkNaBaQ2ox1q3eMD8+B6O3H6em8Kx1Ccx9ptWl9iYIUAAWrI3I3nHgPdOtsO5eOuxXXBdj0V1vOL/so3Cxef60tlSpYwveKf0pAu6ohfdJ8k4CUqgvr5jV6VGTBKALeCAh+VbZLTnh5gu6D44A6H8cVlkNK95O1WkBrfn31R5HSy+JCwPplAxRegE/2T+AloGncNmbQyogUQx/KwB4gHj8YWNTwRAOW0FIIIndoqNkTAxz/bd09XDGLBdMM6/pLKi5whAX60gCK2ujxzEAqGL2pQ1Jis5AJEAFHvTujYAKjRf+SEugm1d2COQLU/DAwQ44caEw8AtZzSIPgAvuKkdrWMM6M7xCMBoiBn4YpCE2NCfxWAA5MEuwvCCEICwlnhAHV+YORfDsWJGgPpMKwg1b9QpFnzHbD2BK2JGul9s8KkYW17vLALQRTCBpzXZpS4gtCXXMAkduuAy8E7PijPWprXJ5CR38ygw1fJDohh2BlRAgq2OeN7uTWc1D0AFNtmL54ESBsCaJcLkDajxj5ZXRiCIGA0waDwgjy8sk5+HY+X9ppUbJSCp6TnFCMXwny1WAFQ8rUAc2wUrRL6mXTAefWnFfnz3FpbagQKLAqAzoZjAKkkpXkNO5GCEvOMLFXOnnC4xIKOjnQGNdWSM+GqHQGd7JSsxUf+JzQLwhTdV4je1nQvr1MkPGtlf9yP2Dy+gAqZ6rQytfvdHSDxgLwBF8AmAYjHWluEDiKGMiqOVvtejXTBOuRSYJwDJAARgZAGWL9Nk+IM3SzgTydE4eec1nZHbtDaNAf1Dpd/SMx2END6kD0oXtFhBXmcY+OY6AFChnKnzl7NfdMR3qCAae2B+VVMYXASvDs3/X/zHJZcB84vuiqABEo0QPnhnwqQLyRURmZBPytnwHde0M1vN2lR6picoKULaxHDIEdHkW2iWg4/7b5zb7DSQAVd0/griV2JYojfpwRGEYsGBrOBmx/OgP5sAKANkcbFzNWTRnX/GSGImMYH/LYlk+gGvdT+bW+SWH+Ig1GqL5QeTtR2EYj5LVHfjw/ZDwL8yJ6TB7UU3VVoTjTYxYDK+Ivv7dzNAZIxpZSiU8jjKgIWTcykZkBawDBBnQdMr5QeTKI5iWCB09AmEb7+ucnOQ/aTPWn6wuzyS4u+R0Ob6CUGqJpIDA97AdqINbgRgBJ69CG4Jp6q/ckjXqB/RKla4WpkO2ODgHoynigA0JiLwaNiEt95YQKJ4FRC+7brKzRH9jZbN6iJYuSHm9I5iOAOhHNJfZkh+gxsBKPbLu3+JgaWDdojhMO5kkDWSlNTg4B6MpyIAjf3IggJgMD4MCARjFMU9QCgAykhSKnUCYHB9JB0wy5aTRUxmup4h+Q1uAmDs+hpXgFLnB6ULONOn5xACNJqxghsc3IPxVBGAiQG9aLeilWUJW1FvVXEN0TKp1C6At19TMSCBpz1dHtT/JH7N9yaxp6QkF73KBxYIr10nAMproB44qQGTj6sjUrtOFPtLeFQHLES9AdDFrq1E6M13MaxVCTNAXNFThIylLcor40zxtgDAPKuVwDMrOKw+SBTbtR2MND7sZwC7Qvm4wqHa4T/uIrhb+7n0EgbQdTijoyg+agWXT8llDsAFWr/B8qP1K7bT0pvtVwHhW6+t2C/m8svvZlawi2CKe37nhFtapkDnILRqBQA+v04AjMyn79EIkXO/DnzyCBwVweX4wxs9B4rRZgyPVFqykgDd+5JSpBU5r0vHyHz+jsc3ub0KABsZMCyQgeExKyFPVIz3lmcM6OfPAGCADYPE67Jfs6h7G0o+xvi7oyK4cLZfOgpsXwC2Lq9MwuuVERonKn4nSJrcXnQKcM7dwMMXgYcsVxkSebJgzOWPqdB1ad2f3gpsnwK2LXWeR9m3danUIV1lBSCPArBwtp+7DThuBti6UDWDmWA/DvXk8LRptfPtNUlihYZTOPCi04GH3wFsnwGOW6iAs5n3GeJJ+KLoE+9VDClQ8R6vOQHYegDYwuY3S6H/iJ8jb11ck0q9Qhoc9QMWgPBZJwFbpoFN88DGRWBiqQIgWyJY3lPozaGJ1KTEPh36zpTkJrcXPRE44S7g+Cng2DlgyyKwaclfFoIwvCwx9Zn3Q1DmIPx/2/sSaMuusszvjfXq1ZRUElJkKsBEGQyYhJCBSkUqAW1tsBdpuxEVaBzowXZqe1g90G2LotjQdmMjKqtBxQERdAWUAkUlZNBGkQRNyIAEMAkxpFKpqjfUG3t9//m/c/+737njPq9uVeqcte66b7jnnn32/s6///3v//++Tz0dmD0KzC4DM6vAFpd/0L3Gh6yTDgnvLwKzAWDGiH/ThcC2OWDrErB1pRgQisIQhAa+AED+HEEY6uNLyrRnZLSl6tSbrgLOeBQ44yiw8ziwfaV4UGbdegmA5QMTLFlqsfn7XecDW+eAmePAltXiXnkuZSBkRcm4UGXtU2uo3xsAZgz6y54JzMwDWzkgBOAqMMVBCSAUObh8QuN/CiTgcWAuyWhL1amvvBbY+VgxbW477paa7gIBqCnUrbUBiQuhAKDUot13IbBlDtiyBEyvtO5VDxvvVfxW/JkWNFrCeK8NAGsY7BsvKQC4hQCkJNaKy2LRIsg6SJ3IQSe1onKKC2CsOYMeN+0Dtj0ObDsGbFsEZmWp5S74g2Ir2uA22BScAJGA+dJFwPQ8ML0ETAUAkgDTPq9zdK/+sMWpPF19NxYwA4g3PtsHxAE4SQC6FdSgmGWRRIJLZJll8EGKjHiX1jwaN10HzD4BbD0GzC4WrsKMW2pNobZoCu6CLCDfCTqzgg6sr+wFphaAKQfgZHKvpRSYg7HN5XCL2AbAZwPrZGaj6ippXhgn0kqmU1woxnHedg5AATuWHig2FE1uVRwoxoX+Wcbg89S3AqCKPONcCi8oPtVP+9++G3j+oSK2xRBFDElUxbTS+3nvc4FpDsjxllXQoJg8FgdCQoGJJTTicLcQ6vPL6wbg9cDM4cJv27oAzFA5ky9/UOSvmg8oP86n0dICBn25JwjARWDSAUgBHN6vfdbv10AbARh8X91vDM2ss+NvAECKPVLCsHoyUgRqrlbnRwB933OBc+4DXrIC0IEmiLnE75di8HsyAcjzWUVGUi6uICMpVwwJVMXdeOk3XAxc+Hng+vV2esAYw+sWoP31r3eLcLwQBeQUrEHh4Jo2h4vDmJPuAyMLGAeEn7uqbgB+I7DlSWBGCwe31Gb9aL20kGDb/EGRxY6WTz8f2wtM8l4pgL1SgM8esHCvsuylME4nn9cfQLtldg6TZ0kUKorAfij23vAPCmqp3fcCl60XFINid1PlZrf41/dnApB6wSQjutUfIDJR8CGIQOwWEH7DywpKrWc8CFzqRLHkVYrB2jS2FQH5vkuBycXCAlIUUAAkCM2iRBA6+ARCe7DjYmQduLYTleiQ/XTTS4DpI+6nLhZW2nzVCEBaMLd+soIGqjD1ampdugiYWCpeBKA9bBJC9ActAk8LES26SqsftInLZ44dQif4Igdhym5WLrPDyuYH/7HTCNwDnPko8LXrBccjQaioe6BiKad3+QY/MGTH6rS3OBvCnQDuAIyqhiDkQ9RX+29yE3on8IwjxQPI8zkTiApGU3oVkD/4fGDieAuAdMw5MFQjEgg1DYsUku+a3uI0TGBfV7PotwHwaOEmbHEATvuDIutni6UAQoFRIFRYhfe/dhEw7tbe9Of0Si1g8HkrwRcevDajz07gIJ7n05rYyWIpb4ya/7vv8PRdFpj/LXDmkQLAnA4jCCOlTBRN/rFMAJKgkkVHpGUjySSBSFeg7/azqk8EgbSEq8UDRACLKDXSyaQ7Br//DcA4LSCtwnKhTEkQcmAIQhtM+Uaajl0uS9NatITXWzpzfcdNB4DpY+6nBgDaCtanYLN6fCj4u1ay0QIqtML/EYC61wSA9tAJeP6eWsAoDysFpg1eB0HIQRCIIkVeCqQf/05P3WCB+UPA+CPAzvmCaFWDKEuYcl1yMN+Y2dckqGTeHPEvvWDSNhOAfbefX0A6rS8CUw8X9066bFIfdqMHJID++DJgLACQumyc3gyAEYRRKFCLD1eu5ODLF6QvXedx0w3A1BwwxdAJLTXjd8seQnGrZ9bPFxLyA7WIKON63tYtCQBN/sv9QPm6BkLp0vl9t/m6ietR6fbyBA4gnXtORwRRpNnTtPpW6gWLH83lKqcOFTEnDiKtoHwy8RNFhrefyeztbnrBfbWfgttsP+kIyO32ELD1cHHvInrlvWs6TsnB7qAUlg/suFtAWkE55zYQ0QpqcALoNCXTEt7A3KoaDwGQfqoAOEUBa7fUbKctltwCajVbxvSiyvoasM0BaBKwwdKb9fN7NfcqBWGiSWykWXER0umeacUEonQgCKRfIgDFjya5yq8Wfsfs8dYgiuMxgpAg/vnMzu6mF0z6Zj5APdvPQec0TEosnvQosGOhaLuIYvnwEYSithE52F1XFAA0p5yigD4otCqygFKnpHUpLYP0OcKURYv6Mj4MNR433QhM0gL6QongawOg+6rl9CswKoSkEIxPyTsuAPigCYBmAXVfYcVf+n0SRYw6dP1YwNgHsgSajiJP429RrpWOM6cxDiJB6NINM4w7LbUGMQUwB/M9mZ3dSy+YVG0EoBiDBST5ddZ+PkCsAiIlQZDa3LVatJ0WXG2PbL98AB+4omB3oP/HgTUhmGgBfRqWf2TTrUSjExDSP/qWzQDgfAFAWyzR8rkFtDAKX75jo6nUguZxZ8NByHbvvqBQ36T1swcsBaBAGGRg40Ir+rt9WUDhQ5ZAU7Es2e9LLzglqHRxNkbeuW+oQRRls5jaMjnK0a9ecNf2R4LAwO829kQB3LTtEYQPUwzQAWgW0AGo8AQH0ljp/V17pm0KRcEifGuNOnocO1rACQbKPXhs8TtNwVr5uh+n6Zf3wDgu29g2FdMtOc8B6PdpFj08ZFrplw+ZA5FTvAQQ0/BT36FPDkRqBT9Jag7xYlQItY0f88j78sZzCcKPZlrAQfSCK9uvB4h577SCotUiEJ8opq8IQFl/PUBPEoBLxbRE62LSqG4dFB8r5bHcOtiOQSqT5T7RKzYDgJx+BUCCTxZQCwhaQc9oKcEnEBKknj5FsJ1LAPo9xoWWPWDy+6IIoqbeaO0VA+zHB0zxIQDKkn1GgtXiRxMIAx0Vn0Db+lkuFjLRCt5WEwD71Qvu2H5OfekD5FaciQay/GIbFgBXriwAyGmJADR1ck3DwTE3TQ4B0LetzBJErTYAr2BBSI3HTS8tLKBZPo/fWQDZp197Z3scjGb5BDp/L3+njMweB6B83Gj9wj3atOsPWin9WgXCFlVO/3ctf4iD8XkBkH5USlAZlNPZAQqARr5vxu1yjmH0givbX0UQKI63o0Wun/xHuR8E4VnPK5JQLd4VNttTBvK2uoiKOUf/f+GjwMNBh0NMV6J0c0NpcRv7mrYv3kh8/uHxYp+bVpwLp3R7sts2YzouSq3KGa+q7+x7Co4nazAerRKsVlV1QitF59dyyFZaYY0HMu9mWL3gtvZXMbymBIFMZ1ov2h0B+LTLisxgW+Eq5uU92iZ72ud9vvR+4JFp4NjkRh2ONi0OB1/UBCkvEYRhfuNs4OmhhiPKnFQlx6aAjMnSXJUAACAASURBVPjmz1w41nnwO4cCIBvBwZgTAOUHRq3gyDExD4zRGVYEnpm5LqmQc0M5esFt7acFl0SlHiBxuTkYxxdaihUC4QVXFu5FCUD5QtJl85sjGA0ziQxqeu/fem+hw0F2fLLQGxFlYMRvo7v1WmIVtpt1DFkXvOR7LwJ2HSkyoZmEypoVVe8p7b6qEMnidGG/Vl/L2aPOIwuA1pAIQE3DAmFa4j9f7CPaFpCHKujr5xzZesGdHqAqKz5X+FLRAl58le+jui+kTBALMcgZ73CDBkpN2/7+bfcWOhwUyCEAjQTcAVhKdjkPc2RajewKyu/n1//qJcA2uhBMRGXQOcn9U6JIOjXHQqSYOsVoQp1HNgAvz8yny80H5PVz9H6RqVd849WtXQ/zA0Ow2ayGLJ474L0G79vvbulwkJi8BGCg4S01SKqofoNvSIC+5zkhFUupV8rUTpJN06KpaBkFQm5M1HlkA3AyM5/u9Zl38zrk6f0iU6/4hmscgK5ISUtCTowyDqb7UxwsqFJW3fo/vbuIBJEZ1YRgyHwQKNi0KEl1OKTCZJdxtPDn//v8ooaDaVgqFyiTD2IKfcjZS4Fo+7g+HXOPv84jG4DIzKfLzQf8KVfI/FNKrQ6h94tfz+vOA9cGAAbrpylY2SDlVTTt+uCnV3/V3a7DQQAysJAwobZJgUXi78Qayhd812WeiOAZzEyUiAkHMeu5BF5FwZQAWLPwknkLQy9CrPMy8+lIHZFzvN3T+YbV+8X7c64OHHix74V6zIxB+RJ0wQ+UU992tYoFy3fcXcTDxQkoPsCUhFIczKVCegSg5B8A/PILN9ZwxBSxtiKiUAOi7JW0dLTustF8AGbm0/1o3vjjnSGdj+lYlGwdRO8XN+c1wABIoHk6k61yuSCJITq3jDY9Vx0BqK++uwAfX6JkI/hME0SC1EGguiQ+isqcQRLrF6/0jO2w+6FMnZhyZYsQ1W50qOHgPX1NXndtODsfgMwHzMin+0+ZN0S9YOllMzWfLwKQSS396P3iY3kNOLDPM1y065H4gOW3p4uTDkB8zWdb7FgbdDhEgJkCUDRvogTmd/vPv3BVAUBuvylNzAAYi4hisVQnEHoIqWblrxqm4Mx8ujfljT+YjsWBYgIOc0oJPsq1slCpH71fKybJOEoAuuVTRSCnYlmU6P/Z4iSJEcbLv+Yu9/1EAh7JKEXDKxq4ChUiKymRbwjgHdcUWTARgLYXHSr2LOU+BV7MVwzxwOfkOWybYAGZD5iRT0edjpxD6VhcOQ6j94tP51wdOHBdMeXa9OqWRcmWXA1XLUIUH6zyCwlAs3z+YBkfs1u+VIejJEF3ckrjI9T0y/aMA2+/tgAg08VURKT8vbKMUgAMIGzzAcOi5HknHQAz8+l+MW/829KxhtH7tTz+jIMAJPCYMULAWd6fvi+EY9ouoZBM/Kx/4LUBgFLgNC5o16FrE8JJVJgkiFhaQQBv3+dVbMrWVsC8UxFRkjjaVsW2DtRdOJ/vAyohVYK7A+bTvTdj8HlqTMcaRu/XxHkzjgNkIOWuDr8jnYYDKDutgpUhra0uAlAyCCUAK8BXcjBXgLCk/h0D/hcByDxFAdAzoFUqUBYRJTUcMWdPP7ONL6i5bLQeALJRQ+bT/W7G4AuAOXq/lsGdcRgAY+glLkYclJVTsa6ptCX3uQjAKINQstFrAZKIwWxQIhIJuovB/Nx+r2LzFCwlj8Y0evl/MYk0kieVtcvrwGUnHQCVjjVkPl3mItQsIPuElx9G79dOzDgMgGkAWlNyBJn8xKprBRC+zgEo4LWRgcdVcOCjjlNvmx84DrzNAahaFZWLygKWxUNibIhTcPD9BMLLa65bzreAMSGVoXvJ/Cgh1WUfO+XTZS5CDYDs9GH1fnOrIDcAkABTTDCCLYK0Cwi/586WcKJUiEpC8CCBYDsiiSplqUIUmOjf+o2tIiKVUJbgU5uSWl4DWwX4+PcXnrQATBNS+8yny1yEopdcay+930y5YhgAg+9n2OoUeI5TdQer+32fdhmGoOBZanBo+g1yEKU4dYgFSvqB//vZBIBt9RshkTbW8ZZZ2hUgvDL3iU3uux4LSBM0ZD7dPRnTH08VAIfV+2XAOucQAMuVcKfFSD/+IAABsEoGwYAoHZIKEEYxRIHwLS8pUuhjFVs6/ZZhIVWyxVKBBIRXnbQATBNS+8ynI4tBzkEACv+chlUVIKE/5cRGsWmlKfIzudc3APLQSlg3E2OCyVRc1kpU3DgBmKoQsWtlBcswjPu+nfTYtBL+GQdgOf16GCZW6pXlBCqWSgqJypoOAFfXXDifbwFJLvi5HAjlnUsiIe6AjOp4iQNQHRlT2PlgJCUbbc2s+v/hFwFb/q7gm6HlYpBbmTV2sscQyy/qFBj2v0/cAdz/HGD7NDA1AUyOOU+1CwWOewNjKj6/O03F1/WuugW4/XJgfBoYmwDGdH7IxB5kLPIB+I8AfNwZgga5ck2fJbEm8V9zNWPfrasbgMuPAcuseJ8Exsb9FdBhA+7gaQNKB6TfcgCYug+YJT+g89aoBDMmIMScP12uTKj13uDv8zsKig/uJ1uQOsnojm3qB5P5ACRBH3OhPuzzRN9DV88HqQLEWPJnvTy5nm/t/1s4BcuSpRZtGAu4fi+wtBVYEyccrYwn6hF8/FkJp9bKxAKVFsn/d8urgbHPA9NPOEOWl4+2cfoFHhfVrJTZPKHSj5daOtup6JyCpPx8rHWRVQ7WOlrYCMx8AHIzlxkALPD9c0VB+x/A3E/+E2fUYHXdF7KTGwdvTd0AHP9r4PgWYG0KWBdfsBdsMPfPrKKsoL9XAVLAvO2fFylCE4cKliyrDVZNcGS1CqEYhWFiAZV+XntaURdTLmpCEbpchTYLqi6NrkMCzLzt5Xc4HwyJmmkJ+Z73jQOh4NWeDUZiK1K08f0EXt7CMHVawIk7gaVpYJUA9LI1Ao8bzKX1cytoFtFfpdCIWz7rgzHgth8u0oPGDwETc8CEMySUzFaikgtlpW1Ta8JqNba7lVljSRgW+Q6ZP/57WQvj6fydBjXfAjKbgEvMLwWCvhNoipgNpnQshlS4IGFWzIk6ylWwAz93ETLxGWB5ClidLABoIOS7pmGfG+33YAG5mND0G8F4678vkiPJczNOAC4UyQm2N8w94kirFlfIAl7i402d6dbPWWAtrsjOFiuCvAJZOQE0pHTFsckHYDeCvhNgipQNxoAz8/8IPr5nbvH2jd+6AThJAE4AqwTdZKEBLDoDgU4+YVkPHIBoPwareOt/BkDexsMFAFnbzNJYm0IDnVwbt4uyur1kwL7Tp+iZM/08WT9Rc7DHUmuYTr/x+6o4ovvu9fjBbgR9JyA+omwwxvZI5ULg6ZW7y9FPf9QNwKm/CgCcKABovh8ByVy/UCtJq2f+X1yYJPGU27lIZLbuEWDsWBHesZeDz4iURLUWa1TE47LqK12fZmd3OXidFctqm92KatVs1jAEsNv6sdymaa2g8+xUL4I+Pn2beCgbLGWHI/h8G3oTr45iK86POlbBU9yKI/AcfLR+ouQwH9BfmmbLlTHboOnZ/T9+5vaf8FUaAThXsFOQ45mUcgZCWTAxe0UQ+urYMO1/37GtxQmoLCBtRSp30LrDp2SFdzYMgk/R+VNwvwR9mwQDsaspGSfJgYDYNTbp8psCQFJxEIBkQjDrxt8dXCUIY+COH5MVFPi8SOn2n/QYLZ9Gp0cxANIP5IvAkzVzxivRydnKNzBa8fddM84b6AFyAriMF2pajk9kYIeoClXmA3AQgr5NQEHMBqMVFMNaIOayNRL/vhlH3RZwmhbQQUcAasrVVGz4EtjCu/3dfb/ID3PbT7uKAZ/MhcIC0vqRTo4W0IBIEAmEtFwCYqjW03bcmdwBYeoWgetUbrR8snrloiR2drpACf+rD4D9EvTVjIJu7HBV+781X752Czj9lwUZkTEgcPoNPp5Nv4oBRhCG6dd+1DkMz1JIhR1BAHJ7zwqO3fIRRM5tmDK5CoQKsSgOeBYBKFZULTqcB9r6Ni5KYmd3WKDUA0BlhNLM8EbT1QBXBU72aI5ZjUcVOxz7WLkQ8d37vsart/uA6RcPsxNSAtAXHDYNC1AEpf9s01kKwuBwGU7HgVt/1jtD1e60fgQigSe/j5bQp+KYpGB+H62jT7P8/ZypBIC8Dhcx8eY9wF015abhmnoAyJ5WSrKeNgKO9SHxnT/LSasJBim5lRjWBEIVeROInKL1qunybRawLgASdEy74qjaNNzJCgqEEYzBGvK0297mAFSHEIB6ebKDgc8J1ksmV8t29f1en6L5v6cxIK5iK6Xne/5jCTiFcTqVn/r/tWDPWwXnEPTVgIKUHU7ljASawKefIwDpMdRxRB+wFgD+RREDJABpwSzz2c0LfxczVjkVKwaYgtBBezu3SvX08d39P5uO3QKahXMQciourZRAGKZWar/YZ1xXRPe8wQr2AUK7TvbOVTZBXx4MBECRnConUBSFEXT6mf/TK+/qmzAF/0UBOPqBZYF52HrTFCw2LH5G8UCzJEko5nZqmRnPh/uCXmpnVpDTsIPPwKApOaSA2QLDLSHf97iPx0tpISLfz7bl4iFfsUsnj+HZWEeOYDCDnDmCvZkEgedcCjxGseIhBYt3vx049HwMLRh8gA9gh2MoH9ABqKJzxf0McO7XlSAU4HzhYYFq+5D7hwBu/98OQLlIBCKnW39SlXNY+nqeiq2dkQg+gnGPb9/ZpT0lq6MV5D96gLCwgDmCwbdnCvZmCgY/dxy47xxg5SWuUjigYPHFbwA+fyGwfr2rXrMvPB+vp3L3GHCgi9JOHQCkRVPppeUBigXLFymyejYTB4YsgfA20ofRAlYB0FfAlvQqP0/TsX5PLOB5DNu471cmIwiBaRww/F01J+mz2pqChxUMZvpJlmBv3iTocsW4dzewfhkGFix+2febXDAeJO/YEILBB7pU1g8LQFo98QASVGYNQ6DZfEG3fnEqrgLhbf/HV15anbkFNCvohWSl9XPQ2XTM/2s3I4DwPIZwBEDfgitH0Ek6N6x+u/iD7T4g/YdBBYPpWHEaHlqwNw+AQa4Yj54JrJO+aQDB4pt+oCAyYvOPEIQDCgYfeF/9U3AbAMX7ItAlVtAspKZdz5SOlvA2pstxjES3wJ+92NgAGK2gwi78QoVfEhBeQACqNNP1RdoA18kKdgDhxkUI/zKIYDCnqyzB3jwAJnLFOEIW7QEEi1/1Y21ywVglCAcQDD5/Efj7M4CVrZ5AKlkhxeQUaxBI4nvFzxf8IfCVC4HV7cC6ZEX5nen3VX1vAGLZq8ysrvHY+QBwbGfI2E6JpLvdX+ksthpUvQrmX/sVDGZVUJZgb17vJHLFeGQcmCdVb5+Cxd/5xjZ6QzzMLOQBBIOfTV2Ps4HFHQ7CLQUQmUrV0rgKJMsCjsxGAqTn/hzw0EXA4tnAyg5gbTYBorKkUyLnkB9YVhTxu+kT13iccwtwdBewPAus+b2ar9xJAafqfgMQO4dh+J9+BHe5gqZZZzYok1JJUcpaR6bp93P+W/N6p0KuGIemgEWKgPQhWPxdP7NBLhiHKYHUp2DwpZ8rLOD8tmJQVplOLxAqmbRKC6EDYC7/CeCRPcCx3cDSrsISrs04CPm9ArZk55UvKAspYLqPaPdR4/H0g8DRHcDyVr/X6VabLHk2PhjpPVZY7d5xwF6CwS9y/4LbbVyQsEKIufGiKe0p2JvXOx3kinF0GjhOQY+oNRtljji9TQPf/fOV9IZY4Gq4D8Hgy/4W+Oo2YG5bUUy04vUcLCqSJVRWszJbNgxSmMau+q/Ao2cBR88EjtOqbgNWWaTkIFz3YiWrF4nAjtN0nBZrJnU+/8PA3CxwfMYB6LUra3oglL0tps6wlVha5rLiqd9AdDfB4Je6U0s/0BXTDYh80Sr2FOzNA2AXuWIszABL1JaKWq1R+nwGeM17OsoFY5XTVw/B4Cv+Djg0C8xvLYqJCECzgsxmZlq9T8e0XGUyaUizavPtxoFr/zvw2BnA0Z3A8e2FVV3x6c4sqwObckeyhiXAowUSADhD1XhceDMwx37lvU4XxVN2n3rJIocygkr/Vbs7fe+EdBLcfaXXQ3IPWIrpBB6XlnwpR76jYG9e7/SQKzarxM7qJFj8mg8UarMV9IZ4gvNDD8HgKx8HDs8A8zMFAFnPYQPDl0Co2g4fpDZLqKCxT0/7fhJ4fCdwbFvhRiwRgJruCOwUgCpeCvUjZmEFxhfk9W969kW/B8xvKQqnVgg+B6CB0MsI7P70AHgmd2n1NQ0rv7FvALIlVYK73MnQCDLThSGZoDpuP7uCeuX5n8zroB5yxThGnQ0CgyBMxY63Aq/5aBHG6EBviDlOLV0Eg1+0AByZLgbl+HRxnZXJoqqttA4ODovlJZVuSjTQFtq+NwNPbHMAzramdVpVs6wEoPtdNg37wJfvsYiJP9NFqvHY+7vAwjSwxAeNxVO8T6aNVRRRlT6hHrJ0Ovaw0WDJCKng7g86APvNB9wg2JvXO33IFWOBgn8EIf2nRLD4tbe1+AU7yAWbZeskGHwVdd2mgAUCcNKnJgLQrZ/V9/Jnn5JUYmnAE3hCmv3+t8AWQfSzyPK/POOgJgDdsgqA5nfJAvLdLV+bz0kK4RqPZ3wQWJxyAPqDVhZQyQr7gyaXI9axWCFVAGLvRUhV46PgLnUWBs0HbBPszeudPuWKsTRZAJDTo8l8ui/42juL5veQC7ZpsEow+OrZQlqVVuH4FLA8WVyDAOTAmHUQCAWQkOlsQAwDt/9/AE8SgPQpNa07+AhAA6HLXbb5Xr4IaAMfv/eGvP5NzyYA7UGjBWTWjh40v9fSyscHLtaxhJWxFVsNNAXH1khw983+DYPmA5aCvXkdNIBccemfceooAfhAAcA+6A2xLuAGucxrzgKOMexDfV9OwbS2BB/BEoqLSrBoYGgJ3E8qLcIEsP/ngCPuUy7S13L3wb6PU56/m/Xj4Ps0TKCXQA6AXuNeZY3HMz5QANAeND1kwcKXlj6wOZQ+b7R+Pi0PD0DeFAfk590CKg8qncfoFzIRVWVqfFfBhgn25vXOAHLFWCDbvPstBsJZ4LUPt+jdesgFg+qVptWq11bg2gtgfuLiRAAgQeg+oEmsOujsXb5SsAoCIN/3vx04OlNM6Yv0tdx1MKvK7/TFjVmeCD4HQQQhf159eV7/pmc/kwCcKABoeYvR0oept7SEoZQ0Tr1lPuPQFlAtO0nyAcWhpzw/FSjFzGjLx+RGvxzoSeC1hwsA9klvaFN5FAy+9mJgnhaQ0qqagglADo4c9AhCDpJPl5ZommQ8738HcGw6AJBW1VecZv0cePwOY0/wl1lAD/WUCx0mMlDLr8bjmb+Dwp3x4nkDYbD0thIO5aNtfmDi/xGEeRawxhs7Vb/q2huABQJwAlhyy2cC0xoggjAAUCWWAkksOiIY978TmOOqeqqwqAx3WGhHK06n7TDwOcAV/iipPAKjwgrZm2o8nkUA0gKmAHTrp+o9MTrEYvq44o9pZIOtgmu8mafCV72YAKT/RwAy5OPOuVlAAk9Oule6xQRTWUKlWtkU/IvAHAHti5oIwDK841ZPFtCmdr0U8PaC9hVultd4CIC8P2Ztt/m5/qC11TJXlJDGGpfGAmYODgFoCxACkLpuWh3KCgqE8gNVZK4KtxgjJAB/2X1Krao1rfN7CWZf3LSBT4uAEIyWBVpipL7GgwA0AW25GbGENBTRx3rm1M2w39mmrFVwjTd1Kn+VAZALEE5LtIDyMWUBvbLNLGHgd5H/V07BDp7r3uU+Jadgn3ptxekA5MBri0/Wp4wzBjDbCnkMWMqVpE8GJwLQqvfc0pqbkVj5aNk7gbCxgJno30cAjntowtXNaZ1suvSKNhsYTcVKmw9F5xGE+94dfEoP+JYhD/8OC8eIPUsUHokVVKB78XszbzAF4Pvd//PCKVGIpOAr78mn4DZOm8YC1jco+w6EFTDDPJqeCEBZBa5GffVbhmQ8DtZW5TYOvPhXip0GTuu22lTMLSw+aAVl9QhEWjurI/aQiLJkTMLsX9R3r/ymZ73fp1+37OU9hunXSkdl7T3QrhKCtlCM59k2i5CMMSIAGdqxEIwrmptzTsCEut5yilKoJLAcxCq3fe8tLCDBFwO+tKjyuxSCMdYEXoeDrHcHvu0tTwLzmwHA4N/Gh6zNCqqeOSxC2lb8tQSiMwbuqXIqAcjFh2JjBKGJyShQG6ygVbfJegULWBYcMR3rvb6oCRaQwFPgl1M5rR7/JtBZOIZWx/0+s4QeY5z/1/X2tFnAxPpFELaVkdLN8MWGVr4pCBsfMHN8bmTKfCjZ0Ncp456/x58zLzfw6Qf3ABd8pUgEYmqk5bGyek06IQl1bkXScnlN/u8L24Gdx1qVq91KQvrpgwaAAw9p+wnXPw1YjyWMGtDo2ASOFGMU7SIEUzdYD34vMPmXwLbHgdkFYAtlGiim6DpxJtvq9LtlVr/aWKEB8pUXAOOPAFPzwBTZ9r04vdQ9Ts4pAZ3cd+yHxgfMAOH+vcA69/9Uxijmz/AerYpdar1lNSMYzV+vWY/34I8DY58Gph8Bpo8A04vAFEFIknIHohGVR62QhFRSYjQE6qFri2z3iaPAhHNNlxKwArI0Q1IAxwfReacbC5gBPp66/5ICgLKCtqnsrKKlrFZUFPKOr7osMTtdsxzqQRZ93Q1MPARMPllohUxRqkEK6gShOP0S+dY2hlRv99y+ovRi7IiTnTvLqmg6xDPYpqAUgRgsoR7MxgJmgHD/c4E1FXu7FRRbvEgd7evXWlbPpp9EgUjiJpwe6zwOMlvpAWCMVusJYPIYMOlSDZRpoGiNxKzbdIQlXONMWJbGtw4svdgz3El47nzTRvPrrKptAJT6ZrzfintvAJgx4vsvdQvIXK5VYF3sUZxmJUvgA1FOvwF8spKyBtM1y6EepI4LqVMedbEaTp0EIKdPKh5FqYYqSxgo2jgFr13j6XXHnOiSZOeBVSvyC8qC2r05FVvVw9cAMAOA178AWPMp2LJaaekiCPXExwHw660n1oB/niGQazwOkkSepbJ/72I1x4CJ+cJ6lYI1riccrVicUuVSmIW82pkwnHHVOKbFsOozQGkFkwewnBES37ABYMaAX39ZAUCCb82nIlo+40p2gNnvsoKunxH1xGwA/LOzdQOQJPIuHzV2GBg7Cow7AI0l33XfjOsv6oVodes6ISbBsAZMX+kJxU56KY7pkmFVhOciuvTzSt05v0+ryuT/9gDrZNe4wPMsI7VJP3GcP7gUOOdvgL1rRYJ0ZI5IV3hV4/wrGYPPU3/AiRhYusy2K7mU999P+z90ObD7LuBZK0Xdkeq9NSX2+o4HLwfWlopFCC0fgciBMtAFC8CGrYXVoVjnU2G7rTXrzh4kfRzLY1kyGwBoeiGcPiXb5eAzdXWnazPCSScb4j3xfmav8Cx2p50lAMW0VXINitCogl2r9H2dcctWwQxQsn6ZTBbMNtcgdKIbiZj51VcBk38CXPxoQcfCUg8pjcYgZScw/momACnXyr4leBhs5QaBTHpf7X8dMPYJYO8XgAv9e8QJlAZZq8D4xSuANYKPJQn0AR2AHKy1MACKe9nfFI6IEqduEWoHIJ9wlsVKLekoMCa9EAegSTYQeM4TXco2SEMkAHEbBZoj4bbYtdyCVrFqGXgTSxgXYTZeHLi9AMjEQRCVUXP/n4KUaaT8vVTi+Rtg7GPAuYcAWlMCgUVkQfJ2Q12yBvPXMwHImhDWwf81imsTiLSEvHZkr+jY/p9CQRD4p8DOBwteItai05qn31FFdfLlFxYWgCDUIkRkj/TxbCEi/89jfPZ3X2VqYSJQbmUNQY3HQT7hbv2sLoerVwKQHNEEoCsm8R4MhPRjXUGzVEIKIoY7yaEYuY4dgGb5RXruoSgtSCLLarkICQ9f6QNykGjFdjsIBaI4kGlt8W+Rg5g0HJ8qAp47nihAzFpuWtPIMBZJlASILvR6fQ0DCVbJCkJOJCqnk4pGpb99tZ8MopyiKDX7WWDiwYKXiEQOehCrgKh+eJQ+EQHo1Lby/zRlyf8TIbf9XS5ftIb8I92YugH4ay2pLusorl7dAoonWtMwQSTdOFuQSLTGHyIC8kxSIQuA4hwU2WUAoO4/grBcDbsfWElSzg+JCoYDoEGM1ixSkHzgF/wG7y8sIa3J7JPAGWuFJSQIaU01iJHUiYP4e33BrPOHmG/JMaOfTZVYRhwGav87vWKPJ9/rSH4IOGO5sITqg/ggxXs4TOaBAECbeoOsgfl+DrQShFqcEIhyyt0MbMusEkx76iAZXKM8BvXiZAGlF+KaIbaadYpem4aDgpJZQz6YJABV5VcHAJZ0v4FxX6KG5UpYs0KnqjhRuagEVgPglYAl9ciHf8mdUrJh0Qx9vkDBzBywfbkYQIGwahA/kglATsHsDzKA0BATiPyZ4NEDwIeoa/uFYKKXL2f24nQoIgd9R3yQCMTFqwIAfdBWI7+yB5ZLECYLETd85YJl+2YAUNosLIel/xYlu4Jsl6bhNhD6it4WJCvA2Zc4Gxo73RcgJeOqFmGR6rcChLYACyGojmEYdj59KnZ+tIQRhH9IvWA2hiREjDeRI9Cly7fMF3EtWRFawhQIf5IJwE56wdTIYdt7tp9ys1K8JnoJvod9Wn682PNkP4hUy1ndWgstAtBDMLYN5/6PAc5DGNoF4SrZfN+4+IhT8jqwg2Cp8ThIJ5vfSWBXAVCrWN9SMxDK+skaOvhoAc8me654pmUB3f0wyt+E8FyRAGmPlOEoiSD2qgvmAKoOm52fAuiTDHSyIRxx+lI0QxxADubfF5vffMmSajrWlP7nmZ3dSy+4r/ZzAUEHnQ8R70HsXlK+PgJsW68G4XYGZj0EY2EYATCAT6tAhmE0DXcC4faapcwMgAIfLb0kuzT9Qmw5uwAAIABJREFUSi+EfeALkSrpBovbrQDnkm8wAo8/E3i+CCsZ98NCpAp8cUekZyBavI4ET/TnaAk/RQCyAXy6uNSPA0i+wMeB6ePA5HFgZq2wpNGK3FUDAHmv3fSCe7afX8CB4UNEEOolVi/3obastNwJ9cO5BOBKEQMsAcifHWzRAigWWAlCn5K2bQYAOe1KMjTIR2kRUhKVS7IrLia0v+3xwHMZMCbYNP0KfG79zAqK5DxOvyEuWu6VD5KSHy2YAEQAfpaRdl5UkuUctIpBnCIIl4psD03FtIIP1ADAlBuJM47EqqUX3LX9kSBQcuuyftK78xUkHyQ+RLqHZ3Fv1KcgLj5kAQ1s0Qo6IA1nHhNLQzA8ZxvBXuNx8DcS5UYpNnoYxsCnUIqvZo0F3wPTMa7Hv53HOJVbS/l+5bumX7d+5WLE44hxIRJB2NMCqj9ixwuE90svWCaIA6bAp959EKeWChAyA0PTOV2unGMQveCO7bfqHbcS4rJR7Ewqnw5AWhLuImg2uFQAXAVs8RGmntW4+g2hB3P79L/EJ9zGvqrxOPibiVihAOgrWQOf/EBfBcsPNBBqW9Hv6zzGqFzmoXz3B9AePgXiq6bgiv4YOB9QHS8AfpkAFMMjrWAcQA0iO9XJiQyAnos2vV7ESHOOQfWCO7Zf7F40mZFQScRKAYBaSU6vAVcTgN7xXHiUFpDTMK2dFh56912BTiDcvpkATIXzCL4g3WXTZ4jpGfjoF/oihL+fx+0yWUABLwIwtYKKIabgCzHQvi2ggBKn0McEQDaKT5cGkIOo6SuyYzEfjQB0EM5nZgAPoxe8of3sgSqCQM3jkdFLvpRvR13+7UVRuhUFSavNO6otwp88ZZ3+t4M6HLtch6OT9AG/q9cmtf//gV1JDYcnQ2zY6/YakfSrU+Pg1M45NqPt3IEtoM7WFHokyrWKkooglCMWLYjiUXMtK3g8Uzd1WL3gDe3vRRCoUEYCwGtYFxxqgA2E/jI20F5hhmQod98BHNnlxOTig1aGiDanO21yV4DygWuB8YeB6fnC9WEtiKVVKeE0ZGiXWczeJoWMIig5a9V5DA1ANoKDeDylZ9NSXxyAsiKawrQqmCv2HVf5e8aRoxfc1n7xs+khItAUvojvyWryxVcWJZksVSyZoQRA3dcAoHzax4Gj2wtu6FVKM7gMgti02jbV476oUJJs1j/AbA1mQ3Pm8eTRsoZDtR+xZKCiEKmMXTIeXHPGdhYArX8FwG4DGMEnAHIK4yvT58nWC2b73cexaZgWWaEKgU1gjNbPP7PvOYGsUSBkv3hBtmRWNzxjTk9RWktvxp6POj0vARjY9sWkFel8RWxegjIF4RjwAOnZWMPBTGjqvHmszxJOBUD3xyznL2bqROvoP3N3q84jG4C7M/PpcvMBef0cvV9k6hXv+2Yno5QfGArRbaCC0mWv2YtF3ecerNDhkNZIIsXQRv5dlTtGADJSz2gEE1EJQM//026HdIEZLC8B6A0tk0g1Ja8DuzJdphS82QBEZj5dbj7gxZN5er/IZI+67pscgE7QaDOUMyC0Wb8+gXjuR4F5J6YsaXnFhBoAGEVvUhb60jISgCQnoh/OLBgvIrL8v7DdFkEYM5dtNg97tvz5zJqzdfIBmJlPl5sP+DJP5xtW7xffnzeh7H+Z+3+RpkyWT1YxuURJYVtx6T0fCTocouQV85VkHRIGegEuEv/YKpkA/JceVmL8kv6t5/9pu62tfiPWcFQVEa0DZ9WcLJEPwMx8uvfnjT9IgZyj94t/ldeA/S9tMaGa9SNdmsIxbvVscVJ1GScoMt4UPwhAsmMZ0aXzQBsvdGRBjQz0FUpEJRAJQOq4KAnBdz+sfiPJ3bOYn8fsykyVWMfiN3BOzckS+QDMzKe7OW/88aqQzsfE5kH1fvGjeQ0wADodmVGwOeiMsUqHrGOnS4UFy9P/wAEojkEnI+IqOIJQNLgpCXhcmLAtD/D+kgQE235L93tj+YBqgTX9BiCeW/NedT4AmQ+YkU/3sbzxBymQuZhm8g1T+QbV+wWFdjKO/Te2mEFNlCb6gPF708VJ1TXHgKd91GnZpDfi1k/gM2vqU3DUnCuBmNQe3P9vw6pe229KOvB0K1k+ZS+rnrfM2AlA3JMZtah/EZKZT3drxuDz1O/yxAwu9JgJxr3lQfR+8aa8Buy/wdWQZAVl+ZzCrG3q9c/YrkmHy3IRYryAAqAkEBIlopJxNNUbER+fA/H+/+AAdP9PmS9dazicJybm7mlB8nR2dI1HvgVkOlZGPt2nM29GCamcGZjAwlQ+vvrV+8X/zGsAAUiLVPp/wd+zaTMFWw+/kAA0GQQnpCw5mDsAMIrcRB5mC/+MAffTwgfwKY2KfmCZ6ZIkUShrxXxBX4yYaV8Hzmcn13jUA8CMfDqWYeQcSkhVOl8U6uxH7xekrsg49h8oiCENgC5TUG5vKxxT8f2aRtOtcAKQ1s8soPuOVUIwpchNlEEIOyNSIrrvv3hwnckWIZPZsnbcDyzTpvg3lU8mpZQqozyfK74aj3wAKh1LgrsD5tMxiz/nkGD1sHq/YNFOxkEAcuW7oqmXlisuQOT7VV2jwi/kTgj1RkoZhBje8Z83SCAEEJZW0C3gff8tADCt4VASaWIBK0HI9q8BF5yUAMzIp8tNx5Jg9bB6v/jdDPSRns0BWIZeUitIo9IhHmhXTvzCPQddccnZ76U1V/IvC4SBCFyg26DFNg7c++Mhhb6qiCikT7WVUmr6lYn2nRKyrdZ51GMBlZIc07GUBdMjny6XCiUmpA6j94vMZbgBMFo552pu27PXAqXTyAUQcitOQjAm9xX0N9pIwIPmSCmH5QuPqER0L4kDYgp9zOUL6fYxkbZcFceyAreAF3GlV+NRDwAz8uksnT3jiILVSmpWNlhMze+k94vMZfgGAPJeHDjpCrgM01Tdry9OzvmYAzAqLVWIwEShwzbRwwSEn+MqP6bQK5tZlWyhjCCCsC19Xv7gOnBRbgp7cu/5AOyVjqVMmA75dJZ9nHF0yohWNlhMxKnS+0XmMtwAmFq4imnYbrEqNJPc+9kfd62RKh0On8qV9hXZ9askEPgAfI56ziocUgVbzGT28lEtRMoKtg7lBHtznfZNA+CQ+XQWM8k4uglWK/NLYKzS+8U9GReXD0g/Tyvh4Ne17Yb4Zbr6g6y7/aNWcoPpjKRTsJIags5IJwkEAv6en05S6GUBfRWsUExZyVZVQCQwrgN7Wfdd41GPBczIp8ODeXfTSbBa6YYxlY8/p3q/udc3C+jTbtvqt2oadnB2m4oNgMn0W0p+hYWHWbwg9yU/0Kb9EIy+5y2hiCit4UgKyTeAkN8Valk4Le/ldlONRz4AWWBRM6fdIPfHstw/G+SE5rMnVQ/kA5AkLHS0ak7V7reXfhgACaBqDtD3e/nmc5k9kA/A80JReq+U38zGVp3ObJo/BvAOD3dtwiWar9zEHsgHIGlFubqSx7+Jja36anLLcDvvgwA+NDpDfILv+qlzuXwAXuSjrkKemlO2e3U1uWUYnL8dwB/5e2apca9LNv+vsQfyAUheX4VguB+mzIsaG9ntqxhF4Xbe3QD+n7/uHLAW9wQ1tblMRQ/UA0CaHC7plXEh+q4T0OWcfhleYTSHBK0EH/mi+fcRuKQn4I6fWpeoB4AevCz3HOOm9yb3F5mBlZBNclYCj1aRfyfrbgPCTR6AzK+vD4CyglX7jpmN7HY66d1E0ctdIrEEE4wEIMlam+Pk7YF6AMj7EwAVbU82vTerCwhAXopJN9zVI+AYrOeULLZgErY2x8nZA/kAJGWr0naUWdFpy2cT+oCWjpdjLFxE5UzYIBBpEUX5nLnlvAktb76SPVAfAOUHpiAMm96bsVtCAMaKALICMyxDq6cXfycA+b/mOLl6oF4AiqBRIEzBp7/X2Af0+fi1XIioMIlAI+AIPIGPmeROWV3j1Zuvyu2B+gHoFfZiDS2lC0LiY52WUADkQoTTMH1BFSYRdHoRfKSu5v9qrizMHYPT+vx6ARhSuDcAzzmDo5ZGHT1PAKYMwQxME2jiSo/gEwBrrq+u41ZOy++oD4BaCcsXTPiSI3ey8s4KGoG8QwCMFM+0ggQhLR0BF19SXuD/ayakz7uR0/TsMcxg3SjfqWNA0hsrga/ojaq/8WPcC+YIk4Ke4CMSuB2XVht1Oj8zIfXlU8BtU8DhmYRXWdfrdF1fgr3+S8At48CD04DVjXQSDO70PTUnaJ5uOCwsIIFHSSFy1pKPWCDsZxCpw8UVgKSPxLXM937OzxxAljzcPAbcswU4Qh4V3UN8mKoeKm/bu78IfKJQa8VD48CylHQiL3O3/qg5Rf30BKACMtJXjXKQcfBSK8Dfqc3KVCwuN2VFGRnm/yKZtq4Re5ifyQQgM2A+BeB3GHaZBo5MAIue0l7Kt3cC4xhw+5eL7TuCkJk1jBtyerbUfYG5ExjZ/pqrxE5fAOrOq5SmowVIrRp1IyT2R6+fg0bgVYG4CsyZe2UsaiOGKXr4Sfp9k8CxCYAFSKyvXeY1o1BxQux91yMtfsHPutgnnyUuUvhc0ZsgUXib+nVkq6+ZKaABIHsgVZnuwD9sVo66rrR4ImdhLGSQ8zPL/JgBQxeU1ouWkO9PTgDzbgmXxrzMkatl3keivfG5x4r4IRcz5BfkO5vEZ0kgpIfBZ8yKjlL17syy0tMNcOn9dl4Fy6dLFabj1Mpvow9Ify+I4Nlo9Xt+ZqU9VdJpqZh4QDDyxUyYOYJwHDg+DhgI/WUVZl7aSEt93+GO9Ia2iuZKOfA7lhp9JpvAVy61w2mOwO5hmCgMHC1H9O24gu6UD9jP+ZmbtLRaSsei9SL4XDPbAEh/kGQ/pSUcc0lbApFWb67lQUhpVnLBsoKqqZclFMmUtrxPcwxl3X7vOCAtYLSCcugFQmqhdssH7HU+RznjiOlYXA8wqkOfkItTAom+oKygca4ES8jY+N3z7fSG4hfUtp3ihUHruVSsFy1iRvNP+1N7A5BdJACmVpAgZPhGOyCigEjlPLudn7kvFtOxuB4g6OjD8UWLRkCZFRwrLCEXJQQhp2K+37lQeBCRX1A7KPQto1prFEmSYn2mB9EAsO+kYfk8KQhZF8yjVz5gp/MztyOUjiW9bCUhEBhKRCCgSis45uQ/PhX/xfFWMgOnWu2gxB0TF/o0kEZ/kCDM1Ts+3RHYnwVUL6XhDFrAswfIB6w6P1MrTulY0sum1VICglKwCEACqvQFCUK3gHcsFQCM/ILayqP1k9JshVqrncMalOYYvgcGAyCvIwuod8YBJQmZpmGJeyRwkGw4n8jJOJQNw3idLFhMRNB0SgASTJyKoy/4ieXCeFfJBUeV2SoAclFyR0bbm1OHTUiN0/DTAwD7zQeM52dqj8VsGEkVE2jKetG7AEhQ0frJAv6RC0trC1skl+IWlNinGLbSaZg7Mc0xfA8MbgF1LQV1z08A2G8+oM7PVF9Ms2GUE0gQyp+Lwu2yagLgR9ZaYpkSypQ6a6Q2DCqzpkvietXIFdoZfuieGmcOD0DeP0HEbBhNwYPmA/L8zJQsATAKnguEqS+XTqkE4YfWWwCUFZTksYAYwZfIBeN9Tw0cjOwu8gDIZqsoSSvhEeQDiiGYFoyWiSDRypWgi69UP5sc5fIcquSCNeXqe2X9ZAHfM7Khe2pcOB+AT41+aO5iRD3QAHBEHd9ctuiBBoANEkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cvAFgg4GR9kADwJF2f3PxBoANBkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cfOxqYJ2au9RdPtdp/khoEOlglDYT39V1PzQFXLsMXAlgt9PCxJKPbufyf8/KHIPfBPAZABf79Xc5XQ0ZQ1Q7360NbxoHrlsDvs5ZRsgo0une06by6X1mZvtP99PNAp4F4LsBXA5gjw8EGTeqaGF4QhzQF80CX7cAvGIdeDYAfhdZ2sTKUcVrpE7nd31N5gj8e2dIo2osk7NZpMdK0Z19tv+bJ4F9K8D1ACj8yfNSikHeg+5Z969m57Y/8/ZP+dPLKZhP/rcA+AYAF7g1oRUhEMUzFMt6eSJfX78b2DkPfM0i8GIAX+uWlAMppreUUErn8p2gzTl+2flg/sDbTkvIOik+CP20//mzwAXzwDcCuNTPJeFXpEpM6QEjIHm/zTF8D7T5gATYNQCe69aAloRTGulfBESBSYNyxR5g/Bhw7hKwZwl4vk9LnM5JmsBzUyDGAX3B8G23Mz/g9BuUa/0IiutfMkj7zwKmngAuXSvOpUvAWYBtF4BTnspIj/O8zPaf7qdvWITw6eZA0JLQEhKEGgxZhUj/dz3NzSKwbR44exnYvVKcy+mM5Km0JhxInUtrGkmzCPicg3W5LMGkQiZZTm9xS9Z3+4m2o8C5c4X15pTKW2Lb+fCx7WLtjYxzqiql29Icw/dA5SqYf6RTTilg+lYCIXmICKQ4IK9wxfSJY8AZK8CuFWDnanEua9ZTAMsaCog3Dt92O/MvnRGBtGwkqKRmMEkqCaa+2k+0LQDTh4rP88UHj74kF1WaATo9QHQ7mmP4HugYhtEKj4PB6ZQ+FS0hQahpldPya1kXTOqNY8DscgG+HavAttUCvBxInitrkgL4lcO33c7spBdM3kAuSnq2nx9gQfAh4JyVwvrxwel2z3p4aMlzH6DM2z/lT+8aB+Q/OT4EEqckWQSBkGD6EQKQnDCLwBSnYgcf32fXioGUFawC4esyu7CXXnDP9tOCsyD4KLB1rmgvX7zfbu2WG/Jtme0/3U/vKxBNAMoi0KcjkATCN3HOEr3UAjDrwOP71rXixYEkeKMFlSX8ocwR6KUXTJ7AaNE2tF8WfA4Ye7Kw1mwvX/yZn+eKnvcrfzC6IK/ObP/pfnpfAGQnySoISBqUXyAASS1AK0JfagWYcRDOrAF66TxZQU7jBOEbM0egH71gcgXSFZAV54NQtj9YcNIpbONCyh8Ygi8CVospApDuB63g92W2/3Q/vW8AsqM4gLIKBBIH8bcJwMCNMX68BTqBb8s6sGWtsIA6jwDk662ZI9CvXjA5A6NVa2t/IAicnC/aGV+8T74IQPm/AmGuBc+8/VP+9IEAyLslAKMV/LgAyIUInfnjwPQqMOOgI/DstQ5Mr7UAqMF8V2YXDqoXXNl+EQQ6N9v29aKdesUpWJZbAPyPme0/3U8fGIDssDid/pUASCvCaXgJmFguAEfgEXT27gDkuwaUg/nbmSMwjF7whvbLhSDL5TwwvdRqo9oqHzACkCB8U2b7T/fThwIgO01T1IMCoAZxGRhbKoAXQUcQTjkI+a4B5e5FzjGsXvCG9gdqrLGFYrpVG/UuHzBOw2/LaXxzbh43DKeoJwlAHqLndSs4udoCoIBHQE45EPk3DuitmYOQoxdctp8+rFwIWsGFYiFFoLGNchcEQC6e+OJC5J2Z7T/dTx/aApYdJ37AyJK/DIwvFxYvWr0IwEn/H1Opco5sveDUhSAAF4HJpQJkWixp6k2n4IYfMGf0amDHev2I8+l4/UbvNw8Eozw72wJePOJ8und7EkKj9ztKGA1/7WwATo44n45pWI3e7/AAGPWZ2QBkYHCU+XTMfGGQmYIxjd7vqOE0+PXzATjifDrKtTZ6v4MP/MlyRj4AR5xPF+VaqZLJF1UzKdPV6P2eLDDr3I58AI44n07ZMARbo/d78gMubWE+AEecT8e9YOn2Uheu0fs9tUCYD8AR59MpG6bR+z21gKfW1gNAz4geRT5dTEZo9H5PPRDmAzBmRM8BJzqfLiYjSKKr0fs9dYBYDwBHmE9XtRfMsIz04aQZ1+j9npygrA+Akqs8wfl0BCCTWRq935MTYL1aVQ8Ao1zlAnAi8+kEQGZTNXq/vYb75Pt/fQAcUT5dBGCj93vyAaxXi+oDoFLyT3A+3Rcavd9eY3xS/z8fgCQX/LPR3SOzkon55jg1eyAfgD8M4NcAPD6aDmBtB1e4NMDNcer1QD4AbwbwxwDe4UvRE9wHZG1gNSXDLlwLNcep1QP5APxzzwj9IIAPnXhT5ORc5EYCA9HNcWr1QD4AmRH6FQBMTSZZH98ZmD5Bh5g1FopiNns1x6nTA/kAvAfAEwDudnI+EvQxPfkEzYfaCXRSBluQMB7YHKdGD+QDsBNBH/9+AkAobqTADGK7Inw1x8nfA/kA7EXQt8kgrGAGMfBxZ5Cv5ji5eyAfgL0I+r68uR0QmUFoBQU8vfNvzXHy9kA9AORoMw7CdGQCjoUZDwL4kv/+8OZ1gJhBIjGDgMh3vTavBc035/RAPgD7JegjODfhiMwgoqeJwNPPTaB6Ezq/hq+sB4AcXeXEP+ZhGVo9vRimIQD5v5oPAZCupgDI9wg8/qz/1Xz55usyeyAfgMMQ9GU2Op4eAchpOIJQQEz/VuPlm6/K7IH6AMjgGzdl6QtyX5jWjpQFevF3lq3xf6yhrOlIAUgQCojR8gmE+l9Nl2++JrMH6gEgR5UA5KYsc+AZmCbQCDi+IvgEQMob1XBEAHIajgBMLV+0kCdws6aGu3zqfkV9AGTwjftg3JRVVRAtHQEXX/wbAcoXP5d5CID8GoJKvqDAloKOoIz/y7x8c3pmD4zhaqwjRzCYyQg5gr2ZgsFTLweWr8XQgsXjbwLWrnNtMlKgNoLBmZAa7PTCAuYIBlMvlWQswwr2UlUw45jdDSx8HbD+Ctd+HVCwePKbgJV9aASDM8Yg59TWFDysYPBtmYK91IbNOHaPA/M7gUXKXA4hWDz79cA8+W0aweCMURj+1HYfcBjBYO54MMY3tGDv8I3nmWSHOzYOLJ0LLPGXAQWLz3oB8MQUsEa16kYwOG8whjh74yJkUMFgbsNlCfYO0epwissVY34bsHw2sEIRkAEEi/dcU0SP5qhF1ggG5w3GEGdXr4L5134Fg4kAjuDQgr1DtDqcUmZETwArZwAru4BVqsv0KVh8/o3F4v0QXZBGMDhvMIY4u3MYhv95Zh+Cu1xBcxuOU/HfeDIq5cv7FuwdotXhlCBXjOXZAnyrO4BV6in0IVh8wStLuWCsUAyvEQzOG5ABz+4eB+R/ewnu/kOP/3G/l4kJTERlljQtIot2e53/IwO2OPl4FLtcnCqAp9cahT56CBZf+LpSLhhz1N5qBIPzBmTAs/sLRHcTDKbiNHdBGGymOC/3hglEvgjAnoK9A7Y4+XgiV4zVWYDAs/etxaubYPFFP1QkLtCIP8neaASD8wZkwLP7AyC/tJNg8L/xLNBu+YBdBXsHbHEFAINcMVamgdWZAoRrfPdXm8KitLdmgYveWAq+2y7iMqfuRjA4b1AGOLt/APJLqwSD3+y5T1yI0AoSbAxMMzGV1o8/My2ro2DvAK2t+GgiV4zj4+3AIwDXtwBrVJeuECze+9aW4Dut4PxkIhYsdetGMDhvoDqcPRgA+SWp4O4veQ5Uv/mAGwR78+6rQq4Yq9PAOi2fA4/vBkKudKVU7VZw77uKvWFuZbtcMNb5v0YwOG9g+jx7cADyi6Pg7gccgIxlcA5TKhaD01yYKBmVFpBZMfx/m2Bvny3t8LGqoqTliZbVI+gMgHwnMAnCIFi897cLAAZ6QyzFzzSCwXkD1OPs4QDIL5XgLmk5JHk/SD5gKdibd38VcsVYGmuBTaAzEHLHgyCcaokB7/1IkUET5IKxwF5pBIPzBqbPs4cHIC/AaeqvPL9pmHxAE+zts6VdLCD/lcgVY3UyWD0Bj1ZwqgCggXA7sPfWAoAJvaEtZBrB4Lyx6efsPADyCtmCvf00s/NnOsgVY3m8BTRZPZuGBUACdArY+5lWDqGmYbIrLHEx0ggG5w1OH2fnA7CPizQfaXqgUw80AGywMdIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0BxoAjrT7m4s3AGwwMNIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0B8ZYNMbkX+ZekpuIiOQrPar+xs889HJg6jZg5jAwvVZ8B+ll9PlO5/Fc/o+ECjnHfi8zYfkvM5ulmp4qJXVqx5deD4zfAkw/CGxdAZgoHfuh131QkaI5hu8Bs4Ds8B0AWLnIRGCBsFfn87JffDMwdjOw5R5g8giwZa34jnQQUwDo99wBfJ4TM7COiNdlaj2rA/jeV/vfDeATAP4UGH8I2Lrc6gc+SHqY4oMZ74VSKM0xfA+UUzB/oBUUCKMl6zSQ/PsXqZD5KQC/A0w/DEwcAcYXgYnVwppwADuBkefnCim90FmBWXwnK87Uen53BI8sbuwqaz9p5UgnQhBS+ZN1zE8Ak0utviCwq8DI8/nx5hi+Bzb4gJzKZE1SEFZZgS9/2pWR/gTAJ4HJQ8DEMWB8ARhfBsaWCwDquwQKvvNgHXvOcYVbPFJPkw+dDxC/W1Y4tWDpw/Rlgo4lo1T4/KxTihDNpJwj3/UiMLXemprjffC7eWpzDN8DlYsQDiKtVxzEqoHkyX9HRizW+nIgaQnvAiaeBCbmC0s4tgSMu2rMePAR9X252jXklaTFU108K0MHav/nvJ6ZxVVk9OI7GR2IZoGQNc/HgbHgIwqILIVujuF7oOMqWFawCoRxkfEIB5CWgkREBCNf9wMTc8A4QciBWyoGz16rwNgaML5eWKpctYZL3N+TWLX0gvtuP0HHk2n16JDyxXmVhfU0qywbJbr5GSuXKxA/sV5Y9UYWdnjwyS3qKKgarWA69Wg6fjQOIK0HadnIjPVFB+AiME4AuiUkCFnESyCSkmAuU7Cjm15wX+2X2ifBRn9A8mKcW2UFjULVQcgVDl80u40SYh763FfvquhLCxitoBYUsoJfjXKttByMq9CKcHn4sPuCbgXNJwyWkECcz5Q376UX3LNncZyQAAADEklEQVT9fFgIJs6lBBwtn3Tt6FpIz4RWnuQxPh2XIGzm4CwQ9hWIFgBTK0gQHiIAJddKq0ELQh+KL1qUR4MvSEsoENIKrgALHNiMox+94K7tl9qnnMio8MSf6SNwGpYVjCDk/Ju7isq496fCqX0BkDeqlWwKwic1gAQSpzGREnFgREz01eALLvvq2Kfi45m6cf3qBXdsfxRbJMho8dimqOhEK8cXQRr9QVpvPoDNMXQP9A3ACELFxPh+jACkP0fLIKFCCRRqKuPUdqjlC9o07JZwKVNHeBC94DQcZO0XAAkmgotAk9QYrR9f/BvByYfMSATDVMzwTXMM3QMDAVAgVHCZ7/MaQK4QZUHiNCbBQlqUw74YCb7gcmYkelC9YFlwvVv7RRAorTuBkECU9asCID9/x9B935zYzyKkqpfiNHxcA0gLQgvBAaPVkCqm3h2AtC5m/RyEqzw/4xhGL3hD++MmslgqCbgUfLKAcRrmTlBzDN0DA1tAXUlWcDm1IOIIJAjlT/Fd05lbFQFwjdtgGcewesFt7Rc/Gx8iWjUCjGCT1YvWT1MwgUqrf3NG45tTbcu0aximWx9xENcEQHGbcYAEwtSXSqY0gnCdgeuMI0cvuGx/FUGgFhwEYrR80QckWN+X0fjm1DwAWv8RgJFilJZBznz0pQg+AZAAlVWh1GvGka0XzB0cCQi30aSGVa9AF62fLOB7MhrfnJoPwPER59Px+o3e76mL5Kwp2G57xPl0kxc3er+nLvyKtLmhfUC78RHn081ONnq/pzcAR5xPR9mRRu/31IVgvgUccT4dNaobvd/TGYAjzqejumqj93s6A3DE+XRUg2VSCjdaGr3fUw+I+VPwiPPpqJjO8J1Nw43e7ymHwHoAKMFd7QErAeEE5NNJMb3R+z3lsGcNzgfgiPPpomJ6o/d76oGwPgCOKJ8uKqY3er+nKwBHmE+noqRG7/fUA199U/AI8+kEwEbv93QHoEhZTnA+nYqSGr3fBoAtaiqBUImdm5hPJwA2er+nKwBHnE+X1gUzSbnR+z11wPj/AeCpPDD3t7rvAAAAAElFTkSuQmCC",E2t="uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",S2t="varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",T2t=class extends zi{constructor({blendFunction:t=Jn.SRC,preset:e=Sy.MEDIUM,edgeDetectionMode:n=cK.COLOR,predicationMode:i=hAe.DISABLED}={}){super("SMAAEffect",E2t,{vertexShader:S2t,blendFunction:t,attributes:$o.CONVOLUTION|$o.DEPTH,uniforms:new Map([["weightMap",new Jf.Uniform(null)]])});let o,l;arguments.length>1&&(o=arguments[0],l=arguments[1],arguments.length>2&&(e=arguments[2]),arguments.length>3&&(n=arguments[3])),this.renderTargetEdges=new Jf.WebGLRenderTarget(1,1,{depthBuffer:!1}),this.renderTargetEdges.texture.name="SMAA.Edges",this.renderTargetWeights=this.renderTargetEdges.clone(),this.renderTargetWeights.texture.name="SMAA.Weights",this.uniforms.get("weightMap").value=this.renderTargetWeights.texture,this.clearPass=new yv(!0,!1,!1),this.clearPass.overrideClearColor=new Jf.Color(0),this.clearPass.overrideClearAlpha=1,this.edgeDetectionPass=new Rc(new oW),this.edgeDetectionMaterial.edgeDetectionMode=n,this.edgeDetectionMaterial.predicationMode=i,this.weightsPass=new Rc(new mAe);const d=new Jf.LoadingManager;d.onLoad=()=>{const p=new Jf.Texture(o);p.name="SMAA.Search",p.magFilter=Jf.NearestFilter,p.minFilter=Jf.NearestFilter,p.generateMipmaps=!1,p.needsUpdate=!0,p.flipY=!0,this.weightsMaterial.searchTexture=p;const g=new Jf.Texture(l);g.name="SMAA.Area",g.magFilter=Jf.LinearFilter,g.minFilter=Jf.LinearFilter,g.generateMipmaps=!1,g.needsUpdate=!0,g.flipY=!1,this.weightsMaterial.areaTexture=g,this.dispatchEvent({type:"load"})},d.itemStart("search"),d.itemStart("area"),o!==void 0&&l!==void 0?(d.itemEnd("search"),d.itemEnd("area")):typeof Image<"u"&&(o=new Image,l=new Image,o.addEventListener("load",()=>d.itemEnd("search")),l.addEventListener("load",()=>d.itemEnd("area")),o.src=aW,l.src=lW),this.applyPreset(e)}get edgesTexture(){return this.renderTargetEdges.texture}getEdgesTexture(){return this.edgesTexture}get weightsTexture(){return this.renderTargetWeights.texture}getWeightsTexture(){return this.weightsTexture}get edgeDetectionMaterial(){return this.edgeDetectionPass.fullscreenMaterial}get colorEdgesMaterial(){return this.edgeDetectionMaterial}getEdgeDetectionMaterial(){return this.edgeDetectionMaterial}get weightsMaterial(){return this.weightsPass.fullscreenMaterial}getWeightsMaterial(){return this.weightsMaterial}setEdgeDetectionThreshold(t){this.edgeDetectionMaterial.edgeDetectionThreshold=t}setOrthogonalSearchSteps(t){this.weightsMaterial.orthogonalSearchSteps=t}applyPreset(t){const e=this.edgeDetectionMaterial,n=this.weightsMaterial;switch(t){case Sy.LOW:e.edgeDetectionThreshold=.15,n.orthogonalSearchSteps=4,n.diagonalDetection=!1,n.cornerDetection=!1;break;case Sy.MEDIUM:e.edgeDetectionThreshold=.1,n.orthogonalSearchSteps=8,n.diagonalDetection=!1,n.cornerDetection=!1;break;case Sy.HIGH:e.edgeDetectionThreshold=.1,n.orthogonalSearchSteps=16,n.diagonalSearchSteps=8,n.cornerRounding=25,n.diagonalDetection=!0,n.cornerDetection=!0;break;case Sy.ULTRA:e.edgeDetectionThreshold=.05,n.orthogonalSearchSteps=32,n.diagonalSearchSteps=16,n.cornerRounding=25,n.diagonalDetection=!0,n.cornerDetection=!0;break}}setDepthTexture(t,e=Jf.BasicDepthPacking){this.edgeDetectionMaterial.depthBuffer=t,this.edgeDetectionMaterial.depthPacking=e}update(t,e,n){this.clearPass.render(t,this.renderTargetEdges),this.edgeDetectionPass.render(t,e,this.renderTargetEdges),this.weightsPass.render(t,this.renderTargetEdges,this.renderTargetWeights)}setSize(t,e){this.edgeDetectionMaterial.setSize(t,e),this.weightsMaterial.setSize(t,e),this.renderTargetEdges.setSize(t,e),this.renderTargetWeights.setSize(t,e)}dispose(){const{searchTexture:t,areaTexture:e}=this.weightsMaterial;t!==null&&e!==null&&(t.dispose(),e.dispose()),super.dispose()}static get searchImageDataURL(){return aW}static get areaImageDataURL(){return lW}},e0=se,Ss=se,x2t=`#include <common>
#include <packing>
#ifdef NORMAL_DEPTH
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D normalDepthBuffer;
#else
uniform mediump sampler2D normalDepthBuffer;
#endif
float readDepth(const in vec2 uv){return texture2D(normalDepthBuffer,uv).a;}
#else
uniform lowp sampler2D normalBuffer;
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}
#endif
uniform lowp sampler2D noiseTexture;uniform mat4 inverseProjectionMatrix;uniform mat4 projectionMatrix;uniform vec2 texelSize;uniform vec2 cameraNearFar;uniform float intensity;uniform float minRadiusScale;uniform float fade;uniform float bias;uniform vec2 distanceCutoff;uniform vec2 proximityCutoff;varying vec2 vUv;varying vec2 vUv2;float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);
#else
return orthographicDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);
#endif
}vec3 getViewPosition(const in vec2 screenPosition,const in float depth,const in float viewZ){vec4 clipPosition=vec4(vec3(screenPosition,depth)*2.0-1.0,1.0);float clipW=projectionMatrix[2][3]*viewZ+projectionMatrix[3][3];clipPosition*=clipW;return(inverseProjectionMatrix*clipPosition).xyz;}float getAmbientOcclusion(const in vec3 p,const in vec3 n,const in float depth,const in vec2 uv){float radiusScale=1.0-smoothstep(0.0,distanceCutoff.y,depth);radiusScale=radiusScale*(1.0-minRadiusScale)+minRadiusScale;float radius=RADIUS*radiusScale;float noise=texture2D(noiseTexture,vUv2).r;float baseAngle=noise*PI2;float rings=SPIRAL_TURNS*PI2;float occlusion=0.0;int taps=0;for(int i=0;i<SAMPLES_INT;++i){float alpha=(float(i)+0.5)*INV_SAMPLES_FLOAT;float angle=alpha*rings+baseAngle;vec2 rotation=vec2(cos(angle),sin(angle));vec2 coords=alpha*radius*rotation*texelSize+uv;if(coords.s<0.0||coords.s>1.0||coords.t<0.0||coords.t>1.0){continue;}float sampleDepth=readDepth(coords);float viewZ=getViewZ(sampleDepth);
#ifdef PERSPECTIVE_CAMERA
float linearSampleDepth=viewZToOrthographicDepth(viewZ,cameraNearFar.x,cameraNearFar.y);
#else
float linearSampleDepth=sampleDepth;
#endif
float proximity=abs(depth-linearSampleDepth);if(proximity<proximityCutoff.y){float falloff=1.0-smoothstep(proximityCutoff.x,proximityCutoff.y,proximity);vec3 Q=getViewPosition(coords,sampleDepth,viewZ);vec3 v=Q-p;float vv=dot(v,v);float vn=dot(v,n)-bias;float f=max(RADIUS_SQ-vv,0.0)/RADIUS_SQ;occlusion+=(f*f*f*max(vn/(fade+vv),0.0))*falloff;}++taps;}return occlusion/(4.0*max(float(taps),1.0));}void main(){
#ifdef NORMAL_DEPTH
vec4 normalDepth=texture2D(normalDepthBuffer,vUv);
#else
vec4 normalDepth=vec4(texture2D(normalBuffer,vUv).xyz,readDepth(vUv));
#endif
float ao=0.0;float depth=normalDepth.a;float viewZ=getViewZ(depth);
#ifdef PERSPECTIVE_CAMERA
float linearDepth=viewZToOrthographicDepth(viewZ,cameraNearFar.x,cameraNearFar.y);
#else
float linearDepth=depth;
#endif
if(linearDepth<distanceCutoff.y){vec3 viewPosition=getViewPosition(vUv,depth,viewZ);vec3 viewNormal=unpackRGBToNormal(normalDepth.rgb);ao+=getAmbientOcclusion(viewPosition,viewNormal,linearDepth,vUv);float d=smoothstep(distanceCutoff.x,distanceCutoff.y,linearDepth);ao=mix(ao,0.0,d);
#ifdef LEGACY_INTENSITY
ao=clamp(1.0-pow(1.0-ao,abs(intensity)),0.0,1.0);
#endif
}gl_FragColor.r=ao;}`,M2t="uniform vec2 noiseScale;varying vec2 vUv;varying vec2 vUv2;void main(){vUv=position.xy*0.5+0.5;vUv2=vUv*noiseScale;gl_Position=vec4(position.xy,1.0,1.0);}",gAe=class extends Ss.ShaderMaterial{constructor(t){super({name:"SSAOMaterial",defines:{SAMPLES_INT:"0",INV_SAMPLES_FLOAT:"0.0",SPIRAL_TURNS:"0.0",RADIUS:"1.0",RADIUS_SQ:"1.0",DISTANCE_SCALING:"1",DEPTH_PACKING:"0"},uniforms:{depthBuffer:new Ss.Uniform(null),normalBuffer:new Ss.Uniform(null),normalDepthBuffer:new Ss.Uniform(null),noiseTexture:new Ss.Uniform(null),inverseProjectionMatrix:new Ss.Uniform(new Ss.Matrix4),projectionMatrix:new Ss.Uniform(new Ss.Matrix4),texelSize:new Ss.Uniform(new Ss.Vector2),cameraNearFar:new Ss.Uniform(new Ss.Vector2),distanceCutoff:new Ss.Uniform(new Ss.Vector2),proximityCutoff:new Ss.Uniform(new Ss.Vector2),noiseScale:new Ss.Uniform(new Ss.Vector2),minRadiusScale:new Ss.Uniform(.33),intensity:new Ss.Uniform(1),fade:new Ss.Uniform(.01),bias:new Ss.Uniform(0)},blending:Ss.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:x2t,vertexShader:M2t}),this.copyCameraSettings(t),this.resolution=new Ss.Vector2,this.r=1}get near(){return this.uniforms.cameraNearFar.value.x}get far(){return this.uniforms.cameraNearFar.value.y}set normalDepthBuffer(t){this.uniforms.normalDepthBuffer.value=t,t!==null?this.defines.NORMAL_DEPTH="1":delete this.defines.NORMAL_DEPTH,this.needsUpdate=!0}setNormalDepthBuffer(t){this.normalDepthBuffer=t}set normalBuffer(t){this.uniforms.normalBuffer.value=t}setNormalBuffer(t){this.uniforms.normalBuffer.value=t}set depthBuffer(t){this.uniforms.depthBuffer.value=t}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=Ss.BasicDepthPacking){this.depthBuffer=t,this.depthPacking=e}set noiseTexture(t){this.uniforms.noiseTexture.value=t}setNoiseTexture(t){this.uniforms.noiseTexture.value=t}get samples(){return Number(this.defines.SAMPLES_INT)}set samples(t){this.defines.SAMPLES_INT=t.toFixed(0),this.defines.INV_SAMPLES_FLOAT=(1/t).toFixed(9),this.needsUpdate=!0}getSamples(){return this.samples}setSamples(t){this.samples=t}get rings(){return Number(this.defines.SPIRAL_TURNS)}set rings(t){this.defines.SPIRAL_TURNS=t.toFixed(1),this.needsUpdate=!0}getRings(){return this.rings}setRings(t){this.rings=t}get intensity(){return this.uniforms.intensity.value}set intensity(t){this.uniforms.intensity.value=t,this.defines.LEGACY_INTENSITY===void 0&&(this.defines.LEGACY_INTENSITY="1",this.needsUpdate=!0)}getIntensity(){return this.uniforms.intensity.value}setIntensity(t){this.uniforms.intensity.value=t}get fade(){return this.uniforms.fade.value}set fade(t){this.uniforms.fade.value=t}getFade(){return this.uniforms.fade.value}setFade(t){this.uniforms.fade.value=t}get bias(){return this.uniforms.bias.value}set bias(t){this.uniforms.bias.value=t}getBias(){return this.uniforms.bias.value}setBias(t){this.uniforms.bias.value=t}get minRadiusScale(){return this.uniforms.minRadiusScale.value}set minRadiusScale(t){this.uniforms.minRadiusScale.value=t}getMinRadiusScale(){return this.uniforms.minRadiusScale.value}setMinRadiusScale(t){this.uniforms.minRadiusScale.value=t}updateRadius(){const t=this.r*this.resolution.height;this.defines.RADIUS=t.toFixed(11),this.defines.RADIUS_SQ=(t*t).toFixed(11),this.needsUpdate=!0}get radius(){return this.r}set radius(t){this.r=Math.min(Math.max(t,1e-6),1),this.updateRadius()}getRadius(){return this.radius}setRadius(t){this.radius=t}get distanceScaling(){return!0}set distanceScaling(t){}isDistanceScalingEnabled(){return this.distanceScaling}setDistanceScalingEnabled(t){this.distanceScaling=t}get distanceThreshold(){return this.uniforms.distanceCutoff.value.x}set distanceThreshold(t){this.uniforms.distanceCutoff.value.set(Math.min(Math.max(t,0),1),Math.min(Math.max(t+this.distanceFalloff,0),1))}get worldDistanceThreshold(){return-Dg(this.distanceThreshold,this.near,this.far)}set worldDistanceThreshold(t){this.distanceThreshold=j2(-t,this.near,this.far)}get distanceFalloff(){return this.uniforms.distanceCutoff.value.y-this.distanceThreshold}set distanceFalloff(t){this.uniforms.distanceCutoff.value.y=Math.min(Math.max(this.distanceThreshold+t,0),1)}get worldDistanceFalloff(){return-Dg(this.distanceFalloff,this.near,this.far)}set worldDistanceFalloff(t){this.distanceFalloff=j2(-t,this.near,this.far)}setDistanceCutoff(t,e){this.uniforms.distanceCutoff.value.set(Math.min(Math.max(t,0),1),Math.min(Math.max(t+e,0),1))}get proximityThreshold(){return this.uniforms.proximityCutoff.value.x}set proximityThreshold(t){this.uniforms.proximityCutoff.value.set(Math.min(Math.max(t,0),1),Math.min(Math.max(t+this.proximityFalloff,0),1))}get worldProximityThreshold(){return-Dg(this.proximityThreshold,this.near,this.far)}set worldProximityThreshold(t){this.proximityThreshold=j2(-t,this.near,this.far)}get proximityFalloff(){return this.uniforms.proximityCutoff.value.y-this.proximityThreshold}set proximityFalloff(t){this.uniforms.proximityCutoff.value.y=Math.min(Math.max(this.proximityThreshold+t,0),1)}get worldProximityFalloff(){return-Dg(this.proximityFalloff,this.near,this.far)}set worldProximityFalloff(t){this.proximityFalloff=j2(-t,this.near,this.far)}setProximityCutoff(t,e){this.uniforms.proximityCutoff.value.set(Math.min(Math.max(t,0),1),Math.min(Math.max(t+e,0),1))}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e)}adoptCameraSettings(t){this.copyCameraSettings(t)}copyCameraSettings(t){t&&(this.uniforms.cameraNearFar.value.set(t.near,t.far),this.uniforms.projectionMatrix.value.copy(t.projectionMatrix),this.uniforms.inverseProjectionMatrix.value.copy(t.projectionMatrix).invert(),t instanceof Ss.PerspectiveCamera?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(t,e){const n=this.uniforms,i=n.noiseTexture.value;i!==null&&n.noiseScale.value.set(t/i.image.width,e/i.image.height),n.texelSize.value.set(1/t,1/e),this.resolution.set(t,e),this.updateRadius()}},$3=se,D1=se,k2t=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[4];n[0]=texture2D(normalBuffer,vUv0).rgb;n[1]=texture2D(normalBuffer,vUv1).rgb;n[2]=texture2D(normalBuffer,vUv2).rgb;n[3]=texture2D(normalBuffer,vUv3).rgb;
#else
vec3 n[4];n[0]=vec3(0.0);n[1]=vec3(0.0);n[2]=vec3(0.0);n[3]=vec3(0.0);
#endif
gl_FragColor=vec4(n[index],d[index]);}`,C2t="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",vAe=class extends D1.ShaderMaterial{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new D1.Uniform(null),normalBuffer:new D1.Uniform(null),texelSize:new D1.Uniform(new D1.Vector2)},blending:D1.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:k2t,vertexShader:C2t})}set depthBuffer(t){this.uniforms.depthBuffer.value=t}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=D1.BasicDepthPacking){this.depthBuffer=t,this.depthPacking=e}set normalBuffer(t){this.uniforms.normalBuffer.value=t,t!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(t){this.normalBuffer=t}setTexelSize(t,e){this.uniforms.texelSize.value.set(t,e)}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},_Ae=class extends Zo{constructor({normalBuffer:t=null,resolutionScale:e=.5,width:n=Rr.AUTO_SIZE,height:i=Rr.AUTO_SIZE,resolutionX:o=n,resolutionY:l=i}={}){super("DepthDownsamplingPass");const d=new vAe;d.normalBuffer=t,this.fullscreenMaterial=d,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new $3.WebGLRenderTarget(1,1,{minFilter:$3.NearestFilter,magFilter:$3.NearestFilter,depthBuffer:!1,type:$3.FloatType}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const p=this.resolution=new Rr(this,o,l,e);p.addEventListener("change",g=>this.setSize(p.baseWidth,p.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(t,e=$3.BasicDepthPacking){this.fullscreenMaterial.depthBuffer=t,this.fullscreenMaterial.depthPacking=e}render(t,e,n,i,o){t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height),this.fullscreenMaterial.setSize(t,e)}initialize(t,e,n){const i=t.getContext();if(!(i.getExtension("EXT_color_buffer_float")||i.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}},P2t=`uniform lowp sampler2D aoBuffer;uniform float luminanceInfluence;uniform float intensity;
#if defined(DEPTH_AWARE_UPSAMPLING) && defined(NORMAL_DEPTH)
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D normalDepthBuffer;
#else
uniform mediump sampler2D normalDepthBuffer;
#endif
#endif
#ifdef COLORIZE
uniform vec3 color;
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){float aoLinear=texture2D(aoBuffer,uv).r;
#if defined(DEPTH_AWARE_UPSAMPLING) && defined(NORMAL_DEPTH) && __VERSION__ == 300
vec4 normalDepth[4];normalDepth[0]=textureOffset(normalDepthBuffer,uv,ivec2(0,0));normalDepth[1]=textureOffset(normalDepthBuffer,uv,ivec2(0,1));normalDepth[2]=textureOffset(normalDepthBuffer,uv,ivec2(1,0));normalDepth[3]=textureOffset(normalDepthBuffer,uv,ivec2(1,1));float dot01=dot(normalDepth[0].rgb,normalDepth[1].rgb);float dot02=dot(normalDepth[0].rgb,normalDepth[2].rgb);float dot03=dot(normalDepth[0].rgb,normalDepth[3].rgb);float minDot=min(dot01,min(dot02,dot03));float s=step(THRESHOLD,minDot);float smallestDistance=1.0;int index;for(int i=0;i<4;++i){float distance=abs(depth-normalDepth[i].a);if(distance<smallestDistance){smallestDistance=distance;index=i;}}ivec2 offsets[4];offsets[0]=ivec2(0,0);offsets[1]=ivec2(0,1);offsets[2]=ivec2(1,0);offsets[3]=ivec2(1,1);ivec2 coord=ivec2(uv*vec2(textureSize(aoBuffer,0)))+offsets[index];float aoNearest=texelFetch(aoBuffer,coord,0).r;float ao=mix(aoNearest,aoLinear,s);
#else
float ao=aoLinear;
#endif
float l=luminance(inputColor.rgb);ao=mix(ao,0.0,l*luminanceInfluence);ao=clamp(ao*intensity,0.0,1.0);
#ifdef COLORIZE
outputColor=vec4(1.0-ao*(1.0-color),inputColor.a);
#else
outputColor=vec4(vec3(1.0-ao),inputColor.a);
#endif
}`,Rle=64,R2t=class extends zi{constructor(e,n,{blendFunction:i=Jn.MULTIPLY,samples:o=9,rings:l=7,normalDepthBuffer:d=null,depthAwareUpsampling:p=!0,worldDistanceThreshold:g,worldDistanceFalloff:v,worldProximityThreshold:_,worldProximityFalloff:b,distanceThreshold:w=.97,distanceFalloff:E=.03,rangeThreshold:S=5e-4,rangeFalloff:M=.001,minRadiusScale:k=.1,luminanceInfluence:x=.7,radius:C=.1825,intensity:P=1,bias:O=.025,fade:L=.01,color:B=null,resolutionScale:V=1,width:G=Rr.AUTO_SIZE,height:j=Rr.AUTO_SIZE,resolutionX:F=G,resolutionY:q=j}={}){super("SSAOEffect",P2t,{blendFunction:i,attributes:$o.DEPTH,defines:new Map([["THRESHOLD","0.997"]]),uniforms:new Map([["aoBuffer",new e0.Uniform(null)],["normalDepthBuffer",new e0.Uniform(d)],["luminanceInfluence",new e0.Uniform(x)],["color",new e0.Uniform(null)],["intensity",new e0.Uniform(P)],["scale",new e0.Uniform(0)]])}),this.renderTarget=new e0.WebGLRenderTarget(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="AO.Target",this.uniforms.get("aoBuffer").value=this.renderTarget.texture;const fe=this.resolution=new Rr(this,F,q,V);fe.addEventListener("change",le=>this.setSize(fe.baseWidth,fe.baseHeight)),this.camera=e,this.depthDownsamplingPass=new _Ae({normalBuffer:n,resolutionScale:V}),this.depthDownsamplingPass.enabled=d===null,this.ssaoPass=new Rc(new gAe(e));const ue=new sI(Rle,Rle,e0.RGBAFormat);ue.wrapS=ue.wrapT=e0.RepeatWrapping;const J=this.ssaoMaterial;J.normalBuffer=n,J.noiseTexture=ue,J.minRadiusScale=k,J.samples=o,J.radius=C,J.rings=l,J.fade=L,J.bias=O,J.distanceThreshold=w,J.distanceFalloff=E,J.proximityThreshold=S,J.proximityFalloff=M,g!==void 0&&(J.worldDistanceThreshold=g),v!==void 0&&(J.worldDistanceFalloff=v),_!==void 0&&(J.worldProximityThreshold=_),b!==void 0&&(J.worldProximityFalloff=b),d!==null&&(this.ssaoMaterial.normalDepthBuffer=d,this.defines.set("NORMAL_DEPTH","1")),this.depthAwareUpsampling=p,this.color=B}set mainCamera(e){this.camera=e,this.ssaoMaterial.copyCameraSettings(e)}get normalBuffer(){return this.ssaoMaterial.normalBuffer}set normalBuffer(e){this.ssaoMaterial.normalBuffer=e,this.depthDownsamplingPass.fullscreenMaterial.normalBuffer=e}getResolution(){return this.resolution}get ssaoMaterial(){return this.ssaoPass.fullscreenMaterial}getSSAOMaterial(){return this.ssaoMaterial}get samples(){return this.ssaoMaterial.samples}set samples(e){this.ssaoMaterial.samples=e}get rings(){return this.ssaoMaterial.rings}set rings(e){this.ssaoMaterial.rings=e}get radius(){return this.ssaoMaterial.radius}set radius(e){this.ssaoMaterial.radius=e}get depthAwareUpsampling(){return this.defines.has("DEPTH_AWARE_UPSAMPLING")}set depthAwareUpsampling(e){this.depthAwareUpsampling!==e&&(e?this.defines.set("DEPTH_AWARE_UPSAMPLING","1"):this.defines.delete("DEPTH_AWARE_UPSAMPLING"),this.setChanged())}isDepthAwareUpsamplingEnabled(){return this.depthAwareUpsampling}setDepthAwareUpsamplingEnabled(e){this.depthAwareUpsampling=e}get distanceScaling(){return!0}set distanceScaling(e){}get color(){return this.uniforms.get("color").value}set color(e){const n=this.uniforms,i=this.defines;e!==null?i.has("COLORIZE")?n.get("color").value.set(e):(i.set("COLORIZE","1"),n.get("color").value=new e0.Color(e),this.setChanged()):i.has("COLORIZE")&&(i.delete("COLORIZE"),n.get("color").value=null,this.setChanged())}get luminanceInfluence(){return this.uniforms.get("luminanceInfluence").value}set luminanceInfluence(e){this.uniforms.get("luminanceInfluence").value=e}get intensity(){return this.uniforms.get("intensity").value}set intensity(e){this.uniforms.get("intensity").value=e}getColor(){return this.color}setColor(e){this.color=e}setDistanceCutoff(e,n){this.ssaoMaterial.distanceThreshold=e,this.ssaoMaterial.distanceFalloff=n}setProximityCutoff(e,n){this.ssaoMaterial.proximityThreshold=e,this.ssaoMaterial.proximityFalloff=n}setDepthTexture(e,n=e0.BasicDepthPacking){this.depthDownsamplingPass.setDepthTexture(e,n),this.ssaoMaterial.depthBuffer=e,this.ssaoMaterial.depthPacking=n}update(e,n,i){const o=this.renderTarget;this.depthDownsamplingPass.enabled&&this.depthDownsamplingPass.render(e),this.ssaoPass.render(e,null,o)}setSize(e,n){const i=this.resolution;i.setBaseSize(e,n);const o=i.width,l=i.height;this.ssaoMaterial.copyCameraSettings(this.camera),this.ssaoMaterial.setSize(o,l),this.renderTarget.setSize(o,l),this.depthDownsamplingPass.resolution.scale=i.scale,this.depthDownsamplingPass.setSize(e,n)}initialize(e,n,i){try{let o=this.uniforms.get("normalDepthBuffer").value;o===null&&(this.depthDownsamplingPass.initialize(e,n,i),o=this.depthDownsamplingPass.texture,this.uniforms.get("normalDepthBuffer").value=o,this.ssaoMaterial.normalDepthBuffer=o,this.defines.set("NORMAL_DEPTH","1"))}catch{this.depthDownsamplingPass.enabled=!1}}},Kk=se,D2t=`#ifdef TEXTURE_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
varying vec2 vUv2;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){
#ifdef UV_TRANSFORM
vec4 texel=texture2D(map,vUv2);
#else
vec4 texel=texture2D(map,uv);
#endif
outputColor=TEXEL;}`,O2t=`#ifdef ASPECT_CORRECTION
uniform float scale;
#else
uniform mat3 uvTransform;
#endif
varying vec2 vUv2;void mainSupport(const in vec2 uv){
#ifdef ASPECT_CORRECTION
vUv2=uv*vec2(aspect,1.0)*scale;
#else
vUv2=(uvTransform*vec3(uv,1.0)).xy;
#endif
}`,I2t=class extends zi{constructor({blendFunction:t,texture:e=null,aspectCorrection:n=!1}={}){super("TextureEffect",D2t,{blendFunction:t,defines:new Map([["TEXEL","texel"]]),uniforms:new Map([["map",new Kk.Uniform(null)],["scale",new Kk.Uniform(1)],["uvTransform",new Kk.Uniform(null)]])}),this.texture=e,this.aspectCorrection=n}get texture(){return this.uniforms.get("map").value}set texture(t){const e=this.texture,n=this.uniforms,i=this.defines;e!==t&&(n.get("map").value=t,n.get("uvTransform").value=t.matrix,i.delete("TEXTURE_PRECISION_HIGH"),t!==null&&(t.matrixAutoUpdate?(i.set("UV_TRANSFORM","1"),this.setVertexShader(O2t)):(i.delete("UV_TRANSFORM"),this.setVertexShader(null)),t.type!==Kk.UnsignedByteType&&i.set("TEXTURE_PRECISION_HIGH","1"),(e===null||e.type!==t.type||e.encoding!==t.encoding)&&this.setChanged()))}getTexture(){return this.texture}setTexture(t){this.texture=t}get aspectCorrection(){return this.defines.has("ASPECT_CORRECTION")}set aspectCorrection(t){this.aspectCorrection!==t&&(t?this.defines.set("ASPECT_CORRECTION","1"):this.defines.delete("ASPECT_CORRECTION"),this.setChanged())}get uvTransform(){const t=this.texture;return t!==null&&t.matrixAutoUpdate}set uvTransform(t){const e=this.texture;e!==null&&(e.matrixAutoUpdate=t)}setTextureSwizzleRGBA(t,e=t,n=t,i=t){const o="rgba";let l="";(t!==Rg.RED||e!==Rg.GREEN||n!==Rg.BLUE||i!==Rg.ALPHA)&&(l=[".",o[t],o[e],o[n],o[i]].join("")),this.defines.set("TEXEL","texel"+l),this.setChanged()}update(t,e,n){this.texture.matrixAutoUpdate&&this.texture.updateMatrix()}},c2=se,W3=se,N2t=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform vec4 maskParams;varying vec2 vUv;varying vec2 vUv2;varying vec2 vOffset;float linearGradientMask(const in float x){return smoothstep(maskParams.x,maskParams.y,x)-smoothstep(maskParams.w,maskParams.z,x);}void main(){vec2 dUv=vOffset*(1.0-linearGradientMask(vUv2.y));vec4 sum=texture2D(inputBuffer,vec2(vUv.x-dUv.x,vUv.y+dUv.y));sum+=texture2D(inputBuffer,vec2(vUv.x+dUv.x,vUv.y+dUv.y));sum+=texture2D(inputBuffer,vec2(vUv.x+dUv.x,vUv.y-dUv.y));sum+=texture2D(inputBuffer,vec2(vUv.x-dUv.x,vUv.y-dUv.y));gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,L2t="uniform vec4 texelSize;uniform float kernel;uniform float scale;uniform float aspect;uniform vec2 rotation;varying vec2 vUv;varying vec2 vUv2;varying vec2 vOffset;void main(){vec2 uv=position.xy*0.5+0.5;vUv=uv;vUv2=(uv-0.5)*2.0*vec2(aspect,1.0);vUv2=vec2(dot(rotation,vUv2),dot(rotation,vec2(vUv2.y,-vUv2.x)));vOffset=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;gl_Position=vec4(position.xy,1.0,1.0);}",yAe=class extends iI{constructor({kernelSize:t=Fd.MEDIUM,offset:e=0,rotation:n=0,focusArea:i=.4,feather:o=.3}={}){super(),this.fragmentShader=N2t,this.vertexShader=L2t,this.kernelSize=t,this.fragmentShader=_v(this.fragmentShader),this.uniforms.aspect=new W3.Uniform(1),this.uniforms.rotation=new W3.Uniform(new W3.Vector2),this.uniforms.maskParams=new W3.Uniform(new W3.Vector4),this._offset=e,this._focusArea=i,this._feather=o,this.rotation=n,this.updateParams()}updateParams(){const t=this.uniforms.maskParams.value,e=Math.max(this.focusArea,0),n=Math.max(e-this.feather,0);t.set(this.offset-e,this.offset-n,this.offset+e,this.offset+n)}get rotation(){return Math.acos(this.uniforms.rotation.value.x)}set rotation(t){this.uniforms.rotation.value.set(Math.cos(t),Math.sin(t))}get offset(){return this._offset}set offset(t){this._offset=t,this.updateParams()}get focusArea(){return this._focusArea}set focusArea(t){this._focusArea=t,this.updateParams()}get feather(){return this._feather}set feather(t){this._feather=t,this.updateParams()}setSize(t,e){super.setSize(t,e),this.uniforms.aspect.value=t/e}},bAe=class extends nv{constructor({offset:t=0,rotation:e=0,focusArea:n=.4,feather:i=.3,kernelSize:o=Fd.MEDIUM,resolutionScale:l=.5,resolutionX:d=Rr.AUTO_SIZE,resolutionY:p=Rr.AUTO_SIZE}={}){super({kernelSize:o,resolutionScale:l,resolutionX:d,resolutionY:p}),this.blurMaterial=new yAe({kernelSize:o,offset:t,rotation:e,focusArea:n,feather:i})}},z2t=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform vec2 maskParams;varying vec2 vUv2;float linearGradientMask(const in float x){return step(maskParams.x,x)-step(maskParams.y,x);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float mask=linearGradientMask(vUv2.y);vec4 texel=texture2D(map,uv);outputColor=mix(texel,inputColor,mask);}`,B2t="uniform vec2 rotation;varying vec2 vUv2;void mainSupport(const in vec2 uv){vUv2=(uv-0.5)*2.0*vec2(aspect,1.0);vUv2=vec2(dot(rotation,vUv2),dot(rotation,vec2(vUv2.y,-vUv2.x)));}",U2t=class extends zi{constructor({blendFunction:t,offset:e=0,rotation:n=0,focusArea:i=.4,feather:o=.3,kernelSize:l=Fd.MEDIUM,resolutionScale:d=.5,resolutionX:p=Rr.AUTO_SIZE,resolutionY:g=Rr.AUTO_SIZE}={}){super("TiltShiftEffect",z2t,{vertexShader:B2t,blendFunction:t,uniforms:new Map([["rotation",new c2.Uniform(new c2.Vector2)],["maskParams",new c2.Uniform(new c2.Vector2)],["map",new c2.Uniform(null)]])}),this._offset=e,this._focusArea=i,this._feather=o,this.renderTarget=new c2.WebGLRenderTarget(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="TiltShift.Target",this.uniforms.get("map").value=this.renderTarget.texture,this.blurPass=new bAe({kernelSize:l,resolutionScale:d,resolutionX:p,resolutionY:g,offset:e,rotation:n,focusArea:i,feather:o});const v=this.resolution=new Rr(this,p,g,d);v.addEventListener("change",_=>this.setSize(v.baseWidth,v.baseHeight)),this.rotation=n,this.updateParams()}updateParams(){const t=this.uniforms.get("maskParams").value,e=Math.max(this.focusArea-this.feather,0);t.set(this.offset-e,this.offset+e)}get rotation(){return Math.acos(this.uniforms.get("rotation").value.x)}set rotation(t){this.uniforms.get("rotation").value.set(Math.cos(t),Math.sin(t)),this.blurPass.blurMaterial.rotation=t}get offset(){return this._offset}set offset(t){this._offset=t,this.blurPass.blurMaterial.offset=t,this.updateParams()}get focusArea(){return this._focusArea}set focusArea(t){this._focusArea=t,this.blurPass.blurMaterial.focusArea=t,this.updateParams()}get feather(){return this._feather}set feather(t){this._feather=t,this.blurPass.blurMaterial.feather=t,this.updateParams()}get bias(){return 0}set bias(t){}update(t,e,n){this.blurPass.render(t,e,this.renderTarget)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e),this.renderTarget.setSize(n.width,n.height),this.blurPass.resolution.copy(n)}initialize(t,e,n){this.blurPass.initialize(t,e,n),n!==void 0&&(this.renderTarget.texture.type=n,t!==null&&t.outputColorSpace===c2.SRGBColorSpace&&(this.renderTarget.texture.colorSpace=c2.SRGBColorSpace))}},O1=se,YV=se,I1=se,F2t=`#include <packing>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
uniform lowp sampler2D luminanceBuffer0;uniform lowp sampler2D luminanceBuffer1;uniform float minLuminance;uniform float deltaTime;uniform float tau;varying vec2 vUv;void main(){float l0=unpackRGBAToFloat(texture2D(luminanceBuffer0,vUv));
#if __VERSION__ < 300
float l1=texture2DLodEXT(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;
#else
float l1=textureLod(luminanceBuffer1,vUv,MIP_LEVEL_1X1).r;
#endif
l0=max(minLuminance,l0);l1=max(minLuminance,l1);float adaptedLum=l0+(l1-l0)*(1.0-exp(-deltaTime*tau));gl_FragColor=(adaptedLum==1.0)?vec4(1.0):packFloatToRGBA(adaptedLum);}`,AAe=class extends I1.ShaderMaterial{constructor(){super({name:"AdaptiveLuminanceMaterial",defines:{MIP_LEVEL_1X1:"0.0"},uniforms:{luminanceBuffer0:new I1.Uniform(null),luminanceBuffer1:new I1.Uniform(null),minLuminance:new I1.Uniform(.01),deltaTime:new I1.Uniform(0),tau:new I1.Uniform(1)},extensions:{shaderTextureLOD:!0},blending:I1.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:F2t,vertexShader:zm})}set luminanceBuffer0(t){this.uniforms.luminanceBuffer0.value=t}setLuminanceBuffer0(t){this.uniforms.luminanceBuffer0.value=t}set luminanceBuffer1(t){this.uniforms.luminanceBuffer1.value=t}setLuminanceBuffer1(t){this.uniforms.luminanceBuffer1.value=t}set mipLevel1x1(t){this.defines.MIP_LEVEL_1X1=t.toFixed(1),this.needsUpdate=!0}setMipLevel1x1(t){this.mipLevel1x1=t}set deltaTime(t){this.uniforms.deltaTime.value=t}setDeltaTime(t){this.uniforms.deltaTime.value=t}get minLuminance(){return this.uniforms.minLuminance.value}set minLuminance(t){this.uniforms.minLuminance.value=t}getMinLuminance(){return this.uniforms.minLuminance.value}setMinLuminance(t){this.uniforms.minLuminance.value=t}get adaptationRate(){return this.uniforms.tau.value}set adaptationRate(t){this.uniforms.tau.value=t}getAdaptationRate(){return this.uniforms.tau.value}setAdaptationRate(t){this.uniforms.tau.value=t}},wAe=class extends Zo{constructor(t,{minLuminance:e=.01,adaptationRate:n=1}={}){super("AdaptiveLuminancePass"),this.fullscreenMaterial=new AAe,this.needsSwap=!1,this.renderTargetPrevious=new YV.WebGLRenderTarget(1,1,{minFilter:YV.NearestFilter,magFilter:YV.NearestFilter,depthBuffer:!1}),this.renderTargetPrevious.texture.name="Luminance.Previous";const i=this.fullscreenMaterial;i.luminanceBuffer0=this.renderTargetPrevious.texture,i.luminanceBuffer1=t,i.minLuminance=e,i.adaptationRate=n,this.renderTargetAdapted=this.renderTargetPrevious.clone(),this.renderTargetAdapted.texture.name="Luminance.Adapted",this.copyPass=new rI(this.renderTargetPrevious,!1)}get texture(){return this.renderTargetAdapted.texture}getTexture(){return this.renderTargetAdapted.texture}set mipLevel1x1(t){this.fullscreenMaterial.mipLevel1x1=t}get adaptationRate(){return this.fullscreenMaterial.adaptationRate}set adaptationRate(t){this.fullscreenMaterial.adaptationRate=t}render(t,e,n,i,o){this.fullscreenMaterial.deltaTime=i,t.setRenderTarget(this.renderToScreen?null:this.renderTargetAdapted),t.render(this.scene,this.camera),this.copyPass.render(t,this.renderTargetAdapted)}},V2t=`#include <tonemapping_pars_fragment>
uniform float whitePoint;
#if TONE_MAPPING_MODE == 2 || TONE_MAPPING_MODE == 3
uniform float middleGrey;
#if TONE_MAPPING_MODE == 3
uniform lowp sampler2D luminanceBuffer;
#else
uniform float averageLuminance;
#endif
vec3 Reinhard2ToneMapping(vec3 color){color*=toneMappingExposure;float l=luminance(color);
#if TONE_MAPPING_MODE == 3
float lumAvg=unpackRGBAToFloat(texture2D(luminanceBuffer,vec2(0.5)));
#else
float lumAvg=averageLuminance;
#endif
float lumScaled=(l*middleGrey)/max(lumAvg,1e-6);float lumCompressed=lumScaled*(1.0+lumScaled/(whitePoint*whitePoint));lumCompressed/=(1.0+lumScaled);return clamp(lumCompressed*color,0.0,1.0);}
#elif TONE_MAPPING_MODE == 4
#define A 0.15
#define B 0.50
#define C 0.10
#define D 0.20
#define E 0.02
#define F 0.30
vec3 Uncharted2Helper(const in vec3 x){return((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}vec3 Uncharted2ToneMapping(vec3 color){color*=toneMappingExposure;return clamp(Uncharted2Helper(color)/Uncharted2Helper(vec3(whitePoint)),0.0,1.0);}
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){
#if TONE_MAPPING_MODE == 2 || TONE_MAPPING_MODE == 3
outputColor=vec4(Reinhard2ToneMapping(inputColor.rgb),inputColor.a);
#elif TONE_MAPPING_MODE == 4
outputColor=vec4(Uncharted2ToneMapping(inputColor.rgb),inputColor.a);
#else
outputColor=vec4(toneMapping(inputColor.rgb),inputColor.a);
#endif
}`,G2t=class extends zi{constructor({blendFunction:t=Jn.SRC,adaptive:e=!1,mode:n=e?du.REINHARD2_ADAPTIVE:du.AGX,resolution:i=256,maxLuminance:o=4,whitePoint:l=o,middleGrey:d=.6,minLuminance:p=.01,averageLuminance:g=1,adaptationRate:v=1}={}){super("ToneMappingEffect",V2t,{blendFunction:t,uniforms:new Map([["luminanceBuffer",new O1.Uniform(null)],["maxLuminance",new O1.Uniform(o)],["whitePoint",new O1.Uniform(l)],["middleGrey",new O1.Uniform(d)],["averageLuminance",new O1.Uniform(g)]])}),this.renderTargetLuminance=new O1.WebGLRenderTarget(1,1,{minFilter:O1.LinearMipmapLinearFilter,depthBuffer:!1}),this.renderTargetLuminance.texture.generateMipmaps=!0,this.renderTargetLuminance.texture.name="Luminance",this.luminancePass=new oK({renderTarget:this.renderTargetLuminance}),this.adaptiveLuminancePass=new wAe(this.luminancePass.texture,{minLuminance:p,adaptationRate:v}),this.uniforms.get("luminanceBuffer").value=this.adaptiveLuminancePass.texture,this.resolution=i,this.mode=n}get mode(){return Number(this.defines.get("TONE_MAPPING_MODE"))}set mode(t){if(this.mode!==t){switch(this.defines.clear(),this.defines.set("TONE_MAPPING_MODE",t.toFixed(0)),t){case du.LINEAR:this.defines.set("toneMapping(texel)","LinearToneMapping(texel)");break;case du.REINHARD:this.defines.set("toneMapping(texel)","ReinhardToneMapping(texel)");break;case du.OPTIMIZED_CINEON:this.defines.set("toneMapping(texel)","OptimizedCineonToneMapping(texel)");break;case du.ACES_FILMIC:this.defines.set("toneMapping(texel)","ACESFilmicToneMapping(texel)");break;case du.AGX:this.defines.set("toneMapping(texel)","AgXToneMapping(texel)");break;case du.NEUTRAL:this.defines.set("toneMapping(texel)","NeutralToneMapping(texel)");break;default:this.defines.set("toneMapping(texel)","texel");break}this.adaptiveLuminancePass.enabled=t===du.REINHARD2_ADAPTIVE,this.setChanged()}}getMode(){return this.mode}setMode(t){this.mode=t}get whitePoint(){return this.uniforms.get("whitePoint").value}set whitePoint(t){this.uniforms.get("whitePoint").value=t}get middleGrey(){return this.uniforms.get("middleGrey").value}set middleGrey(t){this.uniforms.get("middleGrey").value=t}get averageLuminance(){return this.uniforms.get("averageLuminance").value}set averageLuminance(t){this.uniforms.get("averageLuminance").value=t}get adaptiveLuminanceMaterial(){return this.adaptiveLuminancePass.fullscreenMaterial}getAdaptiveLuminanceMaterial(){return this.adaptiveLuminanceMaterial}get resolution(){return this.luminancePass.resolution.width}set resolution(t){const e=Math.max(0,Math.ceil(Math.log2(t))),n=Math.pow(2,e);this.luminancePass.resolution.setPreferredSize(n,n),this.adaptiveLuminanceMaterial.mipLevel1x1=e}getResolution(){return this.resolution}setResolution(t){this.resolution=t}get adaptive(){return this.mode===du.REINHARD2_ADAPTIVE}set adaptive(t){this.mode=t?du.REINHARD2_ADAPTIVE:du.REINHARD2}get adaptationRate(){return this.adaptiveLuminanceMaterial.adaptationRate}set adaptationRate(t){this.adaptiveLuminanceMaterial.adaptationRate=t}get distinction(){return console.warn(this.name,"distinction was removed."),1}set distinction(t){console.warn(this.name,"distinction was removed.")}update(t,e,n){this.adaptiveLuminancePass.enabled&&(this.luminancePass.render(t,e),this.adaptiveLuminancePass.render(t,null,null,n))}initialize(t,e,n){this.adaptiveLuminancePass.initialize(t,e,n)}},Dle=se,j2t=`uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;
#if VIGNETTE_TECHNIQUE == 0
float d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));
#else
vec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));
#endif
outputColor=vec4(color,inputColor.a);}`,H2t=class extends zi{constructor({blendFunction:t,eskil:e=!1,technique:n=e?Ty.ESKIL:Ty.DEFAULT,offset:i=.5,darkness:o=.5}={}){super("VignetteEffect",j2t,{blendFunction:t,defines:new Map([["VIGNETTE_TECHNIQUE",n.toFixed(0)]]),uniforms:new Map([["offset",new Dle.Uniform(i)],["darkness",new Dle.Uniform(o)]])})}get technique(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))}set technique(t){this.technique!==t&&(this.defines.set("VIGNETTE_TECHNIQUE",t.toFixed(0)),this.setChanged())}get eskil(){return this.technique===Ty.ESKIL}set eskil(t){this.technique=t?Ty.ESKIL:Ty.DEFAULT}getTechnique(){return this.technique}setTechnique(t){this.technique=t}get offset(){return this.uniforms.get("offset").value}set offset(t){this.uniforms.get("offset").value=t}getOffset(){return this.offset}setOffset(t){this.offset=t}get darkness(){return this.uniforms.get("darkness").value}set darkness(t){this.uniforms.get("darkness").value=t}getDarkness(){return this.darkness}setDarkness(t){this.darkness=t}},qV=se,$2t=class extends qV.Loader{load(t,e=()=>{},n=()=>{},i=null){const o=this.manager,l=new qV.LoadingManager,d=new qV.FileLoader(l);return d.setPath(this.path),d.setResponseType("text"),new Promise((p,g)=>{l.onError=v=>{o.itemError(v),i!==null?(i(`Failed to load ${v}`),p()):g(`Failed to load ${v}`)},o.itemStart(t),d.load(t,v=>{try{const _=this.parse(v);o.itemEnd(t),e(_),p(_)}catch(_){console.error(_),l.onError(t)}},n)})}parse(t){const e=/^[\d ]+$/m,n=/^([\d.e+-]+) +([\d.e+-]+) +([\d.e+-]+) *$/gm;let i=e.exec(t);if(i===null)throw new Error("Missing grid information");const o=i[0].trim().split(/\s+/g).map(E=>Number(E)),l=o[1]-o[0],d=o.length,p=d**2;for(let E=1,S=o.length;E<S;++E)if(l!==o[E]-o[E-1])throw new Error("Inconsistent grid size");const g=new Float32Array(d**3*4);let v=0,_=0;for(;(i=n.exec(t))!==null;){const E=Number(i[1]),S=Number(i[2]),M=Number(i[3]);v=Math.max(v,E,S,M);const k=_%d,x=Math.floor(_/d)%d,C=Math.floor(_/p)%d,P=(k*p+x*d+C)*4;g[P+0]=E,g[P+1]=S,g[P+2]=M,g[P+3]=1,++_}const b=Math.ceil(Math.log2(v)),w=Math.pow(2,b);for(let E=0,S=g.length;E<S;E+=4)g[E+0]/=w,g[E+1]/=w,g[E+2]/=w;return new r6(g,d)}},Y3=se,W2t=class extends Y3.Loader{load(t,e=()=>{},n=()=>{},i=null){const o=this.manager,l=new Y3.LoadingManager,d=new Y3.FileLoader(l);return d.setPath(this.path),d.setResponseType("text"),new Promise((p,g)=>{l.onError=v=>{o.itemError(v),i!==null?(i(`Failed to load ${v}`),p()):g(`Failed to load ${v}`)},o.itemStart(t),d.load(t,v=>{try{const _=this.parse(v);o.itemEnd(t),e(_),p(_)}catch(_){console.error(_),l.onError(t)}},n)})}parse(t){const e=/TITLE +"([^"]*)"/,n=/LUT_3D_SIZE +(\d+)/,i=/DOMAIN_MIN +([\d.]+) +([\d.]+) +([\d.]+)/,o=/DOMAIN_MAX +([\d.]+) +([\d.]+) +([\d.]+)/,l=/^([\d.e+-]+) +([\d.e+-]+) +([\d.e+-]+) *$/gm;let d=e.exec(t);const p=d!==null?d[1]:null;if(d=n.exec(t),d===null)throw new Error("Missing LUT_3D_SIZE information");const g=Number(d[1]),v=new Float32Array(g**3*4),_=new Y3.Vector3(0,0,0),b=new Y3.Vector3(1,1,1);if(d=i.exec(t),d!==null&&_.set(Number(d[1]),Number(d[2]),Number(d[3])),d=o.exec(t),d!==null&&b.set(Number(d[1]),Number(d[2]),Number(d[3])),_.x>b.x||_.y>b.y||_.z>b.z)throw _.set(0,0,0),b.set(1,1,1),new Error("Invalid input domain");let w=0;for(;(d=l.exec(t))!==null;)v[w++]=Number(d[1]),v[w++]=Number(d[2]),v[w++]=Number(d[3]),v[w++]=1;const E=new r6(v,g);return E.domainMin.copy(_),E.domainMax.copy(b),p!==null&&(E.name=p),E}},Ole=se,Y2t=class extends Ole.Loader{load(t=()=>{},e=null){arguments.length===4?(t=arguments[1],e=arguments[3]):(arguments.length===3||typeof arguments[0]!="function")&&(t=arguments[1],e=null);const n=this.manager,i=new Ole.LoadingManager;return new Promise((o,l)=>{const d=new Image,p=new Image;i.onError=g=>{n.itemError(g),e!==null?(e(`Failed to load ${g}`),o()):l(`Failed to load ${g}`)},i.onLoad=()=>{const g=[d,p];t(g),o(g)},d.addEventListener("error",g=>{i.itemError("smaa-search")}),p.addEventListener("error",g=>{i.itemError("smaa-area")}),d.addEventListener("load",()=>{n.itemEnd("smaa-search"),i.itemEnd("smaa-search")}),p.addEventListener("load",()=>{n.itemEnd("smaa-area"),i.itemEnd("smaa-area")}),n.itemStart("smaa-search"),n.itemStart("smaa-area"),i.itemStart("smaa-search"),i.itemStart("smaa-area"),d.src=aW,p.src=lW})}},t0=se,q2t=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef BILATERAL
#include <packing>
uniform vec2 cameraNearFar;
#ifdef NORMAL_DEPTH
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D normalDepthBuffer;
#else
uniform mediump sampler2D normalDepthBuffer;
#endif
float readDepth(const in vec2 uv){return texture2D(normalDepthBuffer,uv).a;}
#else
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}
#endif
float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);
#else
return orthographicDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);
#endif
}
#ifdef PERSPECTIVE_CAMERA
#define linearDepth(v) viewZToOrthographicDepth(getViewZ(readDepth(v)), cameraNearFar.x, cameraNearFar.y)
#else
#define linearDepth(v) readDepth(v)
#endif
#endif
#define getTexel(v) texture2D(inputBuffer, v)
#if KERNEL_SIZE == 3
varying vec2 vUv00,vUv01,vUv02;varying vec2 vUv03,vUv04,vUv05;varying vec2 vUv06,vUv07,vUv08;
#elif KERNEL_SIZE == 5 && MAX_VARYING_VECTORS >= 13
varying vec2 vUv00,vUv01,vUv02,vUv03,vUv04;varying vec2 vUv05,vUv06,vUv07,vUv08,vUv09;varying vec2 vUv10,vUv11,vUv12,vUv13,vUv14;varying vec2 vUv15,vUv16,vUv17,vUv18,vUv19;varying vec2 vUv20,vUv21,vUv22,vUv23,vUv24;
#else
uniform vec2 texelSize;uniform float scale;varying vec2 vUv;
#endif
void main(){
#if KERNEL_SIZE == 3
vec4 c[]=vec4[KERNEL_SIZE_SQ](getTexel(vUv00),getTexel(vUv01),getTexel(vUv02),getTexel(vUv03),getTexel(vUv04),getTexel(vUv05),getTexel(vUv06),getTexel(vUv07),getTexel(vUv08));
#ifdef BILATERAL
float z[]=float[KERNEL_SIZE_SQ](linearDepth(vUv00),linearDepth(vUv01),linearDepth(vUv02),linearDepth(vUv03),linearDepth(vUv04),linearDepth(vUv05),linearDepth(vUv06),linearDepth(vUv07),linearDepth(vUv08));
#endif
#elif KERNEL_SIZE == 5 && MAX_VARYING_VECTORS >= 13
vec4 c[]=vec4[KERNEL_SIZE_SQ](getTexel(vUv00),getTexel(vUv01),getTexel(vUv02),getTexel(vUv03),getTexel(vUv04),getTexel(vUv05),getTexel(vUv06),getTexel(vUv07),getTexel(vUv08),getTexel(vUv09),getTexel(vUv10),getTexel(vUv11),getTexel(vUv12),getTexel(vUv13),getTexel(vUv14),getTexel(vUv15),getTexel(vUv16),getTexel(vUv17),getTexel(vUv18),getTexel(vUv19),getTexel(vUv20),getTexel(vUv21),getTexel(vUv22),getTexel(vUv23),getTexel(vUv24));
#ifdef BILATERAL
float z[]=float[KERNEL_SIZE_SQ](linearDepth(vUv00),linearDepth(vUv01),linearDepth(vUv02),linearDepth(vUv03),linearDepth(vUv04),linearDepth(vUv05),linearDepth(vUv06),linearDepth(vUv07),linearDepth(vUv08),linearDepth(vUv09),linearDepth(vUv10),linearDepth(vUv11),linearDepth(vUv12),linearDepth(vUv13),linearDepth(vUv14),linearDepth(vUv15),linearDepth(vUv16),linearDepth(vUv17),linearDepth(vUv18),linearDepth(vUv19),linearDepth(vUv20),linearDepth(vUv21),linearDepth(vUv22),linearDepth(vUv23),linearDepth(vUv24));
#endif
#endif
vec4 result=vec4(0.0);
#ifdef BILATERAL
float w=0.0;
#if KERNEL_SIZE == 3 || (KERNEL_SIZE == 5 && MAX_VARYING_VECTORS >= 13)
float centerDepth=z[KERNEL_SIZE_SQ_HALF];for(int i=0;i<KERNEL_SIZE_SQ;++i){float d=step(abs(z[i]-centerDepth),DISTANCE_THRESHOLD);result+=c[i]*d;w+=d;}
#else
float centerDepth=linearDepth(vUv);vec2 s=texelSize*scale;for(int x=-KERNEL_SIZE_HALF;x<=KERNEL_SIZE_HALF;++x){for(int y=-KERNEL_SIZE_HALF;y<=KERNEL_SIZE_HALF;++y){vec2 coords=vUv+vec2(x,y)*s;vec4 c=getTexel(coords);float z=(x==0&&y==0)?centerDepth:linearDepth(coords);float d=step(abs(z-centerDepth),DISTANCE_THRESHOLD);result+=c*d;w+=d;}}
#endif
gl_FragColor=result/max(w,1.0);
#else
#if KERNEL_SIZE == 3 || (KERNEL_SIZE == 5 && MAX_VARYING_VECTORS >= 13)
for(int i=0;i<KERNEL_SIZE_SQ;++i){result+=c[i];}
#else
vec2 s=texelSize*scale;for(int x=-KERNEL_SIZE_HALF;x<=KERNEL_SIZE_HALF;++x){for(int y=-KERNEL_SIZE_HALF;y<=KERNEL_SIZE_HALF;++y){result+=getTexel(uv+vec2(x,y)*s);}}
#endif
gl_FragColor=result*INV_KERNEL_SIZE_SQ;
#endif
}`,X2t=`uniform vec2 texelSize;uniform float scale;
#if KERNEL_SIZE == 3
varying vec2 vUv00,vUv01,vUv02;varying vec2 vUv03,vUv04,vUv05;varying vec2 vUv06,vUv07,vUv08;
#elif KERNEL_SIZE == 5 && MAX_VARYING_VECTORS >= 13
varying vec2 vUv00,vUv01,vUv02,vUv03,vUv04;varying vec2 vUv05,vUv06,vUv07,vUv08,vUv09;varying vec2 vUv10,vUv11,vUv12,vUv13,vUv14;varying vec2 vUv15,vUv16,vUv17,vUv18,vUv19;varying vec2 vUv20,vUv21,vUv22,vUv23,vUv24;
#else
varying vec2 vUv;
#endif
void main(){vec2 uv=position.xy*0.5+0.5;
#if KERNEL_SIZE == 3
vec2 s=texelSize*scale;vUv00=uv+s*vec2(-1.0,-1.0);vUv01=uv+s*vec2(0.0,-1.0);vUv02=uv+s*vec2(1.0,-1.0);vUv03=uv+s*vec2(-1.0,0.0);vUv04=uv;vUv05=uv+s*vec2(1.0,0.0);vUv06=uv+s*vec2(-1.0,1.0);vUv07=uv+s*vec2(0.0,1.0);vUv08=uv+s*vec2(1.0,1.0);
#elif KERNEL_SIZE == 5
vec2 s=texelSize*scale;vUv00=uv+s*vec2(-2.0,-2.0);vUv01=uv+s*vec2(-1.0,-2.0);vUv02=uv+s*vec2(0.0,-2.0);vUv03=uv+s*vec2(1.0,-2.0);vUv04=uv+s*vec2(2.0,-2.0);vUv05=uv+s*vec2(-2.0,-1.0);vUv06=uv+s*vec2(-1.0,-1.0);vUv07=uv+s*vec2(0.0,-1.0);vUv08=uv+s*vec2(1.0,-1.0);vUv09=uv+s*vec2(2.0,-1.0);vUv10=uv+s*vec2(-2.0,0.0);vUv11=uv+s*vec2(-1.0,0.0);vUv12=uv;vUv13=uv+s*vec2(1.0,0.0);vUv14=uv+s*vec2(2.0,0.0);vUv15=uv+s*vec2(-2.0,1.0);vUv16=uv+s*vec2(-1.0,1.0);vUv17=uv+s*vec2(0.0,1.0);vUv18=uv+s*vec2(1.0,1.0);vUv19=uv+s*vec2(2.0,1.0);vUv20=uv+s*vec2(-2.0,2.0);vUv21=uv+s*vec2(-1.0,2.0);vUv22=uv+s*vec2(0.0,2.0);vUv23=uv+s*vec2(1.0,2.0);vUv24=uv+s*vec2(2.0,2.0);
#else
vUv=uv;
#endif
gl_Position=vec4(position.xy,1.0,1.0);}`,EAe=class extends t0.ShaderMaterial{constructor({bilateral:t=!1,kernelSize:e=5}={}){super({name:"BoxBlurMaterial",defines:{DEPTH_PACKING:"0",DISTANCE_THRESHOLD:"0.1"},uniforms:{inputBuffer:new t0.Uniform(null),depthBuffer:new t0.Uniform(null),normalDepthBuffer:new t0.Uniform(null),texelSize:new t0.Uniform(new t0.Vector2),cameraNearFar:new t0.Uniform(new t0.Vector2),scale:new t0.Uniform(1)},blending:t0.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:q2t,vertexShader:X2t}),this.bilateral=t,this.kernelSize=e,this.maxVaryingVectors=8}set maxVaryingVectors(t){this.defines.MAX_VARYING_VECTORS=t.toFixed(0)}get kernelSize(){return Number(this.defines.KERNEL_SIZE)}set kernelSize(t){if(t%2===0)throw new Error("The kernel size must be an odd number");this.defines.KERNEL_SIZE=t.toFixed(0),this.defines.KERNEL_SIZE_HALF=Math.floor(t/2).toFixed(0),this.defines.KERNEL_SIZE_SQ=(t**2).toFixed(0),this.defines.KERNEL_SIZE_SQ_HALF=Math.floor(t**2/2).toFixed(0),this.defines.INV_KERNEL_SIZE_SQ=(1/t**2).toFixed(6),this.needsUpdate=!0}get scale(){return this.uniforms.scale.value}set scale(t){this.uniforms.scale.value=t}get near(){return this.uniforms.cameraNearFar.value.x}get far(){return this.uniforms.cameraNearFar.value.y}set inputBuffer(t){this.uniforms.inputBuffer.value=t}set depthBuffer(t){this.uniforms.depthBuffer.value=t}set normalDepthBuffer(t){this.uniforms.normalDepthBuffer.value=t,t!==null?this.defines.NORMAL_DEPTH="1":delete this.defines.NORMAL_DEPTH,this.needsUpdate=!0}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}get bilateral(){return this.defines.BILATERAL!==void 0}set bilateral(t){t!==null?this.defines.BILATERAL="1":delete this.defines.BILATERAL,this.needsUpdate=!0}get worldDistanceThreshold(){return-Dg(Number(this.defines.DISTANCE_THRESHOLD),this.near,this.far)}set worldDistanceThreshold(t){const e=j2(-t,this.near,this.far);this.defines.DISTANCE_THRESHOLD=e.toFixed(12),this.needsUpdate=!0}copyCameraSettings(t){t&&(this.uniforms.cameraNearFar.value.set(t.near,t.far),t instanceof t0.PerspectiveCamera?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},W_=se,Z2t=`#include <packing>
varying vec2 vUv;
#ifdef NORMAL_DEPTH
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D normalDepthBuffer;
#else
uniform mediump sampler2D normalDepthBuffer;
#endif
float readDepth(const in vec2 uv){return texture2D(normalDepthBuffer,uv).a;}
#else
#if INPUT_DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if INPUT_DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}
#endif
void main(){
#if INPUT_DEPTH_PACKING == OUTPUT_DEPTH_PACKING
gl_FragColor=texture2D(depthBuffer,vUv);
#else
float depth=readDepth(vUv);
#if OUTPUT_DEPTH_PACKING == 3201
gl_FragColor=(depth==1.0)?vec4(1.0):packDepthToRGBA(depth);
#else
gl_FragColor=vec4(vec3(depth),1.0);
#endif
#endif
}`,Q2t=`varying vec2 vUv;
#if DEPTH_COPY_MODE == 1
uniform vec2 texelPosition;
#endif
void main(){
#if DEPTH_COPY_MODE == 1
vUv=texelPosition;
#else
vUv=position.xy*0.5+0.5;
#endif
gl_Position=vec4(position.xy,1.0,1.0);}`,SAe=class extends W_.ShaderMaterial{constructor(){super({name:"DepthCopyMaterial",defines:{INPUT_DEPTH_PACKING:"0",OUTPUT_DEPTH_PACKING:"0",DEPTH_COPY_MODE:"0"},uniforms:{depthBuffer:new W_.Uniform(null),texelPosition:new W_.Uniform(new W_.Vector2)},blending:W_.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Z2t,vertexShader:Q2t}),this.depthCopyMode=fb.FULL}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(t){this.uniforms.depthBuffer.value=t}set inputDepthPacking(t){this.defines.INPUT_DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}get outputDepthPacking(){return Number(this.defines.OUTPUT_DEPTH_PACKING)}set outputDepthPacking(t){this.defines.OUTPUT_DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=W_.BasicDepthPacking){this.depthBuffer=t,this.inputDepthPacking=e}getInputDepthPacking(){return Number(this.defines.INPUT_DEPTH_PACKING)}setInputDepthPacking(t){this.defines.INPUT_DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}getOutputDepthPacking(){return Number(this.defines.OUTPUT_DEPTH_PACKING)}setOutputDepthPacking(t){this.defines.OUTPUT_DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}get texelPosition(){return this.uniforms.texelPosition.value}getTexelPosition(){return this.uniforms.texelPosition.value}setTexelPosition(t){this.uniforms.texelPosition.value=t}get mode(){return this.depthCopyMode}set mode(t){this.depthCopyMode=t,this.defines.DEPTH_COPY_MODE=t.toFixed(0),this.needsUpdate=!0}getMode(){return this.mode}setMode(t){this.mode=t}},Vl=se,K2t=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;
#if THREE_REVISION < 143
#define luminance(v) linearToRelativeLuminance(v)
#endif
#if THREE_REVISION >= 137
vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,J2t="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",TAe=class extends Vl.ShaderMaterial{constructor(t,e,n,i,o=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:Vl.REVISION.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new Vl.Uniform(null),depthBuffer:new Vl.Uniform(null),resolution:new Vl.Uniform(new Vl.Vector2),texelSize:new Vl.Uniform(new Vl.Vector2),cameraNear:new Vl.Uniform(.3),cameraFar:new Vl.Uniform(1e3),aspect:new Vl.Uniform(1),time:new Vl.Uniform(0)},blending:Vl.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:o}),t&&this.setShaderParts(t),e&&this.setDefines(e),n&&this.setUniforms(n),this.copyCameraSettings(i)}set inputBuffer(t){this.uniforms.inputBuffer.value=t}setInputBuffer(t){this.uniforms.inputBuffer.value=t}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(t){this.uniforms.depthBuffer.value=t}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(t){this.defines.DEPTH_PACKING=t.toFixed(0),this.needsUpdate=!0}setDepthBuffer(t,e=Vl.BasicDepthPacking){this.depthBuffer=t,this.depthPacking=e}setShaderData(t){this.setShaderParts(t.shaderParts),this.setDefines(t.defines),this.setUniforms(t.uniforms),this.setExtensions(t.extensions)}setShaderParts(t){return this.fragmentShader=K2t.replace(wi.FRAGMENT_HEAD,t.get(wi.FRAGMENT_HEAD)||"").replace(wi.FRAGMENT_MAIN_UV,t.get(wi.FRAGMENT_MAIN_UV)||"").replace(wi.FRAGMENT_MAIN_IMAGE,t.get(wi.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=J2t.replace(wi.VERTEX_HEAD,t.get(wi.VERTEX_HEAD)||"").replace(wi.VERTEX_MAIN_SUPPORT,t.get(wi.VERTEX_MAIN_SUPPORT)||""),this.fragmentShader=_v(this.fragmentShader),this.needsUpdate=!0,this}setDefines(t){for(const e of t.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(t){for(const e of t.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(t){this.extensions={};for(const e of t)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(t){this.encodeOutput!==t&&(t?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(t){return this.encodeOutput}setOutputEncodingEnabled(t){this.encodeOutput=t}get time(){return this.uniforms.time.value}set time(t){this.uniforms.time.value=t}setDeltaTime(t){this.uniforms.time.value+=t}adoptCameraSettings(t){this.copyCameraSettings(t)}copyCameraSettings(t){t&&(this.uniforms.cameraNear.value=t.near,this.uniforms.cameraFar.value=t.far,t instanceof Vl.PerspectiveCamera?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(t,e){const n=this.uniforms;n.resolution.value.set(t,e),n.texelSize.value.set(1/t,1/e),n.aspect.value=t/e}static get Section(){return wi}},vh=se,emt=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform vec2 kernel[STEPS];varying vec2 vOffset;varying vec2 vUv;void main(){vec4 result=texture2D(inputBuffer,vUv)*kernel[0].y;for(int i=1;i<STEPS;++i){vec2 offset=kernel[i].x*vOffset;vec4 c0=texture2D(inputBuffer,vUv+offset);vec4 c1=texture2D(inputBuffer,vUv-offset);result+=(c0+c1)*kernel[i].y;}gl_FragColor=result;
#include <colorspace_fragment>
}`,tmt="uniform vec2 texelSize;uniform vec2 direction;uniform float scale;varying vec2 vOffset;varying vec2 vUv;void main(){vOffset=direction*texelSize*scale;vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",xAe=class extends vh.ShaderMaterial{constructor({kernelSize:t=35}={}){super({name:"GaussianBlurMaterial",uniforms:{inputBuffer:new vh.Uniform(null),texelSize:new vh.Uniform(new vh.Vector2),direction:new vh.Uniform(new vh.Vector2),kernel:new vh.Uniform(null),scale:new vh.Uniform(1)},blending:vh.NoBlending,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:emt,vertexShader:tmt}),this.fragmentShader=_v(this.fragmentShader),this._kernelSize=0,this.kernelSize=t}set inputBuffer(t){this.uniforms.inputBuffer.value=t}get kernelSize(){return this._kernelSize}set kernelSize(t){this._kernelSize=t,this.generateKernel(t)}get direction(){return this.uniforms.direction.value}get scale(){return this.uniforms.scale.value}set scale(t){this.uniforms.scale.value=t}generateKernel(t){const e=new tAe(t),n=e.linearSteps,i=new Float64Array(n*2);for(let o=0,l=0;o<n;++o)i[l++]=e.linearOffsets[o],i[l++]=e.linearWeights[o];this.uniforms.kernel.value=i,this.defines.STEPS=n.toFixed(0),this.needsUpdate=!0}setSize(t,e){this.uniforms.texelSize.value.set(1/t,1/e)}},N1=se,nmt=class extends Zo{constructor({kernelSize:t=5,iterations:e=1,bilateral:n=!1,resolutionScale:i=1,resolutionX:o=Rr.AUTO_SIZE,resolutionY:l=Rr.AUTO_SIZE}={}){super("BoxBlurPass"),this.needsDepthTexture=n,this.renderTargetA=new N1.WebGLRenderTarget(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=new N1.WebGLRenderTarget(1,1,{depthBuffer:!1}),this.renderTargetB.texture.name="Blur.Target.B",this.blurMaterial=new EAe({bilateral:n,kernelSize:t}),this.copyMaterial=new Ox;const d=this.resolution=new Rr(this,o,l,i);d.addEventListener("change",p=>this.setSize(d.baseWidth,d.baseHeight)),this.iterations=e}set mainCamera(t){this.blurMaterial.copyCameraSettings(t)}setDepthTexture(t,e=N1.BasicDepthPacking){this.blurMaterial.depthBuffer=t,this.blurMaterial.depthPacking=e}render(t,e,n,i,o){const l=this.scene,d=this.camera,p=this.renderTargetA,g=this.renderTargetB,v=this.blurMaterial;this.fullscreenMaterial=v;let _=e;for(let b=0,w=Math.max(this.iterations,1);b<w;++b){const E=b&1?g:p;v.inputBuffer=_.texture,t.setRenderTarget(E),t.render(l,d),_=E}this.copyMaterial.inputBuffer=_.texture,this.fullscreenMaterial=this.copyMaterial,t.setRenderTarget(this.renderToScreen?null:n),t.render(l,d)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e);const i=n.width,o=n.height;this.renderTargetA.setSize(i,o),this.renderTargetB.setSize(i,o),this.blurMaterial.setSize(t,e)}initialize(t,e,n){t!==null&&(this.blurMaterial.maxVaryingVectors=t.capabilities.maxVaryings),n!==void 0&&(this.renderTargetA.texture.type=n,this.renderTargetB.texture.type=n,n!==N1.UnsignedByteType?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":t!==null&&t.outputColorSpace===N1.SRGBColorSpace&&(this.renderTargetA.texture.colorSpace=N1.SRGBColorSpace,this.renderTargetB.texture.colorSpace=N1.SRGBColorSpace))}},XV=se,u2=se,cW=class extends Zo{constructor({depthPacking:t=u2.RGBADepthPacking}={}){super("DepthCopyPass");const e=new SAe;e.outputDepthPacking=t,this.fullscreenMaterial=e,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new u2.WebGLRenderTarget(1,1,{type:t===u2.RGBADepthPacking?u2.UnsignedByteType:u2.FloatType,minFilter:u2.NearestFilter,magFilter:u2.NearestFilter,depthBuffer:!1}),this.renderTarget.texture.name="DepthCopyPass.Target"}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}get depthPacking(){return this.fullscreenMaterial.outputDepthPacking}getDepthPacking(){return this.fullscreenMaterial.outputDepthPacking}setDepthTexture(t,e=u2.BasicDepthPacking){this.fullscreenMaterial.depthBuffer=t,this.fullscreenMaterial.inputDepthPacking=e}render(t,e,n,i,o){t.setRenderTarget(this.renderToScreen?null:this.renderTarget),t.render(this.scene,this.camera)}setSize(t,e){this.renderTarget.setSize(t,e)}},Jk=new Float32Array([255/256/256**3,255/256/256**2,255/256/256,255/256]);function rmt(t){return(t[0]*Jk[0]+t[1]*Jk[1]+t[2]*Jk[2]+t[3]*Jk[3])/255}var imt=class extends cW{constructor({depthPacking:t=XV.RGBADepthPacking,mode:e=fb.SINGLE}={}){super({depthPacking:t}),this.name="DepthPickingPass",this.fullscreenMaterial.mode=e,this.pixelBuffer=t===XV.RGBADepthPacking?new Uint8Array(4):new Float32Array(4),this.callback=null}readDepth(t){return this.fullscreenMaterial.texelPosition.set(t.x*.5+.5,t.y*.5+.5),new Promise(e=>{this.callback=e})}render(t,e,n,i,o){const l=this.fullscreenMaterial,d=l.mode;if(d===fb.FULL&&super.render(t),this.callback!==null){const p=this.renderTarget,g=this.pixelBuffer,v=p.texture.type!==XV.FloatType;let _=0,b=0;if(d===fb.SINGLE)super.render(t);else{const w=l.texelPosition;_=Math.round(w.x*p.width),b=Math.round(w.y*p.height)}t.readRenderTargetPixels(p,_,b,1,1,g),this.callback(v?rmt(g):g[0]),this.callback=null}}setSize(t,e){this.fullscreenMaterial.mode===fb.FULL&&super.setSize(t,e)}},JS=se;function Ile(t,e,n){for(const i of e){const o="$1"+t+i.charAt(0).toUpperCase()+i.slice(1),l=new RegExp("([^\\.])(\\b"+i+"\\b)","g");for(const d of n.entries())d[1]!==null&&n.set(d[0],d[1].replace(l,o))}}function smt(t,e,n){let i=e.getFragmentShader(),o=e.getVertexShader();const l=i!==void 0&&/mainImage/.test(i),d=i!==void 0&&/mainUv/.test(i);if(n.attributes|=e.getAttributes(),i===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(d&&n.attributes&$o.CONVOLUTION)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!l&&!d)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const p=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,g=n.shaderParts;let v=g.get(wi.FRAGMENT_HEAD)||"",_=g.get(wi.FRAGMENT_MAIN_UV)||"",b=g.get(wi.FRAGMENT_MAIN_IMAGE)||"",w=g.get(wi.VERTEX_HEAD)||"",E=g.get(wi.VERTEX_MAIN_SUPPORT)||"";const S=new Set,M=new Set;if(d&&(_+=`	${t}MainUv(UV);
`,n.uvTransformation=!0),o!==null&&/mainSupport/.test(o)){const C=/mainSupport *\([\w\s]*?uv\s*?\)/.test(o);E+=`	${t}MainSupport(`,E+=C?`vUv);
`:`);
`;for(const P of o.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const O of P[1].split(/\s*,\s*/))n.varyings.add(O),S.add(O),M.add(O);for(const P of o.matchAll(p))M.add(P[1])}for(const C of i.matchAll(p))M.add(C[1]);for(const C of e.defines.keys())M.add(C.replace(/\([\w\s,]*\)/g,""));for(const C of e.uniforms.keys())M.add(C);M.delete("while"),M.delete("for"),M.delete("if"),e.uniforms.forEach((C,P)=>n.uniforms.set(t+P.charAt(0).toUpperCase()+P.slice(1),C)),e.defines.forEach((C,P)=>n.defines.set(t+P.charAt(0).toUpperCase()+P.slice(1),C));const k=new Map([["fragment",i],["vertex",o]]);Ile(t,M,n.defines),Ile(t,M,k),i=k.get("fragment"),o=k.get("vertex");const x=e.blendMode;if(n.blendModes.set(x.blendFunction,x),l){e.inputColorSpace!==null&&e.inputColorSpace!==n.colorSpace&&(b+=e.inputColorSpace===JS.SRGBColorSpace?`color0 = LinearTosRGB(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==JS.NoColorSpace?n.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(n.colorSpace=e.inputColorSpace);const C=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;b+=`${t}MainImage(color0, UV, `,n.attributes&$o.DEPTH&&C.test(i)&&(b+="depth, ",n.readDepth=!0),b+=`color1);
	`;const P=t+"BlendOpacity";n.uniforms.set(P,x.opacity),b+=`color0 = blend${x.blendFunction}(color0, color1, ${P});

	`,v+=`uniform float ${P};

`}if(v+=i+`
`,o!==null&&(w+=o+`
`),g.set(wi.FRAGMENT_HEAD,v),g.set(wi.FRAGMENT_MAIN_UV,_),g.set(wi.FRAGMENT_MAIN_IMAGE,b),g.set(wi.VERTEX_HEAD,w),g.set(wi.VERTEX_MAIN_SUPPORT,E),e.extensions!==null)for(const C of e.extensions)n.extensions.add(C)}}var omt=class extends Zo{constructor(t,...e){super("EffectPass"),this.fullscreenMaterial=new TAe(null,null,null,t),this.listener=n=>this.handleEvent(n),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(t){for(const e of this.effects)e.mainScene=t}set mainCamera(t){this.fullscreenMaterial.copyCameraSettings(t);for(const e of this.effects)e.mainCamera=t}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(t){this.fullscreenMaterial.encodeOutput=t}get dithering(){return this.fullscreenMaterial.dithering}set dithering(t){const e=this.fullscreenMaterial;e.dithering=t,e.needsUpdate=!0}setEffects(t){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=t.sort((e,n)=>n.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const t=new eAe;let e=0;for(const d of this.effects)if(d.blendMode.blendFunction===Jn.DST)t.attributes|=d.getAttributes()&$o.DEPTH;else{if(t.attributes&d.getAttributes()&$o.CONVOLUTION)throw new Error(`Convolution effects cannot be merged (${d.name})`);smt("e"+e++,d,t)}let n=t.shaderParts.get(wi.FRAGMENT_HEAD),i=t.shaderParts.get(wi.FRAGMENT_MAIN_IMAGE),o=t.shaderParts.get(wi.FRAGMENT_MAIN_UV);const l=/\bblend\b/g;for(const d of t.blendModes.values())n+=d.getShaderCode().replace(l,`blend${d.blendFunction}`)+`
`;t.attributes&$o.DEPTH?(t.readDepth&&(i=`float depth = readDepth(UV);

	`+i),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,t.colorSpace===JS.SRGBColorSpace&&(i+=`color0 = sRGBToLinear(color0);
	`),t.uvTransformation?(o=`vec2 transformedUv = vUv;
`+o,t.defines.set("UV","transformedUv")):t.defines.set("UV","vUv"),t.shaderParts.set(wi.FRAGMENT_HEAD,n),t.shaderParts.set(wi.FRAGMENT_MAIN_IMAGE,i),t.shaderParts.set(wi.FRAGMENT_MAIN_UV,o);for(const[d,p]of t.shaderParts)p!==null&&t.shaderParts.set(d,p.trim().replace(/^#/,`
#`));this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(t)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(t,e=JS.BasicDepthPacking){this.fullscreenMaterial.depthBuffer=t,this.fullscreenMaterial.depthPacking=e;for(const n of this.effects)n.setDepthTexture(t,e)}render(t,e,n,i,o){for(const l of this.effects)l.update(t,e,i);if(!this.skipRendering||this.renderToScreen){const l=this.fullscreenMaterial;l.inputBuffer=e.texture,l.time+=i*this.timeScale,t.setRenderTarget(this.renderToScreen?null:n),t.render(this.scene,this.camera)}}setSize(t,e){this.fullscreenMaterial.setSize(t,e);for(const n of this.effects)n.setSize(t,e)}initialize(t,e,n){this.renderer=t;for(const i of this.effects)i.initialize(t,e,n);this.updateMaterial(),n!==void 0&&n!==JS.UnsignedByteType&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const t of this.effects)t.removeEventListener("change",this.listener),t.dispose()}handleEvent(t){switch(t.type){case"change":this.recompile();break}}},q3=se,amt=class extends Zo{constructor({kernelSize:t=35,iterations:e=1,resolutionScale:n=1,resolutionX:i=Rr.AUTO_SIZE,resolutionY:o=Rr.AUTO_SIZE}={}){super("GaussianBlurPass"),this.renderTargetA=new q3.WebGLRenderTarget(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B",this.blurMaterial=new xAe({kernelSize:t}),this.copyMaterial=new Ox,this.copyMaterial.inputBuffer=this.renderTargetB.texture;const l=this.resolution=new Rr(this,i,o,n);l.addEventListener("change",d=>this.setSize(l.baseWidth,l.baseHeight)),this.iterations=e}render(t,e,n,i,o){const l=this.scene,d=this.camera,p=this.renderTargetA,g=this.renderTargetB,v=this.blurMaterial;this.fullscreenMaterial=v;let _=e;for(let b=0,w=Math.max(this.iterations,1);b<w;++b)v.direction.set(1,0),v.inputBuffer=_.texture,t.setRenderTarget(p),t.render(l,d),v.direction.set(0,1),v.inputBuffer=p.texture,t.setRenderTarget(g),t.render(l,d),b===0&&w>1&&(_=g);this.fullscreenMaterial=this.copyMaterial,t.setRenderTarget(this.renderToScreen?null:n),t.render(l,d)}setSize(t,e){const n=this.resolution;n.setBaseSize(t,e);const i=n.width,o=n.height;this.renderTargetA.setSize(i,o),this.renderTargetB.setSize(i,o),this.blurMaterial.setSize(t,e)}initialize(t,e,n){n!==void 0&&(this.renderTargetA.texture.type=n,this.renderTargetB.texture.type=n,n!==q3.UnsignedByteType?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):t!==null&&t.outputColorSpace===q3.SRGBColorSpace&&(this.renderTargetA.texture.colorSpace=q3.SRGBColorSpace,this.renderTargetB.texture.colorSpace=q3.SRGBColorSpace))}},lmt=class extends Zo{constructor(t){super("LambdaPass",null,null),this.needsSwap=!1,this.f=t}render(t,e,n,i,o){this.f()}},X3=se,cmt=class extends Zo{constructor(e,n,{renderTarget:i,resolutionScale:o=1,width:l=Rr.AUTO_SIZE,height:d=Rr.AUTO_SIZE,resolutionX:p=l,resolutionY:g=d}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new Ix(e,n,new X3.MeshNormalMaterial);const v=this.renderPass;v.ignoreBackground=!0,v.skipShadowMapUpdate=!0;const _=v.getClearPass();_.overrideClearColor=new X3.Color(7829503),_.overrideClearAlpha=1,this.renderTarget=i,this.renderTarget===void 0&&(this.renderTarget=new X3.WebGLRenderTarget(1,1,{minFilter:X3.NearestFilter,magFilter:X3.NearestFilter}),this.renderTarget.texture.name="NormalPass.Target");const b=this.resolution=new Rr(this,p,g,o);b.addEventListener("change",w=>this.setSize(b.baseWidth,b.baseHeight))}set mainScene(e){this.renderPass.mainScene=e}set mainCamera(e){this.renderPass.mainCamera=e}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e,n,i,o,l){const d=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,d,d)}setSize(e,n){const i=this.resolution;i.setBaseSize(e,n),this.renderTarget.setSize(i.width,i.height)}},Nle=[new Float32Array(3),new Float32Array(3)],vs=[new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3)],Y_=[[new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,0,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([1,0,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([0,1,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([0,1,1]),new Float32Array([1,1,1])]];function eC(t,e,n,i){const o=n[0]-e[0],l=n[1]-e[1],d=n[2]-e[2],p=t[0]-e[0],g=t[1]-e[1],v=t[2]-e[2],_=l*v-d*g,b=d*p-o*v,w=o*g-l*p,E=Math.sqrt(_*_+b*b+w*w),S=E*.5,M=_/E,k=b/E,x=w/E,C=-(t[0]*M+t[1]*k+t[2]*x),P=i[0]*M+i[1]*k+i[2]*x;return Math.abs(P+C)*S/3}function Z3(t,e,n,i,o,l){const d=(n+i*e+o*e*e)*4;l[0]=t[d+0],l[1]=t[d+1],l[2]=t[d+2]}function umt(t,e,n,i,o,l){const d=n*(e-1),p=i*(e-1),g=o*(e-1),v=Math.floor(d),_=Math.floor(p),b=Math.floor(g),w=Math.ceil(d),E=Math.ceil(p),S=Math.ceil(g),M=d-v,k=p-_,x=g-b;if(v===d&&_===p&&b===g)Z3(t,e,d,p,g,l);else{let C;M>=k&&k>=x?C=Y_[0]:M>=x&&x>=k?C=Y_[1]:x>=M&&M>=k?C=Y_[2]:k>=M&&M>=x?C=Y_[3]:k>=x&&x>=M?C=Y_[4]:x>=k&&k>=M&&(C=Y_[5]);const[P,O,L,B]=C,V=Nle[0];V[0]=M,V[1]=k,V[2]=x;const G=Nle[1],j=w-v,F=E-_,q=S-b;G[0]=j*P[0]+v,G[1]=F*P[1]+_,G[2]=q*P[2]+b,Z3(t,e,G[0],G[1],G[2],vs[0]),G[0]=j*O[0]+v,G[1]=F*O[1]+_,G[2]=q*O[2]+b,Z3(t,e,G[0],G[1],G[2],vs[1]),G[0]=j*L[0]+v,G[1]=F*L[1]+_,G[2]=q*L[2]+b,Z3(t,e,G[0],G[1],G[2],vs[2]),G[0]=j*B[0]+v,G[1]=F*B[1]+_,G[2]=q*B[2]+b,Z3(t,e,G[0],G[1],G[2],vs[3]);const fe=eC(O,L,B,V)*6,ue=eC(P,L,B,V)*6,J=eC(P,O,B,V)*6,le=eC(P,O,L,V)*6;vs[0][0]*=fe,vs[0][1]*=fe,vs[0][2]*=fe,vs[1][0]*=ue,vs[1][1]*=ue,vs[1][2]*=ue,vs[2][0]*=J,vs[2][1]*=J,vs[2][2]*=J,vs[3][0]*=le,vs[3][1]*=le,vs[3][2]*=le,l[0]=vs[0][0]+vs[1][0]+vs[2][0]+vs[3][0],l[1]=vs[0][1]+vs[1][1]+vs[2][1]+vs[3][1],l[2]=vs[0][2]+vs[1][2]+vs[2][2]+vs[3][2]}}var fmt=class{static expand(t,e){const n=Math.cbrt(t.length/4),i=new Float32Array(3),o=new t.constructor(e**3*4),l=t instanceof Uint8Array?255:1,d=e**2,p=1/(e-1);for(let g=0;g<e;++g)for(let v=0;v<e;++v)for(let _=0;_<e;++_){const b=_*p,w=v*p,E=g*p,S=Math.round(_+v*e+g*d)*4;umt(t,n,b,w,E,i),o[S+0]=i[0],o[S+1]=i[1],o[S+2]=i[2],o[S+3]=l}return o}},x4=[new Float32Array(2),new Float32Array(2)],q_=16,ZV=20,X_=30,dmt=32,QV=new Float32Array([0,-.25,.25,-.125,.125,-.375,.375]),Lle=[new Float32Array([0,0]),new Float32Array([.25,-.25]),new Float32Array([-.25,.25]),new Float32Array([.125,-.125]),new Float32Array([-.125,.125])],hmt=[new Uint8Array([0,0]),new Uint8Array([3,0]),new Uint8Array([0,3]),new Uint8Array([3,3]),new Uint8Array([1,0]),new Uint8Array([4,0]),new Uint8Array([1,3]),new Uint8Array([4,3]),new Uint8Array([0,1]),new Uint8Array([3,1]),new Uint8Array([0,4]),new Uint8Array([3,4]),new Uint8Array([1,1]),new Uint8Array([4,1]),new Uint8Array([1,4]),new Uint8Array([4,4])],MAe=[new Uint8Array([0,0]),new Uint8Array([1,0]),new Uint8Array([0,2]),new Uint8Array([1,2]),new Uint8Array([2,0]),new Uint8Array([3,0]),new Uint8Array([2,2]),new Uint8Array([3,2]),new Uint8Array([0,1]),new Uint8Array([1,1]),new Uint8Array([0,3]),new Uint8Array([1,3]),new Uint8Array([2,1]),new Uint8Array([3,1]),new Uint8Array([2,3]),new Uint8Array([3,3])];function tC(t,e,n){return t+(e-t)*n}function pmt(t){return Math.min(Math.max(t,0),1)}function zle(t){const e=x4[0],n=x4[1],i=Math.sqrt(e[0]*2)*.5,o=Math.sqrt(e[1]*2)*.5,l=Math.sqrt(n[0]*2)*.5,d=Math.sqrt(n[1]*2)*.5,p=pmt(t/dmt);e[0]=tC(i,e[0],p),e[1]=tC(o,e[1],p),n[0]=tC(l,n[0],p),n[1]=tC(d,n[1],p)}function Uo(t,e,n,i,o,l){const d=n-t,p=i-e,g=o,v=o+1,_=e+p*(g-t)/d,b=e+p*(v-t)/d;if(g>=t&&g<n||v>t&&v<=n)if(Math.sign(_)===Math.sign(b)||Math.abs(_)<1e-4||Math.abs(b)<1e-4){const w=(_+b)/2;w<0?(l[0]=Math.abs(w),l[1]=0):(l[0]=0,l[1]=Math.abs(w))}else{const w=-e*d/p+t,E=Math.trunc(w),S=w>t?_*(w-E)/2:0,M=w<n?b*(1-(w-E))/2:0;(Math.abs(S)>Math.abs(M)?S:-M)<0?(l[0]=Math.abs(S),l[1]=Math.abs(M)):(l[0]=Math.abs(M),l[1]=Math.abs(S))}else l[0]=0,l[1]=0;return l}function mmt(t,e,n,i,o){const l=x4[0],d=x4[1],p=.5+i,g=.5+i-1,v=e+n+1;switch(t){case 0:{o[0]=0,o[1]=0;break}case 1:{e<=n?Uo(0,g,v/2,0,e,o):(o[0]=0,o[1]=0);break}case 2:{e>=n?Uo(v/2,0,v,g,e,o):(o[0]=0,o[1]=0);break}case 3:{Uo(0,g,v/2,0,e,l),Uo(v/2,0,v,g,e,d),zle(v),o[0]=l[0]+d[0],o[1]=l[1]+d[1];break}case 4:{e<=n?Uo(0,p,v/2,0,e,o):(o[0]=0,o[1]=0);break}case 5:{o[0]=0,o[1]=0;break}case 6:{Math.abs(i)>0?(Uo(0,p,v,g,e,l),Uo(0,p,v/2,0,e,d),Uo(v/2,0,v,g,e,o),d[0]=d[0]+o[0],d[1]=d[1]+o[1],o[0]=(l[0]+d[0])/2,o[1]=(l[1]+d[1])/2):Uo(0,p,v,g,e,o);break}case 7:{Uo(0,p,v,g,e,o);break}case 8:{e>=n?Uo(v/2,0,v,p,e,o):(o[0]=0,o[1]=0);break}case 9:{Math.abs(i)>0?(Uo(0,g,v,p,e,l),Uo(0,g,v/2,0,e,d),Uo(v/2,0,v,p,e,o),d[0]=d[0]+o[0],d[1]=d[1]+o[1],o[0]=(l[0]+d[0])/2,o[1]=(l[1]+d[1])/2):Uo(0,g,v,p,e,o);break}case 10:{o[0]=0,o[1]=0;break}case 11:{Uo(0,g,v,p,e,o);break}case 12:{Uo(0,p,v/2,0,e,l),Uo(v/2,0,v,p,e,d),zle(v),o[0]=l[0]+d[0],o[1]=l[1]+d[1];break}case 13:{Uo(0,g,v,p,e,o);break}case 14:{Uo(0,p,v,g,e,o);break}case 15:{o[0]=0,o[1]=0;break}}return o}function gmt(t,e,n,i,o,l){let d=t===n&&e===i;if(!d){const p=(t+n)/2,g=(e+i)/2,v=i-e,_=t-n;d=v*(o-p)+_*(l-g)>0}return d}function Ble(t,e,n,i,o,l){let d=0;for(let p=0;p<X_;++p)for(let g=0;g<X_;++g){const v=g/(X_-1),_=p/(X_-1);gmt(t,e,n,i,o+v,l+_)&&++d}return d/(X_*X_)}function ls(t,e,n,i,o,l,d,p){const g=MAe[t],v=g[0],_=g[1];return v>0&&(e+=d[0],n+=d[1]),_>0&&(i+=d[0],o+=d[1]),p[0]=1-Ble(e,n,i,o,1+l,0+l),p[1]=Ble(e,n,i,o,1+l,1+l),p}function vmt(t,e,n,i,o){const l=x4[0],d=x4[1],p=e+n+1;switch(t){case 0:{ls(t,1,1,1+p,1+p,e,i,l),ls(t,1,0,1+p,0+p,e,i,d),o[0]=(l[0]+d[0])/2,o[1]=(l[1]+d[1])/2;break}case 1:{ls(t,1,0,0+p,0+p,e,i,l),ls(t,1,0,1+p,0+p,e,i,d),o[0]=(l[0]+d[0])/2,o[1]=(l[1]+d[1])/2;break}case 2:{ls(t,0,0,1+p,0+p,e,i,l),ls(t,1,0,1+p,0+p,e,i,d),o[0]=(l[0]+d[0])/2,o[1]=(l[1]+d[1])/2;break}case 3:{ls(t,1,0,1+p,0+p,e,i,o);break}case 4:{ls(t,1,1,0+p,0+p,e,i,l),ls(t,1,1,1+p,0+p,e,i,d),o[0]=(l[0]+d[0])/2,o[1]=(l[1]+d[1])/2;break}case 5:{ls(t,1,1,0+p,0+p,e,i,l),ls(t,1,0,1+p,0+p,e,i,d),o[0]=(l[0]+d[0])/2,o[1]=(l[1]+d[1])/2;break}case 6:{ls(t,1,1,1+p,0+p,e,i,o);break}case 7:{ls(t,1,1,1+p,0+p,e,i,l),ls(t,1,0,1+p,0+p,e,i,d),o[0]=(l[0]+d[0])/2,o[1]=(l[1]+d[1])/2;break}case 8:{ls(t,0,0,1+p,1+p,e,i,l),ls(t,1,0,1+p,1+p,e,i,d),o[0]=(l[0]+d[0])/2,o[1]=(l[1]+d[1])/2;break}case 9:{ls(t,1,0,1+p,1+p,e,i,o),ls(t,1,0,1+p,1+p,e,i,o);break}case 10:{ls(t,0,0,1+p,1+p,e,i,l),ls(t,1,0,1+p,0+p,e,i,d),o[0]=(l[0]+d[0])/2,o[1]=(l[1]+d[1])/2;break}case 11:{ls(t,1,0,1+p,1+p,e,i,l),ls(t,1,0,1+p,0+p,e,i,d),o[0]=(l[0]+d[0])/2,o[1]=(l[1]+d[1])/2;break}case 12:{ls(t,1,1,1+p,1+p,e,i,o);break}case 13:{ls(t,1,1,1+p,1+p,e,i,l),ls(t,1,0,1+p,1+p,e,i,d),o[0]=(l[0]+d[0])/2,o[1]=(l[1]+d[1])/2;break}case 14:{ls(t,1,1,1+p,1+p,e,i,l),ls(t,1,1,1+p,0+p,e,i,d),o[0]=(l[0]+d[0])/2,o[1]=(l[1]+d[1])/2;break}case 15:{ls(t,1,1,1+p,1+p,e,i,l),ls(t,1,0,1+p,0+p,e,i,d),o[0]=(l[0]+d[0])/2,o[1]=(l[1]+d[1])/2;break}}return o}function Ule(t,e,n){const i=new Float32Array(2);for(let o=0,l=t.length;o<l;++o){const d=t[o],p=d.data,g=d.width;for(let v=0;v<g;++v)for(let _=0;_<g;++_){n?mmt(o,_,v,e,i):vmt(o,_,v,e,i);const b=(v*g+_)*2;p[b]=i[0]*255,p[b+1]=i[1]*255}}}function Fle(t,e,n,i,o,l,d){const p=d.data,g=d.width;for(let v=0,_=n.length;v<_;++v){const b=i[v],w=n[v],E=w.data,S=w.width;for(let M=0;M<o;++M)for(let k=0;k<o;++k){const x=b[0]*o+t+k,P=((b[1]*o+e+M)*g+x)*4,O=l?(M*M*S+k*k)*2:(M*S+k)*2;p[P]=E[O],p[P+1]=E[O+1],p[P+2]=0,p[P+3]=255}}}var _mt=class{static generate(){const t=10*q_,e=QV.length*5*q_,n=new Uint8ClampedArray(t*e*4),i=new sm(t,e,n),o=Math.pow(q_-1,2)+1,l=ZV,d=[],p=[];for(let g=3,v=n.length;g<v;g+=4)n[g]=255;for(let g=0;g<16;++g)d.push(new sm(o,o,new Uint8ClampedArray(o*o*2),2)),p.push(new sm(l,l,new Uint8ClampedArray(l*l*2),2));for(let g=0,v=QV.length;g<v;++g)Ule(d,QV[g],!0),Fle(0,5*q_*g,d,hmt,q_,!0,i);for(let g=0,v=Lle.length;g<v;++g)Ule(p,Lle[g],!1),Fle(5*q_,4*ZV*g,p,MAe,ZV,!1,i);return i}},ymt=se,bmt=`"use strict";(()=>{function q(t,a,s){let e=document.createElement("canvas"),n=e.getContext("2d");if(e.width=t,e.height=a,s instanceof Image)n.drawImage(s,0,0);else{let r=n.createImageData(t,a);r.data.set(s),n.putImageData(r,0,0)}return e}var F=class t{constructor(a=0,s=0,e=null){this.width=a,this.height=s,this.data=e}toCanvas(){return typeof document=="undefined"?null:q(this.width,this.height,this.data)}static from(a){let{width:s,height:e}=a,n;if(a instanceof Image){let r=q(s,e,a);r!==null&&(n=r.getContext("2d").getImageData(0,0,s,e).data)}else n=a.data;return new t(s,e,n)}};var M=[new Float32Array(2),new Float32Array(2)],D=16,W=20,I=30,j=32,v=new Float32Array([0,-.25,.25,-.125,.125,-.375,.375]),N=[new Float32Array([0,0]),new Float32Array([.25,-.25]),new Float32Array([-.25,.25]),new Float32Array([.125,-.125]),new Float32Array([-.125,.125])],z=[new Uint8Array([0,0]),new Uint8Array([3,0]),new Uint8Array([0,3]),new Uint8Array([3,3]),new Uint8Array([1,0]),new Uint8Array([4,0]),new Uint8Array([1,3]),new Uint8Array([4,3]),new Uint8Array([0,1]),new Uint8Array([3,1]),new Uint8Array([0,4]),new Uint8Array([3,4]),new Uint8Array([1,1]),new Uint8Array([4,1]),new Uint8Array([1,4]),new Uint8Array([4,4])],p=[new Uint8Array([0,0]),new Uint8Array([1,0]),new Uint8Array([0,2]),new Uint8Array([1,2]),new Uint8Array([2,0]),new Uint8Array([3,0]),new Uint8Array([2,2]),new Uint8Array([3,2]),new Uint8Array([0,1]),new Uint8Array([1,1]),new Uint8Array([0,3]),new Uint8Array([1,3]),new Uint8Array([2,1]),new Uint8Array([3,1]),new Uint8Array([2,3]),new Uint8Array([3,3])];function C(t,a,s){return t+(a-t)*s}function B(t){return Math.min(Math.max(t,0),1)}function _(t){let a=M[0],s=M[1],e=Math.sqrt(a[0]*2)*.5,n=Math.sqrt(a[1]*2)*.5,r=Math.sqrt(s[0]*2)*.5,o=Math.sqrt(s[1]*2)*.5,c=B(t/j);a[0]=C(e,a[0],c),a[1]=C(n,a[1],c),s[0]=C(r,s[0],c),s[1]=C(o,s[1],c)}function d(t,a,s,e,n,r){let o=s-t,c=e-a,h=n,i=n+1,w=a+c*(h-t)/o,b=a+c*(i-t)/o;if(h>=t&&h<s||i>t&&i<=s)if(Math.sign(w)===Math.sign(b)||Math.abs(w)<1e-4||Math.abs(b)<1e-4){let g=(w+b)/2;g<0?(r[0]=Math.abs(g),r[1]=0):(r[0]=0,r[1]=Math.abs(g))}else{let g=-a*o/c+t,k=Math.trunc(g),m=g>t?w*(g-k)/2:0,U=g<s?b*(1-(g-k))/2:0;(Math.abs(m)>Math.abs(U)?m:-U)<0?(r[0]=Math.abs(m),r[1]=Math.abs(U)):(r[0]=Math.abs(U),r[1]=Math.abs(m))}else r[0]=0,r[1]=0;return r}function J(t,a,s,e,n){let r=M[0],o=M[1],c=.5+e,h=.5+e-1,i=a+s+1;switch(t){case 0:{n[0]=0,n[1]=0;break}case 1:{a<=s?d(0,h,i/2,0,a,n):(n[0]=0,n[1]=0);break}case 2:{a>=s?d(i/2,0,i,h,a,n):(n[0]=0,n[1]=0);break}case 3:{d(0,h,i/2,0,a,r),d(i/2,0,i,h,a,o),_(i,M),n[0]=r[0]+o[0],n[1]=r[1]+o[1];break}case 4:{a<=s?d(0,c,i/2,0,a,n):(n[0]=0,n[1]=0);break}case 5:{n[0]=0,n[1]=0;break}case 6:{Math.abs(e)>0?(d(0,c,i,h,a,r),d(0,c,i/2,0,a,o),d(i/2,0,i,h,a,n),o[0]=o[0]+n[0],o[1]=o[1]+n[1],n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2):d(0,c,i,h,a,n);break}case 7:{d(0,c,i,h,a,n);break}case 8:{a>=s?d(i/2,0,i,c,a,n):(n[0]=0,n[1]=0);break}case 9:{Math.abs(e)>0?(d(0,h,i,c,a,r),d(0,h,i/2,0,a,o),d(i/2,0,i,c,a,n),o[0]=o[0]+n[0],o[1]=o[1]+n[1],n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2):d(0,h,i,c,a,n);break}case 10:{n[0]=0,n[1]=0;break}case 11:{d(0,h,i,c,a,n);break}case 12:{d(0,c,i/2,0,a,r),d(i/2,0,i,c,a,o),_(i,M),n[0]=r[0]+o[0],n[1]=r[1]+o[1];break}case 13:{d(0,h,i,c,a,n);break}case 14:{d(0,c,i,h,a,n);break}case 15:{n[0]=0,n[1]=0;break}}return n}function K(t,a,s,e,n,r){let o=t===s&&a===e;if(!o){let c=(t+s)/2,h=(a+e)/2,i=e-a,w=t-s;o=i*(n-c)+w*(r-h)>0}return o}function G(t,a,s,e,n,r){let o=0;for(let c=0;c<I;++c)for(let h=0;h<I;++h){let i=h/(I-1),w=c/(I-1);K(t,a,s,e,n+i,r+w)&&++o}return o/(I*I)}function A(t,a,s,e,n,r,o,c){let h=p[t],i=h[0],w=h[1];return i>0&&(a+=o[0],s+=o[1]),w>0&&(e+=o[0],n+=o[1]),c[0]=1-G(a,s,e,n,1+r,0+r),c[1]=G(a,s,e,n,1+r,1+r),c}function Q(t,a,s,e,n){let r=M[0],o=M[1],c=a+s+1;switch(t){case 0:{A(t,1,1,1+c,1+c,a,e,r),A(t,1,0,1+c,0+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 1:{A(t,1,0,0+c,0+c,a,e,r),A(t,1,0,1+c,0+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 2:{A(t,0,0,1+c,0+c,a,e,r),A(t,1,0,1+c,0+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 3:{A(t,1,0,1+c,0+c,a,e,n);break}case 4:{A(t,1,1,0+c,0+c,a,e,r),A(t,1,1,1+c,0+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 5:{A(t,1,1,0+c,0+c,a,e,r),A(t,1,0,1+c,0+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 6:{A(t,1,1,1+c,0+c,a,e,n);break}case 7:{A(t,1,1,1+c,0+c,a,e,r),A(t,1,0,1+c,0+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 8:{A(t,0,0,1+c,1+c,a,e,r),A(t,1,0,1+c,1+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 9:{A(t,1,0,1+c,1+c,a,e,n),A(t,1,0,1+c,1+c,a,e,n);break}case 10:{A(t,0,0,1+c,1+c,a,e,r),A(t,1,0,1+c,0+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 11:{A(t,1,0,1+c,1+c,a,e,r),A(t,1,0,1+c,0+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 12:{A(t,1,1,1+c,1+c,a,e,n);break}case 13:{A(t,1,1,1+c,1+c,a,e,r),A(t,1,0,1+c,1+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 14:{A(t,1,1,1+c,1+c,a,e,r),A(t,1,1,1+c,0+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}case 15:{A(t,1,1,1+c,1+c,a,e,r),A(t,1,0,1+c,0+c,a,e,o),n[0]=(r[0]+o[0])/2,n[1]=(r[1]+o[1])/2;break}}return n}function R(t,a,s){let e=new Float32Array(2);for(let n=0,r=t.length;n<r;++n){let o=t[n],c=o.data,h=o.width;for(let i=0;i<h;++i)for(let w=0;w<h;++w){s?J(n,w,i,a,e):Q(n,w,i,a,e);let b=(i*h+w)*2;c[b]=e[0]*255,c[b+1]=e[1]*255}}}function T(t,a,s,e,n,r,o){let c=o.data,h=o.width;for(let i=0,w=s.length;i<w;++i){let b=e[i],g=s[i],k=g.data,m=g.width;for(let U=0;U<n;++U)for(let x=0;x<n;++x){let Z=b[0]*n+t+x,O=((b[1]*n+a+U)*h+Z)*4,L=r?(U*U*m+x*x)*2:(U*m+x)*2;c[O]=k[L],c[O+1]=k[L+1],c[O+2]=0,c[O+3]=255}}}var S=class{static generate(){let a=10*D,s=v.length*5*D,e=new Uint8ClampedArray(a*s*4),n=new F(a,s,e),r=Math.pow(D-1,2)+1,o=W,c=[],h=[];for(let i=3,w=e.length;i<w;i+=4)e[i]=255;for(let i=0;i<16;++i)c.push(new F(r,r,new Uint8ClampedArray(r*r*2),2)),h.push(new F(o,o,new Uint8ClampedArray(o*o*2),2));for(let i=0,w=v.length;i<w;++i)R(c,v[i],!0),T(0,5*D*i,c,z,D,!0,n);for(let i=0,w=N.length;i<w;++i)R(h,N[i],!1),T(5*D,4*W*i,h,p,W,!1,n);return n}};var P=new Map([[y(0,0,0,0),new Float32Array([0,0,0,0])],[y(0,0,0,1),new Float32Array([0,0,0,1])],[y(0,0,1,0),new Float32Array([0,0,1,0])],[y(0,0,1,1),new Float32Array([0,0,1,1])],[y(0,1,0,0),new Float32Array([0,1,0,0])],[y(0,1,0,1),new Float32Array([0,1,0,1])],[y(0,1,1,0),new Float32Array([0,1,1,0])],[y(0,1,1,1),new Float32Array([0,1,1,1])],[y(1,0,0,0),new Float32Array([1,0,0,0])],[y(1,0,0,1),new Float32Array([1,0,0,1])],[y(1,0,1,0),new Float32Array([1,0,1,0])],[y(1,0,1,1),new Float32Array([1,0,1,1])],[y(1,1,0,0),new Float32Array([1,1,0,0])],[y(1,1,0,1),new Float32Array([1,1,0,1])],[y(1,1,1,0),new Float32Array([1,1,1,0])],[y(1,1,1,1),new Float32Array([1,1,1,1])]]);function H(t,a,s){return t+(a-t)*s}function y(t,a,s,e){let n=H(t,a,.75),r=H(s,e,1-.25);return H(n,r,1-.125)}function V(t,a){let s=0;return a[3]===1&&(s+=1),s===1&&a[2]===1&&t[1]!==1&&t[3]!==1&&(s+=1),s}function $(t,a){let s=0;return a[3]===1&&t[1]!==1&&t[3]!==1&&(s+=1),s===1&&a[2]===1&&t[0]!==1&&t[2]!==1&&(s+=1),s}var E=class{static generate(){let o=new Uint8ClampedArray(2178),c=new Uint8ClampedArray(64*16*4);for(let h=0;h<33;++h)for(let i=0;i<66;++i){let w=.03125*i,b=.03125*h;if(P.has(w)&&P.has(b)){let g=P.get(w),k=P.get(b),m=h*66+i;o[m]=127*V(g,k),o[m+33]=127*$(g,k)}}for(let h=0,i=17;i<33;++i)for(let w=0;w<64;++w,h+=4)c[h]=o[i*66+w],c[h+3]=255;return new F(64,16,c)}};self.addEventListener("message",t=>{let a=S.generate(),s=E.generate();postMessage({areaImageData:a,searchImageData:s},[a.data.buffer,s.data.buffer]),close()});})();
`;function Amt(t=!0){const e=URL.createObjectURL(new Blob([bmt],{type:"text/javascript"})),n=new Worker(e);return URL.revokeObjectURL(e),new Promise((i,o)=>{n.addEventListener("error",l=>o(l.error)),n.addEventListener("message",l=>{const d=sm.from(l.data.searchImageData),p=sm.from(l.data.areaImageData),g=[d.toCanvas().toDataURL("image/png",1),p.toCanvas().toDataURL("image/png",1)];t&&(localStorage.setItem("smaa-search",g[0]),localStorage.setItem("smaa-area",g[1])),i(g)}),n.postMessage(null)})}var wmt=class{constructor(){this.disableCache=!1}setCacheEnabled(t){this.disableCache=!t}generate(){const t=!this.disableCache&&window.localStorage!==void 0,e=t?[localStorage.getItem("smaa-search"),localStorage.getItem("smaa-area")]:[null,null];return(e[0]!==null&&e[1]!==null?Promise.resolve(e):Amt(t)).then(i=>new Promise((o,l)=>{const d=new Image,p=new Image,g=new ymt.LoadingManager;g.onLoad=()=>o([d,p]),g.onError=l,d.addEventListener("error",v=>g.itemError("smaa-search")),p.addEventListener("error",v=>g.itemError("smaa-area")),d.addEventListener("load",()=>g.itemEnd("smaa-search")),p.addEventListener("load",()=>g.itemEnd("smaa-area")),g.itemStart("smaa-search"),g.itemStart("smaa-area"),d.src=i[0],p.src=i[1]}))}},nC=new Map([[yl(0,0,0,0),new Float32Array([0,0,0,0])],[yl(0,0,0,1),new Float32Array([0,0,0,1])],[yl(0,0,1,0),new Float32Array([0,0,1,0])],[yl(0,0,1,1),new Float32Array([0,0,1,1])],[yl(0,1,0,0),new Float32Array([0,1,0,0])],[yl(0,1,0,1),new Float32Array([0,1,0,1])],[yl(0,1,1,0),new Float32Array([0,1,1,0])],[yl(0,1,1,1),new Float32Array([0,1,1,1])],[yl(1,0,0,0),new Float32Array([1,0,0,0])],[yl(1,0,0,1),new Float32Array([1,0,0,1])],[yl(1,0,1,0),new Float32Array([1,0,1,0])],[yl(1,0,1,1),new Float32Array([1,0,1,1])],[yl(1,1,0,0),new Float32Array([1,1,0,0])],[yl(1,1,0,1),new Float32Array([1,1,0,1])],[yl(1,1,1,0),new Float32Array([1,1,1,0])],[yl(1,1,1,1),new Float32Array([1,1,1,1])]]);function KV(t,e,n){return t+(e-t)*n}function yl(t,e,n,i){const o=KV(t,e,.75),l=KV(n,i,1-.25);return KV(o,l,1-.125)}function Emt(t,e){let n=0;return e[3]===1&&(n+=1),n===1&&e[2]===1&&t[1]!==1&&t[3]!==1&&(n+=1),n}function Smt(t,e){let n=0;return e[3]===1&&t[1]!==1&&t[3]!==1&&(n+=1),n===1&&e[2]===1&&t[0]!==1&&t[2]!==1&&(n+=1),n}var Tmt=class{static generate(){const l=new Uint8ClampedArray(2178),d=new Uint8ClampedArray(64*16*4);for(let p=0;p<33;++p)for(let g=0;g<66;++g){const v=.03125*g,_=.03125*p;if(nC.has(v)&&nC.has(_)){const b=nC.get(v),w=nC.get(_),E=p*66+g;l[E]=127*Emt(b,w),l[E+33]=127*Smt(b,w)}}for(let p=0,g=17;g<33;++g)for(let v=0;v<64;++v,p+=4)d[p]=l[g*66+v],d[p+3]=255;return new sm(64,16,d)}},BL={},xmt=X&&X.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,o)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),Mmt=X&&X.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),kmt=X&&X.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&xmt(e,t,n);return Mmt(e,t),e};Object.defineProperty(BL,"__esModule",{value:!0});BL.GodRaysManager=void 0;const JV=kmt(se);class Cmt{constructor(e){this._renderingEngine=e,this._lightSource=null}removeLightSource(){this._godRaysEffect.lightSource=new JV.Mesh}setEffect(e){this._godRaysEffect=e,this._godRaysEffect.lightSource=this._lightSource}setLightSource(e){this._lightSource=null,e.convertedObject[this._renderingEngine.id].traverse(n=>{(n instanceof JV.Mesh||n instanceof JV.Points)&&(this._lightSource=n)}),this._lightSource&&(Array.isArray(this._lightSource.material)?(this._lightSource.material.forEach(n=>n.transparent=!0),this._lightSource.material.forEach(n=>n.depthWrite=!1)):(this._lightSource.material.transparent=!0,this._lightSource.material.depthWrite=!1)),this._godRaysEffect.lightSource=this._lightSource}}BL.GodRaysManager=Cmt;var fK={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.ANTI_ALIASING_TECHNIQUE=t.POST_PROCESSING_EFFECT_TYPE=void 0,function(e){e.BLOOM="bloom",e.CHROMATIC_ABERRATION="chromatic_aberration",e.DEPTH_OF_FIELD="depth_of_field",e.DOT_SCREEN="dot_screen",e.GOD_RAYS="god_rays",e.GRID="grid",e.HBAO="hbao",e.HUE_SATURATION="hue_saturation",e.NOISE="noise",e.OUTLINE="outline",e.PIXELATION="pixelation",e.SSAO="ssao",e.SCANLINE="scanline",e.SELECTIVE_BLOOM="selective_bloom",e.SEPIA="sepia",e.TILT_SHIFT="tilt_shift",e.VIGNETTE="vignette"}(t.POST_PROCESSING_EFFECT_TYPE||(t.POST_PROCESSING_EFFECT_TYPE={})),function(e){e.FXAA="fxaa",e.NONE="none",e.SMAA="smaa",e.SSAA="ssaa"}(t.ANTI_ALIASING_TECHNIQUE||(t.ANTI_ALIASING_TECHNIQUE={}))})(fK);var UL={},Pmt=X&&X.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,o)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),Rmt=X&&X.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Dmt=X&&X.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Pmt(e,t,n);return Rmt(e,t),e};Object.defineProperty(UL,"__esModule",{value:!0});UL.OutlineManager=void 0;const Omt=Dmt(se);class Imt{constructor(e){this._renderingEngine=e,this._outlineNodes=[]}addSelection(e){this._outlineNodes.push(e),this.updateOutlineEffectObjects()}clearSelection(){this._outlineNodes=[],this.updateOutlineEffectObjects()}removeSelection(e){const n=this._outlineNodes.indexOf(e);return n!==-1&&this._outlineNodes.splice(n,1),this.updateOutlineEffectObjects(),n!==-1}setEffect(e){this._outlineEffect=e,this.updateOutlineEffectObjects()}updateOutlineEffectObjects(){this._outlineEffect.selection.clear();for(let e=0;e<this._outlineNodes.length;e++)this._outlineNodes[e].convertedObject[this._renderingEngine.id].traverse(n=>{n instanceof Omt.Mesh&&this._outlineEffect.selection.add(n)})}}UL.OutlineManager=Imt;var FL={},Nmt=X&&X.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,o)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),Lmt=X&&X.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),zmt=X&&X.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Nmt(e,t,n);return Lmt(e,t),e};Object.defineProperty(FL,"__esModule",{value:!0});FL.SelectiveBloomManager=void 0;const Bmt=zmt(se);class Umt{constructor(e){this._renderingEngine=e,this._selectiveBloomNodes=[]}addSelection(e){this._selectiveBloomNodes.push(e),this.updateSelectiveBloomEffectObjects()}clearSelection(){this._selectiveBloomNodes=[],this.updateSelectiveBloomEffectObjects()}removeSelection(e){const n=this._selectiveBloomNodes.indexOf(e);return n!==-1&&this._selectiveBloomNodes.splice(n,1),this.updateSelectiveBloomEffectObjects(),n!==-1}setEffect(e){this._selectiveBloomEffect=e,this.updateSelectiveBloomEffectObjects()}updateSelectiveBloomEffectObjects(){this._selectiveBloomEffect.selection.clear();for(let e=0;e<this._selectiveBloomNodes.length;e++)this._selectiveBloomNodes[e].convertedObject[this._renderingEngine.id].traverse(n=>{n instanceof Bmt.Mesh&&this._selectiveBloomEffect.selection.add(n)})}}FL.SelectiveBloomManager=Umt;var VL={},GL={};Object.defineProperty(GL,"__esModule",{value:!0});GL.CopyShader=void 0;GL.CopyShader={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform float opacity;

		uniform sampler2D tDiffuse;

		varying vec2 vUv;

		void main() {

			gl_FragColor = texture2D( tDiffuse, vUv );
			gl_FragColor.a *= opacity;


		}`};var jL={};Object.defineProperty(jL,"__esModule",{value:!0});jL.FullScreenQuad=void 0;const Nx=se,Fmt=new Nx.OrthographicCamera(-1,1,1,-1,0,1),dK=new Nx.BufferGeometry;dK.setAttribute("position",new Nx.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3));dK.setAttribute("uv",new Nx.Float32BufferAttribute([0,2,0,0,2,0],2));class Vmt{constructor(e){this._mesh=new Nx.Mesh(dK,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,Fmt)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}jL.FullScreenQuad=Vmt;var HL={};Object.defineProperty(HL,"__esModule",{value:!0});HL.CopyMaterial=void 0;const L1=se,Gmt=`
varying vec2 vUv;

void main() {

	vUv = position.xy * 0.5 + 0.5;
	gl_Position = vec4(position.xy, 1.0, 1.0);

}
`,jmt=`
#include <common>
#include <dithering_pars_fragment>

#ifdef FRAMEBUFFER_PRECISION_HIGH

	uniform mediump sampler2D inputBuffer;

#else

	uniform lowp sampler2D inputBuffer;

#endif

uniform float opacity;

varying vec2 vUv;

void main() {

	vec4 texel = texture2D(inputBuffer, vUv);
	gl_FragColor = opacity * texel;

	#include <encodings_fragment>
	#include <dithering_fragment>

}
`;class Hmt extends L1.ShaderMaterial{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new L1.Uniform(null),opacity:new L1.Uniform(1)},blending:L1.CustomBlending,blendEquation:L1.AddEquation,blendDst:L1.ZeroFactor,blendSrc:L1.OneFactor,toneMapped:!1,depthWrite:!1,depthTest:!1,transparent:!0,fragmentShader:jmt,vertexShader:Gmt})}set inputBuffer(e){this.uniforms.inputBuffer.value=e}setInputBuffer(e){this.uniforms.inputBuffer.value=e}getOpacity(e){return this.uniforms.opacity.value}setOpacity(e){this.uniforms.opacity.value=e}}HL.CopyMaterial=Hmt;Object.defineProperty(VL,"__esModule",{value:!0});VL.SSAARenderPass=void 0;const Vle=Lm,_a=se,$mt=GL,Wmt=jL,Ymt=HL;let Q3=null;const qmt=()=>{if(Q3===null){const t=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]);Q3=new _a.BufferGeometry,Q3.setAttribute("position",new _a.BufferAttribute(t,3)),Q3.setAttribute("uv",new _a.BufferAttribute(e,2))}return Q3};class Xmt extends Vle.Pass{constructor(e,n){super("SSAARenderPass",e,n),this._clearColor=new _a.Color,this._oldClearColor=new _a.Color,this._sampleLevel=2,this._unbiased=!0,this.needsSwap=!1,this._sampleRenderTarget=new _a.WebGLRenderTarget(1,1,{type:_a.HalfFloatType}),this._sampleRenderTarget.texture.name="SSAARender.Target",this._sampleRenderTarget.texture.colorSpace=_a.SRGBColorSpace;const i=$mt.CopyShader;this._copyUniforms=_a.UniformsUtils.clone(i.uniforms),this._ssaaCopyMaterial=new _a.ShaderMaterial({uniforms:this._copyUniforms,vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blending:_a.CustomBlending,blendEquation:_a.AddEquation,blendDst:_a.OneFactor,blendDstAlpha:_a.OneFactor,blendSrc:_a.SrcAlphaFactor,blendSrcAlpha:_a.OneFactor}),this._fsQuad=new Wmt.FullScreenQuad(this._ssaaCopyMaterial),this._copyMaterial=new Ymt.CopyMaterial,this._fullScreen=new _a.Mesh(qmt(),this._copyMaterial),this._fullScreen.frustumCulled=!1,this._clearPass=new Vle.ClearPass(!0,!0,!1)}set mainCamera(e){this.camera=e}set mainScene(e){this.scene=e}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e}get sampleLevel(){return this._sampleLevel}set sampleLevel(e){this._sampleLevel=e}set unbiased(e){this._unbiased=e}dispose(){this._sampleRenderTarget.dispose(),this._ssaaCopyMaterial.dispose(),this._fsQuad.dispose()}render(e,n,i,o,l){this._clearColor=e.getClearColor(new _a.Color),this._clearAlpha=e.getClearAlpha(),this._sampleRenderTarget.texture.colorSpace=e.outputColorSpace;const d=Zmt[Math.max(0,Math.min(this._sampleLevel,5))],p=e.autoClear;e.autoClear=!1,e.getClearColor(this._oldClearColor);const g=e.getClearAlpha(),v=1/d.length,_=1/32;this._copyUniforms.tDiffuse.value=this._sampleRenderTarget.texture;const b={fullWidth:n.width,fullHeight:n.height,offsetX:0,offsetY:0,width:n.width,height:n.height},w=Object.assign({},this.camera.view);w.enabled&&Object.assign(b,w);for(let E=0;E<d.length;E++){const S=d[E];this.camera.setViewOffset&&this.camera.setViewOffset(b.fullWidth,b.fullHeight,b.offsetX+S[0]*.0625,b.offsetY+S[1]*.0625,b.width,b.height);let M=v;if(this._unbiased){const k=-.5+(E+.5)/d.length;M+=_*k}e.setClearColor(this._clearColor,this._clearAlpha),e.setRenderTarget(this._sampleRenderTarget),e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(this.renderToScreen?null:i),E===0&&(e.setClearColor(0,0),e.clear()),this._copyUniforms.opacity.value=M,this._fsQuad.render(e)}this._clearPass.render(e,n,n),this._copyMaterial.uniforms.inputBuffer.value=i.texture,this._copyMaterial.uniforms.opacity.value=1,e.setRenderTarget(this.renderToScreen?null:n),this.scene.add(this._fullScreen),e.render(this.scene,this.camera),this.scene.remove(this._fullScreen),this.camera.setViewOffset&&w.enabled?this.camera.setViewOffset(w.fullWidth,w.fullHeight,w.offsetX,w.offsetY,w.width,w.height):this.camera.clearViewOffset&&this.camera.clearViewOffset(),e.autoClear=p,e.setClearColor(this._oldClearColor,g)}setSize(e,n){this._sampleRenderTarget.setSize(e,n)}}VL.SSAARenderPass=Xmt;const Zmt=[[[0,0]],[[4,4],[-4,-4]],[[-2,-6],[6,-2],[-6,2],[2,6]],[[1,-3],[-1,3],[5,1],[-3,-5],[-5,5],[-7,-1],[3,7],[7,-7]],[[1,1],[-1,-3],[-3,2],[4,-1],[-5,-2],[2,5],[5,3],[3,-5],[-2,6],[0,-7],[-4,-6],[-6,4],[-8,0],[7,-4],[6,7],[-7,-8]],[[-4,-7],[-7,-5],[-3,-5],[-5,-4],[-1,-4],[-2,-2],[-6,-1],[-4,0],[-7,1],[-1,2],[-6,3],[-3,3],[-7,6],[-3,6],[-5,7],[-1,7],[5,-7],[1,-6],[6,-5],[4,-4],[2,-3],[7,-2],[1,-1],[4,-1],[2,1],[6,2],[0,4],[4,4],[2,5],[7,5],[5,6],[3,7]]];var $L={},Lx={},zx={},Bx={};Object.defineProperty(Bx,"__esModule",{value:!0});Bx.basic=void 0;Bx.basic=`
varying vec2 vUv;

void main() {
    vUv = position.xy * 0.5 + 0.5;
    gl_Position = vec4(position.xy, 1.0, 1.0);
}
`;var Ux={};Object.defineProperty(Ux,"__esModule",{value:!0});Ux.sampleBlueNoise=void 0;Ux.sampleBlueNoise=`
const float g = 1.6180339887498948482;
const float a1 = 1.0 / g;

// reference: https://extremelearning.com.au/unreasonable-effectiveness-of-quasirandom-sequences/
float r1(float n) {
    // 7th harmonious number
    return fract(1.1127756842787055 + a1 * n);
}

const vec4 hn = vec4(0.618033988749895, 0.3247179572447458, 0.2207440846057596, 0.1673039782614187);

vec4 sampleBlueNoise(sampler2D texture, int seed, vec2 repeat, vec2 texSize) {
    vec2 size = vUv * texSize;
    vec2 blueNoiseSize = texSize / repeat;
    float blueNoiseIndex = floor(floor(size.y / blueNoiseSize.y) * repeat.x) + floor(size.x / blueNoiseSize.x);

    // get the offset of this pixel's blue noise tile
    // int blueNoiseTileOffset = int(r1(blueNoiseIndex + 1.0) * 65536.);

    vec2 blueNoiseUv = vUv * repeat;

    // fetch blue noise for this pixel
    vec4 blueNoise = textureLod(texture, blueNoiseUv, 0.);

    // animate blue noise
    if (seed != 0) {
        blueNoise = fract(blueNoise + hn * float(seed));

        blueNoise.r = (blueNoise.r > 0.5 ? 1.0 - blueNoise.r : blueNoise.r) * 2.0;
        blueNoise.g = (blueNoise.g > 0.5 ? 1.0 - blueNoise.g : blueNoise.g) * 2.0;
        blueNoise.b = (blueNoise.b > 0.5 ? 1.0 - blueNoise.b : blueNoise.b) * 2.0;
        blueNoise.a = (blueNoise.a > 0.5 ? 1.0 - blueNoise.a : blueNoise.a) * 2.0;
    }

    return blueNoise;
}
`;var WL={};Object.defineProperty(WL,"__esModule",{value:!0});WL.poissionDenoise=void 0;WL.poissionDenoise=`
varying vec2 vUv;

uniform sampler2D inputTexture;
uniform highp sampler2D depthTexture;
uniform sampler2D normalTexture;
uniform mat4 projectionMatrixInverse;
uniform mat4 cameraMatrixWorld;
uniform float lumaPhi;
uniform float depthPhi;
uniform float normalPhi;
uniform float distance;
uniform sampler2D blueNoiseTexture;
uniform vec2 blueNoiseRepeat;
uniform int index;
uniform vec2 resolution;

#include <common>
#include <sampleBlueNoise>

vec3 getWorldPos(float depth, vec2 coord) {
    float z = depth * 2.0 - 1.0;
    vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);
    vec4 viewSpacePosition = projectionMatrixInverse * clipSpacePosition;

    // Perspective division
    vec4 worldSpacePosition = cameraMatrixWorld * viewSpacePosition;
    worldSpacePosition.xyz /= worldSpacePosition.w;
    return worldSpacePosition.xyz;
}

#define luminance(a) dot(vec3(0.2125, 0.7154, 0.0721), a)

vec3 getNormal(vec2 uv, vec4 texel) {
#ifdef NORMAL_IN_RGB
    // in case the normal is stored in the RGB channels of the texture
    return texel.rgb;
#else
    return normalize(textureLod(normalTexture, uv, 0.).xyz * 2.0 - 1.0);
#endif
}

float distToPlane(const vec3 worldPos, const vec3 neighborWorldPos, const vec3 worldNormal) {
    vec3 toCurrent = worldPos - neighborWorldPos;
    float distToPlane = abs(dot(toCurrent, worldNormal));

    return distToPlane;
}

void main() {
    vec4 depthTexel = textureLod(depthTexture, vUv, 0.);

    if (depthTexel.r == 1.0 || dot(depthTexel.rgb, depthTexel.rgb) == 0.) {
        discard;
        return;
    }

    vec4 texel = textureLod(inputTexture, vUv, 0.0);

    vec3 normal = getNormal(vUv, texel);

#ifdef NORMAL_IN_RGB
    float denoised = texel.a;
    float center = texel.a;
#else
    vec3 denoised = texel.rgb;
    vec3 center = texel.rgb;
#endif

    float depth = depthTexel.x;
    vec3 worldPos = getWorldPos(depth, vUv);

    float totalWeight = 1.0;

    vec4 blueNoise = sampleBlueNoise(blueNoiseTexture, 0, blueNoiseRepeat, resolution);
    float angle = blueNoise[index];

    float s = sin(angle), c = cos(angle);

    mat2 rotationMatrix = mat2(c, -s, s, c);

    for (int i = 0; i < samples; i++) {
        vec2 offset = rotationMatrix * poissonDisk[i];
        vec2 neighborUv = vUv + offset;

        vec4 neighborTexel = textureLod(inputTexture, neighborUv, 0.0);

        vec3 neighborNormal = getNormal(neighborUv, neighborTexel);
#ifdef NORMAL_IN_RGB
        float neighborColor = neighborTexel.a;
#else
        vec3 neighborColor = neighborTexel.rgb;
#endif

        float sampleDepth = textureLod(depthTexture, neighborUv, 0.0).x;

        vec3 worldPosSample = getWorldPos(sampleDepth, neighborUv);
        float tangentPlaneDist = abs(dot(worldPos - worldPosSample, normal));

        float normalDiff = dot(normal, neighborNormal);
        float normalSimilarity = pow(max(normalDiff, 0.), normalPhi);

#ifdef NORMAL_IN_RGB
        float lumaDiff = abs(neighborColor - center);
#else
        float lumaDiff = abs(luminance(neighborColor) - luminance(center));
#endif
        float lumaSimilarity = max(1.0 - lumaDiff / lumaPhi, 0.0);

        float depthDiff = 1. - (distToPlane(worldPos, worldPosSample, normal) / distance);
        float depthSimilarity = max(depthDiff / depthPhi, 0.);

        float w = lumaSimilarity * depthSimilarity * normalSimilarity;

        denoised += w * neighborColor;
        totalWeight += w;
    }

    if (totalWeight > 0.) denoised /= totalWeight;

#ifdef NORMAL_IN_RGB
    gl_FragColor = vec4(normal, denoised);
#else
    gl_FragColor = vec4(denoised, 1.);
#endif
}
`;Object.defineProperty(zx,"__esModule",{value:!0});zx.PoissionDenoisePass=void 0;const Qmt=Lm,bl=se,Kmt=Bx,Jmt=Ux,e1t=WL,kAe=Mn,Gle=e1t.poissionDenoise.replace("#include <sampleBlueNoise>",Jmt.sampleBlueNoise),gD={iterations:1,radius:8,rings:5.625,lumaPhi:10,depthPhi:2,normalPhi:3.25,samples:16,distance:1,normalTexture:null};class vu extends Qmt.Pass{constructor(e,n,i,o=gD){super("PoissionBlurPass"),this.index=0,this.iterations=gD.iterations,this.radius=8,this.rings=5.625,this.samples=16,vu.blueNoiseTexture||vu.blueNoiseTextureImage.then(p=>{kAe.Converter.instance.responseToImage(p).then(g=>{vu.blueNoiseTexture=new bl.Texture(g),vu.blueNoiseTexture.minFilter=bl.NearestFilter,vu.blueNoiseTexture.magFilter=bl.NearestFilter,vu.blueNoiseTexture.wrapS=bl.RepeatWrapping,vu.blueNoiseTexture.wrapT=bl.RepeatWrapping,vu.blueNoiseTexture.colorSpace=bl.NoColorSpace})}),o=Object.assign(Object.assign({},gD),o),this.inputTexture=n,this.fullscreenMaterial=new bl.ShaderMaterial({fragmentShader:Gle,vertexShader:Kmt.basic,uniforms:{depthTexture:{value:null},inputTexture:{value:null},projectionMatrixInverse:{value:new bl.Matrix4},cameraMatrixWorld:{value:new bl.Matrix4},lumaPhi:{value:5},depthPhi:{value:5},normalPhi:{value:5},distance:{value:1},resolution:{value:new bl.Vector2},blueNoiseTexture:{value:null},index:{value:0},blueNoiseRepeat:{value:new bl.Vector2}}});const l={type:bl.HalfFloatType,depthBuffer:!1};this.renderTargetA=new bl.WebGLRenderTarget(1,1,l),this.renderTargetB=new bl.WebGLRenderTarget(1,1,l);const{uniforms:d}=this.fullscreenMaterial;d.inputTexture.value=this.inputTexture,d.depthTexture.value=i,d.projectionMatrixInverse.value=e.projectionMatrixInverse,d.cameraMatrixWorld.value=e.matrixWorld,d.depthPhi.value=o.depthPhi,d.normalPhi.value=o.normalPhi,d.distance.value=o.distance,o.normalTexture?d.normalTexture={value:o.normalTexture}:this.fullscreenMaterial.defines.NORMAL_IN_RGB="";for(const p of["radius","rings","samples"])Object.defineProperty(this,p,{get:()=>o[p],set:g=>{o[p]=g,this.setSize(this.renderTargetA.width,this.renderTargetA.height)}});this.fullscreenMaterial.uniforms.blueNoiseTexture.value=vu.blueNoiseTexture}get texture(){return this.renderTargetB.texture}generateDenoiseSamples(e,n,i,o){const l=2*Math.PI*n/e,d=1/e,p=d,g=[];let v=d,_=0;for(let b=0;b<e;b++){const w=new bl.Vector2(Math.cos(_),Math.sin(_)).multiplyScalar(Math.pow(v,.75)).multiply(o).multiplyScalar(i);(isNaN(w.x)||w.x===1/0||w.x===-1/0)&&(w.x=0),(isNaN(w.y)||w.y===1/0||w.y===-1/0)&&(w.y=0),g.push(w),v+=p,_+=l}return g}generatePoissonDiskConstant(e){const n=e.length;let i=`const vec2 poissonDisk[samples] = vec2[samples](
`;for(let o=0;o<n;o++){const l=e[o];i+=`    vec2(${l.x}, ${l.y})`,o<n-1&&(i+=","),i+=`
`}return i+=");",i}render(e){this.fullscreenMaterial.uniforms.index.value=0;const n=this.fullscreenMaterial.uniforms.blueNoiseTexture.value;if(n){const{width:i,height:o}=n.source.data;this.fullscreenMaterial.uniforms.blueNoiseRepeat.value.set(this.renderTargetA.width/i,this.renderTargetA.height/o)}for(let i=0;i<2*this.iterations;i++){const o=i%2===0,l=o?this.renderTargetB:this.renderTargetA;this.fullscreenMaterial.uniforms.inputTexture.value=i===0?this.inputTexture:l.texture;const d=o?this.renderTargetA:this.renderTargetB;e.setRenderTarget(d),e.render(this.scene,this.camera),this.fullscreenMaterial.uniforms.index.value=(this.fullscreenMaterial.uniforms.index.value+1)%4}}setSize(e,n){this.renderTargetA.setSize(e,n),this.renderTargetB.setSize(e,n),this.fullscreenMaterial.uniforms.resolution.value.set(e,n);const i=this.generateDenoiseSamples(this.samples,this.rings,this.radius,new bl.Vector2(1/e,1/n)),o=`const int samples = ${this.samples};
`,l=this.generatePoissonDiskConstant(i);this.fullscreenMaterial.fragmentShader=o+l+`
`+Gle,this.fullscreenMaterial.needsUpdate=!0}}zx.PoissionDenoisePass=vu;vu.DefaultOptions=gD;vu.blueNoiseTextureImage=kAe.HttpClient.instance.loadTexture("https://viewer.shapediver.com/v3/graphics/LDR_RGBA_0.png");var YL={};Object.defineProperty(YL,"__esModule",{value:!0});YL.ao_compose=void 0;YL.ao_compose=`
uniform sampler2D inputTexture;
uniform highp sampler2D depthTexture;
uniform float power;
uniform vec3 color;

void mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {
    float unpackedDepth = textureLod(depthTexture, uv, 0.).r;

    float ao = unpackedDepth > 0.9999 ? 1.0 : textureLod(inputTexture, uv, 0.0).a;
    ao = pow(ao, power);

    vec3 aoColor = mix(color, vec3(1.), ao);

    aoColor *= inputColor.rgb;

    outputColor = vec4(aoColor, inputColor.a);
}
`;var qL={},XL={};Object.defineProperty(XL,"__esModule",{value:!0});XL.RenderPass=void 0;const rC=Lm,Z_=se,t1t=wA;class n1t extends rC.Pass{constructor(e,n,i=null){super("RenderPass",e,n),this.needsSwap=!1,this.clearPass=new rC.ClearPass,this.overrideMaterialManager=i===null?null:new rC.OverrideMaterialManager(i),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(e){this.scene=e}set mainCamera(e){this.camera=e}get renderToScreen(){return super.renderToScreen}set renderToScreen(e){super.renderToScreen=e,this.clearPass.renderToScreen=e}get overrideMaterial(){const e=this.overrideMaterialManager;return e!==null?e.material:null}set overrideMaterial(e){const n=this.overrideMaterialManager;e!==null?n!==null?n.setMaterial(e):this.overrideMaterialManager=new rC.OverrideMaterialManager(e):n!==null&&(n.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(e){this.overrideMaterial=e}get clear(){return this.clearPass.enabled}set clear(e){this.clearPass.enabled=e}getSelection(){return this.selection}setSelection(e){this.selection=e}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(e){this.ignoreBackground=e}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(e){this.skipShadowMapUpdate=e}getClearPass(){return this.clearPass}render(e,n,i,o,l){const d=[];this.scene.traverse(function(S){S.visible===!0&&(S instanceof Z_.Mesh&&S.material&&S.material instanceof Z_.MeshPhysicalMaterial&&!(S.material instanceof t1t.GemMaterial)&&S.material.transparent&&(d.push(S),S.visible=!1),(S instanceof Z_.Line||S instanceof Z_.LineLoop||S instanceof Z_.LineSegments||S instanceof Z_.Points)&&(d.push(S),S.visible=!1),S.userData.ambientOcclusion===!1&&(d.push(S),S.visible=!1))});const p=this.scene,g=this.camera,v=this.selection,_=g.layers.mask,b=p.background,w=e.shadowMap.autoUpdate,E=this.renderToScreen?null:n;v!==null&&g.layers.set(v.getLayer()),this.skipShadowMapUpdate&&(e.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(p.background=null),this.clearPass.enabled&&this.clearPass.render(e,n,n),e.setRenderTarget(E),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(e,p,g):e.render(p,g),g.layers.mask=_,p.background=b,e.shadowMap.autoUpdate=w;for(let S=0;S<d.length;S++)d[S].visible=!0}}XL.RenderPass=n1t;Object.defineProperty(qL,"__esModule",{value:!0});qL.NormalPass=void 0;const iC=Lm,_h=se,r1t=XL;class i1t extends iC.Pass{constructor(e,n,{renderTarget:i,resolutionScale:o=1,width:l=iC.Resolution.AUTO_SIZE,height:d=iC.Resolution.AUTO_SIZE,resolutionX:p=l,resolutionY:g=d}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new r1t.RenderPass(e,n,new _h.MeshNormalMaterial);const v=this.renderPass;v.ignoreBackground=!0,v.skipShadowMapUpdate=!0;const _=v.getClearPass();_.overrideClearColor=new _h.Color(7829503),_.overrideClearAlpha=1,this.renderTarget=i,this.renderTarget===void 0&&(this.renderTarget=new _h.WebGLRenderTarget(1,1,{minFilter:_h.NearestFilter,magFilter:_h.NearestFilter}),this.renderTarget.texture.name="NormalPass.Target"),this.dTexture=new _h.DepthTexture(1,1),this.renderTarget.depthTexture=this.dTexture,this.renderTarget.dispose(),this.renderTarget.stencilBuffer?(this.dTexture.format=_h.DepthStencilFormat,this.dTexture.type=_h.UnsignedInt248Type):this.dTexture.type=_h.UnsignedIntType;const b=this.resolution=new iC.Resolution(this,p,g,o);b.addEventListener("change",w=>this.setSize(b.baseWidth,b.baseHeight))}set mainScene(e){this.renderPass.mainScene=e}set mainCamera(e){this.renderPass.mainCamera=e}get texture(){var e;return(e=this.renderTarget)===null||e===void 0?void 0:e.texture}get depthTexture(){var e;return(e=this.renderTarget)===null||e===void 0?void 0:e.depthTexture}getTexture(){var e;return(e=this.renderTarget)===null||e===void 0?void 0:e.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(e){this.resolution.scale=e}render(e){const n=this.renderToScreen?null:this.renderTarget;this.renderPass.render(e,n,n,0,!0)}setSize(e,n){var i;const o=this.resolution;o.setBaseSize(e,n),(i=this.renderTarget)===null||i===void 0||i.setSize(o.width,o.height)}}qL.NormalPass=i1t;Object.defineProperty(Lx,"__esModule",{value:!0});Lx.AOEffect=void 0;const s1t=Lm,eg=se,CAe=zx,o1t=YL,a1t=qL,uW=Object.assign({resolutionScale:1,spp:8,distancePower:1,power:2,bias:40,thickness:.075,color:new eg.Color("black"),useNormalPass:!1,velocityDepthNormalPass:null},CAe.PoissionDenoisePass.DefaultOptions);class PAe extends s1t.Effect{constructor(e,n,i,o,l=uW){var d,p;super("AOEffect",o1t.ao_compose,{uniforms:new Map([["inputTexture",new eg.Uniform(null)],["depthTexture",new eg.Uniform(null)],["power",new eg.Uniform(0)],["color",new eg.Uniform(new eg.Color("black"))]])}),this.lastSize={width:0,height:0,resolutionScale:0},this.resolutionScale=1,this.composer=e,this.aoPass=o,l=Object.assign(Object.assign({},uW),l),this.normalPass=new a1t.NormalPass(i,n);const g=(d=l.normalTexture)!==null&&d!==void 0?d:(p=this.normalPass)===null||p===void 0?void 0:p.texture;this.aoPass.fullscreenMaterial.uniforms.normalTexture.value=g,this.aoPass.fullscreenMaterial.defines.useNormalTexture="",this.aoPass.fullscreenMaterial.uniforms.depthTexture.value=this.normalPass.depthTexture,this.uniforms.get("depthTexture").value=this.normalPass.depthTexture,this.poissionDenoisePass=new CAe.PoissionDenoisePass(n,this.aoPass.texture,this.normalPass.depthTexture),this.makeOptionsReactive(l)}makeOptionsReactive(e){for(const n of Object.keys(e))Object.defineProperty(this,n,{get(){return e[n]},set(i){if(i!=null)switch(e[n]=i,n){case"spp":this.aoPass.fullscreenMaterial.defines.spp=i.toFixed(0),this.aoPass.fullscreenMaterial.needsUpdate=!0;break;case"distance":this.aoPass.fullscreenMaterial.uniforms.aoDistance.value=i,this.poissionDenoisePass.fullscreenMaterial.uniforms.distance.value=Math.max(i,1e-4);break;case"resolutionScale":this.setSize(this.lastSize.width,this.lastSize.height);break;case"power":this.uniforms.get("power").value=i;break;case"color":this.uniforms.get("color").value.copy(new eg.Color(i));break;case"iterations":case"radius":case"rings":case"samples":this.poissionDenoisePass[n]=i;break;case"lumaPhi":case"depthPhi":case"normalPhi":this.poissionDenoisePass.fullscreenMaterial.uniforms[n].value=Math.max(i,1e-4);break;default:n in this.aoPass.fullscreenMaterial.uniforms&&(this.aoPass.fullscreenMaterial.uniforms[n].value=i)}},configurable:!0}),this[n]=e[n]}setSize(e,n){var i;e===void 0||n===void 0||e===this.lastSize.width&&n===this.lastSize.height&&this.resolutionScale===this.lastSize.resolutionScale||((i=this.normalPass)===null||i===void 0||i.setSize(e,n),this.aoPass.setSize(e*this.resolutionScale,n*this.resolutionScale),this.poissionDenoisePass.setSize(e,n),this.lastSize={width:e,height:n,resolutionScale:this.resolutionScale})}update(e){var n;"animatedNoise"in this.aoPass.fullscreenMaterial.defines&&(delete this.aoPass.fullscreenMaterial.defines.animatedNoise,this.aoPass.fullscreenMaterial.needsUpdate=!0),this.poissionDenoisePass.iterations>0?this.uniforms.get("inputTexture").value=this.poissionDenoisePass.texture:this.uniforms.get("inputTexture").value=this.aoPass.texture,(n=this.normalPass)===null||n===void 0||n.render(e),this.aoPass.render(e),this.poissionDenoisePass.render(e)}}Lx.AOEffect=PAe;PAe.DefaultOptions=uW;var Fx={};Object.defineProperty(Fx,"__esModule",{value:!0});Fx.AOPass=void 0;const l1t=Lm,z1=se,c1t=Bx,u1t=Ux,f1t=zx;class d1t extends l1t.Pass{constructor(e,n,i){super(),this._camera=e,this._scene=n,this.renderTarget=new z1.WebGLRenderTarget(1,1,{type:z1.HalfFloatType,depthBuffer:!1});const o=i.replace("#include <sampleBlueNoise>",u1t.sampleBlueNoise);this.fullscreenMaterial=new z1.ShaderMaterial({fragmentShader:o,vertexShader:c1t.basic,uniforms:{depthTexture:{value:null},normalTexture:{value:null},cameraNear:{value:0},cameraFar:{value:0},viewMatrix:{value:this._camera.matrixWorldInverse},projectionViewMatrix:{value:new z1.Matrix4},projectionMatrixInverse:{value:this._camera.projectionMatrixInverse},cameraMatrixWorld:{value:this._camera.matrixWorld},texSize:{value:new z1.Vector2},blueNoiseTexture:{value:null},blueNoiseRepeat:{value:new z1.Vector2},aoDistance:{value:0},distancePower:{value:0},bias:{value:0},thickness:{value:0},power:{value:0},frame:{value:0}},blending:z1.NoBlending,depthWrite:!1,depthTest:!1,toneMapped:!1}),this.fullscreenMaterial.uniforms.blueNoiseTexture.value=f1t.PoissionDenoisePass.blueNoiseTexture}get texture(){return this.renderTarget.texture}render(e){const n=+this.fullscreenMaterial.defines.spp;this.fullscreenMaterial.uniforms.frame.value=(this.fullscreenMaterial.uniforms.frame.value+n)%65536,this.fullscreenMaterial.uniforms.cameraNear.value=this._camera.near,this.fullscreenMaterial.uniforms.cameraFar.value=this._camera.far,this.fullscreenMaterial.uniforms.projectionViewMatrix.value.multiplyMatrices(this._camera.projectionMatrix,this._camera.matrixWorldInverse);const i=this.fullscreenMaterial.uniforms.blueNoiseTexture.value;if(i){const{width:o,height:l}=i.source.data;this.fullscreenMaterial.uniforms.blueNoiseRepeat.value.set(this.renderTarget.width/o,this.renderTarget.height/l)}e.setRenderTarget(this.renderTarget),e.render(this.scene,this.camera)}setSize(e,n){this.renderTarget.setSize(e,n),this.fullscreenMaterial.uniforms.texSize.value.set(this.renderTarget.width,this.renderTarget.height)}}Fx.AOPass=d1t;var ZL={};Object.defineProperty(ZL,"__esModule",{value:!0});ZL.ssao=void 0;ZL.ssao=`
varying vec2 vUv;

uniform highp sampler2D depthTexture;
uniform sampler2D normalTexture;
uniform mat4 projectionViewMatrix;
uniform mat4 cameraMatrixWorld;

uniform sampler2D blueNoiseTexture;
uniform vec2 blueNoiseRepeat;
uniform vec2 texSize;
uniform mat4 projectionMatrixInverse;

uniform float aoDistance;
uniform float distancePower;
uniform float cameraNear;
uniform float cameraFar;
uniform int frame;

uniform vec3[spp] samples;
uniform float[spp] samplesR;

#include <common>
#include <packing>
#include <sampleBlueNoise>

// source: https://github.com/N8python/ssao/blob/master/EffectShader.js#L52
vec3 getWorldPos(const float depth, const vec2 coord) {
    float z = depth * 2.0 - 1.0;
    vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);
    vec4 viewSpacePosition = projectionMatrixInverse * clipSpacePosition;

    // Perspective division
    vec4 worldSpacePosition = cameraMatrixWorld * viewSpacePosition;
    worldSpacePosition.xyz /= worldSpacePosition.w;

    return worldSpacePosition.xyz;
}

vec3 computeNormal(vec3 worldPos, vec2 vUv) {
    vec2 size = vec2(textureSize(depthTexture, 0));
    ivec2 p = ivec2(vUv * size);
    float c0 = texelFetch(depthTexture, p, 0).x;
    float l2 = texelFetch(depthTexture, p - ivec2(2, 0), 0).x;
    float l1 = texelFetch(depthTexture, p - ivec2(1, 0), 0).x;
    float r1 = texelFetch(depthTexture, p + ivec2(1, 0), 0).x;
    float r2 = texelFetch(depthTexture, p + ivec2(2, 0), 0).x;
    float b2 = texelFetch(depthTexture, p - ivec2(0, 2), 0).x;
    float b1 = texelFetch(depthTexture, p - ivec2(0, 1), 0).x;
    float t1 = texelFetch(depthTexture, p + ivec2(0, 1), 0).x;
    float t2 = texelFetch(depthTexture, p + ivec2(0, 2), 0).x;
    float dl = abs((2.0 * l1 - l2) - c0);
    float dr = abs((2.0 * r1 - r2) - c0);
    float db = abs((2.0 * b1 - b2) - c0);
    float dt = abs((2.0 * t1 - t2) - c0);
    vec3 ce = getWorldPos(c0, vUv).xyz;
    vec3 dpdx = (dl < dr) ? ce - getWorldPos(l1, (vUv - vec2(1.0 / size.x, 0.0))).xyz
                          : -ce + getWorldPos(r1, (vUv + vec2(1.0 / size.x, 0.0))).xyz;
    vec3 dpdy = (db < dt) ? ce - getWorldPos(b1, (vUv - vec2(0.0, 1.0 / size.y))).xyz
                          : -ce + getWorldPos(t1, (vUv + vec2(0.0, 1.0 / size.y))).xyz;
    return normalize(cross(dpdx, dpdy));
}

highp float linearize_depth(highp float d, highp float zNear, highp float zFar) {
    highp float z_n = 2.0 * d - 1.0;
    return 2.0 * zNear * zFar / (zFar + zNear - z_n * (zFar - zNear));
}

void main() {
    float depth = textureLod(depthTexture, vUv, 0.).x;

    // filter out background
    if (depth == 1.0) {
        discard;
        return;
    }

    vec3 worldPos = getWorldPos(depth, vUv);
    vec3 normal = computeNormal(worldPos, vUv);

#ifdef animatedNoise
    int seed = frame;
#else
    int seed = 0;
#endif

    vec4 noise = sampleBlueNoise(blueNoiseTexture, seed, blueNoiseRepeat, texSize);

    vec3 randomVec = normalize(noise.rgb * 2.0 - 1.0);
    vec3 tangent = normalize(randomVec - normal * dot(randomVec, normal));
    vec3 bitangent = cross(normal, tangent);
    mat3 tbn = mat3(tangent, bitangent, normal);

    float occluded = 0.0;
    float totalWeight = 0.0;

    vec3 samplePos;

    float sppF = float(spp);

    for (float i = 0.0; i < sppF; i++) {
        vec3 sampleDirection = tbn * samples[int(i)];

        // make sure sample direction is in the same hemisphere as the normal
        if (dot(sampleDirection, normal) < 0.0) sampleDirection *= -1.0;

        float moveAmt = samplesR[int(mod(i + noise.a * sppF, sppF))];
        samplePos = worldPos + aoDistance * moveAmt * sampleDirection;

        vec4 offset = projectionViewMatrix * vec4(samplePos, 1.0);
        offset.xyz /= offset.w;
        offset.xyz = offset.xyz * 0.5 + 0.5;

        float sampleDepth = textureLod(depthTexture, offset.xy, 0.0).x;

        float distSample = linearize_depth(sampleDepth, cameraNear, cameraFar);
        float distWorld = linearize_depth(offset.z, cameraNear, cameraFar);

        float rangeCheck = smoothstep(0.0, 1.0, aoDistance / abs(distSample - distWorld));
        rangeCheck = pow(rangeCheck, distancePower);
        float weight = dot(sampleDirection, normal);

        occluded += rangeCheck * weight * (distSample < distWorld ? 1.0 : 0.0);
        totalWeight += weight;
    }

    float occ = clamp(1.0 - occluded / totalWeight, 0.0, 1.0);
    gl_FragColor = vec4(normal, occ);
}
`;Object.defineProperty($L,"__esModule",{value:!0});$L.SSAOEffect=void 0;const h1t=se,jle=Lx,p1t=Fx,m1t=ZL;class g1t extends p1t.AOPass{constructor(e,n){super(e,n,m1t.ssao)}}class oI extends jle.AOEffect{constructor(e,n,i,o){super(e,n,i,new g1t(n,i),o),this.spp=16,oI.DefaultOptions=Object.assign(Object.assign({},jle.AOEffect.DefaultOptions),{spp:16,distance:1,distancePower:.25,power:2}),o=Object.assign(Object.assign({},oI.DefaultOptions),o)}getPointsOnSphere(e){const n=[],i=Math.PI*(3-Math.sqrt(5)),o=2/e;for(let l=0;l<e;l++){const d=l*o-1+o/2,p=Math.sqrt(1-d*d),g=l*i;n.push(new h1t.Vector3(Math.cos(g)*p,d,Math.sin(g)*p))}return n}makeOptionsReactive(e){super.makeOptionsReactive(e);for(const n of["spp"])Object.defineProperty(this,n,{get(){return e[n]},set(i){if(i!=null)switch(e[n]=i,n){case"spp":{this.aoPass.fullscreenMaterial.defines.spp=i.toFixed(0);const o=this.getPointsOnSphere(i),l=[];for(let d=0;d<i;d++)l.push((d+1)/i);this.aoPass.fullscreenMaterial.uniforms.samples={value:o},this.aoPass.fullscreenMaterial.uniforms.samplesR={value:l},this.aoPass.fullscreenMaterial.needsUpdate=!0;break}}},configurable:!0});this.spp=e.spp}}$L.SSAOEffect=oI;var QL={},KL={};Object.defineProperty(KL,"__esModule",{value:!0});KL.hbao=void 0;KL.hbao=`
varying vec2 vUv;

uniform highp sampler2D depthTexture;

uniform mat4 projectionViewMatrix;
uniform int frame;

uniform sampler2D blueNoiseTexture;
uniform vec2 blueNoiseRepeat;
uniform vec2 texSize;

uniform float aoDistance;
uniform float distancePower;
uniform float bias;
uniform float thickness;

#include <packing>
// HBAO Utils
#include <hbao_utils>

float getOcclusion(const vec3 cameraPosition, const vec3 worldPos, const vec3 worldNormal, const float depth, const int seed, inout float totalWeight) {
    vec4 blueNoise = sampleBlueNoise(blueNoiseTexture, seed, blueNoiseRepeat, texSize);

    vec3 sampleWorldDir = cosineSampleHemisphere(worldNormal, blueNoise.rg);

    vec3 sampleWorldPos = worldPos + aoDistance * pow(blueNoise.b, distancePower + 1.0) * sampleWorldDir;

    // Project the sample position to screen space
    vec4 sampleUv = projectionViewMatrix * vec4(sampleWorldPos, 1.);
    sampleUv.xy /= sampleUv.w;
    sampleUv.xy = sampleUv.xy * 0.5 + 0.5;

    // Get the depth of the sample position
    float sampleDepth = textureLod(depthTexture, sampleUv.xy, 0.0).r;

    // Compute the horizon line
    float deltaDepth = depth - sampleDepth;

    // distance based bias
    float d = distance(sampleWorldPos, cameraPosition) / aoDistance;
    deltaDepth *= 0.001 * d * d;

    float th = thickness * 0.01;

    float theta = dot(worldNormal, sampleWorldDir);
    totalWeight += theta;

    if (deltaDepth < th) {
        float horizon = sampleDepth + deltaDepth * bias * 1000.;

        float occlusion = max(0.0, horizon - depth) * theta;

        float m = max(0., 1. - deltaDepth / th);
        occlusion = 10. * occlusion * m / d;

        occlusion = max(0.0, occlusion);
        occlusion = sqrt(occlusion);
        return occlusion;
    }

    return 0.;
}

void main() {
    float depth = textureLod(depthTexture, vUv, 0.0).r;

    // filter out background
    if (depth == 1.0) {
        discard;
        return;
    }

    vec4 cameraPosition = cameraMatrixWorld * vec4(0.0, 0.0, 0.0, 1.0);

    vec3 worldPos = getWorldPos(depth, vUv);
    vec3 worldNormal = getWorldNormal(vUv);

    float ao = 0.0, totalWeight = 0.0;

    for (int i = 0; i < spp; i++) {
        int seed = i;
#ifdef animatedNoise
        seed += frame;
#endif

        float occlusion = getOcclusion(cameraPosition.xyz, worldPos, worldNormal, depth, seed, totalWeight);
        ao += occlusion;
    }

    if (totalWeight > 0.) ao /= totalWeight;

    // clamp ao to [0, 1]
    ao = clamp(1. - ao, 0., 1.);

    gl_FragColor = vec4(worldNormal, ao);
}
`;var JL={};Object.defineProperty(JL,"__esModule",{value:!0});JL.hbao_utils=void 0;JL.hbao_utils=`
#include <sampleBlueNoise>

uniform sampler2D normalTexture;
uniform float cameraNear;
uniform float cameraFar;
uniform mat4 projectionMatrixInverse;
uniform mat4 cameraMatrixWorld;

// source: https://github.com/mrdoob/three.js/blob/342946c8392639028da439b6dc0597e58209c696/examples/js/shaders/SAOShader.js#L123
float getViewZ(const float depth) {
#ifdef PERSPECTIVE_CAMERA
    return perspectiveDepthToViewZ(depth, cameraNear, cameraFar);
#else
    return orthographicDepthToViewZ(depth, cameraNear, cameraFar);
#endif
}

// source: https://github.com/N8python/ssao/blob/master/EffectShader.js#L52
vec3 getWorldPos(const float depth, const vec2 coord) {
    float z = depth * 2.0 - 1.0;
    vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);
    vec4 viewSpacePosition = projectionMatrixInverse * clipSpacePosition;

    // Perspective division
    vec4 worldSpacePosition = cameraMatrixWorld * viewSpacePosition;
    worldSpacePosition.xyz /= worldSpacePosition.w;

    return worldSpacePosition.xyz;
}

vec3 slerp(const vec3 a, const vec3 b, const float t) {
    float cosAngle = dot(a, b);
    float angle = acos(cosAngle);

    if (abs(angle) < 0.001) {
        return mix(a, b, t);
    }

    float sinAngle = sin(angle);
    float t1 = sin((1.0 - t) * angle) / sinAngle;
    float t2 = sin(t * angle) / sinAngle;

    return (a * t1) + (b * t2);
}

vec3 computeWorldNormal() {
    vec2 size = vec2(textureSize(depthTexture, 0));
    ivec2 p = ivec2(vUv * size);
    float c0 = texelFetch(depthTexture, p, 0).x;
    float l2 = texelFetch(depthTexture, p - ivec2(2, 0), 0).x;
    float l1 = texelFetch(depthTexture, p - ivec2(1, 0), 0).x;
    float r1 = texelFetch(depthTexture, p + ivec2(1, 0), 0).x;
    float r2 = texelFetch(depthTexture, p + ivec2(2, 0), 0).x;
    float b2 = texelFetch(depthTexture, p - ivec2(0, 2), 0).x;
    float b1 = texelFetch(depthTexture, p - ivec2(0, 1), 0).x;
    float t1 = texelFetch(depthTexture, p + ivec2(0, 1), 0).x;
    float t2 = texelFetch(depthTexture, p + ivec2(0, 2), 0).x;
    float dl = abs((2.0 * l1 - l2) - c0);
    float dr = abs((2.0 * r1 - r2) - c0);
    float db = abs((2.0 * b1 - b2) - c0);
    float dt = abs((2.0 * t1 - t2) - c0);
    vec3 ce = getWorldPos(c0, vUv).xyz;
    vec3 dpdx = (dl < dr) ? ce - getWorldPos(l1, (vUv - vec2(1.0 / size.x, 0.0))).xyz
                          : -ce + getWorldPos(r1, (vUv + vec2(1.0 / size.x, 0.0))).xyz;
    vec3 dpdy = (db < dt) ? ce - getWorldPos(b1, (vUv - vec2(0.0, 1.0 / size.y))).xyz
                          : -ce + getWorldPos(t1, (vUv + vec2(0.0, 1.0 / size.y))).xyz;
    return normalize(cross(dpdx, dpdy));
}

vec3 getWorldNormal(const vec2 uv) {
#ifdef useNormalTexture
    vec3 worldNormal = unpackRGBToNormal(textureLod(normalTexture, uv, 0.).rgb);

    worldNormal = (vec4(worldNormal, 1.) * viewMatrix).xyz;  // view-space to world-space
    return normalize(worldNormal);
#else
    return computeWorldNormal();  // compute world normal from depth
#endif
}

#define PI 3.14159265358979323846264338327950288

// source: https://www.shadertoy.com/view/cll3R4
vec3 cosineSampleHemisphere(const vec3 n, const vec2 u) {
    float r = sqrt(u.x);
    float theta = 2.0 * PI * u.y;

    vec3 b = normalize(cross(n, vec3(0.0, 1.0, 1.0)));
    vec3 t = cross(b, n);

    return normalize(r * sin(theta) * b + sqrt(1.0 - u.x) * n + r * cos(theta) * t);
}

`;Object.defineProperty(QL,"__esModule",{value:!0});QL.HBAOEffect=void 0;const eG=Lx,v1t=Fx,_1t=KL,y1t=JL,b1t=_1t.hbao.replace("#include <hbao_utils>",y1t.hbao_utils);class A1t extends v1t.AOPass{constructor(e,n){super(e,n,b1t)}}class hK extends eG.AOEffect{constructor(e,n,i,o=eG.AOEffect.DefaultOptions){super(e,n,i,new A1t(n,i),Object.assign(Object.assign(Object.assign({},eG.AOEffect.DefaultOptions),hK.DefaultOptions),o)),this.lastSize={width:0,height:0,resolutionScale:0}}}QL.HBAOEffect=hK;var w1t=X&&X.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,o)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),E1t=X&&X.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),S1t=X&&X.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&w1t(e,t,n);return E1t(e,t),e},T1t=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty(Dx,"__esModule",{value:!0});Dx.PostProcessingManager=void 0;const yh=S1t(se),wr=Lm,Q_=Mn,x1t=BL,yn=fK,M1t=UL,k1t=FL,C1t=VL,P1t=$L,R1t=QL,Hle=Cr;class D1t{constructor(e){this._renderingEngine=e,this._converter=Q_.Converter.instance,this._eventEngine=Q_.EventEngine.instance,this._systemInfo=Q_.SystemInfo.instance,this._uuidGenerator=Q_.UuidGenerator.instance,this._antiAliasingTechnique=yn.ANTI_ALIASING_TECHNIQUE.SMAA,this._antiAliasingTechniqueMobile=yn.ANTI_ALIASING_TECHNIQUE.FXAA,this._effectDefinitions=[],this._effects=[],this._enablePostProcessingOnMobile=!0,this._godRaysManagers={},this._manualPostProcessing=!1,this._outlineManagers={},this._selectiveBloomManagers={},this._sceneExtents=0,this._suspendEffectPassUpdate=!1,this._currentCameraId="",this._eventEngine.addListener(Q_.EVENTTYPE.SCENE.SCENE_BOUNDING_BOX_CHANGE,n=>{const i=n;i.viewportId===this._renderingEngine.id&&(this._sceneExtents=Hle.vec3.distance(i.boundingBox.min,i.boundingBox.max),this.changeEffectPass())})}get antiAliasingTechnique(){return this._antiAliasingTechnique}set antiAliasingTechnique(e){this._antiAliasingTechnique=e,this.changeEffectPass()}get antiAliasingTechniqueMobile(){return this._antiAliasingTechniqueMobile}set antiAliasingTechniqueMobile(e){this._antiAliasingTechniqueMobile=e,this._antiAliasingTechniqueMobile===yn.ANTI_ALIASING_TECHNIQUE.SSAA&&(this._antiAliasingTechniqueMobile=yn.ANTI_ALIASING_TECHNIQUE.SMAA),this.changeEffectPass()}get effectComposer(){return this._composer}get effects(){return this._effects}get enablePostProcessingOnMobile(){return this._enablePostProcessingOnMobile}set enablePostProcessingOnMobile(e){this._enablePostProcessingOnMobile=e}get godRaysManagers(){return this._godRaysManagers}get manualPostProcessing(){return this._manualPostProcessing}set manualPostProcessing(e){this._manualPostProcessing=e,this._composer&&this._manualPostProcessing===!0&&this._composer.removeAllPasses()}get outlineManagers(){return this._outlineManagers}get selectiveBloomManagers(){return this._selectiveBloomManagers}get ssaaSampleLevel(){return this._ssaaRenderPass?this._ssaaRenderPass.sampleLevel:2}set ssaaSampleLevel(e){this._ssaaRenderPass&&(this._ssaaRenderPass.sampleLevel=e)}addEffect(e,n){const i=n||this._uuidGenerator.create();switch(this._effectDefinitions.push({token:i,definition:e}),e.type){case yn.POST_PROCESSING_EFFECT_TYPE.GOD_RAYS:this._godRaysManagers[i]||(this._godRaysManagers[i]=new x1t.GodRaysManager(this._renderingEngine));break;case yn.POST_PROCESSING_EFFECT_TYPE.OUTLINE:this._outlineManagers[i]||(this._outlineManagers[i]=new M1t.OutlineManager(this._renderingEngine));break;case yn.POST_PROCESSING_EFFECT_TYPE.SELECTIVE_BLOOM:this._selectiveBloomManagers[i]||(this._selectiveBloomManagers[i]=new k1t.SelectiveBloomManager(this._renderingEngine));break}return this.changeEffectPass(),i}applySettings(e){this._suspendEffectPassUpdate=!0,this.antiAliasingTechnique=e.settings.postprocessing.antiAliasingTechnique,this.antiAliasingTechniqueMobile=e.settings.postprocessing.antiAliasingTechniqueMobile,this._antiAliasingTechniqueMobile===yn.ANTI_ALIASING_TECHNIQUE.SSAA&&(this._antiAliasingTechniqueMobile=yn.ANTI_ALIASING_TECHNIQUE.SMAA),this.enablePostProcessingOnMobile=e.settings.postprocessing.enablePostProcessingOnMobile,this.ssaaSampleLevel=e.settings.postprocessing.ssaaSampleLevel,this._effectDefinitions=[];const n=e.settings.postprocessing.effects;for(let i=0;i<n.length;i++){const o=this._uuidGenerator.create();this._effectDefinitions.push({token:o,definition:{type:n[i].type,properties:n[i].properties}})}this._suspendEffectPassUpdate=!1,this.changeEffectPass()}changeEffectPass(){if(!this._composer||this._suspendEffectPassUpdate===!0||this._systemInfo.isMobile===!0&&this._enablePostProcessingOnMobile===!1||this._manualPostProcessing)return;for(let i=0;i<this._composer.passes.length;i++)this._composer.passes[i].dispose();this._composer.removeAllPasses();const e=this._systemInfo.isMobile===!0?this._antiAliasingTechniqueMobile:this._antiAliasingTechnique;e===yn.ANTI_ALIASING_TECHNIQUE.SSAA?this._composer.addPass(this._ssaaRenderPass):this._composer.addPass(this._renderPass),this._effects.forEach(i=>i.effect.dispose()),this._effects=[];for(let i=0;i<this._effectDefinitions.length;i++)switch(this._effectDefinitions[i].definition.type){case yn.POST_PROCESSING_EFFECT_TYPE.BLOOM:{const l=this._effectDefinitions[i].definition.properties||{};this._effects.push({token:this._effectDefinitions[i].token,effect:new wr.BloomEffect({blendFunction:l.blendFunction,luminanceThreshold:l.luminanceThreshold,luminanceSmoothing:l.luminanceSmoothing,mipmapBlur:l.mipmapBlur,intensity:l.intensity,kernelSize:l.kernelSize})})}break;case yn.POST_PROCESSING_EFFECT_TYPE.CHROMATIC_ABERRATION:{const l=this._effectDefinitions[i].definition.properties||{},d=l.offset!==void 0?Array.isArray(l.offset)?l.offset:[l.offset.x,l.offset.y]:void 0;this._effects.push({token:this._effectDefinitions[i].token,effect:new wr.ChromaticAberrationEffect({blendFunction:l.blendFunction,offset:d?new yh.Vector2(...d):void 0,radialModulation:l.radialModulation!==void 0?l.radialModulation:!1,modulationOffset:l.modulationOffset!==void 0?l.modulationOffset:.15})})}break;case yn.POST_PROCESSING_EFFECT_TYPE.DEPTH_OF_FIELD:{const l=this._effectDefinitions[i].definition.properties||{},d=new wr.DepthOfFieldEffect(this._renderingEngine.camera,{blendFunction:l.blendFunction,focusDistance:l.focusDistance!==void 0?l.focusDistance:0,focusRange:l.focusRange!==void 0?l.focusRange:.01,bokehScale:l.bokehScale!==void 0?l.bokehScale:5,resolutionScale:1});d.resolution.height=1080,d.blurPass.kernelSize=wr.KernelSize.HUGE,this._effects.push({token:this._effectDefinitions[i].token,effect:d})}break;case yn.POST_PROCESSING_EFFECT_TYPE.DOT_SCREEN:{const l=this._effectDefinitions[i].definition.properties||{};this._effects.push({token:this._effectDefinitions[i].token,effect:new wr.DotScreenEffect({blendFunction:l.blendFunction,scale:l.scale,angle:l.angle})})}break;case yn.POST_PROCESSING_EFFECT_TYPE.GOD_RAYS:{const l=this._effectDefinitions[i].definition.properties||{},d=new wr.GodRaysEffect(this._renderingEngine.camera,new yh.Mesh,{blendFunction:l.blendFunction,density:l.density,decay:l.decay,weight:l.weight,exposure:l.exposure,clampMax:l.clampMax,kernelSize:l.kernelSize,blur:l.blur});this._effects.push({token:this._effectDefinitions[i].token,effect:d}),this._godRaysManagers[this._effectDefinitions[i].token].setEffect(d)}break;case yn.POST_PROCESSING_EFFECT_TYPE.GRID:{const l=this._effectDefinitions[i].definition.properties||{};this._effects.push({token:this._effectDefinitions[i].token,effect:new wr.GridEffect({blendFunction:l.blendFunction!==void 0?l.blendFunction:wr.BlendFunction.MULTIPLY,scale:l.scale})})}break;case yn.POST_PROCESSING_EFFECT_TYPE.HBAO:{if(this._renderingEngine.renderer.capabilities.isWebGL2===!1)break;const l=this._effectDefinitions[i].definition.properties||{},d=this._sceneExtents/10,p=new R1t.HBAOEffect(this._composer,this._renderingEngine.camera,this._renderingEngine.scene,{resolutionScale:l.resolutionScale!==void 0?l.resolutionScale:1,spp:l.spp!==void 0?l.spp:8,distance:l.distance!==void 0?l.distance*d:d,distancePower:l.distanceIntensity!==void 0?l.distanceIntensity:1,power:l.intensity!==void 0?l.intensity:2.5,bias:l.bias!==void 0?l.bias:10,thickness:l.thickness!==void 0?l.thickness:.5,color:l.color!==void 0?new yh.Color(this._converter.toHexColor(l.color).substring(0,7)):new yh.Color("black"),iterations:l.iterations!==void 0?l.iterations:1,radius:l.radius!==void 0?l.radius:15,rings:l.rings!==void 0?l.rings:4,lumaPhi:l.lumaPhi!==void 0?l.lumaPhi:10,depthPhi:l.depthPhi!==void 0?l.depthPhi:2,normalPhi:l.normalPhi!==void 0?l.normalPhi:3.25,samples:l.samples!==void 0?l.samples:16});this._effects.push({token:this._effectDefinitions[i].token,effect:p})}break;case yn.POST_PROCESSING_EFFECT_TYPE.HUE_SATURATION:{const l=this._effectDefinitions[i].definition.properties||{};this._effects.push({token:this._effectDefinitions[i].token,effect:new wr.HueSaturationEffect({blendFunction:l.blendFunction,hue:l.hue,saturation:l.saturation})})}break;case yn.POST_PROCESSING_EFFECT_TYPE.NOISE:{const l=this._effectDefinitions[i].definition.properties||{};this._effects.push({token:this._effectDefinitions[i].token,effect:new wr.NoiseEffect({blendFunction:l.blendFunction,premultiply:l.premultiply})})}break;case yn.POST_PROCESSING_EFFECT_TYPE.OUTLINE:{const l=this._effectDefinitions[i].definition.properties||{},d=new wr.OutlineEffect(this._renderingEngine.scene,this._renderingEngine.camera,{blendFunction:l.blendFunction!==void 0?l.blendFunction:wr.BlendFunction.SCREEN,edgeStrength:l.edgeStrength,pulseSpeed:l.pulseSpeed,visibleEdgeColor:new yh.Color(this._converter.toHexColor(l.visibleEdgeColor).substring(0,7)),hiddenEdgeColor:new yh.Color(this._converter.toHexColor(l.hiddenEdgeColor).substring(0,7)),kernelSize:l.kernelSize,blur:l.blur,xRay:l.xRay,multisampling:l.multisampling});this._effects.push({token:this._effectDefinitions[i].token,effect:d}),this._outlineManagers[this._effectDefinitions[i].token].setEffect(d)}break;case yn.POST_PROCESSING_EFFECT_TYPE.PIXELATION:{const l=this._effectDefinitions[i].definition.properties||{};this._effects.push({token:this._effectDefinitions[i].token,effect:new wr.PixelationEffect(l.granularity)})}break;case yn.POST_PROCESSING_EFFECT_TYPE.SSAO:{if(this._renderingEngine.renderer.capabilities.isWebGL2===!1)break;const l=this._effectDefinitions[i].definition.properties||{},d=this._sceneExtents/50,p=new P1t.SSAOEffect(this._composer,this._renderingEngine.camera,this._renderingEngine.scene,{resolutionScale:l.resolutionScale!==void 0?l.resolutionScale:1,spp:l.spp!==void 0?l.spp:8,distance:l.distance!==void 0?l.distance*d:d,distancePower:l.distanceIntensity!==void 0?l.distanceIntensity:1,power:l.intensity!==void 0?l.intensity:2.5,color:l.color!==void 0?new yh.Color(this._converter.toHexColor(l.color).substring(0,7)):new yh.Color("black"),iterations:l.iterations!==void 0?l.iterations:1,radius:l.radius!==void 0?l.radius:15,rings:l.rings!==void 0?l.rings:4,lumaPhi:l.lumaPhi!==void 0?l.lumaPhi:10,depthPhi:l.depthPhi!==void 0?l.depthPhi:2,normalPhi:l.normalPhi!==void 0?l.normalPhi:3.25,samples:l.samples!==void 0?l.samples:16});this._effects.push({token:this._effectDefinitions[i].token,effect:p})}break;case yn.POST_PROCESSING_EFFECT_TYPE.SCANLINE:{const l=this._effectDefinitions[i].definition.properties||{};this._effects.push({token:this._effectDefinitions[i].token,effect:new wr.ScanlineEffect({blendFunction:l.blendFunction,density:l.density})})}break;case yn.POST_PROCESSING_EFFECT_TYPE.SELECTIVE_BLOOM:{const l=this._effectDefinitions[i].definition.properties||{},d=new wr.SelectiveBloomEffect(this._renderingEngine.scene,this._renderingEngine.camera,{blendFunction:l.blendFunction,mipmapBlur:l.mipmapBlur,luminanceThreshold:l.luminanceThreshold,luminanceSmoothing:l.luminanceSmoothing,intensity:l.intensity,kernelSize:l.kernelSize});d.ignoreBackground=l.ignoreBackground!==void 0?l.ignoreBackground:!0,this._effects.push({token:this._effectDefinitions[i].token,effect:d}),this._selectiveBloomManagers[this._effectDefinitions[i].token].setEffect(d)}break;case yn.POST_PROCESSING_EFFECT_TYPE.SEPIA:{const l=this._effectDefinitions[i].definition.properties||{};this._effects.push({token:this._effectDefinitions[i].token,effect:new wr.SepiaEffect({blendFunction:l.blendFunction})})}break;case yn.POST_PROCESSING_EFFECT_TYPE.TILT_SHIFT:{const l=this._effectDefinitions[i].definition.properties||{};this._effects.push({token:this._effectDefinitions[i].token,effect:new wr.TiltShiftEffect({blendFunction:l.blendFunction,offset:l.offset,rotation:l.rotation,focusArea:l.focusArea,feather:l.feather,kernelSize:l.kernelSize})})}break;case yn.POST_PROCESSING_EFFECT_TYPE.VIGNETTE:{const l=this._effectDefinitions[i].definition.properties||{};this._effects.push({token:this._effectDefinitions[i].token,effect:new wr.VignetteEffect({blendFunction:l.blendFunction,technique:l.technique,offset:l.offset,darkness:l.darkness})})}break}this._effects.sort((i,o)=>this._effectDefinitions.indexOf(this._effectDefinitions.find(l=>l.token===i.token))-this._effectDefinitions.indexOf(this._effectDefinitions.find(l=>l.token===o.token)));const n=this._effects.map(i=>i.effect);e===yn.ANTI_ALIASING_TECHNIQUE.FXAA?n.unshift(this._fxaaEffect):e===yn.ANTI_ALIASING_TECHNIQUE.SMAA&&n.unshift(this._smaaEffect),this._effectPass=new wr.EffectPass(this._renderingEngine.camera,...this._effects.map(i=>i.effect)),this._composer.addPass(this._effectPass),this._effectDefinitions.find(i=>i.definition.type===yn.POST_PROCESSING_EFFECT_TYPE.HBAO||i.definition.type===yn.POST_PROCESSING_EFFECT_TYPE.SSAO)&&this._composer.addPass(new wr.EffectPass(this._renderingEngine.camera,e===yn.ANTI_ALIASING_TECHNIQUE.FXAA?this._fxaaEffect:this._smaaEffect))}getDefaultEffectProperties(e){switch(e){case yn.POST_PROCESSING_EFFECT_TYPE.BLOOM:return{blendFunction:wr.BlendFunction.ADD,intensity:1,kernelSize:wr.KernelSize.LARGE,luminanceSmoothing:.025,luminanceThreshold:.9,mipmapBlur:!1};case yn.POST_PROCESSING_EFFECT_TYPE.CHROMATIC_ABERRATION:return{blendFunction:wr.BlendFunction.NORMAL,modulationOffset:.15,offset:{x:.001,y:5e-4},radialModulation:!1};case yn.POST_PROCESSING_EFFECT_TYPE.DEPTH_OF_FIELD:return{blendFunction:wr.BlendFunction.NORMAL,bokehScale:5,focusDistance:0,focusRange:.01};case yn.POST_PROCESSING_EFFECT_TYPE.DOT_SCREEN:return{angle:1.57,blendFunction:wr.BlendFunction.NORMAL,scale:1};case yn.POST_PROCESSING_EFFECT_TYPE.GOD_RAYS:return{blendFunction:wr.BlendFunction.SCREEN,blur:!0,clampMax:1,decay:.9,density:.96,exposure:.6,kernelSize:wr.KernelSize.SMALL,weight:.4};case yn.POST_PROCESSING_EFFECT_TYPE.GRID:return{blendFunction:wr.BlendFunction.MULTIPLY,scale:1};case yn.POST_PROCESSING_EFFECT_TYPE.HBAO:return{resolutionScale:1,spp:8,distance:1,distanceIntensity:1,intensity:2.5,color:"#000000",bias:10,thickness:.5,iterations:1,radius:15,rings:4,lumaPhi:10,depthPhi:2,normalPhi:3.25,samples:16};case yn.POST_PROCESSING_EFFECT_TYPE.HUE_SATURATION:return{blendFunction:wr.BlendFunction.NORMAL,hue:0,saturation:0};case yn.POST_PROCESSING_EFFECT_TYPE.NOISE:return{blendFunction:wr.BlendFunction.SCREEN,premultiply:!1};case yn.POST_PROCESSING_EFFECT_TYPE.OUTLINE:return{blendFunction:wr.BlendFunction.SCREEN,blur:!1,edgeStrength:1,hiddenEdgeColor:"#22090a",kernelSize:wr.KernelSize.VERY_SMALL,multisampling:0,pulseSpeed:0,resolution:480,visibleEdgeColor:"#ffffff",xRay:!0};case yn.POST_PROCESSING_EFFECT_TYPE.PIXELATION:return{granularity:30};case yn.POST_PROCESSING_EFFECT_TYPE.SSAO:return{resolutionScale:1,spp:8,distance:1,distanceIntensity:1,intensity:2.5,color:"#000000",iterations:1,radius:15,rings:4,lumaPhi:10,depthPhi:2,normalPhi:3.25,samples:16};case yn.POST_PROCESSING_EFFECT_TYPE.SCANLINE:return{blendFunction:wr.BlendFunction.OVERLAY,density:1.25};case yn.POST_PROCESSING_EFFECT_TYPE.SELECTIVE_BLOOM:return{blendFunction:wr.BlendFunction.ADD,intensity:1,kernelSize:wr.KernelSize.LARGE,luminanceSmoothing:.025,luminanceThreshold:.9,mipmapBlur:!1,ignoreBackground:!0};case yn.POST_PROCESSING_EFFECT_TYPE.SEPIA:return{blendFunction:wr.BlendFunction.NORMAL};case yn.POST_PROCESSING_EFFECT_TYPE.TILT_SHIFT:return{blendFunction:wr.BlendFunction.NORMAL,feather:.3,focusArea:.4,kernelSize:wr.KernelSize.MEDIUM,offset:0,rotation:0};case yn.POST_PROCESSING_EFFECT_TYPE.VIGNETTE:return{blendFunction:wr.BlendFunction.NORMAL,darkness:.5,offset:.5,technique:wr.VignetteTechnique.DEFAULT};default:return{}}}getEffect(e){return this._effects.find(n=>n.token===e).effect}getEffectTokens(){return Object.assign({},...this._effectDefinitions.map(e=>({[e.token]:e.definition.type})))}getPostProcessingEffectsArray(){const e=[];for(let n=0;n<this._effectDefinitions.length;n++)switch(this._effectDefinitions[n].definition.type){case yn.POST_PROCESSING_EFFECT_TYPE.BLOOM:{const o=this._effectDefinitions[n].definition.properties||{};e.push({type:yn.POST_PROCESSING_EFFECT_TYPE.BLOOM,token:this._effectDefinitions[n].token,properties:{blendFunction:o.blendFunction,luminanceThreshold:o.luminanceThreshold,luminanceSmoothing:o.luminanceSmoothing,mipmapBlur:o.mipmapBlur,intensity:o.intensity,kernelSize:o.kernelSize}})}break;case yn.POST_PROCESSING_EFFECT_TYPE.CHROMATIC_ABERRATION:{const o=this._effectDefinitions[n].definition.properties||{};e.push({type:yn.POST_PROCESSING_EFFECT_TYPE.CHROMATIC_ABERRATION,token:this._effectDefinitions[n].token,properties:{blendFunction:o.blendFunction,offset:o.offset?Array.isArray(o.offset)?{x:o.offset[0],y:o.offset[1]}:o.offset:void 0,radialModulation:o.radialModulation,modulationOffset:o.modulationOffset}})}break;case yn.POST_PROCESSING_EFFECT_TYPE.DEPTH_OF_FIELD:{const o=this._effectDefinitions[n].definition.properties||{};e.push({type:yn.POST_PROCESSING_EFFECT_TYPE.DEPTH_OF_FIELD,token:this._effectDefinitions[n].token,properties:{blendFunction:o.blendFunction,focusDistance:o.focusDistance,focusRange:o.focusRange,bokehScale:o.bokehScale}})}break;case yn.POST_PROCESSING_EFFECT_TYPE.DOT_SCREEN:{const o=this._effectDefinitions[n].definition.properties||{};e.push({type:yn.POST_PROCESSING_EFFECT_TYPE.DOT_SCREEN,token:this._effectDefinitions[n].token,properties:{blendFunction:o.blendFunction,scale:o.scale,angle:o.angle}})}break;case yn.POST_PROCESSING_EFFECT_TYPE.GRID:{const o=this._effectDefinitions[n].definition.properties||{};e.push({type:yn.POST_PROCESSING_EFFECT_TYPE.GRID,token:this._effectDefinitions[n].token,properties:{blendFunction:o.blendFunction,scale:o.scale}})}break;case yn.POST_PROCESSING_EFFECT_TYPE.HBAO:{const o=this._effectDefinitions[n].definition.properties||{};e.push({type:yn.POST_PROCESSING_EFFECT_TYPE.HBAO,token:this._effectDefinitions[n].token,properties:{resolutionScale:o.resolutionScale,spp:o.spp,distance:o.distance,distanceIntensity:o.distanceIntensity,intensity:o.intensity,bias:o.bias,thickness:o.thickness,color:o.color!==void 0?this._converter.toHexColor(o.color):void 0,iterations:o.iterations,radius:o.radius,rings:o.rings,lumaPhi:o.lumaPhi,depthPhi:o.depthPhi,normalPhi:o.normalPhi,samples:o.samples}})}break;case yn.POST_PROCESSING_EFFECT_TYPE.HUE_SATURATION:{const o=this._effectDefinitions[n].definition.properties||{};e.push({type:yn.POST_PROCESSING_EFFECT_TYPE.HUE_SATURATION,token:this._effectDefinitions[n].token,properties:{blendFunction:o.blendFunction,hue:o.hue,saturation:o.saturation}})}break;case yn.POST_PROCESSING_EFFECT_TYPE.NOISE:{const o=this._effectDefinitions[n].definition.properties||{};e.push({type:yn.POST_PROCESSING_EFFECT_TYPE.NOISE,token:this._effectDefinitions[n].token,properties:{blendFunction:o.blendFunction,premultiply:o.premultiply}})}break;case yn.POST_PROCESSING_EFFECT_TYPE.PIXELATION:{const o=this._effectDefinitions[n].definition.properties||{};e.push({type:yn.POST_PROCESSING_EFFECT_TYPE.PIXELATION,token:this._effectDefinitions[n].token,properties:{granularity:o.granularity}})}break;case yn.POST_PROCESSING_EFFECT_TYPE.SSAO:{const o=this._effectDefinitions[n].definition.properties||{};e.push({type:yn.POST_PROCESSING_EFFECT_TYPE.SSAO,token:this._effectDefinitions[n].token,properties:{resolutionScale:o.resolutionScale,spp:o.spp,distance:o.distance,distanceIntensity:o.distanceIntensity,intensity:o.intensity,color:o.color!==void 0?this._converter.toHexColor(o.color):void 0,iterations:o.iterations,radius:o.radius,rings:o.rings,lumaPhi:o.lumaPhi,depthPhi:o.depthPhi,normalPhi:o.normalPhi,samples:o.samples}})}break;case yn.POST_PROCESSING_EFFECT_TYPE.SCANLINE:{const o=this._effectDefinitions[n].definition.properties||{};e.push({type:yn.POST_PROCESSING_EFFECT_TYPE.SCANLINE,token:this._effectDefinitions[n].token,properties:{blendFunction:o.blendFunction,density:o.density}})}break;case yn.POST_PROCESSING_EFFECT_TYPE.SEPIA:{const o=this._effectDefinitions[n].definition.properties||{};e.push({type:yn.POST_PROCESSING_EFFECT_TYPE.SEPIA,token:this._effectDefinitions[n].token,properties:{blendFunction:o.blendFunction}})}break;case yn.POST_PROCESSING_EFFECT_TYPE.TILT_SHIFT:{const o=this._effectDefinitions[n].definition.properties||{};e.push({type:yn.POST_PROCESSING_EFFECT_TYPE.TILT_SHIFT,token:this._effectDefinitions[n].token,properties:{blendFunction:o.blendFunction,offset:o.offset,rotation:o.rotation,focusArea:o.focusArea,feather:o.feather,kernelSize:o.kernelSize}})}break;case yn.POST_PROCESSING_EFFECT_TYPE.VIGNETTE:{const o=this._effectDefinitions[n].definition.properties||{};e.push({type:yn.POST_PROCESSING_EFFECT_TYPE.VIGNETTE,token:this._effectDefinitions[n].token,properties:{blendFunction:o.blendFunction,technique:o.technique,offset:o.offset,darkness:o.darkness}})}break}return e}init(){wr.OverrideMaterialManager.workaroundEnabled=!0;const e=()=>{this._composer=new wr.EffectComposer(this._renderingEngine.renderer),this._renderingEngine.renderer.autoClear=!0,this._fxaaEffect=new wr.FXAAEffect,this._smaaEffect=new wr.SMAAEffect({preset:wr.SMAAPreset.ULTRA}),this._renderPass=new wr.RenderPass(this._renderingEngine.scene,this._renderingEngine.camera),this._ssaaRenderPass=new C1t.SSAARenderPass(this._renderingEngine.scene,this._renderingEngine.camera)};if(this._sceneExtents===0){const n=this._eventEngine.addListener(Q_.EVENTTYPE.SCENE.SCENE_BOUNDING_BOX_CHANGE,i=>T1t(this,void 0,void 0,function*(){const o=i;o.viewportId===this._renderingEngine.id&&Hle.vec3.distance(o.boundingBox.min,o.boundingBox.max)>0&&(e(),this.changeEffectPass(),this._eventEngine.removeListener(n))}))}else e()}removeEffect(e){const n=this._effectDefinitions.find(i=>i.token===e);return n&&this._effectDefinitions.splice(this._effectDefinitions.indexOf(n),1),this.changeEffectPass(),!0}render(e,n){if(!this._composer)return;const i=`${n.id}_${n.type}${n.type==="PerspectiveCamera"?"":"_"+n.up.toArray().toString()}`;i!==this._currentCameraId&&(this._currentCameraId=i,this.changeEffectPass());const o=this._renderingEngine.renderer.getClearColor(new yh.Color),l=o.clone().convertSRGBToLinear();this._renderingEngine.renderer.setClearColor(l),this._renderingEngine.renderer.setClearAlpha(this._renderingEngine.clearAlpha),this._renderingEngine.renderer.autoClear=!1,this._composer.setMainCamera(n),this._composer.render(),this._renderingEngine.renderer.autoClear=!0,this._renderingEngine.renderer.setClearColor(o)}resize(e,n){var i;this._composer&&(this.effects.forEach(o=>{o.effect.setSize&&o.effect.setSize(e,n)}),this._renderPass.setSize(e,n),this._ssaaRenderPass.setSize(e,n),(i=this._effectPass)===null||i===void 0||i.setSize(e,n),this._composer.setSize(e,n))}saveSettings(e){e.settings.postprocessing.antiAliasingTechnique=this.antiAliasingTechnique,e.settings.postprocessing.antiAliasingTechniqueMobile=this.antiAliasingTechniqueMobile,e.settings.postprocessing.enablePostProcessingOnMobile=this.enablePostProcessingOnMobile,e.settings.postprocessing.ssaaSampleLevel=this.ssaaSampleLevel;const n=this.getPostProcessingEffectsArray();n.forEach(i=>delete i.token),e.settings.postprocessing.effects=n}updateEffect(e,n){this._effectDefinitions.find(o=>o.token===e)&&(this.removeEffect(e),this.addEffect(n,e))}}Dx.PostProcessingManager=D1t;var ez={},RAe={exports:{}};(function(t,e){(function(n,i){t.exports=i()})(X,function(){var n=function(){function i(E){return d.appendChild(E.dom),E}function o(E){for(var S=0;S<d.children.length;S++)d.children[S].style.display=S===E?"block":"none";l=E}var l=0,d=document.createElement("div");d.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",d.addEventListener("click",function(E){E.preventDefault(),o(++l%d.children.length)},!1);var p=(performance||Date).now(),g=p,v=0,_=i(new n.Panel("FPS","#0ff","#002")),b=i(new n.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var w=i(new n.Panel("MB","#f08","#201"));return o(0),{REVISION:16,dom:d,addPanel:i,showPanel:o,begin:function(){p=(performance||Date).now()},end:function(){v++;var E=(performance||Date).now();if(b.update(E-p,200),E>g+1e3&&(_.update(1e3*v/(E-g),100),g=E,v=0,w)){var S=performance.memory;w.update(S.usedJSHeapSize/1048576,S.jsHeapSizeLimit/1048576)}return E},update:function(){p=this.end()},domElement:d,setMode:o}};return n.Panel=function(i,o,l){var d=1/0,p=0,g=Math.round,v=g(window.devicePixelRatio||1),_=80*v,b=48*v,w=3*v,E=2*v,S=3*v,M=15*v,k=74*v,x=30*v,C=document.createElement("canvas");C.width=_,C.height=b,C.style.cssText="width:80px;height:48px";var P=C.getContext("2d");return P.font="bold "+9*v+"px Helvetica,Arial,sans-serif",P.textBaseline="top",P.fillStyle=l,P.fillRect(0,0,_,b),P.fillStyle=o,P.fillText(i,w,E),P.fillRect(S,M,k,x),P.fillStyle=l,P.globalAlpha=.9,P.fillRect(S,M,k,x),{dom:C,update:function(O,L){d=Math.min(d,O),p=Math.max(p,O),P.fillStyle=l,P.globalAlpha=1,P.fillRect(0,0,_,M),P.fillStyle=o,P.fillText(g(O)+" "+i+" ("+g(d)+"-"+g(p)+")",w,E),P.drawImage(C,S+v,M,k-v,x,S,M,k-v,x),P.fillRect(S+k-v,M,v,x),P.fillStyle=l,P.globalAlpha=.9,P.fillRect(S+k-v,M,v,g((1-O/L)*x))}}},n})})(RAe);var O1t=RAe.exports,DAe={},tz={},I1t=X&&X.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,o)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),N1t=X&&X.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),L1t=X&&X.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&I1t(e,t,n);return N1t(e,t),e},$le=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},fW,dW;Object.defineProperty(tz,"__esModule",{value:!0});tz.AnimationFrameEngine=void 0;const z1t=L1t(gye),B1t=Mn,U1t=Px;class F1t{constructor(){fW.set(this,U1t.AnimationEngine.instance),dW.set(this,B1t.UuidGenerator.instance),this._animationFrameCallbacks={},this._lastTime=0,this.animate(0)}static get instance(){return this._instance||(this._instance=new this)}addAnimationFrameCallback(e){const n=$le(this,dW,"f").create();return this._animationFrameCallbacks[n]=e,n}removeAnimationFrameCallback(e){return this._animationFrameCallbacks[e]?(delete this._animationFrameCallbacks[e],this._animationFrameCallbacks[e]=void 0,!0):!1}animate(e){requestAnimationFrame(o=>this.animate(o)),z1t.update(e);const n=e-this._lastTime<0?0:e-this._lastTime;this._lastTime=e;const i=$le(this,fW,"f").update(n);for(let o in this._animationFrameCallbacks)this._animationFrameCallbacks[o](e,n,i)}}tz.AnimationFrameEngine=F1t;fW=new WeakMap,dW=new WeakMap;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.AnimationFrameEngine=void 0;const e=tz;Object.defineProperty(t,"AnimationFrameEngine",{enumerable:!0,get:function(){return e.AnimationFrameEngine}})})(DAe);var V1t=X&&X.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,o)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),G1t=X&&X.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),OAe=X&&X.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&V1t(e,t,n);return G1t(e,t),e};Object.defineProperty(ez,"__esModule",{value:!0});ez.RenderingManager=void 0;const tG=OAe(O1t),ou=OAe(se),j1t=Px,H1t=DAe,sC=Bf,$1t=dr,W1t=F0,n0=Mn;class Y1t{constructor(e){this._renderingEngine=e,this._animationEngine=j1t.AnimationEngine.instance,this._animationFrameEngine=H1t.AnimationFrameEngine.instance,this._converter=n0.Converter.instance,this._eventEngine=n0.EventEngine.instance,this._logger=n0.Logger.instance,this._systemInfo=n0.SystemInfo.instance,this._tree=$1t.Tree.instance,this._activeRendering=!0,this._cameraChanged=!1,this._continuousRendering=!1,this._continuousShadowMapUpdate=!1,this._height=0,this._hidden=!0,this._hiddenCamera=new ou.PerspectiveCamera,this._hiddenRenderTarget=new ou.WebGLRenderTarget,this._hideLogo=!1,this._lastSize={adjustedWidth:0,adjustedHeight:0,width:0,height:0},this._lightSizeUVEnd=.15,this._lightSizeUVStart=.025,this._maxTextureUnits=0,this._minimalRendering=!1,this._noWebGL=!1,this._runningAnimation=!1,this._sizeChanged=!1,this._softShadowRenderingActive=!1,this._softShadowRenderingDurationActive=0,this._softShadowRenderingTimeout=null,this._usingSwiftShader=!1,this._width=0}get continuousRendering(){return this._continuousRendering}set continuousRendering(e){this._continuousRendering=e}get continuousShadowMapUpdate(){return this._continuousShadowMapUpdate}set continuousShadowMapUpdate(e){this._continuousShadowMapUpdate=e}get minimalRendering(){return this._minimalRendering}get usingSwiftShader(){return this._usingSwiftShader}addLogo(e,n){var i,o;const l=document.createElement("div");if(l.style.backgroundColor=n.backgroundColor,l.classList.add("sdv-logo-container"),(i=e.parentElement)===null||i===void 0||i.insertBefore(l,(o=e.parentElement)===null||o===void 0?void 0:o.firstChild),n.logo){const d=new Image;d.classList.add("sdv-logo"),d.src=n.logo,l.appendChild(d)}return l}addSpinner(e,n){var i,o;const l=document.createElement("div");if(l.classList.add("sdv-spinner-container"),l.style.visibility="hidden",(i=e.parentElement)===null||i===void 0||i.insertBefore(l,(o=e.parentElement)===null||o===void 0?void 0:o.firstChild),n.busyModeSpinner){const d=new Image;d.src=n.busyModeSpinner,d.classList.add("sdv-spinner"),d.classList.add("sdv-spinner-"+n.spinnerPositioning.replace("_","-").toLowerCase()),l.appendChild(d)}return l}createRenderer(e){const n={alpha:!0,depth:!0,antialias:!0,preserveDrawingBuffer:!0,stencil:!0,premultipliedAlpha:!0,canvas:e},i=new ou.WebGLRenderer(n);i.setPixelRatio(window.devicePixelRatio);const o=i.getContext();if(i.extensions.has("WEBGL_debug_renderer_info")){const l=i.extensions.get("WEBGL_debug_renderer_info");o.getParameter(l.UNMASKED_RENDERER_WEBGL)==="Google SwiftShader"&&(this._usingSwiftShader=!0,this._logger.warn("RenderingLogic.createWebGLContext: The current device is using Google SwiftShader, a CPU-based renderer. To achieve better rendering results, please enable GPU-rendering in your settings."))}return i.extensions.has("EXT_shader_texture_lod")||(this._minimalRendering=!0),i.useLegacyLights=!0,i.outputColorSpace=ou.SRGBColorSpace,i.toneMapping=ou.NoToneMapping,i.shadowMap.enabled=!0,i.shadowMap.needsUpdate=!0,i.shadowMap.type=ou.PCFSoftShadowMap,i.shadowMap.autoUpdate=!1,i.localClippingEnabled=!0,i.setSize(e.width,e.height),i.setClearColor(new ou.Color("#ffffff"),1),this._maxTextureUnits=i.getContext().getParameter(i.getContext().MAX_TEXTURE_IMAGE_UNITS),i}evaluateTextureUnitCount(e){e>this._maxTextureUnits?(this._logger.warn("RenderingManager.evaluateTextureUnitCount: Maximum number of texture units exceeded. Disabling shadows."),this._renderingEngine.lightLoader.forceDisabledShadows=!0,this._renderingEngine.update("RenderingManager.evaluateTextureUnitCount")):this._renderingEngine.lightLoader.forceDisabledShadows=!1}getScreenshot(e="image/png",n=1){return this._renderingEngine.renderer.domElement.toDataURL(e,n)}init(){try{this._renderingEngine.materialLoader.updateSoftShadow(this._lightSizeUVEnd,1),this._renderingEngine.renderer.shadowMap.type=ou.PCFShadowMap,this._renderingEngine.renderer.shadowMap.needsUpdate=!0,this._renderingEngine.materialLoader.updateMaterials(),this._eventEngine.addListener(n0.EVENTTYPE.CAMERA.CAMERA_START,o=>{o.viewportId===this._renderingEngine.id&&this.startRendering()}),this._eventEngine.addListener(n0.EVENTTYPE.CAMERA.CAMERA_END,o=>{o.viewportId===this._renderingEngine.id&&this.stopRendering()}),window.onresize=()=>{this.render()},this._renderingEngine.canvas.onresize=()=>{this.render()},this._renderingEngine.canvas.parentElement.onresize=()=>{this.render()};const e=new tG.default;e.showPanel(0),e.dom.style.cssText="position:absolute;top:0px;left:0px;display:none;",this._renderingEngine.canvas.parentElement.appendChild(e.dom);const n=new tG.default;n.showPanel(1),n.dom.style.cssText="position:absolute;top:0px;left:80px;display:none;",this._renderingEngine.canvas.parentElement.appendChild(n.dom);const i=new tG.default;i.showPanel(2),i.dom.style.cssText="position:absolute;top:0px;left:160px;display:none;",this._renderingEngine.canvas.parentElement.appendChild(i.dom),this._stats={stats:[e,n,i],begin:()=>{e.begin(),n.begin(),i.begin()},end:()=>{e.end(),n.end(),i.end()}}}catch(e){throw this._noWebGL=!0,e}}render(){this.startAndStopRendering()}resize(e,n){this._width=e,this._height=n,this._renderingEngine.materialLoader.assignPointSize(this._renderingEngine.pointSize)}start(){this._animationFrameEngine.addAnimationFrameCallback(this.animate.bind(this)),this.startAndStopRendering()}updateShadowMap(){this._renderingEngine.renderer.shadowMap.needsUpdate=!0}activateBeautyRenderShaders(){this._renderingEngine.renderer.shadowMap.type=ou.PCFShadowMap,this._renderingEngine.renderer.shadowMap.needsUpdate=!0,this._renderingEngine.materialLoader.updateMaterials()}animate(e,n,i){if(this._renderingEngine.closed||this._noWebGL)return;this._renderingEngine.evaluateFlagState(),this._renderingEngine.show===!0&&this._tree.root.version!==this._renderingEngine.sceneTreeManager.lastRootVersion&&(this._renderingEngine.sceneTreeManager.updateSceneTree(this._tree.root),this.updateShadowMap(),this._animationEngine.updateAnimationData(),this.render(),this._eventEngine.emitEvent(n0.EVENTTYPE_VIEWPORT.VIEWPORT_UPDATED,{viewportId:this._renderingEngine.id})),this._renderingEngine.preRenderingCallback&&this._renderingEngine.preRenderingCallback(this._renderingEngine.renderer),i!==this._runningAnimation&&this.render(),this._runningAnimation=i,this._runningAnimation&&this._renderingEngine.sceneTreeManager.updateNode(void 0,void 0,{transformationOnly:!0}),this._runningAnimation&&this._renderingEngine.sceneTreeManager.updateMorphWeights();const{width:o,height:l,adjustedWidth:d,adjustedHeight:p}=this.calculateSize(),g=o/l;this._sizeChanged=this._lastSize.adjustedHeight!==p||this._lastSize.adjustedWidth!==d||this._lastSize.height!==l||this._lastSize.width!==o,this._lastSize={width:o,height:l,adjustedWidth:d,adjustedHeight:p},this._cameraChanged=this._renderingEngine.cameraEngine.camera?this._renderingEngine.cameraManager.updateCamera(n,g):!1;const v=this.evaluateRenderingState();if(this.toggleBusyMode(v.busyMode),v.showScene===!1){this.toggleLogo(!0),this._hidden===!1&&this._eventEngine.emitEvent(n0.EVENTTYPE.VIEWPORT.VIEWPORT_HIDDEN,{viewportId:this._renderingEngine.id}),this._hidden=!0;return}else this._hideLogo===!0&&this._hidden===!0?(this.toggleLogo(!1),this._hideLogo=!1,this._hidden===!0&&this._eventEngine.emitEvent(n0.EVENTTYPE.VIEWPORT.VIEWPORT_VISIBLE,{viewportId:this._renderingEngine.id}),this._hidden=!1):(this._hideLogo=!0,this._hidden===!0&&this._renderingEngine.postProcessingManager.changeEffectPass());if(v.rendering===!1||this._renderingEngine.pause===!0)return;this._stats.begin(),this.showStatistics();const _=new ou.Vector2;this._renderingEngine.renderer.getSize(_),_.equals(new ou.Vector2(d,p))||(this._renderingEngine.renderer.setSize(d,p),this._renderingEngine.postProcessingManager.resize(d,p),this._renderingEngine.renderer.domElement.style.width=o+"px",this._renderingEngine.renderer.domElement.style.height=l+"px",this._renderingEngine.materialLoader.assignPointSize(this._renderingEngine.pointSize));const{camera:b,matrix:w}=this._renderingEngine.cameraManager.adjustCamera(g);if(w){for(let x=0;x<this._tree.root.children.length;x++){if(!this._tree.root.children[x].sessionNode||this._tree.root.children[x].excludeViewports.includes(this._renderingEngine.id))continue;const C=this._tree.root.children[x].transformations.find(P=>P.id==="objectRotation");C?C.matrix=w:this._tree.root.children[x].addTransformation({id:"objectRotation",matrix:w})}v.updateShadowMap=!0,this._renderingEngine.sceneTreeManager.updateNode(void 0,void 0,{transformationOnly:!0})}this._renderingEngine.htmlElementAnchorLoader.adjustPositions(d/o,p/l);const E=this._renderingEngine.renderer.shadowMap.enabled;this._renderingEngine.renderer.shadowMap.enabled=this._renderingEngine.usingSwiftShader||this._renderingEngine.type===sC.RENDERER_TYPE.ATTRIBUTES?!1:this._renderingEngine.shadows,E!==this._renderingEngine.renderer.shadowMap.enabled&&this._renderingEngine.materialLoader.updateMaterials();let S,M=!0;if(this._renderingEngine.lights===!1){const x=this._renderingEngine.lightEngine.lightScene;x&&(S=x.node.convertedObject[this._renderingEngine.id],S&&(M=S.visible,S.visible=!1))}v.updateShadowMap&&this._renderingEngine.renderer.shadowMap.enabled&&(this._renderingEngine.renderer.shadowMap.needsUpdate=!0),this._renderingEngine.sceneTreeManager.scene.background=this._renderingEngine.environmentMapAsBackground?this._renderingEngine.environmentMapLoader.environmentMap:null,this._renderingEngine.renderer.setClearColor(new ou.Color(this._converter.toThreeJsColorInput(this._renderingEngine.clearColor)),this._renderingEngine.clearAlpha);const k=(this._renderingEngine.postProcessingManager.effects.length>0||this._renderingEngine.postProcessingManager.manualPostProcessing)&&!(this._renderingEngine.postProcessingManager.enablePostProcessingOnMobile===!1&&this._systemInfo.isMobile===!0);v.softShadowRendering===!0?(this.setShaderProperties(),k?this._renderingEngine.postProcessingManager.render(n,b):this._renderingEngine.renderer.render(this._renderingEngine.sceneTreeManager.scene,b),this._softShadowRenderingDurationActive>=this._renderingEngine.beautyRenderBlendingDuration?(this._eventEngine.emitEvent(n0.EVENTTYPE.RENDERING.BEAUTY_RENDERING_FINISHED,{viewportId:this._renderingEngine.id}),this.deactivateBeautyRenderShaders(),this._activeRendering=!1):this._softShadowRenderingDurationActive+=n):(k?this._renderingEngine.postProcessingManager.render(n,b):this._renderingEngine.renderer.render(this._renderingEngine.sceneTreeManager.scene,b),this._softShadowRenderingActive&&(this._eventEngine.emitEvent(n0.EVENTTYPE.RENDERING.BEAUTY_RENDERING_FINISHED,{viewportId:this._renderingEngine.id}),this.deactivateBeautyRenderShaders(),this._activeRendering=!1)),S&&(S.visible=M),this._renderingEngine.postRenderingCallback&&this._renderingEngine.postRenderingCallback(this._renderingEngine.renderer,this._renderingEngine.scene,this._renderingEngine.camera),this._stats.end()}calculateSize(){let e=this._width,n=this._height;this._renderingEngine.automaticResizing&&(e=this._renderingEngine.canvas.parentNode.clientWidth,n=this._renderingEngine.canvas.parentNode.clientHeight);const i=e/n;let o=e,l=n;return(e>this._renderingEngine.maximumRenderingSize.width||n>this._renderingEngine.maximumRenderingSize.height)&&((e-this._renderingEngine.maximumRenderingSize.width)/i>n-this._renderingEngine.maximumRenderingSize.height?(o=this._renderingEngine.maximumRenderingSize.width,l=this._renderingEngine.maximumRenderingSize.width/i):(o=this._renderingEngine.maximumRenderingSize.height*i,l=this._renderingEngine.maximumRenderingSize.height)),{width:e,adjustedWidth:o,height:n,adjustedHeight:l}}deactivateBeautyRenderShaders(){this._softShadowRenderingTimeout=null,this._softShadowRenderingActive=!1,this._softShadowRenderingDurationActive=0,this._renderingEngine.renderer.shadowMap.type=ou.PCFSoftShadowMap,this._renderingEngine.renderer.shadowMap.needsUpdate=!0,this._renderingEngine.materialLoader.updateSoftShadow(this._lightSizeUVStart,.1),this._renderingEngine.materialLoader.updateMaterials()}evaluateRenderingState(){let e=!1;this._renderingEngine.cameraEngine.camera&&this._renderingEngine.show===!0&&(e=!0);let n=!1;(this._activeRendering===!0||this._cameraChanged===!0||this._sizeChanged===!0||this._runningAnimation===!0||this._continuousRendering===!0)&&(n=!0);let i=!1;if((this._runningAnimation===!0||this._continuousShadowMapUpdate===!0)&&(i=!0),this._renderingEngine.cameraEngine.camera){const d=this._renderingEngine.cameraEngine.camera;if(d.type===W1t.CAMERA_TYPE.PERSPECTIVE){const p=d.controls;if(p.enableAutoRotation===!0&&p.autoRotationSpeed!==0)return{showScene:e,rendering:!0,updateShadowMap:i,busyMode:this._renderingEngine.busy,softShadowRendering:!1}}}else n=!1;let o=!1;this._renderingEngine.busy&&(o=!0);let l=!1;return this._softShadowRenderingActive===!0&&o===!1&&this._continuousRendering===!1&&(this._renderingEngine.shadows||!this._systemInfo.isIOS)&&this._renderingEngine.usingSwiftShader===!1&&this._runningAnimation===!1&&this._renderingEngine.type!==sC.RENDERER_TYPE.ATTRIBUTES&&(l=!0),{showScene:e,rendering:n,updateShadowMap:i,busyMode:o,softShadowRendering:l}}setShaderProperties(){if(this._renderingEngine.softShadows===!1)return this._renderingEngine.materialLoader.updateSoftShadow(this._lightSizeUVStart,0),0;const n=Math.min(this._softShadowRenderingDurationActive,this._renderingEngine.beautyRenderBlendingDuration)/this._renderingEngine.beautyRenderBlendingDuration;if(n<.25){const i=n/.25;this._renderingEngine.materialLoader.updateSoftShadow(this._lightSizeUVStart,i)}else{const i=(n-.25)/.75;this._renderingEngine.materialLoader.updateSoftShadow(this._lightSizeUVStart+(this._lightSizeUVEnd-this._lightSizeUVStart)*i,1)}return n}showStatistics(){if(this._renderingEngine.showStatistics)for(let e=0;e<this._stats.stats.length;e++)this._stats.stats[e].dom.style.display="";else for(let e=0;e<this._stats.stats.length;e++)this._stats.stats[e].dom.style.display="none"}startAndStopRendering(){this._activeRendering=!0,this.stopBeautyRenderCountdown(),this.startBeautyRenderCountdown()}startBeautyRenderCountdown(){this._softShadowRenderingTimeout=setTimeout(()=>{this._softShadowRenderingActive=!0,this._softShadowRenderingDurationActive=0,this.activateBeautyRenderShaders()},this._renderingEngine.beautyRenderDelay)}startRendering(){this._activeRendering=!0,this.stopBeautyRenderCountdown()}stopBeautyRenderCountdown(){this._softShadowRenderingTimeout&&clearTimeout(this._softShadowRenderingTimeout),this.deactivateBeautyRenderShaders()}stopRendering(){this.startBeautyRenderCountdown()}toggleBusyMode(e){if(this._renderingEngine.branding.busyModeDisplay===sC.BUSY_MODE_DISPLAY.BLUR)if(this._renderingEngine.htmlElementAnchorLoader.toggleBusyMode(e),e){if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&navigator.userAgent.toLowerCase().indexOf("android")>-1)return;this._renderingEngine.renderer.domElement.style.filter="blur(3px)"}else this._renderingEngine.renderer.domElement.style.filter="";else this._renderingEngine.branding.busyModeDisplay===sC.BUSY_MODE_DISPLAY.SPINNER&&(e?this._renderingEngine.spinnerDivElement.style.visibility="visible":this._renderingEngine.spinnerDivElement.style.visibility="hidden")}toggleLogo(e){this._renderingEngine.logoDivElement&&(this._renderingEngine.logoDivElement.style.display=e?"inherit":"none"),this._renderingEngine.canvas&&(this._renderingEngine.canvas.style.display=e?"none":"inherit")}}ez.RenderingManager=Y1t;var nz={},q1t=X&&X.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,o)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),X1t=X&&X.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Z1t=X&&X.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&q1t(e,t,n);return X1t(e,t),e};Object.defineProperty(nz,"__esModule",{value:!0});nz.SceneTracingManager=void 0;const nG=Z1t(se),B1=F0,Wle=Mn,Oi=Cr;class Q1t{constructor(e){this._renderingEngine=e,this._raycaster=new nG.Raycaster}convert3Dto2D(e){const n=this._renderingEngine.canvas.getBoundingClientRect(),i=this._renderingEngine.canvas.width,o=this._renderingEngine.canvas.height,l=this._renderingEngine.cameraEngine.camera;if(!l)throw new Wle.ShapeDiverViewerViewportError("SceneTracingManager.convert3Dto2D: No camera is defined for this viewer.");const d=new nG.Vector3;d.set(e[0],e[1],e[2]),this._raycaster.ray.direction.copy(d),this._raycaster.ray.origin.set(0,0,0),l.convertedObject[this._renderingEngine.id].localToWorld(this._raycaster.ray.origin),this._raycaster.ray.direction.sub(this._raycaster.ray.origin),this._raycaster.ray.direction.normalize();let p=Number.MAX_VALUE;this._renderingEngine.sceneTreeManager.scene.traverseVisible(_=>{if(_ instanceof nG.Mesh){const b=this._raycaster.intersectObject(_);b.length&&b[0].distance<p&&(p=b[0].distance)}});const g=l.project(Oi.vec3.clone(e));return g[0]=g[0]*(i/2)+i/2,g[1]=-(g[1]*(o/2))+o/2,g[0]=g[0]/devicePixelRatio,g[1]=g[1]/devicePixelRatio,{hidden:p+1e-4<Oi.vec3.distance(l.position,e),container:Oi.vec2.clone(g),client:Oi.vec2.fromValues(g[0]+n.left,g[1]+n.top),page:Oi.vec2.fromValues(g[0]+n.left+window.pageXOffset,g[1]+n.top+window.pageYOffset)}}init(){}pointerEventToRay(e){const n=this._renderingEngine.canvas.getBoundingClientRect(),i=this._renderingEngine.cameraEngine.camera;if(!i)throw new Wle.ShapeDiverViewerViewportError("SceneTracingManager.pointerEventToRay: No camera is defined for this viewer.");const o=(e.clientX-n.left)/n.width*2-1,l=-((e.clientY-n.top)/n.height)*2+1;let d=Oi.vec3.clone(i.position);i instanceof B1.OrthographicCamera&&(i.direction==B1.ORTHOGRAPHIC_CAMERA_DIRECTION.TOP?d=Oi.vec3.add(Oi.vec3.create(),i.position,Oi.vec3.fromValues(o*i.right,l*i.top,0)):i.direction==B1.ORTHOGRAPHIC_CAMERA_DIRECTION.BOTTOM?d=Oi.vec3.add(Oi.vec3.create(),i.position,Oi.vec3.fromValues(o*i.left,l*i.top,0)):i.direction==B1.ORTHOGRAPHIC_CAMERA_DIRECTION.LEFT?d=Oi.vec3.add(Oi.vec3.create(),i.position,Oi.vec3.fromValues(0,o*i.left,l*i.top)):i.direction==B1.ORTHOGRAPHIC_CAMERA_DIRECTION.RIGHT?d=Oi.vec3.add(Oi.vec3.create(),i.position,Oi.vec3.fromValues(0,o*i.right,l*i.top)):i.direction==B1.ORTHOGRAPHIC_CAMERA_DIRECTION.FRONT?d=Oi.vec3.add(Oi.vec3.create(),i.position,Oi.vec3.fromValues(o*i.right,0,l*i.top)):i.direction==B1.ORTHOGRAPHIC_CAMERA_DIRECTION.BACK?d=Oi.vec3.add(Oi.vec3.create(),i.position,Oi.vec3.fromValues(o*i.left,0,l*i.top)):d=Oi.vec3.add(Oi.vec3.create(),i.position,Oi.vec3.fromValues(0,o*i.left,l*i.top)));const p=Oi.vec3.normalize(Oi.vec3.create(),Oi.vec3.sub(Oi.vec3.create(),i.unproject(Oi.vec3.fromValues(o,l,.5)),d));return{origin:d,direction:p}}}nz.SceneTracingManager=Q1t;var rz={},iz={},K1t=X&&X.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,o)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),J1t=X&&X.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),egt=X&&X.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&K1t(e,t,n);return J1t(e,t),e},oC=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},Yle=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},JE,eS;Object.defineProperty(iz,"__esModule",{value:!0});iz.SDBone=void 0;const tgt=egt(se),ngt=se;class rgt extends ngt.Bone{constructor(e,n){super(),JE.set(this,void 0),eS.set(this,void 0),oC(this,JE,e,"f"),oC(this,eS,n,"f")}applyTransformation(e){this.matrix.identity(),this.matrixWorld.identity(),this.position.set(0,0,0),this.scale.set(1,1,1),this.quaternion.set(0,0,0,1),this.applyMatrix4(new tgt.Matrix4().fromArray(e))}get SDid(){return Yle(this,JE,"f")}set SDid(e){oC(this,JE,e,"f")}get SDversion(){return Yle(this,eS,"f")}set SDversion(e){oC(this,eS,e,"f")}}iz.SDBone=rgt;JE=new WeakMap,eS=new WeakMap;var Vx={},qle=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},igt=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},tS;Object.defineProperty(Vx,"__esModule",{value:!0});Vx.ThreejsData=void 0;const sgt=dr;class pK extends sgt.AbstractTreeNodeData{constructor(e,n){super(n),tS.set(this,void 0),qle(this,tS,e,"f")}get obj(){return igt(this,tS,"f")}set obj(e){qle(this,tS,e,"f")}clone(){return new pK(this.obj,this.id)}}Vx.ThreejsData=pK;tS=new WeakMap;var ogt=X&&X.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,o)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),agt=X&&X.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),lgt=X&&X.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&ogt(e,t,n);return agt(e,t),e};Object.defineProperty(rz,"__esModule",{value:!0});rz.SceneTreeManager=void 0;const Gl=lgt(se),cgt=F0,Xle=Pm,ef=Gi,bh=Rl(),rG=Bf,ugt=dr,Ah=Cr,Na=OL,fgt=iz,iG=EA,dgt=Vx,K3=Mn;class hgt{constructor(e){this._renderingEngine=e,this._eventEngine=K3.EventEngine.instance,this._inputValidator=K3.InputValidator.instance,this._scene=new Gl.Scene,this._stateEngine=K3.StateEngine.instance,this._tree=ugt.Tree.instance,this._boundingBox=new bh.Box,this._boundingBoxSensitiveData=[],this._hiddenCamera=new Gl.PerspectiveCamera,this._lastRendererType=rG.RENDERER_TYPE.STANDARD,this._lastRootVersion="",this._scene.background=new Gl.Color("#ffffff")}get boundingBox(){return this._boundingBox}get lastRendererType(){return this._lastRendererType}get lastRootVersion(){return this._lastRootVersion}get scene(){return this._scene}init(){}isEmpty(){return this._boundingBox.min[0]===0&&this._boundingBox.min[1]===0&&this._boundingBox.min[2]===0&&this._boundingBox.max[0]===0&&this._boundingBox.max[1]===0&&this._boundingBox.max[2]===0||this._boundingBox.isEmpty()}updateData(e,n,i,o,l,d){let p=n.children.find(v=>v.SDid===i.id&&v.SDversion===i.version),g=!1;switch(p||(g=!0,p=new Na.SDData(i.id,i.version),n.add(p)),this._renderingEngine.type===rG.RENDERER_TYPE.ATTRIBUTES&&this.injectAttributeData(e,i),!0){case i instanceof ef.GeometryData:{p.SDtype=Na.SD_DATA_TYPE.GEOMETRY,o.transformationOnly===!1&&this._renderingEngine.geometryLoader.load(i,p,g,d).clone();let v=new bh.Box;if(d)v=i.primitive.computeBoundingBox(e.worldMatrix);else{const _=p.clone();_.applyTransformation(e.worldMatrix);const b=new Gl.Box3().setFromObject(_,!0);v=new bh.Box(Ah.vec3.fromValues(b.min.x,b.min.y,b.min.z),Ah.vec3.fromValues(b.max.x,b.max.y,b.max.z))}e.boundingBox.union(v),e.boundingBoxViewport[this._renderingEngine.id]||(e.boundingBoxViewport[this._renderingEngine.id]=new bh.Box),e.boundingBoxViewport[this._renderingEngine.id].union(v)}break;case i instanceof dgt.ThreejsData:{p.SDtype=Na.SD_DATA_TYPE.THREEJS,p.add(i.obj);const v=new Gl.Box3().setFromObject(i.obj);e.boundingBox.union(new bh.Box(Ah.vec3.fromValues(...v.min.toArray()),Ah.vec3.fromValues(...v.max.toArray()))),e.boundingBoxViewport[this._renderingEngine.id]||(e.boundingBoxViewport[this._renderingEngine.id]=new bh.Box),e.boundingBoxViewport[this._renderingEngine.id].union(new bh.Box(Ah.vec3.fromValues(...v.min.toArray()),Ah.vec3.fromValues(...v.max.toArray())))}break;case i instanceof ef.AbstractMaterialData:p.SDtype=Na.SD_DATA_TYPE.MATERIAL;break;case i instanceof Xle.AbstractLight:p.SDtype=Na.SD_DATA_TYPE.LIGHT,o.transformationOnly===!1&&this._renderingEngine.lightLoader.load(i,p),i instanceof Xle.DirectionalLight&&i.useNodeData===!1&&this._boundingBoxSensitiveData.push({data:i,dataChild:p});break;case i instanceof cgt.AbstractCamera:p.SDtype=Na.SD_DATA_TYPE.CAMERA,o.transformationOnly===!1&&this._renderingEngine.cameraManager.load(i,p);break;case i instanceof ef.HTMLElementAnchorData:p.SDtype=Na.SD_DATA_TYPE.HTML_ELEMENT_ANCHOR,o.transformationOnly===!1&&this._renderingEngine.htmlElementAnchorLoader.load(e,i,l);break;case i instanceof ef.AnimationData:p.SDtype=Na.SD_DATA_TYPE.ANIMATION;break}}updateMorphWeights(e=this._tree.root,n=this._mainNode){if(!(!e||!n)){for(let i=0,o=e.data.length;i<o;i++)if(e.data[i]instanceof ef.GeometryData){const l=e.data[i],d=n.children.find(p=>p.SDid===l.id&&p.SDversion===l.version);d&&d.traverse(p=>{(p instanceof Gl.Points||p instanceof Gl.LineSegments||p instanceof Gl.LineLoop||p instanceof Gl.Line||p instanceof Gl.Mesh)&&(p.morphTargetInfluences=l.morphWeights)})}for(let i=0,o=e.children.length;i<o;i++){const l=e.children[i];if(!l)continue;const d=n.children.find(p=>p.SDid===l.id);d&&this.updateMorphWeights(l,d)}}}updateNode(e=this._tree.root,n=this._mainNode,i={transformationOnly:!1},o=!0,l){const d=n;if(e.boundingBox.reset(),e.boundingBoxViewport[this._renderingEngine.id]||(e.boundingBoxViewport[this._renderingEngine.id]=new bh.Box),e.boundingBoxViewport[this._renderingEngine.id].reset(),i.transformationOnly===!1){const v=e.data.map(E=>E.id);d.children.filter(E=>{if(E instanceof Na.SDData)if(v.includes(E.SDid)){const S=e.data.find(M=>M.id===E.SDid);return!!(S&&S.version!==E.SDversion)}else return!0;else return!1}).forEach(E=>{this.removeData(E),d.remove(E)});const b=e.children.filter(E=>!E.excludeViewports.includes(this._renderingEngine.id)).map(E=>E.id);d.children.filter(E=>{if(E instanceof iG.SDObject&&!(E instanceof Na.SDData))if(b.includes(E.SDid)){const S=e.children.find(M=>M.id===E.SDid);return!!(S&&S.version!==E.SDversion)}else return!0;else return!1}).forEach(E=>{E.traverse(S=>{S instanceof Na.SDData&&this.removeData(S)}),d.remove(E)})}if(e.skinNode===!0){const v=[];for(let b=0;b<e.bones.length;b++)v.push(this.getBone(e.bones[b]));const _=[];for(let b=0;b<e.boneInverses.length;b++)_.push(new Gl.Matrix4().fromArray(e.boneInverses[b]));l=new Gl.Skeleton(v,_)}const p=e.visible&&!e.excludeViewports.includes(this._renderingEngine.id)&&!(e.restrictViewports.length>0&&!e.restrictViewports.includes(this._renderingEngine.id)),g=o&&p;for(let v=0,_=e.data.length;v<_;v++)this.updateData(e,d,e.data[v],i,g,l);for(let v=0,_=e.children.length;v<_;v++){const b=e.children[v],w=d.children.find(E=>E.SDid===b.id);if(w)w.SDversion!==b.version?(this.updateNode(b,w,i,g,l),w.SDversion=b.version):this.updateNode(b,w,i,g,l);else{const E=e.data.find(M=>M instanceof ef.BoneData)?new fgt.SDBone(b.id,b.version):new iG.SDObject(b.id,b.version),S=b.convertedObject[this._renderingEngine.id];b.convertedObject[this._renderingEngine.id]=E,b.updateCallbackConvertedObject&&b.updateCallbackConvertedObject(E,S,this._renderingEngine.id),d.add(E),this.updateNode(b,E,i,g,l)}b.boundingBox.isEmpty()||e.boundingBox.union(b.boundingBox),b.boundingBoxViewport[this._renderingEngine.id]&&!b.boundingBoxViewport[this._renderingEngine.id].isEmpty()&&p&&e.boundingBoxViewport[this._renderingEngine.id].union(b.boundingBoxViewport[this._renderingEngine.id])}d.visible=e.visible&&!e.excludeViewports.includes(this._renderingEngine.id)&&!(e.restrictViewports.length>0&&!e.restrictViewports.includes(this._renderingEngine.id)),d.applyTransformation(e.nodeMatrix)}updateSceneTree(e){if(this._tree.root.version===this._lastRootVersion&&this._renderingEngine.type===rG.RENDERER_TYPE.STANDARD||(this._lastRootVersion=this._tree.root.version,this._lastRendererType=this._renderingEngine.type,this._renderingEngine.closed))return;const n=this._boundingBox.clone();if(this._boundingBox=new bh.Box,this._renderingEngine.lightLoader.shadowMapCount=0,!this._mainNode){this._mainNode=new iG.SDObject(e.id,e.version);const o=e.convertedObject[this._renderingEngine.id];e.convertedObject[this._renderingEngine.id]=this._mainNode,e.updateCallbackConvertedObject&&e.updateCallbackConvertedObject(this._mainNode,o,this._renderingEngine.id),this._scene.add(this._mainNode)}this._boundingBoxSensitiveData=[],this._currentSDTFOverview=this.createSDTFOverview(),this.updateNode(e,this._mainNode),this._boundingBox=e.boundingBoxViewport[this._renderingEngine.id].clone();for(let o=0;o<this._boundingBoxSensitiveData.length;o++)this._renderingEngine.lightLoader.adjustToBoundingBox(this._boundingBoxSensitiveData[o].data,this._boundingBoxSensitiveData[o].dataChild,this._boundingBox);this._boundingBox.min[0]===n.min[0]&&this._boundingBox.min[1]===n.min[1]&&this._boundingBox.min[2]===n.min[2]&&this._boundingBox.max[0]===n.max[0]&&this._boundingBox.max[1]===n.max[1]&&this._boundingBox.max[2]===n.max[2]||(!this._stateEngine.viewportEngines[this._renderingEngine.id].boundingBoxCreated.resolved&&!this._boundingBox.isEmpty()&&this._stateEngine.viewportEngines[this._renderingEngine.id].boundingBoxCreated.resolve(!0),this._eventEngine.emitEvent(K3.EVENTTYPE.SCENE.SCENE_BOUNDING_BOX_CHANGE,{viewportId:this._renderingEngine.id,boundingBox:{min:Ah.vec3.clone(this._boundingBox.min),max:Ah.vec3.clone(this._boundingBox.max)}})),this._boundingBox.isEmpty()&&Object.values(this._stateEngine.sessionEngines).every(o=>o.initialOutputsLoaded.resolved===!0)&&this._eventEngine.emitEvent(K3.EVENTTYPE.SCENE.SCENE_BOUNDING_BOX_EMPTY,{viewportId:this._renderingEngine.id}),this._renderingEngine.renderingManager.evaluateTextureUnitCount(this._renderingEngine.lightLoader.shadowMapCount+this._renderingEngine.materialLoader.maxMapCount);const i=this._renderingEngine.materialLoader.threeJsTextureCache;for(const o in i)i[o].usage===0?(i[o].texture.dispose(),delete i[o]):i[o].initialized===!1&&(this._renderingEngine.renderer.initTexture(i[o].texture),i[o].initialized=!0);this._renderingEngine.renderer.compile(this._renderingEngine.scene,this._hiddenCamera)}collectSDTFItemData(e){for(let n=0,i=e.data.length;n<i;n++)if(e.data[n]instanceof ef.SDTFItemData)return e.data[n];if(e.parent)return this.collectSDTFItemData(e.parent)}createSDTFOverview(e=this._tree.root){const n=new ef.SDTFOverviewData({});for(let i=0,o=e.data.length;i<o;i++)e.data[i]instanceof ef.SDTFOverviewData&&n.merge(e.data[i]);for(let i=0,o=e.children.length;i<o;i++)n.merge(new ef.SDTFOverviewData(this.createSDTFOverview(e.children[i])));return n.overview}getBone(e){let n;return this._mainNode.traverse(i=>{i.SDid===e.id&&(n=i)}),n}injectAttributeData(e,n){const i=this.collectSDTFItemData(e),o={material:new ef.MaterialStandardData({color:this._renderingEngine.defaultMaterialColor,opacity:1}),matrix:Ah.mat4.create()};if(this._renderingEngine.visualizeAttributes){const l=this._renderingEngine.visualizeAttributes(this._currentSDTFOverview,i);this._inputValidator.validateAndError("Viewer.visualizeAttributes",l,"object",!0),this._inputValidator.validateAndError("Viewer.visualizeAttributes",l.matrix,"mat4",!0),o.material=l.material,o.matrix=l.matrix}e.addTransformation({id:"sdtf",matrix:o.matrix}),n instanceof ef.GeometryData&&(n.attributeMaterial=o.material)}removeData(e){if(e.userData.removed!==!0)switch(e.userData.removed=!0,!0){case e.SDtype===Na.SD_DATA_TYPE.GEOMETRY:e.traverse(n=>{if(!(e.id!==n.id&&n.userData.removed===!0)&&(n.userData.removed=!0,n instanceof Gl.Mesh)){this.scene.remove(n),this._renderingEngine.geometryLoader.removeFromGeometryCache(n.geometry.userData.SDid+"_"+n.geometry.userData.SDversion),this._renderingEngine.geometryLoader.removeFromPrimitiveCache(n.geometry.userData.primitiveSDid+"_"+n.geometry.userData.primitiveSDversion),this._renderingEngine.materialLoader.removeFromMaterialCache(n.material.userData.SDid+"_"+n.material.userData.SDversion);const i=[];for(const o in n.material)n.material[o]instanceof Gl.Texture&&(n.material[o].name=o,o!=="envMap"&&(i.includes(n.material[o])||i.push(n.material[o])));for(const o of i)o.userData.cacheKey?this._renderingEngine.materialLoader.threeJsTextureCache[o.userData.cacheKey].usage--:(o.name==="sphericalNormalMap"&&this._renderingEngine.geometryLoader.removeFromGemSphericalMapsCache(n.geometry.userData.primitiveSDid+"_"+n.geometry.userData.primitiveSDversion),o.dispose())}});break;case e.SDtype===Na.SD_DATA_TYPE.THREEJS:break;case e.SDtype===Na.SD_DATA_TYPE.MATERIAL:break;case e.SDtype===Na.SD_DATA_TYPE.LIGHT:e.traverse(n=>{n instanceof Gl.Light&&n.dispose()});break;case e.SDtype===Na.SD_DATA_TYPE.HTML_ELEMENT_ANCHOR:this._renderingEngine.htmlElementAnchorLoader.removeData(e.SDid,e.SDversion);break;case e.SDtype===Na.SD_DATA_TYPE.ANIMATION:break}}}rz.SceneTreeManager=hgt;var sz={},M4={};Object.defineProperty(M4,"__esModule",{value:!0});M4.Font=M4.FontLoader=void 0;const hW=se;class pgt extends hW.Loader{constructor(e){super(e)}load(e,n,i,o){const l=this,d=new hW.FileLoader(this.manager);d.setPath(this.path),d.setRequestHeader(this.requestHeader),d.setWithCredentials(l.withCredentials),d.load(e,function(p){let g;try{g=JSON.parse(p)}catch{console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),g=JSON.parse(p.substring(65,p.length-2))}const v=l.parse(g);n&&n(v)},i,o)}parse(e){return new mK(e)}}M4.FontLoader=pgt;class mK{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,n=100){const i=[],o=mgt(e,n,this.data);for(let l=0,d=o.length;l<d;l++)Array.prototype.push.apply(i,o[l].toShapes());return i}}M4.Font=mK;function mgt(t,e,n){const i=Array.from(t),o=e/n.resolution,l=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*o,d=[];let p=0,g=0;for(let v=0;v<i.length;v++){const _=i[v];if(_===`
`)p=0,g-=l;else{const b=ggt(_,o,p,g,n);p+=b.offsetX,d.push(b.path)}}return d}function ggt(t,e,n,i,o){const l=o.glyphs[t]||o.glyphs["?"];if(!l){console.error('THREE.Font: character "'+t+'" does not exists in font family '+o.familyName+".");return}const d=new hW.ShapePath;let p,g,v,_,b,w,E,S;if(l.o){const M=l._cachedOutline||(l._cachedOutline=l.o.split(" "));for(let k=0,x=M.length;k<x;)switch(M[k++]){case"m":p=M[k++]*e+n,g=M[k++]*e+i,d.moveTo(p,g);break;case"l":p=M[k++]*e+n,g=M[k++]*e+i,d.lineTo(p,g);break;case"q":v=M[k++]*e+n,_=M[k++]*e+i,b=M[k++]*e+n,w=M[k++]*e+i,d.quadraticCurveTo(b,w,v,_);break;case"b":v=M[k++]*e+n,_=M[k++]*e+i,b=M[k++]*e+n,w=M[k++]*e+i,E=M[k++]*e+n,S=M[k++]*e+i,d.bezierCurveTo(b,w,E,S,v,_);break}}return{offsetX:l.ha*e,path:d}}mK.prototype.isFont=!0;var oz={};Object.defineProperty(oz,"__esModule",{value:!0});oz.font=void 0;oz.font={glyphs:{0:{ha:946,x_min:0,x_max:0,o:"m 478 88 b 740 472 651 88 740 221 l 740 528 b 475 908 740 758 643 908 b 207 525 307 908 207 769 l 207 469 b 478 88 207 218 313 88 m 478 -12 b 83 468 240 -12 83 179 l 83 524 b 475 1006 83 817 232 1006 b 863 526 719 1006 863 810 l 863 471 b 478 -12 863 182 722 -12 "},1:{ha:554,x_min:0,x_max:0,o:"m 268 874 l 46 714 l 46 826 l 276 993 l 389 993 l 389 0 l 268 0 "},2:{ha:769,x_min:0,x_max:0,o:"m 26 28 l 421 443 b 564 731 511 539 564 629 b 386 908 564 842 499 908 b 176 688 271 908 196 843 l 64 688 b 386 1006 79 882 197 1006 b 686 726 569 1006 686 897 b 486 365 686 604 608 485 l 213 99 l 692 99 l 692 0 l 26 0 "},3:{ha:839,x_min:0,x_max:0,o:"m 403 -12 b 56 293 192 -12 63 119 l 167 293 b 406 85 178 175 249 85 b 632 276 561 85 632 160 b 422 469 632 404 563 469 l 347 469 l 347 571 l 417 571 b 603 740 546 571 603 632 b 422 907 603 835 543 907 b 203 719 299 907 215 832 l 97 719 b 422 1006 104 876 233 1006 b 721 743 611 1006 721 881 b 564 526 721 631 654 564 b 756 276 681 496 756 414 b 403 -12 756 96 608 -12 "},4:{ha:857,x_min:0,x_max:0,o:"m 551 208 l 54 208 l 54 247 l 508 993 l 669 993 l 669 307 l 807 307 l 807 208 l 669 208 l 669 0 l 551 0 m 551 307 l 551 901 l 207 307 "},5:{ha:815,x_min:0,x_max:0,o:"m 390 -12 b 60 268 176 -12 74 106 l 175 268 b 389 85 194 160 238 85 b 607 325 524 85 607 175 b 399 557 607 465 525 557 b 164 461 283 557 217 521 l 119 461 l 119 993 l 678 993 l 678 889 l 219 889 l 219 586 b 422 654 260 624 328 654 b 731 325 600 654 731 528 b 390 -12 731 115 579 -12 "},6:{ha:860,x_min:0,x_max:0,o:"m 440 -12 b 83 439 169 -12 83 190 l 83 463 b 472 1006 83 819 244 1006 b 763 765 626 1006 736 925 l 647 765 b 464 907 625 857 575 907 b 203 510 314 907 208 772 b 458 644 250 590 343 644 b 783 319 656 644 783 501 b 440 -12 783 121 650 -12 m 440 82 b 660 314 571 82 660 174 b 439 550 660 457 574 550 b 211 331 306 550 211 460 b 440 82 211 168 307 82 "},7:{ha:729,x_min:0,x_max:0,o:"m 549 896 l 44 896 l 44 993 l 699 993 l 699 976 l 326 0 l 203 0 "},8:{ha:843,x_min:0,x_max:0,o:"m 422 -12 b 79 282 260 -12 79 85 b 267 539 79 415 161 501 b 117 747 172 575 117 650 b 422 1006 117 908 269 1006 b 726 750 576 1006 726 906 b 574 540 726 650 665 581 b 764 285 689 499 764 413 b 422 -12 764 86 590 -12 m 422 86 b 640 289 544 86 640 157 b 425 486 640 419 543 486 b 203 286 307 486 203 418 b 422 86 203 156 307 86 m 426 582 b 604 749 532 582 604 643 b 422 911 604 844 525 911 b 239 746 319 911 239 849 b 426 582 239 642 325 582 "},9:{ha:861,x_min:0,x_max:0,o:"m 403 -11 b 83 244 219 -11 110 85 l 200 244 b 406 88 222 147 278 88 b 660 482 564 88 657 218 b 403 350 613 401 517 350 b 76 675 210 350 76 488 b 419 1007 76 874 210 1007 b 776 563 654 1007 776 849 l 776 500 b 403 -11 776 171 640 -11 m 421 444 b 649 660 554 444 649 531 b 419 913 649 822 553 913 b 200 681 289 913 200 821 b 421 444 200 538 286 444 "}," ":{ha:368,x_min:0,x_max:0,o:""},"!":{ha:397,x_min:0,x_max:0,o:"m 199 -7 b 110 82 150 -7 110 32 b 199 171 110 132 150 171 b 288 82 247 171 288 132 b 199 -7 288 32 247 -7 m 136 993 l 264 993 l 244 281 l 156 281 "},'"':{ha:521,x_min:0,x_max:0,o:"m 85 993 l 210 993 l 189 653 l 106 653 m 311 993 l 436 993 l 415 653 l 332 653 "},"#":{ha:699,x_min:0,x_max:0,o:"m 386 392 l 251 392 l 215 138 l 121 138 l 157 392 l 42 392 l 42 489 l 172 489 l 199 672 l 81 672 l 81 769 l 213 769 l 246 993 l 340 993 l 307 769 l 442 769 l 475 993 l 569 993 l 536 769 l 657 769 l 657 672 l 522 672 l 496 489 l 618 489 l 618 392 l 481 392 l 444 138 l 350 138 m 267 489 l 401 489 l 428 672 l 293 672 "},$:{ha:871,x_min:0,x_max:0,o:"m 396 -11 b 63 303 158 6 79 143 l 179 303 b 396 83 193 194 226 99 l 396 469 b 103 736 213 504 103 569 b 396 1004 103 881 222 993 l 396 1129 l 478 1129 l 478 1003 b 767 732 644 988 749 893 l 658 732 b 478 908 638 839 581 894 l 478 561 b 788 281 682 525 788 460 b 478 -11 788 122 658 0 l 478 -187 l 396 -187 m 672 272 b 478 456 672 375 629 424 l 478 83 b 672 272 589 94 672 169 m 213 747 b 396 575 213 660 242 607 l 396 910 b 213 747 279 900 213 833 "},"%":{ha:1089,x_min:0,x_max:0,o:"m 275 622 b 397 767 350 622 397 674 b 275 911 397 856 350 911 b 153 765 201 911 153 860 b 275 622 153 671 201 622 m 275 532 b 47 764 157 532 47 629 b 275 1001 47 901 154 1001 b 503 767 399 1001 503 901 b 275 532 503 629 394 532 m 794 993 l 900 993 l 293 0 l 188 0 m 814 79 b 936 224 889 79 936 131 b 814 368 936 313 889 368 b 692 222 740 368 692 317 b 814 79 692 128 740 79 m 814 -11 b 586 221 696 -11 586 86 b 814 458 586 358 693 458 b 1042 224 938 458 1042 358 b 814 -11 1042 86 933 -11 "},"&":{ha:953,x_min:0,x_max:0,o:"m 732 203 l 899 0 l 758 0 l 660 119 b 385 -10 597 47 510 -10 b 71 263 203 -10 71 99 b 299 561 71 419 171 499 b 211 771 240 636 211 704 b 454 999 211 921 329 999 b 671 794 576 999 671 914 b 458 538 671 674 585 592 l 667 283 l 788 513 l 894 513 m 389 85 b 600 193 468 85 540 121 l 353 494 b 188 274 256 447 188 390 b 389 85 188 154 264 85 m 322 769 b 408 601 322 719 354 669 b 563 797 519 651 563 701 b 450 908 563 861 517 908 b 322 769 381 908 322 867 "},"'":{ha:294,x_min:0,x_max:0,o:"m 85 993 l 210 993 l 189 653 l 106 653 "},"(":{ha:447,x_min:0,x_max:0,o:"m 304 -206 b 74 433 176 -56 74 157 b 304 1074 74 710 176 924 l 419 1074 b 194 433 294 918 194 719 b 419 -206 194 147 294 -50 l 304 -206 "},")":{ha:447,x_min:0,x_max:0,o:"m 28 -201 b 253 439 153 -46 253 153 b 28 1078 253 725 153 922 l 143 1078 b 374 439 271 928 374 715 b 143 -201 374 163 271 -51 l 28 -201 "},"*":{ha:586,x_min:0,x_max:0,o:"m 114 625 l 229 779 l 58 819 l 89 913 l 253 846 l 243 1032 l 344 1032 l 335 846 l 497 913 l 528 819 l 356 779 l 471 625 l 393 568 l 290 735 l 193 568 "},"+":{ha:721,x_min:0,x_max:0,o:"m 310 426 l 50 426 l 50 524 l 310 524 l 310 804 l 411 804 l 411 524 l 671 524 l 671 426 l 411 426 l 411 146 l 310 146 "},",":{ha:392,x_min:0,x_max:0,o:"m 50 -132 l 183 172 l 296 119 l 125 -171 "},"-":{ha:464,x_min:0,x_max:0,o:"m 83 436 l 381 436 l 381 328 l 83 328 "},".":{ha:392,x_min:0,x_max:0,o:"m 196 -7 b 107 82 147 -7 107 32 b 196 171 107 132 147 171 b 285 82 244 171 285 132 b 196 -7 285 32 244 -7 "},"/":{ha:560,x_min:0,x_max:0,o:"m 413 1078 l 518 1078 l 114 -206 l 8 -206 "},":":{ha:406,x_min:0,x_max:0,o:"m 203 -7 b 114 82 154 -7 114 32 b 203 171 114 132 154 171 b 292 82 251 171 292 132 b 203 -7 292 32 251 -7 m 203 406 b 114 494 154 406 114 444 b 203 583 114 544 154 583 b 292 494 251 583 292 544 b 203 406 292 444 251 406 "},";":{ha:406,x_min:0,x_max:0,o:"m 29 -132 l 163 172 l 275 119 l 104 -171 m 215 406 b 126 494 167 406 126 444 b 215 583 126 544 167 583 b 304 494 264 583 304 544 b 215 406 304 444 264 406 "},"<":{ha:700,x_min:0,x_max:0,o:"m 74 433 l 74 461 l 607 763 l 607 651 l 242 447 l 607 243 l 607 132 "},"=":{ha:672,x_min:0,x_max:0,o:"m 56 372 l 617 372 l 617 272 l 56 272 m 56 622 l 617 622 l 617 522 l 56 522 "},">":{ha:700,x_min:0,x_max:0,o:"m 93 243 l 458 447 l 93 651 l 93 763 l 626 461 l 626 433 l 93 132 "},"?":{ha:679,x_min:0,x_max:0,o:"m 249 350 b 392 600 249 463 322 532 b 493 771 446 654 493 704 b 344 910 493 853 447 910 b 160 729 240 910 169 839 l 51 729 b 346 1006 61 892 176 1006 b 610 775 535 1006 610 892 b 474 543 610 672 540 607 b 351 340 411 483 351 425 l 351 281 l 249 281 m 297 -7 b 208 82 249 -7 208 32 b 297 171 208 132 249 171 b 386 82 346 171 386 132 b 297 -7 386 32 346 -7 "},"@":{ha:1271,x_min:0,x_max:0,o:"m 638 -204 b 63 361 267 -204 63 65 b 656 956 63 701 335 956 b 1208 447 988 956 1208 733 b 947 93 1208 186 1058 93 b 788 213 835 93 799 140 b 581 83 747 140 667 83 b 357 325 446 83 357 175 b 631 647 357 511 479 647 b 799 553 729 647 779 600 l 808 636 l 924 636 l 882 286 b 949 176 872 213 896 176 b 1108 444 1028 176 1108 256 b 656 864 1108 693 942 864 b 169 364 375 864 169 658 b 638 -112 169 111 328 -112 b 965 0 789 -112 879 -74 l 1072 0 b 638 -204 1001 -121 838 -204 m 606 172 b 783 399 692 172 783 251 b 639 556 783 504 729 556 b 475 326 551 556 475 472 b 606 172 475 229 531 172 "},A:{ha:936,x_min:0,x_max:0,o:"m 392 993 l 550 993 l 886 0 l 767 0 l 669 286 l 260 286 l 164 0 l 50 0 m 293 382 l 638 382 l 465 893 "},B:{ha:864,x_min:0,x_max:0,o:"m 125 993 l 424 993 b 743 736 608 993 743 932 l 743 731 b 593 521 743 640 707 560 b 792 283 738 486 792 413 l 792 278 b 465 0 792 90 664 0 l 125 0 m 463 94 b 674 279 607 94 674 158 l 674 285 b 446 465 674 407 606 465 l 243 465 l 243 94 m 424 560 b 625 735 569 560 625 613 l 625 740 b 421 899 625 853 560 899 l 243 899 l 243 560 "},C:{ha:1014,x_min:0,x_max:0,o:"m 540 -12 b 76 490 253 -12 76 185 l 76 501 b 543 1008 76 796 274 1008 b 946 683 750 1008 925 899 l 826 683 b 544 913 801 835 714 913 b 201 503 339 913 201 753 l 201 492 b 543 86 201 239 329 86 b 843 329 706 86 818 168 l 956 329 b 540 -12 921 100 763 -12 "},D:{ha:967,x_min:0,x_max:0,o:"m 382 99 b 765 494 638 99 765 251 l 765 506 b 381 896 765 735 654 896 l 246 896 l 246 99 m 125 993 l 388 993 b 890 506 729 993 890 782 l 890 493 b 385 0 890 218 732 0 l 125 0 "},E:{ha:786,x_min:0,x_max:0,o:"m 125 993 l 704 993 l 704 894 l 246 894 l 246 557 l 615 557 l 615 458 l 246 458 l 246 99 l 729 99 l 729 0 l 125 0 "},F:{ha:758,x_min:0,x_max:0,o:"m 125 993 l 706 993 l 706 894 l 246 894 l 246 543 l 604 543 l 604 444 l 246 444 l 246 0 l 125 0 "},G:{ha:1065,x_min:0,x_max:0,o:"m 557 -12 b 76 490 251 -12 76 200 l 76 501 b 557 1008 76 792 272 1008 b 961 693 754 1008 931 917 l 840 693 b 560 913 813 851 704 913 b 201 503 332 913 201 746 l 201 492 b 557 85 201 246 324 85 b 869 401 772 85 865 225 l 579 401 l 579 501 l 988 501 l 988 428 b 557 -12 988 140 811 -12 "},H:{ha:1014,x_min:0,x_max:0,o:"m 125 993 l 246 993 l 246 543 l 768 543 l 768 993 l 889 993 l 889 0 l 768 0 l 768 442 l 246 442 l 246 0 l 125 0 "},I:{ha:385,x_min:0,x_max:0,o:"m 132 993 l 253 993 l 253 0 l 132 0 "},J:{ha:583,x_min:0,x_max:0,o:"m 192 -12 b 53 14 117 -12 79 0 l 53 114 b 185 86 89 99 125 86 b 346 275 283 86 346 142 l 346 993 l 467 993 l 467 269 b 192 -12 467 71 343 -12 "},K:{ha:856,x_min:0,x_max:0,o:"m 125 993 l 246 993 l 246 515 l 678 994 l 813 994 l 371 511 l 835 0 l 689 0 l 246 485 l 246 0 l 125 0 "},L:{ha:743,x_min:0,x_max:0,o:"m 125 993 l 246 993 l 246 99 l 700 99 l 700 0 l 125 0 "},M:{ha:1189,x_min:0,x_max:0,o:"m 125 993 l 293 993 l 600 219 l 897 993 l 1064 993 l 1064 0 l 943 0 l 943 836 l 614 0 l 576 0 l 236 836 l 236 0 l 125 0 "},N:{ha:1006,x_min:0,x_max:0,o:"m 125 993 l 282 993 l 765 172 l 765 993 l 881 993 l 881 0 l 742 0 l 240 851 l 240 0 l 125 0 "},O:{ha:1126,x_min:0,x_max:0,o:"m 568 88 b 925 494 789 88 925 254 l 925 506 b 565 908 925 728 794 908 b 201 503 335 908 201 739 l 201 492 b 568 88 201 251 361 88 m 568 -12 b 76 490 275 -12 76 213 l 76 501 b 565 1006 76 783 274 1006 b 1050 504 857 1006 1050 783 l 1050 493 b 568 -12 1050 213 857 -12 "},P:{ha:807,x_min:0,x_max:0,o:"m 125 993 l 407 993 b 754 703 597 993 754 910 l 754 697 b 407 404 754 486 596 404 l 246 404 l 246 0 l 125 0 m 415 500 b 633 697 557 500 633 569 l 633 703 b 415 896 633 843 550 896 l 246 896 l 246 500 "},Q:{ha:1126,x_min:0,x_max:0,o:"m 776 32 b 568 -12 715 3 644 -12 b 76 490 275 -12 76 213 l 76 501 b 565 1006 76 783 274 1006 b 1050 504 857 1006 1050 783 l 1050 493 b 864 86 1050 325 981 178 l 989 -53 l 915 -124 m 568 88 b 704 113 618 88 664 96 l 593 238 l 667 308 l 793 165 b 925 494 878 238 925 353 l 925 506 b 565 908 925 728 794 908 b 201 503 335 908 201 739 l 201 492 b 568 88 201 251 361 88 "},R:{ha:872,x_min:0,x_max:0,o:"m 125 993 l 424 993 b 771 717 614 993 771 915 l 771 711 b 525 440 771 547 661 467 l 829 0 l 694 0 l 399 432 l 246 432 l 246 0 l 125 0 m 432 528 b 650 711 574 528 650 589 l 650 717 b 432 896 650 851 567 896 l 246 896 l 246 528 "},S:{ha:871,x_min:0,x_max:0,o:"m 446 -12 b 67 303 181 -12 85 133 l 183 303 b 446 85 199 185 246 85 b 672 272 574 85 672 160 b 432 463 672 385 621 432 b 100 736 224 494 100 560 b 419 1006 100 889 232 1006 b 761 732 618 1006 742 908 l 653 732 b 419 908 629 857 557 908 b 213 747 283 908 213 840 b 451 569 213 650 249 600 b 789 281 672 535 789 468 b 446 -12 789 114 643 -12 "},T:{ha:779,x_min:0,x_max:0,o:"m 329 894 l 40 894 l 40 993 l 739 993 l 739 894 l 450 894 l 450 0 l 329 0 "},U:{ha:967,x_min:0,x_max:0,o:"m 474 -12 b 117 363 246 -12 117 121 l 117 993 l 238 993 l 238 376 b 476 88 238 168 311 88 b 729 394 635 88 729 151 l 729 993 l 850 993 l 850 378 b 474 -12 850 136 729 -12 "},V:{ha:908,x_min:0,x_max:0,o:"m 42 993 l 161 993 l 457 117 l 753 993 l 867 993 l 524 0 l 379 0 "},W:{ha:1289,x_min:0,x_max:0,o:"m 47 993 l 171 993 l 372 192 l 606 993 l 692 993 l 925 189 l 1129 993 l 1242 993 l 983 0 l 872 0 l 647 785 l 415 0 l 306 0 "},X:{ha:913,x_min:0,x_max:0,o:"m 390 510 l 85 993 l 218 993 l 465 603 l 711 993 l 835 993 l 526 510 l 850 0 l 714 0 l 449 418 l 183 0 l 63 0 "},Y:{ha:831,x_min:0,x_max:0,o:"m 364 433 l 32 993 l 168 993 l 428 532 l 678 993 l 799 993 l 485 432 l 485 0 l 364 0 "},Z:{ha:826,x_min:0,x_max:0,o:"m 39 19 l 601 894 l 89 894 l 89 993 l 768 993 l 768 975 l 221 103 l 760 103 l 760 0 l 39 0 "},"[":{ha:494,x_min:0,x_max:0,o:"m 122 1078 l 433 1078 l 433 986 l 238 986 l 238 -114 l 433 -114 l 433 -206 l 122 -206 "},"\\":{ha:560,x_min:0,x_max:0,o:"m 42 1078 l 147 1078 l 551 -206 l 446 -206 "},"]":{ha:494,x_min:0,x_max:0,o:"m 61 -114 l 257 -114 l 257 986 l 61 986 l 61 1078 l 372 1078 l 372 -206 l 61 -206 "},"^":{ha:704,x_min:0,x_max:0,o:"m 293 993 l 411 993 l 643 567 l 526 567 l 350 894 l 175 567 l 61 567 "},_:{ha:547,x_min:0,x_max:0,o:"m -1 -128 l 549 -128 l 549 -219 l -1 -219 "},"`":{ha:556,x_min:0,x_max:0,o:"m 101 1056 l 246 1056 l 332 851 l 246 851 "},a:{ha:750,x_min:0,x_max:0,o:"m 299 -12 b 57 201 164 -12 57 53 b 421 426 57 369 235 426 l 525 426 l 525 479 b 369 643 525 594 481 643 b 203 513 269 643 214 601 l 88 513 b 375 739 103 678 235 739 b 640 479 514 739 640 682 l 640 0 l 525 0 l 525 92 b 299 -12 471 24 406 -12 m 310 79 b 525 254 432 79 525 142 l 525 344 l 425 344 b 172 201 279 344 172 308 b 310 79 172 126 208 79 "},b:{ha:871,x_min:0,x_max:0,o:"m 478 -12 b 232 119 360 -12 274 47 l 232 0 l 117 0 l 117 1074 l 232 1074 l 232 604 b 478 739 274 675 372 739 b 808 374 668 739 808 600 l 808 363 b 478 -12 808 140 678 -12 m 467 83 b 689 357 611 83 689 181 l 689 368 b 465 643 689 551 588 643 b 228 368 331 643 228 554 l 228 357 b 467 83 228 171 325 83 "},c:{ha:792,x_min:0,x_max:0,o:"m 418 -12 b 63 356 215 -12 63 131 l 63 367 b 415 739 63 589 221 739 b 731 485 567 739 708 669 l 617 485 b 415 643 599 600 515 643 b 182 367 283 643 182 538 l 182 356 b 419 83 182 178 279 83 b 628 261 522 83 615 143 l 735 261 b 418 -12 719 104 593 -12 "},d:{ha:871,x_min:0,x_max:0,o:"m 390 -12 b 63 349 200 -12 63 122 l 63 360 b 401 739 63 582 201 739 b 639 610 522 739 597 681 l 639 1074 l 754 1074 l 754 0 l 639 0 l 639 125 b 390 -12 597 54 496 -12 m 403 83 b 643 358 538 83 643 172 l 643 369 b 413 643 643 556 554 643 b 182 365 268 643 182 542 l 182 354 b 403 83 182 171 281 83 "},e:{ha:789,x_min:0,x_max:0,o:"m 414 -12 b 63 356 208 -12 63 132 l 63 367 b 403 739 63 586 203 739 b 729 378 571 739 729 638 l 729 340 l 182 340 b 415 83 188 175 267 83 b 608 210 528 83 593 125 l 724 210 b 414 -12 699 64 578 -12 m 611 433 b 403 643 600 583 522 643 b 186 433 285 643 206 563 "},f:{ha:481,x_min:0,x_max:0,o:"m 142 629 l 38 629 l 38 726 l 142 726 l 142 844 b 358 1078 142 992 214 1078 b 444 1064 396 1078 415 1074 l 444 967 b 363 982 424 975 394 982 b 257 857 288 982 257 931 l 257 726 l 435 726 l 435 629 l 257 629 l 257 0 l 142 0 "},g:{ha:871,x_min:0,x_max:0,o:"m 407 -265 b 78 -42 192 -265 97 -164 l 196 -42 b 406 -168 213 -125 282 -168 b 639 56 549 -168 639 -100 l 639 161 b 393 24 597 90 499 24 b 63 368 203 24 63 168 l 63 378 b 401 739 63 575 201 739 b 639 610 522 739 597 681 l 639 726 l 754 726 l 754 49 b 407 -265 753 -162 610 -265 m 406 119 b 643 376 540 119 643 214 l 643 386 b 413 643 643 549 554 643 b 182 383 268 643 182 536 l 182 372 b 406 119 182 214 283 119 "},h:{ha:831,x_min:0,x_max:0,o:"m 117 1074 l 232 1074 l 232 611 b 465 739 265 679 346 739 b 721 446 615 739 721 657 l 721 0 l 606 0 l 606 454 b 435 639 606 582 551 639 b 232 440 328 639 232 571 l 232 0 l 117 0 "},i:{ha:354,x_min:0,x_max:0,o:"m 119 726 l 235 726 l 235 0 l 119 0 m 175 878 b 99 954 133 878 99 913 b 175 1031 99 996 133 1031 b 251 954 217 1031 251 996 b 175 878 251 913 217 878 "},j:{ha:354,x_min:0,x_max:0,o:"m 13 -168 b 119 -56 94 -161 119 -119 l 119 726 l 235 726 l 235 -46 b 13 -265 235 -185 174 -260 m 175 878 b 99 954 133 878 99 913 b 175 1031 99 996 133 1031 b 251 954 217 1031 251 996 b 175 878 251 913 217 878 "},k:{ha:717,x_min:0,x_max:0,o:"m 117 1074 l 232 1074 l 232 392 l 533 726 l 668 726 l 357 389 l 694 0 l 554 0 l 232 376 l 232 0 l 117 0 "},l:{ha:356,x_min:0,x_max:0,o:"m 119 1074 l 236 1074 l 236 0 l 119 0 "},m:{ha:1264,x_min:0,x_max:0,o:"m 117 726 l 232 726 l 232 615 b 449 739 265 683 344 739 b 661 603 542 739 624 700 b 910 739 711 697 819 739 b 1154 450 1040 739 1154 661 l 1154 0 l 1039 0 l 1039 458 b 885 639 1039 586 985 639 b 693 444 790 639 693 575 l 693 0 l 578 0 l 578 458 b 424 639 578 586 524 639 b 232 444 329 639 232 575 l 232 0 l 117 0 "},n:{ha:831,x_min:0,x_max:0,o:"m 117 726 l 232 726 l 232 611 b 465 739 265 679 346 739 b 721 446 615 739 721 657 l 721 0 l 606 0 l 606 454 b 435 639 606 582 551 639 b 232 440 328 639 232 571 l 232 0 l 117 0 "},o:{ha:839,x_min:0,x_max:0,o:"m 419 83 b 657 357 565 83 657 193 l 657 367 b 419 643 657 535 564 643 b 182 368 274 643 182 535 l 182 357 b 419 83 182 192 272 83 m 418 -12 b 63 357 211 -12 63 144 l 63 368 b 419 739 63 586 214 739 b 776 369 625 739 776 588 l 776 358 b 418 -12 776 139 625 -12 "},p:{ha:871,x_min:0,x_max:0,o:"m 117 726 l 232 726 l 232 604 b 478 739 274 675 372 739 b 808 374 668 739 808 600 l 808 363 b 478 -12 808 140 678 -12 b 232 119 358 -12 274 47 l 232 -253 l 117 -253 m 467 83 b 689 357 611 83 689 181 l 689 368 b 465 643 689 551 588 643 b 228 368 331 643 228 554 l 228 357 b 467 83 228 171 325 83 "},q:{ha:871,x_min:0,x_max:0,o:"m 639 125 b 390 -12 597 54 496 -12 b 63 349 200 -12 63 122 l 63 360 b 401 739 63 582 201 739 b 639 610 522 739 597 681 l 639 726 l 754 726 l 754 -253 l 639 -253 m 403 83 b 643 358 538 83 643 172 l 643 369 b 413 643 643 556 554 643 b 182 365 268 643 182 542 l 182 354 b 403 83 182 171 281 83 "},r:{ha:522,x_min:0,x_max:0,o:"m 117 726 l 232 726 l 232 596 b 471 739 278 678 340 735 l 471 631 b 232 399 325 624 232 578 l 232 0 l 117 0 "},s:{ha:667,x_min:0,x_max:0,o:"m 342 -12 b 57 224 168 -12 64 75 l 169 224 b 340 83 178 138 224 83 b 499 199 450 83 499 121 b 329 321 499 275 442 300 b 76 535 140 356 76 408 b 322 739 76 669 208 739 b 585 529 453 739 565 686 l 474 529 b 321 643 457 608 413 643 b 183 539 238 643 183 601 b 353 424 183 474 219 447 b 608 208 503 396 608 363 b 342 -12 608 76 518 -12 "},t:{ha:493,x_min:0,x_max:0,o:"m 338 -10 b 142 182 206 -10 142 68 l 142 629 l 38 629 l 38 726 l 142 726 l 142 892 l 257 892 l 257 726 l 426 726 l 426 629 l 257 629 l 257 193 b 347 88 257 122 289 88 b 436 103 383 88 411 93 l 436 6 b 338 -10 413 -3 385 -10 "},u:{ha:825,x_min:0,x_max:0,o:"m 363 -12 b 110 267 218 -12 110 67 l 110 726 l 225 726 l 225 272 b 393 88 225 144 279 88 b 593 286 496 88 593 156 l 593 726 l 708 726 l 708 0 l 593 0 l 593 115 b 363 -12 560 47 479 -12 "},v:{ha:742,x_min:0,x_max:0,o:"m 35 726 l 160 726 l 375 117 l 588 726 l 707 726 l 446 0 l 299 0 "},w:{ha:1103,x_min:0,x_max:0,o:"m 39 726 l 164 726 l 333 142 l 510 726 l 610 726 l 775 142 l 946 726 l 1064 726 l 838 0 l 710 0 l 558 544 l 389 0 l 263 0 "},x:{ha:733,x_min:0,x_max:0,o:"m 299 374 l 56 726 l 190 726 l 368 463 l 544 726 l 669 726 l 429 382 l 694 0 l 558 0 l 363 293 l 163 0 l 39 0 "},y:{ha:735,x_min:0,x_max:0,o:"m 319 75 l 35 726 l 158 726 l 381 206 l 582 726 l 700 726 l 299 -253 l 182 -253 "},z:{ha:671,x_min:0,x_max:0,o:"m 29 17 l 458 629 l 71 629 l 71 726 l 636 726 l 636 706 l 217 101 l 631 101 l 631 0 l 29 0 "},"{":{ha:529,x_min:0,x_max:0,o:"m 468 -204 b 193 85 263 -204 156 -125 l 219 229 b 56 396 235 311 197 396 l 56 482 b 219 649 197 482 235 567 l 193 793 b 468 1082 156 1003 263 1082 l 468 994 b 303 790 332 993 278 949 l 329 631 b 193 439 346 526 286 463 b 329 247 286 415 346 351 l 303 88 b 468 -117 278 -71 332 -115 l 468 -204 "},"|":{ha:351,x_min:0,x_max:0,o:"m 129 1078 l 222 1078 l 222 -206 l 129 -206 "},"}":{ha:529,x_min:0,x_max:0,o:"m 61 -117 b 226 88 197 -115 251 -71 l 200 247 b 336 439 183 351 243 415 b 200 631 243 463 183 526 l 226 790 b 61 994 251 949 197 993 l 61 1082 b 336 793 267 1082 374 1003 l 310 649 b 474 482 294 567 332 482 l 474 396 b 310 229 332 396 294 311 l 336 85 b 61 -204 374 -125 267 -204 "},"~":{ha:618,x_min:0,x_max:0,o:"m 61 310 b 208 488 71 431 139 488 b 403 417 300 488 357 417 b 465 490 432 417 461 440 l 557 490 b 414 313 549 367 479 313 b 217 383 318 313 261 383 b 153 310 186 383 160 358 l 61 310 "}," ":{ha:368,x_min:0,x_max:0,o:""},"":{ha:400,x_min:0,x_max:0,o:"m 154 550 l 243 550 l 263 -162 l 135 -162 m 200 660 b 111 749 151 660 111 699 b 200 838 111 799 151 838 b 289 749 249 838 289 799 b 200 660 289 699 249 660 "},"":{ha:785,x_min:0,x_max:0,o:"m 371 -10 b 63 356 190 8 63 147 l 63 367 b 371 736 63 572 196 715 l 371 874 l 453 874 l 453 736 b 731 485 589 725 710 653 l 617 485 b 453 640 601 583 535 629 l 453 86 b 628 261 540 99 617 157 l 735 261 b 453 -10 721 115 608 4 l 453 -187 l 371 -187 m 182 356 b 371 86 182 197 256 106 l 371 639 b 182 367 260 618 182 518 l 182 356 "},"":{ha:828,x_min:0,x_max:0,o:"m 67 524 l 157 524 b 132 719 143 582 132 646 b 438 1006 132 889 265 1006 b 735 743 615 1006 722 901 l 618 743 b 438 907 599 849 553 907 b 254 718 331 907 254 832 b 278 524 254 643 265 582 l 574 524 l 574 438 l 297 438 b 318 254 308 382 318 324 b 300 164 318 221 311 190 b 539 89 392 142 479 89 b 665 208 613 89 660 118 l 767 208 b 553 -12 758 81 683 -12 b 244 75 431 -12 324 75 b 154 0 183 75 158 36 l 53 0 b 196 169 58 63 100 151 b 213 256 206 193 213 221 b 181 438 213 317 197 375 l 67 438 "},"":{ha:800,x_min:0,x_max:0,o:"m 117 471 l 333 471 l 39 993 l 169 993 l 413 543 l 644 993 l 761 993 l 483 471 l 701 471 l 701 390 l 468 390 l 468 282 l 701 282 l 701 201 l 468 201 l 468 0 l 350 0 l 350 201 l 117 201 l 117 282 l 350 282 l 350 390 l 117 390 "},"":{ha:361,x_min:0,x_max:0,o:"m 129 413 l 222 413 l 222 -206 l 129 -206 m 129 1078 l 222 1078 l 222 510 l 129 510 "},"":{ha:749,x_min:0,x_max:0,o:"m 369 -190 b 108 36 215 -190 111 -108 l 226 36 b 367 -93 233 -43 269 -93 b 508 32 464 -93 508 -37 b 313 181 508 104 474 140 b 58 415 160 219 58 278 b 215 603 58 507 118 575 b 131 779 160 642 131 693 b 378 1006 131 911 250 1006 b 632 788 529 1006 628 928 l 515 788 b 381 908 510 861 478 908 b 242 782 283 908 242 851 b 428 636 242 710 274 675 b 690 397 581 597 690 549 b 538 211 690 318 635 242 b 619 35 590 172 619 118 b 369 -190 619 -90 508 -190 m 453 257 b 576 388 538 278 576 324 b 403 528 576 468 514 499 l 293 557 b 172 425 221 542 172 493 b 349 286 172 351 232 318 l 453 257 "},"":{ha:556,x_min:0,x_max:0,o:"m 147 881 b 74 954 107 881 74 914 b 147 1028 74 994 107 1028 b 221 954 188 1028 221 994 b 147 881 221 914 188 881 m 408 881 b 335 954 368 881 335 914 b 408 1028 335 994 368 1028 b 482 954 449 1028 482 994 b 408 881 482 914 449 881 "},"":{ha:1172,x_min:0,x_max:0,o:"m 588 215 b 321 490 419 215 321 322 l 321 501 b 588 778 321 667 433 778 b 822 586 713 778 811 715 l 717 586 b 588 694 706 657 664 694 b 431 501 492 694 431 624 l 431 492 b 588 300 431 369 488 300 b 728 415 663 300 717 338 l 828 415 b 588 215 814 282 718 215 m 585 46 b 1029 499 821 46 1029 231 b 588 947 1029 763 828 947 b 143 496 344 947 143 761 b 585 46 143 228 353 46 m 585 -12 b 76 496 303 -12 76 208 b 588 1006 76 779 301 1006 b 1096 499 876 1006 1096 781 b 585 -12 1096 210 871 -12 "},:{ha:582,x_min:0,x_max:0,o:"m 236 403 b 42 575 129 403 42 456 b 336 757 42 710 179 757 l 417 757 l 417 793 b 299 918 417 879 383 918 b 174 824 222 918 183 885 l 67 824 b 304 1006 78 953 183 1006 b 525 794 425 1006 525 957 l 525 414 l 417 414 l 417 486 b 236 403 376 433 324 403 m 256 488 b 417 618 347 488 417 533 l 417 682 l 339 682 b 151 578 229 682 151 656 b 256 488 151 521 179 488 "},"":{ha:694,x_min:0,x_max:0,o:"m 82 363 l 263 610 l 376 610 l 203 363 l 376 115 l 263 115 m 329 363 l 510 610 l 624 610 l 450 363 l 624 115 l 510 115 "},"":{ha:714,x_min:0,x_max:0,o:"m 251 854 l 358 854 b 475 763 429 854 475 825 l 475 761 b 413 679 475 715 449 690 l 493 550 l 424 550 l 350 668 l 318 668 l 318 550 l 251 550 m 357 714 b 410 758 392 714 410 729 l 410 760 b 357 803 410 792 390 803 l 318 803 l 318 714 m 357 442 b 610 699 500 442 610 547 b 357 956 610 850 504 956 b 104 697 210 956 104 849 b 357 442 104 544 215 442 m 357 392 b 49 697 186 392 49 524 b 357 1006 49 868 185 1006 b 665 699 532 1006 665 869 b 357 392 665 525 529 392 "},"":{ha:556,x_min:0,x_max:0,o:"m 96 989 l 460 989 l 460 900 l 96 900 "},"":{ha:593,x_min:0,x_max:0,o:"m 297 644 b 421 783 371 644 421 706 b 297 925 421 864 371 925 b 168 783 222 925 168 864 b 297 644 168 706 222 644 m 297 564 b 69 783 171 564 69 664 b 297 1006 69 906 171 1006 b 524 783 422 1006 524 906 b 297 564 524 664 422 564 "},"":{ha:721,x_min:0,x_max:0,o:"m 310 454 l 50 454 l 50 551 l 310 551 l 310 804 l 411 804 l 411 551 l 671 551 l 671 454 l 411 454 l 411 201 l 310 201 m 50 97 l 671 97 l 671 0 l 50 0 "},"":{ha:397,x_min:0,x_max:0,o:"m 11 533 l 189 722 b 264 857 235 769 264 813 b 194 926 264 900 239 926 b 111 835 149 926 119 900 l 26 835 b 197 999 32 939 96 999 b 356 858 297 999 356 943 b 264 689 356 796 319 743 l 163 589 l 360 589 l 360 518 l 11 518 "},"":{ha:432,x_min:0,x_max:0,o:"m 211 511 b 29 665 96 511 32 572 l 114 665 b 208 581 119 617 146 581 b 296 656 268 581 296 610 b 213 731 296 706 268 731 l 176 731 l 176 796 l 211 796 b 289 864 264 796 289 821 b 217 929 289 901 265 929 b 131 853 168 929 136 900 l 46 853 b 218 999 51 938 115 999 b 378 871 319 999 378 943 b 299 768 378 818 346 785 b 392 654 354 756 392 717 b 211 511 392 565 322 511 "},"":{ha:556,x_min:0,x_max:0,o:"m 310 1056 l 454 1056 l 310 851 l 224 851 "},"":{ha:817,x_min:0,x_max:0,o:"m 383 481 l 364 481 b 63 732 188 481 63 564 b 364 993 63 908 193 993 l 686 993 l 686 -139 l 590 -139 l 590 914 l 478 914 l 478 -139 l 383 -139 "},"":{ha:392,x_min:0,x_max:0,o:"m 196 365 b 107 454 147 365 107 404 b 196 543 107 504 147 543 b 285 454 244 543 285 504 b 196 365 285 404 244 365 "},"":{ha:556,x_min:0,x_max:0,o:"m 289 -297 b 150 -181 208 -297 156 -250 l 225 -181 b 285 -231 231 -207 250 -231 b 340 -181 319 -231 340 -210 b 290 -133 340 -151 319 -133 b 251 -144 272 -133 258 -140 l 207 -106 l 265 0 l 339 0 l 299 -74 b 429 -186 363 -65 429 -101 b 289 -297 429 -261 364 -297 "},"":{ha:321,x_min:0,x_max:0,o:"m 146 901 l 33 826 l 33 908 l 157 993 l 240 993 l 240 518 l 146 518 "},:{ha:685,x_min:0,x_max:0,o:"m 343 492 b 519 700 453 492 519 575 l 519 708 b 343 917 519 835 451 917 b 165 708 233 917 165 835 l 165 700 b 343 492 165 574 232 492 m 342 403 b 51 699 174 403 51 526 l 51 707 b 343 1006 51 885 175 1006 b 633 710 510 1006 633 886 l 633 701 b 342 403 633 522 510 403 "},"":{ha:694,x_min:0,x_max:0,o:"m 244 363 l 71 610 l 185 610 l 365 363 l 185 115 l 71 115 m 492 363 l 318 610 l 432 610 l 613 363 l 432 115 l 318 115 "},"":{ha:942,x_min:0,x_max:0,o:"m 150 901 l 38 826 l 38 908 l 161 993 l 244 993 l 244 518 l 150 518 m 772 993 l 864 993 l 160 0 l 68 0 m 758 96 l 519 96 l 519 129 l 732 475 l 847 475 l 847 164 l 910 164 l 910 96 l 847 96 l 847 0 l 758 0 m 760 164 l 760 404 l 619 164 "},"":{ha:940,x_min:0,x_max:0,o:"m 150 901 l 38 826 l 38 908 l 161 993 l 244 993 l 244 518 l 150 518 m 754 993 l 846 993 l 142 0 l 50 0 m 549 15 l 726 204 b 801 339 772 251 801 294 b 732 408 801 382 776 408 b 649 317 686 408 657 382 l 564 317 b 735 481 569 421 633 481 b 893 340 835 481 893 425 b 801 171 893 278 857 225 l 700 71 l 897 71 l 897 0 l 549 0 "},"":{ha:946,x_min:0,x_max:0,o:"m 215 511 b 33 665 100 511 36 572 l 118 665 b 213 581 124 617 150 581 b 300 656 272 581 300 610 b 217 731 300 706 272 731 l 181 731 l 181 796 l 215 796 b 293 864 268 796 293 821 b 221 929 293 901 269 929 b 135 853 172 929 140 900 l 50 853 b 222 999 56 938 119 999 b 382 871 324 999 382 943 b 303 768 382 818 350 785 b 396 654 358 756 396 717 b 215 511 396 565 326 511 m 822 993 l 914 993 l 210 0 l 118 0 m 758 96 l 519 96 l 519 129 l 732 475 l 847 475 l 847 164 l 910 164 l 910 96 l 847 96 l 847 0 l 758 0 m 760 164 l 760 404 l 619 164 "},"":{ha:679,x_min:0,x_max:0,o:"m 431 481 b 288 231 431 368 357 299 b 186 60 233 176 186 126 b 335 -79 186 -22 232 -79 b 519 101 439 -79 510 -8 l 628 101 b 333 -175 618 -61 503 -175 b 69 56 144 -175 69 -61 b 206 288 69 158 139 224 b 328 490 268 347 328 406 l 328 550 l 431 550 m 382 838 b 471 749 431 838 471 799 b 382 660 471 699 431 660 b 293 749 333 660 293 699 b 382 838 293 799 333 838 "},:{ha:936,x_min:0,x_max:0,o:"m 392 993 l 550 993 l 886 0 l 767 0 l 669 286 l 260 286 l 164 0 l 50 0 m 293 382 l 638 382 l 465 893 m 297 1247 l 442 1247 l 519 1071 l 433 1071 "},:{ha:936,x_min:0,x_max:0,o:"m 392 993 l 550 993 l 886 0 l 767 0 l 669 286 l 260 286 l 164 0 l 50 0 m 293 382 l 638 382 l 465 893 m 494 1247 l 639 1247 l 503 1071 l 417 1071 "},:{ha:936,x_min:0,x_max:0,o:"m 392 993 l 550 993 l 886 0 l 767 0 l 669 286 l 260 286 l 164 0 l 50 0 m 293 382 l 638 382 l 465 893 m 417 1247 l 521 1247 l 669 1071 l 585 1071 l 467 1151 l 349 1071 l 267 1071 "},:{ha:936,x_min:0,x_max:0,o:"m 392 993 l 550 993 l 886 0 l 767 0 l 669 286 l 260 286 l 164 0 l 50 0 m 293 382 l 638 382 l 465 893 m 543 1075 b 393 1135 483 1075 433 1135 b 338 1072 367 1135 344 1108 l 254 1072 b 394 1233 265 1171 322 1233 b 543 1174 453 1233 503 1174 b 599 1236 569 1174 592 1200 l 682 1236 b 543 1075 671 1138 614 1075 "},:{ha:936,x_min:0,x_max:0,o:"m 392 993 l 550 993 l 886 0 l 767 0 l 669 286 l 260 286 l 164 0 l 50 0 m 293 382 l 638 382 l 465 893 m 326 1096 b 253 1169 286 1096 253 1129 b 326 1243 253 1210 286 1243 b 400 1169 367 1243 400 1210 b 326 1096 400 1129 367 1096 m 608 1096 b 535 1169 568 1096 535 1129 b 608 1243 535 1210 568 1243 b 682 1169 649 1243 682 1210 b 608 1096 682 1129 649 1096 "},:{ha:936,x_min:0,x_max:0,o:"m 392 993 l 550 993 l 886 0 l 767 0 l 669 286 l 260 286 l 164 0 l 50 0 m 293 382 l 638 382 l 465 893 m 468 1054 b 319 1199 386 1054 319 1119 b 468 1343 319 1278 386 1343 b 617 1199 550 1343 617 1278 b 468 1054 617 1119 550 1054 m 468 1118 b 542 1199 511 1118 542 1153 b 468 1279 542 1244 511 1279 b 394 1199 425 1279 394 1244 b 468 1118 394 1153 425 1118 "},:{ha:1319,x_min:0,x_max:0,o:"m 554 993 l 1238 993 l 1238 894 l 779 894 l 779 557 l 1149 557 l 1149 458 l 779 458 l 779 99 l 1263 99 l 1263 0 l 658 0 l 658 288 l 308 288 l 163 0 l 40 0 m 356 382 l 658 382 l 658 894 l 615 894 "},:{ha:1014,x_min:0,x_max:0,o:"m 529 -297 b 390 -181 449 -297 396 -250 l 465 -181 b 525 -231 471 -207 490 -231 b 581 -181 560 -231 581 -210 b 531 -133 581 -151 560 -133 b 492 -144 513 -133 499 -140 l 447 -106 l 499 -11 b 76 490 236 7 76 199 l 76 501 b 543 1008 76 796 274 1008 b 946 683 750 1008 925 899 l 826 683 b 544 913 801 835 714 913 b 201 503 339 913 201 753 l 201 492 b 543 86 201 239 329 86 b 843 329 706 86 818 168 l 956 329 b 572 -11 922 111 778 -1 l 539 -74 b 669 -186 603 -65 669 -101 b 529 -297 669 -261 604 -297 "},:{ha:786,x_min:0,x_max:0,o:"m 125 993 l 704 993 l 704 894 l 246 894 l 246 557 l 615 557 l 615 458 l 246 458 l 246 99 l 729 99 l 729 0 l 125 0 m 254 1247 l 399 1247 l 476 1071 l 390 1071 "},:{ha:786,x_min:0,x_max:0,o:"m 125 993 l 704 993 l 704 894 l 246 894 l 246 557 l 615 557 l 615 458 l 246 458 l 246 99 l 729 99 l 729 0 l 125 0 m 451 1247 l 596 1247 l 460 1071 l 374 1071 "},:{ha:786,x_min:0,x_max:0,o:"m 125 993 l 704 993 l 704 894 l 246 894 l 246 557 l 615 557 l 615 458 l 246 458 l 246 99 l 729 99 l 729 0 l 125 0 m 374 1247 l 478 1247 l 626 1071 l 542 1071 l 424 1151 l 306 1071 l 224 1071 "},:{ha:786,x_min:0,x_max:0,o:"m 125 993 l 704 993 l 704 894 l 246 894 l 246 557 l 615 557 l 615 458 l 246 458 l 246 99 l 729 99 l 729 0 l 125 0 m 283 1096 b 210 1169 243 1096 210 1129 b 283 1243 210 1210 243 1243 b 357 1169 324 1243 357 1210 b 283 1096 357 1129 324 1096 m 565 1096 b 492 1169 525 1096 492 1129 b 565 1243 492 1210 525 1243 b 639 1169 606 1243 639 1210 b 565 1096 639 1129 606 1096 "},:{ha:385,x_min:0,x_max:0,o:"m 132 993 l 253 993 l 253 0 l 132 0 m 21 1247 l 165 1247 l 243 1071 l 157 1071 "},:{ha:385,x_min:0,x_max:0,o:"m 132 993 l 253 993 l 253 0 l 132 0 m 218 1247 l 363 1247 l 226 1071 l 140 1071 "},:{ha:385,x_min:0,x_max:0,o:"m 132 993 l 253 993 l 253 0 l 132 0 m 140 1247 l 244 1247 l 393 1071 l 308 1071 l 190 1151 l 72 1071 l -10 1071 "},:{ha:385,x_min:0,x_max:0,o:"m 132 993 l 253 993 l 253 0 l 132 0 m 50 1096 b -24 1169 10 1096 -24 1129 b 50 1243 -24 1210 10 1243 b 124 1169 90 1243 124 1210 b 50 1096 124 1129 90 1096 m 332 1096 b 258 1169 292 1096 258 1129 b 332 1243 258 1210 292 1243 b 406 1169 372 1243 406 1210 b 332 1096 406 1129 372 1096 "},:{ha:994,x_min:0,x_max:0,o:"m 47 544 l 153 544 l 153 993 l 415 993 b 918 506 757 993 918 782 l 918 493 b 413 0 918 218 760 0 l 153 0 l 153 451 l 47 451 m 410 99 b 793 494 665 99 793 251 l 793 506 b 408 896 793 735 682 896 l 274 896 l 274 544 l 561 544 l 561 451 l 274 451 l 274 99 "},:{ha:1006,x_min:0,x_max:0,o:"m 125 993 l 282 993 l 765 172 l 765 993 l 881 993 l 881 0 l 742 0 l 240 851 l 240 0 l 125 0 m 592 1075 b 442 1135 532 1075 482 1135 b 386 1072 415 1135 393 1108 l 303 1072 b 443 1233 314 1171 371 1233 b 592 1174 501 1233 551 1174 b 647 1236 618 1174 640 1200 l 731 1236 b 592 1075 719 1138 663 1075 "},:{ha:1126,x_min:0,x_max:0,o:"m 568 88 b 925 494 789 88 925 254 l 925 506 b 565 908 925 728 794 908 b 201 503 335 908 201 739 l 201 492 b 568 88 201 251 361 88 m 568 -12 b 76 490 275 -12 76 213 l 76 501 b 565 1006 76 783 274 1006 b 1050 504 857 1006 1050 783 l 1050 493 b 568 -12 1050 213 857 -12 m 392 1247 l 536 1247 l 614 1071 l 528 1071 "},:{ha:1126,x_min:0,x_max:0,o:"m 568 88 b 925 494 789 88 925 254 l 925 506 b 565 908 925 728 794 908 b 201 503 335 908 201 739 l 201 492 b 568 88 201 251 361 88 m 568 -12 b 76 490 275 -12 76 213 l 76 501 b 565 1006 76 783 274 1006 b 1050 504 857 1006 1050 783 l 1050 493 b 568 -12 1050 213 857 -12 m 589 1247 l 733 1247 l 597 1071 l 511 1071 "},:{ha:1126,x_min:0,x_max:0,o:"m 568 88 b 925 494 789 88 925 254 l 925 506 b 565 908 925 728 794 908 b 201 503 335 908 201 739 l 201 492 b 568 88 201 251 361 88 m 568 -12 b 76 490 275 -12 76 213 l 76 501 b 565 1006 76 783 274 1006 b 1050 504 857 1006 1050 783 l 1050 493 b 568 -12 1050 213 857 -12 m 511 1247 l 615 1247 l 764 1071 l 679 1071 l 561 1151 l 443 1071 l 361 1071 "},:{ha:1126,x_min:0,x_max:0,o:"m 568 88 b 925 494 789 88 925 254 l 925 506 b 565 908 925 728 794 908 b 201 503 335 908 201 739 l 201 492 b 568 88 201 251 361 88 m 568 -12 b 76 490 275 -12 76 213 l 76 501 b 565 1006 76 783 274 1006 b 1050 504 857 1006 1050 783 l 1050 493 b 568 -12 1050 213 857 -12 m 638 1075 b 488 1135 578 1075 528 1135 b 432 1072 461 1135 439 1108 l 349 1072 b 489 1233 360 1171 417 1233 b 638 1174 547 1233 597 1174 b 693 1236 664 1174 686 1200 l 776 1236 b 638 1075 765 1138 708 1075 "},:{ha:1126,x_min:0,x_max:0,o:"m 568 88 b 925 494 789 88 925 254 l 925 506 b 565 908 925 728 794 908 b 201 503 335 908 201 739 l 201 492 b 568 88 201 251 361 88 m 568 -12 b 76 490 275 -12 76 213 l 76 501 b 565 1006 76 783 274 1006 b 1050 504 857 1006 1050 783 l 1050 493 b 568 -12 1050 213 857 -12 m 421 1096 b 347 1169 381 1096 347 1129 b 421 1243 347 1210 381 1243 b 494 1169 461 1243 494 1210 b 421 1096 494 1129 461 1096 m 703 1096 b 629 1169 663 1096 629 1129 b 703 1243 629 1210 663 1243 b 776 1169 743 1243 776 1210 b 703 1096 776 1129 743 1096 "},"":{ha:651,x_min:0,x_max:0,o:"m 46 249 l 260 463 l 46 676 l 111 743 l 325 528 l 539 743 l 606 676 l 392 463 l 606 249 l 539 182 l 325 397 l 111 182 "},:{ha:1126,x_min:0,x_max:0,o:"m 49 17 l 185 165 b 76 490 115 253 76 367 l 76 501 b 565 1006 76 783 274 1006 b 863 908 682 1006 783 969 l 975 1031 l 1038 968 l 928 847 b 1050 504 1006 758 1050 638 l 1050 493 b 568 -12 1050 213 857 -12 b 246 101 440 -12 329 31 l 111 -46 m 568 88 b 925 494 789 88 925 254 l 925 506 b 853 767 925 608 900 697 l 319 182 b 568 88 383 119 471 88 m 201 492 b 263 251 201 396 224 315 l 793 832 b 565 908 735 881 658 908 b 201 503 335 908 201 739 l 201 492 "},:{ha:967,x_min:0,x_max:0,o:"m 474 -12 b 117 363 246 -12 117 121 l 117 993 l 238 993 l 238 376 b 476 88 238 168 311 88 b 729 394 635 88 729 151 l 729 993 l 850 993 l 850 378 b 474 -12 850 136 729 -12 m 313 1247 l 457 1247 l 535 1071 l 449 1071 "},:{ha:967,x_min:0,x_max:0,o:"m 474 -12 b 117 363 246 -12 117 121 l 117 993 l 238 993 l 238 376 b 476 88 238 168 311 88 b 729 394 635 88 729 151 l 729 993 l 850 993 l 850 378 b 474 -12 850 136 729 -12 m 510 1247 l 654 1247 l 518 1071 l 432 1071 "},:{ha:967,x_min:0,x_max:0,o:"m 474 -12 b 117 363 246 -12 117 121 l 117 993 l 238 993 l 238 376 b 476 88 238 168 311 88 b 729 394 635 88 729 151 l 729 993 l 850 993 l 850 378 b 474 -12 850 136 729 -12 m 432 1247 l 536 1247 l 685 1071 l 600 1071 l 482 1151 l 364 1071 l 282 1071 "},:{ha:967,x_min:0,x_max:0,o:"m 474 -12 b 117 363 246 -12 117 121 l 117 993 l 238 993 l 238 376 b 476 88 238 168 311 88 b 729 394 635 88 729 151 l 729 993 l 850 993 l 850 378 b 474 -12 850 136 729 -12 m 342 1096 b 268 1169 301 1096 268 1129 b 342 1243 268 1210 301 1243 b 415 1169 382 1243 415 1210 b 342 1096 415 1129 382 1096 m 624 1096 b 550 1169 583 1096 550 1129 b 624 1243 550 1210 583 1243 b 697 1169 664 1243 697 1210 b 624 1096 697 1129 664 1096 "},:{ha:831,x_min:0,x_max:0,o:"m 364 433 l 32 993 l 168 993 l 428 532 l 678 993 l 799 993 l 485 432 l 485 0 l 364 0 m 442 1247 l 586 1247 l 450 1071 l 364 1071 "},:{ha:807,x_min:0,x_max:0,o:"m 125 993 l 246 993 l 246 807 l 407 807 b 754 522 597 807 754 729 l 754 517 b 407 229 754 306 596 229 l 246 229 l 246 0 l 125 0 m 415 325 b 633 517 557 325 633 389 l 633 522 b 415 710 633 663 550 710 l 246 710 l 246 325 "},:{ha:819,x_min:0,x_max:0,o:"m 465 -12 b 338 10 407 -12 358 1 l 338 108 b 460 83 364 96 407 83 b 640 292 544 83 640 118 l 640 301 b 368 543 640 451 535 549 l 368 642 b 575 824 525 638 575 739 l 575 829 b 406 983 575 928 515 983 b 232 792 300 983 232 908 l 232 0 l 117 0 l 117 786 b 407 1078 117 964 251 1078 b 685 829 572 1078 685 978 l 685 824 b 519 600 685 736 628 636 b 760 303 663 564 760 447 l 760 294 b 465 -12 760 60 615 -12 "},:{ha:750,x_min:0,x_max:0,o:"m 299 -12 b 57 201 164 -12 57 53 b 421 426 57 369 235 426 l 525 426 l 525 479 b 369 643 525 594 481 643 b 203 513 269 643 214 601 l 88 513 b 375 739 103 678 235 739 b 640 479 514 739 640 682 l 640 0 l 525 0 l 525 92 b 299 -12 471 24 406 -12 m 310 79 b 525 254 432 79 525 142 l 525 344 l 425 344 b 172 201 279 344 172 308 b 310 79 172 126 208 79 m 197 1056 l 342 1056 l 428 851 l 342 851 "},:{ha:750,x_min:0,x_max:0,o:"m 299 -12 b 57 201 164 -12 57 53 b 421 426 57 369 235 426 l 525 426 l 525 479 b 369 643 525 594 481 643 b 203 513 269 643 214 601 l 88 513 b 375 739 103 678 235 739 b 640 479 514 739 640 682 l 640 0 l 525 0 l 525 92 b 299 -12 471 24 406 -12 m 310 79 b 525 254 432 79 525 142 l 525 344 l 425 344 b 172 201 279 344 172 308 b 310 79 172 126 208 79 m 411 1056 l 556 1056 l 411 851 l 325 851 "},:{ha:750,x_min:0,x_max:0,o:"m 299 -12 b 57 201 164 -12 57 53 b 421 426 57 369 235 426 l 525 426 l 525 479 b 369 643 525 594 481 643 b 203 513 269 643 214 601 l 88 513 b 375 739 103 678 235 739 b 640 479 514 739 640 682 l 640 0 l 525 0 l 525 92 b 299 -12 471 24 406 -12 m 310 79 b 525 254 432 79 525 142 l 525 344 l 425 344 b 172 201 279 344 172 308 b 310 79 172 126 208 79 m 310 1051 l 414 1051 l 563 851 l 478 851 l 360 956 l 242 851 l 160 851 "},:{ha:750,x_min:0,x_max:0,o:"m 299 -12 b 57 201 164 -12 57 53 b 421 426 57 369 235 426 l 525 426 l 525 479 b 369 643 525 594 481 643 b 203 513 269 643 214 601 l 88 513 b 375 739 103 678 235 739 b 640 479 514 739 640 682 l 640 0 l 525 0 l 525 92 b 299 -12 471 24 406 -12 m 310 79 b 525 254 432 79 525 142 l 525 344 l 425 344 b 172 201 279 344 172 308 b 310 79 172 126 208 79 m 451 860 b 301 919 392 860 342 919 b 246 857 275 919 253 893 l 163 857 b 303 1018 174 956 231 1018 b 451 958 361 1018 411 958 b 507 1021 478 958 500 985 l 590 1021 b 451 860 579 922 522 860 "},:{ha:750,x_min:0,x_max:0,o:"m 299 -12 b 57 201 164 -12 57 53 b 421 426 57 369 235 426 l 525 426 l 525 479 b 369 643 525 594 481 643 b 203 513 269 643 214 601 l 88 513 b 375 739 103 678 235 739 b 640 479 514 739 640 682 l 640 0 l 525 0 l 525 92 b 299 -12 471 24 406 -12 m 310 79 b 525 254 432 79 525 142 l 525 344 l 425 344 b 172 201 279 344 172 308 b 310 79 172 126 208 79 m 246 881 b 172 954 206 881 172 914 b 246 1028 172 994 206 1028 b 319 954 286 1028 319 994 b 246 881 319 914 286 881 m 507 881 b 433 954 467 881 433 914 b 507 1028 433 994 467 1028 b 581 954 547 1028 581 994 b 507 881 581 914 547 881 "},:{ha:750,x_min:0,x_max:0,o:"m 299 -12 b 57 201 164 -12 57 53 b 421 426 57 369 235 426 l 525 426 l 525 479 b 369 643 525 594 481 643 b 203 513 269 643 214 601 l 88 513 b 375 739 103 678 235 739 b 640 479 514 739 640 682 l 640 0 l 525 0 l 525 92 b 299 -12 471 24 406 -12 m 310 79 b 525 254 432 79 525 142 l 525 344 l 425 344 b 172 201 279 344 172 308 b 310 79 172 126 208 79 m 376 894 b 450 975 419 894 450 929 b 376 1056 450 1021 419 1056 b 303 975 333 1056 303 1021 b 376 894 303 929 333 894 m 376 831 b 228 975 294 831 228 896 b 376 1119 228 1054 294 1119 b 525 975 458 1119 525 1054 b 376 831 525 896 458 831 "},:{ha:1222,x_min:0,x_max:0,o:"m 856 -12 b 582 138 733 -12 638 43 b 299 -12 515 33 432 -12 b 57 201 164 -12 57 53 b 417 431 57 371 231 431 l 525 431 l 525 478 b 369 643 525 593 476 643 b 203 513 269 643 214 601 l 88 513 b 375 739 103 678 235 739 b 603 615 471 739 561 708 b 847 739 658 693 742 739 b 1163 378 1008 739 1163 640 l 1163 343 l 636 343 b 857 83 642 178 714 83 b 1042 210 965 83 1026 125 l 1157 210 b 856 -12 1132 64 1013 -12 m 310 79 b 525 254 432 79 525 142 l 525 343 l 421 343 b 172 201 275 343 172 308 b 310 79 172 126 208 79 m 1044 431 b 847 643 1033 583 963 643 b 640 431 735 643 658 561 "},:{ha:792,x_min:0,x_max:0,o:"m 397 -297 b 258 -181 317 -297 264 -250 l 333 -181 b 393 -231 339 -207 358 -231 b 449 -181 428 -231 449 -210 b 399 -133 449 -151 428 -133 b 360 -144 381 -133 367 -140 l 315 -106 l 368 -10 b 63 356 190 11 63 149 l 63 367 b 415 739 63 589 221 739 b 731 485 567 739 708 669 l 617 485 b 415 643 599 600 515 643 b 182 367 283 643 182 538 l 182 356 b 419 83 182 178 279 83 b 628 261 522 83 615 143 l 735 261 b 440 -11 719 111 604 -1 l 407 -74 b 538 -186 471 -65 538 -101 b 397 -297 538 -261 472 -297 "},:{ha:789,x_min:0,x_max:0,o:"m 414 -12 b 63 356 208 -12 63 132 l 63 367 b 403 739 63 586 203 739 b 729 378 571 739 729 638 l 729 340 l 182 340 b 415 83 188 175 267 83 b 608 210 528 83 593 125 l 724 210 b 414 -12 699 64 578 -12 m 611 433 b 403 643 600 583 522 643 b 186 433 285 643 206 563 m 224 1056 l 368 1056 l 454 851 l 368 851 "},:{ha:789,x_min:0,x_max:0,o:"m 414 -12 b 63 356 208 -12 63 132 l 63 367 b 403 739 63 586 203 739 b 729 378 571 739 729 638 l 729 340 l 182 340 b 415 83 188 175 267 83 b 608 210 528 83 593 125 l 724 210 b 414 -12 699 64 578 -12 m 611 433 b 403 643 600 583 522 643 b 186 433 285 643 206 563 m 438 1056 l 582 1056 l 438 851 l 351 851 "},:{ha:789,x_min:0,x_max:0,o:"m 414 -12 b 63 356 208 -12 63 132 l 63 367 b 403 739 63 586 203 739 b 729 378 571 739 729 638 l 729 340 l 182 340 b 415 83 188 175 267 83 b 608 210 528 83 593 125 l 724 210 b 414 -12 699 64 578 -12 m 611 433 b 403 643 600 583 522 643 b 186 433 285 643 206 563 m 351 1051 l 456 1051 l 604 851 l 519 851 l 401 956 l 283 851 l 201 851 "},:{ha:789,x_min:0,x_max:0,o:"m 414 -12 b 63 356 208 -12 63 132 l 63 367 b 403 739 63 586 203 739 b 729 378 571 739 729 638 l 729 340 l 182 340 b 415 83 188 175 267 83 b 608 210 528 83 593 125 l 724 210 b 414 -12 699 64 578 -12 m 611 433 b 403 643 600 583 522 643 b 186 433 285 643 206 563 m 272 881 b 199 954 232 881 199 914 b 272 1028 199 994 232 1028 b 346 954 313 1028 346 994 b 272 881 346 914 313 881 m 533 881 b 460 954 493 881 460 914 b 533 1028 460 994 493 1028 b 607 954 574 1028 607 994 b 533 881 607 914 574 881 "},:{ha:354,x_min:0,x_max:0,o:"m 119 726 l 235 726 l 235 0 l 119 0 m -3 1056 l 142 1056 l 228 851 l 142 851 "},:{ha:354,x_min:0,x_max:0,o:"m 119 726 l 235 726 l 235 0 l 119 0 m 211 1056 l 356 1056 l 211 851 l 125 851 "},:{ha:354,x_min:0,x_max:0,o:"m 119 726 l 235 726 l 235 0 l 119 0 m 125 1051 l 229 1051 l 378 851 l 293 851 l 175 956 l 57 851 l -25 851 "},:{ha:354,x_min:0,x_max:0,o:"m 51 881 b -22 954 11 881 -22 914 b 51 1028 -22 994 11 1028 b 125 954 92 1028 125 994 b 51 881 125 914 92 881 m 301 881 b 228 954 261 881 228 914 b 301 1028 228 994 261 1028 b 375 954 342 1028 375 994 b 301 881 375 914 342 881 m 119 726 l 235 726 l 235 0 l 119 0 "},:{ha:839,x_min:0,x_max:0,o:"m 217 863 l 351 942 b 179 1074 296 990 236 1035 l 328 1074 b 444 997 363 1054 403 1029 l 560 1065 l 600 997 l 507 943 b 776 394 644 815 776 622 l 776 364 b 418 -12 776 144 625 -12 b 63 357 211 -12 63 144 l 63 368 b 393 739 63 586 215 739 b 603 639 489 739 557 696 b 413 888 558 728 490 813 l 257 796 m 419 83 b 657 357 565 83 657 193 l 657 367 b 421 643 657 535 565 643 b 182 368 275 643 182 535 l 182 357 b 419 83 182 192 272 83 "},:{ha:831,x_min:0,x_max:0,o:"m 117 726 l 232 726 l 232 611 b 465 739 265 679 346 739 b 721 446 615 739 721 657 l 721 0 l 606 0 l 606 454 b 435 639 606 582 551 639 b 232 440 328 639 232 571 l 232 0 l 117 0 m 489 860 b 339 919 429 860 379 919 b 283 857 313 919 290 893 l 200 857 b 340 1018 211 956 268 1018 b 489 958 399 1018 449 958 b 544 1021 515 958 538 985 l 628 1021 b 489 860 617 922 560 860 "},:{ha:839,x_min:0,x_max:0,o:"m 419 83 b 657 357 565 83 657 193 l 657 367 b 419 643 657 535 564 643 b 182 368 274 643 182 535 l 182 357 b 419 83 182 192 272 83 m 418 -12 b 63 357 211 -12 63 144 l 63 368 b 419 739 63 586 214 739 b 776 369 625 739 776 588 l 776 358 b 418 -12 776 139 625 -12 m 240 1056 l 385 1056 l 471 851 l 385 851 "},:{ha:839,x_min:0,x_max:0,o:"m 419 83 b 657 357 565 83 657 193 l 657 367 b 419 643 657 535 564 643 b 182 368 274 643 182 535 l 182 357 b 419 83 182 192 272 83 m 418 -12 b 63 357 211 -12 63 144 l 63 368 b 419 739 63 586 214 739 b 776 369 625 739 776 588 l 776 358 b 418 -12 776 139 625 -12 m 454 1056 l 599 1056 l 454 851 l 368 851 "},:{ha:839,x_min:0,x_max:0,o:"m 419 83 b 657 357 565 83 657 193 l 657 367 b 419 643 657 535 564 643 b 182 368 274 643 182 535 l 182 357 b 419 83 182 192 272 83 m 418 -12 b 63 357 211 -12 63 144 l 63 368 b 419 739 63 586 214 739 b 776 369 625 739 776 588 l 776 358 b 418 -12 776 139 625 -12 m 368 1051 l 472 1051 l 621 851 l 536 851 l 418 956 l 300 851 l 218 851 "},:{ha:839,x_min:0,x_max:0,o:"m 419 83 b 657 357 565 83 657 193 l 657 367 b 419 643 657 535 564 643 b 182 368 274 643 182 535 l 182 357 b 419 83 182 192 272 83 m 418 -12 b 63 357 211 -12 63 144 l 63 368 b 419 739 63 586 214 739 b 776 369 625 739 776 588 l 776 358 b 418 -12 776 139 625 -12 m 494 860 b 344 919 435 860 385 919 b 289 857 318 919 296 893 l 206 857 b 346 1018 217 956 274 1018 b 494 958 404 1018 454 958 b 550 1021 521 958 543 985 l 633 1021 b 494 860 622 922 565 860 "},:{ha:839,x_min:0,x_max:0,o:"m 419 83 b 657 357 565 83 657 193 l 657 367 b 419 643 657 535 564 643 b 182 368 274 643 182 535 l 182 357 b 419 83 182 192 272 83 m 418 -12 b 63 357 211 -12 63 144 l 63 368 b 419 739 63 586 214 739 b 776 369 625 739 776 588 l 776 358 b 418 -12 776 139 625 -12 m 289 881 b 215 954 249 881 215 914 b 289 1028 215 994 249 1028 b 363 954 329 1028 363 994 b 289 881 363 914 329 881 m 550 881 b 476 954 510 881 476 914 b 550 1028 476 994 510 1028 b 624 954 590 1028 624 994 b 550 881 624 914 590 881 "},"":{ha:721,x_min:0,x_max:0,o:"m 360 124 b 271 213 311 124 271 163 b 360 301 271 263 311 301 b 449 213 408 301 449 263 b 360 124 449 163 408 124 m 50 524 l 671 524 l 671 426 l 50 426 m 360 649 b 271 738 311 649 271 688 b 360 826 271 788 311 826 b 449 738 408 826 449 788 b 360 649 449 688 408 649 "},:{ha:839,x_min:0,x_max:0,o:"m 32 1 l 139 119 b 63 357 90 182 63 264 l 63 368 b 419 739 63 586 214 739 b 636 669 503 739 578 714 l 731 772 l 792 719 l 694 613 b 776 369 746 549 776 465 l 776 358 b 418 -12 776 139 625 -12 b 196 63 331 -12 256 15 l 93 -51 m 419 83 b 657 357 565 83 657 193 l 657 367 b 619 529 657 431 643 485 l 264 139 b 419 83 304 103 356 83 m 182 357 b 215 203 182 297 193 246 l 567 592 b 419 643 528 625 478 643 b 182 368 274 643 182 535 l 182 357 "},:{ha:825,x_min:0,x_max:0,o:"m 363 -12 b 110 267 218 -12 110 67 l 110 726 l 225 726 l 225 272 b 393 88 225 144 279 88 b 593 286 496 88 593 156 l 593 726 l 708 726 l 708 0 l 593 0 l 593 115 b 363 -12 560 47 479 -12 m 233 1056 l 378 1056 l 464 851 l 378 851 "},:{ha:825,x_min:0,x_max:0,o:"m 363 -12 b 110 267 218 -12 110 67 l 110 726 l 225 726 l 225 272 b 393 88 225 144 279 88 b 593 286 496 88 593 156 l 593 726 l 708 726 l 708 0 l 593 0 l 593 115 b 363 -12 560 47 479 -12 m 447 1056 l 592 1056 l 447 851 l 361 851 "},:{ha:825,x_min:0,x_max:0,o:"m 363 -12 b 110 267 218 -12 110 67 l 110 726 l 225 726 l 225 272 b 393 88 225 144 279 88 b 593 286 496 88 593 156 l 593 726 l 708 726 l 708 0 l 593 0 l 593 115 b 363 -12 560 47 479 -12 m 361 1051 l 465 1051 l 614 851 l 529 851 l 411 956 l 293 851 l 211 851 "},:{ha:825,x_min:0,x_max:0,o:"m 363 -12 b 110 267 218 -12 110 67 l 110 726 l 225 726 l 225 272 b 393 88 225 144 279 88 b 593 286 496 88 593 156 l 593 726 l 708 726 l 708 0 l 593 0 l 593 115 b 363 -12 560 47 479 -12 m 282 881 b 208 954 242 881 208 914 b 282 1028 208 994 242 1028 b 356 954 322 1028 356 994 b 282 881 356 914 322 881 m 543 881 b 469 954 503 881 469 914 b 543 1028 469 994 503 1028 b 617 954 583 1028 617 994 b 543 881 617 914 583 881 "},:{ha:735,x_min:0,x_max:0,o:"m 319 75 l 35 726 l 158 726 l 381 206 l 582 726 l 700 726 l 299 -253 l 182 -253 m 413 1056 l 557 1056 l 413 851 l 326 851 "},:{ha:871,x_min:0,x_max:0,o:"m 117 1074 l 232 1074 l 232 604 b 478 739 274 675 372 739 b 808 374 668 739 808 600 l 808 363 b 478 -12 808 140 678 -12 b 232 119 358 -12 274 47 l 232 -253 l 117 -253 m 467 83 b 689 357 611 83 689 181 l 689 368 b 465 643 689 551 588 643 b 228 368 331 643 228 554 l 228 357 b 467 83 228 171 325 83 "},:{ha:735,x_min:0,x_max:0,o:"m 319 75 l 35 726 l 158 726 l 381 206 l 582 726 l 700 726 l 299 -253 l 182 -253 m 247 881 b 174 954 207 881 174 914 b 247 1028 174 994 207 1028 b 321 954 288 1028 321 994 b 247 881 321 914 288 881 m 508 881 b 435 954 468 881 435 914 b 508 1028 435 994 468 1028 b 582 954 549 1028 582 994 b 508 881 582 914 549 881 "},:{ha:354,x_min:0,x_max:0,o:"m 119 726 l 235 726 l 235 0 l 119 0 "},:{ha:771,x_min:0,x_max:0,o:"m 58 443 l 153 478 l 153 993 l 274 993 l 274 522 l 550 624 l 550 529 l 274 428 l 274 99 l 728 99 l 728 0 l 153 0 l 153 383 l 58 349 "},:{ha:383,x_min:0,x_max:0,o:"m 28 529 l 133 589 l 133 1074 l 250 1074 l 250 656 l 361 719 l 361 622 l 250 558 l 250 0 l 133 0 l 133 492 l 28 432 "},:{ha:1326,x_min:0,x_max:0,o:"m 76 500 b 582 993 76 775 235 993 l 1244 993 l 1244 894 l 808 894 l 808 557 l 1156 557 l 1156 458 l 808 458 l 808 99 l 1269 99 l 1269 0 l 579 0 b 76 488 238 0 76 211 l 76 500 m 585 894 b 201 499 329 894 201 742 l 201 488 b 586 97 201 258 313 97 l 688 97 l 688 894 "},:{ha:1382,x_min:0,x_max:0,o:"m 418 -12 b 63 357 211 -12 63 144 l 63 368 b 419 739 63 586 214 739 b 714 564 556 739 660 672 b 996 739 765 672 864 739 b 1322 378 1164 739 1322 638 l 1322 340 l 775 340 b 1008 83 781 175 860 83 b 1201 210 1121 83 1186 125 l 1317 210 b 1007 -12 1292 64 1171 -12 b 714 161 869 -12 767 51 b 418 -12 658 53 554 -12 m 419 83 b 657 357 565 83 657 193 l 657 367 b 419 643 657 535 564 643 b 182 368 274 643 182 535 l 182 357 b 419 83 182 192 272 83 m 1204 433 b 996 643 1193 583 1115 643 b 779 433 878 643 799 563 "},:{ha:871,x_min:0,x_max:0,o:"m 446 -12 b 67 303 181 -12 85 133 l 183 303 b 446 85 199 185 246 85 b 672 272 574 85 672 160 b 432 463 672 385 621 432 b 100 736 224 494 100 560 b 419 1006 100 889 232 1006 b 761 732 618 1006 742 908 l 653 732 b 419 908 629 857 557 908 b 213 747 283 908 213 840 b 451 569 213 650 249 600 b 789 281 672 535 789 468 b 446 -12 789 114 643 -12 m 218 1247 l 303 1247 l 421 1167 l 539 1247 l 621 1247 l 471 1071 l 367 1071 "},:{ha:667,x_min:0,x_max:0,o:"m 342 -12 b 57 224 168 -12 64 75 l 169 224 b 340 83 178 138 224 83 b 499 199 450 83 499 121 b 329 321 499 275 442 300 b 76 535 140 356 76 408 b 322 739 76 669 208 739 b 585 529 453 739 565 686 l 474 529 b 321 643 457 608 413 643 b 183 539 238 643 183 601 b 353 424 183 474 219 447 b 608 208 503 396 608 363 b 342 -12 608 76 518 -12 m 129 1051 l 214 1051 l 332 947 l 450 1051 l 532 1051 l 382 851 l 278 851 "},:{ha:831,x_min:0,x_max:0,o:"m 364 433 l 32 993 l 168 993 l 428 532 l 678 993 l 799 993 l 485 432 l 485 0 l 364 0 m 274 1096 b 200 1169 233 1096 200 1129 b 274 1243 200 1210 233 1243 b 347 1169 314 1243 347 1210 b 274 1096 347 1129 314 1096 m 556 1096 b 482 1169 515 1096 482 1129 b 556 1243 482 1210 515 1243 b 629 1169 596 1243 629 1210 b 556 1096 629 1129 596 1096 "},:{ha:826,x_min:0,x_max:0,o:"m 39 19 l 601 894 l 89 894 l 89 993 l 768 993 l 768 975 l 221 103 l 760 103 l 760 0 l 39 0 m 208 1247 l 293 1247 l 411 1167 l 529 1247 l 611 1247 l 461 1071 l 357 1071 "},:{ha:671,x_min:0,x_max:0,o:"m 29 17 l 458 629 l 71 629 l 71 726 l 636 726 l 636 706 l 217 101 l 631 101 l 631 0 l 29 0 m 143 1051 l 228 1051 l 346 947 l 464 1051 l 546 1051 l 396 851 l 292 851 "},:{ha:551,x_min:0,x_max:0,o:"m 40 574 l 175 574 l 207 785 b 442 1006 229 928 307 1006 b 536 990 482 1006 510 1000 l 536 893 b 444 910 515 901 485 910 b 321 779 367 910 332 854 l 289 574 l 472 574 l 472 479 l 275 479 l 164 -253 l 49 -253 l 160 479 l 40 479 "},"":{ha:556,x_min:0,x_max:0,o:"m 226 1051 l 331 1051 l 479 851 l 394 851 l 276 956 l 158 851 l 76 851 "},"":{ha:556,x_min:0,x_max:0,o:"m 76 1051 l 161 1051 l 279 947 l 397 1051 l 479 1051 l 329 851 l 225 851 "},"":{ha:556,x_min:0,x_max:0,o:"m 275 860 b 92 1043 175 860 97 938 l 183 1043 b 275 954 193 989 219 954 b 375 1043 333 954 364 988 l 464 1043 b 275 860 458 938 375 860 "},"":{ha:556,x_min:0,x_max:0,o:"m 278 878 b 201 954 236 878 201 913 b 278 1031 201 996 236 1031 b 354 954 319 1031 354 996 b 278 878 354 913 319 878 "},"":{ha:556,x_min:0,x_max:0,o:"m 278 894 b 351 975 321 894 351 929 b 278 1056 351 1021 321 1056 b 204 975 235 1056 204 1021 b 278 894 204 929 235 894 m 278 831 b 129 975 196 831 129 896 b 278 1119 129 1054 196 1119 b 426 975 360 1119 426 1054 b 278 831 426 896 360 831 "},"":{ha:556,x_min:0,x_max:0,o:"m 310 -253 b 165 -142 224 -253 165 -211 b 274 0 165 -82 214 -29 l 369 0 b 275 -119 307 -42 275 -76 b 328 -169 275 -153 294 -169 b 400 -154 351 -169 379 -165 l 400 -236 b 310 -253 376 -246 349 -253 "},"":{ha:556,x_min:0,x_max:0,o:"m 353 860 b 203 919 293 860 243 919 b 147 857 176 919 154 893 l 64 857 b 204 1018 75 956 132 1018 b 353 958 263 1018 313 958 b 408 1021 379 958 401 985 l 492 1021 b 353 860 481 922 424 860 "},"":{ha:556,x_min:0,x_max:0,o:"m 189 1056 l 321 1056 l 217 851 l 133 851 m 403 1056 l 535 1056 l 431 851 l 347 851 "},"":{ha:731,x_min:0,x_max:0,o:"m 63 432 l 668 432 l 668 335 l 63 335 "},"":{ha:1229,x_min:0,x_max:0,o:"m 63 432 l 1167 432 l 1167 335 l 63 335 "},"":{ha:354,x_min:0,x_max:0,o:"m 56 728 l 218 1008 l 289 972 l 165 678 "},"":{ha:354,x_min:0,x_max:0,o:"m 65 714 l 189 1008 l 299 958 l 136 678 "},"":{ha:354,x_min:0,x_max:0,o:"m 65 -122 l 189 172 l 299 122 l 136 -158 "},"":{ha:600,x_min:0,x_max:0,o:"m 56 728 l 218 1008 l 289 972 l 165 678 m 301 728 l 464 1008 l 535 972 l 411 678 "},"":{ha:600,x_min:0,x_max:0,o:"m 65 714 l 189 1008 l 299 958 l 136 678 m 311 714 l 435 1008 l 544 958 l 382 678 "},"":{ha:600,x_min:0,x_max:0,o:"m 65 -122 l 189 172 l 299 122 l 136 -158 m 311 -122 l 435 172 l 544 122 l 382 -158 "},"":{ha:519,x_min:0,x_max:0,o:"m 208 721 l 47 721 l 47 814 l 208 814 l 208 993 l 313 993 l 313 814 l 472 814 l 472 721 l 313 721 l 313 296 l 208 296 "},"":{ha:519,x_min:0,x_max:0,o:"m 208 721 l 47 721 l 47 814 l 208 814 l 208 993 l 313 993 l 313 814 l 472 814 l 472 721 l 313 721 l 313 568 l 472 568 l 472 475 l 313 475 l 313 296 l 208 296 l 208 475 l 47 475 l 47 568 l 208 568 "},"":{ha:461,x_min:0,x_max:0,o:"m 231 264 b 69 425 139 264 69 336 b 231 586 69 514 139 586 b 392 425 324 586 392 514 b 231 264 392 336 324 264 "},"":{ha:1119,x_min:0,x_max:0,o:"m 196 -7 b 107 82 147 -7 107 32 b 196 171 107 132 147 171 b 285 82 244 171 285 132 b 196 -7 285 32 244 -7 m 560 -7 b 471 82 511 -7 471 32 b 560 171 471 132 511 171 b 649 82 608 171 649 132 b 560 -7 649 32 608 -7 m 924 -7 b 835 82 875 -7 835 32 b 924 171 835 132 875 171 b 1013 82 972 171 1013 132 b 924 -7 1013 32 972 -7 "},"":{ha:1564,x_min:0,x_max:0,o:"m 268 638 b 385 775 339 638 385 689 b 268 913 385 858 339 913 b 151 774 199 913 151 863 b 268 638 151 686 199 638 m 268 549 b 47 772 154 549 47 643 b 268 1001 47 906 151 1001 b 489 775 388 1001 489 906 b 268 549 489 643 383 549 m 782 993 l 888 993 l 281 0 l 175 0 m 785 78 b 901 215 856 78 901 129 b 785 353 901 299 856 353 b 668 214 715 353 668 303 b 785 78 668 126 715 78 m 785 -11 b 564 213 671 -11 564 83 b 785 442 564 346 668 442 b 1006 215 904 442 1006 346 b 785 -11 1006 83 900 -11 m 1296 78 b 1413 215 1367 78 1413 129 b 1296 353 1413 299 1367 353 b 1179 214 1226 353 1179 303 b 1296 78 1179 126 1226 78 m 1296 -11 b 1075 213 1182 -11 1075 83 b 1296 442 1075 346 1179 442 b 1517 215 1415 442 1517 346 b 1296 -11 1517 83 1411 -11 "},"":{ha:447,x_min:0,x_max:0,o:"m 82 363 l 263 610 l 376 610 l 203 363 l 376 115 l 263 115 "},"":{ha:447,x_min:0,x_max:0,o:"m 244 363 l 71 610 l 185 610 l 365 363 l 185 115 l 71 115 "},"":{ha:157,x_min:0,x_max:0,o:"m 385 993 l 476 993 l -228 0 l -319 0 "},"":{ha:994,x_min:0,x_max:0,o:"m 475 993 l 582 993 l 707 679 l 829 993 l 938 993 l 938 546 l 860 546 l 860 894 l 717 546 l 690 546 l 546 894 l 546 546 l 475 546 m 183 932 l 47 932 l 47 993 l 396 993 l 396 932 l 261 932 l 261 546 l 183 546 "},"":{ha:721,x_min:0,x_max:0,o:"m 50 524 l 671 524 l 671 426 l 50 426 "},"":{ha:692,x_min:0,x_max:0,o:"m 61 231 b 214 396 71 342 138 396 b 481 335 319 396 407 335 b 543 399 510 335 539 354 l 631 399 b 482 233 622 285 554 233 b 213 294 372 233 285 294 b 149 231 182 294 156 274 l 61 231 m 61 476 b 214 642 71 588 138 642 b 481 581 319 642 407 581 b 543 644 510 581 539 600 l 631 644 b 482 479 622 531 554 479 b 213 540 372 479 285 540 b 149 476 182 540 156 519 l 61 476 "},"":{ha:672,x_min:0,x_max:0,o:"m 56 622 l 354 622 l 410 765 l 515 765 l 460 622 l 617 622 l 617 522 l 421 522 l 364 372 l 617 372 l 617 272 l 325 272 l 269 129 l 164 129 l 219 272 l 56 272 l 56 372 l 258 372 l 315 522 l 56 522 "},"":{ha:700,x_min:0,x_max:0,o:"m 74 450 l 74 478 l 607 763 l 607 651 l 246 464 l 607 276 l 607 165 m 74 97 l 607 97 l 607 0 l 74 0 "},"":{ha:700,x_min:0,x_max:0,o:"m 93 276 l 454 464 l 93 651 l 93 763 l 626 478 l 626 450 l 93 165 m 93 97 l 626 97 l 626 0 l 93 0 "},:{ha:994,x_min:0,x_max:0,o:"m 47 544 l 153 544 l 153 993 l 415 993 b 918 506 757 993 918 782 l 918 493 b 413 0 918 218 760 0 l 153 0 l 153 451 l 47 451 m 410 99 b 793 494 665 99 793 251 l 793 506 b 408 896 793 735 682 896 l 274 896 l 274 544 l 561 544 l 561 451 l 274 451 l 274 99 "},:{ha:1006,x_min:0,x_max:0,o:"m 606 -268 b 467 -242 531 -268 493 -256 l 467 -142 b 599 -169 503 -157 539 -169 b 763 -1 696 -169 760 -115 l 240 851 l 240 0 l 125 0 l 125 993 l 282 993 l 765 204 l 765 993 l 881 993 l 881 14 b 606 -268 881 -185 757 -268 "},:{ha:913,x_min:0,x_max:0,o:"m 132 993 l 253 993 l 253 0 l 132 0 m 521 -12 b 382 14 446 -12 408 0 l 382 114 b 514 86 418 99 454 86 b 675 275 613 86 675 142 l 675 993 l 796 993 l 796 269 b 521 -12 796 71 672 -12 "},:{ha:871,x_min:0,x_max:0,o:"m 392 939 l 639 939 l 639 1074 l 754 1074 l 754 939 l 858 939 l 858 854 l 754 854 l 754 0 l 639 0 l 639 125 b 390 -12 597 54 496 -12 b 63 349 200 -12 63 122 l 63 360 b 401 739 63 582 201 739 b 639 610 522 739 597 681 l 639 854 l 392 854 m 403 83 b 643 358 538 83 643 172 l 643 369 b 413 643 643 556 554 643 b 182 365 268 643 182 542 l 182 354 b 403 83 182 171 281 83 "},:{ha:831,x_min:0,x_max:0,o:"m 499 -168 b 606 -56 581 -161 606 -119 l 606 454 b 435 639 606 582 551 639 b 232 440 328 639 232 571 l 232 0 l 117 0 l 117 726 l 232 726 l 232 611 b 465 739 265 679 346 739 b 721 446 615 739 721 657 l 721 -46 b 499 -265 721 -185 660 -260 "},:{ha:708,x_min:0,x_max:0,o:"m 119 726 l 235 726 l 235 0 l 119 0 m 175 878 b 99 954 133 878 99 913 b 175 1031 99 996 133 1031 b 251 954 217 1031 251 996 b 175 878 251 913 217 878 m 367 -168 b 474 -56 449 -161 474 -119 l 474 726 l 589 726 l 589 -46 b 367 -265 589 -185 528 -260 m 529 878 b 453 954 488 878 453 913 b 529 1031 453 996 488 1031 b 606 954 571 1031 606 996 b 529 878 606 913 571 878 "},:{ha:936,x_min:0,x_max:0,o:"m 392 993 l 550 993 l 886 0 l 767 0 l 669 286 l 260 286 l 164 0 l 50 0 m 293 382 l 638 382 l 465 893 m 465 1065 b 282 1249 365 1065 288 1143 l 374 1249 b 465 1160 383 1194 410 1160 b 565 1249 524 1160 554 1193 l 654 1249 b 465 1065 649 1143 565 1065 "},:{ha:936,x_min:0,x_max:0,o:"m 392 993 l 550 993 l 886 0 l 767 0 l 669 286 l 260 286 l 164 0 l 50 0 m 293 382 l 638 382 l 465 893 m 283 1181 l 653 1181 l 653 1092 l 283 1092 "},:{ha:936,x_min:0,x_max:0,o:"m 813 -253 b 668 -142 726 -253 668 -211 b 768 -4 668 -85 713 -33 l 669 286 l 260 286 l 164 0 l 50 0 l 392 993 l 550 993 l 885 4 b 778 -119 808 -40 778 -76 b 831 -169 778 -153 797 -169 b 903 -154 854 -169 882 -165 l 903 -236 b 813 -253 879 -246 851 -253 m 293 382 l 638 382 l 465 893 "},:{ha:936,x_min:0,x_max:0,o:"m 392 993 l 550 993 l 886 0 l 767 0 l 669 286 l 260 286 l 164 0 l 50 0 m 293 382 l 638 382 l 465 893 m 478 1040 b 329 1185 396 1040 329 1106 b 478 1329 329 1264 396 1329 b 626 1185 560 1329 626 1264 b 478 1040 626 1106 560 1040 m 510 1546 l 654 1546 l 518 1369 l 432 1369 m 478 1104 b 551 1185 521 1104 551 1139 b 478 1265 551 1231 521 1265 b 404 1185 435 1265 404 1231 b 478 1104 404 1139 435 1104 "},:{ha:1319,x_min:0,x_max:0,o:"m 554 993 l 1238 993 l 1238 894 l 779 894 l 779 557 l 1149 557 l 1149 458 l 779 458 l 779 99 l 1263 99 l 1263 0 l 658 0 l 658 288 l 308 288 l 163 0 l 40 0 m 356 382 l 658 382 l 658 894 l 615 894 m 874 1247 l 1018 1247 l 882 1071 l 796 1071 "},:{ha:1014,x_min:0,x_max:0,o:"m 540 -12 b 76 490 253 -12 76 185 l 76 501 b 543 1008 76 796 274 1008 b 946 683 750 1008 925 899 l 826 683 b 544 913 801 835 714 913 b 201 503 339 913 201 753 l 201 492 b 543 86 201 239 329 86 b 843 329 706 86 818 168 l 956 329 b 540 -12 921 100 763 -12 m 572 1247 l 717 1247 l 581 1071 l 494 1071 "},:{ha:1014,x_min:0,x_max:0,o:"m 540 -12 b 76 490 253 -12 76 185 l 76 501 b 543 1008 76 796 274 1008 b 946 683 750 1008 925 899 l 826 683 b 544 913 801 835 714 913 b 201 503 339 913 201 753 l 201 492 b 543 86 201 239 329 86 b 843 329 706 86 818 168 l 956 329 b 540 -12 921 100 763 -12 m 344 1247 l 429 1247 l 547 1167 l 665 1247 l 747 1247 l 597 1071 l 493 1071 "},:{ha:1014,x_min:0,x_max:0,o:"m 540 -12 b 76 490 253 -12 76 185 l 76 501 b 543 1008 76 796 274 1008 b 946 683 750 1008 925 899 l 826 683 b 544 913 801 835 714 913 b 201 503 339 913 201 753 l 201 492 b 543 86 201 239 329 86 b 843 329 706 86 818 168 l 956 329 b 540 -12 921 100 763 -12 m 494 1247 l 599 1247 l 747 1071 l 663 1071 l 544 1151 l 426 1071 l 344 1071 "},:{ha:1014,x_min:0,x_max:0,o:"m 540 -12 b 76 490 253 -12 76 185 l 76 501 b 543 1008 76 796 274 1008 b 946 683 750 1008 925 899 l 826 683 b 544 913 801 835 714 913 b 201 503 339 913 201 753 l 201 492 b 543 86 201 239 329 86 b 843 329 706 86 818 168 l 956 329 b 540 -12 921 100 763 -12 m 540 1093 b 464 1169 499 1093 464 1128 b 540 1246 464 1211 499 1246 b 617 1169 582 1246 617 1211 b 540 1093 617 1128 582 1093 "},:{ha:967,x_min:0,x_max:0,o:"m 382 99 b 765 494 638 99 765 251 l 765 506 b 381 896 765 735 654 896 l 246 896 l 246 99 m 125 993 l 388 993 b 890 506 729 993 890 782 l 890 493 b 385 0 890 218 732 0 l 125 0 m 238 1247 l 322 1247 l 440 1167 l 558 1247 l 640 1247 l 490 1071 l 386 1071 "},:{ha:786,x_min:0,x_max:0,o:"m 125 993 l 704 993 l 704 894 l 246 894 l 246 557 l 615 557 l 615 458 l 246 458 l 246 99 l 729 99 l 729 0 l 125 0 m 432 1065 b 249 1249 332 1065 254 1143 l 340 1249 b 432 1160 350 1194 376 1160 b 532 1249 490 1160 521 1193 l 621 1249 b 432 1065 615 1143 532 1065 "},:{ha:786,x_min:0,x_max:0,o:"m 125 993 l 704 993 l 704 894 l 246 894 l 246 557 l 615 557 l 615 458 l 246 458 l 246 99 l 729 99 l 729 0 l 125 0 m 229 1247 l 314 1247 l 432 1167 l 550 1247 l 632 1247 l 482 1071 l 378 1071 "},:{ha:786,x_min:0,x_max:0,o:"m 125 993 l 704 993 l 704 894 l 246 894 l 246 557 l 615 557 l 615 458 l 246 458 l 246 99 l 729 99 l 729 0 l 125 0 m 425 1093 b 349 1169 383 1093 349 1128 b 425 1246 349 1211 383 1246 b 501 1169 467 1246 501 1211 b 425 1093 501 1128 467 1093 "},:{ha:786,x_min:0,x_max:0,o:"m 125 993 l 704 993 l 704 894 l 246 894 l 246 557 l 615 557 l 615 458 l 246 458 l 246 99 l 729 99 l 729 0 l 125 0 m 240 1181 l 610 1181 l 610 1092 l 240 1092 "},:{ha:786,x_min:0,x_max:0,o:"m 631 -253 b 486 -142 544 -253 486 -211 b 594 0 486 -82 535 -29 l 125 0 l 125 993 l 704 993 l 704 894 l 246 894 l 246 557 l 615 557 l 615 458 l 246 458 l 246 99 l 729 99 l 729 0 l 690 0 b 596 -119 628 -42 596 -76 b 649 -169 596 -153 615 -169 b 721 -154 672 -169 700 -165 l 721 -236 b 631 -253 697 -246 669 -253 "},:{ha:1065,x_min:0,x_max:0,o:"m 557 -12 b 76 490 251 -12 76 200 l 76 501 b 557 1008 76 792 272 1008 b 961 693 754 1008 931 917 l 840 693 b 560 913 813 851 704 913 b 201 503 332 913 201 746 l 201 492 b 557 85 201 246 324 85 b 869 401 772 85 865 225 l 579 401 l 579 501 l 988 501 l 988 428 b 557 -12 988 140 811 -12 m 546 1065 b 363 1249 446 1065 368 1143 l 454 1249 b 546 1160 464 1194 490 1160 b 646 1249 604 1160 635 1193 l 735 1249 b 546 1065 729 1143 646 1065 "},:{ha:1065,x_min:0,x_max:0,o:"m 557 -12 b 76 490 251 -12 76 200 l 76 501 b 557 1008 76 792 272 1008 b 961 693 754 1008 931 917 l 840 693 b 560 913 813 851 704 913 b 201 503 332 913 201 746 l 201 492 b 557 85 201 246 324 85 b 869 401 772 85 865 225 l 579 401 l 579 501 l 988 501 l 988 428 b 557 -12 988 140 811 -12 m 497 1247 l 601 1247 l 750 1071 l 665 1071 l 547 1151 l 429 1071 l 347 1071 "},:{ha:1065,x_min:0,x_max:0,o:"m 557 -12 b 76 490 251 -12 76 200 l 76 501 b 557 1008 76 792 272 1008 b 961 693 754 1008 931 917 l 840 693 b 560 913 813 851 704 913 b 201 503 332 913 201 746 l 201 492 b 557 85 201 246 324 85 b 869 401 772 85 865 225 l 579 401 l 579 501 l 988 501 l 988 428 b 557 -12 988 140 811 -12 m 432 -269 l 513 -51 l 624 -85 l 503 -306 "},:{ha:1065,x_min:0,x_max:0,o:"m 557 -12 b 76 490 251 -12 76 200 l 76 501 b 557 1008 76 792 272 1008 b 961 693 754 1008 931 917 l 840 693 b 560 913 813 851 704 913 b 201 503 332 913 201 746 l 201 492 b 557 85 201 246 324 85 b 869 401 772 85 865 225 l 579 401 l 579 501 l 988 501 l 988 428 b 557 -12 988 140 811 -12 m 549 1093 b 472 1169 507 1093 472 1128 b 549 1246 472 1211 507 1246 b 625 1169 590 1246 625 1211 b 549 1093 625 1128 590 1093 "},:{ha:1014,x_min:0,x_max:0,o:"m 28 778 l 125 778 l 125 993 l 246 993 l 246 778 l 768 778 l 768 993 l 889 993 l 889 778 l 986 778 l 986 685 l 889 685 l 889 0 l 768 0 l 768 442 l 246 442 l 246 0 l 125 0 l 125 685 l 28 685 m 768 543 l 768 685 l 246 685 l 246 543 "},:{ha:1014,x_min:0,x_max:0,o:"m 125 993 l 246 993 l 246 543 l 768 543 l 768 993 l 889 993 l 889 0 l 768 0 l 768 442 l 246 442 l 246 0 l 125 0 m 456 1247 l 560 1247 l 708 1071 l 624 1071 l 506 1151 l 388 1071 l 306 1071 "},:{ha:385,x_min:0,x_max:0,o:"m 132 993 l 253 993 l 253 0 l 132 0 m 192 1065 b 8 1249 92 1065 14 1143 l 100 1249 b 192 1160 110 1194 136 1160 b 292 1249 250 1160 281 1193 l 381 1249 b 192 1065 375 1143 292 1065 "},:{ha:385,x_min:0,x_max:0,o:"m 132 993 l 253 993 l 253 0 l 132 0 m 192 1093 b 115 1169 150 1093 115 1128 b 192 1246 115 1211 150 1246 b 268 1169 233 1246 268 1211 b 192 1093 268 1128 233 1093 "},:{ha:385,x_min:0,x_max:0,o:"m 132 993 l 253 993 l 253 0 l 132 0 m 7 1181 l 376 1181 l 376 1092 l 7 1092 "},:{ha:385,x_min:0,x_max:0,o:"m 181 -253 b 36 -142 94 -253 36 -211 b 132 -6 36 -86 78 -36 l 132 993 l 253 993 l 253 6 b 146 -119 178 -37 146 -76 b 199 -169 146 -153 165 -169 b 271 -154 222 -169 250 -165 l 271 -236 b 181 -253 247 -246 219 -253 "},:{ha:385,x_min:0,x_max:0,o:"m 132 993 l 253 993 l 253 0 l 132 0 m 269 1075 b 119 1135 210 1075 160 1135 b 64 1072 93 1135 71 1108 l -19 1072 b 121 1233 -8 1171 49 1233 b 269 1174 179 1233 229 1174 b 325 1236 296 1174 318 1200 l 408 1236 b 269 1075 397 1138 340 1075 "},:{ha:583,x_min:0,x_max:0,o:"m 192 -12 b 53 14 117 -12 79 0 l 53 114 b 185 86 89 99 125 86 b 346 275 283 86 346 142 l 346 993 l 467 993 l 467 269 b 192 -12 467 71 343 -12 m 351 1247 l 456 1247 l 604 1071 l 519 1071 l 401 1151 l 283 1071 l 201 1071 "},:{ha:856,x_min:0,x_max:0,o:"m 125 993 l 246 993 l 246 515 l 678 994 l 813 994 l 371 511 l 835 0 l 689 0 l 246 485 l 246 0 l 125 0 m 331 -269 l 411 -51 l 522 -85 l 401 -306 "},:{ha:743,x_min:0,x_max:0,o:"m 125 993 l 246 993 l 246 99 l 700 99 l 700 0 l 125 0 m 214 1247 l 358 1247 l 222 1071 l 136 1071 "},:{ha:743,x_min:0,x_max:0,o:"m 438 993 l 568 993 l 488 775 l 407 775 m 125 993 l 246 993 l 246 99 l 700 99 l 700 0 l 125 0 "},:{ha:743,x_min:0,x_max:0,o:"m 125 993 l 246 993 l 246 99 l 700 99 l 700 0 l 125 0 m 297 -269 l 378 -51 l 489 -85 l 368 -306 "},:{ha:743,x_min:0,x_max:0,o:"m 125 993 l 246 993 l 246 99 l 700 99 l 700 0 l 125 0 m 556 444 b 467 533 507 444 467 483 b 556 622 467 583 507 622 b 644 533 604 622 644 583 b 556 444 644 483 604 444 "},:{ha:1006,x_min:0,x_max:0,o:"m 125 993 l 282 993 l 765 172 l 765 993 l 881 993 l 881 0 l 742 0 l 240 851 l 240 0 l 125 0 m 543 1247 l 688 1247 l 551 1071 l 465 1071 "},:{ha:1006,x_min:0,x_max:0,o:"m 125 993 l 282 993 l 765 172 l 765 993 l 881 993 l 881 0 l 742 0 l 240 851 l 240 0 l 125 0 m 315 1247 l 400 1247 l 518 1167 l 636 1247 l 718 1247 l 568 1071 l 464 1071 "},:{ha:1006,x_min:0,x_max:0,o:"m 125 993 l 282 993 l 765 172 l 765 993 l 881 993 l 881 0 l 742 0 l 240 851 l 240 0 l 125 0 m 369 -269 l 450 -51 l 561 -85 l 440 -306 "},:{ha:1126,x_min:0,x_max:0,o:"m 568 88 b 925 494 789 88 925 254 l 925 506 b 565 908 925 728 794 908 b 201 503 335 908 201 739 l 201 492 b 568 88 201 251 361 88 m 568 -12 b 76 490 275 -12 76 213 l 76 501 b 565 1006 76 783 274 1006 b 1050 504 857 1006 1050 783 l 1050 493 b 568 -12 1050 213 857 -12 m 560 1065 b 376 1249 460 1065 382 1143 l 468 1249 b 560 1160 478 1194 504 1160 b 660 1249 618 1160 649 1193 l 749 1249 b 560 1065 743 1143 660 1065 "},:{ha:1126,x_min:0,x_max:0,o:"m 568 88 b 925 494 789 88 925 254 l 925 506 b 565 908 925 728 794 908 b 201 503 335 908 201 739 l 201 492 b 568 88 201 251 361 88 m 568 -12 b 76 490 275 -12 76 213 l 76 501 b 565 1006 76 783 274 1006 b 1050 504 857 1006 1050 783 l 1050 493 b 568 -12 1050 213 857 -12 m 458 1247 l 590 1247 l 490 1071 l 407 1071 m 672 1247 l 804 1247 l 704 1071 l 621 1071 "},:{ha:1126,x_min:0,x_max:0,o:"m 568 88 b 925 494 789 88 925 254 l 925 506 b 565 908 925 728 794 908 b 201 503 335 908 201 739 l 201 492 b 568 88 201 251 361 88 m 568 -12 b 76 490 275 -12 76 213 l 76 501 b 565 1006 76 783 274 1006 b 1050 504 857 1006 1050 783 l 1050 493 b 568 -12 1050 213 857 -12 m 378 1181 l 747 1181 l 747 1092 l 378 1092 "},:{ha:1126,x_min:0,x_max:0,o:"m 49 17 l 185 165 b 76 490 115 253 76 367 l 76 501 b 565 1006 76 783 274 1006 b 863 908 682 1006 783 969 l 975 1031 l 1038 968 l 928 847 b 1050 504 1006 758 1050 638 l 1050 493 b 568 -12 1050 213 857 -12 b 246 101 440 -12 329 31 l 111 -46 m 568 88 b 925 494 789 88 925 254 l 925 506 b 853 767 925 608 900 697 l 319 182 b 568 88 383 119 471 88 m 201 492 b 263 251 201 396 224 315 l 793 832 b 565 908 735 881 658 908 b 201 503 335 908 201 739 l 201 492 m 590 1247 l 735 1247 l 599 1071 l 513 1071 "},:{ha:872,x_min:0,x_max:0,o:"m 125 993 l 424 993 b 771 717 614 993 771 915 l 771 711 b 525 440 771 547 661 467 l 829 0 l 694 0 l 399 432 l 246 432 l 246 0 l 125 0 m 432 528 b 650 711 574 528 650 589 l 650 717 b 432 896 650 851 567 896 l 246 896 l 246 528 m 457 1247 l 601 1247 l 465 1071 l 379 1071 "},:{ha:872,x_min:0,x_max:0,o:"m 125 993 l 424 993 b 771 717 614 993 771 915 l 771 711 b 525 440 771 547 661 467 l 829 0 l 694 0 l 399 432 l 246 432 l 246 0 l 125 0 m 432 528 b 650 711 574 528 650 589 l 650 717 b 432 896 650 851 567 896 l 246 896 l 246 528 m 229 1247 l 314 1247 l 432 1167 l 550 1247 l 632 1247 l 482 1071 l 378 1071 "},:{ha:872,x_min:0,x_max:0,o:"m 125 993 l 424 993 b 771 717 614 993 771 915 l 771 711 b 525 440 771 547 661 467 l 829 0 l 694 0 l 399 432 l 246 432 l 246 0 l 125 0 m 432 528 b 650 711 574 528 650 589 l 650 717 b 432 896 650 851 567 896 l 246 896 l 246 528 m 314 -269 l 394 -51 l 506 -85 l 385 -306 "},:{ha:871,x_min:0,x_max:0,o:"m 446 -12 b 67 303 181 -12 85 133 l 183 303 b 446 85 199 185 246 85 b 672 272 574 85 672 160 b 432 463 672 385 621 432 b 100 736 224 494 100 560 b 419 1006 100 889 232 1006 b 761 732 618 1006 742 908 l 653 732 b 419 908 629 857 557 908 b 213 747 283 908 213 840 b 451 569 213 650 249 600 b 789 281 672 535 789 468 b 446 -12 789 114 643 -12 m 446 1247 l 590 1247 l 454 1071 l 368 1071 "},:{ha:871,x_min:0,x_max:0,o:"m 403 -297 b 264 -181 322 -297 269 -250 l 339 -181 b 399 -231 344 -207 364 -231 b 454 -181 433 -231 454 -210 b 404 -133 454 -151 433 -133 b 365 -144 386 -133 372 -140 l 321 -106 l 374 -8 b 67 303 163 15 83 149 l 183 303 b 446 85 199 185 246 85 b 672 272 574 85 672 160 b 432 463 672 385 621 432 b 100 736 224 494 100 560 b 419 1006 100 889 232 1006 b 761 732 618 1006 742 908 l 653 732 b 419 908 629 857 557 908 b 213 747 283 908 213 840 b 451 569 213 650 249 600 b 789 281 672 535 789 468 b 446 -12 789 114 643 -12 l 413 -74 b 543 -186 476 -65 543 -101 b 403 -297 543 -261 478 -297 "},:{ha:871,x_min:0,x_max:0,o:"m 446 -12 b 67 303 181 -12 85 133 l 183 303 b 446 85 199 185 246 85 b 672 272 574 85 672 160 b 432 463 672 385 621 432 b 100 736 224 494 100 560 b 419 1006 100 889 232 1006 b 761 732 618 1006 742 908 l 653 732 b 419 908 629 857 557 908 b 213 747 283 908 213 840 b 451 569 213 650 249 600 b 789 281 672 535 789 468 b 446 -12 789 114 643 -12 m 368 1247 l 472 1247 l 621 1071 l 536 1071 l 418 1151 l 300 1071 l 218 1071 "},:{ha:871,x_min:0,x_max:0,o:"m 446 -12 b 67 303 181 -12 85 133 l 183 303 b 446 85 199 185 246 85 b 672 272 574 85 672 160 b 432 463 672 385 621 432 b 100 736 224 494 100 560 b 419 1006 100 889 232 1006 b 761 732 618 1006 742 908 l 653 732 b 419 908 629 857 557 908 b 213 747 283 908 213 840 b 451 569 213 650 249 600 b 789 281 672 535 789 468 b 446 -12 789 114 643 -12 m 303 -269 l 383 -51 l 494 -85 l 374 -306 "},:{ha:779,x_min:0,x_max:0,o:"m 329 894 l 40 894 l 40 993 l 739 993 l 739 894 l 450 894 l 450 0 l 329 0 m 188 1247 l 272 1247 l 390 1167 l 508 1247 l 590 1247 l 440 1071 l 336 1071 "},:{ha:779,x_min:0,x_max:0,o:"m 329 894 l 40 894 l 40 993 l 739 993 l 739 894 l 450 894 l 450 0 l 329 0 m 272 -269 l 353 -51 l 464 -85 l 343 -306 "},:{ha:779,x_min:0,x_max:0,o:"m 128 561 l 329 561 l 329 894 l 40 894 l 40 993 l 739 993 l 739 894 l 450 894 l 450 561 l 651 561 l 651 469 l 450 469 l 450 0 l 329 0 l 329 469 l 128 469 "},:{ha:967,x_min:0,x_max:0,o:"m 474 -12 b 117 363 246 -12 117 121 l 117 993 l 238 993 l 238 376 b 476 88 238 168 311 88 b 729 394 635 88 729 151 l 729 993 l 850 993 l 850 378 b 474 -12 850 136 729 -12 m 481 1065 b 297 1249 381 1065 303 1143 l 389 1249 b 481 1160 399 1194 425 1160 b 581 1249 539 1160 569 1193 l 669 1249 b 481 1065 664 1143 581 1065 "},:{ha:967,x_min:0,x_max:0,o:"m 474 -12 b 117 363 246 -12 117 121 l 117 993 l 238 993 l 238 376 b 476 88 238 168 311 88 b 729 394 635 88 729 151 l 729 993 l 850 993 l 850 378 b 474 -12 850 136 729 -12 m 379 1247 l 511 1247 l 411 1071 l 328 1071 m 593 1247 l 725 1247 l 625 1071 l 542 1071 "},:{ha:967,x_min:0,x_max:0,o:"m 474 -12 b 117 363 246 -12 117 121 l 117 993 l 238 993 l 238 376 b 476 88 238 168 311 88 b 729 394 635 88 729 151 l 729 993 l 850 993 l 850 378 b 474 -12 850 136 729 -12 m 299 1181 l 668 1181 l 668 1092 l 299 1092 "},:{ha:967,x_min:0,x_max:0,o:"m 533 -253 b 389 -142 447 -253 389 -211 b 475 -12 389 -89 426 -43 l 474 -12 b 117 363 246 -12 117 121 l 117 993 l 238 993 l 238 376 b 476 88 238 168 311 88 b 729 394 635 88 729 151 l 729 993 l 850 993 l 850 378 b 665 25 850 201 785 81 b 499 -119 571 -19 499 -51 b 551 -169 499 -153 518 -169 b 624 -154 575 -169 603 -165 l 624 -236 b 533 -253 600 -246 572 -253 "},:{ha:967,x_min:0,x_max:0,o:"m 474 -12 b 117 363 246 -12 117 121 l 117 993 l 238 993 l 238 376 b 476 88 238 168 311 88 b 729 394 635 88 729 151 l 729 993 l 850 993 l 850 378 b 474 -12 850 136 729 -12 m 483 1090 b 557 1171 526 1090 557 1125 b 483 1251 557 1217 526 1251 b 410 1171 440 1251 410 1217 b 483 1090 410 1125 440 1090 m 483 1026 b 335 1171 401 1026 335 1092 b 483 1315 335 1250 401 1315 b 632 1171 565 1315 632 1250 b 483 1026 632 1092 565 1026 "},:{ha:967,x_min:0,x_max:0,o:"m 474 -12 b 117 363 246 -12 117 121 l 117 993 l 238 993 l 238 376 b 476 88 238 168 311 88 b 729 394 635 88 729 151 l 729 993 l 850 993 l 850 378 b 474 -12 850 136 729 -12 m 558 1075 b 408 1135 499 1075 449 1135 b 353 1072 382 1135 360 1108 l 269 1072 b 410 1233 281 1171 338 1233 b 558 1174 468 1233 518 1174 b 614 1236 585 1174 607 1200 l 697 1236 b 558 1075 686 1138 629 1075 "},:{ha:1289,x_min:0,x_max:0,o:"m 47 993 l 171 993 l 372 192 l 606 993 l 692 993 l 925 189 l 1129 993 l 1242 993 l 983 0 l 872 0 l 647 785 l 415 0 l 306 0 m 689 1247 l 833 1247 l 697 1071 l 611 1071 "},:{ha:1289,x_min:0,x_max:0,o:"m 47 993 l 171 993 l 372 192 l 606 993 l 692 993 l 925 189 l 1129 993 l 1242 993 l 983 0 l 872 0 l 647 785 l 415 0 l 306 0 m 593 1247 l 697 1247 l 846 1071 l 761 1071 l 643 1151 l 525 1071 l 443 1071 "},:{ha:1289,x_min:0,x_max:0,o:"m 47 993 l 171 993 l 372 192 l 606 993 l 692 993 l 925 189 l 1129 993 l 1242 993 l 983 0 l 872 0 l 647 785 l 415 0 l 306 0 m 507 1096 b 433 1169 467 1096 433 1129 b 507 1243 433 1210 467 1243 b 581 1169 547 1243 581 1210 b 507 1096 581 1129 547 1096 m 789 1096 b 715 1169 749 1096 715 1129 b 789 1243 715 1210 749 1243 b 863 1169 829 1243 863 1210 b 789 1096 863 1129 829 1096 "},:{ha:1289,x_min:0,x_max:0,o:"m 47 993 l 171 993 l 372 192 l 606 993 l 692 993 l 925 189 l 1129 993 l 1242 993 l 983 0 l 872 0 l 647 785 l 415 0 l 306 0 m 478 1247 l 622 1247 l 700 1071 l 614 1071 "},:{ha:831,x_min:0,x_max:0,o:"m 364 433 l 32 993 l 168 993 l 428 532 l 678 993 l 799 993 l 485 432 l 485 0 l 364 0 m 364 1247 l 468 1247 l 617 1071 l 532 1071 l 414 1151 l 296 1071 l 214 1071 "},:{ha:831,x_min:0,x_max:0,o:"m 364 433 l 32 993 l 168 993 l 428 532 l 678 993 l 799 993 l 485 432 l 485 0 l 364 0 m 258 1247 l 403 1247 l 481 1071 l 394 1071 "},:{ha:826,x_min:0,x_max:0,o:"m 39 19 l 601 894 l 89 894 l 89 993 l 768 993 l 768 975 l 221 103 l 760 103 l 760 0 l 39 0 m 436 1247 l 581 1247 l 444 1071 l 358 1071 "},:{ha:826,x_min:0,x_max:0,o:"m 39 19 l 601 894 l 89 894 l 89 993 l 768 993 l 768 975 l 221 103 l 760 103 l 760 0 l 39 0 m 410 1093 b 333 1169 368 1093 333 1128 b 410 1246 333 1211 368 1246 b 486 1169 451 1246 486 1211 b 410 1093 486 1128 451 1093 "},:{ha:750,x_min:0,x_max:0,o:"m 299 -12 b 57 201 164 -12 57 53 b 421 426 57 369 235 426 l 525 426 l 525 479 b 369 643 525 594 481 643 b 203 513 269 643 214 601 l 88 513 b 375 739 103 678 235 739 b 640 479 514 739 640 682 l 640 0 l 525 0 l 525 92 b 299 -12 471 24 406 -12 m 310 79 b 525 254 432 79 525 142 l 525 344 l 425 344 b 172 201 279 344 172 308 b 310 79 172 126 208 79 m 374 860 b 190 1043 274 860 196 938 l 282 1043 b 374 954 292 989 318 954 b 474 1043 432 954 463 988 l 563 1043 b 374 860 557 938 474 860 "},:{ha:750,x_min:0,x_max:0,o:"m 299 -12 b 57 201 164 -12 57 53 b 421 426 57 369 235 426 l 525 426 l 525 479 b 369 643 525 594 481 643 b 203 513 269 643 214 601 l 88 513 b 375 739 103 678 235 739 b 640 479 514 739 640 682 l 640 0 l 525 0 l 525 92 b 299 -12 471 24 406 -12 m 310 79 b 525 254 432 79 525 142 l 525 344 l 425 344 b 172 201 279 344 172 308 b 310 79 172 126 208 79 m 194 989 l 558 989 l 558 900 l 194 900 "},:{ha:750,x_min:0,x_max:0,o:"m 565 -253 b 421 -142 479 -253 421 -211 b 525 -1 421 -83 467 -32 l 525 92 b 299 -12 471 24 406 -12 b 57 201 164 -12 57 53 b 421 426 57 369 235 426 l 525 426 l 525 479 b 369 643 525 594 481 643 b 203 513 269 643 214 601 l 88 513 b 375 739 103 678 235 739 b 640 479 514 739 640 682 l 640 6 b 531 -119 565 -37 531 -76 b 583 -169 531 -153 550 -169 b 656 -154 607 -169 635 -165 l 656 -236 b 565 -253 632 -246 604 -253 m 310 79 b 525 254 432 79 525 142 l 525 344 l 425 344 b 172 201 279 344 172 308 b 310 79 172 126 208 79 "},:{ha:750,x_min:0,x_max:0,o:"m 299 -12 b 57 201 164 -12 57 53 b 421 426 57 369 235 426 l 525 426 l 525 479 b 369 643 525 594 481 643 b 203 513 269 643 214 601 l 88 513 b 375 739 103 678 235 739 b 640 479 514 739 640 682 l 640 0 l 525 0 l 525 92 b 299 -12 471 24 406 -12 m 310 79 b 525 254 432 79 525 142 l 525 344 l 425 344 b 172 201 279 344 172 308 b 310 79 172 126 208 79 m 379 867 b 453 947 422 867 453 901 b 379 1028 453 993 422 1028 b 306 947 336 1028 306 993 b 379 867 306 901 336 867 m 379 803 b 231 947 297 803 231 868 b 379 1092 231 1026 297 1092 b 528 947 461 1092 528 1026 b 379 803 528 868 461 803 m 421 1328 l 565 1328 l 429 1151 l 343 1151 "},:{ha:1222,x_min:0,x_max:0,o:"m 856 -12 b 582 138 733 -12 638 43 b 299 -12 515 33 432 -12 b 57 201 164 -12 57 53 b 417 431 57 371 231 431 l 525 431 l 525 478 b 369 643 525 593 476 643 b 203 513 269 643 214 601 l 88 513 b 375 739 103 678 235 739 b 603 615 471 739 561 708 b 847 739 658 693 742 739 b 1163 378 1008 739 1163 640 l 1163 343 l 636 343 b 857 83 642 178 714 83 b 1042 210 965 83 1026 125 l 1157 210 b 856 -12 1132 64 1013 -12 m 310 79 b 525 254 432 79 525 142 l 525 343 l 421 343 b 172 201 275 343 172 308 b 310 79 172 126 208 79 m 1044 431 b 847 643 1033 583 963 643 b 640 431 735 643 658 561 m 651 1056 l 796 1056 l 651 851 l 565 851 "},:{ha:792,x_min:0,x_max:0,o:"m 418 -12 b 63 356 215 -12 63 131 l 63 367 b 415 739 63 589 221 739 b 731 485 567 739 708 669 l 617 485 b 415 643 599 600 515 643 b 182 367 283 643 182 538 l 182 356 b 419 83 182 178 279 83 b 628 261 522 83 615 143 l 735 261 b 418 -12 719 104 593 -12 m 449 1056 l 593 1056 l 449 851 l 363 851 "},:{ha:792,x_min:0,x_max:0,o:"m 418 -12 b 63 356 215 -12 63 131 l 63 367 b 415 739 63 589 221 739 b 731 485 567 739 708 669 l 617 485 b 415 643 599 600 515 643 b 182 367 283 643 182 538 l 182 356 b 419 83 182 178 279 83 b 628 261 522 83 615 143 l 735 261 b 418 -12 719 104 593 -12 m 213 1051 l 297 1051 l 415 947 l 533 1051 l 615 1051 l 465 851 l 361 851 "},:{ha:792,x_min:0,x_max:0,o:"m 418 -12 b 63 356 215 -12 63 131 l 63 367 b 415 739 63 589 221 739 b 731 485 567 739 708 669 l 617 485 b 415 643 599 600 515 643 b 182 367 283 643 182 538 l 182 356 b 419 83 182 178 279 83 b 628 261 522 83 615 143 l 735 261 b 418 -12 719 104 593 -12 m 363 1051 l 467 1051 l 615 851 l 531 851 l 413 956 l 294 851 l 213 851 "},:{ha:792,x_min:0,x_max:0,o:"m 418 -12 b 63 356 215 -12 63 131 l 63 367 b 415 739 63 589 221 739 b 731 485 567 739 708 669 l 617 485 b 415 643 599 600 515 643 b 182 367 283 643 182 538 l 182 356 b 419 83 182 178 279 83 b 628 261 522 83 615 143 l 735 261 b 418 -12 719 104 593 -12 m 414 878 b 338 954 372 878 338 913 b 414 1031 338 996 372 1031 b 490 954 456 1031 490 996 b 414 878 490 913 456 878 "},:{ha:871,x_min:0,x_max:0,o:"m 390 -12 b 63 349 200 -12 63 122 l 63 360 b 401 739 63 582 201 739 b 639 610 522 739 597 681 l 639 1074 l 754 1074 l 754 0 l 639 0 l 639 125 b 390 -12 597 54 496 -12 m 403 83 b 643 358 538 83 643 172 l 643 369 b 413 643 643 556 554 643 b 182 365 268 643 182 542 l 182 354 b 403 83 182 171 281 83 m 838 1074 l 968 1074 l 901 831 l 821 831 "},:{ha:789,x_min:0,x_max:0,o:"m 414 -12 b 63 356 208 -12 63 132 l 63 367 b 403 739 63 586 203 739 b 729 378 571 739 729 638 l 729 340 l 182 340 b 415 83 188 175 267 83 b 608 210 528 83 593 125 l 724 210 b 414 -12 699 64 578 -12 m 611 433 b 403 643 600 583 522 643 b 186 433 285 643 206 563 m 389 860 b 206 1043 289 860 211 938 l 297 1043 b 389 954 307 989 333 954 b 489 1043 447 954 478 988 l 578 1043 b 389 860 572 938 489 860 "},:{ha:789,x_min:0,x_max:0,o:"m 414 -12 b 63 356 208 -12 63 132 l 63 367 b 403 739 63 586 203 739 b 729 378 571 739 729 638 l 729 340 l 182 340 b 415 83 188 175 267 83 b 608 210 528 83 593 125 l 724 210 b 414 -12 699 64 578 -12 m 611 433 b 403 643 600 583 522 643 b 186 433 285 643 206 563 m 201 1051 l 286 1051 l 404 947 l 522 1051 l 604 1051 l 454 851 l 350 851 "},:{ha:789,x_min:0,x_max:0,o:"m 414 -12 b 63 356 208 -12 63 132 l 63 367 b 403 739 63 586 203 739 b 729 378 571 739 729 638 l 729 340 l 182 340 b 415 83 188 175 267 83 b 608 210 528 83 593 125 l 724 210 b 414 -12 699 64 578 -12 m 611 433 b 403 643 600 583 522 643 b 186 433 285 643 206 563 m 403 878 b 326 954 361 878 326 913 b 403 1031 326 996 361 1031 b 479 954 444 1031 479 996 b 403 878 479 913 444 878 "},:{ha:789,x_min:0,x_max:0,o:"m 414 -12 b 63 356 208 -12 63 132 l 63 367 b 403 739 63 586 203 739 b 729 378 571 739 729 638 l 729 340 l 182 340 b 415 83 188 175 267 83 b 608 210 528 83 593 125 l 724 210 b 414 -12 699 64 578 -12 m 611 433 b 403 643 600 583 522 643 b 186 433 285 643 206 563 m 221 989 l 585 989 l 585 900 l 221 900 "},:{ha:789,x_min:0,x_max:0,o:"m 539 -253 b 394 -142 453 -253 394 -211 b 490 -7 394 -86 436 -36 b 414 -12 465 -11 440 -12 b 63 356 208 -12 63 132 l 63 367 b 403 739 63 586 203 739 b 729 378 571 739 729 638 l 729 340 l 182 340 b 415 83 188 175 267 83 b 608 210 528 83 593 125 l 724 210 b 597 15 704 97 633 46 b 504 -119 543 -31 504 -76 b 557 -169 504 -153 524 -169 b 629 -154 581 -169 608 -165 l 629 -236 b 539 -253 606 -246 578 -253 m 611 433 b 403 643 600 583 522 643 b 186 433 285 643 206 563 "},:{ha:871,x_min:0,x_max:0,o:"m 407 -265 b 78 -42 192 -265 97 -164 l 196 -42 b 406 -168 213 -125 282 -168 b 639 56 549 -168 639 -100 l 639 161 b 393 24 597 90 499 24 b 63 368 203 24 63 168 l 63 378 b 401 739 63 575 201 739 b 639 610 522 739 597 681 l 639 726 l 754 726 l 754 49 b 407 -265 753 -162 610 -265 m 406 119 b 643 376 540 119 643 214 l 643 386 b 413 643 643 549 554 643 b 182 383 268 643 182 536 l 182 372 b 406 119 182 214 283 119 m 406 860 b 222 1043 306 860 228 938 l 314 1043 b 406 954 324 989 350 954 b 506 1043 464 954 494 988 l 594 1043 b 406 860 589 938 506 860 "},:{ha:871,x_min:0,x_max:0,o:"m 407 -265 b 78 -42 192 -265 97 -164 l 196 -42 b 406 -168 213 -125 282 -168 b 639 56 549 -168 639 -100 l 639 161 b 393 24 597 90 499 24 b 63 368 203 24 63 168 l 63 378 b 401 739 63 575 201 739 b 639 610 522 739 597 681 l 639 726 l 754 726 l 754 49 b 407 -265 753 -162 610 -265 m 406 119 b 643 376 540 119 643 214 l 643 386 b 413 643 643 549 554 643 b 182 383 268 643 182 536 l 182 372 b 406 119 182 214 283 119 m 357 1051 l 461 1051 l 610 851 l 525 851 l 407 956 l 289 851 l 207 851 "},:{ha:871,x_min:0,x_max:0,o:"m 407 -265 b 78 -42 192 -265 97 -164 l 196 -42 b 406 -168 213 -125 282 -168 b 639 56 549 -168 639 -100 l 639 161 b 393 24 597 90 499 24 b 63 368 203 24 63 168 l 63 378 b 401 739 63 575 201 739 b 639 610 522 739 597 681 l 639 726 l 754 726 l 754 49 b 407 -265 753 -162 610 -265 m 406 119 b 643 376 540 119 643 214 l 643 386 b 413 643 643 549 554 643 b 182 383 268 643 182 536 l 182 372 b 406 119 182 214 283 119 m 353 869 l 474 1090 l 544 1054 l 464 836 "},:{ha:871,x_min:0,x_max:0,o:"m 407 -265 b 78 -42 192 -265 97 -164 l 196 -42 b 406 -168 213 -125 282 -168 b 639 56 549 -168 639 -100 l 639 161 b 393 24 597 90 499 24 b 63 368 203 24 63 168 l 63 378 b 401 739 63 575 201 739 b 639 610 522 739 597 681 l 639 726 l 754 726 l 754 49 b 407 -265 753 -162 610 -265 m 406 119 b 643 376 540 119 643 214 l 643 386 b 413 643 643 549 554 643 b 182 383 268 643 182 536 l 182 372 b 406 119 182 214 283 119 m 408 878 b 332 954 367 878 332 913 b 408 1031 332 996 367 1031 b 485 954 450 1031 485 996 b 408 878 485 913 450 878 "},:{ha:831,x_min:0,x_max:0,o:"m 13 939 l 117 939 l 117 1074 l 232 1074 l 232 939 l 479 939 l 479 854 l 232 854 l 232 611 b 465 739 265 679 346 739 b 721 446 615 739 721 657 l 721 0 l 606 0 l 606 454 b 435 639 606 582 551 639 b 232 440 328 639 232 571 l 232 0 l 117 0 l 117 854 l 13 854 "},:{ha:831,x_min:0,x_max:0,o:"m 117 1074 l 232 1074 l 232 611 b 465 739 265 679 346 739 b 721 446 615 739 721 657 l 721 0 l 606 0 l 606 454 b 435 639 606 582 551 639 b 232 440 328 639 232 571 l 232 0 l 117 0 m 383 1317 l 488 1317 l 636 1140 l 551 1140 l 433 1221 l 315 1140 l 233 1140 "},:{ha:354,x_min:0,x_max:0,o:"m 119 726 l 235 726 l 235 0 l 119 0 m 175 860 b -8 1043 75 860 -3 938 l 83 1043 b 175 954 93 989 119 954 b 275 1043 233 954 264 988 l 364 1043 b 175 860 358 938 275 860 "},:{ha:354,x_min:0,x_max:0,o:"m 42 989 l 311 989 l 311 900 l 42 900 m 119 726 l 235 726 l 235 0 l 119 0 "},:{ha:354,x_min:0,x_max:0,o:"m 167 -253 b 22 -142 81 -253 22 -211 b 119 -6 22 -85 64 -35 l 119 726 l 235 726 l 235 4 b 132 -119 164 -39 132 -76 b 185 -169 132 -153 151 -169 b 257 -154 208 -169 236 -165 l 257 -236 b 167 -253 233 -246 206 -253 m 175 878 b 99 954 133 878 99 913 b 175 1031 99 996 133 1031 b 251 954 217 1031 251 996 b 175 878 251 913 217 878 "},:{ha:354,x_min:0,x_max:0,o:"m 119 726 l 235 726 l 235 0 l 119 0 m 253 860 b 103 919 193 860 143 919 b 47 857 76 919 54 893 l -36 857 b 104 1018 -25 956 32 1018 b 253 958 163 1018 213 958 b 308 1021 279 958 301 985 l 392 1021 b 253 860 381 922 324 860 "},:{ha:354,x_min:0,x_max:0,o:"m 13 -168 b 119 -56 94 -161 119 -119 l 119 726 l 235 726 l 235 -46 b 13 -265 235 -185 174 -260 m 124 1051 l 228 1051 l 376 851 l 292 851 l 174 956 l 56 851 l -26 851 "},:{ha:717,x_min:0,x_max:0,o:"m 117 1074 l 232 1074 l 232 392 l 533 726 l 668 726 l 357 389 l 694 0 l 554 0 l 232 376 l 232 0 l 117 0 m 258 -269 l 339 -51 l 450 -85 l 329 -306 "},:{ha:356,x_min:0,x_max:0,o:"m 119 1074 l 236 1074 l 236 0 l 119 0 m 206 1317 l 350 1317 l 214 1140 l 128 1140 "},:{ha:356,x_min:0,x_max:0,o:"m 119 1074 l 236 1074 l 236 0 l 119 0 m 319 1074 l 450 1074 l 383 831 l 303 831 "},:{ha:356,x_min:0,x_max:0,o:"m 119 1074 l 236 1074 l 236 0 l 119 0 m 61 -269 l 142 -51 l 253 -85 l 132 -306 "},:{ha:456,x_min:0,x_max:0,o:"m 119 1074 l 236 1074 l 236 0 l 119 0 m 403 421 b 314 510 354 421 314 460 b 403 599 314 560 354 599 b 492 510 451 599 492 560 b 403 421 492 460 451 421 "},:{ha:831,x_min:0,x_max:0,o:"m 117 726 l 232 726 l 232 611 b 465 739 265 679 346 739 b 721 446 615 739 721 657 l 721 0 l 606 0 l 606 454 b 435 639 606 582 551 639 b 232 440 328 639 232 571 l 232 0 l 117 0 m 449 1056 l 593 1056 l 449 851 l 363 851 "},:{ha:831,x_min:0,x_max:0,o:"m 117 726 l 232 726 l 232 611 b 465 739 265 679 346 739 b 721 446 615 739 721 657 l 721 0 l 606 0 l 606 454 b 435 639 606 582 551 639 b 232 440 328 639 232 571 l 232 0 l 117 0 m -61 714 l 63 1008 l 172 958 l 10 678 "},:{ha:831,x_min:0,x_max:0,o:"m 117 726 l 232 726 l 232 611 b 465 739 265 679 346 739 b 721 446 615 739 721 657 l 721 0 l 606 0 l 606 454 b 435 639 606 582 551 639 b 232 440 328 639 232 571 l 232 0 l 117 0 m 213 1051 l 297 1051 l 415 947 l 533 1051 l 615 1051 l 465 851 l 361 851 "},:{ha:831,x_min:0,x_max:0,o:"m 117 726 l 232 726 l 232 611 b 465 739 265 679 346 739 b 721 446 615 739 721 657 l 721 0 l 606 0 l 606 454 b 435 639 606 582 551 639 b 232 440 328 639 232 571 l 232 0 l 117 0 m 297 -269 l 378 -51 l 489 -85 l 368 -306 "},:{ha:839,x_min:0,x_max:0,o:"m 419 83 b 657 357 565 83 657 193 l 657 367 b 419 643 657 535 564 643 b 182 368 274 643 182 535 l 182 357 b 419 83 182 192 272 83 m 418 -12 b 63 357 211 -12 63 144 l 63 368 b 419 739 63 586 214 739 b 776 369 625 739 776 588 l 776 358 b 418 -12 776 139 625 -12 m 417 860 b 233 1043 317 860 239 938 l 325 1043 b 417 954 335 989 361 954 b 517 1043 475 954 506 988 l 606 1043 b 417 860 600 938 517 860 "},:{ha:839,x_min:0,x_max:0,o:"m 419 83 b 657 357 565 83 657 193 l 657 367 b 419 643 657 535 564 643 b 182 368 274 643 182 535 l 182 357 b 419 83 182 192 272 83 m 418 -12 b 63 357 211 -12 63 144 l 63 368 b 419 739 63 586 214 739 b 776 369 625 739 776 588 l 776 358 b 418 -12 776 139 625 -12 m 319 1056 l 451 1056 l 347 851 l 264 851 m 533 1056 l 665 1056 l 561 851 l 478 851 "},:{ha:839,x_min:0,x_max:0,o:"m 419 83 b 657 357 565 83 657 193 l 657 367 b 419 643 657 535 564 643 b 182 368 274 643 182 535 l 182 357 b 419 83 182 192 272 83 m 418 -12 b 63 357 211 -12 63 144 l 63 368 b 419 739 63 586 214 739 b 776 369 625 739 776 588 l 776 358 b 418 -12 776 139 625 -12 m 238 989 l 601 989 l 601 900 l 238 900 "},:{ha:839,x_min:0,x_max:0,o:"m 32 1 l 139 119 b 63 357 90 182 63 264 l 63 368 b 419 739 63 586 214 739 b 636 669 503 739 578 714 l 731 772 l 792 719 l 694 613 b 776 369 746 549 776 465 l 776 358 b 418 -12 776 139 625 -12 b 196 63 331 -12 256 15 l 93 -51 m 419 83 b 657 357 565 83 657 193 l 657 367 b 619 529 657 431 643 485 l 264 139 b 419 83 304 103 356 83 m 182 357 b 215 203 182 297 193 246 l 567 592 b 419 643 528 625 478 643 b 182 368 274 643 182 535 l 182 357 m 453 1056 l 597 1056 l 453 851 l 367 851 "},:{ha:522,x_min:0,x_max:0,o:"m 117 726 l 232 726 l 232 596 b 471 739 278 678 340 735 l 471 631 b 232 399 325 624 232 578 l 232 0 l 117 0 m 319 1056 l 464 1056 l 319 851 l 233 851 "},:{ha:522,x_min:0,x_max:0,o:"m 117 726 l 232 726 l 232 596 b 471 739 278 678 340 735 l 471 631 b 232 399 325 624 232 578 l 232 0 l 117 0 m 83 1051 l 168 1051 l 286 947 l 404 1051 l 486 1051 l 336 851 l 232 851 "},:{ha:522,x_min:0,x_max:0,o:"m 117 726 l 232 726 l 232 596 b 471 739 278 678 340 735 l 471 631 b 232 399 325 624 232 578 l 232 0 l 117 0 m 54 -269 l 135 -51 l 246 -85 l 125 -306 "},:{ha:667,x_min:0,x_max:0,o:"m 342 -12 b 57 224 168 -12 64 75 l 169 224 b 340 83 178 138 224 83 b 499 199 450 83 499 121 b 329 321 499 275 442 300 b 76 535 140 356 76 408 b 322 739 76 669 208 739 b 585 529 453 739 565 686 l 474 529 b 321 643 457 608 413 643 b 183 539 238 643 183 601 b 353 424 183 474 219 447 b 608 208 503 396 608 363 b 342 -12 608 76 518 -12 m 365 1056 l 510 1056 l 365 851 l 279 851 "},:{ha:667,x_min:0,x_max:0,o:"m 315 -297 b 176 -181 235 -297 182 -250 l 251 -181 b 311 -231 257 -207 276 -231 b 367 -181 346 -231 367 -210 b 317 -133 367 -151 346 -133 b 278 -144 299 -133 285 -140 l 233 -106 l 286 -8 b 57 224 146 7 63 92 l 169 224 b 340 83 178 138 224 83 b 499 199 450 83 499 121 b 329 321 499 275 442 300 b 76 535 140 356 76 408 b 322 739 76 669 208 739 b 585 529 453 739 565 686 l 474 529 b 321 643 457 608 413 643 b 183 539 238 643 183 601 b 353 424 183 474 219 447 b 608 208 503 396 608 363 b 358 -12 608 81 524 -7 l 325 -74 b 456 -186 389 -65 456 -101 b 315 -297 456 -261 390 -297 "},:{ha:667,x_min:0,x_max:0,o:"m 342 -12 b 57 224 168 -12 64 75 l 169 224 b 340 83 178 138 224 83 b 499 199 450 83 499 121 b 329 321 499 275 442 300 b 76 535 140 356 76 408 b 322 739 76 669 208 739 b 585 529 453 739 565 686 l 474 529 b 321 643 457 608 413 643 b 183 539 238 643 183 601 b 353 424 183 474 219 447 b 608 208 503 396 608 363 b 342 -12 608 76 518 -12 m 279 1051 l 383 1051 l 532 851 l 447 851 l 329 956 l 211 851 l 129 851 "},:{ha:667,x_min:0,x_max:0,o:"m 342 -12 b 57 224 168 -12 64 75 l 169 224 b 340 83 178 138 224 83 b 499 199 450 83 499 121 b 329 321 499 275 442 300 b 76 535 140 356 76 408 b 322 739 76 669 208 739 b 585 529 453 739 565 686 l 474 529 b 321 643 457 608 413 643 b 183 539 238 643 183 601 b 353 424 183 474 219 447 b 608 208 503 396 608 363 b 342 -12 608 76 518 -12 m 214 -269 l 294 -51 l 406 -85 l 285 -306 "},:{ha:493,x_min:0,x_max:0,o:"m 38 471 l 142 471 l 142 629 l 38 629 l 38 726 l 142 726 l 142 892 l 257 892 l 257 726 l 426 726 l 426 629 l 257 629 l 257 471 l 426 471 l 426 389 l 257 389 l 257 193 b 347 88 257 122 289 88 b 436 103 383 88 411 93 l 436 6 b 338 -10 413 -3 385 -10 b 142 182 206 -10 142 68 l 142 389 l 38 389 "},:{ha:493,x_min:0,x_max:0,o:"m 338 -10 b 142 182 206 -10 142 68 l 142 629 l 38 629 l 38 726 l 142 726 l 142 892 l 257 892 l 257 726 l 426 726 l 426 629 l 257 629 l 257 193 b 347 88 257 122 289 88 b 436 103 383 88 411 93 l 436 6 b 338 -10 413 -3 385 -10 m 374 1074 l 504 1074 l 438 831 l 357 831 "},:{ha:493,x_min:0,x_max:0,o:"m 338 -10 b 142 182 206 -10 142 68 l 142 629 l 38 629 l 38 726 l 142 726 l 142 892 l 257 892 l 257 726 l 426 726 l 426 629 l 257 629 l 257 193 b 347 88 257 122 289 88 b 436 103 383 88 411 93 l 436 6 b 338 -10 413 -3 385 -10 m 149 -269 l 229 -51 l 340 -85 l 219 -306 "},:{ha:825,x_min:0,x_max:0,o:"m 363 -12 b 110 267 218 -12 110 67 l 110 726 l 225 726 l 225 272 b 393 88 225 144 279 88 b 593 286 496 88 593 156 l 593 726 l 708 726 l 708 0 l 593 0 l 593 115 b 363 -12 560 47 479 -12 m 410 860 b 226 1043 310 860 232 938 l 318 1043 b 410 954 328 989 354 954 b 510 1043 468 954 499 988 l 599 1043 b 410 860 593 938 510 860 "},:{ha:825,x_min:0,x_max:0,o:"m 363 -12 b 110 267 218 -12 110 67 l 110 726 l 225 726 l 225 272 b 393 88 225 144 279 88 b 593 286 496 88 593 156 l 593 726 l 708 726 l 708 0 l 593 0 l 593 115 b 363 -12 560 47 479 -12 m 313 1056 l 444 1056 l 340 851 l 257 851 m 526 1056 l 658 1056 l 554 851 l 471 851 "},:{ha:825,x_min:0,x_max:0,o:"m 363 -12 b 110 267 218 -12 110 67 l 110 726 l 225 726 l 225 272 b 393 88 225 144 279 88 b 593 286 496 88 593 156 l 593 726 l 708 726 l 708 0 l 593 0 l 593 115 b 363 -12 560 47 479 -12 m 231 989 l 594 989 l 594 900 l 231 900 "},:{ha:825,x_min:0,x_max:0,o:"m 638 -253 b 493 -142 551 -253 493 -211 b 593 -4 493 -85 538 -33 l 593 115 b 363 -12 560 47 479 -12 b 110 267 218 -12 110 67 l 110 726 l 225 726 l 225 272 b 393 88 225 144 279 88 b 593 286 496 88 593 156 l 593 726 l 708 726 l 708 7 b 603 -119 633 -40 603 -76 b 656 -169 603 -153 622 -169 b 728 -154 679 -169 707 -165 l 728 -236 b 638 -253 704 -246 676 -253 "},:{ha:825,x_min:0,x_max:0,o:"m 363 -12 b 110 267 218 -12 110 67 l 110 726 l 225 726 l 225 272 b 393 88 225 144 279 88 b 593 286 496 88 593 156 l 593 726 l 708 726 l 708 0 l 593 0 l 593 115 b 363 -12 560 47 479 -12 m 408 853 b 482 933 451 853 482 888 b 408 1014 482 979 451 1014 b 335 933 365 1014 335 979 b 408 853 335 888 365 853 m 408 789 b 260 933 326 789 260 854 b 408 1078 260 1013 326 1078 b 557 933 490 1078 557 1013 b 408 789 557 854 490 789 "},:{ha:825,x_min:0,x_max:0,o:"m 363 -12 b 110 267 218 -12 110 67 l 110 726 l 225 726 l 225 272 b 393 88 225 144 279 88 b 593 286 496 88 593 156 l 593 726 l 708 726 l 708 0 l 593 0 l 593 115 b 363 -12 560 47 479 -12 m 488 860 b 338 919 428 860 378 919 b 282 857 311 919 289 893 l 199 857 b 339 1018 210 956 267 1018 b 488 958 397 1018 447 958 b 543 1021 514 958 536 985 l 626 1021 b 488 860 615 922 558 860 "},:{ha:1103,x_min:0,x_max:0,o:"m 39 726 l 164 726 l 333 142 l 510 726 l 610 726 l 775 142 l 946 726 l 1064 726 l 838 0 l 710 0 l 558 544 l 389 0 l 263 0 m 600 1056 l 744 1056 l 600 851 l 514 851 "},:{ha:1103,x_min:0,x_max:0,o:"m 39 726 l 164 726 l 333 142 l 510 726 l 610 726 l 775 142 l 946 726 l 1064 726 l 838 0 l 710 0 l 558 544 l 389 0 l 263 0 m 500 1051 l 604 1051 l 753 851 l 668 851 l 550 956 l 432 851 l 350 851 "},:{ha:1103,x_min:0,x_max:0,o:"m 39 726 l 164 726 l 333 142 l 510 726 l 610 726 l 775 142 l 946 726 l 1064 726 l 838 0 l 710 0 l 558 544 l 389 0 l 263 0 m 428 881 b 354 954 388 881 354 914 b 428 1028 354 994 388 1028 b 501 954 468 1028 501 994 b 428 881 501 914 468 881 m 689 881 b 615 954 649 881 615 914 b 689 1028 615 994 649 1028 b 763 954 729 1028 763 994 b 689 881 763 914 729 881 "},:{ha:1103,x_min:0,x_max:0,o:"m 39 726 l 164 726 l 333 142 l 510 726 l 610 726 l 775 142 l 946 726 l 1064 726 l 838 0 l 710 0 l 558 544 l 389 0 l 263 0 m 385 1056 l 529 1056 l 615 851 l 529 851 "},:{ha:735,x_min:0,x_max:0,o:"m 319 75 l 35 726 l 158 726 l 381 206 l 582 726 l 700 726 l 299 -253 l 182 -253 m 315 1051 l 419 1051 l 568 851 l 483 851 l 365 956 l 247 851 l 165 851 "},:{ha:735,x_min:0,x_max:0,o:"m 319 75 l 35 726 l 158 726 l 381 206 l 582 726 l 700 726 l 299 -253 l 182 -253 m 193 1056 l 338 1056 l 424 851 l 338 851 "},:{ha:671,x_min:0,x_max:0,o:"m 29 17 l 458 629 l 71 629 l 71 726 l 636 726 l 636 706 l 217 101 l 631 101 l 631 0 l 29 0 m 379 1056 l 524 1056 l 379 851 l 293 851 "},:{ha:671,x_min:0,x_max:0,o:"m 29 17 l 458 629 l 71 629 l 71 726 l 636 726 l 636 706 l 217 101 l 631 101 l 631 0 l 29 0 m 344 878 b 268 954 303 878 268 913 b 344 1031 268 996 303 1031 b 421 954 386 1031 421 996 b 344 878 421 913 386 878 "},:{ha:881,x_min:0,x_max:0,o:"m 142 629 l 38 629 l 38 726 l 142 726 l 142 835 b 358 1068 142 982 214 1068 b 444 1054 396 1068 415 1064 l 444 957 b 363 972 424 965 394 972 b 257 847 288 972 257 921 l 257 726 l 542 726 l 542 844 b 758 1078 542 992 614 1078 b 844 1064 796 1078 815 1074 l 844 967 b 763 982 824 975 794 982 b 657 857 688 982 657 931 l 657 726 l 835 726 l 835 629 l 657 629 l 657 0 l 542 0 l 542 629 l 257 629 l 257 0 l 142 0 "},:{ha:829,x_min:0,x_max:0,o:"m 142 629 l 38 629 l 38 726 l 142 726 l 142 844 b 356 1078 142 992 213 1078 b 435 1067 393 1078 413 1075 l 435 969 b 360 982 414 978 392 982 b 257 857 286 982 257 931 l 257 726 l 435 726 l 435 629 l 257 629 l 257 0 l 142 0 m 594 726 l 710 726 l 710 0 l 594 0 m 650 878 b 574 954 608 878 574 913 b 650 1031 574 996 608 1031 b 726 954 692 1031 726 996 b 650 878 726 913 692 878 "},:{ha:831,x_min:0,x_max:0,o:"m 142 629 l 38 629 l 38 726 l 142 726 l 142 844 b 356 1078 142 992 213 1078 b 435 1067 393 1078 413 1075 l 435 969 b 360 982 414 978 392 982 b 257 857 286 982 257 931 l 257 726 l 435 726 l 435 629 l 257 629 l 257 0 l 142 0 m 594 1074 l 711 1074 l 711 0 l 594 0 "},"":{ha:992,x_min:0,x_max:0,o:"m 150 901 l 38 826 l 38 908 l 161 993 l 244 993 l 244 518 l 150 518 m 767 993 l 858 993 l 154 0 l 63 0 m 768 -7 b 589 133 672 -7 589 40 b 676 254 589 194 624 236 b 607 353 633 272 607 306 b 769 481 607 433 685 481 b 931 354 856 481 931 433 b 860 256 931 306 903 274 b 949 136 915 235 949 194 b 768 -7 949 43 868 -7 m 769 63 b 856 143 818 63 856 90 b 769 222 856 193 818 222 b 683 142 722 222 683 193 b 769 63 683 90 722 63 m 769 282 b 842 349 813 282 842 307 b 769 414 842 389 810 414 b 696 347 728 414 696 389 b 769 282 696 306 731 282 "},"":{ha:1004,x_min:0,x_max:0,o:"m 150 901 l 38 826 l 38 908 l 161 993 l 244 993 l 244 518 l 150 518 m 767 993 l 858 993 l 154 0 l 63 0 m 778 -7 b 596 147 663 -7 599 54 l 681 147 b 775 63 686 99 713 63 b 863 138 835 63 863 92 b 779 213 863 188 835 213 l 743 213 l 743 278 l 778 278 b 856 346 831 278 856 303 b 783 411 856 383 832 411 b 697 335 735 411 703 382 l 613 335 b 785 481 618 419 682 481 b 944 353 886 481 944 425 b 865 250 944 300 913 267 b 958 136 921 238 958 199 b 778 -7 958 47 889 -7 "},"":{ha:1033,x_min:0,x_max:0,o:"m 215 511 b 33 665 100 511 36 572 l 118 665 b 213 581 124 617 150 581 b 300 656 272 581 300 610 b 217 731 300 706 272 731 l 181 731 l 181 796 l 215 796 b 293 864 268 796 293 821 b 221 929 293 901 269 929 b 135 853 172 929 140 900 l 50 853 b 222 999 56 938 119 999 b 382 871 324 999 382 943 b 303 768 382 818 350 785 b 396 654 358 756 396 717 b 215 511 396 565 326 511 m 825 993 l 917 993 l 213 0 l 121 0 m 810 -7 b 631 133 714 -7 631 40 b 718 254 631 194 665 236 b 649 353 675 272 649 306 b 811 481 649 433 726 481 b 972 354 897 481 972 433 b 901 256 972 306 944 274 b 990 136 957 235 990 194 b 810 -7 990 43 910 -7 m 811 63 b 897 143 860 63 897 90 b 811 222 897 193 860 222 b 725 142 764 222 725 193 b 811 63 725 90 764 63 m 811 282 b 883 349 854 282 883 307 b 811 414 883 389 851 414 b 738 347 769 414 738 389 b 811 282 738 306 772 282 "},"":{ha:1025,x_min:0,x_max:0,o:"m 206 511 b 33 656 93 511 39 572 l 121 656 b 206 583 128 613 144 583 b 286 676 257 583 286 619 b 204 767 286 732 256 767 b 107 726 157 767 128 751 l 57 726 l 63 993 l 354 993 l 354 921 l 133 921 l 132 793 b 236 835 151 815 185 835 b 382 675 322 835 382 775 b 206 511 382 574 310 511 m 815 993 l 907 993 l 203 0 l 111 0 m 801 -7 b 622 133 706 -7 622 40 b 710 254 622 194 657 236 b 640 353 667 272 640 306 b 803 481 640 433 718 481 b 964 354 889 481 964 433 b 893 256 964 306 936 274 b 982 136 949 235 982 194 b 801 -7 982 43 901 -7 m 803 63 b 889 143 851 63 889 90 b 803 222 889 193 851 222 b 717 142 756 222 717 193 b 803 63 717 90 756 63 m 803 282 b 875 349 846 282 875 307 b 803 414 875 389 843 414 b 729 347 761 414 729 389 b 803 282 729 306 764 282 "},"":{ha:1056,x_min:0,x_max:0,o:"m 15 533 l 193 722 b 268 857 239 769 268 813 b 199 926 268 900 243 926 b 115 835 153 926 124 900 l 31 835 b 201 999 36 939 100 999 b 360 858 301 999 360 943 b 268 689 360 796 324 743 l 167 589 l 364 589 l 364 518 l 15 518 m 838 993 l 929 993 l 225 0 l 133 0 m 829 -7 b 647 147 714 -7 650 54 l 732 147 b 826 63 738 99 764 63 b 914 138 886 63 914 92 b 831 213 914 188 886 213 l 794 213 l 794 278 l 829 278 b 907 346 882 278 907 303 b 835 411 907 383 883 411 b 749 335 786 411 754 382 l 664 335 b 836 481 669 419 733 481 b 996 353 938 481 996 425 b 917 250 996 300 964 267 b 1010 136 972 238 1010 199 b 829 -7 1010 47 940 -7 "},"":{ha:986,x_min:0,x_max:0,o:"m 246 917 l 28 917 l 28 993 l 363 993 l 363 982 l 190 518 l 96 518 m 750 993 l 842 993 l 138 0 l 46 0 m 763 -7 b 583 133 667 -7 583 40 b 671 254 583 194 618 236 b 601 353 628 272 601 306 b 764 481 601 433 679 481 b 925 354 850 481 925 433 b 854 256 925 306 897 274 b 943 136 910 235 943 194 b 763 -7 943 43 863 -7 m 764 63 b 850 143 813 63 850 90 b 764 222 850 193 813 222 b 678 142 717 222 678 193 b 764 63 678 90 717 63 m 764 282 b 836 349 807 282 836 307 b 764 414 836 389 804 414 b 690 347 722 414 690 389 b 764 282 690 306 725 282 "},"":{ha:833,x_min:0,x_max:0,o:"m 378 -11 b 44 303 142 4 61 143 l 161 303 b 378 82 175 193 210 96 l 378 469 b 85 738 196 504 85 571 b 378 1004 85 881 206 992 l 378 1129 l 460 1129 l 460 1003 b 749 732 629 988 731 889 l 640 732 b 460 908 619 838 564 894 l 460 561 b 769 279 664 526 769 458 b 460 -11 769 122 644 3 l 460 -187 l 378 -187 m 654 272 b 460 456 654 375 611 425 l 460 82 b 654 272 576 96 654 169 m 194 747 b 378 575 194 660 225 607 l 378 910 b 194 747 258 900 194 832 "},"":{ha:833,x_min:0,x_max:0,o:"m 396 -10 b 88 356 215 8 88 147 l 88 367 b 396 736 88 572 221 715 l 396 874 l 478 874 l 478 736 b 756 485 614 725 735 653 l 642 485 b 478 640 626 583 560 631 l 478 86 b 653 261 565 99 642 157 l 760 261 b 478 -10 746 115 633 4 l 478 -187 l 396 -187 m 207 356 b 396 86 207 197 281 106 l 396 639 b 207 367 285 618 207 518 l 207 356 "},"":{ha:833,x_min:0,x_max:0,o:"m 21 628 l 106 628 b 449 1006 119 860 242 1006 b 750 706 619 1006 728 897 l 636 706 b 449 911 617 839 558 911 b 226 628 307 911 236 813 l 532 628 l 517 547 l 225 547 l 225 439 l 496 439 l 481 358 l 226 358 b 451 86 236 175 307 86 b 654 308 568 86 632 158 l 767 308 b 451 -12 744 103 625 -12 b 107 358 251 -12 121 119 l 21 358 l 21 439 l 106 439 l 106 547 l 21 547 "},"":{ha:833,x_min:0,x_max:0,o:"m 422 88 b 640 410 578 88 640 178 l 640 590 b 419 908 640 803 568 908 b 194 581 269 908 194 806 l 194 407 b 422 88 194 175 276 88 m 422 -12 b 71 406 214 -12 71 128 l 71 579 b 419 1006 71 861 207 1006 b 763 589 635 1006 763 861 l 763 408 b 422 -12 763 131 636 -12 "},"":{ha:833,x_min:0,x_max:0,o:"m 436 871 l 151 643 l 151 756 l 431 993 l 557 993 l 557 0 l 436 0 "},"":{ha:833,x_min:0,x_max:0,o:"m 58 28 l 453 443 b 596 731 543 539 596 629 b 418 908 596 842 531 908 b 208 688 303 908 228 843 l 96 688 b 418 1006 111 882 229 1006 b 718 726 601 1006 718 897 b 518 365 718 604 640 485 l 244 99 l 724 99 l 724 0 l 58 0 "},"":{ha:833,x_min:0,x_max:0,o:"m 400 -12 b 61 293 193 -12 68 119 l 172 293 b 403 85 183 175 246 85 b 626 276 558 85 626 160 b 417 469 626 404 557 469 l 342 469 l 342 571 l 411 571 b 601 740 540 571 601 632 b 424 907 601 835 544 907 b 207 719 300 907 219 832 l 101 719 b 424 1006 108 876 235 1006 b 719 743 613 1006 719 881 b 558 526 719 631 651 564 b 750 276 675 496 750 414 b 400 -12 750 96 606 -12 "},"":{ha:833,x_min:0,x_max:0,o:"m 540 208 l 57 208 l 57 247 l 497 993 l 658 993 l 658 307 l 775 307 l 775 208 l 658 208 l 658 0 l 540 0 m 540 307 l 540 894 l 207 307 "},"":{ha:833,x_min:0,x_max:0,o:"m 400 -12 b 69 268 186 -12 83 106 l 185 268 b 399 85 204 160 247 85 b 617 325 533 85 617 175 b 408 557 617 465 535 557 b 174 461 293 557 226 521 l 129 461 l 129 993 l 688 993 l 688 889 l 229 889 l 229 586 b 432 654 269 624 338 654 b 740 325 610 654 740 528 b 400 -12 740 115 589 -12 "},"":{ha:833,x_min:0,x_max:0,o:"m 428 -12 b 71 439 157 -12 71 190 l 71 463 b 460 1006 71 819 232 1006 b 750 765 614 1006 724 925 l 635 765 b 451 907 613 857 563 907 b 190 510 301 907 196 772 b 446 644 238 590 331 644 b 771 319 643 644 771 501 b 428 -12 771 121 638 -12 m 428 82 b 647 314 558 82 647 174 b 426 550 647 457 561 550 b 199 331 293 550 199 460 b 428 82 199 168 294 82 "},"":{ha:833,x_min:0,x_max:0,o:"m 596 896 l 97 896 l 97 993 l 751 993 l 751 976 l 354 0 l 231 0 "},"":{ha:833,x_min:0,x_max:0,o:"m 418 -12 b 75 282 256 -12 75 85 b 263 539 75 415 157 501 b 113 747 168 575 113 650 b 418 1006 113 908 265 1006 b 722 750 572 1006 722 906 b 569 540 722 650 661 581 b 760 285 685 499 760 413 b 418 -12 760 86 586 -12 m 418 86 b 636 289 540 86 636 157 b 421 486 636 419 539 486 b 199 286 303 486 199 418 b 418 86 199 156 303 86 m 422 582 b 600 749 528 582 600 643 b 418 911 600 844 521 911 b 235 746 315 911 235 849 b 422 582 235 642 321 582 "},"":{ha:833,x_min:0,x_max:0,o:"m 389 -11 b 69 244 206 -11 96 85 l 186 244 b 392 88 208 147 264 88 b 646 482 550 88 643 218 b 389 350 599 401 503 350 b 63 675 196 350 63 488 b 406 1007 63 874 196 1007 b 763 563 640 1007 763 849 l 763 500 b 389 -11 763 171 626 -11 m 407 444 b 635 660 540 444 635 531 b 406 913 635 822 539 913 b 186 681 275 913 186 821 b 407 444 186 538 272 444 "},"":{ha:854,x_min:0,x_max:0,o:"m 383 -12 b 63 349 210 -12 63 122 l 63 360 b 394 739 63 582 211 739 b 622 613 507 739 581 683 l 622 726 l 738 726 l 738 0 l 622 0 l 622 122 b 383 -12 581 51 481 -12 m 396 83 b 626 358 519 83 626 172 l 626 369 b 406 643 626 556 536 643 b 182 365 272 643 182 542 l 182 354 b 396 83 182 171 282 83 "},"":{ha:469,x_min:0,x_max:0,o:"m 151 629 l 38 629 l 38 726 l 151 726 l 151 892 l 267 892 l 267 726 l 426 726 l 426 629 l 267 629 l 267 0 l 151 0 "},"":{ha:354,x_min:0,x_max:0,o:"m 13 -168 b 119 -56 94 -161 119 -119 l 119 726 l 235 726 l 235 -46 b 13 -265 235 -185 174 -260 "},"":{ha:153,x_min:0,x_max:0,o:""},"":{ha:294,x_min:0,x_max:0,o:"m 99 993 l 224 993 l 147 653 l 64 653 "},"":{ha:521,x_min:0,x_max:0,o:"m 99 993 l 224 993 l 147 653 l 64 653 m 325 993 l 450 993 l 374 653 l 290 653 "},"":{ha:1172,x_min:0,x_max:0,o:"m 422 774 l 600 774 b 804 604 725 774 804 719 l 804 600 b 604 432 804 483 722 432 l 528 432 l 528 225 l 422 225 m 600 508 b 703 600 667 508 703 540 l 703 604 b 600 692 703 667 665 692 l 528 692 l 528 508 m 585 46 b 1029 499 821 46 1029 231 b 588 947 1029 763 828 947 b 143 496 344 947 143 761 b 585 46 143 228 353 46 m 585 -12 b 76 496 303 -12 76 208 b 588 1006 76 779 301 1006 b 1096 499 876 1006 1096 781 b 585 -12 1096 210 871 -12 "}},familyName:"Graphik Regular",ascender:1136,descender:-253,underlinePosition:-75,underlineThickness:50,boundingBox:{yMin:-220,xMin:-230,yMax:1113,xMax:1092},resolution:1e3,original_font_information:{format:0,copyright:"2009 Commercial Type.",fontFamily:"Graphik Regular",fontSubfamily:"Regular",uniqueID:"1.000;COM ;Graphik-Regular",fullName:"Graphik Regular Regular",version:"Version 1.000;PS 001.000;hotconv 1.0.72;makeotf.lib2.5.5900",postScriptName:"Graphik-Regular",trademark:"Graphik is a trademark of Commercial Type/Schwartzco Inc.",manufacturer:"Commercial Type",designer:"Christian Schwartz",manufacturerURL:"http://commercialtype.com",designerURL:"http://christianschwartz.com",licence:`Commercial Type Font Software End User License Agreement\r\rPLEASE READ THIS DOCUMENT CAREFULLY and we recommend that you keep a copy for further reference. \r\rThis End User License Agreement (the "Agreement" "EULA," "License," "Agreement" or "License Agreement") is a legal agreement between you and Schwartzco, Inc., d/b/a Commercial Type, a/d/b/a St. Bride Type Foundry (collectively, "Commercial Type") and becomes a binding contract between you and Schwartzco. This Agreement governs the terms of use the Font Software and the design of the Fonts embodied therein (collectively, "Font Software"), together with any media, printed materials, electronic documentation, updates, add-ons, artwork, web services and any other material that may be associated with the product now or in the future. This Agreement becomes effective (a) when you "ACCEPT LICENSE AGREEMENT," or (b) if you are acquire and accept the Font Software on a Compact Disc or Digital Video Disk (CD, DVD), or (c) when you open the compressed electronic file in which the Font Software is contained. If you do not wish to enter into this Agreement, do not purchase, access, download and/or install or otherwise use the Font Software.\r\r1. Upon payment in full, Commercial Type will grant you a non-exclusive terminable License to the Font Software that accompanies this EULA. Use of the Font Software is limited to Personal or Internal Business Use only. For the purposes of this Agreement, "Font Software" shall be defined as the design of the Fonts together with the Font Software which, when used generates the typeface, typographic designs and, if applicable, ornaments or other designs. Personal or Internal Business Use shall mean Use of the Font Software for your customary personal or internal business purposes and, except as may otherwise permitted herein, shall not mean or include the commercial distribution or use of Font Software, the design of the fonts or artwork embodied therein or any component thereof for any commercial use or in any Commercial Product for sale whatsoever. For the purposes of this Agreement, prohibited commercial uses include, by way of example not limitation, T-shirts, third-party software, electronic devices, mugs, animation, etc. and as may be further noted below. If you are unsure whether your use is not permitted, contact Commercial Type. Your failure to contact to seek permission or the lack of a specific prohibition in this Agreement shall not be interpreted or deemed a waiver or permissible use of any kind. You hereby agree that the Font Software shall further comprise all bitmap representations of typeface and typographic designs and ornaments created by or derived from the Font Software. The Font Software shall be deemed to include any upgrades, updates, related files, permitted modifications, if any, permitted copies, and related documentation.\r\r2. If you are a design consultancy, advertising agency or purchasing this license for use by or on behalf of such an entity, the ultimate end user should also purchase a license appropriate for their intended use of the Font Software, if their use of the Font Software is likely to involve uses not permitted under this Agreement. The license granted herein for personal use does not extend to uses by temporary employees or independent contractors using the Font Software as their use may relate to providing professional services or for other professional uses. Under such circumstances an employer and/or the ultimate end user are also required to purchase a license appropriate for their usage.\r\r3. For the purposes of this Agreement, "Commercial Product" shall also mean, among other things, a user editable electronic document created by Use of the Font Software which is offered for distribution to the general public (or to some subset of the general public), in Flash type software distributed or exhibited, in gaming products or software where the extraction of the Font Software or the designs embodied therein may be extracted; or use on goods for sale as a commercial product in exchange for a separate fee or other consideration. However, a document distributed in connection with a commercial transaction in which the consideration is unrelated to such a document (for example, printed advertising, a business letter or a receipt for purchase of tangible goods such as clothing), or as other design materials distributed incidental to the purchase of goods or services, shall not be considered a Commercial Product.\r\r4. a) Except as may be prohibited herein, you are permitted to electronically distribute a Personal or Internal Business Use document (that is, a document other than a Commercial Product as defined above) (i) that is in a static graphic image (for example, a gif) or in an embedded electronic document, and (ii) which is distributed in a format that permits only the viewing and printing (and not the editing, altering, enhancing, or modifying) of such static graphic image or embedded document. Personal or Internal Business Use shall not include any Use of the Font Software by persons that are not members of your immediate household, your authorized employees, or your authorized agents. All such household members, employees and agents shall be notified by you as to the terms and conditions of the Agreement and shall agree to be bound by it prior to use of the Font Software.\rb) Use of the Font Software in sIFR (Scalable Inman Font Replacement) is permitted. However, the use of Cufn or @font-face or other forms of web embedding or web font replacement technologies, (Font Replacement Technologies) other than pdf as otherwise expressly permitted herein, each require the purchase of a license upgrade.\r\r5. Commercial Type, its successors and assigns, expressly retain all right and title in and to the Font Software together with the design of the Font embodied therein together with any trademarks used in connection therewith. Except as may be otherwise expressly permitted herein, you agree not to copy the Font Software or create derivative works based upon the design of the Font or the Font Software. You hereby agree that the design of the Font and the Font Software are the exclusive property of Commercial Type and that the unauthorized use of the design of the Font or the Font Software is an infringement of Commercial Type's exclusive rights and causing significant monetary harm. All rights not expressly granted herein are reserved to Commercial Type. Commercial Type's rights and remedies in the event of an infringement shall be cumulative in nature. \r\r6. Except as is prohibited herein, you may install and Use the Font Software on a single file server for Use on a single local area network ("LAN") only when the Use of such Font Software is expressly for and limited to the number of total users disclosed and licensed under this Agreement, i.e., the total number of users who could use the Font Software, not the total number of users who might have access to the Font Software at any one time.\r\r7. Except as may be otherwise expressly permitted herein, you may not alter or copy the Font Software or the designs embodied therein in any manner whatsoever. Reformatting the Font Software into other formats for use in other operating systems is expressly prohibited. Upon payment of an additional fee and a separate written agreement Commercial Type may, if so agreed, provide the Font Software in alternate and/or additional font formats, contact Commercial Type for a quotation. Altering or amending the embedding bits characteristics of the Font Software is expressly prohibited. The Font Software may not be used to create or distribute any electronic document in which the Font Software or any part thereof, is embedded in a manner or format that permits editing, alterations, enhancements, or modifications by the recipient of such document. You may not knowingly transmit any electronic document or the Font Software to any party that intends or is likely to "hack," edit, alter, enhance, or otherwise modify the Font Software or remove the Font Software from any document.\r\r8. You may make one (1) back-up copy of Font Software for archival purposes only, and you agree to retain exclusive custody and control over any such copy. Upon termination of the Agreement, you must destroy the original and any and all copies of the Font Software. The unauthorized sharing, lending, renting, sale, or other unauthorized use or misuse of the back-up copy is a material breach of this Agreement and will result in the immediate termination of this License.\r\r9. If no other option exists, you may take a digitized copy of the Font Software used for a particular document, or Font Software embedded in an electronic document that is sent to a commercial printer or service bureau for use by the printer or service bureau for preparing the document provided that the printer or service bureau represents that it shall destroy any and all copies of the Font Software upon completion of its work. Notwithstanding, you agree that the transmission of a "print/preview" PDF document is the first and preferred method of transmitting such documents to a service bureau or printer.\r\r10. The designs embodied and the Font Software and the Font Software and any trademarks associated therewith are the exclusive property of Commercial Type and their designers, where applicable and are protected by the copyright and other intellectual property laws of the United States, by the copyright and design laws of other nations, and by other international treaties. Any copies that you are expressly permitted to make pursuant to the Agreement must contain the same copyright, trademark, and other proprietary notices that appear on or in the Font Software.\r\r11. You agree not to create, assist in and/or cause the creation of modifications or additions to the Fonts or Font Software, including, but not limited to, creating additional weights; creating additional or deleting existing characters; modifying existing characters; modifying font spacing and kerning; or converting fonts to an alternate digital format, modify, adapt, translate, reverse engineer, decompile, disassemble, alter, or otherwise attempt to discover the source code of the Font Software without first obtaining written permission from Commercial Type. In the event that permission is given to you, any and all modifications and additions shall become and shall remain the sole and exclusive property of Commercial Type and you may not sell, lend or otherwise transmit any modifications or additions to the Font Software to any third party. Other jurisdictions may provide for additional rights, and if applicable, you may reverse engineer or decompile the Font Software only to the extent that sufficient information is not available for the purpose of creating an interoperable software program (but only for such purpose and only to the extent that sufficient information is not provided by Commercial Type upon written request). All trademarks shall be used in accordance with accepted trademark practice, including identification of the trademark owner's name. Use of the trademarks associated with the Font Software inures solely to the benefit of Commercial Type. \r\r12. Use of Commercial Type Font Software in the following circumstances and/or applications is NOT permitted without first obtaining the appropriate licensing upgrade. \r\ra) 	ALPHABET OR LETTERFORM-RELATED PRODUCTS\r		FOR RESALE OR LETTERFORM CREATION PRODUCTS OR DEVICES;\rb) 	EMBEDDING IN ELECTRONIC DEVICES; ALL GAMING USES AND/OR DEVICES;\rc) 	EMBEDDING IN SOFTWARE;\rd) 	STORING AND/OR SERVING THE FONT SOFTWARE FOR THE PURPOSES OF MAKING THE FONT SOFTWARE\r		AVAILABLE VIA THE INTERNET USING FONT REPLACEMENT TECHNOLOGIES.\r\r\ri) Letterform or Alphabet Products include, but are not limited to, signage and/or scrapbooking uses involving reproductions of individual letterforms, use in the creation of signage or numbering products, rubber stamps, die-cut products, stencil products, tattoo, flash, or adhesive sticker alphabet products or any other product containing any image of or derived from the design of the Font embodied in the Font Software of which any likeness of the alphabet can be reproduced.\r\rii) Embedding of the Fonts in a print/preview format is permitted. Notwithstanding, embedding or other use of the Fonts or the outlines thereof in any method which permits the extraction of the Font Software of the designs embodied therein is expressly prohibited. Any such use requires the express written permission of Commercial Type and may or may not require the purchase of a license upgrade at the sole discretion of Commercial Type.\r\riii) In the event any dingbats or other art forms are part of the Font Software, use of the artwork is further restricted. You may use the artwork, drawings and/or dingbats on goods for sale, in logo design, retail packaging or in point of sale uses only after the purchase of a license upgrade.\r\rIn order to obtain a license upgrade, you must contact Commercial Type at info@commercialtype.com for more information. If you are unsure whether your use of the Font Software is specifically permitted under this Agreement, contact Commercial Type.\r\r13. Embedded Electronic Devices includes the use of the Font Software for any on-screen display or on an electronic device outside a single location. For example, and not by way of limitation, such electronic devices include a kiosk, gaming devices, embroidery or sewing machines game playing or gambling devices, irrespective of whether the showing or creation of copies of the design embodied in the Font Software is created by use of the software or as an image of the design in tiff, gif or other format. \r\r14. Commercial Type Font Software is licensed for use by a specified number of users. Use of the Font Software in more than one geographic location or by means of server or central CPU outside of the terms of your license is permitted provided the each user or potential user is licensed. License upgrades may be purchased from Commercial Type at info@commercialtype.com.\r\r15. Except as may be otherwise expressly provided for herein, you expressly agree not to rent, lease, sublicense, give, lend, or further distribute the Font Software. You may transfer all your rights under this Agreement another person or entity provided that (i) the transferee accepts and agrees to be bound by all the terms and conditions of this Agreement, and (ii) you destroy all copies of the Font Software, including all copies stored in the memory of a hardware device.\r\r16. Commercial Type warrants that the Font Software will perform substantially in accordance with its documentation for ninety (90) days following delivery of the Font Software. To make a warranty claim, you must either return the Font Software to the location from which you obtained it together with a copy of your sales receipt or, if acquired on-line, contact the on-line provider with sufficient information regarding your acquisition of the Font Software to permit the confirmation of the effective date of this License. Schwartzco, Inc. and Commercial Type hereby EXPRESSLY DISCLAIMS ALL WARRANTIES, EXPRESS AND IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE. COMMERCIAL TYPE DOES NOT WARRANT THAT THE OPERATION OF THE FONT SOFTWARE WILL BE UNINTERRUPTED OR ERROR-FREE, OR THAT THE FONT SOFTWARE IS WITHOUT DEFECTS. UNDER NO CIRCUMSTANCES SHALL COMMERCIAL TYPE BE LIABLE TO YOU OR ANY OTHER PARTY, WHETHER IN CONTRACT OR TORT (INCLUDING NEGLIGENCE) OR OTHERWISE, FOR ANY SPECIAL, CONSEQUENTIAL, OR INCIDENTAL DAMAGES, INCLUDING LOST PROFITS, SAVINGS OR BUSINESS INTERRUPTION AS A RESULT OF THE USE OF THE FONT SOFTWARE EVEN IF NOTIFIED IN ADVANCE OF SUCH POSSIBILITY. You hereby agree that your entire, exclusive, and cumulative liability and remedy shall be limited to the purchase price of this Font Software License. Under no circumstances shall Schwartzco, Inc.'s or Commercial Type's liability to you exceed either the refunding of the cost of the Font Software License or replacement of the Font Software either of which shall be at Commercial Type's sole discretion.\r\r17. OTHER LAW - CONSUMERS ONLY. Some jurisdictions do not allow the exclusion or limitation of incidental, consequential or special damages, implied warranties or implied warranties as they relate to sales to consumers. ANY IMPLIED WARRANTY OR OTHER RIGHT CREATED BY LAW IS ONLY EFFECTIVE FOR THE NINETY (90) DAY WARRANTY PERIOD. THERE ARE NO WARRANTIES OR CONDITIONS OF ANY KIND AFTER THE NINETY (90) DAY WARRANTY PERIOD. To the extent permissible by law, you agree that all implied warranties are not to be effective for more than thirty (30) days. \r\r18. You expressly agree that this Agreement shall be governed by the laws of the State of New York, U.S.A., as they apply to contracts entered into and wholly performed therein and without respect to its conflict of laws provisions or the conflict of laws provisions of any other jurisdiction. You expressly submit to the personal jurisdiction of the state and federal courts in the State of New York, USA, agree to waive any defenses arising out of the selection of jurisdiction or venue and further agree to service of process by mail. You hereby expressly agree that the application of the United Nations Convention of Contracts for the International Sale of Goods is expressly excluded.\r\r19. You acknowledge that you have read and understand this Agreement and that by using the software you agree to be bound by its terms and conditions. You further agree that it is the complete and exclusive statement of the agreement between Commercial Type and you which supersedes any proposal or prior agreement, oral or written, and any other communications relating to the subject matter of this Agreement. No variation of the terms of this Agreement or any different terms will be enforceable in the absence of an express written amendment, or consent, including a written express waiver of the affected terms of this Agreement. If any provision of this Agreement is declared by a court of competent jurisdiction to be invalid, void or unenforceable, the remaining provisions of this Agreement shall continue in full force and effect, and the invalid provision shall be replaced by Commercial Type with a provision that effects the intent of the invalid provision.\r\r20. Commercial Type expressly reserves the right to amend or modify its License Agreements at any time and without prior notification.\r\r21. The Agreement shall automatically terminate in the event you or any authorized user breaches any term or condition set forth herein. Notwithstanding any termination of this License, Commercial Type expressly reserves any and all other rights and remedies under equity or law. The Agreement may only be modified in a writing signed by an authorized officer of Commercial Type.\r\r22. You agree to be responsible for compliance with all laws, foreign and domestic relating to the control of exports or the transfer of technology. If you are purchasing this License for government use, or under a government contract, you agree to familiarize yourself with and follow any applicable rules and regulations relating to the purchase of a license to use software and the actual use thereof.\r\rAll inquiries and arrangements for returns, if any, may be sent via e-mail to info@commercialtype.com. The Commercial Type website is located at www.commercialtype.com\r\rv090815`,licenceURL:"http://commercialtype.com/license",preferredFamily:"Graphik"},cssFontWeight:"normal",cssFontStyle:"normal"};var gK={},az={},vgt=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})},sG=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},_gt=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},xy;Object.defineProperty(az,"__esModule",{value:!0});az.Tag3dEngine=void 0;const ygt=Gi,bgt=dr,oG=Mn;class Agt{constructor(){this._stateEngine=oG.StateEngine.instance,xy.set(this,void 0)}static get instance(){return this._instance||(this._instance=new this)}get geometryCreator(){return sG(this,xy,"f")}set geometryCreator(e){_gt(this,xy,e,"f")}loadContent(e){return vgt(this,void 0,void 0,function*(){const n=new bgt.TreeNode("tag3d");if(this._stateEngine.fontLoaded.resolved===!1&&(yield this._stateEngine.fontLoaded),!e)throw new oG.ShapeDiverViewerDataProcessingError("Tag3dEngine.loadContent: Invalid content was provided to tag3d engine.");if(e.data&&Array.isArray(e.data))if(sG(this,xy,"f"))for(let i=0;i<e.data.length;i++){const o=e.data[i],l=sG(this,xy,"f").call(this,o);l&&n.addChild(l)}else{const i=new ygt.CustomData({});for(let o=0;o<e.data.length;o++){const l=e.data[o];i.data["tag3d_"+l.version]=l}n.addData(i)}else throw new oG.ShapeDiverViewerDataProcessingError("Tag3dEngine.loadContent: No tag3d data was provided to tag3d engine.");return n})}}az.Tag3dEngine=Agt;xy=new WeakMap;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Tag3dEngine=void 0;const e=az;Object.defineProperty(t,"Tag3dEngine",{enumerable:!0,get:function(){return e.Tag3dEngine}})})(gK);var lz={};Object.defineProperty(lz,"__esModule",{value:!0});lz.TextGeometry=void 0;const wgt=se;class Egt extends wgt.ExtrudeGeometry{constructor(e,n={}){const i=n.font;if(i===void 0)super();else{const o=i.generateShapes(e,n.size);n.depth=n.height!==void 0?n.height:50,n.bevelThickness===void 0&&(n.bevelThickness=10),n.bevelSize===void 0&&(n.bevelSize=8),n.bevelEnabled===void 0&&(n.bevelEnabled=!1),super(o,n)}this.type="TextGeometry"}}lz.TextGeometry=Egt;var Sgt=X&&X.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,o)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),Tgt=X&&X.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),xgt=X&&X.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Sgt(e,t,n);return Tgt(e,t),e},Mgt=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},pW;Object.defineProperty(sz,"__esModule",{value:!0});sz.Tag3dGeometryCreationInjector=void 0;const U1=xgt(se),J3=Gi,kgt=M4,Cgt=oz,Zle=dr,Pgt=Mn,Qle=gK,Rgt=lz;class Dgt{constructor(){pW.set(this,Pgt.StateEngine.instance)}close(){Qle.Tag3dEngine.instance.geometryCreator=void 0}init(){this._font||(this._font=new kgt.Font(Cgt.font),Mgt(this,pW,"f").fontLoaded.resolve(!0)),Qle.Tag3dEngine.instance.geometryCreator=this.convertTag3dToGeometry.bind(this)}convertTag3dToGeometry(e){const n=new Zle.TreeNode("tag3d_"+e.version);if(e.size=e.size?+e.size:1,e.text===void 0||e.text===""||/^[ \t\n\r]*$/.test(e.text))return;const i=e.text.split(/\r\n|\r|\n/g),o=[];for(let w=0;w<i.length;++w){if(i[w]==="")continue;const E=new Rgt.TextGeometry(i[w],{size:e.size,height:e.size/10,font:this._font});o.push(E)}const l=new U1.Object3D;for(const w of o)l.add(new U1.Mesh(w,new U1.MeshPhongMaterial));let d,p,g=0;{g=0;for(const w of l.children)d=new U1.Box3().setFromObject(w),p=d.max.y-d.min.y,g=Math.max(g,p)}g*=1.15,o.forEach((w,E)=>{w.translate(0,(-E-1)*g,0)}),d=new U1.Box3().setFromObject(l);const v=d.max.x-d.min.x,_=d.max.y-d.min.y,b=new U1.Vector3(0,0,0);switch(e.justification){case"TL":break;case"TC":b.x=-v*.5;break;case"TR":b.x=-v;break;case"ML":b.y=_*.5;break;case"MC":b.x=-v*.5,b.y=_*.5;break;case"MR":b.x=-v,b.y=_*.5;break;case"BL":b.y=_;break;case"BC":b.x=-v*.5,b.y=_;break;case"BR":b.x=-v,b.y=_;break}for(const w of o)w.translate(b.x,b.y,b.z);if(e.location.xAxis!==void 0){const w=new U1.Matrix4;w.set(e.location.xAxis.X,e.location.yAxis.X,e.location.normal.X,0,e.location.xAxis.Y,e.location.yAxis.Y,e.location.normal.Y,0,e.location.xAxis.Z,e.location.yAxis.Z,e.location.normal.Z,0,0,0,0,1);for(const E of o)E.applyMatrix4(w),E.translate(e.location.origin.X,e.location.origin.Y,e.location.origin.Z)}for(const w of o){const E={};for(const M in w.attributes){let k=M.toUpperCase();if(/\d/.test(k)&&!k.includes("_")){const x=k.search(/\d/);k=k.substring(0,x)+"_"+k.substring(x,k.length)}else k==="TEXCOORD"||k==="COLOR"||k==="JOINTS"||k==="WEIGHTS"?k+="_0":k==="UV"&&(k="TEXCOORD_0");E[k]=new J3.AttributeData(w.attributes[M].array,w.attributes[M].itemSize,0,0,0,!1,w.attributes[M].array.length/w.attributes[M].itemSize)}const S=new Zle.TreeNode("tag3d_"+w);S.data.push(new J3.GeometryData(new J3.PrimitiveData(E,null),J3.PRIMITIVE_MODE.TRIANGLES,new J3.MaterialStandardData({color:e.color,metalness:0,roughness:1}))),n.children.push(S)}return n}}sz.Tag3dGeometryCreationInjector=Dgt;pW=new WeakMap;var cz={};Object.defineProperty(cz,"__esModule",{value:!0});cz.css=void 0;cz.css=`
.sdv-error-message-container {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
}

.sdv-error-message {
    font-family: "CircularXXWeb-Book", sans-serif;
    font-size: x-large;
    filter: invert(100);
}

.sdv-anchor-container {
    user-select: none;
    cursor: default;
    pointer-events: none;
    overflow: hidden;
    position: absolute;
    width: 100%;
    height: 100%;
    left: 0%;
    top: 0%;
}

.sdv-anchor-inner-container {
    position: absolute;
    white-space: nowrap;
    text-overflow: clip;
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
}

.sdv-anchor-text {
    user-select: none;
    cursor: default;
    pointer-events: none;
    display: block;
    text-overflow: clip;
    overflow: hidden;
}

.sdv-anchor-image {
    user-select: none;
    cursor: default;
    pointer-events: none;
}

.sdv-logo-container {
    position: relative;
    height: 100%;
    width: 100%;
}

.sdv-logo {
    position: absolute;
    top: 50%;
    left: 50%;
    max-width: calc(100% - 0.5);
    max-height: calc(100% - 0.5);
    transform: translate(-50%, -50%);
}

.sdv-spinner-container {
    position: absolute;
    height: 100%;
    width: 100%;
    top: 0;
    left: 0;
    user-select: none;
    cursor: default;
    pointer-events: none;
}

.sdv-spinner {
    position: absolute;
    max-width: calc(100% * 0.15);
    max-height: calc(100% * 0.15);
    mix-blend-mode: difference;
    filter: invert(1) grayscale(100%);
}

.sdv-spinner-top-left {
    left: calc(100% * 0.01);
    top: calc(100% * 0.01);
    float: left;
}

.sdv-spinner-top-right {
    right: calc(100% * 0.01);
    top: calc(100% * 0.01);
    float: right;
}

.sdv-spinner-bottom-left {
    left: calc(100% * 0.01);
    bottom: calc(100% * 0.01);
    float: left;
}

.sdv-spinner-bottom-right {
    right: calc(100% * 0.01);
    bottom: calc(100% * 0.01);
    float: right;
}

.sdv-spinner-center {
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}
    `;var Ogt=X&&X.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,o)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),Igt=X&&X.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Ngt=X&&X.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Ogt(e,t,n);return Igt(e,t),e},aG=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})},rd=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},mW,gW,vW,IAe,Mh;Object.defineProperty(ZN,"__esModule",{value:!0});ZN.RenderingEngine=void 0;const eo=Ngt(se),Kle=$4e,Lgt=Px,zgt=PL,Bgt=W4e,Ugt=DL,Fgt=xL,Vgt=IL,Ggt=NL,jgt=q4e,Hgt=dr,$gt=Pm,Wgt=zL,Ygt=Dx,aC=Cr,qgt=ez,Xgt=nz,Zgt=rz,Qgt=Cx,Kgt=sz,Jgt=F0,Ii=Bf,ra=Mn,K_=Gi,evt=cz;class tvt{constructor(e){mW.set(this,"https://viewer.shapediver.com/v3/graphics/logo_animated_breath.svg"),gW.set(this,"https://viewer.shapediver.com/v3/graphics/logo.png"),vW.set(this,"https://viewer.shapediver.com/v3/graphics/spinner_ripple.svg"),this._animationEngine=Lgt.AnimationEngine.instance,this._canvasEngine=Bgt.CanvasEngine.instance,this._colorCache=[],this._converter=ra.Converter.instance,this._eventEngine=ra.EventEngine.instance,this._intersectionManager=jgt.IntersectionEngine.instance,this._logger=ra.Logger.instance,this._stateEngine=ra.StateEngine.instance,this._systemInfo=ra.SystemInfo.instance,this._tree=Hgt.Tree.instance,this._uuidGenerator=ra.UuidGenerator.instance,IAe.set(this,{}),Mh.set(this,{[Ii.FLAG_TYPE.CAMERA_FREEZE]:[],[Ii.FLAG_TYPE.CONTINUOUS_RENDERING]:[],[Ii.FLAG_TYPE.CONTINUOUS_SHADOW_MAP_UPDATE]:[]}),this._arRotation=aC.vec3.create(),this._arScale=aC.vec3.fromValues(1,1,1),this._arTranslation=aC.vec3.create(),this._automaticColorAdjustment=!0,this._automaticResizing=!0,this._beautyRenderBlendingDuration=1500,this._beautyRenderDelay=50,this._busy=!1,this._busyModeDisplay=Ii.BUSY_MODE_DISPLAY.SPINNER,this._clearAlpha=1,this._clearColor="#ffffff",this._closed=!1,this._enableAR=!0,this._environmentMap="null",this._environmentMapAsBackground=!1,this._environmentMapBlurriness=0,this._environmentMapForUnlitMaterials=!1,this._environmentMapIntensity=1,this._environmentMapResolution="1024",this._environmentMapRotation=aC.quat.create(),this._gridVisibility=!0,this._groundPlaneShadowVisibility=!1,this._groundPlaneVisibility=!0,this._lights=!0,this._maximumRenderingSize=this._systemInfo.isMobile?{width:1280,height:720}:{width:1920,height:1080},this._pause=!1,this._shadows=!0,this._show=!1,this._showStatistics=!1,this._softShadows=!0,this._type=Ii.RENDERER_TYPE.STANDARD,eo.Object3D.DEFAULT_UP=new eo.Vector3(0,0,1),eo.ColorManagement.enabled=!1,(0,Kle.adaptShaders)();const n=document.createElement("style");n.innerHTML=evt.css,document.head.appendChild(n);const i=Object.assign({},e),o=Object.assign({},i.branding);this._id=i.id||ra.UuidGenerator.instance.create(),this._visibility=i.visibility||Ii.VISIBILITY_MODE.SESSION,this._sessionSettingsMode=i.sessionSettingsMode||ra.SESSION_SETTINGS_MODE.FIRST,this._sessionSettingsId=i.sessionSettingsId,this._branding={logo:o.logo===void 0?rd(this,mW,"f"):o.logo,backgroundColor:o.backgroundColor||"#393a45FF",busyModeSpinner:o.busyModeSpinner===void 0?rd(this,vW,"f"):o.busyModeSpinner,busyModeDisplay:o.busyModeDisplay||Ii.BUSY_MODE_DISPLAY.SPINNER,spinnerPositioning:o.spinnerPositioning||Ii.SPINNER_POSITIONING.BOTTOM_RIGHT},this._canvas=this._canvasEngine.getCanvas(this._canvasEngine.createCanvasObject(i.canvas)),this._domEventEngine=new ra.DomEventEngine(this._canvas.canvasElement),this._cameraEngine=new Jgt.CameraEngine(this),this._lightEngine=new $gt.LightEngine(this),this._cameraManager=new zgt.CameraManager(this),this._environmentGeometryManager=new Ugt.EnvironmentGeometryManager(this),this._sceneTracingManager=new Xgt.SceneTracingManager(this),this._sceneTreeManager=new Zgt.SceneTreeManager(this),this._renderingManager=new qgt.RenderingManager(this),this._postProcessingManager=new Ygt.PostProcessingManager(this),this._environmentMapLoader=new Fgt.EnvironmentMapLoader(this),this._materialLoader=new Kle.MaterialLoader(this),this._geometryLoader=new Vgt.GeometryLoader(this),this._htmlElementAnchorLoader=new Ggt.HTMLElementAnchorLoader(this),this._lightLoader=new Wgt.LightLoader(this),this._tag3dGeometryCreationInjector=new Kgt.Tag3dGeometryCreationInjector,this._renderer=this.renderingManager.createRenderer(this._canvas.canvasElement),this._spinnerDivElement=this.renderingManager.addSpinner(this._canvas.canvasElement,this._branding),this._logoDivElement=this.renderingManager.addLogo(this._canvas.canvasElement,this._branding),this._cameraManager.init(),this._environmentGeometryManager.init(),this._sceneTracingManager.init(),this._sceneTreeManager.init(),this._renderingManager.init(),this._postProcessingManager.init(),this._environmentMapLoader.init(),this._materialLoader.init(),this._geometryLoader.init(),this._htmlElementAnchorLoader.init(),this._lightLoader.init(),this._tag3dGeometryCreationInjector.init()}get arRotation(){return this._arRotation}set arRotation(e){this._arRotation=e}get arScale(){return this._arScale}set arScale(e){this._arScale=e}get arTranslation(){return this._arTranslation}set arTranslation(e){this._arTranslation=e}get automaticColorAdjustment(){return this._automaticColorAdjustment}set automaticColorAdjustment(e){this._automaticColorAdjustment!==e&&(this._automaticColorAdjustment=e,this._colorCache.forEach(n=>n.colorCorrection(e)),this._materialLoader.assignColorCorrection(e))}get automaticResizing(){return this._automaticResizing}set automaticResizing(e){this._automaticResizing=e}get beautyRenderBlendingDuration(){return this._beautyRenderBlendingDuration}set beautyRenderBlendingDuration(e){this._beautyRenderBlendingDuration=e}get beautyRenderDelay(){return this._beautyRenderDelay}set beautyRenderDelay(e){this._beautyRenderDelay=e}get branding(){return this._branding}get busy(){return this._busy}set busy(e){this._busy=e}get busyModeDisplay(){return this._busyModeDisplay}set busyModeDisplay(e){this._busyModeDisplay=e}get camera(){return this._cameraManager.camera}get cameraEngine(){return this._cameraEngine}get cameraManager(){return this._cameraManager}get canvas(){return this._canvas.canvasElement}get canvasEngine(){return this._canvasEngine}get clearAlpha(){return this._clearAlpha}set clearAlpha(e){this._clearAlpha=e}get clearColor(){return this._clearColor}set clearColor(e){this._clearColor=e}get closed(){return this._closed}get colorCache(){return this._colorCache}get continuousRendering(){return this._renderingManager.continuousRendering}set continuousRendering(e){this._renderingManager.continuousRendering=e}get continuousShadowMapUpdate(){return this._renderingManager.continuousShadowMapUpdate}set continuousShadowMapUpdate(e){this._renderingManager.continuousShadowMapUpdate=e}get defaultLineMaterial(){return this.materialLoader.defaultLineMaterialData}set defaultLineMaterial(e){this.materialLoader.defaultLineMaterialData=e}get defaultMaterial(){return this.materialLoader.defaultMaterialData}set defaultMaterial(e){this.materialLoader.defaultMaterialData=e}get defaultMaterialColor(){return this.materialLoader.defaultMaterialData.color}set defaultMaterialColor(e){this.materialLoader.defaultMaterialData.color=e,this.materialLoader.assignDefaultMaterial()}get defaultPointMaterial(){return this.materialLoader.defaultPointMaterialData}set defaultPointMaterial(e){this.materialLoader.defaultPointMaterialData=e}get domEventEngine(){return this._domEventEngine}get enableAR(){return this._enableAR}set enableAR(e){this._enableAR=e}get environmentMap(){return this._environmentMap}set environmentMap(e){this._environmentMap=e,this._environmentMapLoader.load(this.environmentMap)}get environmentMapAsBackground(){return this._environmentMapAsBackground}set environmentMapAsBackground(e){this._environmentMapAsBackground=e}get environmentMapBlurriness(){return this._environmentMapBlurriness}set environmentMapBlurriness(e){this._environmentMapBlurriness=e,this._sceneTreeManager.scene.backgroundBlurriness=this._environmentMapBlurriness}get environmentMapForUnlitMaterials(){return this._environmentMapForUnlitMaterials}set environmentMapForUnlitMaterials(e){this._environmentMapForUnlitMaterials=e,this._materialLoader.assignEnvironmentMapForUnlitMaterials(e)}get environmentMapIntensity(){return this._environmentMapIntensity}set environmentMapIntensity(e){this._environmentMapIntensity=e,this._sceneTreeManager.scene.backgroundIntensity=e,this._materialLoader.assignEnvironmentMapIntensity(e)}get environmentMapLoader(){return this._environmentMapLoader}get environmentMapResolution(){return this._environmentMapResolution}set environmentMapResolution(e){this._environmentMapResolution=e,this._environmentMapLoader.load(this.environmentMap)}get environmentMapRotation(){return this._environmentMapRotation}set environmentMapRotation(e){this._environmentMapRotation=e,this._materialLoader.assignEnvironmentMapRotation(e)}get eventEngine(){return this._eventEngine}get geometryLoader(){return this._geometryLoader}get gridColor(){return this._environmentGeometryManager.gridColor}set gridColor(e){this._environmentGeometryManager.gridColor=e}get gridVisibility(){return this._gridVisibility}set gridVisibility(e){this._environmentGeometryManager.grid&&(this._environmentGeometryManager.grid.visible=e),this._gridVisibility=e}get groundPlaneColor(){return this._environmentGeometryManager.groundPlaneColor}set groundPlaneColor(e){this._environmentGeometryManager.groundPlaneColor=e}get groundPlaneShadowColor(){return this._environmentGeometryManager.groundPlaneShadowColor}set groundPlaneShadowColor(e){this._environmentGeometryManager.groundPlaneShadowColor=e}get groundPlaneShadowVisibility(){return this._groundPlaneShadowVisibility}set groundPlaneShadowVisibility(e){this._environmentGeometryManager.groundPlaneShadow&&(this._environmentGeometryManager.groundPlaneShadow.visible=e),this._groundPlaneShadowVisibility=e}get groundPlaneVisibility(){return this._groundPlaneVisibility}set groundPlaneVisibility(e){this._environmentGeometryManager.groundPlane&&(this._environmentGeometryManager.groundPlane.visible=e),this._groundPlaneVisibility=e}get htmlElementAnchorLoader(){return this._htmlElementAnchorLoader}get id(){return this._id}get lightEngine(){return this._lightEngine}get lightLoader(){return this._lightLoader}get lightScene(){return this.lightEngine.lightScene?this.lightEngine.lightScene.id:""}get lightSceneId(){return this.lightEngine.lightScene?this.lightEngine.lightScene.id:""}get lights(){return this._lights}set lights(e){this._lights=e}get logoDivElement(){return this._logoDivElement}get materialLoader(){return this._materialLoader}get maximumRenderingSize(){return this._maximumRenderingSize}set maximumRenderingSize(e){this._maximumRenderingSize=e}get minimalRendering(){return this.renderingManager.minimalRendering}get outputEncoding(){switch(this._renderer.outputColorSpace){case eo.SRGBColorSpace:return Ii.TEXTURE_ENCODING.SRGB;case eo.LinearSRGBColorSpace:default:return Ii.TEXTURE_ENCODING.LINEAR}}set outputEncoding(e){switch(e){case Ii.TEXTURE_ENCODING.SRGB:this._renderer.outputColorSpace=eo.SRGBColorSpace;break;case Ii.TEXTURE_ENCODING.LINEAR:default:this._renderer.outputColorSpace=eo.LinearSRGBColorSpace;break}}get pause(){return this._pause}set pause(e){this._pause=e}get physicallyCorrectLights(){return!this._renderer.useLegacyLights}set physicallyCorrectLights(e){this._renderer.useLegacyLights=!e}get pointSize(){return this.materialLoader.defaultPointMaterialData.size||1}set pointSize(e){this.materialLoader.defaultPointMaterialData.size=e,this.materialLoader.assignDefaultPointMaterial()}get postProcessingManager(){return this._postProcessingManager}get postRenderingCallback(){return this._postRenderingCallback}set postRenderingCallback(e){this._postRenderingCallback=e}get preRenderingCallback(){return this._preRenderingCallback}set preRenderingCallback(e){this._preRenderingCallback=e}get renderer(){return this._renderer}get renderingManager(){return this._renderingManager}get scene(){return this._sceneTreeManager.scene}get sceneTracingManager(){return this._sceneTracingManager}get sceneTreeManager(){return this._sceneTreeManager}get sessionSettingsId(){return this._sessionSettingsId}set sessionSettingsId(e){this._sessionSettingsId=e}get sessionSettingsMode(){return this._sessionSettingsMode}set sessionSettingsMode(e){this._sessionSettingsMode=e}get settingsEngine(){return this._settingsEngine}set settingsEngine(e){this._settingsEngine=e}get shadows(){return this._shadows}set shadows(e){this._shadows=e}get show(){return this._show}set show(e){this._show=e}get showStatistics(){return this._showStatistics}set showStatistics(e){this._showStatistics=e}get softShadows(){return this._softShadows}set softShadows(e){this._softShadows=e}get spinnerDivElement(){return this._spinnerDivElement}get stateEngine(){return this._stateEngine}get textureEncoding(){switch(this.materialLoader.textureEncoding){case eo.SRGBColorSpace:return Ii.TEXTURE_ENCODING.SRGB;case eo.LinearSRGBColorSpace:default:return Ii.TEXTURE_ENCODING.LINEAR}}set textureEncoding(e){switch(e){case Ii.TEXTURE_ENCODING.SRGB:this.environmentMapLoader.textureEncoding=eo.SRGBColorSpace,this.materialLoader.textureEncoding=eo.SRGBColorSpace;break;case Ii.TEXTURE_ENCODING.LINEAR:default:this.environmentMapLoader.textureEncoding=eo.LinearSRGBColorSpace,this.materialLoader.textureEncoding=eo.LinearSRGBColorSpace}}get toneMapping(){switch(this._renderer.toneMapping){case eo.LinearToneMapping:return Ii.TONE_MAPPING.LINEAR;case eo.ReinhardToneMapping:return Ii.TONE_MAPPING.REINHARD;case eo.CineonToneMapping:return Ii.TONE_MAPPING.CINEON;case eo.ACESFilmicToneMapping:return Ii.TONE_MAPPING.ACES_FILMIC;case eo.NoToneMapping:default:return Ii.TONE_MAPPING.NONE}}set toneMapping(e){switch(e){case Ii.TONE_MAPPING.LINEAR:this._renderer.toneMapping=eo.LinearToneMapping;break;case Ii.TONE_MAPPING.REINHARD:this._renderer.toneMapping=eo.ReinhardToneMapping;break;case Ii.TONE_MAPPING.CINEON:this._renderer.toneMapping=eo.CineonToneMapping;break;case Ii.TONE_MAPPING.ACES_FILMIC:this._renderer.toneMapping=eo.ACESFilmicToneMapping;break;case Ii.TONE_MAPPING.NONE:default:this._renderer.toneMapping=eo.NoToneMapping}this.materialLoader.updateMaterials()}get toneMappingExposure(){return this._renderer.toneMappingExposure}set toneMappingExposure(e){this._renderer.toneMappingExposure=e}get type(){return this._type}set type(e){this._type=e,this.update("RenderingEngine.type")}get usingSwiftShader(){return this.renderingManager.usingSwiftShader}get visibility(){return this._visibility}get visualizeAttributes(){return this._visualizeAttributes}set visualizeAttributes(e){this._visualizeAttributes=e}addFlag(e){const n=this._uuidGenerator.create();return e===Ii.FLAG_TYPE.BUSY_MODE?this.stateEngine.viewportEngines[this.id].busy.push(n):rd(this,Mh,"f")[e].push(n),this.evaluateFlagState(),n}applySettings(e={ar:!0,scene:!0,camera:!0,light:!0,environment:!0,general:!0,postprocessing:!0},n,i=!0){return aG(this,void 0,void 0,function*(){n=n||this._settingsEngine,n&&(e.environment?yield new Promise((o,l)=>{this._stateEngine.viewportEngines[this.id].environmentMapLoaded.then(()=>{try{if(!n)return;this.environmentMapAsBackground=n.environment.mapAsBackground,this.clearAlpha=n.environment.clearAlpha,this.clearColor=this._converter.toHexColor(n.environment.clearColor),this.environmentMapRotation=[n.environment.rotation.x,n.environment.rotation.y,n.environment.rotation.z,n.environment.rotation.w],this.environmentMapBlurriness=n.environment.blurriness,this.environmentMapIntensity=n.environment.intensity,this.applySyncSettings(e,n,i),this._eventEngine.emitEvent(ra.EVENTTYPE_VIEWPORT.VIEWPORT_SETTINGS_LOADED,{viewportId:this.id}),o()}catch(d){l(d)}}).catch(d=>l(d)),this.environmentMap=n.environment.map}):(this.applySyncSettings(e,n,i),this._eventEngine.emitEvent(ra.EVENTTYPE_VIEWPORT.VIEWPORT_SETTINGS_LOADED,{viewportId:this.id})))})}assignSettingsEngine(e){this._settingsEngine=e}close(){var e,n,i;return aG(this,void 0,void 0,function*(){this._closed=!0,this._lightEngine.close(),this._tag3dGeometryCreationInjector.close(),this._renderer.clear(!0,!0,!0),this._renderer.dispose(),this._domEventEngine.removeAllDomEventListener(),this._domEventEngine.dispose(),(e=this._canvas.canvasElement.parentElement)===null||e===void 0||e.removeChild(this._logoDivElement),(n=this._canvas.canvasElement.parentElement)===null||n===void 0||n.removeChild(this._spinnerDivElement),(i=this._canvas.canvasElement.parentNode)===null||i===void 0||i.removeChild(this._htmlElementAnchorLoader.parentDiv),this._canvas.reset()})}continueRendering(){this._pause=!1}convert3Dto2D(e){return this.sceneTracingManager.convert3Dto2D(e)}createSDTFOverview(e){const n=new K_.SDTFOverviewData({});for(let i=0,o=e.data.length;i<o;i++)e.data[i]instanceof K_.SDTFOverviewData&&n.merge(e.data[i]);for(let i=0,o=e.children.length;i<o;i++)n.merge(new K_.SDTFOverviewData(this.createSDTFOverview(e.children[i])));return n.overview}createThreeJsColor(e){const n=new Qgt.SDColor(this._converter.toThreeJsColorInput(e),e);return n.colorCorrection(this.automaticColorAdjustment),this._colorCache.push(n),n}displayErrorMessage(e){for(let o=0;o<this.logoDivElement.children.length;o++)this.logoDivElement.children[o].style.visibility="hidden";const n=document.createElement("div");n.classList.add("sdv-error-message-container"),this.logoDivElement.appendChild(n);const i=document.createElement("p");i.textContent=e,i.classList.add("sdv-error-message"),i.style.color=this.logoDivElement.style.backgroundColor,n.appendChild(i)}evaluateFlagState(){{const e=this.busy;this.stateEngine.viewportEngines[this.id]&&this.stateEngine.viewportEngines[this.id].busy.length>0?e||(this.busy=!0,this._renderingManager.render(),this._eventEngine.emitEvent(ra.EVENTTYPE.VIEWPORT.BUSY_MODE_ON,{viewportId:this.id})):e&&(this.busy=!1,this._renderingManager.render(),this._eventEngine.emitEvent(ra.EVENTTYPE.VIEWPORT.BUSY_MODE_OFF,{viewportId:this.id}))}rd(this,Mh,"f")[Ii.FLAG_TYPE.CAMERA_FREEZE].length>0?this.cameraEngine.deactivateCameraEvents():this.cameraEngine.activateCameraEvents();{const e=this.continuousRendering;rd(this,Mh,"f")[Ii.FLAG_TYPE.CONTINUOUS_RENDERING].length>0?e||(this.continuousRendering=!0,this._renderingManager.render()):e&&(this.continuousRendering=!1)}{const e=this.continuousShadowMapUpdate;rd(this,Mh,"f")[Ii.FLAG_TYPE.CONTINUOUS_SHADOW_MAP_UPDATE].length>0?e||(this.continuousShadowMapUpdate=!0,this._renderingManager.render()):e&&(this.continuousShadowMapUpdate=!1)}}getEnvironmentMapImageUrl(){return this._environmentMapLoader.getEnvironmentMapImageUrl(this.environmentMap)}getScreenshot(e,n){return this._renderingManager.getScreenshot(e,n)}isMobileDeviceWithoutBrowserARSupport(){return this._systemInfo.isIOS===!1&&this._systemInfo.isAndroid===!1?!1:this._systemInfo.isAndroid===!0&&this._systemInfo.isFirefox===!0||this._systemInfo.isIOS===!0&&this._systemInfo.isInstagram===!0}pauseRendering(){this._pause=!0}pointerEventToRay(e){return this._sceneTracingManager.pointerEventToRay(e)}raytraceScene(e,n,i){return this._intersectionManager.intersect({origin:e,direction:n},void 0,void 0,i).map(l=>({distance:l.distance,node:l.node,data:l.geometryData}))}removeFlag(e){let n=!1;const i=Object.values(Ii.FLAG_TYPE);for(const o of i)if(o===Ii.FLAG_TYPE.BUSY_MODE){if(this.stateEngine.viewportEngines[this.id].busy.includes(e)){this.stateEngine.viewportEngines[this.id].busy.splice(this.stateEngine.viewportEngines[this.id].busy.indexOf(e),1),n=!0;break}}else if(rd(this,Mh,"f")[o].includes(e)){rd(this,Mh,"f")[o].splice(rd(this,Mh,"f")[o].indexOf(e),1),n=!0;break}return this.evaluateFlagState(),n}reset(){this._stateEngine.viewportEngines[this.id].settingsAssigned.reset(),this._stateEngine.viewportEngines[this.id].boundingBoxCreated.reset(),this._stateEngine.viewportEngines[this.id].environmentMapLoaded.reset(),this._stateEngine.viewportEngines[this.id].boundingBoxCreated.then(()=>{this._environmentGeometryManager.changeSceneExtents(this._sceneTreeManager.boundingBox)})}resize(e,n){this._renderingManager.resize(e,n),this._renderingManager.render()}saveSettings(e){e=e||this._settingsEngine,e&&(this.lightEngine.saveSettings(e),this.cameraEngine.saveSettings(e),this.postProcessingManager.saveSettings(e),e.ar.enable=this.enableAR,e.environment.mapResolution=this.environmentMapResolution,e.environment.map=Array.isArray(this.environmentMap)?JSON.stringify(this.environmentMap):this.environmentMap,e.environment.mapAsBackground=this.environmentMapAsBackground,e.environment.clearAlpha=this.clearAlpha,e.environment.clearColor=this._converter.toHexColor(this.clearColor),e.environment.rotation={x:this.environmentMapRotation[0],y:this.environmentMapRotation[1],z:this.environmentMapRotation[2],w:this.environmentMapRotation[3]},e.environment.blurriness=this.environmentMapBlurriness,e.environment.intensity=this.environmentMapIntensity,e.environmentGeometry.gridVisibility=this.gridVisibility,e.environmentGeometry.groundPlaneVisibility=this.groundPlaneVisibility,e.environmentGeometry.groundPlaneShadowVisibility=this.groundPlaneShadowVisibility,e.environmentGeometry.gridColor=this._converter.toHexColor(this.gridColor),e.environmentGeometry.groundPlaneColor=this._converter.toHexColor(this.groundPlaneColor),e.environmentGeometry.groundPlaneShadowColor=this._converter.toHexColor(this.groundPlaneShadowColor),e.general.pointSize=this.pointSize,e.general.transformation.rotation={x:this.arRotation[0],y:this.arRotation[1],z:this.arRotation[2]},e.general.transformation.translation={x:this.arTranslation[0],y:this.arTranslation[1],z:this.arTranslation[2]},e.general.transformation.scale={x:this.arScale[0],y:this.arScale[1],z:this.arScale[2]},e.general.defaultMaterialColor=this._converter.toHexColor(this.defaultMaterialColor),e.rendering.automaticColorAdjustment=this.automaticColorAdjustment,e.rendering.lights=this.lights,e.rendering.outputEncoding=this.outputEncoding,e.rendering.physicallyCorrectLights=this.physicallyCorrectLights,e.rendering.textureEncoding=this.textureEncoding,e.rendering.toneMapping=this.toneMapping,e.rendering.toneMappingExposure=this.toneMappingExposure,e.rendering.beautyRenderBlendingDuration=this.beautyRenderBlendingDuration,e.rendering.beautyRenderDelay=this.beautyRenderDelay,e.rendering.shadows=this.shadows,e.rendering.softShadows=this.softShadows)}start(){this._renderingManager.start(),this._stateEngine.viewportEngines[this.id].boundingBoxCreated.then(()=>{this._environmentGeometryManager.changeSceneExtents(this._sceneTreeManager.boundingBox)}),this._sessionSettingsMode===ra.SESSION_SETTINGS_MODE.NONE&&(this.environmentMap="photo_studio")}update(e){this.closed||(this._sceneTreeManager.updateSceneTree(this._tree.root),this._renderingManager.updateShadowMap(),this._animationEngine.updateAnimationData(),this._renderingManager.render(),this._eventEngine.emitEvent(ra.EVENTTYPE_VIEWPORT.VIEWPORT_UPDATED,{viewportId:this.id}))}updateEnvironmentGeometry(){this._environmentGeometryManager.updateEnvironmentGeometryPosition()}viewInAR(e,n={arScale:"auto",arPlacement:"floor",xrEnvironment:!1}){return aG(this,void 0,void 0,function*(){const i=this._uuidGenerator.create(),o={type:K_.TASK_TYPE.AR_LOADING,id:i,progress:0,status:"Loading AR scene"};if(this._eventEngine.emitEvent(ra.EVENTTYPE.TASK.TASK_START,o),this.viewableInAR()===!1){const p={type:K_.TASK_TYPE.AR_LOADING,id:i,progress:1,status:"Stopped AR loading due to an error"};throw this._eventEngine.emitEvent(ra.EVENTTYPE.TASK.TASK_CANCEL,p),new ra.ShapeDiverViewerArError('Api.viewInAR: The device or browser is not supported for this functionality, please call "viewableInAR" for more information.')}const l=n.arScale!=="auto"?"fixed":"auto";if(this._systemInfo.isIOS){const p=document.createElement("a");p.href=e+(l==="fixed"?".usdz_allowsContentScaling=0":".usdz"),p.rel="ar";const g=document.createElement("img");g.src=rd(this,gW,"f"),p.appendChild(g),p.click()}else{const p=document.createElement("a");p.href=`intent://arvr.google.com/scene-viewer/1.0?resizable=${l==="fixed"?"false":"true"}&file=${e}&mode=ar_only#Intent;scheme=https;package=com.google.ar.core;action=android.intent.action.VIEW;end;`,p.click()}const d={type:K_.TASK_TYPE.AR_LOADING,id:i,progress:1,status:"Done loading AR scene, launching AR"};this._eventEngine.emitEvent(ra.EVENTTYPE.TASK.TASK_END,d)})}viewableInAR(){return!(this._systemInfo.isIOS===!1&&this._systemInfo.isAndroid===!1||this._systemInfo.isAndroid===!0&&this._systemInfo.isFirefox===!0||this._systemInfo.isIOS===!0&&this._systemInfo.isFirefox===!0||this._systemInfo.isIOS===!0&&this._systemInfo.isInstagram===!0)}applySyncSettings(e={ar:!0,scene:!0,camera:!0,light:!0,environment:!0,general:!0,postprocessing:!0},n,i=!0){n=n||this._settingsEngine,n&&(e.ar&&(this.enableAR=n.ar.enable,this.arScale=[n.general.transformation.scale.x,n.general.transformation.scale.y,n.general.transformation.scale.z],this.arTranslation=[n.general.transformation.translation.x,n.general.transformation.translation.y,n.general.transformation.translation.z],this.arRotation=[n.general.transformation.rotation.x,n.general.transformation.rotation.y,n.general.transformation.rotation.z]),e.scene&&(this.gridColor=n.environmentGeometry.gridColor,this.gridVisibility=n.environmentGeometry.gridVisibility,this.groundPlaneColor=n.environmentGeometry.groundPlaneColor,this.groundPlaneVisibility=n.environmentGeometry.groundPlaneVisibility,this.groundPlaneShadowColor=n.environmentGeometry.groundPlaneShadowColor,this.groundPlaneShadowVisibility=n.environmentGeometry.groundPlaneShadowVisibility,this.shadows=n.rendering.shadows,this.softShadows=n.rendering.softShadows,this.lights=n.rendering.lights,this.automaticColorAdjustment=n.rendering.automaticColorAdjustment,this.textureEncoding=n.rendering.textureEncoding,this.outputEncoding=n.rendering.outputEncoding,this.physicallyCorrectLights=n.rendering.physicallyCorrectLights,this.toneMapping=n.rendering.toneMapping,this.toneMappingExposure=n.rendering.toneMappingExposure),e.general&&(this.defaultMaterialColor=n.general.defaultMaterialColor,this.pointSize=n.general.pointSize),e.light&&this.lightEngine.applySettings(n),e.camera&&this.cameraEngine.applySettings(n),e.postprocessing&&this.postProcessingManager.applySettings(n),this.cameraManager.adjustCamera(1),this._stateEngine.viewportEngines[this.id].settingsAssigned.resolve(!0),i&&this.update("RenderingEngine.applySyncSettings"))}}ZN.RenderingEngine=tvt;mW=new WeakMap,gW=new WeakMap,vW=new WeakMap,IAe=new WeakMap,Mh=new WeakMap;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Resolution=t.PredicationMode=t.EdgeDetectionMode=t.SMAAPreset=t.KernelSize=t.VignetteTechnique=t.BlendFunction=t.VignetteEffect=t.TiltShiftEffect=t.SepiaEffect=t.SelectiveBloomEffect=t.ScanlineEffect=t.SSAOEffect=t.SMAAEffect=t.PixelationEffect=t.OutlineEffect=t.NoiseEffect=t.HueSaturationEffect=t.GridEffect=t.GodRaysEffect=t.FXAAEffect=t.DotScreenEffect=t.DepthOfFieldEffect=t.ChromaticAberrationEffect=t.BloomEffect=t.EffectComposer=t.Effect=t.POST_PROCESSING_EFFECT_TYPE=t.ANTI_ALIASING_TECHNIQUE=t.PostProcessingManager=t.MultiPointsMaterial=t.ENVIRONMENT_MAP_EMPTY=t.ENVIRONMENT_MAP_CUBE=t.ENVIRONMENT_MAP=t.ThreejsData=t.RenderingEngine=void 0;const e=ZN;Object.defineProperty(t,"RenderingEngine",{enumerable:!0,get:function(){return e.RenderingEngine}});const n=Vx;Object.defineProperty(t,"ThreejsData",{enumerable:!0,get:function(){return n.ThreejsData}});const i=xL;Object.defineProperty(t,"ENVIRONMENT_MAP",{enumerable:!0,get:function(){return i.ENVIRONMENT_MAP}}),Object.defineProperty(t,"ENVIRONMENT_MAP_CUBE",{enumerable:!0,get:function(){return i.ENVIRONMENT_MAP_CUBE}}),Object.defineProperty(t,"ENVIRONMENT_MAP_EMPTY",{enumerable:!0,get:function(){return i.ENVIRONMENT_MAP_EMPTY}});const o=fK;Object.defineProperty(t,"POST_PROCESSING_EFFECT_TYPE",{enumerable:!0,get:function(){return o.POST_PROCESSING_EFFECT_TYPE}}),Object.defineProperty(t,"ANTI_ALIASING_TECHNIQUE",{enumerable:!0,get:function(){return o.ANTI_ALIASING_TECHNIQUE}});const l=Dx;Object.defineProperty(t,"PostProcessingManager",{enumerable:!0,get:function(){return l.PostProcessingManager}});const d=Lm;Object.defineProperty(t,"BlendFunction",{enumerable:!0,get:function(){return d.BlendFunction}}),Object.defineProperty(t,"BloomEffect",{enumerable:!0,get:function(){return d.BloomEffect}}),Object.defineProperty(t,"ChromaticAberrationEffect",{enumerable:!0,get:function(){return d.ChromaticAberrationEffect}}),Object.defineProperty(t,"DepthOfFieldEffect",{enumerable:!0,get:function(){return d.DepthOfFieldEffect}}),Object.defineProperty(t,"DotScreenEffect",{enumerable:!0,get:function(){return d.DotScreenEffect}}),Object.defineProperty(t,"EdgeDetectionMode",{enumerable:!0,get:function(){return d.EdgeDetectionMode}}),Object.defineProperty(t,"Effect",{enumerable:!0,get:function(){return d.Effect}}),Object.defineProperty(t,"EffectComposer",{enumerable:!0,get:function(){return d.EffectComposer}}),Object.defineProperty(t,"FXAAEffect",{enumerable:!0,get:function(){return d.FXAAEffect}}),Object.defineProperty(t,"GodRaysEffect",{enumerable:!0,get:function(){return d.GodRaysEffect}}),Object.defineProperty(t,"GridEffect",{enumerable:!0,get:function(){return d.GridEffect}}),Object.defineProperty(t,"HueSaturationEffect",{enumerable:!0,get:function(){return d.HueSaturationEffect}}),Object.defineProperty(t,"KernelSize",{enumerable:!0,get:function(){return d.KernelSize}}),Object.defineProperty(t,"NoiseEffect",{enumerable:!0,get:function(){return d.NoiseEffect}}),Object.defineProperty(t,"OutlineEffect",{enumerable:!0,get:function(){return d.OutlineEffect}}),Object.defineProperty(t,"PixelationEffect",{enumerable:!0,get:function(){return d.PixelationEffect}}),Object.defineProperty(t,"PredicationMode",{enumerable:!0,get:function(){return d.PredicationMode}}),Object.defineProperty(t,"Resolution",{enumerable:!0,get:function(){return d.Resolution}}),Object.defineProperty(t,"ScanlineEffect",{enumerable:!0,get:function(){return d.ScanlineEffect}}),Object.defineProperty(t,"SelectiveBloomEffect",{enumerable:!0,get:function(){return d.SelectiveBloomEffect}}),Object.defineProperty(t,"SepiaEffect",{enumerable:!0,get:function(){return d.SepiaEffect}}),Object.defineProperty(t,"SMAAEffect",{enumerable:!0,get:function(){return d.SMAAEffect}}),Object.defineProperty(t,"SMAAPreset",{enumerable:!0,get:function(){return d.SMAAPreset}}),Object.defineProperty(t,"SSAOEffect",{enumerable:!0,get:function(){return d.SSAOEffect}}),Object.defineProperty(t,"TiltShiftEffect",{enumerable:!0,get:function(){return d.TiltShiftEffect}}),Object.defineProperty(t,"VignetteEffect",{enumerable:!0,get:function(){return d.VignetteEffect}}),Object.defineProperty(t,"VignetteTechnique",{enumerable:!0,get:function(){return d.VignetteTechnique}});const p=kx;Object.defineProperty(t,"MultiPointsMaterial",{enumerable:!0,get:function(){return p.MultiPointsMaterial}})})(yx);var NAe={},LAe={},vK={},uz={},Gx={},jx={},nvt=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})},ti=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},Ji=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},nS,My,zAe,vD,_D,rS,yD,_W,iS,sS,oS,ky,aS,lS,Cy,cS,uS,Py,fS,dS,hS,Ry,pS,mS;Object.defineProperty(jx,"__esModule",{value:!0});jx.Export=void 0;const F1=Mn,lG=Gi;class rvt{constructor(e,n){nS.set(this,F1.EventEngine.instance),My.set(this,void 0),zAe.set(this,F1.InputValidator.instance),vD.set(this,F1.Logger.instance),_D.set(this,void 0),rS.set(this,void 0),yD.set(this,void 0),_W.set(this,F1.UuidGenerator.instance),iS.set(this,void 0),sS.set(this,void 0),oS.set(this,void 0),ky.set(this,void 0),aS.set(this,void 0),lS.set(this,void 0),Cy.set(this,!1),cS.set(this,3e5),uS.set(this,void 0),Py.set(this,void 0),fS.set(this,void 0),dS.set(this,void 0),hS.set(this,void 0),Ry.set(this,void 0),pS.set(this,void 0),mS.set(this,void 0),ti(this,rS,n,"f"),ti(this,My,e.id,"f"),ti(this,_D,e.name,"f"),ti(this,yD,e.type,"f"),this.updateExportDefinition(e)}get content(){return Ji(this,iS,"f")}get delay(){return Ji(this,sS,"f")}get dependency(){return Ji(this,oS,"f")}get displayname(){return Ji(this,ky,"f")}set displayname(e){ti(this,ky,e,"f")}get filename(){return Ji(this,aS,"f")}get group(){return Ji(this,lS,"f")}get hidden(){return Ji(this,Cy,"f")}set hidden(e){ti(this,Cy,e,"f")}get id(){return Ji(this,My,"f")}get maxWaitTime(){return Ji(this,cS,"f")}set maxWaitTime(e){ti(this,cS,e,"f")}get msg(){return Ji(this,uS,"f")}get name(){return Ji(this,_D,"f")}get order(){return Ji(this,Py,"f")}set order(e){ti(this,Py,e,"f")}get result(){return Ji(this,fS,"f")}get status_collect(){return Ji(this,dS,"f")}get status_computation(){return Ji(this,hS,"f")}get tooltip(){return Ji(this,Ry,"f")}set tooltip(e){ti(this,Ry,e,"f")}get type(){return Ji(this,yD,"f")}get uid(){return Ji(this,pS,"f")}get version(){return Ji(this,mS,"f")}request(e={}){return nvt(this,void 0,void 0,function*(){const n=Ji(this,_W,"f").create();try{const i={type:lG.TASK_TYPE.EXPORT_REQUEST,id:n,progress:0,status:"Requesting export"};Ji(this,nS,"f").emitEvent(F1.EVENTTYPE.TASK.TASK_START,i),Object.keys(e).length===0?Ji(this,vD,"f").info(`Export(${Ji(this,My,"f")}).request: Sending export request with parameters ${JSON.stringify(e)}.`):Ji(this,vD,"f").debugLow(`Export(${Ji(this,My,"f")}).request: Sending export request.`);const o=yield Ji(this,rS,"f").requestExport(this.id,e,Ji(this,cS,"f"));this.updateExportDefinition(o);const l={type:lG.TASK_TYPE.EXPORT_REQUEST,id:n,progress:1,status:"Returning export"};return Ji(this,nS,"f").emitEvent(F1.EVENTTYPE.TASK.TASK_END,l),o}catch(i){const o={type:lG.TASK_TYPE.EXPORT_REQUEST,id:n,progress:1,status:"Export request failed"};throw Ji(this,nS,"f").emitEvent(F1.EVENTTYPE.TASK.TASK_CANCEL,o),i}})}updateExport(){const e=Ji(this,rS,"f").exports[this.id];ti(this,oS,e.dependency,"f"),ti(this,pS,e.uid,"f"),ti(this,ky,e.displayname,"f"),ti(this,Py,e.order,"f"),ti(this,Cy,e.hidden,"f"),ti(this,Ry,e.tooltip,"f"),ti(this,mS,e.version,"f"),ti(this,sS,e.delay,"f"),ti(this,iS,e.content,"f"),ti(this,uS,e.msg,"f"),ti(this,aS,e.filename,"f"),ti(this,fS,e.result,"f"),ti(this,hS,e.status_computation,"f"),ti(this,dS,e.status_collect,"f"),ti(this,lS,e.group,"f")}updateExportDefinition(e){ti(this,oS,e.dependency,"f"),ti(this,pS,e.uid,"f"),ti(this,ky,e.displayname,"f"),ti(this,Py,e.order,"f"),ti(this,Cy,e.hidden,"f"),ti(this,Ry,e.tooltip,"f"),ti(this,mS,e.version,"f"),ti(this,sS,e.delay,"f"),ti(this,iS,e.content,"f"),ti(this,uS,e.msg,"f"),ti(this,aS,e.filename,"f"),ti(this,fS,e.result,"f"),ti(this,hS,e.status_computation,"f"),ti(this,dS,e.status_collect,"f"),ti(this,lS,e.group,"f")}}jx.Export=rvt;nS=new WeakMap,My=new WeakMap,zAe=new WeakMap,vD=new WeakMap,_D=new WeakMap,rS=new WeakMap,yD=new WeakMap,_W=new WeakMap,iS=new WeakMap,sS=new WeakMap,oS=new WeakMap,ky=new WeakMap,aS=new WeakMap,lS=new WeakMap,Cy=new WeakMap,cS=new WeakMap,uS=new WeakMap,Py=new WeakMap,fS=new WeakMap,dS=new WeakMap,hS=new WeakMap,Ry=new WeakMap,pS=new WeakMap,mS=new WeakMap;var Hx={},k4={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.extendMimeTypes=t.mapMimeTypeToFileEndings=t.guessMimeTypeFromFilename=t.extensionToMimeTypeMapping=void 0,t.extensionToMimeTypeMapping={svg:["image/svg+xml"],svgz:["image/svg+xml"],jpg:["image/jpeg"],jpeg:["image/jpeg"],png:["image/png"],gif:["image/gif"],bmp:["image/bmp"],tif:["image/tif"],tiff:["image/tiff"],gltf:["gltf+json","model/gltf-binary"],glb:["application/octet-stream","model/gltf-binary"],bin:["application/octet-stream","application/gltf-buffer"],"3dm":["model/vnd.3dm","application/3dm","x-world/x-3dmf"],"3ds":["application/x-3ds","image/x-3ds","application/3ds"],fbx:["application/fbx"],dxf:["application/dxf","application/x-autocad","application/x-dxf","drawing/x-dxf","image/vnd.dxf","image/x-autocad","image/x-dxf","zz-application/zz-winassoc-dxf"],dwg:["application/dwg"],pdf:["application/pdf"],"3mf":["model/3mf"],stl:["model/stl","application/sla"],amf:["application/amf"],ai:["application/ai"],dgn:["application/dgn"],ply:["application/ply"],ps:["application/postscript"],eps:["application/postscript"],skp:["application/skp"],slc:["application/slc"],sldprt:["application/sldprt"],sldasm:["application/sldasm"],stp:["application/step"],step:["application/step"],vda:["application/vda"],gdf:["application/gdf"],vrml:["model/vrml","model/x3d-vrml"],wrl:["model/vrml","model/x3d-vrml"],vi:["model/vrml","model/x3d-vrml"],igs:["model/iges","application/iges"],iges:["model/iges","application/iges"],obj:["model/obj","application/wavefront-obj"],off:["application/off"],txt:["text/plain"],mtl:["text/plain"],g:["text/plain"],gcode:["text/plain"],glsl:["text/plain"],csv:["text/csv","application/vnd.ms-excel"],xls:["application/vnd.ms-excel"],xlsx:["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],xml:["application/xml","text/xml"],json:["application/json"],ifc:["application/x-step"],ifcxml:["application/xml"],ifczip:["application/zip"],sdtf:["model/vnd.sdtf"],sddtf:["model/vnd.sdtf"],hdr:["image/vnd.radiance"],zip:["application/zip","application/x-zip-compressed"]};const e=o=>{const l=o.toLowerCase().split(".");if(!(l.length>0))return[];const d=l[l.length-1];return Object.keys(t.extensionToMimeTypeMapping).includes(d)?t.extensionToMimeTypeMapping[d]:[]};t.guessMimeTypeFromFilename=e;const n=o=>{const l=[],d=o.map(p=>p.toLowerCase());for(let p=0;p<d.length;p++){const g=Object.keys(t.extensionToMimeTypeMapping).find(v=>t.extensionToMimeTypeMapping[v].includes(d[p]));g&&l.push("."+g)}return l};t.mapMimeTypeToFileEndings=n;const i=o=>{let l=o.map(p=>p.toLowerCase());return(0,t.mapMimeTypeToFileEndings)(l).forEach(p=>l=l.concat((0,t.guessMimeTypeFromFilename)(p))),l=l.filter(function(p,g){return l.indexOf(p)==g}),l};t.extendMimeTypes=i})(k4);var SA={},ivt=X&&X.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,o)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),svt=X&&X.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),ovt=X&&X.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&ivt(e,t,n);return svt(e,t),e},Ni=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},An=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},bD,AD,Dy,tg,ng,wD,ED,SD,TD,Us,s0,BAe,xD,MD,kD,rg,CD,od,PD,gS,vS,RD,_S,yS,bS,kh;Object.defineProperty(SA,"__esModule",{value:!0});SA.Parameter=void 0;const avt=ovt(k4),Al=Mn,zs=Gi;class lvt{constructor(e,n){bD.set(this,void 0),AD.set(this,Al.Converter.instance),Dy.set(this,void 0),tg.set(this,void 0),ng.set(this,void 0),wD.set(this,Al.EventEngine.instance),ED.set(this,void 0),SD.set(this,void 0),TD.set(this,void 0),Us.set(this,void 0),s0.set(this,Al.InputValidator.instance),BAe.set(this,Al.Logger.instance),xD.set(this,void 0),MD.set(this,void 0),kD.set(this,void 0),rg.set(this,void 0),CD.set(this,void 0),od.set(this,void 0),PD.set(this,void 0),gS.set(this,void 0),vS.set(this,!1),RD.set(this,void 0),_S.set(this,void 0),yS.set(this,void 0),bS.set(this,void 0),kh.set(this,void 0),Ni(this,rg,n,"f"),Ni(this,Us,e.id,"f"),Ni(this,ng,e.defval,"f"),Ni(this,kD,e.name,"f"),Ni(this,od,e.type,"f"),e.choices!==void 0&&Ni(this,bD,e.choices,"f"),e.decimalplaces!==void 0&&Ni(this,Dy,+e.decimalplaces,"f"),e.expression!==void 0&&Ni(this,ED,e.expression,"f"),e.format!==void 0&&Ni(this,SD,avt.extendMimeTypes(e.format),"f"),e.min!==void 0&&Ni(this,MD,+e.min,"f"),e.max!==void 0&&Ni(this,xD,+e.max,"f"),e.visualization!==void 0&&Ni(this,PD,e.visualization,"f"),e.structure!==void 0&&Ni(this,CD,e.structure,"f"),e.group!==void 0&&Ni(this,TD,e.group,"f"),e.tooltip!==void 0&&Ni(this,bS,e.tooltip,"f"),e.displayname!==void 0&&Ni(this,gS,e.displayname,"f"),e.order!==void 0&&Ni(this,_S,e.order,"f"),e.hidden!==void 0&&Ni(this,vS,e.hidden,"f"),An(this,od,"f")===zs.PARAMETER_TYPE.BOOL?Ni(this,tg,An(this,ng,"f")==="true","f"):An(this,od,"f")===zs.PARAMETER_TYPE.EVEN||An(this,od,"f")===zs.PARAMETER_TYPE.FLOAT||An(this,od,"f")===zs.PARAMETER_TYPE.INT||An(this,od,"f")===zs.PARAMETER_TYPE.ODD?Ni(this,tg,+An(this,ng,"f"),"f"):Ni(this,tg,An(this,ng,"f"),"f"),An(this,od,"f")===zs.PARAMETER_TYPE.COLOR&&(this.convertColor=i=>An(this,AD,"f").toHexColor(i)),Ni(this,kh,An(this,tg,"f"),"f"),Ni(this,yS,An(this,kh,"f"),"f"),Ni(this,RD,An(this,kh,"f"),"f")}get choices(){return An(this,bD,"f")}get decimalplaces(){return An(this,Dy,"f")}get defval(){return An(this,ng,"f")}get displayname(){return An(this,gS,"f")}set displayname(e){Ni(this,gS,e,"f")}get expression(){return An(this,ED,"f")}get format(){return An(this,SD,"f")}get group(){return An(this,TD,"f")}get hidden(){return An(this,vS,"f")}set hidden(e){Ni(this,vS,e,"f")}get id(){return An(this,Us,"f")}get lastValidatedValue(){return An(this,RD,"f")}get max(){return An(this,xD,"f")}get min(){return An(this,MD,"f")}get name(){return An(this,kD,"f")}get order(){return An(this,_S,"f")}set order(e){Ni(this,_S,e,"f")}get sessionValue(){return An(this,yS,"f")}set sessionValue(e){Ni(this,yS,e,"f"),An(this,wD,"f").emitEvent(Al.EVENTTYPE_PARAMETER.PARAMETER_SESSION_VALUE_CHANGED,{sessionId:An(this,rg,"f").id,parameterId:An(this,Us,"f"),value:e})}get structure(){return An(this,CD,"f")}get tooltip(){return An(this,bS,"f")}set tooltip(e){Ni(this,bS,e,"f")}get type(){return An(this,od,"f")}get value(){return An(this,kh,"f")}set value(e){Ni(this,kh,e,"f"),An(this,wD,"f").emitEvent(Al.EVENTTYPE_PARAMETER.PARAMETER_VALUE_CHANGED,{sessionId:An(this,rg,"f").id,parameterId:An(this,Us,"f"),value:e}),An(this,rg,"f").customizeOnParameterChange&&An(this,rg,"f").customize()}get visualization(){return An(this,PD,"f")}isValid(e){switch(!0){case this.type===zs.PARAMETER_TYPE.BOOL:if(typeof e=="string"){if(!(e==="true"||e==="false"))throw new Al.ShapeDiverViewerSessionError(`Parameter(${An(this,Us,"f")}).isValid: The value ${e} is a string that is neither true or false.`)}else An(this,s0,"f").validateAndError(`Parameter(${An(this,Us,"f")}).isValid`,e,"boolean");break;case this.type===zs.PARAMETER_TYPE.COLOR:An(this,s0,"f").validateAndError(`Parameter(${An(this,Us,"f")}).isValid`,e,"color");break;case this.type===zs.PARAMETER_TYPE.FILE:An(this,s0,"f").validateAndError(`Parameter(${An(this,Us,"f")}).isValid`,e,"file");break;case(this.type===zs.PARAMETER_TYPE.EVEN||this.type===zs.PARAMETER_TYPE.FLOAT||this.type===zs.PARAMETER_TYPE.INT||this.type===zs.PARAMETER_TYPE.ODD):{let n=e;if(typeof e=="string"&&(n=+e),An(this,s0,"f").validateAndError(`Parameter(${An(this,Us,"f")}).isValid`,n,"number"),this.type===zs.PARAMETER_TYPE.EVEN){if(n%2!==0)throw new Al.ShapeDiverViewerSessionError(`Parameter(${An(this,Us,"f")}).isValid: The value ${e} is not even.`)}else if(this.type===zs.PARAMETER_TYPE.ODD){if(n%2===0)throw new Al.ShapeDiverViewerSessionError(`Parameter(${An(this,Us,"f")}).isValid: The value ${e} is not odd.`)}else if(this.type===zs.PARAMETER_TYPE.INT&&!Number.isInteger(n))throw new Al.ShapeDiverViewerSessionError(`Parameter(${An(this,Us,"f")}).isValid: The value ${e} is not an integer.`);if((this.min||this.min===0)&&n<this.min)throw new Al.ShapeDiverViewerSessionError(`Parameter(${An(this,Us,"f")}).isValid: The value ${e} is smaller than the minimum ${this.min}.`);if((this.max||this.max===0)&&n>this.max)throw new Al.ShapeDiverViewerSessionError(`Parameter(${An(this,Us,"f")}).isValid: The value ${e} is larger than the maximum ${this.max}.`);if(this.decimalplaces||this.decimalplaces===0){const i=n+"";let o=0;if(i.includes(".")&&(o=i.split(".")[1].length),this.decimalplaces<o)throw new Al.ShapeDiverViewerSessionError(`Parameter(${An(this,Us,"f")}).isValid: The value ${e} has not the correct number of decimalplaces (${this.decimalplaces}).`)}}break;case this.type===zs.PARAMETER_TYPE.STRINGLIST:{An(this,s0,"f").validateAndError(`Parameter(${An(this,Us,"f")}).isValid`,e,"string");const n=i=>{const o=+i;if(An(this,s0,"f").validateAndError(`Parameter(${An(this,Us,"f")}).isValid`,o,"number"),o<0||o>this.choices.length-1)throw new Al.ShapeDiverViewerSessionError(`Parameter(${An(this,Us,"f")}).isValid: The value ${i} is not within the range of the defined number choices.`)};if(this.visualization===zs.PARAMETER_VISUALIZATION.CHECKLIST)if(e.includes(",")){const i=e.split(",");for(let o=0;o<i.length;o++){if(i.filter(l=>l===i[o]).length!==1)throw new Al.ShapeDiverViewerSessionError(`Parameter(${An(this,Us,"f")}).isValid: The value ${i[o]} exists multiple times, but should only exist once.`);n(i[o])}}else{let i=e;typeof e=="string"&&(i=+e),An(this,s0,"f").validateAndError(`Parameter(${An(this,Us,"f")}).isValid`,i,"number"),n(e)}else{let i=e;typeof e=="string"&&(i=+e),An(this,s0,"f").validateAndError(`Parameter(${An(this,Us,"f")}).isValid`,i,"number"),n(e)}break}default:An(this,s0,"f").validateAndError(`Parameter(${An(this,Us,"f")}).isValid`,e,"string");break}return!0}resetToDefaultValue(){Ni(this,kh,An(this,tg,"f"),"f")}resetToSessionValue(){Ni(this,kh,this.sessionValue,"f")}stringify(e){const n=e!==void 0?e:this.value;switch(!0){case this.type===zs.PARAMETER_TYPE.BOOL:return typeof n=="string"?n:n+"";case this.type===zs.PARAMETER_TYPE.COLOR:return An(this,AD,"f").toHex8Color(n);case this.type===zs.PARAMETER_TYPE.FILE:if(typeof n!="string")throw new Al.ShapeDiverViewerSessionError(`Parameter(${An(this,Us,"f")}).stringify: Error in stringify. Cannot stringify FileParameter that has not been uploaded yet.`);return n;case(this.type===zs.PARAMETER_TYPE.EVEN||this.type===zs.PARAMETER_TYPE.FLOAT||this.type===zs.PARAMETER_TYPE.INT||this.type===zs.PARAMETER_TYPE.ODD):return typeof n=="string"?this.decimalplaces||this.decimalplaces===0?(+n).toFixed(An(this,Dy,"f")):n:this.decimalplaces||this.decimalplaces===0?n.toFixed(An(this,Dy,"f")):n+"";default:return n}}}SA.Parameter=lvt;bD=new WeakMap,AD=new WeakMap,Dy=new WeakMap,tg=new WeakMap,ng=new WeakMap,wD=new WeakMap,ED=new WeakMap,SD=new WeakMap,TD=new WeakMap,Us=new WeakMap,s0=new WeakMap,BAe=new WeakMap,xD=new WeakMap,MD=new WeakMap,kD=new WeakMap,rg=new WeakMap,CD=new WeakMap,od=new WeakMap,PD=new WeakMap,gS=new WeakMap,vS=new WeakMap,RD=new WeakMap,_S=new WeakMap,yS=new WeakMap,bS=new WeakMap,kh=new WeakMap;var cvt=X&&X.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,o)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),uvt=X&&X.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),fvt=X&&X.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&cvt(e,t,n);return uvt(e,t),e},Jle=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})},dvt=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},J_=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},yW,Oy,DD;Object.defineProperty(Hx,"__esModule",{value:!0});Hx.FileParameter=void 0;const cG=fvt(k4),ew=Mn,hvt=SA;class pvt extends hvt.Parameter{constructor(e,n){super(e,n),yW.set(this,ew.Logger.instance),Oy.set(this,void 0),DD.set(this,ew.UuidGenerator.instance),dvt(this,Oy,n,"f")}getFilename(e){return Jle(this,void 0,void 0,function*(){if(!(e===void 0&&this.value===void 0)){if(e===void 0&&typeof this.value=="string"&&(this.value.length===36&&J_(this,DD,"f").validate(this.value)||this.value===""))return(yield J_(this,Oy,"f").getFileInfo(this.id,this.value)).filename;if(e!==void 0)return(yield J_(this,Oy,"f").getFileInfo(this.id,e)).filename}})}upload(e){var n;return Jle(this,void 0,void 0,function*(){const i=e!==void 0?e:this.value;if(i===void 0)return this.defval;if(typeof i=="string"&&(i.length===36&&J_(this,DD,"f").validate(i)||i===""))return i;let o;if(i instanceof File)if(i.type===""){const _=cG.guessMimeTypeFromFilename(i.name);if(_.length===0)throw new ew.ShapeDiverViewerSessionError(`Parameter(${this.id}).upload: Error uploading FileParameter, provided File has no type and could not be guessed from filename. Has to be ${this.format}.`);o=_}else o=i.type;else if(i instanceof Blob){if(i.type==="")throw new ew.ShapeDiverViewerSessionError(`Parameter(${this.id}).upload: Error uploading FileParameter, provided File has no type and could not be guessed from filename. Has to be ${this.format}.`);o=i.type}else o="text/plain";let l=typeof o=="string"?[o]:o;cG.mapMimeTypeToFileEndings(l).forEach(_=>l=l.concat(cG.guessMimeTypeFromFilename(_)));let p,g=!1;for(let _=0;_<l.length;_++)if(!((n=this.format)===null||n===void 0)&&n.includes(l[_])){g=!0,p=l[_];break}if(g===!1||p===void 0)throw new ew.ShapeDiverViewerSessionError(`Parameter(${this.id}).upload: Error uploading FileParameter, type of data (${o}) is not a valid type. Has to be ${this.format}.`);const v=new File([typeof i=="string"?new Blob([i],{type:"text/plain"}):i],i instanceof File&&i.name!==void 0?i.name:"",{type:p});return J_(this,yW,"f").debug(`Parameter(${this.id}).upload: Uploading FileParameter.`),yield J_(this,Oy,"f").uploadFile(this.id,v,p)})}}Hx.FileParameter=pvt;yW=new WeakMap,Oy=new WeakMap,DD=new WeakMap;var $x={},ece=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})},Cs=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},hi=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},Iy,UAe,bW,OD,ad,AW,ID,ND,LD,ig,zD,BD,AS,wS,UD,Ny,ES,FD,VD,GD,jD,Ly,zy;Object.defineProperty($x,"__esModule",{value:!0});$x.Output=void 0;const uG=Mn;class mvt{constructor(e,n){Iy.set(this,void 0),UAe.set(this,uG.InputValidator.instance),bW.set(this,uG.Logger.instance),OD.set(this,void 0),ad.set(this,void 0),AW.set(this,uG.UuidGenerator.instance),ID.set(this,void 0),ND.set(this,void 0),LD.set(this,void 0),ig.set(this,void 0),zD.set(this,void 0),BD.set(this,void 0),AS.set(this,void 0),wS.set(this,!1),UD.set(this,void 0),Ny.set(this,void 0),ES.set(this,void 0),FD.set(this,void 0),VD.set(this,void 0),GD.set(this,void 0),jD.set(this,void 0),Ly.set(this,null),zy.set(this,void 0),Cs(this,ad,n,"f"),Cs(this,Iy,e.id,"f"),Cs(this,OD,e.name,"f"),Cs(this,zy,e.version,"f"),this.updateOutputDefinition(e)}get bbmax(){return hi(this,ID,"f")}get bbmin(){return hi(this,ND,"f")}get chunks(){return hi(this,LD,"f")}get content(){return hi(this,ig,"f")}set content(e){Cs(this,ig,e,"f")}get delay(){return hi(this,zD,"f")}get dependency(){return hi(this,BD,"f")}get displayname(){return hi(this,AS,"f")}set displayname(e){Cs(this,AS,e,"f")}get format(){return hi(this,ig,"f")?hi(this,ig,"f").map(e=>e.format):[]}get freeze(){return hi(this,ad,"f").outputsFreeze[hi(this,Iy,"f")]}set freeze(e){hi(this,ad,"f").outputsFreeze[hi(this,Iy,"f")]=e}get hidden(){return hi(this,wS,"f")}set hidden(e){Cs(this,wS,e,"f")}get id(){return hi(this,Iy,"f")}get material(){return hi(this,UD,"f")}get msg(){return hi(this,Ny,"f")}get name(){return hi(this,OD,"f")}get node(){return hi(this,ad,"f").node.children.find(e=>e.name===this.id)}get order(){return hi(this,ES,"f")}set order(e){Cs(this,ES,e,"f")}get status_collect(){return hi(this,FD,"f")}get status_computation(){return hi(this,VD,"f")}get tooltip(){return hi(this,GD,"f")}set tooltip(e){Cs(this,GD,e,"f")}get uid(){return hi(this,jD,"f")}get updateCallback(){return hi(this,Ly,"f")}set updateCallback(e){Cs(this,Ly,e,"f")}get version(){return hi(this,zy,"f")}set version(e){Cs(this,zy,e,"f")}triggerUpdateCallback(e,n){return ece(this,void 0,void 0,function*(){hi(this,Ly,"f")&&(yield Promise.resolve(hi(this,Ly,"f").call(this,e,n)))})}updateOutput(e,n){const i=hi(this,ad,"f").outputs[this.id];if(this.updateOutputDefinition(i),this.chunks&&e)for(let o=0;o<e.children.length;o++)for(let l=0;l<this.chunks.length;l++)this.chunks[l].node=e.children[o].children.find(d=>d.name===this.chunks[l].id)}updateOutputContent(e,n=!1,i=!1){return ece(this,void 0,void 0,function*(){return hi(this,ad,"f").outputs[this.id].content=e,hi(this,ad,"f").outputs[this.id].version=hi(this,AW,"f").create(),n||(yield hi(this,ad,"f").updateOutputs(void 0,i)),this.node})}updateOutputDefinition(e){Cs(this,BD,e.dependency,"f"),Cs(this,jD,e.uid,"f"),Cs(this,UD,e.material,"f"),Cs(this,LD,e.chunks,"f"),Cs(this,Ny,e.msg,"f"),hi(this,Ny,"f")!==void 0&&hi(this,bW,"f").warn(`Output(${this.id}): ${hi(this,Ny,"f")}`),Cs(this,ND,e.bbmin,"f"),Cs(this,ID,e.bbmax,"f"),Cs(this,VD,e.status_computation,"f"),Cs(this,FD,e.status_collect,"f"),Cs(this,ig,e.content,"f"),Cs(this,zD,e.delay,"f"),Cs(this,zy,e.version,"f"),Cs(this,AS,e.displayname,"f"),Cs(this,ES,e.order,"f"),Cs(this,wS,e.hidden,"f")}}$x.Output=mvt;Iy=new WeakMap,UAe=new WeakMap,bW=new WeakMap,OD=new WeakMap,ad=new WeakMap,AW=new WeakMap,ID=new WeakMap,ND=new WeakMap,LD=new WeakMap,ig=new WeakMap,zD=new WeakMap,BD=new WeakMap,AS=new WeakMap,wS=new WeakMap,UD=new WeakMap,Ny=new WeakMap,ES=new WeakMap,FD=new WeakMap,VD=new WeakMap,GD=new WeakMap,jD=new WeakMap,Ly=new WeakMap,zy=new WeakMap;var Wx={},tce=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},gvt=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},SS;Object.defineProperty(Wx,"__esModule",{value:!0});Wx.SessionData=void 0;const vvt=dr;class _K extends vvt.AbstractTreeNodeData{constructor(e,n,i){super(n,i),SS.set(this,void 0),tce(this,SS,e,"f")}get responseDto(){return gvt(this,SS,"f")}set responseDto(e){tce(this,SS,e,"f")}clone(){return new _K(this.responseDto,this.id,this.version)}}Wx.SessionData=_K;SS=new WeakMap;var fz={},Yx={};Object.defineProperty(Yx,"__esModule",{value:!0});Yx.OutputDelayException=void 0;class _vt extends Error{constructor(e){super(),this._delay=e}get delay(){return this._delay}}Yx.OutputDelayException=_vt;var dz={},qx={},nce=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},yvt=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},TS;Object.defineProperty(qx,"__esModule",{value:!0});qx.SessionOutputData=void 0;const bvt=dr;class yK extends bvt.AbstractTreeNodeData{constructor(e,n,i){super(n,i),TS.set(this,void 0),nce(this,TS,e,"f")}get responseOutput(){return yvt(this,TS,"f")}set responseOutput(e){nce(this,TS,e,"f")}clone(){return new yK(this.responseOutput,this.id,this.version)}}qx.SessionOutputData=yK;TS=new WeakMap;var Xx={},Avt=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},wW;Object.defineProperty(Xx,"__esModule",{value:!0});Xx.SessionTreeNode=void 0;const wvt=dr;class Evt extends wvt.TreeNode{constructor(e,n,i,o){super(e,n,i,o),wW.set(this,!0)}get sessionNode(){return Avt(this,wW,"f")}}Xx.SessionTreeNode=Evt;wW=new WeakMap;var hz={},pz={},FAe={},mz={},f2=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty(mz,"__esModule",{value:!0});mz.SDTFEngine=void 0;const lC=dr,rce=Mn,ey=Gi,ice=KZ,tf=q6;class Svt{constructor(){this._logger=rce.Logger.instance}static get instance(){return this._instance||(this._instance=new this)}loadContent(e,n){return f2(this,void 0,void 0,function*(){const i=new lC.TreeNode("sdtf");if(!e||e&&!e.href)throw new rce.ShapeDiverViewerDataProcessingError("SDTFEngine.loadContent: Invalid content was provided to geometry engine.");const l=(n?yield(0,ice.create)({authToken:n}):yield(0,ice.create)()).createParser();this._parsedFile=yield l.readFromUrl(e.href),i.data.push(yield this.createSDTFOverview());for(let d=0;d<this._parsedFile.chunks.length;d++)i.children.push(yield this.loadChunk(this._parsedFile.chunks[d],d));return i})}createSDTFOverview(){var e,n;return f2(this,void 0,void 0,function*(){const i={};for(let o=0;o<this._parsedFile.attributes.length;o++){const l=this._parsedFile.attributes[o];for(let d in l.entries){const p=l.entries[d],g=yield p.getContent(),v=p.typeHint===void 0?"undefined":p.typeHint.name,_=i[d]?i[d].filter(b=>b.typeHint===v):[];if(i[d]&&_.length>0){const b=_[0];b.count++,tf.SdtfPrimitiveTypeGuard.isStringType(v)&&(!((e=b.values)===null||e===void 0)&&e.includes(g)||(n=b.values)===null||n===void 0||n.push(g)),tf.SdtfPrimitiveTypeGuard.isNumberType(v)&&(b.min=Math.min(g,b.min),b.max=Math.max(g,b.max))}else i[d]?i[d].push({typeHint:v,count:1}):i[d]=[{typeHint:v,count:1}],tf.SdtfPrimitiveTypeGuard.isStringType(v)&&(i[d][i[d].length-1].values=[g]),tf.SdtfPrimitiveTypeGuard.isNumberType(v)&&(i[d][i[d].length-1].min=g,i[d][i[d].length-1].max=g)}}return new ey.SDTFOverviewData(i)})}loadAttributes(e){var n,i,o,l;return f2(this,void 0,void 0,function*(){const d=new ey.SDTFAttributesData;for(let p in e.entries)if(tf.SdtfPrimitiveTypeGuard.isBooleanType((n=e.entries[p].typeHint)===null||n===void 0?void 0:n.name)||tf.SdtfPrimitiveTypeGuard.isColorType((i=e.entries[p].typeHint)===null||i===void 0?void 0:i.name)||tf.SdtfPrimitiveTypeGuard.isNumberType((o=e.entries[p].typeHint)===null||o===void 0?void 0:o.name)||tf.SdtfPrimitiveTypeGuard.isStringType((l=e.entries[p].typeHint)===null||l===void 0?void 0:l.name)){const g=e.entries[p].typeHint===void 0?"undefined":e.entries[p].typeHint.name;d.attributes[p]=new ey.SDTFAttributeData(g,yield e.entries[p].getContent())}else{const g=e.entries[p].typeHint===void 0?"undefined":e.entries[p].typeHint.name;d.attributes[p]=new ey.SDTFAttributeData(g,()=>f2(this,void 0,void 0,function*(){return yield e.entries[p].getContent()}))}return d})}loadChunk(e,n){return f2(this,void 0,void 0,function*(){const i=new lC.TreeNode(e.name||"chunk_"+n);if(e.attributes!==void 0&&i.data.push(yield this.loadAttributes(e.attributes)),e.items!==void 0&&e.items.length>0)for(let o=0,l=e.items.length;o<l;o++)i.addChild(yield this.loadItem(e.items[o],o));if(e.nodes!==void 0&&e.nodes.length>0)for(let o=0,l=e.nodes.length;o<l;o++)i.addChild(yield this.loadNode(e.nodes[o],o));return i})}loadItem(e,n){return f2(this,void 0,void 0,function*(){const i=new lC.TreeNode(n+"");let o;e.attributes!==void 0&&(o=yield this.loadAttributes(e.attributes));const l=e.typeHint===void 0?"undefined":e.typeHint.name;let d;return tf.SdtfPrimitiveTypeGuard.isBooleanType(l)||tf.SdtfPrimitiveTypeGuard.isColorType(l)||tf.SdtfPrimitiveTypeGuard.isNumberType(l)||tf.SdtfPrimitiveTypeGuard.isStringType(l)?d=new ey.SDTFItemData(l,yield e.getContent(),o==null?void 0:o.attributes):d=new ey.SDTFItemData(l,()=>f2(this,void 0,void 0,function*(){return yield e.getContent()}),o==null?void 0:o.attributes),i.data.push(d),i})}loadNode(e,n){return f2(this,void 0,void 0,function*(){const i=new lC.TreeNode(e.name||"node_"+n);if(e.attributes!==void 0&&i.data.push(yield this.loadAttributes(e.attributes)),e.items!==void 0&&e.items.length>0)for(let o=0,l=e.items.length;o<l;o++)i.addChild(yield this.loadItem(e.items[o],o));if(e.nodes!==void 0&&e.nodes.length>0)for(let o=0,l=e.nodes.length;o<l;o++)i.addChild(yield this.loadNode(e.nodes[o],o));return i})}}mz.SDTFEngine=Svt;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SDTFEngine=void 0;const e=mz;Object.defineProperty(t,"SDTFEngine",{enumerable:!0,get:function(){return e.SDTFEngine}})})(FAe);var VAe={},gz={},Tvt=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty(gz,"__esModule",{value:!0});gz.HTMLElementAnchorEngine=void 0;const fG=Gi,xvt=dr,cC=Mn,Mvt=Rl();class kvt{constructor(){this._converter=cC.Converter.instance,this._inputValidator=cC.InputValidator.instance,this._logger=cC.Logger.instance}static get instance(){return this._instance||(this._instance=new this)}loadContent(e){return Tvt(this,void 0,void 0,function*(){try{const n=new xvt.TreeNode("htmlElementAnchors");return e.format==="tag2d"?e.data.forEach(o=>{if(!o.location||!o.text){this._logger.warn("HTMLElementAnchorEngine.load: One of the specified Tag2D elements did not have all necessary properties.");return}const l=this._inputValidator.sanitize(o.text);n.data.push(new fG.HTMLElementAnchorTextData({location:this._converter.toVec3(o.location),data:{color:o.color||"#000000",text:l}}))}):e.format==="anchor"&&e.data.forEach(o=>{if(!o.location||!o.data){this._logger.warn("HTMLElementAnchorEngine.load: One of the specified Anchor elements did not have all necessary properties.");return}let l;o.data.position&&(l={vertical:o.data.position.vertical,horizontal:o.data.position.horizontal});let d;if(o.intersectionTarget&&(typeof o.intersectionTarget=="string"||Array.isArray(o.intersectionTarget)?d=o.intersectionTarget:o.intersectionTarget.min&&o.intersectionTarget.max&&(d=new Mvt.Box(this._converter.toVec3(o.intersectionTarget.min),this._converter.toVec3(o.intersectionTarget.max)))),!o.format||o.format==="text"){if(!o.data.text){this._logger.warn("HTMLElementAnchorEngine.load: The text property for an Anchor element is missing.");return}const p=o.data,g=this._inputValidator.sanitize(p.text);n.data.push(new fG.HTMLElementAnchorTextData({location:this._converter.toVec3(o.location),data:{color:p.color||"#000000",text:g,hidden:p.hidden,textAlign:p.textAlign,position:l},hideable:o.hideable,viewports:o.viewports,intersectionTarget:d}))}else if(o.format==="image"){if(!o.data.src||!o.data.width||!o.data.height||!o.data.alt){this._logger.warn("HTMLElementAnchorEngine.load: One of the specified Anchor elements did not have all necessary properties.");return}const p=o.data;n.data.push(new fG.HTMLElementAnchorImageData({location:this._converter.toVec3(o.location),data:{alt:p.alt,height:typeof p.height=="string"?+p.height:p.height,width:typeof p.width=="string"?+p.width:p.width,src:p.src,hidden:p.hidden,position:l},hideable:o.hideable,viewports:o.viewports,intersectionTarget:d}))}this._logger.warn(`HTMLElementAnchorEngine.load: The Anchor does not have a recognized format: ${o.format}`)}),n}catch{throw new cC.ShapeDiverViewerDataProcessingError("HTMLElementAnchorEngine.load: Loading of anchors failed.")}})}}gz.HTMLElementAnchorEngine=kvt;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.HTMLElementAnchorEngine=void 0;const e=gz;Object.defineProperty(t,"HTMLElementAnchorEngine",{enumerable:!0,get:function(){return e.HTMLElementAnchorEngine}})})(VAe);var Cvt=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty(pz,"__esModule",{value:!0});pz.DataEngine=void 0;const r0=Gi,Pvt=W6,Rvt=vx,Dvt=FAe,Ovt=gK,sce=dr,au=Mn,Ivt=VAe,Nvt=Cr;class Lvt{constructor(){this._geometryEngine=Pvt.GeometryEngine.instance,this._htmlElementAnchorEngine=Ivt.HTMLElementAnchorEngine.instance,this._eventEngine=au.EventEngine.instance,this._materialEngine=Rvt.MaterialEngine.instance,this._sdtfEngine=Dvt.SDTFEngine.instance,this._tag3dEngine=Ovt.Tag3dEngine.instance,this._uuidGenerator=au.UuidGenerator.instance}static get instance(){return this._instance||(this._instance=new this)}loadContent(e,n,i){return Cvt(this,void 0,void 0,function*(){if(!e||e&&!e.format)throw new au.ShapeDiverViewerDataProcessingError("DataEngine cannot load content.");i=i||this._uuidGenerator.create();let o;e.format==="glb"||e.format==="gltf"?o=yield this._geometryEngine.loadContent(e,i):e.format==="material"?(this._eventEngine.emitEvent(au.EVENTTYPE.TASK.TASK_START,{type:r0.TASK_TYPE.MATERIAL_CONTENT_LOADING,id:i,progress:0,status:"Loading material content."}),o=yield this._materialEngine.loadContent(e),this._eventEngine.emitEvent(au.EVENTTYPE.TASK.TASK_END,{type:r0.TASK_TYPE.MATERIAL_CONTENT_LOADING,id:i,progress:1,status:"MATERIAL content loaded."})):e.format==="tag2d"||e.format==="anchor"?(this._eventEngine.emitEvent(au.EVENTTYPE.TASK.TASK_START,{type:r0.TASK_TYPE.TAG_CONTENT_LOADING,id:i,progress:0,status:"Loading tag content."}),o=yield this._htmlElementAnchorEngine.loadContent(e),this._eventEngine.emitEvent(au.EVENTTYPE.TASK.TASK_END,{type:r0.TASK_TYPE.TAG_CONTENT_LOADING,id:i,progress:1,status:"Tag content loaded."})):e.format==="tag3d"?(this._eventEngine.emitEvent(au.EVENTTYPE.TASK.TASK_START,{type:r0.TASK_TYPE.TAG_CONTENT_LOADING,id:i,progress:0,status:"Loading tag content."}),o=yield this._tag3dEngine.loadContent(e),this._eventEngine.emitEvent(au.EVENTTYPE.TASK.TASK_END,{type:r0.TASK_TYPE.TAG_CONTENT_LOADING,id:i,progress:1,status:"Tag content loaded."})):e.format==="sdtf"?(this._eventEngine.emitEvent(au.EVENTTYPE.TASK.TASK_START,{type:r0.TASK_TYPE.SDTF_CONTENT_LOADING,id:i,progress:0,status:"Loading sdTF content."}),o=yield this._sdtfEngine.loadContent(e,n),this._eventEngine.emitEvent(au.EVENTTYPE.TASK.TASK_END,{type:r0.TASK_TYPE.SDTF_CONTENT_LOADING,id:i,progress:1,status:"SdTF content loaded."})):(this._eventEngine.emitEvent(au.EVENTTYPE.TASK.TASK_START,{type:r0.TASK_TYPE.CUSTOM_CONTENT_LOADING,id:i,progress:0,status:"Loading custom content."}),o=new sce.TreeNode("custom"),o.data.push(new r0.CustomData(Object.assign({},e))),this._eventEngine.emitEvent(au.EVENTTYPE.TASK.TASK_END,{type:r0.TASK_TYPE.CUSTOM_CONTENT_LOADING,id:i,progress:1,status:"Custom content loaded."}));const l=new sce.TreeNode("transformation");if(e.transformations&&Array.isArray(e.transformations))for(let d=0;d<e.transformations.length;d++){const p=e.transformations[d];if(Array.isArray(p)&&p.length===16){const g=o.clone();g.transformations=[{id:"content_"+d,matrix:Nvt.mat4.fromValues(p[0],p[1],p[2],p[3],p[4],p[5],p[6],p[7],p[8],p[9],p[10],p[11],p[12],p[13],p[14],p[15])}].concat(o.transformations),l.updateVersion(),l.addChild(g)}}else l.addChild(o);return l})}}pz.DataEngine=Lvt;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.DataEngine=void 0;const e=pz;Object.defineProperty(t,"DataEngine",{enumerable:!0,get:function(){return e.DataEngine}})})(hz);var zvt=X&&X.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,o)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),Bvt=X&&X.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Uvt=X&&X.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&zvt(e,t,n);return Bvt(e,t),e},oce=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})};Object.defineProperty(dz,"__esModule",{value:!0});dz.OutputLoader=void 0;const ace=Gi,V1=Mn,lce=dr,Fvt=Yx,cce=qx,uce=Xx;class Vvt{constructor(e){this._sessionEngine=e,this._eventEngine=V1.EventEngine.instance,this._lastOutputNodes={},this._loadedOutputNodes={},this._performanceEvaluator=V1.PerformanceEvaluator.instance,this._reloadSdtf=!1,this._loadingPromise=this.loadDataEngine().then(()=>{this._loadingPromise=!0}).catch(()=>{this._loadingPromise=!1})}set reloadSdtf(e){this._reloadSdtf=e}getCurrentOutputVersions(){const e={};for(const n in this._lastOutputNodes)e[n]=Object.keys(this._lastOutputNodes[n])[0];return e}loadDataEngine(){return oce(this,void 0,void 0,function*(){try{const e=yield Promise.resolve().then(()=>Uvt(hz));this._dataEngine=e.DataEngine.instance}catch(e){console.error("Data engine not available",e)}})}loadOutputs(e,n,i,o,l=!0){var d;return oce(this,void 0,void 0,function*(){typeof this._loadingPromise!="boolean"&&(yield this._loadingPromise),this._performanceEvaluator.startSection("outputLoading");const p=new uce.SessionTreeNode(e),g={},v={},_=[],b=[];let w=0;const E={},S=Object.keys(n),M=x=>{const C=x;if(S.find(P=>C.id.startsWith(P))){E[C.id]=C.progress;let P=0;Object.values(E).forEach(B=>{P+=B});const O=(o.progressRange.max-o.progressRange.min)*(P/S.length)+o.progressRange.min,L={type:o.type,id:o.eventId,progress:O,data:o.data,status:"Output content loading progress."};this._eventEngine.emitEvent(V1.EVENTTYPE.TASK.TASK_PROCESS,L)}},k=[];k.push(this._eventEngine.addListener(V1.EVENTTYPE.TASK.TASK_START,M)),k.push(this._eventEngine.addListener(V1.EVENTTYPE.TASK.TASK_PROCESS,M)),k.push(this._eventEngine.addListener(V1.EVENTTYPE.TASK.TASK_CANCEL,M)),k.push(this._eventEngine.addListener(V1.EVENTTYPE.TASK.TASK_END,M));for(const x in n){if(v[x]={version:n[x].version,contentFormat:n[x].content?n[x].content.map(C=>C.format):[]},g[x]={},this._loadedOutputNodes[x]||(this._loadedOutputNodes[x]={}),this._reloadSdtf&&n[x].content){const C=(d=n[x].content)===null||d===void 0?void 0:d.filter(P=>P.format==="sdtf");C&&C.length>0&&delete this._loadedOutputNodes[x][v[x].version]}if(i[x])g[x][v[x].version]=this._lastOutputNodes[x][v[x].version],E[x]=1;else if(n[x].delay)w=Math.max(w,n[x].delay);else if(this._loadedOutputNodes[x][v[x].version])g[x][v[x].version]=this._loadedOutputNodes[x][v[x].version],E[x]=1;else if(g[x][v[x].version]=new uce.SessionTreeNode(x),g[x][v[x].version].data.push(new cce.SessionOutputData(n[x])),n[x].content)for(let C=0,P=n[x].content.length;C<P;C++)n[x].content[C].format==="sdtf"&&!this._sessionEngine.loadSdtf||(this._dataEngine&&_.push(this._dataEngine.loadContent(n[x].content[C],this._sessionEngine.jwtToken,x+"_"+v[x].version+"_"+C)),b.push(g[x][v[x].version]))}if(w&&l)throw new Fvt.OutputDelayException(w);yield Promise.all(_),k.forEach(x=>this._eventEngine.removeListener(x));for(let x=0;x<_.length;x++)b[x].addChild(yield _[x]);for(const x in v)g[x][v[x].version]&&p.addChild(g[x][v[x].version]);for(const x in v)g[x][v[x].version]&&(this._loadedOutputNodes[x]={},this._loadedOutputNodes[x][v[x].version]=g[x][v[x].version],this._lastOutputNodes[x]={},this._lastOutputNodes[x][v[x].version]=g[x][v[x].version]);for(const x in v)if(g[x][v[x].version]&&g[x][v[x].version].children.length>1){for(let C=0,P=v[x].contentFormat.length;C<P;C++)if(v[x].contentFormat[C]==="sdtf"&&this._sessionEngine.loadSdtf===!0){this.mergeContentNodes(g[x][v[x].version]);break}}return this.assignMaterials(p),this._performanceEvaluator.endSection("outputLoading"),p})}assignMaterials(e){const n=(o,l)=>{for(let d=0;d<o.data.length;d++)if(o.data[d]instanceof ace.GeometryData){const p=o.data[d],g=p.material;(g===null||g.materialOutput===!0)&&(p.material=l)}for(let d=0;d<o.children.length;d++){const p=o.children[d];p&&n(p,l)}},i=(o,l=[])=>{for(let d=0;d<o.data.length;d++)if(o.data[d]instanceof ace.AbstractMaterialData){const p=o.data[d];p.materialOutput=!0,l.push(p)}for(let d=0;d<o.children.length;d++){const p=o.children[d];p&&l.push(...i(p))}return l};for(let o=0;o<e.children.length;o++){const l=e.children[o];if(l)for(let d=0;d<l.data.length;d++){if(!(l.data[d]instanceof cce.SessionOutputData))continue;const p=l.data[d];if(p.responseOutput.material){let g=[];for(let _=0;_<e.children.length;_++){const b=e.children[_];b&&b.name===p.responseOutput.material&&(g=b.children)}const v=l.children;if(g.length>=v.length)for(let _=0;_<v.length;_++)n(v[_],i(g[_])[0]);else if(g.length>=1)for(let _=0;_<v.length;_++)n(v[_],i(g[0])[0])}else{const g=p.responseOutput.content;if(g===void 0)continue;const v=[],_=[];for(let b=0;b<g.length;b++)g[b].format==="material"?l.children[b]&&v.push(l.children[b]):l.children[b]&&_.push(l.children[b]);if(v.length>=_.length)for(let b=0;b<_.length;b++)n(_[b],i(v[b])[0]);else if(v.length>=1)for(let b=0;b<_.length;b++)n(_[b],i(v[0])[0])}}}}mergeContentNodes(e){if(!(e.children.length>1))return;const n=[];for(;e.children.length>0;)n.push(...e.children[0].children),e.removeChild(e.children[0]);const i=(l,d)=>{for(let p=0;p<l.data.length;p++)d.data.push(l.data[p]);for(let p=0;p<l.children.length;p++){let g;for(let v=0;v<d.children.length;v++)if(l.children[p].name===d.children[v].name){g=d.children[v];break}g||(g=new lce.TreeNode(l.children[p].name),d.addChild(g)),i(l.children[p],g)}},o=new lce.TreeNode("content_array");e.addChild(o);for(let l=0;l<n.length;l++)i(n[l],o)}}dz.OutputLoader=Vvt;var Vi=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})},xo=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},wh=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},v2,ld,Ch,sg,By;Object.defineProperty(fz,"__esModule",{value:!0});fz.SessionEngine=void 0;const d2=a9,lu=I0,_r=Mn,Gvt=jx,uC=Hx,$s=Gi,fC=dr,dG=$x,fce=Yx,jvt=dz,dC=SA,hG=Wx,bc=Xx;class Hvt{constructor(e){this._eventEngine=_r.EventEngine.instance,this._exports={},this._httpClient=_r.HttpClient.instance,this._logger=_r.Logger.instance,this._outputs={},this._outputsFreeze={},this._parameterValues={},this._parameters={},this._performanceEvaluator=_r.PerformanceEvaluator.instance,this._sceneTree=fC.Tree.instance,this._sessionEngineId=_r.UuidGenerator.instance.create(),this._settingsEngine=new _r.SettingsEngine,this._stateEngine=_r.StateEngine.instance,this._uuidGenerator=_r.UuidGenerator.instance,v2.set(this,[]),ld.set(this,void 0),Ch.set(this,[]),sg.set(this,!1),By.set(this,[]),this._allowOutputLoading=!0,this._automaticSceneUpdate=!0,this._closeOnFailure=()=>Vi(this,void 0,void 0,function*(){}),this._closed=!1,this._customizeOnParameterChange=!1,this._dataCache={},this._excludeViewports=[],this._headers={"X-ShapeDiver-Origin":_r.SystemInfo.instance.origin,"X-ShapeDiver-SessionEngineId":this._sessionEngineId,"X-ShapeDiver-BuildVersion":"","X-ShapeDiver-BuildDate":""},this._initialized=!1,this._loadSdtf=!1,this._retryCounter=0,this._updateCallback=null,this._viewerSettingsVersion=d2.latestVersion,this._viewerSettingsVersionBackend=d2.latestVersion,this._id=e.id,this._node=new fC.TreeNode(e.id),this._guid=e.guid,this._ticket=e.ticket,this._modelViewUrl=e.modelViewUrl,this._excludeViewports=e.excludeViewports||[],this._jwtToken=e.jwtToken,this._allowOutputLoading=e.allowOutputLoading,this._loadSdtf=e.loadSdtf,this._headers["X-ShapeDiver-BuildDate"]=e.buildDate,this._headers["X-ShapeDiver-BuildVersion"]=e.buildVersion,this._outputLoader=new jvt.OutputLoader(this);try{this._sdk=(0,lu.create)(this._modelViewUrl,this._jwtToken),this._sdk.setConfigurationValue(lu.ShapeDiverSdkConfigType.REQUEST_HEADERS,this._headers)}catch(n){throw this._httpClient.convertError(n)}}get automaticSceneUpdate(){return this._automaticSceneUpdate}set automaticSceneUpdate(e){this._automaticSceneUpdate=e,e&&this._closed===!1?this.addToSceneTree(this._node):this.removeFromSceneTree(this._node)}get canUploadGLTF(){try{return this.checkAvailability("gltf-upload"),!0}catch{return!1}}get customizeOnParameterChange(){return this._customizeOnParameterChange}set customizeOnParameterChange(e){this._customizeOnParameterChange=e}get excludeViewports(){return this._excludeViewports}set excludeViewports(e){this._excludeViewports=JSON.parse(JSON.stringify(e)),this._node.excludeViewports=JSON.parse(JSON.stringify(e))}get exports(){return this._exports}get guid(){return this._guid}get id(){return this._id}get initialized(){return this._initialized}get jwtToken(){return this._jwtToken}get loadSdtf(){return this._loadSdtf}set loadSdtf(e){this._loadSdtf=e,this._initialized===!0&&this._loadSdtf===!0&&Vi(this,void 0,void 0,function*(){this._outputLoader.reloadSdtf=!0,yield this.updateOutputs(),this._outputLoader.reloadSdtf=!1,this._eventEngine.emitEvent(_r.EVENTTYPE.SESSION.SESSION_SDTF_DELAYED_LOADED,{sessionId:this.id})})}get modelViewUrl(){return this._modelViewUrl}get node(){return this._node}get outputs(){return this._outputs}get outputsFreeze(){return this._outputsFreeze}get parameterValues(){return this._parameterValues}get parameters(){return this._parameters}get refreshJwtToken(){return this._refreshJwtToken}set refreshJwtToken(e){this._refreshJwtToken=e}get settingsEngine(){return this._settingsEngine}get ticket(){return this._ticket}get updateCallback(){return this._updateCallback}set updateCallback(e){this._updateCallback=e}get viewerSettings(){return this._viewerSettings}applySettings(e,n){n=n||{},n.session===void 0&&(n.session={parameter:{displayname:!1,order:!1,hidden:!1},export:{displayname:!1,order:!1,hidden:!1}}),n.session.parameter===void 0&&(n.session.parameter={displayname:!1,order:!1,hidden:!1,value:!1}),n.session.export===void 0&&(n.session.export={displayname:!1,order:!1,hidden:!1}),n.viewport===void 0&&(n.viewport={ar:!1,scene:!1,camera:!1,light:!1,environment:!1,general:!1,postprocessing:!1});let i;if(e.viewer!==void 0)i=e.viewer.config;else throw new _r.ShapeDiverViewerSettingsError("Session.applySettings: No config object available.");try{(0,d2.validate)(i)}catch{throw new _r.ShapeDiverViewerSettingsError("Session.applySettings: Was not able to validate config object.")}const o=(0,d2.convert)(i,d2.latestVersion),l={};if((n.session.export.displayname||n.session.export.order||n.session.export.hidden)&&e.exports)for(const p in e.exports)e.exports[p].uid!==void 0&&(l[e.exports[p].uid]=p);const d=this._settingsEngine.settings;if(n.session.parameter.displayname||n.session.parameter.order||n.session.parameter.hidden||n.session.parameter.value)for(const p in this.parameters)o.session[p]&&(n.session.parameter.displayname&&(this.parameters[p].displayname=o.session[p].displayname),n.session.parameter.order&&(this.parameters[p].order=o.session[p].order),n.session.parameter.hidden&&(this.parameters[p].hidden=o.session[p].hidden||!1)),e.parameters&&e.parameters[p]&&!(this.parameters[p]instanceof uC.FileParameter||this.parameters[p].type.startsWith("s"))&&n.session.parameter.value&&(this.parameters[p].value=e.parameters[p].defval!==void 0?e.parameters[p].defval:this.parameters[p].value);if(n.session.export.displayname||n.session.export.order||n.session.export.hidden)for(const p in this.exports){let g="";if(o.session[p])g=p;else{const v=this.exports[p].uid;if(!v||!l[v])continue;g=l[v]}o.session[g]&&(n.session.export.displayname&&(this.exports[p].displayname=o.session[g].displayname),n.session.export.order&&(this.exports[p].order=o.session[g].order),n.session.export.hidden&&(this.exports[p].hidden=o.session[g].hidden||!1))}n.viewport.ar&&(d.ar=o.ar,d.general.transformation=o.general.transformation),n.viewport.camera&&(d.camera=o.camera),n.viewport.light&&(d.light=o.light),n.viewport.scene&&(d.environmentGeometry.gridColor=o.environmentGeometry.gridColor,d.environmentGeometry.gridVisibility=o.environmentGeometry.gridVisibility,d.environmentGeometry.groundPlaneColor=o.environmentGeometry.groundPlaneColor,d.environmentGeometry.groundPlaneVisibility=o.environmentGeometry.groundPlaneVisibility,d.environmentGeometry.groundPlaneShadowColor=o.environmentGeometry.groundPlaneShadowColor,d.environmentGeometry.groundPlaneShadowVisibility=o.environmentGeometry.groundPlaneShadowVisibility,d.rendering.shadows=o.rendering.shadows,d.rendering.softShadows=o.rendering.softShadows,d.rendering.automaticColorAdjustment=o.rendering.automaticColorAdjustment,d.rendering.textureEncoding=o.rendering.textureEncoding,d.rendering.outputEncoding=o.rendering.outputEncoding,d.rendering.physicallyCorrectLights=o.rendering.physicallyCorrectLights,d.rendering.toneMapping=o.rendering.toneMapping,d.rendering.toneMappingExposure=o.rendering.toneMappingExposure),n.viewport.general&&(d.general.defaultMaterialColor=o.general.defaultMaterialColor,d.general.commitParameters=o.general.commitParameters,d.general.pointSize=o.general.pointSize),n.viewport.postprocessing&&(d.postprocessing=o.postprocessing),n.viewport.environment&&(d.environment.clearAlpha=o.environment.clearAlpha,d.environment.clearColor=o.environment.clearColor,d.environment.map=o.environment.map,d.environment.mapAsBackground=o.environment.mapAsBackground,d.environment.rotation=o.environment.rotation,d.environment.blurriness=o.environment.blurriness,d.environment.intensity=o.environment.intensity)}canGoBack(){return xo(this,Ch,"f").length>1}canGoForward(){return xo(this,By,"f").length>0}cancelCustomization(){xo(this,ld,"f")&&this.removeBusyMode(xo(this,ld,"f"));for(const e of xo(this,v2,"f"))for(const n in this._stateEngine.viewportEngines)this._stateEngine.viewportEngines[n].busy.includes(e)&&this._stateEngine.viewportEngines[n].busy.splice(this._stateEngine.viewportEngines[n].busy.indexOf(e),1);wh(this,v2,[],"f"),wh(this,ld,void 0,"f")}close(e=!1){return Vi(this,void 0,void 0,function*(){this.checkAvailability("close");try{this._httpClient.removeDataLoading(this._sessionId),yield this._sdk.session.close(this._sessionId),this._automaticSceneUpdate&&this.removeFromSceneTree(this._node),this._closed=!0}catch(n){return yield this.handleError(n,e),yield this.close(!0)}})}customize(e=!1,n=!1){return Vi(this,void 0,void 0,function*(){const i=this._uuidGenerator.create(),o=this._uuidGenerator.create();try{if(e===!1){let x=!1;for(const C in this.parameters)this.parameters[C].sessionValue!==this.parameters[C].value&&(x=!0);if(x===!1)return this.node}const l={type:$s.TASK_TYPE.SESSION_CUSTOMIZATION,id:i,progress:0,data:{sessionId:this.id},status:"Customizing session"};this._eventEngine.emitEvent(_r.EVENTTYPE.TASK.TASK_START,l);const d=this.node;wh(this,ld,o,"f"),this._logger.debugLow(`Session(${this.id}).customize: Customizing session.`),this.addBusyMode(o);const p={type:$s.TASK_TYPE.SESSION_CUSTOMIZATION,id:i,progress:.1,data:{sessionId:this.id},status:"Uploading file parameters"};this._eventEngine.emitEvent(_r.EVENTTYPE.TASK.TASK_PROCESS,p),yield this.uploadFileParameters();const g=this.cancelProcess(o,i,$s.TASK_TYPE.SESSION_CUSTOMIZATION,1,{sessionId:this.id});if(g)return g;const v={};for(const x in this.parameters)v[x]={value:this.parameters[x].value,valueString:this.parameters[x].stringify()};for(const x in this.parameters)this.parameterValues[x]=v[x].valueString;this._logger.info(`Session(${this.id}).customize: Customizing session with parameters ${JSON.stringify(this.parameterValues)}.`);const _={type:$s.TASK_TYPE.SESSION_CUSTOMIZATION,id:i,progress:.1,data:{sessionId:this.id},status:"Sending customization request"};this._eventEngine.emitEvent(_r.EVENTTYPE.TASK.TASK_PROCESS,_);const b=this._outputLoader.getCurrentOutputVersions(),w=yield this.customizeInternal(()=>xo(this,ld,"f")!==o,{eventId:i,type:$s.TASK_TYPE.SESSION_CUSTOMIZATION,progressRange:{min:.1,max:.9},data:{sessionId:this.id}}),E=this.cancelProcess(o,i,$s.TASK_TYPE.SESSION_CUSTOMIZATION,1,{sessionId:this.id});if(E)return E;const S=this._outputLoader.getCurrentOutputVersions(),M={type:$s.TASK_TYPE.SESSION_CUSTOMIZATION,id:i,progress:.9,data:{sessionId:this.id},status:"Updating scene"};if(this._eventEngine.emitEvent(_r.EVENTTYPE.TASK.TASK_PROCESS,M),n===!1){for(const C in this.outputs)b[C]!==S[C]&&this._eventEngine.emitEvent(_r.EVENTTYPE.OUTPUT.OUTPUT_UPDATED,{outputId:C,outputVersion:S[C],newNode:w.children.find(P=>P.name===C),oldNode:d.children.find(P=>P.name===C)});yield this.waitForUpdateCallbacks(S,b,w,d);const x=this.cancelProcess(o,i,$s.TASK_TYPE.SESSION_CUSTOMIZATION,1,{sessionId:this.id});if(x)return x}xo(this,sg,"f")||(xo(this,Ch,"f").push(v),wh(this,By,[],"f")),this.automaticSceneUpdate&&this.removeFromSceneTree(this.node),this._node=w,this.automaticSceneUpdate&&this._closed===!1&&this.addToSceneTree(this.node),this._logger.debug(`Session(${this.id}).customize: Customization request finished, updating geometry.`);for(const x in this.parameters)this.parameters[x].sessionValue=v[x].value;for(const x in this.outputs)this.outputs[x].updateOutput(w.children.find(C=>C.name===x),d.children.find(C=>C.name===x));for(const x in this.exports)this.exports[x].updateExport();this._warningCreator(),this.node.excludeViewports=JSON.parse(JSON.stringify(this._excludeViewports)),this.removeBusyMode(o),this._logger.debug(`Session(${this.id}).customize: Session customized.`),this._eventEngine.emitEvent(_r.EVENTTYPE.SESSION.SESSION_CUSTOMIZED,{sessionId:this.id});const k={type:$s.TASK_TYPE.SESSION_CUSTOMIZATION,id:i,progress:1,data:{sessionId:this.id},status:"Session customized"};if(this._eventEngine.emitEvent(_r.EVENTTYPE.TASK.TASK_END,k),n){for(const C in this._stateEngine.viewportEngines)this.excludeViewports.includes(this._stateEngine.viewportEngines[C].id)||this._stateEngine.viewportEngines[C].update(`SessionEngine(${this.id}).customize`);for(const C in this.outputs)b[C]!==S[C]&&this._eventEngine.emitEvent(_r.EVENTTYPE.OUTPUT.OUTPUT_UPDATED,{outputId:C,outputVersion:S[C],newNode:w.children.find(P=>P.name===C),oldNode:d.children.find(P=>P.name===C)});yield this.waitForUpdateCallbacks(S,b,w,d);const x=this.cancelProcess(o,i,$s.TASK_TYPE.SESSION_CUSTOMIZATION,1,{sessionId:this.id});if(x)return x}return n||setTimeout(()=>{for(const x in this._stateEngine.viewportEngines)this.excludeViewports.includes(this._stateEngine.viewportEngines[x].id)||this._stateEngine.viewportEngines[x].update(`SessionEngine(${this.id}).customize`)},0),this.node}catch(l){const d={type:$s.TASK_TYPE.SESSION_CUSTOMIZATION,id:i,progress:1,data:{sessionId:this.id},status:"Session customization failed"};throw this._eventEngine.emitEvent(_r.EVENTTYPE.TASK.TASK_CANCEL,d),this.removeBusyMode(o),this._httpClient.convertError(l)}})}customizeParallel(e,n=!0){return Vi(this,void 0,void 0,function*(){const i=this._uuidGenerator.create(),o={type:$s.TASK_TYPE.SESSION_CUSTOMIZATION,id:i,progress:0,data:{sessionId:this.id},status:"Customizing session"};this._eventEngine.emitEvent(_r.EVENTTYPE.TASK.TASK_START,o),yield this.uploadFileParameters(e);const l={};for(const g in this.parameters)l[g]=(" "+this.parameters[g].stringify(e[g])).slice(1);const d=yield this.customizeSession(l,()=>!1,{eventId:i,type:$s.TASK_TYPE.SESSION_CUSTOMIZATION,progressRange:{min:0,max:1},data:{sessionId:this.id}},!0,n);d instanceof bc.SessionTreeNode&&(d.excludeViewports=JSON.parse(JSON.stringify(this._excludeViewports)));const p={type:$s.TASK_TYPE.SESSION_CUSTOMIZATION,id:i,progress:1,data:{sessionId:this.id},status:"Session customized"};return this._eventEngine.emitEvent(_r.EVENTTYPE.TASK.TASK_END,p),d})}getFileInfo(e,n){return Vi(this,void 0,void 0,function*(){this.checkAvailability();try{return yield this._sdk.file.info(this._sessionId,e,n)}catch(i){throw this._httpClient.convertError(i)}})}goBack(){return Vi(this,void 0,void 0,function*(){if(!this.canGoBack())return this._logger.debug(`Session(${this.id}).goBack: Cannot go further back.`),new fC.TreeNode;const e=xo(this,Ch,"f").pop(),n=xo(this,Ch,"f")[xo(this,Ch,"f").length-1];for(const o in n)this.parameters[o].value=n[o].value;wh(this,sg,!0,"f");const i=yield this.customize();return wh(this,sg,!1,"f"),xo(this,By,"f").push(e),i})}goForward(){return Vi(this,void 0,void 0,function*(){if(!this.canGoForward())return this._logger.debug(`Session(${this.id}).goForward: Cannot go further forward.`),new fC.TreeNode;const e=xo(this,By,"f").pop();for(const i in e)this.parameters[i].value=e[i].value;wh(this,sg,!0,"f");const n=yield this.customize();return wh(this,sg,!1,"f"),xo(this,Ch,"f").push(e),n})}init(e,n=!1){var i,o;return Vi(this,void 0,void 0,function*(){if(this._initialized===!0)throw new _r.ShapeDiverViewerSessionError("Session.init: Session already initialized.");try{this._performanceEvaluator.startSection("sessionResponse");const l={};for(const d in e)l[d]=(" "+e[d]).slice(1);if(this._ticket)this._responseDto=yield this._sdk.session.init(this._ticket,l);else if(this._guid)this._responseDto=yield this._sdk.session.initForModel(this._guid,l);else throw new _r.ShapeDiverViewerSessionError("Session.init: Initialization of session failed. Neither a ticket nor a guid are available.");if(this._performanceEvaluator.endSection("sessionResponse"),this._viewerSettings=(i=this._responseDto.viewer)===null||i===void 0?void 0:i.config,this._viewerSettingsVersionBackend=this._responseDto.viewerSettingsVersion||d2.latestVersion,this._sessionId=this._responseDto.sessionId,this._modelId=(o=this._responseDto.model)===null||o===void 0?void 0:o.id,this._httpClient.addDataLoading(this._sessionId,{getAsset:this._sdk.asset.getAsset.bind(this._sdk.asset),downloadTexture:this._sdk.asset.downloadImage.bind(this._sdk.asset)}),this._settingsEngine.loadSettings(this._viewerSettings),!this._sessionId)throw new _r.ShapeDiverViewerSessionError("Session.init: Initialization of session failed. ResponseDto did not have a sessionId.");if(!this._modelId)throw new _r.ShapeDiverViewerSessionError("Session.init: Initialization of session failed. ResponseDto did not have a model.id.");this.updateResponseDto(this._responseDto,l),this._initialized=!0}catch(l){return yield this.handleError(l,n),yield this.init(e,!0)}})}loadCachedOutputsParallel(e,n,i=!1){var o;return Vi(this,void 0,void 0,function*(){this.checkAvailability();const l=n?n.eventId:this._uuidGenerator.create(),d=n?n.type:$s.TASK_TYPE.SESSION_OUTPUTS_LOADING,p=n?n.data:{sessionId:this.id};n=n||{eventId:l,type:d,progressRange:{min:0,max:1},data:p};try{if(!n){const E={type:d,id:l,progress:0,data:p,status:"Loading cached outputs"};this._eventEngine.emitEvent(_r.EVENTTYPE.TASK.TASK_START,E)}const g=yield this._sdk.output.getCache(this._sessionId,e),v={};for(const E in g.outputs)g.outputs[E].id=E,v[E]=new dG.Output(g.outputs[E],this);const _=yield this._outputLoader.loadOutputs(((o=this._responseDto.model)===null||o===void 0?void 0:o.name)||"model",v,{},n,!1),b={type:d,id:l,progress:1,data:p,status:"Loaded cached outputs"};this._eventEngine.emitEvent(_r.EVENTTYPE.TASK.TASK_END,b);const w={};for(const E in e)w[E]=_.children.find(S=>S.name===E);return w}catch(g){return yield this.handleError(g,i),yield this.loadCachedOutputsParallel(e,n,!0)}})}loadOutputs(e=()=>!1,n,i=!1){var o;return Vi(this,void 0,void 0,function*(){this.checkAvailability();const l=Object.assign({},this._outputs),d=Object.assign({},this._outputsFreeze);try{const p=yield this._outputLoader.loadOutputs(((o=this._responseDto.model)===null||o===void 0?void 0:o.name)||"model",l,d,n);return p.data.push(new hG.SessionData(this._responseDto)),e()||(p.excludeViewports=JSON.parse(JSON.stringify(this._excludeViewports))),p}catch(p){if(p instanceof fce.OutputDelayException)yield this.timeout(p.delay);else return yield this.handleError(p,i),e()?new bc.SessionTreeNode:yield this.loadOutputs(e,n,!0);if(e())return new bc.SessionTreeNode;const g={};for(const v in l)g[v]=l[v].version;try{const v=yield this._sdk.output.getCache(this._sessionId,g);return e()?new bc.SessionTreeNode:(this.updateResponseDto(v),yield this.loadOutputs(e,n))}catch(v){return yield this.handleError(v,i),e()?new bc.SessionTreeNode:yield this.loadOutputs(e,n,!0)}}})}loadOutputsParallel(e,n=()=>!1,i,o=!1){var l;return Vi(this,void 0,void 0,function*(){this.checkAvailability();const d={},p={};for(const g in e.outputs)e.outputs[g].id=g,this.outputsFreeze[g]===void 0&&(p[g]=!1),d[g]=new dG.Output(e.outputs[g],this);try{const g=yield this._outputLoader.loadOutputs(((l=this._responseDto.model)===null||l===void 0?void 0:l.name)||"model",d,p,i);return g.data.push(new hG.SessionData(e)),g}catch(g){if(g instanceof fce.OutputDelayException)yield this.timeout(g.delay);else return yield this.handleError(g,o),n()?new bc.SessionTreeNode:yield this.loadOutputsParallel(e,n,i,!0);if(n())return new bc.SessionTreeNode;const v={};for(const _ in d)v[_]=d[_].version;try{const _=yield this._sdk.output.getCache(this._sessionId,v);return n()?new bc.SessionTreeNode:(this.updateResponseDto(_),yield this.loadOutputsParallel(_,n,i))}catch(_){return yield this.handleError(_,o),n()?new bc.SessionTreeNode:yield this.loadOutputsParallel(e,n,i,!0)}}})}requestExport(e,n,i,o=!1){return Vi(this,void 0,void 0,function*(){this.checkAvailability("export");try{yield this.uploadFileParameters(n);const l=this.cleanExportParameters(n),d=yield this._sdk.utils.submitAndWaitForExport(this._sdk,this._sessionId,{exports:{id:e},parameters:l},i);return this.updateResponseDto(d),this.exports[e]}catch(l){return yield this.handleError(l,o),yield this.requestExport(e,n,i,!0)}})}requestExports(e,n=!1,i,o=!1){return Vi(this,void 0,void 0,function*(){let l;this.checkAvailability("export");try{n===!0&&this._allowOutputLoading===!0&&e.outputs&&Object.keys(e.outputs).length>0&&(l=this._uuidGenerator.create(),this.addBusyMode(l)),yield this.uploadFileParameters(e.parameters);const d=this.cleanExportParameters(e.parameters),p=yield this._sdk.utils.submitAndWaitForExport(this._sdk,this._sessionId,{exports:e.exports,parameters:d,outputs:e.outputs,max_wait_time:e.max_wait_time},i);return this.updateResponseDto(p),n===!0&&this._allowOutputLoading===!0&&this.updateOutputs(),l&&this.removeBusyMode(l),p}catch(d){return l&&this.removeBusyMode(l),yield this.handleError(d,o),yield this.requestExports(e,n,i,!0)}})}resetSettings(e){if(!this._responseDto)throw new _r.ShapeDiverViewerSessionError("Session.resetSettings: responseDto not available.");return e=e||{},e.session===void 0&&(e.session={parameter:{displayname:!0,order:!0,hidden:!0},export:{displayname:!0,order:!0,hidden:!0}}),e.session.parameter===void 0&&(e.session.parameter={displayname:!0,order:!0,hidden:!0,value:!0}),e.session.export===void 0&&(e.session.export={displayname:!0,order:!0,hidden:!0}),e.viewport===void 0&&(e.viewport={ar:!0,scene:!0,camera:!0,light:!0,environment:!0,general:!0,postprocessing:!0}),this.applySettings(this._responseDto,e)}saveDefaultParameterValues(){return Vi(this,void 0,void 0,function*(){this._logger.debugLow(`Session(${this.id}).saveDefaultParameters: Saving default parameters.`);const e=yield this.saveDefaultParameters();if(e)this._logger.debug(`Session(${this.id}).saveDefaultParameters: Saved default parameters.`);else throw new _r.ShapeDiverViewerSessionError(`Session(${this.id}).saveDefaultParameters: Could not save default parameters.`);return e})}saveDefaultParameters(e=!1){return Vi(this,void 0,void 0,function*(){this.checkAvailability("defaultparam",!0);try{return yield this._sdk.model.setDefaultParams(this._modelId,this._parameterValues),!0}catch(n){return yield this.handleError(n,e),yield this.saveDefaultParameters(!0)}})}saveExportProperties(e,n=!1){return Vi(this,void 0,void 0,function*(){this.checkAvailability("export-definition",!0);try{return yield this._sdk.export.updateDefinitions(this._modelId,e),!0}catch(i){return yield this.handleError(i,n),yield this.saveExportProperties(e,!0)}})}saveOutputProperties(e,n=!1){return Vi(this,void 0,void 0,function*(){this.checkAvailability("output-definition",!0);try{return yield this._sdk.output.updateDefinitions(this._modelId,e),!0}catch(i){return yield this.handleError(i,n),yield this.saveOutputProperties(e,!0)}})}saveParameterProperties(e,n=!1){return Vi(this,void 0,void 0,function*(){this.checkAvailability("parameter-definition",!0);try{return yield this._sdk.model.updateParameterDefinitions(this._modelId,e),!0}catch(i){return yield this.handleError(i,n),yield this.saveParameterProperties(e,!0)}})}saveSettings(e,n=!1){return Vi(this,void 0,void 0,function*(){this.checkAvailability("configure",!0);try{(0,d2.validate)(e,this._viewerSettingsVersion),+this._viewerSettingsVersion>+this._viewerSettingsVersionBackend&&(e=(0,d2.convert)(e,this._viewerSettingsVersionBackend))}catch(i){throw new _r.ShapeDiverViewerSettingsError("Session.saveSettings: Settings could not be validated. "+i.message,i)}try{return yield this._sdk.model.updateConfig(this._modelId,e),!0}catch(i){return yield this.handleError(i,n),yield this.saveSettings(e,!0)}})}saveUiProperties(e=!0){return Vi(this,void 0,void 0,function*(){this._logger.debugLow(`Session(${this.id}).saveSessionProperties: Saving session properties.`),this._saveSessionSettings();let n={};for(const p in this.parameters)n[p]={displayname:this.parameters[p].displayname!==void 0?this.parameters[p].displayname:"",hidden:this.parameters[p].hidden!==void 0?this.parameters[p].hidden:!1,order:this.parameters[p].order!==void 0?this.parameters[p].order:0,tooltip:this.parameters[p].tooltip!==void 0?this.parameters[p].tooltip:""};const i=Object.values(n).length!==0?yield this.saveParameterProperties(n):!0;n={};for(const p in this.exports)n[p]={displayname:this.exports[p].displayname!==void 0?this.exports[p].displayname:"",hidden:this.exports[p].hidden!==void 0?this.exports[p].hidden:!1,order:this.exports[p].order!==void 0?this.exports[p].order:0,tooltip:this.exports[p].tooltip!==void 0?this.exports[p].tooltip:""};const o=Object.values(n).length!==0?yield this.saveExportProperties(n):!0;n={};for(const p in this.outputs)n[p]={displayname:this.outputs[p].displayname!==void 0?this.outputs[p].displayname:"",hidden:this.outputs[p].hidden!==void 0?this.outputs[p].hidden:!1,order:this.outputs[p].order!==void 0?this.outputs[p].order:0,tooltip:this.outputs[p].tooltip!==void 0?this.outputs[p].tooltip:""};const l=Object.values(n).length!==0?yield this.saveOutputProperties(n):!0,d=e?yield this.saveSettings(this._settingsEngine.settings):!0;return d&&i&&l&&o?this._logger.debug(`Session(${this.id}).saveSessionProperties: Saved session properties.`):this._logger.warn(`Session(${this.id}).saveSessionProperties: Could not save session properties.`),d&&i&&l&&o})}setJwtToken(e){return Vi(this,void 0,void 0,function*(){this.checkAvailability(),this._jwtToken=e;try{this._sdk.setConfigurationValue(lu.ShapeDiverSdkConfigType.JWT_TOKEN,e);const n=yield this._sdk.session.default(this._sessionId);this._responseDto&&(this._responseDto.actions=n.actions)}catch(n){throw this._httpClient.convertError(n)}})}updateOutputs(e,n=!1){return Vi(this,void 0,void 0,function*(){const i=e?e.eventId:this._uuidGenerator.create(),o=e?e.type:$s.TASK_TYPE.SESSION_OUTPUTS_UPDATE,l=e?e.data:{sessionId:this.id};if(!e){const S={type:o,id:i,progress:0,data:l,status:"Updating outputs"};this._eventEngine.emitEvent(_r.EVENTTYPE.TASK.TASK_START,S)}const d=this._uuidGenerator.create(),p=this.node;wh(this,ld,d,"f"),this._logger.debugLow(`Session(${this.id}).updateOutputs: Updating Outputs.`),this.addBusyMode(d);const g={type:o,id:i,progress:e?(e.progressRange.max-e.progressRange.min)*.1+e.progressRange.min:.1,data:l,status:"Loading outputs"};this._eventEngine.emitEvent(_r.EVENTTYPE.TASK.TASK_PROCESS,g);const v=this._outputLoader.getCurrentOutputVersions(),_=yield this.loadOutputs(()=>xo(this,ld,"f")!==d,{eventId:i,type:o,progressRange:{min:e?(e.progressRange.max-e.progressRange.min)*.1+e.progressRange.min:.1,max:e?(e.progressRange.max-e.progressRange.min)*.9+e.progressRange.min:.9},data:l}),b=this._outputLoader.getCurrentOutputVersions(),w={type:o,id:i,progress:e?(e.progressRange.max-e.progressRange.min)*.9+e.progressRange.min:.9,data:l,status:"Updating scene"};this._eventEngine.emitEvent(_r.EVENTTYPE.TASK.TASK_PROCESS,w);const E=this.cancelProcess(d,i,o,e?(e.progressRange.max-e.progressRange.min)*1+e.progressRange.min:1,l,_);if(E)return E;if(n===!1){for(const M in this.outputs)v[M]!==b[M]&&this._eventEngine.emitEvent(_r.EVENTTYPE.OUTPUT.OUTPUT_UPDATED,{outputId:M,outputVersion:b[M],newNode:_.children.find(k=>k.name===M),oldNode:p.children.find(k=>k.name===M)});yield this.waitForUpdateCallbacks(b,v,_,p);const S=this.cancelProcess(d,i,o,e?(e.progressRange.max-e.progressRange.min)*1+e.progressRange.min:1,l,_);if(S)return S}this.automaticSceneUpdate&&this.removeFromSceneTree(this.node),this._node=_,this.automaticSceneUpdate&&this._closed===!1&&this.addToSceneTree(this.node),this._logger.debug(`Session(${this.id}).updateOutputs: Updating outputs finished, updating geometry.`);for(const S in this.outputs)this.outputs[S].updateOutput(_.children.find(M=>M.name===S),p.children.find(M=>M.name===S));for(const S in this.exports)this.exports[S].updateExport();if(this._warningCreator(),this.node.excludeViewports=JSON.parse(JSON.stringify(this._excludeViewports)),this.removeBusyMode(d),this._logger.debug(`Session(${this.id}).updateOutputs: Updated outputs.`),!e){const S={type:o,id:i,progress:1,data:l,status:"Outputs updated"};this._eventEngine.emitEvent(_r.EVENTTYPE.TASK.TASK_END,S)}if(n){for(const M in this._stateEngine.viewportEngines)this.excludeViewports.includes(this._stateEngine.viewportEngines[M].id)||this._stateEngine.viewportEngines[M].update(`SessionEngine(${this.id}).updateOutputs`);for(const M in this.outputs)v[M]!==b[M]&&this._eventEngine.emitEvent(_r.EVENTTYPE.OUTPUT.OUTPUT_UPDATED,{outputId:M,outputVersion:b[M],newNode:_.children.find(k=>k.name===M),oldNode:p.children.find(k=>k.name===M)});yield this.waitForUpdateCallbacks(b,v,_,p);const S=this.cancelProcess(d,i,o,e?(e.progressRange.max-e.progressRange.min)*1+e.progressRange.min:1,l,_);if(S)return S}return this.node})}uploadFile(e,n,i,o=!1){return Vi(this,void 0,void 0,function*(){this.checkAvailability("file-upload");try{const l=yield this._sdk.file.requestUpload(this._sessionId,{[e]:{size:n.size,format:i}});if(l&&l.asset&&l.asset.file&&l.asset.file[e]){const d=l.asset.file[e],p=n.name===""?void 0:n.name;return yield this._sdk.utils.upload(d.href,yield n.arrayBuffer(),i,p),d.id}else throw new _r.ShapeDiverViewerSessionError("Session.uploadFile: Upload reply has not the required format.")}catch(l){return yield this.handleError(l,o),yield this.uploadFile(e,n,i,!0)}})}uploadFileParameters(e){return Vi(this,void 0,void 0,function*(){const n=e!==void 0?this.getFileParameterSet(e):void 0,i={};for(const o in this.parameters)this.parameters[o]instanceof uC.FileParameter&&(i[o]=yield this.parameters[o].upload(n?n[o]:void 0),e?(e[o]=i[o],e[o]===void 0&&this.parameters[o].value!==i[o]&&(this.parameters[o].value=i[o])):this.parameters[o].value!==i[o]&&(this.parameters[o].value=i[o]));return i})}uploadGLTF(e,n=lu.ShapeDiverRequestGltfUploadQueryConversion.NONE,i=!1){return Vi(this,void 0,void 0,function*(){this.checkAvailability("gltf-upload");try{const o=yield this._sdk.gltf.upload(this._sessionId,yield e.arrayBuffer(),"model/gltf-binary",n);if(!o||!o.gltf||!o.gltf.href)throw new _r.ShapeDiverViewerSessionError("Session.uploadGLTF: Upload reply has not the required format.");return o}catch(o){return yield this.handleError(o,i),yield this.uploadGLTF(e,n,!0)}})}_saveSessionSettings(){const e=this.parameters,n=this.exports,i={};for(const o in e)i[o]={order:e[o].order||0,displayname:e[o].displayname||"",hidden:e[o].hidden};for(const o in n)i[o]={order:n[o].order||0,displayname:n[o].displayname||"",hidden:n[o].hidden};this._settingsEngine.session=i}_warningCreator(){for(const e in this.outputs){let n="";this.outputs[e].msg&&(n+=`
	- ${this.outputs[e].msg}`),this.outputs[e].status_collect&&this.outputs[e].status_collect!==lu.ShapeDiverResponseModelComputationStatus.SUCCESS&&(n+=`
	- status_collect is ${this.outputs[e].status_collect}`),this.outputs[e].status_computation&&this.outputs[e].status_computation!==lu.ShapeDiverResponseModelComputationStatus.SUCCESS&&(n+=`
	- status_computation is ${this.outputs[e].status_computation}`),n&&this._logger.warn(`
Output(${e}):${n}`)}for(const e in this.exports){let n="";this.exports[e].msg&&(n+=`
	- ${this.exports[e].msg}`),this.exports[e].status_collect&&this.exports[e].status_collect!==lu.ShapeDiverResponseModelComputationStatus.SUCCESS&&(n+=`
	- status_collect is ${this.exports[e].status_collect}`),this.exports[e].status_computation&&this.exports[e].status_computation!==lu.ShapeDiverResponseModelComputationStatus.SUCCESS&&(n+=`
	- status_computation is ${this.exports[e].status_computation}`),n&&this._logger.warn(`
Export(${e}):${n}`)}}addBusyMode(e){for(const n in this._stateEngine.viewportEngines)this.excludeViewports.includes(n)||(this._stateEngine.viewportEngines[n].busy.push(e),xo(this,v2,"f").push(e))}addToSceneTree(e){this._sceneTree.addNode(e),this._sceneTree.root.updateVersion()}cancelProcess(e,n,i,o,l,d=new bc.SessionTreeNode){if(xo(this,ld,"f")!==e){this.removeBusyMode(e);const p={type:i,id:n,progress:o,data:l,status:"The request was exceeded by another customization request"};return this._eventEngine.emitEvent(_r.EVENTTYPE.TASK.TASK_CANCEL,p),this._logger.debug(`Session(${this.id}).cancelProcess: The request was was exceeded by another request.`),d}else if(this._closed===!0){this.removeBusyMode(e),this._logger.debug(`Session(${this.id}).cancelProcess: The session was closed during the request.`);const p={type:$s.TASK_TYPE.SESSION_CUSTOMIZATION,id:n,progress:1,data:{sessionId:this.id},status:"The session was closed during the request."};return this._eventEngine.emitEvent(_r.EVENTTYPE.TASK.TASK_CANCEL,p),new bc.SessionTreeNode}}checkAvailability(e,n=!1){var i;if(!this._responseDto)throw new _r.ShapeDiverViewerSessionError("Session.checkAvailability: responseDto not available.");if(!this._sessionId)throw new _r.ShapeDiverViewerSessionError("Session.checkAvailability: sessionId not available.");if(n&&!this._modelId)throw new _r.ShapeDiverViewerSessionError("Session.checkAvailability: modelId not available.");if(e&&!this._responseDto.actions)throw new _r.ShapeDiverViewerSessionError("Session.checkAvailability: actions not available.");const o=(i=this._responseDto.actions)===null||i===void 0?void 0:i.find(l=>l.name===e);if(e&&!o)throw new _r.ShapeDiverViewerSessionError(`Session.checkAvailability: action ${e} not available.`)}cleanExportParameters(e){const n={};for(const o in e){const l=Object.values(this._parameters).find(d=>d.id===o||d.name===o||d.displayname===o);l&&(n[l.id]=(" "+l.stringify(e[o])).slice(1))}const i=this.parameterValues;for(const o in i)n[o]===void 0&&(n[o]=(" "+i[o]).slice(1));return n}customizeInternal(e,n){return Vi(this,void 0,void 0,function*(){return this.customizeSession(this._parameterValues,e,n)})}customizeSession(e,n,i,o=!1,l=!0,d=!1){return Vi(this,void 0,void 0,function*(){this.checkAvailability("customize");try{this._performanceEvaluator.startSection("sessionResponse");const p=yield this._sdk.utils.submitAndWaitForCustomization(this._sdk,this._sessionId,e);if(this._performanceEvaluator.endSection("sessionResponse"),l===!0&&this._allowOutputLoading===!0)return n()?new bc.SessionTreeNode:o===!0?this.loadOutputsParallel(p,n,i):(this.updateResponseDto(p),this.loadOutputs(n,i));{const g=new bc.SessionTreeNode;return g.data.push(new hG.SessionData(p)),g}}catch(p){return yield this.handleError(p,d),n()?new bc.SessionTreeNode:yield this.customizeSession(e,n,i,o,l,!0)}})}getFileParameterSet(e){const n={};for(const i in this.parameters)this.parameters[i]instanceof uC.FileParameter&&(n[i]=e[i]!==void 0?e[i]:this.parameters[i].value);return n}handleError(e,n=!1){return Vi(this,void 0,void 0,function*(){if((0,lu.isGBResponseError)(e))if(e.error===lu.ShapeDiverResponseErrorType.SESSION_GONE_ERROR)if(this._logger.warn("The session has been closed, trying to re-initialize."),this._sessionId&&this._httpClient.removeDataLoading(this._sessionId),this._retryCounter<3)this._retryCounter=n?this._retryCounter+1:1,this._initialized=!1,yield this.init(this.parameterValues,!0);else{this._logger.warn("Tried to retry the connect multiple times, bearer token still not valid. Closing Session.");try{yield this._closeOnFailure()}catch{}throw this._httpClient.convertError(e)}else if(e.error===lu.ShapeDiverResponseErrorType.JWT_VALIDATION_ERROR)if(this._retryCounter<3)if(this._refreshJwtToken)yield this.setJwtToken(yield this._refreshJwtToken()),this._retryCounter=n?this._retryCounter+1:1,this._logger.warn("Re-trying with new bearer token.");else{this._logger.warn("No retry possible, no new bearer token was supplied. Closing Session.");try{yield this._closeOnFailure()}catch{}throw this._httpClient.convertError(e)}else{this._logger.warn("Tried to retry the connect multiple times, bearer token still not valid. Closing Session.");try{yield this._closeOnFailure()}catch{}throw this._httpClient.convertError(e)}else throw this._httpClient.convertError(e);else throw this._httpClient.convertError(e)})}removeBusyMode(e){for(const n in this._stateEngine.viewportEngines)this._stateEngine.viewportEngines[n].busy.includes(e)&&this._stateEngine.viewportEngines[n].busy.splice(this._stateEngine.viewportEngines[n].busy.indexOf(e),1),xo(this,v2,"f").includes(e)&&xo(this,v2,"f").splice(xo(this,v2,"f").indexOf(e),1)}removeFromSceneTree(e){this._sceneTree.removeNode(e),this._sceneTree.root.updateVersion()}timeout(e){return Vi(this,void 0,void 0,function*(){return new Promise(n=>setTimeout(n,e))})}updateResponseDto(e,n){if(!this._responseDto){this._responseDto=e;return}if(e.parameters)for(const o in e.parameters)this._responseDto.parameters=this._responseDto.parameters||{},this._responseDto.parameters[o]=this._responseDto.parameters[o]||e.parameters[o];if(e.outputs)for(const o in e.outputs)this._responseDto.outputs=this._responseDto.outputs||{},("version"in e.outputs[o]||!(this._responseDto.outputs[o]&&"version"in this._responseDto.outputs[o]))&&(this._responseDto.outputs[o]=e.outputs[o]);if(e.exports)for(const o in e.exports)this._responseDto.exports=this._responseDto.exports||{},("version"in e.exports[o]||!(this._responseDto.exports[o]&&"version"in this._responseDto.exports[o]))&&(this._responseDto.exports[o]=e.exports[o]);const i={};for(const o in this._responseDto.parameters)if(!this.parameters[o]){switch(this._responseDto.parameters[o].id=o,!0){case this._responseDto.parameters[o].type===$s.PARAMETER_TYPE.BOOL:this.parameters[o]=new dC.Parameter(this._responseDto.parameters[o],this);break;case this._responseDto.parameters[o].type===$s.PARAMETER_TYPE.COLOR:this.parameters[o]=new dC.Parameter(this._responseDto.parameters[o],this);break;case this._responseDto.parameters[o].type===$s.PARAMETER_TYPE.FILE:this.parameters[o]=new uC.FileParameter(this._responseDto.parameters[o],this);break;case(this._responseDto.parameters[o].type===$s.PARAMETER_TYPE.EVEN||this._responseDto.parameters[o].type===$s.PARAMETER_TYPE.FLOAT||this._responseDto.parameters[o].type===$s.PARAMETER_TYPE.INT||this._responseDto.parameters[o].type===$s.PARAMETER_TYPE.ODD):this.parameters[o]=new dC.Parameter(this._responseDto.parameters[o],this);break;default:this.parameters[o]=new dC.Parameter(this._responseDto.parameters[o],this);break}n&&(n[o]!==void 0?this.parameters[o].value=n[o]:n[this.parameters[o].name]!==void 0&&(this.parameters[o].value=n[this.parameters[o].name])),i[o]={value:this.parameters[o].value,valueString:this.parameters[o].stringify()},this.initialized||(this.parameterValues[o]=i[o].valueString)}this.initialized||xo(this,Ch,"f").push(i);for(const o in this._responseDto.exports)(this._responseDto.exports[o].type===lu.ShapeDiverResponseExportDefinitionType.EMAIL||this._responseDto.exports[o].type===lu.ShapeDiverResponseExportDefinitionType.DOWNLOAD)&&(this.exports[o]?this.exports[o].updateExportDefinition(this._responseDto.exports[o]):(this._responseDto.exports[o].id=o,this.exports[o]=new Gvt.Export(this._responseDto.exports[o],this)));for(const o in this._responseDto.outputs)this.outputs[o]?this.outputs[o].updateOutputDefinition(this._responseDto.outputs[o]):(this._responseDto.outputs[o].id=o,this.outputsFreeze[o]===void 0&&(this.outputsFreeze[o]=!1),this.outputs[o]=new dG.Output(this._responseDto.outputs[o],this))}waitForUpdateCallbacks(e,n,i,o){return Vi(this,void 0,void 0,function*(){this._updateCallback&&(yield Promise.resolve(this._updateCallback(i,o)));const l=[];for(const d in this.outputs)n[d]!==e[d]&&l.push(this.outputs[d].triggerUpdateCallback(i.children.find(p=>p.name===d),o.children.find(p=>p.name===d)));yield Promise.all(l)})}}fz.SessionEngine=Hvt;v2=new WeakMap,ld=new WeakMap,Ch=new WeakMap,sg=new WeakMap,By=new WeakMap;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Export=t.FileParameter=t.Parameter=t.Output=t.SessionEngine=t.SessionOutputData=t.SessionData=void 0;const e=jx;Object.defineProperty(t,"Export",{enumerable:!0,get:function(){return e.Export}});const n=Hx;Object.defineProperty(t,"FileParameter",{enumerable:!0,get:function(){return n.FileParameter}});const i=$x;Object.defineProperty(t,"Output",{enumerable:!0,get:function(){return i.Output}});const o=SA;Object.defineProperty(t,"Parameter",{enumerable:!0,get:function(){return o.Parameter}});const l=Wx;Object.defineProperty(t,"SessionData",{enumerable:!0,get:function(){return l.SessionData}});const d=fz;Object.defineProperty(t,"SessionEngine",{enumerable:!0,get:function(){return d.SessionEngine}});const p=qx;Object.defineProperty(t,"SessionOutputData",{enumerable:!0,get:function(){return p.SessionOutputData}})})(Gx);var vz={},dce=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},Eh=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},_2,EW,SW,HD,TW;Object.defineProperty(vz,"__esModule",{value:!0});vz.SessionGlobalAccessObject=void 0;const pG=Mn;class $vt{constructor(e){_2.set(this,void 0),EW.set(this,new pG.StatePromise),SW.set(this,new pG.StatePromise),HD.set(this,!1),TW.set(this,new pG.StatePromise),dce(this,_2,e,"f")}get canUploadGLTF(){return Eh(this,_2,"f").canUploadGLTF}get id(){return Eh(this,_2,"f").id}get initialOutputsLoaded(){return Eh(this,EW,"f")}get initialized(){return Eh(this,SW,"f")}get isFirstSession(){return Eh(this,HD,"f")}set isFirstSession(e){dce(this,HD,e,"f")}get modelViewUrl(){return Eh(this,_2,"f").modelViewUrl}get settingsEngine(){return Eh(this,_2,"f").settingsEngine}get settingsRegistered(){return Eh(this,TW,"f")}uploadGLTF(e,n){return Eh(this,_2,"f").uploadGLTF(e,n)}}vz.SessionGlobalAccessObject=$vt;_2=new WeakMap,EW=new WeakMap,SW=new WeakMap,HD=new WeakMap,TW=new WeakMap;var tw=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})},bn=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},hce=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},rf,og,br,$D,Ua;Object.defineProperty(uz,"__esModule",{value:!0});uz.CreationControlCenterSession=void 0;const hC=k6,Ts=Mn,Wvt=a9,h2=Gi,Yvt=Gx,qvt=vz;class Xvt{constructor(){rf.set(this,Ts.EventEngine.instance),og.set(this,Ts.Logger.instance),br.set(this,Ts.StateEngine.instance),$D.set(this,Ts.UuidGenerator.instance),Ua.set(this,void 0),this.sessionEngines={}}static get instance(){return this._instance||(this._instance=new this)}applySettings(e,n,i){i=i||{},this.sessionEngines[e].applySettings(n,i);const o=[];i.session&&i.session.parameter&&i.session.parameter.value&&o.push(this.sessionEngines[e].customize());for(const l in bn(this,br,"f").viewportEngines){const d=bn(this,br,"f").viewportEngines[l];(d.sessionSettingsMode===Ts.SESSION_SETTINGS_MODE.FIRST&&bn(this,Ua,"f")&&e===bn(this,Ua,"f").id||d.sessionSettingsMode===Ts.SESSION_SETTINGS_MODE.MANUAL&&e===d.sessionSettingsId)&&(bn(this,br,"f").viewportEngines[l].settingsAssigned.reset(),o.push(new Promise(p=>{bn(this,br,"f").viewportEngines[l].settingsAssigned.then(()=>{p()})})),d.applySettings(i.viewport))}return new Promise(l=>Promise.all(o).then(()=>l()))}closeSessionEngine(e){var n;return tw(this,void 0,void 0,function*(){if(this.sessionEngines[e]){bn(this,og,"f").debugLow(`CreationControlCenter.closeSession: Closing session ${e}.`),bn(this,br,"f").sessionEngines[e].initialized.resolved===!1&&(yield new Promise(i=>{bn(this,br,"f").sessionEngines[e].initialized.then(()=>i())})),yield this.sessionEngines[e].close();for(const i in bn(this,br,"f").viewportEngines){const o=bn(this,br,"f").viewportEngines[i];(o.sessionSettingsMode===Ts.SESSION_SETTINGS_MODE.MANUAL&&o.sessionSettingsId===e||o.sessionSettingsMode===Ts.SESSION_SETTINGS_MODE.FIRST&&bn(this,Ua,"f")===this.sessionEngines[e])&&o.reset()}if(bn(this,Ua,"f")===this.sessionEngines[e]){const i=Object.values(this.sessionEngines).filter(o=>o.id!==e);if(hce(this,Ua,i.length===0?void 0:i[0],"f"),bn(this,Ua,"f")){Object.values(bn(this,br,"f").sessionEngines).forEach(l=>l.isFirstSession=!1),bn(this,br,"f").sessionEngines[bn(this,Ua,"f").id].isFirstSession=!0;const o=[];for(const l in bn(this,br,"f").viewportEngines){const d=bn(this,br,"f").viewportEngines[l];bn(this,br,"f").viewportEngines[l].settingsAssigned.resolved===!1&&d.sessionSettingsMode===Ts.SESSION_SETTINGS_MODE.FIRST&&(o.push(bn(this,br,"f").viewportEngines[l].settingsAssigned),this.assignSettings(d.id,(n=bn(this,Ua,"f"))===null||n===void 0?void 0:n.id))}yield Promise.all(o),this.updateSession&&this.updateSession(this.sessionEngines)}}bn(this,br,"f").sessionEngines[e].settingsRegistered.reset(),this.sessionEngines[e]=void 0,delete this.sessionEngines[e],delete bn(this,br,"f").sessionEngines[e],bn(this,og,"f").debug("CreationControlCenter.closeSessionEngine: Session closed.");for(const i in bn(this,br,"f").viewportEngines)bn(this,br,"f").viewportEngines[i].update("CreationControlCenter.closeSessionEngine");this.updateSession&&this.updateSession(this.sessionEngines),bn(this,rf,"f").emitEvent(Ts.EVENTTYPE.SESSION.SESSION_CLOSED,{sessionId:e})}})}createSessionEngine(e){return tw(this,void 0,void 0,function*(){const n=bn(this,$D,"f").create(),i=e.id||bn(this,$D,"f").create();e.id=i,e.loadOutputs=e.allowOutputLoading===!1?!1:e.loadOutputs;try{const o={type:h2.TASK_TYPE.SESSION_CREATION,id:n,progress:0,status:"Creating session",data:{sessionId:i}};if(bn(this,rf,"f").emitEvent(Ts.EVENTTYPE.TASK.TASK_START,o),this.sessionEngines[i]){const v={type:h2.TASK_TYPE.SESSION_CREATION,id:n,progress:.1,status:"Closing session with same id",data:{sessionId:i}};bn(this,rf,"f").emitEvent(Ts.EVENTTYPE.TASK.TASK_PROCESS,v),bn(this,og,"f").warn(`CreationControlCenter.createSession: Session with this id (${i}) already exists. Closing initial instance.`),yield this.closeSessionEngine(i)}const l=new Yvt.SessionEngine({id:i,guid:e.guid,ticket:e.ticket,modelViewUrl:e.modelViewUrl,excludeViewports:e.excludeViewports,buildVersion:hC.build_data.build_version,buildDate:hC.build_data.build_date,jwtToken:e.jwtToken,allowOutputLoading:e.allowOutputLoading===void 0?!0:e.allowOutputLoading,loadSdtf:e.loadSdtf===void 0?!1:e.loadSdtf});bn(this,br,"f").sessionEngines[i]=new qvt.SessionGlobalAccessObject(l);const d={type:h2.TASK_TYPE.SESSION_CREATION,id:n,progress:.25,status:"Initializing session.",data:{sessionId:i}};bn(this,rf,"f").emitEvent(Ts.EVENTTYPE.TASK.TASK_PROCESS,d),yield l.init(e.initialParameterValues),e.loadOutputs!==!1&&(e.waitForOutputs!==!1?(yield l.updateOutputs({eventId:n,type:h2.TASK_TYPE.SESSION_CREATION,progressRange:{min:.25,max:.9},data:{sessionId:i}}),bn(this,br,"f").sessionEngines[i].initialOutputsLoaded.resolve(!0),bn(this,rf,"f").emitEvent(Ts.EVENTTYPE.SESSION.SESSION_INITIAL_OUTPUTS_LOADED,{sessionId:i})):l.updateOutputs({eventId:n,type:h2.TASK_TYPE.SESSION_CREATION,progressRange:{min:.25,max:.9},data:{sessionId:i}}).then(()=>{bn(this,br,"f").sessionEngines[i].initialOutputsLoaded.resolve(!0),bn(this,rf,"f").emitEvent(Ts.EVENTTYPE.SESSION.SESSION_INITIAL_OUTPUTS_LOADED,{sessionId:i});for(const v in bn(this,br,"f").viewportEngines)bn(this,br,"f").viewportEngines[v].update("CreationControlCenter.createSessionEngine.waitForOutputs=false")})),this.sessionEngines[i]=l,bn(this,br,"f").sessionEngines[i].initialized.resolve(!0),bn(this,og,"f").debug(`CreationControlCenter.createSession: Session(${l.id}) created.`),bn(this,Ua,"f")||(hce(this,Ua,l,"f"),Object.values(bn(this,br,"f").sessionEngines).forEach(v=>v.isFirstSession=!1),bn(this,br,"f").sessionEngines[bn(this,Ua,"f").id].isFirstSession=!0);const p=[];for(const v in bn(this,br,"f").viewportEngines){const _=bn(this,br,"f").viewportEngines[v];bn(this,br,"f").viewportEngines[v].settingsAssigned.resolved===!1&&(_.sessionSettingsMode===Ts.SESSION_SETTINGS_MODE.FIRST||_.sessionSettingsMode===Ts.SESSION_SETTINGS_MODE.MANUAL&&_.sessionSettingsId===i)&&(p.push(bn(this,br,"f").viewportEngines[v].settingsAssigned),this.assignSettings(_.id,i))}yield Promise.all(p);for(const v in bn(this,br,"f").viewportEngines)bn(this,br,"f").viewportEngines[v].update("CreationControlCenter.createSessionEngine");this.updateSession&&this.updateSession(this.sessionEngines);const g={type:h2.TASK_TYPE.SESSION_CREATION,id:n,progress:1,status:"Session created",data:{sessionId:i}};return bn(this,rf,"f").emitEvent(Ts.EVENTTYPE.TASK.TASK_END,g),bn(this,rf,"f").emitEvent(Ts.EVENTTYPE.SESSION.SESSION_CREATED,{sessionId:i}),l}catch(o){if((0,Ts.isViewerError)(o)&&(this.sessionEngines[i]&&Object.values(this.sessionEngines).length===1||!this.sessionEngines[i]&&Object.values(this.sessionEngines).length===0))for(const p in bn(this,br,"f").viewportEngines)bn(this,br,"f").viewportEngines[p].displayErrorMessage(o.message);const l={type:h2.TASK_TYPE.SESSION_CREATION,id:n,progress:.9,status:"Session created failed, closing session",data:{sessionId:i}};bn(this,rf,"f").emitEvent(Ts.EVENTTYPE.TASK.TASK_PROCESS,l),yield this.closeSessionEngine(i);const d={type:h2.TASK_TYPE.SESSION_CREATION,id:n,progress:1,status:"Session created failed",data:{sessionId:i}};throw bn(this,rf,"f").emitEvent(Ts.EVENTTYPE.TASK.TASK_CANCEL,d),o}})}resetSettings(e,n){n=n||{},this.sessionEngines[e].resetSettings(n);const i=[];n.session&&n.session.parameter&&n.session.parameter.value&&i.push(this.sessionEngines[e].customize());for(const o in bn(this,br,"f").viewportEngines){const l=bn(this,br,"f").viewportEngines[o];(l.sessionSettingsMode===Ts.SESSION_SETTINGS_MODE.FIRST&&bn(this,Ua,"f")&&e===bn(this,Ua,"f").id||l.sessionSettingsMode===Ts.SESSION_SETTINGS_MODE.MANUAL&&e===l.sessionSettingsId)&&(bn(this,br,"f").viewportEngines[o].settingsAssigned.reset(),i.push(new Promise(d=>{bn(this,br,"f").viewportEngines[o].settingsAssigned.then(()=>{d()})})),l.applySettings(n.viewport))}return new Promise(o=>Promise.all(i).then(()=>o()))}saveSettings(e,n){return tw(this,void 0,void 0,function*(){const i=this.sessionEngines[e];yield i.saveUiProperties(!1);const o=this.createSettingsObject(e,n),l=yield i.saveSettings(o);if(l)bn(this,og,"f").debug(`Session(${e}).saveSettings: Saved settings.`);else throw new Ts.ShapeDiverViewerSessionError(`Session(${e}).saveSettings: Could not save settings.`);return l})}assignSettings(e,n,i=!1){return tw(this,void 0,void 0,function*(){const o=bn(this,br,"f").viewportEngines[e];bn(this,br,"f").sessionEngines[n].initialized.resolved===!0?(o.assignSettingsEngine(this.sessionEngines[n].settingsEngine),yield o.applySettings(void 0,void 0,i)):yield new Promise(l=>{bn(this,br,"f").sessionEngines[n].initialized.then(()=>tw(this,void 0,void 0,function*(){o.assignSettingsEngine(this.sessionEngines[n].settingsEngine),yield o.applySettings(void 0,void 0,i),l()}))})})}createSettingsObject(e,n){const i=this.sessionEngines[e];i.settingsEngine.settings.build_version=hC.build_data.build_version,i.settingsEngine.settings.build_date=hC.build_data.build_date,i.settingsEngine.settings.settings_version=Wvt.latestVersion;let o;if(n&&bn(this,br,"f").viewportEngines[n])o=bn(this,br,"f").viewportEngines[n];else for(const l in bn(this,br,"f").viewportEngines){const d=bn(this,br,"f").viewportEngines[l];if(d.sessionSettingsMode===Ts.SESSION_SETTINGS_MODE.FIRST&&bn(this,Ua,"f")&&e===bn(this,Ua,"f").id||d.sessionSettingsMode===Ts.SESSION_SETTINGS_MODE.MANUAL&&e===d.sessionSettingsId){o=d;continue}}return o&&o.saveSettings(),i.settingsEngine.settings}}uz.CreationControlCenterSession=Xvt;rf=new WeakMap,og=new WeakMap,br=new WeakMap,$D=new WeakMap,Ua=new WeakMap;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CreationControlCenterSession=void 0;const e=uz;Object.defineProperty(t,"CreationControlCenterSession",{enumerable:!0,get:function(){return e.CreationControlCenterSession}})})(vK);var _z={},yz={},Zvt=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})},Qvt=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},Br=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},Ai,y2,ag;Object.defineProperty(yz,"__esModule",{value:!0});yz.ExportApi=void 0;const pce=Mn;class Kvt{constructor(e){Ai.set(this,void 0),y2.set(this,pce.InputValidator.instance),ag.set(this,pce.Logger.instance),Qvt(this,Ai,e,"f")}get content(){return Br(this,Ai,"f").content}get delay(){return Br(this,Ai,"f").delay}get dependency(){return Br(this,Ai,"f").dependency}get displayname(){return Br(this,Ai,"f").displayname}set displayname(e){const n="displayname";Br(this,y2,"f").validateAndError(`ExportApi.${n}`,e,"string",!1),Br(this,Ai,"f").displayname=e,Br(this,ag,"f").debug(`ExportApi.${n}: ${n} was updated to ${Br(this,Ai,"f").displayname}.`)}get filename(){return Br(this,Ai,"f").filename}get group(){return Br(this,Ai,"f").group}get hidden(){return Br(this,Ai,"f").hidden}set hidden(e){const n="hidden";Br(this,y2,"f").validateAndError(`ExportApi.${n}`,e,"boolean"),Br(this,Ai,"f").hidden=e,Br(this,ag,"f").debug(`ExportApi.${n}: ${n} was updated to ${Br(this,Ai,"f").hidden}.`)}get id(){return Br(this,Ai,"f").id}get maxWaitTime(){return Br(this,Ai,"f").maxWaitTime}set maxWaitTime(e){const n="maxWaitTime";Br(this,y2,"f").validateAndError(`ExportApi.${n}`,e,"number"),Br(this,Ai,"f").maxWaitTime=e,Br(this,ag,"f").debug(`ExportApi.${n}: ${n} was updated to ${Br(this,Ai,"f").maxWaitTime}.`)}get msg(){return Br(this,Ai,"f").msg}get name(){return Br(this,Ai,"f").name}get order(){return Br(this,Ai,"f").order}set order(e){const n="order";Br(this,y2,"f").validateAndError(`ExportApi.${n}`,e,"number",!1),Br(this,Ai,"f").order=e,Br(this,ag,"f").debug(`ExportApi.${n}: ${n} was updated to ${Br(this,Ai,"f").order}.`)}get result(){return Br(this,Ai,"f").result}get status_collect(){return Br(this,Ai,"f").status_collect}get status_computation(){return Br(this,Ai,"f").status_computation}get tooltip(){return Br(this,Ai,"f").tooltip}set tooltip(e){const n="tooltip";Br(this,y2,"f").validateAndError(`ExportApi.${n}`,e,"string",!1),Br(this,Ai,"f").tooltip=e,Br(this,ag,"f").debug(`ExportApi.${n}: ${n} was updated to ${Br(this,Ai,"f").tooltip}.`)}get type(){return Br(this,Ai,"f").type}get uid(){return Br(this,Ai,"f").uid}get version(){return Br(this,Ai,"f").version}request(e={}){return Zvt(this,void 0,void 0,function*(){return Br(this,y2,"f").validateAndError("ExportApi.request",e,"object"),Br(this,Ai,"f").request(e)})}updateExport(){Br(this,Ai,"f").updateExport()}}yz.ExportApi=Kvt;Ai=new WeakMap,y2=new WeakMap,ag=new WeakMap;var bz={},Zx={},Jvt=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},yr=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},lg,b2,ni;Object.defineProperty(Zx,"__esModule",{value:!0});Zx.ParameterApi=void 0;const mce=Mn;class e_t{constructor(e){lg.set(this,mce.InputValidator.instance),b2.set(this,mce.Logger.instance),ni.set(this,void 0),Jvt(this,ni,e,"f")}get choices(){return yr(this,ni,"f").choices}get decimalplaces(){return yr(this,ni,"f").decimalplaces}get defval(){return yr(this,ni,"f").defval}get displayname(){return yr(this,ni,"f").displayname}set displayname(e){const n="displayname";yr(this,lg,"f").validateAndError(`ParameterApi.${n}`,e,"string",!1),yr(this,ni,"f").displayname=e,yr(this,b2,"f").debug(`ParameterApi.${n}: ${n} was set to ${yr(this,ni,"f").displayname}.`)}get expression(){return yr(this,ni,"f").expression}get format(){return yr(this,ni,"f").format}get group(){return yr(this,ni,"f").group}get hidden(){return yr(this,ni,"f").hidden}set hidden(e){const n="hidden";yr(this,lg,"f").validateAndError(`ParameterApi.${n}`,e,"boolean"),yr(this,ni,"f").hidden=e,yr(this,b2,"f").debug(`ParameterApi.${n}: ${n} was set to ${yr(this,ni,"f").hidden}.`)}get id(){return yr(this,ni,"f").id}get max(){return yr(this,ni,"f").max}get min(){return yr(this,ni,"f").min}get name(){return yr(this,ni,"f").name}get order(){return yr(this,ni,"f").order}set order(e){const n="order";yr(this,lg,"f").validateAndError(`ParameterApi.${n}`,e,"number",!1),yr(this,ni,"f").order=e,yr(this,b2,"f").debug(`ParameterApi.${n}: ${n} was set to ${yr(this,ni,"f").order}.`)}get sessionValue(){return yr(this,ni,"f").sessionValue}set sessionValue(e){const n="sessionValue";yr(this,ni,"f").sessionValue=e,yr(this,b2,"f").debug(`ParameterApi.${n}: ${n} was set to ${yr(this,ni,"f").value}.`)}get structure(){return yr(this,ni,"f").structure}get tooltip(){return yr(this,ni,"f").tooltip}set tooltip(e){const n="tooltip";yr(this,lg,"f").validateAndError(`ParameterApi.${n}`,e,"string",!1),yr(this,ni,"f").tooltip=e,yr(this,b2,"f").debug(`ParameterApi.${n}: ${n} was set to ${yr(this,ni,"f").tooltip}.`)}get type(){return yr(this,ni,"f").type}get value(){return yr(this,ni,"f").value}set value(e){const n="value";this.isValid(e,!0),yr(this,ni,"f").value=e,yr(this,b2,"f").debug(`ParameterApi.${n}: ${n} was set to ${yr(this,ni,"f").value}.`)}get visualization(){return yr(this,ni,"f").visualization}isValid(e,n){if(yr(this,lg,"f").validateAndError("ParameterApi.isValid",n,"boolean",!1),n===!1){try{yr(this,ni,"f").isValid(e)}catch{return!1}return!0}else return yr(this,ni,"f").isValid(e)}resetToDefaultValue(){return yr(this,ni,"f").resetToDefaultValue()}resetToSessionValue(){return yr(this,ni,"f").resetToSessionValue()}stringify(){return yr(this,ni,"f").stringify()}}Zx.ParameterApi=e_t;lg=new WeakMap,b2=new WeakMap,ni=new WeakMap;var t_t=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})},n_t=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},gce=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},GAe,xS;Object.defineProperty(bz,"__esModule",{value:!0});bz.FileParameterApi=void 0;const r_t=Mn,i_t=Zx;class s_t extends i_t.ParameterApi{constructor(e){super(e),GAe.set(this,r_t.Logger.instance),xS.set(this,void 0),n_t(this,xS,e,"f")}getFilename(e){return t_t(this,void 0,void 0,function*(){return gce(this,xS,"f").getFilename(e)})}upload(){return gce(this,xS,"f").upload()}}bz.FileParameterApi=s_t;GAe=new WeakMap,xS=new WeakMap;var bK={},jAe={};(function(t){var e=X&&X.__awaiter||function(v,_,b,w){function E(S){return S instanceof b?S:new b(function(M){M(S)})}return new(b||(b=Promise))(function(S,M){function k(P){try{C(w.next(P))}catch(O){M(O)}}function x(P){try{C(w.throw(P))}catch(O){M(O)}}function C(P){P.done?S(P.value):E(P.value).then(k,x)}C((w=w.apply(v,_||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.GLTF_EXTENSIONS=t.GLTFConverter=void 0;const n=k6,i=Mn,o=dr,l=Cr,d=Cm,p=Gi;class g{constructor(){this._converter=i.Converter.instance,this._eventEngine=i.EventEngine.instance,this._globalTransformationInverse=l.mat4.fromValues(1,0,0,0,0,0,-1,0,0,1,0,0,0,0,0,1),this._progressUpdateLimit=500,this._uuidGenerator=i.UuidGenerator.instance,this._animations=[],this._buffers=[],this._byteOffset=0,this._content={asset:{copyright:"2023 (c) ShapeDiver",generator:"ShapeDiverViewer@"+n.build_data.build_version,version:"2.0",extensions:{}}},this._convertForAR=!1,this._eventId="",this._extensionsRequired=[],this._extensionsUsed=[],this._imageCache={},this._materialCache={},this._meshCache={},this._nodes=[],this._numberOfNodes=0,this._progressTimer=0,this._promises=[]}static get instance(){return this._instance||(this._instance=new this)}get combineTextures(){return this._combineTextures}set combineTextures(_){this._combineTextures=_}convert(_,b=!1,w){var E,S;return e(this,void 0,void 0,function*(){this._eventId=this._uuidGenerator.create();const M={type:p.TASK_TYPE.GLTF_CREATION,id:this._eventId,progress:0,status:"Starting glTF conversion."};this._eventEngine.emitEvent(i.EVENTTYPE.TASK.TASK_START,M),this._numberOfNodes=0,_.traverse(()=>this._numberOfNodes++),this._progressTimer=performance.now(),this.reset(),this._convertForAR=b,this._viewport=w;const k=_.parent,x=new o.TreeNode("ShapeDiverRootNode");x.addChild(_);const C={name:x.name,nodes:[]},P=this._uuidGenerator.create();_.addTransformation({id:P,matrix:this._globalTransformationInverse});const O=this._uuidGenerator.create();if(b){const G=_.boundingBox.boundingSphere.center,j=l.mat4.fromTranslation(l.mat4.create(),l.vec3.multiply(l.vec3.create(),l.vec3.fromValues(G[0],G[1],G[2]),l.vec3.fromValues(-1,-1,-1)));_.addTransformation({id:O,matrix:j})}if(this._viewport){if(this._viewport&&_.excludeViewports.includes(this._viewport)===!1&&!(_.restrictViewports.length>0&&!_.restrictViewports.includes(this._viewport))){const G=yield this.convertNode(_);G!==-1&&((E=C.nodes)===null||E===void 0||E.push(G))}}else{const G=yield this.convertNode(_);G!==-1&&((S=C.nodes)===null||S===void 0||S.push(G))}for(let G=0;G<_.transformations.length;G++)_.transformations[G].id===P&&_.removeTransformation(_.transformations[G]);if(b)for(let G=0;G<_.transformations.length;G++)_.transformations[G].id===O&&_.removeTransformation(_.transformations[G]);this._content.scenes=[],this._content.scenes.push(C),this.convertAnimations(),this._extensionsUsed.length>0&&(this._content.extensionsUsed=this._extensionsUsed),this._extensionsRequired.length>0&&(this._content.extensionsRequired=this._extensionsRequired);let L=0;for(;L!==this._promises.length;)L=this._promises.length,yield Promise.all(this._promises),yield new Promise(G=>setTimeout(G,0));const B={type:p.TASK_TYPE.GLTF_CREATION,id:this._eventId,progress:.75,status:"GlTF images resolved."};this._eventEngine.emitEvent(i.EVENTTYPE.TASK.TASK_PROCESS,B);const V=new Blob(this._buffers,{type:"application/octet-stream"});return k&&k.addChild(_),this._content.buffers&&this._content.buffers.length>0&&(this._content.buffers[0].byteLength=V.size),new Promise((G,j)=>{try{if(typeof window<"u"&&window.FileReader){const F=new window.FileReader;F.readAsArrayBuffer(V),F.onloadend=()=>{const q=this.getPaddedArrayBuffer(F.result),fe=new DataView(new ArrayBuffer(8));fe.setUint32(0,q.byteLength,!0),fe.setUint32(4,5130562,!0);const ue=this.getPaddedArrayBuffer(this.stringToArrayBuffer(JSON.stringify(this._content)),32),J=new DataView(new ArrayBuffer(8));J.setUint32(0,ue.byteLength,!0),J.setUint32(4,1313821514,!0);const le=new ArrayBuffer(12),me=new DataView(le);me.setUint32(0,1179937895,!0),me.setUint32(4,2,!0);const be=12+J.byteLength+ue.byteLength+fe.byteLength+q.byteLength;me.setUint32(8,be,!0);const ye=new Blob([le,J,ue,fe,q],{type:"application/octet-stream"}),pe=new window.FileReader;pe.readAsArrayBuffer(ye),pe.onloadend=()=>{const oe={type:p.TASK_TYPE.GLTF_CREATION,id:this._eventId,progress:1,status:"GlTF creation complete."};this._eventEngine.emitEvent(i.EVENTTYPE.TASK.TASK_END,oe),G(pe.result)},pe.onerror=j},F.onerror=j}else j("FileReader not available.")}catch(F){j(F)}})})}convertAccessor(_){this._content.accessors||(this._content.accessors=[]);const b=this.convertBufferView(_),w=this.getMinMax(_),E={bufferView:b,byteOffset:0,componentType:this.getComponentType(_.array),normalized:_.normalized,count:+_.count,max:w.max,min:w.min,type:this.getType(_.itemSize)};return this._content.accessors.push(E),this._content.accessors.length-1}convertAnimations(){var _;!this._content.animations&&this._animations.length>0&&(this._content.animations=[]);for(let b=0;b<this._animations.length;b++){const w=this._animations[b],E={name:w.name||"animation_"+b,channels:[],samplers:[]};for(let S=0;S<w.tracks.length;S++){const M=w.tracks[S],k=this._nodes.find(j=>j.node===M.node);if(!k)continue;const x=Math.min(...M.times),C=Math.max(...M.times),P=new p.AttributeData(new Float32Array(M.times),1,4,0,4,!1,M.times.length,[x],[C]),O=[];O.push(Math.min(...M.values.filter((j,F)=>F%(M.path==="rotation"?4:3)===0))),O.push(Math.min(...M.values.filter((j,F)=>F%(M.path==="rotation"?4:3)===1))),O.push(Math.min(...M.values.filter((j,F)=>F%(M.path==="rotation"?4:3)===2))),M.path==="rotation"&&O.push(Math.min(...M.values.filter((j,F)=>F%4===3)));const L=[];L.push(Math.max(...M.values.filter((j,F)=>F%(M.path==="rotation"?4:3)===0))),L.push(Math.max(...M.values.filter((j,F)=>F%(M.path==="rotation"?4:3)===1))),L.push(Math.max(...M.values.filter((j,F)=>F%(M.path==="rotation"?4:3)===2))),M.path==="rotation"&&L.push(Math.max(...M.values.filter((j,F)=>F%4===3)));const B=new p.AttributeData(new Float32Array(M.values),M.path==="rotation"?4:3,M.path==="rotation"?16:12,0,4,!1,M.times.length,O,L,M.path==="rotation"?16:12),V={input:this.convertAccessor(P),output:this.convertAccessor(B),interpolation:M.interpolation.toUpperCase()};E.samplers.push(V);const G={sampler:E.samplers.length-1,target:{node:k.id,path:M.path}};E.channels.push(G)}(_=this._content.animations)===null||_===void 0||_.push(E)}}convertBuffer(_){return this._content.buffers||(this._content.buffers=[]),this._content.buffers.length===0&&(this._content.buffers=[{byteLength:0}]),this._buffers.push(_),0}convertBufferView(_){this._content.bufferViews||(this._content.bufferViews=[]);const b=this.getComponentType(_.array),w=d.ACCESSORCOMPONENTSIZE_V2[b],E=Math.ceil(_.count*_.itemSize*w/4)*4,S=new DataView(new ArrayBuffer(E));let M=0;for(let x=0;x<_.count;x++)for(let C=0;C<_.itemSize;C++){let P=0;_.itemSize>4?P=_.array[x*_.itemSize+C]:C===0?P=_.array[x*_.itemSize]:C===1?P=_.array[x*_.itemSize+1]:C===2?P=_.array[x*_.itemSize+2]:C===3&&(P=_.array[x*_.itemSize+3]),_.array instanceof Float32Array?S.setFloat32(M,P,!0):_.array instanceof Uint32Array?S.setUint32(M,P,!0):_.array instanceof Uint16Array?S.setUint16(M,P,!0):_.array instanceof Int16Array?S.setInt16(M,P,!0):_.array instanceof Uint8Array?S.setUint8(M,P):_.array instanceof Int8Array&&S.setInt8(M,P),M+=w}const k={buffer:this.convertBuffer(S.buffer),byteOffset:this._byteOffset,byteLength:E,target:_.target};return this._byteOffset+=E,this._content.bufferViews.push(k),this._content.bufferViews.length-1}convertBufferViewImage(_){return e(this,void 0,void 0,function*(){return this._content.bufferViews||(this._content.bufferViews=[]),new Promise((b,w)=>{try{if(typeof window<"u"&&window.FileReader){const E=new window.FileReader;E.readAsArrayBuffer(_),E.onloadend=()=>{const S=this.getPaddedArrayBuffer(E.result),M={buffer:this.convertBuffer(S),byteOffset:this._byteOffset,byteLength:S.byteLength};this._byteOffset+=S.byteLength,this._content.bufferViews.push(M),b(this._content.bufferViews.length-1)},E.onerror=w}else w("FileReader not available.")}catch(E){w(E)}})})}convertImage(_){if(this._content.images||(this._content.images=[]),_.image instanceof ArrayBuffer)return;if(this._imageCache[_.image.src])return this._imageCache[_.image.src];const b={},w=document.createElement("canvas");w.width=_.image.width,w.height=_.image.height;const E=w.getContext("2d");if(_.flipY&&(E.translate(0,w.height),E.scale(1,-1)),_.blob)b.mimeType=_.blob.type,this._promises.push(new Promise((S,M)=>{try{this.convertBufferViewImage(_.blob).then(k=>{b.bufferView=k,S()})}catch(k){M(k)}}));else{let S="image/png";if((_.image.src.endsWith(".jpg")||_.image.src.includes("image/jpeg"))&&(S="image/jpeg"),b.mimeType=S,/^data:(.*?)(;base64)?,(.*)$/.test(_.image.src)){const k=(0,i.atobCustom)(_.image.src.split(",")[1]),x=_.image.src.split(",")[0].split(":")[1].split(";")[0],C=new ArrayBuffer(k.length),P=new Uint8Array(C);for(let L=0;L<k.length;L++)P[L]=k.charCodeAt(L);const O=new Blob([C],{type:x});this._promises.push(new Promise((L,B)=>{try{this.convertBufferViewImage(O).then(V=>{b.bufferView=V,L()}).catch(B)}catch(V){B(V)}}))}else E.drawImage(_.image,0,0,w.width,w.height),this._promises.push(new Promise((k,x)=>{try{w.toBlob(C=>e(this,void 0,void 0,function*(){try{const P=yield this.convertBufferViewImage(C);b.bufferView=P,k()}catch(P){x(P)}}),S)}catch(C){x(C)}}))}return this._content.images.push(b),this._imageCache[_.image.src]=this._content.images.length-1,this._content.images.length-1}convertMaterial(_,b=!0){if(this._content.materials||(this._content.materials=[]),this._materialCache[_.id+"_"+_.version])return this._materialCache[_.id+"_"+_.version];const w={name:_.id,pbrMetallicRoughness:{}};if(_ instanceof p.MaterialSpecularGlossinessData){this._extensionsUsed.includes("KHR_materials_pbrSpecularGlossiness")||this._extensionsUsed.push("KHR_materials_pbrSpecularGlossiness"),this._extensionsRequired.includes("KHR_materials_pbrSpecularGlossiness")||this._extensionsRequired.push("KHR_materials_pbrSpecularGlossiness");const E={};if(E.diffuseFactor=this._converter.toColorArray(_.color),E.diffuseFactor[3]=_.opacity,_.map&&b){const S=this.convertTexture(_.map);S!==void 0&&(E.diffuseTexture={index:S})}if(E.specularFactor=this._converter.toColorArray(_.specular),E.glossinessFactor=_.glossiness,_.specularGlossinessMap&&b){const S=this.convertTexture(_.specularGlossinessMap);S!==void 0&&(E.specularGlossinessTexture={index:S})}w.extensions={KHR_materials_pbrSpecularGlossiness:E}}else if(_ instanceof p.MaterialUnlitData){if(this._extensionsUsed.includes("KHR_materials_unlit")||this._extensionsUsed.push("KHR_materials_unlit"),this._extensionsRequired.includes("KHR_materials_unlit")||this._extensionsRequired.push("KHR_materials_unlit"),w.pbrMetallicRoughness.baseColorFactor=this._converter.toColorArray(_.color),w.pbrMetallicRoughness.baseColorFactor[3]=_.opacity,_.map&&b){const E=this.convertTexture(_.map);E!==void 0&&(w.pbrMetallicRoughness.baseColorTexture={index:E})}w.extensions={KHR_materials_unlit:{}}}else{const E=_;if(w.pbrMetallicRoughness.baseColorFactor=this._converter.toColorArray(E.color),w.pbrMetallicRoughness.baseColorFactor[3]=E.opacity,E.map&&b){const S=this.convertTexture(E.map);S!==void 0&&(w.pbrMetallicRoughness.baseColorTexture={index:S})}if(w.pbrMetallicRoughness.metallicFactor=E.metalnessMap?1:E.metalness,w.pbrMetallicRoughness.roughnessFactor=E.roughnessMap?1:E.roughness,E.metalnessRoughnessMap&&b){const S=this.convertTexture(E.metalnessRoughnessMap);S!==void 0&&(w.pbrMetallicRoughness.metallicRoughnessTexture={index:S})}else if(E.metalnessMap&&E.roughnessMap&&b)if(this.combineTextures)this._promises.push(new Promise((S,M)=>{try{if(!this.combineTextures)return E.roughnessMap;this.combineTextures(void 0,E.roughnessMap?E.roughnessMap.image:void 0,E.metalnessMap?E.metalnessMap.image:void 0).then(k=>{const x=E.roughnessMap||E.metalnessMap,C=new p.MapData(k.image,{blob:k.blob,wrapS:x.wrapS,wrapT:x.wrapT,minFilter:x.minFilter,magFilter:x.magFilter,center:x.center,color:x.color,offset:x.offset,repeat:x.repeat,rotation:x.rotation,texCoord:x.texCoord,flipY:x.flipY}),P=this.convertTexture(C);P!==void 0&&(w.pbrMetallicRoughness.metallicRoughnessTexture={index:P}),S()}).catch(M)}catch(k){M(k)}}));else{const S=this.convertTexture(E.roughnessMap);S!==void 0&&(w.pbrMetallicRoughness.metallicRoughnessTexture={index:S})}else if(E.metalnessMap&&b){const S=this.convertTexture(E.metalnessMap);S!==void 0&&(w.pbrMetallicRoughness.metallicRoughnessTexture={index:S})}else if(E.roughnessMap&&b){const S=this.convertTexture(E.roughnessMap);S!==void 0&&(w.pbrMetallicRoughness.metallicRoughnessTexture={index:S})}}if(_.normalMap&&b){const E=this.convertTexture(_.normalMap);E!==void 0&&(w.normalTexture={index:E})}if(_.aoMap&&b){const E=this.convertTexture(_.aoMap);E!==void 0&&(w.occlusionTexture={index:E})}if(_.emissiveMap&&b){const E=this.convertTexture(_.emissiveMap);E!==void 0&&(w.emissiveTexture={index:E})}return _.emissiveness&&(w.emissiveFactor=this._converter.toColorArray(_.emissiveness)),w.alphaMode=_.alphaMode.toUpperCase(),_.alphaMode===p.MATERIAL_ALPHA.MASK&&(w.alphaCutoff=_.alphaCutoff),w.doubleSided=_.side===p.MATERIAL_SIDE.DOUBLE,this._content.materials.push(w),this._materialCache[_.id+"_"+_.version]=this._content.materials.length-1,this._materialCache[_.id+"_"+_.version]}convertMesh(_){var b;if(this._content.meshes||(this._content.meshes=[]),this._meshCache[_.id+"_"+_.version])return this._meshCache[_.id+"_"+_.version];const w={primitives:[],name:_.id};return(b=w.primitives)===null||b===void 0||b.push(this.convertPrimitive(_,_.primitive)),this._content.meshes.push(w),this._meshCache[_.id+"_"+_.version]=this._content.meshes.length-1,this._meshCache[_.id+"_"+_.version]}convertNode(_){var b;return e(this,void 0,void 0,function*(){this._content.nodes||(this._content.nodes=[]);const w={name:this._convertForAR?this._uuidGenerator.create():_.name};if(_.transformations.length>0){let E=_.nodeMatrix;_.nodeMatrix.filter(S=>isNaN(S)||S===1/0||S===-1/0).length>0&&(E=l.mat4.create()),w.matrix=[E[0],E[1],E[2],E[3],E[4],E[5],E[6],E[7],E[8],E[9],E[10],E[11],E[12],E[13],E[14],E[15]]}for(let E=0;E<_.data.length;E++)_.data[E]instanceof p.GeometryData&&(this._convertForAR?_.data[E].mode!==p.PRIMITIVE_MODE.POINTS&&_.data[E].mode!==p.PRIMITIVE_MODE.LINES&&_.data[E].mode!==p.PRIMITIVE_MODE.LINE_LOOP&&_.data[E].mode!==p.PRIMITIVE_MODE.LINE_STRIP&&(w.mesh=this.convertMesh(_.data[E])):w.mesh=this.convertMesh(_.data[E])),_.data[E]instanceof p.AnimationData&&this._animations.push(_.data[E]);_.children.length>0&&(w.children=[]);for(let E=0;E<_.children.length;E++)if(_.children[E].visible===!0){if(this._viewport&&(_.children[E].excludeViewports.includes(this._viewport)||_.children[E].restrictViewports.length>0&&!_.children[E].restrictViewports.includes(this._viewport)))continue;const S=yield this.convertNode(_.children[E]);S!==-1&&((b=w.children)===null||b===void 0||b.push(S))}if(w.children!==void 0&&w.children.length===0&&(w.children=void 0),performance.now()-this._progressTimer>this._progressUpdateLimit){this._progressTimer=performance.now();const E={type:p.TASK_TYPE.GLTF_CREATION,id:this._eventId,progress:this._content.nodes.length/this._numberOfNodes/2,status:`GlTF conversion progress: ${this._content.nodes.length}/${this._numberOfNodes} nodes.`};this._eventEngine.emitEvent(i.EVENTTYPE.TASK.TASK_PROCESS,E),yield new Promise(S=>setTimeout(S,0))}return w.camera===void 0&&w.children===void 0&&w.mesh===void 0&&w.extensions===void 0&&w.extras===void 0&&w.skin===void 0?-1:(this._content.nodes.push(w),this._nodes.push({node:_,id:this._content.nodes.length-1}),this._content.nodes.length-1)})}convertPrimitive(_,b){const w={attributes:{},mode:_.mode};for(const E in b.attributes)if(b.attributes[E].array.length>0)if(E.includes("COLOR")){if(b.attributes[E].itemSize%4===0)w.attributes[E]=this.convertAccessor(b.attributes[E]);else if(b.attributes[E].itemSize%3===0){const S=b.attributes[E],M=new Float32Array(S.array.length/3*4);let k=0;for(let x=0;x<M.length;x+=4)M[x]=S.array[k]/(S.elementBytes===1?255:1),M[x+1]=S.array[k+1]/(S.elementBytes===1?255:1),M[x+2]=S.array[k+2]/(S.elementBytes===1?255:1),M[x+3]=1,k+=3;w.attributes[E]=this.convertAccessor(new p.AttributeData(M,4,4*4,S.byteOffset,4,S.normalized,S.count,S.min,S.max,S.byteStride))}}else w.attributes[E]=this.convertAccessor(b.attributes[E]);if(b.indices&&(w.indices=this.convertAccessor(b.indices)),_.material){const E=Object.keys(w.attributes).find(S=>S.includes("TEXCOORD"));w.material=this.convertMaterial(_.material,!!E)}return w}convertTexture(_){this._content.textures||(this._content.textures=[]);const b=this.convertImage(_);if(!b)return;const w={source:b};return this._content.textures.push(w),this._content.textures.length-1}getComponentType(_){switch(!0){case _ instanceof Int8Array:return 5120;case _ instanceof Uint8Array:return 5121;case _ instanceof Int16Array:return 5122;case _ instanceof Uint16Array:return 5123;case _ instanceof Uint32Array:return 5125;default:return 5126}}getMinMax(_){const b={min:new Array(_.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(_.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let w=0;w<_.count;w++)for(let E=0;E<_.itemSize;E++){let S=0;_.itemSize>4?S=_.array[w*_.itemSize+E]:E===0?S=_.array[w*_.itemSize]:E===1?S=_.array[w*_.itemSize+1]:E===2?S=_.array[w*_.itemSize+2]:E===3&&(S=_.array[w*_.itemSize+3]),b.min[E]=Math.min(b.min[E],S),b.max[E]=Math.max(b.max[E],S)}return b}getPaddedArrayBuffer(_,b=0){const w=Math.ceil(_.byteLength/4)*4;if(w!==_.byteLength){const E=new Uint8Array(w);if(E.set(new Uint8Array(_)),b!==0)for(let S=_.byteLength;S<w;S++)E[S]=b;return E.buffer}return _}getType(_){switch(_){case 1:return"SCALAR";case 2:return"VEC2";case 3:return"VEC3";case 4:return"VEC4";case 9:return"MAT3";case 18:return"MAT4";default:return"VEC3"}}reset(){this._animations=[],this._buffers=[],this._byteOffset=0,this._content={asset:{copyright:"2023 (c) ShapeDiver",generator:"ShapeDiverViewer@"+n.build_data.build_version,version:"2.0",extensions:{}}},this._extensionsRequired=[],this._extensionsUsed=[],this._imageCache={},this._materialCache={},this._meshCache={},this._nodes=[],this._promises=[],this._convertForAR=!1,this._viewport=void 0}stringToArrayBuffer(_){if(window.TextEncoder!==void 0)return new TextEncoder().encode(_).buffer;const b=new Uint8Array(new ArrayBuffer(_.length));for(let w=0,E=_.length;w<E;w++){const S=_.charCodeAt(w);b[w]=S>255?32:S}return b.buffer}}t.GLTFConverter=g,function(v){v.KHR_BINARY_GLTF="KHR_binary_glTF",v.KHR_MATERIALS_PBRSPECULARGLOSSINESS="KHR_materials_pbrSpecularGlossiness",v.KHR_MATERIALS_UNLIT="KHR_materials_unlit"}(t.GLTF_EXTENSIONS||(t.GLTF_EXTENSIONS={}))})(jAe);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.GLTFConverter=void 0;const e=jAe;Object.defineProperty(t,"GLTFConverter",{enumerable:!0,get:function(){return e.GLTFConverter}})})(bK);var Az={},Qx={},vce=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},o_t=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},MS;Object.defineProperty(Qx,"__esModule",{value:!0});Qx.OutputApiData=void 0;const a_t=dr;class AK extends a_t.AbstractTreeNodeData{constructor(e,n,i){super(n,i),MS.set(this,void 0),vce(this,MS,e,"f")}get api(){return o_t(this,MS,"f")}set api(e){vce(this,MS,e,"f")}clone(){return new AK(this.api,this.id,this.version)}}Qx.OutputApiData=AK;MS=new WeakMap;var _ce=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})},l_t=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},or=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},cd,A2,ri;Object.defineProperty(Az,"__esModule",{value:!0});Az.OutputApi=void 0;const yce=Mn,pC=Qx;class c_t{constructor(e){cd.set(this,yce.InputValidator.instance),A2.set(this,yce.Logger.instance),ri.set(this,void 0),l_t(this,ri,e,"f"),or(this,ri,"f").updateCallback=n=>{n&&n.data.findIndex(i=>i instanceof pC.OutputApiData)===-1&&n.addData(new pC.OutputApiData(this))},or(this,ri,"f").updateCallback(this.node)}get bbmax(){return or(this,ri,"f").bbmax}get bbmin(){return or(this,ri,"f").bbmin}get chunks(){return or(this,ri,"f").chunks}get content(){return or(this,ri,"f").content}get delay(){return or(this,ri,"f").delay}get dependency(){return or(this,ri,"f").dependency}get displayname(){return or(this,ri,"f").displayname}set displayname(e){const n="displayname";or(this,cd,"f").validateAndError(`OutputApi.${n}`,e,"string",!1),or(this,ri,"f").displayname=e,or(this,A2,"f").debug(`OutputApi.${n}: ${n} was updated to ${or(this,ri,"f").displayname}.`)}get format(){return or(this,ri,"f").format}get freeze(){return or(this,ri,"f").freeze}set freeze(e){const n="freeze";or(this,cd,"f").validateAndError(`OutputApi.${n}`,e,"boolean"),or(this,ri,"f").freeze=e,or(this,A2,"f").debug(`OutputApi.${n}: ${n} was updated to ${or(this,ri,"f").freeze}.`)}get hidden(){return or(this,ri,"f").hidden}set hidden(e){const n="hidden";or(this,cd,"f").validateAndError(`OutputApi.${n}`,e,"boolean"),or(this,ri,"f").hidden=e,or(this,A2,"f").debug(`OutputApi.${n}: ${n} was updated to ${or(this,ri,"f").hidden}.`)}get id(){return or(this,ri,"f").id}get material(){return or(this,ri,"f").material}get msg(){return or(this,ri,"f").msg}get name(){return or(this,ri,"f").name}get node(){return or(this,ri,"f").node}get order(){return or(this,ri,"f").order}set order(e){const n="order";or(this,cd,"f").validateAndError(`OutputApi.${n}`,e,"number",!1),or(this,ri,"f").order=e,or(this,A2,"f").debug(`OutputApi.${n}: ${n} was updated to ${or(this,ri,"f").order}.`)}get status_collect(){return or(this,ri,"f").status_collect}get status_computation(){return or(this,ri,"f").status_computation}get tooltip(){return or(this,ri,"f").tooltip}set tooltip(e){const n="tooltip";or(this,cd,"f").validateAndError(`OutputApi.${n}`,e,"string",!1),or(this,ri,"f").tooltip=e,or(this,A2,"f").debug(`OutputApi.${n}: ${n} was updated to ${or(this,ri,"f").tooltip}.`)}get uid(){return or(this,ri,"f").uid}get updateCallback(){return or(this,ri,"f").updateCallback}set updateCallback(e){const n="updateCallback";e&&or(this,cd,"f").validateAndError(`OutputApi.${n}`,e,"function",!1),or(this,ri,"f").updateCallback=(i,o)=>_ce(this,void 0,void 0,function*(){i&&i.data.findIndex(l=>l instanceof pC.OutputApiData)===-1&&i.addData(new pC.OutputApiData(this)),e&&(yield Promise.resolve(e(i,o)))}),or(this,A2,"f").debug(`OutputApi.${n}: ${n} was updated to ${e}.`)}get version(){return or(this,ri,"f").version}updateOutputContent(e,n=!1){return _ce(this,void 0,void 0,function*(){const i="updateOutputContent";return or(this,cd,"f").validateAndError(`OutputApi.${i}`,e,"array"),or(this,cd,"f").validateAndError(`OutputApi.${i}`,n,"boolean"),or(this,ri,"f").updateOutputContent(e,n)})}}Az.OutputApi=c_t;cd=new WeakMap,A2=new WeakMap,ri=new WeakMap;var Kx={},bce=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},u_t=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},kS;Object.defineProperty(Kx,"__esModule",{value:!0});Kx.SessionApiData=void 0;const f_t=dr;class wK extends f_t.AbstractTreeNodeData{constructor(e,n,i){super(n,i),kS.set(this,void 0),bce(this,kS,e,"f")}get api(){return u_t(this,kS,"f")}set api(e){bce(this,kS,e,"f")}clone(){return new wK(this.api,this.id,this.version)}}Kx.SessionApiData=wK;kS=new WeakMap;var G1=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})},d_t=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},Gt=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},Uy,cg,xW,Mi,o0,ug,w2,Kn,WD;Object.defineProperty(_z,"__esModule",{value:!0});_z.SessionApi=void 0;const h_t=vK,p_t=yz,m_t=Gx,g_t=bz,v_t=bK,mC=Mn,__t=Az,y_t=Zx,gC=Kx;class b_t{constructor(e){if(Uy.set(this,h_t.CreationControlCenterSession.instance),cg.set(this,{}),xW.set(this,v_t.GLTFConverter.instance),Mi.set(this,mC.InputValidator.instance),o0.set(this,mC.Logger.instance),ug.set(this,{}),w2.set(this,{}),Kn.set(this,void 0),WD.set(this,mC.StateEngine.instance),d_t(this,Kn,e,"f"),!Gt(this,Kn,"f").initialized)throw new mC.ShapeDiverViewerSessionError("Session could not be initialized.");Gt(this,Kn,"f").updateCallback=n=>{n&&n.data.findIndex(i=>i instanceof gC.SessionApiData)===-1&&n.addData(new gC.SessionApiData(this))},Gt(this,Kn,"f").updateCallback(this.node,this.node);for(const n in Gt(this,Kn,"f").outputs)Gt(this,ug,"f")[n]=new __t.OutputApi(Gt(this,Kn,"f").outputs[n]);for(const n in Gt(this,Kn,"f").exports)Gt(this,cg,"f")[n]=new p_t.ExportApi(Gt(this,Kn,"f").exports[n]);for(const n in Gt(this,Kn,"f").parameters)Gt(this,Kn,"f").parameters[n]instanceof m_t.FileParameter?Gt(this,w2,"f")[n]=new g_t.FileParameterApi(Gt(this,Kn,"f").parameters[n]):Gt(this,w2,"f")[n]=new y_t.ParameterApi(Gt(this,Kn,"f").parameters[n])}get automaticSceneUpdate(){return Gt(this,Kn,"f").automaticSceneUpdate}set automaticSceneUpdate(e){const n="automaticSceneUpdate";Gt(this,Mi,"f").validateAndError(`SessionApi.${n}`,e,"boolean"),Gt(this,Kn,"f").automaticSceneUpdate=e,Gt(this,o0,"f").debug(`SessionApi.${n}: ${n} was set to ${e}`)}get commitParameters(){return Gt(this,Kn,"f").settingsEngine.general.commitParameters}set commitParameters(e){const n="commitParameters";Gt(this,Mi,"f").validateAndError(`SessionApi.${n}`,e,"boolean"),Gt(this,Kn,"f").settingsEngine.general.commitParameters=e,Gt(this,o0,"f").debug(`SessionApi.${n}: ${n} was set to ${e}`)}get commitSettings(){return Gt(this,Kn,"f").settingsEngine.general.commitSettings}set commitSettings(e){const n="commitSettings";Gt(this,Mi,"f").validateAndError(`SessionApi.${n}`,e,"boolean"),Gt(this,Kn,"f").settingsEngine.general.commitSettings=e,Gt(this,o0,"f").debug(`SessionApi.${n}: ${n} was set to ${e}`)}get customizeOnParameterChange(){return Gt(this,Kn,"f").customizeOnParameterChange}set customizeOnParameterChange(e){const n="customizeOnParameterChange";Gt(this,Mi,"f").validateAndError(`SessionApi.${n}`,e,"boolean"),Gt(this,Kn,"f").customizeOnParameterChange=e,Gt(this,o0,"f").debug(`SessionApi.${n}: ${n} was set to ${e}`)}get excludeViewports(){return Gt(this,Kn,"f").excludeViewports}set excludeViewports(e){const n="excludeViewports";Gt(this,Mi,"f").validateAndError(`SessionApi.${n}`,e,"stringArray"),Gt(this,Kn,"f").excludeViewports=e,Gt(this,o0,"f").debug(`SessionApi.${n}: ${n} was set to ${e}`)}get exports(){return Gt(this,cg,"f")}get guid(){return Gt(this,Kn,"f").guid}get id(){return Gt(this,Kn,"f").id}get initialized(){return Gt(this,Kn,"f").initialized}get jwtToken(){return Gt(this,Kn,"f").jwtToken}get loadSdtf(){return Gt(this,Kn,"f").loadSdtf}set loadSdtf(e){const n="loadSdtf";Gt(this,Mi,"f").validateAndError(`SessionApi.${n}`,e,"boolean"),Gt(this,Kn,"f").loadSdtf=e,Gt(this,o0,"f").debug(`SessionApi.${n}: ${n} was set to ${e}`)}get modelViewUrl(){return Gt(this,Kn,"f").modelViewUrl}get node(){return Gt(this,Kn,"f").node}get outputs(){return Gt(this,ug,"f")}get parameterDefaultValues(){const e={};for(const n in this.parameters)e[n]=this.parameters[n].defval;return e}get parameterSessionValues(){const e={};for(const n in this.parameters)e[n]=this.parameters[n].sessionValue;return e}get parameterValues(){const e={};for(const n in this.parameters)e[n]=this.parameters[n].value;return e}get parameters(){return Gt(this,w2,"f")}get refreshJwtToken(){return Gt(this,Kn,"f").refreshJwtToken}set refreshJwtToken(e){const n="refreshJwtToken";Gt(this,Mi,"f").validateAndError(`SessionApi.${n}`,e,"function",!1),Gt(this,Kn,"f").refreshJwtToken=e,Gt(this,o0,"f").debug(`SessionApi.${n}: ${n} was set to ${e}`)}get ticket(){return Gt(this,Kn,"f").ticket}get updateCallback(){return Gt(this,Kn,"f").updateCallback}set updateCallback(e){const n="updateCallback";e&&Gt(this,Mi,"f").validateAndError(`SessionApi.${n}`,e,"function",!1),Gt(this,Kn,"f").updateCallback=(i,o)=>G1(this,void 0,void 0,function*(){i.data.findIndex(l=>l instanceof gC.SessionApiData)===-1&&i.addData(new gC.SessionApiData(this)),e&&(yield Promise.resolve(e(i,o)))}),Gt(this,o0,"f").debug(`SessionApi.${n}: ${n} was updated to ${e}.`)}applySettings(e,n){const i="applySettings";return Gt(this,Mi,"f").validateAndError(`SessionApi.${i}`,e,"object"),Gt(this,Mi,"f").validateAndError(`SessionApi.${i}`,n,"object",!1),Gt(this,Uy,"f").applySettings(this.id,e,n)}canGoBack(){return Gt(this,Kn,"f").canGoBack()}canGoForward(){return Gt(this,Kn,"f").canGoForward()}cancelCustomization(){Gt(this,Kn,"f").cancelCustomization()}close(){return G1(this,void 0,void 0,function*(){return yield Gt(this,Uy,"f").closeSessionEngine(this.id)})}convertToGlTF(){return G1(this,void 0,void 0,function*(){for(const n in Gt(this,WD,"f").viewportEngines)Gt(this,WD,"f").viewportEngines[n].update("SessionApi.convertToGlTF");const e=yield Gt(this,xW,"f").convert(this.node,!1);return new Blob([e],{type:"application/octet-stream"})})}customize(e,n=!1,i=!1){const o="customize";if(Gt(this,Mi,"f").validateAndError(`SessionApi.${o}`,e,"object",!1),e)for(const l in e)this.parameters[l].value=e[l];return Gt(this,Mi,"f").validateAndError(`SessionApi.${o}`,n,"boolean",!1),Gt(this,Mi,"f").validateAndError(`SessionApi.${o}`,i,"boolean",!1),Gt(this,Kn,"f").customize(n,i)}customizeParallel(e){return Gt(this,Mi,"f").validateAndError("SessionApi.customizeParallel",e,"object"),Gt(this,Kn,"f").customizeParallel(e)}customizeResult(e){return Gt(this,Mi,"f").validateAndError("SessionApi.customizeResult",e,"object"),Gt(this,Kn,"f").customizeParallel(e,!1)}getExportById(e){return Gt(this,Mi,"f").validateAndError("SessionApi.getExportById",e,"string"),Gt(this,cg,"f")[e]}getExportByName(e){return Gt(this,Mi,"f").validateAndError("SessionApi.getExportByName",e,"string"),Object.values(Gt(this,cg,"f")).filter(i=>i.name===e)}getExportByType(e){return Gt(this,Mi,"f").validateAndError("SessionApi.getExportByType",e,"string"),Object.values(Gt(this,cg,"f")).filter(i=>i.type===e)}getOutputByFormat(e){return Gt(this,Mi,"f").validateAndError("SessionApi.getOutputByFormat",e,"string"),Object.values(Gt(this,ug,"f")).filter(i=>i.format.includes(e))}getOutputById(e){return Gt(this,Mi,"f").validateAndError("SessionApi.getOutputById",e,"string"),Gt(this,ug,"f")[e]}getOutputByName(e){return Gt(this,Mi,"f").validateAndError("SessionApi.getOutputByName",e,"string"),Object.values(Gt(this,ug,"f")).filter(i=>i.name===e)}getParameterById(e){return Gt(this,Mi,"f").validateAndError("SessionApi.getParameterById",e,"string"),Gt(this,w2,"f")[e]}getParameterByName(e){return Gt(this,Mi,"f").validateAndError("SessionApi.getParameterByName",e,"string"),Object.values(Gt(this,w2,"f")).filter(i=>i.name===e)}getParameterByType(e){return Gt(this,Mi,"f").validateAndError("SessionApi.getParameterByType",e,"string"),Object.values(Gt(this,w2,"f")).filter(i=>i.type===e)}goBack(){return Gt(this,Kn,"f").goBack()}goForward(){return Gt(this,Kn,"f").goForward()}loadCachedOutputs(e){return G1(this,void 0,void 0,function*(){return yield Gt(this,Kn,"f").loadCachedOutputsParallel(e)})}requestExports(e,n,i){return G1(this,void 0,void 0,function*(){const o="requestExports";return Gt(this,Mi,"f").validateAndError(`SessionApi.${o}`,e,"object"),Gt(this,Mi,"f").validateAndError(`SessionApi.${o}`,n,"boolean",!1),Gt(this,Mi,"f").validateAndError(`SessionApi.${o}`,i,"number",!1),Gt(this,Kn,"f").requestExports(e,n,i)})}resetParameterValues(e=!1,n=!1){const i="resetParameterValues";for(const o in this.parameters)this.parameters[o].value=this.parameters[o].defval;return Gt(this,Mi,"f").validateAndError(`SessionApi.${i}`,e,"boolean",!1),Gt(this,Kn,"f").customize(e,n)}resetSettings(e){return Gt(this,Mi,"f").validateAndError("SessionApi.applySettings",e,"object",!1),Gt(this,Uy,"f").resetSettings(this.id,e)}saveDefaultParameterValues(){return Gt(this,Kn,"f").saveDefaultParameterValues()}saveSettings(e){return Gt(this,Mi,"f").validateAndError("SessionApi.saveDefaultParameterValues",e,"string",!1),Gt(this,Uy,"f").saveSettings(this.id,e)}saveUiProperties(){return Gt(this,Kn,"f").saveUiProperties()}setJwtToken(e){return G1(this,void 0,void 0,function*(){const n="setJwtToken";Gt(this,Mi,"f").validateAndError(`SessionApi.${n}`,e,"string",!1),yield Gt(this,Kn,"f").setJwtToken(e),Gt(this,o0,"f").debug(`SessionApi.${n}: ${n} was set to ${e}`)})}updateOutputs(e=!1){return Gt(this,Kn,"f").updateOutputs(void 0,e)}uploadFileParameters(e){return G1(this,void 0,void 0,function*(){const n=e||{};return yield Gt(this,Kn,"f").uploadFileParameters(n)})}}_z.SessionApi=b_t;Uy=new WeakMap,cg=new WeakMap,xW=new WeakMap,Mi=new WeakMap,o0=new WeakMap,ug=new WeakMap,w2=new WeakMap,Kn=new WeakMap,WD=new WeakMap;(function(t){var e=X&&X.__awaiter||function(_,b,w,E){function S(M){return M instanceof w?M:new w(function(k){k(M)})}return new(w||(w=Promise))(function(M,k){function x(O){try{P(E.next(O))}catch(L){k(L)}}function C(O){try{P(E.throw(O))}catch(L){k(L)}}function P(O){O.done?M(O.value):S(O.value).then(x,C)}P((E=E.apply(_,b||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.createSession=t.sessions=void 0;const n=vK,i=Mn,o=_z,l=oa,d=n.CreationControlCenterSession.instance,p=i.InputValidator.instance,g=i.Logger.instance;t.sessions={},d.updateSessions=_=>{for(const b in _)t.sessions[b]||(t.sessions[b]=new o.SessionApi(_[b]));for(const b in t.sessions)_[b]||delete t.sessions[b]};const v=_=>e(void 0,void 0,void 0,function*(){if((0,l.showConsoleMessage)(),g.debug(`createSession: Creating and initializing session with properties ${JSON.stringify(_)}.`),p.validateAndError("createSession",_,"object"),p.validateAndError("createSession",_.ticket,"string",!1),p.validateAndError("createSession",_.guid,"string",!1),p.validateAndError("createSession",_.modelViewUrl,"string"),p.validateAndError("createSession",_.jwtToken,"string",!1),p.validateAndError("createSession",_.id,"string",!1),p.validateAndError("createSession",_.waitForOutputs,"boolean",!1),p.validateAndError("createSession",_.loadOutputs,"boolean",!1),p.validateAndError("createSession",_.loadSdtf,"boolean",!1),p.validateAndError("createSession",_.excludeViewports,"stringArray",!1),p.validateAndError("createSession",_.initialParameterValues,"object",!1),_.initialParameterValues)for(const w in _.initialParameterValues)p.validateAndError("createSession",_.initialParameterValues[w],"string");if(_.ticket!==void 0&&_.guid!==void 0)throw new i.ShapeDiverViewerSessionError("createSession: A ticket and a guid were provided for the session creation. Please only provide one or the other. The session was not created.");if(_.ticket===void 0&&_.guid===void 0)throw new i.ShapeDiverViewerSessionError("createSession: Neither a ticket nor a guid were provided for the session creation. Please provide one or the other. The session was not created.");if(_.guid!==void 0&&_.jwtToken===void 0)throw new i.ShapeDiverViewerSessionError("createSession: When creating a session with a guid, a jwtToken is required, please provide one. The session was not created.");_.waitForOutputs===void 0&&(_.waitForOutputs=!0),_.loadOutputs===void 0&&(_.loadOutputs=!0);const b=yield d.createSessionEngine(_);return t.sessions[b.id]=new o.SessionApi(b),t.sessions[b.id]});t.createSession=v})(LAe);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.GeometryData=t.AnimationData=t.MapData=t.MaterialGemData=t.MaterialSpecularGlossinessData=t.MaterialBasicLineData=t.MaterialMultiPointData=t.MaterialPointData=t.MaterialUnlitData=t.MaterialStandardData=t.ShapeDiverResponseModelComputationStatus=t.Sphere=t.Box=t.EVENTTYPE_TASK=t.EVENTTYPE_DRAWING_TOOLS=t.EVENTTYPE_INTERACTION=t.EVENTTYPE_VIEWPORT=t.EVENTTYPE_SESSION=t.EVENTTYPE_SCENE=t.EVENTTYPE_RENDERING=t.EVENTTYPE_PARAMETER=t.EVENTTYPE_OUTPUT=t.EVENTTYPE_CAMERA=t.EVENTTYPE=t.TASK_TYPE=t.SESSION_SETTINGS_MODE=t.SDTF_TYPEHINT=t.TEXTURE_FILTERING=t.TEXTURE_WRAPPING=t.MATERIAL_TYPE=t.MATERIAL_SHADING=t.MATERIAL_ALPHA=t.MATERIAL_SIDE=t.PRIMITIVE_MODE=t.LOGGING_LEVEL=t.TAG3D_JUSTIFICATION=t.PARAMETER_VISUALIZATION=t.EXPORT_TYPE=t.PARAMETER_TYPE=t.TreeNode=t.Tree=t.version=t.generalOptions=t.sceneTree=t.removeListener=t.addListener=t.sessions=t.createSession=t.OutputApiData=t.SessionApiData=void 0,t.isViewerGeometryBackendGenericError=t.isViewerGeometryBackendError=t.isViewerDrawingToolsError=t.isViewerInteractionError=t.isViewerValidationError=t.isARError=t.isViewerCameraError=t.isViewerLightError=t.isViewerViewportError=t.isViewerSessionError=t.isViewerSettingsError=t.isViewerWebGLError=t.isViewerEnvironmentMapError=t.isViewerDataProcessingError=t.isViewerUnknownError=t.isViewerError=t.ShapeDiverGeometryBackendResponseErrorType=t.ShapeDiverGeometryBackendResponseError=t.ShapeDiverGeometryBackendRequestError=t.ShapeDiverGeometryBackendError=t.ShapeDiverViewerDrawingToolsError=t.ShapeDiverViewerInteractionError=t.ShapeDiverViewerValidationError=t.ShapeDiverViewerCameraError=t.ShapeDiverViewerLightError=t.ShapeDiverViewerArError=t.ShapeDiverViewerUnknownError=t.ShapeDiverViewerViewportError=t.ShapeDiverViewerSessionError=t.ShapeDiverViewerSettingsError=t.ShapeDiverViewerWebGLError=t.ShapeDiverViewerEnvironmentMapError=t.ShapeDiverViewerDataProcessingError=t.ShapeDiverViewerError=t.ShapeDiverViewerErrorType=t.SessionOutputData=t.SessionData=t.SdtfPrimitiveTypeGuard=t.SDTFItemData=t.SDTFAttributeData=t.SDTFAttributesData=t.SDTFOverviewData=t.CustomData=t.HTMLElementAnchorData=t.HTMLElementAnchorImageData=t.HTMLElementAnchorTextData=t.HTMLElementAnchorCustomData=t.MaterialVariantsData=t.PrimitiveData=t.AttributeData=void 0,t.isViewerGeometryBackendResponseError=t.isViewerGeometryBackendRequestError=void 0;const e=oa;Object.defineProperty(t,"addListener",{enumerable:!0,get:function(){return e.addListener}}),Object.defineProperty(t,"generalOptions",{enumerable:!0,get:function(){return e.generalOptions}}),Object.defineProperty(t,"removeListener",{enumerable:!0,get:function(){return e.removeListener}}),Object.defineProperty(t,"sceneTree",{enumerable:!0,get:function(){return e.sceneTree}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return e.version}});const n=Gi;Object.defineProperty(t,"AnimationData",{enumerable:!0,get:function(){return n.AnimationData}}),Object.defineProperty(t,"AttributeData",{enumerable:!0,get:function(){return n.AttributeData}}),Object.defineProperty(t,"CustomData",{enumerable:!0,get:function(){return n.CustomData}}),Object.defineProperty(t,"GeometryData",{enumerable:!0,get:function(){return n.GeometryData}}),Object.defineProperty(t,"HTMLElementAnchorCustomData",{enumerable:!0,get:function(){return n.HTMLElementAnchorCustomData}}),Object.defineProperty(t,"HTMLElementAnchorData",{enumerable:!0,get:function(){return n.HTMLElementAnchorData}}),Object.defineProperty(t,"HTMLElementAnchorImageData",{enumerable:!0,get:function(){return n.HTMLElementAnchorImageData}}),Object.defineProperty(t,"HTMLElementAnchorTextData",{enumerable:!0,get:function(){return n.HTMLElementAnchorTextData}}),Object.defineProperty(t,"MapData",{enumerable:!0,get:function(){return n.MapData}}),Object.defineProperty(t,"MATERIAL_ALPHA",{enumerable:!0,get:function(){return n.MATERIAL_ALPHA}}),Object.defineProperty(t,"MATERIAL_SHADING",{enumerable:!0,get:function(){return n.MATERIAL_SHADING}}),Object.defineProperty(t,"MATERIAL_SIDE",{enumerable:!0,get:function(){return n.MATERIAL_SIDE}}),Object.defineProperty(t,"MATERIAL_TYPE",{enumerable:!0,get:function(){return n.MATERIAL_TYPE}}),Object.defineProperty(t,"MaterialBasicLineData",{enumerable:!0,get:function(){return n.MaterialBasicLineData}}),Object.defineProperty(t,"MaterialGemData",{enumerable:!0,get:function(){return n.MaterialGemData}}),Object.defineProperty(t,"MaterialMultiPointData",{enumerable:!0,get:function(){return n.MaterialMultiPointData}}),Object.defineProperty(t,"MaterialPointData",{enumerable:!0,get:function(){return n.MaterialPointData}}),Object.defineProperty(t,"MaterialSpecularGlossinessData",{enumerable:!0,get:function(){return n.MaterialSpecularGlossinessData}}),Object.defineProperty(t,"MaterialStandardData",{enumerable:!0,get:function(){return n.MaterialStandardData}}),Object.defineProperty(t,"MaterialUnlitData",{enumerable:!0,get:function(){return n.MaterialUnlitData}}),Object.defineProperty(t,"MaterialVariantsData",{enumerable:!0,get:function(){return n.MaterialVariantsData}}),Object.defineProperty(t,"PARAMETER_TYPE",{enumerable:!0,get:function(){return n.PARAMETER_TYPE}}),Object.defineProperty(t,"PARAMETER_VISUALIZATION",{enumerable:!0,get:function(){return n.PARAMETER_VISUALIZATION}}),Object.defineProperty(t,"PRIMITIVE_MODE",{enumerable:!0,get:function(){return n.PRIMITIVE_MODE}}),Object.defineProperty(t,"PrimitiveData",{enumerable:!0,get:function(){return n.PrimitiveData}}),Object.defineProperty(t,"SDTF_TYPEHINT",{enumerable:!0,get:function(){return n.SDTF_TYPEHINT}}),Object.defineProperty(t,"SDTFAttributeData",{enumerable:!0,get:function(){return n.SDTFAttributeData}}),Object.defineProperty(t,"SDTFAttributesData",{enumerable:!0,get:function(){return n.SDTFAttributesData}}),Object.defineProperty(t,"SDTFItemData",{enumerable:!0,get:function(){return n.SDTFItemData}}),Object.defineProperty(t,"SDTFOverviewData",{enumerable:!0,get:function(){return n.SDTFOverviewData}}),Object.defineProperty(t,"SdtfPrimitiveTypeGuard",{enumerable:!0,get:function(){return n.SdtfPrimitiveTypeGuard}}),Object.defineProperty(t,"TASK_TYPE",{enumerable:!0,get:function(){return n.TASK_TYPE}}),Object.defineProperty(t,"TEXTURE_FILTERING",{enumerable:!0,get:function(){return n.TEXTURE_FILTERING}}),Object.defineProperty(t,"TEXTURE_WRAPPING",{enumerable:!0,get:function(){return n.TEXTURE_WRAPPING}});const i=Rl();Object.defineProperty(t,"Box",{enumerable:!0,get:function(){return i.Box}}),Object.defineProperty(t,"Sphere",{enumerable:!0,get:function(){return i.Sphere}});const o=LAe;Object.defineProperty(t,"createSession",{enumerable:!0,get:function(){return o.createSession}}),Object.defineProperty(t,"sessions",{enumerable:!0,get:function(){return o.sessions}});const l=Mn;Object.defineProperty(t,"EVENTTYPE",{enumerable:!0,get:function(){return l.EVENTTYPE}}),Object.defineProperty(t,"EVENTTYPE_CAMERA",{enumerable:!0,get:function(){return l.EVENTTYPE_CAMERA}}),Object.defineProperty(t,"EVENTTYPE_DRAWING_TOOLS",{enumerable:!0,get:function(){return l.EVENTTYPE_DRAWING_TOOLS}}),Object.defineProperty(t,"EVENTTYPE_INTERACTION",{enumerable:!0,get:function(){return l.EVENTTYPE_INTERACTION}}),Object.defineProperty(t,"EVENTTYPE_OUTPUT",{enumerable:!0,get:function(){return l.EVENTTYPE_OUTPUT}}),Object.defineProperty(t,"EVENTTYPE_PARAMETER",{enumerable:!0,get:function(){return l.EVENTTYPE_PARAMETER}}),Object.defineProperty(t,"EVENTTYPE_RENDERING",{enumerable:!0,get:function(){return l.EVENTTYPE_RENDERING}}),Object.defineProperty(t,"EVENTTYPE_SCENE",{enumerable:!0,get:function(){return l.EVENTTYPE_SCENE}}),Object.defineProperty(t,"EVENTTYPE_SESSION",{enumerable:!0,get:function(){return l.EVENTTYPE_SESSION}}),Object.defineProperty(t,"EVENTTYPE_TASK",{enumerable:!0,get:function(){return l.EVENTTYPE_TASK}}),Object.defineProperty(t,"EVENTTYPE_VIEWPORT",{enumerable:!0,get:function(){return l.EVENTTYPE_VIEWPORT}}),Object.defineProperty(t,"isARError",{enumerable:!0,get:function(){return l.isARError}}),Object.defineProperty(t,"isViewerCameraError",{enumerable:!0,get:function(){return l.isViewerCameraError}}),Object.defineProperty(t,"isViewerDataProcessingError",{enumerable:!0,get:function(){return l.isViewerDataProcessingError}}),Object.defineProperty(t,"isViewerDrawingToolsError",{enumerable:!0,get:function(){return l.isViewerDrawingToolsError}}),Object.defineProperty(t,"isViewerEnvironmentMapError",{enumerable:!0,get:function(){return l.isViewerEnvironmentMapError}}),Object.defineProperty(t,"isViewerError",{enumerable:!0,get:function(){return l.isViewerError}}),Object.defineProperty(t,"isViewerGeometryBackendError",{enumerable:!0,get:function(){return l.isViewerGeometryBackendError}}),Object.defineProperty(t,"isViewerGeometryBackendGenericError",{enumerable:!0,get:function(){return l.isViewerGeometryBackendGenericError}}),Object.defineProperty(t,"isViewerGeometryBackendRequestError",{enumerable:!0,get:function(){return l.isViewerGeometryBackendRequestError}}),Object.defineProperty(t,"isViewerGeometryBackendResponseError",{enumerable:!0,get:function(){return l.isViewerGeometryBackendResponseError}}),Object.defineProperty(t,"isViewerInteractionError",{enumerable:!0,get:function(){return l.isViewerInteractionError}}),Object.defineProperty(t,"isViewerLightError",{enumerable:!0,get:function(){return l.isViewerLightError}}),Object.defineProperty(t,"isViewerSessionError",{enumerable:!0,get:function(){return l.isViewerSessionError}}),Object.defineProperty(t,"isViewerSettingsError",{enumerable:!0,get:function(){return l.isViewerSettingsError}}),Object.defineProperty(t,"isViewerUnknownError",{enumerable:!0,get:function(){return l.isViewerUnknownError}}),Object.defineProperty(t,"isViewerValidationError",{enumerable:!0,get:function(){return l.isViewerValidationError}}),Object.defineProperty(t,"isViewerViewportError",{enumerable:!0,get:function(){return l.isViewerViewportError}}),Object.defineProperty(t,"isViewerWebGLError",{enumerable:!0,get:function(){return l.isViewerWebGLError}}),Object.defineProperty(t,"LOGGING_LEVEL",{enumerable:!0,get:function(){return l.LOGGING_LEVEL}}),Object.defineProperty(t,"SESSION_SETTINGS_MODE",{enumerable:!0,get:function(){return l.SESSION_SETTINGS_MODE}}),Object.defineProperty(t,"ShapeDiverGeometryBackendError",{enumerable:!0,get:function(){return l.ShapeDiverGeometryBackendError}}),Object.defineProperty(t,"ShapeDiverGeometryBackendRequestError",{enumerable:!0,get:function(){return l.ShapeDiverGeometryBackendRequestError}}),Object.defineProperty(t,"ShapeDiverGeometryBackendResponseError",{enumerable:!0,get:function(){return l.ShapeDiverGeometryBackendResponseError}}),Object.defineProperty(t,"ShapeDiverGeometryBackendResponseErrorType",{enumerable:!0,get:function(){return l.ShapeDiverGeometryBackendResponseErrorType}}),Object.defineProperty(t,"ShapeDiverViewerArError",{enumerable:!0,get:function(){return l.ShapeDiverViewerArError}}),Object.defineProperty(t,"ShapeDiverViewerCameraError",{enumerable:!0,get:function(){return l.ShapeDiverViewerCameraError}}),Object.defineProperty(t,"ShapeDiverViewerDataProcessingError",{enumerable:!0,get:function(){return l.ShapeDiverViewerDataProcessingError}}),Object.defineProperty(t,"ShapeDiverViewerDrawingToolsError",{enumerable:!0,get:function(){return l.ShapeDiverViewerDrawingToolsError}}),Object.defineProperty(t,"ShapeDiverViewerEnvironmentMapError",{enumerable:!0,get:function(){return l.ShapeDiverViewerEnvironmentMapError}}),Object.defineProperty(t,"ShapeDiverViewerError",{enumerable:!0,get:function(){return l.ShapeDiverViewerError}}),Object.defineProperty(t,"ShapeDiverViewerErrorType",{enumerable:!0,get:function(){return l.ShapeDiverViewerErrorType}}),Object.defineProperty(t,"ShapeDiverViewerInteractionError",{enumerable:!0,get:function(){return l.ShapeDiverViewerInteractionError}}),Object.defineProperty(t,"ShapeDiverViewerLightError",{enumerable:!0,get:function(){return l.ShapeDiverViewerLightError}}),Object.defineProperty(t,"ShapeDiverViewerSessionError",{enumerable:!0,get:function(){return l.ShapeDiverViewerSessionError}}),Object.defineProperty(t,"ShapeDiverViewerSettingsError",{enumerable:!0,get:function(){return l.ShapeDiverViewerSettingsError}}),Object.defineProperty(t,"ShapeDiverViewerUnknownError",{enumerable:!0,get:function(){return l.ShapeDiverViewerUnknownError}}),Object.defineProperty(t,"ShapeDiverViewerValidationError",{enumerable:!0,get:function(){return l.ShapeDiverViewerValidationError}}),Object.defineProperty(t,"ShapeDiverViewerViewportError",{enumerable:!0,get:function(){return l.ShapeDiverViewerViewportError}}),Object.defineProperty(t,"ShapeDiverViewerWebGLError",{enumerable:!0,get:function(){return l.ShapeDiverViewerWebGLError}});const d=Cm;Object.defineProperty(t,"TAG3D_JUSTIFICATION",{enumerable:!0,get:function(){return d.TAG3D_JUSTIFICATION}});const p=Gx;Object.defineProperty(t,"SessionData",{enumerable:!0,get:function(){return p.SessionData}}),Object.defineProperty(t,"SessionOutputData",{enumerable:!0,get:function(){return p.SessionOutputData}});const g=dr;Object.defineProperty(t,"Tree",{enumerable:!0,get:function(){return g.Tree}}),Object.defineProperty(t,"TreeNode",{enumerable:!0,get:function(){return g.TreeNode}});const v=Qx;Object.defineProperty(t,"OutputApiData",{enumerable:!0,get:function(){return v.OutputApiData}});const _=Kx;Object.defineProperty(t,"SessionApiData",{enumerable:!0,get:function(){return _.SessionApiData}});const b=I0;Object.defineProperty(t,"ShapeDiverResponseModelComputationStatus",{enumerable:!0,get:function(){return b.ShapeDiverResponseModelComputationStatus}});const w=I0;Object.defineProperty(t,"EXPORT_TYPE",{enumerable:!0,get:function(){return w.ShapeDiverResponseExportDefinitionType}})})(NAe);var HAe={},$Ae={},EK={},wz={},Ez={},Ace=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},Ac=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},MW,kW,CW,sf,PW,YD;Object.defineProperty(Ez,"__esModule",{value:!0});Ez.ViewportGlobalAccessObject=void 0;const vC=Mn;class A_t{constructor(e){MW.set(this,new vC.StatePromise),kW.set(this,new vC.StatePromise),CW.set(this,new vC.StatePromise),sf.set(this,void 0),PW.set(this,[]),YD.set(this,new vC.StatePromise),Ace(this,sf,e,"f")}get boundingBoxCreated(){return Ac(this,MW,"f")}get busy(){return Ac(this,PW,"f")}get environmentMapLoaded(){return Ac(this,YD,"f")}set environmentMapLoaded(e){Ace(this,YD,e,"f")}get id(){return Ac(this,sf,"f").id}get initialized(){return Ac(this,kW,"f")}get sessionSettingsId(){return Ac(this,sf,"f").sessionSettingsId}get sessionSettingsMode(){return Ac(this,sf,"f").sessionSettingsMode}get settingsAssigned(){return Ac(this,CW,"f")}applySettings(e,n,i){return Ac(this,sf,"f").applySettings(e,n,i)}assignSettingsEngine(e){Ac(this,sf,"f").assignSettingsEngine(e)}displayErrorMessage(e){Ac(this,sf,"f").displayErrorMessage(e)}reset(){Ac(this,sf,"f").reset()}saveSettings(){Ac(this,sf,"f").saveSettings()}update(e){Ac(this,sf,"f").update(e)}}Ez.ViewportGlobalAccessObject=A_t;MW=new WeakMap,kW=new WeakMap,CW=new WeakMap,sf=new WeakMap,PW=new WeakMap,YD=new WeakMap;var _C=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})},pi=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},ud,Fy,RW,no,qD;Object.defineProperty(wz,"__esModule",{value:!0});wz.CreationControlCenterViewport=void 0;const w_t=Rl(),ia=Mn,nw=Gi,E_t=dr,S_t=yx,T_t=Ez,mG=Bf;class x_t{constructor(){ud.set(this,ia.EventEngine.instance),Fy.set(this,ia.Logger.instance),RW.set(this,E_t.Tree.instance),no.set(this,ia.StateEngine.instance),qD.set(this,ia.UuidGenerator.instance),this.viewportEngines={}}static get instance(){return this._instance||(this._instance=new this)}applyViewportSettings(e,n,i={ar:!1,scene:!1,camera:!1,light:!1,environment:!1,general:!1}){i=i||{};const o=new ia.SettingsEngine;o.loadSettings(n);const l=[];return pi(this,no,"f").viewportEngines[e].settingsAssigned.reset(),l.push(new Promise(d=>{pi(this,no,"f").viewportEngines[e].settingsAssigned.then(()=>{d()})})),this.viewportEngines[e].applySettings(i,o),new Promise(d=>Promise.all(l).then(()=>d()))}closeViewportEngine(e){return _C(this,void 0,void 0,function*(){this.viewportEngines[e]&&(pi(this,Fy,"f").debugLow(`CreationControlCenter.closeViewportEngine: Closing viewport ${e}.`),pi(this,no,"f").viewportEngines[e].initialized.resolved===!1&&(yield new Promise(n=>{pi(this,no,"f").viewportEngines[e].initialized.then(()=>n())})),pi(this,no,"f").viewportEngines[e].settingsAssigned.reset(),pi(this,no,"f").viewportEngines[e].environmentMapLoaded.reset(),pi(this,no,"f").viewportEngines[e].initialized.reset(),yield this.viewportEngines[e].close(),this.viewportEngines[e]=void 0,delete this.viewportEngines[e],delete pi(this,no,"f").viewportEngines[e],pi(this,Fy,"f").debug("CreationControlCenter.closeViewportEngine: Viewport closed."),this.updateViewport&&this.updateViewport(this.viewportEngines),pi(this,ud,"f").emitEvent(ia.EVENTTYPE.VIEWPORT.VIEWPORT_CLOSED,{viewportId:e}))})}createViewportEngine(e){return _C(this,void 0,void 0,function*(){const n=pi(this,qD,"f").create(),i=e.id||pi(this,qD,"f").create();e.id=i;try{const o={type:nw.TASK_TYPE.VIEWPORT_CREATION,id:n,progress:0,status:"Creating viewport",data:{viewportId:i}};if(pi(this,ud,"f").emitEvent(ia.EVENTTYPE.TASK.TASK_START,o),this.viewportEngines[i]){const p={type:nw.TASK_TYPE.VIEWPORT_CREATION,id:n,progress:.1,status:"Closing viewport with same id",data:{viewportId:i}};pi(this,ud,"f").emitEvent(ia.EVENTTYPE.TASK.TASK_PROCESS,p),pi(this,Fy,"f").warn(`CreationControlCenter.createViewport: Viewer with this id (${i}) already exists. Closing initial instance.`),yield this.closeViewportEngine(i)}const l=new S_t.RenderingEngine(e);if(pi(this,no,"f").viewportEngines[i]=new T_t.ViewportGlobalAccessObject(l),this.viewportEngines[i]=l,l.start(),l.cameraEngine.createDefaultCameras(),e.sessionSettingsMode===ia.SESSION_SETTINGS_MODE.MANUAL){if(!e.sessionSettingsId)throw new ia.ShapeDiverViewerViewportError("Session with sessionSettingsMode MANUAL needs to have a sessionSettingsId.");const p=e.sessionSettingsId;pi(this,no,"f").sessionEngines[p]&&(yield this.assignSettings(l.id,p,!0))}else if(e.sessionSettingsMode===ia.SESSION_SETTINGS_MODE.FIRST){const p=Object.values(pi(this,no,"f").sessionEngines).find(g=>g.isFirstSession===!0);p&&(yield this.assignSettings(l.id,p.id,!0))}l.sessionSettingsMode===ia.SESSION_SETTINGS_MODE.NONE&&l.visibility===mG.VISIBILITY_MODE.SESSION||l.visibility===mG.VISIBILITY_MODE.INSTANT?l.show=!0:l.visibility===mG.VISIBILITY_MODE.SESSION&&(pi(this,RW,"f").root.boundingBox.isEmpty()?pi(this,ud,"f").addListener(ia.EVENTTYPE.SCENE.SCENE_BOUNDING_BOX_CHANGE,p=>{const g=p;g.viewportId===l.id&&(new w_t.Box(g.boundingBox.min,g.boundingBox.max).isEmpty()?l.show=!1:pi(this,no,"f").viewportEngines[i].settingsAssigned.resolved?l.show=!0:pi(this,no,"f").viewportEngines[i].settingsAssigned.then(()=>{l.show=!0}))}):pi(this,no,"f").viewportEngines[i].settingsAssigned.resolved?l.show=!0:pi(this,no,"f").viewportEngines[i].settingsAssigned.then(()=>{l.show=!0})),pi(this,no,"f").viewportEngines[i].initialized.resolve(!0),pi(this,Fy,"f").debug(`CreationControlCenter.createViewport: Viewport(${i}) created.`);const d={type:nw.TASK_TYPE.VIEWPORT_CREATION,id:n,progress:1,status:"Viewport created",data:{viewportId:i}};return this.updateViewport&&this.updateViewport(this.viewportEngines),pi(this,ud,"f").emitEvent(ia.EVENTTYPE.VIEWPORT.VIEWPORT_CREATED,{viewportId:i}),pi(this,ud,"f").emitEvent(ia.EVENTTYPE.TASK.TASK_END,d),this.viewportEngines[i]}catch(o){const l={type:nw.TASK_TYPE.VIEWPORT_CREATION,id:n,progress:.9,status:"Viewport created failed, closing viewport",data:{viewportId:i}};pi(this,ud,"f").emitEvent(ia.EVENTTYPE.TASK.TASK_PROCESS,l);try{yield this.closeViewportEngine(i)}catch{}const d={type:nw.TASK_TYPE.VIEWPORT_CREATION,id:n,progress:1,status:"Viewport created failed, exiting",data:{viewportId:i}};throw pi(this,ud,"f").emitEvent(ia.EVENTTYPE.TASK.TASK_CANCEL,d),o}})}getViewportSettings(e){const n=this.viewportEngines[e];if(!n)throw new ia.ShapeDiverViewerViewportError("Viewport with id "+e+" could not be found.");const i=new ia.SettingsEngine;return n.saveSettings(i),i.settings}assignSettings(e,n,i=!1){return _C(this,void 0,void 0,function*(){const o=pi(this,no,"f").viewportEngines[e];pi(this,no,"f").sessionEngines[n].initialized.resolved===!0?(o.assignSettingsEngine(pi(this,no,"f").sessionEngines[n].settingsEngine),yield o.applySettings(void 0,void 0,i)):yield new Promise(l=>{pi(this,no,"f").sessionEngines[n].initialized.then(()=>_C(this,void 0,void 0,function*(){o.assignSettingsEngine(pi(this,no,"f").sessionEngines[n].settingsEngine),yield o.applySettings(void 0,void 0,i),l()}))})})}}wz.CreationControlCenterViewport=x_t;ud=new WeakMap,Fy=new WeakMap,RW=new WeakMap,no=new WeakMap,qD=new WeakMap;(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.CreationControlCenterViewport=void 0;const e=wz;Object.defineProperty(t,"CreationControlCenterViewport",{enumerable:!0,get:function(){return e.CreationControlCenterViewport}})})(EK);var Sz={},Jx={},M_t=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},WAe={},Lu={};let SK;const k_t=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Lu.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};Lu.getSymbolTotalCodewords=function(e){return k_t[e]};Lu.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};Lu.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');SK=e};Lu.isKanjiModeEnabled=function(){return typeof SK<"u"};Lu.toSJIS=function(e){return SK(e)};var Tz={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+n)}}t.isValid=function(i){return i&&typeof i.bit<"u"&&i.bit>=0&&i.bit<4},t.from=function(i,o){if(t.isValid(i))return i;try{return e(i)}catch{return o}}})(Tz);function YAe(){this.buffer=[],this.length=0}YAe.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let n=0;n<e;n++)this.putBit((t>>>e-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var C_t=YAe;function eM(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}eM.prototype.set=function(t,e,n,i){const o=t*this.size+e;this.data[o]=n,i&&(this.reservedBit[o]=!0)};eM.prototype.get=function(t,e){return this.data[t*this.size+e]};eM.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n};eM.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var P_t=eM,qAe={};(function(t){const e=Lu.getSymbolSize;t.getRowColCoords=function(i){if(i===1)return[];const o=Math.floor(i/7)+2,l=e(i),d=l===145?26:Math.ceil((l-13)/(2*o-2))*2,p=[l-7];for(let g=1;g<o-1;g++)p[g]=p[g-1]-d;return p.push(6),p.reverse()},t.getPositions=function(i){const o=[],l=t.getRowColCoords(i),d=l.length;for(let p=0;p<d;p++)for(let g=0;g<d;g++)p===0&&g===0||p===0&&g===d-1||p===d-1&&g===0||o.push([l[p],l[g]]);return o}})(qAe);var XAe={};const R_t=Lu.getSymbolSize,wce=7;XAe.getPositions=function(e){const n=R_t(e);return[[0,0],[n-wce,0],[0,n-wce]]};var ZAe={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(o){return o!=null&&o!==""&&!isNaN(o)&&o>=0&&o<=7},t.from=function(o){return t.isValid(o)?parseInt(o,10):void 0},t.getPenaltyN1=function(o){const l=o.size;let d=0,p=0,g=0,v=null,_=null;for(let b=0;b<l;b++){p=g=0,v=_=null;for(let w=0;w<l;w++){let E=o.get(b,w);E===v?p++:(p>=5&&(d+=e.N1+(p-5)),v=E,p=1),E=o.get(w,b),E===_?g++:(g>=5&&(d+=e.N1+(g-5)),_=E,g=1)}p>=5&&(d+=e.N1+(p-5)),g>=5&&(d+=e.N1+(g-5))}return d},t.getPenaltyN2=function(o){const l=o.size;let d=0;for(let p=0;p<l-1;p++)for(let g=0;g<l-1;g++){const v=o.get(p,g)+o.get(p,g+1)+o.get(p+1,g)+o.get(p+1,g+1);(v===4||v===0)&&d++}return d*e.N2},t.getPenaltyN3=function(o){const l=o.size;let d=0,p=0,g=0;for(let v=0;v<l;v++){p=g=0;for(let _=0;_<l;_++)p=p<<1&2047|o.get(v,_),_>=10&&(p===1488||p===93)&&d++,g=g<<1&2047|o.get(_,v),_>=10&&(g===1488||g===93)&&d++}return d*e.N3},t.getPenaltyN4=function(o){let l=0;const d=o.data.length;for(let g=0;g<d;g++)l+=o.data[g];return Math.abs(Math.ceil(l*100/d/5)-10)*e.N4};function n(i,o,l){switch(i){case t.Patterns.PATTERN000:return(o+l)%2===0;case t.Patterns.PATTERN001:return o%2===0;case t.Patterns.PATTERN010:return l%3===0;case t.Patterns.PATTERN011:return(o+l)%3===0;case t.Patterns.PATTERN100:return(Math.floor(o/2)+Math.floor(l/3))%2===0;case t.Patterns.PATTERN101:return o*l%2+o*l%3===0;case t.Patterns.PATTERN110:return(o*l%2+o*l%3)%2===0;case t.Patterns.PATTERN111:return(o*l%3+(o+l)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}t.applyMask=function(o,l){const d=l.size;for(let p=0;p<d;p++)for(let g=0;g<d;g++)l.isReserved(g,p)||l.xor(g,p,n(o,g,p))},t.getBestMask=function(o,l){const d=Object.keys(t.Patterns).length;let p=0,g=1/0;for(let v=0;v<d;v++){l(v),t.applyMask(v,o);const _=t.getPenaltyN1(o)+t.getPenaltyN2(o)+t.getPenaltyN3(o)+t.getPenaltyN4(o);t.applyMask(v,o),_<g&&(g=_,p=v)}return p}})(ZAe);var xz={};const H2=Tz,yC=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],bC=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];xz.getBlocksCount=function(e,n){switch(n){case H2.L:return yC[(e-1)*4+0];case H2.M:return yC[(e-1)*4+1];case H2.Q:return yC[(e-1)*4+2];case H2.H:return yC[(e-1)*4+3];default:return}};xz.getTotalCodewordsCount=function(e,n){switch(n){case H2.L:return bC[(e-1)*4+0];case H2.M:return bC[(e-1)*4+1];case H2.Q:return bC[(e-1)*4+2];case H2.H:return bC[(e-1)*4+3];default:return}};var QAe={},Mz={};const eT=new Uint8Array(512),aI=new Uint8Array(256);(function(){let e=1;for(let n=0;n<255;n++)eT[n]=e,aI[e]=n,e<<=1,e&256&&(e^=285);for(let n=255;n<512;n++)eT[n]=eT[n-255]})();Mz.log=function(e){if(e<1)throw new Error("log("+e+")");return aI[e]};Mz.exp=function(e){return eT[e]};Mz.mul=function(e,n){return e===0||n===0?0:eT[aI[e]+aI[n]]};(function(t){const e=Mz;t.mul=function(i,o){const l=new Uint8Array(i.length+o.length-1);for(let d=0;d<i.length;d++)for(let p=0;p<o.length;p++)l[d+p]^=e.mul(i[d],o[p]);return l},t.mod=function(i,o){let l=new Uint8Array(i);for(;l.length-o.length>=0;){const d=l[0];for(let g=0;g<o.length;g++)l[g]^=e.mul(o[g],d);let p=0;for(;p<l.length&&l[p]===0;)p++;l=l.slice(p)}return l},t.generateECPolynomial=function(i){let o=new Uint8Array([1]);for(let l=0;l<i;l++)o=t.mul(o,new Uint8Array([1,e.exp(l)]));return o}})(QAe);const KAe=QAe;function TK(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}TK.prototype.initialize=function(e){this.degree=e,this.genPoly=KAe.generateECPolynomial(this.degree)};TK.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(e.length+this.degree);n.set(e);const i=KAe.mod(n,this.genPoly),o=this.degree-i.length;if(o>0){const l=new Uint8Array(this.degree);return l.set(i,o),l}return i};var D_t=TK,JAe={},Bm={},xK={};xK.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var Vd={};const e3e="[0-9]+",O_t="[A-Z $%*+\\-./:]+";let i6="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";i6=i6.replace(/u/g,"\\u");const I_t="(?:(?![A-Z0-9 $%*+\\-./:]|"+i6+`)(?:.|[\r
]))+`;Vd.KANJI=new RegExp(i6,"g");Vd.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Vd.BYTE=new RegExp(I_t,"g");Vd.NUMERIC=new RegExp(e3e,"g");Vd.ALPHANUMERIC=new RegExp(O_t,"g");const N_t=new RegExp("^"+i6+"$"),L_t=new RegExp("^"+e3e+"$"),z_t=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Vd.testKanji=function(e){return N_t.test(e)};Vd.testNumeric=function(e){return L_t.test(e)};Vd.testAlphanumeric=function(e){return z_t.test(e)};(function(t){const e=xK,n=Vd;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(l,d){if(!l.ccBits)throw new Error("Invalid mode: "+l);if(!e.isValid(d))throw new Error("Invalid version: "+d);return d>=1&&d<10?l.ccBits[0]:d<27?l.ccBits[1]:l.ccBits[2]},t.getBestModeForData=function(l){return n.testNumeric(l)?t.NUMERIC:n.testAlphanumeric(l)?t.ALPHANUMERIC:n.testKanji(l)?t.KANJI:t.BYTE},t.toString=function(l){if(l&&l.id)return l.id;throw new Error("Invalid mode")},t.isValid=function(l){return l&&l.bit&&l.ccBits};function i(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+o)}}t.from=function(l,d){if(t.isValid(l))return l;try{return i(l)}catch{return d}}})(Bm);(function(t){const e=Lu,n=xz,i=Tz,o=Bm,l=xK,d=7973,p=e.getBCHDigit(d);function g(w,E,S){for(let M=1;M<=40;M++)if(E<=t.getCapacity(M,S,w))return M}function v(w,E){return o.getCharCountIndicator(w,E)+4}function _(w,E){let S=0;return w.forEach(function(M){const k=v(M.mode,E);S+=k+M.getBitsLength()}),S}function b(w,E){for(let S=1;S<=40;S++)if(_(w,S)<=t.getCapacity(S,E,o.MIXED))return S}t.from=function(E,S){return l.isValid(E)?parseInt(E,10):S},t.getCapacity=function(E,S,M){if(!l.isValid(E))throw new Error("Invalid QR Code version");typeof M>"u"&&(M=o.BYTE);const k=e.getSymbolTotalCodewords(E),x=n.getTotalCodewordsCount(E,S),C=(k-x)*8;if(M===o.MIXED)return C;const P=C-v(M,E);switch(M){case o.NUMERIC:return Math.floor(P/10*3);case o.ALPHANUMERIC:return Math.floor(P/11*2);case o.KANJI:return Math.floor(P/13);case o.BYTE:default:return Math.floor(P/8)}},t.getBestVersionForData=function(E,S){let M;const k=i.from(S,i.M);if(Array.isArray(E)){if(E.length>1)return b(E,k);if(E.length===0)return 1;M=E[0]}else M=E;return g(M.mode,M.getLength(),k)},t.getEncodedBits=function(E){if(!l.isValid(E)||E<7)throw new Error("Invalid QR Code version");let S=E<<12;for(;e.getBCHDigit(S)-p>=0;)S^=d<<e.getBCHDigit(S)-p;return E<<12|S}})(JAe);var t3e={};const DW=Lu,n3e=1335,B_t=21522,Ece=DW.getBCHDigit(n3e);t3e.getEncodedBits=function(e,n){const i=e.bit<<3|n;let o=i<<10;for(;DW.getBCHDigit(o)-Ece>=0;)o^=n3e<<DW.getBCHDigit(o)-Ece;return(i<<10|o)^B_t};var r3e={};const U_t=Bm;function C4(t){this.mode=U_t.NUMERIC,this.data=t.toString()}C4.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};C4.prototype.getLength=function(){return this.data.length};C4.prototype.getBitsLength=function(){return C4.getBitsLength(this.data.length)};C4.prototype.write=function(e){let n,i,o;for(n=0;n+3<=this.data.length;n+=3)i=this.data.substr(n,3),o=parseInt(i,10),e.put(o,10);const l=this.data.length-n;l>0&&(i=this.data.substr(n),o=parseInt(i,10),e.put(o,l*3+1))};var F_t=C4;const V_t=Bm,gG=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function P4(t){this.mode=V_t.ALPHANUMERIC,this.data=t}P4.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};P4.prototype.getLength=function(){return this.data.length};P4.prototype.getBitsLength=function(){return P4.getBitsLength(this.data.length)};P4.prototype.write=function(e){let n;for(n=0;n+2<=this.data.length;n+=2){let i=gG.indexOf(this.data[n])*45;i+=gG.indexOf(this.data[n+1]),e.put(i,11)}this.data.length%2&&e.put(gG.indexOf(this.data[n]),6)};var G_t=P4,j_t=function(e){for(var n=[],i=e.length,o=0;o<i;o++){var l=e.charCodeAt(o);if(l>=55296&&l<=56319&&i>o+1){var d=e.charCodeAt(o+1);d>=56320&&d<=57343&&(l=(l-55296)*1024+d-56320+65536,o+=1)}if(l<128){n.push(l);continue}if(l<2048){n.push(l>>6|192),n.push(l&63|128);continue}if(l<55296||l>=57344&&l<65536){n.push(l>>12|224),n.push(l>>6&63|128),n.push(l&63|128);continue}if(l>=65536&&l<=1114111){n.push(l>>18|240),n.push(l>>12&63|128),n.push(l>>6&63|128),n.push(l&63|128);continue}n.push(239,191,189)}return new Uint8Array(n).buffer};const H_t=j_t,$_t=Bm;function R4(t){this.mode=$_t.BYTE,typeof t=="string"&&(t=H_t(t)),this.data=new Uint8Array(t)}R4.getBitsLength=function(e){return e*8};R4.prototype.getLength=function(){return this.data.length};R4.prototype.getBitsLength=function(){return R4.getBitsLength(this.data.length)};R4.prototype.write=function(t){for(let e=0,n=this.data.length;e<n;e++)t.put(this.data[e],8)};var W_t=R4;const Y_t=Bm,q_t=Lu;function D4(t){this.mode=Y_t.KANJI,this.data=t}D4.getBitsLength=function(e){return e*13};D4.prototype.getLength=function(){return this.data.length};D4.prototype.getBitsLength=function(){return D4.getBitsLength(this.data.length)};D4.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let n=q_t.toSJIS(this.data[e]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),t.put(n,13)}};var X_t=D4,i3e={exports:{}};(function(t){var e={single_source_shortest_paths:function(n,i,o){var l={},d={};d[i]=0;var p=e.PriorityQueue.make();p.push(i,0);for(var g,v,_,b,w,E,S,M,k;!p.empty();){g=p.pop(),v=g.value,b=g.cost,w=n[v]||{};for(_ in w)w.hasOwnProperty(_)&&(E=w[_],S=b+E,M=d[_],k=typeof d[_]>"u",(k||M>S)&&(d[_]=S,p.push(_,S),l[_]=v))}if(typeof o<"u"&&typeof d[o]>"u"){var x=["Could not find a path from ",i," to ",o,"."].join("");throw new Error(x)}return l},extract_shortest_path_from_predecessor_list:function(n,i){for(var o=[],l=i;l;)o.push(l),n[l],l=n[l];return o.reverse(),o},find_path:function(n,i,o){var l=e.single_source_shortest_paths(n,i,o);return e.extract_shortest_path_from_predecessor_list(l,o)},PriorityQueue:{make:function(n){var i=e.PriorityQueue,o={},l;n=n||{};for(l in i)i.hasOwnProperty(l)&&(o[l]=i[l]);return o.queue=[],o.sorter=n.sorter||i.default_sorter,o},default_sorter:function(n,i){return n.cost-i.cost},push:function(n,i){var o={value:n,cost:i};this.queue.push(o),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(i3e);var Z_t=i3e.exports;(function(t){const e=Bm,n=F_t,i=G_t,o=W_t,l=X_t,d=Vd,p=Lu,g=Z_t;function v(x){return unescape(encodeURIComponent(x)).length}function _(x,C,P){const O=[];let L;for(;(L=x.exec(P))!==null;)O.push({data:L[0],index:L.index,mode:C,length:L[0].length});return O}function b(x){const C=_(d.NUMERIC,e.NUMERIC,x),P=_(d.ALPHANUMERIC,e.ALPHANUMERIC,x);let O,L;return p.isKanjiModeEnabled()?(O=_(d.BYTE,e.BYTE,x),L=_(d.KANJI,e.KANJI,x)):(O=_(d.BYTE_KANJI,e.BYTE,x),L=[]),C.concat(P,O,L).sort(function(V,G){return V.index-G.index}).map(function(V){return{data:V.data,mode:V.mode,length:V.length}})}function w(x,C){switch(C){case e.NUMERIC:return n.getBitsLength(x);case e.ALPHANUMERIC:return i.getBitsLength(x);case e.KANJI:return l.getBitsLength(x);case e.BYTE:return o.getBitsLength(x)}}function E(x){return x.reduce(function(C,P){const O=C.length-1>=0?C[C.length-1]:null;return O&&O.mode===P.mode?(C[C.length-1].data+=P.data,C):(C.push(P),C)},[])}function S(x){const C=[];for(let P=0;P<x.length;P++){const O=x[P];switch(O.mode){case e.NUMERIC:C.push([O,{data:O.data,mode:e.ALPHANUMERIC,length:O.length},{data:O.data,mode:e.BYTE,length:O.length}]);break;case e.ALPHANUMERIC:C.push([O,{data:O.data,mode:e.BYTE,length:O.length}]);break;case e.KANJI:C.push([O,{data:O.data,mode:e.BYTE,length:v(O.data)}]);break;case e.BYTE:C.push([{data:O.data,mode:e.BYTE,length:v(O.data)}])}}return C}function M(x,C){const P={},O={start:{}};let L=["start"];for(let B=0;B<x.length;B++){const V=x[B],G=[];for(let j=0;j<V.length;j++){const F=V[j],q=""+B+j;G.push(q),P[q]={node:F,lastCount:0},O[q]={};for(let fe=0;fe<L.length;fe++){const ue=L[fe];P[ue]&&P[ue].node.mode===F.mode?(O[ue][q]=w(P[ue].lastCount+F.length,F.mode)-w(P[ue].lastCount,F.mode),P[ue].lastCount+=F.length):(P[ue]&&(P[ue].lastCount=F.length),O[ue][q]=w(F.length,F.mode)+4+e.getCharCountIndicator(F.mode,C))}}L=G}for(let B=0;B<L.length;B++)O[L[B]].end=0;return{map:O,table:P}}function k(x,C){let P;const O=e.getBestModeForData(x);if(P=e.from(C,O),P!==e.BYTE&&P.bit<O.bit)throw new Error('"'+x+'" cannot be encoded with mode '+e.toString(P)+`.
 Suggested mode is: `+e.toString(O));switch(P===e.KANJI&&!p.isKanjiModeEnabled()&&(P=e.BYTE),P){case e.NUMERIC:return new n(x);case e.ALPHANUMERIC:return new i(x);case e.KANJI:return new l(x);case e.BYTE:return new o(x)}}t.fromArray=function(C){return C.reduce(function(P,O){return typeof O=="string"?P.push(k(O,null)):O.data&&P.push(k(O.data,O.mode)),P},[])},t.fromString=function(C,P){const O=b(C,p.isKanjiModeEnabled()),L=S(O),B=M(L,P),V=g.find_path(B.map,"start","end"),G=[];for(let j=1;j<V.length-1;j++)G.push(B.table[V[j]].node);return t.fromArray(E(G))},t.rawSplit=function(C){return t.fromArray(b(C,p.isKanjiModeEnabled()))}})(r3e);const kz=Lu,vG=Tz,Q_t=C_t,K_t=P_t,J_t=qAe,eyt=XAe,OW=ZAe,IW=xz,tyt=D_t,lI=JAe,nyt=t3e,ryt=Bm,_G=r3e;function iyt(t,e){const n=t.size,i=eyt.getPositions(e);for(let o=0;o<i.length;o++){const l=i[o][0],d=i[o][1];for(let p=-1;p<=7;p++)if(!(l+p<=-1||n<=l+p))for(let g=-1;g<=7;g++)d+g<=-1||n<=d+g||(p>=0&&p<=6&&(g===0||g===6)||g>=0&&g<=6&&(p===0||p===6)||p>=2&&p<=4&&g>=2&&g<=4?t.set(l+p,d+g,!0,!0):t.set(l+p,d+g,!1,!0))}}function syt(t){const e=t.size;for(let n=8;n<e-8;n++){const i=n%2===0;t.set(n,6,i,!0),t.set(6,n,i,!0)}}function oyt(t,e){const n=J_t.getPositions(e);for(let i=0;i<n.length;i++){const o=n[i][0],l=n[i][1];for(let d=-2;d<=2;d++)for(let p=-2;p<=2;p++)d===-2||d===2||p===-2||p===2||d===0&&p===0?t.set(o+d,l+p,!0,!0):t.set(o+d,l+p,!1,!0)}}function ayt(t,e){const n=t.size,i=lI.getEncodedBits(e);let o,l,d;for(let p=0;p<18;p++)o=Math.floor(p/3),l=p%3+n-8-3,d=(i>>p&1)===1,t.set(o,l,d,!0),t.set(l,o,d,!0)}function yG(t,e,n){const i=t.size,o=nyt.getEncodedBits(e,n);let l,d;for(l=0;l<15;l++)d=(o>>l&1)===1,l<6?t.set(l,8,d,!0):l<8?t.set(l+1,8,d,!0):t.set(i-15+l,8,d,!0),l<8?t.set(8,i-l-1,d,!0):l<9?t.set(8,15-l-1+1,d,!0):t.set(8,15-l-1,d,!0);t.set(i-8,8,1,!0)}function lyt(t,e){const n=t.size;let i=-1,o=n-1,l=7,d=0;for(let p=n-1;p>0;p-=2)for(p===6&&p--;;){for(let g=0;g<2;g++)if(!t.isReserved(o,p-g)){let v=!1;d<e.length&&(v=(e[d]>>>l&1)===1),t.set(o,p-g,v),l--,l===-1&&(d++,l=7)}if(o+=i,o<0||n<=o){o-=i,i=-i;break}}}function cyt(t,e,n){const i=new Q_t;n.forEach(function(g){i.put(g.mode.bit,4),i.put(g.getLength(),ryt.getCharCountIndicator(g.mode,t)),g.write(i)});const o=kz.getSymbolTotalCodewords(t),l=IW.getTotalCodewordsCount(t,e),d=(o-l)*8;for(i.getLengthInBits()+4<=d&&i.put(0,4);i.getLengthInBits()%8!==0;)i.putBit(0);const p=(d-i.getLengthInBits())/8;for(let g=0;g<p;g++)i.put(g%2?17:236,8);return uyt(i,t,e)}function uyt(t,e,n){const i=kz.getSymbolTotalCodewords(e),o=IW.getTotalCodewordsCount(e,n),l=i-o,d=IW.getBlocksCount(e,n),p=i%d,g=d-p,v=Math.floor(i/d),_=Math.floor(l/d),b=_+1,w=v-_,E=new tyt(w);let S=0;const M=new Array(d),k=new Array(d);let x=0;const C=new Uint8Array(t.buffer);for(let V=0;V<d;V++){const G=V<g?_:b;M[V]=C.slice(S,S+G),k[V]=E.encode(M[V]),S+=G,x=Math.max(x,G)}const P=new Uint8Array(i);let O=0,L,B;for(L=0;L<x;L++)for(B=0;B<d;B++)L<M[B].length&&(P[O++]=M[B][L]);for(L=0;L<w;L++)for(B=0;B<d;B++)P[O++]=k[B][L];return P}function fyt(t,e,n,i){let o;if(Array.isArray(t))o=_G.fromArray(t);else if(typeof t=="string"){let v=e;if(!v){const _=_G.rawSplit(t);v=lI.getBestVersionForData(_,n)}o=_G.fromString(t,v||40)}else throw new Error("Invalid data");const l=lI.getBestVersionForData(o,n);if(!l)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=l;else if(e<l)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+l+`.
`);const d=cyt(e,n,o),p=kz.getSymbolSize(e),g=new K_t(p);return iyt(g,e),syt(g),oyt(g,e),yG(g,n,0),e>=7&&ayt(g,e),lyt(g,d),isNaN(i)&&(i=OW.getBestMask(g,yG.bind(null,g,n))),OW.applyMask(i,g),yG(g,n,i),{modules:g,version:e,errorCorrectionLevel:n,maskPattern:i,segments:o}}WAe.create=function(e,n){if(typeof e>"u"||e==="")throw new Error("No input text");let i=vG.M,o,l;return typeof n<"u"&&(i=vG.from(n.errorCorrectionLevel,vG.M),o=lI.from(n.version),l=OW.from(n.maskPattern),n.toSJISFunc&&kz.setToSJISFunction(n.toSJISFunc)),fyt(e,o,i,l)};var s3e={},MK={};(function(t){function e(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let i=n.slice().replace("#","").split("");if(i.length<3||i.length===5||i.length>8)throw new Error("Invalid hex color: "+n);(i.length===3||i.length===4)&&(i=Array.prototype.concat.apply([],i.map(function(l){return[l,l]}))),i.length===6&&i.push("F","F");const o=parseInt(i.join(""),16);return{r:o>>24&255,g:o>>16&255,b:o>>8&255,a:o&255,hex:"#"+i.slice(0,6).join("")}}t.getOptions=function(i){i||(i={}),i.color||(i.color={});const o=typeof i.margin>"u"||i.margin===null||i.margin<0?4:i.margin,l=i.width&&i.width>=21?i.width:void 0,d=i.scale||4;return{width:l,scale:l?4:d,margin:o,color:{dark:e(i.color.dark||"#000000ff"),light:e(i.color.light||"#ffffffff")},type:i.type,rendererOpts:i.rendererOpts||{}}},t.getScale=function(i,o){return o.width&&o.width>=i+o.margin*2?o.width/(i+o.margin*2):o.scale},t.getImageWidth=function(i,o){const l=t.getScale(i,o);return Math.floor((i+o.margin*2)*l)},t.qrToImageData=function(i,o,l){const d=o.modules.size,p=o.modules.data,g=t.getScale(d,l),v=Math.floor((d+l.margin*2)*g),_=l.margin*g,b=[l.color.light,l.color.dark];for(let w=0;w<v;w++)for(let E=0;E<v;E++){let S=(w*v+E)*4,M=l.color.light;if(w>=_&&E>=_&&w<v-_&&E<v-_){const k=Math.floor((w-_)/g),x=Math.floor((E-_)/g);M=b[p[k*d+x]?1:0]}i[S++]=M.r,i[S++]=M.g,i[S++]=M.b,i[S]=M.a}}})(MK);(function(t){const e=MK;function n(o,l,d){o.clearRect(0,0,l.width,l.height),l.style||(l.style={}),l.height=d,l.width=d,l.style.height=d+"px",l.style.width=d+"px"}function i(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(l,d,p){let g=p,v=d;typeof g>"u"&&(!d||!d.getContext)&&(g=d,d=void 0),d||(v=i()),g=e.getOptions(g);const _=e.getImageWidth(l.modules.size,g),b=v.getContext("2d"),w=b.createImageData(_,_);return e.qrToImageData(w.data,l,g),n(b,v,_),b.putImageData(w,0,0),v},t.renderToDataURL=function(l,d,p){let g=p;typeof g>"u"&&(!d||!d.getContext)&&(g=d,d=void 0),g||(g={});const v=t.render(l,d,g),_=g.type||"image/png",b=g.rendererOpts||{};return v.toDataURL(_,b.quality)}})(s3e);var o3e={};const dyt=MK;function Sce(t,e){const n=t.a/255,i=e+'="'+t.hex+'"';return n<1?i+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':i}function bG(t,e,n){let i=t+e;return typeof n<"u"&&(i+=" "+n),i}function hyt(t,e,n){let i="",o=0,l=!1,d=0;for(let p=0;p<t.length;p++){const g=Math.floor(p%e),v=Math.floor(p/e);!g&&!l&&(l=!0),t[p]?(d++,p>0&&g>0&&t[p-1]||(i+=l?bG("M",g+n,.5+v+n):bG("m",o,0),o=0,l=!1),g+1<e&&t[p+1]||(i+=bG("h",d),d=0)):o++}return i}o3e.render=function(e,n,i){const o=dyt.getOptions(n),l=e.modules.size,d=e.modules.data,p=l+o.margin*2,g=o.color.light.a?"<path "+Sce(o.color.light,"fill")+' d="M0 0h'+p+"v"+p+'H0z"/>':"",v="<path "+Sce(o.color.dark,"stroke")+' d="'+hyt(d,l,o.margin)+'"/>',_='viewBox="0 0 '+p+" "+p+'"',w='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+_+' shape-rendering="crispEdges">'+g+v+`</svg>
`;return typeof i=="function"&&i(null,w),w};const pyt=M_t,NW=WAe,a3e=s3e,myt=o3e;function kK(t,e,n,i,o){const l=[].slice.call(arguments,1),d=l.length,p=typeof l[d-1]=="function";if(!p&&!pyt())throw new Error("Callback required as last argument");if(p){if(d<2)throw new Error("Too few arguments provided");d===2?(o=n,n=e,e=i=void 0):d===3&&(e.getContext&&typeof o>"u"?(o=i,i=void 0):(o=i,i=n,n=e,e=void 0))}else{if(d<1)throw new Error("Too few arguments provided");return d===1?(n=e,e=i=void 0):d===2&&!e.getContext&&(i=n,n=e,e=void 0),new Promise(function(g,v){try{const _=NW.create(n,i);g(t(_,e,i))}catch(_){v(_)}})}try{const g=NW.create(n,i);o(null,t(g,e,i))}catch(g){o(g)}}Jx.create=NW.create;Jx.toCanvas=kK.bind(null,a3e.render);Jx.toDataURL=kK.bind(null,a3e.renderToDataURL);Jx.toString=kK.bind(null,function(t,e,n){return myt.render(t,n)});var Cz={},Pz={},Um={},Tce=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},fo=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},Vy,hu,Gy,fg;Object.defineProperty(Um,"__esModule",{value:!0});Um.AbstractLightApi=void 0;const xce=Mn;class gyt{constructor(e,n){Vy.set(this,xce.InputValidator.instance),hu.set(this,void 0),Gy.set(this,xce.Logger.instance),fg.set(this,void 0),this.scope="AbstractLightApi",Tce(this,fg,e,"f"),Tce(this,hu,n,"f")}get color(){return fo(this,hu,"f").color}set color(e){const n="color";fo(this,Vy,"f").validateAndError(`${this.scope}.${n}`,e,"color"),fo(this,hu,"f").color=e,fo(this,Gy,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),fo(this,fg,"f").update()}get id(){return fo(this,hu,"f").id}get intensity(){return fo(this,hu,"f").intensity}set intensity(e){const n="intensity";fo(this,Vy,"f").validateAndError(`${this.scope}.${n}`,e,"number"),fo(this,hu,"f").intensity=e,fo(this,Gy,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),fo(this,fg,"f").update()}get name(){return fo(this,hu,"f").name}set name(e){const n="name";fo(this,Vy,"f").validateAndError(`${this.scope}.${n}`,e,"string",!1),fo(this,hu,"f").name=e,fo(this,Gy,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),fo(this,fg,"f").update()}get order(){return fo(this,hu,"f").order}set order(e){const n="order";fo(this,Vy,"f").validateAndError(`${this.scope}.${n}`,e,"number",!1),fo(this,hu,"f").order=e,fo(this,Gy,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),fo(this,fg,"f").update()}get type(){return fo(this,hu,"f").type}}Um.AbstractLightApi=gyt;Vy=new WeakMap,hu=new WeakMap,Gy=new WeakMap,fg=new WeakMap;var Mce=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},LW,zW;Object.defineProperty(Pz,"__esModule",{value:!0});Pz.AmbientLightApi=void 0;const vyt=Um;class _yt extends vyt.AbstractLightApi{constructor(e,n){super(e,n),LW.set(this,void 0),zW.set(this,void 0),Mce(this,zW,e,"f"),Mce(this,LW,n,"f"),this.scope="AmbientLightApi"}}Pz.AmbientLightApi=_yt;LW=new WeakMap,zW=new WeakMap;var Rz={},kce=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},Fo=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},jy,a0,Hy,dg;Object.defineProperty(Rz,"__esModule",{value:!0});Rz.DirectionalLightApi=void 0;const yyt=Um,Cce=Mn;class byt extends yyt.AbstractLightApi{constructor(e,n){super(e,n),jy.set(this,Cce.InputValidator.instance),a0.set(this,void 0),Hy.set(this,Cce.Logger.instance),dg.set(this,void 0),kce(this,dg,e,"f"),kce(this,a0,n,"f"),this.scope="DirectionalLightApi"}get castShadow(){return Fo(this,a0,"f").castShadow}set castShadow(e){const n="castShadow";Fo(this,jy,"f").validateAndError(`${this.scope}.${n}`,e,"boolean"),Fo(this,a0,"f").castShadow=e,Fo(this,Hy,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),Fo(this,dg,"f").update()}get direction(){return Fo(this,a0,"f").direction}set direction(e){const n="direction";Fo(this,jy,"f").validateAndError(`${this.scope}.${n}`,e,"vec3"),Fo(this,a0,"f").direction=e,Fo(this,Hy,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),Fo(this,dg,"f").update()}get shadowMapBias(){return Fo(this,a0,"f").shadowMapBias}set shadowMapBias(e){const n="shadowMapBias";Fo(this,jy,"f").validateAndError(`${this.scope}.${n}`,e,"number"),Fo(this,a0,"f").shadowMapBias=e,Fo(this,Hy,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),Fo(this,dg,"f").update()}get shadowMapResolution(){return Fo(this,a0,"f").shadowMapResolution}set shadowMapResolution(e){const n="shadowMapResolution";Fo(this,jy,"f").validateAndError(`${this.scope}.${n}`,e,"number"),Fo(this,a0,"f").shadowMapResolution=e,Fo(this,Hy,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),Fo(this,dg,"f").update()}}Rz.DirectionalLightApi=byt;jy=new WeakMap,a0=new WeakMap,Hy=new WeakMap,dg=new WeakMap;var Dz={},Pce=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},rw=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},BW,CS,UW,XD;Object.defineProperty(Dz,"__esModule",{value:!0});Dz.HemisphereLightApi=void 0;const Ayt=Um,Rce=Mn;class wyt extends Ayt.AbstractLightApi{constructor(e,n){super(e,n),BW.set(this,Rce.InputValidator.instance),CS.set(this,void 0),UW.set(this,Rce.Logger.instance),XD.set(this,void 0),Pce(this,XD,e,"f"),Pce(this,CS,n,"f"),this.scope="HemisphereLightApi"}get groundColor(){return rw(this,CS,"f").groundColor}set groundColor(e){const n="groundColor";rw(this,BW,"f").validateAndError(`${this.scope}.${n}`,e,"color"),rw(this,CS,"f").groundColor=e,rw(this,UW,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),rw(this,XD,"f").update()}}Dz.HemisphereLightApi=wyt;BW=new WeakMap,CS=new WeakMap,UW=new WeakMap,XD=new WeakMap;var Oz={},Dce=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},jl=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},PS,Ph,RS,$y;Object.defineProperty(Oz,"__esModule",{value:!0});Oz.PointLightApi=void 0;const Eyt=Um,Oce=Mn;class Syt extends Eyt.AbstractLightApi{constructor(e,n){super(e,n),PS.set(this,Oce.InputValidator.instance),Ph.set(this,void 0),RS.set(this,Oce.Logger.instance),$y.set(this,void 0),Dce(this,$y,e,"f"),Dce(this,Ph,n,"f"),this.scope="PointLightApi"}get decay(){return jl(this,Ph,"f").decay}set decay(e){const n="decay";jl(this,PS,"f").validateAndError(`${this.scope}.${n}`,e,"number"),jl(this,Ph,"f").decay=e,jl(this,RS,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),jl(this,$y,"f").update()}get distance(){return jl(this,Ph,"f").distance}set distance(e){const n="distance";jl(this,PS,"f").validateAndError(`${this.scope}.${n}`,e,"number"),jl(this,Ph,"f").distance=e,jl(this,RS,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),jl(this,$y,"f").update()}get position(){return jl(this,Ph,"f").position}set position(e){const n="position";jl(this,PS,"f").validateAndError(`${this.scope}.${n}`,e,"vec3"),jl(this,Ph,"f").position=e,jl(this,RS,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),jl(this,$y,"f").update()}}Oz.PointLightApi=Syt;PS=new WeakMap,Ph=new WeakMap,RS=new WeakMap,$y=new WeakMap;var Iz={},Ice=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},es=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},E2,Hl,S2,Rh;Object.defineProperty(Iz,"__esModule",{value:!0});Iz.SpotLightApi=void 0;const Tyt=Um,Nce=Mn;class xyt extends Tyt.AbstractLightApi{constructor(e,n){super(e,n),E2.set(this,Nce.InputValidator.instance),Hl.set(this,void 0),S2.set(this,Nce.Logger.instance),Rh.set(this,void 0),Ice(this,Rh,e,"f"),Ice(this,Hl,n,"f"),this.scope="SpotLightApi"}get angle(){return es(this,Hl,"f").angle}set angle(e){const n="angle";es(this,E2,"f").validateAndError(`${this.scope}.${n}`,e,"number"),es(this,Hl,"f").angle=e,es(this,S2,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),es(this,Rh,"f").update()}get decay(){return es(this,Hl,"f").decay}set decay(e){const n="decay";es(this,E2,"f").validateAndError(`${this.scope}.${n}`,e,"number"),es(this,Hl,"f").decay=e,es(this,S2,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),es(this,Rh,"f").update()}get distance(){return es(this,Hl,"f").distance}set distance(e){const n="distance";es(this,E2,"f").validateAndError(`${this.scope}.${n}`,e,"number"),es(this,Hl,"f").distance=e,es(this,S2,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),es(this,Rh,"f").update()}get penumbra(){return es(this,Hl,"f").penumbra}set penumbra(e){const n="penumbra";es(this,E2,"f").validateAndError(`${this.scope}.${n}`,e,"number"),es(this,Hl,"f").penumbra=e,es(this,S2,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),es(this,Rh,"f").update()}get position(){return es(this,Hl,"f").position}set position(e){const n="position";es(this,E2,"f").validateAndError(`${this.scope}.${n}`,e,"vec3"),es(this,Hl,"f").position=e,es(this,S2,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),es(this,Rh,"f").update()}get target(){return es(this,Hl,"f").target}set target(e){const n="target";es(this,E2,"f").validateAndError(`${this.scope}.${n}`,e,"vec3"),es(this,Hl,"f").target=e,es(this,S2,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),es(this,Rh,"f").update()}}Iz.SpotLightApi=xyt;E2=new WeakMap,Hl=new WeakMap,S2=new WeakMap,Rh=new WeakMap;var Lce=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},ln=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},Ur,ro,El,FW,Sc;Object.defineProperty(Cz,"__esModule",{value:!0});Cz.LightSceneApi=void 0;const Myt=Pz,kyt=Rz,Cyt=Dz,iw=Pm,zce=Mn,Pyt=Oz,Ryt=Iz;class Dyt{constructor(e,n){Ur.set(this,zce.InputValidator.instance),ro.set(this,void 0),El.set(this,{}),FW.set(this,zce.Logger.instance),Sc.set(this,void 0),Lce(this,Sc,e,"f"),Lce(this,ro,n,"f"),ln(this,ro,"f").update=()=>{for(const i in ln(this,ro,"f").lights)if(!ln(this,El,"f")[i])switch(ln(this,ro,"f").lights[i].type){case iw.LIGHT_TYPE.AMBIENT:ln(this,El,"f")[i]=new Myt.AmbientLightApi(ln(this,Sc,"f"),ln(this,ro,"f").lights[i]);break;case iw.LIGHT_TYPE.DIRECTIONAL:ln(this,El,"f")[i]=new kyt.DirectionalLightApi(ln(this,Sc,"f"),ln(this,ro,"f").lights[i]);break;case iw.LIGHT_TYPE.HEMISPHERE:ln(this,El,"f")[i]=new Cyt.HemisphereLightApi(ln(this,Sc,"f"),ln(this,ro,"f").lights[i]);break;case iw.LIGHT_TYPE.POINT:ln(this,El,"f")[i]=new Pyt.PointLightApi(ln(this,Sc,"f"),ln(this,ro,"f").lights[i]);break;case iw.LIGHT_TYPE.SPOT:ln(this,El,"f")[i]=new Ryt.SpotLightApi(ln(this,Sc,"f"),ln(this,ro,"f").lights[i]);break}for(const i in ln(this,El,"f"))ln(this,ro,"f").lights[i]||delete ln(this,El,"f")[i]},ln(this,ro,"f").update()}get id(){return ln(this,ro,"f").id}get lights(){return ln(this,El,"f")}get name(){return ln(this,ro,"f").name}set name(e){const n="name";ln(this,Ur,"f").validateAndError(`LightSceneApi.${n}`,e,"string",!1),ln(this,ro,"f").name=e,ln(this,FW,"f").debug(`LightSceneApi.${n}: ${n} was set to: ${e}`)}get node(){return ln(this,ro,"f").node}addAmbientLight(e){const n="addAmbientLight";ln(this,Ur,"f").validateAndError(`LightSceneApi.${n}`,e,"object",!1);const i=Object.assign({},e);ln(this,Ur,"f").validateAndError(`LightSceneApi.${n}`,i.color,"color",!1),ln(this,Ur,"f").validateAndError(`LightSceneApi.${n}`,i.intensity,"number",!1),ln(this,Ur,"f").validateAndError(`LightSceneApi.${n}`,i.id,"string",!1),ln(this,Ur,"f").validateAndError(`LightSceneApi.${n}`,i.name,"string",!1);const o=ln(this,ro,"f").addAmbientLight(e);return ln(this,Sc,"f").update(),ln(this,El,"f")[o.id]}addDirectionalLight(e){const n="addDirectionalLight";ln(this,Ur,"f").validateAndError(`LightSceneApi.${n}`,e,"object",!1);const i=Object.assign({},e);ln(this,Ur,"f").validateAndError(`LightSceneApi.${n}`,i.color,"color",!1),ln(this,Ur,"f").validateAndError(`LightSceneApi.${n}`,i.intensity,"number",!1),ln(this,Ur,"f").validateAndError(`LightSceneApi.${n}`,i.direction,"vec3",!1),ln(this,Ur,"f").validateAndError(`LightSceneApi.${n}`,i.castShadow,"boolean",!1),ln(this,Ur,"f").validateAndError(`LightSceneApi.${n}`,i.shadowMapResolution,"number",!1),ln(this,Ur,"f").validateAndError(`LightSceneApi.${n}`,i.shadowMapBias,"number",!1),ln(this,Ur,"f").validateAndError(`LightSceneApi.${n}`,i.id,"string",!1),ln(this,Ur,"f").validateAndError(`LightSceneApi.${n}`,i.name,"string",!1);const o=ln(this,ro,"f").addDirectionalLight(e);return ln(this,Sc,"f").update(),ln(this,El,"f")[o.id]}addHemisphereLight(e){const n="addHemisphereLight";ln(this,Ur,"f").validateAndError(`LightSceneApi.${n}`,e,"object",!1);const i=Object.assign({},e);ln(this,Ur,"f").validateAndError(`LightSceneApi.${n}`,i.color,"color",!1),ln(this,Ur,"f").validateAndError(`LightSceneApi.${n}`,i.intensity,"number",!1),ln(this,Ur,"f").validateAndError(`LightSceneApi.${n}`,i.groundColor,"color",!1),ln(this,Ur,"f").validateAndError(`LightSceneApi.${n}`,i.id,"string",!1),ln(this,Ur,"f").validateAndError(`LightSceneApi.${n}`,i.name,"string",!1);const o=ln(this,ro,"f").addHemisphereLight(e);return ln(this,Sc,"f").update(),ln(this,El,"f")[o.id]}addPointLight(e){const n="addPointLight";ln(this,Ur,"f").validateAndError(`LightSceneApi.${n}`,e,"object",!1);const i=Object.assign({},e);ln(this,Ur,"f").validateAndError(`LightSceneApi.${n}`,i.color,"color",!1),ln(this,Ur,"f").validateAndError(`LightSceneApi.${n}`,i.intensity,"number",!1),ln(this,Ur,"f").validateAndError(`LightSceneApi.${n}`,i.position,"vec3",!1),ln(this,Ur,"f").validateAndError(`LightSceneApi.${n}`,i.distance,"number",!1),ln(this,Ur,"f").validateAndError(`LightSceneApi.${n}`,i.decay,"number",!1),ln(this,Ur,"f").validateAndError(`LightSceneApi.${n}`,i.id,"string",!1),ln(this,Ur,"f").validateAndError(`LightSceneApi.${n}`,i.name,"string",!1);const o=ln(this,ro,"f").addPointLight(e);return ln(this,Sc,"f").update(),ln(this,El,"f")[o.id]}addSpotLight(e){const n="addSpotLight";ln(this,Ur,"f").validateAndError(`LightSceneApi.${n}`,e,"object",!1);const i=Object.assign({},e);ln(this,Ur,"f").validateAndError(`LightSceneApi.${n}`,i.color,"color",!1),ln(this,Ur,"f").validateAndError(`LightSceneApi.${n}`,i.intensity,"number",!1),ln(this,Ur,"f").validateAndError(`LightSceneApi.${n}`,i.position,"vec3",!1),ln(this,Ur,"f").validateAndError(`LightSceneApi.${n}`,i.target,"vec3",!1),ln(this,Ur,"f").validateAndError(`LightSceneApi.${n}`,i.distance,"number",!1),ln(this,Ur,"f").validateAndError(`LightSceneApi.${n}`,i.decay,"number",!1),ln(this,Ur,"f").validateAndError(`LightSceneApi.${n}`,i.angle,"number",!1),ln(this,Ur,"f").validateAndError(`LightSceneApi.${n}`,i.penumbra,"number",!1),ln(this,Ur,"f").validateAndError(`LightSceneApi.${n}`,i.id,"string",!1),ln(this,Ur,"f").validateAndError(`LightSceneApi.${n}`,i.name,"string",!1);const o=ln(this,ro,"f").addSpotLight(e);return ln(this,Sc,"f").update(),ln(this,El,"f")[o.id]}removeLight(e){const n=ln(this,ro,"f").removeLight(e);return ln(this,Sc,"f").update(),n}}Cz.LightSceneApi=Dyt;Ur=new WeakMap,ro=new WeakMap,El=new WeakMap,FW=new WeakMap,Sc=new WeakMap;var Nz={},tM={},Bce=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},Ze=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},cn,Dn,oi,Wy,ii;Object.defineProperty(tM,"__esModule",{value:!0});tM.AbstractCameraApi=void 0;const Uce=Rl(),AC=Mn;class Oyt{constructor(e,n){cn.set(this,void 0),Dn.set(this,AC.InputValidator.instance),oi.set(this,AC.Logger.instance),Wy.set(this,(i,o)=>{Ze(this,Dn,"f").validateAndError(`${this.scope}.${i}`,o,"object",!1);const l=Object.assign({},o);Ze(this,Dn,"f").validateAndError(`${this.scope}.${i}`,l.easing,"string",!1),Ze(this,Dn,"f").validateAndError(`${this.scope}.${i}`,l.duration,"number",!1),Ze(this,Dn,"f").validateAndError(`${this.scope}.${i}`,l.coordinates,"string",!1),Ze(this,Dn,"f").validateAndError(`${this.scope}.${i}`,l.interpolation,"string",!1)}),ii.set(this,void 0),this.scope="AbstractCameraApi",Bce(this,ii,e,"f"),Bce(this,cn,n,"f")}get autoAdjust(){return Ze(this,cn,"f").autoAdjust}set autoAdjust(e){const n="autoAdjust";Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e,"boolean"),Ze(this,cn,"f").autoAdjust=e,Ze(this,oi,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),Ze(this,ii,"f").update()}get autoRotationSpeed(){return Ze(this,cn,"f").controls.autoRotationSpeed}set autoRotationSpeed(e){const n="autoRotationSpeed";Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e,"number"),Ze(this,cn,"f").controls.autoRotationSpeed=e,Ze(this,oi,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),Ze(this,ii,"f").update()}get cameraMovementDuration(){return Ze(this,cn,"f").cameraMovementDuration}set cameraMovementDuration(e){const n="cameraMovementDuration";Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e,"number"),Ze(this,cn,"f").cameraMovementDuration=e,Ze(this,oi,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),Ze(this,ii,"f").update()}get cubePositionRestriction(){return Ze(this,cn,"f").controls.cubePositionRestriction}set cubePositionRestriction(e){const n="cubePositionRestriction";Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e,"object"),Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e.min,"vec3"),Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e.max,"vec3"),Ze(this,cn,"f").controls.cubePositionRestriction=e,Ze(this,oi,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),Ze(this,ii,"f").update()}get cubeTargetRestriction(){return Ze(this,cn,"f").controls.cubeTargetRestriction}set cubeTargetRestriction(e){const n="cubeTargetRestriction";Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e,"object"),Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e.min,"vec3"),Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e.max,"vec3"),Ze(this,cn,"f").controls.cubeTargetRestriction=e,Ze(this,oi,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),Ze(this,ii,"f").update()}get damping(){return Ze(this,cn,"f").controls.damping}set damping(e){const n="damping";Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e,"number"),Ze(this,cn,"f").controls.damping=e,Ze(this,oi,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),Ze(this,ii,"f").update()}get defaultPosition(){return Ze(this,cn,"f").defaultPosition}set defaultPosition(e){const n="defaultPosition";Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e,"vec3"),Ze(this,cn,"f").defaultPosition=e,Ze(this,oi,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),Ze(this,ii,"f").update()}get defaultTarget(){return Ze(this,cn,"f").defaultTarget}set defaultTarget(e){const n="defaultTarget";Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e,"vec3"),Ze(this,cn,"f").defaultTarget=e,Ze(this,oi,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),Ze(this,ii,"f").update()}get enableAutoRotation(){return Ze(this,cn,"f").controls.enableAutoRotation}set enableAutoRotation(e){const n="enableAutoRotation";Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e,"boolean"),Ze(this,cn,"f").controls.enableAutoRotation=e,Ze(this,oi,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),Ze(this,ii,"f").update()}get enableAzimuthRotation(){return Ze(this,cn,"f").controls.enableAzimuthRotation}set enableAzimuthRotation(e){const n="enableAzimuthRotation";Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e,"boolean"),Ze(this,cn,"f").controls.enableAzimuthRotation=e,Ze(this,oi,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),Ze(this,ii,"f").update()}get enableKeyPan(){return Ze(this,cn,"f").controls.enableKeyPan}set enableKeyPan(e){const n="enableKeyPan";Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e,"boolean"),Ze(this,cn,"f").controls.enableKeyPan=e,Ze(this,oi,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),Ze(this,ii,"f").update()}get enableObjectControls(){return Ze(this,cn,"f").controls.enableObjectControls}set enableObjectControls(e){const n="enableObjectControls";Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e,"boolean"),Ze(this,cn,"f").controls.enableObjectControls=e,Ze(this,oi,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),Ze(this,ii,"f").update()}get enablePan(){return Ze(this,cn,"f").controls.enablePan}set enablePan(e){const n="enablePan";Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e,"boolean"),Ze(this,cn,"f").controls.enablePan=e,Ze(this,oi,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),Ze(this,ii,"f").update()}get enablePolarRotation(){return Ze(this,cn,"f").controls.enablePolarRotation}set enablePolarRotation(e){const n="enablePolarRotation";Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e,"boolean"),Ze(this,cn,"f").controls.enablePolarRotation=e,Ze(this,oi,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),Ze(this,ii,"f").update()}get enableRotation(){return Ze(this,cn,"f").controls.enableRotation}set enableRotation(e){const n="enableRotation";Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e,"boolean"),Ze(this,cn,"f").controls.enableRotation=e,Ze(this,oi,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),Ze(this,ii,"f").update()}get enableTurntableControls(){return Ze(this,cn,"f").controls.enableTurntableControls}set enableTurntableControls(e){const n="enableTurntableControls";Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e,"boolean"),Ze(this,cn,"f").controls.enableTurntableControls=e,Ze(this,oi,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),Ze(this,ii,"f").update()}get enableZoom(){return Ze(this,cn,"f").controls.enableZoom}set enableZoom(e){const n="enableZoom";Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e,"boolean"),Ze(this,cn,"f").controls.enableZoom=e,Ze(this,oi,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),Ze(this,ii,"f").update()}get enabled(){return Ze(this,cn,"f").controls.enabled}set enabled(e){const n="enabled";Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e,"boolean"),Ze(this,cn,"f").controls.enabled=e,Ze(this,oi,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),Ze(this,ii,"f").update()}get id(){return Ze(this,cn,"f").id}get keyPanSpeed(){return Ze(this,cn,"f").controls.keyPanSpeed}set keyPanSpeed(e){const n="keyPanSpeed";Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e,"number"),Ze(this,cn,"f").controls.keyPanSpeed=e,Ze(this,oi,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),Ze(this,ii,"f").update()}get movementSmoothness(){return Ze(this,cn,"f").controls.movementSmoothness}set movementSmoothness(e){const n="movementSmoothness";Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e,"number"),Ze(this,cn,"f").controls.movementSmoothness=e,Ze(this,oi,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),Ze(this,ii,"f").update()}get name(){return Ze(this,cn,"f").name}set name(e){const n="name";Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e,"string",!1),Ze(this,cn,"f").name=e,Ze(this,oi,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),Ze(this,ii,"f").update()}get objectControlsCenter(){return Ze(this,cn,"f").controls.objectControlsCenter}set objectControlsCenter(e){const n="objectControlsCenter";Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e,"vec3"),Ze(this,cn,"f").controls.objectControlsCenter=e,Ze(this,oi,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),Ze(this,ii,"f").update()}get order(){return Ze(this,cn,"f").order}set order(e){const n="order";Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e,"number",!1),Ze(this,cn,"f").order=e,Ze(this,oi,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),Ze(this,ii,"f").update()}get panSpeed(){return Ze(this,cn,"f").controls.panSpeed}set panSpeed(e){const n="panSpeed";Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e,"number"),Ze(this,cn,"f").controls.panSpeed=e,Ze(this,oi,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),Ze(this,ii,"f").update()}get position(){return Ze(this,cn,"f").position}set position(e){const n="position";Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e,"vec3"),Ze(this,cn,"f").position=e,Ze(this,oi,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),Ze(this,ii,"f").update()}get revertAtMouseUp(){return Ze(this,cn,"f").revertAtMouseUp}set revertAtMouseUp(e){const n="revertAtMouseUp";Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e,"boolean"),Ze(this,cn,"f").revertAtMouseUp=e,Ze(this,oi,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),Ze(this,ii,"f").update()}get revertAtMouseUpDuration(){return Ze(this,cn,"f").revertAtMouseUpDuration}set revertAtMouseUpDuration(e){const n="revertAtMouseUpDuration";Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e,"number"),Ze(this,cn,"f").revertAtMouseUpDuration=e,Ze(this,oi,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),Ze(this,ii,"f").update()}get rotationRestriction(){return Ze(this,cn,"f").controls.rotationRestriction}set rotationRestriction(e){const n="rotationRestriction";Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e,"object"),Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e.minAzimuthAngle,"number"),Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e.maxAzimuthAngle,"number"),Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e.minPolarAngle,"number"),Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e.maxPolarAngle,"number"),Ze(this,cn,"f").controls.rotationRestriction=e,Ze(this,oi,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),Ze(this,ii,"f").update()}get rotationSpeed(){return Ze(this,cn,"f").controls.rotationSpeed}set rotationSpeed(e){const n="rotationSpeed";Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e,"number"),Ze(this,cn,"f").controls.rotationSpeed=e,Ze(this,oi,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),Ze(this,ii,"f").update()}get spherePositionRestriction(){return Ze(this,cn,"f").controls.spherePositionRestriction}set spherePositionRestriction(e){const n="spherePositionRestriction";Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e,"object"),Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e.center,"vec3"),Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e.radius,"number"),Ze(this,cn,"f").controls.spherePositionRestriction=e,Ze(this,oi,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),Ze(this,ii,"f").update()}get sphereTargetRestriction(){return Ze(this,cn,"f").controls.sphereTargetRestriction}set sphereTargetRestriction(e){const n="sphereTargetRestriction";Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e,"object"),Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e.center,"vec3"),Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e.radius,"number"),Ze(this,cn,"f").controls.sphereTargetRestriction=e,Ze(this,oi,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),Ze(this,ii,"f").update()}get target(){return Ze(this,cn,"f").target}set target(e){const n="target";Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e,"vec3"),Ze(this,cn,"f").target=e,Ze(this,oi,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),Ze(this,ii,"f").update()}get turntableCenter(){return Ze(this,cn,"f").controls.turntableCenter}set turntableCenter(e){const n="turntableCenter";Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e,"vec3"),Ze(this,cn,"f").controls.turntableCenter=e,Ze(this,oi,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),Ze(this,ii,"f").update()}get type(){return Ze(this,cn,"f").type}get zoomRestriction(){return Ze(this,cn,"f").controls.zoomRestriction}set zoomRestriction(e){const n="zoomRestriction";Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e,"object"),Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e.minDistance,"number"),Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e.maxDistance,"number"),Ze(this,cn,"f").controls.zoomRestriction=e,Ze(this,oi,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),Ze(this,ii,"f").update()}get zoomSpeed(){return Ze(this,cn,"f").controls.zoomSpeed}set zoomSpeed(e){const n="zoomSpeed";Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e,"number"),Ze(this,cn,"f").controls.zoomSpeed=e,Ze(this,oi,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),Ze(this,ii,"f").update()}get zoomToFactor(){return Ze(this,cn,"f").zoomExtentsFactor}set zoomToFactor(e){const n="zoomToFactor";Ze(this,Dn,"f").validateAndError(`${this.scope}.${n}`,e,"number"),Ze(this,cn,"f").zoomExtentsFactor=e,Ze(this,oi,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),Ze(this,ii,"f").update()}animate(e,n){const i="animate";Ze(this,Dn,"f").validateAndError(`${this.scope}.${i}`,e,"array");for(let o=0;o<e.length;o++)Ze(this,Dn,"f").validateAndError(`${this.scope}.${i}`,e[o].position,"vec3"),Ze(this,Dn,"f").validateAndError(`${this.scope}.${i}`,e[o].target,"vec3");return Ze(this,Wy,"f").call(this,i,n),Ze(this,cn,"f").animate(e,n)}calculateZoomTo(e,n,i){const o="calculateZoomTo";if(e!==void 0&&!(e instanceof Uce.Box))throw new AC.ShapeDiverViewerValidationError(`${o}: Input could not be validated. ${e} is not of type Box.`,e,"Box");return Ze(this,Dn,"f").validateAndError(`${this.scope}.${o}`,n,"vec3",!1),Ze(this,Dn,"f").validateAndError(`${this.scope}.${o}`,i,"vec3",!1),Ze(this,cn,"f").calculateZoomTo(e,n,i)}project(e){return Ze(this,Dn,"f").validateAndError(`${this.scope}.project`,e,"vec3"),Ze(this,cn,"f").project(e)}reset(e){return Ze(this,Wy,"f").call(this,"reset",e),Ze(this,cn,"f").reset(e)}set(e,n,i){const o="set";return Ze(this,Dn,"f").validateAndError(`${this.scope}.${o}`,e,"vec3",!1),Ze(this,Dn,"f").validateAndError(`${this.scope}.${o}`,n,"vec3",!1),Ze(this,Wy,"f").call(this,o,i),Ze(this,cn,"f").set(e,n,i)}unproject(e){return Ze(this,Dn,"f").validateAndError(`${this.scope}.unproject`,e,"vec3",!1),Ze(this,cn,"f").unproject(e)}zoomTo(e,n){const i="zoomTo";if(e!==void 0&&!(e instanceof Uce.Box))throw new AC.ShapeDiverViewerValidationError(`${i}: Input could not be validated. ${e} is not of type Box.`,e,"Box");return Ze(this,Wy,"f").call(this,i,n),Ze(this,cn,"f").zoomTo(e,n)}}tM.AbstractCameraApi=Oyt;cn=new WeakMap,Dn=new WeakMap,oi=new WeakMap,Wy=new WeakMap,ii=new WeakMap;var Fce=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},sw=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},DS,VW,GW,ZD;Object.defineProperty(Nz,"__esModule",{value:!0});Nz.OrthographicCameraApi=void 0;const Iyt=tM,Vce=Mn,Nyt=F0;class Lyt extends Iyt.AbstractCameraApi{constructor(e,n){super(e,n),DS.set(this,void 0),VW.set(this,Vce.InputValidator.instance),GW.set(this,Vce.Logger.instance),ZD.set(this,void 0),Fce(this,ZD,e,"f"),Fce(this,DS,n,"f"),this.scope="OrthographicCameraApi"}get direction(){return sw(this,DS,"f").direction}set direction(e){const n="direction";sw(this,VW,"f").validateAndError(`${this.scope}.${n}`,e,"enum",!0,Object.values(Nyt.ORTHOGRAPHIC_CAMERA_DIRECTION)),sw(this,DS,"f").direction=e,sw(this,GW,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),sw(this,ZD,"f").update()}}Nz.OrthographicCameraApi=Lyt;DS=new WeakMap,VW=new WeakMap,GW=new WeakMap,ZD=new WeakMap;var Lz={},Gce=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},ow=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},OS,jW,HW,QD;Object.defineProperty(Lz,"__esModule",{value:!0});Lz.PerspectiveCameraApi=void 0;const zyt=tM,jce=Mn;class Byt extends zyt.AbstractCameraApi{constructor(e,n){super(e,n),OS.set(this,void 0),jW.set(this,jce.InputValidator.instance),HW.set(this,jce.Logger.instance),QD.set(this,void 0),Gce(this,QD,e,"f"),Gce(this,OS,n,"f"),this.scope="PerspectiveCameraApi"}get fov(){return ow(this,OS,"f").fov}set fov(e){const n="fov";ow(this,jW,"f").validateAndError(`${this.scope}.${n}`,e,"number"),ow(this,OS,"f").fov=e,ow(this,HW,"f").debug(`${this.scope}.${n}: ${n} was set to: ${e}`),ow(this,QD,"f").update()}}Lz.PerspectiveCameraApi=Byt;OS=new WeakMap,jW=new WeakMap,HW=new WeakMap,QD=new WeakMap;var zz={},Hce=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},ar=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},of,pu,Ws,l0;Object.defineProperty(zz,"__esModule",{value:!0});zz.PostProcessingApi=void 0;const AG=yx,$ce=Mn;class Uyt{constructor(e,n){of.set(this,$ce.InputValidator.instance),pu.set(this,$ce.Logger.instance),Ws.set(this,void 0),l0.set(this,void 0),Hce(this,l0,e,"f"),Hce(this,Ws,n,"f")}get antiAliasingTechnique(){return ar(this,Ws,"f").postProcessingManager.antiAliasingTechnique}set antiAliasingTechnique(e){const n="antiAliasingTechnique";ar(this,of,"f").validateAndError(`PostProcessingApi.${n}`,e,"enum",!0,Object.values(AG.ANTI_ALIASING_TECHNIQUE)),ar(this,Ws,"f").postProcessingManager.antiAliasingTechnique=e,ar(this,pu,"f").debug(`PostProcessingApi.${n}: ${n} was set to: ${e}`),ar(this,l0,"f").update()}get antiAliasingTechniqueMobile(){return ar(this,Ws,"f").postProcessingManager.antiAliasingTechniqueMobile}set antiAliasingTechniqueMobile(e){const n="antiAliasingTechniqueMobile";ar(this,of,"f").validateAndError(`PostProcessingApi.${n}`,e,"enum",!0,Object.values(AG.ANTI_ALIASING_TECHNIQUE)),ar(this,Ws,"f").postProcessingManager.antiAliasingTechniqueMobile=e,ar(this,pu,"f").debug(`PostProcessingApi.${n}: ${n} was set to: ${e}`),ar(this,l0,"f").update()}get effectComposer(){return ar(this,Ws,"f").postProcessingManager.effectComposer}get enablePostProcessingOnMobile(){return ar(this,Ws,"f").postProcessingManager.enablePostProcessingOnMobile}set enablePostProcessingOnMobile(e){const n="enablePostProcessingOnMobile";ar(this,of,"f").validateAndError(`PostProcessingApi.${n}`,e,"boolean"),ar(this,Ws,"f").postProcessingManager.enablePostProcessingOnMobile=e,ar(this,pu,"f").debug(`PostProcessingApi.${n}: ${n} was set to: ${e}`),ar(this,l0,"f").update()}get godRaysEffects(){return ar(this,Ws,"f").postProcessingManager.godRaysManagers}get manualPostProcessing(){return ar(this,Ws,"f").postProcessingManager.manualPostProcessing}set manualPostProcessing(e){const n="manualPostProcessing";ar(this,of,"f").validateAndError(`PostProcessingApi.${n}`,e,"boolean"),ar(this,Ws,"f").postProcessingManager.manualPostProcessing=e,ar(this,pu,"f").debug(`PostProcessingApi.${n}: ${n} was set to: ${e}`),ar(this,l0,"f").update()}get outlineEffects(){return ar(this,Ws,"f").postProcessingManager.outlineManagers}get selectiveBloomEffects(){return ar(this,Ws,"f").postProcessingManager.selectiveBloomManagers}get ssaaSampleLevel(){return ar(this,Ws,"f").postProcessingManager.ssaaSampleLevel}set ssaaSampleLevel(e){const n="ssaaSampleLevel";ar(this,of,"f").validateAndError(`PostProcessingApi.${n}`,e,"number"),ar(this,Ws,"f").postProcessingManager.ssaaSampleLevel=e,ar(this,pu,"f").debug(`PostProcessingApi.${n}: ${n} was set to: ${e}`),ar(this,l0,"f").update()}addEffect(e){const n="addEffect";ar(this,of,"f").validateAndError(`PostProcessingApi.${n}`,e,"object",!1);const i=ar(this,Ws,"f").postProcessingManager.addEffect(e);return ar(this,pu,"f").debug(`PostProcessingApi.${n}: ${n} was called with definition ${e}.`),ar(this,l0,"f").update(),i}getDefaultEffectProperties(e){const n="getDefaultEffectProperties";return ar(this,of,"f").validateAndError(`PostProcessingApi.${n}`,e,"enum",!0,Object.values(AG.POST_PROCESSING_EFFECT_TYPE)),ar(this,pu,"f").debug(`PostProcessingApi.${n}: ${n} was called with type ${e}.`),ar(this,Ws,"f").postProcessingManager.getDefaultEffectProperties(e)}getEffect(e){const n="getEffect";return ar(this,of,"f").validateAndError(`PostProcessingApi.${n}`,e,"string"),ar(this,pu,"f").debug(`PostProcessingApi.${n}: ${n} was called with token ${e}.`),ar(this,Ws,"f").postProcessingManager.getEffect(e)}getEffectTokens(){return ar(this,Ws,"f").postProcessingManager.getEffectTokens()}getPostProcessingEffectsArray(){const e="getPostProcessingEffectsArray";return ar(this,pu,"f").debug(`PostProcessingApi.${e}: ${e} was called.`),ar(this,Ws,"f").postProcessingManager.getPostProcessingEffectsArray()}removeEffect(e){const n="removeEffect";ar(this,of,"f").validateAndError(`PostProcessingApi.${n}`,e,"string");const i=ar(this,Ws,"f").postProcessingManager.removeEffect(e);return ar(this,pu,"f").debug(`PostProcessingApi.${n}: ${n} was called with token ${e}.`),ar(this,l0,"f").update(),i}updateEffect(e,n){const i="updateEffect";ar(this,of,"f").validateAndError(`PostProcessingApi.${i}`,e,"string"),ar(this,Ws,"f").postProcessingManager.updateEffect(e,n),ar(this,pu,"f").debug(`PostProcessingApi.${i}: ${i} was called with token ${e} and definition ${n}.`),ar(this,l0,"f").update()}}zz.PostProcessingApi=Uyt;of=new WeakMap,pu=new WeakMap,Ws=new WeakMap,l0=new WeakMap;var Fyt=X&&X.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,o)}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),Vyt=X&&X.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Gyt=X&&X.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.prototype.hasOwnProperty.call(t,n)&&Fyt(e,t,n);return Vyt(e,t),e},wC=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})},Wce=X&&X.__classPrivateFieldSet||function(t,e,n,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!o:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(t,n):o?o.value=n:e.set(t,n),n},Pe=X&&X.__classPrivateFieldGet||function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},$W,c0,IS,NS,Sn,Dh,Er,KD,Tt,fd,WW;Object.defineProperty(Sz,"__esModule",{value:!0});Sz.ViewportApi=void 0;const jyt=Gyt(Jx),Hyt=Px,$yt=k6,wG=F0,cu=Mn,Wyt=EK,aw=Bf,Yyt=bK,ty=dr,qyt=Cz,j1=Cr,Xyt=Nz,Zyt=Lz,Qyt=zz,EG=oa,SG=I0;class Kyt{constructor(e){$W.set(this,Hyt.AnimationEngine.instance),c0.set(this,{}),IS.set(this,Wyt.CreationControlCenterViewport.instance),NS.set(this,Yyt.GLTFConverter.instance),Sn.set(this,cu.InputValidator.instance),Dh.set(this,{}),Er.set(this,cu.Logger.instance),KD.set(this,void 0),Tt.set(this,void 0),fd.set(this,cu.StateEngine.instance),WW.set(this,cu.SystemInfo.instance),Wce(this,Tt,e,"f"),Pe(this,Tt,"f").cameraEngine.update=()=>{for(const n in Pe(this,Tt,"f").cameraEngine.cameras)Pe(this,c0,"f")[n]||(Pe(this,Tt,"f").cameraEngine.cameras[n].type===wG.CAMERA_TYPE.PERSPECTIVE?Pe(this,c0,"f")[n]=new Zyt.PerspectiveCameraApi(this,Pe(this,Tt,"f").cameraEngine.cameras[n]):Pe(this,c0,"f")[n]=new Xyt.OrthographicCameraApi(this,Pe(this,Tt,"f").cameraEngine.cameras[n]));for(const n in Pe(this,c0,"f"))Pe(this,Tt,"f").cameraEngine.cameras[n]||delete Pe(this,c0,"f")[n]},Pe(this,Tt,"f").cameraEngine.update(),Pe(this,Tt,"f").lightEngine.update=()=>{for(const n in Pe(this,Tt,"f").lightEngine.lightScenes)Pe(this,Dh,"f")[n]||(Pe(this,Dh,"f")[n]=new qyt.LightSceneApi(this,Pe(this,Tt,"f").lightEngine.lightScenes[n]));for(const n in Pe(this,Dh,"f"))Pe(this,Tt,"f").lightEngine.lightScenes[n]||delete Pe(this,Dh,"f")[n]},Pe(this,Tt,"f").lightEngine.update(),Wce(this,KD,new Qyt.PostProcessingApi(this,Pe(this,Tt,"f")),"f")}get animations(){return Pe(this,$W,"f").animations}get arRotation(){return Pe(this,Tt,"f").arRotation}set arRotation(e){const n="arRotation";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"vec3"),Pe(this,Tt,"f").arRotation=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("arRotation")}get arScale(){return Pe(this,Tt,"f").arScale}set arScale(e){const n="arScale";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"vec3"),Pe(this,Tt,"f").arScale=j1.vec3.max(j1.vec3.create(),e,j1.vec3.fromValues(.001,.001,.001)),Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("arScale")}get arTranslation(){return Pe(this,Tt,"f").arTranslation}set arTranslation(e){const n="arTranslation";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"vec3"),Pe(this,Tt,"f").arTranslation=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("arTranslation")}get automaticColorAdjustment(){return Pe(this,Tt,"f").automaticColorAdjustment}set automaticColorAdjustment(e){const n="automaticColorAdjustment";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"boolean"),Pe(this,Tt,"f").automaticColorAdjustment=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("automaticColorAdjustment")}get automaticResizing(){return Pe(this,Tt,"f").automaticResizing}set automaticResizing(e){const n="automaticResizing";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"boolean"),Pe(this,Tt,"f").automaticResizing=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("automaticResizing")}get beautyRenderBlendingDuration(){return Pe(this,Tt,"f").beautyRenderBlendingDuration}set beautyRenderBlendingDuration(e){const n="beautyRenderBlendingDuration";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"number"),Pe(this,Tt,"f").beautyRenderBlendingDuration=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("beautyRenderBlendingDuration")}get beautyRenderDelay(){return Pe(this,Tt,"f").beautyRenderDelay}set beautyRenderDelay(e){const n="beautyRenderDelay";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"number"),Pe(this,Tt,"f").beautyRenderDelay=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("beautyRenderDelay")}get camera(){return Pe(this,Tt,"f").cameraEngine.camera?Pe(this,c0,"f")[Pe(this,Tt,"f").cameraEngine.camera.id]:null}get cameras(){return Pe(this,c0,"f")}get canvas(){return Pe(this,Tt,"f").canvas}get clearAlpha(){return Pe(this,Tt,"f").clearAlpha}set clearAlpha(e){const n="clearAlpha";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"number"),Pe(this,Tt,"f").clearAlpha=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("clearAlpha")}get clearColor(){return Pe(this,Tt,"f").clearColor}set clearColor(e){const n="clearColor";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"color"),Pe(this,Tt,"f").clearColor=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("clearColor")}get defaultLineMaterial(){return Pe(this,Tt,"f").defaultLineMaterial}get defaultMaterial(){return Pe(this,Tt,"f").defaultMaterial}get defaultMaterialColor(){return Pe(this,Tt,"f").defaultMaterialColor}set defaultMaterialColor(e){const n="defaultMaterialColor";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"color"),Pe(this,Tt,"f").defaultMaterialColor=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("defaultMaterialColor")}get defaultPointMaterial(){return Pe(this,Tt,"f").defaultPointMaterial}get enableAR(){return Pe(this,Tt,"f").enableAR}set enableAR(e){const n="enableAR";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"boolean"),Pe(this,Tt,"f").enableAR=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("enableAR")}get environmentMap(){return Pe(this,Tt,"f").environmentMap}set environmentMap(e){const n="environmentMap";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"cubeMap"),Pe(this,Tt,"f").environmentMap=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("environmentMap")}get environmentMapAsBackground(){return Pe(this,Tt,"f").environmentMapAsBackground}set environmentMapAsBackground(e){const n="environmentMapAsBackground";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"boolean"),Pe(this,Tt,"f").environmentMapAsBackground=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("environmentMapAsBackground")}get environmentMapBlurriness(){return Pe(this,Tt,"f").environmentMapBlurriness}set environmentMapBlurriness(e){const n="environmentMapBlurriness";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"number"),Pe(this,Tt,"f").environmentMapBlurriness=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("environmentMapBlurriness")}get environmentMapForUnlitMaterials(){return Pe(this,Tt,"f").environmentMapForUnlitMaterials}set environmentMapForUnlitMaterials(e){const n="environmentMapForUnlitMaterials";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"boolean"),Pe(this,Tt,"f").environmentMapForUnlitMaterials=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("environmentMapForUnlitMaterials")}get environmentMapIntensity(){return Pe(this,Tt,"f").environmentMapIntensity}set environmentMapIntensity(e){const n="environmentMapIntensity";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"number"),Pe(this,Tt,"f").environmentMapIntensity=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("environmentMapIntensity")}get environmentMapResolution(){return Pe(this,Tt,"f").environmentMapResolution}set environmentMapResolution(e){const n="environmentMapResolution";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"string"),Pe(this,Tt,"f").environmentMapResolution=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("environmentMapResolution")}get environmentMapRotation(){return Pe(this,Tt,"f").environmentMapRotation}set environmentMapRotation(e){const n="environmentMapRotation";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"quat"),Pe(this,Tt,"f").environmentMapRotation=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("environmentMapRotation")}get gridColor(){return Pe(this,Tt,"f").gridColor}set gridColor(e){const n="gridColor";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"color"),Pe(this,Tt,"f").gridColor=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("gridColor")}get gridVisibility(){return Pe(this,Tt,"f").gridVisibility}set gridVisibility(e){const n="gridVisibility";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"boolean"),Pe(this,Tt,"f").gridVisibility=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("gridVisibility")}get groundPlaneColor(){return Pe(this,Tt,"f").groundPlaneColor}set groundPlaneColor(e){const n="groundPlaneColor";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"color"),Pe(this,Tt,"f").groundPlaneColor=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("groundPlaneColor")}get groundPlaneShadowColor(){return Pe(this,Tt,"f").groundPlaneShadowColor}set groundPlaneShadowColor(e){const n="groundPlaneShadowColor";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"color"),Pe(this,Tt,"f").groundPlaneShadowColor=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("groundPlaneShadowColor")}get groundPlaneShadowVisibility(){return Pe(this,Tt,"f").groundPlaneShadowVisibility}set groundPlaneShadowVisibility(e){const n="groundPlaneShadowVisibility";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"boolean"),Pe(this,Tt,"f").groundPlaneShadowVisibility=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("groundPlaneShadowVisibility")}get groundPlaneVisibility(){return Pe(this,Tt,"f").groundPlaneVisibility}set groundPlaneVisibility(e){const n="groundPlaneVisibility";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"boolean"),Pe(this,Tt,"f").groundPlaneVisibility=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("groundPlaneVisibility")}get id(){return Pe(this,Tt,"f").id}get lightScene(){return Pe(this,Tt,"f").lightEngine.lightScene?Pe(this,Dh,"f")[Pe(this,Tt,"f").lightEngine.lightScene.id]:null}get lightScenes(){return Pe(this,Dh,"f")}get lights(){return Pe(this,Tt,"f").lights}set lights(e){const n="lights";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"boolean"),Pe(this,Tt,"f").lights=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("lights")}get maximumRenderingSize(){return Pe(this,Tt,"f").maximumRenderingSize}set maximumRenderingSize(e){const n="maximumRenderingSize";Pe(this,Sn,"f").validateAndError(`SessionApi.${n}`,e,"object"),Pe(this,Sn,"f").validateAndError(`SessionApi.${n}`,e.width,"number"),Pe(this,Sn,"f").validateAndError(`SessionApi.${n}`,e.height,"number"),Pe(this,Tt,"f").maximumRenderingSize=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("maximumRenderingSize")}get outputEncoding(){return Pe(this,Tt,"f").outputEncoding}set outputEncoding(e){const n="outputEncoding";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"enum",!0,Object.values(aw.TEXTURE_ENCODING)),Pe(this,Tt,"f").outputEncoding=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("outputEncoding")}get physicallyCorrectLights(){return Pe(this,Tt,"f").physicallyCorrectLights}set physicallyCorrectLights(e){const n="physicallyCorrectLights";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"boolean"),Pe(this,Tt,"f").physicallyCorrectLights=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("physicallyCorrectLights")}get pointSize(){return Pe(this,Tt,"f").pointSize}set pointSize(e){const n="pointSize";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"number"),Pe(this,Tt,"f").pointSize=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("pointSize")}get postProcessing(){return Pe(this,KD,"f")}get postRenderingCallback(){return Pe(this,Tt,"f").postRenderingCallback}set postRenderingCallback(e){const n="postRenderingCallback";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"function",!1),Pe(this,Tt,"f").postRenderingCallback=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("postRenderingCallback")}get preRenderingCallback(){return Pe(this,Tt,"f").preRenderingCallback}set preRenderingCallback(e){const n="preRenderingCallback";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"function",!1),Pe(this,Tt,"f").preRenderingCallback=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("preRenderingCallback")}get sessionSettingsId(){return Pe(this,Tt,"f").sessionSettingsId}get sessionSettingsMode(){return Pe(this,Tt,"f").sessionSettingsMode}get shadows(){return Pe(this,Tt,"f").shadows}set shadows(e){const n="shadows";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"boolean"),Pe(this,Tt,"f").shadows=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("shadows")}get show(){return Pe(this,Tt,"f").show}set show(e){const n="show";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"boolean"),Pe(this,Tt,"f").show=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("show")}get showStatistics(){return Pe(this,Tt,"f").showStatistics}set showStatistics(e){const n="showStatistics";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"boolean"),Pe(this,Tt,"f").showStatistics=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("showStatistics")}get softShadows(){return Pe(this,Tt,"f").softShadows}set softShadows(e){const n="softShadows";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"boolean"),Pe(this,Tt,"f").softShadows=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("softShadows")}get textureEncoding(){return Pe(this,Tt,"f").textureEncoding}set textureEncoding(e){const n="textureEncoding";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"enum",!0,Object.values(aw.TEXTURE_ENCODING)),Pe(this,Tt,"f").textureEncoding=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("textureEncoding")}get threeJsCoreObjects(){return{scene:Pe(this,Tt,"f").sceneTreeManager.scene,renderer:Pe(this,Tt,"f").renderer,camera:Pe(this,Tt,"f").cameraManager.camera}}get toneMapping(){return Pe(this,Tt,"f").toneMapping}set toneMapping(e){const n="toneMapping";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"enum",!0,Object.values(aw.TONE_MAPPING)),Pe(this,Tt,"f").toneMapping=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("toneMapping")}get toneMappingExposure(){return Pe(this,Tt,"f").toneMappingExposure}set toneMappingExposure(e){const n="toneMappingExposure";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"number"),Pe(this,Tt,"f").toneMappingExposure=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("toneMappingExposure")}get type(){return Pe(this,Tt,"f").type}set type(e){const n="type";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"enum",!0,Object.values(aw.RENDERER_TYPE)),Pe(this,Tt,"f").type=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("type")}get visualizeAttributes(){return Pe(this,Tt,"f").visualizeAttributes}set visualizeAttributes(e){const n="visualizeAttributes";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"function",!1),Pe(this,Tt,"f").visualizeAttributes=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("visualizeAttributes")}addCanvasEventListener(e){return Pe(this,Sn,"f").validateAndError("ViewportApi.addCanvasEventListener",e,"object"),Pe(this,Tt,"f").domEventEngine.addDomEventListener(e)}addFlag(e){return Pe(this,Sn,"f").validateAndError("ViewportApi.addFlag",e,"enum",!0,Object.values(aw.FLAG_TYPE)),Pe(this,Tt,"f").addFlag(e)}applyViewportSettings(e,n){const i="applyViewportSettings";return Pe(this,Sn,"f").validateAndError(`SessionApi.${i}`,e,"object"),Pe(this,Sn,"f").validateAndError(`SessionApi.${i}`,n,"object",!1),Pe(this,IS,"f").applyViewportSettings(this.id,e,n)}assignCamera(e){Pe(this,Sn,"f").validateAndError("ViewportApi.assignCamera",e,"string");const i=Pe(this,Tt,"f").cameraEngine.assignCamera(e);return this.update("assignCamera"),i}assignLightScene(e){Pe(this,Sn,"f").validateAndError("ViewportApi.assignLightScene",e,"string");const i=Pe(this,Tt,"f").lightEngine.assignLightScene(e);return this.update("assignLightScene"),i}close(){return wC(this,void 0,void 0,function*(){return yield Pe(this,IS,"f").closeViewportEngine(this.id)})}continueRendering(){Pe(this,Tt,"f").continueRendering()}convert3Dto2D(e){return Pe(this,Sn,"f").validateAndError("ViewportApi.convert3Dto2D",e,"vec3"),Pe(this,Tt,"f").convert3Dto2D(e)}convertToGlTF(e=EG.sceneTree.root){return wC(this,void 0,void 0,function*(){const n="convertToGlTF";if(!(e instanceof ty.TreeNode))throw new cu.ShapeDiverViewerValidationError(`${n}: Input could not be validated. ${e} is not of type node.`,e,"node");this.update("convertToGlTF.start");const i=yield Pe(this,NS,"f").convert(e,!1,this.id);return this.update("convertToGlTF.end"),new Blob([i],{type:"application/octet-stream"})})}createArSessionLink(e,n=!0,i){return wC(this,void 0,void 0,function*(){const o="createArSessionLink";if(e&&!(e instanceof ty.TreeNode))throw new cu.ShapeDiverViewerValidationError(`${o}: Input could not be validated. ${e} is not of type node.`,e,"node");let l;for(const M in Pe(this,fd,"f").sessionEngines)if(Pe(this,fd,"f").sessionEngines[M].canUploadGLTF){l=M;break}if(!l)throw new cu.ShapeDiverViewerArError("ViewportApi.createArSessionLink: None of the sessions that are registered are capable of using the AR feature.");const d=e||EG.sceneTree.root,p=j1.mat4.fromScaling(j1.mat4.create(),this.arScale);d.transformations.push({id:"ar_scaling",matrix:p}),this.update("createArSessionLink.start");const g=yield Pe(this,NS,"f").convert(d,!0,this.id);for(let M=0;M<d.transformations.length;M++)d.transformations[M].id==="ar_scaling"&&d.transformations.splice(M,1);this.update("createArSessionLink.end");const v=yield Pe(this,fd,"f").sessionEngines[l].uploadGLTF(new Blob([g],{type:"application/octet-stream"}),SG.ShapeDiverRequestGltfUploadQueryConversion.SCENE),_={sddev3:"https://sddev3.eu-central-1.shapediver.com",sddev2:"https://sddev2.eu-central-1.shapediver.com",sddev:"https://sddev.eu-central-1.shapediver.com",sdtest:"https://sdtest.us-east-1.shapediver.com",sdeuc1:"https://sdeuc1.eu-central-1.shapediver.com",sdr7euc1:"https://sdr7euc1.eu-central-1.shapediver.com",sduse1:"https://model-view.shapediver.com"};let b=Object.keys(_).find(M=>_[M]===Pe(this,fd,"f").sessionEngines[l].modelViewUrl);b||(b=Pe(this,fd,"f").sessionEngines[l].modelViewUrl.replace("https://","").replace(".shapediver.com",""));const w=i?`fb=${encodeURIComponent(i)}&`:"";if(!v.gltf||!v.gltf.sceneId)throw new cu.ShapeDiverViewerArError("ViewportApi.createArSessionLink: There was an unexpected error with the ar scene response. Please contact us if this happens again.");const E=v.gltf.sceneId,S=`https://viewer.shapediver.com/v3/${$yt.build_data.build_version.replace("3.","")}/ar.html?${w}b=${encodeURIComponent(b)}&id=${encodeURIComponent(E)}`;return n===!1?S:yield new Promise((k,x)=>{jyt.toDataURL(S,(C,P)=>{C?x(C):k(P)})})})}createLightScene(e){const n="createLightScene";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"object",!1);const i=Object.assign({},e);Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,i.name,"string",!1),Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,i.standard,"boolean",!1);const o=Pe(this,Tt,"f").lightEngine.createLightScene(e||{});return this.update("createLightScene"),Pe(this,Dh,"f")[o.id]}createOrthographicCamera(e){Pe(this,Sn,"f").validateAndError("ViewportApi.createOrthographicCamera",e,"string",!1);const i=Pe(this,Tt,"f").cameraEngine.createCamera(wG.CAMERA_TYPE.ORTHOGRAPHIC,e);return this.update("createOrthographicCamera"),Pe(this,c0,"f")[i.id]}createPerspectiveCamera(e){Pe(this,Sn,"f").validateAndError("ViewportApi.createPerspectiveCamera",e,"string",!1);const i=Pe(this,Tt,"f").cameraEngine.createCamera(wG.CAMERA_TYPE.PERSPECTIVE,e);return this.update("createPerspectiveCamera"),Pe(this,c0,"f")[i.id]}createSDTFOverview(e){const n="createSDTFOverview";if(!(e instanceof ty.TreeNode))throw new cu.ShapeDiverViewerValidationError(`${n}: Input could not be validated. ${e} is not of type node.`,e,"node");return this.update("createSDTFOverview"),Pe(this,Tt,"f").createSDTFOverview(e)}displayErrorMessage(e){Pe(this,Sn,"f").validateAndError("ViewportApi.displayErrorMessage",e,"string"),Pe(this,Tt,"f").displayErrorMessage(e),this.update("displayErrorMessage")}getEnvironmentMapImageUrl(){return Pe(this,Tt,"f").getEnvironmentMapImageUrl()}getScreenshot(e,n){const i="getScreenshot";return Pe(this,Sn,"f").validateAndError(`ViewportApi.${i}`,e,"string",!1),Pe(this,Sn,"f").validateAndError(`ViewportApi.${i}`,n,"number",!1),this.update("getScreenshot"),Pe(this,Tt,"f").getScreenshot(e,n)}getViewportSettings(){return Pe(this,IS,"f").getViewportSettings(this.id)}isMobileDeviceWithoutBrowserARSupport(){return Pe(this,Tt,"f").isMobileDeviceWithoutBrowserARSupport()}pauseRendering(){Pe(this,Tt,"f").pauseRendering()}pointerEventToRay(e){return Pe(this,Tt,"f").pointerEventToRay(e)}raytraceScene(e,n,i){const o="raytraceScene";return Pe(this,Sn,"f").validateAndError(`ViewportApi.${o}`,e,"vec3"),Pe(this,Sn,"f").validateAndError(`ViewportApi.${o}`,n,"vec3"),Pe(this,Tt,"f").raytraceScene(e,n,i)}removeCamera(e){Pe(this,Sn,"f").validateAndError("ViewportApi.removeCamera",e,"string");const i=Pe(this,Tt,"f").cameraEngine.removeCamera(e);return this.update("removeCamera"),i}removeCanvasEventListener(e){return Pe(this,Sn,"f").validateAndError("ViewportApi.removeCanvasEventListener",e,"string"),Pe(this,Tt,"f").domEventEngine.removeDomEventListener(e)}removeFlag(e){return Pe(this,Sn,"f").validateAndError("ViewportApi.removeFlag",e,"string"),Pe(this,Tt,"f").removeFlag(e)}removeLightScene(e){Pe(this,Sn,"f").validateAndError("ViewportApi.removeLightScene",e,"string");const i=Pe(this,Tt,"f").lightEngine.removeLightScene(e);return this.update("removeLightScene"),i}render(){Pe(this,Tt,"f").renderingManager.render()}resetToDefaultCameras(){for(const e in this.cameras)Pe(this,Tt,"f").cameraEngine.removeCamera(e);Pe(this,Tt,"f").cameraEngine.createDefaultCameras(),this.update("resetToDefaultCameras")}resize(e,n){const i="resize";Pe(this,Sn,"f").validateAndError(`ViewportApi.${i}`,e,"number"),Pe(this,Sn,"f").validateAndError(`ViewportApi.${i}`,n,"number"),Pe(this,Tt,"f").resize(e,n),this.update("resize")}restrictEventListeners(e){Pe(this,Tt,"f").domEventEngine.allowEventListeners(e)}update(e){Pe(this,Tt,"f").update(e||"ViewportApi")}updateDefaultLineMaterial(e){const n="updateDefaultLineMaterial";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"object"),Pe(this,Tt,"f").defaultLineMaterial=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("updateDefaultLineMaterial")}updateDefaultMaterial(e){const n="updateDefaultMaterial";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"object"),Pe(this,Tt,"f").defaultMaterial=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("updateDefaultMaterial")}updateDefaultPointMaterial(e){const n="updateDefaultPointMaterial";Pe(this,Sn,"f").validateAndError(`ViewportApi.${n}`,e,"object"),Pe(this,Tt,"f").defaultPointMaterial=e,Pe(this,Er,"f").debug(`ViewportApi.${n}: ${n} was set to: ${e}`),this.update("updateDefaultPointMaterial")}updateEnvironmentGeometry(){Pe(this,Tt,"f").updateEnvironmentGeometry()}updateNode(e){const n="updateNode";if(!(e instanceof ty.TreeNode))throw new cu.ShapeDiverViewerValidationError(`${n}: Input could not be validated. ${e} is not of type node.`,e,"node");Pe(this,Tt,"f").sceneTreeManager.updateNode(e,e.convertedObject[this.id])}updateNodeTransformation(e){const n="updateNodeTransformation";if(!(e instanceof ty.TreeNode))throw new cu.ShapeDiverViewerValidationError(`${n}: Input could not be validated. ${e} is not of type node.`,e,"node");Pe(this,Tt,"f").sceneTreeManager.updateNode(e,e.convertedObject[this.id],{transformationOnly:!0})}viewInAR(e){return wC(this,void 0,void 0,function*(){const n="viewInAR";if(e&&!(e instanceof ty.TreeNode))throw new cu.ShapeDiverViewerValidationError(`${n}: Input could not be validated. ${e} is not of type node.`,e,"node");let i;for(const g in Pe(this,fd,"f").sessionEngines)if(Pe(this,fd,"f").sessionEngines[g].canUploadGLTF){i=g;break}if(!i)throw new cu.ShapeDiverViewerArError("Api.viewInAR: None of the sessions that are registered are capable of using the AR feature.");const o=e||EG.sceneTree.root,l=j1.mat4.fromScaling(j1.mat4.create(),this.arScale);o.transformations.push({id:"ar_scaling",matrix:l}),this.update("viewInAR.start");const d=yield Pe(this,NS,"f").convert(o,!0,this.id);for(let g=0;g<o.transformations.length;g++)o.transformations[g].id==="ar_scaling"&&o.transformations.splice(g,1);this.update("viewInAR.end");const p=yield Pe(this,fd,"f").sessionEngines[i].uploadGLTF(new Blob([d],{type:"application/octet-stream"}),Pe(this,WW,"f").isIOS?SG.ShapeDiverRequestGltfUploadQueryConversion.USDZ:SG.ShapeDiverRequestGltfUploadQueryConversion.NONE);return Pe(this,Tt,"f").viewInAR(p.gltf.href)})}viewableInAR(){return Pe(this,Tt,"f").viewableInAR()}}Sz.ViewportApi=Kyt;$W=new WeakMap,c0=new WeakMap,IS=new WeakMap,NS=new WeakMap,Sn=new WeakMap,Dh=new WeakMap,Er=new WeakMap,KD=new WeakMap,Tt=new WeakMap,fd=new WeakMap,WW=new WeakMap;(function(t){var e=X&&X.__awaiter||function(b,w,E,S){function M(k){return k instanceof E?k:new E(function(x){x(k)})}return new(E||(E=Promise))(function(k,x){function C(L){try{O(S.next(L))}catch(B){x(B)}}function P(L){try{O(S.throw(L))}catch(B){x(B)}}function O(L){L.done?k(L.value):M(L.value).then(C,P)}O((S=S.apply(b,w||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.createViewport=t.viewports=void 0;const n=Bf,i=EK,o=Mn,l=oa,d=Sz,p=i.CreationControlCenterViewport.instance,g=o.InputValidator.instance,v=o.Logger.instance;t.viewports={},p.updateViewports=b=>{for(const w in b)t.viewports[w]||(t.viewports[w]=new d.ViewportApi(b[w]));for(const w in t.viewports)b[w]||delete t.viewports[w]};const _=b=>e(void 0,void 0,void 0,function*(){(0,l.showConsoleMessage)();const w=Object.assign({},b),E=Object.fromEntries(Object.entries(w).filter(([k])=>k!=="canvas"));v.debug(`createSession: Creating and initializing session with properties ${JSON.stringify(E)}.`),g.validateAndError("createViewport",b,"object",!1),g.validateAndError("createViewport",w.canvas,"HTMLCanvasElement",!1),g.validateAndError("createViewport",w.id,"string",!1),g.validateAndError("createViewport",w.sessionSettingsId,"string",!1),g.validateAndError("createViewport",w.sessionSettingsMode,"enum",!1,Object.values(o.SESSION_SETTINGS_MODE)),g.validateAndError("createViewport",w.visibility,"enum",!1,Object.values(n.VISIBILITY_MODE)),g.validateAndError("createViewport",w.branding,"object",!1);const S=Object.assign({},w.branding);if(S.logo!==null&&g.validateAndError("createViewport",S.logo,"string",!1),g.validateAndError("createViewport",S.backgroundColor,"string",!1),g.validateAndError("createViewport",S.busyModeSpinner,"string",!1),g.validateAndError("createViewport",S.busyModeDisplay,"enum",!1,Object.values(n.BUSY_MODE_DISPLAY)),g.validateAndError("createViewport",S.spinnerPositioning,"enum",!1,Object.values(n.SPINNER_POSITIONING)),w.sessionSettingsMode=w.sessionSettingsMode!==void 0?w.sessionSettingsMode:o.SESSION_SETTINGS_MODE.FIRST,w.sessionSettingsMode===o.SESSION_SETTINGS_MODE.MANUAL&&!w.sessionSettingsId)throw new o.ShapeDiverViewerValidationError("createViewport: Input could not be validated. sessionSettingsId has to point to a valid and created session when using SESSION_SETTINGS_MODE.MANUAL",w.sessionSettingsId,"string");const M=yield p.createViewportEngine(w);return t.viewports[M.id]=new d.ViewportApi(M),t.viewports[M.id]});t.createViewport=_})($Ae);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Sphere=t.Box=t.EVENTTYPE_TASK=t.EVENTTYPE_DRAWING_TOOLS=t.EVENTTYPE_INTERACTION=t.EVENTTYPE_VIEWPORT=t.EVENTTYPE_SESSION=t.EVENTTYPE_SCENE=t.EVENTTYPE_RENDERING=t.EVENTTYPE_PARAMETER=t.EVENTTYPE_OUTPUT=t.EVENTTYPE_CAMERA=t.EVENTTYPE=t.TASK_TYPE=t.SPINNER_POSITIONING=t.SESSION_SETTINGS_MODE=t.BUSY_MODE_DISPLAY=t.SDTF_TYPEHINT=t.TEXTURE_FILTERING=t.TEXTURE_WRAPPING=t.MATERIAL_TYPE=t.MATERIAL_SHADING=t.MATERIAL_ALPHA=t.MATERIAL_SIDE=t.PRIMITIVE_MODE=t.LOGGING_LEVEL=t.ENVIRONMENT_MAP_EMPTY=t.ENVIRONMENT_MAP_CUBE=t.ENVIRONMENT_MAP=t.TONE_MAPPING=t.TEXTURE_ENCODING=t.ORTHOGRAPHIC_CAMERA_DIRECTION=t.VISIBILITY_MODE=t.RENDERER_TYPE=t.LIGHT_TYPE=t.CAMERA_TYPE=t.TAG3D_JUSTIFICATION=t.PARAMETER_VISUALIZATION=t.EXPORT_TYPE=t.PARAMETER_TYPE=t.FLAG_TYPE=t.TreeNode=t.Tree=t.version=t.generalOptions=t.sceneTree=t.removeListener=t.addListener=t.viewports=t.createViewport=void 0,t.isViewerDataProcessingError=t.isViewerUnknownError=t.isViewerError=t.ShapeDiverGeometryBackendResponseErrorType=t.ShapeDiverGeometryBackendResponseError=t.ShapeDiverGeometryBackendRequestError=t.ShapeDiverGeometryBackendError=t.ShapeDiverViewerDrawingToolsError=t.ShapeDiverViewerInteractionError=t.ShapeDiverViewerValidationError=t.ShapeDiverViewerCameraError=t.ShapeDiverViewerLightError=t.ShapeDiverViewerArError=t.ShapeDiverViewerUnknownError=t.ShapeDiverViewerViewportError=t.ShapeDiverViewerSessionError=t.ShapeDiverViewerSettingsError=t.ShapeDiverViewerWebGLError=t.ShapeDiverViewerEnvironmentMapError=t.ShapeDiverViewerDataProcessingError=t.ShapeDiverViewerError=t.ShapeDiverViewerErrorType=t.MaterialEngine=t.GeometryEngine=t.DataEngine=t.SdtfPrimitiveTypeGuard=t.SDTFItemData=t.SDTFAttributeData=t.SDTFAttributesData=t.SDTFOverviewData=t.CustomData=t.HTMLElementAnchorData=t.HTMLElementAnchorImageData=t.HTMLElementAnchorTextData=t.HTMLElementAnchorCustomData=t.MaterialVariantsData=t.PrimitiveData=t.AttributeData=t.GeometryData=t.AnimationData=t.MapData=t.MaterialGemData=t.MaterialSpecularGlossinessData=t.MaterialBasicLineData=t.MaterialMultiPointData=t.MaterialPointData=t.MaterialUnlitData=t.MaterialStandardData=t.ShapeDiverResponseModelComputationStatus=t.ThreejsData=void 0,t.Resolution=t.KernelSize=t.VignetteTechnique=t.BlendFunction=t.EffectComposer=t.Effect=t.VignetteEffect=t.TiltShiftEffect=t.SepiaEffect=t.SelectiveBloomEffect=t.ScanlineEffect=t.SSAOEffect=t.PixelationEffect=t.OutlineEffect=t.NoiseEffect=t.HueSaturationEffect=t.GridEffect=t.GodRaysEffect=t.DotScreenEffect=t.DepthOfFieldEffect=t.ChromaticAberrationEffect=t.BloomEffect=t.POST_PROCESSING_EFFECT_TYPE=t.ANTI_ALIASING_TECHNIQUE=t.isViewerGeometryBackendResponseError=t.isViewerGeometryBackendRequestError=t.isViewerGeometryBackendGenericError=t.isViewerGeometryBackendError=t.isViewerDrawingToolsError=t.isViewerInteractionError=t.isViewerValidationError=t.isARError=t.isViewerCameraError=t.isViewerLightError=t.isViewerViewportError=t.isViewerSessionError=t.isViewerSettingsError=t.isViewerWebGLError=t.isViewerEnvironmentMapError=void 0;const e=oa;Object.defineProperty(t,"addListener",{enumerable:!0,get:function(){return e.addListener}}),Object.defineProperty(t,"generalOptions",{enumerable:!0,get:function(){return e.generalOptions}}),Object.defineProperty(t,"removeListener",{enumerable:!0,get:function(){return e.removeListener}}),Object.defineProperty(t,"sceneTree",{enumerable:!0,get:function(){return e.sceneTree}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return e.version}});const n=Gi;Object.defineProperty(t,"AnimationData",{enumerable:!0,get:function(){return n.AnimationData}}),Object.defineProperty(t,"AttributeData",{enumerable:!0,get:function(){return n.AttributeData}}),Object.defineProperty(t,"CustomData",{enumerable:!0,get:function(){return n.CustomData}}),Object.defineProperty(t,"GeometryData",{enumerable:!0,get:function(){return n.GeometryData}}),Object.defineProperty(t,"HTMLElementAnchorCustomData",{enumerable:!0,get:function(){return n.HTMLElementAnchorCustomData}}),Object.defineProperty(t,"HTMLElementAnchorData",{enumerable:!0,get:function(){return n.HTMLElementAnchorData}}),Object.defineProperty(t,"HTMLElementAnchorImageData",{enumerable:!0,get:function(){return n.HTMLElementAnchorImageData}}),Object.defineProperty(t,"HTMLElementAnchorTextData",{enumerable:!0,get:function(){return n.HTMLElementAnchorTextData}}),Object.defineProperty(t,"MapData",{enumerable:!0,get:function(){return n.MapData}}),Object.defineProperty(t,"MATERIAL_ALPHA",{enumerable:!0,get:function(){return n.MATERIAL_ALPHA}}),Object.defineProperty(t,"MATERIAL_SHADING",{enumerable:!0,get:function(){return n.MATERIAL_SHADING}}),Object.defineProperty(t,"MATERIAL_SIDE",{enumerable:!0,get:function(){return n.MATERIAL_SIDE}}),Object.defineProperty(t,"MATERIAL_TYPE",{enumerable:!0,get:function(){return n.MATERIAL_TYPE}}),Object.defineProperty(t,"MaterialBasicLineData",{enumerable:!0,get:function(){return n.MaterialBasicLineData}}),Object.defineProperty(t,"MaterialGemData",{enumerable:!0,get:function(){return n.MaterialGemData}}),Object.defineProperty(t,"MaterialMultiPointData",{enumerable:!0,get:function(){return n.MaterialMultiPointData}}),Object.defineProperty(t,"MaterialPointData",{enumerable:!0,get:function(){return n.MaterialPointData}}),Object.defineProperty(t,"MaterialSpecularGlossinessData",{enumerable:!0,get:function(){return n.MaterialSpecularGlossinessData}}),Object.defineProperty(t,"MaterialStandardData",{enumerable:!0,get:function(){return n.MaterialStandardData}}),Object.defineProperty(t,"MaterialUnlitData",{enumerable:!0,get:function(){return n.MaterialUnlitData}}),Object.defineProperty(t,"MaterialVariantsData",{enumerable:!0,get:function(){return n.MaterialVariantsData}}),Object.defineProperty(t,"PARAMETER_TYPE",{enumerable:!0,get:function(){return n.PARAMETER_TYPE}}),Object.defineProperty(t,"PARAMETER_VISUALIZATION",{enumerable:!0,get:function(){return n.PARAMETER_VISUALIZATION}}),Object.defineProperty(t,"PRIMITIVE_MODE",{enumerable:!0,get:function(){return n.PRIMITIVE_MODE}}),Object.defineProperty(t,"PrimitiveData",{enumerable:!0,get:function(){return n.PrimitiveData}}),Object.defineProperty(t,"SDTF_TYPEHINT",{enumerable:!0,get:function(){return n.SDTF_TYPEHINT}}),Object.defineProperty(t,"SDTFAttributeData",{enumerable:!0,get:function(){return n.SDTFAttributeData}}),Object.defineProperty(t,"SDTFAttributesData",{enumerable:!0,get:function(){return n.SDTFAttributesData}}),Object.defineProperty(t,"SDTFItemData",{enumerable:!0,get:function(){return n.SDTFItemData}}),Object.defineProperty(t,"SDTFOverviewData",{enumerable:!0,get:function(){return n.SDTFOverviewData}}),Object.defineProperty(t,"SdtfPrimitiveTypeGuard",{enumerable:!0,get:function(){return n.SdtfPrimitiveTypeGuard}}),Object.defineProperty(t,"TASK_TYPE",{enumerable:!0,get:function(){return n.TASK_TYPE}}),Object.defineProperty(t,"TEXTURE_FILTERING",{enumerable:!0,get:function(){return n.TEXTURE_FILTERING}}),Object.defineProperty(t,"TEXTURE_WRAPPING",{enumerable:!0,get:function(){return n.TEXTURE_WRAPPING}});const i=yx;Object.defineProperty(t,"ANTI_ALIASING_TECHNIQUE",{enumerable:!0,get:function(){return i.ANTI_ALIASING_TECHNIQUE}}),Object.defineProperty(t,"BlendFunction",{enumerable:!0,get:function(){return i.BlendFunction}}),Object.defineProperty(t,"BloomEffect",{enumerable:!0,get:function(){return i.BloomEffect}}),Object.defineProperty(t,"ChromaticAberrationEffect",{enumerable:!0,get:function(){return i.ChromaticAberrationEffect}}),Object.defineProperty(t,"DepthOfFieldEffect",{enumerable:!0,get:function(){return i.DepthOfFieldEffect}}),Object.defineProperty(t,"DotScreenEffect",{enumerable:!0,get:function(){return i.DotScreenEffect}}),Object.defineProperty(t,"Effect",{enumerable:!0,get:function(){return i.Effect}}),Object.defineProperty(t,"EffectComposer",{enumerable:!0,get:function(){return i.EffectComposer}}),Object.defineProperty(t,"ENVIRONMENT_MAP",{enumerable:!0,get:function(){return i.ENVIRONMENT_MAP}}),Object.defineProperty(t,"ENVIRONMENT_MAP_CUBE",{enumerable:!0,get:function(){return i.ENVIRONMENT_MAP_CUBE}}),Object.defineProperty(t,"ENVIRONMENT_MAP_EMPTY",{enumerable:!0,get:function(){return i.ENVIRONMENT_MAP_EMPTY}}),Object.defineProperty(t,"GodRaysEffect",{enumerable:!0,get:function(){return i.GodRaysEffect}}),Object.defineProperty(t,"GridEffect",{enumerable:!0,get:function(){return i.GridEffect}}),Object.defineProperty(t,"HueSaturationEffect",{enumerable:!0,get:function(){return i.HueSaturationEffect}}),Object.defineProperty(t,"KernelSize",{enumerable:!0,get:function(){return i.KernelSize}}),Object.defineProperty(t,"NoiseEffect",{enumerable:!0,get:function(){return i.NoiseEffect}}),Object.defineProperty(t,"OutlineEffect",{enumerable:!0,get:function(){return i.OutlineEffect}}),Object.defineProperty(t,"PixelationEffect",{enumerable:!0,get:function(){return i.PixelationEffect}}),Object.defineProperty(t,"POST_PROCESSING_EFFECT_TYPE",{enumerable:!0,get:function(){return i.POST_PROCESSING_EFFECT_TYPE}}),Object.defineProperty(t,"Resolution",{enumerable:!0,get:function(){return i.Resolution}}),Object.defineProperty(t,"ScanlineEffect",{enumerable:!0,get:function(){return i.ScanlineEffect}}),Object.defineProperty(t,"SelectiveBloomEffect",{enumerable:!0,get:function(){return i.SelectiveBloomEffect}}),Object.defineProperty(t,"SepiaEffect",{enumerable:!0,get:function(){return i.SepiaEffect}}),Object.defineProperty(t,"SSAOEffect",{enumerable:!0,get:function(){return i.SSAOEffect}}),Object.defineProperty(t,"ThreejsData",{enumerable:!0,get:function(){return i.ThreejsData}}),Object.defineProperty(t,"TiltShiftEffect",{enumerable:!0,get:function(){return i.TiltShiftEffect}}),Object.defineProperty(t,"VignetteEffect",{enumerable:!0,get:function(){return i.VignetteEffect}}),Object.defineProperty(t,"VignetteTechnique",{enumerable:!0,get:function(){return i.VignetteTechnique}});const o=Rl();Object.defineProperty(t,"Box",{enumerable:!0,get:function(){return o.Box}}),Object.defineProperty(t,"Sphere",{enumerable:!0,get:function(){return o.Sphere}});const l=Bf;Object.defineProperty(t,"BUSY_MODE_DISPLAY",{enumerable:!0,get:function(){return l.BUSY_MODE_DISPLAY}}),Object.defineProperty(t,"FLAG_TYPE",{enumerable:!0,get:function(){return l.FLAG_TYPE}}),Object.defineProperty(t,"RENDERER_TYPE",{enumerable:!0,get:function(){return l.RENDERER_TYPE}}),Object.defineProperty(t,"SPINNER_POSITIONING",{enumerable:!0,get:function(){return l.SPINNER_POSITIONING}}),Object.defineProperty(t,"TEXTURE_ENCODING",{enumerable:!0,get:function(){return l.TEXTURE_ENCODING}}),Object.defineProperty(t,"TONE_MAPPING",{enumerable:!0,get:function(){return l.TONE_MAPPING}}),Object.defineProperty(t,"VISIBILITY_MODE",{enumerable:!0,get:function(){return l.VISIBILITY_MODE}});const d=F0;Object.defineProperty(t,"CAMERA_TYPE",{enumerable:!0,get:function(){return d.CAMERA_TYPE}}),Object.defineProperty(t,"ORTHOGRAPHIC_CAMERA_DIRECTION",{enumerable:!0,get:function(){return d.ORTHOGRAPHIC_CAMERA_DIRECTION}});const p=$Ae;Object.defineProperty(t,"createViewport",{enumerable:!0,get:function(){return p.createViewport}}),Object.defineProperty(t,"viewports",{enumerable:!0,get:function(){return p.viewports}});const g=hz;Object.defineProperty(t,"DataEngine",{enumerable:!0,get:function(){return g.DataEngine}});const v=Mn;Object.defineProperty(t,"EVENTTYPE",{enumerable:!0,get:function(){return v.EVENTTYPE}}),Object.defineProperty(t,"EVENTTYPE_CAMERA",{enumerable:!0,get:function(){return v.EVENTTYPE_CAMERA}}),Object.defineProperty(t,"EVENTTYPE_DRAWING_TOOLS",{enumerable:!0,get:function(){return v.EVENTTYPE_DRAWING_TOOLS}}),Object.defineProperty(t,"EVENTTYPE_INTERACTION",{enumerable:!0,get:function(){return v.EVENTTYPE_INTERACTION}}),Object.defineProperty(t,"EVENTTYPE_OUTPUT",{enumerable:!0,get:function(){return v.EVENTTYPE_OUTPUT}}),Object.defineProperty(t,"EVENTTYPE_PARAMETER",{enumerable:!0,get:function(){return v.EVENTTYPE_PARAMETER}}),Object.defineProperty(t,"EVENTTYPE_RENDERING",{enumerable:!0,get:function(){return v.EVENTTYPE_RENDERING}}),Object.defineProperty(t,"EVENTTYPE_SCENE",{enumerable:!0,get:function(){return v.EVENTTYPE_SCENE}}),Object.defineProperty(t,"EVENTTYPE_SESSION",{enumerable:!0,get:function(){return v.EVENTTYPE_SESSION}}),Object.defineProperty(t,"EVENTTYPE_TASK",{enumerable:!0,get:function(){return v.EVENTTYPE_TASK}}),Object.defineProperty(t,"EVENTTYPE_VIEWPORT",{enumerable:!0,get:function(){return v.EVENTTYPE_VIEWPORT}}),Object.defineProperty(t,"isARError",{enumerable:!0,get:function(){return v.isARError}}),Object.defineProperty(t,"isViewerCameraError",{enumerable:!0,get:function(){return v.isViewerCameraError}}),Object.defineProperty(t,"isViewerDataProcessingError",{enumerable:!0,get:function(){return v.isViewerDataProcessingError}}),Object.defineProperty(t,"isViewerDrawingToolsError",{enumerable:!0,get:function(){return v.isViewerDrawingToolsError}}),Object.defineProperty(t,"isViewerEnvironmentMapError",{enumerable:!0,get:function(){return v.isViewerEnvironmentMapError}}),Object.defineProperty(t,"isViewerError",{enumerable:!0,get:function(){return v.isViewerError}}),Object.defineProperty(t,"isViewerGeometryBackendError",{enumerable:!0,get:function(){return v.isViewerGeometryBackendError}}),Object.defineProperty(t,"isViewerGeometryBackendGenericError",{enumerable:!0,get:function(){return v.isViewerGeometryBackendGenericError}}),Object.defineProperty(t,"isViewerGeometryBackendRequestError",{enumerable:!0,get:function(){return v.isViewerGeometryBackendRequestError}}),Object.defineProperty(t,"isViewerGeometryBackendResponseError",{enumerable:!0,get:function(){return v.isViewerGeometryBackendResponseError}}),Object.defineProperty(t,"isViewerInteractionError",{enumerable:!0,get:function(){return v.isViewerInteractionError}}),Object.defineProperty(t,"isViewerLightError",{enumerable:!0,get:function(){return v.isViewerLightError}}),Object.defineProperty(t,"isViewerSessionError",{enumerable:!0,get:function(){return v.isViewerSessionError}}),Object.defineProperty(t,"isViewerSettingsError",{enumerable:!0,get:function(){return v.isViewerSettingsError}}),Object.defineProperty(t,"isViewerUnknownError",{enumerable:!0,get:function(){return v.isViewerUnknownError}}),Object.defineProperty(t,"isViewerValidationError",{enumerable:!0,get:function(){return v.isViewerValidationError}}),Object.defineProperty(t,"isViewerViewportError",{enumerable:!0,get:function(){return v.isViewerViewportError}}),Object.defineProperty(t,"isViewerWebGLError",{enumerable:!0,get:function(){return v.isViewerWebGLError}}),Object.defineProperty(t,"LOGGING_LEVEL",{enumerable:!0,get:function(){return v.LOGGING_LEVEL}}),Object.defineProperty(t,"SESSION_SETTINGS_MODE",{enumerable:!0,get:function(){return v.SESSION_SETTINGS_MODE}}),Object.defineProperty(t,"ShapeDiverGeometryBackendError",{enumerable:!0,get:function(){return v.ShapeDiverGeometryBackendError}}),Object.defineProperty(t,"ShapeDiverGeometryBackendRequestError",{enumerable:!0,get:function(){return v.ShapeDiverGeometryBackendRequestError}}),Object.defineProperty(t,"ShapeDiverGeometryBackendResponseError",{enumerable:!0,get:function(){return v.ShapeDiverGeometryBackendResponseError}}),Object.defineProperty(t,"ShapeDiverGeometryBackendResponseErrorType",{enumerable:!0,get:function(){return v.ShapeDiverGeometryBackendResponseErrorType}}),Object.defineProperty(t,"ShapeDiverViewerArError",{enumerable:!0,get:function(){return v.ShapeDiverViewerArError}}),Object.defineProperty(t,"ShapeDiverViewerCameraError",{enumerable:!0,get:function(){return v.ShapeDiverViewerCameraError}}),Object.defineProperty(t,"ShapeDiverViewerDataProcessingError",{enumerable:!0,get:function(){return v.ShapeDiverViewerDataProcessingError}}),Object.defineProperty(t,"ShapeDiverViewerDrawingToolsError",{enumerable:!0,get:function(){return v.ShapeDiverViewerDrawingToolsError}}),Object.defineProperty(t,"ShapeDiverViewerEnvironmentMapError",{enumerable:!0,get:function(){return v.ShapeDiverViewerEnvironmentMapError}}),Object.defineProperty(t,"ShapeDiverViewerError",{enumerable:!0,get:function(){return v.ShapeDiverViewerError}}),Object.defineProperty(t,"ShapeDiverViewerErrorType",{enumerable:!0,get:function(){return v.ShapeDiverViewerErrorType}}),Object.defineProperty(t,"ShapeDiverViewerInteractionError",{enumerable:!0,get:function(){return v.ShapeDiverViewerInteractionError}}),Object.defineProperty(t,"ShapeDiverViewerLightError",{enumerable:!0,get:function(){return v.ShapeDiverViewerLightError}}),Object.defineProperty(t,"ShapeDiverViewerSessionError",{enumerable:!0,get:function(){return v.ShapeDiverViewerSessionError}}),Object.defineProperty(t,"ShapeDiverViewerSettingsError",{enumerable:!0,get:function(){return v.ShapeDiverViewerSettingsError}}),Object.defineProperty(t,"ShapeDiverViewerUnknownError",{enumerable:!0,get:function(){return v.ShapeDiverViewerUnknownError}}),Object.defineProperty(t,"ShapeDiverViewerValidationError",{enumerable:!0,get:function(){return v.ShapeDiverViewerValidationError}}),Object.defineProperty(t,"ShapeDiverViewerViewportError",{enumerable:!0,get:function(){return v.ShapeDiverViewerViewportError}}),Object.defineProperty(t,"ShapeDiverViewerWebGLError",{enumerable:!0,get:function(){return v.ShapeDiverViewerWebGLError}});const _=W6;Object.defineProperty(t,"GeometryEngine",{enumerable:!0,get:function(){return _.GeometryEngine}});const b=Cm;Object.defineProperty(t,"TAG3D_JUSTIFICATION",{enumerable:!0,get:function(){return b.TAG3D_JUSTIFICATION}});const w=dr;Object.defineProperty(t,"Tree",{enumerable:!0,get:function(){return w.Tree}}),Object.defineProperty(t,"TreeNode",{enumerable:!0,get:function(){return w.TreeNode}});const E=Pm;Object.defineProperty(t,"LIGHT_TYPE",{enumerable:!0,get:function(){return E.LIGHT_TYPE}});const S=vx;Object.defineProperty(t,"MaterialEngine",{enumerable:!0,get:function(){return S.MaterialEngine}});const M=I0;Object.defineProperty(t,"EXPORT_TYPE",{enumerable:!0,get:function(){return M.ShapeDiverResponseExportDefinitionType}}),Object.defineProperty(t,"ShapeDiverResponseModelComputationStatus",{enumerable:!0,get:function(){return M.ShapeDiverResponseModelComputationStatus}})})(HAe);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.EVENTTYPE_TASK=t.EVENTTYPE_DRAWING_TOOLS=t.EVENTTYPE_INTERACTION=t.EVENTTYPE_VIEWPORT=t.EVENTTYPE_SESSION=t.EVENTTYPE_SCENE=t.EVENTTYPE_RENDERING=t.EVENTTYPE_PARAMETER=t.EVENTTYPE_OUTPUT=t.EVENTTYPE_CAMERA=t.EVENTTYPE=t.TASK_TYPE=t.SPINNER_POSITIONING=t.SESSION_SETTINGS_MODE=t.BUSY_MODE_DISPLAY=t.SDTF_TYPEHINT=t.TEXTURE_FILTERING=t.TEXTURE_WRAPPING=t.MATERIAL_TYPE=t.MATERIAL_SHADING=t.MATERIAL_ALPHA=t.MATERIAL_SIDE=t.PRIMITIVE_MODE=t.LOGGING_LEVEL=t.ENVIRONMENT_MAP_EMPTY=t.ENVIRONMENT_MAP_CUBE=t.ENVIRONMENT_MAP=t.TONE_MAPPING=t.TEXTURE_ENCODING=t.ORTHOGRAPHIC_CAMERA_DIRECTION=t.VISIBILITY_MODE=t.RENDERER_TYPE=t.LIGHT_TYPE=t.CAMERA_TYPE=t.TAG3D_JUSTIFICATION=t.PARAMETER_VISUALIZATION=t.EXPORT_TYPE=t.PARAMETER_TYPE=t.FLAG_TYPE=t.TreeNode=t.Tree=t.version=t.generalOptions=t.sceneTree=t.removeListener=t.addListener=t.sessions=t.createSession=t.viewports=t.createViewport=void 0,t.ShapeDiverGeometryBackendResponseError=t.ShapeDiverGeometryBackendRequestError=t.ShapeDiverGeometryBackendError=t.ShapeDiverViewerDrawingToolsError=t.ShapeDiverViewerInteractionError=t.ShapeDiverViewerValidationError=t.ShapeDiverViewerCameraError=t.ShapeDiverViewerLightError=t.ShapeDiverViewerArError=t.ShapeDiverViewerUnknownError=t.ShapeDiverViewerViewportError=t.ShapeDiverViewerSessionError=t.ShapeDiverViewerSettingsError=t.ShapeDiverViewerWebGLError=t.ShapeDiverViewerEnvironmentMapError=t.ShapeDiverViewerDataProcessingError=t.ShapeDiverViewerError=t.ShapeDiverViewerErrorType=t.SessionOutputData=t.SessionData=t.MaterialEngine=t.GeometryEngine=t.DataEngine=t.SdtfPrimitiveTypeGuard=t.SDTFItemData=t.SDTFAttributeData=t.SDTFAttributesData=t.SDTFOverviewData=t.CustomData=t.HTMLElementAnchorData=t.HTMLElementAnchorImageData=t.HTMLElementAnchorTextData=t.HTMLElementAnchorCustomData=t.MaterialVariantsData=t.PrimitiveData=t.AttributeData=t.GeometryData=t.AnimationData=t.MapData=t.MaterialGemData=t.MaterialSpecularGlossinessData=t.MaterialBasicLineData=t.MaterialMultiPointData=t.MaterialPointData=t.MaterialUnlitData=t.MaterialStandardData=t.ShapeDiverResponseModelComputationStatus=t.ThreejsData=t.Sphere=t.Box=void 0,t.OutputApiData=t.SessionApiData=t.Resolution=t.KernelSize=t.VignetteTechnique=t.BlendFunction=t.EffectComposer=t.Effect=t.VignetteEffect=t.TiltShiftEffect=t.SepiaEffect=t.SelectiveBloomEffect=t.ScanlineEffect=t.SSAOEffect=t.PixelationEffect=t.OutlineEffect=t.NoiseEffect=t.HueSaturationEffect=t.GridEffect=t.GodRaysEffect=t.DotScreenEffect=t.DepthOfFieldEffect=t.ChromaticAberrationEffect=t.BloomEffect=t.POST_PROCESSING_EFFECT_TYPE=t.ANTI_ALIASING_TECHNIQUE=t.isViewerGeometryBackendResponseError=t.isViewerGeometryBackendRequestError=t.isViewerGeometryBackendGenericError=t.isViewerGeometryBackendError=t.isViewerDrawingToolsError=t.isViewerInteractionError=t.isViewerValidationError=t.isARError=t.isViewerCameraError=t.isViewerLightError=t.isViewerViewportError=t.isViewerSessionError=t.isViewerSettingsError=t.isViewerWebGLError=t.isViewerEnvironmentMapError=t.isViewerDataProcessingError=t.isViewerUnknownError=t.isViewerError=t.ShapeDiverGeometryBackendResponseErrorType=void 0;const e=oa;Object.defineProperty(t,"addListener",{enumerable:!0,get:function(){return e.addListener}}),Object.defineProperty(t,"generalOptions",{enumerable:!0,get:function(){return e.generalOptions}}),Object.defineProperty(t,"removeListener",{enumerable:!0,get:function(){return e.removeListener}}),Object.defineProperty(t,"sceneTree",{enumerable:!0,get:function(){return e.sceneTree}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return e.version}});const n=Gi;Object.defineProperty(t,"AnimationData",{enumerable:!0,get:function(){return n.AnimationData}}),Object.defineProperty(t,"AttributeData",{enumerable:!0,get:function(){return n.AttributeData}}),Object.defineProperty(t,"CustomData",{enumerable:!0,get:function(){return n.CustomData}}),Object.defineProperty(t,"GeometryData",{enumerable:!0,get:function(){return n.GeometryData}}),Object.defineProperty(t,"HTMLElementAnchorCustomData",{enumerable:!0,get:function(){return n.HTMLElementAnchorCustomData}}),Object.defineProperty(t,"HTMLElementAnchorData",{enumerable:!0,get:function(){return n.HTMLElementAnchorData}}),Object.defineProperty(t,"HTMLElementAnchorImageData",{enumerable:!0,get:function(){return n.HTMLElementAnchorImageData}}),Object.defineProperty(t,"HTMLElementAnchorTextData",{enumerable:!0,get:function(){return n.HTMLElementAnchorTextData}}),Object.defineProperty(t,"MapData",{enumerable:!0,get:function(){return n.MapData}}),Object.defineProperty(t,"MATERIAL_ALPHA",{enumerable:!0,get:function(){return n.MATERIAL_ALPHA}}),Object.defineProperty(t,"MATERIAL_SHADING",{enumerable:!0,get:function(){return n.MATERIAL_SHADING}}),Object.defineProperty(t,"MATERIAL_SIDE",{enumerable:!0,get:function(){return n.MATERIAL_SIDE}}),Object.defineProperty(t,"MATERIAL_TYPE",{enumerable:!0,get:function(){return n.MATERIAL_TYPE}}),Object.defineProperty(t,"MaterialBasicLineData",{enumerable:!0,get:function(){return n.MaterialBasicLineData}}),Object.defineProperty(t,"MaterialGemData",{enumerable:!0,get:function(){return n.MaterialGemData}}),Object.defineProperty(t,"MaterialMultiPointData",{enumerable:!0,get:function(){return n.MaterialMultiPointData}}),Object.defineProperty(t,"MaterialPointData",{enumerable:!0,get:function(){return n.MaterialPointData}}),Object.defineProperty(t,"MaterialSpecularGlossinessData",{enumerable:!0,get:function(){return n.MaterialSpecularGlossinessData}}),Object.defineProperty(t,"MaterialStandardData",{enumerable:!0,get:function(){return n.MaterialStandardData}}),Object.defineProperty(t,"MaterialUnlitData",{enumerable:!0,get:function(){return n.MaterialUnlitData}}),Object.defineProperty(t,"MaterialVariantsData",{enumerable:!0,get:function(){return n.MaterialVariantsData}}),Object.defineProperty(t,"PARAMETER_TYPE",{enumerable:!0,get:function(){return n.PARAMETER_TYPE}}),Object.defineProperty(t,"PARAMETER_VISUALIZATION",{enumerable:!0,get:function(){return n.PARAMETER_VISUALIZATION}}),Object.defineProperty(t,"PRIMITIVE_MODE",{enumerable:!0,get:function(){return n.PRIMITIVE_MODE}}),Object.defineProperty(t,"PrimitiveData",{enumerable:!0,get:function(){return n.PrimitiveData}}),Object.defineProperty(t,"SDTF_TYPEHINT",{enumerable:!0,get:function(){return n.SDTF_TYPEHINT}}),Object.defineProperty(t,"SDTFAttributeData",{enumerable:!0,get:function(){return n.SDTFAttributeData}}),Object.defineProperty(t,"SDTFAttributesData",{enumerable:!0,get:function(){return n.SDTFAttributesData}}),Object.defineProperty(t,"SDTFItemData",{enumerable:!0,get:function(){return n.SDTFItemData}}),Object.defineProperty(t,"SDTFOverviewData",{enumerable:!0,get:function(){return n.SDTFOverviewData}}),Object.defineProperty(t,"SdtfPrimitiveTypeGuard",{enumerable:!0,get:function(){return n.SdtfPrimitiveTypeGuard}}),Object.defineProperty(t,"TASK_TYPE",{enumerable:!0,get:function(){return n.TASK_TYPE}}),Object.defineProperty(t,"TEXTURE_FILTERING",{enumerable:!0,get:function(){return n.TEXTURE_FILTERING}}),Object.defineProperty(t,"TEXTURE_WRAPPING",{enumerable:!0,get:function(){return n.TEXTURE_WRAPPING}});const i=yx;Object.defineProperty(t,"ANTI_ALIASING_TECHNIQUE",{enumerable:!0,get:function(){return i.ANTI_ALIASING_TECHNIQUE}}),Object.defineProperty(t,"BlendFunction",{enumerable:!0,get:function(){return i.BlendFunction}}),Object.defineProperty(t,"BloomEffect",{enumerable:!0,get:function(){return i.BloomEffect}}),Object.defineProperty(t,"ChromaticAberrationEffect",{enumerable:!0,get:function(){return i.ChromaticAberrationEffect}}),Object.defineProperty(t,"DepthOfFieldEffect",{enumerable:!0,get:function(){return i.DepthOfFieldEffect}}),Object.defineProperty(t,"DotScreenEffect",{enumerable:!0,get:function(){return i.DotScreenEffect}}),Object.defineProperty(t,"Effect",{enumerable:!0,get:function(){return i.Effect}}),Object.defineProperty(t,"EffectComposer",{enumerable:!0,get:function(){return i.EffectComposer}}),Object.defineProperty(t,"ENVIRONMENT_MAP",{enumerable:!0,get:function(){return i.ENVIRONMENT_MAP}}),Object.defineProperty(t,"ENVIRONMENT_MAP_CUBE",{enumerable:!0,get:function(){return i.ENVIRONMENT_MAP_CUBE}}),Object.defineProperty(t,"ENVIRONMENT_MAP_EMPTY",{enumerable:!0,get:function(){return i.ENVIRONMENT_MAP_EMPTY}}),Object.defineProperty(t,"GodRaysEffect",{enumerable:!0,get:function(){return i.GodRaysEffect}}),Object.defineProperty(t,"GridEffect",{enumerable:!0,get:function(){return i.GridEffect}}),Object.defineProperty(t,"HueSaturationEffect",{enumerable:!0,get:function(){return i.HueSaturationEffect}}),Object.defineProperty(t,"KernelSize",{enumerable:!0,get:function(){return i.KernelSize}}),Object.defineProperty(t,"NoiseEffect",{enumerable:!0,get:function(){return i.NoiseEffect}}),Object.defineProperty(t,"OutlineEffect",{enumerable:!0,get:function(){return i.OutlineEffect}}),Object.defineProperty(t,"PixelationEffect",{enumerable:!0,get:function(){return i.PixelationEffect}}),Object.defineProperty(t,"POST_PROCESSING_EFFECT_TYPE",{enumerable:!0,get:function(){return i.POST_PROCESSING_EFFECT_TYPE}}),Object.defineProperty(t,"Resolution",{enumerable:!0,get:function(){return i.Resolution}}),Object.defineProperty(t,"ScanlineEffect",{enumerable:!0,get:function(){return i.ScanlineEffect}}),Object.defineProperty(t,"SelectiveBloomEffect",{enumerable:!0,get:function(){return i.SelectiveBloomEffect}}),Object.defineProperty(t,"SepiaEffect",{enumerable:!0,get:function(){return i.SepiaEffect}}),Object.defineProperty(t,"SSAOEffect",{enumerable:!0,get:function(){return i.SSAOEffect}}),Object.defineProperty(t,"ThreejsData",{enumerable:!0,get:function(){return i.ThreejsData}}),Object.defineProperty(t,"TiltShiftEffect",{enumerable:!0,get:function(){return i.TiltShiftEffect}}),Object.defineProperty(t,"VignetteEffect",{enumerable:!0,get:function(){return i.VignetteEffect}}),Object.defineProperty(t,"VignetteTechnique",{enumerable:!0,get:function(){return i.VignetteTechnique}});const o=Rl();Object.defineProperty(t,"Box",{enumerable:!0,get:function(){return o.Box}}),Object.defineProperty(t,"Sphere",{enumerable:!0,get:function(){return o.Sphere}});const l=Bf;Object.defineProperty(t,"BUSY_MODE_DISPLAY",{enumerable:!0,get:function(){return l.BUSY_MODE_DISPLAY}}),Object.defineProperty(t,"FLAG_TYPE",{enumerable:!0,get:function(){return l.FLAG_TYPE}}),Object.defineProperty(t,"RENDERER_TYPE",{enumerable:!0,get:function(){return l.RENDERER_TYPE}}),Object.defineProperty(t,"SPINNER_POSITIONING",{enumerable:!0,get:function(){return l.SPINNER_POSITIONING}}),Object.defineProperty(t,"TEXTURE_ENCODING",{enumerable:!0,get:function(){return l.TEXTURE_ENCODING}}),Object.defineProperty(t,"TONE_MAPPING",{enumerable:!0,get:function(){return l.TONE_MAPPING}}),Object.defineProperty(t,"VISIBILITY_MODE",{enumerable:!0,get:function(){return l.VISIBILITY_MODE}});const d=F0;Object.defineProperty(t,"CAMERA_TYPE",{enumerable:!0,get:function(){return d.CAMERA_TYPE}}),Object.defineProperty(t,"ORTHOGRAPHIC_CAMERA_DIRECTION",{enumerable:!0,get:function(){return d.ORTHOGRAPHIC_CAMERA_DIRECTION}});const p=NAe;Object.defineProperty(t,"createSession",{enumerable:!0,get:function(){return p.createSession}}),Object.defineProperty(t,"OutputApiData",{enumerable:!0,get:function(){return p.OutputApiData}}),Object.defineProperty(t,"SessionApiData",{enumerable:!0,get:function(){return p.SessionApiData}}),Object.defineProperty(t,"sessions",{enumerable:!0,get:function(){return p.sessions}});const g=HAe;Object.defineProperty(t,"createViewport",{enumerable:!0,get:function(){return g.createViewport}}),Object.defineProperty(t,"viewports",{enumerable:!0,get:function(){return g.viewports}});const v=hz;Object.defineProperty(t,"DataEngine",{enumerable:!0,get:function(){return v.DataEngine}});const _=Mn;Object.defineProperty(t,"EVENTTYPE",{enumerable:!0,get:function(){return _.EVENTTYPE}}),Object.defineProperty(t,"EVENTTYPE_CAMERA",{enumerable:!0,get:function(){return _.EVENTTYPE_CAMERA}}),Object.defineProperty(t,"EVENTTYPE_DRAWING_TOOLS",{enumerable:!0,get:function(){return _.EVENTTYPE_DRAWING_TOOLS}}),Object.defineProperty(t,"EVENTTYPE_INTERACTION",{enumerable:!0,get:function(){return _.EVENTTYPE_INTERACTION}}),Object.defineProperty(t,"EVENTTYPE_OUTPUT",{enumerable:!0,get:function(){return _.EVENTTYPE_OUTPUT}}),Object.defineProperty(t,"EVENTTYPE_PARAMETER",{enumerable:!0,get:function(){return _.EVENTTYPE_PARAMETER}}),Object.defineProperty(t,"EVENTTYPE_RENDERING",{enumerable:!0,get:function(){return _.EVENTTYPE_RENDERING}}),Object.defineProperty(t,"EVENTTYPE_SCENE",{enumerable:!0,get:function(){return _.EVENTTYPE_SCENE}}),Object.defineProperty(t,"EVENTTYPE_SESSION",{enumerable:!0,get:function(){return _.EVENTTYPE_SESSION}}),Object.defineProperty(t,"EVENTTYPE_TASK",{enumerable:!0,get:function(){return _.EVENTTYPE_TASK}}),Object.defineProperty(t,"EVENTTYPE_VIEWPORT",{enumerable:!0,get:function(){return _.EVENTTYPE_VIEWPORT}}),Object.defineProperty(t,"isARError",{enumerable:!0,get:function(){return _.isARError}}),Object.defineProperty(t,"isViewerCameraError",{enumerable:!0,get:function(){return _.isViewerCameraError}}),Object.defineProperty(t,"isViewerDataProcessingError",{enumerable:!0,get:function(){return _.isViewerDataProcessingError}}),Object.defineProperty(t,"isViewerDrawingToolsError",{enumerable:!0,get:function(){return _.isViewerDrawingToolsError}}),Object.defineProperty(t,"isViewerEnvironmentMapError",{enumerable:!0,get:function(){return _.isViewerEnvironmentMapError}}),Object.defineProperty(t,"isViewerError",{enumerable:!0,get:function(){return _.isViewerError}}),Object.defineProperty(t,"isViewerGeometryBackendError",{enumerable:!0,get:function(){return _.isViewerGeometryBackendError}}),Object.defineProperty(t,"isViewerGeometryBackendGenericError",{enumerable:!0,get:function(){return _.isViewerGeometryBackendGenericError}}),Object.defineProperty(t,"isViewerGeometryBackendRequestError",{enumerable:!0,get:function(){return _.isViewerGeometryBackendRequestError}}),Object.defineProperty(t,"isViewerGeometryBackendResponseError",{enumerable:!0,get:function(){return _.isViewerGeometryBackendResponseError}}),Object.defineProperty(t,"isViewerInteractionError",{enumerable:!0,get:function(){return _.isViewerInteractionError}}),Object.defineProperty(t,"isViewerLightError",{enumerable:!0,get:function(){return _.isViewerLightError}}),Object.defineProperty(t,"isViewerSessionError",{enumerable:!0,get:function(){return _.isViewerSessionError}}),Object.defineProperty(t,"isViewerSettingsError",{enumerable:!0,get:function(){return _.isViewerSettingsError}}),Object.defineProperty(t,"isViewerUnknownError",{enumerable:!0,get:function(){return _.isViewerUnknownError}}),Object.defineProperty(t,"isViewerValidationError",{enumerable:!0,get:function(){return _.isViewerValidationError}}),Object.defineProperty(t,"isViewerViewportError",{enumerable:!0,get:function(){return _.isViewerViewportError}}),Object.defineProperty(t,"isViewerWebGLError",{enumerable:!0,get:function(){return _.isViewerWebGLError}}),Object.defineProperty(t,"LOGGING_LEVEL",{enumerable:!0,get:function(){return _.LOGGING_LEVEL}}),Object.defineProperty(t,"SESSION_SETTINGS_MODE",{enumerable:!0,get:function(){return _.SESSION_SETTINGS_MODE}}),Object.defineProperty(t,"ShapeDiverGeometryBackendError",{enumerable:!0,get:function(){return _.ShapeDiverGeometryBackendError}}),Object.defineProperty(t,"ShapeDiverGeometryBackendRequestError",{enumerable:!0,get:function(){return _.ShapeDiverGeometryBackendRequestError}}),Object.defineProperty(t,"ShapeDiverGeometryBackendResponseError",{enumerable:!0,get:function(){return _.ShapeDiverGeometryBackendResponseError}}),Object.defineProperty(t,"ShapeDiverGeometryBackendResponseErrorType",{enumerable:!0,get:function(){return _.ShapeDiverGeometryBackendResponseErrorType}}),Object.defineProperty(t,"ShapeDiverViewerArError",{enumerable:!0,get:function(){return _.ShapeDiverViewerArError}}),Object.defineProperty(t,"ShapeDiverViewerCameraError",{enumerable:!0,get:function(){return _.ShapeDiverViewerCameraError}}),Object.defineProperty(t,"ShapeDiverViewerDataProcessingError",{enumerable:!0,get:function(){return _.ShapeDiverViewerDataProcessingError}}),Object.defineProperty(t,"ShapeDiverViewerDrawingToolsError",{enumerable:!0,get:function(){return _.ShapeDiverViewerDrawingToolsError}}),Object.defineProperty(t,"ShapeDiverViewerEnvironmentMapError",{enumerable:!0,get:function(){return _.ShapeDiverViewerEnvironmentMapError}}),Object.defineProperty(t,"ShapeDiverViewerError",{enumerable:!0,get:function(){return _.ShapeDiverViewerError}}),Object.defineProperty(t,"ShapeDiverViewerErrorType",{enumerable:!0,get:function(){return _.ShapeDiverViewerErrorType}}),Object.defineProperty(t,"ShapeDiverViewerInteractionError",{enumerable:!0,get:function(){return _.ShapeDiverViewerInteractionError}}),Object.defineProperty(t,"ShapeDiverViewerLightError",{enumerable:!0,get:function(){return _.ShapeDiverViewerLightError}}),Object.defineProperty(t,"ShapeDiverViewerSessionError",{enumerable:!0,get:function(){return _.ShapeDiverViewerSessionError}}),Object.defineProperty(t,"ShapeDiverViewerSettingsError",{enumerable:!0,get:function(){return _.ShapeDiverViewerSettingsError}}),Object.defineProperty(t,"ShapeDiverViewerUnknownError",{enumerable:!0,get:function(){return _.ShapeDiverViewerUnknownError}}),Object.defineProperty(t,"ShapeDiverViewerValidationError",{enumerable:!0,get:function(){return _.ShapeDiverViewerValidationError}}),Object.defineProperty(t,"ShapeDiverViewerViewportError",{enumerable:!0,get:function(){return _.ShapeDiverViewerViewportError}}),Object.defineProperty(t,"ShapeDiverViewerWebGLError",{enumerable:!0,get:function(){return _.ShapeDiverViewerWebGLError}});const b=W6;Object.defineProperty(t,"GeometryEngine",{enumerable:!0,get:function(){return b.GeometryEngine}});const w=Cm;Object.defineProperty(t,"TAG3D_JUSTIFICATION",{enumerable:!0,get:function(){return w.TAG3D_JUSTIFICATION}});const E=Gx;Object.defineProperty(t,"SessionData",{enumerable:!0,get:function(){return E.SessionData}}),Object.defineProperty(t,"SessionOutputData",{enumerable:!0,get:function(){return E.SessionOutputData}});const S=dr;Object.defineProperty(t,"Tree",{enumerable:!0,get:function(){return S.Tree}}),Object.defineProperty(t,"TreeNode",{enumerable:!0,get:function(){return S.TreeNode}});const M=Pm;Object.defineProperty(t,"LIGHT_TYPE",{enumerable:!0,get:function(){return M.LIGHT_TYPE}});const k=vx;Object.defineProperty(t,"MaterialEngine",{enumerable:!0,get:function(){return k.MaterialEngine}});const x=I0;Object.defineProperty(t,"ShapeDiverResponseModelComputationStatus",{enumerable:!0,get:function(){return x.ShapeDiverResponseModelComputationStatus}});const C=I0;Object.defineProperty(t,"EXPORT_TYPE",{enumerable:!0,get:function(){return C.ShapeDiverResponseExportDefinitionType}})})(Xs);const Jyt=l6(Xs),dPt=f0e({__proto__:null,default:Jyt},[Xs]);var ebt={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Yce=t=>{let e;const n=new Set,i=(_,b)=>{const w=typeof _=="function"?_(e):_;if(!Object.is(w,e)){const E=e;e=b??(typeof w!="object"||w===null)?w:Object.assign({},e,w),n.forEach(S=>S(e,E))}},o=()=>e,g={setState:i,getState:o,getInitialState:()=>v,subscribe:_=>(n.add(_),()=>n.delete(_)),destroy:()=>{(ebt?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},v=e=t(i,o,g);return g},tbt=t=>t?Yce(t):Yce;var l3e={exports:{}},c3e={},u3e={exports:{}},f3e={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O4=de;function nbt(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var rbt=typeof Object.is=="function"?Object.is:nbt,ibt=O4.useState,sbt=O4.useEffect,obt=O4.useLayoutEffect,abt=O4.useDebugValue;function lbt(t,e){var n=e(),i=ibt({inst:{value:n,getSnapshot:e}}),o=i[0].inst,l=i[1];return obt(function(){o.value=n,o.getSnapshot=e,TG(o)&&l({inst:o})},[t,n,e]),sbt(function(){return TG(o)&&l({inst:o}),t(function(){TG(o)&&l({inst:o})})},[t]),abt(n),n}function TG(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!rbt(t,n)}catch{return!0}}function cbt(t,e){return e()}var ubt=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?cbt:lbt;f3e.useSyncExternalStore=O4.useSyncExternalStore!==void 0?O4.useSyncExternalStore:ubt;u3e.exports=f3e;var fbt=u3e.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bz=de,dbt=fbt;function hbt(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var pbt=typeof Object.is=="function"?Object.is:hbt,mbt=dbt.useSyncExternalStore,gbt=Bz.useRef,vbt=Bz.useEffect,_bt=Bz.useMemo,ybt=Bz.useDebugValue;c3e.useSyncExternalStoreWithSelector=function(t,e,n,i,o){var l=gbt(null);if(l.current===null){var d={hasValue:!1,value:null};l.current=d}else d=l.current;l=_bt(function(){function g(E){if(!v){if(v=!0,_=E,E=i(E),o!==void 0&&d.hasValue){var S=d.value;if(o(S,E))return b=S}return b=E}if(S=b,pbt(_,E))return S;var M=i(E);return o!==void 0&&o(S,M)?S:(_=E,b=M)}var v=!1,_,b,w=n===void 0?null:n;return[function(){return g(e())},w===null?void 0:function(){return g(w())}]},[e,n,i,o]);var p=mbt(t,l[0],l[1]);return vbt(function(){d.hasValue=!0,d.value=p},[p]),ybt(p),p};l3e.exports=c3e;var bbt=l3e.exports;const Abt=l6(bbt);var d3e={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:wbt}=gd,{useSyncExternalStoreWithSelector:Ebt}=Abt;let qce=!1;const Sbt=t=>t;function Tbt(t,e=Sbt,n){(d3e?"production":void 0)!=="production"&&n&&!qce&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),qce=!0);const i=Ebt(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return wbt(i),i}const Xce=t=>{(d3e?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?tbt(t):t,n=(i,o)=>Tbt(e,i,o);return Object.assign(n,e),n},nM=t=>t?Xce(t):Xce;var xG={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const YW=new Map,EC=t=>{const e=YW.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([n,i])=>[n,i.getState()])):{}},xbt=(t,e,n)=>{if(t===void 0)return{type:"untracked",connection:e.connect(n)};const i=YW.get(n.name);if(i)return{type:"tracked",store:t,...i};const o={connection:e.connect(n),stores:{}};return YW.set(n.name,o),{type:"tracked",store:t,...o}},Mbt=(t,e={})=>(n,i,o)=>{const{enabled:l,anonymousActionType:d,store:p,...g}=e;let v;try{v=(l??(xG?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!v)return(xG?"production":void 0)!=="production"&&l&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),t(n,i,o);const{connection:_,...b}=xbt(p,v,g);let w=!0;o.setState=(M,k,x)=>{const C=n(M,k);if(!w)return C;const P=x===void 0?{type:d||"anonymous"}:typeof x=="string"?{type:x}:x;return p===void 0?(_==null||_.send(P,i()),C):(_==null||_.send({...P,type:`${p}/${P.type}`},{...EC(g.name),[p]:o.getState()}),C)};const E=(...M)=>{const k=w;w=!1,n(...M),w=k},S=t(o.setState,i,o);if(b.type==="untracked"?_==null||_.init(S):(b.stores[b.store]=o,_==null||_.init(Object.fromEntries(Object.entries(b.stores).map(([M,k])=>[M,M===b.store?S:k.getState()])))),o.dispatchFromDevtools&&typeof o.dispatch=="function"){let M=!1;const k=o.dispatch;o.dispatch=(...x)=>{(xG?"production":void 0)!=="production"&&x[0].type==="__setState"&&!M&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),M=!0),k(...x)}}return _.subscribe(M=>{var k;switch(M.type){case"ACTION":if(typeof M.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return MG(M.payload,x=>{if(x.type==="__setState"){if(p===void 0){E(x.state);return}Object.keys(x.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const C=x.state[p];if(C==null)return;JSON.stringify(o.getState())!==JSON.stringify(C)&&E(C);return}o.dispatchFromDevtools&&typeof o.dispatch=="function"&&o.dispatch(x)});case"DISPATCH":switch(M.payload.type){case"RESET":return E(S),p===void 0?_==null?void 0:_.init(o.getState()):_==null?void 0:_.init(EC(g.name));case"COMMIT":if(p===void 0){_==null||_.init(o.getState());return}return _==null?void 0:_.init(EC(g.name));case"ROLLBACK":return MG(M.state,x=>{if(p===void 0){E(x),_==null||_.init(o.getState());return}E(x[p]),_==null||_.init(EC(g.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return MG(M.state,x=>{if(p===void 0){E(x);return}JSON.stringify(o.getState())!==JSON.stringify(x[p])&&E(x[p])});case"IMPORT_STATE":{const{nextLiftedState:x}=M.payload,C=(k=x.computedStates.slice(-1)[0])==null?void 0:k.state;if(!C)return;E(p===void 0?C:C[p]),_==null||_.send(null,x);return}case"PAUSE_RECORDING":return w=!w}return}}),S},CK=Mbt,MG=(t,e)=>{let n;try{n=JSON.parse(t)}catch(i){console.error("[zustand devtools middleware] Could not parse the received json",i)}n!==void 0&&e(n)},PK={enabled:!0},SC=function(t){return JSON.stringify({id:t.id})},Zce=function(t){return JSON.stringify({id:t.id})},Uz=nM()(CK((t,e)=>({viewports:{},createViewport:async(n,i={})=>{const o=Zce(n),{viewports:l}=e();if(Object.values(l).findIndex(p=>o===Zce(p))>=0)return;let d;try{d=await Xs.createViewport(n)}catch(p){i.onError&&i.onError(p)}return t(p=>({viewports:{...p.viewports,...d?{[d.id]:d}:{}}}),!1,"createViewport"),d},closeViewport:async(n,i={})=>{const{viewports:o}=e(),l=o[n];if(l){try{await l.close()}catch(d){i.onError&&i.onError(d);return}return t(d=>{const p={};return Object.keys(d.viewports).forEach(g=>{g!==n&&(p[g]=d.viewports[g])}),{viewports:p}},!1,"closeViewport")}},sessions:{},createSession:async(n,i={})=>{const o=SC(n),{sessions:l}=e();if(Object.values(l).findIndex(p=>o===SC(p))>=0)return;let d;try{d=await Xs.createSession(n)}catch(p){i.onError&&i.onError(p)}return t(p=>({sessions:{...p.sessions,...d?{[d.id]:d}:{}}}),!1,"createSession"),d},closeSession:async(n,i={})=>{const{sessions:o}=e(),l=o[n];if(l){try{await l.close()}catch(d){i.onError&&i.onError(d);return}return t(d=>{const p={};return Object.keys(d.sessions).forEach(g=>{g!==n&&(p[g]=d.sessions[g])}),{sessions:p}},!1,"closeSession")}},syncSessions:async n=>{const{sessions:i,createSession:o,closeSession:l}=e(),d=S=>!!S,p=Object.values(i).map(S=>S?{id:S.id,identifier:SC(S)}:void 0).filter(d),g=n.map(S=>({id:S.id,identifier:SC(S),data:S})),v=p.filter(S=>g.findIndex(M=>M.identifier===S.identifier)===-1),_=g.filter(S=>p.findIndex(M=>M.identifier===S.identifier)===-1),b=v.map(S=>l(S.id)),w=_.map(S=>o(S.data));await Promise.all([...b,...w]);const E=e().sessions;return n.map(S=>E[S.id])}}),{...PK,name:"ShapeDiver | Viewer"}));function kbt(t){const{createViewport:e,closeViewport:n}=Uz(),[i,o]=de.useState(void 0),l=de.useRef(Promise.resolve()),d=de.useRef(null);return de.useEffect(()=>(l.current=l.current.then(async()=>{const p=await e({canvas:d.current,...t},{onError:o});p&&t.showStatistics&&(p.showStatistics=!0)}),()=>{l.current=l.current.then(()=>n(t.id))}),[t.id]),{canvasRef:d,error:i}}const Cbt="_container_1kqsc_1",Pbt={container:Cbt};function qW(t){const{children:e,...n}=t;return Y.jsx(fm,{mih:"100vh",justify:"center",align:"center",children:Y.jsx(qq,{maw:"480",...n,children:e})})}function Rbt(t){return{defaultProps:t}}function Dbt(t){return{defaultProps:t}}function Obt(t){const{children:e=Y.jsx(Y.Fragment,{}),className:n="",...i}=t,o=Dt("ViewportComponent",{},i),l=Dt("ViewportBranding",{},{}),d=G5e();o.branding||(o.branding=l[d]);const{canvasRef:p,error:g}=kbt(o);return g?Y.jsx(qW,{title:"Error",children:g.message}):Y.jsxs("div",{className:`${Pbt.container} ${n}`,children:[Y.jsx("canvas",{ref:p}),e]})}const LS={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right"},Ibt={position:LS.TOP_RIGHT},Nbt={[LS.TOP_LEFT]:{top:"0",left:"0"},[LS.TOP_RIGHT]:{top:"0",right:"0"},[LS.BOTTOM_LEFT]:{bottom:"0",left:"0"},[LS.BOTTOM_RIGHT]:{bottom:"0",right:"0"}};function Lbt(t){return{defaultProps:t}}function zbt(t){const{children:e=Y.jsx(Y.Fragment,{}),...n}=t,{position:i}=Dt("ViewportOverlayWrapper",Ibt,n);return Y.jsx("section",{style:{...Nbt[i],position:"absolute"},children:e})}/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Bbt={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=(t,e,n,i)=>{const o=de.forwardRef(({color:l="currentColor",size:d=24,stroke:p=2,className:g,children:v,..._},b)=>de.createElement("svg",{ref:b,...Bbt[t],width:d,height:d,className:["tabler-icon",`tabler-icon-${e}`,g].join(" "),strokeWidth:p,stroke:l,..._},[...i.map(([w,E])=>de.createElement(w,E)),...Array.isArray(v)?v:[v]]));return o.displayName=`${n}`,o};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ubt=Gn("outline","adjustments-horizontal","IconAdjustmentsHorizontal",[["path",{d:"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M4 6l8 0",key:"svg-1"}],["path",{d:"M16 6l4 0",key:"svg-2"}],["path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M4 12l2 0",key:"svg-4"}],["path",{d:"M10 12l10 0",key:"svg-5"}],["path",{d:"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-6"}],["path",{d:"M4 18l11 0",key:"svg-7"}],["path",{d:"M19 18l1 0",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Fbt=Gn("outline","adjustments","IconAdjustments",[["path",{d:"M4 10a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-0"}],["path",{d:"M6 4v4",key:"svg-1"}],["path",{d:"M6 12v8",key:"svg-2"}],["path",{d:"M10 16a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-3"}],["path",{d:"M12 4v10",key:"svg-4"}],["path",{d:"M12 18v2",key:"svg-5"}],["path",{d:"M16 7a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-6"}],["path",{d:"M18 4v1",key:"svg-7"}],["path",{d:"M18 9v11",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Vbt=Gn("outline","arrow-back","IconArrowBack",[["path",{d:"M9 11l-4 4l4 4m-4 -4h11a4 4 0 0 0 0 -8h-1",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Gbt=Gn("outline","arrow-down","IconArrowDown",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M18 13l-6 6",key:"svg-1"}],["path",{d:"M6 13l6 6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jbt=Gn("outline","arrow-forward","IconArrowForward",[["path",{d:"M15 11l4 4l-4 4m4 -4h-11a4 4 0 0 1 0 -8h1",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Hbt=Gn("outline","arrow-left","IconArrowLeft",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $bt=Gn("outline","arrow-right","IconArrowRight",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Wbt=Gn("outline","arrow-up","IconArrowUp",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M18 11l-6 -6",key:"svg-1"}],["path",{d:"M6 11l6 -6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ybt=Gn("outline","augmented-reality-off","IconAugmentedRealityOff",[["path",{d:"M4 8v-2c0 -.557 .228 -1.061 .595 -1.424",key:"svg-0"}],["path",{d:"M4 16v2a2 2 0 0 0 2 2h2",key:"svg-1"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v2",key:"svg-2"}],["path",{d:"M16 20h2c.558 0 1.062 -.228 1.425 -.596",key:"svg-3"}],["path",{d:"M12 12.5l.312 -.195m2.457 -1.536l1.231 -.769",key:"svg-4"}],["path",{d:"M9.225 9.235l-1.225 .765l4 2.5v4.5l3.076 -1.923m.924 -3.077v-2l-4 -2.5l-.302 .189",key:"svg-5"}],["path",{d:"M8 10v4.5l4 2.5",key:"svg-6"}],["path",{d:"M3 3l18 18",key:"svg-7"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var h3e=Gn("outline","augmented-reality","IconAugmentedReality",[["path",{d:"M4 8v-2a2 2 0 0 1 2 -2h2",key:"svg-0"}],["path",{d:"M4 16v2a2 2 0 0 0 2 2h2",key:"svg-1"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v2",key:"svg-2"}],["path",{d:"M16 20h2a2 2 0 0 0 2 -2v-2",key:"svg-3"}],["path",{d:"M12 12.5l4 -2.5",key:"svg-4"}],["path",{d:"M8 10l4 2.5v4.5l4 -2.5v-4.5l-4 -2.5z",key:"svg-5"}],["path",{d:"M8 10v4.5l4 2.5",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var qbt=Gn("outline","bookmark-off","IconBookmarkOff",[["path",{d:"M7.708 3.721a3.982 3.982 0 0 1 2.292 -.721h4a4 4 0 0 1 4 4v7m0 4v3l-6 -4l-6 4v-14c0 -.308 .035 -.609 .1 -.897",key:"svg-0"}],["path",{d:"M3 3l18 18",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Xbt=Gn("outline","bookmark","IconBookmark",[["path",{d:"M18 7v14l-6 -4l-6 4v-14a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Zbt=Gn("outline","bookmarks-off","IconBookmarksOff",[["path",{d:"M11 7h2a2 2 0 0 1 2 2v2m0 4v6l-5 -3l-5 3v-12a2 2 0 0 1 2 -2",key:"svg-0"}],["path",{d:"M9.265 4a2 2 0 0 1 1.735 -1h6a2 2 0 0 1 2 2v10",key:"svg-1"}],["path",{d:"M3 3l18 18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Qbt=Gn("outline","bookmarks","IconBookmarks",[["path",{d:"M15 10v11l-5 -3l-5 3v-11a3 3 0 0 1 3 -3h4a3 3 0 0 1 3 3z",key:"svg-0"}],["path",{d:"M11 3h5a3 3 0 0 1 3 3v11",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Kbt=Gn("outline","books-off","IconBooksOff",[["path",{d:"M9 9v10a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1v-14",key:"svg-0"}],["path",{d:"M8 4a1 1 0 0 1 1 1",key:"svg-1"}],["path",{d:"M9 5a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v4",key:"svg-2"}],["path",{d:"M13 13v6a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1v-10",key:"svg-3"}],["path",{d:"M5 8h3",key:"svg-4"}],["path",{d:"M9 16h4",key:"svg-5"}],["path",{d:"M14.254 10.244l-1.218 -4.424a1.02 1.02 0 0 1 .634 -1.219l.133 -.041l2.184 -.53c.562 -.135 1.133 .19 1.282 .732l3.236 11.75",key:"svg-6"}],["path",{d:"M19.585 19.589l-1.572 .38c-.562 .136 -1.133 -.19 -1.282 -.731l-.952 -3.458",key:"svg-7"}],["path",{d:"M14 9l4 -1",key:"svg-8"}],["path",{d:"M19.207 15.199l.716 -.18",key:"svg-9"}],["path",{d:"M3 3l18 18",key:"svg-10"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Jbt=Gn("outline","books","IconBooks",[["path",{d:"M5 4m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M9 4m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M5 8h4",key:"svg-2"}],["path",{d:"M9 16h4",key:"svg-3"}],["path",{d:"M13.803 4.56l2.184 -.53c.562 -.135 1.133 .19 1.282 .732l3.695 13.418a1.02 1.02 0 0 1 -.634 1.219l-.133 .041l-2.184 .53c-.562 .135 -1.133 -.19 -1.282 -.732l-3.695 -13.418a1.02 1.02 0 0 1 .634 -1.219l.133 -.041z",key:"svg-4"}],["path",{d:"M14 9l4 -1",key:"svg-5"}],["path",{d:"M16 16l3.923 -.98",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var e4t=Gn("outline","camera-off","IconCameraOff",[["path",{d:"M8.297 4.289a.997 .997 0 0 1 .703 -.289h6a1 1 0 0 1 1 1a2 2 0 0 0 2 2h1a2 2 0 0 1 2 2v8m-1.187 2.828c-.249 .11 -.524 .172 -.813 .172h-14a2 2 0 0 1 -2 -2v-9a2 2 0 0 1 2 -2h1c.298 0 .58 -.065 .834 -.181",key:"svg-0"}],["path",{d:"M10.422 10.448a3 3 0 1 0 4.15 4.098",key:"svg-1"}],["path",{d:"M3 3l18 18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var t4t=Gn("outline","camera","IconCamera",[["path",{d:"M5 7h1a2 2 0 0 0 2 -2a1 1 0 0 1 1 -1h6a1 1 0 0 1 1 1a2 2 0 0 0 2 2h1a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-9a2 2 0 0 1 2 -2",key:"svg-0"}],["path",{d:"M9 13a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var n4t=Gn("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var r4t=Gn("outline","copy","IconCopy",[["path",{d:"M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z",key:"svg-0"}],["path",{d:"M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var i4t=Gn("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var s4t=Gn("outline","dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var o4t=Gn("outline","download-off","IconDownloadOff",[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 1.83 -1.19",key:"svg-0"}],["path",{d:"M7 11l5 5l2 -2m2 -2l1 -1",key:"svg-1"}],["path",{d:"M12 4v4m0 4v4",key:"svg-2"}],["path",{d:"M3 3l18 18",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var p3e=Gn("outline","download","IconDownload",[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M7 11l5 5l5 -5",key:"svg-1"}],["path",{d:"M12 4l0 12",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var a4t=Gn("outline","file-download","IconFileDownload",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M12 17v-6",key:"svg-2"}],["path",{d:"M9.5 14.5l2.5 2.5l2.5 -2.5",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var l4t=Gn("outline","file-export","IconFileExport",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M11.5 21h-4.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v5m-5 6h7m-3 -3l3 3l-3 3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var c4t=Gn("outline","file-import","IconFileImport",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M5 13v-8a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2h-5.5m-9.5 -2h7m-3 -3l3 3l-3 3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var u4t=Gn("outline","key-off","IconKeyOff",[["path",{d:"M10.17 6.159l2.316 -2.316a2.877 2.877 0 0 1 4.069 0l3.602 3.602a2.877 2.877 0 0 1 0 4.069l-2.33 2.33",key:"svg-0"}],["path",{d:"M14.931 14.948a2.863 2.863 0 0 1 -1.486 -.79l-.301 -.302l-6.558 6.558a2 2 0 0 1 -1.239 .578l-.175 .008h-1.172a1 1 0 0 1 -.993 -.883l-.007 -.117v-1.172a2 2 0 0 1 .467 -1.284l.119 -.13l.414 -.414h2v-2h2v-2l2.144 -2.144l-.301 -.301a2.863 2.863 0 0 1 -.794 -1.504",key:"svg-1"}],["path",{d:"M15 9h.01",key:"svg-2"}],["path",{d:"M3 3l18 18",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var f4t=Gn("outline","key","IconKey",[["path",{d:"M16.555 3.843l3.602 3.602a2.877 2.877 0 0 1 0 4.069l-2.643 2.643a2.877 2.877 0 0 1 -4.069 0l-.301 -.301l-6.558 6.558a2 2 0 0 1 -1.239 .578l-.175 .008h-1.172a1 1 0 0 1 -.993 -.883l-.007 -.117v-1.172a2 2 0 0 1 .467 -1.284l.119 -.13l.414 -.414h2v-2h2v-2l2.144 -2.144l-.301 -.301a2.877 2.877 0 0 1 0 -4.069l2.643 -2.643a2.877 2.877 0 0 1 4.069 0z",key:"svg-0"}],["path",{d:"M15 9h.01",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var d4t=Gn("outline","link-off","IconLinkOff",[["path",{d:"M9 15l3 -3m2 -2l1 -1",key:"svg-0"}],["path",{d:"M11 6l.463 -.536a5 5 0 0 1 7.071 7.072l-.534 .464",key:"svg-1"}],["path",{d:"M3 3l18 18",key:"svg-2"}],["path",{d:"M13 18l-.397 .534a5.068 5.068 0 0 1 -7.127 0a4.972 4.972 0 0 1 0 -7.071l.524 -.463",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var h4t=Gn("outline","link","IconLink",[["path",{d:"M9 15l6 -6",key:"svg-0"}],["path",{d:"M11 6l.463 -.536a5 5 0 0 1 7.071 7.072l-.534 .464",key:"svg-1"}],["path",{d:"M13 18l-.397 .534a5.068 5.068 0 0 1 -7.127 0a4.972 4.972 0 0 1 0 -7.071l.524 -.463",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var p4t=Gn("outline","mail-forward","IconMailForward",[["path",{d:"M12 18h-7a2 2 0 0 1 -2 -2v-10a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 6l9 6l9 -6",key:"svg-1"}],["path",{d:"M15 18h6",key:"svg-2"}],["path",{d:"M18 15l3 3l-3 3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var m4t=Gn("outline","maximize-off","IconMaximizeOff",[["path",{d:"M4 8v-2c0 -.551 .223 -1.05 .584 -1.412",key:"svg-0"}],["path",{d:"M4 16v2a2 2 0 0 0 2 2h2",key:"svg-1"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v2",key:"svg-2"}],["path",{d:"M16 20h2c.545 0 1.04 -.218 1.4 -.572",key:"svg-3"}],["path",{d:"M3 3l18 18",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var m3e=Gn("outline","maximize","IconMaximize",[["path",{d:"M4 8v-2a2 2 0 0 1 2 -2h2",key:"svg-0"}],["path",{d:"M4 16v2a2 2 0 0 0 2 2h2",key:"svg-1"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v2",key:"svg-2"}],["path",{d:"M16 20h2a2 2 0 0 0 2 -2v-2",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var g4t=Gn("outline","network-off","IconNetworkOff",[["path",{d:"M6.528 6.536a6 6 0 0 0 7.942 7.933m2.247 -1.76a6 6 0 0 0 -8.427 -8.425",key:"svg-0"}],["path",{d:"M12 3c1.333 .333 2 2.333 2 6c0 .337 -.006 .66 -.017 .968m-.55 3.473c-.333 .884 -.81 1.403 -1.433 1.559",key:"svg-1"}],["path",{d:"M12 3c-.936 .234 -1.544 1.29 -1.822 3.167m-.16 3.838c.116 3.029 .776 4.695 1.982 4.995",key:"svg-2"}],["path",{d:"M6 9h3m4 0h5",key:"svg-3"}],["path",{d:"M3 20h7",key:"svg-4"}],["path",{d:"M14 20h7",key:"svg-5"}],["path",{d:"M10 20a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-6"}],["path",{d:"M12 15v3",key:"svg-7"}],["path",{d:"M3 3l18 18",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var v4t=Gn("outline","network","IconNetwork",[["path",{d:"M6 9a6 6 0 1 0 12 0a6 6 0 0 0 -12 0",key:"svg-0"}],["path",{d:"M12 3c1.333 .333 2 2.333 2 6s-.667 5.667 -2 6",key:"svg-1"}],["path",{d:"M12 3c-1.333 .333 -2 2.333 -2 6s.667 5.667 2 6",key:"svg-2"}],["path",{d:"M6 9h12",key:"svg-3"}],["path",{d:"M3 20h7",key:"svg-4"}],["path",{d:"M14 20h7",key:"svg-5"}],["path",{d:"M10 20a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-6"}],["path",{d:"M12 15v3",key:"svg-7"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _4t=Gn("outline","photo-off","IconPhotoOff",[["path",{d:"M15 8h.01",key:"svg-0"}],["path",{d:"M7 3h11a3 3 0 0 1 3 3v11m-.856 3.099a2.991 2.991 0 0 1 -2.144 .901h-12a3 3 0 0 1 -3 -3v-12c0 -.845 .349 -1.608 .91 -2.153",key:"svg-1"}],["path",{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l5 5",key:"svg-2"}],["path",{d:"M16.33 12.338c.574 -.054 1.155 .166 1.67 .662l3 3",key:"svg-3"}],["path",{d:"M3 3l18 18",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var y4t=Gn("outline","photo","IconPhoto",[["path",{d:"M15 8h.01",key:"svg-0"}],["path",{d:"M3 6a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v12a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3v-12z",key:"svg-1"}],["path",{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l5 5",key:"svg-2"}],["path",{d:"M14 14l1 -1c.928 -.893 2.072 -.893 3 0l3 3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var b4t=Gn("outline","refresh-off","IconRefreshOff",[["path",{d:"M20 11a8.1 8.1 0 0 0 -11.271 -6.305m-2.41 1.624a8.083 8.083 0 0 0 -1.819 2.681m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 13.671 4.691m2.329 -1.691v-1h-1",key:"svg-1"}],["path",{d:"M3 3l18 18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var g3e=Gn("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var A4t=Gn("outline","reload","IconReload",[["path",{d:"M19.933 13.041a8 8 0 1 1 -9.925 -8.788c3.899 -1 7.935 1.007 9.425 4.747",key:"svg-0"}],["path",{d:"M20 4v5h-5",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var w4t=Gn("outline","replace","IconReplace",[["path",{d:"M3 3m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M15 15m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M21 11v-3a2 2 0 0 0 -2 -2h-6l3 3m0 -6l-3 3",key:"svg-2"}],["path",{d:"M3 13v3a2 2 0 0 0 2 2h6l-3 -3m0 6l3 -3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var E4t=Gn("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var S4t=Gn("outline","share-2","IconShare2",[["path",{d:"M8 9h-1a2 2 0 0 0 -2 2v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-8a2 2 0 0 0 -2 -2h-1",key:"svg-0"}],["path",{d:"M12 14v-11",key:"svg-1"}],["path",{d:"M9 6l3 -3l3 3",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var T4t=Gn("outline","share-3","IconShare3",[["path",{d:"M13 4v4c-6.575 1.028 -9.02 6.788 -10 12c-.037 .206 5.384 -5.962 10 -6v4l8 -7l-8 -7z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var x4t=Gn("outline","share-off","IconShareOff",[["path",{d:"M6 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-0"}],["path",{d:"M18 6m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-1"}],["path",{d:"M15.861 15.896a3 3 0 0 0 4.265 4.22m.578 -3.417a3.012 3.012 0 0 0 -1.507 -1.45",key:"svg-2"}],["path",{d:"M8.7 10.7l1.336 -.688m2.624 -1.352l2.64 -1.36",key:"svg-3"}],["path",{d:"M8.7 13.3l6.6 3.4",key:"svg-4"}],["path",{d:"M3 3l18 18",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var M4t=Gn("outline","share","IconShare",[["path",{d:"M6 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-0"}],["path",{d:"M18 6m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-1"}],["path",{d:"M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-2"}],["path",{d:"M8.7 10.7l6.6 -3.4",key:"svg-3"}],["path",{d:"M8.7 13.3l6.6 3.4",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var v3e=Gn("outline","upload","IconUpload",[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M7 9l5 -5l5 5",key:"svg-1"}],["path",{d:"M12 4l0 12",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var k4t=Gn("outline","user-off","IconUserOff",[["path",{d:"M8.18 8.189a4.01 4.01 0 0 0 2.616 2.627m3.507 -.545a4 4 0 1 0 -5.59 -5.552",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4c.412 0 .81 .062 1.183 .178m2.633 2.618c.12 .38 .184 .785 .184 1.204v2",key:"svg-1"}],["path",{d:"M3 3l18 18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var C4t=Gn("outline","user","IconUser",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var P4t=Gn("outline","users","IconUsers",[["path",{d:"M9 7m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"svg-2"}],["path",{d:"M21 21v-2a4 4 0 0 0 -3 -3.85",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var R4t=Gn("outline","video-off","IconVideoOff",[["path",{d:"M3 3l18 18",key:"svg-0"}],["path",{d:"M15 11v-1l4.553 -2.276a1 1 0 0 1 1.447 .894v6.764a1 1 0 0 1 -.675 .946",key:"svg-1"}],["path",{d:"M10 6h3a2 2 0 0 1 2 2v3m0 4v1a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2v-8a2 2 0 0 1 2 -2h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _3e=Gn("outline","video","IconVideo",[["path",{d:"M15 10l4.553 -2.276a1 1 0 0 1 1.447 .894v6.764a1 1 0 0 1 -1.447 .894l-4.553 -2.276v-4z",key:"svg-0"}],["path",{d:"M3 6m0 2a2 2 0 0 1 2 -2h8a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-8a2 2 0 0 1 -2 -2z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var D4t=Gn("outline","world-off","IconWorldOff",[["path",{d:"M5.657 5.615a9 9 0 1 0 12.717 12.739m1.672 -2.322a9 9 0 0 0 -12.066 -12.084",key:"svg-0"}],["path",{d:"M3.6 9h5.4m4 0h7.4",key:"svg-1"}],["path",{d:"M3.6 15h11.4m4 0h1.4",key:"svg-2"}],["path",{d:"M11.5 3a17.001 17.001 0 0 0 -1.493 3.022m-.847 3.145c-.68 4.027 .1 8.244 2.34 11.833",key:"svg-3"}],["path",{d:"M12.5 3a16.982 16.982 0 0 1 2.549 8.005m-.207 3.818a16.979 16.979 0 0 1 -2.342 6.177",key:"svg-4"}],["path",{d:"M3 3l18 18",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var O4t=Gn("outline","world","IconWorld",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M3.6 9h16.8",key:"svg-1"}],["path",{d:"M3.6 15h16.8",key:"svg-2"}],["path",{d:"M11.5 3a17 17 0 0 0 0 18",key:"svg-3"}],["path",{d:"M12.5 3a17 17 0 0 1 0 18",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var y3e=Gn("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var I4t=Gn("outline","zoom-in","IconZoomIn",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M7 10l6 0",key:"svg-1"}],["path",{d:"M10 7l0 6",key:"svg-2"}],["path",{d:"M21 21l-6 -6",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var N4t=Gn("outline","zoom-scan","IconZoomScan",[["path",{d:"M4 8v-2a2 2 0 0 1 2 -2h2",key:"svg-0"}],["path",{d:"M4 16v2a2 2 0 0 0 2 2h2",key:"svg-1"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v2",key:"svg-2"}],["path",{d:"M16 20h2a2 2 0 0 0 2 -2v-2",key:"svg-3"}],["path",{d:"M8 11a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-4"}],["path",{d:"M16 16l-2.5 -2.5",key:"svg-5"}]]);const L4t=(t=()=>{},e=()=>{},n=300)=>{let i;const o=de.useRef(0);return{clickEventHandler:()=>{o.current++,o.current===1?i=setTimeout(()=>{o.current=0,t()},n):(clearTimeout(i),o.current=0,e())}}},z4t=()=>/iPhone/.test(navigator.userAgent),Qce=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],B4t=t=>{const e=de.useRef(!1),n=de.useRef(!0),i=de.useRef({}),o=()=>{e.current=!!i.current.fullscreenElement};return de.useEffect(()=>{i.current=document;const d=i.current.getElementsByClassName(t).item(0);if(!d){console.debug(`Fullscreen element with ID ${t} not found.`),n.current=!1;return}return Qce.forEach(p=>{d.addEventListener(p,o)}),()=>{i.current=document;const p=i.current.getElementsByClassName(t).item(0);p&&Qce.forEach(g=>{p.removeEventListener(g,o)})}},[t]),{isFullScreenMode:e,isFullScreenAvailable:n,makeElementFullscreen:()=>{if(i.current.fullscreenElement)i.current.exitFullscreen();else if(i.current.webkitFullscreenElement&&i.current.webkitExitFullscreen)i.current.webkitExitFullscreen();else if(i.current.mozRequestFullScreen&&i.current.mozExitFullScreen)i.current.mozExitFullScreen();else if(i.current.msRequestFullscreen&&i.current.msExitFullScreen)i.current.msExitFullScreen();else{const d=document.getElementsByClassName(t).item(0);if(!d){console.debug(`Fullscreen element with ID ${t} not found.`),n.current=!1;return}document.documentElement.requestFullscreen?d.requestFullscreen().catch(()=>{n.current=!1}):d.webkitRequestFullScreen?d.webkitRequestFullScreen().catch(()=>{n.current=!1}):d.mozRequestFullScreen?d.mozRequestFullScreen().catch(()=>{n.current=!1}):d.msRequestFullscreen?d.msRequestFullscreen().catch(()=>{n.current=!1}):n.current=!1}}}},U4t=t=>t[0].toUpperCase()+t.slice(1),F4t="_containerAr_ts872_1",V4t="_loaderAr_ts872_13",Kce={containerAr:F4t,loaderAr:V4t},G4t={color:"black",colorDisabled:"grey",enableArBtn:!0,enableCamerasBtn:!0,enableFullscreenBtn:!0,enableZoomBtn:!0,fullscreenId:"viewer-fullscreen-area",iconStyle:{m:"3px"},size:32,style:{display:"flex"},variant:"subtle",variantDisabled:"transparent"};function j4t(t){return{defaultProps:t}}function H4t(t){const{viewportId:e,...n}=t,{color:i,colorDisabled:o,enableArBtn:l,enableCamerasBtn:d,enableFullscreenBtn:p,enableZoomBtn:g,fullscreenId:v,iconStyle:_,size:b,style:w,variant:E,variantDisabled:S}=Dt("ViewportIcons",G4t,n),M=Uz(Oe=>Oe.viewports[e]),k=M?M.enableAR:!1,x=M?M.viewableInAR():!1,[C,P]=de.useState(""),[O,L]=de.useState(!1),[B,V]=de.useState(!1),[G,j]=de.useState(""),F=async()=>{if(j(""),P(""),!!M)try{V(!0),L(!0);const Oe=await M.createArSessionLink();P(Oe)}catch(Oe){j("Error while creating QR code"),console.error(Oe)}finally{L(!1)}},q=async()=>{if(M)if(x){const Oe=M.addFlag(Xs.FLAG_TYPE.BUSY_MODE);M.viewableInAR()&&await M.viewInAR(),M.removeFlag(Oe)}else await F()},fe=()=>{!M||!M.camera||M.camera.zoomTo()},ue=()=>{!M||!M.camera||M.camera.reset({})},{clickEventHandler:J}=L4t(fe,ue),le=!p||z4t(),{makeElementFullscreen:me,isFullScreenAvailable:be}=B4t(v),ye=d&&M?M.cameras:{},pe=Object.keys(ye).length===0,[oe,Ce]=de.useState(!1),it=Oe=>{M&&M.assignCamera(Oe)},Se=Object.values(ye).map((Oe,ct)=>Y.jsx(bf.Item,{onClick:()=>it(Oe.id),children:U4t(Oe.name||Oe.id)},ct));return Y.jsxs(Xt,{style:w,children:[l&&k&&Y.jsx(jh,{label:"View in AR",children:Y.jsx("div",{children:Y.jsx(Gh,{onClick:q,disabled:O,size:b,variant:x?S:E,"aria-label":"View in AR",style:_,children:Y.jsx(h3e,{color:O?o:i,stroke:1})})})}),l&&Y.jsx(Nd,{opened:B,onClose:()=>V(!1),title:"Scan the code",centered:!0,children:G?Y.jsx(cp,{c:"red",children:G}):Y.jsxs(Y.Fragment,{children:[Y.jsx(cp,{children:"Scan the QR code below using your mobile device to see the model in AR. The code is compatible with Android and iOS devices."}),Y.jsx("section",{className:Kce.containerAr,children:O?Y.jsx("section",{className:Kce.loaderAr,children:Y.jsx(bp,{color:"blue"})}):Y.jsx("img",{src:C,height:"180px",alt:"ar_link"})})]})}),g&&Y.jsx(jh,{label:"Zoom extents",children:Y.jsx(Gh,{onClick:J,size:b,variant:E,"aria-label":"Zoom extents",style:_,children:Y.jsx(I4t,{color:i,stroke:1})})}),p&&Y.jsx(jh,{label:"Fullscreen",children:Y.jsx(Gh,{onClick:me,disabled:le||!be.current,size:b,variant:le||!be.current?S:E,"aria-label":"Fullscreen",style:_,children:Y.jsx(m3e,{color:le||!be.current?o:i,stroke:1})})}),d&&Y.jsxs(bf,{opened:oe,onChange:Ce,shadow:"md",width:200,position:"bottom-end",children:[Y.jsx(Gh,{onClick:()=>Ce(!oe),disabled:pe,size:b,variant:pe?S:E,"aria-label":"Cameras",style:_,children:Y.jsx(jh,{disabled:oe,label:"Cameras",children:Y.jsx(bf.Target,{children:Y.jsx(_3e,{color:i,stroke:1})})})}),Y.jsx(bf.Dropdown,{children:Se})]})]})}function XW(t,e=[]){const[n,i]=de.useState(!0),[o,l]=de.useState(),[d,p]=de.useState(),g=de.useRef(Promise.resolve()),v=de.useCallback(()=>(i(!0),l(void 0),p(void 0),t().then(p).catch(l).finally(()=>i(!1))),e);return de.useEffect(()=>{g.current=g.current.then(v)},[v]),{loading:n,error:o,value:d}}var kG={},RK={},b3e={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SdPlatformApiTokenScopes=void 0,function(e){e.ModelsRead="models-read",e.ModelsWrite="models-write",e.ModelsFull="models-full",e.BookmarksFull="bookmarks-full",e.ImagesRead="images-read",e.ImagesWrite="images-write",e.ImagesFull="images-full",e.Tokens="tokens",e.TagsRead="tags-read",e.TagsWrite="tags-write",e.UsersRead="users-read",e.UsersWrite="users-write",e.UsersFull="users-full",e.UserModelSessionsRead="user-model-sessions-read",e.OrganizationModelSessionsRead="organization-model-sessions-read",e.ModelSharingRead="model-sharing-read",e.ModelSharingWrite="model-sharing-write",e.ModelSharingFull="model-sharing-full",e.SavedStatesRead="saved-states-read",e.SavedStatesWrite="saved-states-write",e.SavedStatesFull="saved-states-full",e.SavedStateSharingRead="saved-state-sharing-read",e.SavedStateSharingWrite="saved-state-sharing-write",e.SavedStateSharingFull="saved-state-sharing-full",e.ActionsFull="actions-full",e.ApiClientsFull="apiclients-full",e.BackendSystemsFull="backendsystems-full",e.DomainsRead="domains-read",e.DomainsFull="domains-full",e.HttpLogsFull="httplogs-full",e.PoliciesFull="policies-full",e.OrganizationsRead="organizations-read",e.OrganizationsWrite="organizations-write",e.OrganizationsFull="organizations-full",e.NotificationsRead="notifications-read",e.NotificationsWrite="notifications-write",e.NotificationsFull="notifications-full",e.DocumentsRead="documents-read",e.DocumentsWrite="documents-write",e.DocumentsFull="documents-full",e.OpenidProviderFull="openid-provider-full",e.All="*"}(t.SdPlatformApiTokenScopes||(t.SdPlatformApiTokenScopes={}))})(b3e);var A3e={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SdPlatformNotificationType=t.SdPlatformNotificationClass=t.SdPlatformNotificationLevel=t.SdPlatformNotificationCreator=void 0,function(e){e.Platform="platform",e.User="user",e.Webhook="webhook"}(t.SdPlatformNotificationCreator||(t.SdPlatformNotificationCreator={})),function(e){e.Info="info",e.Warning="warning",e.Error="error"}(t.SdPlatformNotificationLevel||(t.SdPlatformNotificationLevel={})),function(e){e.Model="model",e.Account="account",e.Organization="organization",e.Sharing="sharing"}(t.SdPlatformNotificationClass||(t.SdPlatformNotificationClass={})),function(e){e.ModelTransferRequest="model-transfer-request",e.ModelTransferAccept="model-transfer-accept",e.ModelTransferDeny="model-transfer-deny",e.ModelConfirmed="model-confirmed",e.ModelDenied="model-denied",e.ScriptDenied="script-denied",e.ComputationFailed="computation-failed",e.ExportFailed="export-failed",e.CreditLimitWarning="credit-limit-warning",e.CreditLimitError="credit-limit-error",e.ModelShared="model-shared",e.ModelUnshared="model-unshared",e.SavedStateShared="saved-state-shared",e.SavedStateUnshared="saved-state-unshared",e.SavedStateCreated="saved-state-created",e.SavedStateDeleted="saved-state-deleted",e.OrganizationInvitation="organization-invitation",e.OrganizationInvitationAccept="organization-invitation-accept",e.OrganizationInvitationBlocked="organization-invitation-blocked",e.OrganizationInvitationDeny="organization-invitation-deny",e.PluginUpdate="plugin-update",e.OrganizationUserSuspended="organization-user-suspended",e.Maintenance="maintenance",e.PlatformFrontendUpdate="platform-frontend-update",e.ViewerUpdate="viewer-update",e.GeometryBackendUpdate="geometry-backend-update",e.PlatformBackendUpdate="platform-backend-update",e.GenericUpdate="generic-update",e.BackendSystemChanged="backend-system-changed"}(t.SdPlatformNotificationType||(t.SdPlatformNotificationType={}))})(A3e);var w3e={};Object.defineProperty(w3e,"__esModule",{value:!0});var E3e={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SdPlatformModelFileType=void 0,function(e){e.GH="gh",e.GHX="ghx"}(t.SdPlatformModelFileType||(t.SdPlatformModelFileType={}))})(E3e);var S3e={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SdPlatformModelTokenScopes=void 0,function(e){e.GroupView="group.view",e.GroupExport="group.export",e.GroupOwner="group.owner",e.GroupAnalytics="group.analytics",e.FileDownload="file.download"}(t.SdPlatformModelTokenScopes||(t.SdPlatformModelTokenScopes={}))})(S3e);var T3e={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SdPlatformOrganizationMemberRole=void 0,function(e){e.Suspended="suspended",e.User="user",e.Manager="manager",e.Admin="admin",e.Owner="owner"}(t.SdPlatformOrganizationMemberRole||(t.SdPlatformOrganizationMemberRole={}))})(T3e);var x3e={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SdPlatformPolicyPermissionsAsset=t.SdPlatformPolicyPermissionsPlatform=t.SdPlatformPolicyPermissionsUtility=t.SdPlatformPolicyPermissionsSavedState=t.SdPlatformPolicyPermissionsUser=t.SdPlatformPolicyPermissionsOrganization=t.SdPlatformPolicyPermissionsModel=t.SdPlatformPolicyCommonAliasesAsset=t.SdPlatformPolicyCommonAliasesPlatform=t.SdPlatformPolicyCommonAliasesUtility=t.SdPlatformPolicyCommonAliasesOrganization=t.SdPlatformPolicyCommonAliasesUser=t.SdPlatformPolicyCommonAliasesSavedState=t.SdPlatformPolicyCommonAliasesModel=t.SdPlatformPolicyPermissionStatus=t.SdPlatformPolicyType=void 0,function(e){e.ModelPolicy="ModelPolicy",e.OrganizationPolicy="OrganizationPolicy",e.UserPolicy="UserPolicy",e.SavedStatePolicy="SavedStatePolicy",e.UtilityPolicy="UtilityPolicy",e.PlatformPolicy="PlatformPolicy",e.AssetPolicy="AssetPolicy"}(t.SdPlatformPolicyType||(t.SdPlatformPolicyType={})),function(e){e.NoPermission="no_permission",e.Allowed="allowed",e.Denied="denied"}(t.SdPlatformPolicyPermissionStatus||(t.SdPlatformPolicyPermissionStatus={})),function(e){e.AdminModelPolicy="AdminModelPolicy",e.OrgManagerModelPolicyAnalyticsComputation="OrgManagerModelPolicyAnalyticsComputation",e.OrgManagerModelPolicyAnalyticsSession="OrgManagerModelPolicyAnalyticsSession",e.OrgManagerModelPolicyBackendApi="OrgManagerModelPolicyBackendApi",e.OrgManagerModelPolicyDesktopClients="OrgManagerModelPolicyDesktopClients",e.OrgManagerModelPolicyDirectEmbedding="OrgManagerModelPolicyDirectEmbedding",e.OrgManagerModelPolicyExport="OrgManagerModelPolicyExport",e.OrgManagerModelPolicyIframeEmbedding="OrgManagerModelPolicyIframeEmbedding",e.OrgManagerModelPolicySavedStates="OrgManagerModelPolicySavedStates",e.OrgManagerModelPolicyUnlistedModels="OrgManagerModelPolicyUnlistedModels",e.OrgManagerModelPolicyView="OrgManagerModelPolicyView",e.OrgMemberModelPolicyExport="OrgMemberModelPolicyExport",e.OrgMemberModelPolicyView="OrgMemberModelPolicyView",e.OwnedModelPolicyAnalyticsComputation="OwnedModelPolicyAnalyticsComputation",e.OwnedModelPolicyAnalyticsSession="OwnedModelPolicyAnalyticsSession",e.OwnedModelPolicyBackendApi="OwnedModelPolicyBackendApi",e.OwnedModelPolicyDesktopClients="OwnedModelPolicyDesktopClients",e.OwnedModelPolicyDirectEmbedding="OwnedModelPolicyDirectEmbedding",e.OwnedModelPolicyExport="OwnedModelPolicyExport",e.OwnedModelPolicyIframeEmbedding="OwnedModelPolicyIframeEmbedding",e.OwnedModelPolicySavedStates="OwnedModelPolicySavedStates",e.OwnedModelPolicyUnlistedModels="OwnedModelPolicyUnlistedModels",e.OwnedModelPolicyView="OwnedModelPolicyView",e.PrivateLinkSharedModelPolicyExport="PrivateLinkSharedModelPolicyExport",e.PrivateLinkSharedModelPolicyView="PrivateLinkSharedModelPolicyView",e.PublicModelPolicyExport="PublicModelPolicyExport",e.PublicModelPolicyView="PublicModelPolicyView",e.SharedModelPolicyAnalyticsComputation="SharedModelPolicyAnalyticsComputation",e.SharedModelPolicyAnalyticsSession="SharedModelPolicyAnalyticsSession",e.SharedModelPolicyBackendApi="SharedModelPolicyBackendApi",e.SharedModelPolicyDesktopClients="SharedModelPolicyDesktopClients",e.SharedModelPolicyDirectEmbedding="SharedModelPolicyDirectEmbedding",e.SharedModelPolicyDownload="SharedModelPolicyDownload",e.SharedModelPolicyExport="SharedModelPolicyExport",e.SharedModelPolicyIframeEmbedding="SharedModelPolicyIframeEmbedding",e.SharedModelPolicyQuery="SharedModelPolicyQuery",e.SharedModelPolicySavedStates="SharedModelPolicySavedStates",e.SharedModelPolicyUnlistedModels="SharedModelPolicyUnlistedModels",e.SharedModelPolicyView="SharedModelPolicyView"}(t.SdPlatformPolicyCommonAliasesModel||(t.SdPlatformPolicyCommonAliasesModel={})),function(e){e.AdminSavedStatePolicy="AdminSavedStatePolicy",e.OrgManagerSavedStatePolicy="OrgManagerSavedStatePolicy",e.OrgMemberSavedStatePolicyView="OrgMemberSavedStatePolicyView",e.OwnedSavedStatePolicy="OwnedSavedStatePolicy",e.PublicSavedStatePolicyView="PublicSavedStatePolicyView",e.SharedSavedStatePolicyMinimal="SharedSavedStatePolicyMinimal",e.SharedSavedStatePolicyView="SharedSavedStatePolicyView"}(t.SdPlatformPolicyCommonAliasesSavedState||(t.SdPlatformPolicyCommonAliasesSavedState={})),function(e){e.AdminUserPolicy="AdminUserPolicy",e.SelfUserPolicy="SelfUserPolicy",e.PublicUserPolicy="PublicUserPolicy",e.LoggedInUserPolicy="LoggedInUserPolicy",e.MinimalUserPolicy="MinimalUserPolicy"}(t.SdPlatformPolicyCommonAliasesUser||(t.SdPlatformPolicyCommonAliasesUser={})),function(e){e.AdminOrgPolicy="AdminOrgPolicy",e.OrgAdminOrgPolicy="OrgAdminOrgPolicy",e.OrgManagerOrgPolicy="OrgManagerOrgPolicy",e.OrgMemberOrgPolicy="OrgMemberOrgPolicy",e.OrgOwnerOrgPolicy="OrgOwnerOrgPolicy",e.PublicOrgPolicy="PublicOrgPolicy"}(t.SdPlatformPolicyCommonAliasesOrganization||(t.SdPlatformPolicyCommonAliasesOrganization={})),function(e){e.AdminUtilityPolicy="AdminUtilityPolicy"}(t.SdPlatformPolicyCommonAliasesUtility||(t.SdPlatformPolicyCommonAliasesUtility={})),function(e){e.AdminPlatformPolicy="AdminPlatformPolicy"}(t.SdPlatformPolicyCommonAliasesPlatform||(t.SdPlatformPolicyCommonAliasesPlatform={})),function(e){e.AdminAssetPolicy="AdminAssetPolicy"}(t.SdPlatformPolicyCommonAliasesAsset||(t.SdPlatformPolicyCommonAliasesAsset={})),function(e){e.getRestModelPublic="get_rest_model_public",e.getRestModelAdmin="get_rest_model_admin",e.getRestModelOwner="get_rest_model_owner",e.getTokenScopeGroupView="get_token_scope_group_view",e.getTokenScopeGroupExport="get_token_scope_group_export",e.getTokenScopeGroupOwner="get_token_scope_group_owner",e.getTicket="get_ticket",e.getTicketAuthor="get_ticket_author",e.getTicketBackend="get_ticket_backend",e.embedAccessDomains="embed_access_domains",e.embedBackendSystems="embed_backend_systems",e.embedBackendProperties="embed_backend_properties",e.embedTags="embed_tags",e.embedUser="embed_user",e.embedDecoration="embed_decoration",e.embedBookmark="embed_bookmark",e.getSharingAll="get_sharing_all",e.putSharingAll="put_sharing_all",e.decryptTicket="decrypt_ticket",e.createSavedState="create_saved_state",e.queryAllSavedStates="query_all_saved_states",e.getTokenScopeGroupAnalytics="get_token_scope_group_analytics",e.getAnalyticsSession="get_analytics_session",e.getAnalyticsComputation="get_analytics_computation",e.uiBackendApi="ui_backend_api",e.uiDesktopClients="ui_desktop_clients",e.uiDirectEmbedding="ui_direct_embedding",e.uiIframeEmebedding="ui_iframe_embedding",e.uiUnlistedModels="ui_unlisted_models",e.updateAll="update_all",e.updateOwner="update_owner",e.delete="delete",e.embedOrganization="embed_organization",e.getTokenScopeFileDownload="get_token_scope_file_download"}(t.SdPlatformPolicyPermissionsModel||(t.SdPlatformPolicyPermissionsModel={})),function(e){e.getRestModelPublic="get_rest_model_public",e.getRestModelOrganizationMember="get_rest_model_organization_member",e.getRestModelOrganizationAdmin="get_rest_model_organization_admin",e.getRestModelOrganizationOwner="get_rest_model_organization_owner",e.getRestModelAdmin="get_rest_model_admin",e.updateOrganizationAdmin="update_organization_admin",e.updateOrganizationOwner="update_organization_owner",e.updateAll="update_all",e.embedAccessDomains="embed_access_domains",e.embedMembers="embed_members",e.embedChargebeeCustomer="embed_chargebee_customer",e.embedChargebeeSubscription="embed_chargebee_subscription",e.embedChargebeePlan="embed_chargebee_plan",e.embedChargebeeAddons="embed_chargebee_addons",e.create="create",e.delete="delete",e.queryModelSessions="query_model_sessions",e.embedUsedCredits="embed_used_credits",e.embedBackendSystem="embed_backend_system"}(t.SdPlatformPolicyPermissionsOrganization||(t.SdPlatformPolicyPermissionsOrganization={})),function(e){e.getRestModelPublicMinimal="get_rest_model_public_minimal",e.getRestModelPublic="get_rest_model_public",e.getRestModelSelf="get_rest_model_self",e.getRestModelAdmin="get_rest_model_admin",e.embedBackendSystem="embed_backend_system",e.embedChargebeeCustomer="embed_chargebee_customer",e.embedChargebeeSubscription="embed_chargebee_subscription",e.embedChargebeePlan="embed_chargebee_plan",e.embedChargebeeAddons="embed_chargebee_addons",e.embedGlobalAccessDomains="embed_global_access_domains",e.embedUsedCredits="embed_used_credits",e.updateDefaultBackendSystem="update_default_backend_system",e.updateSelf="update_self",e.updateAll="update_all",e.queryByUsername="query_by_username",e.queryByFirstName="query_by_first_name",e.queryByLastName="query_by_last_name",e.queryByAll="query_by_all",e.findByQuery="find_by_query",e.queryAllSavedStates="query_all_saved_states",e.getSharingAll="get_sharing_all",e.queryModelsByAll="query_models_by_all",e.queryModelSessions="query_model_sessions",e.delete="delete",e.queryImagesByAll="query_images_by_all",e.queryByEmailExact="query_by_email_exact",e.embedOrganization="embed_organization",e.getRestModelOrganization="get_rest_model_organization"}(t.SdPlatformPolicyPermissionsUser||(t.SdPlatformPolicyPermissionsUser={})),function(e){e.getRestModelPublic="get_rest_model_public",e.getRestModelAdmin="get_rest_model_admin",e.getRestModelOwner="get_rest_model_owner",e.delete="delete",e.update="update",e.getSharingAll="get_sharing_all",e.putSharingAll="put_sharing_all",e.getRestModelMinimal="get_rest_model_minimal"}(t.SdPlatformPolicyPermissionsSavedState||(t.SdPlatformPolicyPermissionsSavedState={})),function(e){e.domainGetRestModelAdmin="domain_get_rest_model_admin",e.domainCreate="domain_create",e.domainPatch="domain_patch",e.domainDelete="domain_delete",e.tagGetRestModelAdmin="tag_get_rest_model_admin",e.tagDelete="tag_delete",e.notificationCreate="notification_create",e.notificationDelete="notification_delete"}(t.SdPlatformPolicyPermissionsUtility||(t.SdPlatformPolicyPermissionsUtility={})),function(e){e.actionsRunAll="actions_run_all",e.apiClientQuery="api_client_query",e.apiClientCreate="api_client_create",e.apiClientPatch="api_client_patch",e.apiClientDelete="api_client_delete",e.backendSystemQuery="backend_system_query",e.backendSystemCreate="backend_system_create",e.backendSystemPatch="backend_system_patch",e.backendSystemDelete="backend_system_delete",e.backendSystemToken="backend_system_token",e.httpLogsQUery="http_logs_query",e.policyQuery="policy_query",e.policyGet="policy_get",e.policyCreate="policy_create",e.policyPatch="policy_patch",e.policyDelete="policy_delete"}(t.SdPlatformPolicyPermissionsPlatform||(t.SdPlatformPolicyPermissionsPlatform={})),function(e){e.getRestModelPublic="get_rest_model_public",e.getRestModelOwner="get_rest_model_owner",e.getRestModelAdmin="get_rest_model_admin",e.embedModels="embed_models",e.embedUser="embed_user",e.updateOwner="update_owner",e.updateAll="update_all",e.delete="delete"}(t.SdPlatformPolicyPermissionsAsset||(t.SdPlatformPolicyPermissionsAsset={}))})(x3e);var M3e={};Object.defineProperty(M3e,"__esModule",{value:!0});var k3e={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SdPlatformSavedStateVisibility=t.SdPlatformOrganizationVisibility=t.SdPlatformModelVisibility=t.SdPlatformUserVisibility=void 0,function(e){e.Private="private",e.Organization="organization",e.Public="public"}(t.SdPlatformUserVisibility||(t.SdPlatformUserVisibility={})),function(e){e.Private="private",e.Organization="organization",e.Public="public",e.Shared="shared"}(t.SdPlatformModelVisibility||(t.SdPlatformModelVisibility={})),function(e){e.Private="private",e.Organization="organization",e.Public="public"}(t.SdPlatformOrganizationVisibility||(t.SdPlatformOrganizationVisibility={})),function(e){e.Private="private",e.Organization="organization",e.Public="public",e.Shared="shared"}(t.SdPlatformSavedStateVisibility||(t.SdPlatformSavedStateVisibility={}))})(k3e);var C3e={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SdPlatformRequestAuthorizationCodeCodeChallengeMethod=t.SdPlatformRequestAuthorizationCodeResponseType=t.SdPlatformAuthGrantType=void 0,function(e){e.Password="password",e.RefreshToken="refresh_token",e.Code="authorization_code"}(t.SdPlatformAuthGrantType||(t.SdPlatformAuthGrantType={})),function(e){e.Code="code"}(t.SdPlatformRequestAuthorizationCodeResponseType||(t.SdPlatformRequestAuthorizationCodeResponseType={})),function(e){e.S256="S256"}(t.SdPlatformRequestAuthorizationCodeCodeChallengeMethod||(t.SdPlatformRequestAuthorizationCodeCodeChallengeMethod={}))})(C3e);var P3e={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SdPlatformSortingOrder=void 0,function(e){e.Asc="asc",e.Desc="desc"}(t.SdPlatformSortingOrder||(t.SdPlatformSortingOrder={}))})(P3e);var R3e={};Object.defineProperty(R3e,"__esModule",{value:!0});var D3e={};Object.defineProperty(D3e,"__esModule",{value:!0});var O3e={};Object.defineProperty(O3e,"__esModule",{value:!0});var I3e={};Object.defineProperty(I3e,"__esModule",{value:!0});var N3e={};Object.defineProperty(N3e,"__esModule",{value:!0});var L3e={};Object.defineProperty(L3e,"__esModule",{value:!0});var z3e={};Object.defineProperty(z3e,"__esModule",{value:!0});var B3e={};Object.defineProperty(B3e,"__esModule",{value:!0});var U3e={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SdPlatformRequestModelStatus=void 0,function(e){e.Done="done",e.ErrorUpload="error_upload"}(t.SdPlatformRequestModelStatus||(t.SdPlatformRequestModelStatus={}))})(U3e);var F3e={};Object.defineProperty(F3e,"__esModule",{value:!0});var V3e={};Object.defineProperty(V3e,"__esModule",{value:!0});var G3e={};Object.defineProperty(G3e,"__esModule",{value:!0});var j3e={};Object.defineProperty(j3e,"__esModule",{value:!0});var H3e={};Object.defineProperty(H3e,"__esModule",{value:!0});var $3e={};Object.defineProperty($3e,"__esModule",{value:!0});var W3e={};Object.defineProperty(W3e,"__esModule",{value:!0});var Y3e={};Object.defineProperty(Y3e,"__esModule",{value:!0});var q3e={};Object.defineProperty(q3e,"__esModule",{value:!0});var X3e={};Object.defineProperty(X3e,"__esModule",{value:!0});var Z3e={};Object.defineProperty(Z3e,"__esModule",{value:!0});var Q3e={};Object.defineProperty(Q3e,"__esModule",{value:!0});var K3e={};Object.defineProperty(K3e,"__esModule",{value:!0});var J3e={};Object.defineProperty(J3e,"__esModule",{value:!0});var ewe={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SdPlatformResponseAnalyticsTimestampType=void 0,function(e){e.Hour="hour",e.Day="day",e.Month="month",e.Year="year"}(t.SdPlatformResponseAnalyticsTimestampType||(t.SdPlatformResponseAnalyticsTimestampType={}))})(ewe);var twe={};Object.defineProperty(twe,"__esModule",{value:!0});var nwe={};Object.defineProperty(nwe,"__esModule",{value:!0});var rwe={};Object.defineProperty(rwe,"__esModule",{value:!0});var iwe={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SdPlatformResponseChargebeePeriodUnit=t.SdPlatformResponseChargebeeCurrencyCode=void 0,function(e){e.USD="USD",e.AUD="AUD",e.EUR="EUR",e.GBP="GBP"}(t.SdPlatformResponseChargebeeCurrencyCode||(t.SdPlatformResponseChargebeeCurrencyCode={})),function(e){e.Day="day",e.Week="week",e.Month="month",e.Year="year"}(t.SdPlatformResponseChargebeePeriodUnit||(t.SdPlatformResponseChargebeePeriodUnit={}))})(iwe);var swe={};Object.defineProperty(swe,"__esModule",{value:!0});var owe={};Object.defineProperty(owe,"__esModule",{value:!0});var awe={};Object.defineProperty(awe,"__esModule",{value:!0});var lwe={};Object.defineProperty(lwe,"__esModule",{value:!0});var cwe={};Object.defineProperty(cwe,"__esModule",{value:!0});var uwe={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SdPlatformModelStatus=t.SdPlatformModelTrustlevel=void 0,function(n){n.UNDEFINED="",n.NONE="none",n.FULL="full"}(t.SdPlatformModelTrustlevel||(t.SdPlatformModelTrustlevel={})),function(n){n.Start="start",n.Waiting="waiting",n.Confirmed="confirmed",n.Done="done",n.Pending="pending",n.Denied="denied",n.ErrorUpload="error_upload",n.Error="error"}(t.SdPlatformModelStatus||(t.SdPlatformModelStatus={}));var e;(function(n){n.Unknown="unknown",n.Plugin="plugin",n.Script="script",n.Timeout="timeout",n.NoOutputs="no_outputs",n.Size="size",n.OutputLimits="output_limits",n.NoDefaultGeometry="no_default_geometry",n.TimeoutSmall="timeout_small",n.ComputationFailed="computation_failed",n.NotProcessed="not_processed",n.Component="component",n.EncryptedCluster="encrypted_cluster",n.ScriptsNotAllowed="scripts_not_allowed",n.ScriptsPending="scripts_pending",n.AnalysisTimeout="analysis_timeout",n.LoadingTimeout="loading_timeout",n.PreparationTimeout="preparation_timeout",n.CollectTimeout="collect_timeout",n.CollectTimeoutSmall="collect_timeout_small",n.RequiresRhino8="requires_rhino_8",n.UnknownGrasshopperVersion="unknown_grasshopper_version"})(e||(e={}))})(uwe);var fwe={};Object.defineProperty(fwe,"__esModule",{value:!0});var dwe={};Object.defineProperty(dwe,"__esModule",{value:!0});var hwe={};Object.defineProperty(hwe,"__esModule",{value:!0});var pwe={};Object.defineProperty(pwe,"__esModule",{value:!0});var mwe={};Object.defineProperty(mwe,"__esModule",{value:!0});var gwe={};Object.defineProperty(gwe,"__esModule",{value:!0});var vwe={};Object.defineProperty(vwe,"__esModule",{value:!0});var _we={};Object.defineProperty(_we,"__esModule",{value:!0});var ywe={};Object.defineProperty(ywe,"__esModule",{value:!0});var bwe={};Object.defineProperty(bwe,"__esModule",{value:!0});var Awe={};Object.defineProperty(Awe,"__esModule",{value:!0});(function(t){var e=X&&X.__createBinding||(Object.create?function(i,o,l,d){d===void 0&&(d=l);var p=Object.getOwnPropertyDescriptor(o,l);(!p||("get"in p?!o.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return o[l]}}),Object.defineProperty(i,d,p)}:function(i,o,l,d){d===void 0&&(d=l),i[d]=o[l]}),n=X&&X.__exportStar||function(i,o){for(var l in i)l!=="default"&&!Object.prototype.hasOwnProperty.call(o,l)&&e(o,i,l)};Object.defineProperty(t,"__esModule",{value:!0}),n(b3e,t),n(A3e,t),n(w3e,t),n(E3e,t),n(S3e,t),n(T3e,t),n(x3e,t),n(M3e,t),n(k3e,t),n(C3e,t),n(P3e,t),n(R3e,t),n(D3e,t),n(O3e,t),n(I3e,t),n(N3e,t),n(L3e,t),n(z3e,t),n(B3e,t),n(U3e,t),n(F3e,t),n(V3e,t),n(G3e,t),n(j3e,t),n(H3e,t),n($3e,t),n(W3e,t),n(Y3e,t),n(q3e,t),n(X3e,t),n(Z3e,t),n(Q3e,t),n(K3e,t),n(J3e,t),n(ewe,t),n(twe,t),n(nwe,t),n(rwe,t),n(iwe,t),n(swe,t),n(owe,t),n(awe,t),n(lwe,t),n(cwe,t),n(uwe,t),n(fwe,t),n(dwe,t),n(hwe,t),n(pwe,t),n(mwe,t),n(gwe,t),n(vwe,t),n(_we,t),n(ywe,t),n(bwe,t),n(Awe,t)})(RK);var bs={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.RequestId=void 0,function(e){e.PasswordGrant="password_grant",e.RefreshToken="refresh_token",e.AuthorizationCode="authorization_code",e.Logout="logout",e.RequestAuthorizationCode="request_authorization_code",e.ApiTokenGet="api_token_get",e.ApiTokenQuery="api_token_query",e.ApiTokenCreate="api_token_create",e.ApiTokenPatch="api_token_patch",e.ApiTokenDelete="api_token_delete",e.ApiClientQuery="api_client_query",e.ApiClientCreate="api_client_create",e.ApiClientPatch="api_client_patch",e.ApiClientDelete="api_client_delete",e.BackendSystemQuery="backend_system_query",e.BackendSystemCreate="backend_system_create",e.BackendSystemPatch="backend_system_patch",e.BackendSystemDelete="backend_system_delete",e.BackendSystemToken="backend_system_token",e.BookmarkCreate="bookmark_create",e.BookmarkDelete="bookmark_delete",e.ImageGet="image_get",e.ImageQuery="image_query",e.ImageCreate="image_create",e.ImagesDelete="image_delete",e.PolicyGet="policy_get",e.PolicyQuery="policy_query",e.PolicyCreate="policy_create",e.PolicyPatch="policy_patch",e.PolicyDelete="policy_delete",e.TagGet="tag_get",e.TagQuery="tag_query",e.TokenCreate="token_create",e.UserGet="user_get",e.UserQuery="user_query",e.UserPatch="user_patch",e.UserDelete="user_delete",e.UserRegister="user_register",e.UserConfirm="user_confirm",e.UserRefreshToken="user_refresh_token",e.UserDeleteRefreshToken="user_delete_refresh_token",e.UserDisableMailing="user_disable_mailing",e.PasswordReset="password_reset",e.PasswordResetConfirm="password_reset_confirm",e.ModelGet="model_get",e.ModelQuery="model_query",e.ModelCreate="model_create",e.ModelPatch="model_patch",e.ModelDelete="model_delete",e.DecryptTicket="decrypt_ticket",e.ModelIframeData="model_iframe_data",e.SavedStateGet="saved_state_get",e.SavedStateQuery="saved_state_query",e.SavedStatePatch="saved_state_patch",e.SavedStateCreate="saved_state_create",e.SavedStateDelete="saved_state_delete",e.DomainGet="domain_get",e.DomainQuery="domain_query",e.DomainCreate="domain_create",e.DomainPatch="domain_patch",e.DomainDelete="domain_delete",e.OpenIDProviderGet="openid_provider_get",e.OpenIDProviderCreate="openid_provider_create",e.OpenIDProviderQuery="openid_provider_query",e.OpenIDProviderPatch="openid_provider_patch",e.OpenIDPRoviderDelete="openid_provider_delete",e.OrganizationGet="organization_get",e.OrganizationQuery="organization_query",e.OrganizationCreate="organization_create",e.OrganizationDelete="organization_delete",e.OrganizationPatch="organization_patch",e.OrganizationInvitationCreate="organization_invitation_create",e.OrganizationInvitationDelete="organization_invitation_delete",e.OrganizationInvitationsGet="organization_invitation_get",e.OrganizationInvitationAccept="organization_invitation_accept",e.OrganizationInvitationDeny="organization_invitation_deny",e.OrganizationPatchMemberRole="organization_patch_member_role",e.OrganizationInvitationByEmail="organization_invitation_by_email",e.OrganizationIdentifySSO="organization_identify_sso",e.NotificationGet="notification_get",e.NotificationQuery="notification_query",e.NotificationCreate="notification_create",e.NotificationBatchCreate="notification_batch_create",e.NotificationPatch="notification_patch",e.NotificationDelete="notification_delete",e.NotificationSummary="notification_summary",e.NotificationReadAll="notification_read_all",e.UserModelSessionsQuery="user_model_sessions_query",e.OrganizationModelSessionsQuery="organization_model_sessions_query",e.ChargebeeHostedPage="chargebee_hosted_page",e.ChargebeeHostedPageUpdatePaymentMethod="chargebee_hosted_page_update_payment_method",e.ChargebeePortalSession="chargebee_portal_session",e.ChargebeeConfig="chargebee_config",e.ChargebeeQueryPlan="chargebee_query_plan",e.HttpLogQuery="http_log_query",e.ModelSharingCreate="model_sharing_create",e.ModelSharingCreateMultiple="model_sharing_create_multiple",e.ModelSharingQuery="model_sharing_query",e.ModelSharingQueryByModel="model_sharing_query_by_model",e.ModelSharingQueryByUser="model_sharing_query_by_user",e.ModelSharingGetByModelAndUser="model_sharing_get_by_model_and_user",e.ModelSharingDelete="model_sharing_delete",e.ModelSharingGroupedByuser="model_sharing_grouped_by_user",e.ModelSharingCopy="model_sharing_copy",e.SavedStateSharingCreate="saved_state_sharing_create",e.SavedStateSharingCreateMultiple="saved_state_sharing_create_multiple",e.SavedStateSharingQuery="saved_state_sharing_query",e.SavedStateSharingQueryBySavedState="saved_state_sharing_query_by_saved_state",e.SavedStateSharingQueryByUser="saved_state_sharing_query_by_user",e.SavedStateSharingGetBySavedStateAndUser="saved_state_sharing_get_by_saved_state_and_user",e.SavedStateSharingDelete="saved_state_sharing_delete",e.SavedStateSharingGroupedByuser="saved_state_sharing_grouped_by_user",e.WebhookChargebeeEvent="webhook_chargebee_event",e.WebhookModelMessage="webhook_model_message",e.WebhookNotification="webhook_notification",e.WebhookModelComputation="webhook_model_computation",e.WebhookModelExport="webhook_model_export",e.ModelTransferRequestCreate="model_transfer_request_create",e.ModelTransferRequestDelete="model_transfer_request_delete",e.ModelTransferRequestList="model_transfer_request_list",e.ModelTransferRequestGet="model_transfer_request_get",e.ModelTransferRequestAccept="model_transfer_request_accept",e.ModelTransferRequestDeny="model_transfer_request_deny",e.DocumentCreate="document_create",e.DocumentQuery="document_query",e.DocumentDelete="document_delete",e.DocumentList="document_list",e.DocumentDownload="document_download",e.DocumentView="document_view",e.DocumentAccept="document_accept",e.DocumentBrowserDownload="document_browser_download",e.DocumentBrowserView="document_browser_view",e.JobLogQuery="job_log_query",e.StargateGetConfig="stargate_get_config"}(t.RequestId||(t.RequestId={}))})(bs);var rM={};function ZW(t){this.message=t}ZW.prototype=new Error,ZW.prototype.name="InvalidCharacterError";var Jce=typeof window<"u"&&window.atob&&window.atob.bind(window)||function(t){var e=String(t).replace(/=+$/,"");if(e.length%4==1)throw new ZW("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,i,o=0,l=0,d="";i=e.charAt(l++);~i&&(n=o%4?64*n+i:i,o++%4)?d+=String.fromCharCode(255&n>>(-2*o&6)):0)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return d};function $4t(t){var e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw"Illegal base64url string!"}try{return function(n){return decodeURIComponent(Jce(n).replace(/(.)/g,function(i,o){var l=o.charCodeAt(0).toString(16).toUpperCase();return l.length<2&&(l="0"+l),"%"+l}))}(e)}catch{return Jce(e)}}function s6(t){this.message=t}function W4t(t,e){if(typeof t!="string")throw new s6("Invalid token specified");var n=(e=e||{}).header===!0?0:1;try{return JSON.parse($4t(t.split(".")[n]))}catch(i){throw new s6("Invalid token specified: "+i.message)}}s6.prototype=new Error,s6.prototype.name="InvalidTokenError";const Y4t=Object.freeze(Object.defineProperty({__proto__:null,InvalidTokenError:s6,default:W4t},Symbol.toStringTag,{value:"Module"})),q4t=ym(Y4t);var fi={},Fz={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SdPlatformGeometryBackendResponseError=t.SdPlatformUnsupportedGrantTypeClientOAuthResponseError=t.SdPlatformUnauthorizedClientOAuthResponseError=t.SdPlatformInvalidGrantOAuthResponseError=t.SdPlatformInvalidClientOAuthResponseError=t.SdPlatformInvalidRequestOAuthResponseError=t.SdPlatformOAuthResponseError=t.SdPlatformValidationResponseError=t.SdPlatformUnauthorizedResponseError=t.SdPlatformForbiddenResponseError=t.SdPlatformNotFoundResponseError=t.SdPlatformResourceResponseError=t.SdPlatformServerResponseError=t.SdPlatformResponseError=t.SdPlatformRequestError=t.SdPlatformError=t.ShapeDiverErrorType=void 0,t.ShapeDiverErrorType={Generic:"sd_pb_sdk_generic",Request:"sd_pb_sdk_request",Response:"sd_pb_sdk_response",ServerResponse:"sd_pb_sdk_server_response",ResourceResponse:"sd_pb_sdk_resource_response",NotFoundResponse:"sd_pb_sdk_not_found_response",ForbiddenResponse:"sd_pb_sdk_forbidden_response",UnauthorizedResponse:"sd_pb_sdk_unauthorized_response",ValidationResponse:"sd_pb_sdk_validation_response",OAuthResponse:"sd_pb_sdk_oauth_response",InvalidRequestOAuthResponse:"sd_pb_sdk_invalid_request_oauth_response",InvalidClientOAuthResponse:"sd_pb_sdk_invalid_client_oauth_response",InvalidGrantOAuthResponse:"sd_pb_sdk_invalid_grant_oauth_response",UnauthorizedClientOAuthResponse:"sd_pb_sdk_unauthorized_client_oauth_response",UnsupportedGrantTypeClientOAuthResponse:"sd_pb_sdk_unsupported_grant_type_oauth_response",GeometryBackendResponse:"sd_pb_sdk_gb_response"};class e extends Error{constructor(C){super(C),this.errorType=t.ShapeDiverErrorType.Generic}}t.SdPlatformError=e;class n extends e{constructor(C,P){super(C),this.desc=P,this.errorType=t.ShapeDiverErrorType.Request}}t.SdPlatformRequestError=n;class i extends e{constructor(C,P){super(C),this.http_status_code=P,this.errorType=t.ShapeDiverErrorType.Response}}t.SdPlatformResponseError=i;class o extends i{constructor(){super(...arguments),this.errorType=t.ShapeDiverErrorType.ServerResponse}}t.SdPlatformServerResponseError=o;class l extends i{constructor(C,P,O,L,B,V){super(C,P),this.error=O,this.error_description=L,this.error_uri=B,this.code=V,this.errorType=t.ShapeDiverErrorType.ResourceResponse}}t.SdPlatformResourceResponseError=l;class d extends l{constructor(){super(...arguments),this.errorType=t.ShapeDiverErrorType.NotFoundResponse}}t.SdPlatformNotFoundResponseError=d;class p extends l{constructor(){super(...arguments),this.errorType=t.ShapeDiverErrorType.ForbiddenResponse}}t.SdPlatformForbiddenResponseError=p;class g extends l{constructor(){super(...arguments),this.errorType=t.ShapeDiverErrorType.UnauthorizedResponse}}t.SdPlatformUnauthorizedResponseError=g;class v extends l{constructor(C,P,O,L,B,V,G){super(C,P,O,L,B,V),this.fields=G,this.errorType=t.ShapeDiverErrorType.ValidationResponse}}t.SdPlatformValidationResponseError=v;class _ extends i{constructor(C,P,O,L,B){super(C,P),this.error=O,this.error_description=L,this.error_uri=B,this.errorType=t.ShapeDiverErrorType.OAuthResponse}}t.SdPlatformOAuthResponseError=_;class b extends _{constructor(){super(...arguments),this.errorType=t.ShapeDiverErrorType.InvalidRequestOAuthResponse}}t.SdPlatformInvalidRequestOAuthResponseError=b;class w extends _{constructor(){super(...arguments),this.errorType=t.ShapeDiverErrorType.InvalidClientOAuthResponse}}t.SdPlatformInvalidClientOAuthResponseError=w;class E extends _{constructor(){super(...arguments),this.errorType=t.ShapeDiverErrorType.InvalidGrantOAuthResponse}}t.SdPlatformInvalidGrantOAuthResponseError=E;class S extends _{constructor(){super(...arguments),this.errorType=t.ShapeDiverErrorType.UnauthorizedClientOAuthResponse}}t.SdPlatformUnauthorizedClientOAuthResponseError=S;class M extends _{constructor(){super(...arguments),this.errorType=t.ShapeDiverErrorType.UnsupportedGrantTypeClientOAuthResponse}}t.SdPlatformUnsupportedGrantTypeClientOAuthResponseError=M;class k extends e{constructor(C,P,O){super(C),this.error=P,this.desc=O,this.errorType=t.ShapeDiverErrorType.GeometryBackendResponse}}t.SdPlatformGeometryBackendResponseError=k})(Fz);Object.defineProperty(fi,"__esModule",{value:!0});fi.isPBGeometryBackendResponseError=fi.isPBUnsupportedGrantTypeClientOAuthResponseError=fi.isPBUnauthorizedClientOAuthResponseError=fi.isPBInvalidGrantOAuthResponseError=fi.isPBInvalidClientOAuthResponseError=fi.isPBInvalidRequestOAuthResponseError=fi.isPBOAuthResponseError=fi.isPBValidationResponseError=fi.isPBUnauthorizedResponseError=fi.isPBForbiddenResponseError=fi.isPBNotFoundResponseError=fi.isPBResourceResponseError=fi.isPBServerResponseError=fi.isPBResponseError=fi.isPBRequestError=fi.isPBGenericError=fi.isPBError=void 0;const ns=Fz;function X4t(t){return t instanceof Error&&"errorType"in t&&Object.values(ns.ShapeDiverErrorType).includes(t.errorType)}fi.isPBError=X4t;function Z4t(t){return t instanceof Error&&"errorType"in t&&t.errorType===ns.ShapeDiverErrorType.Generic}fi.isPBGenericError=Z4t;function Q4t(t){return t instanceof Error&&"errorType"in t&&t.errorType===ns.ShapeDiverErrorType.Request}fi.isPBRequestError=Q4t;function K4t(t){const e=[ns.ShapeDiverErrorType.Response,ns.ShapeDiverErrorType.ServerResponse,ns.ShapeDiverErrorType.ResourceResponse,ns.ShapeDiverErrorType.NotFoundResponse,ns.ShapeDiverErrorType.ForbiddenResponse,ns.ShapeDiverErrorType.UnauthorizedResponse,ns.ShapeDiverErrorType.ValidationResponse,ns.ShapeDiverErrorType.OAuthResponse,ns.ShapeDiverErrorType.InvalidRequestOAuthResponse,ns.ShapeDiverErrorType.InvalidClientOAuthResponse,ns.ShapeDiverErrorType.InvalidGrantOAuthResponse,ns.ShapeDiverErrorType.UnauthorizedClientOAuthResponse,ns.ShapeDiverErrorType.UnsupportedGrantTypeClientOAuthResponse,ns.ShapeDiverErrorType.GeometryBackendResponse];return t instanceof Error&&"errorType"in t&&e.includes(t.errorType)}fi.isPBResponseError=K4t;function J4t(t){return t instanceof Error&&"errorType"in t&&t.errorType===ns.ShapeDiverErrorType.ServerResponse}fi.isPBServerResponseError=J4t;function eAt(t){return t instanceof Error&&"errorType"in t&&t.errorType===ns.ShapeDiverErrorType.ResourceResponse}fi.isPBResourceResponseError=eAt;function tAt(t){return t instanceof Error&&"errorType"in t&&t.errorType===ns.ShapeDiverErrorType.NotFoundResponse}fi.isPBNotFoundResponseError=tAt;function nAt(t){return t instanceof Error&&"errorType"in t&&t.errorType===ns.ShapeDiverErrorType.ForbiddenResponse}fi.isPBForbiddenResponseError=nAt;function rAt(t){return t instanceof Error&&"errorType"in t&&t.errorType===ns.ShapeDiverErrorType.UnauthorizedResponse}fi.isPBUnauthorizedResponseError=rAt;function iAt(t){return t instanceof Error&&"errorType"in t&&t.errorType===ns.ShapeDiverErrorType.ValidationResponse}fi.isPBValidationResponseError=iAt;function sAt(t){return t instanceof Error&&"errorType"in t&&t.errorType===ns.ShapeDiverErrorType.OAuthResponse}fi.isPBOAuthResponseError=sAt;function oAt(t){return t instanceof Error&&"errorType"in t&&t.errorType===ns.ShapeDiverErrorType.InvalidRequestOAuthResponse}fi.isPBInvalidRequestOAuthResponseError=oAt;function aAt(t){return t instanceof Error&&"errorType"in t&&t.errorType===ns.ShapeDiverErrorType.InvalidClientOAuthResponse}fi.isPBInvalidClientOAuthResponseError=aAt;function lAt(t){return t instanceof Error&&"errorType"in t&&t.errorType===ns.ShapeDiverErrorType.InvalidGrantOAuthResponse}fi.isPBInvalidGrantOAuthResponseError=lAt;function cAt(t){return t instanceof Error&&"errorType"in t&&t.errorType===ns.ShapeDiverErrorType.UnauthorizedClientOAuthResponse}fi.isPBUnauthorizedClientOAuthResponseError=cAt;function uAt(t){return t instanceof Error&&"errorType"in t&&t.errorType===ns.ShapeDiverErrorType.UnsupportedGrantTypeClientOAuthResponse}fi.isPBUnsupportedGrantTypeClientOAuthResponseError=uAt;function fAt(t){return t instanceof Error&&"errorType"in t&&t.errorType===ns.ShapeDiverErrorType.GeometryBackendResponse}fi.isPBGeometryBackendResponseError=fAt;var TC=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})},dAt=X&&X.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(rM,"__esModule",{value:!0});rM.SdPlatformAuthServiceApi=void 0;const lw=bs,CG=RK,hAt=dAt(q4t),PG=fi;var vg;(function(t){t.NoRequest="NoRequest",t.Requested="Requested",t.Resolved="Resolved",t.Failed="Failed"})(vg||(vg={}));class pAt{constructor(e){this.__context=e,this.__refreshTokenFailedEvents=[],this.__passwordGrantFailedEvents=[],this.__authorizationCodeFailedEvents=[],this.__refreshTokenRequestMeta={request:void 0,requestState:vg.NoRequest},this.__api=e.api,this.__config=e.config}__resolveConfigAuth(){return{access_token:this.__context.accessTokenDetails.access_token,client_id:this.__context.config.clientId}}__resolveConfig(){return{}}__request(e,n){return TC(this,void 0,void 0,function*(){return this.__api.post(e,"oauth/token",n,this.__resolveConfig())})}convertToExpirationDate(e){const n=new Date;return n.setSeconds(n.getSeconds()+e),n}setAccessTokenDetails(e){const n={access_token:e.access_token,refresh_token:e.refresh_token,expires_in:e.expires_in,token_type:e.token_type};if(n.access_token){const{sub:i}=this.__decodeToken(n.access_token);n.user_id=i}n.expires_in&&(n.expirationDate=this.convertToExpirationDate(n.expires_in)),this.__context.setAccessTokenDetails(n)}get authData(){return this.__context.authData}onRefreshTokenRequestFailed(e){this.__refreshTokenFailedEvents.push(e)}onPasswordGrantFailed(e){this.__passwordGrantFailedEvents.push(e)}onAuthorizationCodeFailed(e){this.__authorizationCodeFailedEvents.push(e)}refreshToken(){return TC(this,void 0,void 0,function*(){if(this.__refreshTokenRequestMeta.requestState==vg.Requested&&this.__refreshTokenRequestMeta.request)return this.__refreshTokenRequestMeta.request;try{const e=this.__request(lw.RequestId.RefreshToken,{grant_type:CG.SdPlatformAuthGrantType.RefreshToken,client_id:this.__config.clientId,client_secret:this.__config.clientSecret});this.__refreshTokenRequestMeta.request=e,this.__refreshTokenRequestMeta.requestState=vg.Requested;const n=yield e;return this.setAccessTokenDetails(n),this.__refreshTokenRequestMeta.requestState=vg.Resolved,n}catch(e){throw this.__refreshTokenRequestMeta.requestState=vg.Failed,(0,PG.isPBResponseError)(e)&&(this.__cleanAuthData(),this.__refreshTokenFailedEvents.forEach(n=>n(e))),e}})}passwordGrant(e,n){return TC(this,void 0,void 0,function*(){try{const i=yield this.__request(lw.RequestId.PasswordGrant,{grant_type:CG.SdPlatformAuthGrantType.Password,client_id:this.__config.clientId,username:e,password:n});return this.setAccessTokenDetails(i),i}catch(i){throw(0,PG.isPBResponseError)(i)&&(this.__cleanAuthData(),this.__passwordGrantFailedEvents.forEach(o=>o(i))),i}})}authorizationCode(e,n){return TC(this,void 0,void 0,function*(){try{const i=yield this.__request(lw.RequestId.AuthorizationCode,{grant_type:CG.SdPlatformAuthGrantType.Code,client_id:this.__config.clientId,code:e,state:n});return this.setAccessTokenDetails(i),i}catch(i){throw(0,PG.isPBResponseError)(i)&&(this.__cleanAuthData(),this.__authorizationCodeFailedEvents.forEach(o=>o(i))),i}})}logout(){const e=this.__api.post(lw.RequestId.Logout,"oauth/logout",{},this.__resolveConfig());return this.__cleanAuthData(),e}requestAuthorizationCode(e){return this.__api.post(lw.RequestId.RequestAuthorizationCode,"oauth/authorize",e,Object.assign(Object.assign({},this.__resolveConfig()),this.__resolveConfigAuth()))}__decodeToken(e){return(0,hAt.default)(e)}__cleanAuthData(){this.setAccessTokenDetails({})}}rM.SdPlatformAuthServiceApi=pAt;var iM={},Is={},Vz={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SdPlatformSdkContext=t.SdPlatformAccessTokenState=void 0;var e;(function(i){i[i.NoToken=0]="NoToken",i[i.Expired=1]="Expired",i[i.Valid=2]="Valid"})(e=t.SdPlatformAccessTokenState||(t.SdPlatformAccessTokenState={}));class n{constructor(o,l){this.__api=o,this.__config=l,this.__accessTokenDetails={}}cloneTokenDetails(o){var l;return{access_token:o.access_token?o.access_token+"":void 0,refresh_token:o.refresh_token?o.refresh_token+"":void 0,expires_in:o.expires_in?o.expires_in:void 0,token_type:o.token_type?o.token_type:void 0,user_id:o.user_id?o.user_id:void 0,expirationDate:o.expirationDate?new Date((l=o.expirationDate)===null||l===void 0?void 0:l.getTime()):void 0}}get accessTokenDetails(){return this.cloneTokenDetails(this.__accessTokenDetails)}setAccessTokenDetails(o){this.__accessTokenDetails=this.cloneTokenDetails(o)}get api(){return this.__api}get config(){return this.__config}get accessTokenState(){if(!this.__accessTokenDetails.access_token)return e.NoToken;const l=this.__accessTokenDetails.expirationDate;return!l||new Date>l?e.Expired:e.Valid}get authData(){return{accessTokenState:this.accessTokenState,isAuthenticated:!!this.accessTokenDetails.access_token,userId:this.accessTokenDetails.user_id?this.accessTokenDetails.user_id+"":null}}}t.SdPlatformSdkContext=n})(Vz);(function(t){var e=X&&X.__awaiter||function(l,d,p,g){function v(_){return _ instanceof p?_:new p(function(b){b(_)})}return new(p||(p=Promise))(function(_,b){function w(M){try{S(g.next(M))}catch(k){b(k)}}function E(M){try{S(g.throw(M))}catch(k){b(k)}}function S(M){M.done?_(M.value):v(M.value).then(w,E)}S((g=g.apply(l,d||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.ResourcesApi=t.Action=void 0;const n=Vz;var i;(function(l){l.Post="post",l.Get="get",l.Delete="delete",l.Patch="patch"})(i=t.Action||(t.Action={}));class o{constructor(d,p){this.__context=d,this.__authApi=p,this.__commonPath="api/v1",this.__api=d.api}__getPath(d=null){return d==null?`${this.__commonPath}/${this.__resourcePath}`:`${this.__commonPath}/${this.__resourcePath}/${d}`}__resolveRequestConfig(){return{access_token:this.__context.accessTokenDetails.access_token,client_id:this.__context.config.clientId}}__refreshTokenIfExpired(){return e(this,void 0,void 0,function*(){return this.__context.accessTokenState==n.SdPlatformAccessTokenState.Expired&&(yield this.__authApi.refreshToken()),Promise.resolve()})}__schema(d){return e(this,void 0,void 0,function*(){return yield this.__refreshTokenIfExpired(),this.__api.get(d,this.__getPath(),this.__resolveRequestConfig())})}__get(d,p,g){return e(this,void 0,void 0,function*(){return yield this.__refreshTokenIfExpired(),yield this.__api.get(d,this.__getPath(p),this.__resolveRequestConfig(),{embed:g})})}__query(d,p={}){return e(this,void 0,void 0,function*(){return yield this.__refreshTokenIfExpired(),yield this.__api.post(d,this.__getPath("query"),p,this.__resolveRequestConfig())})}__post(d,p){return e(this,void 0,void 0,function*(){return yield this.__refreshTokenIfExpired(),this.__api.post(d,this.__getPath(),p,this.__resolveRequestConfig())})}__patch(d,p,g){return e(this,void 0,void 0,function*(){return yield this.__refreshTokenIfExpired(),this.__api.patch(d,this.__getPath(p),g,this.__resolveRequestConfig())})}__delete(d,p){return e(this,void 0,void 0,function*(){return yield this.__refreshTokenIfExpired(),this.__api.delete(d,this.__getPath(p),this.__resolveRequestConfig())})}__action(d,p,g,v,_={}){return e(this,void 0,void 0,function*(){return yield this.__refreshTokenIfExpired(),p==i.Get?this.__api[p](d,this.__getPath(g),this.__resolveRequestConfig(),v):p==i.Delete?this.__api[p](d,this.__getPath(g),this.__resolveRequestConfig()):this.__api[p](d,this.__getPath(g),v,this.__resolveRequestConfig(),_)})}}t.ResourcesApi=o})(Is);Object.defineProperty(iM,"__esModule",{value:!0});iM.SdPlatformApiTokenApi=void 0;const cw=bs,mAt=Is;class gAt extends mAt.ResourcesApi{get __resourcePath(){return"apitokens"}get(e){return super.__get(cw.RequestId.ApiTokenGet,e)}query(e={}){return super.__query(cw.RequestId.ApiTokenQuery,e)}create(e){return super.__post(cw.RequestId.ApiTokenCreate,e)}patch(e,n){return super.__patch(cw.RequestId.ApiTokenPatch,e,n)}delete(e){return super.__delete(cw.RequestId.ApiTokenDelete,e)}}iM.SdPlatformApiTokenApi=gAt;var sM={};Object.defineProperty(sM,"__esModule",{value:!0});sM.SdPlatformBackendSystemApi=void 0;const uw=bs,eue=Is;class vAt extends eue.ResourcesApi{get __resourcePath(){return"backendsystems"}query(e={}){return super.__query(uw.RequestId.BackendSystemQuery,e)}create(e){return super.__post(uw.RequestId.BackendSystemCreate,e)}patch(e,n){return super.__patch(uw.RequestId.BackendSystemPatch,e,n)}token(e){return super.__action(uw.RequestId.BackendSystemToken,eue.Action.Post,"token",e)}delete(e){return super.__delete(uw.RequestId.BackendSystemDelete,e)}}sM.SdPlatformBackendSystemApi=vAt;var oM={};Object.defineProperty(oM,"__esModule",{value:!0});oM.SdPlatformBookmarkApi=void 0;const tue=bs,_At=Is;class yAt extends _At.ResourcesApi{get __resourcePath(){return"bookmarks"}create(e){return super.__post(tue.RequestId.BookmarkCreate,e)}delete(e){return super.__delete(tue.RequestId.BookmarkDelete,e)}}oM.SdPlatformBookmarkApi=yAt;var aM={};Object.defineProperty(aM,"__esModule",{value:!0});aM.SdPlatformChargebeeApi=void 0;const fw=Is,dw=bs;class bAt extends fw.ResourcesApi{get __resourcePath(){return"chargebee"}hostedPage(e){return super.__action(dw.RequestId.ChargebeeHostedPage,fw.Action.Post,"hosted_page",e)}hostedPageUpdatePaymentMethod(e){return super.__action(dw.RequestId.ChargebeeHostedPageUpdatePaymentMethod,fw.Action.Post,"hosted_page_update_payment_method",e)}portalSession(e){return super.__action(dw.RequestId.ChargebeePortalSession,fw.Action.Post,"portal_session",e)}queryChargebeePlans(e){return super.__action(dw.RequestId.ChargebeeQueryPlan,fw.Action.Post,"plans/query",e)}config(){return super.__get(dw.RequestId.ChargebeeConfig,"config")}}aM.SdPlatformChargebeeApi=bAt;var DK={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SdPlatformDomainApi=t.SdPlatformDomainQueryEmbeddableFields=t.SdPlatformDomainGetEmbeddableFields=void 0;const e=bs,n=Is;(function(o){o.Models="models"})(t.SdPlatformDomainGetEmbeddableFields||(t.SdPlatformDomainGetEmbeddableFields={})),function(o){o.ModelsCount="models_count"}(t.SdPlatformDomainQueryEmbeddableFields||(t.SdPlatformDomainQueryEmbeddableFields={}));class i extends n.ResourcesApi{get __resourcePath(){return"domains"}get(l,d=[]){return super.__get(e.RequestId.DomainGet,l,d)}query(l={}){return super.__query(e.RequestId.DomainQuery,l)}create(l){return super.__post(e.RequestId.DomainCreate,l)}patch(l,d){return super.__patch(e.RequestId.DomainPatch,l,d)}delete(l){return super.__delete(e.RequestId.DomainDelete,l)}}t.SdPlatformDomainApi=i})(DK);var lM={};Object.defineProperty(lM,"__esModule",{value:!0});lM.SdPlatformHttpLogApi=void 0;const AAt=bs,wAt=Is;class EAt extends wAt.ResourcesApi{get __resourcePath(){return"httplogs"}query(e={}){return super.__query(AAt.RequestId.HttpLogQuery,e)}}lM.SdPlatformHttpLogApi=EAt;var OK={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SdPlatformImageApi=t.SdPlatformImageQueryEmbeddableFields=void 0;const e=bs,n=Is;(function(o){o.User="user",o.Models="models"})(t.SdPlatformImageQueryEmbeddableFields||(t.SdPlatformImageQueryEmbeddableFields={}));class i extends n.ResourcesApi{get __resourcePath(){return"images"}get(l,d=[]){return super.__get(e.RequestId.ImageGet,l,d)}query(l={}){return super.__query(e.RequestId.ImageQuery,l)}create(l){return super.__post(e.RequestId.ImageCreate,l)}delete(l){return super.__delete(e.RequestId.ImagesDelete,l)}}t.SdPlatformImageApi=i})(OK);var IK={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SdPlatformModelApi=t.SdPlatformModelGetEmbeddableFields=t.SdPlatformModelQueryEmbeddableFields=void 0;const e=bs,n=Is;(function(o){o.Accessdomains="accessdomains",o.GlobalAccessdomains="global_accessdomains",o.BackendSystem="backend_system",o.Tags="tags",o.User="user",o.Decoration="decoration",o.Bookmark="bookmark",o.Organization="organization"})(t.SdPlatformModelQueryEmbeddableFields||(t.SdPlatformModelQueryEmbeddableFields={})),function(o){o.Accessdomains="accessdomains",o.GlobalAccessdomains="global_accessdomains",o.BackendSystem="backend_system",o.BackendProperties="backend_properties",o.Tags="tags",o.User="user",o.Decoration="decoration",o.Bookmark="bookmark",o.Ticket="ticket",o.AuthorTicket="author_ticket",o.BackendTicket="backend_ticket",o.Organization="organization",o.TokenView="token_view",o.TokenExport="token_export",o.TokenOwner="token_owner",o.TokenExportFallback="token_export_fallback",o.TokenOwnerFallback="token_owner_fallback"}(t.SdPlatformModelGetEmbeddableFields||(t.SdPlatformModelGetEmbeddableFields={}));class i extends n.ResourcesApi{get __resourcePath(){return"models"}get(l,d=[]){return super.__get(e.RequestId.ModelGet,l,d)}query(l={}){return super.__query(e.RequestId.ModelQuery,l)}create(l={}){return super.__post(e.RequestId.ModelCreate,l)}patch(l,d){return super.__patch(e.RequestId.ModelPatch,l,d)}delete(l){return super.__delete(e.RequestId.ModelDelete,l)}decryptTicket(l){return super.__action(e.RequestId.DecryptTicket,n.Action.Post,"decrypt_ticket",{ticket:l})}iframeEmbedding(l,d={}){const g=parent!==window?document.referrer.split("/").slice(0,3).join("/"):window.location.origin;return super.__action(e.RequestId.ModelIframeData,n.Action.Post,`iframe/${l}`,d,{"X-ShapeDiver-Origin":g})}}t.SdPlatformModelApi=i})(IK);var NK={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SdPlatformModelSharingApi=t.SdPlatformModelharingQueryEmbeddableFields=void 0;const e=bs,n=Is;(function(o){o.User="user",o.Model="model",o.Provider="provider"})(t.SdPlatformModelharingQueryEmbeddableFields||(t.SdPlatformModelharingQueryEmbeddableFields={}));class i extends n.ResourcesApi{get __resourcePath(){return"model_sharing"}create(l){return super.__post(e.RequestId.ModelSharingCreate,l)}createMultiple(l){return super.__action(e.RequestId.ModelSharingCreateMultiple,n.Action.Post,"model_sharing_multiple",l)}query(l={}){return super.__query(e.RequestId.ModelSharingQuery,l)}queryByModel(l,d={}){return super.__action(e.RequestId.ModelSharingQueryByModel,n.Action.Post,`model/${l}/query`,d)}queryByUser(l,d={}){return super.__action(e.RequestId.ModelSharingQueryByUser,n.Action.Post,`user/${l}/query`,d)}getByModelAndUser(l,d){return super.__get(e.RequestId.ModelSharingGetByModelAndUser,`model/${l}/user/${d}`)}delete(l){return super.__delete(e.RequestId.ModelSharingDelete,l)}getGroupedByUser(l){return super.__action(e.RequestId.ModelSharingGroupedByuser,n.Action.Get,`model/${l}/grouped_by_user`,{})}copyModelSharings(l,d){return super.__action(e.RequestId.ModelSharingCopy,n.Action.Post,`model/${d}/copy`,{model_id:l})}}t.SdPlatformModelSharingApi=i})(NK);var cM={};Object.defineProperty(cM,"__esModule",{value:!0});cM.SdPlatformModelTokenApi=void 0;const SAt=bs,TAt=Is;class xAt extends TAt.ResourcesApi{get __resourcePath(){return"tokens"}create(e){return super.__post(SAt.RequestId.TokenCreate,e)}}cM.SdPlatformModelTokenApi=xAt;var hw={},nue;function wwe(){if(nue)return hw;nue=1,Object.defineProperty(hw,"__esModule",{value:!0}),hw.SdPlatformModelTransferApi=void 0;const t=Vwe(),e=Is;let n=class extends e.ResourcesApi{get __resourcePath(){return"model_transfers"}getModelTransferRequests(){return super.__action(t.RequestId.ModelTransferRequestList,e.Action.Get,"",{})}createModelTransferRequest(o,l){return super.__action(t.RequestId.ModelTransferRequestCreate,e.Action.Post,`${o}`,l)}deleteModelTransferRequest(o){return super.__action(t.RequestId.ModelTransferRequestDelete,e.Action.Delete,`${o}`,{})}getModelTransferRequest(o){return super.__action(t.RequestId.ModelTransferRequestGet,e.Action.Get,`${o}`,{})}acceptModelTransferRequest(o){return super.__action(t.RequestId.ModelTransferRequestAccept,e.Action.Post,`accept/${o}`,{})}denyModelTransferRequest(o){return super.__action(t.RequestId.ModelTransferRequestDeny,e.Action.Post,`deny/${o}`,{})}};return hw.SdPlatformModelTransferApi=n,hw}var LK={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SdPlatformNotificationApi=t.SdPlatformNotificationSummaryEmbeddableFields=t.SdPlatformNotificationEmbeddableFields=void 0;const e=bs,n=Is;(function(o){o.Receiver="receiver",o.User="user",o.Model="model",o.SavedState="saved_state",o.Document="document",o.Organization="organization"})(t.SdPlatformNotificationEmbeddableFields||(t.SdPlatformNotificationEmbeddableFields={})),function(o){o.Total="total",o.Unread="unread"}(t.SdPlatformNotificationSummaryEmbeddableFields||(t.SdPlatformNotificationSummaryEmbeddableFields={}));class i extends n.ResourcesApi{get __resourcePath(){return"notifications"}query(l={}){return super.__query(e.RequestId.NotificationQuery,l)}create(l){return super.__post(e.RequestId.NotificationCreate,l)}createMultiple(l){return super.__action(e.RequestId.NotificationBatchCreate,n.Action.Post,"batch",l)}patch(l,d){return this.__patch(e.RequestId.NotificationPatch,l,d)}delete(l){return this.__delete(e.RequestId.NotificationDelete,l)}summary(l){return super.__get(e.RequestId.NotificationSummary,"summary",l)}get(l){return super.__get(e.RequestId.NotificationGet,l)}markAllAsRead(){return super.__action(e.RequestId.NotificationReadAll,n.Action.Post,"read_all",{})}}t.SdPlatformNotificationApi=i})(LK);var zK={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SdPlatformOpenIDProviderApi=t.SdPlatformOpenIDProviderEmbeddableFields=void 0;const e=bs,n=Is;(function(o){o.Organization="organization"})(t.SdPlatformOpenIDProviderEmbeddableFields||(t.SdPlatformOpenIDProviderEmbeddableFields={}));class i extends n.ResourcesApi{get __resourcePath(){return"openid_providers"}get(l,d){return super.__get(e.RequestId.OpenIDProviderGet,l,d)}query(l={}){return super.__query(e.RequestId.OpenIDProviderQuery,l)}create(l){return super.__post(e.RequestId.OpenIDProviderCreate,l)}patch(l,d){return super.__patch(e.RequestId.OpenIDProviderPatch,l,d)}delete(l){return super.__delete(e.RequestId.OpenIDPRoviderDelete,l)}}t.SdPlatformOpenIDProviderApi=i})(zK);var BK={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SdPlatformOrganizationApi=t.SdPlatformOrganizationEmbeddableFields=void 0;const e=bs,n=Is;(function(o){o.AccessDomains="accessdomains",o.BackendSystem="backend_system",o.Members="members",o.ChargebeeCustomer="chargebee_customer",o.ChargebeeSubscription="chargebee_subscription",o.ChargebeePlan="chargebee_plan",o.ChargebeeAddons="chargebee_addons",o.OpenIdProvider="openid_provider"})(t.SdPlatformOrganizationEmbeddableFields||(t.SdPlatformOrganizationEmbeddableFields={}));class i extends n.ResourcesApi{get __resourcePath(){return"organizations"}get(l,d){return super.__get(e.RequestId.OrganizationGet,l,d)}query(l={}){return super.__query(e.RequestId.OrganizationQuery,l)}create(l){return super.__post(e.RequestId.OrganizationCreate,l)}patch(l,d){return super.__patch(e.RequestId.OrganizationPatch,l,d)}delete(l){return super.__delete(e.RequestId.OrganizationDelete,l)}createOrganizationInvitation(l,d){return super.__action(e.RequestId.OrganizationInvitationCreate,n.Action.Post,`${l}/invitation/${d}`,{})}deleteOrganizationInvitation(l,d){return super.__action(e.RequestId.OrganizationInvitationDelete,n.Action.Delete,`${l}/invitation/${d}`,{})}getOrganizationInvitations(l){return super.__action(e.RequestId.OrganizationInvitationsGet,n.Action.Get,`${l}/invitation`,{})}acceptOrganizationInvitation(l){return super.__action(e.RequestId.OrganizationInvitationAccept,n.Action.Post,`${l}/invitation_accept`,{})}denyOrganizationInvitation(l){return super.__action(e.RequestId.OrganizationInvitationDeny,n.Action.Post,`${l}/invitation_deny`,{})}patchMemberRole(l,d,p){return super.__action(e.RequestId.OrganizationPatchMemberRole,n.Action.Patch,`${l}/user/${d}`,{organization_role:p})}invitationByEmail(l,d){return super.__action(e.RequestId.OrganizationInvitationByEmail,n.Action.Post,`${l}/invitation_by_email`,{email:d})}identifySSO(l){return super.__action(e.RequestId.OrganizationIdentifySSO,n.Action.Get,"identify_sso",{email:l})}}t.SdPlatformOrganizationApi=i})(BK);var uM={};Object.defineProperty(uM,"__esModule",{value:!0});uM.SdPlatformPolicyApi=void 0;const pw=bs,MAt=Is;class kAt extends MAt.ResourcesApi{get __resourcePath(){return"policies"}query(e={}){return super.__query(pw.RequestId.PolicyQuery,e)}get(e){return super.__get(pw.RequestId.PolicyGet,e)}create(e){return super.__post(pw.RequestId.PolicyCreate,e)}patch(e,n){return this.__patch(pw.RequestId.PolicyPatch,e,n)}delete(e){return this.__delete(pw.RequestId.PolicyDelete,e)}}uM.SdPlatformPolicyApi=kAt;var UK={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SdPlatformSavedStateApi=t.SdPlatformSavedStateGetEmbedFields=t.SdPlatformSavedStateQueryEmbeddableFields=void 0;const e=Is,n=bs;(function(o){o.Model="model",o.Owner="owner",o.Image="image"})(t.SdPlatformSavedStateQueryEmbeddableFields||(t.SdPlatformSavedStateQueryEmbeddableFields={})),function(o){o.Model="model",o.Owner="owner"}(t.SdPlatformSavedStateGetEmbedFields||(t.SdPlatformSavedStateGetEmbedFields={}));class i extends e.ResourcesApi{get __resourcePath(){return"saved_states"}get(l,d){return super.__get(n.RequestId.SavedStateGet,l,d)}create(l){return super.__post(n.RequestId.SavedStateCreate,l)}patch(l,d){return super.__patch(n.RequestId.SavedStatePatch,l,d)}delete(l){return super.__delete(n.RequestId.SavedStateDelete,l)}query(l){return super.__query(n.RequestId.SavedStateQuery,l)}}t.SdPlatformSavedStateApi=i})(UK);var FK={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SdPlatformSavedStateSharingApi=t.SdPlatformSavedStateSharingQueryEmbeddableFields=void 0;const e=Is,n=bs;(function(o){o.User="user",o.SavedState="saved_state",o.Provider="provider"})(t.SdPlatformSavedStateSharingQueryEmbeddableFields||(t.SdPlatformSavedStateSharingQueryEmbeddableFields={}));class i extends e.ResourcesApi{get __resourcePath(){return"saved_state_sharing"}create(l){return super.__post(n.RequestId.SavedStateCreate,l)}createMultiple(l){return super.__action(n.RequestId.ModelSharingCreateMultiple,e.Action.Post,"saved_state_sharing_multiple",l)}delete(l){return super.__delete(n.RequestId.SavedStateSharingDelete,l)}getBySavedStateAndUser(l,d){return super.__get(n.RequestId.SavedStateSharingGetBySavedStateAndUser,`saved_state/${l}/user/${d}`)}query(l){return super.__query(n.RequestId.SavedStateSharingQuery,l)}queryBySavedState(l,d){return super.__action(n.RequestId.SavedStateSharingQueryBySavedState,e.Action.Post,`saved_state/${l}/query`,d)}queryByUser(l,d){return super.__action(n.RequestId.SavedStateSharingQueryByUser,e.Action.Post,`user/${l}/query`,d)}getGroupedByUser(l){return super.__action(n.RequestId.SavedStateSharingGroupedByuser,e.Action.Get,`saved_state/${l}/grouped_by_user`,{})}}t.SdPlatformSavedStateSharingApi=i})(FK);var VK={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SdPlatformTagApi=t.SdPlatformTagQueryEmbeddableFields=void 0;const e=bs,n=Is;(function(o){o.ModelsCount="models_count"})(t.SdPlatformTagQueryEmbeddableFields||(t.SdPlatformTagQueryEmbeddableFields={}));class i extends n.ResourcesApi{get __resourcePath(){return"tags"}get(l){return super.__get(e.RequestId.TagGet,l)}query(l={}){return super.__query(e.RequestId.TagQuery,l)}}t.SdPlatformTagApi=i})(VK);var fM={};Object.defineProperty(fM,"__esModule",{value:!0});fM.SdPlatformUserAnalyticsApi=void 0;const CAt=bs,PAt=Is;class RAt extends PAt.ResourcesApi{get __resourcePath(){return"user_model_sessions"}query(e={}){return super.__query(CAt.RequestId.UserModelSessionsQuery,e)}}fM.SdPlatformUserAnalyticsApi=RAt;var GK={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SdPlatformUserApi=t.SdPlatformUserGetEmbeddableFields=t.SdPlatformUserQueryEmbeddableFields=void 0;const e=bs,n=Is;(function(o){o.BackendSystem="backend_system",o.ChargebeeAddons="chargebee_addons",o.ChargebeeCustomer="chargebee_customer",o.ChargebeePlan="chargebee_plan",o.ChargebeeSubscription="chargebee_subscription",o.GlobalAccessDomains="global_accessdomains",o.Organization="organization"})(t.SdPlatformUserQueryEmbeddableFields||(t.SdPlatformUserQueryEmbeddableFields={})),function(o){o.BackendSystem="backend_system",o.ChargebeeAddons="chargebee_addons",o.ChargebeeCustomer="chargebee_customer",o.ChargebeePlan="chargebee_plan",o.ChargebeeSubscription="chargebee_subscription",o.GlobalAccessDomains="global_accessdomains",o.Organization="organization",o.UsedCredits="used_credits"}(t.SdPlatformUserGetEmbeddableFields||(t.SdPlatformUserGetEmbeddableFields={}));class i extends n.ResourcesApi{get __resourcePath(){return"users"}get(l,d){return super.__get(e.RequestId.UserGet,l,d)}register(l){return super.__action(e.RequestId.UserRegister,n.Action.Post,"register",l)}query(l={}){return super.__query(e.RequestId.UserQuery,l)}patch(l,d){return super.__patch(e.RequestId.UserPatch,l,d)}delete(l){return super.__delete(e.RequestId.UserDelete,l)}confirm(l){return super.__action(e.RequestId.UserConfirm,n.Action.Post,"confirm",{token:l})}passwordReset(l){return super.__action(e.RequestId.PasswordReset,n.Action.Post,"password_reset",{email:l})}passwordResetConfirm(l){return super.__action(e.RequestId.PasswordResetConfirm,n.Action.Post,"password_reset_confirm",l)}getUserRefreshTokens(l){return super.__action(e.RequestId.UserRefreshToken,n.Action.Get,`users/${l}/apiclients`,{})}deleteRefreshToken(l,d){return super.__action(e.RequestId.UserDeleteRefreshToken,n.Action.Delete,`users/${l}/apiclients/${d}`,{})}disableMailing(l,d){return super.__action(e.RequestId.UserDisableMailing,n.Action.Patch,"disable_mailing",{email:l,property:d})}}t.SdPlatformUserApi=i})(GK);var dM={},Gz={},DAt=X&&X.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Gz,"__esModule",{value:!0});Gz.createWebhookSignature=void 0;const OAt=DAt(Eb);function IAt(t,e){const n=OAt.default.createHmac("sha256",Buffer.from(t,"utf-8")),i=JSON.stringify(e);return n.update(Buffer.from(i,"utf-8")),n.digest().toString("hex").toLowerCase()}Gz.createWebhookSignature=IAt;Object.defineProperty(dM,"__esModule",{value:!0});dM.SdPlatformWebhookApi=void 0;const mw=bs,rue=Gz;class NAt{constructor(e){this.__context=e,this.__commonPath="webhook/v1",this.__api=e.api}__getPath(e=null){return`${this.__commonPath}/${e}`}__resolveRequestConfig(e){return{username:e.username,password:e.password,access_token:e.bearer_access_token,basic_access_token:e.basic_access_token,client_id:this.__context.config.clientId}}chargebeeEvent(e,n){return this.__api.post(mw.RequestId.WebhookChargebeeEvent,this.__getPath("chargebee_event"),n,this.__resolveRequestConfig({username:e.username,password:e.password}))}modelMessage(e,n){return this.__api.post(mw.RequestId.WebhookModelMessage,this.__getPath("model_message"),n,this.__resolveRequestConfig({bearer_access_token:e.bearer_access_token,basic_access_token:e.basic_access_token}))}notification(e,n){return this.__api.post(mw.RequestId.WebhookNotification,this.__getPath("notifications"),n,this.__resolveRequestConfig({bearer_access_token:e.bearer_access_token,basic_access_token:e.basic_access_token}))}modelComputation(e,n,i,o){var l=this.__getPath(`${e}/${i}/output`);const d=(0,rue.createWebhookSignature)(n,o);return this.__api.post(mw.RequestId.WebhookModelComputation,l,o,this.__resolveRequestConfig({}),{"X-WEBHOOK-SIGNATURE":d})}modelExport(e,n,i,o,l){var d=this.__getPath(`${e}/${i}/export/${o}`);const p=(0,rue.createWebhookSignature)(n,l);return this.__api.post(mw.RequestId.WebhookModelExport,d,l,this.__resolveRequestConfig({}),{"X-WEBHOOK-SIGNATURE":p})}}dM.SdPlatformWebhookApi=NAt;var gw={},jz={},Hz={},jK={exports:{}},Ewe=function(e,n){return function(){for(var o=new Array(arguments.length),l=0;l<o.length;l++)o[l]=arguments[l];return e.apply(n,o)}},LAt=Ewe,Fm=Object.prototype.toString;function HK(t){return Array.isArray(t)}function QW(t){return typeof t>"u"}function zAt(t){return t!==null&&!QW(t)&&t.constructor!==null&&!QW(t.constructor)&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function Swe(t){return Fm.call(t)==="[object ArrayBuffer]"}function BAt(t){return Fm.call(t)==="[object FormData]"}function UAt(t){var e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Swe(t.buffer),e}function FAt(t){return typeof t=="string"}function VAt(t){return typeof t=="number"}function Twe(t){return t!==null&&typeof t=="object"}function JD(t){if(Fm.call(t)!=="[object Object]")return!1;var e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}function GAt(t){return Fm.call(t)==="[object Date]"}function jAt(t){return Fm.call(t)==="[object File]"}function HAt(t){return Fm.call(t)==="[object Blob]"}function xwe(t){return Fm.call(t)==="[object Function]"}function $At(t){return Twe(t)&&xwe(t.pipe)}function WAt(t){return Fm.call(t)==="[object URLSearchParams]"}function YAt(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function qAt(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function $K(t,e){if(!(t===null||typeof t>"u"))if(typeof t!="object"&&(t=[t]),HK(t))for(var n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}function KW(){var t={};function e(o,l){JD(t[l])&&JD(o)?t[l]=KW(t[l],o):JD(o)?t[l]=KW({},o):HK(o)?t[l]=o.slice():t[l]=o}for(var n=0,i=arguments.length;n<i;n++)$K(arguments[n],e);return t}function XAt(t,e,n){return $K(e,function(o,l){n&&typeof o=="function"?t[l]=LAt(o,n):t[l]=o}),t}function ZAt(t){return t.charCodeAt(0)===65279&&(t=t.slice(1)),t}var Wc={isArray:HK,isArrayBuffer:Swe,isBuffer:zAt,isFormData:BAt,isArrayBufferView:UAt,isString:FAt,isNumber:VAt,isObject:Twe,isPlainObject:JD,isUndefined:QW,isDate:GAt,isFile:jAt,isBlob:HAt,isFunction:xwe,isStream:$At,isURLSearchParams:WAt,isStandardBrowserEnv:qAt,forEach:$K,merge:KW,extend:XAt,trim:YAt,stripBOM:ZAt},ny=Wc;function iue(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var Mwe=function(e,n,i){if(!n)return e;var o;if(i)o=i(n);else if(ny.isURLSearchParams(n))o=n.toString();else{var l=[];ny.forEach(n,function(g,v){g===null||typeof g>"u"||(ny.isArray(g)?v=v+"[]":g=[g],ny.forEach(g,function(b){ny.isDate(b)?b=b.toISOString():ny.isObject(b)&&(b=JSON.stringify(b)),l.push(iue(v)+"="+iue(b))}))}),o=l.join("&")}if(o){var d=e.indexOf("#");d!==-1&&(e=e.slice(0,d)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e},QAt=Wc;function $z(){this.handlers=[]}$z.prototype.use=function(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1};$z.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)};$z.prototype.forEach=function(e){QAt.forEach(this.handlers,function(i){i!==null&&e(i)})};var KAt=$z,JAt=Wc,e3t=function(e,n){JAt.forEach(e,function(o,l){l!==n&&l.toUpperCase()===n.toUpperCase()&&(e[n]=o,delete e[l])})},kwe=function(e,n,i,o,l){return e.config=n,i&&(e.code=i),e.request=o,e.response=l,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},e},Cwe={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},RG,sue;function Pwe(){if(sue)return RG;sue=1;var t=kwe;return RG=function(n,i,o,l,d){var p=new Error(n);return t(p,i,o,l,d)},RG}var DG,oue;function t3t(){if(oue)return DG;oue=1;var t=Pwe();return DG=function(n,i,o){var l=o.config.validateStatus;!o.status||!l||l(o.status)?n(o):i(t("Request failed with status code "+o.status,o.config,null,o.request,o))},DG}var OG,aue;function n3t(){if(aue)return OG;aue=1;var t=Wc;return OG=t.isStandardBrowserEnv()?function(){return{write:function(i,o,l,d,p,g){var v=[];v.push(i+"="+encodeURIComponent(o)),t.isNumber(l)&&v.push("expires="+new Date(l).toGMTString()),t.isString(d)&&v.push("path="+d),t.isString(p)&&v.push("domain="+p),g===!0&&v.push("secure"),document.cookie=v.join("; ")},read:function(i){var o=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return o?decodeURIComponent(o[3]):null},remove:function(i){this.write(i,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),OG}var IG,lue;function r3t(){return lue||(lue=1,IG=function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}),IG}var NG,cue;function i3t(){return cue||(cue=1,NG=function(e,n){return n?e.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):e}),NG}var LG,uue;function s3t(){if(uue)return LG;uue=1;var t=r3t(),e=i3t();return LG=function(i,o){return i&&!t(o)?e(i,o):o},LG}var zG,fue;function o3t(){if(fue)return zG;fue=1;var t=Wc,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return zG=function(i){var o={},l,d,p;return i&&t.forEach(i.split(`
`),function(v){if(p=v.indexOf(":"),l=t.trim(v.substr(0,p)).toLowerCase(),d=t.trim(v.substr(p+1)),l){if(o[l]&&e.indexOf(l)>=0)return;l==="set-cookie"?o[l]=(o[l]?o[l]:[]).concat([d]):o[l]=o[l]?o[l]+", "+d:d}}),o},zG}var BG,due;function a3t(){if(due)return BG;due=1;var t=Wc;return BG=t.isStandardBrowserEnv()?function(){var n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a"),o;function l(d){var p=d;return n&&(i.setAttribute("href",p),p=i.href),i.setAttribute("href",p),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return o=l(window.location.href),function(p){var g=t.isString(p)?l(p):p;return g.protocol===o.protocol&&g.host===o.host}}():function(){return function(){return!0}}(),BG}var UG,hue;function Wz(){if(hue)return UG;hue=1;function t(e){this.message=e}return t.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},t.prototype.__CANCEL__=!0,UG=t,UG}var FG,pue;function mue(){if(pue)return FG;pue=1;var t=Wc,e=t3t(),n=n3t(),i=Mwe,o=s3t(),l=o3t(),d=a3t(),p=Pwe(),g=Cwe,v=Wz();return FG=function(b){return new Promise(function(E,S){var M=b.data,k=b.headers,x=b.responseType,C;function P(){b.cancelToken&&b.cancelToken.unsubscribe(C),b.signal&&b.signal.removeEventListener("abort",C)}t.isFormData(M)&&delete k["Content-Type"];var O=new XMLHttpRequest;if(b.auth){var L=b.auth.username||"",B=b.auth.password?unescape(encodeURIComponent(b.auth.password)):"";k.Authorization="Basic "+btoa(L+":"+B)}var V=o(b.baseURL,b.url);O.open(b.method.toUpperCase(),i(V,b.params,b.paramsSerializer),!0),O.timeout=b.timeout;function G(){if(O){var F="getAllResponseHeaders"in O?l(O.getAllResponseHeaders()):null,q=!x||x==="text"||x==="json"?O.responseText:O.response,fe={data:q,status:O.status,statusText:O.statusText,headers:F,config:b,request:O};e(function(J){E(J),P()},function(J){S(J),P()},fe),O=null}}if("onloadend"in O?O.onloadend=G:O.onreadystatechange=function(){!O||O.readyState!==4||O.status===0&&!(O.responseURL&&O.responseURL.indexOf("file:")===0)||setTimeout(G)},O.onabort=function(){O&&(S(p("Request aborted",b,"ECONNABORTED",O)),O=null)},O.onerror=function(){S(p("Network Error",b,null,O)),O=null},O.ontimeout=function(){var q=b.timeout?"timeout of "+b.timeout+"ms exceeded":"timeout exceeded",fe=b.transitional||g;b.timeoutErrorMessage&&(q=b.timeoutErrorMessage),S(p(q,b,fe.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",O)),O=null},t.isStandardBrowserEnv()){var j=(b.withCredentials||d(V))&&b.xsrfCookieName?n.read(b.xsrfCookieName):void 0;j&&(k[b.xsrfHeaderName]=j)}"setRequestHeader"in O&&t.forEach(k,function(q,fe){typeof M>"u"&&fe.toLowerCase()==="content-type"?delete k[fe]:O.setRequestHeader(fe,q)}),t.isUndefined(b.withCredentials)||(O.withCredentials=!!b.withCredentials),x&&x!=="json"&&(O.responseType=b.responseType),typeof b.onDownloadProgress=="function"&&O.addEventListener("progress",b.onDownloadProgress),typeof b.onUploadProgress=="function"&&O.upload&&O.upload.addEventListener("progress",b.onUploadProgress),(b.cancelToken||b.signal)&&(C=function(F){O&&(S(!F||F&&F.type?new v("canceled"):F),O.abort(),O=null)},b.cancelToken&&b.cancelToken.subscribe(C),b.signal&&(b.signal.aborted?C():b.signal.addEventListener("abort",C))),M||(M=null),O.send(M)})},FG}var Ga=Wc,gue=e3t,l3t=kwe,c3t=Cwe,u3t={"Content-Type":"application/x-www-form-urlencoded"};function vue(t,e){!Ga.isUndefined(t)&&Ga.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function f3t(){var t;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(t=mue()),t}function d3t(t,e,n){if(Ga.isString(t))try{return(e||JSON.parse)(t),Ga.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(0,JSON.stringify)(t)}var Yz={transitional:c3t,adapter:f3t(),transformRequest:[function(e,n){return gue(n,"Accept"),gue(n,"Content-Type"),Ga.isFormData(e)||Ga.isArrayBuffer(e)||Ga.isBuffer(e)||Ga.isStream(e)||Ga.isFile(e)||Ga.isBlob(e)?e:Ga.isArrayBufferView(e)?e.buffer:Ga.isURLSearchParams(e)?(vue(n,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):Ga.isObject(e)||n&&n["Content-Type"]==="application/json"?(vue(n,"application/json"),d3t(e)):e}],transformResponse:[function(e){var n=this.transitional||Yz.transitional,i=n&&n.silentJSONParsing,o=n&&n.forcedJSONParsing,l=!i&&this.responseType==="json";if(l||o&&Ga.isString(e)&&e.length)try{return JSON.parse(e)}catch(d){if(l)throw d.name==="SyntaxError"?l3t(d,this,"E_JSON_PARSE"):d}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Ga.forEach(["delete","get","head"],function(e){Yz.headers[e]={}});Ga.forEach(["post","put","patch"],function(e){Yz.headers[e]=Ga.merge(u3t)});var WK=Yz,h3t=Wc,p3t=WK,m3t=function(e,n,i){var o=this||p3t;return h3t.forEach(i,function(d){e=d.call(o,e,n)}),e},VG,_ue;function Rwe(){return _ue||(_ue=1,VG=function(e){return!!(e&&e.__CANCEL__)}),VG}var yue=Wc,GG=m3t,g3t=Rwe(),v3t=WK,_3t=Wz();function jG(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new _3t("canceled")}var y3t=function(e){jG(e),e.headers=e.headers||{},e.data=GG.call(e,e.data,e.headers,e.transformRequest),e.headers=yue.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),yue.forEach(["delete","get","head","post","put","patch","common"],function(o){delete e.headers[o]});var n=e.adapter||v3t.adapter;return n(e).then(function(o){return jG(e),o.data=GG.call(e,o.data,o.headers,e.transformResponse),o},function(o){return g3t(o)||(jG(e),o&&o.response&&(o.response.data=GG.call(e,o.response.data,o.response.headers,e.transformResponse))),Promise.reject(o)})},uu=Wc,Dwe=function(e,n){n=n||{};var i={};function o(_,b){return uu.isPlainObject(_)&&uu.isPlainObject(b)?uu.merge(_,b):uu.isPlainObject(b)?uu.merge({},b):uu.isArray(b)?b.slice():b}function l(_){if(uu.isUndefined(n[_])){if(!uu.isUndefined(e[_]))return o(void 0,e[_])}else return o(e[_],n[_])}function d(_){if(!uu.isUndefined(n[_]))return o(void 0,n[_])}function p(_){if(uu.isUndefined(n[_])){if(!uu.isUndefined(e[_]))return o(void 0,e[_])}else return o(void 0,n[_])}function g(_){if(_ in n)return o(e[_],n[_]);if(_ in e)return o(void 0,e[_])}var v={url:d,method:d,data:d,baseURL:p,transformRequest:p,transformResponse:p,paramsSerializer:p,timeout:p,timeoutMessage:p,withCredentials:p,adapter:p,responseType:p,xsrfCookieName:p,xsrfHeaderName:p,onUploadProgress:p,onDownloadProgress:p,decompress:p,maxContentLength:p,maxBodyLength:p,transport:p,httpAgent:p,httpsAgent:p,cancelToken:p,socketPath:p,responseEncoding:p,validateStatus:g};return uu.forEach(Object.keys(e).concat(Object.keys(n)),function(b){var w=v[b]||l,E=w(b);uu.isUndefined(E)&&w!==g||(i[b]=E)}),i},HG,bue;function Owe(){return bue||(bue=1,HG={version:"0.26.1"}),HG}var b3t=Owe().version,YK={};["object","boolean","number","function","string","symbol"].forEach(function(t,e){YK[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});var Aue={};YK.transitional=function(e,n,i){function o(l,d){return"[Axios v"+b3t+"] Transitional option '"+l+"'"+d+(i?". "+i:"")}return function(l,d,p){if(e===!1)throw new Error(o(d," has been removed"+(n?" in "+n:"")));return n&&!Aue[d]&&(Aue[d]=!0,console.warn(o(d," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(l,d,p):!0}};function A3t(t,e,n){if(typeof t!="object")throw new TypeError("options must be an object");for(var i=Object.keys(t),o=i.length;o-- >0;){var l=i[o],d=e[l];if(d){var p=t[l],g=p===void 0||d(p,l,t);if(g!==!0)throw new TypeError("option "+l+" must be "+g);continue}if(n!==!0)throw Error("Unknown option "+l)}}var w3t={assertOptions:A3t,validators:YK},Iwe=Wc,E3t=Mwe,wue=KAt,Eue=y3t,qz=Dwe,Nwe=w3t,ry=Nwe.validators;function hM(t){this.defaults=t,this.interceptors={request:new wue,response:new wue}}hM.prototype.request=function(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=qz(this.defaults,n),n.method?n.method=n.method.toLowerCase():this.defaults.method?n.method=this.defaults.method.toLowerCase():n.method="get";var i=n.transitional;i!==void 0&&Nwe.assertOptions(i,{silentJSONParsing:ry.transitional(ry.boolean),forcedJSONParsing:ry.transitional(ry.boolean),clarifyTimeoutError:ry.transitional(ry.boolean)},!1);var o=[],l=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(n)===!1||(l=l&&E.synchronous,o.unshift(E.fulfilled,E.rejected))});var d=[];this.interceptors.response.forEach(function(E){d.push(E.fulfilled,E.rejected)});var p;if(!l){var g=[Eue,void 0];for(Array.prototype.unshift.apply(g,o),g=g.concat(d),p=Promise.resolve(n);g.length;)p=p.then(g.shift(),g.shift());return p}for(var v=n;o.length;){var _=o.shift(),b=o.shift();try{v=_(v)}catch(w){b(w);break}}try{p=Eue(v)}catch(w){return Promise.reject(w)}for(;d.length;)p=p.then(d.shift(),d.shift());return p};hM.prototype.getUri=function(e){return e=qz(this.defaults,e),E3t(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")};Iwe.forEach(["delete","get","head","options"],function(e){hM.prototype[e]=function(n,i){return this.request(qz(i||{},{method:e,url:n,data:(i||{}).data}))}});Iwe.forEach(["post","put","patch"],function(e){hM.prototype[e]=function(n,i,o){return this.request(qz(o||{},{method:e,url:n,data:i}))}});var S3t=hM,$G,Sue;function T3t(){if(Sue)return $G;Sue=1;var t=Wz();function e(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var i;this.promise=new Promise(function(d){i=d});var o=this;this.promise.then(function(l){if(o._listeners){var d,p=o._listeners.length;for(d=0;d<p;d++)o._listeners[d](l);o._listeners=null}}),this.promise.then=function(l){var d,p=new Promise(function(g){o.subscribe(g),d=g}).then(l);return p.cancel=function(){o.unsubscribe(d)},p},n(function(d){o.reason||(o.reason=new t(d),i(o.reason))})}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(i){if(this.reason){i(this.reason);return}this._listeners?this._listeners.push(i):this._listeners=[i]},e.prototype.unsubscribe=function(i){if(this._listeners){var o=this._listeners.indexOf(i);o!==-1&&this._listeners.splice(o,1)}},e.source=function(){var i,o=new e(function(d){i=d});return{token:o,cancel:i}},$G=e,$G}var WG,Tue;function x3t(){return Tue||(Tue=1,WG=function(e){return function(i){return e.apply(null,i)}}),WG}var YG,xue;function M3t(){if(xue)return YG;xue=1;var t=Wc;return YG=function(n){return t.isObject(n)&&n.isAxiosError===!0},YG}var Mue=Wc,k3t=Ewe,eO=S3t,C3t=Dwe,P3t=WK;function Lwe(t){var e=new eO(t),n=k3t(eO.prototype.request,e);return Mue.extend(n,eO.prototype,e),Mue.extend(n,e),n.create=function(o){return Lwe(C3t(t,o))},n}var Gd=Lwe(P3t);Gd.Axios=eO;Gd.Cancel=Wz();Gd.CancelToken=T3t();Gd.isCancel=Rwe();Gd.VERSION=Owe().version;Gd.all=function(e){return Promise.all(e)};Gd.spread=x3t();Gd.isAxiosError=M3t();jK.exports=Gd;jK.exports.default=Gd;var R3t=jK.exports,zwe=R3t,D3t=X&&X.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Hz,"__esModule",{value:!0});Hz.mapToApiError=void 0;const O3t=D3t(zwe),La=Fz;function I3t(t){return"error"in t&&"error_description"in t}function Bwe(t){return"error"in t&&typeof t.error=="object"&&"message"in t.error}function N3t(t){return Bwe(t)&&"fields"in t.error}function L3t(t){return"error"in t&&"desc"in t}function to(t){return t.endsWith(".")?t:t+"."}function z3t(t){var e,n,i,o,l;if(!O3t.default.isAxiosError(t))return new La.SdPlatformError(t.message);const d=t;if(d.response){let p=d.response.data;if(d.response.status>=500)return new La.SdPlatformServerResponseError((n=(e=p==null?void 0:p.error)===null||e===void 0?void 0:e.message)!==null&&n!==void 0?n:"Server Error.",d.response.status);if(p&&I3t(p))return p.error=="invalid_client"?new La.SdPlatformInvalidClientOAuthResponseError(`${to(p.error)} ${to(p.error_description)}`,d.response.status,p.error,p.error_description,p.error_uri):p.error=="invalid_request"?new La.SdPlatformInvalidRequestOAuthResponseError(`${to(p.error)} ${to(p.error_description)}`,d.response.status,p.error,p.error_description,p.error_uri):p.error=="invalid_grant"?new La.SdPlatformInvalidGrantOAuthResponseError(`${to(p.error)} ${to(p.error_description)}`,d.response.status,p.error,p.error_description,p.error_uri):p.error=="unauthorized_client"?new La.SdPlatformUnauthorizedClientOAuthResponseError(`${to(p.error)} ${to(p.error_description)}`,d.response.status,p.error,p.error_description,p.error_uri):p.error=="unsupported_grant_type"?new La.SdPlatformUnsupportedGrantTypeClientOAuthResponseError(`${to(p.error)} ${to(p.error_description)}`,d.response.status,p.error,p.error_description,p.error_uri):new La.SdPlatformOAuthResponseError(`${to(p.error)} ${to(p.error_description)}`,d.response.status,p.error,p.error_description,p.error_uri);if(p&&Bwe(p)){if(N3t(p)){const g=Object.entries(p.error.fields).reduce((b,[w,E])=>(b[w]=Array.isArray(E)?E:[E],b),{}),v=Object.values(g).map(b=>b.map(w=>to(w)).join(" ")).join(" "),_=`${to(p.error.message)} ${to(p.error.description)}`;return new La.SdPlatformValidationResponseError(v?`${_} ${v}`:_,d.response.status,p.error.message,p.error.description,p.error.href,p.error.code,g)}switch(d.response.status){case 404:return new La.SdPlatformNotFoundResponseError(`${to(p.error.message)} ${to(p.error.description)}`,d.response.status,p.error.message,p.error.description,p.error.href,p.error.code);case 403:return new La.SdPlatformForbiddenResponseError(`${to(p.error.message)} ${to(p.error.description)}`,d.response.status,p.error.message,p.error.description,p.error.href,p.error.code);case 401:return new La.SdPlatformUnauthorizedResponseError(`${to(p.error.message)} ${to(p.error.description)}`,d.response.status,p.error.message,p.error.description,p.error.href,p.error.code);default:return new La.SdPlatformResourceResponseError(`${to(p.error.message)} ${to(p.error.description)}`,d.response.status,p.error.message,p.error.description,p.error.href,p.error.code)}}else return p&&L3t(p)?new La.SdPlatformGeometryBackendResponseError(p.message||p.desc||((i=p.error)!==null&&i!==void 0?i:""),(o=p.error)!==null&&o!==void 0?o:"",(l=p.desc)!==null&&l!==void 0?l:""):new La.SdPlatformError("")}else return d.request?new La.SdPlatformRequestError("Could not send request.","The request was made but no response was received."):new La.SdPlatformError(t.message)}Hz.mapToApiError=z3t;var vw=X&&X.__awaiter||function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function p(_){try{v(i.next(_))}catch(b){d(b)}}function g(_){try{v(i.throw(_))}catch(b){d(b)}}function v(_){_.done?l(_.value):o(_.value).then(p,g)}v((i=i.apply(t,e||[])).next())})},B3t=X&&X.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(jz,"__esModule",{value:!0});jz.SdPlatformSdkApi=void 0;const U3t=Hz,F3t=B3t(zwe);var db;(function(t){t.GET="GET",t.POST="POST",t.PATCH="PATCH",t.DELETE="DELETE"})(db||(db={}));class V3t{constructor(e){this.__config=e,this.__onRequestStart=[],this.__onRequestFinished=[]}__toQueryString(e){const n=Object.keys(e),i=o=>e[o]?`${encodeURIComponent(o)}=${encodeURIComponent(e[o])}`:"";return`?${n.map(i).join("&")}`}__resolveRequest(e,n,i,o,l){const d={url:e,method:n,withCredentials:!0,headers:{"Content-Type":"application/json",Authorization:""}};if(i.access_token?d.headers.Authorization=`Bearer ${i.access_token}`:i.basic_access_token&&(d.headers.Authorization=`Basic ${i.basic_access_token}`),i.client_id&&(d.headers["X-ShapeDiver-Client"]=i.client_id),l&&Object.keys(l).length>0)for(const p in l)d.headers[p]=l[p];return i.username&&(d.auth={username:i.username,password:i.password}),o&&(d.data=o),d}__afterRequest(e,n,i){if(this.__onRequestFinished.length>0){const o=Object.assign({},n),l=Object.assign({},i),d={id:e,requestParams:{method:o.method,url:o.url,data:void 0},response:{status:l.status,data:l.data}};this.__onRequestFinished.forEach(p=>p(d))}}__fetch(e,n){return vw(this,void 0,void 0,function*(){if(this.__onRequestStart.length>0){const i=Object.assign({},n),o={id:e,requestParams:{method:i.method,url:i.url,data:i.data}};this.__onRequestStart.forEach(l=>l(o))}try{const i=yield(0,F3t.default)(Object.assign({},n));return this.__afterRequest(e,n,i),i}catch(i){const o=(0,U3t.mapToApiError)(i);throw i.response&&this.__afterRequest(e,n,i.response),o}})}onRequestStart(e){this.__onRequestStart.push(e)}onRequestFinished(e){this.__onRequestFinished.push(e)}get(e,n,i,o){return vw(this,void 0,void 0,function*(){const l=o?this.__toQueryString(o):"",d=this.__resolveRequest(`${this.__config.baseUrl}/${n}${l}`,db.GET,i),p=yield this.__fetch(e,d);return Promise.resolve(p.data)})}post(e,n,i,o,l){return vw(this,void 0,void 0,function*(){const d=this.__resolveRequest(`${this.__config.baseUrl}/${n}`,db.POST,o,i,l),p=yield this.__fetch(e,d);return Promise.resolve(p.data)})}patch(e,n,i,o,l){return vw(this,void 0,void 0,function*(){const d=this.__resolveRequest(`${this.__config.baseUrl}/${n}`,db.PATCH,o,i),p=yield this.__fetch(e,d);return Promise.resolve(p.data)})}delete(e,n,i){return vw(this,void 0,void 0,function*(){const o=this.__resolveRequest(`${this.__config.baseUrl}/${n}`,db.DELETE,i),l=yield this.__fetch(e,o);return Promise.resolve(l.data)})}}jz.SdPlatformSdkApi=V3t;var Xz={};Object.defineProperty(Xz,"__esModule",{value:!0});Xz.SdPlatformSdkConfig=void 0;class G3t{constructor(e,n,i){this.clientId=e,this.clientSecret=n,this.baseUrl=i}}Xz.SdPlatformSdkConfig=G3t;var Zz={};Object.defineProperty(Zz,"__esModule",{value:!0});Zz.SdPlatformDocumentApi=void 0;const H1=bs,_w=Is;class j3t extends _w.ResourcesApi{get __resourcePath(){return"documents"}create(e){return super.__post(H1.RequestId.DocumentCreate,e)}query(e={}){return super.__query(H1.RequestId.DocumentQuery,e)}delete(e){return super.__delete(H1.RequestId.DocumentDelete,e)}list(e){return super.__action(H1.RequestId.DocumentList,_w.Action.Get,"",e??{})}download(e){return super.__action(H1.RequestId.DocumentDownload,_w.Action.Get,`${e}/download`,{})}view(e){return super.__action(H1.RequestId.DocumentView,_w.Action.Get,`${e}/view`,{})}getDownloadUrl(e){return`/browser/v1/documents/${e}/download`}getViewUrl(e){return`/browser/v1/documents/${e}/view`}accept(e,n){return super.__action(H1.RequestId.DocumentAccept,_w.Action.Post,`${e}/accept`,n)}}Zz.SdPlatformDocumentApi=j3t;var Qz={};Object.defineProperty(Qz,"__esModule",{value:!0});Qz.SdPlatformOrganizationAnalyticsApi=void 0;const H3t=bs,$3t=Is;class W3t extends $3t.ResourcesApi{get __resourcePath(){return"organization_model_sessions"}query(e={}){return super.__query(H3t.RequestId.OrganizationModelSessionsQuery,e)}}Qz.SdPlatformOrganizationAnalyticsApi=W3t;var Uwe={};(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.SdPlatformApiClientsApi=t.SdPlatformApiClientsQueryEmbeddableFields=void 0;const e=bs,n=Is;t.SdPlatformApiClientsQueryEmbeddableFields||(t.SdPlatformApiClientsQueryEmbeddableFields={});class i extends n.ResourcesApi{get __resourcePath(){return"apiclients"}query(l={}){return super.__query(e.RequestId.ApiClientQuery,l)}create(l){return super.__post(e.RequestId.ApiClientCreate,l)}patch(l,d){return super.__patch(e.RequestId.ApiClientPatch,l,d)}delete(l){return super.__delete(e.RequestId.ApiClientDelete,l)}}t.SdPlatformApiClientsApi=i})(Uwe);var Kz={};Object.defineProperty(Kz,"__esModule",{value:!0});Kz.SdPlatformJobLogApi=void 0;const Y3t=bs,q3t=Is;class X3t extends q3t.ResourcesApi{get __resourcePath(){return"joblogs"}query(e={}){return super.__query(Y3t.RequestId.JobLogQuery,e)}}Kz.SdPlatformJobLogApi=X3t;var Jz={};Object.defineProperty(Jz,"__esModule",{value:!0});Jz.SdPlatformStargateApi=void 0;const Z3t=Is,Q3t=bs;class K3t extends Z3t.ResourcesApi{get __resourcePath(){return"stargate"}getConfig(){return this.__get(Q3t.RequestId.StargateGetConfig,"config")}}Jz.SdPlatformStargateApi=K3t;var kue;function Fwe(){if(kue)return gw;kue=1,Object.defineProperty(gw,"__esModule",{value:!0}),gw.SdPlatformSdk=void 0;const t=jz,e=Xz,n=rM,i=Vz,o=iM,l=sM,d=oM,p=aM,g=Zz,v=DK,_=lM,b=OK,w=IK,E=NK,S=cM,M=wwe(),k=LK,x=BK,C=uM,P=UK,O=FK,L=VK,B=fM,V=GK,G=dM,j=Qz,F=zK,q=Uwe,fe=Kz,ue=Jz;let J=class{constructor(me,be,ye){this.__config=new e.SdPlatformSdkConfig(me,be,ye),this.__api=new t.SdPlatformSdkApi(this.__config);const pe=new i.SdPlatformSdkContext(this.__api,this.__config);this.__authorization=new n.SdPlatformAuthServiceApi(pe),this.__apiClients=new q.SdPlatformApiClientsApi(pe,this.__authorization),this.__api_tokens=new o.SdPlatformApiTokenApi(pe,this.__authorization),this.__backendSystem=new l.SdPlatformBackendSystemApi(pe,this.__authorization),this.__bookmarks=new d.SdPlatformBookmarkApi(pe,this.__authorization),this.__chargebee=new p.SdPlatformChargebeeApi(pe,this.__authorization),this.__domains=new v.SdPlatformDomainApi(pe,this.__authorization),this.__documents=new g.SdPlatformDocumentApi(pe,this.__authorization),this.__http_logs=new _.SdPlatformHttpLogApi(pe,this.__authorization),this.__jobLogs=new fe.SdPlatformJobLogApi(pe,this.__authorization),this.__images=new b.SdPlatformImageApi(pe,this.__authorization),this.__model_sharing=new E.SdPlatformModelSharingApi(pe,this.__authorization),this.__models=new w.SdPlatformModelApi(pe,this.__authorization),this.__modelTokens=new S.SdPlatformModelTokenApi(pe,this.__authorization),this.__modelTransfers=new M.SdPlatformModelTransferApi(pe,this.__authorization),this.__notifications=new k.SdPlatformNotificationApi(pe,this.__authorization),this.__openidProviders=new F.SdPlatformOpenIDProviderApi(pe,this.__authorization),this.__organizations=new x.SdPlatformOrganizationApi(pe,this.__authorization),this.__policies=new C.SdPlatformPolicyApi(pe,this.__authorization),this.__savedStates=new P.SdPlatformSavedStateApi(pe,this.__authorization),this.__savedStateSharing=new O.SdPlatformSavedStateSharingApi(pe,this.__authorization),this.__tags=new L.SdPlatformTagApi(pe,this.__authorization),this.__userAnalytics=new B.SdPlatformUserAnalyticsApi(pe,this.__authorization),this.__organizationAnalytics=new j.SdPlatformOrganizationAnalyticsApi(pe,this.__authorization),this.__users=new V.SdPlatformUserApi(pe,this.__authorization),this.__webhooks=new G.SdPlatformWebhookApi(pe),this.__stargate=new ue.SdPlatformStargateApi(pe,this.__authorization)}get config(){return this.__config}get authorization(){return this.__authorization}get apiClients(){return this.__apiClients}get apiTokens(){return this.__api_tokens}get backendSystem(){return this.__backendSystem}get bookmarks(){return this.__bookmarks}get chargebee(){return this.__chargebee}get documents(){return this.__documents}get domains(){return this.__domains}get httpLogs(){return this.__http_logs}get jobLogs(){return this.__jobLogs}get images(){return this.__images}get modelSharing(){return this.__model_sharing}get models(){return this.__models}get modelTokens(){return this.__modelTokens}get modelTransfers(){return this.__modelTransfers}get notifications(){return this.__notifications}get openidProviders(){return this.__openidProviders}get organizations(){return this.__organizations}get policies(){return this.__policies}get savedStates(){return this.__savedStates}get stargate(){return this.__stargate}get savedStateSharing(){return this.__savedStateSharing}get tags(){return this.__tags}get userAnalytics(){return this.__userAnalytics}get organizationAnalytics(){return this.__organizationAnalytics}get users(){return this.__users}get webhooks(){return this.__webhooks}onRequestStart(me){this.__api.onRequestStart(me)}onRequestFinished(me){this.__api.onRequestFinished(me)}};return gw.SdPlatformSdk=J,gw}var yw={},Cue;function J3t(){if(Cue)return yw;Cue=1,Object.defineProperty(yw,"__esModule",{value:!0}),yw.create=void 0;const t=Fwe();function e(n,i,o){if((d=>!!(d&&d.clientId))(n))return new t.SdPlatformSdk(n.clientId,n.clientSecret,n.baseUrl);if(n)return new t.SdPlatformSdk(n,i,o);throw new Error("Parameter clientId must be provided.")}return yw.create=e,yw}var Pue;function Vwe(){return Pue||(Pue=1,function(t){var e=X&&X.__createBinding||(Object.create?function(i,o,l,d){d===void 0&&(d=l);var p=Object.getOwnPropertyDescriptor(o,l);(!p||("get"in p?!o.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return o[l]}}),Object.defineProperty(i,d,p)}:function(i,o,l,d){d===void 0&&(d=l),i[d]=o[l]}),n=X&&X.__exportStar||function(i,o){for(var l in i)l!=="default"&&!Object.prototype.hasOwnProperty.call(o,l)&&e(o,i,l)};Object.defineProperty(t,"__esModule",{value:!0}),n(RK,t),n(bs,t),n(rM,t),n(iM,t),n(sM,t),n(oM,t),n(aM,t),n(DK,t),n(lM,t),n(OK,t),n(IK,t),n(NK,t),n(cM,t),n(wwe(),t),n(LK,t),n(zK,t),n(BK,t),n(uM,t),n(UK,t),n(FK,t),n(VK,t),n(fM,t),n(GK,t),n(dM,t),n(Vz,t),n(Fz,t),n(fi,t),n(Fwe(),t),n(J3t(),t)}(kG)),kG}var iy=Vwe();const Rue="920794fa-245a-487d-8abe-af569a97da42";function ewt(t){const e=de.useRef(),{value:n}=XW(async()=>{if(!zS())return;const d=S0e(),p=iy.create({clientId:Rue,baseUrl:d});e.current=p;try{return{jwtToken:(await p.authorization.refreshToken()).access_token,platformUrl:d}}catch(g){return iy.isPBInvalidRequestOAuthResponseError(g)&&(window.location.origin==="https://shapediver.com"?window.location.href=`https://www.shapediver.com${window.location.pathname}${window.location.search}`:window.location.href=`${d}/app/login?redirect=${window.location.origin}${window.location.pathname}${window.location.search}`),{platformUrl:d}}}),{value:i,error:o,loading:l}=XW(async()=>{if(zS()&&!n||!t)return;const d=await Promise.all(t.sessions.map(async g=>{var v;if(!g.slug||!g.platformUrl)return g;if(zS()&&(n==null?void 0:n.platformUrl)===g.platformUrl){const _=await((v=e.current)==null?void 0:v.models.get(g.slug,[iy.SdPlatformModelGetEmbeddableFields.BackendSystem,iy.SdPlatformModelGetEmbeddableFields.Ticket,iy.SdPlatformModelGetEmbeddableFields.TokenExportFallback])),b=_==null?void 0:_.data;return document.title=`${(b==null?void 0:b.title)??(b==null?void 0:b.slug)} | ShapeDiver App Builder`,{...g,ticket:b.ticket.ticket,modelViewUrl:b.backend_system.model_view_url,jwtToken:b==null?void 0:b.access_token}}else{const w=(await iy.create({clientId:Rue,baseUrl:g.platformUrl}).models.iframeEmbedding(g.slug)).data;return{...g,ticket:w.ticket,modelViewUrl:w.model_view_url,jwtToken:w.token}}}));return{...t,sessions:d,auth:n}},[t,n]);return{settings:i,error:o,loading:l}}var k0={},Aa={},pM={};Object.defineProperty(pM,"__esModule",{value:!0});pM.ShapeDiverCommonsModelStatus=void 0;var Due;(function(t){t.UNKNOWN="unknown",t.NOT_UPLOADED="not_uploaded",t.UPLOADED="uploaded",t.PENDING="pending",t.CONFIRMED="confirmed",t.DENIED="denied",t.DELETED="deleted"})(Due||(pM.ShapeDiverCommonsModelStatus=Due={}));var mM={};Object.defineProperty(mM,"__esModule",{value:!0});mM.ShapeDiverCommonsModelComputationStatus=void 0;var Oue;(function(t){t.SUCCESS="success",t.TIMEOUT="timeout",t.CHECK_CONFIRMED="checkconfirmed",t.CHECK_DENIED="checkdenied",t.CHECK_PENDING="checkpending",t.MAX_COMBINED_ASSET_SIZE_EXCEEDED="maxcombinedassetsizeexceeded",t.MAX_DB_SIZE_PER_OUTPUT_EXCEEDED="maxdbsizeperoutputexceeded",t.MAX_PARTS_PER_OUTPUT_EXCEEDED="maxpartsperoutputexceeded",t.MAX_ASSET_PARTS_PER_OUTPUT_EXCEEDED="maxassetpartsperoutputexceeded",t.MAX_TRANSFORMATIONS_PER_OUTPUT_EXCEEDED="maxtransformationsperoutputexceeded",t.MAX_PARTS_EXCEEDED="maxpartsexceeded",t.MAX_ASSET_PARTS_EXCEEDED="maxassetpartsexceeded",t.RECOVERABLE_ERROR="recoverableerror",t.UNRECOVERABLE_ERROR="unrecoverableerror",t.NO_OUTPUT_DATA_FOR_DEFAULT_PARAMETER_VALUES="nooutputdatafordefaultparametervalues",t.MODEL_WITHOUT_GEOMETRY_OUTPUT="modelwithoutgeometryoutput",t.UNKNOWN="unknown"})(Oue||(mM.ShapeDiverCommonsModelComputationStatus=Oue={}));var gM={};Object.defineProperty(gM,"__esModule",{value:!0});gM.ShapeDiverCommonsTicketType=void 0;var Iue;(function(t){t.BACKEND="backend",t.NONE=""})(Iue||(gM.ShapeDiverCommonsTicketType=Iue={}));Object.defineProperty(Aa,"__esModule",{value:!0});Aa.ShapeDiverRequestQueryModelComputationStatus=Aa.ShapeDiverRequestQueryModelStatus=Aa.ShapeDiverRequestModelComputationQueryType=Aa.ShapeDiverRequestModelComputationQueryStatus=Aa.ShapeDiverRequestModelComputationQueryOrder=Aa.ShapeDiverRequestGltfUploadQueryConversion=Aa.ShapeDiverRequestLogMessageLevel=Aa.ShapeDiverRequestTicketType=void 0;const twt=pM,nwt=mM,rwt=gM;Aa.ShapeDiverRequestTicketType=Object.assign({},rwt.ShapeDiverCommonsTicketType);var Nue;(function(t){t[t.INFO=0]="INFO",t[t.WARNING=1]="WARNING",t[t.ERROR=2]="ERROR"})(Nue||(Aa.ShapeDiverRequestLogMessageLevel=Nue={}));var Lue;(function(t){t.NONE="none",t.SCENE="scene",t.USDZ="usdz"})(Lue||(Aa.ShapeDiverRequestGltfUploadQueryConversion=Lue={}));var zue;(function(t){t.ASC="asc",t.DESC="desc"})(zue||(Aa.ShapeDiverRequestModelComputationQueryOrder=zue={}));var Bue;(function(t){t.SUCCESS="success",t.TIMEOUT="timeout",t.OTHER="other",t.ALL="*"})(Bue||(Aa.ShapeDiverRequestModelComputationQueryStatus=Bue={}));var Uue;(function(t){t.COMPUTATION="computation",t.EXPORT="export",t.LOAD="load",t.ALL="*"})(Uue||(Aa.ShapeDiverRequestModelComputationQueryType=Uue={}));Aa.ShapeDiverRequestQueryModelStatus=Object.assign({},twt.ShapeDiverCommonsModelStatus);Aa.ShapeDiverRequestQueryModelComputationStatus=Object.assign({},nwt.ShapeDiverCommonsModelComputationStatus);var Gwe={};Object.defineProperty(Gwe,"__esModule",{value:!0});var jwe={};Object.defineProperty(jwe,"__esModule",{value:!0});var I4={};Object.defineProperty(I4,"__esModule",{value:!0});I4.ShapeDiverRequestModelTrustlevel=I4.ShapeDiverRequestModelFiletype=void 0;var Fue;(function(t){t.GRASSHOPPER_BINARY="gh",t.GRASSHOPPER_XML="ghx"})(Fue||(I4.ShapeDiverRequestModelFiletype=Fue={}));var Vue;(function(t){t.UNDEFINED="",t.NONE="none",t.FULL="full"})(Vue||(I4.ShapeDiverRequestModelTrustlevel=Vue={}));var eB={};Object.defineProperty(eB,"__esModule",{value:!0});eB.ShapeDiverRequestSdtfUploadPartType=void 0;var Gue;(function(t){t.MODEL_SDTF="model/vnd.sdtf"})(Gue||(eB.ShapeDiverRequestSdtfUploadPartType=Gue={}));var Hwe={};Object.defineProperty(Hwe,"__esModule",{value:!0});var $we={};Object.defineProperty($we,"__esModule",{value:!0});var Wwe={};Object.defineProperty(Wwe,"__esModule",{value:!0});var tB={};Object.defineProperty(tB,"__esModule",{value:!0});tB.ShapeDiverResponseErrorType=void 0;var jue;(function(t){t.ASSERTION_ERROR="SdAssertionError",t.CACHE_ERROR_GENERIC="SdCacheErrorGeneric",t.CONNECTOR_ERROR="SdConnectorError",t.DATABASE_ERROR_GENERIC="SdDatabaseErrorGeneric",t.EMAILING_ERROR="SdEmailingError",t.ERROR_ENTITY_NOT_FOUND="SdErrorEntityNotFound",t.ERROR_FORBIDDEN="SdErrorForbidden",t.ERROR_GENERIC_CLIENT="SdErrorGenericClient",t.ERROR_GENERIC_INTERNAL="SdErrorGenericInternal",t.ERROR_UNAUTHORIZED="SdErrorUnauthorized",t.ILLEGAL_ARGUMENT_ERROR="SdIllegalArgumentError",t.JWT_VALIDATION_ERROR="SdJwtValidationError",t.MODEL_VALIDATION_ERROR="SdModelValidationError",t.NOT_ACCEPTABLE="SdNotAcceptable",t.NOT_FOUND_ERROR="SdNotFoundError",t.PARAMETER_VALIDATION_ERROR="SdParameterValidationError",t.RATE_LIMIT_ERROR_GENERIC="SdRateLimitErrorGeneric",t.REQUEST_TIMEOUT="SdRequestTimeout",t.REQUEST_VALIDATION_ERROR="SdRequestValidationError",t.RESOURCE_GONE_ERROR="SdResourceGoneError",t.SESSION_GONE_ERROR="SdSessionGoneError",t.SESSION_VALIDATION_ERROR="SdSessionValidationError",t.STORAGE_ERROR_GENERIC="SdStorageErrorGeneric",t.TEXTURE_URL_ERROR="SdTextureUrlError",t.TICKET_VALIDATION_ERROR="SdTicketValidationError",t.TOKEN_MISSING_ERROR="SdTokenMissingError",t.TRANSFORM_CONTENT_ARRAY_ERROR="SdTransformContentArrayError",t.UNCONFIRMED_MODEL_ERROR="SdUnconfirmedModelError",t.UNKNOWN=""})(jue||(tB.ShapeDiverResponseErrorType=jue={}));var nB={};Object.defineProperty(nB,"__esModule",{value:!0});nB.ShapeDiverResponseExportDefinitionType=void 0;var Hue;(function(t){t.UNKNOWN="unknown",t.DOWNLOAD="download",t.EMAIL="email",t.SHAPEWAYS="shapeways"})(Hue||(nB.ShapeDiverResponseExportDefinitionType=Hue={}));var Ywe={};Object.defineProperty(Ywe,"__esModule",{value:!0});var Dc={};Object.defineProperty(Dc,"__esModule",{value:!0});Dc.ShapeDiverResponseModelCleanupProcessType=Dc.ShapeDiverResponseTicketType=Dc.ShapeDiverResponseParameterStructure=Dc.ShapeDiverResponseParameterVisualization=Dc.ShapeDiverResponseParameterType=Dc.ShapeDiverResponseModelStatus=void 0;const iwt=pM,swt=gM;Dc.ShapeDiverResponseModelStatus=Object.assign({},iwt.ShapeDiverCommonsModelStatus);var $ue;(function(t){t.S_BITMAP="sBitmap",t.S_BOOL="sBool",t.S_BOX="sBox",t.S_BREP="sBrep",t.S_CIRCLE="sCircle",t.S_COLOR="sColor",t.S_CURVE="sCurve",t.S_DOMAIN="sDomain",t.S_DOMAIN_2D="sDomain2D",t.S_INTEGER="sInteger",t.S_LINE="sLine",t.S_MESH="sMesh",t.S_NUMBER="sNumber",t.S_PLANE="sPlane",t.S_POINT="sPoint",t.S_RECTANGLE="sRectangle",t.S_STRING="sString",t.S_SUBDIV="sSubdiv",t.S_SURFACE="sSurface",t.S_TIME="sTime",t.S_VECTOR="sVector",t.BOOL="Bool",t.COLOR="Color",t.EVEN="Even",t.FILE="File",t.FLOAT="Float",t.INT="Int",t.ODD="Odd",t.STRING="String",t.STRINGLIST="StringList",t.TIME="Time",t.UNKNOWN="unknown"})($ue||(Dc.ShapeDiverResponseParameterType=$ue={}));var Wue;(function(t){t.UNKNOWN="unknown",t.BUTTON="button",t.CALENDAR="calendar",t.CHECKLIST="checklist",t.CLOCK="clock",t.CYCLE="cycle",t.DIAL="dial",t.DROPDOWN="dropdown",t.GEOMETRY="geometry",t.IMAGE="image",t.SEQUENCE="sequence",t.SLIDER="slider",t.SWATCH="swatch",t.TEXT="text",t.TOGGLE="toggle"})(Wue||(Dc.ShapeDiverResponseParameterVisualization=Wue={}));var Yue;(function(t){t.ITEM="item",t.LIST="list",t.TREE="tree"})(Yue||(Dc.ShapeDiverResponseParameterStructure=Yue={}));Dc.ShapeDiverResponseTicketType=Object.assign({},swt.ShapeDiverCommonsTicketType);var que;(function(t){t.DELETE_EXPORT_VERSION="delete_export_version",t.DELETE_MODEL_TEXTURE="delete_model_texture",t.DELETE_OUTPUT_VERSION="delete_output_version"})(que||(Dc.ShapeDiverResponseModelCleanupProcessType=que={}));var rB={};Object.defineProperty(rB,"__esModule",{value:!0});rB.ShapeDiverResponseModelComputationStatus=void 0;const owt=mM;rB.ShapeDiverResponseModelComputationStatus=Object.assign({},owt.ShapeDiverCommonsModelComputationStatus);var qwe={};Object.defineProperty(qwe,"__esModule",{value:!0});var Xwe={};Object.defineProperty(Xwe,"__esModule",{value:!0});var Zwe={};Object.defineProperty(Zwe,"__esModule",{value:!0});(function(t){var e=X&&X.__createBinding||(Object.create?function(i,o,l,d){d===void 0&&(d=l);var p=Object.getOwnPropertyDescriptor(o,l);(!p||("get"in p?!o.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return o[l]}}),Object.defineProperty(i,d,p)}:function(i,o,l,d){d===void 0&&(d=l),i[d]=o[l]}),n=X&&X.__exportStar||function(i,o){for(var l in i)l!=="default"&&!Object.prototype.hasOwnProperty.call(o,l)&&e(o,i,l)};Object.defineProperty(t,"__esModule",{value:!0}),n(Aa,t),n(Gwe,t),n(jwe,t),n(I4,t),n(eB,t),n(Hwe,t),n($we,t),n(Wwe,t),n(tB,t),n(nB,t),n(Ywe,t),n(Dc,t),n(rB,t),n(qwe,t),n(Xwe,t),n(Zwe,t)})(k0);var Vn=(t=>(t.Adjustments="adjustments",t.AdjustmentsHorizontal="adjustments-horizontal",t.ArrowBack="arrow-back",t.ArrowDown="arrow-down",t.ArrowForward="arrow-forward",t.ArrowLeft="arrow-left",t.ArrowRight="arrow-right",t.ArrowUp="arrow-up",t.AugmentedReality="augmented-reality",t.AugmentedRealityOff="augmented-reality-off",t.Bookmark="bookmark",t.BookmarkOff="bookmark-off",t.Bookmarks="bookmarks",t.BookmarksOff="bookmarks-off",t.Books="books",t.BooksOff="books-off",t.Camera="camera",t.CameraOff="camera-off",t.Copy="copy",t.Dots="dots",t.DotsVertical="dots-vertical",t.Download="download",t.DownloadOff="download-off",t.FileDownload="file-download",t.FileExport="file-export",t.FileImport="file-import",t.Key="key",t.KeyOff="key-off",t.Link="link",t.LinkOff="link-off",t.Maximize="maximize",t.MaximizeOff="maximize-off",t.Network="network",t.NetworkOff="network-off",t.Photo="photo",t.PhotoOff="photo-off",t.Refresh="refresh",t.RefreshOff="refresh-off",t.Reload="reload",t.Replace="replace",t.Settings="settings",t.Share="share",t.Share2="share-2",t.Share3="share-3",t.ShareOff="share-off",t.Upload="upload",t.User="user",t.UserOff="user-off",t.Users="users",t.Video="video",t.VideoOff="video-off",t.World="world",t.WorldOff="world-off",t.ZoomScan="zoom-scan",t))(Vn||{});({...Vn});const awt=Jt.object({id:Jt.string(),choices:Jt.array(Jt.string()).optional(),decimalplaces:Jt.number().optional(),defval:Jt.string(),expression:Jt.string().optional(),format:Jt.array(Jt.string()).optional(),min:Jt.number().optional(),max:Jt.number().optional(),umin:Jt.number().optional(),umax:Jt.number().optional(),vmin:Jt.number().optional(),vmax:Jt.number().optional(),interval:Jt.number().optional(),name:Jt.string(),type:Jt.nativeEnum(k0.ShapeDiverResponseParameterType),visualization:Jt.nativeEnum(k0.ShapeDiverResponseParameterVisualization).optional(),structure:Jt.nativeEnum(k0.ShapeDiverResponseParameterStructure).optional(),group:Jt.object({id:Jt.string(),name:Jt.string()}).optional(),hint:Jt.string().optional(),order:Jt.number().optional(),tooltip:Jt.string().optional(),displayname:Jt.string().optional(),hidden:Jt.boolean()}),lwt=Jt.object({name:Jt.string(),sessionId:Jt.string().optional(),disableIfDirty:Jt.boolean().optional(),acceptRejectMode:Jt.boolean().optional()}),Qwe=Jt.object({name:Jt.string(),sessionId:Jt.string().optional()}),vM=Jt.object({}),cwt=Jt.object({parameters:Jt.array(lwt).optional(),exports:Jt.array(Qwe).optional(),defaultGroupName:Jt.string().optional()}).extend(vM.shape),uwt=Jt.object({text:Jt.string().optional(),markdown:Jt.string().optional()}).extend(vM.shape),fwt=Jt.object({anchor:Jt.string().optional(),alt:Jt.string().optional(),href:Jt.string().optional(),export:Qwe.optional(),target:Jt.string().default("_blank")}).extend(vM.shape),Kwe=Jt.discriminatedUnion("type",[Jt.object({type:Jt.literal("accordion"),props:cwt}),Jt.object({type:Jt.literal("text"),props:uwt}),Jt.object({type:Jt.literal("image"),props:fwt})]),dwt=Jt.object({name:Jt.string(),icon:Jt.nativeEnum(Vn).optional(),widgets:Jt.array(Kwe)}).extend(vM.shape),hwt=Jt.object({name:Jt.enum(["left","right","top","bottom"]),tabs:Jt.array(dwt).optional(),widgets:Jt.array(Kwe).optional()}).extend(vM.shape),Jwe=Jt.object({version:Jt.literal("1.0"),parameters:Jt.array(awt).optional(),sessionId:Jt.string().optional(),containers:Jt.array(hwt)}),pwt=t=>Jwe.safeParse(t),mwt=Jt.object({ticket:Jt.string().optional(),guid:Jt.string().optional(),modelViewUrl:Jt.string(),jwtToken:Jt.string().optional(),id:Jt.string(),waitForOutputs:Jt.boolean().optional(),loadOutputs:Jt.boolean().optional(),excludeViewports:Jt.array(Jt.string()).optional(),initialParameterValues:Jt.record(Jt.string()).optional(),slug:Jt.string().optional(),platformUrl:Jt.string().optional(),acceptRejectMode:Jt.boolean().optional()}),gwt=Jt.object({disableFallbackUi:Jt.boolean().optional()}),vwt=Jt.object({version:Jt.literal("1.0"),sessions:Jt.array(mwt).optional(),settings:gwt.optional(),themeOverrides:Jt.record(Jt.string(),Jt.any()).optional(),appBuilderOverride:Jwe.optional()}),_wt=t=>vwt.safeParse(t),eEe=nM(t=>({themeOverride:{},setThemeOverride:e=>{e&&t(n=>({...n,themeOverride:e}))}}));function ywt(t){return t==="true"||t==="1"}function bwt(t,e="g"){var L,B;const n=de.useMemo(()=>new URLSearchParams(window.location.search),[]),i=n.get(e),o=V=>{const G=_wt(V);if(G.success)return G.data;throw new Error(`Parsing AppBuilder settings failed: ${G.error.message}`)},{value:l,error:d,loading:p}=XW(async()=>{if(!i)return;const V=await fetch(i,{mode:"cors"});return o(await V.json())},[i]),g=n.get("ticket"),v=(L=n.get("modelViewUrl"))==null?void 0:L.replace(/\/+$/,""),_=n.get("slug"),b=(B=n.get("platformUrl"))==null?void 0:B.replace(/\/+$/,""),w=ywt(n.get("disableFallbackUi")),E=n.get("template"),S=de.useMemo(()=>_?{id:"default",slug:_,platformUrl:b??S0e()}:g&&v?{id:"default",ticket:g,modelViewUrl:v}:void 0,[_,b,g,v]),M=de.useMemo(()=>E?{components:{AppBuilderTemplateSelector:{defaultProps:{template:E}}}}:void 0,[E]),k=de.useMemo(()=>!l&&(t||S)?{version:"1.0",sessions:[S??t],settings:{disableFallbackUi:w},themeOverrides:M}:l?{sessions:t||S?[S??t]:[],...l}:void 0,[l,t,S,M]),x=eEe(V=>V.setThemeOverride);de.useEffect(()=>{console.debug("Theme overrides",l),x(k==null?void 0:k.themeOverrides)},[k==null?void 0:k.themeOverrides]);const{settings:C,error:P,loading:O}=ewt(k);return{settings:C,error:d||P,loading:p||O,hasSettings:n.size>0,hasSession:(k==null?void 0:k.sessions)&&k.sessions.length>0||(C==null?void 0:C.sessions)&&C.sessions.length>0}}function Xue(t,e,n){const i=e.definition.id;return{execute:async(o,l,d)=>{const p=n();if(i in p.values&&o===l)return console.log(`Removing change of parameter ${i}`),delete p.values[i],Object.keys(p.values).length===0&&p.reject(),l;try{return console.debug(`Queueing change of parameter ${i} to ${o}`),p.values[i]=o,d&&setTimeout(p.accept,0),await p.wait,console.debug(`Executed change of parameter ${i} to ${o}`),o}catch(g){return console.debug(`Rejecting change of parameter ${i} to ${o}, resetting to "${l}"`,g??"(Unknown error)"),l}},isValid:(o,l)=>e.isValid?e.isValid(o,l):!0,definition:e.definition}}function Awt(t,e,n){return async i=>{const o=Object.keys(i).reduce((d,p)=>(d[p]=t.parameters[p].value,d),{}),l=e();try{if(Object.keys(i).forEach(d=>t.parameters[d].value=i[d]),l.length>0){const d={parameters:t.parameterValues,exports:l,outputs:Object.keys(t.outputs)},p=await t.requestExports(d,!0);n(p.exports)}else await t.customize()}catch(d){throw Object.keys(o).forEach(p=>t.parameters[p].value=o[p]),d}}}function Zue(t,e,n){const i=t.definition,o=n!==void 0?n:i.defval,l={uiValue:o,execValue:o,dirty:!1};return nM()(CK((d,p)=>({definition:i,acceptRejectMode:e,state:l,actions:{setUiValue:function(g){return p().actions.isValid(g,!1)?(d(_=>({state:{..._.state,uiValue:g,dirty:g!==_.state.execValue}}),!1,"setUiValue"),!0):!1},execute:async function(g){const v=p().state,_=p().acceptRejectMode,b=await t.execute(v.uiValue,v.execValue,g||!_);return d(w=>({state:{...w.state,uiValue:b,execValue:b,dirty:!1}}),!1,"execute"),b},isValid:function(g,v){return t.isValid(g,v)},resetToDefaultValue:function(){const g=p().definition;d(v=>({state:{...v.state,uiValue:g.defval,dirty:g.defval!==v.state.execValue}}),!1,"resetToDefaultValue")},resetToExecValue:function(){const g=p().state;d(v=>({state:{...v.state,uiValue:g.execValue,dirty:!1}}),!1,"resetToExecValue")}}}),{...PK,name:`ShapeDiver | Parameter | ${i.id}`}))}function wwt(t,e,n){const i=t.exports[e],o=i,l=i,d=Object.values(t.parameters);return nM(()=>({definition:o,actions:{request:async p=>{const g=d.reduce((v,_)=>(_.id in v||(v[_.id]=_.stringify()),v),p??{});return l.request(g)},fetch:async p=>fetch(p,{...n?{headers:{Authorization:n}}:{}})}}))}const Dd=nM()(CK((t,e)=>({parameterStores:{},exportStores:{},parameterChanges:{},defaultExports:{},defaultExportResponses:{},removeChanges:n=>{const{parameterChanges:i}=e();if(!i[n])return;const o={};Object.keys(i).forEach(l=>{l!==n&&(o[l]=i[l])}),t(()=>({parameterChanges:o}),!1,"removeChanges")},getChanges:(n,i)=>{const{parameterChanges:o,removeChanges:l}=e();if(o[n])return o[n];const d={values:{},accept:()=>{},reject:()=>{},wait:Promise.resolve(),executing:!1};return d.wait=new Promise((p,g)=>{d.accept=async()=>{try{const v=i(d.values,n);t(_=>({parameterChanges:{..._.parameterChanges,[n]:{..._.parameterChanges[n],executing:!0}}}),!1,"executeChanges"),await v,p()}catch(v){g(v)}finally{l(n)}},d.reject=()=>{l(n),g()},t(v=>({parameterChanges:{...v.parameterChanges,[n]:d}}),!1,"getChanges")}),d},addSession:(n,i,o)=>{const l=n.id,{parameterStores:d,exportStores:p,getChanges:g}=e();if(d[l]||p[l])return;const b=Awt(n,()=>e().defaultExports[l]||[],E=>{t(S=>({defaultExportResponses:{...S.defaultExportResponses,[l]:E}}),!1,"setExportResponse")}),w=typeof i=="boolean"?()=>i:i;t(E=>({parameterStores:{...E.parameterStores,...d[l]?{}:{[l]:Object.keys(n.parameters).reduce((S,M)=>{const k=n.parameters[M],x=w(k);return S[M]=Zue(Xue(l,{definition:k,isValid:(C,P)=>k.isValid(C,P)},()=>g(l,b)),x,k.value),S},{})}},exportStores:{...E.exportStores,...p[l]?{}:{[l]:Object.keys(n.exports).reduce((S,M)=>(S[M]=wwt(n,M,o),S),{})}}}),!1,"addSession")},addGeneric:(n,i,o,l)=>{const{parameterStores:d,getChanges:p}=e();if(d[n])return;const g=typeof i=="boolean"?()=>i:i;t(v=>({parameterStores:{...v.parameterStores,...d[n]?{}:{[n]:(Array.isArray(o)?o:[o]).reduce((_,b)=>{const w=b.definition.id,E=g(b.definition);return _[w]=Zue(Xue(n,b,()=>p(n,l)),E),_},{})}}}),!1,"addGeneric")},removeSession:n=>{const{parameterStores:i,exportStores:o}=e();if(!i[n]&&!o[n])return;const l={};Object.keys(i).forEach(p=>{p!==n&&(l[p]=i[p])});const d={};Object.keys(o).forEach(p=>{p!==n&&(d[p]=o[p])}),t(()=>({parameterStores:l,exportStores:d}),!1,"removeSession")},getParameters:n=>e().parameterStores[n]||{},getParameter:(n,i)=>Object.values(e().getParameters(n)).find(o=>{const l=o.getState().definition;return l.id===i||l.name===i||l.displayname===i}),getExports:n=>e().exportStores[n]||{},getExport:(n,i)=>Object.values(e().getExports(n)).find(o=>{const l=o.getState().definition;return l.id===i||l.name===i||l.displayname===i}),registerDefaultExport:(n,i)=>{const o=Array.isArray(i)?i:[i];if(o.length===0)return;const{defaultExports:l}=e(),d=l[n],p=d?o.filter(v=>d.indexOf(v)<0):o,g=d?d.concat(p):o;t(v=>({defaultExports:{...v.defaultExports,[n]:g}}),!1,"registerDefaultExport")},deregisterDefaultExport:(n,i)=>{const{defaultExports:o,defaultExportResponses:l}=e(),d=Array.isArray(i)?i:[i];if(d.length===0)return;const p=o[n];if(!p)return;const g=p.filter(b=>d.indexOf(b)<0);if(g.length===p.length)return;const v=l[n]??{},_={};Object.keys(v).forEach(b=>{d.indexOf(b)<0&&(_[b]=v[b])}),t(b=>({defaultExports:{...b.defaultExports,[n]:g},defaultExportResponses:{...b.defaultExportResponses,[n]:_}}),!1,"deregisterDefaultExport")}}),{...PK,name:"ShapeDiver | Parameters"}));function Ewt(t){const{createSession:e,closeSession:n}=Uz(),{addSession:i,removeSession:o}=Dd(),[l,d]=de.useState(void 0),[p,g]=de.useState(void 0),v=de.useRef(Promise.resolve());return de.useEffect(()=>{if(!(t!=null&&t.id))return;const{registerParametersAndExports:_=!0,acceptRejectMode:b=!1}=t;return v.current=v.current.then(async()=>{const w=await e(t,{onError:g});d(w),_&&w&&i(w,b,t.jwtToken)}),()=>{v.current=v.current.then(async()=>{await n(t.id),_&&o(t.id)})}},[t==null?void 0:t.id]),{sessionApi:l,error:p}}function Swt(t,e){return{outputApi:Uz(i=>{const o=i.sessions[t];if(!o||!o.outputs)return;if(e in o.outputs)return o.outputs[e];const l=o.getOutputByName(e);return l.length>0?l[0]:void 0})}}function Twt(t,e){const{outputApi:n}=Swt(t,e),[i,o]=de.useState(n==null?void 0:n.content);return de.useEffect(()=>{const l=Xs.addListener(Xs.EVENTTYPE_OUTPUT.OUTPUT_UPDATED,d=>{d.outputId===(n==null?void 0:n.id)&&i!==(n==null?void 0:n.content)&&o(n==null?void 0:n.content)});return o(n==null?void 0:n.content),()=>{Xs.removeListener(l)}},[n]),{outputApi:n,outputContent:i}}const Que="AppBuilder";function xwt(t,e){var S;const n=(t==null?void 0:t.id)??"",{sessionApi:i,error:o}=Ewt(t?{...t,acceptRejectMode:!0}:void 0),l=!!i,{outputApi:d,outputContent:p}=Twt(n,Que),g=M=>{const k=pwt(M);return k.success?k.data:(console.debug("Invalid AppBuilder data",M),new Error(`Parsing AppBuilder data failed: ${k.error.message}`))},v=(S=p==null?void 0:p[0])==null?void 0:S.data,_=de.useMemo(()=>((M,k,x)=>{if(k&&x)return M&&console.debug("Overriding AppBuilder data from settings!"),g(k);if(M){if(typeof M=="string"){let C;try{C=JSON.parse(M)}catch(P){return new Error(`Parsing AppBuilder JSON data failed: ${(P==null?void 0:P.message)??"unknown error"}`)}return g(C)}return g(M)}})(v,e,l),[v,e,l]);de.useEffect(()=>console.debug(Que,_),[_]);const b=o??(_ instanceof Error?_:void 0),w=_ instanceof Error?void 0:_;return{sessionApi:i,sessionId:n,error:b,appBuilderData:w,hasAppBuilderOutput:!!d}}function Mwt(t,e){const n=e||(()=>!0);return Dd(o=>(Array.isArray(t)?t:[t]).flatMap(l=>Object.values(o.getParameters(l)).filter(d=>n(d.getState().definition)).map(d=>{const p=d.getState();return{sessionId:l,parameterId:p.definition.id,acceptRejectMode:p.acceptRejectMode}})))}function kwt(t,e){const n=e||(()=>!0);return Dd(o=>(Array.isArray(t)?t:[t]).flatMap(l=>Object.values(o.getExports(l)).filter(d=>n(d.getState().definition)).map(d=>({sessionId:l,exportId:d.getState().definition.id}))))}function Cwt(t){return t.type==="accordion"}function Pwt(t){return t.type==="text"}function Rwt(t){return t.type==="image"}function Dwt(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const Owt=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Iwt=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Nwt={};function Kue(t,e){return(Nwt.jsx?Iwt:Owt).test(t)}const Lwt=/[ \t\n\f\r]/g;function zwt(t){return typeof t=="object"?t.type==="text"?Jue(t.value):!1:Jue(t)}function Jue(t){return t.replace(Lwt,"")===""}class _M{constructor(e,n,i){this.property=e,this.normal=n,i&&(this.space=i)}}_M.prototype.property={};_M.prototype.normal={};_M.prototype.space=null;function tEe(t,e){const n={},i={};let o=-1;for(;++o<t.length;)Object.assign(n,t[o].property),Object.assign(i,t[o].normal);return new _M(n,i,e)}function JW(t){return t.toLowerCase()}class Uf{constructor(e,n){this.property=e,this.attribute=n}}Uf.prototype.space=null;Uf.prototype.boolean=!1;Uf.prototype.booleanish=!1;Uf.prototype.overloadedBoolean=!1;Uf.prototype.number=!1;Uf.prototype.commaSeparated=!1;Uf.prototype.spaceSeparated=!1;Uf.prototype.commaOrSpaceSeparated=!1;Uf.prototype.mustUseProperty=!1;Uf.prototype.defined=!1;let Bwt=0;const Fr=bv(),Vo=bv(),nEe=bv(),rn=bv(),Rs=bv(),Mb=bv(),mu=bv();function bv(){return 2**++Bwt}const eY=Object.freeze(Object.defineProperty({__proto__:null,boolean:Fr,booleanish:Vo,commaOrSpaceSeparated:mu,commaSeparated:Mb,number:rn,overloadedBoolean:nEe,spaceSeparated:Rs},Symbol.toStringTag,{value:"Module"})),qG=Object.keys(eY);class qK extends Uf{constructor(e,n,i,o){let l=-1;if(super(e,n),efe(this,"space",o),typeof i=="number")for(;++l<qG.length;){const d=qG[l];efe(this,qG[l],(i&eY[d])===eY[d])}}}qK.prototype.defined=!0;function efe(t,e,n){n&&(t[e]=n)}const Uwt={}.hasOwnProperty;function TA(t){const e={},n={};let i;for(i in t.properties)if(Uwt.call(t.properties,i)){const o=t.properties[i],l=new qK(i,t.transform(t.attributes||{},i),o,t.space);t.mustUseProperty&&t.mustUseProperty.includes(i)&&(l.mustUseProperty=!0),e[i]=l,n[JW(i)]=i,n[JW(l.attribute)]=i}return new _M(e,n,t.space)}const rEe=TA({space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),iEe=TA({space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function sEe(t,e){return e in t?t[e]:e}function oEe(t,e){return sEe(t,e.toLowerCase())}const aEe=TA({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:oEe,properties:{xmlns:null,xmlnsXLink:null}}),lEe=TA({transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Vo,ariaAutoComplete:null,ariaBusy:Vo,ariaChecked:Vo,ariaColCount:rn,ariaColIndex:rn,ariaColSpan:rn,ariaControls:Rs,ariaCurrent:null,ariaDescribedBy:Rs,ariaDetails:null,ariaDisabled:Vo,ariaDropEffect:Rs,ariaErrorMessage:null,ariaExpanded:Vo,ariaFlowTo:Rs,ariaGrabbed:Vo,ariaHasPopup:null,ariaHidden:Vo,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Rs,ariaLevel:rn,ariaLive:null,ariaModal:Vo,ariaMultiLine:Vo,ariaMultiSelectable:Vo,ariaOrientation:null,ariaOwns:Rs,ariaPlaceholder:null,ariaPosInSet:rn,ariaPressed:Vo,ariaReadOnly:Vo,ariaRelevant:null,ariaRequired:Vo,ariaRoleDescription:Rs,ariaRowCount:rn,ariaRowIndex:rn,ariaRowSpan:rn,ariaSelected:Vo,ariaSetSize:rn,ariaSort:null,ariaValueMax:rn,ariaValueMin:rn,ariaValueNow:rn,ariaValueText:null,role:null}}),Fwt=TA({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:oEe,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Mb,acceptCharset:Rs,accessKey:Rs,action:null,allow:null,allowFullScreen:Fr,allowPaymentRequest:Fr,allowUserMedia:Fr,alt:null,as:null,async:Fr,autoCapitalize:null,autoComplete:Rs,autoFocus:Fr,autoPlay:Fr,blocking:Rs,capture:null,charSet:null,checked:Fr,cite:null,className:Rs,cols:rn,colSpan:null,content:null,contentEditable:Vo,controls:Fr,controlsList:Rs,coords:rn|Mb,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Fr,defer:Fr,dir:null,dirName:null,disabled:Fr,download:nEe,draggable:Vo,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Fr,formTarget:null,headers:Rs,height:rn,hidden:Fr,high:rn,href:null,hrefLang:null,htmlFor:Rs,httpEquiv:Rs,id:null,imageSizes:null,imageSrcSet:null,inert:Fr,inputMode:null,integrity:null,is:null,isMap:Fr,itemId:null,itemProp:Rs,itemRef:Rs,itemScope:Fr,itemType:Rs,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Fr,low:rn,manifest:null,max:null,maxLength:rn,media:null,method:null,min:null,minLength:rn,multiple:Fr,muted:Fr,name:null,nonce:null,noModule:Fr,noValidate:Fr,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Fr,optimum:rn,pattern:null,ping:Rs,placeholder:null,playsInline:Fr,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Fr,referrerPolicy:null,rel:Rs,required:Fr,reversed:Fr,rows:rn,rowSpan:rn,sandbox:Rs,scope:null,scoped:Fr,seamless:Fr,selected:Fr,shadowRootClonable:Fr,shadowRootDelegatesFocus:Fr,shadowRootMode:null,shape:null,size:rn,sizes:null,slot:null,span:rn,spellCheck:Vo,src:null,srcDoc:null,srcLang:null,srcSet:null,start:rn,step:null,style:null,tabIndex:rn,target:null,title:null,translate:null,type:null,typeMustMatch:Fr,useMap:null,value:Vo,width:rn,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Rs,axis:null,background:null,bgColor:null,border:rn,borderColor:null,bottomMargin:rn,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Fr,declare:Fr,event:null,face:null,frame:null,frameBorder:null,hSpace:rn,leftMargin:rn,link:null,longDesc:null,lowSrc:null,marginHeight:rn,marginWidth:rn,noResize:Fr,noHref:Fr,noShade:Fr,noWrap:Fr,object:null,profile:null,prompt:null,rev:null,rightMargin:rn,rules:null,scheme:null,scrolling:Vo,standby:null,summary:null,text:null,topMargin:rn,valueType:null,version:null,vAlign:null,vLink:null,vSpace:rn,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Fr,disableRemotePlayback:Fr,prefix:null,property:null,results:rn,security:null,unselectable:null}}),Vwt=TA({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:sEe,properties:{about:mu,accentHeight:rn,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:rn,amplitude:rn,arabicForm:null,ascent:rn,attributeName:null,attributeType:null,azimuth:rn,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:rn,by:null,calcMode:null,capHeight:rn,className:Rs,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:rn,diffuseConstant:rn,direction:null,display:null,dur:null,divisor:rn,dominantBaseline:null,download:Fr,dx:null,dy:null,edgeMode:null,editable:null,elevation:rn,enableBackground:null,end:null,event:null,exponent:rn,externalResourcesRequired:null,fill:null,fillOpacity:rn,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Mb,g2:Mb,glyphName:Mb,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:rn,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:rn,horizOriginX:rn,horizOriginY:rn,id:null,ideographic:rn,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:rn,k:rn,k1:rn,k2:rn,k3:rn,k4:rn,kernelMatrix:mu,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:rn,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:rn,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:rn,overlineThickness:rn,paintOrder:null,panose1:null,path:null,pathLength:rn,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Rs,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:rn,pointsAtY:rn,pointsAtZ:rn,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:mu,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:mu,rev:mu,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:mu,requiredFeatures:mu,requiredFonts:mu,requiredFormats:mu,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:rn,specularExponent:rn,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:rn,strikethroughThickness:rn,string:null,stroke:null,strokeDashArray:mu,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:rn,strokeOpacity:rn,strokeWidth:null,style:null,surfaceScale:rn,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:mu,tabIndex:rn,tableValues:null,target:null,targetX:rn,targetY:rn,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:mu,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:rn,underlineThickness:rn,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:rn,values:null,vAlphabetic:rn,vMathematical:rn,vectorEffect:null,vHanging:rn,vIdeographic:rn,version:null,vertAdvY:rn,vertOriginX:rn,vertOriginY:rn,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:rn,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),Gwt=/^data[-\w.:]+$/i,tfe=/-[a-z]/g,jwt=/[A-Z]/g;function Hwt(t,e){const n=JW(e);let i=e,o=Uf;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Gwt.test(e)){if(e.charAt(4)==="-"){const l=e.slice(5).replace(tfe,Wwt);i="data"+l.charAt(0).toUpperCase()+l.slice(1)}else{const l=e.slice(4);if(!tfe.test(l)){let d=l.replace(jwt,$wt);d.charAt(0)!=="-"&&(d="-"+d),e="data"+d}}o=qK}return new o(i,e)}function $wt(t){return"-"+t.toLowerCase()}function Wwt(t){return t.charAt(1).toUpperCase()}const Ywt={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},qwt=tEe([iEe,rEe,aEe,lEe,Fwt],"html"),XK=tEe([iEe,rEe,aEe,lEe,Vwt],"svg");function Xwt(t){return t.join(" ").trim()}var cEe={},nfe=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,Zwt=/\n/g,Qwt=/^\s*/,Kwt=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Jwt=/^:\s*/,eEt=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,tEt=/^[;\s]*/,nEt=/^\s+|\s+$/g,rEt=`
`,rfe="/",ife="*",_g="",iEt="comment",sEt="declaration",oEt=function(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,i=1;function o(S){var M=S.match(Zwt);M&&(n+=M.length);var k=S.lastIndexOf(rEt);i=~k?S.length-k:i+S.length}function l(){var S={line:n,column:i};return function(M){return M.position=new d(S),v(),M}}function d(S){this.start=S,this.end={line:n,column:i},this.source=e.source}d.prototype.content=t;function p(S){var M=new Error(e.source+":"+n+":"+i+": "+S);if(M.reason=S,M.filename=e.source,M.line=n,M.column=i,M.source=t,!e.silent)throw M}function g(S){var M=S.exec(t);if(M){var k=M[0];return o(k),t=t.slice(k.length),M}}function v(){g(Qwt)}function _(S){var M;for(S=S||[];M=b();)M!==!1&&S.push(M);return S}function b(){var S=l();if(!(rfe!=t.charAt(0)||ife!=t.charAt(1))){for(var M=2;_g!=t.charAt(M)&&(ife!=t.charAt(M)||rfe!=t.charAt(M+1));)++M;if(M+=2,_g===t.charAt(M-1))return p("End of comment missing");var k=t.slice(2,M-2);return i+=2,o(k),t=t.slice(M),i+=2,S({type:iEt,comment:k})}}function w(){var S=l(),M=g(Kwt);if(M){if(b(),!g(Jwt))return p("property missing ':'");var k=g(eEt),x=S({type:sEt,property:sfe(M[0].replace(nfe,_g)),value:k?sfe(k[0].replace(nfe,_g)):_g});return g(tEt),x}}function E(){var S=[];_(S);for(var M;M=w();)M!==!1&&(S.push(M),_(S));return S}return v(),E()};function sfe(t){return t?t.replace(nEt,_g):_g}var aEt=X&&X.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(cEe,"__esModule",{value:!0});var lEt=aEt(oEt);function cEt(t,e){var n=null;if(!t||typeof t!="string")return n;var i=(0,lEt.default)(t),o=typeof e=="function";return i.forEach(function(l){if(l.type==="declaration"){var d=l.property,p=l.value;o?e(d,p,l):p&&(n=n||{},n[d]=p)}}),n}var ofe=cEe.default=cEt;const uEt=ofe.default||ofe,uEe=fEe("end"),ZK=fEe("start");function fEe(t){return e;function e(n){const i=n&&n.position&&n.position[t]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function fEt(t){const e=ZK(t),n=uEe(t);if(e&&n)return{start:e,end:n}}function tT(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?afe(t.position):"start"in t||"end"in t?afe(t):"line"in t||"column"in t?tY(t):""}function tY(t){return lfe(t&&t.line)+":"+lfe(t&&t.column)}function afe(t){return tY(t&&t.start)+"-"+tY(t&&t.end)}function lfe(t){return t&&typeof t=="number"?t:1}class Ol extends Error{constructor(e,n,i){super(),typeof n=="string"&&(i=n,n=void 0);let o="",l={},d=!1;if(n&&("line"in n&&"column"in n?l={place:n}:"start"in n&&"end"in n?l={place:n}:"type"in n?l={ancestors:[n],place:n.position}:l={...n}),typeof e=="string"?o=e:!l.cause&&e&&(d=!0,o=e.message,l.cause=e),!l.ruleId&&!l.source&&typeof i=="string"){const g=i.indexOf(":");g===-1?l.ruleId=i:(l.source=i.slice(0,g),l.ruleId=i.slice(g+1))}if(!l.place&&l.ancestors&&l.ancestors){const g=l.ancestors[l.ancestors.length-1];g&&(l.place=g.position)}const p=l.place&&"start"in l.place?l.place.start:l.place;this.ancestors=l.ancestors||void 0,this.cause=l.cause||void 0,this.column=p?p.column:void 0,this.fatal=void 0,this.file,this.message=o,this.line=p?p.line:void 0,this.name=tT(l.place)||"1:1",this.place=l.place||void 0,this.reason=this.message,this.ruleId=l.ruleId||void 0,this.source=l.source||void 0,this.stack=d&&l.cause&&typeof l.cause.stack=="string"?l.cause.stack:"",this.actual,this.expected,this.note,this.url}}Ol.prototype.file="";Ol.prototype.name="";Ol.prototype.reason="";Ol.prototype.message="";Ol.prototype.stack="";Ol.prototype.column=void 0;Ol.prototype.line=void 0;Ol.prototype.ancestors=void 0;Ol.prototype.cause=void 0;Ol.prototype.fatal=void 0;Ol.prototype.place=void 0;Ol.prototype.ruleId=void 0;Ol.prototype.source=void 0;const QK={}.hasOwnProperty,dEt=new Map,hEt=/[A-Z]/g,pEt=/-([a-z])/g,mEt=new Set(["table","tbody","thead","tfoot","tr"]),gEt=new Set(["td","th"]),dEe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function vEt(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let i;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=TEt(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=SEt(n,e.jsx,e.jsxs)}const o={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:i,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?XK:qwt,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},l=hEe(o,t,void 0);return l&&typeof l!="string"?l:o.create(t,o.Fragment,{children:l||void 0},void 0)}function hEe(t,e,n){if(e.type==="element")return _Et(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return yEt(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return AEt(t,e,n);if(e.type==="mdxjsEsm")return bEt(t,e);if(e.type==="root")return wEt(t,e,n);if(e.type==="text")return EEt(t,e)}function _Et(t,e,n){const i=t.schema;let o=i;e.tagName.toLowerCase()==="svg"&&i.space==="html"&&(o=XK,t.schema=o),t.ancestors.push(e);const l=mEe(t,e.tagName,!1),d=xEt(t,e);let p=JK(t,e);return mEt.has(e.tagName)&&(p=p.filter(function(g){return typeof g=="string"?!zwt(g):!0})),pEe(t,d,l,e),KK(d,p),t.ancestors.pop(),t.schema=i,t.create(e,l,d,n)}function yEt(t,e){if(e.data&&e.data.estree&&t.evaluater){const i=e.data.estree.body[0];return i.type,t.evaluater.evaluateExpression(i.expression)}o6(t,e.position)}function bEt(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);o6(t,e.position)}function AEt(t,e,n){const i=t.schema;let o=i;e.name==="svg"&&i.space==="html"&&(o=XK,t.schema=o),t.ancestors.push(e);const l=e.name===null?t.Fragment:mEe(t,e.name,!0),d=MEt(t,e),p=JK(t,e);return pEe(t,d,l,e),KK(d,p),t.ancestors.pop(),t.schema=i,t.create(e,l,d,n)}function wEt(t,e,n){const i={};return KK(i,JK(t,e)),t.create(e,t.Fragment,i,n)}function EEt(t,e){return e.value}function pEe(t,e,n,i){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=i)}function KK(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function SEt(t,e,n){return i;function i(o,l,d,p){const v=Array.isArray(d.children)?n:e;return p?v(l,d,p):v(l,d)}}function TEt(t,e){return n;function n(i,o,l,d){const p=Array.isArray(l.children),g=ZK(i);return e(o,l,d,p,{columnNumber:g?g.column-1:void 0,fileName:t,lineNumber:g?g.line:void 0},void 0)}}function xEt(t,e){const n={};let i,o;for(o in e.properties)if(o!=="children"&&QK.call(e.properties,o)){const l=kEt(t,o,e.properties[o]);if(l){const[d,p]=l;t.tableCellAlignToStyle&&d==="align"&&typeof p=="string"&&gEt.has(e.tagName)?i=p:n[d]=p}}if(i){const l=n.style||(n.style={});l[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return n}function MEt(t,e){const n={};for(const i of e.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&t.evaluater){const l=i.data.estree.body[0];l.type;const d=l.expression;d.type;const p=d.properties[0];p.type,Object.assign(n,t.evaluater.evaluateExpression(p.argument))}else o6(t,e.position);else{const o=i.name;let l;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&t.evaluater){const p=i.value.data.estree.body[0];p.type,l=t.evaluater.evaluateExpression(p.expression)}else o6(t,e.position);else l=i.value===null?!0:i.value;n[o]=l}return n}function JK(t,e){const n=[];let i=-1;const o=t.passKeys?new Map:dEt;for(;++i<e.children.length;){const l=e.children[i];let d;if(t.passKeys){const g=l.type==="element"?l.tagName:l.type==="mdxJsxFlowElement"||l.type==="mdxJsxTextElement"?l.name:void 0;if(g){const v=o.get(g)||0;d=g+"-"+v,o.set(g,v+1)}}const p=hEe(t,l,d);p!==void 0&&n.push(p)}return n}function kEt(t,e,n){const i=Hwt(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=i.commaSeparated?Dwt(n):Xwt(n)),i.property==="style"){let o=typeof n=="object"?n:CEt(t,String(n));return t.stylePropertyNameCase==="css"&&(o=PEt(o)),["style",o]}return[t.elementAttributeNameCase==="react"&&i.space?Ywt[i.property]||i.property:i.attribute,n]}}function CEt(t,e){const n={};try{uEt(e,i)}catch(o){if(!t.ignoreInvalidStyle){const l=o,d=new Ol("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:l,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw d.file=t.filePath||void 0,d.url=dEe+"#cannot-parse-style-attribute",d}}return n;function i(o,l){let d=o;d.slice(0,2)!=="--"&&(d.slice(0,4)==="-ms-"&&(d="ms-"+d.slice(4)),d=d.replace(pEt,DEt)),n[d]=l}}function mEe(t,e,n){let i;if(!n)i={type:"Literal",value:e};else if(e.includes(".")){const o=e.split(".");let l=-1,d;for(;++l<o.length;){const p=Kue(o[l])?{type:"Identifier",name:o[l]}:{type:"Literal",value:o[l]};d=d?{type:"MemberExpression",object:d,property:p,computed:!!(l&&p.type==="Literal"),optional:!1}:p}i=d}else i=Kue(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(i.type==="Literal"){const o=i.value;return QK.call(t.components,o)?t.components[o]:o}if(t.evaluater)return t.evaluater.evaluateExpression(i);o6(t)}function o6(t,e){const n=new Ol("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=dEe+"#cannot-handle-mdx-estrees-without-createevaluater",n}function PEt(t){const e={};let n;for(n in t)QK.call(t,n)&&(e[REt(n)]=t[n]);return e}function REt(t){let e=t.replace(hEt,OEt);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function DEt(t,e){return e.toUpperCase()}function OEt(t){return"-"+t.toLowerCase()}const XG={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},IEt={};function eJ(t,e){const n=IEt,i=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,o=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return gEe(t,i,o)}function gEe(t,e,n){if(NEt(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return cfe(t.children,e,n)}return Array.isArray(t)?cfe(t,e,n):""}function cfe(t,e,n){const i=[];let o=-1;for(;++o<t.length;)i[o]=gEe(t[o],e,n);return i.join("")}function NEt(t){return!!(t&&typeof t=="object")}const ufe=document.createElement("i");function a6(t){const e="&"+t+";";ufe.innerHTML=e;const n=ufe.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function Mf(t,e,n,i){const o=t.length;let l=0,d;if(e<0?e=-e>o?0:o+e:e=e>o?o:e,n=n>0?n:0,i.length<1e4)d=Array.from(i),d.unshift(e,n),t.splice(...d);else for(n&&t.splice(e,n);l<i.length;)d=i.slice(l,l+1e4),d.unshift(e,0),t.splice(...d),l+=1e4,e+=1e4}function hf(t,e){return t.length>0?(Mf(t,t.length,0,e),t):e}const ffe={}.hasOwnProperty;function vEe(t){const e={};let n=-1;for(;++n<t.length;)LEt(e,t[n]);return e}function LEt(t,e){let n;for(n in e){const o=(ffe.call(t,n)?t[n]:void 0)||(t[n]={}),l=e[n];let d;if(l)for(d in l){ffe.call(o,d)||(o[d]=[]);const p=l[d];zEt(o[d],Array.isArray(p)?p:p?[p]:[])}}}function zEt(t,e){let n=-1;const i=[];for(;++n<e.length;)(e[n].add==="after"?t:i).push(e[n]);Mf(t,0,0,i)}function _Ee(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function C0(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const $a=Vm(/[A-Za-z]/),wa=Vm(/[\dA-Za-z]/),BEt=Vm(/[#-'*+\--9=?A-Z^-~]/);function cI(t){return t!==null&&(t<32||t===127)}const nY=Vm(/\d/),UEt=Vm(/[\dA-Fa-f]/),FEt=Vm(/[!-/:-@[-`{-~]/);function Bn(t){return t!==null&&t<-2}function Ti(t){return t!==null&&(t<0||t===32)}function Zr(t){return t===-2||t===-1||t===32}const iB=Vm(new RegExp("\\p{P}|\\p{S}","u")),rv=Vm(/\s/);function Vm(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function xA(t){const e=[];let n=-1,i=0,o=0;for(;++n<t.length;){const l=t.charCodeAt(n);let d="";if(l===37&&wa(t.charCodeAt(n+1))&&wa(t.charCodeAt(n+2)))o=2;else if(l<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(l))||(d=String.fromCharCode(l));else if(l>55295&&l<57344){const p=t.charCodeAt(n+1);l<56320&&p>56319&&p<57344?(d=String.fromCharCode(l,p),o=1):d=""}else d=String.fromCharCode(l);d&&(e.push(t.slice(i,n),encodeURIComponent(d)),i=n+o+1,d=""),o&&(n+=o,o=0)}return e.join("")+t.slice(i)}function Hr(t,e,n,i){const o=i?i-1:Number.POSITIVE_INFINITY;let l=0;return d;function d(g){return Zr(g)?(t.enter(n),p(g)):e(g)}function p(g){return Zr(g)&&l++<o?(t.consume(g),p):(t.exit(n),e(g))}}const VEt={tokenize:GEt};function GEt(t){const e=t.attempt(this.parser.constructs.contentInitial,i,o);let n;return e;function i(p){if(p===null){t.consume(p);return}return t.enter("lineEnding"),t.consume(p),t.exit("lineEnding"),Hr(t,e,"linePrefix")}function o(p){return t.enter("paragraph"),l(p)}function l(p){const g=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=g),n=g,d(p)}function d(p){if(p===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(p);return}return Bn(p)?(t.consume(p),t.exit("chunkText"),l):(t.consume(p),d)}}const jEt={tokenize:HEt},dfe={tokenize:$Et};function HEt(t){const e=this,n=[];let i=0,o,l,d;return p;function p(P){if(i<n.length){const O=n[i];return e.containerState=O[1],t.attempt(O[0].continuation,g,v)(P)}return v(P)}function g(P){if(i++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,o&&C();const O=e.events.length;let L=O,B;for(;L--;)if(e.events[L][0]==="exit"&&e.events[L][1].type==="chunkFlow"){B=e.events[L][1].end;break}x(i);let V=O;for(;V<e.events.length;)e.events[V][1].end=Object.assign({},B),V++;return Mf(e.events,L+1,0,e.events.slice(O)),e.events.length=V,v(P)}return p(P)}function v(P){if(i===n.length){if(!o)return w(P);if(o.currentConstruct&&o.currentConstruct.concrete)return S(P);e.interrupt=!!(o.currentConstruct&&!o._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(dfe,_,b)(P)}function _(P){return o&&C(),x(i),w(P)}function b(P){return e.parser.lazy[e.now().line]=i!==n.length,d=e.now().offset,S(P)}function w(P){return e.containerState={},t.attempt(dfe,E,S)(P)}function E(P){return i++,n.push([e.currentConstruct,e.containerState]),w(P)}function S(P){if(P===null){o&&C(),x(0),t.consume(P);return}return o=o||e.parser.flow(e.now()),t.enter("chunkFlow",{contentType:"flow",previous:l,_tokenizer:o}),M(P)}function M(P){if(P===null){k(t.exit("chunkFlow"),!0),x(0),t.consume(P);return}return Bn(P)?(t.consume(P),k(t.exit("chunkFlow")),i=0,e.interrupt=void 0,p):(t.consume(P),M)}function k(P,O){const L=e.sliceStream(P);if(O&&L.push(null),P.previous=l,l&&(l.next=P),l=P,o.defineSkip(P.start),o.write(L),e.parser.lazy[P.start.line]){let B=o.events.length;for(;B--;)if(o.events[B][1].start.offset<d&&(!o.events[B][1].end||o.events[B][1].end.offset>d))return;const V=e.events.length;let G=V,j,F;for(;G--;)if(e.events[G][0]==="exit"&&e.events[G][1].type==="chunkFlow"){if(j){F=e.events[G][1].end;break}j=!0}for(x(i),B=V;B<e.events.length;)e.events[B][1].end=Object.assign({},F),B++;Mf(e.events,G+1,0,e.events.slice(V)),e.events.length=B}}function x(P){let O=n.length;for(;O-- >P;){const L=n[O];e.containerState=L[1],L[0].exit.call(e,t)}n.length=P}function C(){o.write([null]),l=void 0,o=void 0,e.containerState._closeFlow=void 0}}function $Et(t,e,n){return Hr(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function uI(t){if(t===null||Ti(t)||rv(t))return 1;if(iB(t))return 2}function sB(t,e,n){const i=[];let o=-1;for(;++o<t.length;){const l=t[o].resolveAll;l&&!i.includes(l)&&(e=l(e,n),i.push(l))}return e}const rY={name:"attention",tokenize:YEt,resolveAll:WEt};function WEt(t,e){let n=-1,i,o,l,d,p,g,v,_;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(i=n;i--;)if(t[i][0]==="exit"&&t[i][1].type==="attentionSequence"&&t[i][1]._open&&e.sliceSerialize(t[i][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[i][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[i][1].end.offset-t[i][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;g=t[i][1].end.offset-t[i][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const b=Object.assign({},t[i][1].end),w=Object.assign({},t[n][1].start);hfe(b,-g),hfe(w,g),d={type:g>1?"strongSequence":"emphasisSequence",start:b,end:Object.assign({},t[i][1].end)},p={type:g>1?"strongSequence":"emphasisSequence",start:Object.assign({},t[n][1].start),end:w},l={type:g>1?"strongText":"emphasisText",start:Object.assign({},t[i][1].end),end:Object.assign({},t[n][1].start)},o={type:g>1?"strong":"emphasis",start:Object.assign({},d.start),end:Object.assign({},p.end)},t[i][1].end=Object.assign({},d.start),t[n][1].start=Object.assign({},p.end),v=[],t[i][1].end.offset-t[i][1].start.offset&&(v=hf(v,[["enter",t[i][1],e],["exit",t[i][1],e]])),v=hf(v,[["enter",o,e],["enter",d,e],["exit",d,e],["enter",l,e]]),v=hf(v,sB(e.parser.constructs.insideSpan.null,t.slice(i+1,n),e)),v=hf(v,[["exit",l,e],["enter",p,e],["exit",p,e],["exit",o,e]]),t[n][1].end.offset-t[n][1].start.offset?(_=2,v=hf(v,[["enter",t[n][1],e],["exit",t[n][1],e]])):_=0,Mf(t,i-1,n-i+3,v),n=i+v.length-_-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function YEt(t,e){const n=this.parser.constructs.attentionMarkers.null,i=this.previous,o=uI(i);let l;return d;function d(g){return l=g,t.enter("attentionSequence"),p(g)}function p(g){if(g===l)return t.consume(g),p;const v=t.exit("attentionSequence"),_=uI(g),b=!_||_===2&&o||n.includes(g),w=!o||o===2&&_||n.includes(i);return v._open=!!(l===42?b:b&&(o||!w)),v._close=!!(l===42?w:w&&(_||!b)),e(g)}}function hfe(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const qEt={name:"autolink",tokenize:XEt};function XEt(t,e,n){let i=0;return o;function o(E){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(E),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),l}function l(E){return $a(E)?(t.consume(E),d):E===64?n(E):v(E)}function d(E){return E===43||E===45||E===46||wa(E)?(i=1,p(E)):v(E)}function p(E){return E===58?(t.consume(E),i=0,g):(E===43||E===45||E===46||wa(E))&&i++<32?(t.consume(E),p):(i=0,v(E))}function g(E){return E===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(E),t.exit("autolinkMarker"),t.exit("autolink"),e):E===null||E===32||E===60||cI(E)?n(E):(t.consume(E),g)}function v(E){return E===64?(t.consume(E),_):BEt(E)?(t.consume(E),v):n(E)}function _(E){return wa(E)?b(E):n(E)}function b(E){return E===46?(t.consume(E),i=0,_):E===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(E),t.exit("autolinkMarker"),t.exit("autolink"),e):w(E)}function w(E){if((E===45||wa(E))&&i++<63){const S=E===45?w:b;return t.consume(E),S}return n(E)}}const yM={tokenize:ZEt,partial:!0};function ZEt(t,e,n){return i;function i(l){return Zr(l)?Hr(t,o,"linePrefix")(l):o(l)}function o(l){return l===null||Bn(l)?e(l):n(l)}}const yEe={name:"blockQuote",tokenize:QEt,continuation:{tokenize:KEt},exit:JEt};function QEt(t,e,n){const i=this;return o;function o(d){if(d===62){const p=i.containerState;return p.open||(t.enter("blockQuote",{_container:!0}),p.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(d),t.exit("blockQuoteMarker"),l}return n(d)}function l(d){return Zr(d)?(t.enter("blockQuotePrefixWhitespace"),t.consume(d),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(d))}}function KEt(t,e,n){const i=this;return o;function o(d){return Zr(d)?Hr(t,l,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(d):l(d)}function l(d){return t.attempt(yEe,e,n)(d)}}function JEt(t){t.exit("blockQuote")}const bEe={name:"characterEscape",tokenize:eSt};function eSt(t,e,n){return i;function i(l){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(l),t.exit("escapeMarker"),o}function o(l){return FEt(l)?(t.enter("characterEscapeValue"),t.consume(l),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(l)}}const AEe={name:"characterReference",tokenize:tSt};function tSt(t,e,n){const i=this;let o=0,l,d;return p;function p(b){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(b),t.exit("characterReferenceMarker"),g}function g(b){return b===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(b),t.exit("characterReferenceMarkerNumeric"),v):(t.enter("characterReferenceValue"),l=31,d=wa,_(b))}function v(b){return b===88||b===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(b),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),l=6,d=UEt,_):(t.enter("characterReferenceValue"),l=7,d=nY,_(b))}function _(b){if(b===59&&o){const w=t.exit("characterReferenceValue");return d===wa&&!a6(i.sliceSerialize(w))?n(b):(t.enter("characterReferenceMarker"),t.consume(b),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return d(b)&&o++<l?(t.consume(b),_):n(b)}}const pfe={tokenize:rSt,partial:!0},mfe={name:"codeFenced",tokenize:nSt,concrete:!0};function nSt(t,e,n){const i=this,o={tokenize:L,partial:!0};let l=0,d=0,p;return g;function g(B){return v(B)}function v(B){const V=i.events[i.events.length-1];return l=V&&V[1].type==="linePrefix"?V[2].sliceSerialize(V[1],!0).length:0,p=B,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),_(B)}function _(B){return B===p?(d++,t.consume(B),_):d<3?n(B):(t.exit("codeFencedFenceSequence"),Zr(B)?Hr(t,b,"whitespace")(B):b(B))}function b(B){return B===null||Bn(B)?(t.exit("codeFencedFence"),i.interrupt?e(B):t.check(pfe,M,O)(B)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),w(B))}function w(B){return B===null||Bn(B)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),b(B)):Zr(B)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Hr(t,E,"whitespace")(B)):B===96&&B===p?n(B):(t.consume(B),w)}function E(B){return B===null||Bn(B)?b(B):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),S(B))}function S(B){return B===null||Bn(B)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),b(B)):B===96&&B===p?n(B):(t.consume(B),S)}function M(B){return t.attempt(o,O,k)(B)}function k(B){return t.enter("lineEnding"),t.consume(B),t.exit("lineEnding"),x}function x(B){return l>0&&Zr(B)?Hr(t,C,"linePrefix",l+1)(B):C(B)}function C(B){return B===null||Bn(B)?t.check(pfe,M,O)(B):(t.enter("codeFlowValue"),P(B))}function P(B){return B===null||Bn(B)?(t.exit("codeFlowValue"),C(B)):(t.consume(B),P)}function O(B){return t.exit("codeFenced"),e(B)}function L(B,V,G){let j=0;return F;function F(le){return B.enter("lineEnding"),B.consume(le),B.exit("lineEnding"),q}function q(le){return B.enter("codeFencedFence"),Zr(le)?Hr(B,fe,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(le):fe(le)}function fe(le){return le===p?(B.enter("codeFencedFenceSequence"),ue(le)):G(le)}function ue(le){return le===p?(j++,B.consume(le),ue):j>=d?(B.exit("codeFencedFenceSequence"),Zr(le)?Hr(B,J,"whitespace")(le):J(le)):G(le)}function J(le){return le===null||Bn(le)?(B.exit("codeFencedFence"),V(le)):G(le)}}}function rSt(t,e,n){const i=this;return o;function o(d){return d===null?n(d):(t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),l)}function l(d){return i.parser.lazy[i.now().line]?n(d):e(d)}}const ZG={name:"codeIndented",tokenize:sSt},iSt={tokenize:oSt,partial:!0};function sSt(t,e,n){const i=this;return o;function o(v){return t.enter("codeIndented"),Hr(t,l,"linePrefix",5)(v)}function l(v){const _=i.events[i.events.length-1];return _&&_[1].type==="linePrefix"&&_[2].sliceSerialize(_[1],!0).length>=4?d(v):n(v)}function d(v){return v===null?g(v):Bn(v)?t.attempt(iSt,d,g)(v):(t.enter("codeFlowValue"),p(v))}function p(v){return v===null||Bn(v)?(t.exit("codeFlowValue"),d(v)):(t.consume(v),p)}function g(v){return t.exit("codeIndented"),e(v)}}function oSt(t,e,n){const i=this;return o;function o(d){return i.parser.lazy[i.now().line]?n(d):Bn(d)?(t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),o):Hr(t,l,"linePrefix",5)(d)}function l(d){const p=i.events[i.events.length-1];return p&&p[1].type==="linePrefix"&&p[2].sliceSerialize(p[1],!0).length>=4?e(d):Bn(d)?o(d):n(d)}}const aSt={name:"codeText",tokenize:uSt,resolve:lSt,previous:cSt};function lSt(t){let e=t.length-4,n=3,i,o;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(i=n;++i<e;)if(t[i][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(i=n-1,e++;++i<=e;)o===void 0?i!==e&&t[i][1].type!=="lineEnding"&&(o=i):(i===e||t[i][1].type==="lineEnding")&&(t[o][1].type="codeTextData",i!==o+2&&(t[o][1].end=t[i-1][1].end,t.splice(o+2,i-o-2),e-=i-o-2,i=o+2),o=void 0);return t}function cSt(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function uSt(t,e,n){let i=0,o,l;return d;function d(b){return t.enter("codeText"),t.enter("codeTextSequence"),p(b)}function p(b){return b===96?(t.consume(b),i++,p):(t.exit("codeTextSequence"),g(b))}function g(b){return b===null?n(b):b===32?(t.enter("space"),t.consume(b),t.exit("space"),g):b===96?(l=t.enter("codeTextSequence"),o=0,_(b)):Bn(b)?(t.enter("lineEnding"),t.consume(b),t.exit("lineEnding"),g):(t.enter("codeTextData"),v(b))}function v(b){return b===null||b===32||b===96||Bn(b)?(t.exit("codeTextData"),g(b)):(t.consume(b),v)}function _(b){return b===96?(t.consume(b),o++,_):o===i?(t.exit("codeTextSequence"),t.exit("codeText"),e(b)):(l.type="codeTextData",v(b))}}class fSt{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const i=n??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(e,i):e>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(e,n,i){const o=n||0;this.setCursor(Math.trunc(e));const l=this.right.splice(this.right.length-o,Number.POSITIVE_INFINITY);return i&&bw(this.left,i),l.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),bw(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),bw(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);bw(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);bw(this.left,n.reverse())}}}function bw(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function wEe(t){const e={};let n=-1,i,o,l,d,p,g,v;const _=new fSt(t);for(;++n<_.length;){for(;n in e;)n=e[n];if(i=_.get(n),n&&i[1].type==="chunkFlow"&&_.get(n-1)[1].type==="listItemPrefix"&&(g=i[1]._tokenizer.events,l=0,l<g.length&&g[l][1].type==="lineEndingBlank"&&(l+=2),l<g.length&&g[l][1].type==="content"))for(;++l<g.length&&g[l][1].type!=="content";)g[l][1].type==="chunkText"&&(g[l][1]._isInFirstContentOfListItem=!0,l++);if(i[0]==="enter")i[1].contentType&&(Object.assign(e,dSt(_,n)),n=e[n],v=!0);else if(i[1]._container){for(l=n,o=void 0;l--&&(d=_.get(l),d[1].type==="lineEnding"||d[1].type==="lineEndingBlank");)d[0]==="enter"&&(o&&(_.get(o)[1].type="lineEndingBlank"),d[1].type="lineEnding",o=l);o&&(i[1].end=Object.assign({},_.get(o)[1].start),p=_.slice(o,n),p.unshift(i),_.splice(o,n-o+1,p))}}return Mf(t,0,Number.POSITIVE_INFINITY,_.slice(0)),!v}function dSt(t,e){const n=t.get(e)[1],i=t.get(e)[2];let o=e-1;const l=[],d=n._tokenizer||i.parser[n.contentType](n.start),p=d.events,g=[],v={};let _,b,w=-1,E=n,S=0,M=0;const k=[M];for(;E;){for(;t.get(++o)[1]!==E;);l.push(o),E._tokenizer||(_=i.sliceStream(E),E.next||_.push(null),b&&d.defineSkip(E.start),E._isInFirstContentOfListItem&&(d._gfmTasklistFirstContentOfListItem=!0),d.write(_),E._isInFirstContentOfListItem&&(d._gfmTasklistFirstContentOfListItem=void 0)),b=E,E=E.next}for(E=n;++w<p.length;)p[w][0]==="exit"&&p[w-1][0]==="enter"&&p[w][1].type===p[w-1][1].type&&p[w][1].start.line!==p[w][1].end.line&&(M=w+1,k.push(M),E._tokenizer=void 0,E.previous=void 0,E=E.next);for(d.events=[],E?(E._tokenizer=void 0,E.previous=void 0):k.pop(),w=k.length;w--;){const x=p.slice(k[w],k[w+1]),C=l.pop();g.push([C,C+x.length-1]),t.splice(C,2,x)}for(g.reverse(),w=-1;++w<g.length;)v[S+g[w][0]]=S+g[w][1],S+=g[w][1]-g[w][0]-1;return v}const hSt={tokenize:gSt,resolve:mSt},pSt={tokenize:vSt,partial:!0};function mSt(t){return wEe(t),t}function gSt(t,e){let n;return i;function i(p){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),o(p)}function o(p){return p===null?l(p):Bn(p)?t.check(pSt,d,l)(p):(t.consume(p),o)}function l(p){return t.exit("chunkContent"),t.exit("content"),e(p)}function d(p){return t.consume(p),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,o}}function vSt(t,e,n){const i=this;return o;function o(d){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),Hr(t,l,"linePrefix")}function l(d){if(d===null||Bn(d))return n(d);const p=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&p&&p[1].type==="linePrefix"&&p[2].sliceSerialize(p[1],!0).length>=4?e(d):t.interrupt(i.parser.constructs.flow,n,e)(d)}}function EEe(t,e,n,i,o,l,d,p,g){const v=g||Number.POSITIVE_INFINITY;let _=0;return b;function b(x){return x===60?(t.enter(i),t.enter(o),t.enter(l),t.consume(x),t.exit(l),w):x===null||x===32||x===41||cI(x)?n(x):(t.enter(i),t.enter(d),t.enter(p),t.enter("chunkString",{contentType:"string"}),M(x))}function w(x){return x===62?(t.enter(l),t.consume(x),t.exit(l),t.exit(o),t.exit(i),e):(t.enter(p),t.enter("chunkString",{contentType:"string"}),E(x))}function E(x){return x===62?(t.exit("chunkString"),t.exit(p),w(x)):x===null||x===60||Bn(x)?n(x):(t.consume(x),x===92?S:E)}function S(x){return x===60||x===62||x===92?(t.consume(x),E):E(x)}function M(x){return!_&&(x===null||x===41||Ti(x))?(t.exit("chunkString"),t.exit(p),t.exit(d),t.exit(i),e(x)):_<v&&x===40?(t.consume(x),_++,M):x===41?(t.consume(x),_--,M):x===null||x===32||x===40||cI(x)?n(x):(t.consume(x),x===92?k:M)}function k(x){return x===40||x===41||x===92?(t.consume(x),M):M(x)}}function SEe(t,e,n,i,o,l){const d=this;let p=0,g;return v;function v(E){return t.enter(i),t.enter(o),t.consume(E),t.exit(o),t.enter(l),_}function _(E){return p>999||E===null||E===91||E===93&&!g||E===94&&!p&&"_hiddenFootnoteSupport"in d.parser.constructs?n(E):E===93?(t.exit(l),t.enter(o),t.consume(E),t.exit(o),t.exit(i),e):Bn(E)?(t.enter("lineEnding"),t.consume(E),t.exit("lineEnding"),_):(t.enter("chunkString",{contentType:"string"}),b(E))}function b(E){return E===null||E===91||E===93||Bn(E)||p++>999?(t.exit("chunkString"),_(E)):(t.consume(E),g||(g=!Zr(E)),E===92?w:b)}function w(E){return E===91||E===92||E===93?(t.consume(E),p++,b):b(E)}}function TEe(t,e,n,i,o,l){let d;return p;function p(w){return w===34||w===39||w===40?(t.enter(i),t.enter(o),t.consume(w),t.exit(o),d=w===40?41:w,g):n(w)}function g(w){return w===d?(t.enter(o),t.consume(w),t.exit(o),t.exit(i),e):(t.enter(l),v(w))}function v(w){return w===d?(t.exit(l),g(d)):w===null?n(w):Bn(w)?(t.enter("lineEnding"),t.consume(w),t.exit("lineEnding"),Hr(t,v,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),_(w))}function _(w){return w===d||w===null||Bn(w)?(t.exit("chunkString"),v(w)):(t.consume(w),w===92?b:_)}function b(w){return w===d||w===92?(t.consume(w),_):_(w)}}function Wh(t,e){let n;return i;function i(o){return Bn(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),n=!0,i):Zr(o)?Hr(t,i,n?"linePrefix":"lineSuffix")(o):e(o)}}const _St={name:"definition",tokenize:bSt},ySt={tokenize:ASt,partial:!0};function bSt(t,e,n){const i=this;let o;return l;function l(E){return t.enter("definition"),d(E)}function d(E){return SEe.call(i,t,p,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(E)}function p(E){return o=C0(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),E===58?(t.enter("definitionMarker"),t.consume(E),t.exit("definitionMarker"),g):n(E)}function g(E){return Ti(E)?Wh(t,v)(E):v(E)}function v(E){return EEe(t,_,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(E)}function _(E){return t.attempt(ySt,b,b)(E)}function b(E){return Zr(E)?Hr(t,w,"whitespace")(E):w(E)}function w(E){return E===null||Bn(E)?(t.exit("definition"),i.parser.defined.push(o),e(E)):n(E)}}function ASt(t,e,n){return i;function i(p){return Ti(p)?Wh(t,o)(p):n(p)}function o(p){return TEe(t,l,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(p)}function l(p){return Zr(p)?Hr(t,d,"whitespace")(p):d(p)}function d(p){return p===null||Bn(p)?e(p):n(p)}}const wSt={name:"hardBreakEscape",tokenize:ESt};function ESt(t,e,n){return i;function i(l){return t.enter("hardBreakEscape"),t.consume(l),o}function o(l){return Bn(l)?(t.exit("hardBreakEscape"),e(l)):n(l)}}const SSt={name:"headingAtx",tokenize:xSt,resolve:TSt};function TSt(t,e){let n=t.length-2,i=3,o,l;return t[i][1].type==="whitespace"&&(i+=2),n-2>i&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(i===n-1||n-4>i&&t[n-2][1].type==="whitespace")&&(n-=i+1===n?2:4),n>i&&(o={type:"atxHeadingText",start:t[i][1].start,end:t[n][1].end},l={type:"chunkText",start:t[i][1].start,end:t[n][1].end,contentType:"text"},Mf(t,i,n-i+1,[["enter",o,e],["enter",l,e],["exit",l,e],["exit",o,e]])),t}function xSt(t,e,n){let i=0;return o;function o(_){return t.enter("atxHeading"),l(_)}function l(_){return t.enter("atxHeadingSequence"),d(_)}function d(_){return _===35&&i++<6?(t.consume(_),d):_===null||Ti(_)?(t.exit("atxHeadingSequence"),p(_)):n(_)}function p(_){return _===35?(t.enter("atxHeadingSequence"),g(_)):_===null||Bn(_)?(t.exit("atxHeading"),e(_)):Zr(_)?Hr(t,p,"whitespace")(_):(t.enter("atxHeadingText"),v(_))}function g(_){return _===35?(t.consume(_),g):(t.exit("atxHeadingSequence"),p(_))}function v(_){return _===null||_===35||Ti(_)?(t.exit("atxHeadingText"),p(_)):(t.consume(_),v)}}const MSt=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],gfe=["pre","script","style","textarea"],kSt={name:"htmlFlow",tokenize:DSt,resolveTo:RSt,concrete:!0},CSt={tokenize:ISt,partial:!0},PSt={tokenize:OSt,partial:!0};function RSt(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function DSt(t,e,n){const i=this;let o,l,d,p,g;return v;function v(Se){return _(Se)}function _(Se){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(Se),b}function b(Se){return Se===33?(t.consume(Se),w):Se===47?(t.consume(Se),l=!0,M):Se===63?(t.consume(Se),o=3,i.interrupt?e:oe):$a(Se)?(t.consume(Se),d=String.fromCharCode(Se),k):n(Se)}function w(Se){return Se===45?(t.consume(Se),o=2,E):Se===91?(t.consume(Se),o=5,p=0,S):$a(Se)?(t.consume(Se),o=4,i.interrupt?e:oe):n(Se)}function E(Se){return Se===45?(t.consume(Se),i.interrupt?e:oe):n(Se)}function S(Se){const Oe="CDATA[";return Se===Oe.charCodeAt(p++)?(t.consume(Se),p===Oe.length?i.interrupt?e:fe:S):n(Se)}function M(Se){return $a(Se)?(t.consume(Se),d=String.fromCharCode(Se),k):n(Se)}function k(Se){if(Se===null||Se===47||Se===62||Ti(Se)){const Oe=Se===47,ct=d.toLowerCase();return!Oe&&!l&&gfe.includes(ct)?(o=1,i.interrupt?e(Se):fe(Se)):MSt.includes(d.toLowerCase())?(o=6,Oe?(t.consume(Se),x):i.interrupt?e(Se):fe(Se)):(o=7,i.interrupt&&!i.parser.lazy[i.now().line]?n(Se):l?C(Se):P(Se))}return Se===45||wa(Se)?(t.consume(Se),d+=String.fromCharCode(Se),k):n(Se)}function x(Se){return Se===62?(t.consume(Se),i.interrupt?e:fe):n(Se)}function C(Se){return Zr(Se)?(t.consume(Se),C):F(Se)}function P(Se){return Se===47?(t.consume(Se),F):Se===58||Se===95||$a(Se)?(t.consume(Se),O):Zr(Se)?(t.consume(Se),P):F(Se)}function O(Se){return Se===45||Se===46||Se===58||Se===95||wa(Se)?(t.consume(Se),O):L(Se)}function L(Se){return Se===61?(t.consume(Se),B):Zr(Se)?(t.consume(Se),L):P(Se)}function B(Se){return Se===null||Se===60||Se===61||Se===62||Se===96?n(Se):Se===34||Se===39?(t.consume(Se),g=Se,V):Zr(Se)?(t.consume(Se),B):G(Se)}function V(Se){return Se===g?(t.consume(Se),g=null,j):Se===null||Bn(Se)?n(Se):(t.consume(Se),V)}function G(Se){return Se===null||Se===34||Se===39||Se===47||Se===60||Se===61||Se===62||Se===96||Ti(Se)?L(Se):(t.consume(Se),G)}function j(Se){return Se===47||Se===62||Zr(Se)?P(Se):n(Se)}function F(Se){return Se===62?(t.consume(Se),q):n(Se)}function q(Se){return Se===null||Bn(Se)?fe(Se):Zr(Se)?(t.consume(Se),q):n(Se)}function fe(Se){return Se===45&&o===2?(t.consume(Se),me):Se===60&&o===1?(t.consume(Se),be):Se===62&&o===4?(t.consume(Se),Ce):Se===63&&o===3?(t.consume(Se),oe):Se===93&&o===5?(t.consume(Se),pe):Bn(Se)&&(o===6||o===7)?(t.exit("htmlFlowData"),t.check(CSt,it,ue)(Se)):Se===null||Bn(Se)?(t.exit("htmlFlowData"),ue(Se)):(t.consume(Se),fe)}function ue(Se){return t.check(PSt,J,it)(Se)}function J(Se){return t.enter("lineEnding"),t.consume(Se),t.exit("lineEnding"),le}function le(Se){return Se===null||Bn(Se)?ue(Se):(t.enter("htmlFlowData"),fe(Se))}function me(Se){return Se===45?(t.consume(Se),oe):fe(Se)}function be(Se){return Se===47?(t.consume(Se),d="",ye):fe(Se)}function ye(Se){if(Se===62){const Oe=d.toLowerCase();return gfe.includes(Oe)?(t.consume(Se),Ce):fe(Se)}return $a(Se)&&d.length<8?(t.consume(Se),d+=String.fromCharCode(Se),ye):fe(Se)}function pe(Se){return Se===93?(t.consume(Se),oe):fe(Se)}function oe(Se){return Se===62?(t.consume(Se),Ce):Se===45&&o===2?(t.consume(Se),oe):fe(Se)}function Ce(Se){return Se===null||Bn(Se)?(t.exit("htmlFlowData"),it(Se)):(t.consume(Se),Ce)}function it(Se){return t.exit("htmlFlow"),e(Se)}}function OSt(t,e,n){const i=this;return o;function o(d){return Bn(d)?(t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),l):n(d)}function l(d){return i.parser.lazy[i.now().line]?n(d):e(d)}}function ISt(t,e,n){return i;function i(o){return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),t.attempt(yM,e,n)}}const NSt={name:"htmlText",tokenize:LSt};function LSt(t,e,n){const i=this;let o,l,d;return p;function p(oe){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(oe),g}function g(oe){return oe===33?(t.consume(oe),v):oe===47?(t.consume(oe),L):oe===63?(t.consume(oe),P):$a(oe)?(t.consume(oe),G):n(oe)}function v(oe){return oe===45?(t.consume(oe),_):oe===91?(t.consume(oe),l=0,S):$a(oe)?(t.consume(oe),C):n(oe)}function _(oe){return oe===45?(t.consume(oe),E):n(oe)}function b(oe){return oe===null?n(oe):oe===45?(t.consume(oe),w):Bn(oe)?(d=b,be(oe)):(t.consume(oe),b)}function w(oe){return oe===45?(t.consume(oe),E):b(oe)}function E(oe){return oe===62?me(oe):oe===45?w(oe):b(oe)}function S(oe){const Ce="CDATA[";return oe===Ce.charCodeAt(l++)?(t.consume(oe),l===Ce.length?M:S):n(oe)}function M(oe){return oe===null?n(oe):oe===93?(t.consume(oe),k):Bn(oe)?(d=M,be(oe)):(t.consume(oe),M)}function k(oe){return oe===93?(t.consume(oe),x):M(oe)}function x(oe){return oe===62?me(oe):oe===93?(t.consume(oe),x):M(oe)}function C(oe){return oe===null||oe===62?me(oe):Bn(oe)?(d=C,be(oe)):(t.consume(oe),C)}function P(oe){return oe===null?n(oe):oe===63?(t.consume(oe),O):Bn(oe)?(d=P,be(oe)):(t.consume(oe),P)}function O(oe){return oe===62?me(oe):P(oe)}function L(oe){return $a(oe)?(t.consume(oe),B):n(oe)}function B(oe){return oe===45||wa(oe)?(t.consume(oe),B):V(oe)}function V(oe){return Bn(oe)?(d=V,be(oe)):Zr(oe)?(t.consume(oe),V):me(oe)}function G(oe){return oe===45||wa(oe)?(t.consume(oe),G):oe===47||oe===62||Ti(oe)?j(oe):n(oe)}function j(oe){return oe===47?(t.consume(oe),me):oe===58||oe===95||$a(oe)?(t.consume(oe),F):Bn(oe)?(d=j,be(oe)):Zr(oe)?(t.consume(oe),j):me(oe)}function F(oe){return oe===45||oe===46||oe===58||oe===95||wa(oe)?(t.consume(oe),F):q(oe)}function q(oe){return oe===61?(t.consume(oe),fe):Bn(oe)?(d=q,be(oe)):Zr(oe)?(t.consume(oe),q):j(oe)}function fe(oe){return oe===null||oe===60||oe===61||oe===62||oe===96?n(oe):oe===34||oe===39?(t.consume(oe),o=oe,ue):Bn(oe)?(d=fe,be(oe)):Zr(oe)?(t.consume(oe),fe):(t.consume(oe),J)}function ue(oe){return oe===o?(t.consume(oe),o=void 0,le):oe===null?n(oe):Bn(oe)?(d=ue,be(oe)):(t.consume(oe),ue)}function J(oe){return oe===null||oe===34||oe===39||oe===60||oe===61||oe===96?n(oe):oe===47||oe===62||Ti(oe)?j(oe):(t.consume(oe),J)}function le(oe){return oe===47||oe===62||Ti(oe)?j(oe):n(oe)}function me(oe){return oe===62?(t.consume(oe),t.exit("htmlTextData"),t.exit("htmlText"),e):n(oe)}function be(oe){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(oe),t.exit("lineEnding"),ye}function ye(oe){return Zr(oe)?Hr(t,pe,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(oe):pe(oe)}function pe(oe){return t.enter("htmlTextData"),d(oe)}}const tJ={name:"labelEnd",tokenize:GSt,resolveTo:VSt,resolveAll:FSt},zSt={tokenize:jSt},BSt={tokenize:HSt},USt={tokenize:$St};function FSt(t){let e=-1;for(;++e<t.length;){const n=t[e][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(t.splice(e+1,n.type==="labelImage"?4:2),n.type="data",e++)}return t}function VSt(t,e){let n=t.length,i=0,o,l,d,p;for(;n--;)if(o=t[n][1],l){if(o.type==="link"||o.type==="labelLink"&&o._inactive)break;t[n][0]==="enter"&&o.type==="labelLink"&&(o._inactive=!0)}else if(d){if(t[n][0]==="enter"&&(o.type==="labelImage"||o.type==="labelLink")&&!o._balanced&&(l=n,o.type!=="labelLink")){i=2;break}}else o.type==="labelEnd"&&(d=n);const g={type:t[l][1].type==="labelLink"?"link":"image",start:Object.assign({},t[l][1].start),end:Object.assign({},t[t.length-1][1].end)},v={type:"label",start:Object.assign({},t[l][1].start),end:Object.assign({},t[d][1].end)},_={type:"labelText",start:Object.assign({},t[l+i+2][1].end),end:Object.assign({},t[d-2][1].start)};return p=[["enter",g,e],["enter",v,e]],p=hf(p,t.slice(l+1,l+i+3)),p=hf(p,[["enter",_,e]]),p=hf(p,sB(e.parser.constructs.insideSpan.null,t.slice(l+i+4,d-3),e)),p=hf(p,[["exit",_,e],t[d-2],t[d-1],["exit",v,e]]),p=hf(p,t.slice(d+1)),p=hf(p,[["exit",g,e]]),Mf(t,l,t.length,p),t}function GSt(t,e,n){const i=this;let o=i.events.length,l,d;for(;o--;)if((i.events[o][1].type==="labelImage"||i.events[o][1].type==="labelLink")&&!i.events[o][1]._balanced){l=i.events[o][1];break}return p;function p(w){return l?l._inactive?b(w):(d=i.parser.defined.includes(C0(i.sliceSerialize({start:l.end,end:i.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(w),t.exit("labelMarker"),t.exit("labelEnd"),g):n(w)}function g(w){return w===40?t.attempt(zSt,_,d?_:b)(w):w===91?t.attempt(BSt,_,d?v:b)(w):d?_(w):b(w)}function v(w){return t.attempt(USt,_,b)(w)}function _(w){return e(w)}function b(w){return l._balanced=!0,n(w)}}function jSt(t,e,n){return i;function i(b){return t.enter("resource"),t.enter("resourceMarker"),t.consume(b),t.exit("resourceMarker"),o}function o(b){return Ti(b)?Wh(t,l)(b):l(b)}function l(b){return b===41?_(b):EEe(t,d,p,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(b)}function d(b){return Ti(b)?Wh(t,g)(b):_(b)}function p(b){return n(b)}function g(b){return b===34||b===39||b===40?TEe(t,v,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(b):_(b)}function v(b){return Ti(b)?Wh(t,_)(b):_(b)}function _(b){return b===41?(t.enter("resourceMarker"),t.consume(b),t.exit("resourceMarker"),t.exit("resource"),e):n(b)}}function HSt(t,e,n){const i=this;return o;function o(p){return SEe.call(i,t,l,d,"reference","referenceMarker","referenceString")(p)}function l(p){return i.parser.defined.includes(C0(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?e(p):n(p)}function d(p){return n(p)}}function $St(t,e,n){return i;function i(l){return t.enter("reference"),t.enter("referenceMarker"),t.consume(l),t.exit("referenceMarker"),o}function o(l){return l===93?(t.enter("referenceMarker"),t.consume(l),t.exit("referenceMarker"),t.exit("reference"),e):n(l)}}const WSt={name:"labelStartImage",tokenize:YSt,resolveAll:tJ.resolveAll};function YSt(t,e,n){const i=this;return o;function o(p){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(p),t.exit("labelImageMarker"),l}function l(p){return p===91?(t.enter("labelMarker"),t.consume(p),t.exit("labelMarker"),t.exit("labelImage"),d):n(p)}function d(p){return p===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(p):e(p)}}const qSt={name:"labelStartLink",tokenize:XSt,resolveAll:tJ.resolveAll};function XSt(t,e,n){const i=this;return o;function o(d){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(d),t.exit("labelMarker"),t.exit("labelLink"),l}function l(d){return d===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(d):e(d)}}const QG={name:"lineEnding",tokenize:ZSt};function ZSt(t,e){return n;function n(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),Hr(t,e,"linePrefix")}}const tO={name:"thematicBreak",tokenize:QSt};function QSt(t,e,n){let i=0,o;return l;function l(v){return t.enter("thematicBreak"),d(v)}function d(v){return o=v,p(v)}function p(v){return v===o?(t.enter("thematicBreakSequence"),g(v)):i>=3&&(v===null||Bn(v))?(t.exit("thematicBreak"),e(v)):n(v)}function g(v){return v===o?(t.consume(v),i++,g):(t.exit("thematicBreakSequence"),Zr(v)?Hr(t,p,"whitespace")(v):p(v))}}const Tc={name:"list",tokenize:eTt,continuation:{tokenize:tTt},exit:rTt},KSt={tokenize:iTt,partial:!0},JSt={tokenize:nTt,partial:!0};function eTt(t,e,n){const i=this,o=i.events[i.events.length-1];let l=o&&o[1].type==="linePrefix"?o[2].sliceSerialize(o[1],!0).length:0,d=0;return p;function p(E){const S=i.containerState.type||(E===42||E===43||E===45?"listUnordered":"listOrdered");if(S==="listUnordered"?!i.containerState.marker||E===i.containerState.marker:nY(E)){if(i.containerState.type||(i.containerState.type=S,t.enter(S,{_container:!0})),S==="listUnordered")return t.enter("listItemPrefix"),E===42||E===45?t.check(tO,n,v)(E):v(E);if(!i.interrupt||E===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),g(E)}return n(E)}function g(E){return nY(E)&&++d<10?(t.consume(E),g):(!i.interrupt||d<2)&&(i.containerState.marker?E===i.containerState.marker:E===41||E===46)?(t.exit("listItemValue"),v(E)):n(E)}function v(E){return t.enter("listItemMarker"),t.consume(E),t.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||E,t.check(yM,i.interrupt?n:_,t.attempt(KSt,w,b))}function _(E){return i.containerState.initialBlankLine=!0,l++,w(E)}function b(E){return Zr(E)?(t.enter("listItemPrefixWhitespace"),t.consume(E),t.exit("listItemPrefixWhitespace"),w):n(E)}function w(E){return i.containerState.size=l+i.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(E)}}function tTt(t,e,n){const i=this;return i.containerState._closeFlow=void 0,t.check(yM,o,l);function o(p){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,Hr(t,e,"listItemIndent",i.containerState.size+1)(p)}function l(p){return i.containerState.furtherBlankLines||!Zr(p)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,d(p)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,t.attempt(JSt,e,d)(p))}function d(p){return i.containerState._closeFlow=!0,i.interrupt=void 0,Hr(t,t.attempt(Tc,e,n),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(p)}}function nTt(t,e,n){const i=this;return Hr(t,o,"listItemIndent",i.containerState.size+1);function o(l){const d=i.events[i.events.length-1];return d&&d[1].type==="listItemIndent"&&d[2].sliceSerialize(d[1],!0).length===i.containerState.size?e(l):n(l)}}function rTt(t){t.exit(this.containerState.type)}function iTt(t,e,n){const i=this;return Hr(t,o,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function o(l){const d=i.events[i.events.length-1];return!Zr(l)&&d&&d[1].type==="listItemPrefixWhitespace"?e(l):n(l)}}const vfe={name:"setextUnderline",tokenize:oTt,resolveTo:sTt};function sTt(t,e){let n=t.length,i,o,l;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){i=n;break}t[n][1].type==="paragraph"&&(o=n)}else t[n][1].type==="content"&&t.splice(n,1),!l&&t[n][1].type==="definition"&&(l=n);const d={type:"setextHeading",start:Object.assign({},t[o][1].start),end:Object.assign({},t[t.length-1][1].end)};return t[o][1].type="setextHeadingText",l?(t.splice(o,0,["enter",d,e]),t.splice(l+1,0,["exit",t[i][1],e]),t[i][1].end=Object.assign({},t[l][1].end)):t[i][1]=d,t.push(["exit",d,e]),t}function oTt(t,e,n){const i=this;let o;return l;function l(v){let _=i.events.length,b;for(;_--;)if(i.events[_][1].type!=="lineEnding"&&i.events[_][1].type!=="linePrefix"&&i.events[_][1].type!=="content"){b=i.events[_][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||b)?(t.enter("setextHeadingLine"),o=v,d(v)):n(v)}function d(v){return t.enter("setextHeadingLineSequence"),p(v)}function p(v){return v===o?(t.consume(v),p):(t.exit("setextHeadingLineSequence"),Zr(v)?Hr(t,g,"lineSuffix")(v):g(v))}function g(v){return v===null||Bn(v)?(t.exit("setextHeadingLine"),e(v)):n(v)}}const aTt={tokenize:lTt};function lTt(t){const e=this,n=t.attempt(yM,i,t.attempt(this.parser.constructs.flowInitial,o,Hr(t,t.attempt(this.parser.constructs.flow,o,t.attempt(hSt,o)),"linePrefix")));return n;function i(l){if(l===null){t.consume(l);return}return t.enter("lineEndingBlank"),t.consume(l),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function o(l){if(l===null){t.consume(l);return}return t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const cTt={resolveAll:MEe()},uTt=xEe("string"),fTt=xEe("text");function xEe(t){return{tokenize:e,resolveAll:MEe(t==="text"?dTt:void 0)};function e(n){const i=this,o=this.parser.constructs[t],l=n.attempt(o,d,p);return d;function d(_){return v(_)?l(_):p(_)}function p(_){if(_===null){n.consume(_);return}return n.enter("data"),n.consume(_),g}function g(_){return v(_)?(n.exit("data"),l(_)):(n.consume(_),g)}function v(_){if(_===null)return!0;const b=o[_];let w=-1;if(b)for(;++w<b.length;){const E=b[w];if(!E.previous||E.previous.call(i,i.previous))return!0}return!1}}}function MEe(t){return e;function e(n,i){let o=-1,l;for(;++o<=n.length;)l===void 0?n[o]&&n[o][1].type==="data"&&(l=o,o++):(!n[o]||n[o][1].type!=="data")&&(o!==l+2&&(n[l][1].end=n[o-1][1].end,n.splice(l+2,o-l-2),o=l+2),l=void 0);return t?t(n,i):n}}function dTt(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const i=t[n-1][1],o=e.sliceStream(i);let l=o.length,d=-1,p=0,g;for(;l--;){const v=o[l];if(typeof v=="string"){for(d=v.length;v.charCodeAt(d-1)===32;)p++,d--;if(d)break;d=-1}else if(v===-2)g=!0,p++;else if(v!==-1){l++;break}}if(p){const v={type:n===t.length||g||p<2?"lineSuffix":"hardBreakTrailing",start:{line:i.end.line,column:i.end.column-p,offset:i.end.offset-p,_index:i.start._index+l,_bufferIndex:l?d:i.start._bufferIndex+d},end:Object.assign({},i.end)};i.end=Object.assign({},v.start),i.start.offset===i.end.offset?Object.assign(i,v):(t.splice(n,0,["enter",v,e],["exit",v,e]),n+=2)}n++}return t}function hTt(t,e,n){let i=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const o={},l=[];let d=[],p=[];const g={consume:C,enter:P,exit:O,attempt:V(L),check:V(B),interrupt:V(B,{interrupt:!0})},v={previous:null,code:null,containerState:{},events:[],parser:t,sliceStream:E,sliceSerialize:w,now:S,defineSkip:M,write:b};let _=e.tokenize.call(v,g);return e.resolveAll&&l.push(e),v;function b(q){return d=hf(d,q),k(),d[d.length-1]!==null?[]:(G(e,0),v.events=sB(l,v.events,v),v.events)}function w(q,fe){return mTt(E(q),fe)}function E(q){return pTt(d,q)}function S(){const{line:q,column:fe,offset:ue,_index:J,_bufferIndex:le}=i;return{line:q,column:fe,offset:ue,_index:J,_bufferIndex:le}}function M(q){o[q.line]=q.column,F()}function k(){let q;for(;i._index<d.length;){const fe=d[i._index];if(typeof fe=="string")for(q=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===q&&i._bufferIndex<fe.length;)x(fe.charCodeAt(i._bufferIndex));else x(fe)}}function x(q){_=_(q)}function C(q){Bn(q)?(i.line++,i.column=1,i.offset+=q===-3?2:1,F()):q!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===d[i._index].length&&(i._bufferIndex=-1,i._index++)),v.previous=q}function P(q,fe){const ue=fe||{};return ue.type=q,ue.start=S(),v.events.push(["enter",ue,v]),p.push(ue),ue}function O(q){const fe=p.pop();return fe.end=S(),v.events.push(["exit",fe,v]),fe}function L(q,fe){G(q,fe.from)}function B(q,fe){fe.restore()}function V(q,fe){return ue;function ue(J,le,me){let be,ye,pe,oe;return Array.isArray(J)?it(J):"tokenize"in J?it([J]):Ce(J);function Ce(_t){return Nt;function Nt(Je){const ot=Je!==null&&_t[Je],fn=Je!==null&&_t.null,Ht=[...Array.isArray(ot)?ot:ot?[ot]:[],...Array.isArray(fn)?fn:fn?[fn]:[]];return it(Ht)(Je)}}function it(_t){return be=_t,ye=0,_t.length===0?me:Se(_t[ye])}function Se(_t){return Nt;function Nt(Je){return oe=j(),pe=_t,_t.partial||(v.currentConstruct=_t),_t.name&&v.parser.constructs.disable.null.includes(_t.name)?ct():_t.tokenize.call(fe?Object.assign(Object.create(v),fe):v,g,Oe,ct)(Je)}}function Oe(_t){return q(pe,oe),le}function ct(_t){return oe.restore(),++ye<be.length?Se(be[ye]):me}}}function G(q,fe){q.resolveAll&&!l.includes(q)&&l.push(q),q.resolve&&Mf(v.events,fe,v.events.length-fe,q.resolve(v.events.slice(fe),v)),q.resolveTo&&(v.events=q.resolveTo(v.events,v))}function j(){const q=S(),fe=v.previous,ue=v.currentConstruct,J=v.events.length,le=Array.from(p);return{restore:me,from:J};function me(){i=q,v.previous=fe,v.currentConstruct=ue,v.events.length=J,p=le,F()}}function F(){i.line in o&&i.column<2&&(i.column=o[i.line],i.offset+=o[i.line]-1)}}function pTt(t,e){const n=e.start._index,i=e.start._bufferIndex,o=e.end._index,l=e.end._bufferIndex;let d;if(n===o)d=[t[n].slice(i,l)];else{if(d=t.slice(n,o),i>-1){const p=d[0];typeof p=="string"?d[0]=p.slice(i):d.shift()}l>0&&d.push(t[o].slice(0,l))}return d}function mTt(t,e){let n=-1;const i=[];let o;for(;++n<t.length;){const l=t[n];let d;if(typeof l=="string")d=l;else switch(l){case-5:{d="\r";break}case-4:{d=`
`;break}case-3:{d=`\r
`;break}case-2:{d=e?" ":"	";break}case-1:{if(!e&&o)continue;d=" ";break}default:d=String.fromCharCode(l)}o=l===-2,i.push(d)}return i.join("")}const gTt={42:Tc,43:Tc,45:Tc,48:Tc,49:Tc,50:Tc,51:Tc,52:Tc,53:Tc,54:Tc,55:Tc,56:Tc,57:Tc,62:yEe},vTt={91:_St},_Tt={[-2]:ZG,[-1]:ZG,32:ZG},yTt={35:SSt,42:tO,45:[vfe,tO],60:kSt,61:vfe,95:tO,96:mfe,126:mfe},bTt={38:AEe,92:bEe},ATt={[-5]:QG,[-4]:QG,[-3]:QG,33:WSt,38:AEe,42:rY,60:[qEt,NSt],91:qSt,92:[wSt,bEe],93:tJ,95:rY,96:aSt},wTt={null:[rY,cTt]},ETt={null:[42,95]},STt={null:[]},TTt=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:ETt,contentInitial:vTt,disable:STt,document:gTt,flow:yTt,flowInitial:_Tt,insideSpan:wTt,string:bTt,text:ATt},Symbol.toStringTag,{value:"Module"}));function xTt(t){const n=vEe([TTt,...(t||{}).extensions||[]]),i={defined:[],lazy:{},constructs:n,content:o(VEt),document:o(jEt),flow:o(aTt),string:o(uTt),text:o(fTt)};return i;function o(l){return d;function d(p){return hTt(i,l,p)}}}function MTt(t){for(;!wEe(t););return t}const _fe=/[\0\t\n\r]/g;function kTt(){let t=1,e="",n=!0,i;return o;function o(l,d,p){const g=[];let v,_,b,w,E;for(l=e+(typeof l=="string"?l.toString():new TextDecoder(d||void 0).decode(l)),b=0,e="",n&&(l.charCodeAt(0)===65279&&b++,n=void 0);b<l.length;){if(_fe.lastIndex=b,v=_fe.exec(l),w=v&&v.index!==void 0?v.index:l.length,E=l.charCodeAt(w),!v){e=l.slice(b);break}if(E===10&&b===w&&i)g.push(-3),i=void 0;else switch(i&&(g.push(-5),i=void 0),b<w&&(g.push(l.slice(b,w)),t+=w-b),E){case 0:{g.push(65533),t++;break}case 9:{for(_=Math.ceil(t/4)*4,g.push(-2);t++<_;)g.push(-1);break}case 10:{g.push(-4),t=1;break}default:i=!0,t=1}b=w+1}return p&&(i&&g.push(-5),e&&g.push(e),g.push(null)),g}}const CTt=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function PTt(t){return t.replace(CTt,RTt)}function RTt(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const o=n.charCodeAt(1),l=o===120||o===88;return _Ee(n.slice(l?2:1),l?16:10)}return a6(n)||t}const kEe={}.hasOwnProperty;function DTt(t,e,n){return typeof e!="string"&&(n=e,e=void 0),OTt(n)(MTt(xTt(n).document().write(kTt()(t,e,!0))))}function OTt(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:l(It),autolinkProtocol:j,autolinkEmail:j,atxHeading:l(ht),blockQuote:l(fn),characterEscape:j,characterReference:j,codeFenced:l(Ht),codeFencedFenceInfo:d,codeFencedFenceMeta:d,codeIndented:l(Ht,d),codeText:l(Re,d),codeTextData:j,data:j,codeFlowValue:j,definition:l(Lt),definitionDestinationString:d,definitionLabelString:d,definitionTitleString:d,emphasis:l(mt),hardBreakEscape:l(at),hardBreakTrailing:l(at),htmlFlow:l(Mt,d),htmlFlowData:j,htmlText:l(Mt,d),htmlTextData:j,image:l(Ot),label:d,link:l(It),listItem:l(ke),listItemValue:w,listOrdered:l(Zt,b),listUnordered:l(Zt),paragraph:l(he),reference:Se,referenceString:d,resourceDestinationString:d,resourceTitleString:d,setextHeading:l(ht),strong:l(tt),thematicBreak:l(St)},exit:{atxHeading:g(),atxHeadingSequence:L,autolink:g(),autolinkEmail:ot,autolinkProtocol:Je,blockQuote:g(),characterEscapeValue:F,characterReferenceMarkerHexadecimal:ct,characterReferenceMarkerNumeric:ct,characterReferenceValue:_t,characterReference:Nt,codeFenced:g(k),codeFencedFence:M,codeFencedFenceInfo:E,codeFencedFenceMeta:S,codeFlowValue:F,codeIndented:g(x),codeText:g(le),codeTextData:F,data:F,definition:g(),definitionDestinationString:O,definitionLabelString:C,definitionTitleString:P,emphasis:g(),hardBreakEscape:g(fe),hardBreakTrailing:g(fe),htmlFlow:g(ue),htmlFlowData:F,htmlText:g(J),htmlTextData:F,image:g(be),label:pe,labelText:ye,lineEnding:q,link:g(me),listItem:g(),listOrdered:g(),listUnordered:g(),paragraph:g(),referenceString:Oe,resourceDestinationString:oe,resourceTitleString:Ce,resource:it,setextHeading:g(G),setextHeadingLineSequence:V,setextHeadingText:B,strong:g(),thematicBreak:g()}};CEe(e,(t||{}).mdastExtensions||[]);const n={};return i;function i(De){let nt={type:"root",children:[]};const Et={stack:[nt],tokenStack:[],config:e,enter:p,exit:v,buffer:d,resume:_,data:n},Qe=[];let lt=-1;for(;++lt<De.length;)if(De[lt][1].type==="listOrdered"||De[lt][1].type==="listUnordered")if(De[lt][0]==="enter")Qe.push(lt);else{const xt=Qe.pop();lt=o(De,xt,lt)}for(lt=-1;++lt<De.length;){const xt=e[De[lt][0]];kEe.call(xt,De[lt][1].type)&&xt[De[lt][1].type].call(Object.assign({sliceSerialize:De[lt][2].sliceSerialize},Et),De[lt][1])}if(Et.tokenStack.length>0){const xt=Et.tokenStack[Et.tokenStack.length-1];(xt[1]||yfe).call(Et,void 0,xt[0])}for(nt.position={start:p2(De.length>0?De[0][1].start:{line:1,column:1,offset:0}),end:p2(De.length>0?De[De.length-2][1].end:{line:1,column:1,offset:0})},lt=-1;++lt<e.transforms.length;)nt=e.transforms[lt](nt)||nt;return nt}function o(De,nt,Et){let Qe=nt-1,lt=-1,xt=!1,ft,Cn,Rn,dn;for(;++Qe<=Et;){const Qt=De[Qe];switch(Qt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Qt[0]==="enter"?lt++:lt--,dn=void 0;break}case"lineEndingBlank":{Qt[0]==="enter"&&(ft&&!dn&&!lt&&!Rn&&(Rn=Qe),dn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:dn=void 0}if(!lt&&Qt[0]==="enter"&&Qt[1].type==="listItemPrefix"||lt===-1&&Qt[0]==="exit"&&(Qt[1].type==="listUnordered"||Qt[1].type==="listOrdered")){if(ft){let vn=Qe;for(Cn=void 0;vn--;){const Yn=De[vn];if(Yn[1].type==="lineEnding"||Yn[1].type==="lineEndingBlank"){if(Yn[0]==="exit")continue;Cn&&(De[Cn][1].type="lineEndingBlank",xt=!0),Yn[1].type="lineEnding",Cn=vn}else if(!(Yn[1].type==="linePrefix"||Yn[1].type==="blockQuotePrefix"||Yn[1].type==="blockQuotePrefixWhitespace"||Yn[1].type==="blockQuoteMarker"||Yn[1].type==="listItemIndent"))break}Rn&&(!Cn||Rn<Cn)&&(ft._spread=!0),ft.end=Object.assign({},Cn?De[Cn][1].start:Qt[1].end),De.splice(Cn||Qe,0,["exit",ft,Qt[2]]),Qe++,Et++}if(Qt[1].type==="listItemPrefix"){const vn={type:"listItem",_spread:!1,start:Object.assign({},Qt[1].start),end:void 0};ft=vn,De.splice(Qe,0,["enter",vn,Qt[2]]),Qe++,Et++,Rn=void 0,dn=!0}}}return De[nt][1]._spread=xt,Et}function l(De,nt){return Et;function Et(Qe){p.call(this,De(Qe),Qe),nt&&nt.call(this,Qe)}}function d(){this.stack.push({type:"fragment",children:[]})}function p(De,nt,Et){this.stack[this.stack.length-1].children.push(De),this.stack.push(De),this.tokenStack.push([nt,Et]),De.position={start:p2(nt.start),end:void 0}}function g(De){return nt;function nt(Et){De&&De.call(this,Et),v.call(this,Et)}}function v(De,nt){const Et=this.stack.pop(),Qe=this.tokenStack.pop();if(Qe)Qe[0].type!==De.type&&(nt?nt.call(this,De,Qe[0]):(Qe[1]||yfe).call(this,De,Qe[0]));else throw new Error("Cannot close `"+De.type+"` ("+tT({start:De.start,end:De.end})+"): its not open");Et.position.end=p2(De.end)}function _(){return eJ(this.stack.pop())}function b(){this.data.expectingFirstListItemValue=!0}function w(De){if(this.data.expectingFirstListItemValue){const nt=this.stack[this.stack.length-2];nt.start=Number.parseInt(this.sliceSerialize(De),10),this.data.expectingFirstListItemValue=void 0}}function E(){const De=this.resume(),nt=this.stack[this.stack.length-1];nt.lang=De}function S(){const De=this.resume(),nt=this.stack[this.stack.length-1];nt.meta=De}function M(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function k(){const De=this.resume(),nt=this.stack[this.stack.length-1];nt.value=De.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function x(){const De=this.resume(),nt=this.stack[this.stack.length-1];nt.value=De.replace(/(\r?\n|\r)$/g,"")}function C(De){const nt=this.resume(),Et=this.stack[this.stack.length-1];Et.label=nt,Et.identifier=C0(this.sliceSerialize(De)).toLowerCase()}function P(){const De=this.resume(),nt=this.stack[this.stack.length-1];nt.title=De}function O(){const De=this.resume(),nt=this.stack[this.stack.length-1];nt.url=De}function L(De){const nt=this.stack[this.stack.length-1];if(!nt.depth){const Et=this.sliceSerialize(De).length;nt.depth=Et}}function B(){this.data.setextHeadingSlurpLineEnding=!0}function V(De){const nt=this.stack[this.stack.length-1];nt.depth=this.sliceSerialize(De).codePointAt(0)===61?1:2}function G(){this.data.setextHeadingSlurpLineEnding=void 0}function j(De){const Et=this.stack[this.stack.length-1].children;let Qe=Et[Et.length-1];(!Qe||Qe.type!=="text")&&(Qe=wt(),Qe.position={start:p2(De.start),end:void 0},Et.push(Qe)),this.stack.push(Qe)}function F(De){const nt=this.stack.pop();nt.value+=this.sliceSerialize(De),nt.position.end=p2(De.end)}function q(De){const nt=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Et=nt.children[nt.children.length-1];Et.position.end=p2(De.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(nt.type)&&(j.call(this,De),F.call(this,De))}function fe(){this.data.atHardBreak=!0}function ue(){const De=this.resume(),nt=this.stack[this.stack.length-1];nt.value=De}function J(){const De=this.resume(),nt=this.stack[this.stack.length-1];nt.value=De}function le(){const De=this.resume(),nt=this.stack[this.stack.length-1];nt.value=De}function me(){const De=this.stack[this.stack.length-1];if(this.data.inReference){const nt=this.data.referenceType||"shortcut";De.type+="Reference",De.referenceType=nt,delete De.url,delete De.title}else delete De.identifier,delete De.label;this.data.referenceType=void 0}function be(){const De=this.stack[this.stack.length-1];if(this.data.inReference){const nt=this.data.referenceType||"shortcut";De.type+="Reference",De.referenceType=nt,delete De.url,delete De.title}else delete De.identifier,delete De.label;this.data.referenceType=void 0}function ye(De){const nt=this.sliceSerialize(De),Et=this.stack[this.stack.length-2];Et.label=PTt(nt),Et.identifier=C0(nt).toLowerCase()}function pe(){const De=this.stack[this.stack.length-1],nt=this.resume(),Et=this.stack[this.stack.length-1];if(this.data.inReference=!0,Et.type==="link"){const Qe=De.children;Et.children=Qe}else Et.alt=nt}function oe(){const De=this.resume(),nt=this.stack[this.stack.length-1];nt.url=De}function Ce(){const De=this.resume(),nt=this.stack[this.stack.length-1];nt.title=De}function it(){this.data.inReference=void 0}function Se(){this.data.referenceType="collapsed"}function Oe(De){const nt=this.resume(),Et=this.stack[this.stack.length-1];Et.label=nt,Et.identifier=C0(this.sliceSerialize(De)).toLowerCase(),this.data.referenceType="full"}function ct(De){this.data.characterReferenceType=De.type}function _t(De){const nt=this.sliceSerialize(De),Et=this.data.characterReferenceType;let Qe;Et?(Qe=_Ee(nt,Et==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Qe=a6(nt);const lt=this.stack[this.stack.length-1];lt.value+=Qe}function Nt(De){const nt=this.stack.pop();nt.position.end=p2(De.end)}function Je(De){F.call(this,De);const nt=this.stack[this.stack.length-1];nt.url=this.sliceSerialize(De)}function ot(De){F.call(this,De);const nt=this.stack[this.stack.length-1];nt.url="mailto:"+this.sliceSerialize(De)}function fn(){return{type:"blockquote",children:[]}}function Ht(){return{type:"code",lang:null,meta:null,value:""}}function Re(){return{type:"inlineCode",value:""}}function Lt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function mt(){return{type:"emphasis",children:[]}}function ht(){return{type:"heading",depth:0,children:[]}}function at(){return{type:"break"}}function Mt(){return{type:"html",value:""}}function Ot(){return{type:"image",title:null,url:"",alt:null}}function It(){return{type:"link",title:null,url:"",children:[]}}function Zt(De){return{type:"list",ordered:De.type==="listOrdered",start:null,spread:De._spread,children:[]}}function ke(De){return{type:"listItem",spread:De._spread,checked:null,children:[]}}function he(){return{type:"paragraph",children:[]}}function tt(){return{type:"strong",children:[]}}function wt(){return{type:"text",value:""}}function St(){return{type:"thematicBreak"}}}function p2(t){return{line:t.line,column:t.column,offset:t.offset}}function CEe(t,e){let n=-1;for(;++n<e.length;){const i=e[n];Array.isArray(i)?CEe(t,i):ITt(t,i)}}function ITt(t,e){let n;for(n in e)if(kEe.call(e,n))switch(n){case"canContainEols":{const i=e[n];i&&t[n].push(...i);break}case"transforms":{const i=e[n];i&&t[n].push(...i);break}case"enter":case"exit":{const i=e[n];i&&Object.assign(t[n],i);break}}}function yfe(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+tT({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+tT({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+tT({start:e.start,end:e.end})+") is still open")}function NTt(t){const e=this;e.parser=n;function n(i){return DTt(i,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function LTt(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function zTt(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function BTt(t,e){const n=e.value?e.value+`
`:"",i={};e.lang&&(i.className=["language-"+e.lang]);let o={type:"element",tagName:"code",properties:i,children:[{type:"text",value:n}]};return e.meta&&(o.data={meta:e.meta}),t.patch(e,o),o=t.applyData(e,o),o={type:"element",tagName:"pre",properties:{},children:[o]},t.patch(e,o),o}function UTt(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function FTt(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function VTt(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",i=String(e.identifier).toUpperCase(),o=xA(i.toLowerCase()),l=t.footnoteOrder.indexOf(i);let d,p=t.footnoteCounts.get(i);p===void 0?(p=0,t.footnoteOrder.push(i),d=t.footnoteOrder.length):d=l+1,p+=1,t.footnoteCounts.set(i,p);const g={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+o,id:n+"fnref-"+o+(p>1?"-"+p:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(d)}]};t.patch(e,g);const v={type:"element",tagName:"sup",properties:{},children:[g]};return t.patch(e,v),t.applyData(e,v)}function GTt(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function jTt(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function PEe(t,e){const n=e.referenceType;let i="]";if(n==="collapsed"?i+="[]":n==="full"&&(i+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+i}];const o=t.all(e),l=o[0];l&&l.type==="text"?l.value="["+l.value:o.unshift({type:"text",value:"["});const d=o[o.length-1];return d&&d.type==="text"?d.value+=i:o.push({type:"text",value:i}),o}function HTt(t,e){const n=String(e.identifier).toUpperCase(),i=t.definitionById.get(n);if(!i)return PEe(t,e);const o={src:xA(i.url||""),alt:e.alt};i.title!==null&&i.title!==void 0&&(o.title=i.title);const l={type:"element",tagName:"img",properties:o,children:[]};return t.patch(e,l),t.applyData(e,l)}function $Tt(t,e){const n={src:xA(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const i={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,i),t.applyData(e,i)}function WTt(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const i={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,i),t.applyData(e,i)}function YTt(t,e){const n=String(e.identifier).toUpperCase(),i=t.definitionById.get(n);if(!i)return PEe(t,e);const o={href:xA(i.url||"")};i.title!==null&&i.title!==void 0&&(o.title=i.title);const l={type:"element",tagName:"a",properties:o,children:t.all(e)};return t.patch(e,l),t.applyData(e,l)}function qTt(t,e){const n={href:xA(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const i={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function XTt(t,e,n){const i=t.all(e),o=n?ZTt(n):REe(e),l={},d=[];if(typeof e.checked=="boolean"){const _=i[0];let b;_&&_.type==="element"&&_.tagName==="p"?b=_:(b={type:"element",tagName:"p",properties:{},children:[]},i.unshift(b)),b.children.length>0&&b.children.unshift({type:"text",value:" "}),b.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),l.className=["task-list-item"]}let p=-1;for(;++p<i.length;){const _=i[p];(o||p!==0||_.type!=="element"||_.tagName!=="p")&&d.push({type:"text",value:`
`}),_.type==="element"&&_.tagName==="p"&&!o?d.push(..._.children):d.push(_)}const g=i[i.length-1];g&&(o||g.type!=="element"||g.tagName!=="p")&&d.push({type:"text",value:`
`});const v={type:"element",tagName:"li",properties:l,children:d};return t.patch(e,v),t.applyData(e,v)}function ZTt(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let i=-1;for(;!e&&++i<n.length;)e=REe(n[i])}return e}function REe(t){const e=t.spread;return e??t.children.length>1}function QTt(t,e){const n={},i=t.all(e);let o=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++o<i.length;){const d=i[o];if(d.type==="element"&&d.tagName==="li"&&d.properties&&Array.isArray(d.properties.className)&&d.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const l={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(i,!0)};return t.patch(e,l),t.applyData(e,l)}function KTt(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function JTt(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function e6t(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function t6t(t,e){const n=t.all(e),i=n.shift(),o=[];if(i){const d={type:"element",tagName:"thead",properties:{},children:t.wrap([i],!0)};t.patch(e.children[0],d),o.push(d)}if(n.length>0){const d={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},p=ZK(e.children[1]),g=uEe(e.children[e.children.length-1]);p&&g&&(d.position={start:p,end:g}),o.push(d)}const l={type:"element",tagName:"table",properties:{},children:t.wrap(o,!0)};return t.patch(e,l),t.applyData(e,l)}function n6t(t,e,n){const i=n?n.children:void 0,l=(i?i.indexOf(e):1)===0?"th":"td",d=n&&n.type==="table"?n.align:void 0,p=d?d.length:e.children.length;let g=-1;const v=[];for(;++g<p;){const b=e.children[g],w={},E=d?d[g]:void 0;E&&(w.align=E);let S={type:"element",tagName:l,properties:w,children:[]};b&&(S.children=t.all(b),t.patch(b,S),S=t.applyData(b,S)),v.push(S)}const _={type:"element",tagName:"tr",properties:{},children:t.wrap(v,!0)};return t.patch(e,_),t.applyData(e,_)}function r6t(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const bfe=9,Afe=32;function i6t(t){const e=String(t),n=/\r?\n|\r/g;let i=n.exec(e),o=0;const l=[];for(;i;)l.push(wfe(e.slice(o,i.index),o>0,!0),i[0]),o=i.index+i[0].length,i=n.exec(e);return l.push(wfe(e.slice(o),o>0,!1)),l.join("")}function wfe(t,e,n){let i=0,o=t.length;if(e){let l=t.codePointAt(i);for(;l===bfe||l===Afe;)i++,l=t.codePointAt(i)}if(n){let l=t.codePointAt(o-1);for(;l===bfe||l===Afe;)o--,l=t.codePointAt(o-1)}return o>i?t.slice(i,o):""}function s6t(t,e){const n={type:"text",value:i6t(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function o6t(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const a6t={blockquote:LTt,break:zTt,code:BTt,delete:UTt,emphasis:FTt,footnoteReference:VTt,heading:GTt,html:jTt,imageReference:HTt,image:$Tt,inlineCode:WTt,linkReference:YTt,link:qTt,listItem:XTt,list:QTt,paragraph:KTt,root:JTt,strong:e6t,table:t6t,tableCell:r6t,tableRow:n6t,text:s6t,thematicBreak:o6t,toml:xC,yaml:xC,definition:xC,footnoteDefinition:xC};function xC(){}const DEe=-1,oB=0,fI=1,dI=2,nJ=3,rJ=4,iJ=5,sJ=6,OEe=7,IEe=8,Efe=typeof self=="object"?self:globalThis,l6t=(t,e)=>{const n=(o,l)=>(t.set(l,o),o),i=o=>{if(t.has(o))return t.get(o);const[l,d]=e[o];switch(l){case oB:case DEe:return n(d,o);case fI:{const p=n([],o);for(const g of d)p.push(i(g));return p}case dI:{const p=n({},o);for(const[g,v]of d)p[i(g)]=i(v);return p}case nJ:return n(new Date(d),o);case rJ:{const{source:p,flags:g}=d;return n(new RegExp(p,g),o)}case iJ:{const p=n(new Map,o);for(const[g,v]of d)p.set(i(g),i(v));return p}case sJ:{const p=n(new Set,o);for(const g of d)p.add(i(g));return p}case OEe:{const{name:p,message:g}=d;return n(new Efe[p](g),o)}case IEe:return n(BigInt(d),o);case"BigInt":return n(Object(BigInt(d)),o)}return n(new Efe[l](d),o)};return i},Sfe=t=>l6t(new Map,t)(0),sy="",{toString:c6t}={},{keys:u6t}=Object,Aw=t=>{const e=typeof t;if(e!=="object"||!t)return[oB,e];const n=c6t.call(t).slice(8,-1);switch(n){case"Array":return[fI,sy];case"Object":return[dI,sy];case"Date":return[nJ,sy];case"RegExp":return[rJ,sy];case"Map":return[iJ,sy];case"Set":return[sJ,sy]}return n.includes("Array")?[fI,n]:n.includes("Error")?[OEe,n]:[dI,n]},MC=([t,e])=>t===oB&&(e==="function"||e==="symbol"),f6t=(t,e,n,i)=>{const o=(d,p)=>{const g=i.push(d)-1;return n.set(p,g),g},l=d=>{if(n.has(d))return n.get(d);let[p,g]=Aw(d);switch(p){case oB:{let _=d;switch(g){case"bigint":p=IEe,_=d.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+g);_=null;break;case"undefined":return o([DEe],d)}return o([p,_],d)}case fI:{if(g)return o([g,[...d]],d);const _=[],b=o([p,_],d);for(const w of d)_.push(l(w));return b}case dI:{if(g)switch(g){case"BigInt":return o([g,d.toString()],d);case"Boolean":case"Number":case"String":return o([g,d.valueOf()],d)}if(e&&"toJSON"in d)return l(d.toJSON());const _=[],b=o([p,_],d);for(const w of u6t(d))(t||!MC(Aw(d[w])))&&_.push([l(w),l(d[w])]);return b}case nJ:return o([p,d.toISOString()],d);case rJ:{const{source:_,flags:b}=d;return o([p,{source:_,flags:b}],d)}case iJ:{const _=[],b=o([p,_],d);for(const[w,E]of d)(t||!(MC(Aw(w))||MC(Aw(E))))&&_.push([l(w),l(E)]);return b}case sJ:{const _=[],b=o([p,_],d);for(const w of d)(t||!MC(Aw(w)))&&_.push(l(w));return b}}const{message:v}=d;return o([p,{name:g,message:v}],d)};return l},Tfe=(t,{json:e,lossy:n}={})=>{const i=[];return f6t(!(e||n),!!e,new Map,i)(t),i},hI=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?Sfe(Tfe(t,e)):structuredClone(t):(t,e)=>Sfe(Tfe(t,e));function d6t(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function h6t(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function p6t(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||d6t,i=t.options.footnoteBackLabel||h6t,o=t.options.footnoteLabel||"Footnotes",l=t.options.footnoteLabelTagName||"h2",d=t.options.footnoteLabelProperties||{className:["sr-only"]},p=[];let g=-1;for(;++g<t.footnoteOrder.length;){const v=t.footnoteById.get(t.footnoteOrder[g]);if(!v)continue;const _=t.all(v),b=String(v.identifier).toUpperCase(),w=xA(b.toLowerCase());let E=0;const S=[],M=t.footnoteCounts.get(b);for(;M!==void 0&&++E<=M;){S.length>0&&S.push({type:"text",value:" "});let C=typeof n=="string"?n:n(g,E);typeof C=="string"&&(C={type:"text",value:C}),S.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+w+(E>1?"-"+E:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(g,E),className:["data-footnote-backref"]},children:Array.isArray(C)?C:[C]})}const k=_[_.length-1];if(k&&k.type==="element"&&k.tagName==="p"){const C=k.children[k.children.length-1];C&&C.type==="text"?C.value+=" ":k.children.push({type:"text",value:" "}),k.children.push(...S)}else _.push(...S);const x={type:"element",tagName:"li",properties:{id:e+"fn-"+w},children:t.wrap(_,!0)};t.patch(v,x),p.push(x)}if(p.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:l,properties:{...hI(d),id:"footnote-label"},children:[{type:"text",value:o}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(p,!0)},{type:"text",value:`
`}]}}const aB=function(t){if(t==null)return _6t;if(typeof t=="function")return lB(t);if(typeof t=="object")return Array.isArray(t)?m6t(t):g6t(t);if(typeof t=="string")return v6t(t);throw new Error("Expected function, string, or object as test")};function m6t(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=aB(t[n]);return lB(i);function i(...o){let l=-1;for(;++l<e.length;)if(e[l].apply(this,o))return!0;return!1}}function g6t(t){const e=t;return lB(n);function n(i){const o=i;let l;for(l in t)if(o[l]!==e[l])return!1;return!0}}function v6t(t){return lB(e);function e(n){return n&&n.type===t}}function lB(t){return e;function e(n,i,o){return!!(y6t(n)&&t.call(this,n,typeof i=="number"?i:void 0,o||void 0))}}function _6t(){return!0}function y6t(t){return t!==null&&typeof t=="object"&&"type"in t}const NEe=[],b6t=!0,iY=!1,A6t="skip";function oJ(t,e,n,i){let o;typeof e=="function"&&typeof n!="function"?(i=n,n=e):o=e;const l=aB(o),d=i?-1:1;p(t,void 0,[])();function p(g,v,_){const b=g&&typeof g=="object"?g:{};if(typeof b.type=="string"){const E=typeof b.tagName=="string"?b.tagName:typeof b.name=="string"?b.name:void 0;Object.defineProperty(w,"name",{value:"node ("+(g.type+(E?"<"+E+">":""))+")"})}return w;function w(){let E=NEe,S,M,k;if((!e||l(g,v,_[_.length-1]||void 0))&&(E=w6t(n(g,_)),E[0]===iY))return E;if("children"in g&&g.children){const x=g;if(x.children&&E[0]!==A6t)for(M=(i?x.children.length:-1)+d,k=_.concat(x);M>-1&&M<x.children.length;){const C=x.children[M];if(S=p(C,M,k)(),S[0]===iY)return S;M=typeof S[1]=="number"?S[1]:M+d}}return E}}}function w6t(t){return Array.isArray(t)?t:typeof t=="number"?[b6t,t]:t==null?NEe:[t]}function cB(t,e,n,i){let o,l,d;typeof e=="function"&&typeof n!="function"?(l=void 0,d=e,o=n):(l=e,d=n,o=i),oJ(t,l,p,o);function p(g,v){const _=v[v.length-1],b=_?_.children.indexOf(g):void 0;return d(g,b,_)}}const sY={}.hasOwnProperty,E6t={};function S6t(t,e){const n=e||E6t,i=new Map,o=new Map,l=new Map,d={...a6t,...n.handlers},p={all:v,applyData:x6t,definitionById:i,footnoteById:o,footnoteCounts:l,footnoteOrder:[],handlers:d,one:g,options:n,patch:T6t,wrap:k6t};return cB(t,function(_){if(_.type==="definition"||_.type==="footnoteDefinition"){const b=_.type==="definition"?i:o,w=String(_.identifier).toUpperCase();b.has(w)||b.set(w,_)}}),p;function g(_,b){const w=_.type,E=p.handlers[w];if(sY.call(p.handlers,w)&&E)return E(p,_,b);if(p.options.passThrough&&p.options.passThrough.includes(w)){if("children"in _){const{children:M,...k}=_,x=hI(k);return x.children=p.all(_),x}return hI(_)}return(p.options.unknownHandler||M6t)(p,_,b)}function v(_){const b=[];if("children"in _){const w=_.children;let E=-1;for(;++E<w.length;){const S=p.one(w[E],_);if(S){if(E&&w[E-1].type==="break"&&(!Array.isArray(S)&&S.type==="text"&&(S.value=xfe(S.value)),!Array.isArray(S)&&S.type==="element")){const M=S.children[0];M&&M.type==="text"&&(M.value=xfe(M.value))}Array.isArray(S)?b.push(...S):b.push(S)}}}return b}}function T6t(t,e){t.position&&(e.position=fEt(t))}function x6t(t,e){let n=e;if(t&&t.data){const i=t.data.hName,o=t.data.hChildren,l=t.data.hProperties;if(typeof i=="string")if(n.type==="element")n.tagName=i;else{const d="children"in n?n.children:[n];n={type:"element",tagName:i,properties:{},children:d}}n.type==="element"&&l&&Object.assign(n.properties,hI(l)),"children"in n&&n.children&&o!==null&&o!==void 0&&(n.children=o)}return n}function M6t(t,e){const n=e.data||{},i="value"in e&&!(sY.call(n,"hProperties")||sY.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function k6t(t,e){const n=[];let i=-1;for(e&&n.push({type:"text",value:`
`});++i<t.length;)i&&n.push({type:"text",value:`
`}),n.push(t[i]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function xfe(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function Mfe(t,e){const n=S6t(t,e),i=n.one(t,void 0),o=p6t(n),l=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return o&&l.children.push({type:"text",value:`
`},o),l}function C6t(t,e){return t&&"run"in t?async function(n,i){const o=Mfe(n,{file:i,...e});await t.run(o,i)}:function(n,i){return Mfe(n,{file:i,...e||t})}}function kfe(t){if(t)throw t}var nO=Object.prototype.hasOwnProperty,LEe=Object.prototype.toString,Cfe=Object.defineProperty,Pfe=Object.getOwnPropertyDescriptor,Rfe=function(e){return typeof Array.isArray=="function"?Array.isArray(e):LEe.call(e)==="[object Array]"},Dfe=function(e){if(!e||LEe.call(e)!=="[object Object]")return!1;var n=nO.call(e,"constructor"),i=e.constructor&&e.constructor.prototype&&nO.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!i)return!1;var o;for(o in e);return typeof o>"u"||nO.call(e,o)},Ofe=function(e,n){Cfe&&n.name==="__proto__"?Cfe(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},Ife=function(e,n){if(n==="__proto__")if(nO.call(e,n)){if(Pfe)return Pfe(e,n).value}else return;return e[n]},P6t=function t(){var e,n,i,o,l,d,p=arguments[0],g=1,v=arguments.length,_=!1;for(typeof p=="boolean"&&(_=p,p=arguments[1]||{},g=2),(p==null||typeof p!="object"&&typeof p!="function")&&(p={});g<v;++g)if(e=arguments[g],e!=null)for(n in e)i=Ife(p,n),o=Ife(e,n),p!==o&&(_&&o&&(Dfe(o)||(l=Rfe(o)))?(l?(l=!1,d=i&&Rfe(i)?i:[]):d=i&&Dfe(i)?i:{},Ofe(p,{name:n,newValue:t(_,d,o)})):typeof o<"u"&&Ofe(p,{name:n,newValue:o}));return p};const KG=l6(P6t);function oY(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function R6t(){const t=[],e={run:n,use:i};return e;function n(...o){let l=-1;const d=o.pop();if(typeof d!="function")throw new TypeError("Expected function as last argument, not "+d);p(null,...o);function p(g,...v){const _=t[++l];let b=-1;if(g){d(g);return}for(;++b<o.length;)(v[b]===null||v[b]===void 0)&&(v[b]=o[b]);o=v,_?D6t(_,p)(...v):d(null,...v)}}function i(o){if(typeof o!="function")throw new TypeError("Expected `middelware` to be a function, not "+o);return t.push(o),e}}function D6t(t,e){let n;return i;function i(...d){const p=t.length>d.length;let g;p&&d.push(o);try{g=t.apply(this,d)}catch(v){const _=v;if(p&&n)throw _;return o(_)}p||(g&&g.then&&typeof g.then=="function"?g.then(l,o):g instanceof Error?o(g):l(g))}function o(d,...p){n||(n=!0,e(d,...p))}function l(d){o(null,d)}}const pd={basename:O6t,dirname:I6t,extname:N6t,join:L6t,sep:"/"};function O6t(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');bM(t);let n=0,i=-1,o=t.length,l;if(e===void 0||e.length===0||e.length>t.length){for(;o--;)if(t.codePointAt(o)===47){if(l){n=o+1;break}}else i<0&&(l=!0,i=o+1);return i<0?"":t.slice(n,i)}if(e===t)return"";let d=-1,p=e.length-1;for(;o--;)if(t.codePointAt(o)===47){if(l){n=o+1;break}}else d<0&&(l=!0,d=o+1),p>-1&&(t.codePointAt(o)===e.codePointAt(p--)?p<0&&(i=o):(p=-1,i=d));return n===i?i=d:i<0&&(i=t.length),t.slice(n,i)}function I6t(t){if(bM(t),t.length===0)return".";let e=-1,n=t.length,i;for(;--n;)if(t.codePointAt(n)===47){if(i){e=n;break}}else i||(i=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function N6t(t){bM(t);let e=t.length,n=-1,i=0,o=-1,l=0,d;for(;e--;){const p=t.codePointAt(e);if(p===47){if(d){i=e+1;break}continue}n<0&&(d=!0,n=e+1),p===46?o<0?o=e:l!==1&&(l=1):o>-1&&(l=-1)}return o<0||n<0||l===0||l===1&&o===n-1&&o===i+1?"":t.slice(o,n)}function L6t(...t){let e=-1,n;for(;++e<t.length;)bM(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":z6t(n)}function z6t(t){bM(t);const e=t.codePointAt(0)===47;let n=B6t(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function B6t(t,e){let n="",i=0,o=-1,l=0,d=-1,p,g;for(;++d<=t.length;){if(d<t.length)p=t.codePointAt(d);else{if(p===47)break;p=47}if(p===47){if(!(o===d-1||l===1))if(o!==d-1&&l===2){if(n.length<2||i!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(g=n.lastIndexOf("/"),g!==n.length-1){g<0?(n="",i=0):(n=n.slice(0,g),i=n.length-1-n.lastIndexOf("/")),o=d,l=0;continue}}else if(n.length>0){n="",i=0,o=d,l=0;continue}}e&&(n=n.length>0?n+"/..":"..",i=2)}else n.length>0?n+="/"+t.slice(o+1,d):n=t.slice(o+1,d),i=d-o-1;o=d,l=0}else p===46&&l>-1?l++:l=-1}return n}function bM(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const U6t={cwd:F6t};function F6t(){return"/"}function aY(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function V6t(t){if(typeof t=="string")t=new URL(t);else if(!aY(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return G6t(t)}function G6t(t){if(t.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const i=e.codePointAt(n+2);if(i===70||i===102){const o=new TypeError("File URL path must not include encoded / characters");throw o.code="ERR_INVALID_FILE_URL_PATH",o}}return decodeURIComponent(e)}const JG=["history","path","basename","stem","extname","dirname"];class zEe{constructor(e){let n;e?aY(e)?n={path:e}:typeof e=="string"||j6t(e)?n={value:e}:n=e:n={},this.cwd=U6t.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<JG.length;){const l=JG[i];l in n&&n[l]!==void 0&&n[l]!==null&&(this[l]=l==="history"?[...n[l]]:n[l])}let o;for(o in n)JG.includes(o)||(this[o]=n[o])}get basename(){return typeof this.path=="string"?pd.basename(this.path):void 0}set basename(e){tj(e,"basename"),ej(e,"basename"),this.path=pd.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?pd.dirname(this.path):void 0}set dirname(e){Nfe(this.basename,"dirname"),this.path=pd.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?pd.extname(this.path):void 0}set extname(e){if(ej(e,"extname"),Nfe(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=pd.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){aY(e)&&(e=V6t(e)),tj(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?pd.basename(this.path,this.extname):void 0}set stem(e){tj(e,"stem"),ej(e,"stem"),this.path=pd.join(this.dirname||"",e+(this.extname||""))}fail(e,n,i){const o=this.message(e,n,i);throw o.fatal=!0,o}info(e,n,i){const o=this.message(e,n,i);return o.fatal=void 0,o}message(e,n,i){const o=new Ol(e,n,i);return this.path&&(o.name=this.path+":"+o.name,o.file=this.path),o.fatal=!1,this.messages.push(o),o}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function ej(t,e){if(t&&t.includes(pd.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+pd.sep+"`")}function tj(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function Nfe(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function j6t(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const H6t=function(t){const i=this.constructor.prototype,o=i[t],l=function(){return o.apply(l,arguments)};Object.setPrototypeOf(l,i);const d=Object.getOwnPropertyNames(o);for(const p of d){const g=Object.getOwnPropertyDescriptor(o,p);g&&Object.defineProperty(l,p,g)}return l},$6t={}.hasOwnProperty;class aJ extends H6t{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=R6t()}copy(){const e=new aJ;let n=-1;for(;++n<this.attachers.length;){const i=this.attachers[n];e.use(...i)}return e.data(KG(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(ij("data",this.frozen),this.namespace[e]=n,this):$6t.call(this.namespace,e)&&this.namespace[e]||void 0:e?(ij("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const o=n.call(e,...i);typeof o=="function"&&this.transformers.use(o)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=kC(e),i=this.parser||this.Parser;return nj("parse",i),i(String(n),n)}process(e,n){const i=this;return this.freeze(),nj("process",this.parser||this.Parser),rj("process",this.compiler||this.Compiler),n?o(void 0,n):new Promise(o);function o(l,d){const p=kC(e),g=i.parse(p);i.run(g,p,function(_,b,w){if(_||!b||!w)return v(_);const E=b,S=i.stringify(E,w);q6t(S)?w.value=S:w.result=S,v(_,w)});function v(_,b){_||!b?d(_):l?l(b):n(void 0,b)}}}processSync(e){let n=!1,i;return this.freeze(),nj("processSync",this.parser||this.Parser),rj("processSync",this.compiler||this.Compiler),this.process(e,o),zfe("processSync","process",n),i;function o(l,d){n=!0,kfe(l),i=d}}run(e,n,i){Lfe(e),this.freeze();const o=this.transformers;return!i&&typeof n=="function"&&(i=n,n=void 0),i?l(void 0,i):new Promise(l);function l(d,p){const g=kC(n);o.run(e,g,v);function v(_,b,w){const E=b||e;_?p(_):d?d(E):i(void 0,E,w)}}}runSync(e,n){let i=!1,o;return this.run(e,n,l),zfe("runSync","run",i),o;function l(d,p){kfe(d),o=p,i=!0}}stringify(e,n){this.freeze();const i=kC(n),o=this.compiler||this.Compiler;return rj("stringify",o),Lfe(e),o(e,i)}use(e,...n){const i=this.attachers,o=this.namespace;if(ij("use",this.frozen),e!=null)if(typeof e=="function")g(e,n);else if(typeof e=="object")Array.isArray(e)?p(e):d(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function l(v){if(typeof v=="function")g(v,[]);else if(typeof v=="object")if(Array.isArray(v)){const[_,...b]=v;g(_,b)}else d(v);else throw new TypeError("Expected usable value, not `"+v+"`")}function d(v){if(!("plugins"in v)&&!("settings"in v))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");p(v.plugins),v.settings&&(o.settings=KG(!0,o.settings,v.settings))}function p(v){let _=-1;if(v!=null)if(Array.isArray(v))for(;++_<v.length;){const b=v[_];l(b)}else throw new TypeError("Expected a list of plugins, not `"+v+"`")}function g(v,_){let b=-1,w=-1;for(;++b<i.length;)if(i[b][0]===v){w=b;break}if(w===-1)i.push([v,..._]);else if(_.length>0){let[E,...S]=_;const M=i[w][1];oY(M)&&oY(E)&&(E=KG(!0,M,E)),i[w]=[v,E,...S]}}}}const W6t=new aJ().freeze();function nj(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function rj(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function ij(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Lfe(t){if(!oY(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function zfe(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function kC(t){return Y6t(t)?t:new zEe(t)}function Y6t(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function q6t(t){return typeof t=="string"||X6t(t)}function X6t(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const Z6t="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Bfe=[],Ufe={allowDangerousHtml:!0},Q6t=/^(https?|ircs?|mailto|xmpp)$/i,K6t=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function J6t(t){const e=t.allowedElements,n=t.allowElement,i=t.children||"",o=t.className,l=t.components,d=t.disallowedElements,p=t.rehypePlugins||Bfe,g=t.remarkPlugins||Bfe,v=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...Ufe}:Ufe,_=t.skipHtml,b=t.unwrapDisallowed,w=t.urlTransform||ext,E=W6t().use(NTt).use(g).use(C6t,v).use(p),S=new zEe;typeof i=="string"&&(S.value=i);for(const C of K6t)Object.hasOwn(t,C.from)&&(""+C.from+(C.to?"use `"+C.to+"` instead":"remove it")+Z6t+C.id,void 0);const M=E.parse(S);let k=E.runSync(M,S);return o&&(k={type:"element",tagName:"div",properties:{className:o},children:k.type==="root"?k.children:[k]}),cB(k,x),vEt(k,{Fragment:Y.Fragment,components:l,ignoreInvalidStyle:!0,jsx:Y.jsx,jsxs:Y.jsxs,passKeys:!0,passNode:!0});function x(C,P,O){if(C.type==="raw"&&O&&typeof P=="number")return _?O.children.splice(P,1):O.children[P]={type:"text",value:C.value},P;if(C.type==="element"){let L;for(L in XG)if(Object.hasOwn(XG,L)&&Object.hasOwn(C.properties,L)){const B=C.properties[L],V=XG[L];(V===null||V.includes(C.tagName))&&(C.properties[L]=w(String(B||""),L,C))}}if(C.type==="element"){let L=e?!e.includes(C.tagName):d?d.includes(C.tagName):!1;if(!L&&n&&typeof P=="number"&&(L=!n(C,P,O)),L&&O&&typeof P=="number")return b&&C.children?O.children.splice(P,1,...C.children):O.children.splice(P,1),P}}}function ext(t){const e=t.indexOf(":"),n=t.indexOf("?"),i=t.indexOf("#"),o=t.indexOf("/");return e<0||o>-1&&e>o||n>-1&&e>n||i>-1&&e>i||Q6t.test(t.slice(0,e))?t:""}const txt=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],Ffe={0:"",128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""};function BEe(t){const e=typeof t=="string"?t.charCodeAt(0):t;return e>=48&&e<=57}function nxt(t){const e=typeof t=="string"?t.charCodeAt(0):t;return e>=97&&e<=102||e>=65&&e<=70||e>=48&&e<=57}function rxt(t){const e=typeof t=="string"?t.charCodeAt(0):t;return e>=97&&e<=122||e>=65&&e<=90}function Vfe(t){return rxt(t)||BEe(t)}const oy=String.fromCharCode,ixt=["","Named character references must be terminated by a semicolon","Numeric character references must be terminated by a semicolon","Named character references cannot be empty","Numeric character references cannot be empty","Named character references must be known","Numeric character references cannot be disallowed","Numeric character references cannot be outside the permissible Unicode range"];function lJ(t,e={}){const n=typeof e.additional=="string"?e.additional.charCodeAt(0):e.additional,i=[];let o=0,l=-1,d="",p,g;e.position&&("start"in e.position||"indent"in e.position?(g=e.position.indent,p=e.position.start):p=e.position);let v=(p?p.line:0)||1,_=(p?p.column:0)||1,b=E(),w;for(o--;++o<=t.length;)if(w===10&&(_=(g?g[l]:0)||1),w=t.charCodeAt(o),w===38){const k=t.charCodeAt(o+1);if(k===9||k===10||k===12||k===32||k===38||k===60||Number.isNaN(k)||n&&k===n){d+=oy(w),_++;continue}const x=o+1;let C=x,P=x,O;if(k===35){P=++C;const fe=t.charCodeAt(P);fe===88||fe===120?(O="hexadecimal",P=++C):O="decimal"}else O="named";let L="",B="",V="";const G=O==="named"?Vfe:O==="decimal"?BEe:nxt;for(P--;++P<=t.length;){const fe=t.charCodeAt(P);if(!G(fe))break;V+=oy(fe),O==="named"&&txt.includes(V)&&(L=V,B=a6(V))}let j=t.charCodeAt(P)===59;if(j){P++;const fe=O==="named"?a6(V):!1;fe&&(L=V,B=fe)}let F=1+P-x,q="";if(!(!j&&e.nonTerminated===!1))if(!V)O!=="named"&&S(4,F);else if(O==="named"){if(j&&!B)S(5,1);else if(L!==V&&(P=C+L.length,F=1+P-C,j=!1),!j){const fe=L?1:3;if(e.attribute){const ue=t.charCodeAt(P);ue===61?(S(fe,F),B=""):Vfe(ue)?B="":S(fe,F)}else S(fe,F)}q=B}else{j||S(2,F);let fe=Number.parseInt(V,O==="hexadecimal"?16:10);if(sxt(fe))S(7,F),q=oy(65533);else if(fe in Ffe)S(6,F),q=Ffe[fe];else{let ue="";oxt(fe)&&S(6,F),fe>65535&&(fe-=65536,ue+=oy(fe>>>10|55296),fe=56320|fe&1023),q=ue+oy(fe)}}if(q){M(),b=E(),o=P-1,_+=P-x+1,i.push(q);const fe=E();fe.offset++,e.reference&&e.reference.call(e.referenceContext,q,{start:b,end:fe},t.slice(x-1,P)),b=fe}else V=t.slice(x-1,P),d+=V,_+=V.length,o=P-1}else w===10&&(v++,l++,_=0),Number.isNaN(w)?M():(d+=oy(w),_++);return i.join("");function E(){return{line:v,column:_,offset:o+((p?p.offset:0)||0)}}function S(k,x){let C;e.warning&&(C=E(),C.column+=x,C.offset+=x,e.warning.call(e.warningContext,ixt[k],C,k))}function M(){d&&(i.push(d),e.text&&e.text.call(e.textContext,d,{start:b,end:E()}),d="")}}function sxt(t){return t>=55296&&t<=57343||t>1114111}function oxt(t){return t>=1&&t<=8||t===11||t>=13&&t<=31||t>=127&&t<=159||t>=64976&&t<=65007||(t&65535)===65535||(t&65535)===65534}const axt=/["&'<>`]/g,lxt=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,cxt=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,uxt=/[|\\{}()[\]^$+*?.]/g,Gfe=new WeakMap;function fxt(t,e){if(t=t.replace(e.subset?dxt(e.subset):axt,i),e.subset||e.escapeOnly)return t;return t.replace(lxt,n).replace(cxt,i);function n(o,l,d){return e.format((o.charCodeAt(0)-55296)*1024+o.charCodeAt(1)-56320+65536,d.charCodeAt(l+2),e)}function i(o,l,d){return e.format(o.charCodeAt(0),d.charCodeAt(l+1),e)}}function dxt(t){let e=Gfe.get(t);return e||(e=hxt(t),Gfe.set(t,e)),e}function hxt(t){const e=[];let n=-1;for(;++n<t.length;)e.push(t[n].replace(uxt,"\\$&"));return new RegExp("(?:"+e.join("|")+")","g")}function pxt(t){return"&#x"+t.toString(16).toUpperCase()+";"}function mxt(t,e){return fxt(t,Object.assign({format:pxt},e))}const gxt={}.hasOwnProperty,jfe=/^[^\t\n\r "#'.<=>`}]+$/;rO.peek=Sxt;function vxt(){return{canContainEols:["textDirective"],enter:{directiveContainer:yxt,directiveContainerAttributes:oj,directiveContainerLabel:wxt,directiveLeaf:bxt,directiveLeafAttributes:oj,directiveText:Axt,directiveTextAttributes:oj},exit:{directiveContainer:dj,directiveContainerAttributeClassValue:lj,directiveContainerAttributeIdValue:aj,directiveContainerAttributeName:uj,directiveContainerAttributeValue:cj,directiveContainerAttributes:fj,directiveContainerLabel:Ext,directiveContainerName:sj,directiveLeaf:dj,directiveLeafAttributeClassValue:lj,directiveLeafAttributeIdValue:aj,directiveLeafAttributeName:uj,directiveLeafAttributeValue:cj,directiveLeafAttributes:fj,directiveLeafName:sj,directiveText:dj,directiveTextAttributeClassValue:lj,directiveTextAttributeIdValue:aj,directiveTextAttributeName:uj,directiveTextAttributeValue:cj,directiveTextAttributes:fj,directiveTextName:sj}}}function _xt(){return{unsafe:[{character:"\r",inConstruct:["leafDirectiveLabel","containerDirectiveLabel"]},{character:`
`,inConstruct:["leafDirectiveLabel","containerDirectiveLabel"]},{before:"[^:]",character:":",after:"[A-Za-z]",inConstruct:["phrasing"]},{atBreak:!0,character:":",after:":"}],handlers:{containerDirective:rO,leafDirective:rO,textDirective:rO}}}function yxt(t){cJ.call(this,"containerDirective",t)}function bxt(t){cJ.call(this,"leafDirective",t)}function Axt(t){cJ.call(this,"textDirective",t)}function cJ(t,e){this.enter({type:t,name:"",attributes:{},children:[]},e)}function sj(t){const e=this.stack[this.stack.length-1];e.type==="containerDirective"||e.type==="leafDirective"||e.type,e.name=this.sliceSerialize(t)}function wxt(t){this.enter({type:"paragraph",data:{directiveLabel:!0},children:[]},t)}function Ext(t){this.exit(t)}function oj(){this.data.directiveAttributes=[],this.buffer()}function aj(t){this.data.directiveAttributes.push(["id",lJ(this.sliceSerialize(t),{attribute:!0})])}function lj(t){this.data.directiveAttributes.push(["class",lJ(this.sliceSerialize(t),{attribute:!0})])}function cj(t){const e=this.data.directiveAttributes;e[e.length-1][1]=lJ(this.sliceSerialize(t),{attribute:!0})}function uj(t){this.data.directiveAttributes.push([this.sliceSerialize(t),""])}function fj(){const t=this.data.directiveAttributes,e={};let n=-1;for(;++n<t.length;){const o=t[n];o[0]==="class"&&e.class?e.class+=" "+o[1]:e[o[0]]=o[1]}this.data.directiveAttributes=void 0,this.resume();const i=this.stack[this.stack.length-1];i.type==="containerDirective"||i.type==="leafDirective"||i.type,i.attributes=e}function dj(t){this.exit(t)}function rO(t,e,n,i){const o=n.createTracker(i),l=xxt(t),d=n.enter(t.type);let p=o.move(l+(t.name||"")),g;if(t.type==="containerDirective"){const v=(t.children||[])[0];g=Hfe(v)?v:void 0}else g=t;if(g&&g.children&&g.children.length>0){const v=n.enter("label"),_=`${t.type}Label`,b=n.enter(_);p+=o.move("["),p+=o.move(n.containerPhrasing(g,{...o.current(),before:p,after:"]"})),p+=o.move("]"),b(),v()}if(p+=o.move(Txt(t,n)),t.type==="containerDirective"){const v=(t.children||[])[0];let _=t;Hfe(v)&&(_=Object.assign({},t,{children:t.children.slice(1)})),_&&_.children&&_.children.length>0&&(p+=o.move(`
`),p+=o.move(n.containerFlow(_,o.current()))),p+=o.move(`
`+l)}return d(),p}function Sxt(){return":"}function Txt(t,e){const n=e.options.quote||'"',i=t.type==="textDirective"?[n]:[n,`
`,"\r"],o=t.attributes||{},l=[];let d,p,g,v;for(v in o)if(gxt.call(o,v)&&o[v]!==void 0&&o[v]!==null){const b=String(o[v]);if(v==="id")g=jfe.test(b)?"#"+b:_("id",b);else if(v==="class"){const w=b.split(/[\t\n\r ]+/g),E=[],S=[];let M=-1;for(;++M<w.length;)(jfe.test(w[M])?S:E).push(w[M]);d=E.length>0?_("class",E.join(" ")):"",p=S.length>0?"."+S.join("."):""}else l.push(_(v,b))}return d&&l.unshift(d),p&&l.unshift(p),g&&l.unshift(g),l.length>0?"{"+l.join(" ")+"}":"";function _(b,w){return b+(w?"="+n+mxt(w,{subset:i})+n:"")}}function Hfe(t){return!!(t&&t.type==="paragraph"&&t.data&&t.data.directiveLabel)}function xxt(t){let e=0;return t.type==="containerDirective"?(oJ(t,function(n,i){if(n.type==="containerDirective"){let o=i.length,l=0;for(;o--;)i[o].type==="containerDirective"&&l++;l>e&&(e=l)}}),e+=3):t.type==="leafDirective"?e=2:e=1,":".repeat(e)}function uJ(t,e,n,i,o,l,d,p,g,v,_,b,w,E,S){let M,k;return x;function x(le){return t.enter(i),t.enter(o),t.consume(le),t.exit(o),C}function C(le){return le===35?(M=d,P(le)):le===46?(M=p,P(le)):le===58||le===95||$a(le)?(t.enter(l),t.enter(g),t.consume(le),B):S&&Zr(le)?Hr(t,C,"whitespace")(le):!S&&Ti(le)?Wh(t,C)(le):J(le)}function P(le){const me=M+"Marker";return t.enter(l),t.enter(M),t.enter(me),t.consume(le),t.exit(me),O}function O(le){if(le===null||le===34||le===35||le===39||le===46||le===60||le===61||le===62||le===96||le===125||Ti(le))return n(le);const me=M+"Value";return t.enter(me),t.consume(le),L}function L(le){if(le===null||le===34||le===39||le===60||le===61||le===62||le===96)return n(le);if(le===35||le===46||le===125||Ti(le)){const me=M+"Value";return t.exit(me),t.exit(M),t.exit(l),C(le)}return t.consume(le),L}function B(le){return le===45||le===46||le===58||le===95||wa(le)?(t.consume(le),B):(t.exit(g),S&&Zr(le)?Hr(t,V,"whitespace")(le):!S&&Ti(le)?Wh(t,V)(le):V(le))}function V(le){return le===61?(t.enter(v),t.consume(le),t.exit(v),G):(t.exit(l),C(le))}function G(le){return le===null||le===60||le===61||le===62||le===96||le===125||S&&Bn(le)?n(le):le===34||le===39?(t.enter(_),t.enter(w),t.consume(le),t.exit(w),k=le,F):S&&Zr(le)?Hr(t,G,"whitespace")(le):!S&&Ti(le)?Wh(t,G)(le):(t.enter(b),t.enter(E),t.consume(le),k=void 0,j)}function j(le){return le===null||le===34||le===39||le===60||le===61||le===62||le===96?n(le):le===125||Ti(le)?(t.exit(E),t.exit(b),t.exit(l),C(le)):(t.consume(le),j)}function F(le){return le===k?(t.enter(w),t.consume(le),t.exit(w),t.exit(_),t.exit(l),ue):(t.enter(b),q(le))}function q(le){return le===k?(t.exit(b),F(le)):le===null?n(le):Bn(le)?S?n(le):Wh(t,q)(le):(t.enter(E),t.consume(le),fe)}function fe(le){return le===k||le===null||Bn(le)?(t.exit(E),q(le)):(t.consume(le),fe)}function ue(le){return le===125||Ti(le)?C(le):J(le)}function J(le){return le===125?(t.enter(o),t.consume(le),t.exit(o),t.exit(i),e):n(le)}}function fJ(t,e,n,i,o,l,d){let p=0,g=0,v;return _;function _(k){return t.enter(i),t.enter(o),t.consume(k),t.exit(o),b}function b(k){return k===93?(t.enter(o),t.consume(k),t.exit(o),t.exit(i),e):(t.enter(l),w(k))}function w(k){if(k===93&&!g)return M(k);const x=t.enter("chunkText",{contentType:"text",previous:v});return v&&(v.next=x),v=x,E(k)}function E(k){return k===null||p>999||k===91&&++g>32?n(k):k===93&&!g--?(t.exit("chunkText"),M(k)):Bn(k)?d?n(k):(t.consume(k),t.exit("chunkText"),w):(t.consume(k),k===92?S:E)}function S(k){return k===91||k===92||k===93?(t.consume(k),p++,E):E(k)}function M(k){return t.exit(l),t.enter(o),t.consume(k),t.exit(o),t.exit(i),e}}function dJ(t,e,n,i){const o=this;return l;function l(p){return $a(p)?(t.enter(i),t.consume(p),d):n(p)}function d(p){return p===45||p===95||wa(p)?(t.consume(p),d):(t.exit(i),o.previous===45||o.previous===95?n(p):e(p))}}const Mxt={tokenize:Pxt,concrete:!0},kxt={tokenize:Rxt,partial:!0},Cxt={tokenize:Dxt,partial:!0},$fe={tokenize:Oxt,partial:!0};function Pxt(t,e,n){const i=this,o=i.events[i.events.length-1],l=o&&o[1].type==="linePrefix"?o[2].sliceSerialize(o[1],!0).length:0;let d=0,p;return g;function g(V){return t.enter("directiveContainer"),t.enter("directiveContainerFence"),t.enter("directiveContainerSequence"),v(V)}function v(V){return V===58?(t.consume(V),d++,v):d<3?n(V):(t.exit("directiveContainerSequence"),dJ.call(i,t,_,n,"directiveContainerName")(V))}function _(V){return V===91?t.attempt(kxt,b,b)(V):b(V)}function b(V){return V===123?t.attempt(Cxt,w,w)(V):w(V)}function w(V){return Hr(t,E,"whitespace")(V)}function E(V){return t.exit("directiveContainerFence"),V===null?S(V):Bn(V)?i.interrupt?e(V):t.attempt($fe,M,S)(V):n(V)}function S(V){return t.exit("directiveContainer"),e(V)}function M(V){return V===null?(t.exit("directiveContainer"),e(V)):(t.enter("directiveContainerContent"),k(V))}function k(V){return V===null?L(V):t.attempt({tokenize:B,partial:!0},L,l?Hr(t,x,"linePrefix",l+1):x)(V)}function x(V){if(V===null)return L(V);const G=t.enter("chunkDocument",{contentType:"document",previous:p});return p&&(p.next=G),p=G,C(V)}function C(V){if(V===null){const G=t.exit("chunkDocument");return i.parser.lazy[G.start.line]=!1,L(V)}return Bn(V)?t.check($fe,P,O)(V):(t.consume(V),C)}function P(V){t.consume(V);const G=t.exit("chunkDocument");return i.parser.lazy[G.start.line]=!1,k}function O(V){const G=t.exit("chunkDocument");return i.parser.lazy[G.start.line]=!1,L(V)}function L(V){return t.exit("directiveContainerContent"),t.exit("directiveContainer"),e(V)}function B(V,G,j){let F=0;return Hr(V,q,"linePrefix",4);function q(J){return V.enter("directiveContainerFence"),V.enter("directiveContainerSequence"),fe(J)}function fe(J){return J===58?(V.consume(J),F++,fe):F<d?j(J):(V.exit("directiveContainerSequence"),Hr(V,ue,"whitespace")(J))}function ue(J){return J===null||Bn(J)?(V.exit("directiveContainerFence"),G(J)):j(J)}}}function Rxt(t,e,n){return fJ(t,e,n,"directiveContainerLabel","directiveContainerLabelMarker","directiveContainerLabelString",!0)}function Dxt(t,e,n){return uJ(t,e,n,"directiveContainerAttributes","directiveContainerAttributesMarker","directiveContainerAttribute","directiveContainerAttributeId","directiveContainerAttributeClass","directiveContainerAttributeName","directiveContainerAttributeInitializerMarker","directiveContainerAttributeValueLiteral","directiveContainerAttributeValue","directiveContainerAttributeValueMarker","directiveContainerAttributeValueData",!0)}function Oxt(t,e,n){const i=this;return o;function o(d){return t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),l}function l(d){return i.parser.lazy[i.now().line]?n(d):e(d)}}const Ixt={tokenize:zxt},Nxt={tokenize:Bxt,partial:!0},Lxt={tokenize:Uxt,partial:!0};function zxt(t,e,n){const i=this;return o;function o(_){return t.enter("directiveLeaf"),t.enter("directiveLeafSequence"),t.consume(_),l}function l(_){return _===58?(t.consume(_),t.exit("directiveLeafSequence"),dJ.call(i,t,d,n,"directiveLeafName")):n(_)}function d(_){return _===91?t.attempt(Nxt,p,p)(_):p(_)}function p(_){return _===123?t.attempt(Lxt,g,g)(_):g(_)}function g(_){return Hr(t,v,"whitespace")(_)}function v(_){return _===null||Bn(_)?(t.exit("directiveLeaf"),e(_)):n(_)}}function Bxt(t,e,n){return fJ(t,e,n,"directiveLeafLabel","directiveLeafLabelMarker","directiveLeafLabelString",!0)}function Uxt(t,e,n){return uJ(t,e,n,"directiveLeafAttributes","directiveLeafAttributesMarker","directiveLeafAttribute","directiveLeafAttributeId","directiveLeafAttributeClass","directiveLeafAttributeName","directiveLeafAttributeInitializerMarker","directiveLeafAttributeValueLiteral","directiveLeafAttributeValue","directiveLeafAttributeValueMarker","directiveLeafAttributeValueData",!0)}const Fxt={tokenize:Hxt,previous:jxt},Vxt={tokenize:$xt,partial:!0},Gxt={tokenize:Wxt,partial:!0};function jxt(t){return t!==58||this.events[this.events.length-1][1].type==="characterEscape"}function Hxt(t,e,n){const i=this;return o;function o(g){return t.enter("directiveText"),t.enter("directiveTextMarker"),t.consume(g),t.exit("directiveTextMarker"),dJ.call(i,t,l,n,"directiveTextName")}function l(g){return g===58?n(g):g===91?t.attempt(Vxt,d,d)(g):d(g)}function d(g){return g===123?t.attempt(Gxt,p,p)(g):p(g)}function p(g){return t.exit("directiveText"),e(g)}}function $xt(t,e,n){return fJ(t,e,n,"directiveTextLabel","directiveTextLabelMarker","directiveTextLabelString")}function Wxt(t,e,n){return uJ(t,e,n,"directiveTextAttributes","directiveTextAttributesMarker","directiveTextAttribute","directiveTextAttributeId","directiveTextAttributeClass","directiveTextAttributeName","directiveTextAttributeInitializerMarker","directiveTextAttributeValueLiteral","directiveTextAttributeValue","directiveTextAttributeValueMarker","directiveTextAttributeValueData")}function Yxt(){return{text:{58:Fxt},flow:{58:[Mxt,Ixt]}}}function qxt(){const e=this.data(),n=e.micromarkExtensions||(e.micromarkExtensions=[]),i=e.fromMarkdownExtensions||(e.fromMarkdownExtensions=[]),o=e.toMarkdownExtensions||(e.toMarkdownExtensions=[]);n.push(Yxt()),i.push(vxt()),o.push(_xt())}function Wfe(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let i=0,o=n.indexOf(e);for(;o!==-1;)i++,o=n.indexOf(e,o+e.length);return i}function Xxt(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function Zxt(t,e,n){const o=aB((n||{}).ignore||[]),l=Qxt(e);let d=-1;for(;++d<l.length;)oJ(t,"text",p);function p(v,_){let b=-1,w;for(;++b<_.length;){const E=_[b],S=w?w.children:void 0;if(o(E,S?S.indexOf(E):void 0,w))return;w=E}if(w)return g(v,_)}function g(v,_){const b=_[_.length-1],w=l[d][0],E=l[d][1];let S=0;const k=b.children.indexOf(v);let x=!1,C=[];w.lastIndex=0;let P=w.exec(v.value);for(;P;){const O=P.index,L={index:P.index,input:P.input,stack:[..._,v]};let B=E(...P,L);if(typeof B=="string"&&(B=B.length>0?{type:"text",value:B}:void 0),B===!1?w.lastIndex=O+1:(S!==O&&C.push({type:"text",value:v.value.slice(S,O)}),Array.isArray(B)?C.push(...B):B&&C.push(B),S=O+P[0].length,x=!0),!w.global)break;P=w.exec(v.value)}return x?(S<v.value.length&&C.push({type:"text",value:v.value.slice(S)}),b.children.splice(k,1,...C)):C=[v],k+C.length}}function Qxt(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let i=-1;for(;++i<n.length;){const o=n[i];e.push([Kxt(o[0]),Jxt(o[1])])}return e}function Kxt(t){return typeof t=="string"?new RegExp(Xxt(t),"g"):t}function Jxt(t){return typeof t=="function"?t:function(){return t}}const hj="phrasing",pj=["autolink","link","image","label"];function eMt(){return{transforms:[aMt],enter:{literalAutolink:nMt,literalAutolinkEmail:mj,literalAutolinkHttp:mj,literalAutolinkWww:mj},exit:{literalAutolink:oMt,literalAutolinkEmail:sMt,literalAutolinkHttp:rMt,literalAutolinkWww:iMt}}}function tMt(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:hj,notInConstruct:pj},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:hj,notInConstruct:pj},{character:":",before:"[ps]",after:"\\/",inConstruct:hj,notInConstruct:pj}]}}function nMt(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function mj(t){this.config.enter.autolinkProtocol.call(this,t)}function rMt(t){this.config.exit.autolinkProtocol.call(this,t)}function iMt(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function sMt(t){this.config.exit.autolinkEmail.call(this,t)}function oMt(t){this.exit(t)}function aMt(t){Zxt(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,lMt],[/([-.\w+]+)@([-\w]+(?:\.[-\w]+)+)/g,cMt]],{ignore:["link","linkReference"]})}function lMt(t,e,n,i,o){let l="";if(!UEe(o)||(/^w/i.test(e)&&(n=e+n,e="",l="http://"),!uMt(n)))return!1;const d=fMt(n+i);if(!d[0])return!1;const p={type:"link",title:null,url:l+e+d[0],children:[{type:"text",value:e+d[0]}]};return d[1]?[p,{type:"text",value:d[1]}]:p}function cMt(t,e,n,i){return!UEe(i,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function uMt(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function fMt(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],i=n.indexOf(")");const o=Wfe(t,"(");let l=Wfe(t,")");for(;i!==-1&&o>l;)t+=n.slice(0,i+1),n=n.slice(i+1),i=n.indexOf(")"),l++;return[t,n]}function UEe(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||rv(n)||iB(n))&&(!e||n!==47)}FEe.peek=wMt;function dMt(){return{enter:{gfmFootnoteDefinition:pMt,gfmFootnoteDefinitionLabelString:mMt,gfmFootnoteCall:_Mt,gfmFootnoteCallString:yMt},exit:{gfmFootnoteDefinition:vMt,gfmFootnoteDefinitionLabelString:gMt,gfmFootnoteCall:AMt,gfmFootnoteCallString:bMt}}}function hMt(){return{unsafe:[{character:"[",inConstruct:["phrasing","label","reference"]}],handlers:{footnoteDefinition:EMt,footnoteReference:FEe}}}function pMt(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function mMt(){this.buffer()}function gMt(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.label=e,n.identifier=C0(this.sliceSerialize(t)).toLowerCase()}function vMt(t){this.exit(t)}function _Mt(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function yMt(){this.buffer()}function bMt(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.label=e,n.identifier=C0(this.sliceSerialize(t)).toLowerCase()}function AMt(t){this.exit(t)}function FEe(t,e,n,i){const o=n.createTracker(i);let l=o.move("[^");const d=n.enter("footnoteReference"),p=n.enter("reference");return l+=o.move(n.safe(n.associationId(t),{...o.current(),before:l,after:"]"})),p(),d(),l+=o.move("]"),l}function wMt(){return"["}function EMt(t,e,n,i){const o=n.createTracker(i);let l=o.move("[^");const d=n.enter("footnoteDefinition"),p=n.enter("label");return l+=o.move(n.safe(n.associationId(t),{...o.current(),before:l,after:"]"})),p(),l+=o.move("]:"+(t.children&&t.children.length>0?" ":"")),o.shift(4),l+=o.move(n.indentLines(n.containerFlow(t,o.current()),SMt)),d(),l}function SMt(t,e,n){return e===0?t:(n?"":"    ")+t}const TMt=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];VEe.peek=PMt;function xMt(){return{canContainEols:["delete"],enter:{strikethrough:kMt},exit:{strikethrough:CMt}}}function MMt(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:TMt}],handlers:{delete:VEe}}}function kMt(t){this.enter({type:"delete",children:[]},t)}function CMt(t){this.exit(t)}function VEe(t,e,n,i){const o=n.createTracker(i),l=n.enter("strikethrough");let d=o.move("~~");return d+=n.containerPhrasing(t,{...o.current(),before:d,after:"~"}),d+=o.move("~~"),l(),d}function PMt(){return"~"}function RMt(t,e={}){const n=(e.align||[]).concat(),i=e.stringLength||OMt,o=[],l=[],d=[],p=[];let g=0,v=-1;for(;++v<t.length;){const S=[],M=[];let k=-1;for(t[v].length>g&&(g=t[v].length);++k<t[v].length;){const x=DMt(t[v][k]);if(e.alignDelimiters!==!1){const C=i(x);M[k]=C,(p[k]===void 0||C>p[k])&&(p[k]=C)}S.push(x)}l[v]=S,d[v]=M}let _=-1;if(typeof n=="object"&&"length"in n)for(;++_<g;)o[_]=Yfe(n[_]);else{const S=Yfe(n);for(;++_<g;)o[_]=S}_=-1;const b=[],w=[];for(;++_<g;){const S=o[_];let M="",k="";S===99?(M=":",k=":"):S===108?M=":":S===114&&(k=":");let x=e.alignDelimiters===!1?1:Math.max(1,p[_]-M.length-k.length);const C=M+"-".repeat(x)+k;e.alignDelimiters!==!1&&(x=M.length+x+k.length,x>p[_]&&(p[_]=x),w[_]=x),b[_]=C}l.splice(1,0,b),d.splice(1,0,w),v=-1;const E=[];for(;++v<l.length;){const S=l[v],M=d[v];_=-1;const k=[];for(;++_<g;){const x=S[_]||"";let C="",P="";if(e.alignDelimiters!==!1){const O=p[_]-(M[_]||0),L=o[_];L===114?C=" ".repeat(O):L===99?O%2?(C=" ".repeat(O/2+.5),P=" ".repeat(O/2-.5)):(C=" ".repeat(O/2),P=C):P=" ".repeat(O)}e.delimiterStart!==!1&&!_&&k.push("|"),e.padding!==!1&&!(e.alignDelimiters===!1&&x==="")&&(e.delimiterStart!==!1||_)&&k.push(" "),e.alignDelimiters!==!1&&k.push(C),k.push(x),e.alignDelimiters!==!1&&k.push(P),e.padding!==!1&&k.push(" "),(e.delimiterEnd!==!1||_!==g-1)&&k.push("|")}E.push(e.delimiterEnd===!1?k.join("").replace(/ +$/,""):k.join(""))}return E.join(`
`)}function DMt(t){return t==null?"":String(t)}function OMt(t){return t.length}function Yfe(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function IMt(t,e,n,i){const o=n.enter("blockquote"),l=n.createTracker(i);l.move("> "),l.shift(2);const d=n.indentLines(n.containerFlow(t,l.current()),NMt);return o(),d}function NMt(t,e,n){return">"+(n?"":" ")+t}function LMt(t,e){return qfe(t,e.inConstruct,!0)&&!qfe(t,e.notInConstruct,!1)}function qfe(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let i=-1;for(;++i<e.length;)if(t.includes(e[i]))return!0;return!1}function Xfe(t,e,n,i){let o=-1;for(;++o<n.unsafe.length;)if(n.unsafe[o].character===`
`&&LMt(n.stack,n.unsafe[o]))return/[ \t]/.test(i.before)?"":" ";return`\\
`}function zMt(t,e){const n=String(t);let i=n.indexOf(e),o=i,l=0,d=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;i!==-1;)i===o?++l>d&&(d=l):l=1,o=i+e.length,i=n.indexOf(e,o);return d}function BMt(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function UMt(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function FMt(t,e,n,i){const o=UMt(n),l=t.value||"",d=o==="`"?"GraveAccent":"Tilde";if(BMt(t,n)){const b=n.enter("codeIndented"),w=n.indentLines(l,VMt);return b(),w}const p=n.createTracker(i),g=o.repeat(Math.max(zMt(l,o)+1,3)),v=n.enter("codeFenced");let _=p.move(g);if(t.lang){const b=n.enter(`codeFencedLang${d}`);_+=p.move(n.safe(t.lang,{before:_,after:" ",encode:["`"],...p.current()})),b()}if(t.lang&&t.meta){const b=n.enter(`codeFencedMeta${d}`);_+=p.move(" "),_+=p.move(n.safe(t.meta,{before:_,after:`
`,encode:["`"],...p.current()})),b()}return _+=p.move(`
`),l&&(_+=p.move(l+`
`)),_+=p.move(g),v(),_}function VMt(t,e,n){return(n?"":"    ")+t}function hJ(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function GMt(t,e,n,i){const o=hJ(n),l=o==='"'?"Quote":"Apostrophe",d=n.enter("definition");let p=n.enter("label");const g=n.createTracker(i);let v=g.move("[");return v+=g.move(n.safe(n.associationId(t),{before:v,after:"]",...g.current()})),v+=g.move("]: "),p(),!t.url||/[\0- \u007F]/.test(t.url)?(p=n.enter("destinationLiteral"),v+=g.move("<"),v+=g.move(n.safe(t.url,{before:v,after:">",...g.current()})),v+=g.move(">")):(p=n.enter("destinationRaw"),v+=g.move(n.safe(t.url,{before:v,after:t.title?" ":`
`,...g.current()}))),p(),t.title&&(p=n.enter(`title${l}`),v+=g.move(" "+o),v+=g.move(n.safe(t.title,{before:v,after:o,...g.current()})),v+=g.move(o),p()),d(),v}function jMt(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}GEe.peek=HMt;function GEe(t,e,n,i){const o=jMt(n),l=n.enter("emphasis"),d=n.createTracker(i);let p=d.move(o);return p+=d.move(n.containerPhrasing(t,{before:p,after:o,...d.current()})),p+=d.move(o),l(),p}function HMt(t,e,n){return n.options.emphasis||"*"}function $Mt(t,e){let n=!1;return cB(t,function(i){if("value"in i&&/\r?\n|\r/.test(i.value)||i.type==="break")return n=!0,iY}),!!((!t.depth||t.depth<3)&&eJ(t)&&(e.options.setext||n))}function WMt(t,e,n,i){const o=Math.max(Math.min(6,t.depth||1),1),l=n.createTracker(i);if($Mt(t,n)){const _=n.enter("headingSetext"),b=n.enter("phrasing"),w=n.containerPhrasing(t,{...l.current(),before:`
`,after:`
`});return b(),_(),w+`
`+(o===1?"=":"-").repeat(w.length-(Math.max(w.lastIndexOf("\r"),w.lastIndexOf(`
`))+1))}const d="#".repeat(o),p=n.enter("headingAtx"),g=n.enter("phrasing");l.move(d+" ");let v=n.containerPhrasing(t,{before:"# ",after:`
`,...l.current()});return/^[\t ]/.test(v)&&(v="&#x"+v.charCodeAt(0).toString(16).toUpperCase()+";"+v.slice(1)),v=v?d+" "+v:d,n.options.closeAtx&&(v+=" "+d),g(),p(),v}jEe.peek=YMt;function jEe(t){return t.value||""}function YMt(){return"<"}HEe.peek=qMt;function HEe(t,e,n,i){const o=hJ(n),l=o==='"'?"Quote":"Apostrophe",d=n.enter("image");let p=n.enter("label");const g=n.createTracker(i);let v=g.move("![");return v+=g.move(n.safe(t.alt,{before:v,after:"]",...g.current()})),v+=g.move("]("),p(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(p=n.enter("destinationLiteral"),v+=g.move("<"),v+=g.move(n.safe(t.url,{before:v,after:">",...g.current()})),v+=g.move(">")):(p=n.enter("destinationRaw"),v+=g.move(n.safe(t.url,{before:v,after:t.title?" ":")",...g.current()}))),p(),t.title&&(p=n.enter(`title${l}`),v+=g.move(" "+o),v+=g.move(n.safe(t.title,{before:v,after:o,...g.current()})),v+=g.move(o),p()),v+=g.move(")"),d(),v}function qMt(){return"!"}$Ee.peek=XMt;function $Ee(t,e,n,i){const o=t.referenceType,l=n.enter("imageReference");let d=n.enter("label");const p=n.createTracker(i);let g=p.move("![");const v=n.safe(t.alt,{before:g,after:"]",...p.current()});g+=p.move(v+"]["),d();const _=n.stack;n.stack=[],d=n.enter("reference");const b=n.safe(n.associationId(t),{before:g,after:"]",...p.current()});return d(),n.stack=_,l(),o==="full"||!v||v!==b?g+=p.move(b+"]"):o==="shortcut"?g=g.slice(0,-1):g+=p.move("]"),g}function XMt(){return"!"}WEe.peek=ZMt;function WEe(t,e,n){let i=t.value||"",o="`",l=-1;for(;new RegExp("(^|[^`])"+o+"([^`]|$)").test(i);)o+="`";for(/[^ \r\n]/.test(i)&&(/^[ \r\n]/.test(i)&&/[ \r\n]$/.test(i)||/^`|`$/.test(i))&&(i=" "+i+" ");++l<n.unsafe.length;){const d=n.unsafe[l],p=n.compilePattern(d);let g;if(d.atBreak)for(;g=p.exec(i);){let v=g.index;i.charCodeAt(v)===10&&i.charCodeAt(v-1)===13&&v--,i=i.slice(0,v)+" "+i.slice(g.index+1)}}return o+i+o}function ZMt(){return"`"}function YEe(t,e){const n=eJ(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}qEe.peek=QMt;function qEe(t,e,n,i){const o=hJ(n),l=o==='"'?"Quote":"Apostrophe",d=n.createTracker(i);let p,g;if(YEe(t,n)){const _=n.stack;n.stack=[],p=n.enter("autolink");let b=d.move("<");return b+=d.move(n.containerPhrasing(t,{before:b,after:">",...d.current()})),b+=d.move(">"),p(),n.stack=_,b}p=n.enter("link"),g=n.enter("label");let v=d.move("[");return v+=d.move(n.containerPhrasing(t,{before:v,after:"](",...d.current()})),v+=d.move("]("),g(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(g=n.enter("destinationLiteral"),v+=d.move("<"),v+=d.move(n.safe(t.url,{before:v,after:">",...d.current()})),v+=d.move(">")):(g=n.enter("destinationRaw"),v+=d.move(n.safe(t.url,{before:v,after:t.title?" ":")",...d.current()}))),g(),t.title&&(g=n.enter(`title${l}`),v+=d.move(" "+o),v+=d.move(n.safe(t.title,{before:v,after:o,...d.current()})),v+=d.move(o),g()),v+=d.move(")"),p(),v}function QMt(t,e,n){return YEe(t,n)?"<":"["}XEe.peek=KMt;function XEe(t,e,n,i){const o=t.referenceType,l=n.enter("linkReference");let d=n.enter("label");const p=n.createTracker(i);let g=p.move("[");const v=n.containerPhrasing(t,{before:g,after:"]",...p.current()});g+=p.move(v+"]["),d();const _=n.stack;n.stack=[],d=n.enter("reference");const b=n.safe(n.associationId(t),{before:g,after:"]",...p.current()});return d(),n.stack=_,l(),o==="full"||!v||v!==b?g+=p.move(b+"]"):o==="shortcut"?g=g.slice(0,-1):g+=p.move("]"),g}function KMt(){return"["}function pJ(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function JMt(t){const e=pJ(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function e8t(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function ZEe(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function t8t(t,e,n,i){const o=n.enter("list"),l=n.bulletCurrent;let d=t.ordered?e8t(n):pJ(n);const p=t.ordered?d==="."?")":".":JMt(n);let g=e&&n.bulletLastUsed?d===n.bulletLastUsed:!1;if(!t.ordered){const _=t.children?t.children[0]:void 0;if((d==="*"||d==="-")&&_&&(!_.children||!_.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(g=!0),ZEe(n)===d&&_){let b=-1;for(;++b<t.children.length;){const w=t.children[b];if(w&&w.type==="listItem"&&w.children&&w.children[0]&&w.children[0].type==="thematicBreak"){g=!0;break}}}}g&&(d=p),n.bulletCurrent=d;const v=n.containerFlow(t,i);return n.bulletLastUsed=d,n.bulletCurrent=l,o(),v}function n8t(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function r8t(t,e,n,i){const o=n8t(n);let l=n.bulletCurrent||pJ(n);e&&e.type==="list"&&e.ordered&&(l=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+l);let d=l.length+1;(o==="tab"||o==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(d=Math.ceil(d/4)*4);const p=n.createTracker(i);p.move(l+" ".repeat(d-l.length)),p.shift(d);const g=n.enter("listItem"),v=n.indentLines(n.containerFlow(t,p.current()),_);return g(),v;function _(b,w,E){return w?(E?"":" ".repeat(d))+b:(E?l:l+" ".repeat(d-l.length))+b}}function i8t(t,e,n,i){const o=n.enter("paragraph"),l=n.enter("phrasing"),d=n.containerPhrasing(t,i);return l(),o(),d}const s8t=aB(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function o8t(t,e,n,i){return(t.children.some(function(d){return s8t(d)})?n.containerPhrasing:n.containerFlow).call(n,t,i)}function a8t(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}QEe.peek=l8t;function QEe(t,e,n,i){const o=a8t(n),l=n.enter("strong"),d=n.createTracker(i);let p=d.move(o+o);return p+=d.move(n.containerPhrasing(t,{before:p,after:o,...d.current()})),p+=d.move(o+o),l(),p}function l8t(t,e,n){return n.options.strong||"*"}function c8t(t,e,n,i){return n.safe(t.value,i)}function u8t(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function f8t(t,e,n){const i=(ZEe(n)+(n.options.ruleSpaces?" ":"")).repeat(u8t(n));return n.options.ruleSpaces?i.slice(0,-1):i}const KEe={blockquote:IMt,break:Xfe,code:FMt,definition:GMt,emphasis:GEe,hardBreak:Xfe,heading:WMt,html:jEe,image:HEe,imageReference:$Ee,inlineCode:WEe,link:qEe,linkReference:XEe,list:t8t,listItem:r8t,paragraph:i8t,root:o8t,strong:QEe,text:c8t,thematicBreak:f8t};function d8t(){return{enter:{table:h8t,tableData:Zfe,tableHeader:Zfe,tableRow:m8t},exit:{codeText:g8t,table:p8t,tableData:gj,tableHeader:gj,tableRow:gj}}}function h8t(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function p8t(t){this.exit(t),this.data.inTable=void 0}function m8t(t){this.enter({type:"tableRow",children:[]},t)}function gj(t){this.exit(t)}function Zfe(t){this.enter({type:"tableCell",children:[]},t)}function g8t(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,v8t));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function v8t(t,e){return e==="|"?e:t}function _8t(t){const e=t||{},n=e.tableCellPadding,i=e.tablePipeAlign,o=e.stringLength,l=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:w,table:d,tableCell:g,tableRow:p}};function d(E,S,M,k){return v(_(E,M,k),E.align)}function p(E,S,M,k){const x=b(E,M,k),C=v([x]);return C.slice(0,C.indexOf(`
`))}function g(E,S,M,k){const x=M.enter("tableCell"),C=M.enter("phrasing"),P=M.containerPhrasing(E,{...k,before:l,after:l});return C(),x(),P}function v(E,S){return RMt(E,{align:S,alignDelimiters:i,padding:n,stringLength:o})}function _(E,S,M){const k=E.children;let x=-1;const C=[],P=S.enter("table");for(;++x<k.length;)C[x]=b(k[x],S,M);return P(),C}function b(E,S,M){const k=E.children;let x=-1;const C=[],P=S.enter("tableRow");for(;++x<k.length;)C[x]=g(k[x],E,S,M);return P(),C}function w(E,S,M){let k=KEe.inlineCode(E,S,M);return M.stack.includes("tableCell")&&(k=k.replace(/\|/g,"\\$&")),k}}function y8t(){return{exit:{taskListCheckValueChecked:Qfe,taskListCheckValueUnchecked:Qfe,paragraph:A8t}}}function b8t(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:w8t}}}function Qfe(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function A8t(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const i=n.children[0];if(i&&i.type==="text"){const o=e.children;let l=-1,d;for(;++l<o.length;){const p=o[l];if(p.type==="paragraph"){d=p;break}}d===n&&(i.value=i.value.slice(1),i.value.length===0?n.children.shift():n.position&&i.position&&typeof i.position.start.offset=="number"&&(i.position.start.column++,i.position.start.offset++,n.position.start=Object.assign({},i.position.start)))}}this.exit(t)}function w8t(t,e,n,i){const o=t.children[0],l=typeof t.checked=="boolean"&&o&&o.type==="paragraph",d="["+(t.checked?"x":" ")+"] ",p=n.createTracker(i);l&&p.move(d);let g=KEe.listItem(t,e,n,{...i,...p.current()});return l&&(g=g.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,v)),g;function v(_){return _+d}}function E8t(){return[eMt(),dMt(),xMt(),d8t(),y8t()]}function S8t(t){return{extensions:[tMt(),hMt(),MMt(),_8t(t),b8t()]}}const T8t={tokenize:R8t,partial:!0},JEe={tokenize:D8t,partial:!0},eSe={tokenize:O8t,partial:!0},tSe={tokenize:I8t,partial:!0},x8t={tokenize:N8t,partial:!0},nSe={tokenize:C8t,previous:iSe},rSe={tokenize:P8t,previous:sSe},kp={tokenize:k8t,previous:oSe},jd={};function M8t(){return{text:jd}}let $1=48;for(;$1<123;)jd[$1]=kp,$1++,$1===58?$1=65:$1===91&&($1=97);jd[43]=kp;jd[45]=kp;jd[46]=kp;jd[95]=kp;jd[72]=[kp,rSe];jd[104]=[kp,rSe];jd[87]=[kp,nSe];jd[119]=[kp,nSe];function k8t(t,e,n){const i=this;let o,l;return d;function d(b){return!lY(b)||!oSe.call(i,i.previous)||mJ(i.events)?n(b):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),p(b))}function p(b){return lY(b)?(t.consume(b),p):b===64?(t.consume(b),g):n(b)}function g(b){return b===46?t.check(x8t,_,v)(b):b===45||b===95||wa(b)?(l=!0,t.consume(b),g):_(b)}function v(b){return t.consume(b),o=!0,g}function _(b){return l&&o&&$a(i.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(b)):n(b)}}function C8t(t,e,n){const i=this;return o;function o(d){return d!==87&&d!==119||!iSe.call(i,i.previous)||mJ(i.events)?n(d):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(T8t,t.attempt(JEe,t.attempt(eSe,l),n),n)(d))}function l(d){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(d)}}function P8t(t,e,n){const i=this;let o="",l=!1;return d;function d(b){return(b===72||b===104)&&sSe.call(i,i.previous)&&!mJ(i.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),o+=String.fromCodePoint(b),t.consume(b),p):n(b)}function p(b){if($a(b)&&o.length<5)return o+=String.fromCodePoint(b),t.consume(b),p;if(b===58){const w=o.toLowerCase();if(w==="http"||w==="https")return t.consume(b),g}return n(b)}function g(b){return b===47?(t.consume(b),l?v:(l=!0,g)):n(b)}function v(b){return b===null||cI(b)||Ti(b)||rv(b)||iB(b)?n(b):t.attempt(JEe,t.attempt(eSe,_),n)(b)}function _(b){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(b)}}function R8t(t,e,n){let i=0;return o;function o(d){return(d===87||d===119)&&i<3?(i++,t.consume(d),o):d===46&&i===3?(t.consume(d),l):n(d)}function l(d){return d===null?n(d):e(d)}}function D8t(t,e,n){let i,o,l;return d;function d(v){return v===46||v===95?t.check(tSe,g,p)(v):v===null||Ti(v)||rv(v)||v!==45&&iB(v)?g(v):(l=!0,t.consume(v),d)}function p(v){return v===95?i=!0:(o=i,i=void 0),t.consume(v),d}function g(v){return o||i||!l?n(v):e(v)}}function O8t(t,e){let n=0,i=0;return o;function o(d){return d===40?(n++,t.consume(d),o):d===41&&i<n?l(d):d===33||d===34||d===38||d===39||d===41||d===42||d===44||d===46||d===58||d===59||d===60||d===63||d===93||d===95||d===126?t.check(tSe,e,l)(d):d===null||Ti(d)||rv(d)?e(d):(t.consume(d),o)}function l(d){return d===41&&i++,t.consume(d),o}}function I8t(t,e,n){return i;function i(p){return p===33||p===34||p===39||p===41||p===42||p===44||p===46||p===58||p===59||p===63||p===95||p===126?(t.consume(p),i):p===38?(t.consume(p),l):p===93?(t.consume(p),o):p===60||p===null||Ti(p)||rv(p)?e(p):n(p)}function o(p){return p===null||p===40||p===91||Ti(p)||rv(p)?e(p):i(p)}function l(p){return $a(p)?d(p):n(p)}function d(p){return p===59?(t.consume(p),i):$a(p)?(t.consume(p),d):n(p)}}function N8t(t,e,n){return i;function i(l){return t.consume(l),o}function o(l){return wa(l)?n(l):e(l)}}function iSe(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||Ti(t)}function sSe(t){return!$a(t)}function oSe(t){return!(t===47||lY(t))}function lY(t){return t===43||t===45||t===46||t===95||wa(t)}function mJ(t){let e=t.length,n=!1;for(;e--;){const i=t[e][1];if((i.type==="labelLink"||i.type==="labelImage")&&!i._balanced){n=!0;break}if(i._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const L8t={tokenize:H8t,partial:!0};function z8t(){return{document:{91:{tokenize:V8t,continuation:{tokenize:G8t},exit:j8t}},text:{91:{tokenize:F8t},93:{add:"after",tokenize:B8t,resolveTo:U8t}}}}function B8t(t,e,n){const i=this;let o=i.events.length;const l=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let d;for(;o--;){const g=i.events[o][1];if(g.type==="labelImage"){d=g;break}if(g.type==="gfmFootnoteCall"||g.type==="labelLink"||g.type==="label"||g.type==="image"||g.type==="link")break}return p;function p(g){if(!d||!d._balanced)return n(g);const v=C0(i.sliceSerialize({start:d.end,end:i.now()}));return v.codePointAt(0)!==94||!l.includes(v.slice(1))?n(g):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(g),t.exit("gfmFootnoteCallLabelMarker"),e(g))}}function U8t(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const i={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},o={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};o.end.column++,o.end.offset++,o.end._bufferIndex++;const l={type:"gfmFootnoteCallString",start:Object.assign({},o.end),end:Object.assign({},t[t.length-1][1].start)},d={type:"chunkString",contentType:"string",start:Object.assign({},l.start),end:Object.assign({},l.end)},p=[t[n+1],t[n+2],["enter",i,e],t[n+3],t[n+4],["enter",o,e],["exit",o,e],["enter",l,e],["enter",d,e],["exit",d,e],["exit",l,e],t[t.length-2],t[t.length-1],["exit",i,e]];return t.splice(n,t.length-n+1,...p),t}function F8t(t,e,n){const i=this,o=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let l=0,d;return p;function p(b){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(b),t.exit("gfmFootnoteCallLabelMarker"),g}function g(b){return b!==94?n(b):(t.enter("gfmFootnoteCallMarker"),t.consume(b),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",v)}function v(b){if(l>999||b===93&&!d||b===null||b===91||Ti(b))return n(b);if(b===93){t.exit("chunkString");const w=t.exit("gfmFootnoteCallString");return o.includes(C0(i.sliceSerialize(w)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(b),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(b)}return Ti(b)||(d=!0),l++,t.consume(b),b===92?_:v}function _(b){return b===91||b===92||b===93?(t.consume(b),l++,v):v(b)}}function V8t(t,e,n){const i=this,o=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let l,d=0,p;return g;function g(S){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(S),t.exit("gfmFootnoteDefinitionLabelMarker"),v}function v(S){return S===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(S),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",_):n(S)}function _(S){if(d>999||S===93&&!p||S===null||S===91||Ti(S))return n(S);if(S===93){t.exit("chunkString");const M=t.exit("gfmFootnoteDefinitionLabelString");return l=C0(i.sliceSerialize(M)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(S),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),w}return Ti(S)||(p=!0),d++,t.consume(S),S===92?b:_}function b(S){return S===91||S===92||S===93?(t.consume(S),d++,_):_(S)}function w(S){return S===58?(t.enter("definitionMarker"),t.consume(S),t.exit("definitionMarker"),o.includes(l)||o.push(l),Hr(t,E,"gfmFootnoteDefinitionWhitespace")):n(S)}function E(S){return e(S)}}function G8t(t,e,n){return t.check(yM,e,t.attempt(L8t,e,n))}function j8t(t){t.exit("gfmFootnoteDefinition")}function H8t(t,e,n){const i=this;return Hr(t,o,"gfmFootnoteDefinitionIndent",5);function o(l){const d=i.events[i.events.length-1];return d&&d[1].type==="gfmFootnoteDefinitionIndent"&&d[2].sliceSerialize(d[1],!0).length===4?e(l):n(l)}}function $8t(t){let n=(t||{}).singleTilde;const i={tokenize:l,resolveAll:o};return n==null&&(n=!0),{text:{126:i},insideSpan:{null:[i]},attentionMarkers:{null:[126]}};function o(d,p){let g=-1;for(;++g<d.length;)if(d[g][0]==="enter"&&d[g][1].type==="strikethroughSequenceTemporary"&&d[g][1]._close){let v=g;for(;v--;)if(d[v][0]==="exit"&&d[v][1].type==="strikethroughSequenceTemporary"&&d[v][1]._open&&d[g][1].end.offset-d[g][1].start.offset===d[v][1].end.offset-d[v][1].start.offset){d[g][1].type="strikethroughSequence",d[v][1].type="strikethroughSequence";const _={type:"strikethrough",start:Object.assign({},d[v][1].start),end:Object.assign({},d[g][1].end)},b={type:"strikethroughText",start:Object.assign({},d[v][1].end),end:Object.assign({},d[g][1].start)},w=[["enter",_,p],["enter",d[v][1],p],["exit",d[v][1],p],["enter",b,p]],E=p.parser.constructs.insideSpan.null;E&&Mf(w,w.length,0,sB(E,d.slice(v+1,g),p)),Mf(w,w.length,0,[["exit",b,p],["enter",d[g][1],p],["exit",d[g][1],p],["exit",_,p]]),Mf(d,v-1,g-v+3,w),g=v+w.length-2;break}}for(g=-1;++g<d.length;)d[g][1].type==="strikethroughSequenceTemporary"&&(d[g][1].type="data");return d}function l(d,p,g){const v=this.previous,_=this.events;let b=0;return w;function w(S){return v===126&&_[_.length-1][1].type!=="characterEscape"?g(S):(d.enter("strikethroughSequenceTemporary"),E(S))}function E(S){const M=uI(v);if(S===126)return b>1?g(S):(d.consume(S),b++,E);if(b<2&&!n)return g(S);const k=d.exit("strikethroughSequenceTemporary"),x=uI(S);return k._open=!x||x===2&&!!M,k._close=!M||M===2&&!!x,p(S)}}}class W8t{constructor(){this.map=[]}add(e,n,i){Y8t(this,e,n,i)}consume(e){if(this.map.sort(function(l,d){return l[0]-d[0]}),this.map.length===0)return;let n=this.map.length;const i=[];for(;n>0;)n-=1,i.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];i.push([...e]),e.length=0;let o=i.pop();for(;o;)e.push(...o),o=i.pop();this.map.length=0}}function Y8t(t,e,n,i){let o=0;if(!(n===0&&i.length===0)){for(;o<t.map.length;){if(t.map[o][0]===e){t.map[o][1]+=n,t.map[o][2].push(...i);return}o+=1}t.map.push([e,n,i])}}function q8t(t,e){let n=!1;const i=[];for(;e<t.length;){const o=t[e];if(n){if(o[0]==="enter")o[1].type==="tableContent"&&i.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(o[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const l=i.length-1;i[l]=i[l]==="left"?"center":"right"}}else if(o[1].type==="tableDelimiterRow")break}else o[0]==="enter"&&o[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return i}function X8t(){return{flow:{null:{tokenize:Z8t,resolveAll:Q8t}}}}function Z8t(t,e,n){const i=this;let o=0,l=0,d;return p;function p(F){let q=i.events.length-1;for(;q>-1;){const J=i.events[q][1].type;if(J==="lineEnding"||J==="linePrefix")q--;else break}const fe=q>-1?i.events[q][1].type:null,ue=fe==="tableHead"||fe==="tableRow"?B:g;return ue===B&&i.parser.lazy[i.now().line]?n(F):ue(F)}function g(F){return t.enter("tableHead"),t.enter("tableRow"),v(F)}function v(F){return F===124||(d=!0,l+=1),_(F)}function _(F){return F===null?n(F):Bn(F)?l>1?(l=0,i.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(F),t.exit("lineEnding"),E):n(F):Zr(F)?Hr(t,_,"whitespace")(F):(l+=1,d&&(d=!1,o+=1),F===124?(t.enter("tableCellDivider"),t.consume(F),t.exit("tableCellDivider"),d=!0,_):(t.enter("data"),b(F)))}function b(F){return F===null||F===124||Ti(F)?(t.exit("data"),_(F)):(t.consume(F),F===92?w:b)}function w(F){return F===92||F===124?(t.consume(F),b):b(F)}function E(F){return i.interrupt=!1,i.parser.lazy[i.now().line]?n(F):(t.enter("tableDelimiterRow"),d=!1,Zr(F)?Hr(t,S,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):S(F))}function S(F){return F===45||F===58?k(F):F===124?(d=!0,t.enter("tableCellDivider"),t.consume(F),t.exit("tableCellDivider"),M):L(F)}function M(F){return Zr(F)?Hr(t,k,"whitespace")(F):k(F)}function k(F){return F===58?(l+=1,d=!0,t.enter("tableDelimiterMarker"),t.consume(F),t.exit("tableDelimiterMarker"),x):F===45?(l+=1,x(F)):F===null||Bn(F)?O(F):L(F)}function x(F){return F===45?(t.enter("tableDelimiterFiller"),C(F)):L(F)}function C(F){return F===45?(t.consume(F),C):F===58?(d=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(F),t.exit("tableDelimiterMarker"),P):(t.exit("tableDelimiterFiller"),P(F))}function P(F){return Zr(F)?Hr(t,O,"whitespace")(F):O(F)}function O(F){return F===124?S(F):F===null||Bn(F)?!d||o!==l?L(F):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(F)):L(F)}function L(F){return n(F)}function B(F){return t.enter("tableRow"),V(F)}function V(F){return F===124?(t.enter("tableCellDivider"),t.consume(F),t.exit("tableCellDivider"),V):F===null||Bn(F)?(t.exit("tableRow"),e(F)):Zr(F)?Hr(t,V,"whitespace")(F):(t.enter("data"),G(F))}function G(F){return F===null||F===124||Ti(F)?(t.exit("data"),V(F)):(t.consume(F),F===92?j:G)}function j(F){return F===92||F===124?(t.consume(F),G):G(F)}}function Q8t(t,e){let n=-1,i=!0,o=0,l=[0,0,0,0],d=[0,0,0,0],p=!1,g=0,v,_,b;const w=new W8t;for(;++n<t.length;){const E=t[n],S=E[1];E[0]==="enter"?S.type==="tableHead"?(p=!1,g!==0&&(Kfe(w,e,g,v,_),_=void 0,g=0),v={type:"table",start:Object.assign({},S.start),end:Object.assign({},S.end)},w.add(n,0,[["enter",v,e]])):S.type==="tableRow"||S.type==="tableDelimiterRow"?(i=!0,b=void 0,l=[0,0,0,0],d=[0,n+1,0,0],p&&(p=!1,_={type:"tableBody",start:Object.assign({},S.start),end:Object.assign({},S.end)},w.add(n,0,[["enter",_,e]])),o=S.type==="tableDelimiterRow"?2:_?3:1):o&&(S.type==="data"||S.type==="tableDelimiterMarker"||S.type==="tableDelimiterFiller")?(i=!1,d[2]===0&&(l[1]!==0&&(d[0]=d[1],b=CC(w,e,l,o,void 0,b),l=[0,0,0,0]),d[2]=n)):S.type==="tableCellDivider"&&(i?i=!1:(l[1]!==0&&(d[0]=d[1],b=CC(w,e,l,o,void 0,b)),l=d,d=[l[1],n,0,0])):S.type==="tableHead"?(p=!0,g=n):S.type==="tableRow"||S.type==="tableDelimiterRow"?(g=n,l[1]!==0?(d[0]=d[1],b=CC(w,e,l,o,n,b)):d[1]!==0&&(b=CC(w,e,d,o,n,b)),o=0):o&&(S.type==="data"||S.type==="tableDelimiterMarker"||S.type==="tableDelimiterFiller")&&(d[3]=n)}for(g!==0&&Kfe(w,e,g,v,_),w.consume(e.events),n=-1;++n<e.events.length;){const E=e.events[n];E[0]==="enter"&&E[1].type==="table"&&(E[1]._align=q8t(e.events,n))}return t}function CC(t,e,n,i,o,l){const d=i===1?"tableHeader":i===2?"tableDelimiter":"tableData",p="tableContent";n[0]!==0&&(l.end=Object.assign({},Yy(e.events,n[0])),t.add(n[0],0,[["exit",l,e]]));const g=Yy(e.events,n[1]);if(l={type:d,start:Object.assign({},g),end:Object.assign({},g)},t.add(n[1],0,[["enter",l,e]]),n[2]!==0){const v=Yy(e.events,n[2]),_=Yy(e.events,n[3]),b={type:p,start:Object.assign({},v),end:Object.assign({},_)};if(t.add(n[2],0,[["enter",b,e]]),i!==2){const w=e.events[n[2]],E=e.events[n[3]];if(w[1].end=Object.assign({},E[1].end),w[1].type="chunkText",w[1].contentType="text",n[3]>n[2]+1){const S=n[2]+1,M=n[3]-n[2]-1;t.add(S,M,[])}}t.add(n[3]+1,0,[["exit",b,e]])}return o!==void 0&&(l.end=Object.assign({},Yy(e.events,o)),t.add(o,0,[["exit",l,e]]),l=void 0),l}function Kfe(t,e,n,i,o){const l=[],d=Yy(e.events,n);o&&(o.end=Object.assign({},d),l.push(["exit",o,e])),i.end=Object.assign({},d),l.push(["exit",i,e]),t.add(n+1,0,l)}function Yy(t,e){const n=t[e],i=n[0]==="enter"?"start":"end";return n[1][i]}const K8t={tokenize:ekt};function J8t(){return{text:{91:K8t}}}function ekt(t,e,n){const i=this;return o;function o(g){return i.previous!==null||!i._gfmTasklistFirstContentOfListItem?n(g):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(g),t.exit("taskListCheckMarker"),l)}function l(g){return Ti(g)?(t.enter("taskListCheckValueUnchecked"),t.consume(g),t.exit("taskListCheckValueUnchecked"),d):g===88||g===120?(t.enter("taskListCheckValueChecked"),t.consume(g),t.exit("taskListCheckValueChecked"),d):n(g)}function d(g){return g===93?(t.enter("taskListCheckMarker"),t.consume(g),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),p):n(g)}function p(g){return Bn(g)?e(g):Zr(g)?t.check({tokenize:tkt},e,n)(g):n(g)}}function tkt(t,e,n){return Hr(t,i,"whitespace");function i(o){return o===null?n(o):e(o)}}function nkt(t){return vEe([M8t(),z8t(),$8t(t),X8t(),J8t()])}const rkt={};function ikt(t){const e=this,n=t||rkt,i=e.data(),o=i.micromarkExtensions||(i.micromarkExtensions=[]),l=i.fromMarkdownExtensions||(i.fromMarkdownExtensions=[]),d=i.toMarkdownExtensions||(i.toMarkdownExtensions=[]);o.push(nkt(n)),l.push(E8t()),d.push(S8t(n))}const skt={anchorTarget:"_blank"};function okt(t){return{defaultProps:t}}const akt=function(){return(t,e)=>{cB(t,function(n){if(n.type==="containerDirective"||n.type==="leafDirective"||n.type==="textDirective"){if(n.name!=="span")return;const i=n.data||(n.data={}),o=n.attributes||{},{color:l}=o;l||e.fail("Unexpected missing `color` on `span` directive",n),i.hName="span",i.hProperties={style:{color:l},key:xve()}}})}};function aSe(t){const{children:e,...n}=t,{anchorTarget:i}=Dt("MarkdownWidgetComponent",skt,n),o={mb:"xs"},l={remarkPlugins:[qxt,ikt,akt],components:{b(d){const{...p}=d;return Y.jsx(cp,{fw:700,...p})},blockquote(d){const{...p}=d;return Y.jsx(hX,{...p})},code(d){const{...p}=d;return Y.jsx(vX,{...p})},em(d){const{...p}=d;return Y.jsx("em",{...p})},img(d){const{...p}=d;return Y.jsx(QI,{...p})},h1(d){const{...p}=d;return Y.jsx(M2,{order:1,...p,...o})},h2(d){const{...p}=d;return Y.jsx(M2,{order:2,...p,...o})},h3(d){const{...p}=d;return Y.jsx(M2,{order:3,...p,...o})},h4(d){const{...p}=d;return Y.jsx(M2,{order:4,...p,...o})},h5(d){const{...p}=d;return Y.jsx(M2,{order:5,...p,...o})},h6(d){const{...p}=d;return Y.jsx(M2,{order:6,...p,...o})},hr(d){const{...p}=d;return Y.jsx(EX,{...p,...o})},p(d){const{...p}=d;return Y.jsx(cp,{...p,...o})},strong(d){const{...p}=d;return Y.jsx("strong",{...p})},a(d){const{...p}=d;return Y.jsx(Lg,{target:i,...p})},ul(d){const{...p}=d;return Y.jsx(wT,{...p,...o})},li(d){const{...p}=d;return Y.jsx(wT.Item,{...p})},table(d){const{...p}=d;return Y.jsx(ja,{...p,...o})},thead(d){const{...p}=d;return Y.jsx(ja.Thead,{...p,...o})},tbody(d){const{...p}=d;return Y.jsx(ja.Tbody,{...p,...o})},td(d){const{...p}=d;return Y.jsx(ja.Td,{...p,...o})},th(d){const{...p}=d;return Y.jsx(ja.Th,{...p,...o})},tr(d){const{...p}=d;return Y.jsx(ja.Tr,{...p,...o})}}};return Y.jsx(J6t,{...l,children:e})}const uB=de.createContext({orientation:"unspecified",name:"unspecified"}),gJ=de.createContext({name:"unspecified"}),lkt={containerThemeOverrides:{}};function fB(t,e,n,i={}){var v,_,b,w;const o=Dt(t,e,n),{containerThemeOverrides:l}=Dt("AppBuilderPage",lkt,i),{name:d}=de.useContext(gJ),p=de.useContext(uB),g=((w=(b=(_=(v=l[d])==null?void 0:v[p.name])==null?void 0:_.components)==null?void 0:b[t])==null?void 0:w.defaultProps)??{};return{...o,...g}}const ckt={};function vj(t){return{defaultProps:t}}function ukt(t){const{text:e,markdown:n,...i}=t,o=fB("AppBuilderTextWidgetComponent",ckt,i),l=de.useContext(uB),d={};return l.orientation==="horizontal"&&(d.height="100%"),e?Y.jsx(S0,{...o,style:d,children:e}):n?Y.jsx(S0,{...o,style:d,children:Y.jsx(aSe,{children:n})}):Y.jsx(Y.Fragment,{})}const fkt={radius:"md",fit:"contain"};function dkt(t){return{defaultProps:t}}function lSe(t){const{anchor:e,target:n,...i}=t,{radius:o,fit:l}=fB("AppBuilderImage",fkt,i),p=de.useContext(uB).orientation,g=Y.jsx(QI,{...i,fit:l,radius:o,h:p==="horizontal"?"100%":void 0,w:p==="vertical"?"100%":void 0});return Y.jsx(S0,{h:p==="horizontal"?"100%":void 0,w:p==="vertical"?"100%":void 0,radius:o,pt:0,pr:0,pb:0,pl:0,children:e?Y.jsx(Lg,{href:e,target:n,children:g}):g})}function vJ(t,e){return Dd().getExport(t,e)(o=>o)}function hkt({sessionId:t,exportId:e,...n}){const{definition:i,actions:o}=vJ(t,e),l=de.useRef(Promise.resolve()),d=de.useRef(void 0),[p,g]=de.useState(void 0),v=de.useCallback(E=>{l.current=l.current.then(async()=>{if(d.current&&(URL.revokeObjectURL(d.current),d.current=void 0),E){const M=await(await o.fetch(E)).blob();d.current=URL.createObjectURL(M)}g(d.current)})},[g]),{registerDefaultExport:_,deregisterDefaultExport:b}=Dd();de.useEffect(()=>(_(t,i.id),()=>b(t,i.id)),[t,i]);const w=Dd(E=>E.defaultExportResponses[t]);return de.useEffect(()=>{if(w&&w[i.id]){const E=w[i.id];if(E.content&&E.content[0]&&E.content[0].href){const S=E.content[0].href;v(S)}else g(void 0)}else l.current=l.current.then(async()=>{if(i.type!==Xs.EXPORT_TYPE.DOWNLOAD)return;const E=await o.request();if(E.content&&E.content[0]&&E.content[0].href){const S=E.content[0].href;v(S)}else g(void 0)})},[w,i]),p?Y.jsx(lSe,{src:p,...n}):Y.jsx(Y.Fragment,{})}function pkt(t){const{alt:e,target:n,anchor:i,href:o,export:l,sessionId:d}=t,p={anchor:i,alt:e,target:n};return o?Y.jsx(lSe,{src:o,...p}):l?Y.jsx(hkt,{sessionId:d,exportId:l.name,...p}):Y.jsx(Y.Fragment,{})}function cSe(t,e){return Dd().getParameter(t,e)(o=>o)}function Av({sessionId:t,parameterId:e,cancel:n}){const{definition:i}=cSe(t,e);return Y.jsxs(Ap,{justify:"space-between",w:"100%",wrap:"nowrap",children:[Y.jsx(cp,{pb:4,size:"sm",fw:500,children:i.displayname||i.name}),n&&Y.jsx(y3e,{size:"16",color:"red",onClick:n})]})}function MA(t,e=1e3,n=i=>i.uiValue){const{sessionId:i,parameterId:o,disableIfDirty:l,acceptRejectMode:d}=t,{definition:p,actions:g,state:v}=cSe(i,o),_=Dd(C=>C.parameterChanges[i]),[b,w]=de.useState(n(v)),E=d?0:e,S=de.useRef(),M=(C,P)=>{clearTimeout(S.current),w(C),S.current=setTimeout(()=>{g.setUiValue(C)&&g.execute(!d)},P===void 0?E:P)};de.useEffect(()=>{w(v.uiValue)},[v.uiValue]);const k=d&&v.dirty&&!(_!=null&&_.executing)?()=>M(v.execValue,0):void 0,x=l&&v.dirty||(_==null?void 0:_.executing);return{definition:p,actions:g,state:v,value:b,setValue:w,handleChange:M,onCancel:k,disabled:x}}const PC=(t,e)=>((t.type===k0.ShapeDiverResponseParameterType.INT||t.type===k0.ShapeDiverResponseParameterType.EVEN||t.type===k0.ShapeDiverResponseParameterType.ODD)&&(e=+e.toFixed(0)),e=+e.toFixed(t.decimalplaces),e),mkt={sliderWidth:"60%",numberWidth:"35%"};function gkt(t){return{defaultProps:t}}function RC(t){const{definition:e,value:n,setValue:i,handleChange:o,onCancel:l,disabled:d}=MA(t),{sliderWidth:p,numberWidth:g}=Dt("ParameterSliderComponent",mkt,t);let v=1;e.type===k0.ShapeDiverResponseParameterType.INT?v=1:e.type===k0.ShapeDiverResponseParameterType.EVEN||e.type===k0.ShapeDiverResponseParameterType.ODD?v=2:v=1/Math.pow(10,e.decimalplaces);const _=`Min: ${e.min}, Max: ${e.max}`,b=[{value:+e.min,label:e.min},{value:+e.max,label:e.max}];return Y.jsxs(Y.Fragment,{children:[Y.jsx(Av,{...t,cancel:l}),e&&Y.jsxs(Ap,{justify:"space-between",w:"100%",wrap:"nowrap",children:[e&&Y.jsx(UX,{w:p,label:PC(e,+n),value:+n,min:+e.min,max:+e.max,step:v,onChange:w=>i(PC(e,w)),onChangeEnd:w=>o(PC(e,w),0),marks:b,disabled:d}),e&&Y.jsx(jh,{label:_,position:"bottom",children:Y.jsx(LX,{w:g,value:n,min:+e.min,max:+e.max,step:v,decimalScale:e.decimalplaces,fixedDecimalScale:!0,clampBehavior:"strict",onChange:w=>o(PC(e,+w)),disabled:d})})]})]})}function vkt(t){const{definition:e,value:n,handleChange:i,onCancel:o,disabled:l}=MA(t,0);return Y.jsxs(Y.Fragment,{children:[Y.jsx(Av,{...t,cancel:o}),e&&Y.jsx(T6,{checked:n===!0||n.toString().toLowerCase()==="true",onChange:d=>i(d.currentTarget.checked),disabled:l})]})}function _kt(t){const{definition:e,value:n,handleChange:i,onCancel:o,disabled:l}=MA(t);return Y.jsxs(Y.Fragment,{children:[Y.jsx(Av,{...t,cancel:o}),e&&Y.jsx(YX,{value:n,onChange:d=>i(d.target.value),disabled:l,maxLength:e.max})]})}function ykt(t){const{definition:e,value:n,handleChange:i,onCancel:o,disabled:l}=MA(t,0),d=e.visualization===k0.ShapeDiverResponseParameterVisualization.CHECKLIST?Y.jsx(IX,{value:n?n.split(",").map(p=>e.choices[parseInt(p)]):[],onChange:p=>{i(e.choices?e.choices.map((g,v)=>({index:v,value:g})).filter(g=>p.includes(g.value)).map(g=>g.index).join(","):"")},data:e.choices,disabled:l,comboboxProps:{withinPortal:!1}}):Y.jsx(BX,{allowDeselect:!1,value:e.choices[+n],onChange:p=>i(e.choices.indexOf(p)+""),data:e.choices,disabled:l,comboboxProps:{withinPortal:!1}});return Y.jsxs(Y.Fragment,{children:[Y.jsx(Av,{...t,cancel:o}),e&&d]})}function bkt(t){return t.replace("0x","#").substring(0,7)}function Akt(t){const{definition:e,handleChange:n,value:i,onCancel:o,disabled:l}=MA(t,0,p=>p.uiValue),d=de.useCallback(p=>{n(p.replace("#","0x")+"ff")},[n]);return Y.jsxs(Y.Fragment,{children:[Y.jsx(Av,{...t,cancel:o}),e&&Y.jsx(ZI,{placeholder:"Pick color",value:bkt(i),rightSection:Y.jsx(Gh,{onClick:()=>n(e.defval),children:Y.jsx(g3e,{size:16})}),onChangeEnd:d,disabled:l,popoverProps:{withinPortal:!1}})]})}function wkt(t){return"upload"in t}const Ekt=t=>{const e=t.match(/\.([0-9a-z]+)$/i);return e&&e[1]?e[1].toLowerCase():void 0},Skt=t=>k4.guessMimeTypeFromFilename(t)[0],Tkt=t=>typeof t=="string"||t.type?t:new File([t],t.name,{type:Skt(t.name)}),cY=(t,e)=>{const n=window.URL.createObjectURL(t),i=document.createElement("a");i.style.display="none",i.href=n,i.download=e,i.click(),URL.revokeObjectURL(i.href)},xkt=async(t,e)=>{if(!(window&&"showSaveFilePicker"in window))return cY(t,e);const i=Ekt(e);try{const o=await window.showSaveFilePicker({suggestedName:e,types:[{accept:{"multipart/form-data":[`.${i}`]}}]}),l=await o.createWritable();return await l.write(t),await l.close(),o}catch(o){if(o.code===20)return;if(o.code===18)return cY(t,e);throw o}},Mkt=async(t,e,n=null,i=()=>{},o=!1)=>(typeof t=="string"?fetch(t,{...n?{headers:{Authorization:n}}:{}}):Promise.resolve(t)).then(l=>l.blob()).then(l=>{o?xkt(l,e):cY(l,e)}).catch(l=>{throw new Error(l.message)}).finally(()=>{i()});function kkt(t){const{definition:e,value:n,state:i,handleChange:o,onCancel:l,disabled:d}=MA(t,0),p=[...k4.mapMimeTypeToFileEndings(k4.extendMimeTypes(e.format))],[g,v]=gd.useState(null);return de.useEffect(()=>{typeof n=="string"&&n.length>0&&wkt(e)?e.getFilename(n).then(_=>v(new File([],_??"(Filename unknown)"))).catch(_=>console.error(`Error getting filename for file with id ${n}`,_)):v(null)},[n]),Y.jsxs(Y.Fragment,{children:[Y.jsx(Av,{...t,cancel:l}),e&&Y.jsx(k7e,{placeholder:"File Upload",accept:p.join(","),clearable:!!i.execValue,onChange:_=>o(Tkt(_||"")),leftSection:Y.jsx(v3e,{size:14}),disabled:d,value:typeof n=="string"?n===e.defval?g:null:n})]})}function uSe({sessionId:t,exportId:e}){const{definition:n}=vJ(t,e);return Y.jsx(cp,{pb:4,size:"sm",fw:500,children:n.displayname||n.name})}function Jfe(t){const{sessionId:e,exportId:n}=t,{definition:i,actions:o}=vJ(e,n),l=async()=>{const _=await o.request();if(i.type===Xs.EXPORT_TYPE.DOWNLOAD&&_.content&&_.content[0]&&_.content[0].href){const b=_.content[0].href,w=await o.fetch(b);await Mkt(w,`${_.filename}.${_.content[0].format}`)}},d=()=>{fetch("https://layermodels.org/wp-admin/admin-ajax.php",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"custom_counter_increment",increment:"true"})}).then(_=>_.text()).then(_=>console.log("Counter updated:",_)).catch(_=>console.error("Error:",_))},p=async()=>{v(!0),await l(),d(),v(!1)},[g,v]=de.useState(!1);return Y.jsxs(Y.Fragment,{children:[Y.jsx(uSe,{...t}),i&&Y.jsxs(Y.Fragment,{children:[Y.jsx(pf,{fullWidth:!0,leftSection:i.type===Xs.EXPORT_TYPE.DOWNLOAD?Y.jsx(p3e,{}):Y.jsx(p4t,{}),onClick:p,children:i.type===Xs.EXPORT_TYPE.DOWNLOAD?"Download File":"Send Email"}),g&&Y.jsx(bp,{})]})]})}const e0e={[Xs.PARAMETER_TYPE.INT]:{c:RC,extraBottomPadding:!0},[Xs.PARAMETER_TYPE.FLOAT]:{c:RC,extraBottomPadding:!0},[Xs.PARAMETER_TYPE.EVEN]:{c:RC,extraBottomPadding:!0},[Xs.PARAMETER_TYPE.ODD]:{c:RC,extraBottomPadding:!0},[Xs.PARAMETER_TYPE.BOOL]:{c:vkt,extraBottomPadding:!1},[Xs.PARAMETER_TYPE.STRING]:{c:_kt,extraBottomPadding:!1},[Xs.PARAMETER_TYPE.STRINGLIST]:{c:ykt,extraBottomPadding:!1},[Xs.PARAMETER_TYPE.COLOR]:{c:Akt,extraBottomPadding:!1},[Xs.PARAMETER_TYPE.FILE]:{c:kkt,extraBottomPadding:!1}},Ckt=t=>{var n,i;const e=t.type;return{component:((n=e0e[e])==null?void 0:n.c)||Av,extraBottomPadding:(i=e0e[e])==null?void 0:i.extraBottomPadding}},Pkt={[Xs.EXPORT_TYPE.DOWNLOAD]:Jfe,[Xs.EXPORT_TYPE.EMAIL]:Jfe},Rkt=t=>{const e=t.type;return Pkt[e]||uSe};function Dkt(t,e){const{parameterStores:n,exportStores:i}=Dd();let o=[];return o=o.concat((t??[]).flatMap(l=>{const d=Object.values(n[l.sessionId]);for(const p of d){const g=p.getState().definition;if(g.id===l.parameterId||g.name===l.parameterId||g.displayname===l.parameterId)return{parameter:l,definition:g}}return[]})),o=o.concat((e??[]).flatMap(l=>{const d=Object.values(i[l.sessionId]);for(const p of d){const g=p.getState().definition;if(g.id===l.exportId||g.name===l.exportId||g.displayname===l.exportId)return{export:l,definition:g}}return[]})),o.sort((l,d)=>(typeof l.definition.order=="number"?l.definition.order:1/0)-(typeof d.definition.order=="number"?d.definition.order:1/0)),o}const Okt={avoidSingleComponentGroups:!0,mergeAccordions:!1,pbSlider:"md"};function Ikt(t){return{defaultProps:t}}function uY(t){var M;const{parameters:e,exports:n,defaultGroupName:i,topSection:o}=t,l=Dkt(e,n),{pbSlider:d,avoidSingleComponentGroups:p,mergeAccordions:g}=Dt("ParametersAndExportsAccordionComponent",Okt,t),v=[],_={};if(l.length===0)return Y.jsx(Ap,{justify:"center",pt:"50",children:Y.jsx(bp,{size:"xl",variant:"dots"})});l.forEach(k=>{if(k.definition.hidden)return;const x=k.definition.group||(i?{id:"default",name:i}:void 0);x?x.id in _||(v.push({group:x,elements:[]}),_[x.id]=v.length-1):v.push({elements:[]});const C=x?_[x.id]:v.length-1;if(k.parameter){const{component:P,extraBottomPadding:O}=Ckt(k.definition);v[C].elements.push(Y.jsx(S0,{pb:O?d:void 0,children:Y.jsx(P,{sessionId:k.parameter.sessionId,parameterId:k.parameter.parameterId,disableIfDirty:k.parameter.disableIfDirty??!k.parameter.acceptRejectMode,acceptRejectMode:k.parameter.acceptRejectMode})},k.definition.id))}else if(k.export){const P=Rkt(k.definition);v[C].elements.push(Y.jsx(S0,{children:Y.jsx(P,{sessionId:k.export.sessionId,exportId:k.export.exportId})},k.definition.id))}});const b=[],w=(k,x=void 0)=>{b.push(Y.jsx(S0,{px:0,py:0,withBorder:!1,children:Y.jsx(Su,{defaultValue:x,children:k})},k[0].key))},E=v.length===1&&v[0].group?(M=v[0].group)==null?void 0:M.id:void 0;let S=[];for(const k of v)k.group&&(!p||k.elements.length>1)?(S.push(Y.jsxs(Su.Item,{value:k.group.id,children:[Y.jsx(Su.Control,{children:k.group.name}),Y.jsx(Su.Panel,{children:Y.jsx(fm,{children:k.elements})},k.group.id)]},k.group.id)),g||(w(S,E),S=[])):(S.length>0&&(w(S,E),S=[]),b.push(k.elements[0]));return S.length>0&&w(S,E),Y.jsxs(Y.Fragment,{children:[o,Y.jsx(fm,{children:b})]})}function Nkt(t){const e=t.map(i=>i.sessionId);return Dd(i=>Object.keys(i.parameterChanges).filter(o=>e.includes(o)).reduce((o,l)=>(o.push(i.parameterChanges[l]),o),[]))}function fSe({parameters:t}){const e=Nkt(t??[]),n=t==null?void 0:t.some(d=>d.acceptRejectMode),i=e.length===0||e.some(d=>d.executing),o=()=>{e.forEach(d=>d.accept())},l=()=>{e.forEach(d=>d.reject())};return n?Y.jsx(Y.Fragment,{children:Y.jsxs(Ap,{justify:"space-between",w:"100%",wrap:"nowrap",children:[Y.jsx(pf,{fullWidth:!0,leftSection:Y.jsx(n4t,{}),onClick:o,disabled:i,children:"Accept"}),Y.jsx(pf,{fullWidth:!0,leftSection:Y.jsx(y3e,{}),onClick:l,disabled:i,children:"Reject"})]},"acceptOrReject")}):Y.jsx(Y.Fragment,{})}function Lkt({sessionId:t,parameters:e=[],exports:n=[],defaultGroupName:i}){const o=de.useMemo(()=>e.map(d=>({sessionId:d.sessionId??t,parameterId:d.name,disableIfDirty:d.disableIfDirty,acceptRejectMode:!!d.acceptRejectMode})),[e,t]),l=de.useMemo(()=>n.map(d=>({sessionId:d.sessionId??t,exportId:d.name})),[n,t]);return Y.jsx(uY,{parameters:o,exports:l,defaultGroupName:i,topSection:Y.jsx(fSe,{parameters:o})})}function dSe({sessionId:t,widgets:e}){return e?Y.jsx(Y.Fragment,{children:e.map((n,i)=>Pwt(n)?Y.jsx(ukt,{...n.props},i):Rwt(n)?Y.jsx(pkt,{sessionId:t,...n.props},i):Cwt(n)?Y.jsx(Lkt,{sessionId:t,...n.props},i):null)}):Y.jsx(Y.Fragment,{})}const zkt={size:14,stroke:1};function Bkt(t){return{defaultProps:t}}function Ukt({type:t,...e}){const n=Dt("Icon",zkt,e);switch(t){case Vn.Adjustments:return Y.jsx(Fbt,{...n});case Vn.AdjustmentsHorizontal:return Y.jsx(Ubt,{...n});case Vn.ArrowBack:return Y.jsx(Vbt,{...n});case Vn.ArrowDown:return Y.jsx(Gbt,{...n});case Vn.ArrowForward:return Y.jsx(jbt,{...n});case Vn.ArrowLeft:return Y.jsx(Hbt,{...n});case Vn.ArrowRight:return Y.jsx($bt,{...n});case Vn.ArrowUp:return Y.jsx(Wbt,{...n});case Vn.AugmentedReality:return Y.jsx(h3e,{...n});case Vn.AugmentedRealityOff:return Y.jsx(Ybt,{...n});case Vn.Bookmark:return Y.jsx(Xbt,{...n});case Vn.BookmarkOff:return Y.jsx(qbt,{...n});case Vn.Bookmarks:return Y.jsx(Qbt,{...n});case Vn.BookmarksOff:return Y.jsx(Zbt,{...n});case Vn.Books:return Y.jsx(Jbt,{...n});case Vn.BooksOff:return Y.jsx(Kbt,{...n});case Vn.Camera:return Y.jsx(t4t,{...n});case Vn.CameraOff:return Y.jsx(e4t,{...n});case Vn.Copy:return Y.jsx(r4t,{...n});case Vn.Dots:return Y.jsx(s4t,{...n});case Vn.DotsVertical:return Y.jsx(i4t,{...n});case Vn.Download:return Y.jsx(p3e,{...n});case Vn.DownloadOff:return Y.jsx(o4t,{...n});case Vn.FileDownload:return Y.jsx(a4t,{...n});case Vn.FileExport:return Y.jsx(l4t,{...n});case Vn.FileImport:return Y.jsx(c4t,{...n});case Vn.Key:return Y.jsx(f4t,{...n});case Vn.KeyOff:return Y.jsx(u4t,{...n});case Vn.Link:return Y.jsx(h4t,{...n});case Vn.LinkOff:return Y.jsx(d4t,{...n});case Vn.Maximize:return Y.jsx(m3e,{...n});case Vn.MaximizeOff:return Y.jsx(m4t,{...n});case Vn.Network:return Y.jsx(v4t,{...n});case Vn.NetworkOff:return Y.jsx(g4t,{...n});case Vn.Photo:return Y.jsx(y4t,{...n});case Vn.PhotoOff:return Y.jsx(_4t,{...n});case Vn.Refresh:return Y.jsx(g3e,{...n});case Vn.RefreshOff:return Y.jsx(b4t,{...n});case Vn.Reload:return Y.jsx(A4t,{...n});case Vn.Replace:return Y.jsx(w4t,{...n});case Vn.Settings:return Y.jsx(E4t,{...n});case Vn.Share:return Y.jsx(M4t,{...n});case Vn.Share2:return Y.jsx(S4t,{...n});case Vn.Share3:return Y.jsx(T4t,{...n});case Vn.ShareOff:return Y.jsx(x4t,{...n});case Vn.Upload:return Y.jsx(v3e,{...n});case Vn.User:return Y.jsx(C4t,{...n});case Vn.UserOff:return Y.jsx(k4t,{...n});case Vn.Users:return Y.jsx(P4t,{...n});case Vn.Video:return Y.jsx(_3e,{...n});case Vn.VideoOff:return Y.jsx(R4t,{...n});case Vn.World:return Y.jsx(O4t,{...n});case Vn.WorldOff:return Y.jsx(D4t,{...n});case Vn.ZoomScan:return Y.jsx(N4t,{...n});default:return null}}function hSe({defaultValue:t,tabs:e}){const[n,i]=de.useState(t),o=e.map(l=>l.name);return de.useEffect(()=>{(!n||!o.includes(n))&&(o.includes(t)?i(t):i(o[0]))},[o.join(""),t]),e.length===0?Y.jsx(Y.Fragment,{}):Y.jsxs(y0,{value:n,onChange:i,children:[Y.jsx(y0.List,{children:e.map((l,d)=>Y.jsx(y0.Tab,{value:l.name,leftSection:Y.jsx(Ukt,{type:l.icon}),children:l.name},d))}),e.map((l,d)=>Y.jsx(y0.Panel,{value:l.name,children:Y.jsx(fm,{children:l.children})},d))]})}function Fkt({sessionId:t,tabs:e}){if(!e||e.length===0)return Y.jsx(Y.Fragment,{});const n=de.useMemo(()=>({defaultValue:e[0].name,tabs:e.map(i=>({name:i.name,icon:i.icon,children:[Y.jsx(dSe,{sessionId:t,widgets:i.widgets},0)]}))}),[t,e]);return Y.jsx(hSe,{...n})}function Vkt({sessionId:t,widgets:e,tabs:n}){return Y.jsxs(Y.Fragment,{children:[Y.jsx(Fkt,{sessionId:t,tabs:n}),Y.jsx(dSe,{sessionId:t,widgets:e})]})}function Gkt({parameters:t,exports:e}){const n=de.useMemo(()=>{const i={defaultValue:"",tabs:[]};return t.length>0&&(i.defaultValue="Parameters",i.tabs.push({name:"Parameters",icon:Vn.AdjustmentsHorizontal,children:[Y.jsx(uY,{parameters:t,topSection:Y.jsx(fSe,{parameters:t})},0)]})),e.length>0&&(i.defaultValue=i.defaultValue||"Exports",i.tabs.push({name:"Exports",icon:Vn.Download,children:[Y.jsx(uY,{exports:e},0)]})),i},[t,e]);return Y.jsx(hSe,{...n})}const jkt={Ring:{slug:"react-gemstone-demo",ticket:"4c334f2d688131dcb0a35622c7f01f0d4d6df2ab14c474e2e054aab4130901497461fce70142481402fdac444aafc8e8b316b94d6a0f154c70d8225fe0a7a5ad95abec363d38849587de4c7dc8bf3f1e32034aebbce2e2eb22b299bd36dce423d76810757fdaf2-b179147dd85b340398a5bc5229caa39e",modelViewUrl:"https://sdr7euc1.eu-central-1.shapediver.com"},"AR Cube":{slug:"react-ar-cube",ticket:"f447479a164edd5eaff704f15bc181404f35b949d399e4428c3328846b26a3649bb846228eeda0d93dcd4395232c6af56fcbb48c576cfddcdbc8c5137c71e0a26f776309a0f539a6cfa2efbc2851f953f0abf283365ade3afbb907dadda0b8b147e3579d012fac-fdc1e8ec7c10b9bdaf652491cf5524c5",modelViewUrl:"https://sdr7euc1.eu-central-1.shapediver.com"},"Naming scheme demo":{slug:"react-example-nameattributedemo",ticket:"a98830fa6a55d3067b65a5c2efeef66d64d6e8515e6e9689d68941efe0b8fd926c48709ab07ecb6e47876d257190da01894089e6460375a65a7adbdfd9cd5d98b48b45771f179c74ea230ef17436fbfc305eef243c5046041b92c29db278526dd9526663eba65c-a1366728a5e03b883327536c67b9d609",modelViewUrl:"https://sdr7euc1.eu-central-1.shapediver.com"},"Tower with attributes":{slug:"react-tower-attributes",ticket:"e2a115a97e946af9ff7d32d7074782a75cbf5872b2629f831bd93cf5148e8da5e0dd64179fb06dd6a130eac7cc55579d85eb51f12c9229d8c93de386f11e023d307c0512184a31b71807d7c9a13f51da02fec24518b3b904f2831497187641395da66ece937a54-cea7e9d418a67e32fb887d8204e5fdfa",modelViewUrl:"https://sdr7euc1.eu-central-1.shapediver.com"},Sideboard:{slug:"react-sideboard",ticket:"51749f81589e27bfd220e6df425e6589ec1b15f873916eb047afc7acdd46c053fbff74c615c1bd1d7aabe258e117997a2772d85b67442b90fa3e34fe1d6b466201d8c26cbc8f3e3b5be258ade979bddf9563176c63f9b9075d1120cbff626fb863d31d7838cec3-d0dccd7a58a001d9e2f74b66c98fc501",modelViewUrl:"https://sdr7euc1.eu-central-1.shapediver.com"},Bookshelf:{slug:"react-bookshelf-exportable",ticket:"3f8c4a6f78b61b7f68e7222d96f1dc55a89297b4e8144fd1c51a2930a7ac83d20724fcb9eb8161bb21cd89482c3c69cd682fa15d191d09a839d3ac317519f7b4d608ad37ead983d6b6c5dc144dc9f9894b6a75f5e59eec5ab758d5a447c619a3767d95b551fb80-b2c8b35347afc01f396d147d7939da6c",modelViewUrl:"https://sdr7euc1.eu-central-1.shapediver.com"},CustomUiBookshelf:{slug:"react-bookshelf-exportable-customui",ticket:"0be61d6f551424911dc15ca992c76cf2eab5c32aceccfbde18beb98bc98c769409c03c6e41dcac36051ee2fd066bb21e7cde6567f86287997e6cf58185fc88c8116b8058bba83e4528a2eb6cc8bb78e339a618f489696ac887ea2a762c331e7256ebbcd52a0052-e5245082baf9f79145f9b6bdc2fcf867",modelViewUrl:"https://sdr7euc1.eu-central-1.shapediver.com"},AppBuilderExampleDiagrid:{slug:"appbuilder-diagrid",ticket:"b1d3d639c61de96d729902b1ebe1eba4ecd33cf1b89ed04808698d372223595833ebbe6ce9cc76846f3062e8b5f5773a7bac8115fb3e84a342cc71bb9a34ac4815d6311c5fc155f1208eadb32c1322e1c72938ede69486ca5833a3fe82c62a9cd4d8cba24e5e4d-1b8a0ccbbb39e828d7bc2319893bc07a",modelViewUrl:"https://sdr7euc1.eu-central-1.shapediver.com"},LayermodelsExample:{slug:"keychain-names-v1-3-5",ticket:"e09011b2b0d9a8ba12561f297d00a72b59cb402ef4a9397010ba9849dcd442e0404acd16d9a3f3706c9e48236d0473226f9b5e6f298e6c72f0b4ee431d4232c02581de7c7427885a84ee200b2e8fbcd443de6c20d2fbeaa3544455755f56bac905789dfb23f1fe-5eb48dc9a05e9a31859772effe435402",modelViewUrl:"https://sdr7euc1.eu-central-1.shapediver.com"}},Hkt={acceptRejectMode:!1};function $kt(t){return{defaultProps:t}}function Wkt(t){const{example:e,id:n="default",ticket:i,modelViewUrl:o,slug:l,...d}=Dt("DefaultSession",Hkt,t);return{defaultSessionDto:de.useMemo(()=>e?{id:n,...jkt[e],...d}:i&&o?{id:n,ticket:i,modelViewUrl:o,...d}:l?{id:n,slug:l,modelViewUrl:"",...d}:void 0,[e,n,i,o,l])}}const Ykt={type:"oval",size:"md"};function qkt(t){return{defaultProps:t}}function Xkt(t){const{children:e,...n}=t,i=Dt("LoaderPage",Ykt,n);return Y.jsx(gX,{w:"100vw",h:"100vh",children:Y.jsx(bp,{...i,children:e})})}const Zkt="_appShellMain_nwuu4_1",Qkt="_appShellGridAreaMain_nwuu4_9",Kkt="_appShellGridAreaRight_nwuu4_17",Jkt="_appShellGridAreaBottom_nwuu4_29",eCt="_appShellGridAreaBottomPortrait_nwuu4_39",tCt="_appShellMaxHeight_nwuu4_53",nCt="_appShellMaxHeightBelowHeader_nwuu4_79",rCt="_appShellMainAside_nwuu4_147",iCt="_appShellMainNavbar_nwuu4_147",m2={appShellMain:Zkt,appShellGridAreaMain:Qkt,appShellGridAreaRight:Kkt,appShellGridAreaBottom:Jkt,appShellGridAreaBottomPortrait:eCt,appShellMaxHeight:tCt,appShellMaxHeightBelowHeader:nCt,appShellMainAside:rCt,appShellMainNavbar:iCt},sCt=()=>BI("(orientation: landscape)"),oCt={p:"xs"};function aCt(t){return{defaultProps:t}}function lCt(t){const{children:e,...n}=fB("AppBuilderVerticalContainer",oCt,t);return Y.jsx(fm,{...n,children:e})}const cCt={w:"100%",h:"100%",justify:"center",wrap:"nowrap",p:"xs"};function uCt(t){return{defaultProps:t}}function fCt(t){const{children:e,...n}=fB("AppBuilderHorizontalContainer",cCt,t);return Y.jsx(Ap,{...n,children:e})}const dCt={containerThemeOverrides:{}};function hCt(t){return{defaultProps:t}}function Bh(t){var _,b;const{containerThemeOverrides:e,name:n,orientation:i,children:o}=t,{containerThemeOverrides:l}=Dt("AppBuilderContainerWrapper",dCt,{containerThemeOverrides:e}),d={orientation:i,name:n},{name:p}=de.useContext(gJ),g=i==="vertical"?Y.jsx(lCt,{children:o}):Y.jsx(fCt,{children:o}),v=Y.jsx(uB.Provider,{value:d,children:g});if((_=l[p])!=null&&_[n]){const w=(b=l[p])==null?void 0:b[n];return Y.jsx(gq,{theme:w,children:v})}else return v}function pI(t){const{hasTop:e=!1,hasLeft:n=!1,hasRight:i=!1,hasBottom:o=!1,rows:l=4,columns:d=4,topRows:p=1,leftColumns:g=1,rightColumns:v=1,bottomRows:_=1}=t,b="main",w="top",E="left",S="right",M="bottom",k=[];for(let P=0;P<l;P++){const O=[];for(let L=0;L<d;L++)O.push(b);k.push(O)}if(e)for(let P=0;P<d;P++)for(let O=0;O<p;O++)k[O][P]=w;if(o)for(let P=0;P<d;P++)for(let O=l-_;O<l;O++)k[O][P]=M;if(n)for(let P=0;P<l;P++)for(let O=0;O<g;O++)k[P][O]=E;if(i)for(let P=0;P<l;P++)for(let O=d-v;O<d;O++)k[P][O]=S;let x="",C="";return k.forEach(P=>{P.forEach(O=>{C+=`${O} `}),x=x.concat(`"${C.trim()}" `),C=""}),x=x.trim(),{gridTemplateAreas:x,gridTemplateColumns:`repeat(${d}, 1fr)`,gridTemplateRows:`repeat(${l}, 1fr)`}}const pCt={headerHeight:{base:"4em",md:"4em"},navbarBreakpoint:"md",navbarWidth:{md:250,lg:300}};function mCt(t){return{defaultProps:t}}const t0e=3,n0e=3;function gCt(t){const{top:e=void 0,bottom:n=void 0,left:i=void 0,children:o=void 0,right:l=void 0}=t,{headerHeight:d,navbarBreakpoint:p,navbarWidth:g}=Dt("AppBuilderAppShellTemplatePage",pCt,t),[v,{toggle:_}]=YPe(),b=sCt(),w=ec(),E=BI(`(min-width: ${w.breakpoints[p]})`),S=!!n&&E&&b,M=!!i||!!n&&!S,k=!!e||!!i&&!E||!!n&&!S&&!E,[x,C]=de.useState({...pI({hasRight:!!l&&b,hasBottom:!!l&&!b||!!n&&S,rows:n0e,columns:t0e})}),[P,O]=de.useState(0);return de.useEffect(()=>{const L=localStorage.getItem("exportCount");O(L?parseInt(L):0)},[]),de.useEffect(()=>{C({...x,...pI({hasRight:!!l&&b,hasBottom:!!l&&!b||!!n&&S,rows:n0e,columns:t0e})})},[l,b,n,S]),Y.jsx(Y.Fragment,{children:Y.jsxs(_f,{padding:"0",className:"viewer-fullscreen-area",header:{height:d,collapsed:!k},navbar:{breakpoint:p,width:g,collapsed:{mobile:!v||!M,desktop:!M}},style:{backgroundColor:"var(--mantine-color-body)"},children:[Y.jsx(_f.Header,{children:Y.jsxs(Ap,{h:"100%",justify:"space-between",wrap:"nowrap",px:"xs",children:[M?Y.jsx(pX,{opened:v,onClick:_,hiddenFrom:p,size:"sm"}):void 0,Y.jsx(Bh,{orientation:"horizontal",name:"top",children:e})]})}),Y.jsxs(_f.Navbar,{hidden:!v,className:m2.appShellMainNavbar,children:[Y.jsx(Bh,{orientation:"vertical",name:"left",children:i}),n?S?void 0:Y.jsx(Bh,{orientation:"vertical",name:"bottom",children:n}):void 0]}),Y.jsxs(_f.Main,{className:`${m2.appShellMain} ${k?m2.appShellMaxHeightBelowHeader:m2.appShellMaxHeight}`,style:x,children:[Y.jsx("div",{style:{padding:"20px",backgroundColor:"lightgray",textAlign:"center"},children:Y.jsxs("h3",{children:["Export Count: ",P]})}),Y.jsx("section",{className:m2.appShellGridAreaMain,children:o}),Y.jsx("section",{className:`${b?m2.appShellGridAreaRight:m2.appShellGridAreaBottomPortrait}`,children:Y.jsx(Bh,{orientation:"vertical",name:"right",children:l})}),n&&S?Y.jsx("section",{className:m2.appShellGridAreaBottom,children:Y.jsx(Bh,{orientation:"horizontal",name:"bottom",children:n})}):void 0]})]})})}const vCt="_appBuilderTemplatePage_cqn6q_1",_Ct="_appBuilderTemplatePageTop_cqn6q_11",yCt="_appBuilderTemplatePageBottom_cqn6q_11",bCt="_appBuilderTemplatePageLeft_cqn6q_11",ACt="_appBuilderTemplatePageRight_cqn6q_11",wCt="_appBuilderTemplatePageMain_cqn6q_19",ECt="_buttonsTop_cqn6q_59",ay={appBuilderTemplatePage:vCt,appBuilderTemplatePageTop:_Ct,appBuilderTemplatePageBottom:yCt,appBuilderTemplatePageLeft:bCt,appBuilderTemplatePageRight:ACt,appBuilderTemplatePageMain:wCt,buttonsTop:ECt},SCt={bgTop:"transparent",bgLeft:"transparent",bgRight:"transparent",bgBottom:"transparent",columns:4,rows:4,leftColumns:1,rightColumns:1,topRows:1,bottomRows:1};function TCt(t){return{defaultProps:t}}function xCt(t){const{top:e=void 0,left:n=void 0,children:i=void 0,right:o=void 0,bottom:l=void 0}=t,{bgTop:d,bgLeft:p,bgRight:g,bgBottom:v,columns:_,rows:b,leftColumns:w,rightColumns:E,topRows:S,bottomRows:M}=Dt("AppBuilderGridTemplatePage",SCt,t),k=de.useRef(null),[x,C]=de.useState({backgroundColor:"var(--mantine-color-body)",...pI({hasTop:!!e,hasLeft:!!n,hasRight:!!o,hasBottom:!!l,rows:b,columns:_,topRows:S,leftColumns:w,rightColumns:E,bottomRows:M})});return de.useEffect(()=>{C({...x,...pI({hasTop:!!e,hasLeft:!!n,hasRight:!!o,hasBottom:!!l,rows:b,columns:_,topRows:S,leftColumns:w,rightColumns:E,bottomRows:M})})},[n,o,l,e,_,b,w,E,S,M]),Y.jsx(Y.Fragment,{children:Y.jsxs("section",{ref:k,className:`${ay.appBuilderTemplatePage} viewer-fullscreen-area`,style:x,children:[e?Y.jsx("section",{className:ay.appBuilderTemplatePageTop,style:{background:d},children:Y.jsx(Bh,{orientation:"horizontal",name:"top",children:e})}):void 0,n?Y.jsx("section",{className:ay.appBuilderTemplatePageLeft,style:{background:p},children:Y.jsx(Bh,{orientation:"vertical",name:"left",children:n})}):void 0,o?Y.jsx("section",{className:ay.appBuilderTemplatePageRight,style:{background:g},children:Y.jsx(Bh,{orientation:"vertical",name:"right",children:o})}):void 0,l?Y.jsx("section",{className:ay.appBuilderTemplatePageBottom,style:{background:v},children:Y.jsx(Bh,{orientation:"horizontal",name:"bottom",children:l})}):void 0,Y.jsx("section",{className:ay.appBuilderTemplatePageMain,children:i||Y.jsx(Y.Fragment,{})})]})})}const MCt="_buttonsTop_70iy6_3",kCt={buttonsTop:MCt},CCt={appshell:gCt,grid:xCt},PCt={template:"appshell",showContainerButtons:!1};function RCt(t){return{defaultProps:t}}const DC=t=>t===void 0||t===!0,OC=t=>t===void 0?"outline":t?"filled":"light";function DCt(t){const{template:e,showContainerButtons:n,...i}=Dt("AppBuilderTemplateSelector",PCt,t),{top:o,left:l,right:d,bottom:p,...g}=i,[v,_]=de.useState(void 0),[b,w]=de.useState(void 0),[E,S]=de.useState(void 0),[M,k]=de.useState(void 0),x={top:DC(v)?o:void 0,left:DC(b)?l:void 0,right:DC(E)?d:void 0,bottom:DC(M)?p:void 0},C=CCt[e];return Y.jsxs(Y.Fragment,{children:[n?Y.jsxs(pf.Group,{className:kCt.buttonsTop,children:[Y.jsx(pf,{variant:OC(v),onClick:()=>_(!v),children:"Top"}),Y.jsx(pf,{variant:OC(b),onClick:()=>w(!b),color:"indigo",children:"Left"}),Y.jsx(pf,{variant:OC(E),onClick:()=>S(!E),color:"violet",children:"Right"}),Y.jsx(pf,{variant:OC(M),onClick:()=>k(!M),color:"cyan",children:"Bottom"})]}):Y.jsx(Y.Fragment,{}),Y.jsx(gJ.Provider,{value:{name:e},children:Y.jsx(C,{...x,...g})})]})}const r0e="viewport_1",OCt=`
## Welcome to the ShapeDiver App Builder

You can use this page to display any model from your ShapeDiver platform [library](https://help.shapediver.com/doc/model-library), 
as well as public models. You will be redirected to the login page if you are not logged in to the platform.

You can display:

   * models owned by your account (including private models), 
   * models shared with you, and
   * public models.

Note: You do **not** need to enable iframe or direct embedding for this to work.

Example: 

[${window.location}?slug=react-ar-cube](${window.location}?slug=react-ar-cube)
`,ICt=`
## Welcome to the ShapeDiver App Builder

This page can be opened directly or embedded in an iframe. 
Use this page in one of the following ways to display your model:

### Provide the slug of your model

Example: 

[${window.location}?slug=react-ar-cube](${window.location}?slug=react-ar-cube)

You need to allow [iframe embedding](https://help.shapediver.com/doc/iframe-settings) for this to work.

This method supports protection of your model by a short lived token. You can use the *Require strong authorization* setting for your model. 
This protection can be enabled in the [Embedding settings](https://help.shapediver.com/doc/setup-domains-for-embedding) for all of your models, 
or individually for each model in the [Developer settings](https://help.shapediver.com/doc/developers-settings).  

### Provide ticket and modelViewUrl

Example:

[${window.location}?ticket=TICKET&modelViewUrl=MODEL_VIEW_URL](${window.location}?ticket=YOUR_TICKET&modelViewUrl=MODEL_VIEW_URL)

You need to allow [direct embedding](https://help.shapediver.com/doc/developers-settings) for this to work. 
Copy the *Embedding ticket* and the *Model view URL* from the [Developer settings](https://help.shapediver.com/doc/developers-settings) of your model,
and replace YOUR_TICKET and MODEL_VIEW_URL in the URL shown above.

**Note:**
This method does **not** support protection of your model by a short lived token. 
You need to disable the *Require strong authorization* setting for your model. 
`,NCt=`
## Welcome to the ShapeDiver App Builder

You are using the App Builder SDK in local development mode. 
Use this page in one of the following ways to display your model:

### Provide the slug of your model

Loading models based on their slug is **not** supported when developing locally.

### Provide ticket and modelViewUrl

Example:

[${window.location}?ticket=TICKET&modelViewUrl=MODEL_VIEW_URL](${window.location}?ticket=YOUR_TICKET&modelViewUrl=MODEL_VIEW_URL)

You need to allow [direct embedding](https://help.shapediver.com/doc/developers-settings) for this to work. 
Copy the *Embedding ticket* and the *Model view URL* from the [Developer settings](https://help.shapediver.com/doc/developers-settings) of your model,
and replace YOUR_TICKET and MODEL_VIEW_URL in the URL shown above.

**Note:**
This method does **not** support protection of your model by a short lived token. 
You need to disable the *Require strong authorization* setting for your model. 

### Provide a json file

You can store the \`ticket\` and \`modelViewUrl\` in a json file in the \`public\` directory and use it like this:

Example: 

[${window.location}?g=example.json](${window.location}?g=example.json)

Using this method, you can also provide theme settings, as well as further settings useful for local development. 
Check out the interface \`IAppBuilderSettingsJson\` in the code for all available settings.
`;function mPt(t){var O;const{defaultSessionDto:e}=Wkt(t),{settings:n,error:i,loading:o,hasSettings:l,hasSession:d}=bwt(e),p=n?n.sessions[0]:void 0,{sessionId:g,error:v,hasAppBuilderOutput:_,appBuilderData:b}=xwt(p,n==null?void 0:n.appBuilderOverride),w=i??v,E=Mwt(g),S=kwt(g),M={top:void 0,bottom:void 0,left:void 0,right:void 0},k=((O=n==null?void 0:n.settings)==null?void 0:O.disableFallbackUi)!==!0;b!=null&&b.containers?b.containers.forEach(L=>{M[L.name]=Y.jsx(Vkt,{sessionId:g,...L})}):!_&&(E.length>0||S.length>0)&&k&&(M.right=Y.jsx(Gkt,{parameters:E,exports:S}));const x=Object.values(M).some(L=>L!==void 0)||!k,C=!(n&&d)&&!o&&!w&&!(l&&d),P=window.location.hostname==="localhost"?NCt:zS()?OCt:ICt;return C?Y.jsx(qW,{children:Y.jsx(aSe,{anchorTarget:"_self",children:P})}):w?Y.jsx(qW,{title:"Error",children:w.message}):o?Y.jsx(Xkt,{}):x?Y.jsx(DCt,{top:M.top,left:M.left,right:M.right,bottom:M.bottom,children:Y.jsx(Obt,{id:r0e,children:Y.jsx(zbt,{children:Y.jsx(H4t,{viewportId:r0e})})})}):Y.jsx(Y.Fragment,{})}const ly=(t,e,n)=>{if(!t)return n;if(typeof t=="object")switch(e){case"base":return""+(t.base??n);case"xs":return""+(t.xs??t.base??n);case"sm":return""+(t.sm??t.xs??t.base??n);case"md":return""+(t.md??t.sm??t.xs??t.base??n);case"lg":return""+(t.lg??t.md??t.sm??t.xs??t.base??n);case"xl":return""+(t.xl??t.lg??t.md??t.sm??t.xs??t.base??n)}return""+t},gPt=()=>{const t="xs",e={defaultRadius:"md",components:{Accordion:Su.extend({defaultProps:{variant:"contained"},styles:{content:{padding:"0"}}}),AccordionPanel:Su.Panel.extend({defaultProps:{pl:t,pr:t,pb:t}}),Anchor:Lg.extend({defaultProps:{}}),Button:pf.extend({defaultProps:{variant:"default"}}),ColorInput:ZI.extend({styles:{input:{cursor:"pointer"}}}),Group:Ap.extend({defaultProps:{gap:t}}),Paper:S0.extend({defaultProps:{px:t,py:t,withBorder:!0}}),Stack:fm.extend({defaultProps:{gap:"xs"}}),Switch:T6.extend({defaultProps:{size:"md"},styles:{track:{cursor:"pointer"}}}),Tabs:y0.extend({}),TabsPanel:y0.Panel.extend({defaultProps:{pt:t}}),AppBuilderContainerWrapper:hCt({containerThemeOverrides:{appshell:{top:{components:{Anchor:Lg.extend({defaultProps:{c:"inherit"}}),Paper:S0.extend({defaultProps:{withBorder:!1}}),AppBuilderHorizontalContainer:{defaultProps:{justify:"left"}},AppBuilderTextWidgetComponent:vj({styles:{root:{overflow:"clip"}}})}},bottom:{components:{Anchor:Lg.extend({defaultProps:{c:"inherit"}}),AppBuilderTextWidgetComponent:vj({styles:{root:{overflow:"auto"}}})}}}}}),AppBuilderImage:dkt({}),AppBuilderAppShellTemplatePage:mCt({}),AppBuilderGridTemplatePage:TCt({}),AppBuilderHorizontalContainer:uCt({}),AppBuilderTemplateSelector:RCt({}),AppBuilderTextWidgetComponent:vj({}),AppBuilderVerticalContainer:aCt({}),DefaultSession:$kt({}),Icon:Bkt({}),LoaderPage:qkt({}),MarkdownWidgetComponent:okt({}),ParametersAndExportsAccordionComponent:Ikt({}),ParameterSliderComponent:gkt({}),ViewportBranding:Dbt({light:{backgroundColor:bT.colors.gray[0],logo:"https://viewer.shapediver.com/v3/graphics/logo_animated_breath_inverted.svg"},dark:{backgroundColor:bT.colors.dark[8],logo:void 0}}),ViewportComponent:Rbt({}),ViewportIcons:j4t({}),ViewportOverlayWrapper:Lbt({})}},n=eEe(l=>l.themeOverride),i=j5e(e,n);return console.debug("Theme",i),{theme:i,resolver:l=>({variables:{"--appbuilder-appshelltemplate-headerheight-base":ly(l.components.AppBuilderAppShellTemplatePage.defaultProps.headerHeight,"base","4em"),"--appbuilder-appshelltemplate-headerheight-xs":ly(l.components.AppBuilderAppShellTemplatePage.defaultProps.headerHeight,"xs","4em"),"--appbuilder-appshelltemplate-headerheight-sm":ly(l.components.AppBuilderAppShellTemplatePage.defaultProps.headerHeight,"sm","4em"),"--appbuilder-appshelltemplate-headerheight-md":ly(l.components.AppBuilderAppShellTemplatePage.defaultProps.headerHeight,"md","4em"),"--appbuilder-appshelltemplate-headerheight-lg":ly(l.components.AppBuilderAppShellTemplatePage.defaultProps.headerHeight,"lg","4em"),"--appbuilder-appshelltemplate-headerheight-xl":ly(l.components.AppBuilderAppShellTemplatePage.defaultProps.headerHeight,"xl","4em")},light:{},dark:{}})}};var fY,pSe=-1,kA=function(t){addEventListener("pageshow",function(e){e.persisted&&(pSe=e.timeStamp,t(e))},!0)},_J=function(){var t=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(t&&t.responseStart>0&&t.responseStart<performance.now())return t},dB=function(){var t=_J();return t&&t.activationStart||0},Od=function(t,e){var n=_J(),i="navigate";return pSe>=0?i="back-forward-cache":n&&(document.prerendering||dB()>0?i="prerender":document.wasDiscarded?i="restore":n.type&&(i=n.type.replace(/_/g,"-"))),{name:t,value:e===void 0?-1:e,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:i}},AM=function(t,e,n){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var i=new PerformanceObserver(function(o){Promise.resolve().then(function(){e(o.getEntries())})});return i.observe(Object.assign({type:t,buffered:!0},n||{})),i}}catch{}},Id=function(t,e,n,i){var o,l;return function(d){e.value>=0&&(d||i)&&((l=e.value-(o||0))||o===void 0)&&(o=e.value,e.delta=l,e.rating=function(p,g){return p>g[1]?"poor":p>g[0]?"needs-improvement":"good"}(e.value,n),t(e))}},yJ=function(t){requestAnimationFrame(function(){return requestAnimationFrame(function(){return t()})})},mI=function(t){document.addEventListener("visibilitychange",function(){document.visibilityState==="hidden"&&t()})},dY=function(t){var e=!1;return function(){e||(t(),e=!0)}},hb=-1,i0e=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},gI=function(t){document.visibilityState==="hidden"&&hb>-1&&(hb=t.type==="visibilitychange"?t.timeStamp:0,LCt())},s0e=function(){addEventListener("visibilitychange",gI,!0),addEventListener("prerenderingchange",gI,!0)},LCt=function(){removeEventListener("visibilitychange",gI,!0),removeEventListener("prerenderingchange",gI,!0)},mSe=function(){return hb<0&&(hb=i0e(),s0e(),kA(function(){setTimeout(function(){hb=i0e(),s0e()},0)})),{get firstHiddenTime(){return hb}}},hB=function(t){document.prerendering?addEventListener("prerenderingchange",function(){return t()},!0):t()},o0e=[1800,3e3],gSe=function(t,e){e=e||{},hB(function(){var n,i=mSe(),o=Od("FCP"),l=AM("paint",function(d){d.forEach(function(p){p.name==="first-contentful-paint"&&(l.disconnect(),p.startTime<i.firstHiddenTime&&(o.value=Math.max(p.startTime-dB(),0),o.entries.push(p),n(!0)))})});l&&(n=Id(t,o,o0e,e.reportAllChanges),kA(function(d){o=Od("FCP"),n=Id(t,o,o0e,e.reportAllChanges),yJ(function(){o.value=performance.now()-d.timeStamp,n(!0)})}))})},a0e=[.1,.25],zCt=function(t,e){e=e||{},gSe(dY(function(){var n,i=Od("CLS",0),o=0,l=[],d=function(g){g.forEach(function(v){if(!v.hadRecentInput){var _=l[0],b=l[l.length-1];o&&v.startTime-b.startTime<1e3&&v.startTime-_.startTime<5e3?(o+=v.value,l.push(v)):(o=v.value,l=[v])}}),o>i.value&&(i.value=o,i.entries=l,n())},p=AM("layout-shift",d);p&&(n=Id(t,i,a0e,e.reportAllChanges),mI(function(){d(p.takeRecords()),n(!0)}),kA(function(){o=0,i=Od("CLS",0),n=Id(t,i,a0e,e.reportAllChanges),yJ(function(){return n()})}),setTimeout(n,0))}))},vSe=0,_j=1/0,IC=0,BCt=function(t){t.forEach(function(e){e.interactionId&&(_j=Math.min(_j,e.interactionId),IC=Math.max(IC,e.interactionId),vSe=IC?(IC-_j)/7+1:0)})},UCt=function(){"interactionCount"in performance||fY||(fY=AM("event",BCt,{type:"event",buffered:!0,durationThreshold:0}))},md=[],iO=new Map,_Se=0,FCt=function(){return(fY?vSe:performance.interactionCount||0)-_Se},VCt=[],GCt=function(t){if(VCt.forEach(function(o){return o(t)}),t.interactionId||t.entryType==="first-input"){var e=md[md.length-1],n=iO.get(t.interactionId);if(n||md.length<10||t.duration>e.latency){if(n)t.duration>n.latency?(n.entries=[t],n.latency=t.duration):t.duration===n.latency&&t.startTime===n.entries[0].startTime&&n.entries.push(t);else{var i={id:t.interactionId,latency:t.duration,entries:[t]};iO.set(i.id,i),md.push(i)}md.sort(function(o,l){return l.latency-o.latency}),md.length>10&&md.splice(10).forEach(function(o){return iO.delete(o.id)})}}},l0e=[200,500],jCt=function(t,e){e=e||{},hB(function(){var n;UCt();var i,o=Od("INP"),l=function(p){p.forEach(GCt);var g,v=(g=Math.min(md.length-1,Math.floor(FCt()/50)),md[g]);v&&v.latency!==o.value&&(o.value=v.latency,o.entries=v.entries,i())},d=AM("event",l,{durationThreshold:(n=e.durationThreshold)!==null&&n!==void 0?n:40});i=Id(t,o,l0e,e.reportAllChanges),d&&("PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&d.observe({type:"first-input",buffered:!0}),mI(function(){l(d.takeRecords()),i(!0)}),kA(function(){_Se=0,md.length=0,iO.clear(),o=Od("INP"),i=Id(t,o,l0e,e.reportAllChanges)}))})},c0e=[2500,4e3],yj={},HCt=function(t,e){e=e||{},hB(function(){var n,i=mSe(),o=Od("LCP"),l=function(g){e.reportAllChanges||(g=g.slice(-1)),g.forEach(function(v){v.startTime<i.firstHiddenTime&&(o.value=Math.max(v.startTime-dB(),0),o.entries=[v],n())})},d=AM("largest-contentful-paint",l);if(d){n=Id(t,o,c0e,e.reportAllChanges);var p=dY(function(){yj[o.id]||(l(d.takeRecords()),d.disconnect(),yj[o.id]=!0,n(!0))});["keydown","click"].forEach(function(g){addEventListener(g,function(){return v=p,_=self.requestIdleCallback||self.setTimeout,b=-1,v=dY(v),document.visibilityState==="hidden"?v():(b=_(v),mI(v)),b;var v,_,b},!0)}),mI(p),kA(function(g){o=Od("LCP"),n=Id(t,o,c0e,e.reportAllChanges),yJ(function(){o.value=performance.now()-g.timeStamp,yj[o.id]=!0,n(!0)})})}})},u0e=[800,1800],$Ct=function t(e){document.prerendering?hB(function(){return t(e)}):document.readyState!=="complete"?addEventListener("load",function(){return t(e)},!0):setTimeout(e,0)},WCt=function(t,e){e=e||{};var n=Od("TTFB"),i=Id(t,n,u0e,e.reportAllChanges);$Ct(function(){var o=_J();o&&(n.value=Math.max(o.responseStart-dB(),0),n.entries=[o],i(!0),kA(function(){n=Od("TTFB",0),(i=Id(t,n,u0e,e.reportAllChanges))(!0)}))})};const vPt=t=>{t&&t instanceof Function&&(zCt(t),jCt(t),gSe(t),HCt(t),WCt(t))};export{Gh as $,mPt as A,Xt as B,epe as C,pf as D,gX as E,hX as F,Ap as G,nM as H,Xhe as I,Uz as J,Dd as K,bp as L,T5e as M,Mwt as N,kwt as O,S0 as P,uY as Q,k8e as R,dPt as S,cp as T,R0 as U,fSe as V,hSe as W,IX as X,jkt as Y,V5e as Z,G5e as _,vPt as a,gCt as a0,Obt as a1,zbt as a2,H4t as a3,Swt as a4,Xs as a5,Wkt as a6,bwt as a7,Ewt as a8,k0 as a9,Vn as aa,Twt as ab,DCt as ac,ukt as ad,lSe as ae,Hc as b,cne as c,Dt as d,er as e,YCt as f,op as g,pn as h,mi as i,Y as j,ec as k,aq as l,Ya as m,Are as n,lRe as o,tc as p,Wo as q,de as r,Cl as s,Hq as t,gPt as u,cv as v,fa as w,qa as x,Gn as y,QI as z};
//# sourceMappingURL=reportWebVitals-Dvcr2sJA.js.map
